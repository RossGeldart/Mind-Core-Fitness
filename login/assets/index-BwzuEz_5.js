(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Cm={exports:{}},cc={};var t_;function Vw(){if(t_)return cc;t_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:i,type:a,key:d,ref:o!==void 0?o:null,props:u}}return cc.Fragment=e,cc.jsx=n,cc.jsxs=n,cc}var n_;function Pw(){return n_||(n_=1,Cm.exports=Vw()),Cm.exports}var l=Pw(),jm={exports:{}},Ge={};var s_;function Uw(){if(s_)return Ge;s_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),E=Symbol.iterator;function P(w){return w===null||typeof w!="object"?null:(w=E&&w[E]||w["@@iterator"],typeof w=="function"?w:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,V={};function H(w,G,Y){this.props=w,this.context=G,this.refs=V,this.updater=Y||O}H.prototype.isReactComponent={},H.prototype.setState=function(w,G){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,G,"setState")},H.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function F(){}F.prototype=H.prototype;function ne(w,G,Y){this.props=w,this.context=G,this.refs=V,this.updater=Y||O}var ce=ne.prototype=new F;ce.constructor=ne,D(ce,H.prototype),ce.isPureReactComponent=!0;var ue=Array.isArray;function me(){}var k={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(w,G,Y){var X=Y.ref;return{$$typeof:i,type:w,key:G,ref:X!==void 0?X:null,props:Y}}function z(w,G){return R(w.type,G,w.props)}function L(w){return typeof w=="object"&&w!==null&&w.$$typeof===i}function q(w){var G={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(Y){return G[Y]})}var j=/\/+/g;function Ee(w,G){return typeof w=="object"&&w!==null&&w.key!=null?q(""+w.key):G.toString(36)}function je(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(me,me):(w.status="pending",w.then(function(G){w.status==="pending"&&(w.status="fulfilled",w.value=G)},function(G){w.status==="pending"&&(w.status="rejected",w.reason=G)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function B(w,G,Y,X,I){var K=typeof w;(K==="undefined"||K==="boolean")&&(w=null);var se=!1;if(w===null)se=!0;else switch(K){case"bigint":case"string":case"number":se=!0;break;case"object":switch(w.$$typeof){case i:case e:se=!0;break;case b:return se=w._init,B(se(w._payload),G,Y,X,I)}}if(se)return I=I(w),se=X===""?"."+Ee(w,0):X,ue(I)?(Y="",se!=null&&(Y=se.replace(j,"$&/")+"/"),B(I,G,Y,"",function(Be){return Be})):I!=null&&(L(I)&&(I=z(I,Y+(I.key==null||w&&w.key===I.key?"":(""+I.key).replace(j,"$&/")+"/")+se)),G.push(I)),1;se=0;var ve=X===""?".":X+":";if(ue(w))for(var ke=0;ke<w.length;ke++)X=w[ke],K=ve+Ee(X,ke),se+=B(X,G,Y,K,I);else if(ke=P(w),typeof ke=="function")for(w=ke.call(w),ke=0;!(X=w.next()).done;)X=X.value,K=ve+Ee(X,ke++),se+=B(X,G,Y,K,I);else if(K==="object"){if(typeof w.then=="function")return B(je(w),G,Y,X,I);throw G=String(w),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return se}function re(w,G,Y){if(w==null)return w;var X=[],I=0;return B(w,X,"","",function(K){return G.call(Y,K,I++)}),X}function be(w){if(w._status===-1){var G=w._result;G=G(),G.then(function(Y){(w._status===0||w._status===-1)&&(w._status=1,w._result=Y)},function(Y){(w._status===0||w._status===-1)&&(w._status=2,w._result=Y)}),w._status===-1&&(w._status=0,w._result=G)}if(w._status===1)return w._result.default;throw w._result}var _e=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},Ne={map:re,forEach:function(w,G,Y){re(w,function(){G.apply(this,arguments)},Y)},count:function(w){var G=0;return re(w,function(){G++}),G},toArray:function(w){return re(w,function(G){return G})||[]},only:function(w){if(!L(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return Ge.Activity=T,Ge.Children=Ne,Ge.Component=H,Ge.Fragment=n,Ge.Profiler=o,Ge.PureComponent=ne,Ge.StrictMode=a,Ge.Suspense=g,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(w){return k.H.useMemoCache(w)}},Ge.cache=function(w){return function(){return w.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(w,G,Y){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var X=D({},w.props),I=w.key;if(G!=null)for(K in G.key!==void 0&&(I=""+G.key),G)!N.call(G,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&G.ref===void 0||(X[K]=G[K]);var K=arguments.length-2;if(K===1)X.children=Y;else if(1<K){for(var se=Array(K),ve=0;ve<K;ve++)se[ve]=arguments[ve+2];X.children=se}return R(w.type,I,X)},Ge.createContext=function(w){return w={$$typeof:d,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:u,_context:w},w},Ge.createElement=function(w,G,Y){var X,I={},K=null;if(G!=null)for(X in G.key!==void 0&&(K=""+G.key),G)N.call(G,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(I[X]=G[X]);var se=arguments.length-2;if(se===1)I.children=Y;else if(1<se){for(var ve=Array(se),ke=0;ke<se;ke++)ve[ke]=arguments[ke+2];I.children=ve}if(w&&w.defaultProps)for(X in se=w.defaultProps,se)I[X]===void 0&&(I[X]=se[X]);return R(w,K,I)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(w){return{$$typeof:p,render:w}},Ge.isValidElement=L,Ge.lazy=function(w){return{$$typeof:b,_payload:{_status:-1,_result:w},_init:be}},Ge.memo=function(w,G){return{$$typeof:y,type:w,compare:G===void 0?null:G}},Ge.startTransition=function(w){var G=k.T,Y={};k.T=Y;try{var X=w(),I=k.S;I!==null&&I(Y,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(me,_e)}catch(K){_e(K)}finally{G!==null&&Y.types!==null&&(G.types=Y.types),k.T=G}},Ge.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Ge.use=function(w){return k.H.use(w)},Ge.useActionState=function(w,G,Y){return k.H.useActionState(w,G,Y)},Ge.useCallback=function(w,G){return k.H.useCallback(w,G)},Ge.useContext=function(w){return k.H.useContext(w)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(w,G){return k.H.useDeferredValue(w,G)},Ge.useEffect=function(w,G){return k.H.useEffect(w,G)},Ge.useEffectEvent=function(w){return k.H.useEffectEvent(w)},Ge.useId=function(){return k.H.useId()},Ge.useImperativeHandle=function(w,G,Y){return k.H.useImperativeHandle(w,G,Y)},Ge.useInsertionEffect=function(w,G){return k.H.useInsertionEffect(w,G)},Ge.useLayoutEffect=function(w,G){return k.H.useLayoutEffect(w,G)},Ge.useMemo=function(w,G){return k.H.useMemo(w,G)},Ge.useOptimistic=function(w,G){return k.H.useOptimistic(w,G)},Ge.useReducer=function(w,G,Y){return k.H.useReducer(w,G,Y)},Ge.useRef=function(w){return k.H.useRef(w)},Ge.useState=function(w){return k.H.useState(w)},Ge.useSyncExternalStore=function(w,G,Y){return k.H.useSyncExternalStore(w,G,Y)},Ge.useTransition=function(){return k.H.useTransition()},Ge.version="19.2.4",Ge}var i_;function Ip(){return i_||(i_=1,jm.exports=Uw()),jm.exports}var C=Ip(),Rm={exports:{}},uc={},km={exports:{}},Dm={};var a_;function Bw(){return a_||(a_=1,(function(i){function e(B,re){var be=B.length;B.push(re);e:for(;0<be;){var _e=be-1>>>1,Ne=B[_e];if(0<o(Ne,re))B[_e]=re,B[be]=Ne,be=_e;else break e}}function n(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var re=B[0],be=B.pop();if(be!==re){B[0]=be;e:for(var _e=0,Ne=B.length,w=Ne>>>1;_e<w;){var G=2*(_e+1)-1,Y=B[G],X=G+1,I=B[X];if(0>o(Y,be))X<Ne&&0>o(I,Y)?(B[_e]=I,B[X]=be,_e=X):(B[_e]=Y,B[G]=be,_e=G);else if(X<Ne&&0>o(I,be))B[_e]=I,B[X]=be,_e=X;else break e}}return re}function o(B,re){var be=B.sortIndex-re.sortIndex;return be!==0?be:B.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();i.unstable_now=function(){return d.now()-p}}var g=[],y=[],b=1,T=null,E=3,P=!1,O=!1,D=!1,V=!1,H=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function ce(B){for(var re=n(y);re!==null;){if(re.callback===null)a(y);else if(re.startTime<=B)a(y),re.sortIndex=re.expirationTime,e(g,re);else break;re=n(y)}}function ue(B){if(D=!1,ce(B),!O)if(n(g)!==null)O=!0,me||(me=!0,q());else{var re=n(y);re!==null&&je(ue,re.startTime-B)}}var me=!1,k=-1,N=5,R=-1;function z(){return V?!0:!(i.unstable_now()-R<N)}function L(){if(V=!1,me){var B=i.unstable_now();R=B;var re=!0;try{e:{O=!1,D&&(D=!1,F(k),k=-1),P=!0;var be=E;try{t:{for(ce(B),T=n(g);T!==null&&!(T.expirationTime>B&&z());){var _e=T.callback;if(typeof _e=="function"){T.callback=null,E=T.priorityLevel;var Ne=_e(T.expirationTime<=B);if(B=i.unstable_now(),typeof Ne=="function"){T.callback=Ne,ce(B),re=!0;break t}T===n(g)&&a(g),ce(B)}else a(g);T=n(g)}if(T!==null)re=!0;else{var w=n(y);w!==null&&je(ue,w.startTime-B),re=!1}}break e}finally{T=null,E=be,P=!1}re=void 0}}finally{re?q():me=!1}}}var q;if(typeof ne=="function")q=function(){ne(L)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Ee=j.port2;j.port1.onmessage=L,q=function(){Ee.postMessage(null)}}else q=function(){H(L,0)};function je(B,re){k=H(function(){B(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_next=function(B){switch(E){case 1:case 2:case 3:var re=3;break;default:re=E}var be=E;E=re;try{return B()}finally{E=be}},i.unstable_requestPaint=function(){V=!0},i.unstable_runWithPriority=function(B,re){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var be=E;E=B;try{return re()}finally{E=be}},i.unstable_scheduleCallback=function(B,re,be){var _e=i.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?_e+be:_e):be=_e,B){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=be+Ne,B={id:b++,callback:re,priorityLevel:B,startTime:be,expirationTime:Ne,sortIndex:-1},be>_e?(B.sortIndex=be,e(y,B),n(g)===null&&B===n(y)&&(D?(F(k),k=-1):D=!0,je(ue,be-_e))):(B.sortIndex=Ne,e(g,B),O||P||(O=!0,me||(me=!0,q()))),B},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(B){var re=E;return function(){var be=E;E=re;try{return B.apply(this,arguments)}finally{E=be}}}})(Dm)),Dm}var r_;function zw(){return r_||(r_=1,km.exports=Bw()),km.exports}var Im={exports:{}},Dn={};var o_;function qw(){if(o_)return Dn;o_=1;var i=Ip();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,b){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:y,implementation:b}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Dn.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,b)},Dn.flushSync=function(g){var y=d.T,b=a.p;try{if(d.T=null,a.p=2,g)return g()}finally{d.T=y,a.p=b,a.d.f()}},Dn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(g,y))},Dn.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Dn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,T=p(b,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?a.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:P}):b==="script"&&a.d.X(g,{crossOrigin:T,integrity:E,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Dn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);a.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(g)},Dn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,T=p(b,y.crossOrigin);a.d.L(g,b,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Dn.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);a.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(g)},Dn.requestFormReset=function(g){a.d.r(g)},Dn.unstable_batchedUpdates=function(g,y){return g(y)},Dn.useFormState=function(g,y,b){return d.H.useFormState(g,y,b)},Dn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Dn.version="19.2.4",Dn}var l_;function Fw(){if(l_)return Im.exports;l_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Im.exports=qw(),Im.exports}var c_;function Hw(){if(c_)return uc;c_=1;var i=zw(),e=Ip(),n=Fw();function a(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(a(188))}function y(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(a(188));return s!==t?null:t}for(var r=t,c=s;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return g(f),t;if(m===c)return g(f),s;m=m.sibling}throw Error(a(188))}if(r.return!==c.return)r=f,c=m;else{for(var _=!1,S=f.child;S;){if(S===r){_=!0,r=f,c=m;break}if(S===c){_=!0,c=f,r=m;break}S=S.sibling}if(!_){for(S=m.child;S;){if(S===r){_=!0,r=m,c=f;break}if(S===c){_=!0,c=m,r=f;break}S=S.sibling}if(!_)throw Error(a(189))}}if(r.alternate!==c)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var T=Object.assign,E=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function Ee(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case D:return"Fragment";case H:return"Profiler";case V:return"StrictMode";case ue:return"Suspense";case me:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case ne:return t.displayName||"Context";case F:return(t._context.displayName||"Context")+".Consumer";case ce:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return s=t.displayName||null,s!==null?s:Ee(t.type)||"Memo";case N:s=t._payload,t=t._init;try{return Ee(t(s))}catch{}}return null}var je=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},_e=[],Ne=-1;function w(t){return{current:t}}function G(t){0>Ne||(t.current=_e[Ne],_e[Ne]=null,Ne--)}function Y(t,s){Ne++,_e[Ne]=t.current,t.current=s}var X=w(null),I=w(null),K=w(null),se=w(null);function ve(t,s){switch(Y(K,s),Y(I,t),Y(X,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?w0(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=w0(s),t=S0(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(X),Y(X,t)}function ke(){G(X),G(I),G(K)}function Be(t){t.memoizedState!==null&&Y(se,t);var s=X.current,r=S0(s,t.type);s!==r&&(Y(I,t),Y(X,r))}function pe(t){I.current===t&&(G(X),G(I)),se.current===t&&(G(se),ac._currentValue=be)}var ct,Vt;function Et(t){if(ct===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);ct=s&&s[1]||"",Vt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ct+t+Vt}var wt=!1;function rt(t,s){if(!t||wt)return"";wt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var te=ae}Reflect.construct(t,[],fe)}else{try{fe.call()}catch(ae){te=ae}t.call(fe.prototype)}}else{try{throw Error()}catch(ae){te=ae}(fe=t())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),_=m[0],S=m[1];if(_&&S){var U=_.split(`
`),ee=S.split(`
`);for(f=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(c===U.length||f===ee.length)for(c=U.length-1,f=ee.length-1;1<=c&&0<=f&&U[c]!==ee[f];)f--;for(;1<=c&&0<=f;c--,f--)if(U[c]!==ee[f]){if(c!==1||f!==1)do if(c--,f--,0>f||U[c]!==ee[f]){var le=`
`+U[c].replace(" at new "," at ");return t.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",t.displayName)),le}while(1<=c&&0<=f);break}}}finally{wt=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Et(r):""}function Oe(t,s){switch(t.tag){case 26:case 27:case 5:return Et(t.type);case 16:return Et("Lazy");case 13:return t.child!==s&&s!==null?Et("Suspense Fallback"):Et("Suspense");case 19:return Et("SuspenseList");case 0:case 15:return rt(t.type,!1);case 11:return rt(t.type.render,!1);case 1:return rt(t.type,!0);case 31:return Et("Activity");default:return""}}function mt(t){try{var s="",r=null;do s+=Oe(t,r),r=t,t=t.return;while(t);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ot=Object.prototype.hasOwnProperty,ht=i.unstable_scheduleCallback,ts=i.unstable_cancelCallback,Wt=i.unstable_shouldYield,ys=i.unstable_requestPaint,dt=i.unstable_now,ns=i.unstable_getCurrentPriorityLevel,Ni=i.unstable_ImmediatePriority,Os=i.unstable_UserBlockingPriority,vs=i.unstable_NormalPriority,or=i.unstable_LowPriority,Zs=i.unstable_IdlePriority,Pn=i.log,Fn=i.unstable_setDisableYieldValue,Rn=null,Pt=null;function _n(t){if(typeof Pn=="function"&&Fn(t),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Rn,t)}catch{}}var Mt=Math.clz32?Math.clz32:ti,ei=Math.log,ss=Math.LN2;function ti(t){return t>>>=0,t===0?32:31-(ei(t)/ss|0)|0}var jt=256,fn=262144,Rt=4194304;function Un(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Hn(t,s,r){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=Un(c):(_&=S,_!==0?f=Un(_):r||(r=S&~t,r!==0&&(f=Un(r))))):(S=c&~m,S!==0?f=Un(S):_!==0?f=Un(_):r||(r=c&~t,r!==0&&(f=Un(r)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,r=s&-s,m>=r||m===32&&(r&4194048)!==0)?s:f}function ln(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function ni(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ca(){var t=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),t}function kn(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function bn(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function is(t,s,r,c,f,m){var _=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var S=t.entanglements,U=t.expirationTimes,ee=t.hiddenUpdates;for(r=_&~r;0<r;){var le=31-Mt(r),fe=1<<le;S[le]=0,U[le]=-1;var te=ee[le];if(te!==null)for(ee[le]=null,le=0;le<te.length;le++){var ae=te[le];ae!==null&&(ae.lane&=-536870913)}r&=~fe}c!==0&&W(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function W(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var c=31-Mt(s);t.entangledLanes|=s,t.entanglements[c]=t.entanglements[c]|1073741824|r&261930}function ye(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var c=31-Mt(r),f=1<<c;f&s|t[c]&s&&(t[c]|=s),r&=~f}}function xe(t,s){var r=s&-s;return r=(r&42)!==0?1:M(r),(r&(t.suspendedLanes|s))!==0?0:r}function M(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function oe(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Te(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:Q0(t.type))}function Se(t,s){var r=re.p;try{return re.p=t,s()}finally{re.p=r}}var Le=Math.random().toString(36).slice(2),Ve="__reactFiber$"+Le,Qe="__reactProps$"+Le,cn="__reactContainer$"+Le,mn="__reactEvents$"+Le,$n="__reactListeners$"+Le,si="__reactHandles$"+Le,Ai="__reactResources$"+Le,_s="__reactMarker$"+Le;function Ci(t){delete t[Ve],delete t[Qe],delete t[mn],delete t[$n],delete t[si]}function $e(t){var s=t[Ve];if(s)return s;for(var r=t.parentNode;r;){if(s=r[cn]||r[Ve]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=D0(t);t!==null;){if(r=t[Ve])return r;t=D0(t)}return s}t=r,r=t.parentNode}return null}function pn(t){if(t=t[Ve]||t[cn]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function xn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(a(33))}function ii(t){var s=t[Ai];return s||(s=t[Ai]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Xt(t){t[_s]=!0}var dl=new Set,fl={};function ai(t,s){ri(t,s),ri(t+"Capture",s)}function ri(t,s){for(fl[t]=s,t=0;t<s.length;t++)dl.add(s[t])}var ml=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pl={},gl={};function Zc(t){return ot.call(gl,t)?!0:ot.call(pl,t)?!1:ml.test(t)?gl[t]=!0:(pl[t]=!0,!1)}function Qr(t,s,r){if(Zc(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function as(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function Jt(t,s,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+c)}}function gn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ua(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yl(t,s,r){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){r=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(_){r=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function bt(t){if(!t._valueTracker){var s=ua(t)?"checked":"value";t._valueTracker=yl(t,s,""+t[s])}}function lr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),c="";return t&&(c=ua(t)?t.checked?"true":"false":t.value),t=c,t!==r?(s.setValue(t),!0):!1}function oi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var cr=/[\n"\\]/g;function Gn(t){return t.replace(cr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Kr(t,s,r,c,f,m,_,S){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+gn(s)):t.value!==""+gn(s)&&(t.value=""+gn(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?vl(t,_,gn(s)):r!=null?vl(t,_,gn(r)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+gn(S):t.removeAttribute("name")}function eu(t,s,r,c,f,m,_,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){bt(t);return}r=r!=null?""+gn(r):"",s=s!=null?""+gn(s):r,S||s===t.value||(t.value=s),t.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=S?t.checked:!!c,t.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),bt(t)}function vl(t,s,r){s==="number"&&oi(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function ha(t,s,r,c){if(t=t.options,s){s={};for(var f=0;f<r.length;f++)s["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=s.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&c&&(t[r].defaultSelected=!0)}else{for(r=""+gn(r),s=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function tu(t,s,r){if(s!=null&&(s=""+gn(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+gn(r):""}function da(t,s,r,c){if(s==null){if(c!=null){if(r!=null)throw Error(a(92));if(je(c)){if(1<c.length)throw Error(a(93));c=c[0]}r=c}r==null&&(r=""),s=r}r=gn(s),t.defaultValue=r,c=t.textContent,c===r&&c!==""&&c!==null&&(t.value=c),bt(t)}function Yn(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var nu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _l(t,s,r){var c=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":c?t.setProperty(s,r):typeof r!="number"||r===0||nu.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function bl(t,s,r){if(s!=null&&typeof s!="object")throw Error(a(62));if(t=t.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&r[f]!==c&&_l(t,f,c)}else for(var m in s)s.hasOwnProperty(m)&&_l(t,m,s[m])}function Wr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var su=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xr(t){return fa.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ls(){}var xl=null;function bs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ma=null,li=null;function ur(t){var s=pn(t);if(s&&(t=s.stateNode)){var r=t[Qe]||null;e:switch(t=s.stateNode,s.type){case"input":if(Kr(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Gn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var c=r[s];if(c!==t&&c.form===t.form){var f=c[Qe]||null;if(!f)throw Error(a(90));Kr(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<r.length;s++)c=r[s],c.form===t.form&&lr(c)}break e;case"textarea":tu(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&ha(t,!!r.multiple,s,!1)}}}var Jr=!1;function pa(t,s,r){if(Jr)return t(s,r);Jr=!0;try{var c=t(s);return c}finally{if(Jr=!1,(ma!==null||li!==null)&&(Wu(),ma&&(s=ma,t=li,li=ma=null,ur(s),t)))for(s=0;s<t.length;s++)ur(t[s])}}function Vs(t,s){var r=t.stateNode;if(r===null)return null;var c=r[Qe]||null;if(c===null)return null;r=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,s,typeof r));return r}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hr=!1;if(xs)try{var St={};Object.defineProperty(St,"passive",{get:function(){hr=!0}}),window.addEventListener("test",St,St),window.removeEventListener("test",St,St)}catch{hr=!1}var ci=null,Tl=null,dr=null;function El(){if(dr)return dr;var t,s=Tl,r=s.length,c,f="value"in ci?ci.value:ci.textContent,m=f.length;for(t=0;t<r&&s[t]===f[t];t++);var _=r-t;for(c=1;c<=_&&s[r-c]===f[m-c];c++);return dr=f.slice(t,1<c?1-c:void 0)}function fr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ji(){return!0}function Ps(){return!1}function Tn(t){function s(r,c,f,m,_){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(r=t[S],this[S]=r?r(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ji:Ps,this.isPropagationStopped=Ps,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),s}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ui=Tn(Ri),ga=T({},Ri,{view:0,detail:0}),wl=Tn(ga),ya,Zr,hi,eo=T({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:va,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hi&&(hi&&t.type==="mousemove"?(ya=t.screenX-hi.screenX,Zr=t.screenY-hi.screenY):Zr=ya=0,hi=t),ya)},movementY:function(t){return"movementY"in t?t.movementY:Zr}}),Sl=Tn(eo),mr=T({},eo,{dataTransfer:0}),iu=Tn(mr),au=T({},ga,{relatedTarget:0}),pr=Tn(au),Nl=T({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),ru=Tn(Nl),to=T({},Ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ou=Tn(to),lu=T({},Ri,{data:0}),di=Tn(lu),cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function du(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=hu[t])?!!s[t]:!1}function va(){return du}var Bn=T({},ga,{key:function(t){if(t.key){var s=cu[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=fr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:va,charCode:function(t){return t.type==="keypress"?fr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fu=Tn(Bn),mu=T({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ki=Tn(mu),h=T({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:va}),v=Tn(h),x=T({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Tn(x),J=T({},eo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=Tn(J),we=T({},Ri,{newState:0,oldState:0}),Ke=Tn(we),$t=[9,13,27,32],yt=xs&&"CompositionEvent"in window,Ut=null;xs&&"documentMode"in document&&(Ut=document.documentMode);var Ts=xs&&"TextEvent"in window&&!Ut,fi=xs&&(!yt||Ut&&8<Ut&&11>=Ut),Us=" ",Bs=!1;function gr(t,s){switch(t){case"keyup":return $t.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var so=!1;function oE(t,s){switch(t){case"compositionend":return no(s);case"keypress":return s.which!==32?null:(Bs=!0,Us);case"textInput":return t=s.data,t===Us&&Bs?null:t;default:return null}}function lE(t,s){if(so)return t==="compositionend"||!yt&&gr(t,s)?(t=El(),dr=Tl=ci=null,so=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return fi&&s.locale!=="ko"?null:s.data;default:return null}}var cE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Og(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!cE[t.type]:s==="textarea"}function Lg(t,s,r,c){ma?li?li.push(c):li=[c]:ma=c,s=sh(s,"onChange"),0<s.length&&(r=new ui("onChange","change",null,r,c),t.push({event:r,listeners:s}))}var Al=null,Cl=null;function uE(t){v0(t,0)}function pu(t){var s=xn(t);if(lr(s))return t}function Vg(t,s){if(t==="change")return s}var Pg=!1;if(xs){var Md;if(xs){var Od="oninput"in document;if(!Od){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),Od=typeof Ug.oninput=="function"}Md=Od}else Md=!1;Pg=Md&&(!document.documentMode||9<document.documentMode)}function Bg(){Al&&(Al.detachEvent("onpropertychange",zg),Cl=Al=null)}function zg(t){if(t.propertyName==="value"&&pu(Cl)){var s=[];Lg(s,Cl,t,bs(t)),pa(uE,s)}}function hE(t,s,r){t==="focusin"?(Bg(),Al=s,Cl=r,Al.attachEvent("onpropertychange",zg)):t==="focusout"&&Bg()}function dE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pu(Cl)}function fE(t,s){if(t==="click")return pu(s)}function mE(t,s){if(t==="input"||t==="change")return pu(s)}function pE(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var rs=typeof Object.is=="function"?Object.is:pE;function jl(t,s){if(rs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),c=Object.keys(s);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!ot.call(s,f)||!rs(t[f],s[f]))return!1}return!0}function qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fg(t,s){var r=qg(t);t=0;for(var c;r;){if(r.nodeType===3){if(c=t+r.textContent.length,t<=s&&c>=s)return{node:r,offset:s-t};t=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qg(r)}}function Hg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Hg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function $g(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=oi(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=oi(t.document)}return s}function Ld(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var gE=xs&&"documentMode"in document&&11>=document.documentMode,io=null,Vd=null,Rl=null,Pd=!1;function Gg(t,s,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Pd||io==null||io!==oi(c)||(c=io,"selectionStart"in c&&Ld(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Rl&&jl(Rl,c)||(Rl=c,c=sh(Vd,"onSelect"),0<c.length&&(s=new ui("onSelect","select",null,s,r),t.push({event:s,listeners:c}),s.target=io)))}function yr(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var ao={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionrun:yr("Transition","TransitionRun"),transitionstart:yr("Transition","TransitionStart"),transitioncancel:yr("Transition","TransitionCancel"),transitionend:yr("Transition","TransitionEnd")},Ud={},Yg={};xs&&(Yg=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function vr(t){if(Ud[t])return Ud[t];if(!ao[t])return t;var s=ao[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Yg)return Ud[t]=s[r];return t}var Qg=vr("animationend"),Kg=vr("animationiteration"),Wg=vr("animationstart"),yE=vr("transitionrun"),vE=vr("transitionstart"),_E=vr("transitioncancel"),Xg=vr("transitionend"),Jg=new Map,Bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bd.push("scrollEnd");function zs(t,s){Jg.set(t,s),ai(s,[t])}var gu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Es=[],ro=0,zd=0;function yu(){for(var t=ro,s=zd=ro=0;s<t;){var r=Es[s];Es[s++]=null;var c=Es[s];Es[s++]=null;var f=Es[s];Es[s++]=null;var m=Es[s];if(Es[s++]=null,c!==null&&f!==null){var _=c.pending;_===null?f.next=f:(f.next=_.next,_.next=f),c.pending=f}m!==0&&Zg(r,f,m)}}function vu(t,s,r,c){Es[ro++]=t,Es[ro++]=s,Es[ro++]=r,Es[ro++]=c,zd|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function qd(t,s,r,c){return vu(t,s,r,c),_u(t)}function _r(t,s){return vu(t,null,null,s),_u(t)}function Zg(t,s,r){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r);for(var f=!1,m=t.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-Mt(r),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[s]:c.push(s),s.lane=r|536870912),m):null}function _u(t){if(50<Jl)throw Jl=0,Jf=null,Error(a(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var oo={};function bE(t,s,r,c){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(t,s,r,c){return new bE(t,s,r,c)}function Fd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Di(t,s){var r=t.alternate;return r===null?(r=os(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function ey(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function bu(t,s,r,c,f,m){var _=0;if(c=t,typeof t=="function")Fd(t)&&(_=1);else if(typeof t=="string")_=Sw(t,r,X.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=os(31,r,s,f),t.elementType=R,t.lanes=m,t;case D:return br(r.children,f,m,s);case V:_=8,f|=24;break;case H:return t=os(12,r,s,f|2),t.elementType=H,t.lanes=m,t;case ue:return t=os(13,r,s,f),t.elementType=ue,t.lanes=m,t;case me:return t=os(19,r,s,f),t.elementType=me,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ne:_=10;break e;case F:_=9;break e;case ce:_=11;break e;case k:_=14;break e;case N:_=16,c=null;break e}_=29,r=Error(a(130,t===null?"null":typeof t,"")),c=null}return s=os(_,r,s,f),s.elementType=t,s.type=c,s.lanes=m,s}function br(t,s,r,c){return t=os(7,t,c,s),t.lanes=r,t}function Hd(t,s,r){return t=os(6,t,null,s),t.lanes=r,t}function ty(t){var s=os(18,null,null,0);return s.stateNode=t,s}function $d(t,s,r){return s=os(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var ny=new WeakMap;function ws(t,s){if(typeof t=="object"&&t!==null){var r=ny.get(t);return r!==void 0?r:(s={value:t,source:s,stack:mt(s)},ny.set(t,s),s)}return{value:t,source:s,stack:mt(s)}}var lo=[],co=0,xu=null,kl=0,Ss=[],Ns=0,_a=null,mi=1,pi="";function Ii(t,s){lo[co++]=kl,lo[co++]=xu,xu=t,kl=s}function sy(t,s,r){Ss[Ns++]=mi,Ss[Ns++]=pi,Ss[Ns++]=_a,_a=t;var c=mi;t=pi;var f=32-Mt(c)-1;c&=~(1<<f),r+=1;var m=32-Mt(s)+f;if(30<m){var _=f-f%5;m=(c&(1<<_)-1).toString(32),c>>=_,f-=_,mi=1<<32-Mt(s)+f|r<<f|c,pi=m+t}else mi=1<<m|r<<f|c,pi=t}function Gd(t){t.return!==null&&(Ii(t,1),sy(t,1,0))}function Yd(t){for(;t===xu;)xu=lo[--co],lo[co]=null,kl=lo[--co],lo[co]=null;for(;t===_a;)_a=Ss[--Ns],Ss[Ns]=null,pi=Ss[--Ns],Ss[Ns]=null,mi=Ss[--Ns],Ss[Ns]=null}function iy(t,s){Ss[Ns++]=mi,Ss[Ns++]=pi,Ss[Ns++]=_a,mi=s.id,pi=s.overflow,_a=t}var En=null,Ot=null,lt=!1,ba=null,As=!1,Qd=Error(a(519));function xa(t){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(ws(s,t)),Qd}function ay(t){var s=t.stateNode,r=t.type,c=t.memoizedProps;switch(s[Ve]=t,s[Qe]=c,r){case"dialog":et("cancel",s),et("close",s);break;case"iframe":case"object":case"embed":et("load",s);break;case"video":case"audio":for(r=0;r<ec.length;r++)et(ec[r],s);break;case"source":et("error",s);break;case"img":case"image":case"link":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"input":et("invalid",s),eu(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":et("invalid",s);break;case"textarea":et("invalid",s),da(s,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||c.suppressHydrationWarning===!0||T0(s.textContent,r)?(c.popover!=null&&(et("beforetoggle",s),et("toggle",s)),c.onScroll!=null&&et("scroll",s),c.onScrollEnd!=null&&et("scrollend",s),c.onClick!=null&&(s.onclick=Ls),s=!0):s=!1,s||xa(t,!0)}function ry(t){for(En=t.return;En;)switch(En.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:En=En.return}}function uo(t){if(t!==En)return!1;if(!lt)return ry(t),lt=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||fm(t.type,t.memoizedProps)),r=!r),r&&Ot&&xa(t),ry(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ot=k0(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ot=k0(t)}else s===27?(s=Ot,Oa(t.type)?(t=vm,vm=null,Ot=t):Ot=s):Ot=En?js(t.stateNode.nextSibling):null;return!0}function xr(){Ot=En=null,lt=!1}function Kd(){var t=ba;return t!==null&&(Xn===null?Xn=t:Xn.push.apply(Xn,t),ba=null),t}function Dl(t){ba===null?ba=[t]:ba.push(t)}var Wd=w(null),Tr=null,Mi=null;function Ta(t,s,r){Y(Wd,s._currentValue),s._currentValue=r}function Oi(t){t._currentValue=Wd.current,G(Wd)}function Xd(t,s,r){for(;t!==null;){var c=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),t===r)break;t=t.return}}function Jd(t,s,r,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var U=0;U<s.length;U++)if(S.context===s[U]){m.lanes|=r,S=m.alternate,S!==null&&(S.lanes|=r),Xd(m.return,r,t),c||(_=null);break e}m=S.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=r,m=_.alternate,m!==null&&(m.lanes|=r),Xd(_,r,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function ho(t,s,r,c){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var S=f.type;rs(f.pendingProps.value,_.value)||(t!==null?t.push(S):t=[S])}}else if(f===se.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(ac):t=[ac])}f=f.return}t!==null&&Jd(s,t,r,c),s.flags|=262144}function Tu(t){for(t=t.firstContext;t!==null;){if(!rs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Er(t){Tr=t,Mi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function wn(t){return oy(Tr,t)}function Eu(t,s){return Tr===null&&Er(t),oy(t,s)}function oy(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},Mi===null){if(t===null)throw Error(a(308));Mi=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Mi=Mi.next=s;return r}var xE=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,c){t.push(c)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},TE=i.unstable_scheduleCallback,EE=i.unstable_NormalPriority,Zt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zd(){return{controller:new xE,data:new Map,refCount:0}}function Il(t){t.refCount--,t.refCount===0&&TE(EE,function(){t.controller.abort()})}var Ml=null,ef=0,fo=0,mo=null;function wE(t,s){if(Ml===null){var r=Ml=[];ef=0,fo=im(),mo={status:"pending",value:void 0,then:function(c){r.push(c)}}}return ef++,s.then(ly,ly),s}function ly(){if(--ef===0&&Ml!==null){mo!==null&&(mo.status="fulfilled");var t=Ml;Ml=null,fo=0,mo=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function SE(t,s){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<r.length;f++)(0,r[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var cy=B.S;B.S=function(t,s){Gv=dt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&wE(t,s),cy!==null&&cy(t,s)};var wr=w(null);function tf(){var t=wr.current;return t!==null?t:kt.pooledCache}function wu(t,s){s===null?Y(wr,wr.current):Y(wr,s.pool)}function uy(){var t=tf();return t===null?null:{parent:Zt._currentValue,pool:t}}var po=Error(a(460)),nf=Error(a(474)),Su=Error(a(542)),Nu={then:function(){}};function hy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function dy(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(Ls,Ls),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,my(t),t;default:if(typeof s.status=="string")s.then(Ls,Ls);else{if(t=kt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=s,t.status="pending",t.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,my(t),t}throw Nr=s,po}}function Sr(t){try{var s=t._init;return s(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Nr=r,po):r}}var Nr=null;function fy(){if(Nr===null)throw Error(a(459));var t=Nr;return Nr=null,t}function my(t){if(t===po||t===Su)throw Error(a(483))}var go=null,Ol=0;function Au(t){var s=Ol;return Ol+=1,go===null&&(go=[]),dy(go,t,s)}function Ll(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Cu(t,s){throw s.$$typeof===E?Error(a(525)):(t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function py(t){function s(Q,$){if(t){var Z=Q.deletions;Z===null?(Q.deletions=[$],Q.flags|=16):Z.push($)}}function r(Q,$){if(!t)return null;for(;$!==null;)s(Q,$),$=$.sibling;return null}function c(Q){for(var $=new Map;Q!==null;)Q.key!==null?$.set(Q.key,Q):$.set(Q.index,Q),Q=Q.sibling;return $}function f(Q,$){return Q=Di(Q,$),Q.index=0,Q.sibling=null,Q}function m(Q,$,Z){return Q.index=Z,t?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<$?(Q.flags|=67108866,$):Z):(Q.flags|=67108866,$)):(Q.flags|=1048576,$)}function _(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function S(Q,$,Z,he){return $===null||$.tag!==6?($=Hd(Z,Q.mode,he),$.return=Q,$):($=f($,Z),$.return=Q,$)}function U(Q,$,Z,he){var Pe=Z.type;return Pe===D?le(Q,$,Z.props.children,he,Z.key):$!==null&&($.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===N&&Sr(Pe)===$.type)?($=f($,Z.props),Ll($,Z),$.return=Q,$):($=bu(Z.type,Z.key,Z.props,null,Q.mode,he),Ll($,Z),$.return=Q,$)}function ee(Q,$,Z,he){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=$d(Z,Q.mode,he),$.return=Q,$):($=f($,Z.children||[]),$.return=Q,$)}function le(Q,$,Z,he,Pe){return $===null||$.tag!==7?($=br(Z,Q.mode,he,Pe),$.return=Q,$):($=f($,Z),$.return=Q,$)}function fe(Q,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Hd(""+$,Q.mode,Z),$.return=Q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case P:return Z=bu($.type,$.key,$.props,null,Q.mode,Z),Ll(Z,$),Z.return=Q,Z;case O:return $=$d($,Q.mode,Z),$.return=Q,$;case N:return $=Sr($),fe(Q,$,Z)}if(je($)||q($))return $=br($,Q.mode,Z,null),$.return=Q,$;if(typeof $.then=="function")return fe(Q,Au($),Z);if($.$$typeof===ne)return fe(Q,Eu(Q,$),Z);Cu(Q,$)}return null}function te(Q,$,Z,he){var Pe=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Pe!==null?null:S(Q,$,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:return Z.key===Pe?U(Q,$,Z,he):null;case O:return Z.key===Pe?ee(Q,$,Z,he):null;case N:return Z=Sr(Z),te(Q,$,Z,he)}if(je(Z)||q(Z))return Pe!==null?null:le(Q,$,Z,he,null);if(typeof Z.then=="function")return te(Q,$,Au(Z),he);if(Z.$$typeof===ne)return te(Q,$,Eu(Q,Z),he);Cu(Q,Z)}return null}function ae(Q,$,Z,he,Pe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Q=Q.get(Z)||null,S($,Q,""+he,Pe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case P:return Q=Q.get(he.key===null?Z:he.key)||null,U($,Q,he,Pe);case O:return Q=Q.get(he.key===null?Z:he.key)||null,ee($,Q,he,Pe);case N:return he=Sr(he),ae(Q,$,Z,he,Pe)}if(je(he)||q(he))return Q=Q.get(Z)||null,le($,Q,he,Pe,null);if(typeof he.then=="function")return ae(Q,$,Z,Au(he),Pe);if(he.$$typeof===ne)return ae(Q,$,Z,Eu($,he),Pe);Cu($,he)}return null}function De(Q,$,Z,he){for(var Pe=null,pt=null,Ie=$,Xe=$=0,nt=null;Ie!==null&&Xe<Z.length;Xe++){Ie.index>Xe?(nt=Ie,Ie=null):nt=Ie.sibling;var gt=te(Q,Ie,Z[Xe],he);if(gt===null){Ie===null&&(Ie=nt);break}t&&Ie&&gt.alternate===null&&s(Q,Ie),$=m(gt,$,Xe),pt===null?Pe=gt:pt.sibling=gt,pt=gt,Ie=nt}if(Xe===Z.length)return r(Q,Ie),lt&&Ii(Q,Xe),Pe;if(Ie===null){for(;Xe<Z.length;Xe++)Ie=fe(Q,Z[Xe],he),Ie!==null&&($=m(Ie,$,Xe),pt===null?Pe=Ie:pt.sibling=Ie,pt=Ie);return lt&&Ii(Q,Xe),Pe}for(Ie=c(Ie);Xe<Z.length;Xe++)nt=ae(Ie,Q,Xe,Z[Xe],he),nt!==null&&(t&&nt.alternate!==null&&Ie.delete(nt.key===null?Xe:nt.key),$=m(nt,$,Xe),pt===null?Pe=nt:pt.sibling=nt,pt=nt);return t&&Ie.forEach(function(Ba){return s(Q,Ba)}),lt&&Ii(Q,Xe),Pe}function ze(Q,$,Z,he){if(Z==null)throw Error(a(151));for(var Pe=null,pt=null,Ie=$,Xe=$=0,nt=null,gt=Z.next();Ie!==null&&!gt.done;Xe++,gt=Z.next()){Ie.index>Xe?(nt=Ie,Ie=null):nt=Ie.sibling;var Ba=te(Q,Ie,gt.value,he);if(Ba===null){Ie===null&&(Ie=nt);break}t&&Ie&&Ba.alternate===null&&s(Q,Ie),$=m(Ba,$,Xe),pt===null?Pe=Ba:pt.sibling=Ba,pt=Ba,Ie=nt}if(gt.done)return r(Q,Ie),lt&&Ii(Q,Xe),Pe;if(Ie===null){for(;!gt.done;Xe++,gt=Z.next())gt=fe(Q,gt.value,he),gt!==null&&($=m(gt,$,Xe),pt===null?Pe=gt:pt.sibling=gt,pt=gt);return lt&&Ii(Q,Xe),Pe}for(Ie=c(Ie);!gt.done;Xe++,gt=Z.next())gt=ae(Ie,Q,Xe,gt.value,he),gt!==null&&(t&&gt.alternate!==null&&Ie.delete(gt.key===null?Xe:gt.key),$=m(gt,$,Xe),pt===null?Pe=gt:pt.sibling=gt,pt=gt);return t&&Ie.forEach(function(Lw){return s(Q,Lw)}),lt&&Ii(Q,Xe),Pe}function Ct(Q,$,Z,he){if(typeof Z=="object"&&Z!==null&&Z.type===D&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:e:{for(var Pe=Z.key;$!==null;){if($.key===Pe){if(Pe=Z.type,Pe===D){if($.tag===7){r(Q,$.sibling),he=f($,Z.props.children),he.return=Q,Q=he;break e}}else if($.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===N&&Sr(Pe)===$.type){r(Q,$.sibling),he=f($,Z.props),Ll(he,Z),he.return=Q,Q=he;break e}r(Q,$);break}else s(Q,$);$=$.sibling}Z.type===D?(he=br(Z.props.children,Q.mode,he,Z.key),he.return=Q,Q=he):(he=bu(Z.type,Z.key,Z.props,null,Q.mode,he),Ll(he,Z),he.return=Q,Q=he)}return _(Q);case O:e:{for(Pe=Z.key;$!==null;){if($.key===Pe)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){r(Q,$.sibling),he=f($,Z.children||[]),he.return=Q,Q=he;break e}else{r(Q,$);break}else s(Q,$);$=$.sibling}he=$d(Z,Q.mode,he),he.return=Q,Q=he}return _(Q);case N:return Z=Sr(Z),Ct(Q,$,Z,he)}if(je(Z))return De(Q,$,Z,he);if(q(Z)){if(Pe=q(Z),typeof Pe!="function")throw Error(a(150));return Z=Pe.call(Z),ze(Q,$,Z,he)}if(typeof Z.then=="function")return Ct(Q,$,Au(Z),he);if(Z.$$typeof===ne)return Ct(Q,$,Eu(Q,Z),he);Cu(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(r(Q,$.sibling),he=f($,Z),he.return=Q,Q=he):(r(Q,$),he=Hd(Z,Q.mode,he),he.return=Q,Q=he),_(Q)):r(Q,$)}return function(Q,$,Z,he){try{Ol=0;var Pe=Ct(Q,$,Z,he);return go=null,Pe}catch(Ie){if(Ie===po||Ie===Su)throw Ie;var pt=os(29,Ie,null,Q.mode);return pt.lanes=he,pt.return=Q,pt}}}var Ar=py(!0),gy=py(!1),Ea=!1;function sf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function af(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function wa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Sa(t,s,r){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(vt&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=_u(t),Zg(t,null,r),s}return vu(t,c,s,r),_u(t)}function Vl(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var c=s.lanes;c&=t.pendingLanes,r|=c,s.lanes=r,ye(t,r)}}function rf(t,s){var r=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var _={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,r=r.next}while(r!==null);m===null?f=m=s:m=m.next=s}else f=m=s;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var of=!1;function Pl(){if(of){var t=mo;if(t!==null)throw t}}function Ul(t,s,r,c){of=!1;var f=t.updateQueue;Ea=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var U=S,ee=U.next;U.next=null,_===null?m=ee:_.next=ee,_=U;var le=t.alternate;le!==null&&(le=le.updateQueue,S=le.lastBaseUpdate,S!==_&&(S===null?le.firstBaseUpdate=ee:S.next=ee,le.lastBaseUpdate=U))}if(m!==null){var fe=f.baseState;_=0,le=ee=U=null,S=m;do{var te=S.lane&-536870913,ae=te!==S.lane;if(ae?(tt&te)===te:(c&te)===te){te!==0&&te===fo&&(of=!0),le!==null&&(le=le.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var De=t,ze=S;te=s;var Ct=r;switch(ze.tag){case 1:if(De=ze.payload,typeof De=="function"){fe=De.call(Ct,fe,te);break e}fe=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=ze.payload,te=typeof De=="function"?De.call(Ct,fe,te):De,te==null)break e;fe=T({},fe,te);break e;case 2:Ea=!0}}te=S.callback,te!==null&&(t.flags|=64,ae&&(t.flags|=8192),ae=f.callbacks,ae===null?f.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:S.tag,payload:S.payload,callback:S.callback,next:null},le===null?(ee=le=ae,U=fe):le=le.next=ae,_|=te;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;ae=S,S=ae.next,ae.next=null,f.lastBaseUpdate=ae,f.shared.pending=null}}while(!0);le===null&&(U=fe),f.baseState=U,f.firstBaseUpdate=ee,f.lastBaseUpdate=le,m===null&&(f.shared.lanes=0),Ra|=_,t.lanes=_,t.memoizedState=fe}}function yy(t,s){if(typeof t!="function")throw Error(a(191,t));t.call(s)}function vy(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)yy(r[t],s)}var yo=w(null),ju=w(0);function _y(t,s){t=Hi,Y(ju,t),Y(yo,s),Hi=t|s.baseLanes}function lf(){Y(ju,Hi),Y(yo,yo.current)}function cf(){Hi=ju.current,G(yo),G(ju)}var ls=w(null),Cs=null;function Na(t){var s=t.alternate;Y(Gt,Gt.current&1),Y(ls,t),Cs===null&&(s===null||yo.current!==null||s.memoizedState!==null)&&(Cs=t)}function uf(t){Y(Gt,Gt.current),Y(ls,t),Cs===null&&(Cs=t)}function by(t){t.tag===22?(Y(Gt,Gt.current),Y(ls,t),Cs===null&&(Cs=t)):Aa()}function Aa(){Y(Gt,Gt.current),Y(ls,ls.current)}function cs(t){G(ls),Cs===t&&(Cs=null),G(Gt)}var Gt=w(0);function Ru(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||gm(r)||ym(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Li=0,We=null,Nt=null,en=null,ku=!1,vo=!1,Cr=!1,Du=0,Bl=0,_o=null,NE=0;function Ft(){throw Error(a(321))}function hf(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!rs(t[r],s[r]))return!1;return!0}function df(t,s,r,c,f,m){return Li=m,We=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=t===null||t.memoizedState===null?sv:Af,Cr=!1,m=r(c,f),Cr=!1,vo&&(m=Ty(s,r,c,f)),xy(t),m}function xy(t){B.H=Fl;var s=Nt!==null&&Nt.next!==null;if(Li=0,en=Nt=We=null,ku=!1,Bl=0,_o=null,s)throw Error(a(300));t===null||tn||(t=t.dependencies,t!==null&&Tu(t)&&(tn=!0))}function Ty(t,s,r,c){We=t;var f=0;do{if(vo&&(_o=null),Bl=0,vo=!1,25<=f)throw Error(a(301));if(f+=1,en=Nt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=iv,m=s(r,c)}while(vo);return m}function AE(){var t=B.H,s=t.useState()[0];return s=typeof s.then=="function"?zl(s):s,t=t.useState()[0],(Nt!==null?Nt.memoizedState:null)!==t&&(We.flags|=1024),s}function ff(){var t=Du!==0;return Du=0,t}function mf(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function pf(t){if(ku){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}ku=!1}Li=0,en=Nt=We=null,vo=!1,Bl=Du=0,_o=null}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?We.memoizedState=en=t:en=en.next=t,en}function Yt(){if(Nt===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var s=en===null?We.memoizedState:en.next;if(s!==null)en=s,Nt=t;else{if(t===null)throw We.alternate===null?Error(a(467)):Error(a(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},en===null?We.memoizedState=en=t:en=en.next=t}return en}function Iu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zl(t){var s=Bl;return Bl+=1,_o===null&&(_o=[]),t=dy(_o,t,s),s=We,(en===null?s.memoizedState:en.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?sv:Af),t}function Mu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return zl(t);if(t.$$typeof===ne)return wn(t)}throw Error(a(438,String(t)))}function gf(t){var s=null,r=We.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var c=We.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Iu(),We.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),c=0;c<t;c++)r[c]=z;return s.index++,r}function Vi(t,s){return typeof s=="function"?s(t):s}function Ou(t){var s=Yt();return yf(s,Nt,t)}function yf(t,s,r){var c=t.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=r;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}s.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var S=_=null,U=null,ee=s,le=!1;do{var fe=ee.lane&-536870913;if(fe!==ee.lane?(tt&fe)===fe:(Li&fe)===fe){var te=ee.revertLane;if(te===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),fe===fo&&(le=!0);else if((Li&te)===te){ee=ee.next,te===fo&&(le=!0);continue}else fe={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},U===null?(S=U=fe,_=m):U=U.next=fe,We.lanes|=te,Ra|=te;fe=ee.action,Cr&&r(m,fe),m=ee.hasEagerState?ee.eagerState:r(m,fe)}else te={lane:fe,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},U===null?(S=U=te,_=m):U=U.next=te,We.lanes|=fe,Ra|=fe;ee=ee.next}while(ee!==null&&ee!==s);if(U===null?_=m:U.next=S,!rs(m,t.memoizedState)&&(tn=!0,le&&(r=mo,r!==null)))throw r;t.memoizedState=m,t.baseState=_,t.baseQueue=U,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function vf(t){var s=Yt(),r=s.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var c=r.dispatch,f=r.pending,m=s.memoizedState;if(f!==null){r.pending=null;var _=f=f.next;do m=t(m,_.action),_=_.next;while(_!==f);rs(m,s.memoizedState)||(tn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),r.lastRenderedState=m}return[m,c]}function Ey(t,s,r){var c=We,f=Yt(),m=lt;if(m){if(r===void 0)throw Error(a(407));r=r()}else r=s();var _=!rs((Nt||f).memoizedState,r);if(_&&(f.memoizedState=r,tn=!0),f=f.queue,xf(Ny.bind(null,c,f,t),[t]),f.getSnapshot!==s||_||en!==null&&en.memoizedState.tag&1){if(c.flags|=2048,bo(9,{destroy:void 0},Sy.bind(null,c,f,r,s),null),kt===null)throw Error(a(349));m||(Li&127)!==0||wy(c,s,r)}return r}function wy(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=We.updateQueue,s===null?(s=Iu(),We.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function Sy(t,s,r,c){s.value=r,s.getSnapshot=c,Ay(s)&&Cy(t)}function Ny(t,s,r){return r(function(){Ay(s)&&Cy(t)})}function Ay(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!rs(t,r)}catch{return!0}}function Cy(t){var s=_r(t,2);s!==null&&Jn(s,t,2)}function _f(t){var s=zn();if(typeof t=="function"){var r=t;if(t=r(),Cr){_n(!0);try{r()}finally{_n(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},s}function jy(t,s,r,c){return t.baseState=r,yf(t,Nt,typeof c=="function"?c:Vi)}function CE(t,s,r,c,f){if(Pu(t))throw Error(a(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};B.T!==null?r(!0):m.isTransition=!1,c(m),r=s.pending,r===null?(m.next=s.pending=m,Ry(s,m)):(m.next=r.next,s.pending=r.next=m)}}function Ry(t,s){var r=s.action,c=s.payload,f=t.state;if(s.isTransition){var m=B.T,_={};B.T=_;try{var S=r(f,c),U=B.S;U!==null&&U(_,S),ky(t,s,S)}catch(ee){bf(t,s,ee)}finally{m!==null&&_.types!==null&&(m.types=_.types),B.T=m}}else try{m=r(f,c),ky(t,s,m)}catch(ee){bf(t,s,ee)}}function ky(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Dy(t,s,c)},function(c){return bf(t,s,c)}):Dy(t,s,r)}function Dy(t,s,r){s.status="fulfilled",s.value=r,Iy(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,Ry(t,r)))}function bf(t,s,r){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=r,Iy(s),s=s.next;while(s!==c)}t.action=null}function Iy(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function My(t,s){return s}function Oy(t,s){if(lt){var r=kt.formState;if(r!==null){e:{var c=We;if(lt){if(Ot){t:{for(var f=Ot,m=As;f.nodeType!==8;){if(!m){f=null;break t}if(f=js(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ot=js(f.nextSibling),c=f.data==="F!";break e}}xa(c)}c=!1}c&&(s=r[0])}}return r=zn(),r.memoizedState=r.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:My,lastRenderedState:s},r.queue=c,r=ev.bind(null,We,c),c.dispatch=r,c=_f(!1),m=Nf.bind(null,We,!1,c.queue),c=zn(),f={state:s,dispatch:null,action:t,pending:null},c.queue=f,r=CE.bind(null,We,f,m,r),f.dispatch=r,c.memoizedState=t,[s,r,!1]}function Ly(t){var s=Yt();return Vy(s,Nt,t)}function Vy(t,s,r){if(s=yf(t,s,My)[0],t=Ou(Vi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=zl(s)}catch(_){throw _===po?Su:_}else c=s;s=Yt();var f=s.queue,m=f.dispatch;return r!==s.memoizedState&&(We.flags|=2048,bo(9,{destroy:void 0},jE.bind(null,f,r),null)),[c,m,t]}function jE(t,s){t.action=s}function Py(t){var s=Yt(),r=Nt;if(r!==null)return Vy(s,r,t);Yt(),s=s.memoizedState,r=Yt();var c=r.queue.dispatch;return r.memoizedState=t,[s,c,!1]}function bo(t,s,r,c){return t={tag:t,create:r,deps:c,inst:s,next:null},s=We.updateQueue,s===null&&(s=Iu(),We.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(c=r.next,r.next=t,t.next=c,s.lastEffect=t),t}function Uy(){return Yt().memoizedState}function Lu(t,s,r,c){var f=zn();We.flags|=t,f.memoizedState=bo(1|s,{destroy:void 0},r,c===void 0?null:c)}function Vu(t,s,r,c){var f=Yt();c=c===void 0?null:c;var m=f.memoizedState.inst;Nt!==null&&c!==null&&hf(c,Nt.memoizedState.deps)?f.memoizedState=bo(s,m,r,c):(We.flags|=t,f.memoizedState=bo(1|s,m,r,c))}function By(t,s){Lu(8390656,8,t,s)}function xf(t,s){Vu(2048,8,t,s)}function RE(t){We.flags|=4;var s=We.updateQueue;if(s===null)s=Iu(),We.updateQueue=s,s.events=[t];else{var r=s.events;r===null?s.events=[t]:r.push(t)}}function zy(t){var s=Yt().memoizedState;return RE({ref:s,nextImpl:t}),function(){if((vt&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function qy(t,s){return Vu(4,2,t,s)}function Fy(t,s){return Vu(4,4,t,s)}function Hy(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function $y(t,s,r){r=r!=null?r.concat([t]):null,Vu(4,4,Hy.bind(null,s,t),r)}function Tf(){}function Gy(t,s){var r=Yt();s=s===void 0?null:s;var c=r.memoizedState;return s!==null&&hf(s,c[1])?c[0]:(r.memoizedState=[t,s],t)}function Yy(t,s){var r=Yt();s=s===void 0?null:s;var c=r.memoizedState;if(s!==null&&hf(s,c[1]))return c[0];if(c=t(),Cr){_n(!0);try{t()}finally{_n(!1)}}return r.memoizedState=[c,s],c}function Ef(t,s,r){return r===void 0||(Li&1073741824)!==0&&(tt&261930)===0?t.memoizedState=s:(t.memoizedState=r,t=Qv(),We.lanes|=t,Ra|=t,r)}function Qy(t,s,r,c){return rs(r,s)?r:yo.current!==null?(t=Ef(t,r,c),rs(t,s)||(tn=!0),t):(Li&42)===0||(Li&1073741824)!==0&&(tt&261930)===0?(tn=!0,t.memoizedState=r):(t=Qv(),We.lanes|=t,Ra|=t,s)}function Ky(t,s,r,c,f){var m=re.p;re.p=m!==0&&8>m?m:8;var _=B.T,S={};B.T=S,Nf(t,!1,s,r);try{var U=f(),ee=B.S;if(ee!==null&&ee(S,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var le=SE(U,c);ql(t,s,le,ds(t))}else ql(t,s,c,ds(t))}catch(fe){ql(t,s,{then:function(){},status:"rejected",reason:fe},ds())}finally{re.p=m,_!==null&&S.types!==null&&(_.types=S.types),B.T=_}}function kE(){}function wf(t,s,r,c){if(t.tag!==5)throw Error(a(476));var f=Wy(t).queue;Ky(t,f,s,be,r===null?kE:function(){return Xy(t),r(c)})}function Wy(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:be},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Xy(t){var s=Wy(t);s.next===null&&(s=t.alternate.memoizedState),ql(t,s.next.queue,{},ds())}function Sf(){return wn(ac)}function Jy(){return Yt().memoizedState}function Zy(){return Yt().memoizedState}function DE(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=ds();t=wa(r);var c=Sa(s,t,r);c!==null&&(Jn(c,s,r),Vl(c,s,r)),s={cache:Zd()},t.payload=s;return}s=s.return}}function IE(t,s,r){var c=ds();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Pu(t)?tv(s,r):(r=qd(t,s,r,c),r!==null&&(Jn(r,t,c),nv(r,s,c)))}function ev(t,s,r){var c=ds();ql(t,s,r,c)}function ql(t,s,r,c){var f={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Pu(t))tv(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,S=m(_,r);if(f.hasEagerState=!0,f.eagerState=S,rs(S,_))return vu(t,s,f,0),kt===null&&yu(),!1}catch{}if(r=qd(t,s,f,c),r!==null)return Jn(r,t,c),nv(r,s,c),!0}return!1}function Nf(t,s,r,c){if(c={lane:2,revertLane:im(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Pu(t)){if(s)throw Error(a(479))}else s=qd(t,r,c,2),s!==null&&Jn(s,t,2)}function Pu(t){var s=t.alternate;return t===We||s!==null&&s===We}function tv(t,s){vo=ku=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function nv(t,s,r){if((r&4194048)!==0){var c=s.lanes;c&=t.pendingLanes,r|=c,s.lanes=r,ye(t,r)}}var Fl={readContext:wn,use:Mu,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};Fl.useEffectEvent=Ft;var sv={readContext:wn,use:Mu,useCallback:function(t,s){return zn().memoizedState=[t,s===void 0?null:s],t},useContext:wn,useEffect:By,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,Lu(4194308,4,Hy.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Lu(4194308,4,t,s)},useInsertionEffect:function(t,s){Lu(4,2,t,s)},useMemo:function(t,s){var r=zn();s=s===void 0?null:s;var c=t();if(Cr){_n(!0);try{t()}finally{_n(!1)}}return r.memoizedState=[c,s],c},useReducer:function(t,s,r){var c=zn();if(r!==void 0){var f=r(s);if(Cr){_n(!0);try{r(s)}finally{_n(!1)}}}else f=s;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=IE.bind(null,We,t),[c.memoizedState,t]},useRef:function(t){var s=zn();return t={current:t},s.memoizedState=t},useState:function(t){t=_f(t);var s=t.queue,r=ev.bind(null,We,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:Tf,useDeferredValue:function(t,s){var r=zn();return Ef(r,t,s)},useTransition:function(){var t=_f(!1);return t=Ky.bind(null,We,t.queue,!0,!1),zn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var c=We,f=zn();if(lt){if(r===void 0)throw Error(a(407));r=r()}else{if(r=s(),kt===null)throw Error(a(349));(tt&127)!==0||wy(c,s,r)}f.memoizedState=r;var m={value:r,getSnapshot:s};return f.queue=m,By(Ny.bind(null,c,m,t),[t]),c.flags|=2048,bo(9,{destroy:void 0},Sy.bind(null,c,m,r,s),null),r},useId:function(){var t=zn(),s=kt.identifierPrefix;if(lt){var r=pi,c=mi;r=(c&~(1<<32-Mt(c)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Du++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=NE++,s="_"+s+"r_"+r.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Sf,useFormState:Oy,useActionState:Oy,useOptimistic:function(t){var s=zn();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Nf.bind(null,We,!0,r),r.dispatch=s,[t,s]},useMemoCache:gf,useCacheRefresh:function(){return zn().memoizedState=DE.bind(null,We)},useEffectEvent:function(t){var s=zn(),r={impl:t};return s.memoizedState=r,function(){if((vt&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},Af={readContext:wn,use:Mu,useCallback:Gy,useContext:wn,useEffect:xf,useImperativeHandle:$y,useInsertionEffect:qy,useLayoutEffect:Fy,useMemo:Yy,useReducer:Ou,useRef:Uy,useState:function(){return Ou(Vi)},useDebugValue:Tf,useDeferredValue:function(t,s){var r=Yt();return Qy(r,Nt.memoizedState,t,s)},useTransition:function(){var t=Ou(Vi)[0],s=Yt().memoizedState;return[typeof t=="boolean"?t:zl(t),s]},useSyncExternalStore:Ey,useId:Jy,useHostTransitionStatus:Sf,useFormState:Ly,useActionState:Ly,useOptimistic:function(t,s){var r=Yt();return jy(r,Nt,t,s)},useMemoCache:gf,useCacheRefresh:Zy};Af.useEffectEvent=zy;var iv={readContext:wn,use:Mu,useCallback:Gy,useContext:wn,useEffect:xf,useImperativeHandle:$y,useInsertionEffect:qy,useLayoutEffect:Fy,useMemo:Yy,useReducer:vf,useRef:Uy,useState:function(){return vf(Vi)},useDebugValue:Tf,useDeferredValue:function(t,s){var r=Yt();return Nt===null?Ef(r,t,s):Qy(r,Nt.memoizedState,t,s)},useTransition:function(){var t=vf(Vi)[0],s=Yt().memoizedState;return[typeof t=="boolean"?t:zl(t),s]},useSyncExternalStore:Ey,useId:Jy,useHostTransitionStatus:Sf,useFormState:Py,useActionState:Py,useOptimistic:function(t,s){var r=Yt();return Nt!==null?jy(r,Nt,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:gf,useCacheRefresh:Zy};iv.useEffectEvent=zy;function Cf(t,s,r,c){s=t.memoizedState,r=r(c,s),r=r==null?s:T({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var jf={enqueueSetState:function(t,s,r){t=t._reactInternals;var c=ds(),f=wa(c);f.payload=s,r!=null&&(f.callback=r),s=Sa(t,f,c),s!==null&&(Jn(s,t,c),Vl(s,t,c))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var c=ds(),f=wa(c);f.tag=1,f.payload=s,r!=null&&(f.callback=r),s=Sa(t,f,c),s!==null&&(Jn(s,t,c),Vl(s,t,c))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=ds(),c=wa(r);c.tag=2,s!=null&&(c.callback=s),s=Sa(t,c,r),s!==null&&(Jn(s,t,r),Vl(s,t,r))}};function av(t,s,r,c,f,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,_):s.prototype&&s.prototype.isPureReactComponent?!jl(r,c)||!jl(f,m):!0}function rv(t,s,r,c){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,c),s.state!==t&&jf.enqueueReplaceState(s,s.state,null)}function jr(t,s){var r=s;if("ref"in s){r={};for(var c in s)c!=="ref"&&(r[c]=s[c])}if(t=t.defaultProps){r===s&&(r=T({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function ov(t){gu(t)}function lv(t){console.error(t)}function cv(t){gu(t)}function Uu(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function uv(t,s,r){try{var c=t.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Rf(t,s,r){return r=wa(r),r.tag=3,r.payload={element:null},r.callback=function(){Uu(t,s)},r}function hv(t){return t=wa(t),t.tag=3,t}function dv(t,s,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){uv(s,r,c)}}var _=r.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){uv(s,r,c),typeof f!="function"&&(ka===null?ka=new Set([this]):ka.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function ME(t,s,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=r.alternate,s!==null&&ho(s,r,f,!0),r=ls.current,r!==null){switch(r.tag){case 31:case 13:return Cs===null?Xu():r.alternate===null&&Ht===0&&(Ht=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===Nu?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([c]):s.add(c),tm(t,c,f)),!1;case 22:return r.flags|=65536,c===Nu?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([c]):r.add(c)),tm(t,c,f)),!1}throw Error(a(435,r.tag))}return tm(t,c,f),Xu(),!1}if(lt)return s=ls.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==Qd&&(t=Error(a(422),{cause:c}),Dl(ws(t,r)))):(c!==Qd&&(s=Error(a(423),{cause:c}),Dl(ws(s,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=ws(c,r),f=Rf(t.stateNode,c,f),rf(t,f),Ht!==4&&(Ht=2)),!1;var m=Error(a(520),{cause:c});if(m=ws(m,r),Xl===null?Xl=[m]:Xl.push(m),Ht!==4&&(Ht=2),s===null)return!0;c=ws(c,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=Rf(r.stateNode,c,t),rf(r,t),!1;case 1:if(s=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ka===null||!ka.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=hv(f),dv(f,t,r,c),rf(r,f),!1}r=r.return}while(r!==null);return!1}var kf=Error(a(461)),tn=!1;function Sn(t,s,r,c){s.child=t===null?gy(s,null,r,c):Ar(s,t.child,r,c)}function fv(t,s,r,c,f){r=r.render;var m=s.ref;if("ref"in c){var _={};for(var S in c)S!=="ref"&&(_[S]=c[S])}else _=c;return Er(s),c=df(t,s,r,_,m,f),S=ff(),t!==null&&!tn?(mf(t,s,f),Pi(t,s,f)):(lt&&S&&Gd(s),s.flags|=1,Sn(t,s,c,f),s.child)}function mv(t,s,r,c,f){if(t===null){var m=r.type;return typeof m=="function"&&!Fd(m)&&m.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=m,pv(t,s,m,c,f)):(t=bu(r.type,null,c,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Uf(t,f)){var _=m.memoizedProps;if(r=r.compare,r=r!==null?r:jl,r(_,c)&&t.ref===s.ref)return Pi(t,s,f)}return s.flags|=1,t=Di(m,c),t.ref=s.ref,t.return=s,s.child=t}function pv(t,s,r,c,f){if(t!==null){var m=t.memoizedProps;if(jl(m,c)&&t.ref===s.ref)if(tn=!1,s.pendingProps=c=m,Uf(t,f))(t.flags&131072)!==0&&(tn=!0);else return s.lanes=t.lanes,Pi(t,s,f)}return Df(t,s,r,c,f)}function gv(t,s,r,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(c=s.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,s.child=null;return yv(t,s,m,r,c)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&wu(s,m!==null?m.cachePool:null),m!==null?_y(s,m):lf(),by(s);else return c=s.lanes=536870912,yv(t,s,m!==null?m.baseLanes|r:r,r,c)}else m!==null?(wu(s,m.cachePool),_y(s,m),Aa(),s.memoizedState=null):(t!==null&&wu(s,null),lf(),Aa());return Sn(t,s,f,r),s.child}function Hl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function yv(t,s,r,c,f){var m=tf();return m=m===null?null:{parent:Zt._currentValue,pool:m},s.memoizedState={baseLanes:r,cachePool:m},t!==null&&wu(s,null),lf(),by(s),t!==null&&ho(t,s,c,!0),s.childLanes=f,null}function Bu(t,s){return s=qu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function vv(t,s,r){return Ar(s,t.child,null,r),t=Bu(s,s.pendingProps),t.flags|=2,cs(s),s.memoizedState=null,t}function OE(t,s,r){var c=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(lt){if(c.mode==="hidden")return t=Bu(s,c),s.lanes=536870912,Hl(null,t);if(uf(s),(t=Ot)?(t=R0(t,As),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:_a!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},r=ty(t),r.return=s,s.child=r,En=s,Ot=null)):t=null,t===null)throw xa(s);return s.lanes=536870912,null}return Bu(s,c)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(uf(s),f)if(s.flags&256)s.flags&=-257,s=vv(t,s,r);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(a(558));else if(tn||ho(t,s,r,!1),f=(r&t.childLanes)!==0,tn||f){if(c=kt,c!==null&&(_=xe(c,r),_!==0&&_!==m.retryLane))throw m.retryLane=_,_r(t,_),Jn(c,t,_),kf;Xu(),s=vv(t,s,r)}else t=m.treeContext,Ot=js(_.nextSibling),En=s,lt=!0,ba=null,As=!1,t!==null&&iy(s,t),s=Bu(s,c),s.flags|=4096;return s}return t=Di(t.child,{mode:c.mode,children:c.children}),t.ref=s.ref,s.child=t,t.return=s,t}function zu(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function Df(t,s,r,c,f){return Er(s),r=df(t,s,r,c,void 0,f),c=ff(),t!==null&&!tn?(mf(t,s,f),Pi(t,s,f)):(lt&&c&&Gd(s),s.flags|=1,Sn(t,s,r,f),s.child)}function _v(t,s,r,c,f,m){return Er(s),s.updateQueue=null,r=Ty(s,c,r,f),xy(t),c=ff(),t!==null&&!tn?(mf(t,s,m),Pi(t,s,m)):(lt&&c&&Gd(s),s.flags|=1,Sn(t,s,r,m),s.child)}function bv(t,s,r,c,f){if(Er(s),s.stateNode===null){var m=oo,_=r.contextType;typeof _=="object"&&_!==null&&(m=wn(_)),m=new r(c,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=jf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=c,m.state=s.memoizedState,m.refs={},sf(s),_=r.contextType,m.context=typeof _=="object"&&_!==null?wn(_):oo,m.state=s.memoizedState,_=r.getDerivedStateFromProps,typeof _=="function"&&(Cf(s,r,_,c),m.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&jf.enqueueReplaceState(m,m.state,null),Ul(s,c,m,f),Pl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(t===null){m=s.stateNode;var S=s.memoizedProps,U=jr(r,S);m.props=U;var ee=m.context,le=r.contextType;_=oo,typeof le=="object"&&le!==null&&(_=wn(le));var fe=r.getDerivedStateFromProps;le=typeof fe=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,le||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||ee!==_)&&rv(s,m,c,_),Ea=!1;var te=s.memoizedState;m.state=te,Ul(s,c,m,f),Pl(),ee=s.memoizedState,S||te!==ee||Ea?(typeof fe=="function"&&(Cf(s,r,fe,c),ee=s.memoizedState),(U=Ea||av(s,r,U,c,te,ee,_))?(le||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=ee),m.props=c,m.state=ee,m.context=_,c=U):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{m=s.stateNode,af(t,s),_=s.memoizedProps,le=jr(r,_),m.props=le,fe=s.pendingProps,te=m.context,ee=r.contextType,U=oo,typeof ee=="object"&&ee!==null&&(U=wn(ee)),S=r.getDerivedStateFromProps,(ee=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==fe||te!==U)&&rv(s,m,c,U),Ea=!1,te=s.memoizedState,m.state=te,Ul(s,c,m,f),Pl();var ae=s.memoizedState;_!==fe||te!==ae||Ea||t!==null&&t.dependencies!==null&&Tu(t.dependencies)?(typeof S=="function"&&(Cf(s,r,S,c),ae=s.memoizedState),(le=Ea||av(s,r,le,c,te,ae,U)||t!==null&&t.dependencies!==null&&Tu(t.dependencies))?(ee||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ae,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ae,U)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ae),m.props=c,m.state=ae,m.context=U,c=le):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(s.flags|=1024),c=!1)}return m=c,zu(t,s),c=(s.flags&128)!==0,m||c?(m=s.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&c?(s.child=Ar(s,t.child,null,f),s.child=Ar(s,null,r,f)):Sn(t,s,r,f),s.memoizedState=m.state,t=s.child):t=Pi(t,s,f),t}function xv(t,s,r,c){return xr(),s.flags|=256,Sn(t,s,r,c),s.child}var If={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mf(t){return{baseLanes:t,cachePool:uy()}}function Of(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=hs),t}function Tv(t,s,r){var c=s.pendingProps,f=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(Gt.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(lt){if(f?Na(s):Aa(),(t=Ot)?(t=R0(t,As),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:_a!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},r=ty(t),r.return=s,s.child=r,En=s,Ot=null)):t=null,t===null)throw xa(s);return ym(t)?s.lanes=32:s.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(Aa(),f=s.mode,S=qu({mode:"hidden",children:S},f),c=br(c,f,r,null),S.return=s,c.return=s,S.sibling=c,s.child=S,c=s.child,c.memoizedState=Mf(r),c.childLanes=Of(t,_,r),s.memoizedState=If,Hl(null,c)):(Na(s),Lf(s,S))}var U=t.memoizedState;if(U!==null&&(S=U.dehydrated,S!==null)){if(m)s.flags&256?(Na(s),s.flags&=-257,s=Vf(t,s,r)):s.memoizedState!==null?(Aa(),s.child=t.child,s.flags|=128,s=null):(Aa(),S=c.fallback,f=s.mode,c=qu({mode:"visible",children:c.children},f),S=br(S,f,r,null),S.flags|=2,c.return=s,S.return=s,c.sibling=S,s.child=c,Ar(s,t.child,null,r),c=s.child,c.memoizedState=Mf(r),c.childLanes=Of(t,_,r),s.memoizedState=If,s=Hl(null,c));else if(Na(s),ym(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var ee=_.dgst;_=ee,c=Error(a(419)),c.stack="",c.digest=_,Dl({value:c,source:null,stack:null}),s=Vf(t,s,r)}else if(tn||ho(t,s,r,!1),_=(r&t.childLanes)!==0,tn||_){if(_=kt,_!==null&&(c=xe(_,r),c!==0&&c!==U.retryLane))throw U.retryLane=c,_r(t,c),Jn(_,t,c),kf;gm(S)||Xu(),s=Vf(t,s,r)}else gm(S)?(s.flags|=192,s.child=t.child,s=null):(t=U.treeContext,Ot=js(S.nextSibling),En=s,lt=!0,ba=null,As=!1,t!==null&&iy(s,t),s=Lf(s,c.children),s.flags|=4096);return s}return f?(Aa(),S=c.fallback,f=s.mode,U=t.child,ee=U.sibling,c=Di(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,ee!==null?S=Di(ee,S):(S=br(S,f,r,null),S.flags|=2),S.return=s,c.return=s,c.sibling=S,s.child=c,Hl(null,c),c=s.child,S=t.child.memoizedState,S===null?S=Mf(r):(f=S.cachePool,f!==null?(U=Zt._currentValue,f=f.parent!==U?{parent:U,pool:U}:f):f=uy(),S={baseLanes:S.baseLanes|r,cachePool:f}),c.memoizedState=S,c.childLanes=Of(t,_,r),s.memoizedState=If,Hl(t.child,c)):(Na(s),r=t.child,t=r.sibling,r=Di(r,{mode:"visible",children:c.children}),r.return=s,r.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=r,s.memoizedState=null,r)}function Lf(t,s){return s=qu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function qu(t,s){return t=os(22,t,null,s),t.lanes=0,t}function Vf(t,s,r){return Ar(s,t.child,null,r),t=Lf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Ev(t,s,r){t.lanes|=s;var c=t.alternate;c!==null&&(c.lanes|=s),Xd(t.return,s,r)}function Pf(t,s,r,c,f,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=r,_.tailMode=f,_.treeForkCount=m)}function wv(t,s,r){var c=s.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var _=Gt.current,S=(_&2)!==0;if(S?(_=_&1|2,s.flags|=128):_&=1,Y(Gt,_),Sn(t,s,c,r),c=lt?kl:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ev(t,r,s);else if(t.tag===19)Ev(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=s.child,f=null;r!==null;)t=r.alternate,t!==null&&Ru(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=s.child,s.child=null):(f=r.sibling,r.sibling=null),Pf(s,!1,f,r,m,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&Ru(t)===null){s.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}Pf(s,!0,r,null,m,c);break;case"together":Pf(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Pi(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),Ra|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(ho(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,r=Di(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Di(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Uf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Tu(t)))}function LE(t,s,r){switch(s.tag){case 3:ve(s,s.stateNode.containerInfo),Ta(s,Zt,t.memoizedState.cache),xr();break;case 27:case 5:Be(s);break;case 4:ve(s,s.stateNode.containerInfo);break;case 10:Ta(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,uf(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Na(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Tv(t,s,r):(Na(s),t=Pi(t,s,r),t!==null?t.sibling:null);Na(s);break;case 19:var f=(t.flags&128)!==0;if(c=(r&s.childLanes)!==0,c||(ho(t,s,r,!1),c=(r&s.childLanes)!==0),f){if(c)return wv(t,s,r);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Y(Gt,Gt.current),c)break;return null;case 22:return s.lanes=0,gv(t,s,r,s.pendingProps);case 24:Ta(s,Zt,t.memoizedState.cache)}return Pi(t,s,r)}function Sv(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)tn=!0;else{if(!Uf(t,r)&&(s.flags&128)===0)return tn=!1,LE(t,s,r);tn=(t.flags&131072)!==0}else tn=!1,lt&&(s.flags&1048576)!==0&&sy(s,kl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(t=Sr(s.elementType),s.type=t,typeof t=="function")Fd(t)?(c=jr(t,c),s.tag=1,s=bv(null,s,t,c,r)):(s.tag=0,s=Df(null,s,t,c,r));else{if(t!=null){var f=t.$$typeof;if(f===ce){s.tag=11,s=fv(null,s,t,c,r);break e}else if(f===k){s.tag=14,s=mv(null,s,t,c,r);break e}}throw s=Ee(t)||t,Error(a(306,s,""))}}return s;case 0:return Df(t,s,s.type,s.pendingProps,r);case 1:return c=s.type,f=jr(c,s.pendingProps),bv(t,s,c,f,r);case 3:e:{if(ve(s,s.stateNode.containerInfo),t===null)throw Error(a(387));c=s.pendingProps;var m=s.memoizedState;f=m.element,af(t,s),Ul(s,c,null,r);var _=s.memoizedState;if(c=_.cache,Ta(s,Zt,c),c!==m.cache&&Jd(s,[Zt],r,!0),Pl(),c=_.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=xv(t,s,c,r);break e}else if(c!==f){f=ws(Error(a(424)),s),Dl(f),s=xv(t,s,c,r);break e}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ot=js(t.firstChild),En=s,lt=!0,ba=null,As=!0,r=gy(s,null,c,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xr(),c===f){s=Pi(t,s,r);break e}Sn(t,s,c,r)}s=s.child}return s;case 26:return zu(t,s),t===null?(r=L0(s.type,null,s.pendingProps,null))?s.memoizedState=r:lt||(r=s.type,t=s.pendingProps,c=ih(K.current).createElement(r),c[Ve]=s,c[Qe]=t,Nn(c,r,t),Xt(c),s.stateNode=c):s.memoizedState=L0(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Be(s),t===null&&lt&&(c=s.stateNode=I0(s.type,s.pendingProps,K.current),En=s,As=!0,f=Ot,Oa(s.type)?(vm=f,Ot=js(c.firstChild)):Ot=f),Sn(t,s,s.pendingProps.children,r),zu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&lt&&((f=c=Ot)&&(c=dw(c,s.type,s.pendingProps,As),c!==null?(s.stateNode=c,En=s,Ot=js(c.firstChild),As=!1,f=!0):f=!1),f||xa(s)),Be(s),f=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,c=m.children,fm(f,m)?c=null:_!==null&&fm(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=df(t,s,AE,null,null,r),ac._currentValue=f),zu(t,s),Sn(t,s,c,r),s.child;case 6:return t===null&&lt&&((t=r=Ot)&&(r=fw(r,s.pendingProps,As),r!==null?(s.stateNode=r,En=s,Ot=null,t=!0):t=!1),t||xa(s)),null;case 13:return Tv(t,s,r);case 4:return ve(s,s.stateNode.containerInfo),c=s.pendingProps,t===null?s.child=Ar(s,null,c,r):Sn(t,s,c,r),s.child;case 11:return fv(t,s,s.type,s.pendingProps,r);case 7:return Sn(t,s,s.pendingProps,r),s.child;case 8:return Sn(t,s,s.pendingProps.children,r),s.child;case 12:return Sn(t,s,s.pendingProps.children,r),s.child;case 10:return c=s.pendingProps,Ta(s,s.type,c.value),Sn(t,s,c.children,r),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,Er(s),f=wn(f),c=c(f),s.flags|=1,Sn(t,s,c,r),s.child;case 14:return mv(t,s,s.type,s.pendingProps,r);case 15:return pv(t,s,s.type,s.pendingProps,r);case 19:return wv(t,s,r);case 31:return OE(t,s,r);case 22:return gv(t,s,r,s.pendingProps);case 24:return Er(s),c=wn(Zt),t===null?(f=tf(),f===null&&(f=kt,m=Zd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),s.memoizedState={parent:c,cache:f},sf(s),Ta(s,Zt,f)):((t.lanes&r)!==0&&(af(t,s),Ul(s,null,null,r),Pl()),f=t.memoizedState,m=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Ta(s,Zt,c)):(c=m.cache,Ta(s,Zt,c),c!==f.cache&&Jd(s,[Zt],r,!0))),Sn(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function Ui(t){t.flags|=4}function Bf(t,s,r,c,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Jv())t.flags|=8192;else throw Nr=Nu,nf}else t.flags&=-16777217}function Nv(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!z0(s))if(Jv())t.flags|=8192;else throw Nr=Nu,nf}function Fu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?ca():536870912,t.lanes|=s,wo|=s)}function $l(t,s){if(!lt)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Lt(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,c=0;if(s)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=r,s}function VE(t,s,r){var c=s.pendingProps;switch(Yd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(s),null;case 1:return Lt(s),null;case 3:return r=s.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Oi(Zt),ke(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(uo(s)?Ui(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Kd())),Lt(s),null;case 26:var f=s.type,m=s.memoizedState;return t===null?(Ui(s),m!==null?(Lt(s),Nv(s,m)):(Lt(s),Bf(s,f,null,c,r))):m?m!==t.memoizedState?(Ui(s),Lt(s),Nv(s,m)):(Lt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==c&&Ui(s),Lt(s),Bf(s,f,t,c,r)),null;case 27:if(pe(s),r=K.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&Ui(s);else{if(!c){if(s.stateNode===null)throw Error(a(166));return Lt(s),null}t=X.current,uo(s)?ay(s):(t=I0(f,c,r),s.stateNode=t,Ui(s))}return Lt(s),null;case 5:if(pe(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&Ui(s);else{if(!c){if(s.stateNode===null)throw Error(a(166));return Lt(s),null}if(m=X.current,uo(s))ay(s);else{var _=ih(K.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?_.createElement(f,{is:c.is}):_.createElement(f)}}m[Ve]=s,m[Qe]=c;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(Nn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ui(s)}}return Lt(s),Bf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,r),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==c&&Ui(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(a(166));if(t=K.current,uo(s)){if(t=s.stateNode,r=s.memoizedProps,c=null,f=En,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[Ve]=s,t=!!(t.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||T0(t.nodeValue,r)),t||xa(s,!0)}else t=ih(t).createTextNode(c),t[Ve]=s,s.stateNode=t}return Lt(s),null;case 31:if(r=s.memoizedState,t===null||t.memoizedState!==null){if(c=uo(s),r!==null){if(t===null){if(!c)throw Error(a(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Ve]=s}else xr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Lt(s),t=!1}else r=Kd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return s.flags&256?(cs(s),s):(cs(s),null);if((s.flags&128)!==0)throw Error(a(558))}return Lt(s),null;case 13:if(c=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=uo(s),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ve]=s}else xr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Lt(s),f=!1}else f=Kd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(cs(s),s):(cs(s),null)}return cs(s),(s.flags&128)!==0?(s.lanes=r,s):(r=c!==null,t=t!==null&&t.memoizedState!==null,r&&(c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),r!==t&&r&&(s.child.flags|=8192),Fu(s,s.updateQueue),Lt(s),null);case 4:return ke(),t===null&&lm(s.stateNode.containerInfo),Lt(s),null;case 10:return Oi(s.type),Lt(s),null;case 19:if(G(Gt),c=s.memoizedState,c===null)return Lt(s),null;if(f=(s.flags&128)!==0,m=c.rendering,m===null)if(f)$l(c,!1);else{if(Ht!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Ru(t),m!==null){for(s.flags|=128,$l(c,!1),t=m.updateQueue,s.updateQueue=t,Fu(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)ey(r,t),r=r.sibling;return Y(Gt,Gt.current&1|2),lt&&Ii(s,c.treeForkCount),s.child}t=t.sibling}c.tail!==null&&dt()>Qu&&(s.flags|=128,f=!0,$l(c,!1),s.lanes=4194304)}else{if(!f)if(t=Ru(m),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,Fu(s,t),$l(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!lt)return Lt(s),null}else 2*dt()-c.renderingStartTime>Qu&&r!==536870912&&(s.flags|=128,f=!0,$l(c,!1),s.lanes=4194304);c.isBackwards?(m.sibling=s.child,s.child=m):(t=c.last,t!==null?t.sibling=m:s.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=dt(),t.sibling=null,r=Gt.current,Y(Gt,f?r&1|2:r&1),lt&&Ii(s,c.treeForkCount),t):(Lt(s),null);case 22:case 23:return cs(s),cf(),c=s.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(r&536870912)!==0&&(s.flags&128)===0&&(Lt(s),s.subtreeFlags&6&&(s.flags|=8192)):Lt(s),r=s.updateQueue,r!==null&&Fu(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==r&&(s.flags|=2048),t!==null&&G(wr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),Oi(Zt),Lt(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function PE(t,s){switch(Yd(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Oi(Zt),ke(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return pe(s),null;case 31:if(s.memoizedState!==null){if(cs(s),s.alternate===null)throw Error(a(340));xr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(cs(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));xr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return G(Gt),null;case 4:return ke(),null;case 10:return Oi(s.type),null;case 22:case 23:return cs(s),cf(),t!==null&&G(wr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Oi(Zt),null;case 25:return null;default:return null}}function Av(t,s){switch(Yd(s),s.tag){case 3:Oi(Zt),ke();break;case 26:case 27:case 5:pe(s);break;case 4:ke();break;case 31:s.memoizedState!==null&&cs(s);break;case 13:cs(s);break;case 19:G(Gt);break;case 10:Oi(s.type);break;case 22:case 23:cs(s),cf(),t!==null&&G(wr);break;case 24:Oi(Zt)}}function Gl(t,s){try{var r=s.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&t)===t){c=void 0;var m=r.create,_=r.inst;c=m(),_.destroy=c}r=r.next}while(r!==f)}}catch(S){Tt(s,s.return,S)}}function Ca(t,s,r){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var _=c.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,f=s;var U=r,ee=S;try{ee()}catch(le){Tt(f,U,le)}}}c=c.next}while(c!==m)}}catch(le){Tt(s,s.return,le)}}function Cv(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{vy(s,r)}catch(c){Tt(t,t.return,c)}}}function jv(t,s,r){r.props=jr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(c){Tt(t,s,c)}}function Yl(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof r=="function"?t.refCleanup=r(c):r.current=c}}catch(f){Tt(t,s,f)}}function gi(t,s){var r=t.ref,c=t.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){Tt(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Tt(t,s,f)}else r.current=null}function Rv(t){var s=t.type,r=t.memoizedProps,c=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){Tt(t,t.return,f)}}function zf(t,s,r){try{var c=t.stateNode;rw(c,t.type,r,s),c[Qe]=s}catch(f){Tt(t,t.return,f)}}function kv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Oa(t.type)||t.tag===4}function qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Oa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ff(t,s,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Ls));else if(c!==4&&(c===27&&Oa(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(Ff(t,s,r),t=t.sibling;t!==null;)Ff(t,s,r),t=t.sibling}function Hu(t,s,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(c!==4&&(c===27&&Oa(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Hu(t,s,r),t=t.sibling;t!==null;)Hu(t,s,r),t=t.sibling}function Dv(t){var s=t.stateNode,r=t.memoizedProps;try{for(var c=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Nn(s,c,r),s[Ve]=t,s[Qe]=r}catch(m){Tt(t,t.return,m)}}var Bi=!1,nn=!1,Hf=!1,Iv=typeof WeakSet=="function"?WeakSet:Set,yn=null;function UE(t,s){if(t=t.containerInfo,hm=hh,t=$g(t),Ld(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var _=0,S=-1,U=-1,ee=0,le=0,fe=t,te=null;t:for(;;){for(var ae;fe!==r||f!==0&&fe.nodeType!==3||(S=_+f),fe!==m||c!==0&&fe.nodeType!==3||(U=_+c),fe.nodeType===3&&(_+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)te=fe,fe=ae;for(;;){if(fe===t)break t;if(te===r&&++ee===f&&(S=_),te===m&&++le===c&&(U=_),(ae=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ae}r=S===-1||U===-1?null:{start:S,end:U}}else r=null}r=r||{start:0,end:0}}else r=null;for(dm={focusedElem:t,selectionRange:r},hh=!1,yn=s;yn!==null;)if(s=yn,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,yn=t;else for(;yn!==null;){switch(s=yn,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=s,f=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var De=jr(r.type,f);t=c.getSnapshotBeforeUpdate(De,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(ze){Tt(r,r.return,ze)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)pm(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":pm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=s.sibling,t!==null){t.return=s.return,yn=t;break}yn=s.return}}function Mv(t,s,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:qi(t,r),c&4&&Gl(5,r);break;case 1:if(qi(t,r),c&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(_){Tt(r,r.return,_)}else{var f=jr(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Tt(r,r.return,_)}}c&64&&Cv(r),c&512&&Yl(r,r.return);break;case 3:if(qi(t,r),c&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{vy(t,s)}catch(_){Tt(r,r.return,_)}}break;case 27:s===null&&c&4&&Dv(r);case 26:case 5:qi(t,r),s===null&&c&4&&Rv(r),c&512&&Yl(r,r.return);break;case 12:qi(t,r);break;case 31:qi(t,r),c&4&&Vv(t,r);break;case 13:qi(t,r),c&4&&Pv(t,r),c&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=QE.bind(null,r),mw(t,r))));break;case 22:if(c=r.memoizedState!==null||Bi,!c){s=s!==null&&s.memoizedState!==null||nn,f=Bi;var m=nn;Bi=c,(nn=s)&&!m?Fi(t,r,(r.subtreeFlags&8772)!==0):qi(t,r),Bi=f,nn=m}break;case 30:break;default:qi(t,r)}}function Ov(t){var s=t.alternate;s!==null&&(t.alternate=null,Ov(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Ci(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Bt=null,Qn=!1;function zi(t,s,r){for(r=r.child;r!==null;)Lv(t,s,r),r=r.sibling}function Lv(t,s,r){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Rn,r)}catch{}switch(r.tag){case 26:nn||gi(r,s),zi(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:nn||gi(r,s);var c=Bt,f=Qn;Oa(r.type)&&(Bt=r.stateNode,Qn=!1),zi(t,s,r),nc(r.stateNode),Bt=c,Qn=f;break;case 5:nn||gi(r,s);case 6:if(c=Bt,f=Qn,Bt=null,zi(t,s,r),Bt=c,Qn=f,Bt!==null)if(Qn)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(r.stateNode)}catch(m){Tt(r,s,m)}else try{Bt.removeChild(r.stateNode)}catch(m){Tt(r,s,m)}break;case 18:Bt!==null&&(Qn?(t=Bt,C0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Do(t)):C0(Bt,r.stateNode));break;case 4:c=Bt,f=Qn,Bt=r.stateNode.containerInfo,Qn=!0,zi(t,s,r),Bt=c,Qn=f;break;case 0:case 11:case 14:case 15:Ca(2,r,s),nn||Ca(4,r,s),zi(t,s,r);break;case 1:nn||(gi(r,s),c=r.stateNode,typeof c.componentWillUnmount=="function"&&jv(r,s,c)),zi(t,s,r);break;case 21:zi(t,s,r);break;case 22:nn=(c=nn)||r.memoizedState!==null,zi(t,s,r),nn=c;break;default:zi(t,s,r)}}function Vv(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Do(t)}catch(r){Tt(s,s.return,r)}}}function Pv(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Do(t)}catch(r){Tt(s,s.return,r)}}function BE(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Iv),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Iv),s;default:throw Error(a(435,t.tag))}}function $u(t,s){var r=BE(t);s.forEach(function(c){if(!r.has(c)){r.add(c);var f=KE.bind(null,t,c);c.then(f,f)}})}function Kn(t,s){var r=s.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],m=t,_=s,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(Oa(S.type)){Bt=S.stateNode,Qn=!1;break e}break;case 5:Bt=S.stateNode,Qn=!1;break e;case 3:case 4:Bt=S.stateNode.containerInfo,Qn=!0;break e}S=S.return}if(Bt===null)throw Error(a(160));Lv(m,_,f),Bt=null,Qn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Uv(s,t),s=s.sibling}var qs=null;function Uv(t,s){var r=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Kn(s,t),Wn(t),c&4&&(Ca(3,t,t.return),Gl(3,t),Ca(5,t,t.return));break;case 1:Kn(s,t),Wn(t),c&512&&(nn||r===null||gi(r,r.return)),c&64&&Bi&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=qs;if(Kn(s,t),Wn(t),c&512&&(nn||r===null||gi(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=t.memoizedState,r===null)if(c===null)if(t.stateNode===null){e:{c=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[_s]||m[Ve]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Nn(m,c,r),m[Ve]=t,Xt(m),c=m;break e;case"link":var _=U0("link","href",f).get(c+(r.href||""));if(_){for(var S=0;S<_.length;S++)if(m=_[S],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){_.splice(S,1);break t}}m=f.createElement(c),Nn(m,c,r),f.head.appendChild(m);break;case"meta":if(_=U0("meta","content",f).get(c+(r.content||""))){for(S=0;S<_.length;S++)if(m=_[S],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){_.splice(S,1);break t}}m=f.createElement(c),Nn(m,c,r),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[Ve]=t,Xt(m),c=m}t.stateNode=c}else B0(f,t.type,t.stateNode);else t.stateNode=P0(f,c,t.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?B0(f,t.type,t.stateNode):P0(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&zf(t,t.memoizedProps,r.memoizedProps)}break;case 27:Kn(s,t),Wn(t),c&512&&(nn||r===null||gi(r,r.return)),r!==null&&c&4&&zf(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Kn(s,t),Wn(t),c&512&&(nn||r===null||gi(r,r.return)),t.flags&32){f=t.stateNode;try{Yn(f,"")}catch(De){Tt(t,t.return,De)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,zf(t,f,r!==null?r.memoizedProps:f)),c&1024&&(Hf=!0);break;case 6:if(Kn(s,t),Wn(t),c&4){if(t.stateNode===null)throw Error(a(162));c=t.memoizedProps,r=t.stateNode;try{r.nodeValue=c}catch(De){Tt(t,t.return,De)}}break;case 3:if(oh=null,f=qs,qs=ah(s.containerInfo),Kn(s,t),qs=f,Wn(t),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Do(s.containerInfo)}catch(De){Tt(t,t.return,De)}Hf&&(Hf=!1,Bv(t));break;case 4:c=qs,qs=ah(t.stateNode.containerInfo),Kn(s,t),Wn(t),qs=c;break;case 12:Kn(s,t),Wn(t);break;case 31:Kn(s,t),Wn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,$u(t,c)));break;case 13:Kn(s,t),Wn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Yu=dt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,$u(t,c)));break;case 22:f=t.memoizedState!==null;var U=r!==null&&r.memoizedState!==null,ee=Bi,le=nn;if(Bi=ee||f,nn=le||U,Kn(s,t),nn=le,Bi=ee,Wn(t),c&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(r===null||U||Bi||nn||Rr(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){U=r=s;try{if(m=U.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=U.stateNode;var fe=U.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;S.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(De){Tt(U,U.return,De)}}}else if(s.tag===6){if(r===null){U=s;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(De){Tt(U,U.return,De)}}}else if(s.tag===18){if(r===null){U=s;try{var ae=U.stateNode;f?j0(ae,!0):j0(U.stateNode,!1)}catch(De){Tt(U,U.return,De)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=t.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,$u(t,r))));break;case 19:Kn(s,t),Wn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,$u(t,c)));break;case 30:break;case 21:break;default:Kn(s,t),Wn(t)}}function Wn(t){var s=t.flags;if(s&2){try{for(var r,c=t.return;c!==null;){if(kv(c)){r=c;break}c=c.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,m=qf(t);Hu(t,m,f);break;case 5:var _=r.stateNode;r.flags&32&&(Yn(_,""),r.flags&=-33);var S=qf(t);Hu(t,S,_);break;case 3:case 4:var U=r.stateNode.containerInfo,ee=qf(t);Ff(t,ee,U);break;default:throw Error(a(161))}}catch(le){Tt(t,t.return,le)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Bv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Bv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function qi(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Mv(t,s.alternate,s),s=s.sibling}function Rr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Ca(4,s,s.return),Rr(s);break;case 1:gi(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&jv(s,s.return,r),Rr(s);break;case 27:nc(s.stateNode);case 26:case 5:gi(s,s.return),Rr(s);break;case 22:s.memoizedState===null&&Rr(s);break;case 30:Rr(s);break;default:Rr(s)}t=t.sibling}}function Fi(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:Fi(f,m,r),Gl(4,m);break;case 1:if(Fi(f,m,r),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){Tt(c,c.return,ee)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)yy(U[f],S)}catch(ee){Tt(c,c.return,ee)}}r&&_&64&&Cv(m),Yl(m,m.return);break;case 27:Dv(m);case 26:case 5:Fi(f,m,r),r&&c===null&&_&4&&Rv(m),Yl(m,m.return);break;case 12:Fi(f,m,r);break;case 31:Fi(f,m,r),r&&_&4&&Vv(f,m);break;case 13:Fi(f,m,r),r&&_&4&&Pv(f,m);break;case 22:m.memoizedState===null&&Fi(f,m,r),Yl(m,m.return);break;case 30:break;default:Fi(f,m,r)}s=s.sibling}}function $f(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Il(r))}function Gf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Il(t))}function Fs(t,s,r,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zv(t,s,r,c),s=s.sibling}function zv(t,s,r,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Fs(t,s,r,c),f&2048&&Gl(9,s);break;case 1:Fs(t,s,r,c);break;case 3:Fs(t,s,r,c),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Il(t)));break;case 12:if(f&2048){Fs(t,s,r,c),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,S=m.onPostCommit;typeof S=="function"&&S(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(U){Tt(s,s.return,U)}}else Fs(t,s,r,c);break;case 31:Fs(t,s,r,c);break;case 13:Fs(t,s,r,c);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?Fs(t,s,r,c):Ql(t,s):m._visibility&2?Fs(t,s,r,c):(m._visibility|=2,xo(t,s,r,c,(s.subtreeFlags&10256)!==0||!1)),f&2048&&$f(_,s);break;case 24:Fs(t,s,r,c),f&2048&&Gf(s.alternate,s);break;default:Fs(t,s,r,c)}}function xo(t,s,r,c,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,_=s,S=r,U=c,ee=_.flags;switch(_.tag){case 0:case 11:case 15:xo(m,_,S,U,f),Gl(8,_);break;case 23:break;case 22:var le=_.stateNode;_.memoizedState!==null?le._visibility&2?xo(m,_,S,U,f):Ql(m,_):(le._visibility|=2,xo(m,_,S,U,f)),f&&ee&2048&&$f(_.alternate,_);break;case 24:xo(m,_,S,U,f),f&&ee&2048&&Gf(_.alternate,_);break;default:xo(m,_,S,U,f)}s=s.sibling}}function Ql(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,c=s,f=c.flags;switch(c.tag){case 22:Ql(r,c),f&2048&&$f(c.alternate,c);break;case 24:Ql(r,c),f&2048&&Gf(c.alternate,c);break;default:Ql(r,c)}s=s.sibling}}var Kl=8192;function To(t,s,r){if(t.subtreeFlags&Kl)for(t=t.child;t!==null;)qv(t,s,r),t=t.sibling}function qv(t,s,r){switch(t.tag){case 26:To(t,s,r),t.flags&Kl&&t.memoizedState!==null&&Nw(r,qs,t.memoizedState,t.memoizedProps);break;case 5:To(t,s,r);break;case 3:case 4:var c=qs;qs=ah(t.stateNode.containerInfo),To(t,s,r),qs=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=Kl,Kl=16777216,To(t,s,r),Kl=c):To(t,s,r));break;default:To(t,s,r)}}function Fv(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Wl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];yn=c,$v(c,t)}Fv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hv(t),t=t.sibling}function Hv(t){switch(t.tag){case 0:case 11:case 15:Wl(t),t.flags&2048&&Ca(9,t,t.return);break;case 3:Wl(t);break;case 12:Wl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Gu(t)):Wl(t);break;default:Wl(t)}}function Gu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];yn=c,$v(c,t)}Fv(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Ca(8,s,s.return),Gu(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Gu(s));break;default:Gu(s)}t=t.sibling}}function $v(t,s){for(;yn!==null;){var r=yn;switch(r.tag){case 0:case 11:case 15:Ca(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Il(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,yn=c;else e:for(r=t;yn!==null;){c=yn;var f=c.sibling,m=c.return;if(Ov(c),c===r){yn=null;break e}if(f!==null){f.return=m,yn=f;break e}yn=m}}}var zE={getCacheForType:function(t){var s=wn(Zt),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r},cacheSignal:function(){return wn(Zt).controller.signal}},qE=typeof WeakMap=="function"?WeakMap:Map,vt=0,kt=null,Ze=null,tt=0,xt=0,us=null,ja=!1,Eo=!1,Yf=!1,Hi=0,Ht=0,Ra=0,kr=0,Qf=0,hs=0,wo=0,Xl=null,Xn=null,Kf=!1,Yu=0,Gv=0,Qu=1/0,Ku=null,ka=null,un=0,Da=null,So=null,$i=0,Wf=0,Xf=null,Yv=null,Jl=0,Jf=null;function ds(){return(vt&2)!==0&&tt!==0?tt&-tt:B.T!==null?im():Te()}function Qv(){if(hs===0)if((tt&536870912)===0||lt){var t=fn;fn<<=1,(fn&3932160)===0&&(fn=262144),hs=t}else hs=536870912;return t=ls.current,t!==null&&(t.flags|=32),hs}function Jn(t,s,r){(t===kt&&(xt===2||xt===9)||t.cancelPendingCommit!==null)&&(No(t,0),Ia(t,tt,hs,!1)),bn(t,r),((vt&2)===0||t!==kt)&&(t===kt&&((vt&2)===0&&(kr|=r),Ht===4&&Ia(t,tt,hs,!1)),yi(t))}function Kv(t,s,r){if((vt&6)!==0)throw Error(a(327));var c=!r&&(s&127)===0&&(s&t.expiredLanes)===0||ln(t,s),f=c?$E(t,s):em(t,s,!0),m=c;do{if(f===0){Eo&&!c&&Ia(t,s,0,!1);break}else{if(r=t.current.alternate,m&&!FE(r)){f=em(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var S=t;f=Xl;var U=S.current.memoizedState.isDehydrated;if(U&&(No(S,_).flags|=256),_=em(S,_,!1),_!==2){if(Yf&&!U){S.errorRecoveryDisabledLanes|=m,kr|=m,f=4;break e}m=Xn,Xn=f,m!==null&&(Xn===null?Xn=m:Xn.push.apply(Xn,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){No(t,0),Ia(t,s,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:Ia(c,s,hs,!ja);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(f=Yu+300-dt(),10<f)){if(Ia(c,s,hs,!ja),Hn(c,0,!0)!==0)break e;$i=s,c.timeoutHandle=N0(Wv.bind(null,c,r,Xn,Ku,Kf,s,hs,kr,wo,ja,m,"Throttled",-0,0),f);break e}Wv(c,r,Xn,Ku,Kf,s,hs,kr,wo,ja,m,null,-0,0)}}break}while(!0);yi(t)}function Wv(t,s,r,c,f,m,_,S,U,ee,le,fe,te,ae){if(t.timeoutHandle=-1,fe=s.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ls},qv(s,m,fe);var De=(m&62914560)===m?Yu-dt():(m&4194048)===m?Gv-dt():0;if(De=Aw(fe,De),De!==null){$i=m,t.cancelPendingCommit=De(i0.bind(null,t,s,m,r,c,f,_,S,U,le,fe,null,te,ae)),Ia(t,m,_,!ee);return}}i0(t,s,m,r,c,f,_,S,U)}function FE(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],m=f.getSnapshot;f=f.value;try{if(!rs(m(),f))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ia(t,s,r,c){s&=~Qf,s&=~kr,t.suspendedLanes|=s,t.pingedLanes&=~s,c&&(t.warmLanes|=s),c=t.expirationTimes;for(var f=s;0<f;){var m=31-Mt(f),_=1<<m;c[m]=-1,f&=~_}r!==0&&W(t,r,s)}function Wu(){return(vt&6)===0?(Zl(0),!1):!0}function Zf(){if(Ze!==null){if(xt===0)var t=Ze.return;else t=Ze,Mi=Tr=null,pf(t),go=null,Ol=0,t=Ze;for(;t!==null;)Av(t.alternate,t),t=t.return;Ze=null}}function No(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,cw(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),$i=0,Zf(),kt=t,Ze=r=Di(t.current,null),tt=s,xt=0,us=null,ja=!1,Eo=ln(t,s),Yf=!1,wo=hs=Qf=kr=Ra=Ht=0,Xn=Xl=null,Kf=!1,(s&8)!==0&&(s|=s&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=s;0<c;){var f=31-Mt(c),m=1<<f;s|=t[f],c&=~m}return Hi=s,yu(),r}function Xv(t,s){We=null,B.H=Fl,s===po||s===Su?(s=fy(),xt=3):s===nf?(s=fy(),xt=4):xt=s===kf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,us=s,Ze===null&&(Ht=1,Uu(t,ws(s,t.current)))}function Jv(){var t=ls.current;return t===null?!0:(tt&4194048)===tt?Cs===null:(tt&62914560)===tt||(tt&536870912)!==0?t===Cs:!1}function Zv(){var t=B.H;return B.H=Fl,t===null?Fl:t}function e0(){var t=B.A;return B.A=zE,t}function Xu(){Ht=4,ja||(tt&4194048)!==tt&&ls.current!==null||(Eo=!0),(Ra&134217727)===0&&(kr&134217727)===0||kt===null||Ia(kt,tt,hs,!1)}function em(t,s,r){var c=vt;vt|=2;var f=Zv(),m=e0();(kt!==t||tt!==s)&&(Ku=null,No(t,s)),s=!1;var _=Ht;e:do try{if(xt!==0&&Ze!==null){var S=Ze,U=us;switch(xt){case 8:Zf(),_=6;break e;case 3:case 2:case 9:case 6:ls.current===null&&(s=!0);var ee=xt;if(xt=0,us=null,Ao(t,S,U,ee),r&&Eo){_=0;break e}break;default:ee=xt,xt=0,us=null,Ao(t,S,U,ee)}}HE(),_=Ht;break}catch(le){Xv(t,le)}while(!0);return s&&t.shellSuspendCounter++,Mi=Tr=null,vt=c,B.H=f,B.A=m,Ze===null&&(kt=null,tt=0,yu()),_}function HE(){for(;Ze!==null;)t0(Ze)}function $E(t,s){var r=vt;vt|=2;var c=Zv(),f=e0();kt!==t||tt!==s?(Ku=null,Qu=dt()+500,No(t,s)):Eo=ln(t,s);e:do try{if(xt!==0&&Ze!==null){s=Ze;var m=us;t:switch(xt){case 1:xt=0,us=null,Ao(t,s,m,1);break;case 2:case 9:if(hy(m)){xt=0,us=null,n0(s);break}s=function(){xt!==2&&xt!==9||kt!==t||(xt=7),yi(t)},m.then(s,s);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:hy(m)?(xt=0,us=null,n0(s)):(xt=0,us=null,Ao(t,s,m,7));break;case 5:var _=null;switch(Ze.tag){case 26:_=Ze.memoizedState;case 5:case 27:var S=Ze;if(_?z0(_):S.stateNode.complete){xt=0,us=null;var U=S.sibling;if(U!==null)Ze=U;else{var ee=S.return;ee!==null?(Ze=ee,Ju(ee)):Ze=null}break t}}xt=0,us=null,Ao(t,s,m,5);break;case 6:xt=0,us=null,Ao(t,s,m,6);break;case 8:Zf(),Ht=6;break e;default:throw Error(a(462))}}GE();break}catch(le){Xv(t,le)}while(!0);return Mi=Tr=null,B.H=c,B.A=f,vt=r,Ze!==null?0:(kt=null,tt=0,yu(),Ht)}function GE(){for(;Ze!==null&&!Wt();)t0(Ze)}function t0(t){var s=Sv(t.alternate,t,Hi);t.memoizedProps=t.pendingProps,s===null?Ju(t):Ze=s}function n0(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=_v(r,s,s.pendingProps,s.type,void 0,tt);break;case 11:s=_v(r,s,s.pendingProps,s.type.render,s.ref,tt);break;case 5:pf(s);default:Av(r,s),s=Ze=ey(s,Hi),s=Sv(r,s,Hi)}t.memoizedProps=t.pendingProps,s===null?Ju(t):Ze=s}function Ao(t,s,r,c){Mi=Tr=null,pf(s),go=null,Ol=0;var f=s.return;try{if(ME(t,f,s,r,tt)){Ht=1,Uu(t,ws(r,t.current)),Ze=null;return}}catch(m){if(f!==null)throw Ze=f,m;Ht=1,Uu(t,ws(r,t.current)),Ze=null;return}s.flags&32768?(lt||c===1?t=!0:Eo||(tt&536870912)!==0?t=!1:(ja=t=!0,(c===2||c===9||c===3||c===6)&&(c=ls.current,c!==null&&c.tag===13&&(c.flags|=16384))),s0(s,t)):Ju(s)}function Ju(t){var s=t;do{if((s.flags&32768)!==0){s0(s,ja);return}t=s.return;var r=VE(s.alternate,s,Hi);if(r!==null){Ze=r;return}if(s=s.sibling,s!==null){Ze=s;return}Ze=s=t}while(s!==null);Ht===0&&(Ht=5)}function s0(t,s){do{var r=PE(t.alternate,t);if(r!==null){r.flags&=32767,Ze=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){Ze=t;return}Ze=t=r}while(t!==null);Ht=6,Ze=null}function i0(t,s,r,c,f,m,_,S,U){t.cancelPendingCommit=null;do Zu();while(un!==0);if((vt&6)!==0)throw Error(a(327));if(s!==null){if(s===t.current)throw Error(a(177));if(m=s.lanes|s.childLanes,m|=zd,is(t,r,m,_,S,U),t===kt&&(Ze=kt=null,tt=0),So=s,Da=t,$i=r,Wf=m,Xf=f,Yv=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,WE(vs,function(){return c0(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=B.T,B.T=null,f=re.p,re.p=2,_=vt,vt|=4;try{UE(t,s,r)}finally{vt=_,re.p=f,B.T=c}}un=1,a0(),r0(),o0()}}function a0(){if(un===1){un=0;var t=Da,s=So,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var c=re.p;re.p=2;var f=vt;vt|=4;try{Uv(s,t);var m=dm,_=$g(t.containerInfo),S=m.focusedElem,U=m.selectionRange;if(_!==S&&S&&S.ownerDocument&&Hg(S.ownerDocument.documentElement,S)){if(U!==null&&Ld(S)){var ee=U.start,le=U.end;if(le===void 0&&(le=ee),"selectionStart"in S)S.selectionStart=ee,S.selectionEnd=Math.min(le,S.value.length);else{var fe=S.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ae=te.getSelection(),De=S.textContent.length,ze=Math.min(U.start,De),Ct=U.end===void 0?ze:Math.min(U.end,De);!ae.extend&&ze>Ct&&(_=Ct,Ct=ze,ze=_);var Q=Fg(S,ze),$=Fg(S,Ct);if(Q&&$&&(ae.rangeCount!==1||ae.anchorNode!==Q.node||ae.anchorOffset!==Q.offset||ae.focusNode!==$.node||ae.focusOffset!==$.offset)){var Z=fe.createRange();Z.setStart(Q.node,Q.offset),ae.removeAllRanges(),ze>Ct?(ae.addRange(Z),ae.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),ae.addRange(Z))}}}}for(fe=[],ae=S;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<fe.length;S++){var he=fe[S];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}hh=!!hm,dm=hm=null}finally{vt=f,re.p=c,B.T=r}}t.current=s,un=2}}function r0(){if(un===2){un=0;var t=Da,s=So,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var c=re.p;re.p=2;var f=vt;vt|=4;try{Mv(t,s.alternate,s)}finally{vt=f,re.p=c,B.T=r}}un=3}}function o0(){if(un===4||un===3){un=0,ys();var t=Da,s=So,r=$i,c=Yv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?un=5:(un=0,So=Da=null,l0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ka=null),oe(r),s=s.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Rn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=B.T,f=re.p,re.p=2,B.T=null;try{for(var m=t.onRecoverableError,_=0;_<c.length;_++){var S=c[_];m(S.value,{componentStack:S.stack})}}finally{B.T=s,re.p=f}}($i&3)!==0&&Zu(),yi(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===Jf?Jl++:(Jl=0,Jf=t):Jl=0,Zl(0)}}function l0(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Il(s)))}function Zu(){return a0(),r0(),o0(),c0()}function c0(){if(un!==5)return!1;var t=Da,s=Wf;Wf=0;var r=oe($i),c=B.T,f=re.p;try{re.p=32>r?32:r,B.T=null,r=Xf,Xf=null;var m=Da,_=$i;if(un=0,So=Da=null,$i=0,(vt&6)!==0)throw Error(a(331));var S=vt;if(vt|=4,Hv(m.current),zv(m,m.current,_,r),vt=S,Zl(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Rn,m)}catch{}return!0}finally{re.p=f,B.T=c,l0(t,s)}}function u0(t,s,r){s=ws(r,s),s=Rf(t.stateNode,s,2),t=Sa(t,s,2),t!==null&&(bn(t,2),yi(t))}function Tt(t,s,r){if(t.tag===3)u0(t,t,r);else for(;s!==null;){if(s.tag===3){u0(s,t,r);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ka===null||!ka.has(c))){t=ws(r,t),r=hv(2),c=Sa(s,r,2),c!==null&&(dv(r,c,s,t),bn(c,2),yi(c));break}}s=s.return}}function tm(t,s,r){var c=t.pingCache;if(c===null){c=t.pingCache=new qE;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(r)||(Yf=!0,f.add(r),t=YE.bind(null,t,s,r),s.then(t,t))}function YE(t,s,r){var c=t.pingCache;c!==null&&c.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,kt===t&&(tt&r)===r&&(Ht===4||Ht===3&&(tt&62914560)===tt&&300>dt()-Yu?(vt&2)===0&&No(t,0):Qf|=r,wo===tt&&(wo=0)),yi(t)}function h0(t,s){s===0&&(s=ca()),t=_r(t,s),t!==null&&(bn(t,s),yi(t))}function QE(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),h0(t,r)}function KE(t,s){var r=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(s),h0(t,r)}function WE(t,s){return ht(t,s)}var eh=null,Co=null,nm=!1,th=!1,sm=!1,Ma=0;function yi(t){t!==Co&&t.next===null&&(Co===null?eh=Co=t:Co=Co.next=t),th=!0,nm||(nm=!0,JE())}function Zl(t,s){if(!sm&&th){sm=!0;do for(var r=!1,c=eh;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var _=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-Mt(42|t)+1)-1,m&=f&~(_&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,p0(c,m))}else m=tt,m=Hn(c,c===kt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||ln(c,m)||(r=!0,p0(c,m));c=c.next}while(r);sm=!1}}function XE(){d0()}function d0(){th=nm=!1;var t=0;Ma!==0&&lw()&&(t=Ma);for(var s=dt(),r=null,c=eh;c!==null;){var f=c.next,m=f0(c,s);m===0?(c.next=null,r===null?eh=f:r.next=f,f===null&&(Co=r)):(r=c,(t!==0||(m&3)!==0)&&(th=!0)),c=f}un!==0&&un!==5||Zl(t),Ma!==0&&(Ma=0)}function f0(t,s){for(var r=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-Mt(m),S=1<<_,U=f[_];U===-1?((S&r)===0||(S&c)!==0)&&(f[_]=ni(S,s)):U<=s&&(t.expiredLanes|=S),m&=~S}if(s=kt,r=tt,r=Hn(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,r===0||t===s&&(xt===2||xt===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&ts(c),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||ln(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(c!==null&&ts(c),oe(r)){case 2:case 8:r=Os;break;case 32:r=vs;break;case 268435456:r=Zs;break;default:r=vs}return c=m0.bind(null,t),r=ht(r,c),t.callbackPriority=s,t.callbackNode=r,s}return c!==null&&c!==null&&ts(c),t.callbackPriority=2,t.callbackNode=null,2}function m0(t,s){if(un!==0&&un!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Zu()&&t.callbackNode!==r)return null;var c=tt;return c=Hn(t,t===kt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Kv(t,c,s),f0(t,dt()),t.callbackNode!=null&&t.callbackNode===r?m0.bind(null,t):null)}function p0(t,s){if(Zu())return null;Kv(t,s,!0)}function JE(){uw(function(){(vt&6)!==0?ht(Ni,XE):d0()})}function im(){if(Ma===0){var t=fo;t===0&&(t=jt,jt<<=1,(jt&261888)===0&&(jt=256)),Ma=t}return Ma}function g0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Xr(""+t)}function y0(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function ZE(t,s,r,c,f){if(s==="submit"&&r&&r.stateNode===f){var m=g0((f[Qe]||null).action),_=c.submitter;_&&(s=(s=_[Qe]||null)?g0(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var S=new ui("action","action",null,c,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ma!==0){var U=_?y0(f,_):new FormData(f);wf(r,{pending:!0,data:U,method:f.method,action:m},null,U)}}else typeof m=="function"&&(S.preventDefault(),U=_?y0(f,_):new FormData(f),wf(r,{pending:!0,data:U,method:f.method,action:m},m,U))},currentTarget:f}]})}}for(var am=0;am<Bd.length;am++){var rm=Bd[am],ew=rm.toLowerCase(),tw=rm[0].toUpperCase()+rm.slice(1);zs(ew,"on"+tw)}zs(Qg,"onAnimationEnd"),zs(Kg,"onAnimationIteration"),zs(Wg,"onAnimationStart"),zs("dblclick","onDoubleClick"),zs("focusin","onFocus"),zs("focusout","onBlur"),zs(yE,"onTransitionRun"),zs(vE,"onTransitionStart"),zs(_E,"onTransitionCancel"),zs(Xg,"onTransitionEnd"),ri("onMouseEnter",["mouseout","mouseover"]),ri("onMouseLeave",["mouseout","mouseover"]),ri("onPointerEnter",["pointerout","pointerover"]),ri("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ec));function v0(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var c=t[r],f=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var _=c.length-1;0<=_;_--){var S=c[_],U=S.instance,ee=S.currentTarget;if(S=S.listener,U!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ee;try{m(f)}catch(le){gu(le)}f.currentTarget=null,m=U}else for(_=0;_<c.length;_++){if(S=c[_],U=S.instance,ee=S.currentTarget,S=S.listener,U!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ee;try{m(f)}catch(le){gu(le)}f.currentTarget=null,m=U}}}}function et(t,s){var r=s[mn];r===void 0&&(r=s[mn]=new Set);var c=t+"__bubble";r.has(c)||(_0(s,t,2,!1),r.add(c))}function om(t,s,r){var c=0;s&&(c|=4),_0(r,t,c,s)}var nh="_reactListening"+Math.random().toString(36).slice(2);function lm(t){if(!t[nh]){t[nh]=!0,dl.forEach(function(r){r!=="selectionchange"&&(nw.has(r)||om(r,!1,t),om(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[nh]||(s[nh]=!0,om("selectionchange",!1,s))}}function _0(t,s,r,c){switch(Q0(s)){case 2:var f=Rw;break;case 8:f=kw;break;default:f=Em}r=f.bind(null,s,r,t),f=void 0,!hr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(s,r,{capture:!0,passive:f}):t.addEventListener(s,r,!0):f!==void 0?t.addEventListener(s,r,{passive:f}):t.addEventListener(s,r,!1)}function cm(t,s,r,c,f){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var S=c.stateNode.containerInfo;if(S===f)break;if(_===4)for(_=c.return;_!==null;){var U=_.tag;if((U===3||U===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;S!==null;){if(_=$e(S),_===null)return;if(U=_.tag,U===5||U===6||U===26||U===27){c=m=_;continue e}S=S.parentNode}}c=c.return}pa(function(){var ee=m,le=bs(r),fe=[];e:{var te=Jg.get(t);if(te!==void 0){var ae=ui,De=t;switch(t){case"keypress":if(fr(r)===0)break e;case"keydown":case"keyup":ae=fu;break;case"focusin":De="focus",ae=pr;break;case"focusout":De="blur",ae=pr;break;case"beforeblur":case"afterblur":ae=pr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=v;break;case Qg:case Kg:case Wg:ae=ru;break;case Xg:ae=A;break;case"scroll":case"scrollend":ae=wl;break;case"wheel":ae=ie;break;case"copy":case"cut":case"paste":ae=ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=ki;break;case"toggle":case"beforetoggle":ae=Ke}var ze=(s&4)!==0,Ct=!ze&&(t==="scroll"||t==="scrollend"),Q=ze?te!==null?te+"Capture":null:te;ze=[];for(var $=ee,Z;$!==null;){var he=$;if(Z=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||Z===null||Q===null||(he=Vs($,Q),he!=null&&ze.push(tc($,he,Z))),Ct)break;$=$.return}0<ze.length&&(te=new ae(te,De,null,r,le),fe.push({event:te,listeners:ze}))}}if((s&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",ae=t==="mouseout"||t==="pointerout",te&&r!==xl&&(De=r.relatedTarget||r.fromElement)&&($e(De)||De[cn]))break e;if((ae||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(De=r.relatedTarget||r.toElement,ae=ee,De=De?$e(De):null,De!==null&&(Ct=u(De),ze=De.tag,De!==Ct||ze!==5&&ze!==27&&ze!==6)&&(De=null)):(ae=null,De=ee),ae!==De)){if(ze=Sl,he="onMouseLeave",Q="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(ze=ki,he="onPointerLeave",Q="onPointerEnter",$="pointer"),Ct=ae==null?te:xn(ae),Z=De==null?te:xn(De),te=new ze(he,$+"leave",ae,r,le),te.target=Ct,te.relatedTarget=Z,he=null,$e(le)===ee&&(ze=new ze(Q,$+"enter",De,r,le),ze.target=Z,ze.relatedTarget=Ct,he=ze),Ct=he,ae&&De)t:{for(ze=sw,Q=ae,$=De,Z=0,he=Q;he;he=ze(he))Z++;he=0;for(var Pe=$;Pe;Pe=ze(Pe))he++;for(;0<Z-he;)Q=ze(Q),Z--;for(;0<he-Z;)$=ze($),he--;for(;Z--;){if(Q===$||$!==null&&Q===$.alternate){ze=Q;break t}Q=ze(Q),$=ze($)}ze=null}else ze=null;ae!==null&&b0(fe,te,ae,ze,!1),De!==null&&Ct!==null&&b0(fe,Ct,De,ze,!0)}}e:{if(te=ee?xn(ee):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var pt=Vg;else if(Og(te))if(Pg)pt=mE;else{pt=dE;var Ie=hE}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&Wr(ee.elementType)&&(pt=Vg):pt=fE;if(pt&&(pt=pt(t,ee))){Lg(fe,pt,r,le);break e}Ie&&Ie(t,te,ee),t==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&vl(te,"number",te.value)}switch(Ie=ee?xn(ee):window,t){case"focusin":(Og(Ie)||Ie.contentEditable==="true")&&(io=Ie,Vd=ee,Rl=null);break;case"focusout":Rl=Vd=io=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,Gg(fe,r,le);break;case"selectionchange":if(gE)break;case"keydown":case"keyup":Gg(fe,r,le)}var Xe;if(yt)e:{switch(t){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else so?gr(t,r)&&(nt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(nt="onCompositionStart");nt&&(fi&&r.locale!=="ko"&&(so||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&so&&(Xe=El()):(ci=le,Tl="value"in ci?ci.value:ci.textContent,so=!0)),Ie=sh(ee,nt),0<Ie.length&&(nt=new di(nt,t,null,r,le),fe.push({event:nt,listeners:Ie}),Xe?nt.data=Xe:(Xe=no(r),Xe!==null&&(nt.data=Xe)))),(Xe=Ts?oE(t,r):lE(t,r))&&(nt=sh(ee,"onBeforeInput"),0<nt.length&&(Ie=new di("onBeforeInput","beforeinput",null,r,le),fe.push({event:Ie,listeners:nt}),Ie.data=Xe)),ZE(fe,t,ee,r,le)}v0(fe,s)})}function tc(t,s,r){return{instance:t,listener:s,currentTarget:r}}function sh(t,s){for(var r=s+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Vs(t,r),f!=null&&c.unshift(tc(t,f,m)),f=Vs(t,s),f!=null&&c.push(tc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function sw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function b0(t,s,r,c,f){for(var m=s._reactName,_=[];r!==null&&r!==c;){var S=r,U=S.alternate,ee=S.stateNode;if(S=S.tag,U!==null&&U===c)break;S!==5&&S!==26&&S!==27||ee===null||(U=ee,f?(ee=Vs(r,m),ee!=null&&_.unshift(tc(r,ee,U))):f||(ee=Vs(r,m),ee!=null&&_.push(tc(r,ee,U)))),r=r.return}_.length!==0&&t.push({event:s,listeners:_})}var iw=/\r\n?/g,aw=/\u0000|\uFFFD/g;function x0(t){return(typeof t=="string"?t:""+t).replace(iw,`
`).replace(aw,"")}function T0(t,s){return s=x0(s),x0(t)===s}function At(t,s,r,c,f,m){switch(r){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Yn(t,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Yn(t,""+c);break;case"className":as(t,"class",c);break;case"tabIndex":as(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":as(t,r,c);break;case"style":bl(t,c,m);break;case"data":if(s!=="object"){as(t,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=Xr(""+c),t.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(s!=="input"&&At(t,s,"name",f.name,f,null),At(t,s,"formEncType",f.formEncType,f,null),At(t,s,"formMethod",f.formMethod,f,null),At(t,s,"formTarget",f.formTarget,f,null)):(At(t,s,"encType",f.encType,f,null),At(t,s,"method",f.method,f,null),At(t,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=Xr(""+c),t.setAttribute(r,c);break;case"onClick":c!=null&&(t.onclick=Ls);break;case"onScroll":c!=null&&et("scroll",t);break;case"onScrollEnd":c!=null&&et("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}r=Xr(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""+c):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":c===!0?t.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,c):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(r,c):t.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(r):t.setAttribute(r,c);break;case"popover":et("beforetoggle",t),et("toggle",t),Qr(t,"popover",c);break;case"xlinkActuate":Jt(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Jt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Jt(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Jt(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Jt(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Jt(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Jt(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Jt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Jt(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Qr(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=su.get(r)||r,Qr(t,r,c))}}function um(t,s,r,c,f,m){switch(r){case"style":bl(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof c=="string"?Yn(t,c):(typeof c=="number"||typeof c=="bigint")&&Yn(t,""+c);break;case"onScroll":c!=null&&et("scroll",t);break;case"onScrollEnd":c!=null&&et("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Ls);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fl.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),s=r.slice(2,f?r.length-7:void 0),m=t[Qe]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,c,f);break e}r in t?t[r]=c:c===!0?t.setAttribute(r,""):Qr(t,r,c)}}}function Nn(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",t),et("load",t);var c=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var _=r[m];if(_!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:At(t,s,m,_,r,null)}}f&&At(t,s,"srcSet",r.srcSet,r,null),c&&At(t,s,"src",r.src,r,null);return;case"input":et("invalid",t);var S=m=_=f=null,U=null,ee=null;for(c in r)if(r.hasOwnProperty(c)){var le=r[c];if(le!=null)switch(c){case"name":f=le;break;case"type":_=le;break;case"checked":U=le;break;case"defaultChecked":ee=le;break;case"value":m=le;break;case"defaultValue":S=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,s));break;default:At(t,s,c,le,r,null)}}eu(t,m,S,U,ee,_,f,!1);return;case"select":et("invalid",t),c=_=m=null;for(f in r)if(r.hasOwnProperty(f)&&(S=r[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":_=S;break;case"multiple":c=S;default:At(t,s,f,S,r,null)}s=m,r=_,t.multiple=!!c,s!=null?ha(t,!!c,s,!1):r!=null&&ha(t,!!c,r,!0);return;case"textarea":et("invalid",t),m=f=c=null;for(_ in r)if(r.hasOwnProperty(_)&&(S=r[_],S!=null))switch(_){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(a(91));break;default:At(t,s,_,S,r,null)}da(t,c,f,m);return;case"option":for(U in r)r.hasOwnProperty(U)&&(c=r[U],c!=null)&&(U==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":At(t,s,U,c,r,null));return;case"dialog":et("beforetoggle",t),et("toggle",t),et("cancel",t),et("close",t);break;case"iframe":case"object":et("load",t);break;case"video":case"audio":for(c=0;c<ec.length;c++)et(ec[c],t);break;case"image":et("error",t),et("load",t);break;case"details":et("toggle",t);break;case"embed":case"source":case"link":et("error",t),et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in r)if(r.hasOwnProperty(ee)&&(c=r[ee],c!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:At(t,s,ee,c,r,null)}return;default:if(Wr(s)){for(le in r)r.hasOwnProperty(le)&&(c=r[le],c!==void 0&&um(t,s,le,c,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(c=r[S],c!=null&&At(t,s,S,c,r,null))}function rw(t,s,r,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,S=null,U=null,ee=null,le=null;for(ae in r){var fe=r[ae];if(r.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":U=fe;default:c.hasOwnProperty(ae)||At(t,s,ae,null,c,fe)}}for(var te in c){var ae=c[te];if(fe=r[te],c.hasOwnProperty(te)&&(ae!=null||fe!=null))switch(te){case"type":m=ae;break;case"name":f=ae;break;case"checked":ee=ae;break;case"defaultChecked":le=ae;break;case"value":_=ae;break;case"defaultValue":S=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,s));break;default:ae!==fe&&At(t,s,te,ae,c,fe)}}Kr(t,_,S,U,ee,le,m,f);return;case"select":ae=_=S=te=null;for(m in r)if(U=r[m],r.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":ae=U;default:c.hasOwnProperty(m)||At(t,s,m,null,c,U)}for(f in c)if(m=c[f],U=r[f],c.hasOwnProperty(f)&&(m!=null||U!=null))switch(f){case"value":te=m;break;case"defaultValue":S=m;break;case"multiple":_=m;default:m!==U&&At(t,s,f,m,c,U)}s=S,r=_,c=ae,te!=null?ha(t,!!r,te,!1):!!c!=!!r&&(s!=null?ha(t,!!r,s,!0):ha(t,!!r,r?[]:"",!1));return;case"textarea":ae=te=null;for(S in r)if(f=r[S],r.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:At(t,s,S,null,c,f)}for(_ in c)if(f=c[_],m=r[_],c.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":te=f;break;case"defaultValue":ae=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&At(t,s,_,f,c,m)}tu(t,te,ae);return;case"option":for(var De in r)te=r[De],r.hasOwnProperty(De)&&te!=null&&!c.hasOwnProperty(De)&&(De==="selected"?t.selected=!1:At(t,s,De,null,c,te));for(U in c)te=c[U],ae=r[U],c.hasOwnProperty(U)&&te!==ae&&(te!=null||ae!=null)&&(U==="selected"?t.selected=te&&typeof te!="function"&&typeof te!="symbol":At(t,s,U,te,c,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in r)te=r[ze],r.hasOwnProperty(ze)&&te!=null&&!c.hasOwnProperty(ze)&&At(t,s,ze,null,c,te);for(ee in c)if(te=c[ee],ae=r[ee],c.hasOwnProperty(ee)&&te!==ae&&(te!=null||ae!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,s));break;default:At(t,s,ee,te,c,ae)}return;default:if(Wr(s)){for(var Ct in r)te=r[Ct],r.hasOwnProperty(Ct)&&te!==void 0&&!c.hasOwnProperty(Ct)&&um(t,s,Ct,void 0,c,te);for(le in c)te=c[le],ae=r[le],!c.hasOwnProperty(le)||te===ae||te===void 0&&ae===void 0||um(t,s,le,te,c,ae);return}}for(var Q in r)te=r[Q],r.hasOwnProperty(Q)&&te!=null&&!c.hasOwnProperty(Q)&&At(t,s,Q,null,c,te);for(fe in c)te=c[fe],ae=r[fe],!c.hasOwnProperty(fe)||te===ae||te==null&&ae==null||At(t,s,fe,te,c,ae)}function E0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ow(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var f=r[c],m=f.transferSize,_=f.initiatorType,S=f.duration;if(m&&S&&E0(_)){for(_=0,S=f.responseEnd,c+=1;c<r.length;c++){var U=r[c],ee=U.startTime;if(ee>S)break;var le=U.transferSize,fe=U.initiatorType;le&&E0(fe)&&(U=U.responseEnd,_+=le*(U<S?1:(S-ee)/(U-ee)))}if(--c,s+=8*(m+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var hm=null,dm=null;function ih(t){return t.nodeType===9?t:t.ownerDocument}function w0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S0(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function fm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mm=null;function lw(){var t=window.event;return t&&t.type==="popstate"?t===mm?!1:(mm=t,!0):(mm=null,!1)}var N0=typeof setTimeout=="function"?setTimeout:void 0,cw=typeof clearTimeout=="function"?clearTimeout:void 0,A0=typeof Promise=="function"?Promise:void 0,uw=typeof queueMicrotask=="function"?queueMicrotask:typeof A0<"u"?function(t){return A0.resolve(null).then(t).catch(hw)}:N0;function hw(t){setTimeout(function(){throw t})}function Oa(t){return t==="head"}function C0(t,s){var r=s,c=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(c===0){t.removeChild(f),Do(s);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")nc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,nc(r);for(var m=r.firstChild;m;){var _=m.nextSibling,S=m.nodeName;m[_s]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=_}}else r==="body"&&nc(t.ownerDocument.body);r=f}while(r);Do(s)}function j0(t,s){var r=t;t=0;do{var c=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=c}while(r)}function pm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":pm(r),Ci(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function dw(t,s,r,c){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[_s])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=js(t.nextSibling),t===null)break}return null}function fw(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=js(t.nextSibling),t===null))return null;return t}function R0(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=js(t.nextSibling),t===null))return null;return t}function gm(t){return t.data==="$?"||t.data==="$~"}function ym(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function mw(t,s){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||r.readyState!=="loading")s();else{var c=function(){s(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function js(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var vm=null;function k0(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(s===0)return js(t.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}t=t.nextSibling}return null}function D0(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return t;s--}else r!=="/$"&&r!=="/&"||s++}t=t.previousSibling}return null}function I0(t,s,r){switch(s=ih(r),t){case"html":if(t=s.documentElement,!t)throw Error(a(452));return t;case"head":if(t=s.head,!t)throw Error(a(453));return t;case"body":if(t=s.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function nc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ci(t)}var Rs=new Map,M0=new Set;function ah(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Gi=re.d;re.d={f:pw,r:gw,D:yw,C:vw,L:_w,m:bw,X:Tw,S:xw,M:Ew};function pw(){var t=Gi.f(),s=Wu();return t||s}function gw(t){var s=pn(t);s!==null&&s.tag===5&&s.type==="form"?Xy(s):Gi.r(t)}var jo=typeof document>"u"?null:document;function O0(t,s,r){var c=jo;if(c&&typeof s=="string"&&s){var f=Gn(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),M0.has(f)||(M0.add(f),t={rel:t,crossOrigin:r,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),Nn(s,"link",t),Xt(s),c.head.appendChild(s)))}}function yw(t){Gi.D(t),O0("dns-prefetch",t,null)}function vw(t,s){Gi.C(t,s),O0("preconnect",t,s)}function _w(t,s,r){Gi.L(t,s,r);var c=jo;if(c&&t&&s){var f='link[rel="preload"][as="'+Gn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Gn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Gn(r.imageSizes)+'"]')):f+='[href="'+Gn(t)+'"]';var m=f;switch(s){case"style":m=Ro(t);break;case"script":m=ko(t)}Rs.has(m)||(t=T({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),Rs.set(m,t),c.querySelector(f)!==null||s==="style"&&c.querySelector(sc(m))||s==="script"&&c.querySelector(ic(m))||(s=c.createElement("link"),Nn(s,"link",t),Xt(s),c.head.appendChild(s)))}}function bw(t,s){Gi.m(t,s);var r=jo;if(r&&t){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Gn(c)+'"][href="'+Gn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ko(t)}if(!Rs.has(m)&&(t=T({rel:"modulepreload",href:t},s),Rs.set(m,t),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ic(m)))return}c=r.createElement("link"),Nn(c,"link",t),Xt(c),r.head.appendChild(c)}}}function xw(t,s,r){Gi.S(t,s,r);var c=jo;if(c&&t){var f=ii(c).hoistableStyles,m=Ro(t);s=s||"default";var _=f.get(m);if(!_){var S={loading:0,preload:null};if(_=c.querySelector(sc(m)))S.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":s},r),(r=Rs.get(m))&&_m(t,r);var U=_=c.createElement("link");Xt(U),Nn(U,"link",t),U._p=new Promise(function(ee,le){U.onload=ee,U.onerror=le}),U.addEventListener("load",function(){S.loading|=1}),U.addEventListener("error",function(){S.loading|=2}),S.loading|=4,rh(_,s,c)}_={type:"stylesheet",instance:_,count:1,state:S},f.set(m,_)}}}function Tw(t,s){Gi.X(t,s);var r=jo;if(r&&t){var c=ii(r).hoistableScripts,f=ko(t),m=c.get(f);m||(m=r.querySelector(ic(f)),m||(t=T({src:t,async:!0},s),(s=Rs.get(f))&&bm(t,s),m=r.createElement("script"),Xt(m),Nn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Ew(t,s){Gi.M(t,s);var r=jo;if(r&&t){var c=ii(r).hoistableScripts,f=ko(t),m=c.get(f);m||(m=r.querySelector(ic(f)),m||(t=T({src:t,async:!0,type:"module"},s),(s=Rs.get(f))&&bm(t,s),m=r.createElement("script"),Xt(m),Nn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function L0(t,s,r,c){var f=(f=K.current)?ah(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Ro(r.href),r=ii(f).hoistableStyles,c=r.get(s),c||(c={type:"style",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Ro(r.href);var m=ii(f).hoistableStyles,_=m.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=f.querySelector(sc(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Rs.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Rs.set(t,r),m||ww(f,t,r,_.state))),s&&c===null)throw Error(a(528,""));return _}if(s&&c!==null)throw Error(a(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ko(r),r=ii(f).hoistableScripts,c=r.get(s),c||(c={type:"script",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Ro(t){return'href="'+Gn(t)+'"'}function sc(t){return'link[rel="stylesheet"]['+t+"]"}function V0(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function ww(t,s,r,c){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=t.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Nn(s,"link",r),Xt(s),t.head.appendChild(s))}function ko(t){return'[src="'+Gn(t)+'"]'}function ic(t){return"script[async]"+t}function P0(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var c=t.querySelector('style[data-href~="'+Gn(r.href)+'"]');if(c)return s.instance=c,Xt(c),c;var f=T({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),Xt(c),Nn(c,"style",f),rh(c,r.precedence,t),s.instance=c;case"stylesheet":f=Ro(r.href);var m=t.querySelector(sc(f));if(m)return s.state.loading|=4,s.instance=m,Xt(m),m;c=V0(r),(f=Rs.get(f))&&_m(c,f),m=(t.ownerDocument||t).createElement("link"),Xt(m);var _=m;return _._p=new Promise(function(S,U){_.onload=S,_.onerror=U}),Nn(m,"link",c),s.state.loading|=4,rh(m,r.precedence,t),s.instance=m;case"script":return m=ko(r.src),(f=t.querySelector(ic(m)))?(s.instance=f,Xt(f),f):(c=r,(f=Rs.get(m))&&(c=T({},r),bm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),Xt(f),Nn(f,"link",c),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,rh(c,r.precedence,t));return s.instance}function rh(t,s,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,_=0;_<c.length;_++){var S=c[_];if(S.dataset.precedence===s)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function _m(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function bm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var oh=null;function U0(t,s,r){if(oh===null){var c=new Map,f=oh=new Map;f.set(r,c)}else f=oh,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(t))return c;for(c.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var m=r[f];if(!(m[_s]||m[Ve]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var S=c.get(_);S?S.push(m):c.set(_,[m])}}return c}function B0(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function Sw(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function z0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Nw(t,s,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Ro(c.href),m=s.querySelector(sc(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=lh.bind(t),s.then(t,t)),r.state.loading|=4,r.instance=m,Xt(m);return}m=s.ownerDocument||s,c=V0(c),(f=Rs.get(f))&&_m(c,f),m=m.createElement("link"),Xt(m);var _=m;_._p=new Promise(function(S,U){_.onload=S,_.onerror=U}),Nn(m,"link",c),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=lh.bind(t),s.addEventListener("load",r),s.addEventListener("error",r))}}var xm=0;function Aw(t,s){return t.stylesheets&&t.count===0&&uh(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var c=setTimeout(function(){if(t.stylesheets&&uh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&xm===0&&(xm=62500*ow());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&uh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>xm?50:800)+s);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ch=null;function uh(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ch=new Map,s.forEach(Cw,t),ch=null,lh.call(t))}function Cw(t,s){if(!(s.state.loading&4)){var r=ch.get(t);if(r)var c=r.get(null);else{r=new Map,ch.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(r.set(_.dataset.precedence,_),c=_)}c&&r.set(null,c)}f=s.instance,_=f.getAttribute("data-precedence"),m=r.get(_)||c,m===c&&r.set(null,f),r.set(_,f),this.count++,c=lh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var ac={$$typeof:ne,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function jw(t,s,r,c,f,m,_,S,U){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kn(0),this.hiddenUpdates=kn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function q0(t,s,r,c,f,m,_,S,U,ee,le,fe){return t=new jw(t,s,r,_,U,ee,le,fe,S),s=1,m===!0&&(s|=24),m=os(3,null,null,s),t.current=m,m.stateNode=t,s=Zd(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:s},sf(m),t}function F0(t){return t?(t=oo,t):oo}function H0(t,s,r,c,f,m){f=F0(f),c.context===null?c.context=f:c.pendingContext=f,c=wa(s),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=Sa(t,c,s),r!==null&&(Jn(r,t,s),Vl(r,t,s))}function $0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Tm(t,s){$0(t,s),(t=t.alternate)&&$0(t,s)}function G0(t){if(t.tag===13||t.tag===31){var s=_r(t,67108864);s!==null&&Jn(s,t,67108864),Tm(t,67108864)}}function Y0(t){if(t.tag===13||t.tag===31){var s=ds();s=M(s);var r=_r(t,s);r!==null&&Jn(r,t,s),Tm(t,s)}}var hh=!0;function Rw(t,s,r,c){var f=B.T;B.T=null;var m=re.p;try{re.p=2,Em(t,s,r,c)}finally{re.p=m,B.T=f}}function kw(t,s,r,c){var f=B.T;B.T=null;var m=re.p;try{re.p=8,Em(t,s,r,c)}finally{re.p=m,B.T=f}}function Em(t,s,r,c){if(hh){var f=wm(c);if(f===null)cm(t,s,c,dh,r),K0(t,c);else if(Iw(f,t,s,r,c))c.stopPropagation();else if(K0(t,c),s&4&&-1<Dw.indexOf(t)){for(;f!==null;){var m=pn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Un(m.pendingLanes);if(_!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var U=1<<31-Mt(_);S.entanglements[1]|=U,_&=~U}yi(m),(vt&6)===0&&(Qu=dt()+500,Zl(0))}}break;case 31:case 13:S=_r(m,2),S!==null&&Jn(S,m,2),Wu(),Tm(m,2)}if(m=wm(c),m===null&&cm(t,s,c,dh,r),m===f)break;f=m}f!==null&&c.stopPropagation()}else cm(t,s,c,null,r)}}function wm(t){return t=bs(t),Sm(t)}var dh=null;function Sm(t){if(dh=null,t=$e(t),t!==null){var s=u(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=d(s),t!==null)return t;t=null}else if(r===31){if(t=p(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return dh=t,null}function Q0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ns()){case Ni:return 2;case Os:return 8;case vs:case or:return 32;case Zs:return 268435456;default:return 32}default:return 32}}var Nm=!1,La=null,Va=null,Pa=null,rc=new Map,oc=new Map,Ua=[],Dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function K0(t,s){switch(t){case"focusin":case"focusout":La=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":rc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(s.pointerId)}}function lc(t,s,r,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},s!==null&&(s=pn(s),s!==null&&G0(s)),t):(t.eventSystemFlags|=c,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function Iw(t,s,r,c,f){switch(s){case"focusin":return La=lc(La,t,s,r,c,f),!0;case"dragenter":return Va=lc(Va,t,s,r,c,f),!0;case"mouseover":return Pa=lc(Pa,t,s,r,c,f),!0;case"pointerover":var m=f.pointerId;return rc.set(m,lc(rc.get(m)||null,t,s,r,c,f)),!0;case"gotpointercapture":return m=f.pointerId,oc.set(m,lc(oc.get(m)||null,t,s,r,c,f)),!0}return!1}function W0(t){var s=$e(t.target);if(s!==null){var r=u(s);if(r!==null){if(s=r.tag,s===13){if(s=d(r),s!==null){t.blockedOn=s,Se(t.priority,function(){Y0(r)});return}}else if(s===31){if(s=p(r),s!==null){t.blockedOn=s,Se(t.priority,function(){Y0(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=wm(t.nativeEvent);if(r===null){r=t.nativeEvent;var c=new r.constructor(r.type,r);xl=c,r.target.dispatchEvent(c),xl=null}else return s=pn(r),s!==null&&G0(s),t.blockedOn=r,!1;s.shift()}return!0}function X0(t,s,r){fh(t)&&r.delete(s)}function Mw(){Nm=!1,La!==null&&fh(La)&&(La=null),Va!==null&&fh(Va)&&(Va=null),Pa!==null&&fh(Pa)&&(Pa=null),rc.forEach(X0),oc.forEach(X0)}function mh(t,s){t.blockedOn===s&&(t.blockedOn=null,Nm||(Nm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Mw)))}var ph=null;function J0(t){ph!==t&&(ph=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ph===t&&(ph=null);for(var s=0;s<t.length;s+=3){var r=t[s],c=t[s+1],f=t[s+2];if(typeof c!="function"){if(Sm(c||r)===null)continue;break}var m=pn(r);m!==null&&(t.splice(s,3),s-=3,wf(m,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function Do(t){function s(U){return mh(U,t)}La!==null&&mh(La,t),Va!==null&&mh(Va,t),Pa!==null&&mh(Pa,t),rc.forEach(s),oc.forEach(s);for(var r=0;r<Ua.length;r++){var c=Ua[r];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Ua.length&&(r=Ua[0],r.blockedOn===null);)W0(r),r.blockedOn===null&&Ua.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],m=r[c+1],_=f[Qe]||null;if(typeof m=="function")_||J0(r);else if(_){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Qe]||null)S=_.formAction;else if(Sm(f)!==null)continue}else S=_.action;typeof S=="function"?r[c+1]=S:(r.splice(c,3),c-=3),J0(r)}}}function Z0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Am(t){this._internalRoot=t}gh.prototype.render=Am.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));var r=s.current,c=ds();H0(r,c,t,s,null,null)},gh.prototype.unmount=Am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;H0(t.current,2,null,t,null,null),Wu(),s[cn]=null}};function gh(t){this._internalRoot=t}gh.prototype.unstable_scheduleHydration=function(t){if(t){var s=Te();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Ua.length&&s!==0&&s<Ua[r].priority;r++);Ua.splice(r,0,t),r===0&&W0(t)}};var e_=e.version;if(e_!=="19.2.4")throw Error(a(527,e_,"19.2.4"));re.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var Ow={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{Rn=yh.inject(Ow),Pt=yh}catch{}}return uc.createRoot=function(t,s){if(!o(t))throw Error(a(299));var r=!1,c="",f=ov,m=lv,_=cv;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=q0(t,1,!1,null,null,r,c,null,f,m,_,Z0),t[cn]=s.current,lm(t),new Am(s)},uc.hydrateRoot=function(t,s,r){if(!o(t))throw Error(a(299));var c=!1,f="",m=ov,_=lv,S=cv,U=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(U=r.formState)),s=q0(t,1,!0,s,r??null,c,f,U,m,_,S,Z0),s.context=F0(null),r=s.current,c=ds(),c=M(c),f=wa(c),f.callback=null,Sa(r,f,c),r=c,s.current.lanes=r,bn(s,r),yi(s),t[cn]=s.current,lm(t),new gh(s)},uc.version="19.2.4",uc}var u_;function $w(){if(u_)return Rm.exports;u_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Rm.exports=Hw(),Rm.exports}var Gw=$w();var h_="popstate";function Yw(i={}){function e(a,o){let{pathname:u,search:d,hash:p}=a.location;return ep("",{pathname:u,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:Ac(o)}return Kw(e,n,null,i)}function zt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Ks(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Qw(){return Math.random().toString(36).substring(2,10)}function d_(i,e){return{usr:i.state,key:i.key,idx:e}}function ep(i,e,n=null,a){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?el(e):e,state:n,key:e&&e.key||a||Qw()}}function Ac({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function el(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let a=i.indexOf("?");a>=0&&(e.search=i.substring(a),i=i.substring(0,a)),i&&(e.pathname=i)}return e}function Kw(i,e,n,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,d=o.history,p="POP",g=null,y=b();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function b(){return(d.state||{idx:null}).idx}function T(){p="POP";let V=b(),H=V==null?null:V-y;y=V,g&&g({action:p,location:D.location,delta:H})}function E(V,H){p="PUSH";let F=ep(D.location,V,H);y=b()+1;let ne=d_(F,y),ce=D.createHref(F);try{d.pushState(ne,"",ce)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;o.location.assign(ce)}u&&g&&g({action:p,location:D.location,delta:1})}function P(V,H){p="REPLACE";let F=ep(D.location,V,H);y=b();let ne=d_(F,y),ce=D.createHref(F);d.replaceState(ne,"",ce),u&&g&&g({action:p,location:D.location,delta:0})}function O(V){return Ww(V)}let D={get action(){return p},get location(){return i(o,d)},listen(V){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(h_,T),g=V,()=>{o.removeEventListener(h_,T),g=null}},createHref(V){return e(o,V)},createURL:O,encodeLocation(V){let H=O(V);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:E,replace:P,go(V){return d.go(V)}};return D}function Ww(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),zt(n,"No window.location.(origin|href) available to create URL");let a=typeof i=="string"?i:Ac(i);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function s1(i,e,n="/"){return Xw(i,e,n,!1)}function Xw(i,e,n,a){let o=typeof e=="string"?el(e):e,u=ea(o.pathname||"/",n);if(u==null)return null;let d=i1(i);Jw(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=cS(u);p=oS(d[g],y,a)}return p}function i1(i,e=[],n=[],a="",o=!1){let u=(d,p,g=o,y)=>{let b={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(a)&&g)return;zt(b.relativePath.startsWith(a),`Absolute route path "${b.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(a.length)}let T=Wi([a,b.relativePath]),E=n.concat(b);d.children&&d.children.length>0&&(zt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),i1(d.children,e,E,T,g)),!(d.path==null&&!d.index)&&e.push({path:T,score:aS(T,d.index),routesMeta:E})};return i.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of a1(d.path))u(d,p,!0,g)}),e}function a1(i){let e=i.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let d=a1(a.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...d),p.map(g=>i.startsWith("/")&&g===""?"/":g)}function Jw(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:rS(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var Zw=/^:[\w-]+$/,eS=3,tS=2,nS=1,sS=10,iS=-2,f_=i=>i==="*";function aS(i,e){let n=i.split("/"),a=n.length;return n.some(f_)&&(a+=iS),e&&(a+=tS),n.filter(o=>!f_(o)).reduce((o,u)=>o+(Zw.test(u)?eS:u===""?nS:sS),a)}function rS(i,e){return i.length===e.length&&i.slice(0,-1).every((a,o)=>a===e[o])?i[i.length-1]-e[e.length-1]:0}function oS(i,e,n=!1){let{routesMeta:a}=i,o={},u="/",d=[];for(let p=0;p<a.length;++p){let g=a[p],y=p===a.length-1,b=u==="/"?e:e.slice(u.length)||"/",T=zh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),E=g.route;if(!T&&y&&n&&!a[a.length-1].route.index&&(T=zh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!T)return null;Object.assign(o,T.params),d.push({params:o,pathname:Wi([u,T.pathname]),pathnameBase:fS(Wi([u,T.pathnameBase])),route:E}),T.pathnameBase!=="/"&&(u=Wi([u,T.pathnameBase]))}return d}function zh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,a]=lS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:a.reduce((y,{paramName:b,isOptional:T},E)=>{if(b==="*"){let O=p[E]||"";d=u.slice(0,u.length-O.length).replace(/(.)\/+$/,"$1")}const P=p[E];return T&&!P?y[b]=void 0:y[b]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:i}}function lS(i,e=!1,n=!0){Ks(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let a=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(a.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(a.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function cS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ks(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function ea(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=i.charAt(n);return a&&a!=="/"?null:i.slice(n)||"/"}var uS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function hS(i,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof i=="string"?el(i):i,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=m_(n.substring(1),"/"):u=m_(n,e)):u=e,{pathname:u,search:mS(a),hash:pS(o)}}function m_(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Mm(i,e,n,a){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mp(i){let e=dS(i);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function Op(i,e,n,a=!1){let o;typeof i=="string"?o=el(i):(o={...i},zt(!o.pathname||!o.pathname.includes("?"),Mm("?","pathname","search",o)),zt(!o.pathname||!o.pathname.includes("#"),Mm("#","pathname","hash",o)),zt(!o.search||!o.search.includes("#"),Mm("#","search","hash",o)));let u=i===""||o.pathname==="",d=u?"/":o.pathname,p;if(d==null)p=n;else{let T=e.length-1;if(!a&&d.startsWith("..")){let E=d.split("/");for(;E[0]==="..";)E.shift(),T-=1;o.pathname=E.join("/")}p=T>=0?e[T]:"/"}let g=hS(o,p),y=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var Wi=i=>i.join("/").replace(/\/\/+/g,"/"),fS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),mS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,pS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,gS=class{constructor(i,e,n,a=!1){this.status=i,this.statusText=e||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function yS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function vS(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var r1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function o1(i,e){let n=i;if(typeof n!="string"||!uS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let a=n,o=!1;if(r1)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=ea(d.pathname,e);d.origin===u.origin&&p!=null?n=p+d.search+d.hash:o=!0}catch{Ks(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var l1=["POST","PUT","PATCH","DELETE"];new Set(l1);var _S=["GET",...l1];new Set(_S);var tl=C.createContext(null);tl.displayName="DataRouter";var hd=C.createContext(null);hd.displayName="DataRouterState";var bS=C.createContext(!1),c1=C.createContext({isTransitioning:!1});c1.displayName="ViewTransition";var xS=C.createContext(new Map);xS.displayName="Fetchers";var TS=C.createContext(null);TS.displayName="Await";var ps=C.createContext(null);ps.displayName="Navigation";var Uc=C.createContext(null);Uc.displayName="Location";var Si=C.createContext({outlet:null,matches:[],isDataRoute:!1});Si.displayName="Route";var Lp=C.createContext(null);Lp.displayName="RouteError";var u1="REACT_ROUTER_ERROR",ES="REDIRECT",wS="ROUTE_ERROR_RESPONSE";function SS(i){if(i.startsWith(`${u1}:${ES}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function NS(i){if(i.startsWith(`${u1}:${wS}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new gS(e.status,e.statusText,e.data)}catch{}}function AS(i,{relative:e}={}){zt(nl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=C.useContext(ps),{hash:o,pathname:u,search:d}=Bc(i,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Wi([n,u])),a.createHref({pathname:p,search:d,hash:o})}function nl(){return C.useContext(Uc)!=null}function aa(){return zt(nl(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Uc).location}var h1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function d1(i){C.useContext(ps).static||C.useLayoutEffect(i)}function Vn(){let{isDataRoute:i}=C.useContext(Si);return i?BS():CS()}function CS(){zt(nl(),"useNavigate() may be used only in the context of a <Router> component.");let i=C.useContext(tl),{basename:e,navigator:n}=C.useContext(ps),{matches:a}=C.useContext(Si),{pathname:o}=aa(),u=JSON.stringify(Mp(a)),d=C.useRef(!1);return d1(()=>{d.current=!0}),C.useCallback((g,y={})=>{if(Ks(d.current,h1),!d.current)return;if(typeof g=="number"){n.go(g);return}let b=Op(g,JSON.parse(u),o,y.relative==="path");i==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Wi([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,u,o,i])}C.createContext(null);function Bc(i,{relative:e}={}){let{matches:n}=C.useContext(Si),{pathname:a}=aa(),o=JSON.stringify(Mp(n));return C.useMemo(()=>Op(i,JSON.parse(o),a,e==="path"),[i,o,a,e])}function jS(i,e){return f1(i,e)}function f1(i,e,n,a,o){zt(nl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=C.useContext(ps),{matches:d}=C.useContext(Si),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",T=p&&p.route;{let F=T&&T.path||"";p1(y,!T||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let E=aa(),P;if(e){let F=typeof e=="string"?el(e):e;zt(b==="/"||F.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${F.pathname}" was given in the \`location\` prop.`),P=F}else P=E;let O=P.pathname||"/",D=O;if(b!=="/"){let F=b.replace(/^\//,"").split("/");D="/"+O.replace(/^\//,"").split("/").slice(F.length).join("/")}let V=s1(i,{pathname:D});Ks(T||V!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),Ks(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=MS(V&&V.map(F=>Object.assign({},F,{params:Object.assign({},g,F.params),pathname:Wi([b,u.encodeLocation?u.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?b:Wi([b,u.encodeLocation?u.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),d,n,a,o);return e&&H?C.createElement(Uc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},H):H}function RS(){let i=US(),e=yS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:u},"ErrorBoundary")," or"," ",C.createElement("code",{style:u},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:o},n):null,d)}var kS=C.createElement(RS,null),m1=class extends C.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=NS(i.digest);n&&(i=n)}let e=i!==void 0?C.createElement(Si.Provider,{value:this.props.routeContext},C.createElement(Lp.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?C.createElement(DS,{error:i},e):e}};m1.contextType=bS;var Om=new WeakMap;function DS({children:i,error:e}){let{basename:n}=C.useContext(ps);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=SS(e.digest);if(a){let o=Om.get(e);if(o)throw o;let u=o1(a.location,n);if(r1&&!Om.get(e))if(u.isExternal||a.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:a.replace}));throw Om.set(e,d),d}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return i}function IS({routeContext:i,match:e,children:n}){let a=C.useContext(tl);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Si.Provider,{value:i},n)}function MS(i,e=[],n=null,a=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,d=n?.errors;if(d!=null){let b=u.findIndex(T=>T.route.id&&d?.[T.route.id]!==void 0);zt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(n)for(let b=0;b<u.length;b++){let T=u[b];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=b),T.route.id){let{loaderData:E,errors:P}=n,O=T.route.loader&&!E.hasOwnProperty(T.route.id)&&(!P||P[T.route.id]===void 0);if(T.route.lazy||O){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&a?(b,T)=>{a(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:vS(n.matches),errorInfo:T})}:void 0;return u.reduceRight((b,T,E)=>{let P,O=!1,D=null,V=null;n&&(P=d&&T.route.id?d[T.route.id]:void 0,D=T.route.errorElement||kS,p&&(g<0&&E===0?(p1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,V=null):g===E&&(O=!0,V=T.route.hydrateFallbackElement||null)));let H=e.concat(u.slice(0,E+1)),F=()=>{let ne;return P?ne=D:O?ne=V:T.route.Component?ne=C.createElement(T.route.Component,null):T.route.element?ne=T.route.element:ne=b,C.createElement(IS,{match:T,routeContext:{outlet:b,matches:H,isDataRoute:n!=null},children:ne})};return n&&(T.route.ErrorBoundary||T.route.errorElement||E===0)?C.createElement(m1,{location:n.location,revalidation:n.revalidation,component:D,error:P,children:F(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:y}):F()},null)}function Vp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OS(i){let e=C.useContext(tl);return zt(e,Vp(i)),e}function LS(i){let e=C.useContext(hd);return zt(e,Vp(i)),e}function VS(i){let e=C.useContext(Si);return zt(e,Vp(i)),e}function Pp(i){let e=VS(i),n=e.matches[e.matches.length-1];return zt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function PS(){return Pp("useRouteId")}function US(){let i=C.useContext(Lp),e=LS("useRouteError"),n=Pp("useRouteError");return i!==void 0?i:e.errors?.[n]}function BS(){let{router:i}=OS("useNavigate"),e=Pp("useNavigate"),n=C.useRef(!1);return d1(()=>{n.current=!0}),C.useCallback(async(o,u={})=>{Ks(n.current,h1),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var p_={};function p1(i,e,n){!e&&!p_[i]&&(p_[i]=!0,Ks(!1,n))}C.memo(zS);function zS({routes:i,future:e,state:n,onError:a}){return f1(i,void 0,n,a,e)}function qS({to:i,replace:e,state:n,relative:a}){zt(nl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(ps);Ks(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=C.useContext(Si),{pathname:d}=aa(),p=Vn(),g=Op(i,Mp(u),d,a==="path"),y=JSON.stringify(g);return C.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:a})},[p,y,a,e,n]),null}function qn(i){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FS({basename:i="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:u=!1,unstable_useTransitions:d}){zt(!nl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=i.replace(/^\/*/,"/"),g=C.useMemo(()=>({basename:p,navigator:o,static:u,unstable_useTransitions:d,future:{}}),[p,o,u,d]);typeof n=="string"&&(n=el(n));let{pathname:y="/",search:b="",hash:T="",state:E=null,key:P="default"}=n,O=C.useMemo(()=>{let D=ea(y,p);return D==null?null:{location:{pathname:D,search:b,hash:T,state:E,key:P},navigationType:a}},[p,y,b,T,E,P,a]);return Ks(O!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${T}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:C.createElement(ps.Provider,{value:g},C.createElement(Uc.Provider,{children:e,value:O}))}function HS({children:i,location:e}){return jS(tp(i),e)}function tp(i,e=[]){let n=[];return C.Children.forEach(i,(a,o)=>{if(!C.isValidElement(a))return;let u=[...e,o];if(a.type===C.Fragment){n.push.apply(n,tp(a.props.children,u));return}zt(a.type===qn,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=tp(a.props.children,u)),n.push(d)}),n}var Ah="get",Ch="application/x-www-form-urlencoded";function dd(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function $S(i){return dd(i)&&i.tagName.toLowerCase()==="button"}function GS(i){return dd(i)&&i.tagName.toLowerCase()==="form"}function YS(i){return dd(i)&&i.tagName.toLowerCase()==="input"}function QS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function KS(i,e){return i.button===0&&(!e||e==="_self")&&!QS(i)}var vh=null;function WS(){if(vh===null)try{new FormData(document.createElement("form"),0),vh=!1}catch{vh=!0}return vh}var XS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lm(i){return i!=null&&!XS.has(i)?(Ks(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ch}"`),null):i}function JS(i,e){let n,a,o,u,d;if(GS(i)){let p=i.getAttribute("action");a=p?ea(p,e):null,n=i.getAttribute("method")||Ah,o=Lm(i.getAttribute("enctype"))||Ch,u=new FormData(i)}else if($S(i)||YS(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||p.getAttribute("action");if(a=g?ea(g,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||Ah,o=Lm(i.getAttribute("formenctype"))||Lm(p.getAttribute("enctype"))||Ch,u=new FormData(p,i),!WS()){let{name:y,type:b,value:T}=i;if(b==="image"){let E=y?`${y}.`:"";u.append(`${E}x`,"0"),u.append(`${E}y`,"0")}else y&&u.append(y,T)}}else{if(dd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ah,a=null,o=Ch,d=i}return u&&o==="text/plain"&&(d=u,u=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Up(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ZS(i,e,n,a){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${a}`:o.pathname=`${o.pathname}.${a}`:o.pathname==="/"?o.pathname=`_root.${a}`:e&&ea(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${a}`,o}async function e2(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function t2(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function n2(i,e,n){let a=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await e2(u,n);return d.links?d.links():[]}return[]}));return r2(a.flat(1).filter(t2).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function g_(i,e,n,a,o,u){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let b=a.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function s2(i,e,{includeHydrateFallback:n}={}){return i2(i.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function i2(i){return[...new Set(i)]}function a2(i){let e={},n=Object.keys(i).sort();for(let a of n)e[a]=i[a];return e}function r2(i,e){let n=new Set;return new Set(e),i.reduce((a,o)=>{let u=JSON.stringify(a2(o));return n.has(u)||(n.add(u),a.push({key:u,link:o})),a},[])}function g1(){let i=C.useContext(tl);return Up(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function o2(){let i=C.useContext(hd);return Up(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Bp=C.createContext(void 0);Bp.displayName="FrameworkContext";function y1(){let i=C.useContext(Bp);return Up(i,"You must render this element inside a <HydratedRouter> element"),i}function l2(i,e){let n=C.useContext(Bp),[a,o]=C.useState(!1),[u,d]=C.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:T}=e,E=C.useRef(null);C.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let D=H=>{H.forEach(F=>{d(F.isIntersecting)})},V=new IntersectionObserver(D,{threshold:.5});return E.current&&V.observe(E.current),()=>{V.disconnect()}}},[i]),C.useEffect(()=>{if(a){let D=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(D)}}},[a]);let P=()=>{o(!0)},O=()=>{o(!1),d(!1)};return n?i!=="intent"?[u,E,{}]:[u,E,{onFocus:hc(p,P),onBlur:hc(g,O),onMouseEnter:hc(y,P),onMouseLeave:hc(b,O),onTouchStart:hc(T,P)}]:[!1,E,{}]}function hc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function c2({page:i,...e}){let{router:n}=g1(),a=C.useMemo(()=>s1(n.routes,i,n.basename),[n.routes,i,n.basename]);return a?C.createElement(h2,{page:i,matches:a,...e}):null}function u2(i){let{manifest:e,routeModules:n}=y1(),[a,o]=C.useState([]);return C.useEffect(()=>{let u=!1;return n2(i,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[i,e,n]),a}function h2({page:i,matches:e,...n}){let a=aa(),{future:o,manifest:u,routeModules:d}=y1(),{basename:p}=g1(),{loaderData:g,matches:y}=o2(),b=C.useMemo(()=>g_(i,e,y,u,a,"data"),[i,e,y,u,a]),T=C.useMemo(()=>g_(i,e,y,u,a,"assets"),[i,e,y,u,a]),E=C.useMemo(()=>{if(i===a.pathname+a.search+a.hash)return[];let D=new Set,V=!1;if(e.forEach(F=>{let ne=u.routes[F.route.id];!ne||!ne.hasLoader||(!b.some(ce=>ce.route.id===F.route.id)&&F.route.id in g&&d[F.route.id]?.shouldRevalidate||ne.hasClientLoader?V=!0:D.add(F.route.id))}),D.size===0)return[];let H=ZS(i,p,o.unstable_trailingSlashAwareDataRequests,"data");return V&&D.size>0&&H.searchParams.set("_routes",e.filter(F=>D.has(F.route.id)).map(F=>F.route.id).join(",")),[H.pathname+H.search]},[p,o.unstable_trailingSlashAwareDataRequests,g,a,u,b,e,i,d]),P=C.useMemo(()=>s2(T,u),[T,u]),O=u2(T);return C.createElement(C.Fragment,null,E.map(D=>C.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),P.map(D=>C.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),O.map(({key:D,link:V})=>C.createElement("link",{key:D,nonce:n.nonce,...V,crossOrigin:V.crossOrigin??n.crossOrigin})))}function d2(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var f2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{f2&&(window.__reactRouterVersion="7.13.0")}catch{}function m2({basename:i,children:e,unstable_useTransitions:n,window:a}){let o=C.useRef();o.current==null&&(o.current=Yw({window:a,v5Compat:!0}));let u=o.current,[d,p]=C.useState({action:u.action,location:u.location}),g=C.useCallback(y=>{n===!1?p(y):C.startTransition(()=>p(y))},[n]);return C.useLayoutEffect(()=>u.listen(g),[u,g]),C.createElement(FS,{basename:i,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var v1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_1=C.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:b,viewTransition:T,unstable_defaultShouldRevalidate:E,...P},O){let{basename:D,unstable_useTransitions:V}=C.useContext(ps),H=typeof y=="string"&&v1.test(y),F=o1(y,D);y=F.to;let ne=AS(y,{relative:o}),[ce,ue,me]=l2(a,P),k=v2(y,{replace:d,state:p,target:g,preventScrollReset:b,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:E,unstable_useTransitions:V});function N(z){e&&e(z),z.defaultPrevented||k(z)}let R=C.createElement("a",{...P,...me,href:F.absoluteURL||ne,onClick:F.isExternal||u?e:N,ref:d2(O,ue),target:g,"data-discover":!H&&n==="render"?"true":void 0});return ce&&!H?C.createElement(C.Fragment,null,R,C.createElement(c2,{page:ne})):R});_1.displayName="Link";var p2=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:u,to:d,viewTransition:p,children:g,...y},b){let T=Bc(d,{relative:y.relative}),E=aa(),P=C.useContext(hd),{navigator:O,basename:D}=C.useContext(ps),V=P!=null&&E2(T)&&p===!0,H=O.encodeLocation?O.encodeLocation(T).pathname:T.pathname,F=E.pathname,ne=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(F=F.toLowerCase(),ne=ne?ne.toLowerCase():null,H=H.toLowerCase()),ne&&D&&(ne=ea(ne,D)||ne);const ce=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let ue=F===H||!o&&F.startsWith(H)&&F.charAt(ce)==="/",me=ne!=null&&(ne===H||!o&&ne.startsWith(H)&&ne.charAt(H.length)==="/"),k={isActive:ue,isPending:me,isTransitioning:V},N=ue?e:void 0,R;typeof a=="function"?R=a(k):R=[a,ue?"active":null,me?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let z=typeof u=="function"?u(k):u;return C.createElement(_1,{...y,"aria-current":N,className:R,ref:b,style:z,to:d,viewTransition:p},typeof g=="function"?g(k):g)});p2.displayName="NavLink";var g2=C.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:u,method:d=Ah,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:T,unstable_defaultShouldRevalidate:E,...P},O)=>{let{unstable_useTransitions:D}=C.useContext(ps),V=x2(),H=T2(p,{relative:y}),F=d.toLowerCase()==="get"?"get":"post",ne=typeof p=="string"&&v1.test(p),ce=ue=>{if(g&&g(ue),ue.defaultPrevented)return;ue.preventDefault();let me=ue.nativeEvent.submitter,k=me?.getAttribute("formmethod")||d,N=()=>V(me||ue.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:o,state:u,relative:y,preventScrollReset:b,viewTransition:T,unstable_defaultShouldRevalidate:E});D&&n!==!1?C.startTransition(()=>N()):N()};return C.createElement("form",{ref:O,method:F,action:H,onSubmit:a?g:ce,...P,"data-discover":!ne&&i==="render"?"true":void 0})});g2.displayName="Form";function y2(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b1(i){let e=C.useContext(tl);return zt(e,y2(i)),e}function v2(i,{target:e,replace:n,state:a,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Vn(),b=aa(),T=Bc(i,{relative:u});return C.useCallback(E=>{if(KS(E,e)){E.preventDefault();let P=n!==void 0?n:Ac(b)===Ac(T),O=()=>y(i,{replace:P,state:a,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?C.startTransition(()=>O()):O()}},[b,y,T,n,a,e,i,o,u,d,p,g])}var _2=0,b2=()=>`__${String(++_2)}__`;function x2(){let{router:i}=b1("useSubmit"),{basename:e}=C.useContext(ps),n=PS(),a=i.fetch,o=i.navigate;return C.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:b,body:T}=JS(u,e);if(d.navigate===!1){let E=d.fetcherKey||b2();await a(E,n,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:T,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await o(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:T,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,o,e,n])}function T2(i,{relative:e}={}){let{basename:n}=C.useContext(ps),a=C.useContext(Si);zt(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...Bc(i||".",{relative:e})},d=aa();if(i==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(T=>T).forEach(T=>p.append("index",T));let b=p.toString();u.search=b?`?${b}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Wi([n,u.pathname])),Ac(u)}function E2(i,{relative:e}={}){let n=C.useContext(c1);zt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=b1("useViewTransitionState"),o=Bc(i,{relative:e});if(!n.isTransitioning)return!1;let u=ea(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=ea(n.nextLocation.pathname,a)||n.nextLocation.pathname;return zh(o.pathname,d)!=null||zh(o.pathname,u)!=null}const w2=()=>{};var y_={};const x1=function(i){const e=[];let n=0;for(let a=0;a<i.length;a++){let o=i.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},S2=function(i){const e=[];let n=0,a=0;for(;n<i.length;){const o=i[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],p=i[n++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],d=i[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},T1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,p=d?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,b=u>>2,T=(u&3)<<4|p>>4;let E=(p&15)<<2|y>>6,P=y&63;g||(P=64,d||(E=64)),a.push(n[b],n[T],n[E],n[P])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(x1(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):S2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const T=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||p==null||y==null||T==null)throw new N2;const E=u<<2|p>>4;if(a.push(E),y!==64){const P=p<<4&240|y>>2;if(a.push(P),T!==64){const O=y<<6&192|T;a.push(O)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class N2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A2=function(i){const e=x1(i);return T1.encodeByteArray(e,!0)},qh=function(i){return A2(i).replace(/\./g,"")},E1=function(i){try{return T1.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function C2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const j2=()=>C2().__FIREBASE_DEFAULTS__,R2=()=>{if(typeof process>"u"||typeof y_>"u")return;const i=y_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},k2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&E1(i[1]);return e&&JSON.parse(e)},fd=()=>{try{return w2()||j2()||R2()||k2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},w1=i=>fd()?.emulatorHosts?.[i],D2=i=>{const e=w1(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},S1=()=>fd()?.config,N1=i=>fd()?.[`_${i}`];class I2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}function sl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function A1(i){return(await fetch(i,{credentials:"include"})).ok}function M2(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[qh(JSON.stringify(n)),qh(JSON.stringify(d)),""].join(".")}const xc={};function O2(){const i={prod:[],emulator:[]};for(const e of Object.keys(xc))xc[e]?i.emulator.push(e):i.prod.push(e);return i}function L2(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let v_=!1;function C1(i,e){if(typeof window>"u"||typeof document>"u"||!sl(window.location.host)||xc[i]===e||xc[i]||v_)return;xc[i]=e;function n(E){return`__firebase__banner__${E}`}const a="__firebase__banner",u=O2().prod.length>0;function d(){const E=document.getElementById(a);E&&E.remove()}function p(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,P){E.setAttribute("width","24"),E.setAttribute("id",P),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{v_=!0,d()},E}function b(E,P){E.setAttribute("id",P),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=L2(a),P=n("text"),O=document.getElementById(P)||document.createElement("span"),D=n("learnmore"),V=document.getElementById(D)||document.createElement("a"),H=n("preprendIcon"),F=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const ne=E.element;p(ne),b(V,D);const ce=y();g(F,H),ne.append(F,O,V,ce),document.body.appendChild(ne)}u?(O.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function P2(){const i=fd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B2(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function z2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q2(){const i=Ln();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function F2(){return!P2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H2(){try{return typeof indexedDB=="object"}catch{return!1}}function $2(){return new Promise((i,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const G2="FirebaseError";class ra extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=G2,Object.setPrototypeOf(this,ra.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?Y2(u,a):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new ra(o,p,a)}}function Y2(i,e){return i.replace(Q2,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const Q2=/\{\$([^}]+)}/g;function K2(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Vr(i,e){if(i===e)return!0;const n=Object.keys(i),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=i[o],d=e[o];if(__(u)&&__(d)){if(!Vr(u,d))return!1}else if(u!==d)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function __(i){return i!==null&&typeof i=="object"}function qc(i){const e=[];for(const[n,a]of Object.entries(i))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function pc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function gc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function W2(i,e){const n=new X2(i,e);return n.subscribe.bind(n)}class X2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");J2(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Vm),o.error===void 0&&(o.error=Vm),o.complete===void 0&&(o.complete=Vm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J2(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Vm(){}function dn(i){return i&&i._delegate?i._delegate:i}class Pr{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ir="[DEFAULT]";class Z2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new I2;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tN(e))try{this.getOrInitializeService({instanceIdentifier:Ir})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=Ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ir){return this.instances.has(e)}getOptions(e=Ir){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);a===p&&d.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:eN(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Ir){return this.component?this.component.multipleInstances?e:Ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eN(i){return i===Ir?void 0:i}function tN(i){return i.instantiationMode==="EAGER"}class nN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Z2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var st;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(st||(st={}));const sN={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},iN=st.INFO,aN={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},rN=(i,e,...n)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),o=aN[e];if(o)console[o](`[${a}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zp{constructor(e){this.name=e,this._logLevel=iN,this._logHandler=rN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const oN=(i,e)=>e.some(n=>i instanceof n);let b_,x_;function lN(){return b_||(b_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cN(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j1=new WeakMap,np=new WeakMap,R1=new WeakMap,Pm=new WeakMap,qp=new WeakMap;function uN(i){const e=new Promise((n,a)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(Ya(i.result)),o()},d=()=>{a(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&j1.set(n,i)}).catch(()=>{}),qp.set(e,i),e}function hN(i){if(np.has(i))return;const e=new Promise((n,a)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{a(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});np.set(i,e)}let sp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return np.get(i);if(e==="objectStoreNames")return i.objectStoreNames||R1.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ya(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function dN(i){sp=i(sp)}function fN(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=i.call(Um(this),e,...n);return R1.set(a,e.sort?e.sort():[e]),Ya(a)}:cN().includes(i)?function(...e){return i.apply(Um(this),e),Ya(j1.get(this))}:function(...e){return Ya(i.apply(Um(this),e))}}function mN(i){return typeof i=="function"?fN(i):(i instanceof IDBTransaction&&hN(i),oN(i,lN())?new Proxy(i,sp):i)}function Ya(i){if(i instanceof IDBRequest)return uN(i);if(Pm.has(i))return Pm.get(i);const e=mN(i);return e!==i&&(Pm.set(i,e),qp.set(e,i)),e}const Um=i=>qp.get(i);function pN(i,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),p=Ya(d);return a&&d.addEventListener("upgradeneeded",g=>{a(Ya(d.result),g.oldVersion,g.newVersion,Ya(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const gN=["get","getKey","getAll","getAllKeys","count"],yN=["put","add","delete","clear"],Bm=new Map;function T_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Bm.get(e))return Bm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=yN.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||gN.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return a&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return Bm.set(e,u),u}dN(i=>({...i,get:(e,n,a)=>T_(e,n)||i.get(e,n,a),has:(e,n)=>!!T_(e,n)||i.has(e,n)}));class vN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_N(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function _N(i){return i.getComponent()?.type==="VERSION"}const ip="@firebase/app",E_="0.14.7";const ta=new zp("@firebase/app"),bN="@firebase/app-compat",xN="@firebase/analytics-compat",TN="@firebase/analytics",EN="@firebase/app-check-compat",wN="@firebase/app-check",SN="@firebase/auth",NN="@firebase/auth-compat",AN="@firebase/database",CN="@firebase/data-connect",jN="@firebase/database-compat",RN="@firebase/functions",kN="@firebase/functions-compat",DN="@firebase/installations",IN="@firebase/installations-compat",MN="@firebase/messaging",ON="@firebase/messaging-compat",LN="@firebase/performance",VN="@firebase/performance-compat",PN="@firebase/remote-config",UN="@firebase/remote-config-compat",BN="@firebase/storage",zN="@firebase/storage-compat",qN="@firebase/firestore",FN="@firebase/ai",HN="@firebase/firestore-compat",$N="firebase",GN="12.8.0";const ap="[DEFAULT]",YN={[ip]:"fire-core",[bN]:"fire-core-compat",[TN]:"fire-analytics",[xN]:"fire-analytics-compat",[wN]:"fire-app-check",[EN]:"fire-app-check-compat",[SN]:"fire-auth",[NN]:"fire-auth-compat",[AN]:"fire-rtdb",[CN]:"fire-data-connect",[jN]:"fire-rtdb-compat",[RN]:"fire-fn",[kN]:"fire-fn-compat",[DN]:"fire-iid",[IN]:"fire-iid-compat",[MN]:"fire-fcm",[ON]:"fire-fcm-compat",[LN]:"fire-perf",[VN]:"fire-perf-compat",[PN]:"fire-rc",[UN]:"fire-rc-compat",[BN]:"fire-gcs",[zN]:"fire-gcs-compat",[qN]:"fire-fst",[HN]:"fire-fst-compat",[FN]:"fire-vertex","fire-js":"fire-js",[$N]:"fire-js-all"};const Fh=new Map,QN=new Map,rp=new Map;function w_(i,e){try{i.container.addComponent(e)}catch(n){ta.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Go(i){const e=i.name;if(rp.has(e))return ta.debug(`There were multiple attempts to register component ${e}.`),!1;rp.set(e,i);for(const n of Fh.values())w_(n,i);for(const n of QN.values())w_(n,i);return!0}function Fp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ks(i){return i==null?!1:i.settings!==void 0}const KN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qa=new zc("app","Firebase",KN);class WN{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qa.create("app-deleted",{appName:this._name})}}const il=GN;function Hp(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const a={name:ap,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Qa.create("bad-app-name",{appName:String(o)});if(n||(n=S1()),!n)throw Qa.create("no-options");const u=Fh.get(o);if(u){if(Vr(n,u.options)&&Vr(a,u.config))return u;throw Qa.create("duplicate-app",{appName:o})}const d=new nN(o);for(const g of rp.values())d.addComponent(g);const p=new WN(n,a,d);return Fh.set(o,p),p}function k1(i=ap){const e=Fh.get(i);if(!e&&i===ap&&S1())return Hp();if(!e)throw Qa.create("no-app",{appName:i});return e}function Ka(i,e,n){let a=YN[i]??i;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ta.warn(d.join(" "));return}Go(new Pr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const XN="firebase-heartbeat-database",JN=1,Cc="firebase-heartbeat-store";let zm=null;function D1(){return zm||(zm=pN(XN,JN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Cc)}catch(n){console.warn(n)}}}}).catch(i=>{throw Qa.create("idb-open",{originalErrorMessage:i.message})})),zm}async function ZN(i){try{const n=(await D1()).transaction(Cc),a=await n.objectStore(Cc).get(I1(i));return await n.done,a}catch(e){if(e instanceof ra)ta.warn(e.message);else{const n=Qa.create("idb-get",{originalErrorMessage:e?.message});ta.warn(n.message)}}}async function S_(i,e){try{const a=(await D1()).transaction(Cc,"readwrite");await a.objectStore(Cc).put(e,I1(i)),await a.done}catch(n){if(n instanceof ra)ta.warn(n.message);else{const a=Qa.create("idb-set",{originalErrorMessage:n?.message});ta.warn(a.message)}}}function I1(i){return`${i.name}!${i.options.appId}`}const eA=1024,tA=30;class nA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iA(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=N_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>tA){const o=aA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ta.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=N_(),{heartbeatsToSend:n,unsentEntries:a}=sA(this._heartbeatsCache.heartbeats),o=qh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ta.warn(e),""}}}function N_(){return new Date().toISOString().substring(0,10)}function sA(i,e=eA){const n=[];let a=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),A_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),A_(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class iA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return H2()?$2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return S_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return S_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function A_(i){return qh(JSON.stringify({version:2,heartbeats:i})).length}function aA(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let a=1;a<i.length;a++)i[a].date<n&&(n=i[a].date,e=a);return e}function rA(i){Go(new Pr("platform-logger",e=>new vN(e),"PRIVATE")),Go(new Pr("heartbeat",e=>new nA(e),"PRIVATE")),Ka(ip,E_,i),Ka(ip,E_,"esm2020"),Ka("fire-js","")}rA("");function M1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oA=M1,O1=new zc("auth","Firebase",M1());const Hh=new zp("@firebase/auth");function lA(i,...e){Hh.logLevel<=st.WARN&&Hh.warn(`Auth (${il}): ${i}`,...e)}function jh(i,...e){Hh.logLevel<=st.ERROR&&Hh.error(`Auth (${il}): ${i}`,...e)}function Ws(i,...e){throw $p(i,...e)}function _i(i,...e){return $p(i,...e)}function L1(i,e,n){const a={...oA(),[e]:n};return new zc("auth","Firebase",a).create(e,{appName:i.name})}function Xi(i){return L1(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $p(i,...e){if(typeof i!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=i.name),i._errorFactory.create(n,...a)}return O1.create(i,...e)}function qe(i,e,...n){if(!i)throw $p(e,...n)}function Qi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw jh(e),new Error(e)}function na(i,e){i||Qi(e)}function op(){return typeof self<"u"&&self.location?.href||""}function cA(){return C_()==="http:"||C_()==="https:"}function C_(){return typeof self<"u"&&self.location?.protocol||null}function uA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cA()||B2()||"connection"in navigator)?navigator.onLine:!0}function hA(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,na(n>e,"Short delay should be less than long delay!"),this.isMobile=V2()||z2()}get(){return uA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gp(i,e){na(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class V1{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const fA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mA=new Fc(3e4,6e4);function oa(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function la(i,e,n,a,o={}){return P1(i,o,async()=>{let u={},d={};a&&(e==="GET"?d=a:u={body:JSON.stringify(a)});const p=qc({key:i.config.apiKey,...d}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:g,...u};return U2()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&sl(i.emulatorConfig.host)&&(y.credentials="include"),V1.fetch()(await U1(i,i.config.apiHost,n,p),y)})}async function P1(i,e,n){i._canInitEmulator=!1;const a={...dA,...e};try{const o=new gA(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw _h(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw _h(i,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw _h(i,"email-already-in-use",d);if(g==="USER_DISABLED")throw _h(i,"user-disabled",d);const b=a[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw L1(i,b,y);Ws(i,b)}}catch(o){if(o instanceof ra)throw o;Ws(i,"network-request-failed",{message:String(o)})}}async function Hc(i,e,n,a,o={}){const u=await la(i,e,n,a,o);return"mfaPendingCredential"in u&&Ws(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function U1(i,e,n,a){const o=`${e}${n}?${a}`,u=i,d=u.config.emulator?Gp(i.config,o):`${i.config.apiScheme}://${o}`;return fA.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function pA(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(_i(this.auth,"network-request-failed")),mA.get())})}}function _h(i,e,n){const a={appName:i.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=_i(i,e,a);return o.customData._tokenResponse=n,o}function j_(i){return i!==void 0&&i.enterprise!==void 0}class yA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vA(i,e){return la(i,"GET","/v2/recaptchaConfig",oa(i,e))}async function _A(i,e){return la(i,"POST","/v1/accounts:delete",e)}async function $h(i,e){return la(i,"POST","/v1/accounts:lookup",e)}function Tc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bA(i,e=!1){const n=dn(i),a=await n.getIdToken(e),o=Yp(a);qe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:a,authTime:Tc(qm(o.auth_time)),issuedAtTime:Tc(qm(o.iat)),expirationTime:Tc(qm(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function qm(i){return Number(i)*1e3}function Yp(i){const[e,n,a]=i.split(".");if(e===void 0||n===void 0||a===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const o=E1(n);return o?JSON.parse(o):(jh("Failed to decode base64 JWT payload"),null)}catch(o){return jh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function R_(i){const e=Yp(i);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function jc(i,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof ra&&xA(a)&&i.auth.currentUser===i&&await i.auth.signOut(),a}}function xA({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class TA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Gh(i){const e=i.auth,n=await i.getIdToken(),a=await jc(i,$h(e,{idToken:n}));qe(a?.users.length,e,"internal-error");const o=a.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?B1(o.providerUserInfo):[],d=wA(i.providerData,u),p=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!d?.length,y=p?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,b)}async function EA(i){const e=dn(i);await Gh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wA(i,e){return[...i.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function B1(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function SA(i,e){const n=await P1(i,{},async()=>{const a=qc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await U1(i,o,"/v1/token",`key=${u}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:a};return i.emulatorConfig&&sl(i.emulatorConfig.host)&&(g.credentials="include"),V1.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function NA(i,e){return la(i,"POST","/v2/accounts:revokeToken",oa(i,e))}class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const n=R_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:u}=await SA(e,n);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:u}=n,d=new Bo;return a&&(qe(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&(qe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(qe(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return Qi("not implemented")}}function za(i,e){qe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Gs{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new TA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await jc(this,this.stsTokenManager.getToken(this.auth,e));return qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bA(this,e)}reload(){return EA(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await Gh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ks(this.auth.app))return Promise.reject(Xi(this.auth));const e=await this.getIdToken();return await jc(this,_A(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:T,emailVerified:E,isAnonymous:P,providerData:O,stsTokenManager:D}=n;qe(T&&D,e,"internal-error");const V=Bo.fromJSON(this.name,D);qe(typeof T=="string",e,"internal-error"),za(a,e.name),za(o,e.name),qe(typeof E=="boolean",e,"internal-error"),qe(typeof P=="boolean",e,"internal-error"),za(u,e.name),za(d,e.name),za(p,e.name),za(g,e.name),za(y,e.name),za(b,e.name);const H=new Gs({uid:T,auth:e,email:o,emailVerified:E,displayName:a,isAnonymous:P,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:V,createdAt:y,lastLoginAt:b});return O&&Array.isArray(O)&&(H.providerData=O.map(F=>({...F}))),g&&(H._redirectEventId=g),H}static async _fromIdTokenResponse(e,n,a=!1){const o=new Bo;o.updateFromServerResponse(n);const u=new Gs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await Gh(u),u}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];qe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?B1(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,p=new Bo;p.updateFromIdToken(a);const g=new Gs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const k_=new Map;function Ki(i){na(i instanceof Function,"Expected a class definition");let e=k_.get(i);return e?(na(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,k_.set(i,e),e)}class z1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}z1.type="NONE";const D_=z1;function Rh(i,e,n){return`firebase:${i}:${e}:${n}`}class zo{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=Rh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Rh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $h(this.auth,{idToken:e}).catch(()=>{});return n?Gs._fromGetAccountInfoResponse(this.auth,n,e):null}return Gs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new zo(Ki(D_),e,a);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Ki(D_);const d=Rh(a,e.config.apiKey,e.name);let p=null;for(const y of n)try{const b=await y._get(d);if(b){let T;if(typeof b=="string"){const E=await $h(e,{idToken:b}).catch(()=>{});if(!E)break;T=await Gs._fromGetAccountInfoResponse(e,E,b)}else T=Gs._fromJSON(e,b);y!==u&&(p=T),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new zo(u,e,a):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new zo(u,e,a))}}function I_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y1(e))return"Blackberry";if(Q1(e))return"Webos";if(F1(e))return"Safari";if((e.includes("chrome/")||H1(e))&&!e.includes("edge/"))return"Chrome";if(G1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=i.match(n);if(a?.length===2)return a[1]}return"Other"}function q1(i=Ln()){return/firefox\//i.test(i)}function F1(i=Ln()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function H1(i=Ln()){return/crios\//i.test(i)}function $1(i=Ln()){return/iemobile/i.test(i)}function G1(i=Ln()){return/android/i.test(i)}function Y1(i=Ln()){return/blackberry/i.test(i)}function Q1(i=Ln()){return/webos/i.test(i)}function Qp(i=Ln()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function AA(i=Ln()){return Qp(i)&&!!window.navigator?.standalone}function CA(){return q2()&&document.documentMode===10}function K1(i=Ln()){return Qp(i)||G1(i)||Q1(i)||Y1(i)||/windows phone/i.test(i)||$1(i)}function W1(i,e=[]){let n;switch(i){case"Browser":n=I_(Ln());break;case"Worker":n=`${I_(Ln())}-${i}`;break;default:n=i}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${il}/${a}`}class jA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function RA(i,e={}){return la(i,"GET","/v2/passwordPolicy",oa(i,e))}const kA=6;class DA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class IA{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M_(this),this.idTokenSubscription=new M_(this),this.beforeStateQueue=new jA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ki(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $h(this,{idToken:e}),a=await Gs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ks(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=a?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(a=p.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ks(this.app))return Promise.reject(Xi(this));const n=e?dn(e):null;return n&&qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ks(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ks(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RA(this),n=new DA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zc("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await NA(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ki(e)||this._popupRedirectResolver;qe(n,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[Ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,a,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ir(i){return dn(i)}class M_{constructor(e){this.auth=e,this.observer=null,this.addObserver=W2(n=>this.observer=n)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MA(i){md=i}function X1(i){return md.loadJS(i)}function OA(){return md.recaptchaEnterpriseScript}function LA(){return md.gapiScript}function VA(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class PA{constructor(){this.enterprise=new UA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class UA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const BA="recaptcha-enterprise",J1="NO_RECAPTCHA";class zA{constructor(e){this.type=BA,this.auth=ir(e)}async verify(e="verify",n=!1){async function a(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{vA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new yA(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function o(u,d,p){const g=window.grecaptcha;j_(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(J1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PA().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{a(this.auth).then(p=>{if(!n&&j_(window.grecaptcha))o(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=OA();g.length!==0&&(g+=p),X1(g).then(()=>{o(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function O_(i,e,n,a=!1,o=!1){const u=new zA(i);let d;if(o)d=J1;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return a?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Yh(i,e,n,a,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await O_(i,e,n,n==="getOobCode");return a(i,u)}else return a(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await O_(i,e,n,n==="getOobCode");return a(i,d)}else return Promise.reject(u)})}function qA(i,e){const n=Fp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Vr(u,e??{}))return o;Ws(o,"already-initialized")}return n.initialize({options:e})}function FA(i,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(Ki);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(a,e?.popupRedirectResolver)}function HA(i,e,n){const a=ir(i);qe(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=Z1(e),{host:d,port:p}=$A(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},b=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){qe(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),qe(Vr(y,a.config.emulator)&&Vr(b,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=b,a.settings.appVerificationDisabledForTesting=!0,sl(d)?(A1(`${u}//${d}${g}`),C1("Auth",!0)):GA()}function Z1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function $A(i){const e=Z1(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:L_(a.substr(u.length+1))}}else{const[u,d]=a.split(":");return{host:u,port:L_(d)}}}function L_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function GA(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Kp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,n){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}async function YA(i,e){return la(i,"POST","/v1/accounts:signUp",e)}async function QA(i,e){return Hc(i,"POST","/v1/accounts:signInWithPassword",oa(i,e))}async function KA(i,e){return la(i,"POST","/v1/accounts:sendOobCode",oa(i,e))}async function WA(i,e){return KA(i,e)}async function XA(i,e){return Hc(i,"POST","/v1/accounts:signInWithEmailLink",oa(i,e))}async function JA(i,e){return Hc(i,"POST","/v1/accounts:signInWithEmailLink",oa(i,e))}class Rc extends Kp{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Rc(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new Rc(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,n,"signInWithPassword",QA);case"emailLink":return XA(e,{email:this._email,oobCode:this._password});default:Ws(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,a,"signUpPassword",YA);case"emailLink":return JA(e,{idToken:n,email:this._email,oobCode:this._password});default:Ws(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function qo(i,e){return Hc(i,"POST","/v1/accounts:signInWithIdp",oa(i,e))}const ZA="http://localhost";class Ur extends Kp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ur(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ws("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=n;if(!a||!o)return null;const d=new Ur(a,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return qo(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,qo(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qo(e,n)}buildRequest(){const e={requestUri:ZA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qc(n)}return e}}function eC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tC(i){const e=pc(gc(i)).link,n=e?pc(gc(e)).deep_link_id:null,a=pc(gc(i)).deep_link_id;return(a?pc(gc(a)).link:null)||a||n||e||i}class Wp{constructor(e){const n=pc(gc(e)),a=n.apiKey??null,o=n.oobCode??null,u=eC(n.mode??null);qe(a&&o&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=tC(e);try{return new Wp(n)}catch{return null}}}class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(e,n){return Rc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Wp.parseLink(n);return qe(a,"argument-error"),Rc._fromEmailAndCode(e,a.code,a.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ex{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $c extends ex{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qa extends $c{constructor(){super("facebook.com")}static credential(e){return Ur._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qa.credential(e.oauthAccessToken)}catch{return null}}}qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";qa.PROVIDER_ID="facebook.com";class Fa extends $c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ur._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return Fa.credential(n,a)}catch{return null}}}Fa.GOOGLE_SIGN_IN_METHOD="google.com";Fa.PROVIDER_ID="google.com";class Ha extends $c{constructor(){super("github.com")}static credential(e){return Ur._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ha.credential(e.oauthAccessToken)}catch{return null}}}Ha.GITHUB_SIGN_IN_METHOD="github.com";Ha.PROVIDER_ID="github.com";class $a extends $c{constructor(){super("twitter.com")}static credential(e,n){return Ur._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $a.credentialFromTaggedObject(e)}static credentialFromError(e){return $a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return $a.credential(n,a)}catch{return null}}}$a.TWITTER_SIGN_IN_METHOD="twitter.com";$a.PROVIDER_ID="twitter.com";async function nC(i,e){return Hc(i,"POST","/v1/accounts:signUp",oa(i,e))}class Br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const u=await Gs._fromIdTokenResponse(e,a,o),d=V_(a);return new Br({user:u,providerId:d,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=V_(a);return new Br({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function V_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Qh extends ra{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,Qh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new Qh(e,n,a,o)}}function tx(i,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Qh._fromErrorAndOperation(i,u,e,a):u})}async function sC(i,e,n=!1){const a=await jc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Br._forOperation(i,"link",a)}async function iC(i,e,n=!1){const{auth:a}=i;if(ks(a.app))return Promise.reject(Xi(a));const o="reauthenticate";try{const u=await jc(i,tx(a,o,e,i),n);qe(u.idToken,a,"internal-error");const d=Yp(u.idToken);qe(d,a,"internal-error");const{sub:p}=d;return qe(i.uid===p,a,"user-mismatch"),Br._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ws(a,"user-mismatch"),u}}async function nx(i,e,n=!1){if(ks(i.app))return Promise.reject(Xi(i));const a="signIn",o=await tx(i,a,e),u=await Br._fromIdTokenResponse(i,a,o);return n||await i._updateCurrentUser(u.user),u}async function aC(i,e){return nx(ir(i),e)}async function sx(i){const e=ir(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rC(i,e,n){const a=ir(i);await Yh(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",WA)}async function ix(i,e,n){if(ks(i.app))return Promise.reject(Xi(i));const a=ir(i),d=await Yh(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&sx(i),g}),p=await Br._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(p.user),p}function oC(i,e,n){return ks(i.app)?Promise.reject(Xi(i)):aC(dn(i),al.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&sx(i),a})}function lC(i,e){return dn(i).setPersistence(e)}function cC(i,e,n,a){return dn(i).onIdTokenChanged(e,n,a)}function uC(i,e,n){return dn(i).beforeAuthStateChanged(e,n)}function hC(i,e,n,a){return dn(i).onAuthStateChanged(e,n,a)}function Xp(i){return dn(i).signOut()}const Kh="__sak";class ax{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const dC=1e3,fC=10;class rx extends ax{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!n&&this.localCache[a]===d||this.notifyListeners(a,d)},u=this.storage.getItem(a);CA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,fC):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rx.type="LOCAL";const ox=rx;class lx extends ax{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lx.type="SESSION";const Jp=lx;function mC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new pd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const p=Array.from(d).map(async y=>y(n.origin,u)),g=await mC(p);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];function Zp(i="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return i+n}class pC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=Zp("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(T){const E=T;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(E.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function bi(){return window}function gC(i){bi().location.href=i}function cx(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function yC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vC(){return navigator?.serviceWorker?.controller||null}function _C(){return cx()?self:null}const ux="firebaseLocalStorageDb",bC=1,Wh="firebaseLocalStorage",hx="fbase_key";class Gc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gd(i,e){return i.transaction([Wh],e?"readwrite":"readonly").objectStore(Wh)}function xC(){const i=indexedDB.deleteDatabase(ux);return new Gc(i).toPromise()}function cp(){const i=indexedDB.open(ux,bC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const a=i.result;try{a.createObjectStore(Wh,{keyPath:hx})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const a=i.result;a.objectStoreNames.contains(Wh)?e(a):(a.close(),await xC(),e(await cp()))})})}async function P_(i,e,n){const a=gd(i,!0).put({[hx]:e,value:n});return new Gc(a).toPromise()}async function TC(i,e){const n=gd(i,!1).get(e),a=await new Gc(n).toPromise();return a===void 0?null:a.value}function U_(i,e){const n=gd(i,!0).delete(e);return new Gc(n).toPromise()}const EC=800,wC=3;class dx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>wC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(_C()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yC(),!this.activeServiceWorker)return;this.sender=new pC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await P_(e,Kh,"1"),await U_(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>P_(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>TC(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>U_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=gd(o,!1).getAll();return new Gc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dx.type="LOCAL";const SC=dx;new Fc(3e4,6e4);function NC(i,e){return e?Ki(e):(qe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class eg extends Kp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AC(i){return nx(i.auth,new eg(i),i.bypassAuthState)}function CC(i){const{auth:e,user:n}=i;return qe(n,e,"internal-error"),iC(n,new eg(i),i.bypassAuthState)}async function jC(i){const{auth:e,user:n}=i;return qe(n,e,"internal-error"),sC(n,new eg(i),i.bypassAuthState)}class fx{constructor(e,n,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AC;case"linkViaPopup":case"linkViaRedirect":return jC;case"reauthViaPopup":case"reauthViaRedirect":return CC;default:Ws(this.auth,"internal-error")}}resolve(e){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const RC=new Fc(2e3,1e4);class Po extends fx{constructor(e,n,a,o,u){super(e,n,o,u),this.provider=a,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){na(this.filter.length===1,"Popup operations only handle one event");const e=Zp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RC.get())};e()}}Po.currentPopupAction=null;const kC="pendingRedirect",kh=new Map;class DC extends fx{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=kh.get(this.auth._key());if(!e){try{const a=await IC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}kh.set(this.auth._key(),e)}return this.bypassAuthState||kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IC(i,e){const n=LC(e),a=OC(i);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function MC(i,e){kh.set(i._key(),e)}function OC(i){return Ki(i._redirectPersistence)}function LC(i){return Rh(kC,i.config.apiKey,i.name)}async function VC(i,e,n=!1){if(ks(i.app))return Promise.reject(Xi(i));const a=ir(i),o=NC(a,e),d=await new DC(a,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}const PC=600*1e3;class UC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!mx(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_i(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PC&&this.cachedEventUids.clear(),this.cachedEventUids.has(B_(e))}saveEventToCache(e){this.cachedEventUids.add(B_(e)),this.lastProcessedEventTime=Date.now()}}function B_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function mx({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function BC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mx(i);default:return!1}}async function zC(i,e={}){return la(i,"GET","/v1/projects",e)}const qC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FC=/^https?/;async function HC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await zC(i);for(const n of e)try{if($C(n))return}catch{}Ws(i,"unauthorized-domain")}function $C(i){const e=op(),{protocol:n,hostname:a}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&a===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===a}if(!FC.test(n))return!1;if(qC.test(i))return a===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}const GC=new Fc(3e4,6e4);function z_(){const i=bi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function YC(i){return new Promise((e,n)=>{function a(){z_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z_(),n(_i(i,"network-request-failed"))},timeout:GC.get()})}if(bi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(bi().gapi?.load)a();else{const o=VA("iframefcb");return bi()[o]=()=>{gapi.load?a():n(_i(i,"network-request-failed"))},X1(`${LA()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Dh=null,e})}let Dh=null;function QC(i){return Dh=Dh||YC(i),Dh}const KC=new Fc(5e3,15e3),WC="__/auth/iframe",XC="emulator/auth/iframe",JC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ej(i){const e=i.config;qe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Gp(e,XC):`https://${i.config.authDomain}/${WC}`,a={apiKey:e.apiKey,appName:i.name,v:il},o=ZC.get(i.config.apiHost);o&&(a.eid=o);const u=i._getFrameworks();return u.length&&(a.fw=u.join(",")),`${n}?${qc(a).slice(1)}`}async function tj(i){const e=await QC(i),n=bi().gapi;return qe(n,i,"internal-error"),e.open({where:document.body,url:ej(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JC,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const d=_i(i,"network-request-failed"),p=bi().setTimeout(()=>{u(d)},KC.get());function g(){bi().clearTimeout(p),o(a)}a.ping(g).then(g,()=>{u(d)})}))}const nj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sj=500,ij=600,aj="_blank",rj="http://localhost";class q_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oj(i,e,n,a=sj,o=ij){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let p="";const g={...nj,width:a.toString(),height:o.toString(),top:u,left:d},y=Ln().toLowerCase();n&&(p=H1(y)?aj:n),q1(y)&&(e=e||rj,g.scrollbars="yes");const b=Object.entries(g).reduce((E,[P,O])=>`${E}${P}=${O},`,"");if(AA(y)&&p!=="_self")return lj(e||"",p),new q_(null);const T=window.open(e||"",p,b);qe(T,i,"popup-blocked");try{T.focus()}catch{}return new q_(T)}function lj(i,e){const n=document.createElement("a");n.href=i,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const cj="__/auth/handler",uj="emulator/auth/handler",hj=encodeURIComponent("fac");async function F_(i,e,n,a,o,u){qe(i.config.authDomain,i,"auth-domain-config-required"),qe(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:a,v:il,eventId:o};if(e instanceof ex){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",K2(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,T]of Object.entries({}))d[b]=T}if(e instanceof $c){const b=e.getScopes().filter(T=>T!=="");b.length>0&&(d.scopes=b.join(","))}i.tenantId&&(d.tid=i.tenantId);const p=d;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await i._getAppCheckToken(),y=g?`#${hj}=${encodeURIComponent(g)}`:"";return`${dj(i)}?${qc(p).slice(1)}${y}`}function dj({config:i}){return i.emulator?Gp(i,uj):`https://${i.authDomain}/${cj}`}const Fm="webStorageSupport";class fj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jp,this._completeRedirectFn=VC,this._overrideRedirectResult=MC}async _openPopup(e,n,a,o){na(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await F_(e,n,a,op(),o);return oj(e,u,Zp())}async _openRedirect(e,n,a,o){await this._originValidation(e);const u=await F_(e,n,a,op(),o);return gC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(na(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await tj(e),a=new UC(e);return n.register("authEvent",o=>(qe(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fm,{type:Fm},o=>{const u=o?.[0]?.[Fm];u!==void 0&&n(!!u),Ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return K1()||F1()||Qp()}}const mj=fj;var H_="@firebase/auth",$_="1.12.0";class pj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gj(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yj(i){Go(new Pr("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=a.options;qe(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const g={apiKey:d,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W1(i)},y=new IA(a,o,u,g);return FA(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),Go(new Pr("auth-internal",e=>{const n=ir(e.getProvider("auth").getImmediate());return(a=>new pj(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ka(H_,$_,gj(i)),Ka(H_,$_,"esm2020")}const vj=300,_j=N1("authIdTokenMaxAge")||vj;let G_=null;const bj=i=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>_j)return;const o=n?.token;G_!==o&&(G_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function px(i=k1()){const e=Fp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=qA(i,{popupRedirectResolver:mj,persistence:[SC,ox,Jp]}),a=N1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const d=bj(u.toString());uC(n,d,()=>d(n.currentUser)),cC(n,p=>d(p))}}const o=w1("auth");return o&&HA(n,`http://${o}`),n}function xj(){return document.getElementsByTagName("head")?.[0]??document}MA({loadJS(i){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",i),a.onload=e,a.onerror=o=>{const u=_i("internal-error");u.customData=o,n(u)},a.type="text/javascript",a.charset="UTF-8",xj().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yj("Browser");var Y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Wa,gx;(function(){var i;function e(k,N){function R(){}R.prototype=N.prototype,k.F=N.prototype,k.prototype=new R,k.prototype.constructor=k,k.D=function(z,L,q){for(var j=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)j[Ee-2]=arguments[Ee];return N.prototype[L].apply(z,j)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,N,R){R||(R=0);const z=Array(16);if(typeof N=="string")for(var L=0;L<16;++L)z[L]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(L=0;L<16;++L)z[L]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=k.g[0],R=k.g[1],L=k.g[2];let q=k.g[3],j;j=N+(q^R&(L^q))+z[0]+3614090360&4294967295,N=R+(j<<7&4294967295|j>>>25),j=q+(L^N&(R^L))+z[1]+3905402710&4294967295,q=N+(j<<12&4294967295|j>>>20),j=L+(R^q&(N^R))+z[2]+606105819&4294967295,L=q+(j<<17&4294967295|j>>>15),j=R+(N^L&(q^N))+z[3]+3250441966&4294967295,R=L+(j<<22&4294967295|j>>>10),j=N+(q^R&(L^q))+z[4]+4118548399&4294967295,N=R+(j<<7&4294967295|j>>>25),j=q+(L^N&(R^L))+z[5]+1200080426&4294967295,q=N+(j<<12&4294967295|j>>>20),j=L+(R^q&(N^R))+z[6]+2821735955&4294967295,L=q+(j<<17&4294967295|j>>>15),j=R+(N^L&(q^N))+z[7]+4249261313&4294967295,R=L+(j<<22&4294967295|j>>>10),j=N+(q^R&(L^q))+z[8]+1770035416&4294967295,N=R+(j<<7&4294967295|j>>>25),j=q+(L^N&(R^L))+z[9]+2336552879&4294967295,q=N+(j<<12&4294967295|j>>>20),j=L+(R^q&(N^R))+z[10]+4294925233&4294967295,L=q+(j<<17&4294967295|j>>>15),j=R+(N^L&(q^N))+z[11]+2304563134&4294967295,R=L+(j<<22&4294967295|j>>>10),j=N+(q^R&(L^q))+z[12]+1804603682&4294967295,N=R+(j<<7&4294967295|j>>>25),j=q+(L^N&(R^L))+z[13]+4254626195&4294967295,q=N+(j<<12&4294967295|j>>>20),j=L+(R^q&(N^R))+z[14]+2792965006&4294967295,L=q+(j<<17&4294967295|j>>>15),j=R+(N^L&(q^N))+z[15]+1236535329&4294967295,R=L+(j<<22&4294967295|j>>>10),j=N+(L^q&(R^L))+z[1]+4129170786&4294967295,N=R+(j<<5&4294967295|j>>>27),j=q+(R^L&(N^R))+z[6]+3225465664&4294967295,q=N+(j<<9&4294967295|j>>>23),j=L+(N^R&(q^N))+z[11]+643717713&4294967295,L=q+(j<<14&4294967295|j>>>18),j=R+(q^N&(L^q))+z[0]+3921069994&4294967295,R=L+(j<<20&4294967295|j>>>12),j=N+(L^q&(R^L))+z[5]+3593408605&4294967295,N=R+(j<<5&4294967295|j>>>27),j=q+(R^L&(N^R))+z[10]+38016083&4294967295,q=N+(j<<9&4294967295|j>>>23),j=L+(N^R&(q^N))+z[15]+3634488961&4294967295,L=q+(j<<14&4294967295|j>>>18),j=R+(q^N&(L^q))+z[4]+3889429448&4294967295,R=L+(j<<20&4294967295|j>>>12),j=N+(L^q&(R^L))+z[9]+568446438&4294967295,N=R+(j<<5&4294967295|j>>>27),j=q+(R^L&(N^R))+z[14]+3275163606&4294967295,q=N+(j<<9&4294967295|j>>>23),j=L+(N^R&(q^N))+z[3]+4107603335&4294967295,L=q+(j<<14&4294967295|j>>>18),j=R+(q^N&(L^q))+z[8]+1163531501&4294967295,R=L+(j<<20&4294967295|j>>>12),j=N+(L^q&(R^L))+z[13]+2850285829&4294967295,N=R+(j<<5&4294967295|j>>>27),j=q+(R^L&(N^R))+z[2]+4243563512&4294967295,q=N+(j<<9&4294967295|j>>>23),j=L+(N^R&(q^N))+z[7]+1735328473&4294967295,L=q+(j<<14&4294967295|j>>>18),j=R+(q^N&(L^q))+z[12]+2368359562&4294967295,R=L+(j<<20&4294967295|j>>>12),j=N+(R^L^q)+z[5]+4294588738&4294967295,N=R+(j<<4&4294967295|j>>>28),j=q+(N^R^L)+z[8]+2272392833&4294967295,q=N+(j<<11&4294967295|j>>>21),j=L+(q^N^R)+z[11]+1839030562&4294967295,L=q+(j<<16&4294967295|j>>>16),j=R+(L^q^N)+z[14]+4259657740&4294967295,R=L+(j<<23&4294967295|j>>>9),j=N+(R^L^q)+z[1]+2763975236&4294967295,N=R+(j<<4&4294967295|j>>>28),j=q+(N^R^L)+z[4]+1272893353&4294967295,q=N+(j<<11&4294967295|j>>>21),j=L+(q^N^R)+z[7]+4139469664&4294967295,L=q+(j<<16&4294967295|j>>>16),j=R+(L^q^N)+z[10]+3200236656&4294967295,R=L+(j<<23&4294967295|j>>>9),j=N+(R^L^q)+z[13]+681279174&4294967295,N=R+(j<<4&4294967295|j>>>28),j=q+(N^R^L)+z[0]+3936430074&4294967295,q=N+(j<<11&4294967295|j>>>21),j=L+(q^N^R)+z[3]+3572445317&4294967295,L=q+(j<<16&4294967295|j>>>16),j=R+(L^q^N)+z[6]+76029189&4294967295,R=L+(j<<23&4294967295|j>>>9),j=N+(R^L^q)+z[9]+3654602809&4294967295,N=R+(j<<4&4294967295|j>>>28),j=q+(N^R^L)+z[12]+3873151461&4294967295,q=N+(j<<11&4294967295|j>>>21),j=L+(q^N^R)+z[15]+530742520&4294967295,L=q+(j<<16&4294967295|j>>>16),j=R+(L^q^N)+z[2]+3299628645&4294967295,R=L+(j<<23&4294967295|j>>>9),j=N+(L^(R|~q))+z[0]+4096336452&4294967295,N=R+(j<<6&4294967295|j>>>26),j=q+(R^(N|~L))+z[7]+1126891415&4294967295,q=N+(j<<10&4294967295|j>>>22),j=L+(N^(q|~R))+z[14]+2878612391&4294967295,L=q+(j<<15&4294967295|j>>>17),j=R+(q^(L|~N))+z[5]+4237533241&4294967295,R=L+(j<<21&4294967295|j>>>11),j=N+(L^(R|~q))+z[12]+1700485571&4294967295,N=R+(j<<6&4294967295|j>>>26),j=q+(R^(N|~L))+z[3]+2399980690&4294967295,q=N+(j<<10&4294967295|j>>>22),j=L+(N^(q|~R))+z[10]+4293915773&4294967295,L=q+(j<<15&4294967295|j>>>17),j=R+(q^(L|~N))+z[1]+2240044497&4294967295,R=L+(j<<21&4294967295|j>>>11),j=N+(L^(R|~q))+z[8]+1873313359&4294967295,N=R+(j<<6&4294967295|j>>>26),j=q+(R^(N|~L))+z[15]+4264355552&4294967295,q=N+(j<<10&4294967295|j>>>22),j=L+(N^(q|~R))+z[6]+2734768916&4294967295,L=q+(j<<15&4294967295|j>>>17),j=R+(q^(L|~N))+z[13]+1309151649&4294967295,R=L+(j<<21&4294967295|j>>>11),j=N+(L^(R|~q))+z[4]+4149444226&4294967295,N=R+(j<<6&4294967295|j>>>26),j=q+(R^(N|~L))+z[11]+3174756917&4294967295,q=N+(j<<10&4294967295|j>>>22),j=L+(N^(q|~R))+z[2]+718787259&4294967295,L=q+(j<<15&4294967295|j>>>17),j=R+(q^(L|~N))+z[9]+3951481745&4294967295,k.g[0]=k.g[0]+N&4294967295,k.g[1]=k.g[1]+(L+(j<<21&4294967295|j>>>11))&4294967295,k.g[2]=k.g[2]+L&4294967295,k.g[3]=k.g[3]+q&4294967295}a.prototype.v=function(k,N){N===void 0&&(N=k.length);const R=N-this.blockSize,z=this.C;let L=this.h,q=0;for(;q<N;){if(L==0)for(;q<=R;)o(this,k,q),q+=this.blockSize;if(typeof k=="string"){for(;q<N;)if(z[L++]=k.charCodeAt(q++),L==this.blockSize){o(this,z),L=0;break}}else for(;q<N;)if(z[L++]=k[q++],L==this.blockSize){o(this,z),L=0;break}}this.h=L,this.o+=N},a.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var N=1;N<k.length-8;++N)k[N]=0;N=this.o*8;for(var R=k.length-8;R<k.length;++R)k[R]=N&255,N/=256;for(this.v(k),k=Array(16),N=0,R=0;R<4;++R)for(let z=0;z<32;z+=8)k[N++]=this.g[R]>>>z&255;return k};function u(k,N){var R=p;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=N(k)}function d(k,N){this.h=N;const R=[];let z=!0;for(let L=k.length-1;L>=0;L--){const q=k[L]|0;z&&q==N||(R[L]=q,z=!1)}this.g=R}var p={};function g(k){return-128<=k&&k<128?u(k,function(N){return new d([N|0],N<0?-1:0)}):new d([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return T;if(k<0)return V(y(-k));const N=[];let R=1;for(let z=0;k>=R;z++)N[z]=k/R|0,R*=4294967296;return new d(N,0)}function b(k,N){if(k.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(k.charAt(0)=="-")return V(b(k.substring(1),N));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(N,8));let z=T;for(let q=0;q<k.length;q+=8){var L=Math.min(8,k.length-q);const j=parseInt(k.substring(q,q+L),N);L<8?(L=y(Math.pow(N,L)),z=z.j(L).add(y(j))):(z=z.j(R),z=z.add(y(j)))}return z}var T=g(0),E=g(1),P=g(16777216);i=d.prototype,i.m=function(){if(D(this))return-V(this).m();let k=0,N=1;for(let R=0;R<this.g.length;R++){const z=this.i(R);k+=(z>=0?z:4294967296+z)*N,N*=4294967296}return k},i.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(O(this))return"0";if(D(this))return"-"+V(this).toString(k);const N=y(Math.pow(k,6));var R=this;let z="";for(;;){const L=ce(R,N).g;R=H(R,L.j(N));let q=((R.g.length>0?R.g[0]:R.h)>>>0).toString(k);if(R=L,O(R))return q+z;for(;q.length<6;)q="0"+q;z=q+z}},i.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function O(k){if(k.h!=0)return!1;for(let N=0;N<k.g.length;N++)if(k.g[N]!=0)return!1;return!0}function D(k){return k.h==-1}i.l=function(k){return k=H(this,k),D(k)?-1:O(k)?0:1};function V(k){const N=k.g.length,R=[];for(let z=0;z<N;z++)R[z]=~k.g[z];return new d(R,~k.h).add(E)}i.abs=function(){return D(this)?V(this):this},i.add=function(k){const N=Math.max(this.g.length,k.g.length),R=[];let z=0;for(let L=0;L<=N;L++){let q=z+(this.i(L)&65535)+(k.i(L)&65535),j=(q>>>16)+(this.i(L)>>>16)+(k.i(L)>>>16);z=j>>>16,q&=65535,j&=65535,R[L]=j<<16|q}return new d(R,R[R.length-1]&-2147483648?-1:0)};function H(k,N){return k.add(V(N))}i.j=function(k){if(O(this)||O(k))return T;if(D(this))return D(k)?V(this).j(V(k)):V(V(this).j(k));if(D(k))return V(this.j(V(k)));if(this.l(P)<0&&k.l(P)<0)return y(this.m()*k.m());const N=this.g.length+k.g.length,R=[];for(var z=0;z<2*N;z++)R[z]=0;for(z=0;z<this.g.length;z++)for(let L=0;L<k.g.length;L++){const q=this.i(z)>>>16,j=this.i(z)&65535,Ee=k.i(L)>>>16,je=k.i(L)&65535;R[2*z+2*L]+=j*je,F(R,2*z+2*L),R[2*z+2*L+1]+=q*je,F(R,2*z+2*L+1),R[2*z+2*L+1]+=j*Ee,F(R,2*z+2*L+1),R[2*z+2*L+2]+=q*Ee,F(R,2*z+2*L+2)}for(k=0;k<N;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=N;k<2*N;k++)R[k]=0;return new d(R,0)};function F(k,N){for(;(k[N]&65535)!=k[N];)k[N+1]+=k[N]>>>16,k[N]&=65535,N++}function ne(k,N){this.g=k,this.h=N}function ce(k,N){if(O(N))throw Error("division by zero");if(O(k))return new ne(T,T);if(D(k))return N=ce(V(k),N),new ne(V(N.g),V(N.h));if(D(N))return N=ce(k,V(N)),new ne(V(N.g),N.h);if(k.g.length>30){if(D(k)||D(N))throw Error("slowDivide_ only works with positive integers.");for(var R=E,z=N;z.l(k)<=0;)R=ue(R),z=ue(z);var L=me(R,1),q=me(z,1);for(z=me(z,2),R=me(R,2);!O(z);){var j=q.add(z);j.l(k)<=0&&(L=L.add(R),q=j),z=me(z,1),R=me(R,1)}return N=H(k,L.j(N)),new ne(L,N)}for(L=T;k.l(N)>=0;){for(R=Math.max(1,Math.floor(k.m()/N.m())),z=Math.ceil(Math.log(R)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),q=y(R),j=q.j(N);D(j)||j.l(k)>0;)R-=z,q=y(R),j=q.j(N);O(q)&&(q=E),L=L.add(q),k=H(k,j)}return new ne(L,k)}i.B=function(k){return ce(this,k).h},i.and=function(k){const N=Math.max(this.g.length,k.g.length),R=[];for(let z=0;z<N;z++)R[z]=this.i(z)&k.i(z);return new d(R,this.h&k.h)},i.or=function(k){const N=Math.max(this.g.length,k.g.length),R=[];for(let z=0;z<N;z++)R[z]=this.i(z)|k.i(z);return new d(R,this.h|k.h)},i.xor=function(k){const N=Math.max(this.g.length,k.g.length),R=[];for(let z=0;z<N;z++)R[z]=this.i(z)^k.i(z);return new d(R,this.h^k.h)};function ue(k){const N=k.g.length+1,R=[];for(let z=0;z<N;z++)R[z]=k.i(z)<<1|k.i(z-1)>>>31;return new d(R,k.h)}function me(k,N){const R=N>>5;N%=32;const z=k.g.length-R,L=[];for(let q=0;q<z;q++)L[q]=N>0?k.i(q+R)>>>N|k.i(q+R+1)<<32-N:k.i(q+R);return new d(L,k.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,gx=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Wa=d}).apply(typeof Y_<"u"?Y_:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var yx,yc,vx,Ih,up,_x,bx,xx;(function(){var i,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var v=0;v<h.length;++v){var x=h[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var a=n(this);function o(h,v){if(v)e:{var x=a;h=h.split(".");for(var A=0;A<h.length-1;A++){var J=h[A];if(!(J in x))break e;x=x[J]}h=h[h.length-1],A=x[h],v=v(A),v!=A&&v!=null&&e(x,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var x=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&x.push([A,v[A]]);return x}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,x){return h.call.apply(h.bind,arguments)}function y(h,v,x){return y=g,y.apply(null,arguments)}function b(h,v){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,v){function x(){}x.prototype=v.prototype,h.Z=v.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(A,J,ie){for(var we=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)we[Ke-2]=arguments[Ke];return v.prototype[J].apply(A,we)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function P(h){const v=h.length;if(v>0){const x=Array(v);for(let A=0;A<v;A++)x[A]=h[A];return x}return[]}function O(h,v){for(let A=1;A<arguments.length;A++){const J=arguments[A];var x=typeof J;if(x=x!="object"?x:J?Array.isArray(J)?"array":x:"null",x=="array"||x=="object"&&typeof J.length=="number"){x=h.length||0;const ie=J.length||0;h.length=x+ie;for(let we=0;we<ie;we++)h[x+we]=J[we]}else h.push(J)}}class D{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(h){d.setTimeout(()=>{throw h},0)}function H(){var h=k;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class F{constructor(){this.h=this.g=null}add(v,x){const A=ne.get();A.set(v,x),this.h?this.h.next=A:this.g=A,this.h=A}}var ne=new D(()=>new ce,h=>h.reset());class ce{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,me=!1,k=new F,N=()=>{const h=Promise.resolve(void 0);ue=()=>{h.then(R)}};function R(){for(var h;h=H();){try{h.h.call(h.g)}catch(x){V(x)}var v=ne;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}me=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};d.addEventListener("test",x,v),d.removeEventListener("test",x,v)}catch{}return h})();function j(h){return/^[\s\xa0]*$/.test(h)}function Ee(h,v){L.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}T(Ee,L),Ee.prototype.init=function(h,v){const x=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(x=="mouseover"?v=h.fromElement:x=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),B=0;function re(h,v,x,A,J){this.listener=h,this.proxy=null,this.src=v,this.type=x,this.capture=!!A,this.ha=J,this.key=++B,this.da=this.fa=!1}function be(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _e(h,v,x){for(const A in h)v.call(x,h[A],A,h)}function Ne(h,v){for(const x in h)v.call(void 0,h[x],x,h)}function w(h){const v={};for(const x in h)v[x]=h[x];return v}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(h,v){let x,A;for(let J=1;J<arguments.length;J++){A=arguments[J];for(x in A)h[x]=A[x];for(let ie=0;ie<G.length;ie++)x=G[ie],Object.prototype.hasOwnProperty.call(A,x)&&(h[x]=A[x])}}function X(h){this.src=h,this.g={},this.h=0}X.prototype.add=function(h,v,x,A,J){const ie=h.toString();h=this.g[ie],h||(h=this.g[ie]=[],this.h++);const we=K(h,v,A,J);return we>-1?(v=h[we],x||(v.fa=!1)):(v=new re(v,this.src,ie,!!A,J),v.fa=x,h.push(v)),v};function I(h,v){const x=v.type;if(x in h.g){var A=h.g[x],J=Array.prototype.indexOf.call(A,v,void 0),ie;(ie=J>=0)&&Array.prototype.splice.call(A,J,1),ie&&(be(v),h.g[x].length==0&&(delete h.g[x],h.h--))}}function K(h,v,x,A){for(let J=0;J<h.length;++J){const ie=h[J];if(!ie.da&&ie.listener==v&&ie.capture==!!x&&ie.ha==A)return J}return-1}var se="closure_lm_"+(Math.random()*1e6|0),ve={};function ke(h,v,x,A,J){if(Array.isArray(v)){for(let ie=0;ie<v.length;ie++)ke(h,v[ie],x,A,J);return null}return x=mt(x),h&&h[je]?h.J(v,x,p(A)?!!A.capture:!1,J):Be(h,v,x,!1,A,J)}function Be(h,v,x,A,J,ie){if(!v)throw Error("Invalid event type");const we=p(J)?!!J.capture:!!J;let Ke=rt(h);if(Ke||(h[se]=Ke=new X(h)),x=Ke.add(v,x,A,we,ie),x.proxy)return x;if(A=pe(),x.proxy=A,A.src=h,A.listener=x,h.addEventListener)q||(J=we),J===void 0&&(J=!1),h.addEventListener(v.toString(),A,J);else if(h.attachEvent)h.attachEvent(Et(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function pe(){function h(x){return v.call(h.src,h.listener,x)}const v=wt;return h}function ct(h,v,x,A,J){if(Array.isArray(v))for(var ie=0;ie<v.length;ie++)ct(h,v[ie],x,A,J);else A=p(A)?!!A.capture:!!A,x=mt(x),h&&h[je]?(h=h.i,ie=String(v).toString(),ie in h.g&&(v=h.g[ie],x=K(v,x,A,J),x>-1&&(be(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete h.g[ie],h.h--)))):h&&(h=rt(h))&&(v=h.g[v.toString()],h=-1,v&&(h=K(v,x,A,J)),(x=h>-1?v[h]:null)&&Vt(x))}function Vt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[je])I(v.i,h);else{var x=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(x,A,h.capture):v.detachEvent?v.detachEvent(Et(x),A):v.addListener&&v.removeListener&&v.removeListener(A),(x=rt(v))?(I(x,h),x.h==0&&(x.src=null,v[se]=null)):be(h)}}}function Et(h){return h in ve?ve[h]:ve[h]="on"+h}function wt(h,v){if(h.da)h=!0;else{v=new Ee(v,this);const x=h.listener,A=h.ha||h.src;h.fa&&Vt(h),h=x.call(A,v)}return h}function rt(h){return h=h[se],h instanceof X?h:null}var Oe="__closure_events_fn_"+(Math.random()*1e9>>>0);function mt(h){return typeof h=="function"?h:(h[Oe]||(h[Oe]=function(v){return h.handleEvent(v)}),h[Oe])}function ot(){z.call(this),this.i=new X(this),this.M=this,this.G=null}T(ot,z),ot.prototype[je]=!0,ot.prototype.removeEventListener=function(h,v,x,A){ct(this,h,v,x,A)};function ht(h,v){var x,A=h.G;if(A)for(x=[];A;A=A.G)x.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new L(v,h);else if(v instanceof L)v.target=v.target||h;else{var J=v;v=new L(A,h),Y(v,J)}J=!0;let ie,we;if(x)for(we=x.length-1;we>=0;we--)ie=v.g=x[we],J=ts(ie,A,!0,v)&&J;if(ie=v.g=h,J=ts(ie,A,!0,v)&&J,J=ts(ie,A,!1,v)&&J,x)for(we=0;we<x.length;we++)ie=v.g=x[we],J=ts(ie,A,!1,v)&&J}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const x=h.g[v];for(let A=0;A<x.length;A++)be(x[A]);delete h.g[v],h.h--}}this.G=null},ot.prototype.J=function(h,v,x,A){return this.i.add(String(h),v,!1,x,A)},ot.prototype.K=function(h,v,x,A){return this.i.add(String(h),v,!0,x,A)};function ts(h,v,x,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let J=!0;for(let ie=0;ie<v.length;++ie){const we=v[ie];if(we&&!we.da&&we.capture==x){const Ke=we.listener,$t=we.ha||we.src;we.fa&&I(h.i,we),J=Ke.call($t,A)!==!1&&J}}return J&&!A.defaultPrevented}function Wt(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function ys(h){h.g=Wt(()=>{h.g=null,h.i&&(h.i=!1,ys(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class dt extends z{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ys(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(h){z.call(this),this.h=h,this.g={}}T(ns,z);var Ni=[];function Os(h){_e(h.g,function(v,x){this.g.hasOwnProperty(x)&&Vt(v)},h),h.g={}}ns.prototype.N=function(){ns.Z.N.call(this),Os(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vs=d.JSON.stringify,or=d.JSON.parse,Zs=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Pn(){}function Fn(){}var Rn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){L.call(this,"d")}T(Pt,L);function _n(){L.call(this,"c")}T(_n,L);var Mt={},ei=null;function ss(){return ei=ei||new ot}Mt.Ia="serverreachability";function ti(h){L.call(this,Mt.Ia,h)}T(ti,L);function jt(h){const v=ss();ht(v,new ti(v))}Mt.STAT_EVENT="statevent";function fn(h,v){L.call(this,Mt.STAT_EVENT,h),this.stat=v}T(fn,L);function Rt(h){const v=ss();ht(v,new fn(v,h))}Mt.Ja="timingevent";function Un(h,v){L.call(this,Mt.Ja,h),this.size=v}T(Un,L);function Hn(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function ln(){this.g=!0}ln.prototype.ua=function(){this.g=!1};function ni(h,v,x,A,J,ie){h.info(function(){if(h.g)if(ie){var we="",Ke=ie.split("&");for(let yt=0;yt<Ke.length;yt++){var $t=Ke[yt].split("=");if($t.length>1){const Ut=$t[0];$t=$t[1];const Ts=Ut.split("_");we=Ts.length>=2&&Ts[1]=="type"?we+(Ut+"="+$t+"&"):we+(Ut+"=redacted&")}}}else we=null;else we=ie;return"XMLHTTP REQ ("+A+") [attempt "+J+"]: "+v+`
`+x+`
`+we})}function ca(h,v,x,A,J,ie,we){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+J+"]: "+v+`
`+x+`
`+ie+" "+we})}function kn(h,v,x,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+is(h,x)+(A?" "+A:"")})}function bn(h,v){h.info(function(){return"TIMEOUT: "+v})}ln.prototype.info=function(){};function is(h,v){if(!h.g)return v;if(!v)return null;try{const ie=JSON.parse(v);if(ie){for(h=0;h<ie.length;h++)if(Array.isArray(ie[h])){var x=ie[h];if(!(x.length<2)){var A=x[1];if(Array.isArray(A)&&!(A.length<1)){var J=A[0];if(J!="noop"&&J!="stop"&&J!="close")for(let we=1;we<A.length;we++)A[we]=""}}}}return vs(ie)}catch{return v}}var W={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ye={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xe;function M(){}T(M,Pn),M.prototype.g=function(){return new XMLHttpRequest},xe=new M;function oe(h){return encodeURIComponent(String(h))}function Te(h){var v=1;h=h.split(":");const x=[];for(;v>0&&h.length;)x.push(h.shift()),v--;return h.length&&x.push(h.join(":")),x}function Se(h,v,x,A){this.j=h,this.i=v,this.l=x,this.S=A||1,this.V=new ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}var Ve={},Qe={};function cn(h,v,x){h.M=1,h.A=lr(Jt(v)),h.u=x,h.R=!0,mn(h,null)}function mn(h,v){h.F=Date.now(),_s(h),h.B=Jt(h.A);var x=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Wr(x.i,"t",A),h.C=0,x=h.j.L,h.h=new Le,h.g=hu(h.j,x?v:null,!h.u),h.P>0&&(h.O=new dt(y(h.Y,h,h.g),h.P)),v=h.V,x=h.g,A=h.ba;var J="readystatechange";Array.isArray(J)||(J&&(Ni[0]=J.toString()),J=Ni);for(let ie=0;ie<J.length;ie++){const we=ke(x,J[ie],A||v.handleEvent,!1,v.h||v);if(!we)break;v.g[we.key]=we}v=h.J?w(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),jt(),ni(h.i,h.v,h.B,h.l,h.S,h.u)}Se.prototype.ba=function(h){h=h.target;const v=this.O;v&&Ps(h)==3?v.j():this.Y(h)},Se.prototype.Y=function(h){try{if(h==this.g)e:{const Ke=Ps(this.g),$t=this.g.ya(),yt=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Ke!=4||$t==7||($t==8||yt<=0?jt(3):jt(2)),$e(this);var v=this.g.ca();this.X=v;var x=$n(this);if(this.o=v==200,ca(this.i,this.v,this.B,this.l,this.S,Ke,v),this.o){if(this.U&&!this.L){t:{if(this.g){var A,J=this.g;if((A=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(A)){var ie=A;break t}}ie=null}if(h=ie)kn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ii(this,h);else{this.o=!1,this.m=3,Rt(12),xn(this),pn(this);break e}}if(this.R){h=!0;let Ut;for(;!this.K&&this.C<x.length;)if(Ut=Ai(this,x),Ut==Qe){Ke==4&&(this.m=4,Rt(14),h=!1),kn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Ve){this.m=4,Rt(15),kn(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else kn(this.i,this.l,Ut,null),ii(this,Ut);if(si(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||x.length!=0||this.h.h||(this.m=1,Rt(16),h=!1),this.o=this.o&&h,!h)kn(this.i,this.l,x,"[Invalid Chunked Response]"),xn(this),pn(this);else if(x.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Nl(we),we.P=!0,Rt(11))}}else kn(this.i,this.l,x,null),ii(this,x);Ke==4&&xn(this),this.o&&!this.K&&(Ke==4?ou(this.j,this):(this.o=!1,_s(this)))}else Ri(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),xn(this),pn(this)}}}catch{}};function $n(h){if(!si(h))return h.g.la();const v=Tn(h.g);if(v==="")return"";let x="";const A=v.length,J=Ps(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return xn(h),pn(h),"";h.h.i=new d.TextDecoder}for(let ie=0;ie<A;ie++)h.h.h=!0,x+=h.h.i.decode(v[ie],{stream:!(J&&ie==A-1)});return v.length=0,h.h.g+=x,h.C=0,h.h.g}function si(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ai(h,v){var x=h.C,A=v.indexOf(`
`,x);return A==-1?Qe:(x=Number(v.substring(x,A)),isNaN(x)?Ve:(A+=1,A+x>v.length?Qe:(v=v.slice(A,A+x),h.C=A+x,v)))}Se.prototype.cancel=function(){this.K=!0,xn(this)};function _s(h){h.T=Date.now()+h.H,Ci(h,h.H)}function Ci(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Hn(y(h.aa,h),v)}function $e(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Se.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(bn(this.i,this.B),this.M!=2&&(jt(),Rt(17)),xn(this),this.m=2,pn(this)):Ci(this,this.T-h)};function pn(h){h.j.I==0||h.K||ou(h.j,h)}function xn(h){$e(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Os(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function ii(h,v){try{var x=h.j;if(x.I!=0&&(x.g==h||ri(x.h,h))){if(!h.L&&ri(x.h,h)&&x.I==3){try{var A=x.Ba.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var J=A;if(J[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)to(x),ya(x);else break e;pr(x),Rt(18)}}else x.xa=J[1],0<x.xa-x.K&&J[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Hn(y(x.Va,x),6e3));ai(x.h)<=1&&x.ta&&(x.ta=void 0)}else di(x,11)}else if((h.L||x.g==h)&&to(x),!j(v))for(J=x.Ba.g.parse(v),v=0;v<J.length;v++){let yt=J[v];const Ut=yt[0];if(!(Ut<=x.K))if(x.K=Ut,yt=yt[1],x.I==2)if(yt[0]=="c"){x.M=yt[1],x.ba=yt[2];const Ts=yt[3];Ts!=null&&(x.ka=Ts,x.j.info("VER="+x.ka));const fi=yt[4];fi!=null&&(x.za=fi,x.j.info("SVER="+x.za));const Us=yt[5];Us!=null&&typeof Us=="number"&&Us>0&&(A=1.5*Us,x.O=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const Bs=h.g;if(Bs){const gr=Bs.g?Bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gr){var ie=A.h;ie.g||gr.indexOf("spdy")==-1&&gr.indexOf("quic")==-1&&gr.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(ml(ie,ie.h),ie.h=null))}if(A.G){const no=Bs.g?Bs.g.getResponseHeader("X-HTTP-Session-Id"):null;no&&(A.wa=no,bt(A.J,A.G,no))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),A=x;var we=h;if(A.na=uu(A,A.L?A.ba:null,A.W),we.L){pl(A.h,we);var Ke=we,$t=A.O;$t&&(Ke.H=$t),Ke.D&&($e(Ke),_s(Ke)),A.g=we}else au(A);x.i.length>0&&hi(x)}else yt[0]!="stop"&&yt[0]!="close"||di(x,7);else x.I==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?di(x,7):wl(x):yt[0]!="noop"&&x.l&&x.l.qa(yt),x.A=0)}}jt(4)}catch{}}var Xt=class{constructor(h,v){this.g=h,this.map=v}};function dl(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ai(h){return h.h?1:h.g?h.g.size:0}function ri(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function ml(h,v){h.g?h.g.add(v):h.h=v}function pl(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}dl.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const x of h.g.values())v=v.concat(x.G);return v}return P(h.i)}var Zc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qr(h,v){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const A=h[x].indexOf("=");let J,ie=null;A>=0?(J=h[x].substring(0,A),ie=h[x].substring(A+1)):J=h[x],v(J,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function as(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof as?(this.l=h.l,gn(this,h.j),this.o=h.o,this.g=h.g,ua(this,h.u),this.h=h.h,yl(this,su(h.i)),this.m=h.m):h&&(v=String(h).match(Zc))?(this.l=!1,gn(this,v[1]||"",!0),this.o=oi(v[2]||""),this.g=oi(v[3]||"",!0),ua(this,v[4]),this.h=oi(v[5]||"",!0),yl(this,v[6]||"",!0),this.m=oi(v[7]||"")):(this.l=!1,this.i=new da(null,this.l))}as.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(cr(v,Kr,!0),":");var x=this.g;return(x||v=="file")&&(h.push("//"),(v=this.o)&&h.push(cr(v,Kr,!0),"@"),h.push(oe(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(cr(x,x.charAt(0)=="/"?vl:eu,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",cr(x,tu)),h.join("")},as.prototype.resolve=function(h){const v=Jt(this);let x=!!h.j;x?gn(v,h.j):x=!!h.o,x?v.o=h.o:x=!!h.g,x?v.g=h.g:x=h.u!=null;var A=h.h;if(x)ua(v,h.u);else if(x=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var J=v.h.lastIndexOf("/");J!=-1&&(A=v.h.slice(0,J+1)+A)}if(J=A,J==".."||J==".")A="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){A=J.lastIndexOf("/",0)==0,J=J.split("/");const ie=[];for(let we=0;we<J.length;){const Ke=J[we++];Ke=="."?A&&we==J.length&&ie.push(""):Ke==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),A&&we==J.length&&ie.push("")):(ie.push(Ke),A=!0)}A=ie.join("/")}else A=J}return x?v.h=A:x=h.i.toString()!=="",x?yl(v,su(h.i)):x=!!h.m,x&&(v.m=h.m),v};function Jt(h){return new as(h)}function gn(h,v,x){h.j=x?oi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ua(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function yl(h,v,x){v instanceof da?(h.i=v,Xr(h.i,h.l)):(x||(v=cr(v,ha)),h.i=new da(v,h.l))}function bt(h,v,x){h.i.set(v,x)}function lr(h){return bt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function oi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function cr(h,v,x){return typeof h=="string"?(h=encodeURI(h).replace(v,Gn),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Gn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Kr=/[#\/\?@]/g,eu=/[#\?:]/g,vl=/[#\?]/g,ha=/[#\?@]/g,tu=/#/g;function da(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Yn(h){h.g||(h.g=new Map,h.h=0,h.i&&Qr(h.i,function(v,x){h.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}i=da.prototype,i.add=function(h,v){Yn(this),this.i=null,h=fa(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(v),this.h+=1,this};function nu(h,v){Yn(h),v=fa(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function _l(h,v){return Yn(h),v=fa(h,v),h.g.has(v)}i.forEach=function(h,v){Yn(this),this.g.forEach(function(x,A){x.forEach(function(J){h.call(v,J,A,this)},this)},this)};function bl(h,v){Yn(h);let x=[];if(typeof v=="string")_l(h,v)&&(x=x.concat(h.g.get(fa(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)x=x.concat(h[v]);return x}i.set=function(h,v){return Yn(this),this.i=null,h=fa(this,h),_l(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},i.get=function(h,v){return h?(h=bl(this,h),h.length>0?String(h[0]):v):v};function Wr(h,v,x){nu(h,v),x.length>0&&(h.i=null,h.g.set(fa(h,v),P(x)),h.h+=x.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let A=0;A<v.length;A++){var x=v[A];const J=oe(x);x=bl(this,x);for(let ie=0;ie<x.length;ie++){let we=J;x[ie]!==""&&(we+="="+oe(x[ie])),h.push(we)}}return this.i=h.join("&")};function su(h){const v=new da;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function fa(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Xr(h,v){v&&!h.j&&(Yn(h),h.i=null,h.g.forEach(function(x,A){const J=A.toLowerCase();A!=J&&(nu(this,A),Wr(this,J,x))},h)),h.j=v}function Ls(h,v){const x=new ln;if(d.Image){const A=new Image;A.onload=b(bs,x,"TestLoadImage: loaded",!0,v,A),A.onerror=b(bs,x,"TestLoadImage: error",!1,v,A),A.onabort=b(bs,x,"TestLoadImage: abort",!1,v,A),A.ontimeout=b(bs,x,"TestLoadImage: timeout",!1,v,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function xl(h,v){const x=new ln,A=new AbortController,J=setTimeout(()=>{A.abort(),bs(x,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(ie=>{clearTimeout(J),ie.ok?bs(x,"TestPingServer: ok",!0,v):bs(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(J),bs(x,"TestPingServer: error",!1,v)})}function bs(h,v,x,A,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),A(x)}catch{}}function ma(){this.g=new Zs}function li(h){this.i=h.Sb||null,this.h=h.ab||!1}T(li,Pn),li.prototype.g=function(){return new ur(this.i,this.h)};function ur(h,v){ot.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ur,ot),i=ur.prototype,i.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Vs(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pa(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?pa(this):Vs(this),this.readyState==3&&Jr(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,pa(this))},i.Na=function(h){this.g&&(this.response=h,pa(this))},i.ga=function(){this.g&&pa(this)};function pa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Vs(h)}i.setRequestHeader=function(h,v){this.A.append(h,v)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=v.next();return h.join(`\r
`)};function Vs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function xs(h){let v="";return _e(h,function(x,A){v+=A,v+=":",v+=x,v+=`\r
`}),v}function hr(h,v,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=xs(x),typeof h=="string"?x!=null&&oe(x):bt(h,v,x))}function St(h){ot.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(St,ot);var ci=/^https?$/i,Tl=["POST","PUT"];i=St.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,v,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xe.g(),this.g.onreadystatechange=E(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ie){dr(this,ie);return}if(h=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var J in A)x.set(J,A[J]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const ie of A.keys())x.set(ie,A.get(ie));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find(ie=>ie.toLowerCase()=="content-type"),J=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Tl,v,void 0)>=0)||A||J||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,we]of x)this.g.setRequestHeader(ie,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ie){dr(this,ie)}};function dr(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,El(h),ji(h)}function El(h){h.A||(h.A=!0,ht(h,"complete"),ht(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ht(this,"complete"),ht(this,"abort"),ji(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),St.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?fr(this):this.Xa())},i.Xa=function(){fr(this)};function fr(h){if(h.h&&typeof u<"u"){if(h.v&&Ps(h)==4)setTimeout(h.Ca.bind(h),0);else if(ht(h,"readystatechange"),Ps(h)==4){h.h=!1;try{const ie=h.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var A;if(A=ie===0){let we=String(h.D).match(Zc)[1]||null;!we&&d.self&&d.self.location&&(we=d.self.location.protocol.slice(0,-1)),A=!ci.test(we?we.toLowerCase():"")}x=A}if(x)ht(h,"complete"),ht(h,"success");else{h.o=6;try{var J=Ps(h)>2?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.ca()+"]",El(h)}}finally{ji(h)}}}}function ji(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,v||ht(h,"ready");try{x.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Ps(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Ps(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),or(v)}};function Tn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ri(h){const v={};h=(h.g&&Ps(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(j(h[A]))continue;var x=Te(h[A]);const J=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ie=v[J]||[];v[J]=ie,ie.push(x)}Ne(v,function(A){return A.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ui(h,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||v}function ga(h){this.za=0,this.i=[],this.j=new ln,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ui("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ui("baseRetryDelayMs",5e3,h),this.Za=ui("retryDelaySeedMs",1e4,h),this.Ta=ui("forwardChannelMaxRetries",2,h),this.va=ui("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new dl(h&&h.concurrentRequestLimit),this.Ba=new ma,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ga.prototype,i.ka=8,i.I=1,i.connect=function(h,v,x,A){Rt(0),this.W=h,this.H=v||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.J=uu(this,null,this.W),hi(this)};function wl(h){if(Zr(h),h.I==3){var v=h.V++,x=Jt(h.J);if(bt(x,"SID",h.M),bt(x,"RID",v),bt(x,"TYPE","terminate"),mr(h,x),v=new Se(h,h.j,v),v.M=2,v.A=lr(Jt(x)),x=!1,d.navigator&&d.navigator.sendBeacon)try{x=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&d.Image&&(new Image().src=v.A,x=!0),x||(v.g=hu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),_s(v)}cu(h)}function ya(h){h.g&&(Nl(h),h.g.cancel(),h.g=null)}function Zr(h){ya(h),h.v&&(d.clearTimeout(h.v),h.v=null),to(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function hi(h){if(!fl(h.h)&&!h.m){h.m=!0;var v=h.Ea;ue||N(),me||(ue(),me=!0),k.add(v,h),h.D=0}}function eo(h,v){return ai(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Hn(y(h.Ea,h,v),lu(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const J=new Se(this,this.j,h);let ie=this.o;if(this.U&&(ie?(ie=w(ie),Y(ie,this.U)):ie=this.U),this.u!==null||this.R||(J.J=ie,ie=null),this.S)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,v>4096){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=iu(this,J,v),x=Jt(this.J),bt(x,"RID",h),bt(x,"CVER",22),this.G&&bt(x,"X-HTTP-Session-Id",this.G),mr(this,x),ie&&(this.R?v="headers="+oe(xs(ie))+"&"+v:this.u&&hr(x,this.u,ie)),ml(this.h,J),this.Ra&&bt(x,"TYPE","init"),this.S?(bt(x,"$req",v),bt(x,"SID","null"),J.U=!0,cn(J,x,null)):cn(J,x,v),this.I=2}}else this.I==3&&(h?Sl(this,h):this.i.length==0||fl(this.h)||Sl(this))};function Sl(h,v){var x;v?x=v.l:x=h.V++;const A=Jt(h.J);bt(A,"SID",h.M),bt(A,"RID",x),bt(A,"AID",h.K),mr(h,A),h.u&&h.o&&hr(A,h.u,h.o),x=new Se(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),v&&(h.i=v.G.concat(h.i)),v=iu(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ml(h.h,x),cn(x,A,v)}function mr(h,v){h.H&&_e(h.H,function(x,A){bt(v,A,x)}),h.l&&_e({},function(x,A){bt(v,A,x)})}function iu(h,v,x){x=Math.min(h.i.length,x);const A=h.l?y(h.l.Ka,h.l,h):null;e:{var J=h.i;let Ke=-1;for(;;){const $t=["count="+x];Ke==-1?x>0?(Ke=J[0].g,$t.push("ofs="+Ke)):Ke=0:$t.push("ofs="+Ke);let yt=!0;for(let Ut=0;Ut<x;Ut++){var ie=J[Ut].g;const Ts=J[Ut].map;if(ie-=Ke,ie<0)Ke=Math.max(0,J[Ut].g-100),yt=!1;else try{ie="req"+ie+"_"||"";try{var we=Ts instanceof Map?Ts:Object.entries(Ts);for(const[fi,Us]of we){let Bs=Us;p(Us)&&(Bs=vs(Us)),$t.push(ie+fi+"="+encodeURIComponent(Bs))}}catch(fi){throw $t.push(ie+"type="+encodeURIComponent("_badmap")),fi}}catch{A&&A(Ts)}}if(yt){we=$t.join("&");break e}}we=void 0}return h=h.i.splice(0,x),v.G=h,we}function au(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;ue||N(),me||(ue(),me=!0),k.add(v,h),h.A=0}}function pr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Hn(y(h.Da,h),lu(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,ru(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Hn(y(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),ya(this),ru(this))};function Nl(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function ru(h){h.g=new Se(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Jt(h.na);bt(v,"RID","rpc"),bt(v,"SID",h.M),bt(v,"AID",h.K),bt(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&bt(v,"TO",h.ia),bt(v,"TYPE","xmlhttp"),mr(h,v),h.u&&h.o&&hr(v,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=lr(Jt(v)),x.u=null,x.R=!0,mn(x,h)}i.Va=function(){this.C!=null&&(this.C=null,ya(this),pr(this),Rt(19))};function to(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ou(h,v){var x=null;if(h.g==v){to(h),Nl(h),h.g=null;var A=2}else if(ri(h.h,v))x=v.G,pl(h.h,v),A=1;else return;if(h.I!=0){if(v.o)if(A==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var J=h.D;A=ss(),ht(A,new Un(A,x)),hi(h)}else au(h);else if(J=v.m,J==3||J==0&&v.X>0||!(A==1&&eo(h,v)||A==2&&pr(h)))switch(x&&x.length>0&&(v=h.h,v.i=v.i.concat(x)),J){case 1:di(h,5);break;case 4:di(h,10);break;case 3:di(h,6);break;default:di(h,2)}}}function lu(h,v){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*v}function di(h,v){if(h.j.info("Error code "+v),v==2){var x=y(h.bb,h),A=h.Ua;const J=!A;A=new as(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||gn(A,"https"),lr(A),J?Ls(A.toString(),x):xl(A.toString(),x)}else Rt(2);h.I=0,h.l&&h.l.pa(v),cu(h),Zr(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function cu(h){if(h.I=0,h.ja=[],h.l){const v=gl(h.h);(v.length!=0||h.i.length!=0)&&(O(h.ja,v),O(h.ja,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.oa()}}function uu(h,v,x){var A=x instanceof as?Jt(x):new as(x);if(A.g!="")v&&(A.g=v+"."+A.g),ua(A,A.u);else{var J=d.location;A=J.protocol,v=v?v+"."+J.hostname:J.hostname,J=+J.port;const ie=new as(null);A&&gn(ie,A),v&&(ie.g=v),J&&ua(ie,J),x&&(ie.h=x),A=ie}return x=h.G,v=h.wa,x&&v&&bt(A,x,v),bt(A,"VER",h.ka),mr(h,A),A}function hu(h,v,x){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new St(new li({ab:x})):new St(h.ma),v.Fa(h.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function du(){}i=du.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function va(){}va.prototype.g=function(h,v){return new Bn(h,v)};function Bn(h,v){ot.call(this),this.g=new ga(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!j(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!j(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ki(this)}T(Bn,ot),Bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){wl(this.g)},Bn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=vs(h),h=x);v.i.push(new Xt(v.Ya++,h)),v.I==3&&hi(v)},Bn.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,Bn.Z.N.call(this)};function fu(h){Pt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const x in v){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}T(fu,Pt);function mu(){_n.call(this),this.status=1}T(mu,_n);function ki(h){this.g=h}T(ki,du),ki.prototype.ra=function(){ht(this.g,"a")},ki.prototype.qa=function(h){ht(this.g,new fu(h))},ki.prototype.pa=function(h){ht(this.g,new mu)},ki.prototype.oa=function(){ht(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,xx=function(){return new va},bx=function(){return ss()},_x=Mt,up={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},W.NO_ERROR=0,W.TIMEOUT=8,W.HTTP_ERROR=6,Ih=W,ye.COMPLETE="complete",vx=ye,Fn.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",ot.prototype.listen=ot.prototype.J,yc=Fn,St.prototype.listenOnce=St.prototype.K,St.prototype.getLastError=St.prototype.Ha,St.prototype.getLastErrorCode=St.prototype.ya,St.prototype.getStatus=St.prototype.ca,St.prototype.getResponseJson=St.prototype.La,St.prototype.getResponseText=St.prototype.la,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Fa,yx=St}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");let rl="12.8.0";function Tj(i){rl=i}const zr=new zp("@firebase/firestore");function Mo(){return zr.logLevel}function Re(i,...e){if(zr.logLevel<=st.DEBUG){const n=e.map(tg);zr.debug(`Firestore (${rl}): ${i}`,...n)}}function sa(i,...e){if(zr.logLevel<=st.ERROR){const n=e.map(tg);zr.error(`Firestore (${rl}): ${i}`,...n)}}function Yo(i,...e){if(zr.logLevel<=st.WARN){const n=e.map(tg);zr.warn(`Firestore (${rl}): ${i}`,...n)}}function tg(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Fe(i,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,Tx(i,a,n)}function Tx(i,e,n){let a=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw sa(a),new Error(a)}function _t(i,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,i||Tx(e,o,a)}function Ye(i,e){return i}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends ra{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ji{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Ex{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ej{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Mn.UNAUTHENTICATED)))}shutdown(){}}class wj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Sj{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_t(this.o===void 0,42304);let a=this.i;const o=g=>this.i!==a?(a=this.i,n(g)):Promise.resolve();let u=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ji,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ji)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(_t(typeof a.accessToken=="string",31837,{l:a}),new Ex(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class Nj{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Aj{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new Nj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Q_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cj{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ks(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_t(this.o===void 0,3512);const a=u=>{u.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Q_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(_t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Q_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function jj(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<i;a++)n[a]=Math.floor(256*Math.random());return n}class ng{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=jj(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function it(i,e){return i<e?-1:i>e?1:0}function hp(i,e){const n=Math.min(i.length,e.length);for(let a=0;a<n;a++){const o=i.charAt(a),u=e.charAt(a);if(o!==u)return Hm(o)===Hm(u)?it(o,u):Hm(o)?1:-1}return it(i.length,e.length)}const Rj=55296,kj=57343;function Hm(i){const e=i.charCodeAt(0);return e>=Rj&&e<=kj}function Qo(i,e,n){return i.length===e.length&&i.every(((a,o)=>n(a,e[o])))}const K_="__name__";class vi{constructor(e,n,a){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Fe(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=vi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return it(e.length,n.length)}static compareSegments(e,n){const a=vi.isNumericId(e),o=vi.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?vi.extractNumericId(e).compare(vi.extractNumericId(n)):hp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wa.fromString(e.substring(4,e.length-2))}}class It extends vi{construct(e,n,a){return new It(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new Ae(de.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new It(n)}static emptyPath(){return new It([])}}const Dj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends vi{construct(e,n,a){return new Cn(e,n,a)}static isValidIdentifier(e){return Dj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===K_}static keyField(){return new Cn([K_])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new Ae(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Ae(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ae(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(a+=p,o++):(u(),o++)}if(u(),d)throw new Ae(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(n)}static emptyPath(){return new Cn([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(It.fromString(e))}static fromName(e){return new Ue(It.fromString(e).popFirst(5))}static empty(){return new Ue(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new It(e.slice()))}}function wx(i,e,n){if(!n)throw new Ae(de.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Ij(i,e,n,a){if(e===!0&&a===!0)throw new Ae(de.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function W_(i){if(!Ue.isDocumentKey(i))throw new Ae(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function X_(i){if(Ue.isDocumentKey(i))throw new Ae(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Sx(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function yd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Fe(12329,{type:typeof i})}function Xs(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ae(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yd(i);throw new Ae(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function on(i,e){const n={typeString:i};return e&&(n.value=e),n}function Yc(i,e){if(!Sx(i))throw new Ae(de.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in i)){n=`JSON missing required field: '${a}'`;break}const d=i[a];if(o&&typeof d!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new Ae(de.INVALID_ARGUMENT,n);return!0}const J_=-62135596800,Z_=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*Z_);return new Me(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<J_)throw new Ae(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z_}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yc(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-J_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:on("string",Me._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new Me(0,0))}static max(){return new He(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const kc=-1;function Mj(i,e){const n=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,o=He.fromTimestamp(a===1e9?new Me(n+1,0):new Me(n,a));return new Ja(o,Ue.empty(),e)}function Oj(i){return new Ja(i.readTime,i.key,kc)}class Ja{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Ja(He.min(),Ue.empty(),kc)}static max(){return new Ja(He.max(),Ue.empty(),kc)}}function Lj(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ue.comparator(i.documentKey,e.documentKey),n!==0?n:it(i.largestBatchId,e.largestBatchId))}const Vj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ol(i){if(i.code!==de.FAILED_PRECONDITION||i.message!==Vj)throw i;Re("LocalStore","Unexpectedly lost primary lease")}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ge(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ge?n:ge.resolve(n)}catch(n){return ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ge.reject(n)}static resolve(e){return new ge(((n,a)=>{n(e)}))}static reject(e){return new ge(((n,a)=>{a(e)}))}static waitFor(e){return new ge(((n,a)=>{let o=0,u=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++u,d&&u===o&&n()}),(g=>a(g)))})),d=!0,u===o&&n()}))}static or(e){let n=ge.resolve(!1);for(const a of e)n=n.next((o=>o?ge.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,u)=>{a.push(n.call(this,o,u))})),this.waitFor(a)}static mapArray(e,n){return new ge(((a,o)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((b=>{d[y]=b,++p,p===u&&a(d)}),(b=>o(b)))}}))}static doWhile(e,n){return new ge(((a,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):a()};u()}))}}function Uj(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ll(i){return i.name==="IndexedDbTransactionError"}class vd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vd.ce=-1;const sg=-1;function _d(i){return i==null}function Xh(i){return i===0&&1/i==-1/0}function Bj(i){return typeof i=="number"&&Number.isInteger(i)&&!Xh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Nx="";function zj(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=eb(e)),e=qj(i.get(n),e);return eb(e)}function qj(i,e){let n=e;const a=i.length;for(let o=0;o<a;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case Nx:n+="";break;default:n+=u}}return n}function eb(i){return i+Nx+""}function tb(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function ar(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Ax(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class qt{constructor(e,n){this.comparator=e,this.root=n||An.EMPTY}insert(e,n){return new qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xh(this.root,e,this.comparator,!0)}}class xh{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??An.RED,this.left=o??An.EMPTY,this.right=u??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new An(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return An.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new An(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hn{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nb(this.data.getIterator())}getIteratorFrom(e){return new nb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new hn(this.comparator);return n.data=e,n}}class nb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ms{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new ms([])}unionWith(e){let n=new hn(Cn.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new ms(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}class Cx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Cx("Invalid base64 string: "+u):u}})(e);return new jn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new jn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const Fj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Za(i){if(_t(!!i,39018),typeof i=="string"){let e=0;const n=Fj.exec(i);if(_t(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Qt(i.seconds),nanos:Qt(i.nanos)}}function Qt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function er(i){return typeof i=="string"?jn.fromBase64String(i):jn.fromUint8Array(i)}const jx="server_timestamp",Rx="__type__",kx="__previous_value__",Dx="__local_write_time__";function ig(i){return(i?.mapValue?.fields||{})[Rx]?.stringValue===jx}function bd(i){const e=i.mapValue.fields[kx];return ig(e)?bd(e):e}function Dc(i){const e=Za(i.mapValue.fields[Dx].timestampValue);return new Me(e.seconds,e.nanos)}class Hj{constructor(e,n,a,o,u,d,p,g,y,b,T){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=T}}const Jh="(default)";class Ic{constructor(e,n){this.projectId=e,this.database=n||Jh}static empty(){return new Ic("","")}get isDefaultDatabase(){return this.database===Jh}isEqual(e){return e instanceof Ic&&e.projectId===this.projectId&&e.database===this.database}}function $j(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ae(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ic(i.options.projectId,e)}const Ix="__type__",Gj="__max__",Th={mapValue:{}},Mx="__vector__",Zh="value";function tr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ig(i)?4:Qj(i)?9007199254740991:Yj(i)?10:11:Fe(28295,{value:i})}function wi(i,e){if(i===e)return!0;const n=tr(i);if(n!==tr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Dc(i).isEqual(Dc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Za(o.timestampValue),p=Za(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return er(o.bytesValue).isEqual(er(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return Qt(o.geoPointValue.latitude)===Qt(u.geoPointValue.latitude)&&Qt(o.geoPointValue.longitude)===Qt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Qt(o.integerValue)===Qt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Qt(o.doubleValue),p=Qt(u.doubleValue);return d===p?Xh(d)===Xh(p):isNaN(d)&&isNaN(p)}return!1})(i,e);case 9:return Qo(i.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},p=u.mapValue.fields||{};if(tb(d)!==tb(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!wi(d[g],p[g])))return!1;return!0})(i,e);default:return Fe(52216,{left:i})}}function Mc(i,e){return(i.values||[]).find((n=>wi(n,e)))!==void 0}function Ko(i,e){if(i===e)return 0;const n=tr(i),a=tr(e);if(n!==a)return it(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return it(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=Qt(u.integerValue||u.doubleValue),g=Qt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(i,e);case 3:return sb(i.timestampValue,e.timestampValue);case 4:return sb(Dc(i),Dc(e));case 5:return hp(i.stringValue,e.stringValue);case 6:return(function(u,d){const p=er(u),g=er(d);return p.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=it(p[y],g[y]);if(b!==0)return b}return it(p.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=it(Qt(u.latitude),Qt(d.latitude));return p!==0?p:it(Qt(u.longitude),Qt(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return ib(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[Zh]?.arrayValue,b=g[Zh]?.arrayValue,T=it(y?.values?.length||0,b?.values?.length||0);return T!==0?T:ib(y,b)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Th.mapValue&&d===Th.mapValue)return 0;if(u===Th.mapValue)return 1;if(d===Th.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let T=0;T<g.length&&T<b.length;++T){const E=hp(g[T],b[T]);if(E!==0)return E;const P=Ko(p[g[T]],y[b[T]]);if(P!==0)return P}return it(g.length,b.length)})(i.mapValue,e.mapValue);default:throw Fe(23264,{he:n})}}function sb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return it(i,e);const n=Za(i),a=Za(e),o=it(n.seconds,a.seconds);return o!==0?o:it(n.nanos,a.nanos)}function ib(i,e){const n=i.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=Ko(n[o],a[o]);if(u)return u}return it(n.length,a.length)}function Wo(i){return dp(i)}function dp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const a=Za(n);return`time(${a.seconds},${a.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return er(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Ue.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=dp(u);return a+"]"})(i.arrayValue):"mapValue"in i?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of a)u?u=!1:o+=",",o+=`${d}:${dp(n.fields[d])}`;return o+"}"})(i.mapValue):Fe(61005,{value:i})}function Mh(i){switch(tr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bd(i);return e?16+Mh(e):16;case 5:return 2*i.stringValue.length;case 6:return er(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+Mh(u)),0)})(i.arrayValue);case 10:case 11:return(function(a){let o=0;return ar(a.fields,((u,d)=>{o+=u.length+Mh(d)})),o})(i.mapValue);default:throw Fe(13486,{value:i})}}function ab(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function fp(i){return!!i&&"integerValue"in i}function ag(i){return!!i&&"arrayValue"in i}function rb(i){return!!i&&"nullValue"in i}function ob(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Oh(i){return!!i&&"mapValue"in i}function Yj(i){return(i?.mapValue?.fields||{})[Ix]?.stringValue===Mx}function Ec(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ar(i.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Ec(a))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ec(i.arrayValue.values[n]);return e}return{...i}}function Qj(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Gj}class es{constructor(e){this.value=e}static empty(){return new es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(n)}setAll(e){let n=Cn.emptyPath(),a={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,a,o),a={},o=[],n=p.popLast()}d?a[p.lastSegment()]=Ec(d):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());Oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];Oh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){ar(n,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new es(Ec(this.value))}}function Ox(i){const e=[];return ar(i.fields,((n,a)=>{const o=new Cn([n]);if(Oh(a)){const u=Ox(a.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new ms(e)}class On{constructor(e,n,a,o,u,d,p){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new On(e,0,He.min(),He.min(),He.min(),es.empty(),0)}static newFoundDocument(e,n,a,o){return new On(e,1,n,He.min(),a,o,0)}static newNoDocument(e,n){return new On(e,2,n,He.min(),He.min(),es.empty(),0)}static newUnknownDocument(e,n){return new On(e,3,n,He.min(),He.min(),es.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ed{constructor(e,n){this.position=e,this.inclusive=n}}function lb(i,e,n){let a=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?a=Ue.comparator(Ue.fromName(d.referenceValue),n.key):a=Ko(d,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function cb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!wi(i.position[n],e.position[n]))return!1;return!0}class Oc{constructor(e,n="asc"){this.field=e,this.dir=n}}function Kj(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Lx{}class rn extends Lx{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new Xj(e,n,a):n==="array-contains"?new eR(e,a):n==="in"?new tR(e,a):n==="not-in"?new nR(e,a):n==="array-contains-any"?new sR(e,a):new rn(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new Jj(e,a):new Zj(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ko(n,this.value)):n!==null&&tr(this.value)===tr(n)&&this.matchesComparison(Ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Js extends Lx{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Js(e,n)}matches(e){return Vx(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vx(i){return i.op==="and"}function Px(i){return Wj(i)&&Vx(i)}function Wj(i){for(const e of i.filters)if(e instanceof Js)return!1;return!0}function mp(i){if(i instanceof rn)return i.field.canonicalString()+i.op.toString()+Wo(i.value);if(Px(i))return i.filters.map((e=>mp(e))).join(",");{const e=i.filters.map((n=>mp(n))).join(",");return`${i.op}(${e})`}}function Ux(i,e){return i instanceof rn?(function(a,o){return o instanceof rn&&a.op===o.op&&a.field.isEqual(o.field)&&wi(a.value,o.value)})(i,e):i instanceof Js?(function(a,o){return o instanceof Js&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,d,p)=>u&&Ux(d,o.filters[p])),!0):!1})(i,e):void Fe(19439)}function Bx(i){return i instanceof rn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wo(n.value)}`})(i):i instanceof Js?(function(n){return n.op.toString()+" {"+n.getFilters().map(Bx).join(" ,")+"}"})(i):"Filter"}class Xj extends rn{constructor(e,n,a){super(e,n,a),this.key=Ue.fromName(a.referenceValue)}matches(e){const n=Ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class Jj extends rn{constructor(e,n){super(e,"in",n),this.keys=zx("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Zj extends rn{constructor(e,n){super(e,"not-in",n),this.keys=zx("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function zx(i,e){return(e.arrayValue?.values||[]).map((n=>Ue.fromName(n.referenceValue)))}class eR extends rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ag(n)&&Mc(n.arrayValue,this.value)}}class tR extends rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mc(this.value.arrayValue,n)}}class nR extends rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mc(this.value.arrayValue,n)}}class sR extends rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ag(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>Mc(this.value.arrayValue,a)))}}class iR{constructor(e,n=null,a=[],o=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function ub(i,e=null,n=[],a=[],o=null,u=null,d=null){return new iR(i,e,n,a,o,u,d)}function rg(i){const e=Ye(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>mp(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),_d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>Wo(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>Wo(a))).join(",")),e.Te=n}return e.Te}function og(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Kj(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Ux(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!cb(i.startAt,e.startAt)&&cb(i.endAt,e.endAt)}function pp(i){return Ue.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class cl{constructor(e,n=null,a=[],o=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function aR(i,e,n,a,o,u,d,p){return new cl(i,e,n,a,o,u,d,p)}function lg(i){return new cl(i)}function hb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function rR(i){return Ue.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function qx(i){return i.collectionGroup!==null}function wc(i){const e=Ye(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new hn(Cn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Oc(u,a))})),n.has(Cn.keyField().canonicalString())||e.Ie.push(new Oc(Cn.keyField(),a))}return e.Ie}function xi(i){const e=Ye(i);return e.Ee||(e.Ee=oR(e,wc(i))),e.Ee}function oR(i,e){if(i.limitType==="F")return ub(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Oc(o.field,u)}));const n=i.endAt?new ed(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new ed(i.startAt.position,i.startAt.inclusive):null;return ub(i.path,i.collectionGroup,e,i.filters,i.limit,n,a)}}function gp(i,e){const n=i.filters.concat([e]);return new cl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function lR(i,e){const n=i.explicitOrderBy.concat([e]);return new cl(i.path,i.collectionGroup,n,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function yp(i,e,n){return new cl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function xd(i,e){return og(xi(i),xi(e))&&i.limitType===e.limitType}function Fx(i){return`${rg(xi(i))}|lt:${i.limitType}`}function Oo(i){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>Bx(o))).join(", ")}]`),_d(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>Wo(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>Wo(o))).join(",")),`Target(${a})`})(xi(i))}; limitType=${i.limitType})`}function Td(i,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Ue.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(i,e)&&(function(a,o){for(const u of wc(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(a,o){return!(a.startAt&&!(function(d,p,g){const y=lb(d,p,g);return d.inclusive?y<=0:y<0})(a.startAt,wc(a),o)||a.endAt&&!(function(d,p,g){const y=lb(d,p,g);return d.inclusive?y>=0:y>0})(a.endAt,wc(a),o))})(i,e)}function cR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Hx(i){return(e,n)=>{let a=!1;for(const o of wc(i)){const u=uR(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function uR(i,e,n){const a=i.field.isKeyField()?Ue.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Ko(g,y):Fe(42886)})(i.field,e,n);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return Fe(19790,{direction:i.dir})}}class Hr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ar(this.inner,((n,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return Ax(this.inner)}size(){return this.innerSize}}const hR=new qt(Ue.comparator);function ia(){return hR}const $x=new qt(Ue.comparator);function vc(...i){let e=$x;for(const n of i)e=e.insert(n.key,n);return e}function Gx(i){let e=$x;return i.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function Or(){return Sc()}function Yx(){return Sc()}function Sc(){return new Hr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const dR=new qt(Ue.comparator),fR=new hn(Ue.comparator);function at(...i){let e=fR;for(const n of i)e=e.add(n);return e}const mR=new hn(it);function pR(){return mR}function cg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xh(e)?"-0":e}}function Qx(i){return{integerValue:""+i}}function gR(i,e){return Bj(e)?Qx(e):cg(i,e)}class Ed{constructor(){this._=void 0}}function yR(i,e,n){return i instanceof td?(function(o,u){const d={fields:{[Rx]:{stringValue:jx},[Dx]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ig(u)&&(u=bd(u)),u&&(d.fields[kx]=u),{mapValue:d}})(n,e):i instanceof Lc?Wx(i,e):i instanceof Vc?Xx(i,e):(function(o,u){const d=Kx(o,u),p=db(d)+db(o.Ae);return fp(d)&&fp(o.Ae)?Qx(p):cg(o.serializer,p)})(i,e)}function vR(i,e,n){return i instanceof Lc?Wx(i,e):i instanceof Vc?Xx(i,e):n}function Kx(i,e){return i instanceof nd?(function(a){return fp(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class td extends Ed{}class Lc extends Ed{constructor(e){super(),this.elements=e}}function Wx(i,e){const n=Jx(e);for(const a of i.elements)n.some((o=>wi(o,a)))||n.push(a);return{arrayValue:{values:n}}}class Vc extends Ed{constructor(e){super(),this.elements=e}}function Xx(i,e){let n=Jx(e);for(const a of i.elements)n=n.filter((o=>!wi(o,a)));return{arrayValue:{values:n}}}class nd extends Ed{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function db(i){return Qt(i.integerValue||i.doubleValue)}function Jx(i){return ag(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function _R(i,e){return i.field.isEqual(e.field)&&(function(a,o){return a instanceof Lc&&o instanceof Lc||a instanceof Vc&&o instanceof Vc?Qo(a.elements,o.elements,wi):a instanceof nd&&o instanceof nd?wi(a.Ae,o.Ae):a instanceof td&&o instanceof td})(i.transform,e.transform)}class bR{constructor(e,n){this.version=e,this.transformResults=n}}class Ms{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ms}static exists(e){return new Ms(void 0,e)}static updateTime(e){return new Ms(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class wd{}function Zx(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ug(i.key,Ms.none()):new Qc(i.key,i.data,Ms.none());{const n=i.data,a=es.empty();let o=new hn(Cn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?a.delete(u):a.set(u,d),o=o.add(u)}return new rr(i.key,a,new ms(o.toArray()),Ms.none())}}function xR(i,e,n){i instanceof Qc?(function(o,u,d){const p=o.value.clone(),g=mb(o.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(i,e,n):i instanceof rr?(function(o,u,d){if(!Lh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const p=mb(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(eT(o)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Nc(i,e,n,a){return i instanceof Qc?(function(u,d,p,g){if(!Lh(u.precondition,d))return p;const y=u.value.clone(),b=pb(u.fieldTransforms,g,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(i,e,n,a):i instanceof rr?(function(u,d,p,g){if(!Lh(u.precondition,d))return p;const y=pb(u.fieldTransforms,g,d),b=d.data;return b.setAll(eT(u)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,a):(function(u,d,p){return Lh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(i,e,n)}function TR(i,e){let n=null;for(const a of i.fieldTransforms){const o=e.data.field(a.field),u=Kx(a.transform,o||null);u!=null&&(n===null&&(n=es.empty()),n.set(a.field,u))}return n||null}function fb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Qo(a,o,((u,d)=>_R(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Qc extends wd{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class rr extends wd{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function eT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=i.data.field(n);e.set(n,a)}})),e}function mb(i,e,n){const a=new Map;_t(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,p=e.data.field(u.field);a.set(u.field,vR(d,p,n[o]))}return a}function pb(i,e,n){const a=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);a.set(o.field,yR(u,d,e))}return a}class ug extends wd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ER extends wd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wR{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&xR(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Nc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Nc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=Yx();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(o.key)?null:p;const g=Zx(d,p);g!==null&&a.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(He.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),at())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,((n,a)=>fb(n,a)))&&Qo(this.baseMutations,e.baseMutations,((n,a)=>fb(n,a)))}}class hg{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){_t(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return dR})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,a[d].version);return new hg(e,n,a,o)}}class SR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class NR{constructor(e,n){this.count=e,this.unchangedNames=n}}var sn,ut;function AR(i){switch(i){case de.OK:return Fe(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Fe(15467,{code:i})}}function tT(i){if(i===void 0)return sa("GRPC error has no .code"),de.UNKNOWN;switch(i){case sn.OK:return de.OK;case sn.CANCELLED:return de.CANCELLED;case sn.UNKNOWN:return de.UNKNOWN;case sn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case sn.INTERNAL:return de.INTERNAL;case sn.UNAVAILABLE:return de.UNAVAILABLE;case sn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case sn.NOT_FOUND:return de.NOT_FOUND;case sn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case sn.ABORTED:return de.ABORTED;case sn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case sn.DATA_LOSS:return de.DATA_LOSS;default:return Fe(39323,{code:i})}}(ut=sn||(sn={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";function CR(){return new TextEncoder}const jR=new Wa([4294967295,4294967295],0);function gb(i){const e=CR().encode(i),n=new gx;return n.update(e),new Uint8Array(n.digest())}function yb(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Wa([n,a],0),new Wa([o,u],0)]}class dg{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new _c(`Invalid padding: ${n}`);if(a<0)throw new _c(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new _c(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wa.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(Wa.fromNumber(a)));return o.compare(jR)===1&&(o=new Wa([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gb(e),[a,o]=yb(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,o,u);if(!this.we(d))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new dg(u,o,n);return a.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=gb(e),[a,o]=yb(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,o,u);this.be(d)}}be(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class _c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sd{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Sd(He.min(),o,new qt(it),ia(),at())}}class Kc{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new Kc(a,n,at(),at(),at())}}class Vh{constructor(e,n,a,o){this.Se=e,this.removedTargetIds=n,this.key=a,this.De=o}}class nT{constructor(e,n){this.targetId=e,this.Ce=n}}class sT{constructor(e,n,a=jn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class vb{constructor(){this.ve=0,this.Fe=_b(),this.Me=jn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),n=at(),a=at();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Fe(38017,{changeType:u})}})),new Kc(this.Me,this.xe,e,n,a)}Ke(){this.Oe=!1,this.Fe=_b()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class RR{constructor(e){this.Ge=e,this.ze=new Map,this.je=ia(),this.He=Eh(),this.Je=Eh(),this.Ze=new qt(it)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(pp(u))if(a===0){const d=new Ue(u.path);this.et(n,d,On.newNoDocument(d,He.min()))}else _t(a===1,20013,{expectedCount:a});else{const d=this._t(n);if(d!==a){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let d,p;try{d=er(a).toUint8Array()}catch(g){if(g instanceof Cx)return Yo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new dg(d,o,u)}catch(g){return Yo(g instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&pp(p.target)){const g=new Ue(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,On.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let a=at();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(a=a.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Sd(e,n,this.Ze,this.je,a);return this.je=ia(),this.He=Eh(),this.Je=Eh(),this.Ze=new qt(it),o}Ye(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,a),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new vb,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new hn(it),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new hn(it),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Eh(){return new qt(Ue.comparator)}function _b(){return new qt(Ue.comparator)}const kR={asc:"ASCENDING",desc:"DESCENDING"},DR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IR={and:"AND",or:"OR"};class MR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vp(i,e){return i.useProto3Json||_d(e)?e:{value:e}}function sd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function OR(i,e){return sd(i,e.toTimestamp())}function Ti(i){return _t(!!i,49232),He.fromTimestamp((function(n){const a=Za(n);return new Me(a.seconds,a.nanos)})(i))}function fg(i,e){return _p(i,e).canonicalString()}function _p(i,e){const n=(function(o){return new It(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function aT(i){const e=It.fromString(i);return _t(uT(e),10190,{key:e.toString()}),e}function bp(i,e){return fg(i.databaseId,e.path)}function $m(i,e){const n=aT(e);if(n.get(1)!==i.databaseId.projectId)throw new Ae(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ae(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ue(oT(n))}function rT(i,e){return fg(i.databaseId,e)}function LR(i){const e=aT(i);return e.length===4?It.emptyPath():oT(e)}function xp(i){return new It(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function oT(i){return _t(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function bb(i,e,n){return{name:bp(i,e),fields:n.value.mapValue.fields}}function VR(i,e){let n;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Fe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(_t(b===void 0||typeof b=="string",58123),jn.fromBase64String(b||"")):(_t(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),jn.fromUint8Array(b||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const b=y.code===void 0?de.UNKNOWN:tT(y.code);return new Ae(b,y.message||"")})(d);n=new sT(a,o,u,p||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=$m(i,a.document.name),u=Ti(a.document.updateTime),d=a.document.createTime?Ti(a.document.createTime):He.min(),p=new es({mapValue:{fields:a.document.fields}}),g=On.newFoundDocument(o,u,d,p),y=a.targetIds||[],b=a.removedTargetIds||[];n=new Vh(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=$m(i,a.document),u=a.readTime?Ti(a.readTime):He.min(),d=On.newNoDocument(o,u),p=a.removedTargetIds||[];n=new Vh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=$m(i,a.document),u=a.removedTargetIds||[];n=new Vh([],u,o,null)}else{if(!("filter"in e))return Fe(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,d=new NR(o,u),p=a.targetId;n=new nT(p,d)}}return n}function PR(i,e){let n;if(e instanceof Qc)n={update:bb(i,e.key,e.value)};else if(e instanceof ug)n={delete:bp(i,e.key)};else if(e instanceof rr)n={update:bb(i,e.key,e.data),updateMask:YR(e.fieldMask)};else{if(!(e instanceof ER))return Fe(16599,{dt:e.type});n={verify:bp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,d){const p=d.transform;if(p instanceof td)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Lc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Vc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof nd)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Fe(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:OR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Fe(27497)})(i,e.precondition)),n}function UR(i,e){return i&&i.length>0?(_t(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?Ti(o.updateTime):Ti(u);return d.isEqual(He.min())&&(d=Ti(u)),new bR(d,o.transformResults||[])})(n,e)))):[]}function BR(i,e){return{documents:[rT(i,e.path)]}}function zR(i,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=rT(i,o);const u=(function(y){if(y.length!==0)return cT(Js.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((b=>(function(E){return{field:Lo(E.field),direction:HR(E.dir)}})(b)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=vp(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function qR(i){let e=LR(i.parent);const n=i.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){_t(a===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(T){const E=lT(T);return E instanceof Js&&Px(E)?E.getFilters():[E]})(n.where));let d=[];n.orderBy&&(d=(function(T){return T.map((E=>(function(O){return new Oc(Vo(O.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(E)))})(n.orderBy));let p=null;n.limit&&(p=(function(T){let E;return E=typeof T=="object"?T.value:T,_d(E)?null:E})(n.limit));let g=null;n.startAt&&(g=(function(T){const E=!!T.before,P=T.values||[];return new ed(P,E)})(n.startAt));let y=null;return n.endAt&&(y=(function(T){const E=!T.before,P=T.values||[];return new ed(P,E)})(n.endAt)),aR(e,o,d,u,p,"F",g,y)}function FR(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=Vo(n.unaryFilter.field);return rn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Vo(n.unaryFilter.field);return rn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Vo(n.unaryFilter.field);return rn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Vo(n.unaryFilter.field);return rn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(i):i.fieldFilter!==void 0?(function(n){return rn.create(Vo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Js.create(n.compositeFilter.filters.map((a=>lT(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(i):Fe(30097,{filter:i})}function HR(i){return kR[i]}function $R(i){return DR[i]}function GR(i){return IR[i]}function Lo(i){return{fieldPath:i.canonicalString()}}function Vo(i){return Cn.fromServerFormat(i.fieldPath)}function cT(i){return i instanceof rn?(function(n){if(n.op==="=="){if(ob(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(rb(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ob(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(rb(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:$R(n.op),value:n.value}}})(i):i instanceof Js?(function(n){const a=n.getFilters().map((o=>cT(o)));return a.length===1?a[0]:{compositeFilter:{op:GR(n.op),filters:a}}})(i):Fe(54877,{filter:i})}function YR(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function uT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function hT(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class Ga{constructor(e,n,a,o,u=He.min(),d=He.min(),p=jn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class QR{constructor(e){this.yt=e}}function KR(i){const e=qR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?yp(e,e.limit,"L"):e}class WR{constructor(){this.Sn=new XR}addToCollectionParentIndex(e,n){return this.Sn.add(n),ge.resolve()}getCollectionParents(e,n){return ge.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ge.resolve()}deleteFieldIndex(e,n){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,n){return ge.resolve()}getDocumentsMatchingTarget(e,n){return ge.resolve(null)}getIndexType(e,n){return ge.resolve(0)}getFieldIndexes(e,n){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,n){return ge.resolve(Ja.min())}getMinOffsetFromCollectionGroup(e,n){return ge.resolve(Ja.min())}updateCollectionGroup(e,n,a){return ge.resolve()}updateIndexEntries(e,n){return ge.resolve()}}class XR{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new hn(It.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new hn(It.comparator)).toArray()}}const xb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dT=41943040;class Zn{static withCacheSize(e){return new Zn(e,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(dT,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);class Xo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Xo(0)}static ar(){return new Xo(-1)}}const Tb="LruGarbageCollector",JR=1048576;function Eb([i,e],[n,a]){const o=it(i,n);return o===0?it(e,a):o}class ZR{constructor(e){this.Pr=e,this.buffer=new hn(Eb),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();Eb(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ek{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Re(Tb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ll(n)?Re(Tb,"Ignoring IndexedDB error during garbage collection: ",n):await ol(n)}await this.Ar(3e5)}))}}class tk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return ge.resolve(vd.ce);const a=new ZR(n);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(xb)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xb):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let a,o,u,d,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(a=T,p=Date.now(),this.removeTargets(e,a,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,a)))).next((T=>(y=Date.now(),Mo()<=st.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function nk(i,e){return new tk(i,e)}class sk{constructor(){this.changes=new Hr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?ge.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ik{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class ak{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&Nc(a.mutation,o,ms.empty(),Me.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,at()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=at()){const o=Or();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((u=>{let d=vc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const a=Or();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,at())))}populateOverlays(e,n,a){const o=[];return a.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,a,o){let u=ia();const d=Sc(),p=(function(){return Sc()})();return n.forEach(((g,y)=>{const b=a.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof rr)?u=u.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),Nc(b.mutation,y,b.mutation.getFieldMask(),Me.now())):d.set(y.key,ms.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,b)=>d.set(y,b))),n.forEach(((y,b)=>p.set(y,new ik(b,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const a=Sc();let o=new qt(((d,p)=>d-p)),u=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let b=a.get(g)||ms.empty();b=p.applyToLocalView(y,b),a.set(g,b);const T=(o.get(p.batchId)||at()).add(g);o=o.insert(p.batchId,T)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,T=Yx();b.forEach((E=>{if(!u.has(E)){const P=Zx(n.get(E),a.get(E));P!==null&&T.set(E,P),u=u.add(E)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,T))}return ge.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return rR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):ge.resolve(Or());let p=kc,g=u;return d.next((y=>ge.forEach(y,((b,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),u.get(b)?ge.resolve():this.remoteDocumentCache.getEntry(e,b).next((E=>{g=g.insert(b,E)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,at()))).next((b=>({batchId:p,changes:Gx(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ue(n)).next((a=>{let o=vc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let d=vc();return this.indexManager.getCollectionParents(e,u).next((p=>ge.forEach(p,(g=>{const y=(function(T,E){return new cl(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,a,o).next((b=>{b.forEach(((T,E)=>{d=d.insert(T,E)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o)))).next((d=>{u.forEach(((g,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,On.newInvalidDocument(b)))}));let p=vc();return d.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&Nc(b.mutation,y,ms.empty(),Me.now()),Td(n,y)&&(p=p.insert(g,y))})),p}))}}class rk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ge.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ti(o.createTime)}})(n)),ge.resolve()}getNamedQuery(e,n){return ge.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:KR(o.bundledQuery),readTime:Ti(o.readTime)}})(n)),ge.resolve()}}class ok{constructor(){this.overlays=new qt(Ue.comparator),this.Lr=new Map}getOverlay(e,n){return ge.resolve(this.overlays.get(n))}getOverlays(e,n){const a=Or();return ge.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,u)=>{this.bt(e,n,u)})),ge.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),ge.resolve()}getOverlaysForCollection(e,n,a){const o=Or(),u=n.length+1,d=new Ue(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>a&&o.set(g.getKey(),g)}return ge.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new qt(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>a){let b=u.get(y.largestBatchId);b===null&&(b=Or(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Or(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=o)););return ge.resolve(p)}bt(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new SR(n,a));let u=this.Lr.get(n);u===void 0&&(u=at(),this.Lr.set(n,u)),this.Lr.set(n,u.add(a.key))}}class lk{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ge.resolve()}}class mg{constructor(){this.kr=new hn(vn.Kr),this.qr=new hn(vn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const a=new vn(e,n);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Wr(new vn(e,n))}Qr(e,n){e.forEach((a=>this.removeReference(a,n)))}Gr(e){const n=new Ue(new It([])),a=new vn(n,e),o=new vn(n,e+1),u=[];return this.qr.forEachInRange([a,o],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ue(new It([])),a=new vn(n,e),o=new vn(n,e+1);let u=at();return this.qr.forEachInRange([a,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new vn(e,0),a=this.kr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class vn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ue.comparator(e.key,n.key)||it(e.Hr,n.Hr)}static Ur(e,n){return it(e.Hr,n.Hr)||Ue.comparator(e.key,n.key)}}class ck{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new hn(vn.Kr)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new wR(u,n,a,o);this.mutationQueue.push(d);for(const p of o)this.Jr=this.Jr.add(new vn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ge.resolve(d)}lookupMutationBatch(e,n){return ge.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.Xr(a),u=o<0?0:o;return ge.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?sg:this.Yn-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new vn(n,0),o=new vn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,o],(d=>{const p=this.Zr(d.Hr);u.push(p)})),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new hn(it);return n.forEach((o=>{const u=new vn(o,0),d=new vn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{a=a.add(p.Hr)}))})),ge.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;Ue.isDocumentKey(u)||(u=u.child(""));const d=new vn(new Ue(u),0);let p=new hn(it);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)}),d),ge.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){_t(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return ge.forEach(n.mutations,(o=>{const u=new vn(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,n){const a=new vn(n,0),o=this.Jr.firstAfterOrEqual(a);return ge.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class uk{constructor(e){this.ti=e,this.docs=(function(){return new qt(Ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,d=this.ti(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return ge.resolve(a?a.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let a=ia();return n.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():On.newInvalidDocument(o))})),ge.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=ia();const d=n.path,p=new Ue(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||Lj(Oj(b),a)<=0||(o.has(b.key)||Td(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ge.resolve(u)}getAllFromCollectionGroup(e,n,a,o){Fe(9500)}ni(e,n){return ge.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new hk(this)}getSize(e){return ge.resolve(this.size)}}class hk extends sk{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),ge.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class dk{constructor(e){this.persistence=e,this.ri=new Hr((n=>rg(n)),og),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.ii=0,this.si=new mg,this.targetCount=0,this.oi=Xo._r()}forEachTarget(e,n){return this.ri.forEach(((a,o)=>n(o))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.ii&&(this.ii=n),ge.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Xo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ge.resolve()}updateTargetData(e,n){return this.lr(n),ge.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&a.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ge.waitFor(u).next((()=>o))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,n){const a=this.ri.get(n)||null;return ge.resolve(a)}addMatchingKeys(e,n,a){return this.si.$r(n,a),ge.resolve()}removeMatchingKeys(e,n,a){this.si.Qr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ge.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ge.resolve()}getMatchingKeysForTargetId(e,n){const a=this.si.jr(n);return ge.resolve(a)}containsKey(e,n){return ge.resolve(this.si.containsKey(n))}}class fT{constructor(e,n){this._i={},this.overlays={},this.ai=new vd(0),this.ui=!1,this.ui=!0,this.ci=new lk,this.referenceDelegate=e(this),this.li=new dk(this),this.indexManager=new WR,this.remoteDocumentCache=(function(o){return new uk(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new QR(n),this.Pi=new rk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ok,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this._i[e.toKey()];return a||(a=new ck(n,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,a){Re("MemoryPersistence","Starting transaction:",e);const o=new fk(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return ge.or(Object.values(this._i).map((a=>()=>a.containsKey(e,n))))}}class fk extends Pj{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Ri=new mg,this.Ai=null}static Vi(e){return new pg(e)}get di(){if(this.Ai)return this.Ai;throw Fe(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.di.delete(a.toString()),ge.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.di.add(a.toString()),ge.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ge.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.di,(a=>{const o=Ue.fromPath(a);return this.mi(e,o).next((u=>{u||n.removeEntry(o,He.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((a=>{a?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return ge.or([()=>ge.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class id{constructor(e,n){this.persistence=e,this.fi=new Hr((a=>zj(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=nk(this,n)}static Vi(e,n){return new id(e,n)}Ti(){}Ii(e){return ge.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}pr(e){let n=0;return this.mr(e,(a=>{n++})).next((()=>n))}mr(e,n){return ge.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((u=>u?ge.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(a++,u.removeEntry(d,He.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ge.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),ge.resolve()}removeReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ge.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mh(e.data.value)),n}wr(e,n,a){return ge.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return ge.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class gg{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Ts=a,this.Is=o}static Es(e,n){let a=at(),o=at();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new gg(e,n.fromCache,a,o)}}class mk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return F2()?8:Uj(Ln())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,o,a).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new mk;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,a,o){return a.documentReadCount<this.Vs?(Mo()<=st.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ge.resolve()):(Mo()<=st.DEBUG&&Re("QueryEngine","Query:",Oo(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(Mo()<=st.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xi(n))):ge.resolve())}gs(e,n){if(hb(n))return ge.resolve(null);let a=xi(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=yp(n,null,"F"),a=xi(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const d=at(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,a).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,d,g.readTime)?this.gs(e,yp(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,a,o){return hb(n)||o.isEqual(He.min())?ge.resolve(null):this.fs.getDocuments(e,a).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,a,o)?ge.resolve(null):(Mo()<=st.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Oo(n)),this.Ds(e,d,n,Mj(o,kc)).next((p=>p)))}))}bs(e,n){let a=new hn(Hx(e));return n.forEach(((o,u)=>{Td(e,u)&&(a=a.add(u))})),a}Ss(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,a){return Mo()<=st.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Oo(n)),this.fs.getDocumentsMatchingQuery(e,n,Ja.min(),a)}Ds(e,n,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const yg="LocalStore",gk=3e8;class yk{constructor(e,n,a,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new qt(it),this.Fs=new Hr((u=>rg(u)),og),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ak(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function vk(i,e,n,a){return new yk(i,e,n,a)}async function mT(i,e){const n=Ye(i);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const d=[],p=[];let g=at();for(const y of o){d.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(a,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function _k(i,e){const n=Ye(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const T=y.batch,E=T.keys();let P=ge.resolve();return E.forEach((O=>{P=P.next((()=>b.getEntry(g,O))).next((D=>{const V=y.docVersions.get(O);_t(V!==null,48541),D.version.compareTo(V)<0&&(T.applyToRemoteDocument(D,y),D.isValidDocument()&&(D.setReadTime(y.commitVersion),b.addEntry(D)))}))})),P.next((()=>p.mutationQueue.removeMutationBatch(g,T)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(p){let g=at();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function pT(i){const e=Ye(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function bk(i,e){const n=Ye(i),a=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((b,T)=>{const E=o.get(T);if(!E)return;p.push(n.li.removeMatchingKeys(u,b.removedDocuments,T).next((()=>n.li.addMatchingKeys(u,b.addedDocuments,T))));let P=E.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?P=P.withResumeToken(jn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,a)),o=o.insert(T,P),(function(D,V,H){return D.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=gk?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(E,P,b)&&p.push(n.li.updateTargetData(u,P))}));let g=ia(),y=at();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(xk(u,d,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!a.isEqual(He.min())){const b=n.li.getLastRemoteSnapshotVersion(u).next((T=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));p.push(b)}return ge.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=o,u)))}function xk(i,e,n){let a=at(),o=at();return n.forEach((u=>a=a.add(u))),e.getEntries(i,a).next((u=>{let d=ia();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(He.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):Re(yg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function Tk(i,e){const n=Ye(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=sg),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function Ek(i,e){const n=Ye(i);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.li.getTargetData(a,e).next((u=>u?(o=u,ge.resolve(o)):n.li.allocateTargetId(a).next((d=>(o=new Ga(e,d,"TargetPurposeListen",a.currentSequenceNumber),n.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(a.targetId,a),n.Fs.set(e,a.targetId)),a}))}async function Tp(i,e,n){const a=Ye(i),o=a.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ll(d))throw d;Re(yg,`Failed to update sequence numbers for target ${e}: ${d}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function wb(i,e,n){const a=Ye(i);let o=He.min(),u=at();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,b){const T=Ye(g),E=T.Fs.get(b);return E!==void 0?ge.resolve(T.vs.get(E)):T.li.getTargetData(y,b)})(a,d,xi(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>a.Cs.getDocumentsMatchingQuery(d,e,n?o:He.min(),n?u:at()))).next((p=>(wk(a,cR(e),p),{documents:p,ks:u})))))}function wk(i,e,n){let a=i.Ms.get(e)||He.min();n.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),i.Ms.set(e,a)}class Sb{constructor(){this.activeTargetIds=pR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sk{constructor(){this.vo=new Sb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,a){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Sb,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Nk{Mo(e){}shutdown(){}}const Nb="ConnectivityMonitor";class Ab{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Re(Nb,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Re(Nb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let wh=null;function Ep(){return wh===null?wh=(function(){return 268435456+Math.round(2147483648*Math.random())})():wh++,"0x"+wh.toString(16)}const Gm="RestConnection",Ak={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Ck{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===Jh?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,n,a,o,u){const d=Ep(),p=this.Qo(e,n.toUriEncodedString());Re(Gm,`Sending RPC '${e}' ${d}:`,p,a);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:y}=new URL(p),b=sl(y);return this.zo(e,p,g,a,b).then((T=>(Re(Gm,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw Yo(Gm,`RPC '${e}' ${d} failed with error: `,T,"url: ",p,"request:",a),T}))}jo(e,n,a,o,u,d){return this.Wo(e,n,a,o,u)}Go(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const a=Ak[e];let o=`${this.qo}/v1/${n}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class jk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const In="WebChannelConnection",dc=(i,e,n)=>{i.listen(e,(a=>{try{n(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Fo extends Ck{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Fo.c_){const e=bx();dc(e,_x.STAT_EVENT,(n=>{n.stat===up.PROXY?Re(In,"STAT_EVENT: detected buffering proxy"):n.stat===up.NOPROXY&&Re(In,"STAT_EVENT: detected no buffering proxy")})),Fo.c_=!0}}zo(e,n,a,o,u){const d=Ep();return new Promise(((p,g)=>{const y=new yx;y.setWithCredentials(!0),y.listenOnce(vx.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ih.NO_ERROR:const T=y.getResponseJson();Re(In,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),p(T);break;case Ih.TIMEOUT:Re(In,`RPC '${e}' ${d} timed out`),g(new Ae(de.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:const E=y.getStatus();if(Re(In,`RPC '${e}' ${d} failed with status:`,E,"response text:",y.getResponseText()),E>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const O=P?.error;if(O&&O.status&&O.message){const D=(function(H){const F=H.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(F)>=0?F:de.UNKNOWN})(O.status);g(new Ae(D,O.message))}else g(new Ae(de.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ae(de.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Re(In,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);Re(In,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",b,a,15)}))}T_(e,n,a){const o=Ep(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,a),p.encodeInitMessageHeaders=!0;const y=u.join("");Re(In,`Creating RPC '${e}' stream ${o}: ${y}`,p);const b=d.createWebChannel(y,p);this.I_(b);let T=!1,E=!1;const P=new jk({Ho:O=>{E?Re(In,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(T||(Re(In,`Opening RPC '${e}' stream ${o} transport.`),b.open(),T=!0),Re(In,`RPC '${e}' stream ${o} sending:`,O),b.send(O))},Jo:()=>b.close()});return dc(b,yc.EventType.OPEN,(()=>{E||(Re(In,`RPC '${e}' stream ${o} transport opened.`),P.i_())})),dc(b,yc.EventType.CLOSE,(()=>{E||(E=!0,Re(In,`RPC '${e}' stream ${o} transport closed`),P.o_(),this.E_(b))})),dc(b,yc.EventType.ERROR,(O=>{E||(E=!0,Yo(In,`RPC '${e}' stream ${o} transport errored. Name:`,O.name,"Message:",O.message),P.o_(new Ae(de.UNAVAILABLE,"The operation could not be completed")))})),dc(b,yc.EventType.MESSAGE,(O=>{if(!E){const D=O.data[0];_t(!!D,16349);const V=D,H=V?.error||V[0]?.error;if(H){Re(In,`RPC '${e}' stream ${o} received error:`,H);const F=H.status;let ne=(function(me){const k=sn[me];if(k!==void 0)return tT(k)})(F),ce=H.message;ne===void 0&&(ne=de.INTERNAL,ce="Unknown error status: "+F+" with message "+H.message),E=!0,P.o_(new Ae(ne,ce)),b.close()}else Re(In,`RPC '${e}' stream ${o} received:`,D),P.__(D)}})),Fo.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,a){super.Go(e,n,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return xx()}}function Rk(i){return new Fo(i)}function Ym(){return typeof document<"u"?document:null}function Nd(i){return new MR(i,!0)}Fo.c_=!1;class gT{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Cb="PersistentStream";class yT{constructor(e,n,a,o,u,d,p,g){this.Ci=e,this.b_=a,this.S_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(sa(n.toString()),sa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new Ae(de.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(Cb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Re(Cb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kk extends yT{constructor(e,n,a,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=VR(this.serializer,e),a=(function(u){if(!("targetChange"in u))return He.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?He.min():d.readTime?Ti(d.readTime):He.min()})(e);return this.listener.J_(n,a)}Z_(e){const n={};n.database=xp(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=pp(g)?{documents:BR(u,g)}:{query:zR(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=iT(u,d.resumeToken);const y=vp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(He.min())>0){p.readTime=sd(u,d.snapshotVersion.toTimestamp());const y=vp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const a=FR(this.serializer,e);a&&(n.labels=a),this.K_(n)}X_(e){const n={};n.database=xp(this.serializer),n.removeTarget=e,this.K_(n)}}class Dk extends yT{constructor(e,n,a,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=UR(e.writeResults,e.commitTime),a=Ti(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=xp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>PR(this.serializer,a)))};this.K_(n)}}class Ik{}class Mk extends Ik{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ae(de.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,_p(n,a),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(de.UNKNOWN,u.toString())}))}jo(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,_p(n,a),o,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ae(de.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Ok(i,e,n,a){return new Mk(i,e,n,a)}class Lk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sa(n),this.aa=!1):Re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qr="RemoteStore";class Vk{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{a.enqueueAndForget((async()=>{$r(this)&&(Re(qr,"Restarting streams for network reachability change."),await(async function(g){const y=Ye(g);y.Ea.add(4),await Wc(y),y.Va.set("Unknown"),y.Ea.delete(4),await Ad(y)})(this))}))})),this.Va=new Lk(a,o)}}async function Ad(i){if($r(i))for(const e of i.Ra)await e(!0)}async function Wc(i){for(const e of i.Ra)await e(!1)}function vT(i,e){const n=Ye(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),xg(n)?bg(n):ul(n).O_()&&_g(n,e))}function vg(i,e){const n=Ye(i),a=ul(n);n.Ia.delete(e),a.O_()&&_T(n,e),n.Ia.size===0&&(a.O_()?a.L_():$r(n)&&n.Va.set("Unknown"))}function _g(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ul(i).Z_(e)}function _T(i,e){i.da.$e(e),ul(i).X_(e)}function bg(i){i.da=new RR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ul(i).start(),i.Va.ua()}function xg(i){return $r(i)&&!ul(i).x_()&&i.Ia.size>0}function $r(i){return Ye(i).Ea.size===0}function bT(i){i.da=void 0}async function Pk(i){i.Va.set("Online")}async function Uk(i){i.Ia.forEach(((e,n)=>{_g(i,e)}))}async function Bk(i,e){bT(i),xg(i)?(i.Va.ha(e),bg(i)):i.Va.set("Unknown")}async function zk(i,e,n){if(i.Va.set("Online"),e instanceof sT&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.da.removeTarget(p))})(i,e)}catch(a){Re(qr,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await ad(i,a)}else if(e instanceof Vh?i.da.Xe(e):e instanceof nT?i.da.st(e):i.da.tt(e),!n.isEqual(He.min()))try{const a=await pT(i.localStore);n.compareTo(a)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(jn.EMPTY_BYTE_STRING,b.snapshotVersion)),_T(u,g);const T=new Ga(b.target,g,y,b.sequenceNumber);_g(u,T)})),u.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(a){Re(qr,"Failed to raise snapshot:",a),await ad(i,a)}}async function ad(i,e,n){if(!ll(e))throw e;i.Ea.add(1),await Wc(i),i.Va.set("Offline"),n||(n=()=>pT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Re(qr,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Ad(i)}))}function xT(i,e){return e().catch((n=>ad(i,n,e)))}async function Cd(i){const e=Ye(i),n=nr(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sg;for(;qk(e);)try{const o=await Tk(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,Fk(e,o)}catch(o){await ad(e,o)}TT(e)&&ET(e)}function qk(i){return $r(i)&&i.Ta.length<10}function Fk(i,e){i.Ta.push(e);const n=nr(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function TT(i){return $r(i)&&!nr(i).x_()&&i.Ta.length>0}function ET(i){nr(i).start()}async function Hk(i){nr(i).ra()}async function $k(i){const e=nr(i);for(const n of i.Ta)e.ea(n.mutations)}async function Gk(i,e,n){const a=i.Ta.shift(),o=hg.from(a,e,n);await xT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Cd(i)}async function Yk(i,e){e&&nr(i).Y_&&await(async function(a,o){if((function(d){return AR(d)&&d!==de.ABORTED})(o.code)){const u=a.Ta.shift();nr(a).B_(),await xT(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Cd(a)}})(i,e),TT(i)&&ET(i)}async function jb(i,e){const n=Ye(i);n.asyncQueue.verifyOperationInProgress(),Re(qr,"RemoteStore received new credentials");const a=$r(n);n.Ea.add(3),await Wc(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ad(n)}async function Qk(i,e){const n=Ye(i);e?(n.Ea.delete(2),await Ad(n)):e||(n.Ea.add(2),await Wc(n),n.Va.set("Unknown"))}function ul(i){return i.ma||(i.ma=(function(n,a,o){const u=Ye(n);return u.sa(),new kk(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:Pk.bind(null,i),Yo:Uk.bind(null,i),t_:Bk.bind(null,i),J_:zk.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),xg(i)?bg(i):i.Va.set("Unknown")):(await i.ma.stop(),bT(i))}))),i.ma}function nr(i){return i.fa||(i.fa=(function(n,a,o){const u=Ye(n);return u.sa(),new Dk(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Hk.bind(null,i),t_:Yk.bind(null,i),ta:$k.bind(null,i),na:Gk.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Cd(i)):(await i.fa.stop(),i.Ta.length>0&&(Re(qr,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Tg{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const d=Date.now()+a,p=new Tg(e,n,d,o,u);return p.start(a),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(i,e){if(sa("AsyncQueue",`${e}: ${i}`),ll(i))return new Ae(de.UNAVAILABLE,`${e}: ${i}`);throw i}class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Ue.comparator(n.key,a.key):(n,a)=>Ue.comparator(n.key,a.key),this.keyedMap=vc(),this.sortedSet=new qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Ho;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class Rb{constructor(){this.ga=new qt(Ue.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Fe(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class Jo{constructor(e,n,a,o,u,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,a,o,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Jo(e,n,Ho.emptySet(n),d,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}class Kk{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Wk{constructor(){this.queries=kb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=Ye(n),u=o.queries;o.queries=kb(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(a)}))})(this,new Ae(de.ABORTED,"Firestore shutting down"))}}function kb(){return new Hr((i=>Fx(i)),xd)}async function wT(i,e){const n=Ye(i);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(a=2):(u=new Kk,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=Eg(d,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&wg(n)}async function ST(i,e){const n=Ye(i),a=e.query;let o=3;const u=n.queries.get(a);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function Xk(i,e){const n=Ye(i);let a=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(o)&&(a=!0);d.wa=o}}a&&wg(n)}function Jk(i,e,n){const a=Ye(i),o=a.queries.get(e);if(o)for(const u of o.ba)u.onError(n);a.queries.delete(e)}function wg(i){i.Ca.forEach((e=>{e.next()}))}var wp,Db;(Db=wp||(wp={})).Ma="default",Db.Cache="cache";class NT{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Jo(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wp.Cache}}class AT{constructor(e){this.key=e}}class CT{constructor(e){this.key=e}}class Zk{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=at(),this.mutatedKeys=at(),this.eu=Hx(e),this.tu=new Ho(this.eu)}get nu(){return this.Za}ru(e,n){const a=n?n.iu:new Rb,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,T)=>{const E=o.get(b),P=Td(this.query,T)?T:null,O=!!E&&this.mutatedKeys.has(E.key),D=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let V=!1;E&&P?E.data.isEqual(P.data)?O!==D&&(a.track({type:3,doc:P}),V=!0):this.su(E,P)||(a.track({type:2,doc:P}),V=!0,(g&&this.eu(P,g)>0||y&&this.eu(P,y)<0)&&(p=!0)):!E&&P?(a.track({type:0,doc:P}),V=!0):E&&!P&&(a.track({type:1,doc:E}),V=!0,(g||y)&&(p=!0)),V&&(P?(d=d.add(P),u=D?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),a.track({type:1,doc:b})}return{tu:d,iu:a,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,T)=>(function(P,O){const D=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Vt:V})}};return D(P)-D(O)})(b.type,T.type)||this.eu(b.doc,T.doc))),this.ou(a),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new Jo(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=at(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const n=[];return e.forEach((a=>{this.Ya.has(a)||n.push(new CT(a))})),this.Ya.forEach((a=>{e.has(a)||n.push(new AT(a))})),n}cu(e){this.Za=e.ks,this.Ya=at();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Sg="SyncEngine";class eD{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class tD{constructor(e){this.key=e,this.hu=!1}}class nD{constructor(e,n,a,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Hr((p=>Fx(p)),xd),this.Iu=new Map,this.Eu=new Set,this.Ru=new qt(Ue.comparator),this.Au=new Map,this.Vu=new mg,this.du={},this.mu=new Map,this.fu=Xo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sD(i,e,n=!0){const a=MT(i);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await jT(a,e,n,!0),o}async function iD(i,e){const n=MT(i);await jT(n,e,!0,!1)}async function jT(i,e,n,a){const o=await Ek(i.localStore,xi(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let p;return a&&(p=await aD(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&vT(i.remoteStore,o),p}async function aD(i,e,n,a,o){i.pu=(T,E,P)=>(async function(D,V,H,F){let ne=V.view.ru(H);ne.Ss&&(ne=await wb(D.localStore,V.query,!1).then((({documents:k})=>V.view.ru(k,ne))));const ce=F&&F.targetChanges.get(V.targetId),ue=F&&F.targetMismatches.get(V.targetId)!=null,me=V.view.applyChanges(ne,D.isPrimaryClient,ce,ue);return Mb(D,V.targetId,me.au),me.snapshot})(i,T,E,P);const u=await wb(i.localStore,e,!0),d=new Zk(e,u.ks),p=d.ru(u.documents),g=Kc.createSynthesizedTargetChangeForCurrentChange(n,a&&i.onlineState!=="Offline",o),y=d.applyChanges(p,i.isPrimaryClient,g);Mb(i,n,y.au);const b=new eD(e,n,d);return i.Tu.set(e,b),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function rD(i,e,n){const a=Ye(i),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((d=>!xd(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Tp(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&vg(a.remoteStore,o.targetId),Sp(a,o.targetId)})).catch(ol)):(Sp(a,o.targetId),await Tp(a.localStore,o.targetId,!0))}async function oD(i,e){const n=Ye(i),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),vg(n.remoteStore,a.targetId))}async function lD(i,e,n){const a=pD(i);try{const o=await(function(d,p){const g=Ye(d),y=Me.now(),b=p.reduce(((P,O)=>P.add(O.key)),at());let T,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let O=ia(),D=at();return g.xs.getEntries(P,b).next((V=>{O=V,O.forEach(((H,F)=>{F.isValidDocument()||(D=D.add(H))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,O))).next((V=>{T=V;const H=[];for(const F of p){const ne=TR(F,T.get(F.key).overlayedDocument);ne!=null&&H.push(new rr(F.key,ne,Ox(ne.value.mapValue),Ms.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,H,p)})).next((V=>{E=V;const H=V.applyToLocalDocumentSet(T,D);return g.documentOverlayCache.saveOverlays(P,V.batchId,H)}))})).then((()=>({batchId:E.batchId,changes:Gx(T)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new qt(it)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(a,o.batchId,n),await Xc(a,o.changes),await Cd(a.remoteStore)}catch(o){const u=Eg(o,"Failed to persist write");n.reject(u)}}async function RT(i,e){const n=Ye(i);try{const a=await bk(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(_t(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?_t(d.hu,14607):o.removedDocuments.size>0&&(_t(d.hu,42227),d.hu=!1))})),await Xc(n,a,e)}catch(a){await ol(a)}}function Ib(i,e,n){const a=Ye(i);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Ye(d);g.onlineState=p;let y=!1;g.queries.forEach(((b,T)=>{for(const E of T.ba)E.va(p)&&(y=!0)})),y&&wg(g)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function cD(i,e,n){const a=Ye(i);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let d=new qt(Ue.comparator);d=d.insert(u,On.newNoDocument(u,He.min()));const p=at().add(u),g=new Sd(He.min(),new Map,new qt(it),d,p);await RT(a,g),a.Ru=a.Ru.remove(u),a.Au.delete(e),Ng(a)}else await Tp(a.localStore,e,!1).then((()=>Sp(a,e,n))).catch(ol)}async function uD(i,e){const n=Ye(i),a=e.batch.batchId;try{const o=await _k(n.localStore,e);DT(n,a,null),kT(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await Xc(n,o)}catch(o){await ol(o)}}async function hD(i,e,n){const a=Ye(i);try{const o=await(function(d,p){const g=Ye(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((T=>(_t(T!==null,37113),b=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(a.localStore,e);DT(a,e,n),kT(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await Xc(a,o)}catch(o){await ol(o)}}function kT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function DT(i,e,n){const a=Ye(i);let o=a.du[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function Sp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.Iu.get(e))i.Tu.delete(a),n&&i.Pu.yu(a,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((a=>{i.Vu.containsKey(a)||IT(i,a)}))}function IT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(vg(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),Ng(i))}function Mb(i,e,n){for(const a of n)a instanceof AT?(i.Vu.addReference(a.key,e),dD(i,a)):a instanceof CT?(Re(Sg,"Document no longer in limbo: "+a.key),i.Vu.removeReference(a.key,e),i.Vu.containsKey(a.key)||IT(i,a.key)):Fe(19791,{wu:a})}function dD(i,e){const n=e.key,a=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(a)||(Re(Sg,"New document in limbo: "+n),i.Eu.add(a),Ng(i))}function Ng(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Ue(It.fromString(e)),a=i.fu.next();i.Au.set(a,new tD(n)),i.Ru=i.Ru.insert(n,a),vT(i.remoteStore,new Ga(xi(lg(n.path)),a,"TargetPurposeLimboResolution",vd.ce))}}async function Xc(i,e,n){const a=Ye(i),o=[],u=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((p,g)=>{d.push(a.pu(g,e,n).then((y=>{if((y||n)&&a.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;a.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){o.push(y);const b=gg.Es(g.targetId,y);u.push(b)}})))})),await Promise.all(d),a.Pu.J_(o),await(async function(g,y){const b=Ye(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ge.forEach(y,(E=>ge.forEach(E.Ts,(P=>b.persistence.referenceDelegate.addReference(T,E.targetId,P))).next((()=>ge.forEach(E.Is,(P=>b.persistence.referenceDelegate.removeReference(T,E.targetId,P)))))))))}catch(T){if(!ll(T))throw T;Re(yg,"Failed to update sequence numbers: "+T)}for(const T of y){const E=T.targetId;if(!T.fromCache){const P=b.vs.get(E),O=P.snapshotVersion,D=P.withLastLimboFreeSnapshotVersion(O);b.vs=b.vs.insert(E,D)}}})(a.localStore,u))}async function fD(i,e){const n=Ye(i);if(!n.currentUser.isEqual(e)){Re(Sg,"User change. New user:",e.toKey());const a=await mT(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ae(de.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Xc(n,a.Ns)}}function mD(i,e){const n=Ye(i),a=n.Au.get(e);if(a&&a.hu)return at().add(a.key);{let o=at();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function MT(i){const e=Ye(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=RT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cD.bind(null,e),e.Pu.J_=Xk.bind(null,e.eventManager),e.Pu.yu=Jk.bind(null,e.eventManager),e}function pD(i){const e=Ye(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hD.bind(null,e),e}class rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return vk(this.persistence,new pk,e.initialUser,this.serializer)}Cu(e){return new fT(pg.Vi,this.serializer)}Du(e){return new Sk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rd.provider={build:()=>new rd};class gD extends rd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_t(this.persistence.referenceDelegate instanceof id,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new ek(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new fT((a=>id.Vi(a,n)),this.serializer)}}class Np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Ib(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=fD.bind(null,this.syncEngine),await Qk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Wk})()}createDatastore(e){const n=Nd(e.databaseInfo.databaseId),a=Rk(e.databaseInfo);return Ok(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,u,d,p){return new Vk(a,o,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ib(this.syncEngine,n,0)),(function(){return Ab.v()?new Ab:new Nk})())}createSyncEngine(e,n){return(function(o,u,d,p,g,y,b){const T=new nD(o,u,d,p,g,y);return b&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=Ye(n);Re(qr,"RemoteStore shutting down."),a.Ea.add(5),await Wc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Np.provider={build:()=>new Np};class OT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const sr="FirestoreClient";class yD{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this._databaseInfo=o,this.user=Mn.UNAUTHENTICATED,this.clientId=ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async d=>{Re(sr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(Re(sr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=Eg(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Qm(i,e){i.asyncQueue.verifyOperationInProgress(),Re(sr,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let a=n.initialUser;i.setCredentialChangeListener((async o=>{a.isEqual(o)||(await mT(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Ob(i,e){i.asyncQueue.verifyOperationInProgress();const n=await vD(i);Re(sr,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((a=>jb(e.remoteStore,a))),i.setAppCheckTokenChangeListener(((a,o)=>jb(e.remoteStore,o))),i._onlineComponents=e}async function vD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Re(sr,"Using user provided OfflineComponentProvider");try{await Qm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===de.FAILED_PRECONDITION||o.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Yo("Error using user provided cache. Falling back to memory cache: "+n),await Qm(i,new rd)}}else Re(sr,"Using default OfflineComponentProvider"),await Qm(i,new gD(void 0));return i._offlineComponents}async function LT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Re(sr,"Using user provided OnlineComponentProvider"),await Ob(i,i._uninitializedComponentsProvider._online)):(Re(sr,"Using default OnlineComponentProvider"),await Ob(i,new Np))),i._onlineComponents}function _D(i){return LT(i).then((e=>e.syncEngine))}async function VT(i){const e=await LT(i),n=e.eventManager;return n.onListen=sD.bind(null,e.syncEngine),n.onUnlisten=rD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oD.bind(null,e.syncEngine),n}function bD(i,e,n={}){const a=new Ji;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const b=new OT({next:E=>{b.Nu(),d.enqueueAndForget((()=>ST(u,T)));const P=E.docs.has(p);!P&&E.fromCache?y.reject(new Ae(de.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&E.fromCache&&g&&g.source==="server"?y.reject(new Ae(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:E=>y.reject(E)}),T=new NT(lg(p.path),b,{includeMetadataChanges:!0,Ka:!0});return wT(u,T)})(await VT(i),i.asyncQueue,e,n,a))),a.promise}function xD(i,e,n={}){const a=new Ji;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const b=new OT({next:E=>{b.Nu(),d.enqueueAndForget((()=>ST(u,T))),E.fromCache&&g.source==="server"?y.reject(new Ae(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:E=>y.reject(E)}),T=new NT(p,b,{includeMetadataChanges:!0,Ka:!0});return wT(u,T)})(await VT(i),i.asyncQueue,e,n,a))),a.promise}function TD(i,e){const n=new Ji;return i.asyncQueue.enqueueAndForget((async()=>lD(await _D(i),e,n))),n.promise}function PT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const ED="ComponentProvider",Lb=new Map;function wD(i,e,n,a,o){return new Hj(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,PT(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}const UT="firestore.googleapis.com",Vb=!0;class Pb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UT,this.ssl=Vb}else this.host=e.host,this.ssl=e.ssl??Vb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JR)throw new Ae(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ij("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PT(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ae(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ae(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ae(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jd{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Ej;switch(a.type){case"firstParty":return new Aj(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ae(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=Lb.get(n);a&&(Re(ED,"Removing Datastore"),Lb.delete(n),a.terminate())})(this),Promise.resolve()}}function SD(i,e,n,a={}){i=Xs(i,jd);const o=sl(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;o&&(A1(`https://${p}`),C1("Firestore",!0)),u.host!==UT&&u.host!==p&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:a};if(!Vr(g,d)&&(i._setSettings(g),a.mockUserToken)){let y,b;if(typeof a.mockUserToken=="string")y=a.mockUserToken,b=Mn.MOCK_USER;else{y=M2(a.mockUserToken,i._app?.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new Ae(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Mn(T)}i._authCredentials=new wj(new Ex(y,b))}}class Gr{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Gr(this.firestore,e,this._query)}}class Kt{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Yc(n,Kt._jsonSchema))return new Kt(e,a||null,new Ue(It.fromString(n.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:on("string",Kt._jsonSchemaVersion),referencePath:on("string")};class Xa extends Gr{constructor(e,n,a){super(e,n,lg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Ue(e))}withConverter(e){return new Xa(this.firestore,e,this._path)}}function ft(i,e,...n){if(i=dn(i),wx("collection","path",e),i instanceof jd){const a=It.fromString(e,...n);return X_(a),new Xa(i,null,a)}{if(!(i instanceof Kt||i instanceof Xa))throw new Ae(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(It.fromString(e,...n));return X_(a),new Xa(i.firestore,null,a)}}function Je(i,e,...n){if(i=dn(i),arguments.length===1&&(e=ng.newId()),wx("doc","path",e),i instanceof jd){const a=It.fromString(e,...n);return W_(a),new Kt(i,null,new Ue(a))}{if(!(i instanceof Kt||i instanceof Xa))throw new Ae(de.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(It.fromString(e,...n));return W_(a),new Kt(i.firestore,i instanceof Xa?i.converter:null,new Ue(a))}}const Ub="AsyncQueue";class Bb{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gT(this,"async_queue_retry"),this._c=()=>{const a=Ym();a&&Re(Ub,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=Ym();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ym();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ji;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ll(e))throw e;Re(Ub,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,sa("INTERNAL UNHANDLED ERROR: ",zb(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Tg.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Fe(47125,{Pc:zb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function zb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Yr extends jd{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new Bb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bb(e),this._firestoreClient=void 0,await e}}}function ND(i,e){const n=typeof i=="object"?i:k1(),a=typeof i=="string"?i:Jh,o=Fp(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=D2("firestore");u&&SD(o,...u)}return o}function Ag(i){if(i._terminated)throw new Ae(de.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||AD(i),i._firestoreClient}function AD(i){const e=i._freezeSettings(),n=wD(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new yD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ds(jn.fromBase64String(e))}catch(n){throw new Ae(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ds(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ds._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yc(e,Ds._jsonSchema))return Ds.fromBase64String(e.bytes)}}Ds._jsonSchemaVersion="firestore/bytes/1.0",Ds._jsonSchema={type:on("string",Ds._jsonSchemaVersion),bytes:on("string")};class Cg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jg{constructor(e){this._methodName=e}}class Ei{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ei._jsonSchemaVersion}}static fromJSON(e){if(Yc(e,Ei._jsonSchema))return new Ei(e.latitude,e.longitude)}}Ei._jsonSchemaVersion="firestore/geoPoint/1.0",Ei._jsonSchema={type:on("string",Ei._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};class Ys{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ys._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yc(e,Ys._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ys(e.vectorValues);throw new Ae(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ys._jsonSchemaVersion="firestore/vectorValue/1.0",Ys._jsonSchema={type:on("string",Ys._jsonSchemaVersion),vectorValues:on("object")};const CD=/^__.*__$/;class jD{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qc(e,this.data,n,this.fieldTransforms)}}class BT{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{dataSource:i})}}class Rg{constructor(e,n,a,o,u,d){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Rg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return od(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(zT(this.dataSource)&&CD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class RD{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Nd(e)}createContext(e,n,a,o=!1){return new Rg({dataSource:e,methodName:n,targetDoc:a,path:Cn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rd(i){const e=i._freezeSettings(),n=Nd(i._databaseId);return new RD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function qT(i,e,n,a,o,u={}){const d=i.createContext(u.merge||u.mergeFields?2:0,e,n,o);kg("Data must be an object, but it was:",d,a);const p=FT(a,d);let g,y;if(u.merge)g=new ms(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const T of u.mergeFields){const E=Fr(e,T,n);if(!d.contains(E))throw new Ae(de.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);GT(b,E)||b.push(E)}g=new ms(b),y=d.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=d.fieldTransforms;return new jD(new es(p),g,y)}class kd extends jg{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}function kD(i,e,n,a){const o=i.createContext(1,e,n);kg("Data must be an object, but it was:",o,a);const u=[],d=es.empty();ar(a,((g,y)=>{const b=$T(e,g,n);y=dn(y);const T=o.childContextForFieldPath(b);if(y instanceof kd)u.push(b);else{const E=Jc(y,T);E!=null&&(u.push(b),d.set(b,E))}}));const p=new ms(u);return new BT(d,p,o.fieldTransforms)}function DD(i,e,n,a,o,u){const d=i.createContext(1,e,n),p=[Fr(e,a,n)],g=[o];if(u.length%2!=0)throw new Ae(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<u.length;E+=2)p.push(Fr(e,u[E])),g.push(u[E+1]);const y=[],b=es.empty();for(let E=p.length-1;E>=0;--E)if(!GT(y,p[E])){const P=p[E];let O=g[E];O=dn(O);const D=d.childContextForFieldPath(P);if(O instanceof kd)y.push(P);else{const V=Jc(O,D);V!=null&&(y.push(P),b.set(P,V))}}const T=new ms(y);return new BT(b,T,d.fieldTransforms)}function ID(i,e,n,a=!1){return Jc(n,i.createContext(a?4:3,e))}function Jc(i,e){if(HT(i=dn(i)))return kg("Unsupported field value:",e,i),FT(i,e);if(i instanceof jg)return(function(a,o){if(!zT(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const u=[];let d=0;for(const p of a){let g=Jc(p,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(i,e)}return(function(a,o){if((a=dn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return gR(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=Me.fromDate(a);return{timestampValue:sd(o.serializer,u)}}if(a instanceof Me){const u=new Me(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:sd(o.serializer,u)}}if(a instanceof Ei)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Ds)return{bytesValue:iT(o.serializer,a._byteString)};if(a instanceof Kt){const u=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(u))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:fg(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Ys)return(function(d,p){const g=d instanceof Ys?d.toArray():d;return{mapValue:{fields:{[Ix]:{stringValue:Mx},[Zh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return cg(p.serializer,b)}))}}}}}})(a,o);if(hT(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${yd(a)}`)})(i,e)}function FT(i,e){const n={};return Ax(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ar(i,((a,o)=>{const u=Jc(o,e.childContextForField(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function HT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Me||i instanceof Ei||i instanceof Ds||i instanceof Kt||i instanceof jg||i instanceof Ys||hT(i))}function kg(i,e,n){if(!HT(n)||!Sx(n)){const a=yd(n);throw a==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+a)}}function Fr(i,e,n){if((e=dn(e))instanceof Cg)return e._internalPath;if(typeof e=="string")return $T(i,e);throw od("Field path arguments must be of type string or ",i,!1,void 0,n)}const MD=new RegExp("[~\\*/\\[\\]]");function $T(i,e,n){if(e.search(MD)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Cg(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function od(i,e,n,a,o){const u=a&&!a.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${a}`),d&&(g+=` in document ${o}`),g+=")"),new Ae(de.INVALID_ARGUMENT,p+i+g)}function GT(i,e){return i.some((n=>n.isEqual(e)))}class OD{convertValue(e,n="none"){switch(tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return ar(e,((o,u)=>{a[o]=this.convertValue(u,n)})),a}convertVectorValue(e){const n=e.fields?.[Zh].arrayValue?.values?.map((a=>Qt(a.doubleValue)));return new Ys(n)}convertGeoPoint(e){return new Ei(Qt(e.latitude),Qt(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=bd(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){const n=Za(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=It.fromString(e);_t(uT(a),9688,{name:e});const o=new Ic(a.get(1),a.get(3)),u=new Ue(a.popFirst(5));return o.isEqual(n)||sa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class YT extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}const qb="@firebase/firestore",Fb="4.10.0";class QT{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Fr("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LD extends QT{data(){return super.data()}}function VD(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ae(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dg{}class KT extends Dg{}function Qs(i,e,...n){let a=[];e instanceof Dg&&a.push(e),a=a.concat(n),(function(u){const d=u.filter((g=>g instanceof Ig)).length,p=u.filter((g=>g instanceof Dd)).length;if(d>1||d>0&&p>0)throw new Ae(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)i=o._apply(i);return i}class Dd extends KT{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Dd(e,n,a)}_apply(e){const n=this._parse(e);return WT(e._query,n),new Gr(e.firestore,e.converter,gp(e._query,n))}_parse(e){const n=Rd(e.firestore);return(function(u,d,p,g,y,b,T){let E;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ae(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){$b(T,b);const O=[];for(const D of T)O.push(Hb(g,u,D));E={arrayValue:{values:O}}}else E=Hb(g,u,T)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||$b(T,b),E=ID(p,d,T,b==="in"||b==="not-in");return rn.create(y,b,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Is(i,e,n){const a=e,o=Fr("where",i);return Dd._create(o,a,n)}class Ig extends Dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ig(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Js.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const p=u.getFlattenedFilters();for(const g of p)WT(d,g),d=gp(d,g)})(e._query,n),new Gr(e.firestore,e.converter,gp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mg extends KT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mg(e,n)}_apply(e){const n=(function(o,u,d){if(o.startAt!==null)throw new Ae(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ae(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oc(u,d)})(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,lR(e._query,n))}}function PD(i,e="asc"){const n=e,a=Fr("orderBy",i);return Mg._create(a,n)}function Hb(i,e,n){if(typeof(n=dn(n))=="string"){if(n==="")throw new Ae(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qx(e)&&n.indexOf("/")!==-1)throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(It.fromString(n));if(!Ue.isDocumentKey(a))throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return ab(i,new Ue(a))}if(n instanceof Kt)return ab(i,n._key);throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yd(n)}.`)}function $b(i,e){if(!Array.isArray(i)||i.length===0)throw new Ae(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WT(i,e){const n=(function(o,u){for(const d of o)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ae(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function XT(i,e,n){let a;return a=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,a}class bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lr extends QT{constructor(e,n,a,o,u,d){super(e,n,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(Fr("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Lr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Lr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lr._jsonSchema={type:on("string",Lr._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class Ph extends Lr{data(e={}){return super.data(e)}}class $o{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new bc(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new Ph(this._firestore,this._userDataWriter,a.key,a,new bc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new Ph(o._firestore,o._userDataWriter,p.doc.key,p.doc,new bc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new Ph(o._firestore,o._userDataWriter,p.doc.key,p.doc,new bc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),b=d.indexOf(p.doc.key)),{type:UD(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function UD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:i})}}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:on("string",$o._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};function Zo(i){i=Xs(i,Kt);const e=Xs(i.firestore,Yr),n=Ag(e);return bD(n,i._key).then((a=>BD(e,i,a)))}function Dt(i){i=Xs(i,Gr);const e=Xs(i.firestore,Yr),n=Ag(e),a=new YT(e);return VD(i._query),xD(n,i._query).then((o=>new $o(e,a,i,o)))}function Mr(i,e,n){i=Xs(i,Kt);const a=Xs(i.firestore,Yr),o=XT(i.converter,e,n),u=Rd(a);return Id(a,[qT(u,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Ms.none())])}function an(i,e,n,...a){i=Xs(i,Kt);const o=Xs(i.firestore,Yr),u=Rd(o);let d;return d=typeof(e=dn(e))=="string"||e instanceof Cg?DD(u,"updateDoc",i._key,e,n,a):kD(u,"updateDoc",i._key,e),Id(o,[d.toMutation(i._key,Ms.exists(!0))])}function Zi(i){return Id(Xs(i.firestore,Yr),[new ug(i._key,Ms.none())])}function Uo(i,e){const n=Xs(i.firestore,Yr),a=Je(i),o=XT(i.converter,e),u=Rd(i.firestore);return Id(n,[qT(u,"addDoc",a._key,o,i.converter!==null,{}).toMutation(a._key,Ms.exists(!1))]).then((()=>a))}function Id(i,e){const n=Ag(i);return TD(n,e)}function BD(i,e,n){const a=n.docs.get(e._key),o=new YT(i);return new Lr(i,o,e._key,a,new bc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){Tj(il),Go(new Pr("firestore",((a,{instanceIdentifier:o,options:u})=>{const d=a.getProvider("app").getImmediate(),p=new Yr(new Sj(a.getProvider("auth-internal")),new Cj(d,a.getProvider("app-check-internal")),$j(d,o),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Ka(qb,Fb,e),Ka(qb,Fb,"esm2020")})();var zD="firebase",qD="12.8.0";Ka(zD,qD,"app");const JT={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},ZT=Hp(JT),fc=px(ZT),Ce=ND(ZT),FD=Hp(JT,"secondary"),ld=px(FD),HD="EYdciKDOi3UYBLk1u8hHams5tmO2",eE=C.createContext();function gs(){return C.useContext(eE)}function $D({children:i}){const[e,n]=C.useState(null),[a,o]=C.useState(!1),[u,d]=C.useState(!1),[p,g]=C.useState(null),[y,b]=C.useState(!0);C.useEffect(()=>hC(fc,async V=>{if(n(V),V)if(V.uid===HD)o(!0),d(!1),g(null);else{o(!1);try{const H=Qs(ft(Ce,"clients"),Is("uid","==",V.uid)),F=await Dt(H);if(F.empty)d(!1),g(null);else{const ne=F.docs[0];d(!0),g({id:ne.id,...ne.data()})}}catch(H){console.error("Error fetching client data:",H),d(!1),g(null)}}else o(!1),d(!1),g(null);b(!1)}),[]);const O={currentUser:e,isAdmin:a,isClient:u,clientData:p,login:async(D,V,H=!0)=>(await lC(fc,H?ox:Jp),await oC(fc,D,V)),logout:()=>Xp(fc),resetPassword:D=>rC(fc,D),loading:y};return l.jsx(eE.Provider,{value:O,children:i})}const tE=C.createContext();function hl(){return C.useContext(tE)}function GD({children:i}){const[e,n]=C.useState(()=>{const u=localStorage.getItem("theme");return u?u==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});C.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]);const o={isDark:e,toggleTheme:()=>n(!e)};return l.jsx(tE.Provider,{value:o,children:i})}function YD(){const[i,e]=C.useState(""),[n,a]=C.useState(""),[o,u]=C.useState(!0),[d,p]=C.useState(""),[g,y]=C.useState(!1),[b,T]=C.useState(!1),[E,P]=C.useState(!1),{login:O,resetPassword:D,currentUser:V,isAdmin:H,isClient:F,clientData:ne,loading:ce}=gs(),ue=Vn();if(C.useEffect(()=>{if(!ce&&V){if(H)ue("/dashboard");else if(F){const N=ne?.clientType;ue(N==="core_buddy"?"/client/core-buddy":N==="circuit_vip"||N==="circuit_dropin"?"/client/circuit":"/client")}}},[ce,V,H,F,ne,ue]),ce)return l.jsx("div",{className:"login-container",children:l.jsx("div",{className:"login-loading",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"loading-logo"})})});const me=async N=>{N.preventDefault(),p(""),y(!0);try{await O(i,n,o)}catch(R){p(R.message||"Failed to log in"),y(!1)}},k=async N=>{if(N.preventDefault(),p(""),!i.trim()){p("Please enter your email address");return}y(!0);try{await D(i.trim()),P(!0)}catch(R){R.code==="auth/user-not-found"?p("No account found with this email"):p(R.message||"Failed to send reset email")}y(!1)};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-card",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"login-logo"}),l.jsx("p",{children:b?"Reset Password":"Client Portal"})]}),d&&l.jsx("div",{className:"error-message",children:d}),E?l.jsxs("div",{className:"reset-sent",children:[l.jsx("div",{className:"reset-sent-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsx("p",{children:"Reset email sent!"}),l.jsx("span",{children:"Check your inbox for a password reset link"}),l.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{T(!1),P(!1),p("")},children:"Back to Log In"})]}):b?l.jsxs("form",{onSubmit:k,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{type:"email",id:"email",value:i,onChange:N=>e(N.target.value),placeholder:"Enter your email",required:!0})]}),l.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),l.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!1),p("")},children:"Back to Log In"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:me,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{type:"email",id:"email",value:i,onChange:N=>e(N.target.value),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsx("input",{type:"password",id:"password",value:n,onChange:N=>a(N.target.value),required:!0})]}),l.jsx("div",{className:"remember-me",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:o,onChange:N=>u(N.target.checked)}),l.jsx("span",{children:"Remember me"})]})}),l.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),l.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!0),p("")},children:"Forgot password?"})]}),l.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function QD(){const[i,e]=C.useState([]),[n,a]=C.useState([]),[o,u]=C.useState(!0),[d,p]=C.useState(null),[g,y]=C.useState({}),[b,T]=C.useState(null),[E,P]=C.useState(""),[O,D]=C.useState("all");C.useEffect(()=>{V()},[]);const V=async()=>{try{const[w,G]=await Promise.all([Dt(Qs(ft(Ce,"clients"),PD("createdAt","desc"))),Dt(ft(Ce,"sessions"))]),Y=w.docs.map(I=>({id:I.id,...I.data()})),X=G.docs.map(I=>({id:I.id,...I.data()}));e(Y),a(X)}catch(w){console.error("Error fetching data:",w)}u(!1)},H=w=>{const G=new Date,Y=G.getFullYear(),X=(G.getMonth()+1).toString().padStart(2,"0"),I=G.getDate().toString().padStart(2,"0"),K=`${Y}-${X}-${I}`,se=`${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`;return n.filter(ve=>ve.clientId!==w?!1:ve.date<K||ve.date===K&&ve.time<se).length},F=w=>{const G=H(w.id);return(w.totalSessions||0)-G},ne=w=>{const G=new Date,Y=G.getFullYear(),X=(G.getMonth()+1).toString().padStart(2,"0"),I=G.getDate().toString().padStart(2,"0"),K=`${Y}-${X}-${I}`,se=`${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`;return n.filter(ve=>ve.clientId!==w?!1:ve.date>K||ve.date===K&&ve.time>=se).length},ce=w=>w?(w.toDate?w.toDate():new Date(w)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",ue=async(w,G)=>{if(window.confirm(`Are you sure you want to delete ${G}? This will also delete all their booked sessions.`))try{const X=n.filter(I=>I.clientId===w).map(I=>Zi(Je(Ce,"sessions",I.id)));await Promise.all(X),await Zi(Je(Ce,"clients",w)),e(i.filter(I=>I.id!==w)),a(n.filter(I=>I.clientId!==w))}catch(Y){console.error("Error deleting client:",Y),alert("Failed to delete client")}},me=w=>{if(!w)return"";const G=w.toDate?w.toDate():new Date(w),Y=G.getFullYear(),X=(G.getMonth()+1).toString().padStart(2,"0"),I=G.getDate().toString().padStart(2,"0");return`${Y}-${X}-${I}`},k=w=>{p(w.id),y({name:w.name,email:w.email,password:"",clientType:w.clientType||"block",weeksInBlock:w.weeksInBlock||"",totalSessions:w.totalSessions||"",sessionsRemaining:w.sessionsRemaining,sessionDuration:w.sessionDuration||45,startDate:me(w.startDate),endDate:me(w.endDate),status:w.status,hasPortalAccess:!!w.uid,circuitAccess:!!w.circuitAccess,coreBuddyAccess:!!w.coreBuddyAccess})},N=w=>{const{name:G,value:Y}=w.target;if(y(X=>({...X,[G]:Y})),G==="startDate"||G==="weeksInBlock"){const X=G==="startDate"?Y:g.startDate,I=parseInt(G==="weeksInBlock"?Y:g.weeksInBlock);if(X&&I>0){const K=new Date(X),se=new Date(K);se.setDate(se.getDate()+I*7);const ve=se.getFullYear(),ke=(se.getMonth()+1).toString().padStart(2,"0"),Be=se.getDate().toString().padStart(2,"0");y(pe=>({...pe,[G]:Y,endDate:`${ve}-${ke}-${Be}`}))}}},R=async w=>{try{const G=i.find(K=>K.id===w);let Y=G?.uid;if(g.password&&g.password.length>=6&&!G?.uid)try{const K=await ix(ld,g.email.trim().toLowerCase(),g.password);await Xp(ld),Y=K.user.uid}catch(K){if(console.error("Error creating auth account:",K),K.code==="auth/email-already-in-use")alert("This email already has a portal account. Password not changed.");else if(K.code==="auth/weak-password"){alert("Password must be at least 6 characters.");return}else{alert("Failed to create portal account: "+K.message);return}}const X=g.clientType==="block",I={name:g.name.trim(),email:g.email.trim().toLowerCase(),clientType:g.clientType,status:g.status,coreBuddyAccess:g.coreBuddyAccess};if(X)I.weeksInBlock=parseInt(g.weeksInBlock)||0,I.totalSessions=parseInt(g.totalSessions)||0,I.sessionDuration=parseInt(g.sessionDuration),I.circuitAccess=g.circuitAccess,g.startDate&&(I.startDate=Me.fromDate(new Date(g.startDate))),g.endDate&&(I.endDate=Me.fromDate(new Date(g.endDate)));else{const K=i.find(se=>se.id===w);K?.circuitStrikes===void 0&&(I.circuitStrikes=0),K?.circuitBanUntil===void 0&&(I.circuitBanUntil=null)}Y&&!G?.uid&&(I.uid=Y),await an(Je(Ce,"clients",w),I),e(i.map(K=>K.id===w?{...K,...g,uid:Y||K.uid,weeksInBlock:parseInt(g.weeksInBlock),totalSessions:parseInt(g.totalSessions),sessionDuration:parseInt(g.sessionDuration),startDate:Me.fromDate(new Date(g.startDate)),endDate:Me.fromDate(new Date(g.endDate))}:K)),p(null),Y&&!G?.uid&&alert("Portal access created! Client can now log in.")}catch(G){console.error("Error updating client:",G),alert("Failed to update client")}},z=async w=>{try{const G=i.find(Y=>Y.id===w)?.status==="archived"?"active":"archived";await an(Je(Ce,"clients",w),{status:G}),e(i.map(Y=>Y.id===w?{...Y,status:G}:Y))}catch(G){console.error("Error archiving client:",G),alert("Failed to update client status")}};if(o)return l.jsx("div",{className:"client-list-loading",children:"Loading clients..."});if(i.length===0)return l.jsxs("div",{className:"client-list-empty",children:[l.jsx("p",{children:"No clients yet"}),l.jsx("span",{children:"Add your first client to get started"})]});const L=w=>w.clientType==="circuit_vip"?"VIP":w.clientType==="circuit_dropin"?"Drop-in":w.clientType==="core_buddy"?"Core Buddy":"Block",q=i.filter(w=>w.name?.toLowerCase().includes(E.toLowerCase())||w.email?.toLowerCase().includes(E.toLowerCase())),j=w=>w.clientType==="circuit_vip"||w.clientType==="circuit_dropin",Ee=w=>w.clientType==="core_buddy",je=q.filter(w=>!j(w)&&!Ee(w)),B=q.filter(w=>j(w)),re=q.filter(w=>Ee(w)),be=O==="block"?je:O==="circuit"?B:O==="core_buddy"?re:q,_e=w=>{d||T(G=>G===w?null:w)},Ne=w=>{const G=b===w.id,Y=d===w.id,X=!w.clientType||w.clientType==="block";return l.jsxs("div",{className:`client-card ${w.status==="archived"?"archived":""} ${G||Y?"expanded":"collapsed"}`,children:[l.jsxs("div",{className:"client-name-row",onClick:()=>_e(w.id),children:[l.jsxs("div",{className:"client-name-row-left",children:[l.jsx("span",{className:"client-name-initial",children:w.name?.charAt(0)?.toUpperCase()}),l.jsxs("div",{className:"client-name-text",children:[l.jsx("h3",{children:w.name}),l.jsx("span",{className:"client-name-sub",children:X?`${F(w)}/${w.totalSessions||0} sessions`:L(w)})]})]}),l.jsxs("div",{className:"client-name-row-right",children:[(w.clientType==="circuit_vip"||w.clientType==="circuit_dropin"||w.clientType==="core_buddy")&&l.jsx("span",{className:`client-type-badge ${w.clientType==="circuit_vip"?"vip":w.clientType==="core_buddy"?"core-buddy":"dropin"}`,children:L(w)}),l.jsx("span",{className:`status-dot ${w.status}`}),l.jsx("svg",{className:`client-chevron ${G||Y?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M6 9l6 6 6-6"})})]})]}),(G||Y)&&l.jsx("div",{className:"client-expand-panel",children:Y?l.jsxs("div",{className:"edit-form",children:[l.jsx("div",{className:"edit-type-toggle",children:[{value:"block",label:"Block"},{value:"circuit_vip",label:"VIP"},{value:"circuit_dropin",label:"Drop-in"},{value:"core_buddy",label:"Core Buddy"}].map(I=>l.jsx("button",{type:"button",className:`edit-type-btn ${g.clientType===I.value?"active":""}`,onClick:()=>y(K=>({...K,clientType:I.value})),children:I.label},I.value))}),l.jsxs("div",{className:"edit-row",children:[l.jsx("input",{type:"text",name:"name",value:g.name,onChange:N,placeholder:"Name"}),l.jsx("input",{type:"email",name:"email",value:g.email,onChange:N,placeholder:"Email"})]}),g.clientType==="block"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"edit-row",children:[l.jsx("input",{type:"number",name:"weeksInBlock",value:g.weeksInBlock,onChange:N,placeholder:"Weeks",min:"1"}),l.jsx("input",{type:"number",name:"totalSessions",value:g.totalSessions,onChange:N,placeholder:"Total Sessions",min:"1"}),l.jsxs("select",{name:"sessionDuration",value:g.sessionDuration,onChange:N,children:[l.jsx("option",{value:"30",children:"30 min"}),l.jsx("option",{value:"45",children:"45 min"})]})]}),l.jsxs("div",{className:"edit-row",children:[l.jsx("input",{type:"date",name:"startDate",value:g.startDate,onChange:N}),l.jsx("input",{type:"date",name:"endDate",value:g.endDate,onChange:N})]})]}),l.jsx("div",{className:"edit-row password-row",children:g.hasPortalAccess?l.jsx("div",{className:"portal-status has-access",children:"Has portal access"}):l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"text",name:"password",value:g.password,onChange:N,placeholder:"Set portal password (min 6 chars)"}),l.jsx("span",{className:"password-hint",children:"Set password to enable client portal"})]})}),g.clientType==="block"&&l.jsx("div",{className:"edit-row circuit-row",children:l.jsxs("label",{className:"circuit-access-toggle",children:[l.jsx("input",{type:"checkbox",checked:g.circuitAccess,onChange:I=>y(K=>({...K,circuitAccess:I.target.checked}))}),l.jsx("span",{children:"Circuit Class Access"})]})}),g.clientType!=="core_buddy"&&l.jsx("div",{className:"edit-row circuit-row",children:l.jsxs("label",{className:"circuit-access-toggle",children:[l.jsx("input",{type:"checkbox",checked:g.coreBuddyAccess,onChange:I=>y(K=>({...K,coreBuddyAccess:I.target.checked}))}),l.jsx("span",{children:"Core Buddy Access"})]})}),l.jsxs("div",{className:"edit-actions",children:[l.jsx("button",{className:"save-edit-btn",onClick:()=>R(w.id),children:"Save"}),l.jsx("button",{className:"cancel-edit-btn",onClick:()=>{p(null)},children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"client-expand-info",children:[l.jsx("span",{className:"client-email",children:w.email}),l.jsx("span",{className:`status-badge ${w.status}`,children:w.status})]}),X?l.jsxs("div",{className:"client-details",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Block"}),l.jsxs("span",{className:"detail-value",children:[w.weeksInBlock," weeks"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Sessions"}),l.jsxs("span",{className:"detail-value",children:[F(w)," / ",w.totalSessions," remaining"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Booked"}),l.jsxs("span",{className:"detail-value",children:[ne(w.id)," sessions"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Duration"}),l.jsxs("span",{className:"detail-value",children:[w.sessionDuration||45," min"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Start"}),l.jsx("span",{className:"detail-value",children:ce(w.startDate)})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"End"}),l.jsx("span",{className:"detail-value",children:ce(w.endDate)})]})]}):l.jsxs("div",{className:"client-details circuit-details",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Type"}),l.jsx("span",{className:"detail-value",children:w.clientType==="circuit_vip"?"Monthly VIP":"Drop-in"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Strikes"}),l.jsxs("span",{className:"detail-value",children:[w.circuitStrikes||0,"/3"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Joined"}),l.jsx("span",{className:"detail-value",children:ce(w.createdAt)})]})]}),l.jsxs("div",{className:"client-actions",children:[l.jsx("button",{className:"action-btn edit",onClick:I=>{I.stopPropagation(),k(w)},children:"Edit"}),l.jsx("button",{className:"action-btn archive",onClick:I=>{I.stopPropagation(),z(w.id)},children:w.status==="archived"?"Reactivate":"Archive"}),l.jsx("button",{className:"action-btn delete",onClick:I=>{I.stopPropagation(),ue(w.id,w.name)},children:"Delete"})]})]})})]},w.id)};return l.jsxs("div",{className:"client-list",children:[l.jsxs("div",{className:"client-search",children:[l.jsxs("svg",{className:"client-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("path",{d:"M21 21l-4.35-4.35"})]}),l.jsx("input",{type:"text",placeholder:"Search clients...",value:E,onChange:w=>P(w.target.value),className:"client-search-input"}),E&&l.jsx("button",{className:"client-search-clear",onClick:()=>P(""),children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),l.jsx("div",{className:"client-type-filter",children:[{value:"all",label:"All",count:q.length},{value:"block",label:"Block",count:je.length},{value:"circuit",label:"Circuit",count:B.length},{value:"core_buddy",label:"Core Buddy",count:re.length}].map(w=>l.jsxs("button",{className:`client-filter-btn ${O===w.value?"active":""}`,onClick:()=>D(w.value),children:[w.label,l.jsx("span",{className:"client-filter-count",children:w.count})]},w.value))}),O==="all"?l.jsxs(l.Fragment,{children:[je.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"client-section-header",children:["Block Members ",l.jsx("span",{children:je.length})]}),je.map(Ne)]}),B.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"client-section-header",children:["Circuit Members ",l.jsx("span",{children:B.length})]}),B.map(Ne)]})]}):l.jsxs(l.Fragment,{children:[be.length===0&&l.jsxs("div",{className:"client-section-empty",children:["No ",O," clients found"]}),be.map(Ne)]})]})}const nE={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},Ap=["monday","tuesday","wednesday","thursday","friday"],KD=["Monday","Tuesday","Wednesday","Thursday","Friday"],WD=["Mon","Tue","Wed","Thu","Fri"],Gb=i=>{const[e,n]=i.split(":"),a=parseInt(e),o=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${n}${o}`},XD=i=>{const e=new Date(i),n=e.getDay(),a=e.getDate()-n+(n===0?-6:1);return e.setDate(a),Ap.map((o,u)=>{const d=new Date(e);return d.setDate(e.getDate()+u),d})},fs=i=>{const e=i.getFullYear(),n=(i.getMonth()+1).toString().padStart(2,"0"),a=i.getDate().toString().padStart(2,"0");return`${e}-${n}-${a}`},Cp=i=>{const[e,n]=i.split(":").map(Number);return e*60+n},cd=(i,e)=>{const n=Cp(i)+e,a=Math.floor(n/60),o=n%60;return`${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},JD=i=>{const e=nE[i];if(!e)return[];const n=[];if(e.morning){let a=e.morning.start;for(;a<e.morning.end;)n.push({time:a,period:"morning"}),a=cd(a,15)}if(e.afternoon){let a=e.afternoon.start;for(;a<e.afternoon.end;)n.push({time:a,period:"afternoon"}),a=cd(a,15)}return n};function ZD(){const[i,e]=C.useState(new Date),[n,a]=C.useState([]),[o,u]=C.useState([]),[d,p]=C.useState([]),[g,y]=C.useState([]),[b,T]=C.useState([]),[E,P]=C.useState(null),[O,D]=C.useState(null),[V,H]=C.useState(!1),[F,ne]=C.useState(!0);C.useEffect(()=>{a(XD(i))},[i]),C.useEffect(()=>{N()},[]);const ce=Y=>{if(P(Y),H(!1),Y.startDate){const X=Y.startDate.toDate?Y.startDate.toDate():new Date(Y.startDate);e(X)}D(null)},ue=Y=>{const X=new Date,I=fs(X),K=`${X.getHours().toString().padStart(2,"0")}:${X.getMinutes().toString().padStart(2,"0")}`;return d.filter(se=>se.clientId!==Y?!1:se.date<I||se.date===I&&se.time<K).length},me=Y=>{const X=ue(Y.id);return(Y.totalSessions||0)-X},k=Y=>{const X=new Date,I=X.getFullYear(),K=(X.getMonth()+1).toString().padStart(2,"0"),se=X.getDate().toString().padStart(2,"0"),ve=`${I}-${K}-${se}`,ke=`${X.getHours().toString().padStart(2,"0")}:${X.getMinutes().toString().padStart(2,"0")}`;return d.filter(Be=>Be.clientId!==Y?!1:Be.date>ve||Be.date===ve&&Be.time>=ke).length},N=async()=>{try{const X=(await Dt(ft(Ce,"clients"))).docs.map(pe=>({id:pe.id,...pe.data()})).filter(pe=>pe.status==="active");u(X);const K=(await Dt(ft(Ce,"sessions"))).docs.map(pe=>({id:pe.id,...pe.data()}));p(K);const ve=(await Dt(ft(Ce,"holidays"))).docs.map(pe=>({id:pe.id,...pe.data()}));y(ve);const Be=(await Dt(ft(Ce,"blockedTimes"))).docs.map(pe=>({id:pe.id,...pe.data()}));T(Be)}catch(Y){console.error("Error fetching data:",Y)}ne(!1)},R=Y=>{const X=new Date(i);X.setDate(X.getDate()+Y*7),e(X),D(null)},z=()=>{e(new Date),D(null)},L=Y=>{const X=fs(Y);return g.some(I=>I.date===X)},q=(Y,X)=>{const I=fs(Y);return b.some(K=>K.date===I&&K.time===X)},j=async(Y,X)=>{const I=fs(Y),K=b.find(se=>se.date===I&&se.time===X);try{if(K)await Zi(Je(Ce,"blockedTimes",K.id)),T(b.filter(se=>se.id!==K.id));else{const se=await Uo(ft(Ce,"blockedTimes"),{date:I,time:X,createdAt:Me.now()});T([...b,{id:se.id,date:I,time:X}])}}catch(se){console.error("Error toggling blocked time:",se),alert("Failed to update time slot")}},Ee=Y=>{const X=fs(Y);return d.filter(I=>I.date===X)},je=(Y,X)=>{const I=fs(Y);return d.find(K=>K.date===I&&K.time===X)},B=(Y,X,I)=>{const K=Ap[Y.getDay()-1];if(!K||L(Y))return!1;const se=Math.ceil(I/15);for(let rt=0;rt<se;rt++){const Oe=cd(X,rt*15);if(q(Y,Oe))return!1}const ve=fs(Y);if(d.find(rt=>rt.date===ve&&rt.time===X))return!1;const Be=cd(X,I),pe=nE[K],ct=pe.morning&&Be<=pe.morning.end,Vt=pe.afternoon&&Be<=pe.afternoon.end,Et=pe.morning&&X>=pe.morning.start&&X<pe.morning.end,wt=pe.afternoon&&X>=pe.afternoon.start&&X<pe.afternoon.end;if(Et&&!ct||wt&&!Vt)return!1;for(const rt of d){if(rt.date!==ve)continue;const Oe=Cp(rt.time),mt=Oe+(rt.duration||45),ot=Cp(X),ht=ot+I;if(ot<mt&&ht>Oe)return!1}return!0},re=async(Y,X)=>{const I=je(Y,X);if(I){if(window.confirm(`Cancel ${I.clientName}'s session at ${Gb(X)}?`))try{await Zi(Je(Ce,"sessions",I.id)),p(d.filter(se=>se.id!==I.id))}catch(se){console.error("Error cancelling session:",se),alert("Failed to cancel session")}return}if(!E){alert("Please select a client first");return}if(!B(Y,X,E.sessionDuration||45)){alert("This slot is not available for this client's session duration");return}if(d.filter(se=>se.clientId===E.id).length>=E.totalSessions){alert(`${E.name} has already booked all ${E.totalSessions} sessions`);return}try{const se=fs(Y),ve={clientId:E.id,clientName:E.name,date:se,time:X,duration:E.sessionDuration||45,createdAt:Me.now()},ke=await Uo(ft(Ce,"sessions"),ve);p([...d,{id:ke.id,...ve}])}catch(se){console.error("Error booking session:",se),alert("Failed to book session")}},be=async()=>{if(!E)return;const Y=E.startDate?.toDate?E.startDate.toDate():new Date(E.startDate),X=E.endDate?.toDate?E.endDate.toDate():new Date(E.endDate),I=d.filter(pe=>pe.clientId!==E.id?!1:n.some(ct=>fs(ct)===pe.date));if(I.length===0){alert("No sessions in current week to repeat. Book some sessions first, then use this button.");return}const K=E.weeksInBlock||Math.ceil((X-Y)/(10080*60*1e3)),se=I.map(pe=>({dayOfWeek:new Date(pe.date).getDay(),time:pe.time}));let ve=[];const ke=d.filter(pe=>pe.clientId===E.id).length;for(let pe=0;pe<K;pe++){const ct=new Date(Y);ct.setDate(ct.getDate()+pe*7);const Vt=new Date(ct),Et=Vt.getDay(),wt=Vt.getDate()-Et+(Et===0?-6:1);Vt.setDate(wt);for(const rt of se){const Oe=new Date(Vt),mt=rt.dayOfWeek===0?6:rt.dayOfWeek-1;Oe.setDate(Vt.getDate()+mt);const ot=fs(Oe);d.some(ht=>ht.clientId===E.id&&ht.date===ot&&ht.time===rt.time)||Oe<Y||Oe>X||g.some(ht=>ht.date===ot)||ve.push({dateKey:ot,time:rt.time,sessionDate:Oe})}}const Be=ke+ve.length;if(Be>E.totalSessions){alert(`This would create ${ve.length} new sessions (${Be} total), but client only has ${E.totalSessions} sessions in their package.

You can still book ${E.totalSessions-ke} more sessions.`);return}if(ve.length===0){alert("All weeks already have sessions booked for this pattern.");return}if(window.confirm(`This will create ${ve.length} new sessions across the block.

(${ke} existing + ${ve.length} new = ${Be} total)

Continue?`))try{const pe=[];for(const ct of ve){const Vt={clientId:E.id,clientName:E.name,date:ct.dateKey,time:ct.time,duration:E.sessionDuration||45,createdAt:Me.now()},Et=await Uo(ft(Ce,"sessions"),Vt);pe.push({id:Et.id,...Vt})}p([...d,...pe]),alert(`Created ${pe.length} new sessions!`)}catch(pe){console.error("Error repeating weekly:",pe),alert("Failed to repeat sessions")}},_e=async Y=>{const X=fs(Y),I=g.find(K=>K.date===X);try{if(I)await Zi(Je(Ce,"holidays",I.id)),y(g.filter(K=>K.id!==I.id));else{const K=await Uo(ft(Ce,"holidays"),{date:X,createdAt:Me.now()});y([...g,{id:K.id,date:X}])}}catch(K){console.error("Error toggling day availability:",K),alert("Failed to update day availability")}};if(F)return l.jsx("div",{className:"calendar-loading",children:"Loading calendar..."});const Ne=n[0],w=n[4],G=Ne&&w?`${Ne.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${w.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return l.jsxs("div",{className:"calendar",children:[l.jsxs("div",{className:"calendar-header",children:[l.jsxs("div",{className:"calendar-nav",children:[l.jsx("button",{onClick:()=>R(-1),children:""}),l.jsx("button",{onClick:z,children:"Today"}),l.jsx("button",{onClick:()=>R(1),children:""})]}),l.jsx("h3",{children:G})]}),l.jsxs("div",{className:"client-selector",children:[l.jsx("span",{className:"selector-label",children:"Booking for:"}),E?l.jsxs("div",{className:"selected-client",children:[l.jsxs("div",{className:"selected-info",children:[l.jsx("strong",{children:E.name}),l.jsxs("span",{children:[E.sessionDuration||45,"min  ",me(E),"/",E.totalSessions," remaining"]}),l.jsxs("span",{className:"booked-info",children:[k(E.id)," booked"]})]}),l.jsx("button",{onClick:()=>P(null),children:"Change"})]}):l.jsx("button",{className:"select-client-btn",onClick:()=>H(!0),children:"Select Client"})]}),E&&l.jsxs("div",{className:"repeat-weekly-section",children:[l.jsx("button",{className:"repeat-weekly-btn",onClick:be,children:"Repeat This Week's Schedule For All Weeks"}),l.jsx("span",{className:"repeat-hint",children:"Copies current week's sessions to all weeks in block"})]}),l.jsx("div",{className:"day-cards",children:n.map((Y,X)=>{const I=Ee(Y),K=fs(Y)===fs(new Date),se=L(Y);return l.jsxs("div",{className:`day-card ${O===X?"selected":""} ${K?"today":""} ${se?"holiday":""}`,onClick:()=>D(O===X?null:X),children:[l.jsxs("div",{className:"day-card-header",children:[l.jsx("span",{className:"day-name",children:WD[X]}),l.jsx("span",{className:"day-date",children:Y.getDate()})]}),se?l.jsx("div",{className:"day-card-status holiday",children:"Unavailable"}):l.jsxs("div",{className:"day-card-status",children:[I.length," session",I.length!==1?"s":""]})]},X)})}),O!==null&&n[O]&&l.jsxs("div",{className:"time-panel",children:[l.jsxs("div",{className:"time-panel-header",children:[l.jsxs("h4",{children:[KD[O]," ",n[O].getDate()]}),l.jsx("button",{className:"close-panel",onClick:()=>D(null),children:""})]}),l.jsx("div",{className:"availability-toggle",children:l.jsx("button",{className:`toggle-availability-btn ${L(n[O])?"unavailable":"available"}`,onClick:()=>_e(n[O]),children:L(n[O])?"Mark Day Available":"Mark Day Unavailable"})}),L(n[O])?l.jsxs("div",{className:"day-unavailable-message",children:[l.jsx("p",{children:"This day is marked as unavailable"}),l.jsx("span",{children:"Tap the button above to make it available again"})]}):l.jsx("div",{className:"time-slots",children:JD(Ap[O]).map(({time:Y,period:X},I,K)=>{const se=je(n[O],Y),ve=q(n[O],Y),ke=E&&B(n[O],Y,E.sessionDuration||45),Be=I===0||K[I-1]?.period!==X;return l.jsxs("div",{children:[Be&&l.jsx("div",{className:"period-label",children:X==="morning"?"Morning":"Afternoon"}),l.jsxs("div",{className:"time-slot-row",children:[l.jsxs("button",{className:`time-slot ${se?"booked":""} ${ve?"blocked":""} ${ke?"available":""} ${!se&&!ve&&!ke&&E?"unavailable":""}`,onClick:()=>!ve&&re(n[O],Y),disabled:ve,children:[l.jsx("span",{className:"slot-time",children:Gb(Y)}),se?l.jsxs("span",{className:"slot-client",children:[se.clientName," (",se.duration,"m)"]}):ve?l.jsx("span",{className:"slot-blocked",children:"Blocked"}):ke?l.jsx("span",{className:"slot-available",children:"Available"}):E?l.jsx("span",{className:"slot-unavailable",children:"Unavailable"}):l.jsx("span",{className:"slot-empty",children:"Select client to book"})]}),l.jsx("button",{className:`block-toggle-btn ${ve?"is-blocked":""}`,onClick:()=>j(n[O],Y),disabled:!!se,title:ve?"Unblock this time":"Block this time",children:ve?"":""})]})]},Y)})})]}),V&&l.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:l.jsxs("div",{className:"modal-content",onClick:Y=>Y.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h3",{children:"Select Client"}),l.jsx("button",{className:"close-btn",onClick:()=>H(!1),children:""})]}),l.jsx("div",{className:"client-list-picker",children:o.length===0?l.jsx("p",{className:"no-items",children:"No active clients"}):o.map(Y=>{const X=Y.startDate?.toDate?Y.startDate.toDate():new Date(Y.startDate),I=Y.endDate?.toDate?Y.endDate.toDate():new Date(Y.endDate),K=me(Y),se=k(Y.id);return l.jsxs("button",{className:"client-option",onClick:()=>ce(Y),children:[l.jsx("strong",{children:Y.name}),l.jsxs("span",{children:[Y.sessionDuration||45,"min  ",K,"/",Y.totalSessions," remaining  ",se," booked"]}),l.jsxs("span",{className:"client-dates",children:[X.toLocaleDateString("en-GB",{day:"numeric",month:"short"})," - ",I.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]},Y.id)})})]})})]})}const Yb=i=>{const[e,n]=i.split(":"),a=parseInt(e),o=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${n}${o}`},Pc=i=>{const e=i.getFullYear(),n=(i.getMonth()+1).toString().padStart(2,"0"),a=i.getDate().toString().padStart(2,"0");return`${e}-${n}-${a}`},sE=i=>i===Pc(new Date),eI=i=>{const e=new Date;return e.setDate(e.getDate()+1),i===Pc(e)},Qb=i=>sE(i)?"Today":eI(i)?"Tomorrow":new Date(i).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"}),Kb=i=>{const e=new Date,n=Pc(e),a=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;if(i.date<n)return!0;if(i.date===n){const o=Wb(i.time)+(i.duration||45);return Wb(a)>=o}return!1},Wb=i=>{const[e,n]=i.split(":").map(Number);return e*60+n};function tI(){const[i,e]=C.useState([]),[n,a]=C.useState(!0),[o,u]=C.useState(new Date);C.useEffect(()=>{d();const O=setInterval(()=>{u(new Date)},6e4);return()=>clearInterval(O)},[]);const d=async()=>{try{const D=(await Dt(ft(Ce,"sessions"))).docs.map(F=>({id:F.id,...F.data()})),V=Pc(new Date),H=D.filter(F=>F.date>=V).sort((F,ne)=>F.date!==ne.date?F.date.localeCompare(ne.date):F.time.localeCompare(ne.time));e(H)}catch(O){console.error("Error fetching sessions:",O)}a(!1)},p=async O=>{if(window.confirm(`Cancel ${O.clientName}'s session at ${Yb(O.time)} on ${Qb(O.date)}?`))try{await Zi(Je(Ce,"sessions",O.id)),e(i.filter(D=>D.id!==O.id))}catch(D){console.error("Error cancelling session:",D),alert("Failed to cancel session")}};if(n)return l.jsx("div",{className:"schedule-loading",children:"Loading schedule..."});const g=i.reduce((O,D)=>{const V=D.date;return O[V]||(O[V]=[]),O[V].push(D),O},{}),y=Object.keys(g).sort(),b=Pc(new Date),T=g[b]||[],E=T.filter(O=>Kb(O)).length,P=T.length-E;return l.jsxs("div",{className:"schedule",children:[l.jsxs("div",{className:"today-summary",children:[l.jsx("h3",{children:"Today's Sessions"}),l.jsx("div",{className:"today-count",children:T.length===0?l.jsx("span",{className:"no-sessions",children:"No sessions today"}):l.jsxs("div",{className:"today-stats",children:[l.jsxs("span",{className:"completed-count",children:[E," completed"]}),l.jsxs("span",{className:"remaining-count",children:[P," remaining"]})]})})]}),y.length===0?l.jsx("div",{className:"no-upcoming",children:l.jsx("p",{children:"No upcoming sessions booked"})}):l.jsx("div",{className:"sessions-list",children:y.map(O=>l.jsxs("div",{className:`date-group ${sE(O)?"today":""}`,children:[l.jsxs("div",{className:"date-header",children:[l.jsx("span",{className:"date-label",children:Qb(O)}),l.jsxs("span",{className:"date-count",children:[g[O].length," session",g[O].length!==1?"s":""]})]}),l.jsx("div",{className:"date-sessions",children:g[O].map(D=>{const V=Kb(D);return l.jsxs("div",{className:`session-card ${V?"completed":""}`,children:[l.jsx("div",{className:"session-time",children:Yb(D.time)}),l.jsxs("div",{className:"session-details",children:[l.jsx("strong",{children:D.clientName}),l.jsxs("span",{children:[D.duration,"min session"]})]}),V?l.jsx("div",{className:"completed-badge",children:""}):l.jsx("button",{className:"cancel-session-btn",onClick:()=>p(D),children:"Cancel"})]},D.id)})})]},O))})]})}const iE={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},jp=["monday","tuesday","wednesday","thursday","friday"],nI=["Monday","Tuesday","Wednesday","Thursday","Friday"],sI=i=>{const[e,n]=i.split(":"),a=parseInt(e),o=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${n}${o}`},mc=i=>{const e=i.getFullYear(),n=(i.getMonth()+1).toString().padStart(2,"0"),a=i.getDate().toString().padStart(2,"0");return`${e}-${n}-${a}`},iI=i=>{const e=new Date(i),n=e.getDay(),a=e.getDate()-n+(n===0?-6:1);return e.setDate(a),jp.map((o,u)=>{const d=new Date(e);return d.setDate(e.getDate()+u),d})},Rp=i=>{const[e,n]=i.split(":").map(Number);return e*60+n},kp=(i,e)=>{const n=Rp(i)+e,a=Math.floor(n/60),o=n%60;return`${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},aI=i=>{const e=iE[i];if(!e)return[];const n=[];if(e.morning){let a=e.morning.start;for(;a<e.morning.end;)n.push({time:a,period:"morning"}),a=kp(a,15)}if(e.afternoon){let a=e.afternoon.start;for(;a<e.afternoon.end;)n.push({time:a,period:"afternoon"}),a=kp(a,15)}return n};function rI(){const[i,e]=C.useState(new Date),[n,a]=C.useState([]),[o,u]=C.useState([]),[d,p]=C.useState([]),[g,y]=C.useState(!0),[b,T]=C.useState(45);C.useEffect(()=>{a(iI(i))},[i]),C.useEffect(()=>{E()},[]);const E=async()=>{try{const me=(await Dt(ft(Ce,"sessions"))).docs.map(R=>({id:R.id,...R.data()}));u(me);const N=(await Dt(ft(Ce,"holidays"))).docs.map(R=>({id:R.id,...R.data()}));p(N)}catch(ue){console.error("Error fetching data:",ue)}y(!1)},P=ue=>{const me=new Date(i);me.setDate(me.getDate()+ue*7),e(me)},O=()=>{e(new Date)},D=ue=>{const me=mc(ue);return d.some(k=>k.date===me)},V=(ue,me)=>{const k=jp[ue.getDay()-1];if(!k||D(ue))return!1;const N=mc(ue),R=new Date,z=mc(R);if(N<z)return!1;if(N===z){const re=`${R.getHours().toString().padStart(2,"0")}:${R.getMinutes().toString().padStart(2,"0")}`;if(me<re)return!1}const L=kp(me,b),q=iE[k],j=q.morning&&me>=q.morning.start&&me<q.morning.end,Ee=q.afternoon&&me>=q.afternoon.start&&me<q.afternoon.end,je=q.morning&&L<=q.morning.end,B=q.afternoon&&L<=q.afternoon.end;if(j&&!je||Ee&&!B)return!1;for(const re of o){if(re.date!==N)continue;const be=Rp(re.time),_e=be+(re.duration||45),Ne=Rp(me),w=Ne+b;if(Ne<_e&&w>be)return!1}return!0},H=(ue,me)=>{const k=jp[me];return aI(k).filter(R=>V(ue,R.time))};if(g)return l.jsx("div",{className:"availability-loading",children:"Loading availability..."});const F=n[0],ne=n[4],ce=F&&ne?`${F.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${ne.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return l.jsxs("div",{className:"availability",children:[l.jsxs("div",{className:"availability-header",children:[l.jsxs("div",{className:"availability-nav",children:[l.jsx("button",{onClick:()=>P(-1),children:""}),l.jsx("button",{onClick:O,children:"Today"}),l.jsx("button",{onClick:()=>P(1),children:""})]}),l.jsx("h3",{children:ce}),l.jsxs("div",{className:"duration-selector",children:[l.jsx("label",{children:"Session:"}),l.jsxs("select",{value:b,onChange:ue=>T(Number(ue.target.value)),children:[l.jsx("option",{value:30,children:"30 min"}),l.jsx("option",{value:45,children:"45 min"}),l.jsx("option",{value:60,children:"60 min"})]})]})]}),l.jsx("div",{className:"availability-grid",children:n.map((ue,me)=>{const k=D(ue),N=k?[]:H(ue,me),R=mc(ue)===mc(new Date),z=ue<new Date&&!R;return l.jsxs("div",{className:`day-column ${R?"today":""} ${z?"past":""}`,children:[l.jsxs("div",{className:"day-header",children:[l.jsx("span",{className:"day-name",children:nI[me]}),l.jsxs("span",{className:"day-date",children:[ue.getDate(),"/",ue.getMonth()+1]}),k&&l.jsx("span",{className:"holiday-badge",children:"Holiday"})]}),l.jsx("div",{className:"slots-container",children:k?l.jsx("div",{className:"no-slots",children:"Unavailable"}):N.length===0?l.jsx("div",{className:"no-slots",children:"Fully booked"}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"slots-count",children:[N.length," slots"]}),l.jsx("div",{className:"slots-list",children:N.map(L=>l.jsx("div",{className:`slot ${L.period}`,children:sI(L.time)},L.time))})]})})]},me)})})]})}const Km=i=>`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,Xb=i=>new Date(i+"T09:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),Jb=()=>{const i=new Date;let n=(6-i.getDay()+7)%7;if(n===0){const o=new Date(i);o.setHours(9,45,0,0),i>o&&(n=7)}const a=new Date(i);return a.setDate(i.getDate()+n),a},Uh=i=>i==="circuit_vip"?"VIP":i==="circuit_dropin"?"Drop-in":"Block",Bh=i=>i==="circuit_vip"?"vip":i==="circuit_dropin"?"dropin":"block";function oI(){const[i,e]=C.useState(!0),[n,a]=C.useState([]),[o,u]=C.useState([]),[d,p]=C.useState(null),[g,y]=C.useState("upcoming"),[b,T]=C.useState(!1),[E,P]=C.useState(null),[O,D]=C.useState(!1),[V,H]=C.useState(!1),F=C.useCallback((I,K="info")=>{P({message:I,type:K}),setTimeout(()=>P(null),4e3)},[]);C.useEffect(()=>{ne()},[]);const ne=async()=>{try{const K=(await Dt(ft(Ce,"circuitSessions"))).docs.map(pe=>({id:pe.id,...pe.data()}));K.sort((pe,ct)=>ct.date.localeCompare(pe.date)),a(K);const ve=(await Dt(ft(Ce,"clients"))).docs.map(pe=>({id:pe.id,...pe.data()})).filter(pe=>pe.clientType==="circuit_vip"||pe.clientType==="circuit_dropin"||pe.circuitAccess===!0);u(ve);const ke=Km(Jb()),Be=K.find(pe=>pe.date===ke);Be?p(Be):K.length>0&&p(K[0])}catch(I){console.error("Error loading circuit data:",I),F("Failed to load circuit data","error")}e(!1)},ce=async I=>{if(!(!d||b)&&window.confirm("Remove this member from the slot?")){T(!0);try{const K=[...d.slots],se=K.findIndex(Be=>Be.slotNumber===I);if(se===-1){T(!1);return}let ve=[...d.waitlist||[]];if(ve.length>0){const Be=ve.shift();K[se]={slotNumber:I,memberId:Be.memberId,memberName:Be.memberName,memberType:Be.memberType,status:"confirmed",bookedAt:Me.now()},F(`Slot given to ${Be.memberName} from waitlist`,"success")}else K[se]={slotNumber:I,memberId:null,memberName:null,memberType:null,status:"available"},F("Member removed from slot","success");await an(Je(Ce,"circuitSessions",d.id),{slots:K,waitlist:ve});const ke={...d,slots:K,waitlist:ve};p(ke),a(Be=>Be.map(pe=>pe.id===ke.id?ke:pe))}catch(K){console.error("Error removing from slot:",K),F("Failed to remove member","error")}T(!1)}},ue=async(I,K)=>{if(!(!d||b)){T(!0);try{const se=[...d.slots],ve=se.findIndex(pe=>pe.slotNumber===I&&pe.status==="available");if(ve===-1){F("Slot is not available","error"),T(!1);return}if(se.some(pe=>pe.memberId===K.id)){F(`${K.name} already has a slot`,"error"),T(!1);return}se[ve]={slotNumber:I,memberId:K.id,memberName:K.name,memberType:K.clientType||"block",status:"confirmed",bookedAt:Me.now()};const ke=(d.waitlist||[]).filter(pe=>pe.memberId!==K.id);await an(Je(Ce,"circuitSessions",d.id),{slots:se,waitlist:ke});const Be={...d,slots:se,waitlist:ke};p(Be),a(pe=>pe.map(ct=>ct.id===Be.id?Be:ct)),F(`${K.name} added to slot ${I}`,"success")}catch(se){console.error("Error adding to slot:",se),F("Failed to add member","error")}T(!1)}},me=async I=>{if(!(!d||b)){T(!0);try{const K=(d.waitlist||[]).filter(ve=>ve.memberId!==I);await an(Je(Ce,"circuitSessions",d.id),{waitlist:K});const se={...d,waitlist:K};p(se),a(ve=>ve.map(ke=>ke.id===se.id?se:ke)),F("Removed from waitlist","success")}catch(K){console.error("Error removing from waitlist:",K),F("Failed to remove from waitlist","error")}T(!1)}},k=async(I,K)=>{if(!(!d||b)){T(!0);try{const se=[...d.slots],ve=se.findIndex(Be=>Be.slotNumber===I);if(ve===-1){T(!1);return}if(se[ve]={...se[ve],attended:K},await an(Je(Ce,"circuitSessions",d.id),{slots:se}),K===!1){const Be=se[ve].memberId;if(Be){const pe=Je(Ce,"clients",Be),ct=await Zo(pe);if(ct.exists()){const Et=(ct.data().circuitStrikes||0)+1,wt={circuitStrikes:Et};if(Et>=3){const rt=new Date;rt.setMonth(rt.getMonth()+1),wt.circuitBanUntil=Me.fromDate(rt),wt.circuitStrikes=0,F(`${se[ve].memberName} banned for 1 month (3 strikes)`,"error")}else F(`No-show recorded - ${se[ve].memberName} (${Et}/3 strikes)`,"error");await an(pe,wt)}}}else F(`${se[ve].memberName} marked as attended`,"success");const ke={...d,slots:se};p(ke),a(Be=>Be.map(pe=>pe.id===ke.id?ke:pe))}catch(se){console.error("Error marking attendance:",se),F("Failed to update attendance","error")}T(!1)}},N=async(I,K)=>{if(!b&&window.confirm(`Reset strikes for ${K}?`)){T(!0);try{await an(Je(Ce,"clients",I),{circuitStrikes:0,circuitBanUntil:null}),u(se=>se.map(ve=>ve.id===I?{...ve,circuitStrikes:0,circuitBanUntil:null}:ve)),F(`Strikes reset for ${K}`,"success")}catch(se){console.error("Error resetting strikes:",se),F("Failed to reset strikes","error")}T(!1)}},R=async(I,K)=>{if(!b&&window.confirm(`Lift ban for ${K}?`)){T(!0);try{await an(Je(Ce,"clients",I),{circuitBanUntil:null,circuitStrikes:0}),u(se=>se.map(ve=>ve.id===I?{...ve,circuitBanUntil:null,circuitStrikes:0}:ve)),F(`Ban lifted for ${K}`,"success")}catch(se){console.error("Error lifting ban:",se),F("Failed to lift ban","error")}T(!1)}};if(i)return l.jsxs("div",{className:"cm-loading",children:[l.jsx("div",{className:"cm-loading-spinner"}),l.jsx("span",{children:"Loading circuit data..."})]});const z=Km(new Date),L=Km(Jb()),q=n.filter(I=>I.date>=z),j=n.filter(I=>I.date<z),Ee=g==="upcoming"?q:j,je=d?d.slots.filter(I=>I.status!=="available").length:0,B=d?d.slots.filter(I=>I.status==="available").length:0,re=d?d.date>=z:!1,be=d?d.slots.filter(I=>I.memberId).map(I=>I.memberId):[],_e=d?(d.waitlist||[]).map(I=>I.memberId):[],Ne=o.filter(I=>!be.includes(I.id)&&!_e.includes(I.id)),w=o.filter(I=>I.clientType==="circuit_vip").length,G=o.filter(I=>I.clientType==="circuit_dropin").length,Y=o.filter(I=>I.circuitAccess&&I.clientType!=="circuit_vip"&&I.clientType!=="circuit_dropin").length,X=o.filter(I=>I.circuitBanUntil?(I.circuitBanUntil.toDate?I.circuitBanUntil.toDate():new Date(I.circuitBanUntil))>new Date:!1);return l.jsxs("div",{className:"cm-container",children:[l.jsxs("div",{className:"cm-stats-row",children:[l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:w}),l.jsx("span",{className:"cm-stat-label",children:"VIP"})]}),l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:G}),l.jsx("span",{className:"cm-stat-label",children:"Drop-in"})]}),l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:Y}),l.jsx("span",{className:"cm-stat-label",children:"Block"})]}),l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:n.length}),l.jsx("span",{className:"cm-stat-label",children:"Sessions"})]})]}),l.jsxs("div",{className:"cm-view-toggle",children:[l.jsx("button",{className:`cm-toggle-btn ${O?"":"active"}`,onClick:()=>D(!1),children:"Sessions"}),l.jsx("button",{className:`cm-toggle-btn ${O?"active":""}`,onClick:()=>D(!0),children:"Members"})]}),!O&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"cm-tabs",children:[l.jsxs("button",{className:`cm-tab ${g==="upcoming"?"active":""}`,onClick:()=>y("upcoming"),children:["Upcoming (",q.length,")"]}),l.jsxs("button",{className:`cm-tab ${g==="past"?"active":""}`,onClick:()=>y("past"),children:["Past (",j.length,")"]})]}),l.jsx("div",{className:"cm-sessions-list",children:Ee.length===0?l.jsx("div",{className:"cm-empty",children:l.jsxs("p",{children:["No ",g," sessions"]})}):Ee.map(I=>{const K=I.slots.filter(ke=>ke.status!=="available").length,se=d?.id===I.id,ve=I.date===L;return l.jsxs("button",{className:`cm-session-btn ${se?"selected":""} ${ve?"next":""}`,onClick:()=>{p(I),H(!1)},children:[l.jsxs("div",{className:"cm-session-btn-left",children:[l.jsx("span",{className:"cm-session-date",children:Xb(I.date)}),ve&&l.jsx("span",{className:"cm-next-badge",children:"Next"})]}),l.jsxs("div",{className:"cm-session-btn-right",children:[l.jsxs("span",{className:"cm-session-fill",children:[K,"/8"]}),(I.waitlist?.length||0)>0&&l.jsxs("span",{className:"cm-waitlist-count",children:["+",I.waitlist.length," wl"]})]})]},I.id)})}),d&&l.jsxs("div",{className:"cm-detail",children:[l.jsxs("div",{className:"cm-detail-header",children:[l.jsxs("div",{children:[l.jsx("h3",{children:Xb(d.date)}),l.jsxs("p",{children:[d.time," - ",d.endTime,"  ",je,"/8 booked  ",B," available"]})]}),!re&&l.jsx("button",{className:`cm-attendance-btn ${V?"active":""}`,onClick:()=>H(!V),children:V?"Done":"Attendance"})]}),l.jsx("div",{className:"cm-slots",children:d.slots.map(I=>{const K=I.status==="available";return l.jsxs("div",{className:`cm-slot ${K?"empty":"filled"} ${I.attended===!0?"attended":""} ${I.attended===!1?"no-show":""}`,children:[l.jsx("span",{className:"cm-slot-num",children:I.slotNumber}),K?l.jsxs("div",{className:"cm-slot-empty",children:[l.jsx("span",{children:"Available"}),re&&l.jsx(lI,{members:Ne,onSelect:se=>ue(I.slotNumber,se),disabled:b})]}):l.jsxs("div",{className:"cm-slot-filled",children:[l.jsxs("div",{className:"cm-slot-info",children:[l.jsx("span",{className:"cm-slot-name",children:I.memberName}),l.jsx("span",{className:`cm-type-badge ${Bh(I.memberType)}`,children:Uh(I.memberType)})]}),l.jsxs("div",{className:"cm-slot-actions",children:[V&&I.attended===void 0&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"cm-attend-yes",onClick:()=>k(I.slotNumber,!0),disabled:b,title:"Attended",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsx("button",{className:"cm-attend-no",onClick:()=>k(I.slotNumber,!1),disabled:b,title:"No-show",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),I.attended===!0&&l.jsx("span",{className:"cm-attended-label",children:"Attended"}),I.attended===!1&&l.jsx("span",{className:"cm-noshow-label",children:"No-show"}),re&&l.jsx("button",{className:"cm-remove-btn",onClick:()=>ce(I.slotNumber),disabled:b,title:"Remove from slot",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]})]},I.slotNumber)})}),(d.waitlist?.length||0)>0&&l.jsxs("div",{className:"cm-waitlist",children:[l.jsxs("h4",{children:["Waitlist (",d.waitlist.length,")"]}),d.waitlist.map((I,K)=>l.jsxs("div",{className:"cm-waitlist-row",children:[l.jsxs("span",{className:"cm-wl-pos",children:["#",K+1]}),l.jsx("span",{className:"cm-wl-name",children:I.memberName}),l.jsx("span",{className:`cm-type-badge ${Bh(I.memberType)}`,children:Uh(I.memberType)}),re&&l.jsx("button",{className:"cm-wl-remove",onClick:()=>me(I.memberId),disabled:b,children:"Remove"})]},I.memberId))]})]})]}),O&&l.jsxs("div",{className:"cm-members",children:[X.length>0&&l.jsxs("div",{className:"cm-ban-alert",children:[l.jsxs("h4",{children:["Currently Banned (",X.length,")"]}),X.map(I=>{const K=I.circuitBanUntil?.toDate?I.circuitBanUntil.toDate():new Date(I.circuitBanUntil);return l.jsxs("div",{className:"cm-ban-row",children:[l.jsxs("div",{className:"cm-ban-info",children:[l.jsx("span",{className:"cm-ban-name",children:I.name}),l.jsxs("span",{className:"cm-ban-until",children:["Until ",K.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),l.jsx("button",{className:"cm-lift-ban-btn",onClick:()=>R(I.id,I.name),disabled:b,children:"Lift Ban"})]},I.id)})]}),l.jsx("div",{className:"cm-members-list",children:o.length===0?l.jsxs("div",{className:"cm-empty",children:[l.jsx("p",{children:"No circuit members yet"}),l.jsx("span",{children:"Add members via the Clients page"})]}):o.map(I=>{const K=I.circuitStrikes||0,se=X.some(ve=>ve.id===I.id);return l.jsxs("div",{className:`cm-member-card ${se?"banned":""}`,children:[l.jsxs("div",{className:"cm-member-top",children:[l.jsx("span",{className:"cm-member-name",children:I.name}),l.jsx("span",{className:`cm-type-badge ${Bh(I.clientType)}`,children:Uh(I.clientType)})]}),l.jsxs("div",{className:"cm-member-bottom",children:[l.jsxs("div",{className:"cm-strikes",children:[[0,1,2].map(ve=>l.jsx("span",{className:`cm-strike-dot ${ve<K?"active":""}`},ve)),l.jsxs("span",{className:"cm-strike-text",children:[K,"/3 strikes"]})]}),l.jsxs("div",{className:"cm-member-actions",children:[se&&l.jsx("button",{className:"cm-small-btn ban",onClick:()=>R(I.id,I.name),disabled:b,children:"Lift Ban"}),K>0&&!se&&l.jsx("button",{className:"cm-small-btn reset",onClick:()=>N(I.id,I.name),disabled:b,children:"Reset"})]})]})]},I.id)})})]}),E&&l.jsx("div",{className:`cm-toast ${E.type}`,children:l.jsx("span",{children:E.message})})]})}function lI({members:i,onSelect:e,disabled:n}){const[a,o]=C.useState(!1),[u,d]=C.useState(""),p=i.filter(g=>g.name.toLowerCase().includes(u.toLowerCase()));return i.length===0?null:l.jsxs("div",{className:"cm-add-dropdown",children:[l.jsx("button",{className:"cm-add-trigger",onClick:()=>o(!a),disabled:n,children:"+ Add"}),a&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"cm-dropdown-backdrop",onClick:()=>{o(!1),d("")}}),l.jsxs("div",{className:"cm-dropdown-menu",children:[i.length>4&&l.jsx("input",{type:"text",className:"cm-dropdown-search",placeholder:"Search...",value:u,onChange:g=>d(g.target.value),autoFocus:!0}),l.jsxs("div",{className:"cm-dropdown-list",children:[p.map(g=>l.jsxs("button",{className:"cm-dropdown-item",onClick:()=>{e(g),o(!1),d("")},children:[l.jsx("span",{children:g.name}),l.jsx("span",{className:`cm-type-badge sm ${Bh(g.clientType)}`,children:Uh(g.clientType)})]},g.id)),p.length===0&&l.jsx("div",{className:"cm-dropdown-empty",children:"No members found"})]})]})]})]})}function cI(){const[i,e]=C.useState(()=>localStorage.getItem("adminActiveView")||"schedule"),n=B=>{e(B),localStorage.setItem("adminActiveView",B)},[a,o]=C.useState(0),[u,d]=C.useState(!1),[p,g]=C.useState([]),[y,b]=C.useState(null),[T,E]=C.useState(null),{currentUser:P,logout:O,isAdmin:D,loading:V}=gs(),{isDark:H,toggleTheme:F}=hl(),ne=Vn(),ce=C.useRef(0),ue=C.useRef(!1);C.useRef(null);const me=C.useCallback((B,re="info")=>{E({message:B,type:re}),setTimeout(()=>E(null),4e3)},[]);C.useEffect(()=>{!V&&(!P||!D)&&ne("/")},[P,D,V,ne]),C.useEffect(()=>{P&&D&&k()},[P,D]);const k=async()=>{try{const B=Qs(ft(Ce,"rescheduleRequests"),Is("status","==","pending")),be=(await Dt(B)).docs.map(_e=>({id:_e.id,..._e.data()}));be.sort((_e,Ne)=>{const w=_e.createdAt?.toDate?_e.createdAt.toDate():new Date(0);return(Ne.createdAt?.toDate?Ne.createdAt.toDate():new Date(0))-w}),g(be)}catch(B){console.error("Error fetching reschedule requests:",B)}};C.useEffect(()=>{(async()=>{if(!(!P||!D))try{const[re,be]=await Promise.all([Dt(ft(Ce,"clients")),Dt(ft(Ce,"sessions"))]),_e=new Set(re.docs.map(w=>w.id)),Ne=be.docs.filter(w=>!_e.has(w.data().clientId));if(Ne.length>0){console.log(`Cleaning up ${Ne.length} orphaned sessions...`);const w=Ne.map(G=>Zi(Je(Ce,"sessions",G.id)));await Promise.all(w),console.log("Orphaned sessions cleaned up successfully")}}catch(re){console.error("Error cleaning up orphaned sessions:",re)}})()},[P,D]),C.useEffect(()=>{const B=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,re=Ne=>{B()<=0&&(ce.current=Ne.touches[0].clientY,ue.current=!1)},be=Ne=>{const w=B(),Y=Ne.touches[0].clientY-ce.current;if(w>5||Y<=0){ue.current=!1,o(0);return}Y>20&&w<=0&&(ue.current=!0,o(Math.min((Y-20)*.4,80)))},_e=()=>{ue.current&&a>60?(d(!0),setTimeout(()=>{window.location.reload()},300)):o(0),ue.current=!1};return document.addEventListener("touchstart",re,{passive:!0}),document.addEventListener("touchmove",be,{passive:!0}),document.addEventListener("touchend",_e),()=>{document.removeEventListener("touchstart",re),document.removeEventListener("touchmove",be),document.removeEventListener("touchend",_e)}},[a]);const N=()=>{d(!0),setTimeout(()=>{window.location.reload()},300)},R=async()=>{try{await O(),ne("/")}catch(B){console.error("Failed to log out:",B)}},z=()=>{ne("/add-client")},L=B=>new Date(B).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),q=B=>{const[re,be]=B.split(":"),_e=parseInt(re),Ne=_e>=12?"pm":"am";return`${_e>12?_e-12:_e===0?12:_e}:${be}${Ne}`},j=async B=>{if(window.confirm(`Approve reschedule for ${B.clientName}?

From: ${L(B.originalDate)} at ${q(B.originalTime)}
To: ${L(B.requestedDate)} at ${q(B.requestedTime)}`)){b(B.id);try{await an(Je(Ce,"sessions",B.sessionId),{date:B.requestedDate,time:B.requestedTime}),await an(Je(Ce,"rescheduleRequests",B.id),{status:"approved",respondedAt:Me.now()}),g(p.filter(re=>re.id!==B.id)),me(`Approved reschedule for ${B.clientName}`,"success")}catch(re){console.error("Error approving request:",re),me("Failed to approve request","error")}b(null)}},Ee=async B=>{if(window.confirm(`Reject reschedule request from ${B.clientName}?`)){b(B.id);try{await an(Je(Ce,"rescheduleRequests",B.id),{status:"rejected",respondedAt:Me.now()}),g(p.filter(re=>re.id!==B.id)),me(`Request from ${B.clientName} rejected`,"info")}catch(re){console.error("Error rejecting request:",re),me("Failed to reject request","error")}b(null)}};if(V)return l.jsx("div",{className:"loading",children:"Loading..."});if(!P||!D)return null;const je=p.length;return l.jsxs("div",{className:"dashboard",children:[a>0&&l.jsxs("div",{className:"pull-indicator",style:{height:a},children:[l.jsx("div",{className:`pull-spinner ${u?"spinning":""}`,children:u?"":""}),l.jsx("span",{children:u?"Refreshing...":a>60?"Release to refresh":"Pull to refresh"})]}),l.jsxs("header",{className:"dashboard-header",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"admin-header-logo"}),l.jsx("span",{className:"admin-badge",children:"Admin"})]}),l.jsxs("nav",{className:"header-nav",children:[l.jsx("button",{className:`nav-btn ${i==="schedule"?"active":""}`,onClick:()=>n("schedule"),children:"Today"}),l.jsx("button",{className:`nav-btn ${i==="clients"?"active":""}`,onClick:()=>n("clients"),children:"Clients"}),l.jsx("button",{className:`nav-btn ${i==="calendar"?"active":""}`,onClick:()=>n("calendar"),children:"Calendar"}),l.jsxs("button",{className:`nav-btn ${i==="requests"?"active":""} ${je>0?"has-badge":""}`,onClick:()=>n("requests"),children:["Requests",je>0&&l.jsx("span",{className:"nav-badge",children:je})]}),l.jsx("button",{className:`nav-btn ${i==="availability"?"active":""}`,onClick:()=>n("availability"),children:"Slots"}),l.jsx("button",{className:`nav-btn ${i==="circuits"?"active":""}`,onClick:()=>n("circuits"),children:"Circuits"})]}),l.jsxs("div",{className:"header-actions",children:[l.jsx("button",{className:"theme-toggle-btn",onClick:F,"aria-label":H?"Switch to light mode":"Switch to dark mode",children:H?l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),l.jsx("button",{className:"refresh-btn",onClick:N,disabled:u,children:u?"":""}),l.jsx("button",{className:"logout-btn",onClick:R,children:"Log Out"})]})]}),T&&l.jsx("div",{className:"toast-container",children:l.jsxs("div",{className:`toast ${T.type}`,children:[l.jsxs("span",{className:"toast-icon",children:[T.type==="success"&&l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),T.type==="error"&&l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),T.type==="info"&&l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})]}),l.jsx("span",{className:"toast-message",children:T.message})]})}),l.jsxs("main",{className:"dashboard-main",children:[i==="schedule"&&l.jsxs("div",{className:"schedule-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Schedule"})}),l.jsx(tI,{})]}),i==="clients"&&l.jsxs("div",{className:"clients-view",children:[l.jsxs("div",{className:"view-header",children:[l.jsx("h2",{children:"Clients"}),l.jsx("button",{className:"add-btn",onClick:z,children:"+ Add Client"})]}),l.jsx(QD,{})]}),i==="calendar"&&l.jsxs("div",{className:"calendar-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Calendar"})}),l.jsx(ZD,{})]}),i==="requests"&&l.jsxs("div",{className:"requests-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Reschedule Requests"})}),p.length===0?l.jsxs("div",{className:"no-requests",children:[l.jsx("div",{className:"empty-icon",children:l.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"20",y:"25",width:"60",height:"50",rx:"4"}),l.jsx("path",{d:"M20 35 L50 55 L80 35"}),l.jsx("circle",{cx:"50",cy:"70",r:"3",fill:"currentColor"})]})}),l.jsx("p",{children:"No pending requests"}),l.jsx("span",{children:"When clients request to reschedule, they will appear here"})]}):l.jsx("div",{className:"requests-list",children:p.map(B=>l.jsxs("div",{className:"request-card",children:[l.jsxs("div",{className:"request-header",children:[l.jsx("span",{className:"client-name",children:B.clientName}),l.jsx("span",{className:"request-time",children:B.createdAt?.toDate?B.createdAt.toDate().toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""})]}),l.jsx("div",{className:"request-details",children:l.jsxs("div",{className:"request-change",children:[l.jsxs("div",{className:"from-session",children:[l.jsx("span",{className:"label",children:"From:"}),l.jsxs("span",{className:"value",children:[L(B.originalDate)," at ",q(B.originalTime)]})]}),l.jsx("div",{className:"arrow",children:""}),l.jsxs("div",{className:"to-session",children:[l.jsx("span",{className:"label",children:"To:"}),l.jsxs("span",{className:"value",children:[L(B.requestedDate)," at ",q(B.requestedTime)]})]})]})}),l.jsxs("div",{className:"request-actions",children:[l.jsx("button",{className:"approve-btn",onClick:()=>j(B),disabled:y===B.id,children:y===B.id?"Processing...":"Approve"}),l.jsx("button",{className:"reject-btn",onClick:()=>Ee(B),disabled:y===B.id,children:"Reject"})]})]},B.id))})]}),i==="availability"&&l.jsxs("div",{className:"availability-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Available Slots"})}),l.jsx(rI,{})]}),i==="circuits"&&l.jsxs("div",{className:"circuits-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Circuit Management"})}),l.jsx(oI,{})]})]})]})}const uI=[{value:"block",label:"Block (1-2-1)"},{value:"circuit_vip",label:"Circuit VIP"},{value:"circuit_dropin",label:"Circuit Drop-in"}];function hI(){const[i,e]=C.useState({name:"",email:"",password:"",clientType:"block",circuitAccess:!1,weeksInBlock:"",numberOfSessions:"",sessionDuration:"45",startDate:"",endDate:""}),[n,a]=C.useState(!1),[o,u]=C.useState(""),{currentUser:d,isAdmin:p,loading:g}=gs(),y=Vn();C.useEffect(()=>{!g&&(!d||!p)&&y("/")},[d,p,g,y]),C.useEffect(()=>{if(i.startDate&&i.weeksInBlock){const O=new Date(i.startDate),D=parseInt(i.weeksInBlock);if(!isNaN(D)&&D>0){const V=new Date(O);V.setDate(V.getDate()+D*7);const H=V.getFullYear(),F=(V.getMonth()+1).toString().padStart(2,"0"),ne=V.getDate().toString().padStart(2,"0");e(ce=>({...ce,endDate:`${H}-${F}-${ne}`}))}}},[i.startDate,i.weeksInBlock]);const b=O=>{const{name:D,value:V,type:H,checked:F}=O.target;e(ne=>({...ne,[D]:H==="checkbox"?F:V}))},T=async O=>{O.preventDefault(),u(""),a(!0);try{const D=await ix(ld,i.email.trim().toLowerCase(),i.password);await Xp(ld);const V=i.clientType==="block",H={uid:D.user.uid,name:i.name.trim(),email:i.email.trim().toLowerCase(),clientType:i.clientType,status:"active",createdAt:Me.now()};V?(H.circuitAccess=i.circuitAccess,H.weeksInBlock=parseInt(i.weeksInBlock),H.totalSessions=parseInt(i.numberOfSessions),H.sessionsRemaining=parseInt(i.numberOfSessions),H.sessionDuration=parseInt(i.sessionDuration),H.startDate=Me.fromDate(new Date(i.startDate)),H.endDate=Me.fromDate(new Date(i.endDate))):(H.circuitStrikes=0,H.circuitBanUntil=null),await Uo(ft(Ce,"clients"),H),y("/dashboard")}catch(D){console.error("Error adding client:",D),D.code==="auth/email-already-in-use"?u("This email is already registered."):D.code==="auth/weak-password"?u("Password should be at least 6 characters."):u("Failed to add client. Please try again."),a(!1)}},E=()=>{y("/dashboard")};if(g)return l.jsx("div",{className:"loading",children:"Loading..."});if(!d||!p)return null;const P=i.clientType==="block";return l.jsxs("div",{className:"add-client-page",children:[l.jsxs("header",{className:"page-header",children:[l.jsx("button",{className:"back-btn",onClick:E,children:" Back"}),l.jsx("h1",{children:"Add New Client"})]}),l.jsxs("main",{className:"page-content",children:[o&&l.jsx("div",{className:"form-error",children:o}),l.jsxs("form",{onSubmit:T,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Client Type"}),l.jsx("div",{className:"client-type-toggle",children:uI.map(O=>l.jsx("button",{type:"button",className:`type-btn ${i.clientType===O.value?"active":""}`,onClick:()=>e(D=>({...D,clientType:O.value})),children:O.label},O.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"name",children:"Client Name"}),l.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:b,placeholder:"John Smith",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Client Email"}),l.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:b,placeholder:"john@example.com",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Client Portal Password"}),l.jsx("input",{type:"text",id:"password",name:"password",value:i.password,onChange:b,placeholder:"Set a password for client login",minLength:"6",required:!0}),l.jsx("span",{className:"helper-text",children:"Minimum 6 characters. Share this with your client."})]}),P&&l.jsx("div",{className:"form-group",children:l.jsxs("label",{className:"circuit-toggle-label",children:[l.jsx("input",{type:"checkbox",name:"circuitAccess",checked:i.circuitAccess,onChange:b}),l.jsx("span",{children:"Also allow Circuit Class access"})]})}),P&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"weeksInBlock",children:"Weeks in Block"}),l.jsx("input",{type:"number",id:"weeksInBlock",name:"weeksInBlock",value:i.weeksInBlock,onChange:b,placeholder:"8",min:"1",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"numberOfSessions",children:"Number of Sessions"}),l.jsx("input",{type:"number",id:"numberOfSessions",name:"numberOfSessions",value:i.numberOfSessions,onChange:b,placeholder:"16",min:"1",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"sessionDuration",children:"Session Duration"}),l.jsxs("select",{id:"sessionDuration",name:"sessionDuration",value:i.sessionDuration,onChange:b,required:!0,children:[l.jsx("option",{value:"30",children:"30 minutes"}),l.jsx("option",{value:"45",children:"45 minutes"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"startDate",children:"Start Date"}),l.jsx("input",{type:"date",id:"startDate",name:"startDate",value:i.startDate,onChange:b,required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"endDate",children:"End Date (auto-calculated)"}),l.jsx("input",{type:"date",id:"endDate",name:"endDate",value:i.endDate,onChange:b,required:!0}),l.jsx("span",{className:"helper-text",children:"Calculated from start date + weeks"})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",className:"cancel-btn",onClick:E,children:"Cancel"}),l.jsx("button",{type:"submit",className:"submit-btn",disabled:n,children:n?"Saving...":"Save Client"})]})]})]})]})}const aE={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},dI=["monday","tuesday","wednesday","thursday","friday"],Yi=i=>{const e=i.getFullYear(),n=(i.getMonth()+1).toString().padStart(2,"0"),a=i.getDate().toString().padStart(2,"0");return`${e}-${n}-${a}`},Dp=i=>{const[e,n]=i.split(":").map(Number);return e*60+n},ud=(i,e)=>{const n=Dp(i)+e,a=Math.floor(n/60),o=n%60;return`${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},fI=i=>{const e=aE[i];if(!e)return[];const n=[];if(e.morning){let a=e.morning.start;for(;a<e.morning.end;)n.push({time:a,period:"morning"}),a=ud(a,15)}if(e.afternoon){let a=e.afternoon.start;for(;a<e.afternoon.end;)n.push({time:a,period:"afternoon"}),a=ud(a,15)}return n},mI=i=>{const e=i.getDay();return e>=1&&e<=5},rE=i=>{const e=i.getDay();return e===0||e===6?null:dI[e-1]},pI=(i,e,n,a,o,u=null,d=[])=>{const p=rE(i);if(!p)return!1;const g=Yi(i);if(o.some(F=>F.date===g))return!1;const y=Math.ceil(n/15);for(let F=0;F<y;F++){const ne=ud(e,F*15);if(d.some(ce=>ce.date===g&&ce.time===ne))return!1}const b=new Date,T=Yi(b);if(g<T)return!1;if(g===T){const F=`${b.getHours().toString().padStart(2,"0")}:${b.getMinutes().toString().padStart(2,"0")}`;if(e<F)return!1}const E=ud(e,n),P=aE[p],O=P.morning&&e>=P.morning.start&&e<P.morning.end,D=P.afternoon&&e>=P.afternoon.start&&e<P.afternoon.end,V=P.morning&&E<=P.morning.end,H=P.afternoon&&E<=P.afternoon.end;if(O&&!V||D&&!H||!O&&!D)return!1;for(const F of a){if(u&&F.id===u||F.date!==g)continue;const ne=Dp(F.time),ce=ne+(F.duration||45),ue=Dp(e),me=ue+n;if(ue<ce&&me>ne)return!1}return!0},gI=(i,e,n,a,o=null,u=[])=>{const d=rE(i);return d?fI(d).filter(g=>pI(i,g.time,e,n,a,o,u)):[]};function yI(){const[i,e]=C.useState([]),[n,a]=C.useState([]),[o,u]=C.useState([]),[d,p]=C.useState([]),[g,y]=C.useState([]),[b,T]=C.useState(!0),[E,P]=C.useState(null),[O,D]=C.useState(!1),[V,H]=C.useState(null),[F,ne]=C.useState(null),[ce,ue]=C.useState(null),[me,k]=C.useState([]),[N,R]=C.useState(!1),[z,L]=C.useState([]),[q,j]=C.useState(null),[Ee,je]=C.useState(!1),[B,re]=C.useState(0),be=C.useRef(null),_e=C.useRef(0),Ne=C.useRef(!1),[w,G]=C.useState(null),[Y,X]=C.useState(null),[I,K]=C.useState(!1),[se,ve]=C.useState([]),[ke,Be]=C.useState(!1),[pe,ct]=C.useState(null),[Vt,Et]=C.useState(null),{currentUser:wt,isClient:rt,clientData:Oe,logout:mt,loading:ot}=gs(),{isDark:ht,toggleTheme:ts}=hl(),Wt=Vn(),ys=C.useCallback((M,oe="info")=>{j({message:M,type:oe}),setTimeout(()=>j(null),4e3)},[]),dt=M=>{const oe=M.currentTarget,Te=oe.querySelector(".ripple");Te&&Te.remove();const Se=document.createElement("span"),Le=Math.max(oe.clientWidth,oe.clientHeight),Ve=Le/2,Qe=oe.getBoundingClientRect();Se.style.width=Se.style.height=`${Le}px`,Se.style.left=`${M.clientX-Qe.left-Ve}px`,Se.style.top=`${M.clientY-Qe.top-Ve}px`,Se.classList.add("ripple"),oe.appendChild(Se),setTimeout(()=>Se.remove(),600)},ns=M=>{be.current&&be.current.scrollTop===0&&(_e.current=M.touches[0].clientY,Ne.current=!0)},Ni=M=>{if(!Ne.current||!be.current)return;const Te=M.touches[0].clientY-_e.current;Te>20&&be.current.scrollTop===0&&(M.preventDefault(),re(Math.min((Te-20)*.35,80)))},Os=async()=>{B>55&&!Ee&&(je(!0),await Zs(),ys("Refreshed!","success"),je(!1)),re(0),Ne.current=!1},vs=(M,oe)=>{const Te=M.touches[0];M.currentTarget.dataset.startX=Te.clientX,M.currentTarget.dataset.startY=Te.clientY},or=(M,oe)=>{const Te=M.touches[0],Se=parseFloat(M.currentTarget.dataset.startX),Le=parseFloat(M.currentTarget.dataset.startY),Ve=Te.clientX-Se,Qe=Te.clientY-Le;Math.abs(Ve)>Math.abs(Qe)&&Math.abs(Ve)>10&&(M.preventDefault(),Ve<-50?G(oe):Ve>50&&G(null))};C.useEffect(()=>{!ot&&(!wt||!rt)&&Wt("/")},[wt,rt,ot,Wt]),C.useEffect(()=>{Oe&&Zs()},[Oe]),C.useEffect(()=>{if(!b&&Oe){const M=setTimeout(()=>Be(!0),300);return()=>clearTimeout(M)}},[b,Oe]),C.useEffect(()=>{const M=()=>{const Te=ei();if(Te.length===0){ct(null);return}const Se=Te[0],Le=new Date,Qe=new Date(Se.date+"T"+Se.time)-Le;if(Qe<=0){ct(null);return}const cn=Math.floor(Qe/(1e3*60*60*24)),mn=Math.floor(Qe%(1e3*60*60*24)/(1e3*60*60)),$n=Math.floor(Qe%(1e3*60*60)/(1e3*60)),si=Math.floor(Qe%(1e3*60)/1e3);ct({days:cn,hours:mn,minutes:$n,seconds:si,session:Se})};M();const oe=setInterval(M,1e3);return()=>clearInterval(oe)},[i,b]);const Zs=async()=>{try{const M=Qs(ft(Ce,"sessions"),Is("clientId","==",Oe.id)),Te=(await Dt(M)).docs.map($e=>({id:$e.id,...$e.data()}));Te.sort(($e,pn)=>$e.date!==pn.date?$e.date.localeCompare(pn.date):$e.time.localeCompare(pn.time)),e(Te);const Se=await Dt(ft(Ce,"sessions"));a(Se.docs.map($e=>({id:$e.id,...$e.data()})));const Le=await Dt(ft(Ce,"holidays"));u(Le.docs.map($e=>({id:$e.id,...$e.data()})));const Ve=await Dt(ft(Ce,"blockedTimes"));p(Ve.docs.map($e=>({id:$e.id,...$e.data()})));const Qe=Qs(ft(Ce,"rescheduleRequests"),Is("clientId","==",Oe.id)),mn=(await Dt(Qe)).docs.map($e=>({id:$e.id,...$e.data()}));L(mn.filter($e=>$e.status==="pending"));const $n=mn.filter($e=>{if($e.status==="pending"||!$e.respondedAt)return!1;const pn=$e.respondedAt.toDate?$e.respondedAt.toDate():new Date($e.respondedAt),xn=new Date;return xn.setDate(xn.getDate()-7),pn>xn&&!$e.dismissed});y($n);const si=Qs(ft(Ce,"achievements"),Is("clientId","==",Oe.id)),Ai=await Dt(si);if(!Ai.empty){const $e=Ai.docs[0].data().badges||[];ve($e)}const _s=new Date().toISOString().split("T")[0],Ci=await Zo(Je(Ce,"clients",Oe.id));if(Ci.exists()){const $e=Ci.data();$e.dailyQuote&&$e.dailyQuote.date===_s?Et($e.dailyQuote):Et(null)}}catch(M){console.error("Error fetching data:",M)}T(!1)},Pn=M=>new Date(M).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),Fn=M=>{const[oe,Te]=M.split(":"),Se=parseInt(oe),Le=Se>=12?"pm":"am";return`${Se>12?Se-12:Se===0?12:Se}:${Te}${Le}`},Rn=M=>M?(M.toDate?M.toDate():new Date(M)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",Pt=M=>{const oe=new Date,Te=Yi(oe),Se=`${oe.getHours().toString().padStart(2,"0")}:${oe.getMinutes().toString().padStart(2,"0")}`;return M.date<Te||M.date===Te&&M.time<Se},_n=M=>{const Te=Yi(new Date);return M.date===Te&&!Pt(M)},Mt=()=>i.filter(M=>Pt(M)).length,ei=()=>i.filter(M=>!Pt(M)),ss=M=>{X({title:"Cancel Session?",message:`Cancel your session on ${Pn(M.date)} at ${Fn(M.time)}? This cannot be undone.`,onConfirm:async()=>{X(null),P(M.id),G(null);try{await Zi(Je(Ce,"sessions",M.id)),e(i.filter(oe=>oe.id!==M.id)),ys("Session cancelled","success")}catch(oe){console.error("Error cancelling session:",oe),ys("Failed to cancel session. Please try again.","error")}P(null)},onCancel:()=>X(null)})},ti=async()=>{try{await mt(),Wt("/")}catch(M){console.error("Failed to log out:",M)}},jt=M=>z.some(oe=>oe.sessionId===M),fn=M=>{H(M),ne(null),ue(null),k([]),D(!0)},Rt=()=>{D(!1),H(null),ne(null),ue(null),k([])},Un=()=>Oe.endDate?Oe.endDate.toDate?Oe.endDate.toDate():new Date(Oe.endDate):new Date,Hn=()=>{const M=[],oe=new Date,Te=Un(),Se=new Date(oe);for(Se.setDate(Se.getDate()+1);Se<=Te;){if(mI(Se)){const Le=Yi(Se);o.some(Qe=>Qe.date===Le)||M.push(new Date(Se))}Se.setDate(Se.getDate()+1)}return M},ln=M=>{ne(M),ue(null);const oe=V?.duration||Oe.sessionDuration||45;let Te=gI(M,oe,n,o,V?.id,d);V&&Yi(M)===V.date&&(Te=Te.filter(Se=>Se.time!==V.time)),k(Te)},ni=async()=>{if(!(!F||!ce||!V)){R(!0);try{await Uo(ft(Ce,"rescheduleRequests"),{sessionId:V.id,clientId:Oe.id,clientName:Oe.name,originalDate:V.date,originalTime:V.time,requestedDate:Yi(F),requestedTime:ce,duration:V.duration,status:"pending",createdAt:Me.now(),respondedAt:null,dismissed:!1}),Rt(),ys("Reschedule request submitted! You'll be notified when your trainer responds.","success"),Zs()}catch(M){console.error("Error submitting reschedule request:",M),ys("Failed to submit request. Please try again.","error")}R(!1)}},ca=async M=>{try{await an(Je(Ce,"rescheduleRequests",M),{dismissed:!0}),y(g.filter(oe=>oe.id!==M))}catch(oe){console.error("Error dismissing notification:",oe)}},kn=()=>{const M=ei();if(M.length===0)return null;const oe=M[0],Te=new Date,Le=new Date(oe.date+"T"+oe.time)-Te;if(Le<=0)return null;const Ve=Math.floor(Le/(1e3*60*60*24)),Qe=Math.floor(Le%(1e3*60*60*24)/(1e3*60*60)),cn=Math.floor(Le%(1e3*60*60)/(1e3*60));return{days:Ve,hours:Qe,minutes:cn,session:oe}};if(ot||b)return l.jsxs("div",{className:"client-dashboard",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("div",{className:"skeleton skeleton-logo"})})}),l.jsxs("main",{className:"client-main",children:[l.jsxs("div",{className:"skeleton-welcome",children:[l.jsx("div",{className:"skeleton skeleton-title"}),l.jsx("div",{className:"skeleton skeleton-btn-small"})]}),l.jsxs("div",{className:"skeleton-actions",children:[l.jsx("div",{className:"skeleton skeleton-btn"}),l.jsx("div",{className:"skeleton skeleton-btn"})]}),l.jsx("div",{className:"skeleton skeleton-card-large"}),l.jsx("div",{className:"skeleton skeleton-card-medium"}),l.jsx("div",{className:"skeleton skeleton-card-medium"})]})]});if(!wt||!rt||!Oe)return null;const bn=Mt(),is=Oe.totalSessions-bn,W=ei(),ye=O?Hn():[];kn();const xe=Oe.totalSessions>0?bn/Oe.totalSessions*100:0;return l.jsxs("div",{className:"client-dashboard",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("div",{className:`pull-refresh-indicator ${B>0?"visible":""} ${Ee?"refreshing":""}`,style:{height:B},children:[l.jsx("div",{className:`refresh-spinner ${Ee?"spinning":""}`,children:l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:l.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),l.jsx("span",{className:"refresh-text",children:Ee?"Refreshing...":"Pull to refresh"})]}),l.jsxs("main",{className:"client-main page-transition-enter",ref:be,onTouchStart:ns,onTouchMove:Ni,onTouchEnd:Os,children:[l.jsxs("div",{className:"welcome-section",children:[l.jsxs("h2",{children:["Welcome, ",Oe.name.split(" ")[0]]}),l.jsxs("div",{className:"welcome-actions",children:[l.jsx("button",{className:"theme-toggle",onClick:ts,"aria-label":ht?"Switch to light mode":"Switch to dark mode",children:ht?l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),l.jsx("button",{className:"logout-btn",onClick:ti,children:"Log Out"})]})]}),g.length>0&&l.jsx("div",{className:"notifications-section",children:g.map(M=>l.jsxs("div",{className:`notification ${M.status}`,children:[l.jsxs("div",{className:"notification-content",children:[l.jsx("span",{className:"notification-icon",children:M.status==="approved"?"":""}),l.jsxs("div",{className:"notification-text",children:[l.jsx("strong",{children:M.status==="approved"?"Reschedule Approved!":"Reschedule Declined"}),l.jsx("p",{children:M.status==="approved"?`Your session has been moved to ${Pn(M.requestedDate)} at ${Fn(M.requestedTime)}`:`Your request to reschedule from ${Pn(M.originalDate)} was declined. Please contact your trainer.`})]})]}),l.jsx("button",{className:"dismiss-btn",onClick:()=>ca(M.id),children:""})]},M.id))}),pe&&l.jsxs("div",{className:"ring-timer-container",children:[l.jsxs("div",{className:"ring-timer",children:[l.jsx("svg",{className:"ring-timer-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((M,oe)=>{const Te=(oe*6-90)*(Math.PI/180),Se=85,Le=96,Ve=100+Se*Math.cos(Te),Qe=100+Se*Math.sin(Te),cn=100+Le*Math.cos(Te),mn=100+Le*Math.sin(Te),si=60-pe.seconds,Ai=oe<si;return l.jsx("line",{x1:Ve,y1:Qe,x2:cn,y2:mn,className:`ring-tick ${Ai?"elapsed":"remaining"}`,strokeWidth:oe%5===0?"3":"2"},oe)})}),l.jsxs("div",{className:"ring-timer-center",children:[l.jsx("div",{className:"ring-timer-logo",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),l.jsxs("div",{className:"ring-timer-countdown",children:[pe.days>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"timer-digit",children:String(pe.days).padStart(2,"0")}),l.jsx("span",{className:"timer-colon",children:":"})]}),l.jsx("span",{className:"timer-digit",children:String(pe.hours).padStart(2,"0")}),l.jsx("span",{className:"timer-colon",children:":"}),l.jsx("span",{className:"timer-digit",children:String(pe.minutes).padStart(2,"0")}),l.jsx("span",{className:"timer-colon",children:":"}),l.jsx("span",{className:"timer-digit timer-seconds",children:String(pe.seconds).padStart(2,"0")})]}),l.jsx("div",{className:"ring-timer-label",children:"until next session"})]})]}),l.jsxs("div",{className:"ring-timer-session-info",children:[Pn(pe.session.date)," at ",Fn(pe.session.time)]})]}),l.jsxs("div",{className:"block-info-card",children:[l.jsx("div",{className:"block-header-row",children:l.jsx("h3",{children:"Your Training Block"})}),l.jsxs("div",{className:"progress-section",children:[l.jsxs("div",{className:"progress-ring-container",children:[l.jsxs("svg",{className:"progress-ring",viewBox:"0 0 100 100",children:[l.jsx("circle",{className:"progress-ring-bg",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8"}),l.jsx("circle",{className:`progress-ring-fill ${ke?"animate":""}`,cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:ke?`${2*Math.PI*42*(1-xe/100)}`:`${2*Math.PI*42}`,strokeLinecap:"round"})]}),l.jsxs("div",{className:"progress-ring-text",children:[l.jsxs("span",{className:"progress-percent",children:[Math.round(xe),"%"]}),l.jsx("span",{className:"progress-label",children:"complete"})]})]}),l.jsxs("div",{className:"progress-stats",children:[l.jsxs("div",{className:"progress-stat",children:[l.jsx("span",{className:"progress-stat-value",children:bn}),l.jsx("span",{className:"progress-stat-label",children:"Completed"})]}),l.jsxs("div",{className:"progress-stat",children:[l.jsx("span",{className:"progress-stat-value",children:is}),l.jsx("span",{className:"progress-stat-label",children:"Remaining"})]}),l.jsxs("div",{className:"progress-stat",children:[l.jsx("span",{className:"progress-stat-value",children:Oe.totalSessions}),l.jsx("span",{className:"progress-stat-label",children:"Total"})]})]})]}),l.jsxs("div",{className:"block-dates",children:[l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"Start Date"}),l.jsx("span",{className:"date-value",children:Rn(Oe.startDate)})]}),l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"End Date"}),l.jsx("span",{className:"date-value",children:Rn(Oe.endDate)})]}),l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"Session Duration"}),l.jsxs("span",{className:"date-value",children:[Oe.sessionDuration," minutes"]})]})]})]}),l.jsxs("div",{className:"quick-actions",children:[l.jsx("button",{className:"forms-btn ripple-btn",onClick:M=>{dt(M),Wt("/client/forms")},children:"Forms & Questionnaires"}),l.jsx("button",{className:"tools-btn ripple-btn",onClick:M=>{dt(M),Wt("/client/tools")},children:"Tools & Calculators"})]}),l.jsx("div",{className:"quick-actions",style:{marginTop:"-8px"},children:l.jsx("button",{className:"forms-btn ripple-btn",onClick:M=>{dt(M),Wt("/client/personal-bests")},style:{flex:"1 1 100%"},children:"Personal Bests & Progress"})}),se.length>0&&l.jsxs("div",{className:"achievements-card",children:[l.jsxs("div",{className:"achievements-card-header",children:[l.jsxs("div",{className:"achievements-card-title",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),l.jsx("span",{children:"Targets Achieved"})]}),l.jsx("span",{className:"achievements-card-count",children:se.length})]}),l.jsx("div",{className:"achievements-card-list",children:[...se].reverse().slice(0,3).map((M,oe)=>l.jsxs("div",{className:"achievements-card-item",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),l.jsx("span",{className:"achievements-card-label",children:M.label}),l.jsx("span",{className:"achievements-card-date",children:M.achievedMonth})]},oe))}),se.length>3&&l.jsxs("button",{className:"achievements-card-viewall",onClick:()=>Wt("/client/personal-bests"),children:["View all ",se.length," achievements",l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),Vt?l.jsxs("div",{className:"daily-quote-card",children:[l.jsx("div",{className:"daily-quote-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),l.jsxs("div",{className:"daily-quote-content",children:[l.jsx("div",{className:"daily-quote-text",children:Vt.text}),l.jsxs("div",{className:"daily-quote-author",children:[" ",Vt.author]})]})]}):l.jsxs("div",{className:"daily-quote-cta",onClick:()=>Wt("/client/tools/motivation"),children:[l.jsx("div",{className:"daily-quote-cta-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),l.jsxs("div",{className:"daily-quote-cta-text",children:[l.jsx("span",{className:"daily-quote-cta-title",children:"Get More Inspiration"}),l.jsx("span",{className:"daily-quote-cta-sub",children:"Tap to get today's motivation"})]}),l.jsx("svg",{className:"daily-quote-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),l.jsxs("div",{className:"sessions-section",children:[l.jsxs("h3",{children:["Upcoming Sessions (",W.length,")"]}),W.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:l.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),l.jsx("line",{x1:"20",y1:"35",x2:"80",y2:"35"}),l.jsx("line",{x1:"35",y1:"15",x2:"35",y2:"35"}),l.jsx("line",{x1:"65",y1:"15",x2:"65",y2:"35"}),l.jsx("circle",{cx:"40",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),l.jsx("circle",{cx:"60",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),l.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"}),l.jsx("circle",{cx:"60",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"})]})}),l.jsx("h4",{children:"No upcoming sessions"}),l.jsx("p",{children:"Contact your trainer to book sessions"})]}):l.jsx("div",{className:"sessions-list",children:W.map(M=>l.jsxs("div",{className:`session-card-wrapper ${w===M.id?"swiped":""}`,onTouchStart:oe=>vs(oe,M.id),onTouchMove:oe=>or(oe,M.id),children:[l.jsxs("div",{className:"session-card-swipe-actions",children:[l.jsx("button",{className:"swipe-action-btn reschedule ripple-btn",onClick:oe=>{dt(oe),G(null),fn(M)},disabled:jt(M.id),children:"Reschedule"}),l.jsx("button",{className:"swipe-action-btn cancel ripple-btn",onClick:oe=>{dt(oe),ss(M)},disabled:E===M.id,children:"Cancel"})]}),l.jsxs("div",{className:`session-card ${_n(M)?"today-session":""}`,onClick:()=>w===M.id&&G(null),children:[l.jsxs("div",{className:"session-info",children:[l.jsxs("div",{className:"session-date",children:[_n(M)&&l.jsx("span",{className:"today-label",children:"Today - "}),Pn(M.date)]}),l.jsxs("div",{className:"session-time",children:[Fn(M.time)," (",M.duration," min)"]}),jt(M.id)&&l.jsx("div",{className:"pending-badge",children:"Reschedule pending"})]}),l.jsxs("div",{className:"session-actions",children:[l.jsx("button",{className:"reschedule-btn ripple-btn",onClick:oe=>{oe.stopPropagation(),dt(oe),fn(M)},disabled:jt(M.id),children:"Reschedule"}),l.jsx("button",{className:"cancel-btn ripple-btn",onClick:oe=>{oe.stopPropagation(),dt(oe),ss(M)},disabled:E===M.id,children:E===M.id?"Cancelling...":"Cancel"})]}),l.jsxs("div",{className:"swipe-hint",children:[l.jsx("span",{className:"swipe-hint-text",children:"Swipe"}),l.jsxs("span",{className:"swipe-hint-chevrons",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})]})]})]})]},M.id))})]}),l.jsxs("div",{className:"completed-section",children:[l.jsxs("h3",{children:["Completed Sessions (",bn,")"]}),bn===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:l.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"50",cy:"50",r:"35"}),l.jsx("path",{d:"M35 50 L45 60 L65 40",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),l.jsx("path",{d:"M50 25 L50 50 L65 55",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsx("h4",{children:"No completed sessions yet"}),l.jsx("p",{children:"Your completed sessions will appear here"})]}):l.jsxs("div",{className:"sessions-list completed",children:[i.filter(M=>Pt(M)).slice(-5).reverse().map(M=>l.jsxs("div",{className:"session-card completed",children:[l.jsxs("div",{className:"session-info",children:[l.jsx("div",{className:"session-date",children:Pn(M.date)}),l.jsx("div",{className:"session-time",children:Fn(M.time)})]}),l.jsx("span",{className:"completed-badge",children:"Completed"})]},M.id)),bn>5&&l.jsxs("div",{className:"more-sessions",children:["And ",bn-5," more completed sessions"]})]})]})]}),O&&V&&l.jsx("div",{className:"modal-overlay",onClick:Rt,children:l.jsxs("div",{className:"reschedule-modal",onClick:M=>M.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h3",{children:"Reschedule Session"}),l.jsx("button",{className:"close-modal-btn",onClick:Rt,children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsx("div",{className:"current-session-info",children:l.jsxs("p",{children:["Current: ",l.jsx("strong",{children:Pn(V.date)})," at ",l.jsx("strong",{children:Fn(V.time)})]})}),l.jsxs("div",{className:"date-selection",children:[l.jsx("h4",{children:"Select New Date"}),ye.length===0?l.jsx("p",{className:"no-dates",children:"No available dates within your training block"}):l.jsx("div",{className:"dates-grid",children:ye.map((M,oe)=>l.jsxs("button",{className:`date-btn ${F&&Yi(F)===Yi(M)?"selected":""}`,onClick:()=>ln(M),children:[l.jsx("span",{className:"date-day",children:M.toLocaleDateString("en-GB",{weekday:"short"})}),l.jsx("span",{className:"date-num",children:M.getDate()}),l.jsx("span",{className:"date-month",children:M.toLocaleDateString("en-GB",{month:"short"})})]},oe))})]}),F&&l.jsxs("div",{className:"time-selection",children:[l.jsx("h4",{children:"Select Time"}),me.length===0?l.jsx("p",{className:"no-slots",children:"No available slots on this date"}):l.jsx("div",{className:"times-grid",children:me.map((M,oe)=>l.jsx("button",{className:`time-btn ${ce===M.time?"selected":""} ${M.period}`,onClick:()=>ue(M.time),children:Fn(M.time)},oe))})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"cancel-modal-btn",onClick:Rt,children:"Cancel"}),l.jsx("button",{className:"submit-reschedule-btn",onClick:ni,disabled:!F||!ce||N,children:N?"Submitting...":"Request Reschedule"})]})]})}),q&&l.jsxs("div",{className:`toast-notification ${q.type}`,children:[l.jsx("span",{className:"toast-icon",children:q.type==="success"?l.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):q.type==="error"?l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),l.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),l.jsx("span",{className:"toast-message",children:q.message}),l.jsx("button",{className:"toast-close",onClick:()=>j(null),children:""})]}),Y&&l.jsx("div",{className:"confirm-modal-overlay",onClick:Y.onCancel,children:l.jsxs("div",{className:"confirm-modal",onClick:M=>M.stopPropagation(),children:[l.jsx("h3",{children:Y.title}),l.jsx("p",{children:Y.message}),l.jsxs("div",{className:"confirm-modal-actions",children:[l.jsx("button",{className:"confirm-cancel-btn ripple-btn",onClick:M=>{dt(M),Y.onCancel()},children:"Keep Session"}),l.jsx("button",{className:"confirm-btn ripple-btn",onClick:M=>{dt(M),Y.onConfirm()},children:"Yes, Cancel"})]})]})}),I&&l.jsx("div",{className:"fab-backdrop",onClick:()=>K(!1)}),l.jsxs("div",{className:`fab-container ${I?"open":""}`,children:[l.jsx("button",{className:`fab-main ripple-btn ${I?"open":""}`,onClick:M=>{dt(M),K(!I)},"aria-label":"Quick actions",children:l.jsx("span",{className:"fab-icon",children:"+"})}),l.jsxs("div",{className:"fab-actions",children:[l.jsxs("button",{className:"fab-action ripple-btn",onClick:M=>{dt(M),K(!1),Wt("/client/tools")},children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"Tools & Calculators"]}),l.jsxs("button",{className:"fab-action ripple-btn",onClick:M=>{dt(M),K(!1),Wt("/client/forms")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),l.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),l.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Forms & Questionnaires"]}),l.jsxs("button",{className:"fab-action ripple-btn",onClick:M=>{dt(M),K(!1),Wt("/client/personal-bests")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 20V10"}),l.jsx("path",{d:"M18 20V4"}),l.jsx("path",{d:"M6 20v-4"})]}),"Personal Bests"]}),Oe?.circuitAccess&&l.jsxs("button",{className:"fab-action ripple-btn",onClick:M=>{dt(M),K(!1),Wt("/client/circuit")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M12 6v6l4 2"})]}),"Circuit Classes"]}),Oe?.coreBuddyAccess&&l.jsxs("button",{className:"fab-action ripple-btn",onClick:M=>{dt(M),K(!1),Wt("/client/core-buddy")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),"Core Buddy"]})]})]})]})}function vI(){const[i,e]=C.useState(null),[n,a]=C.useState(!1),{currentUser:o,isClient:u,clientData:d,logout:p,loading:g}=gs(),y=Vn(),[b,T]=C.useState({fitnessGoals:"",currentActivityLevel:"",exerciseHistory:"",injuries:"",medicalConditions:"",sleepHours:"",stressLevel:"",dietaryInfo:"",availability:"",additionalInfo:""}),[E,P]=C.useState({q1HeartCondition:!1,q2ChestPain:!1,q3ChestPainLastMonth:!1,q4Balance:!1,q5BoneJoint:!1,q6BloodPressure:!1,q7OtherReason:!1,additionalDetails:"",declaration:!1});C.useEffect(()=>{!g&&(!o||!u)&&y("/")},[o,u,g,y]),C.useEffect(()=>{d?.welcomeForm&&T(d.welcomeForm),d?.parqForm&&P(d.parqForm)},[d]);const O=ce=>{const{name:ue,value:me}=ce.target;T(k=>({...k,[ue]:me}))},D=ce=>{const{name:ue,type:me,checked:k,value:N}=ce.target;P(R=>({...R,[ue]:me==="checkbox"?k:N}))},V=async()=>{a(!0);try{await an(Je(Ce,"clients",d.id),{welcomeForm:{...b,completedAt:Me.now()}}),alert("Welcome form saved successfully!"),e(null)}catch(ce){console.error("Error saving welcome form:",ce),alert("Failed to save form. Please try again.")}a(!1)},H=async()=>{if(!E.declaration){alert("Please confirm the declaration to submit the form.");return}a(!0);try{await an(Je(Ce,"clients",d.id),{parqForm:{...E,completedAt:Me.now()}}),alert("PAR-Q form saved successfully!"),e(null)}catch(ce){console.error("Error saving PAR-Q form:",ce),alert("Failed to save form. Please try again.")}a(!1)};if(g)return l.jsx("div",{className:"client-loading",children:"Loading..."});if(!o||!u||!d)return null;const F=!!d?.welcomeForm?.completedAt,ne=!!d?.parqForm?.completedAt;return l.jsxs("div",{className:"client-forms-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"forms-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>y("/client"),children:" Back"}),i?i==="welcome"?l.jsxs("div",{className:"form-container",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h2",{children:"Welcome Questionnaire"}),l.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),l.jsxs("div",{className:"form-body",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"What are your main fitness goals?"}),l.jsx("textarea",{name:"fitnessGoals",value:b.fitnessGoals,onChange:O,placeholder:"e.g., Lose weight, build muscle, improve endurance, increase flexibility...",rows:"3"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"How would you describe your current activity level?"}),l.jsxs("select",{name:"currentActivityLevel",value:b.currentActivityLevel,onChange:O,children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),l.jsx("option",{value:"light",children:"Lightly Active (1-2 days/week)"}),l.jsx("option",{value:"moderate",children:"Moderately Active (3-4 days/week)"}),l.jsx("option",{value:"active",children:"Very Active (5+ days/week)"}),l.jsx("option",{value:"athlete",children:"Athlete/Highly Active"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"What is your exercise history?"}),l.jsx("textarea",{name:"exerciseHistory",value:b.exerciseHistory,onChange:O,placeholder:"Describe your previous experience with exercise, sports, or training...",rows:"3"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Do you have any current or past injuries?"}),l.jsx("textarea",{name:"injuries",value:b.injuries,onChange:O,placeholder:"List any injuries that may affect your training...",rows:"2"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Do you have any medical conditions we should know about?"}),l.jsx("textarea",{name:"medicalConditions",value:b.medicalConditions,onChange:O,placeholder:"e.g., Diabetes, asthma, heart conditions...",rows:"2"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"How many hours of sleep do you typically get?"}),l.jsxs("select",{name:"sleepHours",value:b.sleepHours,onChange:O,children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"less-5",children:"Less than 5 hours"}),l.jsx("option",{value:"5-6",children:"5-6 hours"}),l.jsx("option",{value:"7-8",children:"7-8 hours"}),l.jsx("option",{value:"more-8",children:"More than 8 hours"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"How would you rate your current stress level?"}),l.jsxs("select",{name:"stressLevel",value:b.stressLevel,onChange:O,children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"low",children:"Low"}),l.jsx("option",{value:"moderate",children:"Moderate"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"very-high",children:"Very High"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Tell us about your diet/nutrition"}),l.jsx("textarea",{name:"dietaryInfo",value:b.dietaryInfo,onChange:O,placeholder:"Any dietary restrictions, typical eating habits, nutrition goals...",rows:"3"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"What is your preferred training schedule/availability?"}),l.jsx("textarea",{name:"availability",value:b.availability,onChange:O,placeholder:"Days and times that work best for you...",rows:"2"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Anything else you'd like us to know?"}),l.jsx("textarea",{name:"additionalInfo",value:b.additionalInfo,onChange:O,placeholder:"Any other information that might be helpful...",rows:"3"})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),l.jsx("button",{className:"save-btn",onClick:V,disabled:n,children:n?"Saving...":"Save"})]})]})]}):l.jsxs("div",{className:"form-container",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h2",{children:"PAR-Q Health Screening"}),l.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),l.jsxs("div",{className:"form-body",children:[l.jsx("div",{className:"parq-intro",children:l.jsx("p",{children:"The Physical Activity Readiness Questionnaire (PAR-Q) is designed to identify those who should check with a doctor before starting an exercise program."})}),l.jsxs("div",{className:"parq-questions",children:[l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q1HeartCondition",checked:E.q1HeartCondition,onChange:D}),l.jsx("span",{children:"Has your doctor ever said that you have a heart condition and that you should only do physical activity recommended by a doctor?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q2ChestPain",checked:E.q2ChestPain,onChange:D}),l.jsx("span",{children:"Do you feel pain in your chest when you do physical activity?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q3ChestPainLastMonth",checked:E.q3ChestPainLastMonth,onChange:D}),l.jsx("span",{children:"In the past month, have you had chest pain when you were not doing physical activity?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q4Balance",checked:E.q4Balance,onChange:D}),l.jsx("span",{children:"Do you lose your balance because of dizziness or do you ever lose consciousness?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q5BoneJoint",checked:E.q5BoneJoint,onChange:D}),l.jsx("span",{children:"Do you have a bone or joint problem that could be made worse by a change in your physical activity?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q6BloodPressure",checked:E.q6BloodPressure,onChange:D}),l.jsx("span",{children:"Is your doctor currently prescribing drugs for your blood pressure or heart condition?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q7OtherReason",checked:E.q7OtherReason,onChange:D}),l.jsx("span",{children:"Do you know of any other reason why you should not do physical activity?"})]})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"If you answered YES to any questions, please provide details:"}),l.jsx("textarea",{name:"additionalDetails",value:E.additionalDetails,onChange:D,placeholder:"Please explain any conditions or concerns...",rows:"4"})]}),l.jsx("div",{className:"parq-declaration",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"declaration",checked:E.declaration,onChange:D}),l.jsx("span",{children:"I have read, understood and completed this questionnaire. Any questions I had were answered to my full satisfaction. I confirm that the information provided is accurate to the best of my knowledge."})]})}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),l.jsx("button",{className:"save-btn",onClick:H,disabled:n,children:n?"Saving...":"Submit"})]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"forms-intro",children:[l.jsx("h2",{children:"Forms"}),l.jsx("p",{children:"Please complete these forms to help us better understand your fitness journey and ensure your safety."})]}),l.jsxs("div",{className:"forms-list",children:[l.jsxs("div",{className:`form-card ${F?"completed":""}`,children:[l.jsxs("div",{className:"form-card-info",children:[l.jsx("h3",{children:"Welcome Questionnaire"}),l.jsx("p",{children:"Tell us about your fitness goals, experience, and lifestyle."}),F&&l.jsx("span",{className:"completed-badge",children:"Completed"})]}),l.jsx("button",{onClick:()=>e("welcome"),children:F?"View / Edit":"Start"})]}),l.jsxs("div",{className:`form-card ${ne?"completed":""}`,children:[l.jsxs("div",{className:"form-card-info",children:[l.jsx("h3",{children:"PAR-Q Health Screening"}),l.jsx("p",{children:"Physical Activity Readiness Questionnaire for your safety."}),ne&&l.jsx("span",{className:"completed-badge",children:"Completed"})]}),l.jsx("button",{onClick:()=>e("parq"),children:ne?"View / Edit":"Start"})]})]})]})]})]})}function _I(){const{currentUser:i,isClient:e,clientData:n,loading:a}=gs(),o=Vn();return C.useEffect(()=>{!a&&(!i||!e)&&o("/")},[i,e,a,o]),a?l.jsx("div",{className:"client-loading",children:"Loading..."}):!i||!e||!n?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>o("/client"),children:" Back"}),l.jsxs("div",{className:"tools-intro",children:[l.jsx("h2",{children:"Tools"}),l.jsx("p",{children:"Use these tools to help plan your nutrition and stay motivated."})]}),l.jsxs("div",{className:"tools-grid",children:[l.jsxs("div",{className:"tool-select-card",onClick:()=>o("/client/tools/macros"),children:[l.jsx("div",{className:"tool-select-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M4 6h16M4 12h16M4 18h7"}),l.jsx("circle",{cx:"17",cy:"18",r:"3"}),l.jsx("path",{d:"M17 15v6M14 18h6"})]})}),l.jsxs("div",{className:"tool-select-info",children:[l.jsx("h3",{children:"Macro Calculator"}),l.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),l.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),l.jsxs("div",{className:"tool-select-card",onClick:()=>o("/client/tools/snacks"),children:[l.jsx("div",{className:"tool-select-icon snack-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M18 8h1a4 4 0 010 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),l.jsxs("div",{className:"tool-select-info",children:[l.jsx("h3",{children:"Protein Snack Generator"}),l.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),l.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),l.jsxs("div",{className:"tool-select-card",onClick:()=>o("/client/tools/motivation"),children:[l.jsx("div",{className:"tool-select-icon quote-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),l.jsxs("div",{className:"tool-select-info",children:[l.jsx("h3",{children:"Daily Motivation"}),l.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),l.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]})]})]})}function bI(){const{currentUser:i,isClient:e,clientData:n,loading:a}=gs(),o=Vn(),[u,d]=C.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",activityLevel:"moderate",goal:"maintain",deficitLevel:"moderate"}),[p,g]=C.useState(null),[y,b]=C.useState(!1);C.useEffect(()=>{!a&&(!i||!e)&&o("/")},[i,e,a,o]);const T=D=>{const{name:V,value:H}=D.target;d(F=>({...F,[V]:H})),b(!1)},E=()=>{let D=parseFloat(u.weight);u.weightUnit==="lbs"&&(D=D*.453592);let V;if(u.heightUnit==="cm")V=parseFloat(u.height);else{const je=parseFloat(u.heightFeet)||0,B=parseFloat(u.heightInches)||0;V=je*30.48+B*2.54}const H=parseInt(u.age);let F;u.gender==="male"?F=10*D+6.25*V-5*H+5:F=10*D+6.25*V-5*H-161;const ce=F*{sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[u.activityLevel];let ue=ce,me,k;switch(u.goal){case"lose":ue=ce-{light:250,moderate:500,harsh:750}[u.deficitLevel],me=2.2,k=.3;break;case"build":ue=ce+300,me=2,k=.22;break;default:me=1.8,k=.25;break}const N=u.gender==="male"?1500:1200;ue=Math.max(ue,N);const R=Math.round(D*me),z=R*4,L=ue*k,q=Math.round(L/9),j=ue-z-L,Ee=Math.max(0,Math.round(j/4));g({bmr:Math.round(F),tdee:Math.round(ce),targetCalories:Math.round(ue),protein:R,carbs:Ee,fats:q,proteinCalories:Math.round(z),carbCalories:Math.round(j),fatCalories:Math.round(L)}),b(!0)},P=()=>{const D=u.weight&&parseFloat(u.weight)>0,V=u.age&&parseInt(u.age)>0;let H;return u.heightUnit==="cm"?H=u.height&&parseFloat(u.height)>0:H=u.heightFeet&&parseFloat(u.heightFeet)>0||u.heightInches&&parseFloat(u.heightInches)>0,D&&V&&H},O=()=>{switch(u.goal){case"lose":return"Weight Loss";case"build":return"Muscle Building";default:return"Maintenance"}};return a?l.jsx("div",{className:"client-loading",children:"Loading..."}):!i||!e||!n?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>o("/client/tools"),children:" Back to Tools"}),l.jsxs("div",{className:"tool-card",children:[l.jsxs("div",{className:"tool-header",children:[l.jsx("h3",{children:"Macro Calculator"}),l.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),l.jsxs("div",{className:"calculator-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Gender"}),l.jsxs("div",{className:"toggle-group",children:[l.jsx("button",{type:"button",className:u.gender==="male"?"active":"",onClick:()=>{d(D=>({...D,gender:"male"})),b(!1)},children:"Male"}),l.jsx("button",{type:"button",className:u.gender==="female"?"active":"",onClick:()=>{d(D=>({...D,gender:"female"})),b(!1)},children:"Female"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Age"}),l.jsx("input",{type:"number",name:"age",value:u.age,onChange:T,placeholder:"Years",min:"15",max:"100"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Weight"}),l.jsxs("div",{className:"input-with-unit",children:[l.jsx("input",{type:"number",name:"weight",value:u.weight,onChange:T,placeholder:u.weightUnit==="kg"?"kg":"lbs",min:"30",max:"300"}),l.jsxs("div",{className:"unit-toggle",children:[l.jsx("button",{type:"button",className:u.weightUnit==="kg"?"active":"",onClick:()=>{d(D=>({...D,weightUnit:"kg"})),b(!1)},children:"kg"}),l.jsx("button",{type:"button",className:u.weightUnit==="lbs"?"active":"",onClick:()=>{d(D=>({...D,weightUnit:"lbs"})),b(!1)},children:"lbs"})]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Height"}),l.jsxs("div",{className:"input-with-unit",children:[u.heightUnit==="cm"?l.jsx("input",{type:"number",name:"height",value:u.height,onChange:T,placeholder:"cm",min:"100",max:"250"}):l.jsxs("div",{className:"height-imperial",children:[l.jsx("input",{type:"number",name:"heightFeet",value:u.heightFeet,onChange:T,placeholder:"ft",min:"4",max:"7"}),l.jsx("input",{type:"number",name:"heightInches",value:u.heightInches,onChange:T,placeholder:"in",min:"0",max:"11"})]}),l.jsxs("div",{className:"unit-toggle",children:[l.jsx("button",{type:"button",className:u.heightUnit==="cm"?"active":"",onClick:()=>{d(D=>({...D,heightUnit:"cm"})),b(!1)},children:"cm"}),l.jsx("button",{type:"button",className:u.heightUnit==="ft"?"active":"",onClick:()=>{d(D=>({...D,heightUnit:"ft"})),b(!1)},children:"ft/in"})]})]})]})]}),l.jsxs("div",{className:"form-group full-width",children:[l.jsx("label",{children:"Activity Level"}),l.jsxs("select",{name:"activityLevel",value:u.activityLevel,onChange:T,children:[l.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),l.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),l.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),l.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"}),l.jsx("option",{value:"veryActive",children:"Extra Active (athlete/physical job)"})]})]}),l.jsxs("div",{className:"form-group full-width",children:[l.jsx("label",{children:"Fitness Goal"}),l.jsxs("div",{className:"goal-options",children:[l.jsxs("button",{type:"button",className:`goal-btn ${u.goal==="lose"?"active":""}`,onClick:()=>{d(D=>({...D,goal:"lose"})),b(!1)},children:[l.jsx("span",{className:"goal-icon",children:"-"}),l.jsx("span",{children:"Lose Weight"})]}),l.jsxs("button",{type:"button",className:`goal-btn ${u.goal==="maintain"?"active":""}`,onClick:()=>{d(D=>({...D,goal:"maintain"})),b(!1)},children:[l.jsx("span",{className:"goal-icon",children:"="}),l.jsx("span",{children:"Maintain"})]}),l.jsxs("button",{type:"button",className:`goal-btn ${u.goal==="build"?"active":""}`,onClick:()=>{d(D=>({...D,goal:"build"})),b(!1)},children:[l.jsx("span",{className:"goal-icon",children:"+"}),l.jsx("span",{children:"Build Muscle"})]})]})]}),u.goal==="lose"&&l.jsxs("div",{className:"form-group full-width deficit-section",children:[l.jsx("label",{children:"Calorie Deficit Level"}),l.jsxs("div",{className:"deficit-options",children:[l.jsxs("button",{type:"button",className:`deficit-btn ${u.deficitLevel==="light"?"active":""}`,onClick:()=>{d(D=>({...D,deficitLevel:"light"})),b(!1)},children:[l.jsx("span",{className:"deficit-name",children:"Light"}),l.jsx("span",{className:"deficit-desc",children:"-250 cal/day"}),l.jsx("span",{className:"deficit-rate",children:"~0.5 lb/week"})]}),l.jsxs("button",{type:"button",className:`deficit-btn ${u.deficitLevel==="moderate"?"active":""}`,onClick:()=>{d(D=>({...D,deficitLevel:"moderate"})),b(!1)},children:[l.jsx("span",{className:"deficit-name",children:"Moderate"}),l.jsx("span",{className:"deficit-desc",children:"-500 cal/day"}),l.jsx("span",{className:"deficit-rate",children:"~1 lb/week"})]}),l.jsxs("button",{type:"button",className:`deficit-btn ${u.deficitLevel==="harsh"?"active":""}`,onClick:()=>{d(D=>({...D,deficitLevel:"harsh"})),b(!1)},children:[l.jsx("span",{className:"deficit-name",children:"Aggressive"}),l.jsx("span",{className:"deficit-desc",children:"-750 cal/day"}),l.jsx("span",{className:"deficit-rate",children:"~1.5 lb/week"})]})]})]}),l.jsx("button",{className:"calculate-btn",onClick:E,disabled:!P(),children:"Calculate Macros"})]}),y&&p&&(()=>{const D=p.proteinCalories+p.carbCalories+p.fatCalories,V=Math.round(p.proteinCalories/D*100),H=Math.round(p.carbCalories/D*100),F=100-V-H;return l.jsxs("div",{className:"results-section",children:[l.jsxs("div",{className:"results-header",children:[l.jsx("h4",{children:"Your Daily Targets"}),l.jsx("span",{className:"goal-badge",children:O()})]}),l.jsxs("div",{className:"calories-display",children:[l.jsx("span",{className:"calories-value",children:p.targetCalories}),l.jsx("span",{className:"calories-label",children:"calories/day"})]}),l.jsxs("div",{className:"macro-percentage-bar",children:[l.jsxs("div",{className:"macro-bar-track",children:[l.jsx("div",{className:"macro-bar-segment protein",style:{width:`${V}%`},children:V>=12&&l.jsxs("span",{children:[V,"%"]})}),l.jsx("div",{className:"macro-bar-segment carbs",style:{width:`${H}%`},children:H>=12&&l.jsxs("span",{children:[H,"%"]})}),l.jsx("div",{className:"macro-bar-segment fats",style:{width:`${F}%`},children:F>=12&&l.jsxs("span",{children:[F,"%"]})})]}),l.jsxs("div",{className:"macro-bar-legend",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot protein"}),"Protein ",V,"%"]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot carbs"}),"Carbs ",H,"%"]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot fats"}),"Fats ",F,"%"]})]})]}),l.jsxs("div",{className:"macros-grid",children:[l.jsxs("div",{className:"macro-card protein",style:{animationDelay:"0.1s"},children:[l.jsxs("div",{className:"macro-value",children:[p.protein,"g"]}),l.jsx("div",{className:"macro-label",children:"Protein"}),l.jsxs("div",{className:"macro-calories",children:[p.proteinCalories," cal"]})]}),l.jsxs("div",{className:"macro-card carbs",style:{animationDelay:"0.2s"},children:[l.jsxs("div",{className:"macro-value",children:[p.carbs,"g"]}),l.jsx("div",{className:"macro-label",children:"Carbs"}),l.jsxs("div",{className:"macro-calories",children:[p.carbCalories," cal"]})]}),l.jsxs("div",{className:"macro-card fats",style:{animationDelay:"0.3s"},children:[l.jsxs("div",{className:"macro-value",children:[p.fats,"g"]}),l.jsx("div",{className:"macro-label",children:"Fats"}),l.jsxs("div",{className:"macro-calories",children:[p.fatCalories," cal"]})]})]}),l.jsxs("div",{className:"results-info",children:[l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Basal Metabolic Rate (BMR)"}),l.jsxs("span",{className:"info-value",children:[p.bmr," cal"]})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Total Daily Energy Expenditure (TDEE)"}),l.jsxs("span",{className:"info-value",children:[p.tdee," cal"]})]})]}),l.jsx("div",{className:"results-note",children:l.jsx("p",{children:"These are estimated values. Individual results may vary based on metabolism, body composition, and other factors. Consult with your trainer for personalized guidance."})})]})})()]})]})]})}const Zb=[{name:"Greek Yoghurt & Honey",protein:20,calories:180,prep:0,category:"no-prep",instructions:"Grab a pot of Greek yoghurt, drizzle with honey. Done. Go for full-fat or 0% depending on your macros."},{name:"Protein Bar",protein:20,calories:220,prep:0,category:"no-prep",instructions:"Unwrap and eat. Keep one in your bag for emergencies. Look for bars with 20g+ protein and under 5g sugar."},{name:"Beef Jerky",protein:15,calories:120,prep:0,category:"no-prep",instructions:"Open the pack and snack. Great for on the go. Check the label  some brands are loaded with sugar."},{name:"Handful of Almonds",protein:7,calories:170,prep:0,category:"no-prep",instructions:"Grab about 30g (roughly 23 almonds). Good fats and protein. Keep a bag at your desk or in your car."},{name:"Boiled Eggs (x2)",protein:12,calories:140,prep:0,category:"no-prep",instructions:"Batch boil at the start of the week  10 mins in boiling water, cool in ice water, peel and store in the fridge. Grab 2 when you need them."},{name:"String Cheese (x2)",protein:14,calories:160,prep:0,category:"no-prep",instructions:"Peel and eat. Keep a few in the fridge for quick grabs. Pair with some fruit if you want extra carbs."},{name:"Cottage Cheese Pot",protein:14,calories:110,prep:0,category:"no-prep",instructions:"Eat straight from the pot. Add a pinch of salt and pepper, or keep it sweet with a drizzle of honey."},{name:"Edamame Beans",protein:11,calories:120,prep:0,category:"no-prep",instructions:"Buy pre-cooked and shelled from the supermarket. Sprinkle with sea salt or chilli flakes. Eat cold or warm in the microwave for 1 min."},{name:"Turkey Slices (50g)",protein:12,calories:60,prep:0,category:"no-prep",instructions:"Straight from the pack. Roll up a few slices on their own or wrap around some cheese for extra protein."},{name:"Roasted Chickpeas",protein:10,calories:160,prep:0,category:"no-prep",instructions:"Buy a bag of roasted chickpeas or make a batch: drain tinned chickpeas, toss in oil and spices, roast at 200C for 25 mins. Store in a jar."},{name:"Protein Shake & Banana",protein:30,calories:280,prep:1,category:"quick",instructions:"Add one scoop of protein powder to 300ml water or milk in a shaker. Shake for 10 seconds. Eat a banana on the side."},{name:"Peanut Butter on Rice Cakes",protein:14,calories:260,prep:1,category:"quick",instructions:"Spread 1-2 tablespoons of peanut butter across 2 rice cakes. Top with sliced banana or a drizzle of honey if you want."},{name:"Greek Yoghurt & Granola",protein:22,calories:300,prep:1,category:"quick",instructions:"Scoop Greek yoghurt into a bowl. Top with a handful of granola and some berries. Use high-protein granola if you can find it."},{name:"Turkey & Cream Cheese Roll-Ups",protein:18,calories:180,prep:2,category:"quick",instructions:"Lay out 3-4 turkey slices. Spread a thin layer of cream cheese on each. Roll them up. Add cucumber or spinach inside for crunch."},{name:"Cottage Cheese & Pineapple",protein:15,calories:160,prep:1,category:"quick",instructions:"Scoop cottage cheese into a bowl, top with tinned or fresh pineapple chunks. The sweet and savoury combo works surprisingly well."},{name:"Ham & Cheese Wrap",protein:22,calories:320,prep:2,category:"quick",instructions:"Lay a tortilla flat. Add 2-3 ham slices and a slice of cheese. Add lettuce or spinach if you have it. Roll up tight and eat."},{name:"Tuna & Crackers",protein:20,calories:220,prep:2,category:"quick",instructions:"Drain a small tin of tuna, mix with a squeeze of lemon and black pepper. Spoon onto 4-5 crackers. Add hot sauce if you like it."},{name:"Protein Yoghurt Bowl",protein:25,calories:250,prep:1,category:"quick",instructions:"Mix a scoop of protein powder into Greek yoghurt until smooth. Top with berries, nuts, or a drizzle of honey."},{name:"Hummus & Veggie Sticks",protein:8,calories:180,prep:1,category:"quick",instructions:"Grab a pot of hummus and chop up carrots, cucumber, and peppers into sticks. Dip and eat. Simple."},{name:"Chocolate Milk (500ml)",protein:17,calories:340,prep:1,category:"quick",instructions:"Pour 500ml milk, stir in 2 tablespoons of chocolate protein powder or cocoa. Great post-workout  the carbs help recovery."},{name:"Peanut Butter & Apple Slices",protein:10,calories:250,prep:1,category:"quick",instructions:"Slice an apple into wedges. Dip into 1-2 tablespoons of peanut butter. Sweet, crunchy, and filling."},{name:"Overnight Oats (pre-made)",protein:18,calories:310,prep:1,category:"quick",instructions:"Prep the night before: mix 50g oats, 1 scoop protein powder, 150ml milk, and a handful of berries in a jar. Refrigerate overnight. Grab and eat cold."},{name:"Smoked Salmon on Crackers",protein:16,calories:200,prep:2,category:"quick",instructions:"Lay out 4-5 crackers. Top each with a slice of smoked salmon and a small squeeze of lemon. Add cream cheese if you want extra."},{name:"Protein Smoothie Bowl",protein:28,calories:350,prep:2,category:"quick",instructions:"Blend 1 scoop protein powder, 1 frozen banana, and a splash of milk until thick. Pour into a bowl. Top with granola, berries, and seeds."},{name:"Almond Butter & Banana Toast",protein:12,calories:280,prep:2,category:"quick",instructions:"Toast a slice of wholemeal bread. Spread with almond butter. Slice half a banana on top. Sprinkle with cinnamon."},{name:"Scrambled Eggs on Toast",protein:22,calories:320,prep:4,category:"cook",instructions:"Crack 3 eggs into a pan on medium-low heat. Stir continuously with a spatula until just set  keep them soft. Season with salt and pepper, serve on wholemeal toast."},{name:"Protein Pancake Mug Cake",protein:25,calories:280,prep:3,category:"cook",instructions:"Mix 1 scoop protein powder, 1 egg, and 2 tablespoons of oats in a mug. Microwave for 90 seconds. Top with peanut butter or berries."},{name:"Tuna Mayo on Toast",protein:24,calories:340,prep:3,category:"cook",instructions:"Drain a tin of tuna, mix with 1 tablespoon of light mayo, salt, pepper, and a squeeze of lemon. Toast 2 slices of bread. Pile the tuna on top."},{name:"Egg & Cheese Muffin",protein:18,calories:300,prep:4,category:"cook",instructions:"Fry or microwave an egg. Toast an English muffin. Layer the egg with a slice of cheese and optionally a slice of ham. Press together."},{name:"Chicken Quesadilla",protein:26,calories:380,prep:5,category:"cook",instructions:"Use leftover chicken or pre-cooked slices. Lay a tortilla in a dry pan on medium heat. Add chicken and grated cheese on one half. Fold over, cook 2 mins each side until golden and melted."},{name:"Beans on Toast",protein:16,calories:340,prep:3,category:"cook",instructions:"Heat a tin of baked beans in the microwave for 2 mins, stirring halfway. Toast 2 slices of wholemeal bread. Pour beans on top. Add grated cheese for extra protein."},{name:"Omelette (2 eggs)",protein:14,calories:180,prep:4,category:"cook",instructions:"Beat 2 eggs with salt and pepper. Pour into a hot, lightly oiled pan. Swirl to cover the base. Add fillings (cheese, ham, peppers) when the edges set. Fold in half and serve."},{name:"Protein Porridge",protein:28,calories:380,prep:4,category:"cook",instructions:"Cook 50g oats with 250ml milk in a pan or microwave (3 mins). Stir in 1 scoop of protein powder once it cools slightly. Top with banana and a drizzle of honey."},{name:"Cheese Toastie",protein:16,calories:350,prep:3,category:"cook",instructions:"Butter the outside of 2 slices of bread. Place cheese (and ham if you have it) between the unbuttered sides. Cook in a dry pan on medium heat, 2 mins each side until golden."},{name:"Egg Fried Rice (leftover rice)",protein:16,calories:360,prep:5,category:"cook",instructions:"Heat a splash of oil in a pan on high heat. Add leftover cold rice and stir-fry for 2 mins. Push to one side, crack in 2 eggs and scramble. Mix together, add soy sauce to taste."}];function xI(){const{currentUser:i,isClient:e,clientData:n,loading:a}=gs(),o=Vn(),[u,d]=C.useState(null),[p,g]=C.useState("all"),[y,b]=C.useState(!1),T=C.useRef([]);C.useEffect(()=>{!a&&(!i||!e)&&o("/")},[i,e,a,o]);const E=V=>{const H=[...V];for(let F=H.length-1;F>0;F--){const ne=Math.floor(Math.random()*(F+1));[H[F],H[ne]]=[H[ne],H[F]]}return H},P=()=>{const V=p==="all"?Zb:Zb.filter(H=>H.category===p);T.current.length===0&&(T.current=E(V)),b(!0),setTimeout(()=>{const H=T.current.pop();d(H),b(!1)},300)},O=V=>V===0?"No prep":`${V} min`,D=V=>{switch(V){case"no-prep":return"Grab & Go";case"quick":return"Quick Prep";case"cook":return"Light Cook";default:return V}};return a?l.jsx("div",{className:"client-loading",children:"Loading..."}):!i||!e||!n?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>o("/client/tools"),children:" Back to Tools"}),l.jsxs("div",{className:"tool-card",children:[l.jsxs("div",{className:"tool-header",children:[l.jsx("h3",{children:"Protein Snack Generator"}),l.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),l.jsxs("div",{className:"snack-generator",children:[l.jsx("div",{className:"snack-filters",children:[{value:"all",label:"All"},{value:"no-prep",label:"Grab & Go"},{value:"quick",label:"Quick Prep"},{value:"cook",label:"Light Cook"}].map(V=>l.jsx("button",{className:`snack-filter-btn ${p===V.value?"active":""}`,onClick:()=>{g(V.value),d(null),T.current=[]},children:V.label},V.value))}),u&&!y&&l.jsxs("div",{className:"snack-result",children:[l.jsx("div",{className:"snack-name",children:u.name}),l.jsxs("div",{className:"snack-details",children:[l.jsxs("div",{className:"snack-detail",children:[l.jsxs("span",{className:"snack-detail-value",children:[u.protein,"g"]}),l.jsx("span",{className:"snack-detail-label",children:"Protein"})]}),l.jsxs("div",{className:"snack-detail",children:[l.jsx("span",{className:"snack-detail-value",children:u.calories}),l.jsx("span",{className:"snack-detail-label",children:"Calories"})]}),l.jsxs("div",{className:"snack-detail",children:[l.jsx("span",{className:"snack-detail-value",children:O(u.prep)}),l.jsx("span",{className:"snack-detail-label",children:"Prep Time"})]})]}),l.jsxs("div",{className:"snack-prep-indicator",children:[l.jsx("div",{className:`prep-dot ${u.category==="no-prep"||u.category==="quick"||u.category==="cook"?"active":""}`}),l.jsx("div",{className:`prep-dot ${u.category==="quick"||u.category==="cook"?"active":""}`}),l.jsx("div",{className:`prep-dot ${u.category==="cook"?"active":""}`}),l.jsx("span",{className:"prep-indicator-label",children:D(u.category)})]}),l.jsxs("div",{className:"snack-instructions",children:[l.jsx("div",{className:"snack-instructions-label",children:"How to make it"}),l.jsx("p",{children:u.instructions})]})]}),y&&l.jsx("div",{className:"snack-result shuffling",children:l.jsx("div",{className:"snack-shuffle-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"})})})}),l.jsx("button",{className:"snack-generate-btn",onClick:P,children:u?"Give Me Another":"Give Me a Snack"})]})]})]})]})}const Wm=[{text:"The only bad workout is the one that didn't happen.",author:"Unknown"},{text:"Your body can stand almost anything. It's your mind that you have to convince.",author:"Unknown"},{text:"Discipline is choosing between what you want now and what you want most.",author:"Abraham Lincoln"},{text:"The pain you feel today will be the strength you feel tomorrow.",author:"Unknown"},{text:"Don't wish for it. Work for it.",author:"Unknown"},{text:"Success isn't always about greatness. It's about consistency.",author:"Dwayne Johnson"},{text:"The harder you work, the luckier you get.",author:"Gary Player"},{text:"Fall seven times, stand up eight.",author:"Japanese Proverb"},{text:"What seems impossible today will one day become your warm-up.",author:"Unknown"},{text:"You don't have to be extreme, just consistent.",author:"Unknown"},{text:"Strength does not come from the body. It comes from the will.",author:"Unknown"},{text:"The only way to define your limits is by going beyond them.",author:"Arthur C. Clarke"},{text:"Motivation gets you started. Habit keeps you going.",author:"Jim Ryun"},{text:"If it doesn't challenge you, it doesn't change you.",author:"Fred DeVito"},{text:"Progress, not perfection.",author:"Unknown"},{text:"The best project you'll ever work on is you.",author:"Unknown"},{text:"A year from now you'll wish you had started today.",author:"Karen Lamb"},{text:"You are one workout away from a good mood.",author:"Unknown"},{text:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{text:"The body achieves what the mind believes.",author:"Unknown"},{text:"Small daily improvements are the key to staggering long-term results.",author:"Unknown"},{text:"It's not about having time. It's about making time.",author:"Unknown"},{text:"Sore today, strong tomorrow.",author:"Unknown"},{text:"Champions keep playing until they get it right.",author:"Billie Jean King"},{text:"Be stronger than your excuses.",author:"Unknown"},{text:"When you feel like quitting, think about why you started.",author:"Unknown"},{text:"The difference between try and triumph is a little umph.",author:"Marvin Phillips"},{text:"Your only limit is you.",author:"Unknown"},{text:"Believe you can and you're halfway there.",author:"Theodore Roosevelt"},{text:"Making excuses burns zero calories per hour.",author:"Unknown"},{text:"Results happen over time, not overnight. Work hard, stay consistent, and be patient.",author:"Unknown"},{text:"You don't find willpower, you create it.",author:"Unknown"},{text:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{text:"Sweat is just fat crying.",author:"Unknown"},{text:"Today I will do what others won't, so tomorrow I can do what others can't.",author:"Jerry Rice"},{text:"The only person you are destined to become is the person you decide to be.",author:"Ralph Waldo Emerson"},{text:"Don't count the days, make the days count.",author:"Muhammad Ali"},{text:"It never gets easier, you just get stronger.",author:"Unknown"},{text:"Suffer the pain of discipline or suffer the pain of regret.",author:"Jim Rohn"},{text:"Strive for progress, not perfection.",author:"Unknown"},{text:"Your health is an investment, not an expense.",author:"Unknown"},{text:"Action is the foundational key to all success.",author:"Pablo Picasso"},{text:"Good things come to those who sweat.",author:"Unknown"},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"No matter how slow you go, you're still lapping everyone on the couch.",author:"Unknown"},{text:"Train insane or remain the same.",author:"Unknown"},{text:"The hardest step is the first one out the door.",author:"Unknown"},{text:"Work hard in silence, let your results be the noise.",author:"Frank Ocean"},{text:"Every champion was once a contender who refused to give up.",author:"Rocky Balboa"},{text:"Take care of your body. It's the only place you have to live.",author:"Jim Rohn"},{text:"Energy and persistence conquer all things.",author:"Benjamin Franklin"},{text:"The mind is the most important muscle.",author:"Unknown"},{text:"You are stronger than you think.",author:"Unknown"},{text:"Obsessed is a word the lazy use to describe the dedicated.",author:"Unknown"},{text:"The only weight you need to lose is the weight of your doubts.",author:"Unknown"}];function TI(){const{currentUser:i,isClient:e,clientData:n,loading:a}=gs(),o=Vn(),[u,d]=C.useState(null),[p,g]=C.useState(!0),[y,b]=C.useState(!1);C.useEffect(()=>{!a&&(!i||!e)&&o("/")},[i,e,a,o]),C.useEffect(()=>{n&&T()},[n]);const T=async()=>{try{const P=new Date().toISOString().split("T")[0],O=Je(Ce,"clients",n.id),D=await Zo(O);if(D.exists()){const V=D.data();V.dailyQuote&&V.dailyQuote.date===P&&d(V.dailyQuote)}}catch(P){console.error("Error loading daily quote:",P)}g(!1)},E=async()=>{if(u)return;b(!0);const P=new Date().toISOString().split("T")[0];let O=[];try{const ce=await Zo(Je(Ce,"clients",n.id));ce.exists()&&(O=ce.data().quoteUsedIndices||[])}catch{}O.length>=Wm.length&&(O=[]);const D=Wm.map((ce,ue)=>ue).filter(ce=>!O.includes(ce)),V=Math.floor(Math.random()*D.length),H=D[V],F=Wm[H],ne={text:F.text,author:F.author,date:P};try{await Mr(Je(Ce,"clients",n.id),{dailyQuote:ne,quoteUsedIndices:[...O,H]},{merge:!0}),setTimeout(()=>{d(ne),b(!1)},300)}catch(ce){console.error("Error saving daily quote:",ce),b(!1)}};return a?l.jsx("div",{className:"client-loading",children:"Loading..."}):!i||!e||!n?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>o("/client/tools"),children:" Back to Tools"}),l.jsxs("div",{className:"tool-card",children:[l.jsxs("div",{className:"tool-header",children:[l.jsx("h3",{children:"Daily Motivation"}),l.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),l.jsxs("div",{className:"quote-generator",children:[p?l.jsxs("div",{className:"quote-skeleton",children:[l.jsx("div",{className:"skeleton-icon"}),l.jsx("div",{className:"skeleton-line long"}),l.jsx("div",{className:"skeleton-line medium"}),l.jsx("div",{className:"skeleton-line short"})]}):u?l.jsxs("div",{className:"quote-result",children:[l.jsx("div",{className:"quote-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),l.jsx("div",{className:"quote-text",children:u.text}),l.jsxs("div",{className:"quote-author",children:[" ",u.author]}),l.jsx("div",{className:"quote-date-note",children:"Your inspiration for today"})]}):y?l.jsx("div",{className:"quote-result shuffling",children:l.jsx("div",{className:"quote-shuffle-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M12 6v6l4 2"})]})})}):l.jsxs("div",{className:"quote-empty",children:[l.jsx("div",{className:"quote-empty-graphic",children:l.jsxs("svg",{viewBox:"0 0 80 80",fill:"none",children:[l.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"var(--border-color)",strokeWidth:"2",strokeDasharray:"4 4"}),l.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",fill:"var(--color-primary)",opacity:"0.2"}),l.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",stroke:"var(--color-primary)",strokeWidth:"1.5"})]})}),l.jsx("h4",{className:"quote-empty-title",children:"Your Daily Inspiration"}),l.jsx("p",{children:"Tap below to reveal today's motivational quote  a new one every day to keep you going."})]}),!u&&!p&&l.jsx("button",{className:"quote-generate-btn",onClick:E,disabled:y,children:y?"Finding your quote...":"Get Inspired"})]})]})]})]})}const Hs=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],Dr=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function EI(){const i=new Date;return`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`}function $s(i){const[e,n]=i.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function Sh(i){if(!i&&i!==0)return"-";const e=Math.floor(i/60),n=(i%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function e1(i,e){return!i&&i!==0?"-":!e&&e!==0?`${i}kg`:`${i}kg x ${e}`}function Io(i,e){return e?i.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Xm(i,e){return!e||e===0?null:(i-e)/e*100}function wI({data:i,exerciseKey:e,unit:n}){if(!i||i.length<2)return l.jsx("div",{className:"pb-trend-empty",children:l.jsx("p",{children:"Not enough data for trend line yet"})});const a=i.map(D=>{const V=D.benchmarks?.[e];return V?n==="time"?V.time||0:(V.weight||0)*(V.reps||0):0}),o=Math.max(...a),u=Math.min(...a),d=o-u||1,p=300,g=100,y=20,b=p-y*2,T=g-y*2,E=a.map((D,V)=>{const H=y+V/(a.length-1)*b,F=y+T-(D-u)/d*T;return{x:H,y:F,value:D}}),P=E.map((D,V)=>`${V===0?"M":"L"} ${D.x} ${D.y}`).join(" "),O=P+` L ${E[E.length-1].x} ${y+T} L ${E[0].x} ${y+T} Z`;return l.jsxs("div",{className:"pb-trend-chart",children:[l.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),l.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),l.jsx("path",{d:O,fill:"url(#trendGradient)"}),l.jsx("path",{d:P,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),E.map((D,V)=>l.jsx("circle",{cx:D.x,cy:D.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},V))]}),l.jsx("div",{className:"pb-trend-labels",children:i.map((D,V)=>l.jsxs("span",{className:"pb-trend-label",children:[D.month.split("-")[1],"/",D.month.split("-")[0].slice(2)]},V))})]})}function SI(){const[i,e]=C.useState("bests"),[n,a]=C.useState([]),[o,u]=C.useState(!0),[d,p]=C.useState(!1),[g,y]=C.useState(0),[b,T]=C.useState(!1),[E,P]=C.useState(!1),[O,D]=C.useState(!1),[V,H]=C.useState({}),[F,ne]=C.useState({}),[ce,ue]=C.useState({}),[me,k]=C.useState({}),[N,R]=C.useState({}),[z,L]=C.useState(!1),[q,j]=C.useState({}),[Ee,je]=C.useState([]),[B,re]=C.useState(null),[be,_e]=C.useState(null),[Ne,w]=C.useState(!1),[G,Y]=C.useState(""),[X,I]=C.useState(""),K=C.useRef(null),se=C.useRef(0),ve=C.useRef(0),{currentUser:ke,isClient:Be,clientData:pe,loading:ct}=gs(),{isDark:Vt}=hl(),Et=Vn(),wt=C.useCallback((W,ye="info")=>{_e({message:W,type:ye}),setTimeout(()=>_e(null),4e3)},[]);C.useEffect(()=>{!ct&&(!ke||!Be)&&Et("/")},[ke,Be,ct,Et]),C.useEffect(()=>{pe&&rt()},[pe]);const rt=async()=>{try{const W=Qs(ft(Ce,"personalBests"),Is("clientId","==",pe.id)),xe=(await Dt(W)).docs.map(Le=>({id:Le.id,...Le.data()}));xe.sort((Le,Ve)=>Le.month.localeCompare(Ve.month)),a(xe);const M=Qs(ft(Ce,"personalBestTargets"),Is("clientId","==",pe.id)),oe=await Dt(M);if(!oe.empty){const Le=oe.docs[0].data();ue(Le.targets||{}),k(Le.metricTargets||{}),R(Le.targets||{}),j(Le.metricTargets||{})}const Te=Qs(ft(Ce,"achievements"),Is("clientId","==",pe.id)),Se=await Dt(Te);Se.empty||je(Se.docs[0].data().badges||[])}catch(W){console.error("Error fetching personal bests:",W)}u(!1)},Oe=EI(),mt=n.find(W=>W.month===Oe),ot=n.filter(W=>W.month<Oe),ht=ot.length>0?ot[ot.length-1]:null;C.useEffect(()=>{mt?(H(mt.benchmarks||{}),ne(mt.bodyMetrics||{})):(H({}),ne({}))},[mt?.id]);const ts=async(W,ye)=>{const xe=[];if(W==="strength"?Hs.forEach(M=>{const oe=ce[M.key];if(!oe||!oe.targetValue)return;const Te=ye[M.key];if(!Te)return;let Se=0;oe.targetType==="weight"?Se=Te.weight||0:oe.targetType==="reps"?Se=Te.reps||0:oe.targetType==="time"&&(Se=Te.time||0);const Le=oe.startValue||0,Ve=oe.targetValue,Qe=Ve-Le;if((Qe===0?Se>=Ve?1:0:Math.max(0,(Se-Le)/Qe))>=1&&!Ee.some($n=>$n.type==="strength"&&$n.key===M.key&&$n.targetValue===Ve)){const $n=oe.targetType==="weight"?"kg":oe.targetType==="reps"?" reps":"s";xe.push({type:"strength",key:M.key,targetType:oe.targetType,targetValue:Ve,achievedMonth:Oe,label:`${M.name} ${Ve}${$n}`})}}):Dr.forEach(M=>{const oe=me[M.key];if(!oe||!oe.targetValue)return;const Te=ye[M.key];if(Te==null)return;const Se=oe.startValue||0,Le=oe.targetValue,Ve=Le-Se;(Ve===0?Te===Le?1:0:Math.max(0,(Te-Se)/Ve))>=1&&(Ee.some(mn=>mn.type==="metric"&&mn.key===M.key&&mn.targetValue===Le)||xe.push({type:"metric",key:M.key,targetValue:Le,achievedMonth:Oe,label:`${M.name} ${Le}${M.suffix}`}))}),xe.length>0){const M=[...Ee,...xe];await Mr(Je(Ce,"achievements",pe.id),{clientId:pe.id,badges:M,updatedAt:Me.now()}),je(M),re(xe),setTimeout(()=>re(null),5e3)}},Wt=(W,ye)=>{if(W==="strength"){const xe=ce[ye];return!xe||!xe.targetValue?!1:Ee.some(M=>M.type==="strength"&&M.key===ye&&M.targetValue===xe.targetValue)}else{const xe=me[ye];return!xe||!xe.targetValue?!1:Ee.some(M=>M.type==="metric"&&M.key===ye&&M.targetValue===xe.targetValue)}},ys=async()=>{p(!0);try{const W=`${pe.id}_${Oe}`,ye=mt||{};await Mr(Je(Ce,"personalBests",W),{clientId:pe.id,month:Oe,benchmarks:V,bodyMetrics:ye.bodyMetrics||F||{},createdAt:ye.createdAt||Me.now(),updatedAt:Me.now()}),await ts("strength",V),wt("Benchmarks saved!","success"),T(!1),await rt()}catch(W){console.error("Error saving benchmarks:",W),wt("Failed to save. Please try again.","error")}p(!1)},dt=async()=>{p(!0);try{const W=`${pe.id}_${Oe}`,ye=mt||{};await Mr(Je(Ce,"personalBests",W),{clientId:pe.id,month:Oe,benchmarks:ye.benchmarks||V||{},bodyMetrics:F,createdAt:ye.createdAt||Me.now(),updatedAt:Me.now()}),await ts("metric",F),wt("Body metrics saved!","success"),P(!1),await rt()}catch(W){console.error("Error saving metrics:",W),wt("Failed to save. Please try again.","error")}p(!1)},ns=(W,ye,xe)=>{H(M=>({...M,[W]:{...M[W],[ye]:xe===""?"":parseFloat(xe)}}))},Ni=(W,ye)=>{ne(xe=>({...xe,[W]:ye===""?"":parseFloat(ye)}))},Os=(W,ye,xe)=>{R(M=>({...M,[W]:{...M[W],[ye]:ye==="targetType"?xe:xe===""?"":parseFloat(xe)}}))},vs=async()=>{p(!0);try{const W=`targets_${pe.id}`,ye=mt?.benchmarks||{},xe={};Hs.forEach(M=>{if(N[M.key]?.targetValue){const oe=N[M.key].targetType||(M.unit==="time"?"time":"weight");let Te=0;const Se=ye[M.key];Se&&(oe==="weight"?Te=Se.weight||0:oe==="reps"?Te=Se.reps||0:oe==="time"&&(Te=Se.time||0)),xe[M.key]={targetType:oe,targetValue:N[M.key].targetValue,startValue:Te}}}),await Mr(Je(Ce,"personalBestTargets",W),{clientId:pe.id,targets:xe,metricTargets:me,updatedAt:Me.now()}),ue(xe),R(xe),wt("Targets saved!","success"),D(!1)}catch(W){console.error("Error saving targets:",W),wt("Failed to save targets.","error")}p(!1)},or=(W,ye)=>{j(xe=>({...xe,[W]:{...xe[W],targetValue:ye===""?"":parseFloat(ye)}}))},Zs=async()=>{p(!0);try{const W=`targets_${pe.id}`,ye={};Dr.forEach(xe=>{if(q[xe.key]?.targetValue){const M=mt?.bodyMetrics?.[xe.key]||0;ye[xe.key]={targetValue:q[xe.key].targetValue,startValue:M}}}),await Mr(Je(Ce,"personalBestTargets",W),{clientId:pe.id,targets:ce,metricTargets:ye,updatedAt:Me.now()}),k(ye),j(ye),wt("Metric targets saved!","success"),L(!1)}catch(W){console.error("Error saving metric targets:",W),wt("Failed to save targets.","error")}p(!1)},Pn=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const W=Je(Ce,"personalBestTargets",`targets_${pe.id}`);await Zi(W),ue({}),k({}),R({}),j({}),wt("All goals have been reset","success")}catch(W){console.error("Error resetting targets:",W),wt("Failed to reset goals","error")}p(!1)}},Fn=(W,ye)=>{const xe=ce[W];if(!xe||!xe.targetValue||!ye)return null;const M=xe.startValue||0,oe=xe.targetValue;let Te=0;xe.targetType==="weight"?Te=ye.weight||0:xe.targetType==="reps"?Te=ye.reps||0:xe.targetType==="time"&&(Te=ye.time||0);const Se=oe-M;return Se<=0?Te>=oe?1:0:Math.max(0,Math.min((Te-M)/Se,1))},Rn=W=>{const ye=me[W];if(!ye||!ye.targetValue)return null;const xe=mt?.bodyMetrics?.[W];if(xe==null)return null;const M=ye.startValue||0,oe=ye.targetValue,Te=oe-M;return Te===0?xe===oe?1:0:Math.max(0,Math.min((xe-M)/Te,1))},Pt=W=>{se.current=W.touches[0].clientX,ve.current=0},_n=W=>{ve.current=W.touches[0].clientX-se.current},Mt=()=>{ve.current<-50&&g<Hs.length-1?y(W=>W+1):ve.current>50&&g>0&&y(W=>W-1),ve.current=0},ei=W=>{const ye=mt?.bodyMetrics?.[W],xe=ht?.bodyMetrics?.[W];return ye==null||xe==null?null:parseFloat((ye-xe).toFixed(2))},ss=n.find(W=>W.month===G),ti=n.find(W=>W.month===X);if(ct||o)return l.jsxs("div",{className:"pb-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"pb-main",children:[l.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),l.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!ke||!Be||!pe)return null;const jt=Hs[g],fn=mt?.benchmarks?.[jt.key],Rt=ht?.benchmarks?.[jt.key],Un=Io(jt,fn),Hn=Io(jt,Rt),ln=Xm(Un,Hn),ni=Fn(jt.key,fn),ca=ni!==null,kn=ni!==null&&ni>=1,bn=ca?Math.round(ni*60):Un>0?15:0,is=ce[jt.key];return l.jsxs("div",{className:"pb-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"pb-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>Et("/client"),children:" Back"}),l.jsxs("div",{className:"pb-intro",children:[l.jsx("h2",{children:"Personal Bests"}),l.jsx("p",{children:"Track your strength benchmarks and body measurements each month."})]}),l.jsxs("div",{className:"pb-tabs",children:[l.jsx("button",{className:`pb-tab ${i==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),l.jsx("button",{className:`pb-tab ${i==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),l.jsx("button",{className:`pb-tab ${i==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),i==="bests"&&l.jsxs("div",{className:"pb-strength-section",children:[!b&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-carousel",ref:K,onTouchStart:Pt,onTouchMove:_n,onTouchEnd:Mt,children:[l.jsx("div",{className:"pb-ring-container",children:l.jsxs("div",{className:"pb-ring",children:[l.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((W,ye)=>{const xe=(ye*6-90)*(Math.PI/180),M=85,oe=96,Te=100+M*Math.cos(xe),Se=100+M*Math.sin(xe),Le=100+oe*Math.cos(xe),Ve=100+oe*Math.sin(xe),Qe=ye<Math.round(bn);return l.jsx("line",{x1:Te,y1:Se,x2:Le,y2:Ve,className:`pb-ring-tick ${Qe?kn?"hit":"filled":"empty"}`,strokeWidth:ye%5===0?"3":"2"},ye)})}),l.jsxs("div",{className:"pb-ring-center",children:[l.jsx("div",{className:"pb-ring-category",children:jt.category}),l.jsxs("div",{className:"pb-ring-exercise",children:[jt.name,Wt("strength",jt.key)&&l.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),l.jsx("div",{className:"pb-ring-value",children:fn?jt.unit==="time"?Sh(fn.time):e1(fn.weight,fn.reps):"-"}),ln!==null&&l.jsxs("div",{className:`pb-ring-change ${ln>=0?"positive":"negative"}`,children:[ln>=0?"+":"",ln.toFixed(1),"%"]}),ln===null&&fn&&l.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),is&&l.jsxs("div",{className:`pb-ring-target ${kn?"hit":""}`,children:[kn?"Target hit!":`${is.startValue||0}  ${is.targetValue}`," ",is.targetType==="weight"?"kg":is.targetType==="reps"?"reps":is.targetType==="time"?"s":"kg"]}),!is&&l.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})}),l.jsx("div",{className:"pb-carousel-dots",children:Hs.map((W,ye)=>l.jsx("button",{className:`pb-dot ${ye===g?"active":""}`,onClick:()=>y(ye)},ye))}),l.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>y(W=>Math.max(0,W-1)),disabled:g===0,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),l.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>y(W=>Math.min(Hs.length-1,W+1)),disabled:g===Hs.length-1,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),l.jsxs("div",{className:"pb-trend-section",children:[l.jsx("h4",{children:"Trend"}),l.jsx(wI,{data:n,exerciseKey:jt.key,unit:jt.unit})]})]}),!b&&!O&&l.jsxs("div",{className:"pb-action-buttons",children:[l.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:mt?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),l.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(ce).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ce).length>0||Object.keys(me).length>0)&&l.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Pn,disabled:d,children:"Reset All Goals"})]}),b&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsxs("h3",{children:["Benchmarks - ",$s(Oe)]}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),H(mt?.benchmarks||{})},children:""})]}),l.jsx("div",{className:"pb-edit-body",children:Hs.map(W=>l.jsxs("div",{className:"pb-edit-exercise",children:[l.jsx("div",{className:"pb-edit-exercise-name",children:W.name}),W.unit==="weight"?l.jsxs("div",{className:"pb-edit-row",children:[l.jsxs("div",{className:"pb-edit-field",children:[l.jsx("label",{children:"Weight (kg)"}),l.jsx("input",{type:"number",step:"0.5",value:V[W.key]?.weight??"",onChange:ye=>ns(W.key,"weight",ye.target.value),placeholder:"0"})]}),l.jsxs("div",{className:"pb-edit-field",children:[l.jsx("label",{children:"Reps"}),l.jsx("input",{type:"number",value:V[W.key]?.reps??"",onChange:ye=>ns(W.key,"reps",ye.target.value),placeholder:"0"})]})]}):l.jsx("div",{className:"pb-edit-row",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsx("label",{children:"Time (seconds)"}),l.jsx("input",{type:"number",step:"0.01",value:V[W.key]?.time??"",onChange:ye=>ns(W.key,"time",ye.target.value),placeholder:"0"})]})})]},W.key))}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),H(mt?.benchmarks||{})},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:ys,disabled:d,children:d?"Saving...":"Save"})]})]}),O&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsx("h3",{children:"Set Your Targets"}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),R(ce)},children:""})]}),l.jsxs("div",{className:"pb-edit-body",children:[l.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Hs.map(W=>{const ye=N[W.key]?.targetType||(W.unit==="time"?"time":"weight"),xe=ye==="weight"?"kg":ye==="reps"?"reps":"seconds",M=mt?.benchmarks?.[W.key];let oe="-";return M&&(ye==="weight"&&M.weight?oe=`${M.weight}kg`:ye==="reps"&&M.reps?oe=`${M.reps} reps`:ye==="time"&&M.time&&(oe=`${M.time}s`)),l.jsxs("div",{className:"pb-edit-exercise",children:[l.jsxs("div",{className:"pb-edit-exercise-header",children:[l.jsx("div",{className:"pb-edit-exercise-name",children:W.name}),l.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",oe]})]}),W.unit==="weight"&&l.jsxs("div",{className:"pb-target-type-toggle",children:[l.jsx("button",{type:"button",className:ye==="weight"?"active":"",onClick:()=>Os(W.key,"targetType","weight"),children:"Weight"}),l.jsx("button",{type:"button",className:ye==="reps"?"active":"",onClick:()=>Os(W.key,"targetType","reps"),children:"Reps"})]}),l.jsx("div",{className:"pb-edit-row",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsxs("label",{children:["Target (",xe,")"]}),l.jsx("input",{type:"number",step:ye==="weight"?"0.5":"1",value:N[W.key]?.targetValue??"",onChange:Te=>Os(W.key,"targetValue",Te.target.value),placeholder:"0"})]})})]},W.key)})]}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),R(ce)},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:vs,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),i==="metrics"&&l.jsxs("div",{className:"pb-metrics-section",children:[!E&&!z&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-metrics-card",children:[l.jsx("h3",{children:"Body Measurements"}),l.jsx("p",{className:"pb-metrics-month",children:$s(Oe)}),l.jsx("div",{className:"pb-metrics-list",children:Dr.map(W=>{const ye=mt?.bodyMetrics?.[W.key],xe=ei(W.key),M=me[W.key],oe=Rn(W.key),Te=oe!==null&&oe>=1;return l.jsxs("div",{className:"pb-metric-row",children:[l.jsxs("div",{className:"pb-metric-top",children:[l.jsxs("div",{className:"pb-metric-left",children:[l.jsxs("span",{className:"pb-metric-name",children:[W.name,Wt("metric",W.key)&&l.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),M&&l.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",M.targetValue," ",W.suffix]})]}),l.jsxs("div",{className:"pb-metric-values",children:[l.jsx("span",{className:"pb-metric-current",children:ye!=null?`${ye} ${W.suffix}`:"-"}),xe!==null&&l.jsxs("span",{className:`pb-metric-change ${xe>0?"up":xe<0?"down":"same"}`,children:[xe>0?"+":"",xe," ",W.suffix]})]})]}),oe!==null&&l.jsxs("div",{className:"pb-metric-progress",children:[l.jsx("div",{className:"pb-metric-bar",children:l.jsx("div",{className:`pb-metric-bar-fill ${Te?"hit":""}`,style:{width:`${Math.round(oe*100)}%`}})}),l.jsx("span",{className:`pb-metric-percent ${Te?"hit":""}`,children:Te?"Hit!":`${Math.round(oe*100)}%`})]})]},W.key)})})]}),l.jsxs("div",{className:"pb-action-buttons",children:[l.jsx("button",{className:"pb-edit-btn",onClick:()=>P(!0),children:mt?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),l.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>L(!0),children:Object.keys(me).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ce).length>0||Object.keys(me).length>0)&&l.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Pn,disabled:d,children:"Reset All Goals"})]})]}),E&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsxs("h3",{children:["Measurements - ",$s(Oe)]}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{P(!1),ne(mt?.bodyMetrics||{})},children:""})]}),l.jsx("div",{className:"pb-edit-body",children:Dr.map(W=>l.jsx("div",{className:"pb-edit-metric",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsxs("label",{children:[W.name," (",W.suffix,")"]}),l.jsx("input",{type:"number",step:"0.1",value:F[W.key]??"",onChange:ye=>Ni(W.key,ye.target.value),placeholder:"0"})]})},W.key))}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{P(!1),ne(mt?.bodyMetrics||{})},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:dt,disabled:d,children:d?"Saving...":"Save"})]})]}),z&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsx("h3",{children:"Body Metric Targets"}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),j(me)},children:""})]}),l.jsxs("div",{className:"pb-edit-body",children:[l.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),Dr.map(W=>{const ye=mt?.bodyMetrics?.[W.key];return l.jsxs("div",{className:"pb-edit-exercise",children:[l.jsxs("div",{className:"pb-edit-exercise-header",children:[l.jsx("div",{className:"pb-edit-exercise-name",children:W.name}),l.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ye!=null?`${ye} ${W.suffix}`:"-"]})]}),l.jsx("div",{className:"pb-edit-row",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsxs("label",{children:["Target (",W.suffix,")"]}),l.jsx("input",{type:"number",step:"0.1",value:q[W.key]?.targetValue??"",onChange:xe=>or(W.key,xe.target.value),placeholder:"0"})]})})]},W.key)})]}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),j(me)},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:Zs,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),i==="history"&&l.jsx("div",{className:"pb-history-section",children:n.length===0?l.jsxs("div",{className:"pb-empty",children:[l.jsx("h4",{children:"No records yet"}),l.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):l.jsxs(l.Fragment,{children:[Ee.length>0&&l.jsxs("div",{className:"pb-achievements-wall",children:[l.jsxs("h4",{className:"pb-achievements-wall-title",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),l.jsx("div",{className:"pb-achievements-list",children:[...Ee].reverse().map((W,ye)=>l.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ye*.05}s`},children:[l.jsx("div",{className:"pb-achievement-star",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),l.jsxs("div",{className:"pb-achievement-info",children:[l.jsx("span",{className:"pb-achievement-label",children:W.label}),l.jsx("span",{className:"pb-achievement-date",children:$s(W.achievedMonth)})]})]},ye))})]}),l.jsx("div",{className:"pb-history-controls",children:l.jsx("button",{className:`pb-compare-toggle ${Ne?"active":""}`,onClick:()=>{w(!Ne),!Ne&&n.length>=2&&(Y(n[0].month),I(n[n.length-1].month))},children:Ne?"Back to Timeline":"Compare Months"})}),Ne?l.jsxs("div",{className:"pb-compare",children:[l.jsxs("div",{className:"pb-compare-selectors",children:[l.jsxs("div",{className:"pb-compare-select",children:[l.jsx("label",{children:"From"}),l.jsx("select",{value:G,onChange:W=>Y(W.target.value),children:n.map(W=>l.jsx("option",{value:W.month,children:$s(W.month)},W.month))})]}),l.jsx("div",{className:"pb-compare-vs",children:"vs"}),l.jsxs("div",{className:"pb-compare-select",children:[l.jsx("label",{children:"To"}),l.jsx("select",{value:X,onChange:W=>I(W.target.value),children:n.map(W=>l.jsx("option",{value:W.month,children:$s(W.month)},W.month))})]})]}),ss&&ti&&l.jsxs("div",{className:"pb-compare-results",children:[l.jsxs("div",{className:"pb-compare-group",children:[l.jsx("h4",{children:"Strength Benchmarks"}),l.jsxs("div",{className:"pb-compare-table",children:[l.jsxs("div",{className:"pb-compare-header-row",children:[l.jsx("span",{children:"Exercise"}),l.jsx("span",{children:$s(G).split(" ")[0]}),l.jsx("span",{children:$s(X).split(" ")[0]}),l.jsx("span",{children:"Change"})]}),Hs.map(W=>{const ye=ss.benchmarks?.[W.key],xe=ti.benchmarks?.[W.key],M=Io(W,ye),oe=Io(W,xe),Te=Xm(oe,M);return l.jsxs("div",{className:"pb-compare-row",children:[l.jsx("span",{className:"pb-compare-name",children:W.name}),l.jsx("span",{className:"pb-compare-val",children:ye?W.unit==="time"?Sh(ye.time):`${ye.weight}x${ye.reps}`:"-"}),l.jsx("span",{className:"pb-compare-val",children:xe?W.unit==="time"?Sh(xe.time):`${xe.weight}x${xe.reps}`:"-"}),l.jsx("span",{className:`pb-compare-change ${Te!==null?Te>=0?"positive":"negative":""}`,children:Te!==null?`${Te>=0?"+":""}${Te.toFixed(1)}%`:"-"})]},W.key)})]})]}),l.jsxs("div",{className:"pb-compare-group",children:[l.jsx("h4",{children:"Body Measurements"}),l.jsxs("div",{className:"pb-compare-table",children:[l.jsxs("div",{className:"pb-compare-header-row",children:[l.jsx("span",{children:"Measurement"}),l.jsx("span",{children:$s(G).split(" ")[0]}),l.jsx("span",{children:$s(X).split(" ")[0]}),l.jsx("span",{children:"Change"})]}),Dr.map(W=>{const ye=ss.bodyMetrics?.[W.key],xe=ti.bodyMetrics?.[W.key],M=ye!=null&&xe!=null?parseFloat((xe-ye).toFixed(2)):null;return l.jsxs("div",{className:"pb-compare-row",children:[l.jsx("span",{className:"pb-compare-name",children:W.name}),l.jsx("span",{className:"pb-compare-val",children:ye!=null?`${ye}`:"-"}),l.jsx("span",{className:"pb-compare-val",children:xe!=null?`${xe}`:"-"}),l.jsx("span",{className:`pb-compare-change ${M!==null?M>0?"positive":M<0?"negative":"neutral":""}`,children:M!==null?`${M>0?"+":""}${M} ${W.suffix}`:"-"})]},W.key)})]})]})]})]}):l.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((W,ye)=>{const xe=n.find(M=>M.month<W.month&&n.indexOf(M)===n.indexOf(W)-1)||n.filter(M=>M.month<W.month).pop();return l.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ye*.05}s`},children:[l.jsx("div",{className:"pb-timeline-dot"}),l.jsxs("div",{className:"pb-timeline-card",children:[l.jsx("h4",{children:$s(W.month)}),W.benchmarks&&Object.keys(W.benchmarks).length>0&&l.jsxs("div",{className:"pb-timeline-group",children:[l.jsx("h5",{children:"Strength Benchmarks"}),Hs.map(M=>{const oe=W.benchmarks[M.key];if(!oe)return null;const Te=xe?.benchmarks?.[M.key],Se=Io(M,oe),Le=Io(M,Te),Ve=Xm(Se,Le);return l.jsxs("div",{className:"pb-timeline-row",children:[l.jsx("span",{className:"pb-timeline-label",children:M.name}),l.jsxs("div",{className:"pb-timeline-values",children:[l.jsx("span",{className:"pb-timeline-value",children:M.unit==="time"?Sh(oe.time):e1(oe.weight,oe.reps)}),Ve!==null&&l.jsxs("span",{className:`pb-timeline-change ${Ve>=0?"positive":"negative"}`,children:[Ve>=0?"+":"",Ve.toFixed(1),"%"]})]})]},M.key)})]}),W.bodyMetrics&&Object.keys(W.bodyMetrics).length>0&&l.jsxs("div",{className:"pb-timeline-group",children:[l.jsx("h5",{children:"Body Measurements"}),Dr.map(M=>{const oe=W.bodyMetrics[M.key];if(oe==null)return null;const Te=xe?.bodyMetrics?.[M.key],Se=Te!=null?parseFloat((oe-Te).toFixed(2)):null;return l.jsxs("div",{className:"pb-timeline-row",children:[l.jsx("span",{className:"pb-timeline-label",children:M.name}),l.jsxs("div",{className:"pb-timeline-values",children:[l.jsxs("span",{className:"pb-timeline-value",children:[oe," ",M.suffix]}),Se!==null&&l.jsxs("span",{className:`pb-timeline-change ${Se>0?"positive":Se<0?"negative":"neutral"}`,children:[Se>0?"+":"",Se," ",M.suffix]})]})]},M.key)})]})]})]},W.id)})})]})})]}),B&&l.jsx("div",{className:"pb-celebration-overlay",onClick:()=>re(null),children:l.jsxs("div",{className:"pb-celebration-card",children:[l.jsx("div",{className:"pb-celebration-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),l.jsx("h3",{className:"pb-celebration-title",children:B.length===1?"Target Achieved!":`${B.length} Targets Achieved!`}),l.jsx("div",{className:"pb-celebration-badges",children:B.map((W,ye)=>l.jsx("div",{className:"pb-celebration-badge",children:W.label},ye))}),l.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),be&&l.jsxs("div",{className:`toast-notification ${be.type}`,children:[l.jsx("span",{className:"toast-icon",children:be.type==="success"?l.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),l.jsx("span",{className:"toast-message",children:be.message}),l.jsx("button",{className:"toast-close",onClick:()=>_e(null),children:""})]})]})}const Jm=()=>{const i=new Date;let n=(6-i.getDay()+7)%7;if(n===0){const o=new Date(i);o.setHours(9,45,0,0),i>o&&(n=7)}const a=new Date(i);return a.setDate(i.getDate()+n),a},Zm=i=>`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,NI=i=>new Date(i+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"});function AI(){const[i,e]=C.useState(!0),[n,a]=C.useState(null),[o,u]=C.useState(null),[d,p]=C.useState({attended:0,streak:0,strikes:0}),[g,y]=C.useState(null),{currentUser:b,isClient:T,clientData:E,logout:P,loading:O}=gs(),{isDark:D,toggleTheme:V}=hl(),H=Vn();C.useCallback((k,N="info")=>{y({message:k,type:N}),setTimeout(()=>y(null),4e3)},[]),C.useEffect(()=>{!O&&(!b||!T)&&H("/")},[b,T,O,H]),C.useEffect(()=>{const k=()=>{const R=new Date,z=Jm();z.setHours(9,0,0,0);const L=z-R;if(L<=0){a({days:0,hours:0,minutes:0,seconds:0});return}a({days:Math.floor(L/864e5),hours:Math.floor(L%864e5/36e5),minutes:Math.floor(L%36e5/6e4),seconds:Math.floor(L%6e4/1e3)})};k();const N=setInterval(k,1e3);return()=>clearInterval(N)},[]),C.useEffect(()=>{E&&F()},[E]);const F=async()=>{try{const k=Zm(Jm()),N=Je(Ce,"circuitSessions",k),R=await Zo(N);if(R.exists()){const Ne=R.data().slots?.find(w=>w.memberId===E.id);u(Ne||null)}else u(null);const L=(await Dt(ft(Ce,"circuitSessions"))).docs.map(_e=>({id:_e.id,..._e.data()})),q=new Date;q.setHours(0,0,0,0);let j=0;const Ee=[];L.forEach(_e=>{new Date(_e.date+"T09:00:00")<q&&_e.slots?.some(G=>G.memberId===E.id&&(G.status==="confirmed"||G.status==="attended"))&&(j++,Ee.push(_e.date))}),Ee.sort((_e,Ne)=>Ne.localeCompare(_e));let je=0,B=new Date(q);const re=B.getDay(),be=re>=6?re-6:re+1;B.setDate(B.getDate()-be);for(const _e of Ee)if(_e===Zm(B))je++,B.setDate(B.getDate()-7);else break;p({attended:j,streak:je,strikes:E.circuitStrikes||0,banUntil:E.circuitBanUntil||null})}catch(k){console.error("Error fetching circuit data:",k)}e(!1)};if(O||i)return l.jsx("div",{className:"circuit-page",children:l.jsx("div",{className:"circuit-loading",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"circuit-loading-logo"})})});const ne=Zm(Jm()),ce=E?.clientType||"block",ue=ce==="circuit_vip"||ce==="circuit_dropin",me=ce==="circuit_vip"?"VIP":ce==="circuit_dropin"?"Drop-in":"Block";return l.jsxs("div",{className:`circuit-page ${D?"dark":""}`,children:[l.jsxs("header",{className:"circuit-header",children:[l.jsxs("div",{className:"circuit-header-left",children:[!ue&&l.jsx("button",{className:"circuit-back-btn",onClick:()=>H("/client"),children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),l.jsx("img",{src:"/Logo.PNG",alt:"MCF",className:"circuit-header-logo"})]}),l.jsxs("div",{className:"circuit-header-right",children:[l.jsx("button",{className:"circuit-icon-btn",onClick:V,children:D?"":""}),ue&&l.jsx("button",{className:"circuit-icon-btn logout",onClick:P,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"})})})]})]}),l.jsxs("main",{className:"circuit-main",children:[l.jsxs("div",{className:"circuit-intro",children:[l.jsx("h2",{children:"Circuit Class"}),l.jsxs("p",{children:["Hey ",E?.name?.split(" ")[0],"! Your Saturday session awaits."]})]}),n&&l.jsxs("div",{className:"circuit-countdown",children:[l.jsxs("div",{className:"circuit-ring",children:[l.jsx("svg",{className:"circuit-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((k,N)=>{const R=(N*6-90)*(Math.PI/180),z=85,L=96,q=100+z*Math.cos(R),j=100+z*Math.sin(R),Ee=100+L*Math.cos(R),je=100+L*Math.sin(R),B=60-n.seconds,re=N<B;return l.jsx("line",{x1:q,y1:j,x2:Ee,y2:je,className:`circuit-tick ${re?"elapsed":"remaining"}`,strokeWidth:N%5===0?"3":"2"},N)})}),l.jsxs("div",{className:"circuit-ring-center",children:[l.jsx("div",{className:"circuit-ring-logo",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),l.jsx("div",{className:"circuit-ring-label",children:"Next Class"}),l.jsxs("div",{className:"circuit-ring-countdown",children:[n.days>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"circuit-digit",children:String(n.days).padStart(2,"0")}),l.jsx("span",{className:"circuit-colon",children:":"})]}),l.jsx("span",{className:"circuit-digit",children:String(n.hours).padStart(2,"0")}),l.jsx("span",{className:"circuit-colon",children:":"}),l.jsx("span",{className:"circuit-digit",children:String(n.minutes).padStart(2,"0")}),l.jsx("span",{className:"circuit-colon",children:":"}),l.jsx("span",{className:"circuit-digit circuit-seconds",children:String(n.seconds).padStart(2,"0")})]}),l.jsx("div",{className:"circuit-ring-sub",children:"Saturday 9:00am"})]})]}),l.jsx("p",{className:"circuit-date-full",children:NI(ne)})]}),l.jsx("div",{className:`circuit-status-card ${o?"booked":"not-booked"}`,children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"circuit-status-check",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsxs("div",{className:"circuit-status-info",children:[l.jsx("h3",{children:"You're Locked In"}),l.jsxs("p",{children:["Slot #",o.slotNumber,"  ",me]})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"circuit-status-alert",children:"!"}),l.jsxs("div",{className:"circuit-status-info",children:[l.jsx("h3",{children:"Not Booked Yet"}),l.jsx("p",{children:"Tap below to view and book your slot"})]}),l.jsx("button",{className:"circuit-book-now-btn",onClick:()=>H("/client/circuit/booking"),children:"Book Now"})]})}),l.jsxs("div",{className:"circuit-stats-card",children:[l.jsx("h3",{children:"Your Stats"}),l.jsxs("div",{className:"circuit-stats-grid",children:[l.jsxs("div",{className:"circuit-stat",children:[l.jsx("span",{className:"circuit-stat-value",children:d.attended}),l.jsx("span",{className:"circuit-stat-label",children:"Classes"})]}),l.jsxs("div",{className:"circuit-stat",children:[l.jsx("span",{className:"circuit-stat-value",children:d.streak}),l.jsx("span",{className:"circuit-stat-label",children:"Week Streak"})]}),l.jsxs("div",{className:"circuit-stat",children:[l.jsxs("span",{className:`circuit-stat-value ${d.strikes>=2?"warning":""}`,children:[d.strikes,"/3"]}),l.jsx("span",{className:"circuit-stat-label",children:"Strikes"})]})]}),d.banUntil&&(()=>{const k=d.banUntil.toDate?d.banUntil.toDate():new Date(d.banUntil.seconds*1e3);return k>new Date?l.jsxs("div",{className:"circuit-ban-notice",children:["Booking suspended until ",k.toLocaleDateString("en-GB",{day:"numeric",month:"long"})]}):null})()]}),l.jsxs("div",{className:"circuit-rules",children:[l.jsx("h4",{children:"Class Rules"}),l.jsxs("ul",{children:[l.jsxs("li",{children:["Lock in your slot by ",l.jsx("strong",{children:"Wednesday"})]}),l.jsxs("li",{children:["Cancel at least ",l.jsx("strong",{children:"24 hours"})," before class"]}),l.jsx("li",{children:"3 no-show strikes = 1 month booking ban"})]})]}),ce!=="circuit_vip"&&l.jsxs("div",{className:"circuit-vip-promo",children:[l.jsx("div",{className:"vip-promo-badge",children:"VIP"}),l.jsx("h3",{children:"Become a VIP Member"}),l.jsxs("p",{className:"vip-promo-price",children:["Just ",l.jsx("strong",{children:"25"}),"/month"]}),l.jsx("p",{className:"vip-promo-desc",children:"Full access with a priority spot every week  your slot is automatically locked in before anyone else can book."}),l.jsxs("ul",{className:"vip-promo-perks",children:[l.jsx("li",{children:"Guaranteed slot every Saturday"}),l.jsx("li",{children:"Auto-booked  no need to race for a spot"}),l.jsx("li",{children:"Cancel anytime for the week, reinstated the next"})]}),l.jsxs("a",{href:"https://wa.me/447449782055?text=Hi%20Ross%2C%20I%27d%20like%20to%20become%20a%20VIP%20circuit%20member!",target:"_blank",rel:"noopener noreferrer",className:"vip-promo-wa-btn",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Message on WhatsApp"]})]})]}),l.jsx("button",{className:"circuit-fab",onClick:()=>H("/client/circuit/booking"),children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("path",{d:"M3 9h18M9 21V9"})]})}),g&&l.jsx("div",{className:`toast-notification ${g.type}`,children:l.jsx("span",{children:g.message})})]})}const Nh=()=>{const i=new Date;let n=(6-i.getDay()+7)%7;if(n===0){const o=new Date(i);o.setHours(9,45,0,0),i>o&&(n=7)}const a=new Date(i);return a.setDate(i.getDate()+n),a},CI=i=>`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,jI=i=>new Date(i+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),t1=i=>i==="circuit_vip"?"VIP":i==="circuit_dropin"?"Drop-in":"Block",n1=i=>i==="circuit_vip"?"vip":i==="circuit_dropin"?"dropin":"block";function RI(){const[i,e]=C.useState(!0),[n,a]=C.useState(!1),[o,u]=C.useState(null),[d,p]=C.useState(null),{currentUser:g,isClient:y,clientData:b,loading:T}=gs(),{isDark:E}=hl(),P=Vn(),O=C.useCallback((j,Ee="info")=>{p({message:j,type:Ee}),setTimeout(()=>p(null),4e3)},[]);C.useEffect(()=>{!T&&(!g||!y)&&P("/")},[g,y,T,P]),C.useEffect(()=>{b&&D()},[b]);const D=async()=>{try{const j=CI(Nh()),Ee=Je(Ce,"circuitSessions",j),je=await Zo(Ee);if(je.exists()){const B={id:je.id,...je.data()},re=Qs(ft(Ce,"clients"),Is("clientType","==","circuit_vip"),Is("status","==","active")),_e=(await Dt(re)).docs.map(G=>({id:G.id,...G.data()})),Ne=B.slots.filter(G=>G.memberId).map(G=>G.memberId),w=_e.filter(G=>!Ne.includes(G.id));if(w.length>0){const G=[...B.slots];let Y=!1;for(const X of w){const I=G.findIndex(K=>K.status==="available");if(I===-1)break;G[I]={slotNumber:G[I].slotNumber,memberId:X.id,memberName:X.name,memberType:"circuit_vip",status:"confirmed",bookedAt:Me.now()},Y=!0}Y&&(await an(Ee,{slots:G}),B.slots=G)}u(B)}else{const B=Qs(ft(Ce,"clients"),Is("clientType","==","circuit_vip"),Is("status","==","active")),be=(await Dt(B)).docs.map(w=>({id:w.id,...w.data()})),_e=[];for(let w=0;w<8;w++)w<be.length?_e.push({slotNumber:w+1,memberId:be[w].id,memberName:be[w].name,memberType:"circuit_vip",status:"confirmed",bookedAt:Me.now()}):_e.push({slotNumber:w+1,memberId:null,memberName:null,memberType:null,status:"available"});const Ne={date:j,time:"09:00",endTime:"09:45",maxCapacity:8,slots:_e,waitlist:[],createdAt:Me.now()};await Mr(Ee,Ne),u({id:j,...Ne})}}catch(j){console.error("Error loading session:",j),O("Failed to load session","error")}e(!1)},V=async j=>{if(!n){a(!0);try{if(b.circuitBanUntil&&(b.circuitBanUntil.toDate?b.circuitBanUntil.toDate():new Date(b.circuitBanUntil))>new Date){O("You are currently suspended from booking","error"),a(!1);return}const Ee=Nh(),je=new Date(Ee);if(je.setDate(je.getDate()-3),je.setHours(23,59,59,999),new Date>je){O("Booking deadline has passed (Wednesday)","error"),a(!1);return}if(o.slots.some(_e=>_e.memberId===b.id)){O("You already have a slot booked","error"),a(!1);return}const B=[...o.slots],re=B.findIndex(_e=>_e.slotNumber===j&&_e.status==="available");if(re===-1){O("Slot is no longer available","error"),a(!1);return}B[re]={slotNumber:j,memberId:b.id,memberName:b.name,memberType:b.clientType||"block",status:"confirmed",bookedAt:Me.now()};const be=(o.waitlist||[]).filter(_e=>_e.memberId!==b.id);await an(Je(Ce,"circuitSessions",o.id),{slots:B,waitlist:be}),u(_e=>({..._e,slots:B,waitlist:be})),O("Slot booked!","success")}catch(Ee){console.error("Error booking slot:",Ee),O("Failed to book slot","error")}a(!1)}},H=async()=>{if(!n){a(!0);try{const j=Nh();j.setHours(9,0,0,0);const Ee=new Date(j.getTime()-1440*60*1e3);if(new Date>Ee){O("Cancellation deadline passed (24hrs before class)","error"),a(!1);return}const je=[...o.slots],B=je.findIndex(_e=>_e.memberId===b.id);if(B===-1){a(!1);return}const re=je[B].slotNumber;let be=[...o.waitlist||[]];if(be.length>0){const _e=be.shift();je[B]={slotNumber:re,memberId:_e.memberId,memberName:_e.memberName,memberType:_e.memberType,status:"confirmed",bookedAt:Me.now()}}else je[B]={slotNumber:re,memberId:null,memberName:null,memberType:null,status:"available"};await an(Je(Ce,"circuitSessions",o.id),{slots:je,waitlist:be}),u(_e=>({..._e,slots:je,waitlist:be})),O("Slot released","success")}catch(j){console.error("Error releasing slot:",j),O("Failed to release slot","error")}a(!1)}},F=async()=>{if(!n){a(!0);try{if(o.waitlist?.some(Ee=>Ee.memberId===b.id)){O("Already on the waitlist","error"),a(!1);return}if(o.slots.some(Ee=>Ee.memberId===b.id)){O("You already have a slot","error"),a(!1);return}const j=[...o.waitlist||[],{memberId:b.id,memberName:b.name,memberType:b.clientType||"block",addedAt:Me.now()}];await an(Je(Ce,"circuitSessions",o.id),{waitlist:j}),u(Ee=>({...Ee,waitlist:j})),O("Added to waitlist!","success")}catch(j){console.error("Error joining waitlist:",j),O("Failed to join waitlist","error")}a(!1)}},ne=async()=>{if(!n){a(!0);try{const j=(o.waitlist||[]).filter(Ee=>Ee.memberId!==b.id);await an(Je(Ce,"circuitSessions",o.id),{waitlist:j}),u(Ee=>({...Ee,waitlist:j})),O("Removed from waitlist","success")}catch(j){console.error("Error leaving waitlist:",j),O("Failed to leave waitlist","error")}a(!1)}};if(T||i)return l.jsx("div",{className:"cb-page",children:l.jsx("div",{className:"cb-loading",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-loading-logo"})})});if(!o)return null;const ce=o.slots.find(j=>j.memberId===b.id),ue=o.waitlist?.some(j=>j.memberId===b.id),me=o.slots.filter(j=>j.status==="available").length,k=me===0,N=Nh(),R=new Date(N);R.setDate(R.getDate()-3),R.setHours(23,59,59,999);const z=new Date>R,L=new Date(N);L.setHours(9,0,0,0),L.setTime(L.getTime()-1440*60*1e3);const q=new Date>L;return l.jsxs("div",{className:`cb-page ${E?"dark":""}`,children:[l.jsxs("header",{className:"cb-header",children:[l.jsx("button",{className:"cb-back-btn",onClick:()=>P("/client/circuit"),children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),l.jsx("h1",{children:"Class Booking"}),l.jsx("div",{className:"cb-header-spacer"})]}),l.jsxs("main",{className:"cb-main",children:[l.jsxs("div",{className:"cb-class-info",children:[l.jsx("h2",{children:jI(o.date)}),l.jsxs("p",{children:[o.time," - ",o.endTime,"  ",me," slot",me!==1?"s":""," available"]})]}),z&&!ce&&l.jsx("div",{className:"cb-deadline-notice",children:"Booking deadline has passed for this week"}),l.jsx("div",{className:"cb-slots-grid",children:o.slots.map(j=>{const Ee=j.memberId===b.id,je=j.status==="available";return j.memberType,l.jsxs("div",{className:`cb-slot ${Ee?"mine":""} ${je?"available":"filled"}`,children:[l.jsx("div",{className:"cb-slot-number",children:j.slotNumber}),l.jsx("div",{className:"cb-slot-body",children:je?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"cb-slot-available",children:"Available"}),!ce&&!z&&l.jsx("button",{className:"cb-slot-book-btn",onClick:()=>V(j.slotNumber),disabled:n,children:"Book"})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"cb-slot-name",children:j.memberName}),l.jsx("span",{className:`cb-slot-badge ${n1(j.memberType)}`,children:t1(j.memberType)})]})}),Ee&&l.jsx("button",{className:"cb-slot-release-btn",onClick:H,disabled:n||q,title:q?"Cancellation deadline passed":"Cancel this slot",children:q?"Locked":"Cancel"})]},j.slotNumber)})}),!ce&&k&&l.jsx("div",{className:"cb-waitlist-section",children:ue?l.jsxs("div",{className:"cb-waitlist-status",children:[l.jsxs("p",{children:["You're on the waitlist (position #",(o.waitlist?.findIndex(j=>j.memberId===b.id)||0)+1,")"]}),l.jsx("button",{className:"cb-waitlist-leave-btn",onClick:ne,disabled:n,children:"Leave Waitlist"})]}):l.jsx("button",{className:"cb-waitlist-join-btn",onClick:F,disabled:n,children:"Class Full - Join Waitlist"})}),o.waitlist?.length>0&&l.jsxs("div",{className:"cb-waitlist-preview",children:[l.jsxs("h4",{children:["Waitlist (",o.waitlist.length,")"]}),o.waitlist.map((j,Ee)=>l.jsxs("div",{className:"cb-waitlist-item",children:[l.jsxs("span",{className:"cb-waitlist-pos",children:["#",Ee+1]}),l.jsx("span",{className:"cb-waitlist-name",children:j.memberName}),l.jsx("span",{className:`cb-slot-badge ${n1(j.memberType)}`,children:t1(j.memberType)})]},j.memberId))]}),l.jsx("div",{className:"cb-rules",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Book by Wednesday"}),"  ",l.jsx("strong",{children:"Cancel 24hrs before"}),"  ",l.jsx("strong",{children:"3 no-shows = 1 month ban"})]})})]}),d&&l.jsx("div",{className:`toast-notification ${d.type}`,children:l.jsx("span",{children:d.message})})]})}function kI(){const{currentUser:i,isClient:e,clientData:n,logout:a,loading:o}=gs(),{isDark:u,toggleTheme:d}=hl(),p=Vn(),[g,y]=C.useState({hours:0,minutes:0,seconds:0}),[b,T]=C.useState(0),[E,P]=C.useState(null),O=C.useCallback((H,F="info")=>{P({message:H,type:F}),setTimeout(()=>P(null),4e3)},[]);C.useEffect(()=>{!o&&!i&&p("/")},[o,i,p]),C.useEffect(()=>{const H=()=>{const ne=new Date,ce=new Date(ne);ce.setHours(23,59,59,999);const ue=ce-ne,me=Math.floor(ue/(1e3*60*60)),k=Math.floor(ue%(1e3*60*60)/(1e3*60)),N=Math.floor(ue%(1e3*60)/1e3);y({hours:me,minutes:k,seconds:N}),T(60-N)};H();const F=setInterval(H,1e3);return()=>clearInterval(F)},[]);const D=H=>{const F=H.currentTarget,ne=F.querySelector(".ripple");ne&&ne.remove();const ce=F.getBoundingClientRect(),ue=Math.max(ce.width,ce.height),me=H.clientX-ce.left-ue/2,k=H.clientY-ce.top-ue/2,N=document.createElement("span");N.className="ripple",N.style.cssText=`width:${ue}px;height:${ue}px;left:${me}px;top:${k}px;`,F.appendChild(N),setTimeout(()=>N.remove(),600)},V=n?.name?.split(" ")[0]||"there";return o?l.jsx("div",{className:"cb-loading",children:l.jsx("div",{className:"cb-loading-spinner"})}):l.jsxs("div",{className:"cb-dashboard","data-theme":u?"dark":"light",children:[l.jsxs("header",{className:"cb-header",children:[l.jsxs("div",{className:"cb-header-left",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),l.jsx("span",{className:"cb-header-title",children:"Core Buddy"})]}),l.jsxs("div",{className:"cb-header-right",children:[l.jsx("button",{className:"cb-theme-toggle",onClick:d,"aria-label":"Toggle theme",children:u?l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),l.jsx("button",{className:"cb-logout",onClick:a,"aria-label":"Log out",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]}),l.jsxs("main",{className:"cb-main",children:[l.jsx("div",{className:"cb-greeting",children:l.jsxs("h2",{children:["Hey ",V]})}),l.jsxs("div",{className:"cb-ring-container",children:[l.jsxs("div",{className:"cb-ring",children:[l.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((H,F)=>{const ne=(F*6-90)*(Math.PI/180),ce=85,ue=96,me=100+ce*Math.cos(ne),k=100+ce*Math.sin(ne),N=100+ue*Math.cos(ne),R=100+ue*Math.sin(ne),z=F<b;return l.jsx("line",{x1:me,y1:k,x2:N,y2:R,className:`ring-tick ${z?"elapsed":"remaining"}`,strokeWidth:F%5===0?"3":"2"},F)})}),l.jsxs("div",{className:"cb-ring-center",children:[l.jsx("div",{className:"cb-ring-logo",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),l.jsxs("div",{className:"cb-ring-countdown",children:[l.jsx("span",{className:"cb-timer-digit",children:String(g.hours).padStart(2,"0")}),l.jsx("span",{className:"cb-timer-colon",children:":"}),l.jsx("span",{className:"cb-timer-digit",children:String(g.minutes).padStart(2,"0")}),l.jsx("span",{className:"cb-timer-colon",children:":"}),l.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(g.seconds).padStart(2,"0")})]}),l.jsx("div",{className:"cb-ring-label",children:"remaining today"})]})]}),l.jsxs("p",{className:"cb-ring-tagline",children:["You have 24 hours a day... ",l.jsx("strong",{children:"make it count"})," with Core Buddy"]})]}),l.jsxs("div",{className:"cb-features",children:[l.jsxs("button",{className:"cb-feature-card cb-card-nutrition ripple-btn",onClick:H=>{D(H),O("Nutrition tracking coming soon!","info")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-nutrition",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"Today's Nutrition"}),l.jsx("p",{children:"Track macros, scan barcodes, log water"})]}),l.jsx("div",{className:"cb-card-preview",children:l.jsxs("div",{className:"cb-mini-rings",children:[l.jsxs("div",{className:"cb-mini-ring cb-ring-protein",children:[l.jsxs("svg",{viewBox:"0 0 36 36",children:[l.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"currentColor",strokeWidth:"3",opacity:"0.15"}),l.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:"94.25",strokeDashoffset:"70",strokeLinecap:"round",transform:"rotate(-90 18 18)"})]}),l.jsx("span",{children:"P"})]}),l.jsxs("div",{className:"cb-mini-ring cb-ring-carbs",children:[l.jsxs("svg",{viewBox:"0 0 36 36",children:[l.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"currentColor",strokeWidth:"3",opacity:"0.15"}),l.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:"94.25",strokeDashoffset:"50",strokeLinecap:"round",transform:"rotate(-90 18 18)"})]}),l.jsx("span",{children:"C"})]}),l.jsxs("div",{className:"cb-mini-ring cb-ring-fats",children:[l.jsxs("svg",{viewBox:"0 0 36 36",children:[l.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"currentColor",strokeWidth:"3",opacity:"0.15"}),l.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:"94.25",strokeDashoffset:"40",strokeLinecap:"round",transform:"rotate(-90 18 18)"})]}),l.jsx("span",{children:"F"})]}),l.jsxs("div",{className:"cb-mini-ring cb-ring-cals",children:[l.jsxs("svg",{viewBox:"0 0 36 36",children:[l.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"currentColor",strokeWidth:"3",opacity:"0.15"}),l.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:"94.25",strokeDashoffset:"60",strokeLinecap:"round",transform:"rotate(-90 18 18)"})]}),l.jsx("span",{children:"Cal"})]})]})}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsxs("button",{className:"cb-feature-card cb-card-workouts ripple-btn",onClick:H=>{D(H),O("Workouts coming soon!","info")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-workouts",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6.5 6.5L17.5 17.5"}),l.jsx("path",{d:"M3 10V7a1 1 0 0 1 1-1h3"}),l.jsx("path",{d:"M14 3h3a1 1 0 0 1 1 1v3"}),l.jsx("path",{d:"M21 14v3a1 1 0 0 1-1 1h-3"}),l.jsx("path",{d:"M10 21H7a1 1 0 0 1-1-1v-3"})]})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"Workouts"}),l.jsx("p",{children:"Randomise or build your own session"})]}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsxs("button",{className:"cb-feature-card cb-card-progress ripple-btn",onClick:H=>{D(H),p("/client/personal-bests")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-progress",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"My Progress"}),l.jsx("p",{children:"Track personal bests and body metrics"})]}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsxs("button",{className:"cb-feature-card cb-card-consistency ripple-btn",onClick:H=>{D(H),O("Consistency tracking coming soon!","info")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-consistency",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"Consistency"}),l.jsx("p",{children:"Weekly streaks and habit tracking"})]}),l.jsx("div",{className:"cb-card-preview",children:l.jsx("div",{className:"cb-week-dots",children:["M","T","W","T","F","S","S"].map((H,F)=>l.jsx("div",{className:`cb-week-dot ${F<3?"active":""}`,children:l.jsx("span",{children:H})},F))})}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsxs("button",{className:"cb-feature-card cb-card-leaderboard cb-card-locked ripple-btn",onClick:H=>{D(H),O("Leaderboard coming soon!","info")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-leaderboard",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M8 21h8"}),l.jsx("path",{d:"M12 17v4"}),l.jsx("path",{d:"M7 4h10l-1 9H8L7 4z"}),l.jsx("path",{d:"M17 4c0 0 2 0 2 2s-2 4-2 4"}),l.jsx("path",{d:"M7 4c0 0-2 0-2 2s2 4 2 4"})]})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"Leaderboard"}),l.jsx("p",{children:"Compete with your Core Buddies"})]}),l.jsx("span",{className:"cb-coming-soon",children:"Coming Soon"}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]})]})]}),E&&l.jsxs("div",{className:`toast-notification ${E.type}`,children:[E.type==="info"&&l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),E.message]})]})}function DI(){const{pathname:i}=aa();return C.useEffect(()=>{window.scrollTo(0,0)},[i]),null}function II(){const i=Vn();return C.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";i(n,{replace:!0})}},[i]),null}function MI(){return l.jsx(GD,{children:l.jsx($D,{children:l.jsxs(m2,{basename:"/login",children:[l.jsx(DI,{}),l.jsx(II,{}),l.jsxs(HS,{children:[l.jsx(qn,{path:"/",element:l.jsx(YD,{})}),l.jsx(qn,{path:"/dashboard",element:l.jsx(cI,{})}),l.jsx(qn,{path:"/add-client",element:l.jsx(hI,{})}),l.jsx(qn,{path:"/client",element:l.jsx(yI,{})}),l.jsx(qn,{path:"/client/forms",element:l.jsx(vI,{})}),l.jsx(qn,{path:"/client/tools",element:l.jsx(_I,{})}),l.jsx(qn,{path:"/client/tools/macros",element:l.jsx(bI,{})}),l.jsx(qn,{path:"/client/tools/snacks",element:l.jsx(xI,{})}),l.jsx(qn,{path:"/client/tools/motivation",element:l.jsx(TI,{})}),l.jsx(qn,{path:"/client/personal-bests",element:l.jsx(SI,{})}),l.jsx(qn,{path:"/client/circuit",element:l.jsx(AI,{})}),l.jsx(qn,{path:"/client/circuit/booking",element:l.jsx(RI,{})}),l.jsx(qn,{path:"/client/core-buddy",element:l.jsx(kI,{})}),l.jsx(qn,{path:"*",element:l.jsx(qS,{to:"/",replace:!0})})]})]})})})}Gw.createRoot(document.getElementById("root")).render(l.jsx(C.StrictMode,{children:l.jsx(MI,{})}));
