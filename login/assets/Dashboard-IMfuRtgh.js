import{r as j,g as ae,q as Ce,c as V,d as T,o as Ue,j as e,a as ke,T as se,w as Le,b as ye,e as Y,f as ze,s as Fe,h as Ve,u as me,i as Ye,k as Ge,l as Ke,m as Je,n as Qe}from"./index-DF3sxrFG.js";import{f as te,D as Xe,g as Ze,a as We,b as Te,S as Ee,t as De,c as Ae}from"./scheduleUtils-BAUZ6756.js";function es(){const[h,$]=j.useState([]),[g,A]=j.useState([]),[W,U]=j.useState(!0),[u,E]=j.useState(null),[c,q]=j.useState({}),[F,M]=j.useState(null),[G,Z]=j.useState(""),[l,I]=j.useState("all"),[S,O]=j.useState(null),[B,P]=j.useState({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""}),[re,ne]=j.useState([]),[he,m]=j.useState(!1),[J,H]=j.useState(!1),[K,ie]=j.useState("list");j.useEffect(()=>{oe()},[]);const oe=async()=>{try{const[s,d]=await Promise.all([ae(Ce(V(T,"clients"),Ue("name","asc"))),ae(V(T,"sessions"))]),v=s.docs.map(i=>({id:i.id,...i.data()})),C=d.docs.map(i=>({id:i.id,...i.data()}));$(v),A(C)}catch(s){console.error("Error fetching data:",s)}U(!1)},ve=s=>{const d=new Date,v=d.getFullYear(),C=(d.getMonth()+1).toString().padStart(2,"0"),i=d.getDate().toString().padStart(2,"0"),w=`${v}-${C}-${i}`,z=`${d.getHours().toString().padStart(2,"0")}:${d.getMinutes().toString().padStart(2,"0")}`;return g.filter(L=>L.clientId!==s?!1:L.date<w||L.date===w&&L.time<z).length},le=s=>{const d=ve(s.id);return(s.totalSessions||0)-d},ue=s=>{const d=new Date,v=d.getFullYear(),C=(d.getMonth()+1).toString().padStart(2,"0"),i=d.getDate().toString().padStart(2,"0"),w=`${v}-${C}-${i}`,z=`${d.getHours().toString().padStart(2,"0")}:${d.getMinutes().toString().padStart(2,"0")}`;return g.filter(L=>L.clientId!==s?!1:L.date>w||L.date===w&&L.time>=z).length},pe=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",xe=async(s,d)=>{if(window.confirm(`Are you sure you want to delete ${d}? This will also delete all their booked sessions.`))try{const C=g.filter(i=>i.clientId===s).map(i=>ye(Y(T,"sessions",i.id)));await Promise.all(C),await ye(Y(T,"clients",s)),$(h.filter(i=>i.id!==s)),A(g.filter(i=>i.clientId!==s))}catch(v){console.error("Error deleting client:",v),alert("Failed to delete client")}},ce=s=>{if(!s)return"";const d=s.toDate?s.toDate():new Date(s),v=d.getFullYear(),C=(d.getMonth()+1).toString().padStart(2,"0"),i=d.getDate().toString().padStart(2,"0");return`${v}-${C}-${i}`},Q=s=>{E(s.id),q({name:s.name,email:s.email,password:"",clientType:s.clientType||"block",weeksInBlock:s.weeksInBlock||"",totalSessions:s.totalSessions||"",sessionsRemaining:s.sessionsRemaining,sessionDuration:s.sessionDuration||45,startDate:ce(s.startDate),endDate:ce(s.endDate),status:s.status,hasPortalAccess:!!s.uid,circuitAccess:!!s.circuitAccess,coreBuddyAccess:!!s.coreBuddyAccess,buddyEnabled:!!s.buddyEnabled,coreBuddyPlan:s.coreBuddyPlan||"free",isJunior:!!s.isJunior})},X=s=>{const{name:d,value:v}=s.target;if(q(C=>({...C,[d]:v})),d==="startDate"||d==="weeksInBlock"){const C=d==="startDate"?v:c.startDate,i=parseInt(d==="weeksInBlock"?v:c.weeksInBlock);if(C&&i>0){const w=new Date(C),z=new Date(w);z.setDate(z.getDate()+i*7);const L=z.getFullYear(),ee=(z.getMonth()+1).toString().padStart(2,"0"),je=z.getDate().toString().padStart(2,"0");q(fe=>({...fe,[d]:v,endDate:`${L}-${ee}-${je}`}))}}},ge=async s=>{try{const d=h.find(w=>w.id===s);let v=d?.uid;if(c.password&&c.password.length>=6&&!d?.uid)try{const w=await ze(Fe,c.email.trim().toLowerCase(),c.password);await Ve(Fe),v=w.user.uid}catch(w){if(console.error("Error creating auth account:",w),w.code==="auth/email-already-in-use")alert("This email already has a portal account. Password not changed.");else if(w.code==="auth/weak-password"){alert("Password must be at least 6 characters.");return}else{alert("Failed to create portal account: "+w.message);return}}const C=c.clientType==="block",i={name:c.name.trim(),email:c.email.trim().toLowerCase(),clientType:c.clientType,status:c.status,coreBuddyAccess:c.coreBuddyAccess,buddyEnabled:c.buddyEnabled,isJunior:c.isJunior};if(C)i.weeksInBlock=parseInt(c.weeksInBlock)||0,i.totalSessions=parseInt(c.totalSessions)||0,i.sessionDuration=parseInt(c.sessionDuration),i.circuitAccess=c.circuitAccess,c.startDate&&(i.startDate=se.fromDate(new Date(c.startDate))),c.endDate&&(i.endDate=se.fromDate(new Date(c.endDate)));else if(c.clientType==="core_buddy")i.coreBuddyPlan=c.coreBuddyPlan||"free",i.coreBuddyAccess=!0;else{const w=h.find(z=>z.id===s);w?.circuitStrikes===void 0&&(i.circuitStrikes=0),w?.circuitBanUntil===void 0&&(i.circuitBanUntil=null)}v&&!d?.uid&&(i.uid=v),await me(Y(T,"clients",s),i),$(h.map(w=>w.id===s?{...w,...c,uid:v||w.uid,weeksInBlock:parseInt(c.weeksInBlock),totalSessions:parseInt(c.totalSessions),sessionDuration:parseInt(c.sessionDuration),startDate:se.fromDate(new Date(c.startDate)),endDate:se.fromDate(new Date(c.endDate))}:w)),E(null),v&&!d?.uid&&alert("Portal access created! Client can now log in.")}catch(d){console.error("Error updating client:",d),alert("Failed to update client")}},be=async s=>{try{const d=h.find(v=>v.id===s)?.status==="archived"?"active":"archived";await me(Y(T,"clients",s),{status:d}),$(h.map(v=>v.id===s?{...v,status:d}:v))}catch(d){console.error("Error archiving client:",d),alert("Failed to update client status")}},we=async s=>{O({clientId:s.id,clientName:s.name}),ie("list"),P({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""}),m(!0);try{const d=Ce(V(T,"sessionNotes"),Le("clientId","==",s.id)),C=(await ae(d)).docs.map(i=>({id:i.id,...i.data()}));C.sort((i,w)=>{const z=i.createdAt?.toMillis?.()||0;return(w.createdAt?.toMillis?.()||0)-z}),ne(C)}catch(d){console.error("Error fetching notes:",d),ne([])}m(!1)},de=()=>{O(null),ne([]),ie("list")},n=async()=>{if(!S)return;const{sessionNotes:s,whatWentWell:d,whatWentWrong:v,whatsNext:C}=B;if(!(!s.trim()&&!d.trim()&&!v.trim()&&!C.trim())){H(!0);try{const w=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});await ke(V(T,"sessionNotes"),{clientId:S.clientId,date:w,sessionNotes:s.trim(),whatWentWell:d.trim(),whatWentWrong:v.trim(),whatsNext:C.trim(),createdAt:se.now()}),P({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""});const z=Ce(V(T,"sessionNotes"),Le("clientId","==",S.clientId)),ee=(await ae(z)).docs.map(je=>({id:je.id,...je.data()}));ee.sort((je,fe)=>{const Ne=je.createdAt?.toMillis?.()||0;return(fe.createdAt?.toMillis?.()||0)-Ne}),ne(ee),ie("list")}catch(i){console.error("Error saving note:",i),alert("Failed to save note. Check Firestore rules for sessionNotes collection.")}H(!1)}},f=async s=>{if(window.confirm("Delete this session note?"))try{await ye(Y(T,"sessionNotes",s)),ne(re.filter(d=>d.id!==s))}catch(d){console.error("Error deleting note:",d)}};if(W)return e.jsx("div",{className:"client-list-loading",children:"Loading clients..."});if(h.length===0)return e.jsxs("div",{className:"client-list-empty",children:[e.jsx("p",{children:"No clients yet"}),e.jsx("span",{children:"Add your first client to get started"})]});const b=s=>s.clientType==="circuit_vip"?"VIP":s.clientType==="circuit_dropin"?"Drop-in":s.clientType==="core_buddy"?"Core Buddy":"Block",D=h.filter(s=>s.name?.toLowerCase().includes(G.toLowerCase())||s.email?.toLowerCase().includes(G.toLowerCase())).sort((s,d)=>(s.name||"").localeCompare(d.name||"")),R=s=>s.clientType==="circuit_vip"||s.clientType==="circuit_dropin",_=s=>s.clientType==="core_buddy",a=s=>s.status==="archived",p=D.filter(s=>!a(s)),k=p.filter(s=>!R(s)&&!_(s)),t=p.filter(s=>R(s)),r=p.filter(s=>_(s)),o=D.filter(s=>a(s)),N=l==="block"?k:l==="circuit"?t:l==="core_buddy"?r:l==="archived"?o:p,x=s=>{u||M(d=>d===s?null:s)},y=s=>{const d=F===s.id,v=u===s.id,C=!s.clientType||s.clientType==="block";return e.jsxs("div",{className:`client-card ${s.status==="archived"?"archived":""} ${d||v?"expanded":"collapsed"}`,children:[e.jsxs("div",{className:"client-name-row",onClick:()=>x(s.id),children:[e.jsxs("div",{className:"client-name-row-left",children:[e.jsx("span",{className:"client-name-initial",children:s.name?.charAt(0)?.toUpperCase()}),e.jsxs("div",{className:"client-name-text",children:[e.jsx("h3",{children:s.name}),e.jsx("span",{className:"client-name-sub",children:C?`${le(s)}/${s.totalSessions||0} sessions`:b(s)})]})]}),e.jsxs("div",{className:"client-name-row-right",children:[(s.clientType==="circuit_vip"||s.clientType==="circuit_dropin"||s.clientType==="core_buddy")&&e.jsx("span",{className:`client-type-badge ${s.clientType==="circuit_vip"?"vip":s.clientType==="core_buddy"?"core-buddy":"dropin"}`,children:b(s)}),e.jsx("span",{className:`status-dot ${s.status}`}),e.jsx("svg",{className:`client-chevron ${d||v?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]})]}),(d||v)&&e.jsx("div",{className:"client-expand-panel",children:v?e.jsxs("div",{className:"edit-form",children:[e.jsx("div",{className:"edit-type-toggle",children:[{value:"block",label:"Block"},{value:"circuit_vip",label:"VIP"},{value:"circuit_dropin",label:"Drop-in"},{value:"core_buddy",label:"Core Buddy"}].map(i=>e.jsx("button",{type:"button",className:`edit-type-btn ${c.clientType===i.value?"active":""}`,onClick:()=>q(w=>({...w,clientType:i.value})),children:i.label},i.value))}),e.jsxs("div",{className:"edit-row",children:[e.jsx("input",{type:"text",name:"name",value:c.name,onChange:X,placeholder:"Name"}),e.jsx("input",{type:"email",name:"email",value:c.email,onChange:X,placeholder:"Email"})]}),c.clientType==="block"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"edit-row",children:[e.jsx("input",{type:"number",name:"weeksInBlock",value:c.weeksInBlock,onChange:X,placeholder:"Weeks",min:"1"}),e.jsx("input",{type:"number",name:"totalSessions",value:c.totalSessions,onChange:X,placeholder:"Total Sessions",min:"1"}),e.jsxs("select",{name:"sessionDuration",value:c.sessionDuration,onChange:X,children:[e.jsx("option",{value:"30",children:"30 min"}),e.jsx("option",{value:"45",children:"45 min"})]})]}),e.jsxs("div",{className:"edit-row",children:[e.jsx("input",{type:"date",name:"startDate",value:c.startDate,onChange:X}),e.jsx("input",{type:"date",name:"endDate",value:c.endDate,onChange:X})]})]}),c.clientType==="core_buddy"&&e.jsx("div",{className:"edit-row",children:e.jsxs("select",{name:"coreBuddyPlan",value:c.coreBuddyPlan,onChange:X,children:[e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"premium",children:"Premium"})]})}),e.jsx("div",{className:"edit-row password-row",children:c.hasPortalAccess?e.jsx("div",{className:"portal-status has-access",children:"Has portal access"}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"password",value:c.password,onChange:X,placeholder:"Set portal password (min 6 chars)"}),e.jsx("span",{className:"password-hint",children:"Set password to enable client portal"})]})}),c.clientType==="block"&&e.jsx("div",{className:"edit-row circuit-row",children:e.jsxs("label",{className:"circuit-access-toggle",children:[e.jsx("input",{type:"checkbox",checked:c.circuitAccess,onChange:i=>q(w=>({...w,circuitAccess:i.target.checked}))}),e.jsx("span",{children:"Circuit Class Access"})]})}),c.clientType!=="core_buddy"&&e.jsx("div",{className:"edit-row circuit-row",children:e.jsxs("label",{className:"circuit-access-toggle",children:[e.jsx("input",{type:"checkbox",checked:c.coreBuddyAccess,onChange:i=>q(w=>({...w,coreBuddyAccess:i.target.checked}))}),e.jsx("span",{children:"Core Buddy Access"})]})}),e.jsx("div",{className:"edit-row circuit-row",children:e.jsxs("label",{className:"circuit-access-toggle",children:[e.jsx("input",{type:"checkbox",checked:c.buddyEnabled,onChange:i=>q(w=>({...w,buddyEnabled:i.target.checked}))}),e.jsx("span",{children:"AI Buddy"})]})}),c.clientType==="block"&&e.jsx("div",{className:"edit-row circuit-row",children:e.jsxs("label",{className:"circuit-access-toggle",children:[e.jsx("input",{type:"checkbox",checked:c.isJunior,onChange:i=>q(w=>({...w,isJunior:i.target.checked}))}),e.jsx("span",{children:"Junior Client (Kids)"})]})}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{className:"save-edit-btn",onClick:()=>ge(s.id),children:"Save"}),e.jsx("button",{className:"cancel-edit-btn",onClick:()=>{E(null)},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"client-expand-info",children:[e.jsx("span",{className:"client-email",children:s.email}),e.jsx("span",{className:`status-badge ${s.status}`,children:s.status})]}),C?e.jsxs("div",{className:"client-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Block"}),e.jsxs("span",{className:"detail-value",children:[s.weeksInBlock," weeks"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Sessions"}),e.jsxs("span",{className:"detail-value",children:[le(s)," / ",s.totalSessions," remaining"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booked"}),e.jsxs("span",{className:"detail-value",children:[ue(s.id)," sessions"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Duration"}),e.jsxs("span",{className:"detail-value",children:[s.sessionDuration||45," min"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Start"}),e.jsx("span",{className:"detail-value",children:pe(s.startDate)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"End"}),e.jsx("span",{className:"detail-value",children:pe(s.endDate)})]})]}):s.clientType==="core_buddy"?e.jsxs("div",{className:"client-details circuit-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Plan"}),e.jsx("span",{className:"detail-value",children:s.coreBuddyPlan==="premium"?"Premium":"Free"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Joined"}),e.jsx("span",{className:"detail-value",children:pe(s.createdAt)})]})]}):e.jsxs("div",{className:"client-details circuit-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Type"}),e.jsx("span",{className:"detail-value",children:s.clientType==="circuit_vip"?"Monthly VIP":"Drop-in"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Strikes"}),e.jsxs("span",{className:"detail-value",children:[s.circuitStrikes||0,"/3"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Joined"}),e.jsx("span",{className:"detail-value",children:pe(s.createdAt)})]})]}),e.jsxs("div",{className:"client-actions",children:[C&&e.jsxs("button",{className:"action-btn notes",onClick:i=>{i.stopPropagation(),we(s)},children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Notes"]}),e.jsx("button",{className:"action-btn edit",onClick:i=>{i.stopPropagation(),Q(s)},children:"Edit"}),e.jsx("button",{className:"action-btn archive",onClick:i=>{i.stopPropagation(),be(s.id)},children:s.status==="archived"?"Reactivate":"Archive"}),e.jsx("button",{className:"action-btn delete",onClick:i=>{i.stopPropagation(),xe(s.id,s.name)},children:"Delete"})]})]})})]},s.id)};return e.jsxs("div",{className:"client-list",children:[e.jsxs("div",{className:"client-search",children:[e.jsxs("svg",{className:"client-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsx("input",{type:"text",placeholder:"Search clients...",value:G,onChange:s=>Z(s.target.value),className:"client-search-input"}),G&&e.jsx("button",{className:"client-search-clear",onClick:()=>Z(""),children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),e.jsx("div",{className:"client-type-filter",children:[{value:"all",label:"All",count:p.length},{value:"block",label:"Block",count:k.length},{value:"circuit",label:"Circuit",count:t.length},{value:"core_buddy",label:"Core Buddy",count:r.length},{value:"archived",label:"Archived",count:o.length}].map(s=>e.jsxs("button",{className:`client-filter-btn ${l===s.value?"active":""}`,onClick:()=>I(s.value),children:[s.label,e.jsx("span",{className:"client-filter-count",children:s.count})]},s.value))}),l==="all"?e.jsxs(e.Fragment,{children:[k.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"client-section-header",children:["Block Members ",e.jsx("span",{children:k.length})]}),k.map(y)]}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"client-section-header",children:["Circuit Members ",e.jsx("span",{children:t.length})]}),t.map(y)]}),r.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"client-section-header",children:["Core Buddy Members ",e.jsx("span",{children:r.length})]}),r.map(y)]})]}):l==="archived"?e.jsx(e.Fragment,{children:o.length===0?e.jsx("div",{className:"client-section-empty",children:"No archived clients"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"client-section-header",children:["Archived Clients ",e.jsx("span",{children:o.length})]}),o.map(y)]})}):e.jsxs(e.Fragment,{children:[N.length===0&&e.jsxs("div",{className:"client-section-empty",children:["No ",l," clients found"]}),N.map(y)]}),S&&e.jsx("div",{className:"notes-modal-overlay",onClick:de,children:e.jsxs("div",{className:"notes-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"notes-modal-header",children:[e.jsxs("h3",{children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),S.clientName]}),e.jsx("button",{className:"notes-modal-close",onClick:de,children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),K==="list"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"notes-modal-body",children:he?e.jsx("div",{className:"notes-loading",children:"Loading notes..."}):re.length===0?e.jsxs("div",{className:"notes-empty",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",width:"40",height:"40",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]}),e.jsx("p",{children:"No session notes yet"}),e.jsx("span",{children:"Add notes after each session"})]}):e.jsx("div",{className:"notes-list",children:re.map(s=>e.jsxs("div",{className:"note-card",children:[e.jsxs("div",{className:"note-card-header",children:[e.jsx("span",{className:"note-date",children:s.date}),e.jsx("button",{className:"note-delete-btn",onClick:()=>f(s.id),children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]})})]}),s.sessionNotes&&e.jsxs("div",{className:"note-section",children:[e.jsx("span",{className:"note-section-label",children:"Session Notes"}),e.jsx("p",{children:s.sessionNotes})]}),s.whatWentWell&&e.jsxs("div",{className:"note-section went-well",children:[e.jsx("span",{className:"note-section-label",children:"What Went Well"}),e.jsx("p",{children:s.whatWentWell})]}),s.whatWentWrong&&e.jsxs("div",{className:"note-section went-wrong",children:[e.jsx("span",{className:"note-section-label",children:"What Went Wrong"}),e.jsx("p",{children:s.whatWentWrong})]}),s.whatsNext&&e.jsxs("div",{className:"note-section whats-next",children:[e.jsx("span",{className:"note-section-label",children:"What's Next"}),e.jsx("p",{children:s.whatsNext})]})]},s.id))})}),e.jsx("div",{className:"notes-modal-footer",children:e.jsxs("button",{className:"notes-add-btn",onClick:()=>ie("add"),children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Session Notes"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"notes-modal-body",children:e.jsxs("div",{className:"notes-form",children:[e.jsxs("div",{className:"notes-form-group",children:[e.jsx("label",{children:"Session Notes"}),e.jsx("textarea",{value:B.sessionNotes,onChange:s=>P(d=>({...d,sessionNotes:s.target.value})),placeholder:"Overview of the session...",rows:"3"})]}),e.jsxs("div",{className:"notes-form-group went-well",children:[e.jsxs("label",{children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"What Went Well"]}),e.jsx("textarea",{value:B.whatWentWell,onChange:s=>P(d=>({...d,whatWentWell:s.target.value})),placeholder:"Positives from the session...",rows:"2"})]}),e.jsxs("div",{className:"notes-form-group went-wrong",children:[e.jsxs("label",{children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),"What Went Wrong"]}),e.jsx("textarea",{value:B.whatWentWrong,onChange:s=>P(d=>({...d,whatWentWrong:s.target.value})),placeholder:"Areas to improve...",rows:"2"})]}),e.jsxs("div",{className:"notes-form-group whats-next",children:[e.jsxs("label",{children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})}),"What's Next"]}),e.jsx("textarea",{value:B.whatsNext,onChange:s=>P(d=>({...d,whatsNext:s.target.value})),placeholder:"Goals for next session...",rows:"2"})]})]})}),e.jsxs("div",{className:"notes-modal-footer",children:[e.jsx("button",{className:"notes-cancel-btn",onClick:()=>ie("list"),children:"Back"}),e.jsx("button",{className:"notes-save-btn",onClick:n,disabled:J,children:J?"Saving...":"Save Notes"})]})]})]})})]})}const ss=["Mon","Tue","Wed","Thu","Fri"],ts=h=>{const $=new Date(h),g=$.getDay(),A=$.getDate()-g+(g===0?-6:1);return $.setDate(A),Te.map((W,U)=>{const u=new Date($);return u.setDate($.getDate()+U),u})};function as(){const[h,$]=j.useState(new Date),[g,A]=j.useState([]),[W,U]=j.useState([]),[u,E]=j.useState([]),[c,q]=j.useState([]),[F,M]=j.useState([]),[G,Z]=j.useState([]),[l,I]=j.useState(null),[S,O]=j.useState(null),[B,P]=j.useState(!1),[re,ne]=j.useState(!0),[he,m]=j.useState("");j.useEffect(()=>{A(ts(h))},[h]),j.useEffect(()=>{pe()},[]);const J=t=>{I(t),P(!1),O(null)},H=()=>{if(!l)return null;const t=l.startDate?.toDate?l.startDate.toDate():new Date(l.startDate),r=l.endDate?.toDate?l.endDate.toDate():new Date(l.endDate),o=g[0];if(!o)return null;const N=10080*60*1e3,x=Math.floor((o-t)/N)+1,y=l.weeksInBlock||Math.ceil((r-t)/N),s=o>=t&&o<=r;return{startDate:t,endDate:r,weekNumber:x,totalWeeks:y,isWithinBlock:s}},K=()=>{if(l?.startDate){const t=l.startDate.toDate?l.startDate.toDate():new Date(l.startDate);$(t),O(null)}},ie=()=>{if(l?.endDate){const t=l.endDate.toDate?l.endDate.toDate():new Date(l.endDate);$(t),O(null)}},oe=t=>{const r=new Date,o=te(r),N=`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}`;return u.filter(x=>x.clientId!==t?!1:x.date<o||x.date===o&&x.time<N).length},ve=t=>{const r=oe(t.id);return(t.totalSessions||0)-r},le=t=>{const r=new Date,o=r.getFullYear(),N=(r.getMonth()+1).toString().padStart(2,"0"),x=r.getDate().toString().padStart(2,"0"),y=`${o}-${N}-${x}`,s=`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}`;return u.filter(d=>d.clientId!==t?!1:d.date>y||d.date===y&&d.time>=s).length},ue=t=>{const r=new Date,o=te(r),N=`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}`;return t.date<o||t.date===o&&t.time<N},pe=async()=>{try{const r=(await ae(V(T,"clients"))).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="active").sort((i,w)=>i.name.localeCompare(w.name));U(r);const N=(await ae(V(T,"sessions"))).docs.map(i=>({id:i.id,...i.data()}));E(N);const y=(await ae(V(T,"holidays"))).docs.map(i=>({id:i.id,...i.data()}));q(y);const d=(await ae(V(T,"blockedTimes"))).docs.map(i=>({id:i.id,...i.data()}));M(d);const C=(await ae(V(T,"openedSlots"))).docs.map(i=>({id:i.id,...i.data()}));Z(C)}catch(t){console.error("Error fetching data:",t)}ne(!1)},xe=t=>{const r=new Date(h);r.setDate(r.getDate()+t*7),$(r),O(null)},ce=()=>{$(new Date),O(null)},Q=t=>{const r=te(t);return c.some(o=>o.date===r)},X=(t,r)=>{const o=te(t);return F.some(N=>N.date===o&&N.time===r)},ge=(t,r)=>{const o=te(t);return G.some(N=>N.date===o&&N.time===r)},be=t=>{const r=Te[t.getDay()-1];return r&&Ee[r]?.defaultBlocked},we=async(t,r)=>{const o=te(t);if(be(t)){const x=G.find(y=>y.date===o&&y.time===r);try{if(x)await ye(Y(T,"openedSlots",x.id)),Z(G.filter(y=>y.id!==x.id));else{const y=await ke(V(T,"openedSlots"),{date:o,time:r,createdAt:se.now()});Z([...G,{id:y.id,date:o,time:r}])}}catch(y){console.error("Error toggling opened slot:",y),alert("Failed to update time slot")}return}const N=F.find(x=>x.date===o&&x.time===r);try{if(N)await ye(Y(T,"blockedTimes",N.id)),M(F.filter(x=>x.id!==N.id));else{const x=await ke(V(T,"blockedTimes"),{date:o,time:r,createdAt:se.now()});M([...F,{id:x.id,date:o,time:r}])}}catch(x){console.error("Error toggling blocked time:",x),alert("Failed to update time slot")}},de=t=>{const r=te(t);return u.filter(o=>o.date===r)},n=(t,r)=>{const o=te(t);return u.find(N=>N.date===o&&N.time===r)},f=(t,r)=>{const o=te(t),N=De(r);return u.find(x=>{if(x.date!==o)return!1;const y=De(x.time),s=y+(x.duration||45);return N>=y&&N<s})},b=(t,r,o)=>{const N=Te[t.getDay()-1];if(!N||Q(t))return!1;const x=Ee[N],y=Math.ceil(o/15);if(x.defaultBlocked)for(let L=0;L<y;L++){const ee=Ae(r,L*15);if(!ge(t,ee))return!1}else for(let L=0;L<y;L++){const ee=Ae(r,L*15);if(X(t,ee))return!1}const s=te(t);if(u.find(L=>L.date===s&&L.time===r))return!1;const v=Ae(r,o),C=x.morning&&v<=x.morning.end,i=x.afternoon&&v<=x.afternoon.end,w=x.morning&&r>=x.morning.start&&r<x.morning.end,z=x.afternoon&&r>=x.afternoon.start&&r<x.afternoon.end;if(w&&!C||z&&!i)return!1;for(const L of u){if(L.date!==s)continue;const ee=De(L.time),je=ee+(L.duration||45),fe=De(r),Ne=fe+o;if(fe<je&&Ne>ee)return!1}return!0},D=async(t,r)=>{const o=f(t,r);if(o){if(ue(o))return;if(window.confirm(`Cancel ${o.clientName}'s session at ${We(o.time)}?`))try{await ye(Y(T,"sessions",o.id)),E(u.filter(y=>y.id!==o.id))}catch(y){console.error("Error cancelling session:",y),alert("Failed to cancel session")}return}if(!l){alert("Please select a client first");return}if(!b(t,r,l.sessionDuration||45)){alert("This slot is not available for this client's session duration");return}const N=le(l.id);if(oe(l.id)+N>=l.totalSessions){alert(`${l.name} has used all ${l.totalSessions} sessions in their package`);return}try{const y=te(t),s={clientId:l.id,clientName:l.name,date:y,time:r,duration:l.sessionDuration||45,createdAt:se.now()},d=await ke(V(T,"sessions"),s);E([...u,{id:d.id,...s}])}catch(y){console.error("Error booking session:",y),alert("Failed to book session")}},R=async()=>{if(!l)return;const t=l.startDate?.toDate?l.startDate.toDate():new Date(l.startDate),r=l.endDate?.toDate?l.endDate.toDate():new Date(l.endDate),o=u.filter(v=>v.clientId!==l.id?!1:g.some(C=>te(C)===v.date));if(o.length===0){alert("No sessions in current week to repeat. Book some sessions first, then use this button.");return}const N=l.weeksInBlock||Math.ceil((r-t)/(10080*60*1e3)),x=o.map(v=>({dayOfWeek:new Date(v.date).getDay(),time:v.time}));let y=[];const s=le(l.id)+oe(l.id);for(let v=0;v<N;v++){const C=new Date(t);C.setDate(C.getDate()+v*7);const i=new Date(C),w=i.getDay(),z=i.getDate()-w+(w===0?-6:1);i.setDate(z);for(const L of x){const ee=new Date(i),je=L.dayOfWeek===0?6:L.dayOfWeek-1;ee.setDate(i.getDate()+je);const fe=te(ee);u.some(Ne=>Ne.clientId===l.id&&Ne.date===fe&&Ne.time===L.time)||ee<t||ee>r||c.some(Ne=>Ne.date===fe)||y.push({dateKey:fe,time:L.time,sessionDate:ee})}}const d=s+y.length;if(d>l.totalSessions){alert(`This would create ${y.length} new sessions (${d} total), but client only has ${l.totalSessions} sessions in their package.

You can still book ${l.totalSessions-s} more sessions.`);return}if(y.length===0){alert("All weeks already have sessions booked for this pattern.");return}if(window.confirm(`This will create ${y.length} new sessions across the block.

(${s} existing + ${y.length} new = ${d} total)

Continue?`))try{const v=[];for(const C of y){const i={clientId:l.id,clientName:l.name,date:C.dateKey,time:C.time,duration:l.sessionDuration||45,createdAt:se.now()},w=await ke(V(T,"sessions"),i);v.push({id:w.id,...i})}E([...u,...v]),alert(`Created ${v.length} new sessions!`)}catch(v){console.error("Error repeating weekly:",v),alert("Failed to repeat sessions")}},_=async t=>{const r=te(t),o=c.find(N=>N.date===r);try{if(o)await ye(Y(T,"holidays",o.id)),q(c.filter(N=>N.id!==o.id));else{const N=await ke(V(T,"holidays"),{date:r,createdAt:se.now()});q([...c,{id:N.id,date:r}])}}catch(N){console.error("Error toggling day availability:",N),alert("Failed to update day availability")}};if(re)return e.jsx("div",{className:"calendar-loading",children:"Loading calendar..."});const a=g[0],p=g[4],k=a&&p?`${a.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${p.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return e.jsxs("div",{className:"calendar",children:[e.jsxs("div",{className:"calendar-header",children:[e.jsxs("div",{className:"calendar-nav",children:[e.jsx("button",{onClick:()=>xe(-1),children:"←"}),e.jsx("button",{onClick:ce,children:"Today"}),e.jsx("button",{onClick:()=>xe(1),children:"→"})]}),e.jsx("h3",{children:k})]}),e.jsxs("div",{className:"client-selector",children:[e.jsx("span",{className:"selector-label",children:"Booking for:"}),l?e.jsxs("div",{className:"selected-client",children:[e.jsxs("div",{className:"selected-info",children:[e.jsx("strong",{children:l.name}),e.jsxs("span",{children:[l.sessionDuration||45,"min • ",ve(l),"/",l.totalSessions," remaining"]}),e.jsxs("span",{className:"booked-info",children:[le(l.id)," booked"]})]}),e.jsx("button",{onClick:()=>I(null),children:"Change"})]}):e.jsx("button",{className:"select-client-btn",onClick:()=>P(!0),children:"Select Client"})]}),l&&l.startDate&&l.endDate&&(()=>{const t=H();return t?e.jsxs("div",{className:"block-nav",children:[e.jsx("button",{onClick:K,children:"← Block Start"}),e.jsx("span",{className:"block-range",children:t.isWithinBlock?`Week ${t.weekNumber} of ${t.totalWeeks}`:g[0]<t.startDate?"Before block":"After block"}),e.jsx("button",{onClick:ie,children:"Block End →"})]}):null})(),l&&e.jsxs("div",{className:"repeat-weekly-section",children:[e.jsx("button",{className:"repeat-weekly-btn",onClick:R,children:"Repeat This Week's Schedule For All Weeks"}),e.jsx("span",{className:"repeat-hint",children:"Copies current week's sessions to all weeks in block"})]}),e.jsx("div",{className:"day-cards",children:g.map((t,r)=>{const o=de(t),N=te(t)===te(new Date),x=Q(t);return e.jsxs("div",{className:`day-card ${S===r?"selected":""} ${N?"today":""} ${x?"holiday":""}`,onClick:()=>O(S===r?null:r),children:[e.jsxs("div",{className:"day-card-header",children:[e.jsx("span",{className:"day-name",children:ss[r]}),e.jsx("span",{className:"day-date",children:t.getDate()})]}),x?e.jsx("div",{className:"day-card-status holiday",children:"Unavailable"}):e.jsxs("div",{className:"day-card-status",children:[o.length," session",o.length!==1?"s":""]})]},r)})}),S!==null&&g[S]&&e.jsxs("div",{className:"time-panel",children:[e.jsxs("div",{className:"time-panel-header",children:[e.jsxs("h4",{children:[Xe[S]," ",g[S].getDate()]}),e.jsx("button",{className:"close-panel",onClick:()=>O(null),children:"×"})]}),e.jsx("div",{className:"availability-toggle",children:e.jsx("button",{className:`toggle-availability-btn ${Q(g[S])?"unavailable":"available"}`,onClick:()=>_(g[S]),children:Q(g[S])?"Mark Day Available":"Mark Day Unavailable"})}),Q(g[S])?e.jsxs("div",{className:"day-unavailable-message",children:[e.jsx("p",{children:"This day is marked as unavailable"}),e.jsx("span",{children:"Tap the button above to make it available again"})]}):e.jsxs("div",{className:"time-slots",children:[be(g[S])&&e.jsx("div",{className:"default-blocked-notice",children:"Flex day — slots are closed by default. Tap the toggle to open slots."}),Ze(Te[S]).map(({time:t,period:r},o,N)=>{const x=n(g[S],t),y=f(g[S],t),s=!!y,d=!x&&!!y,v=y?ue(y):!1,C=be(g[S]),i=C?!ge(g[S],t):X(g[S],t),w=C&&ge(g[S],t),z=l&&!s&&b(g[S],t,l.sessionDuration||45),L=o===0||N[o-1]?.period!==r;return e.jsxs("div",{children:[L&&e.jsx("div",{className:"period-label",children:r==="morning"?"Morning":"Afternoon"}),e.jsxs("div",{className:"time-slot-row",children:[e.jsxs("button",{className:`time-slot ${s&&v?"completed":""} ${s&&!v?"booked":""} ${d?"booked-continuation":""} ${i&&!s?"blocked":""} ${w&&!s?"opened":""} ${z?"available":""} ${!s&&!i&&!z&&l?"unavailable":""}`,onClick:()=>!v&&(!i||s)&&D(g[S],t),disabled:v||i&&!s,children:[e.jsx("span",{className:"slot-time",children:We(t)}),x&&v?e.jsxs("span",{className:"slot-done",children:[x.clientName," ✓"]}):x?e.jsxs("span",{className:"slot-client",children:[x.clientName," (",x.duration,"m)"]}):d&&v?e.jsxs("span",{className:"slot-done",children:[y.clientName," ↑"]}):d?e.jsxs("span",{className:"slot-client",children:[y.clientName," ↑"]}):i?e.jsx("span",{className:"slot-blocked",children:C?"Closed":"Blocked"}):z?e.jsx("span",{className:"slot-available",children:"Available"}):l?e.jsx("span",{className:"slot-unavailable",children:"Unavailable"}):w?e.jsx("span",{className:"slot-available",children:"Open"}):e.jsx("span",{className:"slot-empty",children:"Select client to book"})]}),e.jsx("button",{className:`block-toggle-btn ${C?w?"is-opened":"":i?"is-blocked":""}`,onClick:()=>we(g[S],t),disabled:v||!!s,title:C?w?"Close this slot":"Open this slot":i?"Unblock this time":"Block this time",children:C?w?"✓":"+":i?"✓":"✕"})]})]},t)})]})]}),B&&e.jsx("div",{className:"modal-overlay",onClick:()=>{P(!1),m("")},children:e.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Select Client"}),e.jsx("button",{className:"close-btn",onClick:()=>{P(!1),m("")},children:"×"})]}),e.jsx("div",{className:"client-search-wrapper",children:e.jsx("input",{className:"client-search-input",type:"text",placeholder:"Search by name...",value:he,onChange:t=>m(t.target.value),autoFocus:!0})}),e.jsx("div",{className:"client-list-picker",children:W.length===0?e.jsx("p",{className:"no-items",children:"No active clients"}):(()=>{const t={block:"Block",core_buddy:"Core Buddy",circuit_vip:"Circuit VIP",circuit_dropin:"Circuit Drop-in"},r=W.filter(o=>o.name.toLowerCase().includes(he.toLowerCase()));return r.length===0?e.jsxs("p",{className:"no-items",children:['No clients match "',he,'"']}):r.map(o=>{const N=o.startDate&&o.endDate,x=N?o.startDate?.toDate?o.startDate.toDate():new Date(o.startDate):null,y=N?o.endDate?.toDate?o.endDate.toDate():new Date(o.endDate):null,s=ve(o),d=le(o.id);return e.jsxs("button",{className:"client-option",onClick:()=>{J(o),m("")},children:[e.jsxs("div",{className:"client-option-header",children:[e.jsx("strong",{children:o.name}),o.clientType&&e.jsx("span",{className:"client-type-badge",children:t[o.clientType]||o.clientType})]}),e.jsxs("span",{children:[o.sessionDuration||45,"min • ",s,"/",o.totalSessions," remaining • ",d," booked"]}),x&&y&&e.jsxs("span",{className:"client-dates",children:[x.toLocaleDateString("en-GB",{day:"numeric",month:"short"})," – ",y.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]},o.id)})})()})]})})]})}const Ie=h=>{const[$,g]=h.split(":"),A=parseInt($),W=A>=12?"pm":"am";return`${A>12?A-12:A===0?12:A}:${g}${W}`},Se=h=>{const $=h.getFullYear(),g=(h.getMonth()+1).toString().padStart(2,"0"),A=h.getDate().toString().padStart(2,"0");return`${$}-${g}-${A}`},Oe=h=>h===Se(new Date),ns=h=>{const $=new Date;return $.setDate($.getDate()+1),h===Se($)},Pe=h=>Oe(h)?"Today":ns(h)?"Tomorrow":new Date(h).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"}),Re=h=>{const $=new Date,g=Se($),A=`${$.getHours().toString().padStart(2,"0")}:${$.getMinutes().toString().padStart(2,"0")}`;if(h.date<g)return!0;if(h.date===g){const W=_e(h.time)+(h.duration||45);return _e(A)>=W}return!1},_e=h=>{const[$,g]=h.split(":").map(Number);return $*60+g};function is(){const[h,$]=j.useState([]),[g,A]=j.useState(!0),[W,U]=j.useState(new Date);j.useEffect(()=>{u();const l=setInterval(()=>{U(new Date)},6e4);return()=>clearInterval(l)},[]);const u=async()=>{try{const I=(await ae(V(T,"sessions"))).docs.map(B=>({id:B.id,...B.data()})),S=Se(new Date),O=I.filter(B=>B.date>=S).sort((B,P)=>B.date!==P.date?B.date.localeCompare(P.date):B.time.localeCompare(P.time));$(O)}catch(l){console.error("Error fetching sessions:",l)}A(!1)},E=async l=>{if(window.confirm(`Cancel ${l.clientName}'s session at ${Ie(l.time)} on ${Pe(l.date)}?`))try{await ye(Y(T,"sessions",l.id)),$(h.filter(I=>I.id!==l.id))}catch(I){console.error("Error cancelling session:",I),alert("Failed to cancel session")}};if(g)return e.jsx("div",{className:"schedule-loading",children:"Loading schedule..."});const c=h.reduce((l,I)=>{const S=I.date;return l[S]||(l[S]=[]),l[S].push(I),l},{}),q=Object.keys(c).sort(),F=Se(new Date),M=c[F]||[],G=M.filter(l=>Re(l)).length,Z=M.length-G;return e.jsxs("div",{className:"schedule",children:[e.jsxs("div",{className:"today-summary",children:[e.jsx("h3",{children:"Today's Sessions"}),e.jsx("div",{className:"today-count",children:M.length===0?e.jsx("span",{className:"no-sessions",children:"No sessions today"}):e.jsxs("div",{className:"today-stats",children:[e.jsxs("span",{className:"completed-count",children:[G," completed"]}),e.jsxs("span",{className:"remaining-count",children:[Z," remaining"]})]})})]}),q.length===0?e.jsx("div",{className:"no-upcoming",children:e.jsx("p",{children:"No upcoming sessions booked"})}):e.jsx("div",{className:"sessions-list",children:q.map(l=>e.jsxs("div",{className:`date-group ${Oe(l)?"today":""}`,children:[e.jsxs("div",{className:"date-header",children:[e.jsx("span",{className:"date-label",children:Pe(l)}),e.jsxs("span",{className:"date-count",children:[c[l].length," session",c[l].length!==1?"s":""]})]}),e.jsx("div",{className:"date-sessions",children:c[l].map(I=>{const S=Re(I);return e.jsxs("div",{className:`session-card ${S?"completed":""}`,children:[e.jsx("div",{className:"session-time",children:Ie(I.time)}),e.jsxs("div",{className:"session-details",children:[e.jsx("strong",{children:I.clientName}),e.jsxs("span",{children:[I.duration,"min session"]})]}),S?e.jsx("div",{className:"completed-badge",children:"✓"}):e.jsx("button",{className:"cancel-session-btn",onClick:()=>E(I),children:"Cancel"})]},I.id)})})]},l))})]})}const ls={sedentary:"Sedentary (little to no exercise)",light:"Lightly Active (1-2 days/week)",moderate:"Moderately Active (3-4 days/week)",active:"Very Active (5+ days/week)",athlete:"Athlete/Highly Active"},rs={"less-5":"Less than 5 hours","5-6":"5-6 hours","7-8":"7-8 hours","more-8":"More than 8 hours"},os={low:"Low",moderate:"Moderate",high:"High","very-high":"Very High"},cs=[{key:"q1HeartCondition",text:"Has your doctor ever said that you have a heart condition and that you should only do physical activity recommended by a doctor?"},{key:"q2ChestPain",text:"Do you feel pain in your chest when you do physical activity?"},{key:"q3ChestPainLastMonth",text:"In the past month, have you had chest pain when you were not doing physical activity?"},{key:"q4Balance",text:"Do you lose your balance because of dizziness or do you ever lose consciousness?"},{key:"q5BoneJoint",text:"Do you have a bone or joint problem that could be made worse by a change in your physical activity?"},{key:"q6BloodPressure",text:"Is your doctor currently prescribing drugs for your blood pressure or heart condition?"},{key:"q7OtherReason",text:"Do you know of any other reason why you should not do physical activity?"}];function ds(){const[h,$]=j.useState([]),[g,A]=j.useState(!0),[W,U]=j.useState(null),[u,E]=j.useState(null),[c,q]=j.useState("all"),[F,M]=j.useState("");j.useEffect(()=>{G()},[]);const G=async()=>{try{const J=(await ae(V(T,"clients"))).docs.map(H=>({id:H.id,...H.data()}));J.sort((H,K)=>(H.name||"").localeCompare(K.name||"")),$(J)}catch(m){console.error("Error fetching clients:",m)}A(!1)},Z=m=>!!m.welcomeForm?.completedAt,l=m=>!!m.parqForm?.completedAt,I=m=>Z(m)||l(m),S=m=>Z(m)&&l(m),O=m=>m?(m.toDate?m.toDate():new Date(m)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",B=h.filter(m=>!F||m.name?.toLowerCase().includes(F.toLowerCase())?c==="all"?!0:c==="completed"?S(m):c==="partial"?I(m)&&!S(m):c==="pending"?!I(m):!0:!1),P=h.filter(S).length,re=h.filter(m=>I(m)&&!S(m)).length,ne=h.filter(m=>!I(m)).length,he=m=>{W===m?(U(null),E(null)):(U(m),E(null))};return g?e.jsx("div",{className:"forms-loading",children:"Loading form submissions..."}):e.jsxs("div",{className:"form-submissions",children:[e.jsxs("div",{className:"forms-stats",children:[e.jsxs("div",{className:"forms-stat",children:[e.jsx("span",{className:"stat-number",children:P}),e.jsx("span",{className:"stat-label",children:"Complete"})]}),e.jsxs("div",{className:"forms-stat partial",children:[e.jsx("span",{className:"stat-number",children:re}),e.jsx("span",{className:"stat-label",children:"Partial"})]}),e.jsxs("div",{className:"forms-stat pending",children:[e.jsx("span",{className:"stat-number",children:ne}),e.jsx("span",{className:"stat-label",children:"Pending"})]})]}),e.jsxs("div",{className:"forms-search",children:[e.jsxs("svg",{className:"forms-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]}),e.jsx("input",{type:"text",className:"forms-search-input",placeholder:"Search clients...",value:F,onChange:m=>M(m.target.value)}),F&&e.jsx("button",{className:"forms-search-clear",onClick:()=>M(""),children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),e.jsxs("div",{className:"forms-filter",children:[e.jsxs("button",{className:`forms-filter-btn ${c==="all"?"active":""}`,onClick:()=>q("all"),children:["All ",e.jsx("span",{className:"forms-filter-count",children:h.length})]}),e.jsxs("button",{className:`forms-filter-btn ${c==="completed"?"active":""}`,onClick:()=>q("completed"),children:["Complete ",e.jsx("span",{className:"forms-filter-count",children:P})]}),e.jsxs("button",{className:`forms-filter-btn ${c==="partial"?"active":""}`,onClick:()=>q("partial"),children:["Partial ",e.jsx("span",{className:"forms-filter-count",children:re})]}),e.jsxs("button",{className:`forms-filter-btn ${c==="pending"?"active":""}`,onClick:()=>q("pending"),children:["Pending ",e.jsx("span",{className:"forms-filter-count",children:ne})]})]}),B.length===0?e.jsxs("div",{className:"forms-empty",children:[e.jsx("div",{className:"forms-empty-icon",children:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),e.jsx("path",{d:"M35 35h30M35 50h30M35 65h20"}),e.jsx("circle",{cx:"70",cy:"70",r:"18",fill:"var(--bg-card)",strokeWidth:"3"}),e.jsx("path",{d:"M63 70h14M70 63v14",strokeWidth:"3",strokeLinecap:"round"})]})}),e.jsx("p",{children:"No clients match this filter"}),e.jsx("span",{children:"Try adjusting your search or filter"})]}):e.jsx("div",{className:"forms-client-list",children:B.map(m=>{const J=W===m.id,H=Z(m),K=l(m);return e.jsxs("div",{className:`forms-client-card ${J?"expanded":""}`,children:[e.jsxs("div",{className:"forms-client-row",onClick:()=>he(m.id),children:[e.jsxs("div",{className:"forms-client-left",children:[e.jsx("div",{className:"forms-client-initial",children:(m.name||"?")[0].toUpperCase()}),e.jsxs("div",{className:"forms-client-info",children:[e.jsx("h3",{children:m.name||"Unknown"}),e.jsxs("div",{className:"forms-badges",children:[e.jsxs("span",{className:`form-badge ${H?"done":"not-done"}`,children:[H?"✓":"○"," Welcome"]}),e.jsxs("span",{className:`form-badge ${K?"done":"not-done"}`,children:[K?"✓":"○"," PAR-Q"]})]})]})]}),e.jsx("svg",{className:`forms-chevron ${J?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})]}),J&&e.jsx("div",{className:"forms-expand-panel",children:!H&&!K?e.jsxs("div",{className:"forms-no-data",children:[e.jsx("p",{children:"No forms submitted yet"}),e.jsx("span",{children:"This client hasn't completed any forms"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"forms-toggle",children:[H&&e.jsx("button",{className:`forms-toggle-btn ${u==="welcome"||!u&&H?"active":""}`,onClick:()=>E("welcome"),children:"Welcome Questionnaire"}),K&&e.jsx("button",{className:`forms-toggle-btn ${u==="parq"||!u&&!H&&K?"active":""}`,onClick:()=>E("parq"),children:"PAR-Q Health Screening"})]}),(u==="welcome"||!u&&H)&&H&&e.jsxs("div",{className:"form-data",children:[e.jsxs("div",{className:"form-data-header",children:[e.jsx("span",{className:"form-data-title",children:"Welcome Questionnaire"}),e.jsxs("span",{className:"form-data-date",children:["Submitted ",O(m.welcomeForm.completedAt)]})]}),m.welcomeForm.fitnessGoals&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Fitness Goals"}),e.jsx("p",{children:m.welcomeForm.fitnessGoals})]}),m.welcomeForm.currentActivityLevel&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Activity Level"}),e.jsx("p",{children:ls[m.welcomeForm.currentActivityLevel]||m.welcomeForm.currentActivityLevel})]}),m.welcomeForm.exerciseHistory&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Exercise History"}),e.jsx("p",{children:m.welcomeForm.exerciseHistory})]}),m.welcomeForm.injuries&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Injuries"}),e.jsx("p",{children:m.welcomeForm.injuries})]}),m.welcomeForm.medicalConditions&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Medical Conditions"}),e.jsx("p",{children:m.welcomeForm.medicalConditions})]}),m.welcomeForm.sleepHours&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Sleep"}),e.jsx("p",{children:rs[m.welcomeForm.sleepHours]||m.welcomeForm.sleepHours})]}),m.welcomeForm.stressLevel&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Stress Level"}),e.jsx("p",{children:os[m.welcomeForm.stressLevel]||m.welcomeForm.stressLevel})]}),m.welcomeForm.dietaryInfo&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Diet / Nutrition"}),e.jsx("p",{children:m.welcomeForm.dietaryInfo})]}),m.welcomeForm.availability&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Availability"}),e.jsx("p",{children:m.welcomeForm.availability})]}),m.welcomeForm.additionalInfo&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Additional Info"}),e.jsx("p",{children:m.welcomeForm.additionalInfo})]})]}),u==="parq"&&K&&e.jsxs("div",{className:"form-data",children:[e.jsxs("div",{className:"form-data-header",children:[e.jsx("span",{className:"form-data-title",children:"PAR-Q Health Screening"}),e.jsxs("span",{className:"form-data-date",children:["Submitted ",O(m.parqForm.completedAt)]})]}),e.jsx("div",{className:"parq-results",children:cs.map(ie=>{const oe=m.parqForm[ie.key];return e.jsxs("div",{className:`parq-result-item ${oe?"flagged":""}`,children:[e.jsx("span",{className:`parq-answer ${oe?"yes":"no"}`,children:oe?"YES":"NO"}),e.jsx("span",{className:"parq-question-text",children:ie.text})]},ie.key)})}),m.parqForm.additionalDetails&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Additional Details"}),e.jsx("p",{children:m.parqForm.additionalDetails})]}),e.jsx("div",{className:"parq-declaration-status",children:e.jsx("span",{className:m.parqForm.declaration?"declared":"not-declared",children:m.parqForm.declaration?"✓ Declaration signed":"✗ Declaration not signed"})})]})]})})]},m.id)})})]})}const Me=h=>`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`,qe=h=>new Date(h+"T09:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),He=()=>{const h=new Date;let g=(6-h.getDay()+7)%7;if(g===0){const W=new Date(h);W.setHours(9,45,0,0),h>W&&(g=7)}const A=new Date(h);return A.setDate(h.getDate()+g),A},$e=h=>h==="circuit_vip"?"VIP":h==="circuit_dropin"?"Drop-in":"Block",Be=h=>h==="circuit_vip"?"vip":h==="circuit_dropin"?"dropin":"block";function ms(){const[h,$]=j.useState(!0),[g,A]=j.useState([]),[W,U]=j.useState([]),[u,E]=j.useState(null),[c,q]=j.useState("upcoming"),[F,M]=j.useState(!1),[G,Z]=j.useState(null),[l,I]=j.useState(!1),[S,O]=j.useState(!1),B=j.useCallback((n,f="info")=>{Z({message:n,type:f}),setTimeout(()=>Z(null),4e3)},[]);j.useEffect(()=>{P()},[]);const P=async()=>{try{const f=(await ae(V(T,"circuitSessions"))).docs.map(a=>({id:a.id,...a.data()}));f.sort((a,p)=>p.date.localeCompare(a.date)),A(f);const D=(await ae(V(T,"clients"))).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.clientType==="circuit_vip"||a.clientType==="circuit_dropin"||a.circuitAccess===!0);U(D);const R=Me(He());let _=f.find(a=>a.date===R);if(!_){const a=D.filter(t=>t.clientType==="circuit_vip"&&t.status==="active"),p=[];for(let t=0;t<8;t++)t<a.length?p.push({slotNumber:t+1,memberId:a[t].id,memberName:a[t].name,memberType:"circuit_vip",status:"confirmed",bookedAt:se.now()}):p.push({slotNumber:t+1,memberId:null,memberName:null,memberType:null,status:"available"});const k={date:R,time:"09:00",endTime:"09:45",maxCapacity:8,slots:p,waitlist:[],createdAt:se.now()};await Ye(Y(T,"circuitSessions",R),k),_={id:R,...k},f.unshift(_),A([...f])}_?E(_):f.length>0&&E(f[0])}catch(n){console.error("Error loading circuit data:",n),B("Failed to load circuit data","error")}$(!1)},re=async n=>{if(!(!u||F)&&window.confirm("Remove this member from the slot?")){M(!0);try{const f=[...u.slots],b=f.findIndex(k=>k.slotNumber===n);if(b===-1){M(!1);return}const D=f[b],R=D.memberType==="circuit_vip";let _=[...u.waitlist||[]];if(_.length>0){const k=_.shift();f[b]={slotNumber:n,memberId:k.memberId,memberName:k.memberName,memberType:k.memberType,status:"confirmed",bookedAt:se.now()},B(`Slot given to ${k.memberName} from waitlist`,"success")}else f[b]={slotNumber:n,memberId:null,memberName:null,memberType:null,status:"available"},B("Member removed from slot","success");const a={slots:f,waitlist:_};if(R&&D.memberId){const k=u.vipOptOuts||[];k.includes(D.memberId)||(a.vipOptOuts=[...k,D.memberId])}await me(Y(T,"circuitSessions",u.id),a);const p={...u,...a};E(p),A(k=>k.map(t=>t.id===p.id?p:t))}catch(f){console.error("Error removing from slot:",f),B("Failed to remove member","error")}M(!1)}},ne=async(n,f)=>{if(!(!u||F)){M(!0);try{const b=[...u.slots],D=b.findIndex(p=>p.slotNumber===n&&p.status==="available");if(D===-1){B("Slot is not available","error"),M(!1);return}if(b.some(p=>p.memberId===f.id)){B(`${f.name} already has a slot`,"error"),M(!1);return}b[D]={slotNumber:n,memberId:f.id,memberName:f.name,memberType:f.clientType||"block",status:"confirmed",bookedAt:se.now()};const R=(u.waitlist||[]).filter(p=>p.memberId!==f.id),_={slots:b,waitlist:R};if(f.clientType==="circuit_vip"){const p=u.vipOptOuts||[];p.includes(f.id)&&(_.vipOptOuts=p.filter(k=>k!==f.id))}await me(Y(T,"circuitSessions",u.id),_);const a={...u,..._};E(a),A(p=>p.map(k=>k.id===a.id?a:k)),B(`${f.name} added to slot ${n}`,"success")}catch(b){console.error("Error adding to slot:",b),B("Failed to add member","error")}M(!1)}},he=async n=>{if(!(!u||F)){M(!0);try{const f=(u.waitlist||[]).filter(D=>D.memberId!==n);await me(Y(T,"circuitSessions",u.id),{waitlist:f});const b={...u,waitlist:f};E(b),A(D=>D.map(R=>R.id===b.id?b:R)),B("Removed from waitlist","success")}catch(f){console.error("Error removing from waitlist:",f),B("Failed to remove from waitlist","error")}M(!1)}},m=async(n,f)=>{if(!(!u||F)){M(!0);try{const b=[...u.slots],D=b.findIndex(_=>_.slotNumber===n);if(D===-1){M(!1);return}if(b[D]={...b[D],attended:f},await me(Y(T,"circuitSessions",u.id),{slots:b}),f===!1){const _=b[D].memberId;if(_){const a=Y(T,"clients",_),p=await Ge(a);if(p.exists()){const t=(p.data().circuitStrikes||0)+1,r={circuitStrikes:t};if(t>=3){const o=new Date;o.setMonth(o.getMonth()+1),r.circuitBanUntil=se.fromDate(o),r.circuitStrikes=0,B(`${b[D].memberName} banned for 1 month (3 strikes)`,"error")}else B(`No-show recorded - ${b[D].memberName} (${t}/3 strikes)`,"error");await me(a,r)}}}else B(`${b[D].memberName} marked as attended`,"success");const R={...u,slots:b};E(R),A(_=>_.map(a=>a.id===R.id?R:a))}catch(b){console.error("Error marking attendance:",b),B("Failed to update attendance","error")}M(!1)}},J=async(n,f)=>{if(!F&&window.confirm(`Reset strikes for ${f}?`)){M(!0);try{await me(Y(T,"clients",n),{circuitStrikes:0,circuitBanUntil:null}),U(b=>b.map(D=>D.id===n?{...D,circuitStrikes:0,circuitBanUntil:null}:D)),B(`Strikes reset for ${f}`,"success")}catch(b){console.error("Error resetting strikes:",b),B("Failed to reset strikes","error")}M(!1)}},H=async(n,f)=>{if(!F&&window.confirm(`Lift ban for ${f}?`)){M(!0);try{await me(Y(T,"clients",n),{circuitBanUntil:null,circuitStrikes:0}),U(b=>b.map(D=>D.id===n?{...D,circuitBanUntil:null,circuitStrikes:0}:D)),B(`Ban lifted for ${f}`,"success")}catch(b){console.error("Error lifting ban:",b),B("Failed to lift ban","error")}M(!1)}};if(h)return e.jsxs("div",{className:"cm-loading",children:[e.jsx("div",{className:"cm-loading-spinner"}),e.jsx("span",{children:"Loading circuit data..."})]});const K=Me(new Date),ie=Me(He()),oe=g.filter(n=>n.date>=K),ve=g.filter(n=>n.date<K),le=c==="upcoming"?oe:ve,ue=u?u.slots.filter(n=>n.status!=="available").length:0,pe=u?u.slots.filter(n=>n.status==="available").length:0,xe=u?u.date>=K:!1,ce=u?u.slots.filter(n=>n.memberId).map(n=>n.memberId):[],Q=u?(u.waitlist||[]).map(n=>n.memberId):[],X=W.filter(n=>!ce.includes(n.id)&&!Q.includes(n.id)),ge=W.filter(n=>n.clientType==="circuit_vip").length,be=W.filter(n=>n.clientType==="circuit_dropin").length,we=W.filter(n=>n.circuitAccess&&n.clientType!=="circuit_vip"&&n.clientType!=="circuit_dropin").length,de=W.filter(n=>n.circuitBanUntil?(n.circuitBanUntil.toDate?n.circuitBanUntil.toDate():new Date(n.circuitBanUntil))>new Date:!1);return e.jsxs("div",{className:"cm-container",children:[e.jsxs("div",{className:"cm-stats-row",children:[e.jsxs("div",{className:"cm-stat-pill",children:[e.jsx("span",{className:"cm-stat-num",children:ge}),e.jsx("span",{className:"cm-stat-label",children:"VIP"})]}),e.jsxs("div",{className:"cm-stat-pill",children:[e.jsx("span",{className:"cm-stat-num",children:be}),e.jsx("span",{className:"cm-stat-label",children:"Drop-in"})]}),e.jsxs("div",{className:"cm-stat-pill",children:[e.jsx("span",{className:"cm-stat-num",children:we}),e.jsx("span",{className:"cm-stat-label",children:"Block"})]}),e.jsxs("div",{className:"cm-stat-pill",children:[e.jsx("span",{className:"cm-stat-num",children:g.length}),e.jsx("span",{className:"cm-stat-label",children:"Sessions"})]})]}),e.jsxs("div",{className:"cm-view-toggle",children:[e.jsx("button",{className:`cm-toggle-btn ${l?"":"active"}`,onClick:()=>I(!1),children:"Sessions"}),e.jsx("button",{className:`cm-toggle-btn ${l?"active":""}`,onClick:()=>I(!0),children:"Members"})]}),!l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"cm-tabs",children:[e.jsxs("button",{className:`cm-tab ${c==="upcoming"?"active":""}`,onClick:()=>q("upcoming"),children:["Upcoming (",oe.length,")"]}),e.jsxs("button",{className:`cm-tab ${c==="past"?"active":""}`,onClick:()=>q("past"),children:["Past (",ve.length,")"]})]}),e.jsx("div",{className:"cm-sessions-list",children:le.length===0?e.jsx("div",{className:"cm-empty",children:e.jsxs("p",{children:["No ",c," sessions"]})}):le.map(n=>{const f=n.slots.filter(R=>R.status!=="available").length,b=u?.id===n.id,D=n.date===ie;return e.jsxs("button",{className:`cm-session-btn ${b?"selected":""} ${D?"next":""}`,onClick:()=>{E(n),O(!1)},children:[e.jsxs("div",{className:"cm-session-btn-left",children:[e.jsx("span",{className:"cm-session-date",children:qe(n.date)}),D&&e.jsx("span",{className:"cm-next-badge",children:"Next"})]}),e.jsxs("div",{className:"cm-session-btn-right",children:[e.jsxs("span",{className:"cm-session-fill",children:[f,"/8"]}),(n.waitlist?.length||0)>0&&e.jsxs("span",{className:"cm-waitlist-count",children:["+",n.waitlist.length," wl"]})]})]},n.id)})}),u&&e.jsxs("div",{className:"cm-detail",children:[e.jsxs("div",{className:"cm-detail-header",children:[e.jsxs("div",{children:[e.jsx("h3",{children:qe(u.date)}),e.jsxs("p",{children:[u.time," - ",u.endTime," • ",ue,"/8 booked • ",pe," available"]})]}),!xe&&e.jsx("button",{className:`cm-attendance-btn ${S?"active":""}`,onClick:()=>O(!S),children:S?"Done":"Attendance"})]}),e.jsx("div",{className:"cm-slots",children:u.slots.map(n=>{const f=n.status==="available";return e.jsxs("div",{className:`cm-slot ${f?"empty":"filled"} ${n.attended===!0?"attended":""} ${n.attended===!1?"no-show":""}`,children:[e.jsx("span",{className:"cm-slot-num",children:n.slotNumber}),f?e.jsxs("div",{className:"cm-slot-empty",children:[e.jsx("span",{children:"Available"}),xe&&e.jsx(hs,{members:X,onSelect:b=>ne(n.slotNumber,b),disabled:F})]}):e.jsxs("div",{className:"cm-slot-filled",children:[e.jsxs("div",{className:"cm-slot-info",children:[e.jsx("span",{className:"cm-slot-name",children:n.memberName}),e.jsx("span",{className:`cm-type-badge ${Be(n.memberType)}`,children:$e(n.memberType)})]}),e.jsxs("div",{className:"cm-slot-actions",children:[S&&n.attended===void 0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"cm-attend-yes",onClick:()=>m(n.slotNumber,!0),disabled:F,title:"Attended",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("path",{d:"M5 13l4 4L19 7"})})}),e.jsx("button",{className:"cm-attend-no",onClick:()=>m(n.slotNumber,!1),disabled:F,title:"No-show",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),n.attended===!0&&e.jsx("span",{className:"cm-attended-label",children:"Attended"}),n.attended===!1&&e.jsx("span",{className:"cm-noshow-label",children:"No-show"}),xe&&e.jsx("button",{className:"cm-remove-btn",onClick:()=>re(n.slotNumber),disabled:F,title:"Remove from slot",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]})]},n.slotNumber)})}),(u.waitlist?.length||0)>0&&e.jsxs("div",{className:"cm-waitlist",children:[e.jsxs("h4",{children:["Waitlist (",u.waitlist.length,")"]}),u.waitlist.map((n,f)=>e.jsxs("div",{className:"cm-waitlist-row",children:[e.jsxs("span",{className:"cm-wl-pos",children:["#",f+1]}),e.jsx("span",{className:"cm-wl-name",children:n.memberName}),e.jsx("span",{className:`cm-type-badge ${Be(n.memberType)}`,children:$e(n.memberType)}),xe&&e.jsx("button",{className:"cm-wl-remove",onClick:()=>he(n.memberId),disabled:F,children:"Remove"})]},n.memberId))]})]})]}),l&&e.jsxs("div",{className:"cm-members",children:[de.length>0&&e.jsxs("div",{className:"cm-ban-alert",children:[e.jsxs("h4",{children:["Currently Banned (",de.length,")"]}),de.map(n=>{const f=n.circuitBanUntil?.toDate?n.circuitBanUntil.toDate():new Date(n.circuitBanUntil);return e.jsxs("div",{className:"cm-ban-row",children:[e.jsxs("div",{className:"cm-ban-info",children:[e.jsx("span",{className:"cm-ban-name",children:n.name}),e.jsxs("span",{className:"cm-ban-until",children:["Until ",f.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),e.jsx("button",{className:"cm-lift-ban-btn",onClick:()=>H(n.id,n.name),disabled:F,children:"Lift Ban"})]},n.id)})]}),e.jsx("div",{className:"cm-members-list",children:W.length===0?e.jsxs("div",{className:"cm-empty",children:[e.jsx("p",{children:"No circuit members yet"}),e.jsx("span",{children:"Add members via the Clients page"})]}):W.map(n=>{const f=n.circuitStrikes||0,b=de.some(D=>D.id===n.id);return e.jsxs("div",{className:`cm-member-card ${b?"banned":""}`,children:[e.jsxs("div",{className:"cm-member-top",children:[e.jsx("span",{className:"cm-member-name",children:n.name}),e.jsx("span",{className:`cm-type-badge ${Be(n.clientType)}`,children:$e(n.clientType)})]}),e.jsxs("div",{className:"cm-member-bottom",children:[e.jsxs("div",{className:"cm-strikes",children:[[0,1,2].map(D=>e.jsx("span",{className:`cm-strike-dot ${D<f?"active":""}`},D)),e.jsxs("span",{className:"cm-strike-text",children:[f,"/3 strikes"]})]}),e.jsxs("div",{className:"cm-member-actions",children:[b&&e.jsx("button",{className:"cm-small-btn ban",onClick:()=>H(n.id,n.name),disabled:F,children:"Lift Ban"}),f>0&&!b&&e.jsx("button",{className:"cm-small-btn reset",onClick:()=>J(n.id,n.name),disabled:F,children:"Reset"})]})]})]},n.id)})})]}),G&&e.jsx("div",{className:`cm-toast ${G.type}`,children:e.jsx("span",{children:G.message})})]})}function hs({members:h,onSelect:$,disabled:g}){const[A,W]=j.useState(!1),[U,u]=j.useState(""),E=h.filter(c=>c.name.toLowerCase().includes(U.toLowerCase()));return h.length===0?null:e.jsxs("div",{className:"cm-add-dropdown",children:[e.jsx("button",{className:"cm-add-trigger",onClick:()=>W(!A),disabled:g,children:"+ Add"}),A&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cm-dropdown-backdrop",onClick:()=>{W(!1),u("")}}),e.jsxs("div",{className:"cm-dropdown-menu",children:[h.length>4&&e.jsx("input",{type:"text",className:"cm-dropdown-search",placeholder:"Search...",value:U,onChange:c=>u(c.target.value),autoFocus:!0}),e.jsxs("div",{className:"cm-dropdown-list",children:[E.map(c=>e.jsxs("button",{className:"cm-dropdown-item",onClick:()=>{$(c),W(!1),u("")},children:[e.jsx("span",{children:c.name}),e.jsx("span",{className:`cm-type-badge sm ${Be(c.clientType)}`,children:$e(c.clientType)})]},c.id)),E.length===0&&e.jsx("div",{className:"cm-dropdown-empty",children:"No members found"})]})]})]})]})}function js(){const[h,$]=j.useState(()=>localStorage.getItem("adminActiveView")||"schedule"),g=a=>{$(a),localStorage.setItem("adminActiveView",a)},[A,W]=j.useState(0),[U,u]=j.useState(!1),[E,c]=j.useState([]),[q,F]=j.useState(null),[M,G]=j.useState(null),[Z,l]=j.useState([]),[I,S]=j.useState([]),{currentUser:O,logout:B,isAdmin:P,loading:re}=Ke(),{isDark:ne,toggleTheme:he}=Je(),m=Qe(),J=j.useRef(0),H=j.useRef(!1);j.useRef(null);const K=j.useCallback((a,p="info")=>{G({message:a,type:p}),setTimeout(()=>G(null),4e3)},[]);j.useEffect(()=>{!re&&(!O||!P)&&m("/")},[O,P,re,m]),j.useEffect(()=>{O&&P&&ie()},[O,P]);const ie=async()=>{try{const a=Ce(V(T,"rescheduleRequests"),Le("status","==","pending")),k=(await ae(a)).docs.map(t=>({id:t.id,...t.data()}));k.sort((t,r)=>{const o=t.createdAt?.toDate?t.createdAt.toDate():new Date(0);return(r.createdAt?.toDate?r.createdAt.toDate():new Date(0))-o}),c(k)}catch(a){console.error("Error fetching reschedule requests:",a)}};j.useEffect(()=>{(async()=>{if(!(!O||!P))try{const[p,k]=await Promise.all([ae(V(T,"clients")),ae(V(T,"sessions"))]),t=p.docs.map(x=>({id:x.id,...x.data()})),r=k.docs.map(x=>({id:x.id,...x.data()}));l(t);const o=new Set(t.map(x=>x.id)),N=k.docs.filter(x=>!o.has(x.data().clientId));if(N.length>0){const x=N.map(y=>ye(Y(T,"sessions",y.id)));await Promise.all(x)}S(r.filter(x=>o.has(x.clientId)))}catch(p){console.error("Error fetching dashboard data:",p)}})()},[O,P]),j.useEffect(()=>{const a=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,p=r=>{a()<=0&&(J.current=r.touches[0].clientY,H.current=!1)},k=r=>{const o=a(),x=r.touches[0].clientY-J.current;if(o>5||x<=0){H.current=!1,W(0);return}x>20&&o<=0&&(H.current=!0,W(Math.min((x-20)*.4,80)))},t=()=>{H.current&&A>60?(u(!0),setTimeout(()=>{window.location.reload()},300)):W(0),H.current=!1};return document.addEventListener("touchstart",p,{passive:!0}),document.addEventListener("touchmove",k,{passive:!0}),document.addEventListener("touchend",t),()=>{document.removeEventListener("touchstart",p),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",t)}},[A]);const oe=async()=>{try{await B(),m("/")}catch(a){console.error("Failed to log out:",a)}},ve=()=>{m("/add-client")},le=a=>new Date(a).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),ue=a=>{const[p,k]=a.split(":"),t=parseInt(p),r=t>=12?"pm":"am";return`${t>12?t-12:t===0?12:t}:${k}${r}`},pe=async a=>{if(window.confirm(`Approve reschedule for ${a.clientName}?

From: ${le(a.originalDate)} at ${ue(a.originalTime)}
To: ${le(a.requestedDate)} at ${ue(a.requestedTime)}`)){F(a.id);try{await me(Y(T,"sessions",a.sessionId),{date:a.requestedDate,time:a.requestedTime}),await me(Y(T,"rescheduleRequests",a.id),{status:"approved",respondedAt:se.now()}),c(E.filter(p=>p.id!==a.id)),K(`Approved reschedule for ${a.clientName}`,"success")}catch(p){console.error("Error approving request:",p),K("Failed to approve request","error")}F(null)}},xe=async a=>{if(window.confirm(`Reject reschedule request from ${a.clientName}?`)){F(a.id);try{await me(Y(T,"rescheduleRequests",a.id),{status:"rejected",respondedAt:se.now()}),c(E.filter(p=>p.id!==a.id)),K(`Request from ${a.clientName} rejected`,"info")}catch(p){console.error("Error rejecting request:",p),K("Failed to reject request","error")}F(null)}};if(re)return e.jsx("div",{className:"loading",children:"Loading..."});if(!O||!P)return null;const ce=E.length,Q=new Date,X=`${Q.getFullYear()}-${(Q.getMonth()+1).toString().padStart(2,"0")}-${Q.getDate().toString().padStart(2,"0")}`,ge=`${Q.getHours().toString().padStart(2,"0")}:${Q.getMinutes().toString().padStart(2,"0")}`,we=I.filter(a=>a.date===X).length,de=a=>I.filter(p=>p.clientId!==a?!1:p.date<X||p.date===X&&p.time<ge).length,n=Z.filter(a=>a.status!=="archived"&&(!a.clientType||a.clientType==="block")),f=new Date(Q);f.setDate(f.getDate()+7);const b=n.filter(a=>{if(!a.endDate)return!1;const p=a.endDate.toDate?a.endDate.toDate():new Date(a.endDate);return p>=Q&&p<=f}),D=n.filter(a=>(a.totalSessions||0)-de(a.id)<=2),R=new Map;b.forEach(a=>{const p=a.endDate.toDate?a.endDate.toDate():new Date(a.endDate),k=Math.ceil((p-Q)/(1e3*60*60*24));R.set(a.id,{client:a,reasons:[`Block ends in ${k} day${k!==1?"s":""}`]})}),D.forEach(a=>{const p=(a.totalSessions||0)-de(a.id),k=p<=0?"No sessions left":`${p} session${p!==1?"s":""} left`;R.has(a.id)?R.get(a.id).reasons.push(k):R.set(a.id,{client:a,reasons:[k]})});const _=Array.from(R.values());return e.jsxs("div",{className:"dashboard",children:[A>0&&e.jsxs("div",{className:"pull-indicator",style:{height:A},children:[e.jsx("div",{className:`pull-spinner ${U?"spinning":""}`,children:U?"↻":"↓"}),e.jsx("span",{children:U?"Refreshing...":A>60?"Release to refresh":"Pull to refresh"})]}),e.jsxs("header",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"admin-header-logo",width:"50",height:"50"}),e.jsx("span",{className:"admin-badge",children:"Admin"})]}),e.jsxs("nav",{className:"header-nav",children:[e.jsxs("button",{className:`nav-btn ${h==="requests"?"active":""} ${ce>0?"has-badge":""}`,onClick:()=>g("requests"),children:["Requests",ce>0&&e.jsx("span",{className:"nav-badge",children:ce})]}),e.jsx("button",{className:`nav-btn ${h==="forms"?"active":""}`,onClick:()=>g("forms"),children:"Forms"}),e.jsx("button",{className:`nav-btn ${h==="circuits"?"active":""}`,onClick:()=>g("circuits"),children:"Circuits"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"theme-toggle-btn",onClick:he,"aria-label":ne?"Switch to light mode":"Switch to dark mode",children:ne?e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),e.jsx("button",{className:"logout-btn",onClick:oe,children:"Log Out"})]})]}),M&&e.jsx("div",{className:"toast-container",children:e.jsxs("div",{className:`toast ${M.type}`,children:[e.jsxs("span",{className:"toast-icon",children:[M.type==="success"&&e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),M.type==="error"&&e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),M.type==="info"&&e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})]}),e.jsx("span",{className:"toast-message",children:M.message})]})}),e.jsxs("main",{className:"dashboard-main",children:[h==="schedule"&&e.jsxs("div",{className:"schedule-view",children:[e.jsx("div",{className:"view-header",children:e.jsx("h2",{children:"Schedule"})}),e.jsxs("div",{className:"summary-cards",children:[e.jsxs("div",{className:"summary-card",onClick:()=>{},children:[e.jsx("div",{className:"summary-icon sessions-icon",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),e.jsxs("div",{className:"summary-info",children:[e.jsx("span",{className:"summary-number",children:we}),e.jsx("span",{className:"summary-label",children:"Today"})]})]}),e.jsxs("div",{className:"summary-card",onClick:()=>ce>0&&g("requests"),children:[e.jsx("div",{className:`summary-icon requests-icon ${ce>0?"has-items":""}`,children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})})}),e.jsxs("div",{className:"summary-info",children:[e.jsx("span",{className:"summary-number",children:ce}),e.jsx("span",{className:"summary-label",children:"Requests"})]})]}),e.jsxs("div",{className:"summary-card",onClick:()=>g("clients"),children:[e.jsx("div",{className:`summary-icon expiring-icon ${b.length>0?"has-items":""}`,children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),e.jsxs("div",{className:"summary-info",children:[e.jsx("span",{className:"summary-number",children:b.length}),e.jsx("span",{className:"summary-label",children:"Expiring"})]})]}),e.jsxs("div",{className:"summary-card",onClick:()=>g("clients"),children:[e.jsx("div",{className:`summary-icon low-icon ${D.length>0?"has-items":""}`,children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),e.jsxs("div",{className:"summary-info",children:[e.jsx("span",{className:"summary-number",children:D.length}),e.jsx("span",{className:"summary-label",children:"Low Sessions"})]})]})]}),_.length>0&&e.jsxs("div",{className:"attention-section",children:[e.jsxs("div",{className:"attention-header",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsx("span",{children:"Needs Attention"})]}),_.map(({client:a,reasons:p})=>e.jsxs("div",{className:"attention-item",children:[e.jsx("span",{className:"attention-name",children:a.name}),e.jsx("div",{className:"attention-reasons",children:p.map((k,t)=>e.jsx("span",{className:`attention-tag ${k.includes("No sessions")?"urgent":k.includes("ends")?"warning":"low"}`,children:k},t))})]},a.id))]}),e.jsx(is,{})]}),h==="clients"&&e.jsxs("div",{className:"clients-view",children:[e.jsxs("div",{className:"view-header",children:[e.jsx("h2",{children:"Clients"}),e.jsx("button",{className:"add-btn",onClick:ve,children:"+ Add Client"})]}),e.jsx(es,{})]}),h==="calendar"&&e.jsxs("div",{className:"calendar-view",children:[e.jsx("div",{className:"view-header",children:e.jsx("h2",{children:"Calendar"})}),e.jsx(as,{})]}),h==="requests"&&e.jsxs("div",{className:"requests-view",children:[e.jsx("div",{className:"view-header",children:e.jsx("h2",{children:"Reschedule Requests"})}),E.length===0?e.jsxs("div",{className:"no-requests",children:[e.jsx("div",{className:"empty-icon",children:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"20",y:"25",width:"60",height:"50",rx:"4"}),e.jsx("path",{d:"M20 35 L50 55 L80 35"}),e.jsx("circle",{cx:"50",cy:"70",r:"3",fill:"currentColor"})]})}),e.jsx("p",{children:"No pending requests"}),e.jsx("span",{children:"When clients request to reschedule, they will appear here"})]}):e.jsx("div",{className:"requests-list",children:E.map(a=>e.jsxs("div",{className:"request-card",children:[e.jsxs("div",{className:"request-header",children:[e.jsx("span",{className:"client-name",children:a.clientName}),e.jsx("span",{className:"request-time",children:a.createdAt?.toDate?a.createdAt.toDate().toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""})]}),e.jsx("div",{className:"request-details",children:e.jsxs("div",{className:"request-change",children:[e.jsxs("div",{className:"from-session",children:[e.jsx("span",{className:"label",children:"From:"}),e.jsxs("span",{className:"value",children:[le(a.originalDate)," at ",ue(a.originalTime)]})]}),e.jsx("div",{className:"arrow",children:"→"}),e.jsxs("div",{className:"to-session",children:[e.jsx("span",{className:"label",children:"To:"}),e.jsxs("span",{className:"value",children:[le(a.requestedDate)," at ",ue(a.requestedTime)]})]})]})}),e.jsxs("div",{className:"request-actions",children:[e.jsx("button",{className:"approve-btn",onClick:()=>pe(a),disabled:q===a.id,children:q===a.id?"Processing...":"Approve"}),e.jsx("button",{className:"reject-btn",onClick:()=>xe(a),disabled:q===a.id,children:"Reject"})]})]},a.id))})]}),h==="forms"&&e.jsxs("div",{className:"forms-view",children:[e.jsx("div",{className:"view-header",children:e.jsx("h2",{children:"Client Forms"})}),e.jsx(ds,{})]}),h==="circuits"&&e.jsxs("div",{className:"circuits-view",children:[e.jsx("div",{className:"view-header",children:e.jsx("h2",{children:"Circuit Management"})}),e.jsx(ms,{})]})]}),e.jsxs("nav",{className:"admin-bottom-nav",children:[e.jsxs("button",{className:`admin-nav-tab ${h==="schedule"?"active":""}`,onClick:()=>g("schedule"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),e.jsx("span",{children:"Today"})]}),e.jsxs("button",{className:`admin-nav-tab ${h==="clients"?"active":""}`,onClick:()=>g("clients"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),e.jsx("span",{children:"Clients"})]}),e.jsxs("button",{className:`admin-nav-tab ${h==="calendar"?"active":""}`,onClick:()=>g("calendar"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),e.jsx("path",{d:"M8 14h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M16 14h.01"}),e.jsx("path",{d:"M8 18h.01"}),e.jsx("path",{d:"M12 18h.01"})]}),e.jsx("span",{children:"Calendar"})]})]})]})}export{js as default};
