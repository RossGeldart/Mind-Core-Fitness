const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CQo0bfWW.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-CL-znvAw.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-DC9a2sSW.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-DT7Sb9qI.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-CeEH5SbA.js","assets/ProteinSnacks-BzHzt4PS.js","assets/DailyMotivation-Bb2n4tO1.js","assets/CircuitDashboard-DPNLYSSO.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-zp6ls3S7.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-B9AHYN5Y.js","assets/Leaderboard-lyZEtGxw.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var ip={exports:{}},Bc={};var n1;function tT(){if(n1)return Bc;n1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:h,ref:l!==void 0?l:null,props:u}}return Bc.Fragment=e,Bc.jsx=n,Bc.jsxs=n,Bc}var s1;function nT(){return s1||(s1=1,ip.exports=tT()),ip.exports}var a=nT(),op={exports:{}},Mt={};var r1;function sT(){if(r1)return Mt;r1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),E=Symbol.iterator;function O(C){return C===null||typeof C!="object"?null:(C=E&&C[E]||C["@@iterator"],typeof C=="function"?C:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,V={};function re(C,U,le){this.props=C,this.context=U,this.refs=V,this.updater=le||W}re.prototype.isReactComponent={},re.prototype.setState=function(C,U){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,U,"setState")},re.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function J(){}J.prototype=re.prototype;function ue(C,U,le){this.props=C,this.context=U,this.refs=V,this.updater=le||W}var we=ue.prototype=new J;we.constructor=ue,z(we,re.prototype),we.isPureReactComponent=!0;var Be=Array.isArray;function De(){}var M={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function A(C,U,le){var pe=le.ref;return{$$typeof:s,type:C,key:U,ref:pe!==void 0?pe:null,props:le}}function P(C,U){return A(C.type,U,C.props)}function D(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function H(C){var U={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(le){return U[le]})}var I=/\/+/g;function ze(C,U){return typeof C=="object"&&C!==null&&C.key!=null?H(""+C.key):U.toString(36)}function pt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(De,De):(C.status="pending",C.then(function(U){C.status==="pending"&&(C.status="fulfilled",C.value=U)},function(U){C.status==="pending"&&(C.status="rejected",C.reason=U)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Q(C,U,le,pe,Ae){var Pe=typeof C;(Pe==="undefined"||Pe==="boolean")&&(C=null);var Qe=!1;if(C===null)Qe=!0;else switch(Pe){case"bigint":case"string":case"number":Qe=!0;break;case"object":switch(C.$$typeof){case s:case e:Qe=!0;break;case w:return Qe=C._init,Q(Qe(C._payload),U,le,pe,Ae)}}if(Qe)return Ae=Ae(C),Qe=pe===""?"."+ze(C,0):pe,Be(Ae)?(le="",Qe!=null&&(le=Qe.replace(I,"$&/")+"/"),Q(Ae,U,le,"",function(Dt){return Dt})):Ae!=null&&(D(Ae)&&(Ae=P(Ae,le+(Ae.key==null||C&&C.key===Ae.key?"":(""+Ae.key).replace(I,"$&/")+"/")+Qe)),U.push(Ae)),1;Qe=0;var Fe=pe===""?".":pe+":";if(Be(C))for(var at=0;at<C.length;at++)pe=C[at],Pe=Fe+ze(pe,at),Qe+=Q(pe,U,le,Pe,Ae);else if(at=O(C),typeof at=="function")for(C=at.call(C),at=0;!(pe=C.next()).done;)pe=pe.value,Pe=Fe+ze(pe,at++),Qe+=Q(pe,U,le,Pe,Ae);else if(Pe==="object"){if(typeof C.then=="function")return Q(pt(C),U,le,pe,Ae);throw U=String(C),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return Qe}function Te(C,U,le){if(C==null)return C;var pe=[],Ae=0;return Q(C,pe,"","",function(Pe){return U.call(le,Pe,Ae++)}),pe}function Le(C){if(C._status===-1){var U=C._result;U=U(),U.then(function(le){(C._status===0||C._status===-1)&&(C._status=1,C._result=le)},function(le){(C._status===0||C._status===-1)&&(C._status=2,C._result=le)}),C._status===-1&&(C._status=0,C._result=U)}if(C._status===1)return C._result.default;throw C._result}var ce=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Oe={map:Te,forEach:function(C,U,le){Te(C,function(){U.apply(this,arguments)},le)},count:function(C){var U=0;return Te(C,function(){U++}),U},toArray:function(C){return Te(C,function(U){return U})||[]},only:function(C){if(!D(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Mt.Activity=T,Mt.Children=Oe,Mt.Component=re,Mt.Fragment=n,Mt.Profiler=l,Mt.PureComponent=ue,Mt.StrictMode=i,Mt.Suspense=g,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return M.H.useMemoCache(C)}},Mt.cache=function(C){return function(){return C.apply(null,arguments)}},Mt.cacheSignal=function(){return null},Mt.cloneElement=function(C,U,le){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var pe=z({},C.props),Ae=C.key;if(U!=null)for(Pe in U.key!==void 0&&(Ae=""+U.key),U)!S.call(U,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&U.ref===void 0||(pe[Pe]=U[Pe]);var Pe=arguments.length-2;if(Pe===1)pe.children=le;else if(1<Pe){for(var Qe=Array(Pe),Fe=0;Fe<Pe;Fe++)Qe[Fe]=arguments[Fe+2];pe.children=Qe}return A(C.type,Ae,pe)},Mt.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},Mt.createElement=function(C,U,le){var pe,Ae={},Pe=null;if(U!=null)for(pe in U.key!==void 0&&(Pe=""+U.key),U)S.call(U,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ae[pe]=U[pe]);var Qe=arguments.length-2;if(Qe===1)Ae.children=le;else if(1<Qe){for(var Fe=Array(Qe),at=0;at<Qe;at++)Fe[at]=arguments[at+2];Ae.children=Fe}if(C&&C.defaultProps)for(pe in Qe=C.defaultProps,Qe)Ae[pe]===void 0&&(Ae[pe]=Qe[pe]);return A(C,Pe,Ae)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(C){return{$$typeof:p,render:C}},Mt.isValidElement=D,Mt.lazy=function(C){return{$$typeof:w,_payload:{_status:-1,_result:C},_init:Le}},Mt.memo=function(C,U){return{$$typeof:y,type:C,compare:U===void 0?null:U}},Mt.startTransition=function(C){var U=M.T,le={};M.T=le;try{var pe=C(),Ae=M.S;Ae!==null&&Ae(le,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(De,ce)}catch(Pe){ce(Pe)}finally{U!==null&&le.types!==null&&(U.types=le.types),M.T=U}},Mt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Mt.use=function(C){return M.H.use(C)},Mt.useActionState=function(C,U,le){return M.H.useActionState(C,U,le)},Mt.useCallback=function(C,U){return M.H.useCallback(C,U)},Mt.useContext=function(C){return M.H.useContext(C)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(C,U){return M.H.useDeferredValue(C,U)},Mt.useEffect=function(C,U){return M.H.useEffect(C,U)},Mt.useEffectEvent=function(C){return M.H.useEffectEvent(C)},Mt.useId=function(){return M.H.useId()},Mt.useImperativeHandle=function(C,U,le){return M.H.useImperativeHandle(C,U,le)},Mt.useInsertionEffect=function(C,U){return M.H.useInsertionEffect(C,U)},Mt.useLayoutEffect=function(C,U){return M.H.useLayoutEffect(C,U)},Mt.useMemo=function(C,U){return M.H.useMemo(C,U)},Mt.useOptimistic=function(C,U){return M.H.useOptimistic(C,U)},Mt.useReducer=function(C,U,le){return M.H.useReducer(C,U,le)},Mt.useRef=function(C){return M.H.useRef(C)},Mt.useState=function(C){return M.H.useState(C)},Mt.useSyncExternalStore=function(C,U,le){return M.H.useSyncExternalStore(C,U,le)},Mt.useTransition=function(){return M.H.useTransition()},Mt.version="19.2.4",Mt}var a1;function bg(){return a1||(a1=1,op.exports=sT()),op.exports}var _=bg(),lp={exports:{}},Uc={},cp={exports:{}},up={};var i1;function rT(){return i1||(i1=1,(function(s){function e(Q,Te){var Le=Q.length;Q.push(Te);e:for(;0<Le;){var ce=Le-1>>>1,Oe=Q[ce];if(0<l(Oe,Te))Q[ce]=Te,Q[Le]=Oe,Le=ce;else break e}}function n(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var Te=Q[0],Le=Q.pop();if(Le!==Te){Q[0]=Le;e:for(var ce=0,Oe=Q.length,C=Oe>>>1;ce<C;){var U=2*(ce+1)-1,le=Q[U],pe=U+1,Ae=Q[pe];if(0>l(le,Le))pe<Oe&&0>l(Ae,le)?(Q[ce]=Ae,Q[pe]=Le,ce=pe):(Q[ce]=le,Q[U]=Le,ce=U);else if(pe<Oe&&0>l(Ae,Le))Q[ce]=Ae,Q[pe]=Le,ce=pe;else break e}}return Te}function l(Q,Te){var Le=Q.sortIndex-Te.sortIndex;return Le!==0?Le:Q.id-Te.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],y=[],w=1,T=null,E=3,O=!1,W=!1,z=!1,V=!1,re=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function we(Q){for(var Te=n(y);Te!==null;){if(Te.callback===null)i(y);else if(Te.startTime<=Q)i(y),Te.sortIndex=Te.expirationTime,e(g,Te);else break;Te=n(y)}}function Be(Q){if(z=!1,we(Q),!W)if(n(g)!==null)W=!0,De||(De=!0,H());else{var Te=n(y);Te!==null&&pt(Be,Te.startTime-Q)}}var De=!1,M=-1,S=5,A=-1;function P(){return V?!0:!(s.unstable_now()-A<S)}function D(){if(V=!1,De){var Q=s.unstable_now();A=Q;var Te=!0;try{e:{W=!1,z&&(z=!1,J(M),M=-1),O=!0;var Le=E;try{t:{for(we(Q),T=n(g);T!==null&&!(T.expirationTime>Q&&P());){var ce=T.callback;if(typeof ce=="function"){T.callback=null,E=T.priorityLevel;var Oe=ce(T.expirationTime<=Q);if(Q=s.unstable_now(),typeof Oe=="function"){T.callback=Oe,we(Q),Te=!0;break t}T===n(g)&&i(g),we(Q)}else i(g);T=n(g)}if(T!==null)Te=!0;else{var C=n(y);C!==null&&pt(Be,C.startTime-Q),Te=!1}}break e}finally{T=null,E=Le,O=!1}Te=void 0}}finally{Te?H():De=!1}}}var H;if(typeof ue=="function")H=function(){ue(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ze=I.port2;I.port1.onmessage=D,H=function(){ze.postMessage(null)}}else H=function(){re(D,0)};function pt(Q,Te){M=re(function(){Q(s.unstable_now())},Te)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function(Q){switch(E){case 1:case 2:case 3:var Te=3;break;default:Te=E}var Le=E;E=Te;try{return Q()}finally{E=Le}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(Q,Te){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Le=E;E=Q;try{return Te()}finally{E=Le}},s.unstable_scheduleCallback=function(Q,Te,Le){var ce=s.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?ce+Le:ce):Le=ce,Q){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=Le+Oe,Q={id:w++,callback:Te,priorityLevel:Q,startTime:Le,expirationTime:Oe,sortIndex:-1},Le>ce?(Q.sortIndex=Le,e(y,Q),n(g)===null&&Q===n(y)&&(z?(J(M),M=-1):z=!0,pt(Be,Le-ce))):(Q.sortIndex=Oe,e(g,Q),W||O||(W=!0,De||(De=!0,H()))),Q},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(Q){var Te=E;return function(){var Le=E;E=Te;try{return Q.apply(this,arguments)}finally{E=Le}}}})(up)),up}var o1;function aT(){return o1||(o1=1,cp.exports=rT()),cp.exports}var hp={exports:{}},Ds={};var l1;function iT(){if(l1)return Ds;l1=1;var s=bg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:g,containerInfo:y,implementation:w}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ds.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ds.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,w)},Ds.flushSync=function(g){var y=h.T,w=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=w,i.d.f()}},Ds.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Ds.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Ds.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,T=p(w,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:O}):w==="script"&&i.d.X(g,{crossOrigin:T,integrity:E,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ds.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Ds.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,T=p(w,y.crossOrigin);i.d.L(g,w,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ds.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Ds.requestFormReset=function(g){i.d.r(g)},Ds.unstable_batchedUpdates=function(g,y){return g(y)},Ds.useFormState=function(g,y,w){return h.H.useFormState(g,y,w)},Ds.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ds.version="19.2.4",Ds}var c1;function oT(){if(c1)return hp.exports;c1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),hp.exports=iT(),hp.exports}var u1;function lT(){if(u1)return Uc;u1=1;var s=aT(),e=bg(),n=oT();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var o=t,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var x=!1,N=f.child;N;){if(N===o){x=!0,o=f,c=m;break}if(N===c){x=!0,c=f,o=m;break}N=N.sibling}if(!x){for(N=m.child;N;){if(N===o){x=!0,o=m,c=f;break}if(N===c){x=!0,c=m,o=f;break}N=N.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?t:r}function w(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=w(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,E=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),we=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function H(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function ze(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case re:return"Profiler";case V:return"StrictMode";case Be:return"Suspense";case De:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case W:return"Portal";case ue:return t.displayName||"Context";case J:return(t._context.displayName||"Context")+".Consumer";case we:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return r=t.displayName||null,r!==null?r:ze(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return ze(t(r))}catch{}}return null}var pt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le={pending:!1,data:null,method:null,action:null},ce=[],Oe=-1;function C(t){return{current:t}}function U(t){0>Oe||(t.current=ce[Oe],ce[Oe]=null,Oe--)}function le(t,r){Oe++,ce[Oe]=t.current,t.current=r}var pe=C(null),Ae=C(null),Pe=C(null),Qe=C(null);function Fe(t,r){switch(le(Pe,r),le(Ae,t),le(pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Tb(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Tb(r),t=Eb(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}U(pe),le(pe,t)}function at(){U(pe),U(Ae),U(Pe)}function Dt(t){t.memoizedState!==null&&le(Qe,t);var r=pe.current,o=Eb(r,t.type);r!==o&&(le(Ae,t),le(pe,o))}function Wt(t){Ae.current===t&&(U(pe),U(Ae)),Qe.current===t&&(U(Qe),Pc._currentValue=Le)}var lt,dt;function oe(t){if(lt===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);lt=r&&r[1]||"",dt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lt+t+dt}var an=!1;function Ct(t,r){if(!t||an)return"";an=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(fe){var ie=fe}Reflect.construct(t,[],Re)}else{try{Re.call()}catch(fe){ie=fe}t.call(Re.prototype)}}else{try{throw Error()}catch(fe){ie=fe}(Re=t())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(fe){if(fe&&ie&&typeof fe.stack=="string")return[fe.stack,ie.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],N=m[1];if(x&&N){var F=x.split(`
`),ae=N.split(`
`);for(f=c=0;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ae.length&&!ae[f].includes("DetermineComponentFrameRoot");)f++;if(c===F.length||f===ae.length)for(c=F.length-1,f=ae.length-1;1<=c&&0<=f&&F[c]!==ae[f];)f--;for(;1<=c&&0<=f;c--,f--)if(F[c]!==ae[f]){if(c!==1||f!==1)do if(c--,f--,0>f||F[c]!==ae[f]){var xe=`
`+F[c].replace(" at new "," at ");return t.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",t.displayName)),xe}while(1<=c&&0<=f);break}}}finally{an=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?oe(o):""}function bt(t,r){switch(t.tag){case 26:case 27:case 5:return oe(t.type);case 16:return oe("Lazy");case 13:return t.child!==r&&r!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return Ct(t.type,!1);case 11:return Ct(t.type.render,!1);case 1:return Ct(t.type,!0);case 31:return oe("Activity");default:return""}}function wt(t){try{var r="",o=null;do r+=bt(t,o),o=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ct=Object.prototype.hasOwnProperty,Xe=s.unstable_scheduleCallback,qt=s.unstable_cancelCallback,Wn=s.unstable_shouldYield,Et=s.unstable_requestPaint,At=s.unstable_now,Nn=s.unstable_getCurrentPriorityLevel,jt=s.unstable_ImmediatePriority,ln=s.unstable_UserBlockingPriority,B=s.unstable_NormalPriority,ee=s.unstable_LowPriority,ve=s.unstable_IdlePriority,Ue=s.log,Ke=s.unstable_setDisableYieldValue,Ve=null,Ye=null;function He(t){if(typeof Ue=="function"&&Ke(t),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Ve,t)}catch{}}var qe=Math.clz32?Math.clz32:Lt,St=Math.log,Gt=Math.LN2;function Lt(t){return t>>>=0,t===0?32:31-(St(t)/Gt|0)|0}var on=256,Cn=262144,Tt=4194304;function Nt(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Kt(t,r,o){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var N=c&134217727;return N!==0?(c=N&~m,c!==0?f=Nt(c):(x&=N,x!==0?f=Nt(x):o||(o=N&~t,o!==0&&(f=Nt(o))))):(N=c&~m,N!==0?f=Nt(N):x!==0?f=Nt(x):o||(o=c&~t,o!==0&&(f=Nt(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function hn(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Jn(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qn(){var t=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),t}function yn(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Ln(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function rs(t,r,o,c,f,m){var x=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var N=t.entanglements,F=t.expirationTimes,ae=t.hiddenUpdates;for(o=x&~o;0<o;){var xe=31-qe(o),Re=1<<xe;N[xe]=0,F[xe]=-1;var ie=ae[xe];if(ie!==null)for(ae[xe]=null,xe=0;xe<ie.length;xe++){var fe=ie[xe];fe!==null&&(fe.lane&=-536870913)}o&=~Re}c!==0&&vs(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~r))}function vs(t,r,o){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-qe(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|o&261930}function Gn(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-qe(o),f=1<<c;f&r|t[c]&r&&(t[c]|=r),o&=~f}}function As(t,r){var o=r&-r;return o=(o&42)!==0?1:G(o),(o&(t.suspendedLanes|r))!==0?0:o}function G(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ye(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ee(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:Yb(t.type))}function ke(t,r){var o=Te.p;try{return Te.p=t,r()}finally{Te.p=o}}var me=Math.random().toString(36).slice(2),nt="__reactFiber$"+me,ft="__reactProps$"+me,rt="__reactContainer$"+me,vt="__reactEvents$"+me,mt="__reactListeners$"+me,en="__reactHandles$"+me,Ms="__reactResources$"+me,as="__reactMarker$"+me;function bs(t){delete t[nt],delete t[ft],delete t[vt],delete t[mt],delete t[en]}function En(t){var r=t[nt];if(r)return r;for(var o=t.parentNode;o;){if(r=o[rt]||o[nt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Ib(t);t!==null;){if(o=t[nt])return o;t=Ib(t)}return r}t=o,o=t.parentNode}return null}function $(t){if(t=t[nt]||t[rt]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function he(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function b(t){var r=t[Ms];return r||(r=t[Ms]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function j(t){t[as]=!0}var L=new Set,Y={};function Ie(t,r){be(t,r),be(t+"Capture",r)}function be(t,r){for(Y[t]=r,t=0;t<r.length;t++)L.add(r[t])}var je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tt={},et={};function q(t){return ct.call(et,t)?!0:ct.call(tt,t)?!1:je.test(t)?et[t]=!0:(tt[t]=!0,!1)}function Z(t,r,o){if(q(r))if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+o)}}function ne(t,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+o)}}function ge(t,r,o,c){if(c===null)t.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(r,o,""+c)}}function Ce(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function We(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function it(t,r,o){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(x){o=""+x,m.call(this,x)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Je(t){if(!t._valueTracker){var r=We(t)?"checked":"value";t._valueTracker=it(t,r,""+t[r])}}function Bt(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=We(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function vn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zt=/[\n"\\]/g;function pn(t){return t.replace(zt,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Zs(t,r,o,c,f,m,x,N){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),r!=null?x==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ce(r)):t.value!==""+Ce(r)&&(t.value=""+Ce(r)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),r!=null?ms(t,x,Ce(r)):o!=null?ms(t,x,Ce(o)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+Ce(N):t.removeAttribute("name")}function is(t,r,o,c,f,m,x,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Je(t);return}o=o!=null?""+Ce(o):"",r=r!=null?""+Ce(r):o,N||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=N?t.checked:!!c,t.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),Je(t)}function ms(t,r,o){r==="number"&&vn(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function ps(t,r,o,c){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+Ce(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Ft(t,r,o){if(r!=null&&(r=""+Ce(r),r!==t.value&&(t.value=r),o==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=o!=null?""+Ce(o):""}function Rn(t,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(pt(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Ce(r),t.defaultValue=o,c=t.textContent,c===o&&c!==""&&c!==null&&(t.value=c),Je(t)}function In(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var er=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Is(t,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,o):typeof o!="number"||o===0||er.has(r)?r==="float"?t.cssFloat=o:t[r]=(""+o).trim():t[r]=o+"px"}function On(t,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&Is(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Is(t,m,r[m])}function Hn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(t){return Nr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Us(){}var Xl=null;function fr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qa=null,Yr=null;function Qi(t){var r=$(t);if(r&&(t=r.stateNode)){var o=t[ft]||null;e:switch(t=r.stateNode,r.type){case"input":if(Zs(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+pn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var f=c[ft]||null;if(!f)throw Error(i(90));Zs(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===t.form&&Bt(c)}break e;case"textarea":Ft(t,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&ps(t,!!o.multiple,r,!1)}}}var Bo=!1;function Xa(t,r,o){if(Bo)return t(r,o);Bo=!0;try{var c=t(r);return c}finally{if(Bo=!1,(Qa!==null||Yr!==null)&&(Eh(),Qa&&(r=Qa,t=Yr,Yr=Qa=null,Qi(r),t)))for(r=0;r<t.length;r++)Qi(t[r])}}function Cr(t,r){var o=t.stateNode;if(o===null)return null;var c=o[ft]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xi=!1;if(mr)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{Xi=!1}var Qr=null,Jl=null,Ji=null;function Zl(){if(Ji)return Ji;var t,r=Jl,o=r.length,c,f="value"in Qr?Qr.value:Qr.textContent,m=f.length;for(t=0;t<o&&r[t]===f[t];t++);var x=o-t;for(c=1;c<=x&&r[o-c]===f[m-c];c++);return Ji=f.slice(t,1<c?1-c:void 0)}function Zi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function ya(){return!0}function Rr(){return!1}function _s(t){function r(o,c,f,m,x){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(o=t[N],this[N]=o?o(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ya:Rr,this.isPropagationStopped=Rr,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ya)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ya)},persist:function(){},isPersistent:ya}),r}var va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xr=_s(va),Ja=T({},va,{view:0,detail:0}),ec=_s(Ja),Za,Uo,Jr,zo=T({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ei,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jr&&(Jr&&t.type==="mousemove"?(Za=t.screenX-Jr.screenX,Uo=t.screenY-Jr.screenY):Uo=Za=0,Jr=t),Za)},movementY:function(t){return"movementY"in t?t.movementY:Uo}}),tc=_s(zo),eo=T({},zo,{dataTransfer:0}),Du=_s(eo),Pu=T({},Ja,{relatedTarget:0}),to=_s(Pu),nc=T({},va,{animationName:0,elapsedTime:0,pseudoElement:0}),Lu=_s(nc),Fo=T({},va,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ou=_s(Fo),Vu=T({},va,{data:0}),Zr=_s(Vu),Bu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=zu[t])?!!r[t]:!1}function ei(){return Fu}var zs=T({},Ja,{key:function(t){if(t.key){var r=Bu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Zi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ei,charCode:function(t){return t.type==="keypress"?Zi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qu=_s(zs),Hu=T({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ba=_s(Hu),d=T({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ei}),v=_s(d),k=T({},va,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=_s(k),te=T({},zo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),de=_s(te),$e=T({},va,{newState:0,oldState:0}),Ot=_s($e),Zn=[9,13,27,32],dn=mr&&"CompositionEvent"in window,Vn=null;mr&&"documentMode"in document&&(Vn=document.documentMode);var pr=mr&&"TextEvent"in window&&!Vn,ea=mr&&(!dn||Vn&&8<Vn&&11>=Vn),Ar=" ",Mr=!1;function no(t,r){switch(t){case"keyup":return Zn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ho=!1;function Tk(t,r){switch(t){case"compositionend":return qo(r);case"keypress":return r.which!==32?null:(Mr=!0,Ar);case"textInput":return t=r.data,t===Ar&&Mr?null:t;default:return null}}function Ek(t,r){if(Ho)return t==="compositionend"||!dn&&no(t,r)?(t=Zl(),Ji=Jl=Qr=null,Ho=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ea&&r.locale!=="ko"?null:r.data;default:return null}}var Sk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ly(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Sk[t.type]:r==="textarea"}function Oy(t,r,o,c){Qa?Yr?Yr.push(c):Yr=[c]:Qa=c,r=Ih(r,"onChange"),0<r.length&&(o=new Xr("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var sc=null,rc=null;function Nk(t){bb(t,0)}function $u(t){var r=he(t);if(Bt(r))return t}function Vy(t,r){if(t==="change")return r}var By=!1;if(mr){var ff;if(mr){var mf="oninput"in document;if(!mf){var Uy=document.createElement("div");Uy.setAttribute("oninput","return;"),mf=typeof Uy.oninput=="function"}ff=mf}else ff=!1;By=ff&&(!document.documentMode||9<document.documentMode)}function zy(){sc&&(sc.detachEvent("onpropertychange",Fy),rc=sc=null)}function Fy(t){if(t.propertyName==="value"&&$u(rc)){var r=[];Oy(r,rc,t,fr(t)),Xa(Nk,r)}}function Ck(t,r,o){t==="focusin"?(zy(),sc=r,rc=o,sc.attachEvent("onpropertychange",Fy)):t==="focusout"&&zy()}function Rk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $u(rc)}function Ak(t,r){if(t==="click")return $u(r)}function Mk(t,r){if(t==="input"||t==="change")return $u(r)}function Ik(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var tr=typeof Object.is=="function"?Object.is:Ik;function ac(t,r){if(tr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!ct.call(r,f)||!tr(t[f],r[f]))return!1}return!0}function qy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hy(t,r){var o=qy(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=qy(o)}}function $y(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?$y(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Wy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=vn(t.document);r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=vn(t.document)}return r}function pf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Dk=mr&&"documentMode"in document&&11>=document.documentMode,$o=null,gf=null,ic=null,yf=!1;function Gy(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;yf||$o==null||$o!==vn(c)||(c=$o,"selectionStart"in c&&pf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ic&&ac(ic,c)||(ic=c,c=Ih(gf,"onSelect"),0<c.length&&(r=new Xr("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=$o)))}function so(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Wo={animationend:so("Animation","AnimationEnd"),animationiteration:so("Animation","AnimationIteration"),animationstart:so("Animation","AnimationStart"),transitionrun:so("Transition","TransitionRun"),transitionstart:so("Transition","TransitionStart"),transitioncancel:so("Transition","TransitionCancel"),transitionend:so("Transition","TransitionEnd")},vf={},Ky={};mr&&(Ky=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function ro(t){if(vf[t])return vf[t];if(!Wo[t])return t;var r=Wo[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Ky)return vf[t]=r[o];return t}var Yy=ro("animationend"),Qy=ro("animationiteration"),Xy=ro("animationstart"),Pk=ro("transitionrun"),Lk=ro("transitionstart"),Ok=ro("transitioncancel"),Jy=ro("transitionend"),Zy=new Map,bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bf.push("scrollEnd");function Ir(t,r){Zy.set(t,r),Ie(r,[t])}var Wu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},gr=[],Go=0,xf=0;function Gu(){for(var t=Go,r=xf=Go=0;r<t;){var o=gr[r];gr[r++]=null;var c=gr[r];gr[r++]=null;var f=gr[r];gr[r++]=null;var m=gr[r];if(gr[r++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}m!==0&&e0(o,f,m)}}function Ku(t,r,o,c){gr[Go++]=t,gr[Go++]=r,gr[Go++]=o,gr[Go++]=c,xf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function wf(t,r,o,c){return Ku(t,r,o,c),Yu(t)}function ao(t,r){return Ku(t,null,null,r),Yu(t)}function e0(t,r,o){t.lanes|=o;var c=t.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=t.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-qe(o),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function Yu(t){if(50<Nc)throw Nc=0,Rm=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ko={};function Vk(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(t,r,o,c){return new Vk(t,r,o,c)}function _f(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xa(t,r){var o=t.alternate;return o===null?(o=nr(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function t0(t,r){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,r=o.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Qu(t,r,o,c,f,m){var x=0;if(c=t,typeof t=="function")_f(t)&&(x=1);else if(typeof t=="string")x=qj(t,o,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=nr(31,o,r,f),t.elementType=A,t.lanes=m,t;case z:return io(o.children,f,m,r);case V:x=8,f|=24;break;case re:return t=nr(12,o,r,f|2),t.elementType=re,t.lanes=m,t;case Be:return t=nr(13,o,r,f),t.elementType=Be,t.lanes=m,t;case De:return t=nr(19,o,r,f),t.elementType=De,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ue:x=10;break e;case J:x=9;break e;case we:x=11;break e;case M:x=14;break e;case S:x=16,c=null;break e}x=29,o=Error(i(130,t===null?"null":typeof t,"")),c=null}return r=nr(x,o,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function io(t,r,o,c){return t=nr(7,t,c,r),t.lanes=o,t}function kf(t,r,o){return t=nr(6,t,null,r),t.lanes=o,t}function n0(t){var r=nr(18,null,null,0);return r.stateNode=t,r}function jf(t,r,o){return r=nr(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var s0=new WeakMap;function yr(t,r){if(typeof t=="object"&&t!==null){var o=s0.get(t);return o!==void 0?o:(r={value:t,source:r,stack:wt(r)},s0.set(t,r),r)}return{value:t,source:r,stack:wt(r)}}var Yo=[],Qo=0,Xu=null,oc=0,vr=[],br=0,ti=null,ta=1,na="";function wa(t,r){Yo[Qo++]=oc,Yo[Qo++]=Xu,Xu=t,oc=r}function r0(t,r,o){vr[br++]=ta,vr[br++]=na,vr[br++]=ti,ti=t;var c=ta;t=na;var f=32-qe(c)-1;c&=~(1<<f),o+=1;var m=32-qe(r)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,ta=1<<32-qe(r)+f|o<<f|c,na=m+t}else ta=1<<m|o<<f|c,na=t}function Tf(t){t.return!==null&&(wa(t,1),r0(t,1,0))}function Ef(t){for(;t===Xu;)Xu=Yo[--Qo],Yo[Qo]=null,oc=Yo[--Qo],Yo[Qo]=null;for(;t===ti;)ti=vr[--br],vr[br]=null,na=vr[--br],vr[br]=null,ta=vr[--br],vr[br]=null}function a0(t,r){vr[br++]=ta,vr[br++]=na,vr[br++]=ti,ta=r.id,na=r.overflow,ti=t}var ks=null,Dn=null,tn=!1,ni=null,xr=!1,Sf=Error(i(519));function si(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lc(yr(r,t)),Sf}function i0(t){var r=t.stateNode,o=t.type,c=t.memoizedProps;switch(r[nt]=t,r[ft]=c,o){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(o=0;o<Rc.length;o++)$t(Rc[o],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":$t("invalid",r),is(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":$t("invalid",r);break;case"textarea":$t("invalid",r),Rn(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||kb(r.textContent,o)?(c.popover!=null&&($t("beforetoggle",r),$t("toggle",r)),c.onScroll!=null&&$t("scroll",r),c.onScrollEnd!=null&&$t("scrollend",r),c.onClick!=null&&(r.onclick=Us),r=!0):r=!1,r||si(t,!0)}function o0(t){for(ks=t.return;ks;)switch(ks.tag){case 5:case 31:case 13:xr=!1;return;case 27:case 3:xr=!0;return;default:ks=ks.return}}function Xo(t){if(t!==ks)return!1;if(!tn)return o0(t),tn=!0,!1;var r=t.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||$m(t.type,t.memoizedProps)),o=!o),o&&Dn&&si(t),o0(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Dn=Mb(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Dn=Mb(t)}else r===27?(r=Dn,yi(t.type)?(t=Qm,Qm=null,Dn=t):Dn=r):Dn=ks?_r(t.stateNode.nextSibling):null;return!0}function oo(){Dn=ks=null,tn=!1}function Nf(){var t=ni;return t!==null&&(Ks===null?Ks=t:Ks.push.apply(Ks,t),ni=null),t}function lc(t){ni===null?ni=[t]:ni.push(t)}var Cf=C(null),lo=null,_a=null;function ri(t,r,o){le(Cf,r._currentValue),r._currentValue=o}function ka(t){t._currentValue=Cf.current,U(Cf)}function Rf(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Af(t,r,o,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=f;for(var F=0;F<r.length;F++)if(N.context===r[F]){m.lanes|=o,N=m.alternate,N!==null&&(N.lanes|=o),Rf(m.return,o,t),c||(x=null);break e}m=N.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),Rf(x,o,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Jo(t,r,o,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var N=f.type;tr(f.pendingProps.value,x.value)||(t!==null?t.push(N):t=[N])}}else if(f===Qe.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Pc):t=[Pc])}f=f.return}t!==null&&Af(r,t,o,c),r.flags|=262144}function Ju(t){for(t=t.firstContext;t!==null;){if(!tr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function co(t){lo=t,_a=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function js(t){return l0(lo,t)}function Zu(t,r){return lo===null&&co(t),l0(t,r)}function l0(t,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},_a===null){if(t===null)throw Error(i(308));_a=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else _a=_a.next=r;return o}var Bk=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(o,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(o){return o()})}},Uk=s.unstable_scheduleCallback,zk=s.unstable_NormalPriority,os={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new Bk,data:new Map,refCount:0}}function cc(t){t.refCount--,t.refCount===0&&Uk(zk,function(){t.controller.abort()})}var uc=null,If=0,Zo=0,el=null;function Fk(t,r){if(uc===null){var o=uc=[];If=0,Zo=Lm(),el={status:"pending",value:void 0,then:function(c){o.push(c)}}}return If++,r.then(c0,c0),r}function c0(){if(--If===0&&uc!==null){el!==null&&(el.status="fulfilled");var t=uc;uc=null,Zo=0,el=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function qk(t,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var u0=Q.S;Q.S=function(t,r){Gv=At(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Fk(t,r),u0!==null&&u0(t,r)};var uo=C(null);function Df(){var t=uo.current;return t!==null?t:Sn.pooledCache}function eh(t,r){r===null?le(uo,uo.current):le(uo,r.pool)}function h0(){var t=Df();return t===null?null:{parent:os._currentValue,pool:t}}var tl=Error(i(460)),Pf=Error(i(474)),th=Error(i(542)),nh={then:function(){}};function d0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function f0(t,r,o){switch(o=t[o],o===void 0?t.push(r):o!==r&&(r.then(Us,Us),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,p0(t),t;default:if(typeof r.status=="string")r.then(Us,Us);else{if(t=Sn,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,p0(t),t}throw fo=r,tl}}function ho(t){try{var r=t._init;return r(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(fo=o,tl):o}}var fo=null;function m0(){if(fo===null)throw Error(i(459));var t=fo;return fo=null,t}function p0(t){if(t===tl||t===th)throw Error(i(483))}var nl=null,hc=0;function sh(t){var r=hc;return hc+=1,nl===null&&(nl=[]),f0(nl,t,r)}function dc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function rh(t,r){throw r.$$typeof===E?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function g0(t){function r(X,K){if(t){var se=X.deletions;se===null?(X.deletions=[K],X.flags|=16):se.push(K)}}function o(X,K){if(!t)return null;for(;K!==null;)r(X,K),K=K.sibling;return null}function c(X){for(var K=new Map;X!==null;)X.key!==null?K.set(X.key,X):K.set(X.index,X),X=X.sibling;return K}function f(X,K){return X=xa(X,K),X.index=0,X.sibling=null,X}function m(X,K,se){return X.index=se,t?(se=X.alternate,se!==null?(se=se.index,se<K?(X.flags|=67108866,K):se):(X.flags|=67108866,K)):(X.flags|=1048576,K)}function x(X){return t&&X.alternate===null&&(X.flags|=67108866),X}function N(X,K,se,Se){return K===null||K.tag!==6?(K=kf(se,X.mode,Se),K.return=X,K):(K=f(K,se),K.return=X,K)}function F(X,K,se,Se){var gt=se.type;return gt===z?xe(X,K,se.props.children,Se,se.key):K!==null&&(K.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===S&&ho(gt)===K.type)?(K=f(K,se.props),dc(K,se),K.return=X,K):(K=Qu(se.type,se.key,se.props,null,X.mode,Se),dc(K,se),K.return=X,K)}function ae(X,K,se,Se){return K===null||K.tag!==4||K.stateNode.containerInfo!==se.containerInfo||K.stateNode.implementation!==se.implementation?(K=jf(se,X.mode,Se),K.return=X,K):(K=f(K,se.children||[]),K.return=X,K)}function xe(X,K,se,Se,gt){return K===null||K.tag!==7?(K=io(se,X.mode,Se,gt),K.return=X,K):(K=f(K,se),K.return=X,K)}function Re(X,K,se){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=kf(""+K,X.mode,se),K.return=X,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case O:return se=Qu(K.type,K.key,K.props,null,X.mode,se),dc(se,K),se.return=X,se;case W:return K=jf(K,X.mode,se),K.return=X,K;case S:return K=ho(K),Re(X,K,se)}if(pt(K)||H(K))return K=io(K,X.mode,se,null),K.return=X,K;if(typeof K.then=="function")return Re(X,sh(K),se);if(K.$$typeof===ue)return Re(X,Zu(X,K),se);rh(X,K)}return null}function ie(X,K,se,Se){var gt=K!==null?K.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return gt!==null?null:N(X,K,""+se,Se);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case O:return se.key===gt?F(X,K,se,Se):null;case W:return se.key===gt?ae(X,K,se,Se):null;case S:return se=ho(se),ie(X,K,se,Se)}if(pt(se)||H(se))return gt!==null?null:xe(X,K,se,Se,null);if(typeof se.then=="function")return ie(X,K,sh(se),Se);if(se.$$typeof===ue)return ie(X,K,Zu(X,se),Se);rh(X,se)}return null}function fe(X,K,se,Se,gt){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return X=X.get(se)||null,N(K,X,""+Se,gt);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case O:return X=X.get(Se.key===null?se:Se.key)||null,F(K,X,Se,gt);case W:return X=X.get(Se.key===null?se:Se.key)||null,ae(K,X,Se,gt);case S:return Se=ho(Se),fe(X,K,se,Se,gt)}if(pt(Se)||H(Se))return X=X.get(se)||null,xe(K,X,Se,gt,null);if(typeof Se.then=="function")return fe(X,K,se,sh(Se),gt);if(Se.$$typeof===ue)return fe(X,K,se,Zu(K,Se),gt);rh(K,Se)}return null}function ot(X,K,se,Se){for(var gt=null,cn=null,ut=K,Ut=K=0,Qt=null;ut!==null&&Ut<se.length;Ut++){ut.index>Ut?(Qt=ut,ut=null):Qt=ut.sibling;var un=ie(X,ut,se[Ut],Se);if(un===null){ut===null&&(ut=Qt);break}t&&ut&&un.alternate===null&&r(X,ut),K=m(un,K,Ut),cn===null?gt=un:cn.sibling=un,cn=un,ut=Qt}if(Ut===se.length)return o(X,ut),tn&&wa(X,Ut),gt;if(ut===null){for(;Ut<se.length;Ut++)ut=Re(X,se[Ut],Se),ut!==null&&(K=m(ut,K,Ut),cn===null?gt=ut:cn.sibling=ut,cn=ut);return tn&&wa(X,Ut),gt}for(ut=c(ut);Ut<se.length;Ut++)Qt=fe(ut,X,Ut,se[Ut],Se),Qt!==null&&(t&&Qt.alternate!==null&&ut.delete(Qt.key===null?Ut:Qt.key),K=m(Qt,K,Ut),cn===null?gt=Qt:cn.sibling=Qt,cn=Qt);return t&&ut.forEach(function(_i){return r(X,_i)}),tn&&wa(X,Ut),gt}function xt(X,K,se,Se){if(se==null)throw Error(i(151));for(var gt=null,cn=null,ut=K,Ut=K=0,Qt=null,un=se.next();ut!==null&&!un.done;Ut++,un=se.next()){ut.index>Ut?(Qt=ut,ut=null):Qt=ut.sibling;var _i=ie(X,ut,un.value,Se);if(_i===null){ut===null&&(ut=Qt);break}t&&ut&&_i.alternate===null&&r(X,ut),K=m(_i,K,Ut),cn===null?gt=_i:cn.sibling=_i,cn=_i,ut=Qt}if(un.done)return o(X,ut),tn&&wa(X,Ut),gt;if(ut===null){for(;!un.done;Ut++,un=se.next())un=Re(X,un.value,Se),un!==null&&(K=m(un,K,Ut),cn===null?gt=un:cn.sibling=un,cn=un);return tn&&wa(X,Ut),gt}for(ut=c(ut);!un.done;Ut++,un=se.next())un=fe(ut,X,Ut,un.value,Se),un!==null&&(t&&un.alternate!==null&&ut.delete(un.key===null?Ut:un.key),K=m(un,K,Ut),cn===null?gt=un:cn.sibling=un,cn=un);return t&&ut.forEach(function(eT){return r(X,eT)}),tn&&wa(X,Ut),gt}function Tn(X,K,se,Se){if(typeof se=="object"&&se!==null&&se.type===z&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case O:e:{for(var gt=se.key;K!==null;){if(K.key===gt){if(gt=se.type,gt===z){if(K.tag===7){o(X,K.sibling),Se=f(K,se.props.children),Se.return=X,X=Se;break e}}else if(K.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===S&&ho(gt)===K.type){o(X,K.sibling),Se=f(K,se.props),dc(Se,se),Se.return=X,X=Se;break e}o(X,K);break}else r(X,K);K=K.sibling}se.type===z?(Se=io(se.props.children,X.mode,Se,se.key),Se.return=X,X=Se):(Se=Qu(se.type,se.key,se.props,null,X.mode,Se),dc(Se,se),Se.return=X,X=Se)}return x(X);case W:e:{for(gt=se.key;K!==null;){if(K.key===gt)if(K.tag===4&&K.stateNode.containerInfo===se.containerInfo&&K.stateNode.implementation===se.implementation){o(X,K.sibling),Se=f(K,se.children||[]),Se.return=X,X=Se;break e}else{o(X,K);break}else r(X,K);K=K.sibling}Se=jf(se,X.mode,Se),Se.return=X,X=Se}return x(X);case S:return se=ho(se),Tn(X,K,se,Se)}if(pt(se))return ot(X,K,se,Se);if(H(se)){if(gt=H(se),typeof gt!="function")throw Error(i(150));return se=gt.call(se),xt(X,K,se,Se)}if(typeof se.then=="function")return Tn(X,K,sh(se),Se);if(se.$$typeof===ue)return Tn(X,K,Zu(X,se),Se);rh(X,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,K!==null&&K.tag===6?(o(X,K.sibling),Se=f(K,se),Se.return=X,X=Se):(o(X,K),Se=kf(se,X.mode,Se),Se.return=X,X=Se),x(X)):o(X,K)}return function(X,K,se,Se){try{hc=0;var gt=Tn(X,K,se,Se);return nl=null,gt}catch(ut){if(ut===tl||ut===th)throw ut;var cn=nr(29,ut,null,X.mode);return cn.lanes=Se,cn.return=X,cn}}}var mo=g0(!0),y0=g0(!1),ai=!1;function Lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Of(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ii(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function oi(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(fn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Yu(t),e0(t,null,o),r}return Ku(t,c,r,o),Yu(t)}function fc(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Gn(t,o)}}function Vf(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}var Bf=!1;function mc(){if(Bf){var t=el;if(t!==null)throw t}}function pc(t,r,o,c){Bf=!1;var f=t.updateQueue;ai=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var F=N,ae=F.next;F.next=null,x===null?m=ae:x.next=ae,x=F;var xe=t.alternate;xe!==null&&(xe=xe.updateQueue,N=xe.lastBaseUpdate,N!==x&&(N===null?xe.firstBaseUpdate=ae:N.next=ae,xe.lastBaseUpdate=F))}if(m!==null){var Re=f.baseState;x=0,xe=ae=F=null,N=m;do{var ie=N.lane&-536870913,fe=ie!==N.lane;if(fe?(Yt&ie)===ie:(c&ie)===ie){ie!==0&&ie===Zo&&(Bf=!0),xe!==null&&(xe=xe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ot=t,xt=N;ie=r;var Tn=o;switch(xt.tag){case 1:if(ot=xt.payload,typeof ot=="function"){Re=ot.call(Tn,Re,ie);break e}Re=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=xt.payload,ie=typeof ot=="function"?ot.call(Tn,Re,ie):ot,ie==null)break e;Re=T({},Re,ie);break e;case 2:ai=!0}}ie=N.callback,ie!==null&&(t.flags|=64,fe&&(t.flags|=8192),fe=f.callbacks,fe===null?f.callbacks=[ie]:fe.push(ie))}else fe={lane:ie,tag:N.tag,payload:N.payload,callback:N.callback,next:null},xe===null?(ae=xe=fe,F=Re):xe=xe.next=fe,x|=ie;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;fe=N,N=fe.next,fe.next=null,f.lastBaseUpdate=fe,f.shared.pending=null}}while(!0);xe===null&&(F=Re),f.baseState=F,f.firstBaseUpdate=ae,f.lastBaseUpdate=xe,m===null&&(f.shared.lanes=0),di|=x,t.lanes=x,t.memoizedState=Re}}function v0(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function b0(t,r){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)v0(o[t],r)}var sl=C(null),ah=C(0);function x0(t,r){t=Ma,le(ah,t),le(sl,r),Ma=t|r.baseLanes}function Uf(){le(ah,Ma),le(sl,sl.current)}function zf(){Ma=ah.current,U(sl),U(ah)}var sr=C(null),wr=null;function li(t){var r=t.alternate;le(es,es.current&1),le(sr,t),wr===null&&(r===null||sl.current!==null||r.memoizedState!==null)&&(wr=t)}function Ff(t){le(es,es.current),le(sr,t),wr===null&&(wr=t)}function w0(t){t.tag===22?(le(es,es.current),le(sr,t),wr===null&&(wr=t)):ci()}function ci(){le(es,es.current),le(sr,sr.current)}function rr(t){U(sr),wr===t&&(wr=null),U(es)}var es=C(0);function ih(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Km(o)||Ym(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ja=0,Vt=null,kn=null,ls=null,oh=!1,rl=!1,po=!1,lh=0,gc=0,al=null,Hk=0;function Kn(){throw Error(i(321))}function qf(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!tr(t[o],r[o]))return!1;return!0}function Hf(t,r,o,c,f,m){return ja=m,Vt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=t===null||t.memoizedState===null?rv:am,po=!1,m=o(c,f),po=!1,rl&&(m=k0(r,o,c,f)),_0(t),m}function _0(t){Q.H=bc;var r=kn!==null&&kn.next!==null;if(ja=0,ls=kn=Vt=null,oh=!1,gc=0,al=null,r)throw Error(i(300));t===null||cs||(t=t.dependencies,t!==null&&Ju(t)&&(cs=!0))}function k0(t,r,o,c){Vt=t;var f=0;do{if(rl&&(al=null),gc=0,rl=!1,25<=f)throw Error(i(301));if(f+=1,ls=kn=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=av,m=r(o,c)}while(rl);return m}function $k(){var t=Q.H,r=t.useState()[0];return r=typeof r.then=="function"?yc(r):r,t=t.useState()[0],(kn!==null?kn.memoizedState:null)!==t&&(Vt.flags|=1024),r}function $f(){var t=lh!==0;return lh=0,t}function Wf(t,r,o){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o}function Gf(t){if(oh){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}oh=!1}ja=0,ls=kn=Vt=null,rl=!1,gc=lh=0,al=null}function Fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?Vt.memoizedState=ls=t:ls=ls.next=t,ls}function ts(){if(kn===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=kn.next;var r=ls===null?Vt.memoizedState:ls.next;if(r!==null)ls=r,kn=t;else{if(t===null)throw Vt.alternate===null?Error(i(467)):Error(i(310));kn=t,t={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},ls===null?Vt.memoizedState=ls=t:ls=ls.next=t}return ls}function ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yc(t){var r=gc;return gc+=1,al===null&&(al=[]),t=f0(al,t,r),r=Vt,(ls===null?r.memoizedState:ls.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?rv:am),t}function uh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yc(t);if(t.$$typeof===ue)return js(t)}throw Error(i(438,String(t)))}function Kf(t){var r=null,o=Vt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Vt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=ch(),Vt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(t),c=0;c<t;c++)o[c]=P;return r.index++,o}function Ta(t,r){return typeof r=="function"?r(t):r}function hh(t){var r=ts();return Yf(r,kn,t)}function Yf(t,r,o){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var N=x=null,F=null,ae=r,xe=!1;do{var Re=ae.lane&-536870913;if(Re!==ae.lane?(Yt&Re)===Re:(ja&Re)===Re){var ie=ae.revertLane;if(ie===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),Re===Zo&&(xe=!0);else if((ja&ie)===ie){ae=ae.next,ie===Zo&&(xe=!0);continue}else Re={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},F===null?(N=F=Re,x=m):F=F.next=Re,Vt.lanes|=ie,di|=ie;Re=ae.action,po&&o(m,Re),m=ae.hasEagerState?ae.eagerState:o(m,Re)}else ie={lane:Re,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},F===null?(N=F=ie,x=m):F=F.next=ie,Vt.lanes|=Re,di|=Re;ae=ae.next}while(ae!==null&&ae!==r);if(F===null?x=m:F.next=N,!tr(m,t.memoizedState)&&(cs=!0,xe&&(o=el,o!==null)))throw o;t.memoizedState=m,t.baseState=x,t.baseQueue=F,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Qf(t){var r=ts(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var x=f=f.next;do m=t(m,x.action),x=x.next;while(x!==f);tr(m,r.memoizedState)||(cs=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function j0(t,r,o){var c=Vt,f=ts(),m=tn;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var x=!tr((kn||f).memoizedState,o);if(x&&(f.memoizedState=o,cs=!0),f=f.queue,Zf(S0.bind(null,c,f,t),[t]),f.getSnapshot!==r||x||ls!==null&&ls.memoizedState.tag&1){if(c.flags|=2048,il(9,{destroy:void 0},E0.bind(null,c,f,o,r),null),Sn===null)throw Error(i(349));m||(ja&127)!==0||T0(c,r,o)}return o}function T0(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Vt.updateQueue,r===null?(r=ch(),Vt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function E0(t,r,o,c){r.value=o,r.getSnapshot=c,N0(r)&&C0(t)}function S0(t,r,o){return o(function(){N0(r)&&C0(t)})}function N0(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!tr(t,o)}catch{return!0}}function C0(t){var r=ao(t,2);r!==null&&Ys(r,t,2)}function Xf(t){var r=Fs();if(typeof t=="function"){var o=t;if(t=o(),po){He(!0);try{o()}finally{He(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:t},r}function R0(t,r,o,c){return t.baseState=o,Yf(t,kn,typeof c=="function"?c:Ta)}function Wk(t,r,o,c,f){if(mh(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Q.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,A0(r,m)):(m.next=o.next,r.pending=o.next=m)}}function A0(t,r){var o=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=Q.T,x={};Q.T=x;try{var N=o(f,c),F=Q.S;F!==null&&F(x,N),M0(t,r,N)}catch(ae){Jf(t,r,ae)}finally{m!==null&&x.types!==null&&(m.types=x.types),Q.T=m}}else try{m=o(f,c),M0(t,r,m)}catch(ae){Jf(t,r,ae)}}function M0(t,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){I0(t,r,c)},function(c){return Jf(t,r,c)}):I0(t,r,o)}function I0(t,r,o){r.status="fulfilled",r.value=o,D0(r),t.state=o,r=t.pending,r!==null&&(o=r.next,o===r?t.pending=null:(o=o.next,r.next=o,A0(t,o)))}function Jf(t,r,o){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,D0(r),r=r.next;while(r!==c)}t.action=null}function D0(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function P0(t,r){return r}function L0(t,r){if(tn){var o=Sn.formState;if(o!==null){e:{var c=Vt;if(tn){if(Dn){t:{for(var f=Dn,m=xr;f.nodeType!==8;){if(!m){f=null;break t}if(f=_r(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Dn=_r(f.nextSibling),c=f.data==="F!";break e}}si(c)}c=!1}c&&(r=o[0])}}return o=Fs(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:P0,lastRenderedState:r},o.queue=c,o=tv.bind(null,Vt,c),c.dispatch=o,c=Xf(!1),m=rm.bind(null,Vt,!1,c.queue),c=Fs(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,o=Wk.bind(null,Vt,f,m,o),f.dispatch=o,c.memoizedState=t,[r,o,!1]}function O0(t){var r=ts();return V0(r,kn,t)}function V0(t,r,o){if(r=Yf(t,r,P0)[0],t=hh(Ta)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=yc(r)}catch(x){throw x===tl?th:x}else c=r;r=ts();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Vt.flags|=2048,il(9,{destroy:void 0},Gk.bind(null,f,o),null)),[c,m,t]}function Gk(t,r){t.action=r}function B0(t){var r=ts(),o=kn;if(o!==null)return V0(r,o,t);ts(),r=r.memoizedState,o=ts();var c=o.queue.dispatch;return o.memoizedState=t,[r,c,!1]}function il(t,r,o,c){return t={tag:t,create:o,deps:c,inst:r,next:null},r=Vt.updateQueue,r===null&&(r=ch(),Vt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t),t}function U0(){return ts().memoizedState}function dh(t,r,o,c){var f=Fs();Vt.flags|=t,f.memoizedState=il(1|r,{destroy:void 0},o,c===void 0?null:c)}function fh(t,r,o,c){var f=ts();c=c===void 0?null:c;var m=f.memoizedState.inst;kn!==null&&c!==null&&qf(c,kn.memoizedState.deps)?f.memoizedState=il(r,m,o,c):(Vt.flags|=t,f.memoizedState=il(1|r,m,o,c))}function z0(t,r){dh(8390656,8,t,r)}function Zf(t,r){fh(2048,8,t,r)}function Kk(t){Vt.flags|=4;var r=Vt.updateQueue;if(r===null)r=ch(),Vt.updateQueue=r,r.events=[t];else{var o=r.events;o===null?r.events=[t]:o.push(t)}}function F0(t){var r=ts().memoizedState;return Kk({ref:r,nextImpl:t}),function(){if((fn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function q0(t,r){return fh(4,2,t,r)}function H0(t,r){return fh(4,4,t,r)}function $0(t,r){if(typeof r=="function"){t=t();var o=r(t);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function W0(t,r,o){o=o!=null?o.concat([t]):null,fh(4,4,$0.bind(null,r,t),o)}function em(){}function G0(t,r){var o=ts();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&qf(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function K0(t,r){var o=ts();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&qf(r,c[1]))return c[0];if(c=t(),po){He(!0);try{t()}finally{He(!1)}}return o.memoizedState=[c,r],c}function tm(t,r,o){return o===void 0||(ja&1073741824)!==0&&(Yt&261930)===0?t.memoizedState=r:(t.memoizedState=o,t=Yv(),Vt.lanes|=t,di|=t,o)}function Y0(t,r,o,c){return tr(o,r)?o:sl.current!==null?(t=tm(t,o,c),tr(t,r)||(cs=!0),t):(ja&42)===0||(ja&1073741824)!==0&&(Yt&261930)===0?(cs=!0,t.memoizedState=o):(t=Yv(),Vt.lanes|=t,di|=t,r)}function Q0(t,r,o,c,f){var m=Te.p;Te.p=m!==0&&8>m?m:8;var x=Q.T,N={};Q.T=N,rm(t,!1,r,o);try{var F=f(),ae=Q.S;if(ae!==null&&ae(N,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var xe=qk(F,c);vc(t,r,xe,or(t))}else vc(t,r,c,or(t))}catch(Re){vc(t,r,{then:function(){},status:"rejected",reason:Re},or())}finally{Te.p=m,x!==null&&N.types!==null&&(x.types=N.types),Q.T=x}}function Yk(){}function nm(t,r,o,c){if(t.tag!==5)throw Error(i(476));var f=X0(t).queue;Q0(t,f,r,Le,o===null?Yk:function(){return J0(t),o(c)})}function X0(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Le,baseState:Le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:Le},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:o},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function J0(t){var r=X0(t);r.next===null&&(r=t.alternate.memoizedState),vc(t,r.next.queue,{},or())}function sm(){return js(Pc)}function Z0(){return ts().memoizedState}function ev(){return ts().memoizedState}function Qk(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var o=or();t=ii(o);var c=oi(r,t,o);c!==null&&(Ys(c,r,o),fc(c,r,o)),r={cache:Mf()},t.payload=r;return}r=r.return}}function Xk(t,r,o){var c=or();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},mh(t)?nv(r,o):(o=wf(t,r,o,c),o!==null&&(Ys(o,t,c),sv(o,r,c)))}function tv(t,r,o){var c=or();vc(t,r,o,c)}function vc(t,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(mh(t))nv(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,N=m(x,o);if(f.hasEagerState=!0,f.eagerState=N,tr(N,x))return Ku(t,r,f,0),Sn===null&&Gu(),!1}catch{}if(o=wf(t,r,f,c),o!==null)return Ys(o,t,c),sv(o,r,c),!0}return!1}function rm(t,r,o,c){if(c={lane:2,revertLane:Lm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},mh(t)){if(r)throw Error(i(479))}else r=wf(t,o,c,2),r!==null&&Ys(r,t,2)}function mh(t){var r=t.alternate;return t===Vt||r!==null&&r===Vt}function nv(t,r){rl=oh=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function sv(t,r,o){if((o&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Gn(t,o)}}var bc={readContext:js,use:uh,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn};bc.useEffectEvent=Kn;var rv={readContext:js,use:uh,useCallback:function(t,r){return Fs().memoizedState=[t,r===void 0?null:r],t},useContext:js,useEffect:z0,useImperativeHandle:function(t,r,o){o=o!=null?o.concat([t]):null,dh(4194308,4,$0.bind(null,r,t),o)},useLayoutEffect:function(t,r){return dh(4194308,4,t,r)},useInsertionEffect:function(t,r){dh(4,2,t,r)},useMemo:function(t,r){var o=Fs();r=r===void 0?null:r;var c=t();if(po){He(!0);try{t()}finally{He(!1)}}return o.memoizedState=[c,r],c},useReducer:function(t,r,o){var c=Fs();if(o!==void 0){var f=o(r);if(po){He(!0);try{o(r)}finally{He(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=Xk.bind(null,Vt,t),[c.memoizedState,t]},useRef:function(t){var r=Fs();return t={current:t},r.memoizedState=t},useState:function(t){t=Xf(t);var r=t.queue,o=tv.bind(null,Vt,r);return r.dispatch=o,[t.memoizedState,o]},useDebugValue:em,useDeferredValue:function(t,r){var o=Fs();return tm(o,t,r)},useTransition:function(){var t=Xf(!1);return t=Q0.bind(null,Vt,t.queue,!0,!1),Fs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,o){var c=Vt,f=Fs();if(tn){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Sn===null)throw Error(i(349));(Yt&127)!==0||T0(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,z0(S0.bind(null,c,m,t),[t]),c.flags|=2048,il(9,{destroy:void 0},E0.bind(null,c,m,o,r),null),o},useId:function(){var t=Fs(),r=Sn.identifierPrefix;if(tn){var o=na,c=ta;o=(c&~(1<<32-qe(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=lh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Hk++,r="_"+r+"r_"+o.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:sm,useFormState:L0,useActionState:L0,useOptimistic:function(t){var r=Fs();r.memoizedState=r.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=rm.bind(null,Vt,!0,o),o.dispatch=r,[t,r]},useMemoCache:Kf,useCacheRefresh:function(){return Fs().memoizedState=Qk.bind(null,Vt)},useEffectEvent:function(t){var r=Fs(),o={impl:t};return r.memoizedState=o,function(){if((fn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},am={readContext:js,use:uh,useCallback:G0,useContext:js,useEffect:Zf,useImperativeHandle:W0,useInsertionEffect:q0,useLayoutEffect:H0,useMemo:K0,useReducer:hh,useRef:U0,useState:function(){return hh(Ta)},useDebugValue:em,useDeferredValue:function(t,r){var o=ts();return Y0(o,kn.memoizedState,t,r)},useTransition:function(){var t=hh(Ta)[0],r=ts().memoizedState;return[typeof t=="boolean"?t:yc(t),r]},useSyncExternalStore:j0,useId:Z0,useHostTransitionStatus:sm,useFormState:O0,useActionState:O0,useOptimistic:function(t,r){var o=ts();return R0(o,kn,t,r)},useMemoCache:Kf,useCacheRefresh:ev};am.useEffectEvent=F0;var av={readContext:js,use:uh,useCallback:G0,useContext:js,useEffect:Zf,useImperativeHandle:W0,useInsertionEffect:q0,useLayoutEffect:H0,useMemo:K0,useReducer:Qf,useRef:U0,useState:function(){return Qf(Ta)},useDebugValue:em,useDeferredValue:function(t,r){var o=ts();return kn===null?tm(o,t,r):Y0(o,kn.memoizedState,t,r)},useTransition:function(){var t=Qf(Ta)[0],r=ts().memoizedState;return[typeof t=="boolean"?t:yc(t),r]},useSyncExternalStore:j0,useId:Z0,useHostTransitionStatus:sm,useFormState:B0,useActionState:B0,useOptimistic:function(t,r){var o=ts();return kn!==null?R0(o,kn,t,r):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:Kf,useCacheRefresh:ev};av.useEffectEvent=F0;function im(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:T({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var om={enqueueSetState:function(t,r,o){t=t._reactInternals;var c=or(),f=ii(c);f.payload=r,o!=null&&(f.callback=o),r=oi(t,f,c),r!==null&&(Ys(r,t,c),fc(r,t,c))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=or(),f=ii(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=oi(t,f,c),r!==null&&(Ys(r,t,c),fc(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=or(),c=ii(o);c.tag=2,r!=null&&(c.callback=r),r=oi(t,c,o),r!==null&&(Ys(r,t,o),fc(r,t,o))}};function iv(t,r,o,c,f,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,x):r.prototype&&r.prototype.isPureReactComponent?!ac(o,c)||!ac(f,m):!0}function ov(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&om.enqueueReplaceState(r,r.state,null)}function go(t,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(t=t.defaultProps){o===r&&(o=T({},o));for(var f in t)o[f]===void 0&&(o[f]=t[f])}return o}function lv(t){Wu(t)}function cv(t){console.error(t)}function uv(t){Wu(t)}function ph(t,r){try{var o=t.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function hv(t,r,o){try{var c=t.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function lm(t,r,o){return o=ii(o),o.tag=3,o.payload={element:null},o.callback=function(){ph(t,r)},o}function dv(t){return t=ii(t),t.tag=3,t}function fv(t,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){hv(r,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){hv(r,o,c),typeof f!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function Jk(t,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Jo(r,o,f,!0),o=sr.current,o!==null){switch(o.tag){case 31:case 13:return wr===null?Sh():o.alternate===null&&Yn===0&&(Yn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===nh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Im(t,c,f)),!1;case 22:return o.flags|=65536,c===nh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Im(t,c,f)),!1}throw Error(i(435,o.tag))}return Im(t,c,f),Sh(),!1}if(tn)return r=sr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Sf&&(t=Error(i(422),{cause:c}),lc(yr(t,o)))):(c!==Sf&&(r=Error(i(423),{cause:c}),lc(yr(r,o))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=yr(c,o),f=lm(t.stateNode,c,f),Vf(t,f),Yn!==4&&(Yn=2)),!1;var m=Error(i(520),{cause:c});if(m=yr(m,o),Sc===null?Sc=[m]:Sc.push(m),Yn!==4&&(Yn=2),r===null)return!0;c=yr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,t=f&-f,o.lanes|=t,t=lm(o.stateNode,c,t),Vf(o,t),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(fi===null||!fi.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=dv(f),fv(f,t,o,c),Vf(o,f),!1}o=o.return}while(o!==null);return!1}var cm=Error(i(461)),cs=!1;function Ts(t,r,o,c){r.child=t===null?y0(r,null,o,c):mo(r,t.child,o,c)}function mv(t,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var x={};for(var N in c)N!=="ref"&&(x[N]=c[N])}else x=c;return co(r),c=Hf(t,r,o,x,m,f),N=$f(),t!==null&&!cs?(Wf(t,r,f),Ea(t,r,f)):(tn&&N&&Tf(r),r.flags|=1,Ts(t,r,c,f),r.child)}function pv(t,r,o,c,f){if(t===null){var m=o.type;return typeof m=="function"&&!_f(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,gv(t,r,m,c,f)):(t=Qu(o.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!ym(t,f)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:ac,o(x,c)&&t.ref===r.ref)return Ea(t,r,f)}return r.flags|=1,t=xa(m,c),t.ref=r.ref,t.return=r,r.child=t}function gv(t,r,o,c,f){if(t!==null){var m=t.memoizedProps;if(ac(m,c)&&t.ref===r.ref)if(cs=!1,r.pendingProps=c=m,ym(t,f))(t.flags&131072)!==0&&(cs=!0);else return r.lanes=t.lanes,Ea(t,r,f)}return um(t,r,o,c,f)}function yv(t,r,o,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return vv(t,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&eh(r,m!==null?m.cachePool:null),m!==null?x0(r,m):Uf(),w0(r);else return c=r.lanes=536870912,vv(t,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(eh(r,m.cachePool),x0(r,m),ci(),r.memoizedState=null):(t!==null&&eh(r,null),Uf(),ci());return Ts(t,r,f,o),r.child}function xc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function vv(t,r,o,c,f){var m=Df();return m=m===null?null:{parent:os._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},t!==null&&eh(r,null),Uf(),w0(r),t!==null&&Jo(t,r,c,!0),r.childLanes=f,null}function gh(t,r){return r=vh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function bv(t,r,o){return mo(r,t.child,null,o),t=gh(r,r.pendingProps),t.flags|=2,rr(r),r.memoizedState=null,t}function Zk(t,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(tn){if(c.mode==="hidden")return t=gh(r,c),r.lanes=536870912,xc(null,t);if(Ff(r),(t=Dn)?(t=Ab(t,xr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ti!==null?{id:ta,overflow:na}:null,retryLane:536870912,hydrationErrors:null},o=n0(t),o.return=r,r.child=o,ks=r,Dn=null)):t=null,t===null)throw si(r);return r.lanes=536870912,null}return gh(r,c)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(Ff(r),f)if(r.flags&256)r.flags&=-257,r=bv(t,r,o);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(cs||Jo(t,r,o,!1),f=(o&t.childLanes)!==0,cs||f){if(c=Sn,c!==null&&(x=As(c,o),x!==0&&x!==m.retryLane))throw m.retryLane=x,ao(t,x),Ys(c,t,x),cm;Sh(),r=bv(t,r,o)}else t=m.treeContext,Dn=_r(x.nextSibling),ks=r,tn=!0,ni=null,xr=!1,t!==null&&a0(r,t),r=gh(r,c),r.flags|=4096;return r}return t=xa(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function yh(t,r){var o=r.ref;if(o===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(t===null||t.ref!==o)&&(r.flags|=4194816)}}function um(t,r,o,c,f){return co(r),o=Hf(t,r,o,c,void 0,f),c=$f(),t!==null&&!cs?(Wf(t,r,f),Ea(t,r,f)):(tn&&c&&Tf(r),r.flags|=1,Ts(t,r,o,f),r.child)}function xv(t,r,o,c,f,m){return co(r),r.updateQueue=null,o=k0(r,c,o,f),_0(t),c=$f(),t!==null&&!cs?(Wf(t,r,m),Ea(t,r,m)):(tn&&c&&Tf(r),r.flags|=1,Ts(t,r,o,m),r.child)}function wv(t,r,o,c,f){if(co(r),r.stateNode===null){var m=Ko,x=o.contextType;typeof x=="object"&&x!==null&&(m=js(x)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=om,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Lf(r),x=o.contextType,m.context=typeof x=="object"&&x!==null?js(x):Ko,m.state=r.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(im(r,o,x,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&om.enqueueReplaceState(m,m.state,null),pc(r,c,m,f),mc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var N=r.memoizedProps,F=go(o,N);m.props=F;var ae=m.context,xe=o.contextType;x=Ko,typeof xe=="object"&&xe!==null&&(x=js(xe));var Re=o.getDerivedStateFromProps;xe=typeof Re=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,xe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||ae!==x)&&ov(r,m,c,x),ai=!1;var ie=r.memoizedState;m.state=ie,pc(r,c,m,f),mc(),ae=r.memoizedState,N||ie!==ae||ai?(typeof Re=="function"&&(im(r,o,Re,c),ae=r.memoizedState),(F=ai||iv(r,o,F,c,ie,ae,x))?(xe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ae),m.props=c,m.state=ae,m.context=x,c=F):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Of(t,r),x=r.memoizedProps,xe=go(o,x),m.props=xe,Re=r.pendingProps,ie=m.context,ae=o.contextType,F=Ko,typeof ae=="object"&&ae!==null&&(F=js(ae)),N=o.getDerivedStateFromProps,(ae=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==Re||ie!==F)&&ov(r,m,c,F),ai=!1,ie=r.memoizedState,m.state=ie,pc(r,c,m,f),mc();var fe=r.memoizedState;x!==Re||ie!==fe||ai||t!==null&&t.dependencies!==null&&Ju(t.dependencies)?(typeof N=="function"&&(im(r,o,N,c),fe=r.memoizedState),(xe=ai||iv(r,o,xe,c,ie,fe,F)||t!==null&&t.dependencies!==null&&Ju(t.dependencies))?(ae||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,fe,F),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,fe,F)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=fe),m.props=c,m.state=fe,m.context=F,c=xe):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,yh(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=mo(r,t.child,null,f),r.child=mo(r,null,o,f)):Ts(t,r,o,f),r.memoizedState=m.state,t=r.child):t=Ea(t,r,f),t}function _v(t,r,o,c){return oo(),r.flags|=256,Ts(t,r,o,c),r.child}var hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dm(t){return{baseLanes:t,cachePool:h0()}}function fm(t,r,o){return t=t!==null?t.childLanes&~o:0,r&&(t|=ir),t}function kv(t,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(es.current&2)!==0),x&&(f=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,t===null){if(tn){if(f?li(r):ci(),(t=Dn)?(t=Ab(t,xr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ti!==null?{id:ta,overflow:na}:null,retryLane:536870912,hydrationErrors:null},o=n0(t),o.return=r,r.child=o,ks=r,Dn=null)):t=null,t===null)throw si(r);return Ym(t)?r.lanes=32:r.lanes=536870912,null}var N=c.children;return c=c.fallback,f?(ci(),f=r.mode,N=vh({mode:"hidden",children:N},f),c=io(c,f,o,null),N.return=r,c.return=r,N.sibling=c,r.child=N,c=r.child,c.memoizedState=dm(o),c.childLanes=fm(t,x,o),r.memoizedState=hm,xc(null,c)):(li(r),mm(r,N))}var F=t.memoizedState;if(F!==null&&(N=F.dehydrated,N!==null)){if(m)r.flags&256?(li(r),r.flags&=-257,r=pm(t,r,o)):r.memoizedState!==null?(ci(),r.child=t.child,r.flags|=128,r=null):(ci(),N=c.fallback,f=r.mode,c=vh({mode:"visible",children:c.children},f),N=io(N,f,o,null),N.flags|=2,c.return=r,N.return=r,c.sibling=N,r.child=c,mo(r,t.child,null,o),c=r.child,c.memoizedState=dm(o),c.childLanes=fm(t,x,o),r.memoizedState=hm,r=xc(null,c));else if(li(r),Ym(N)){if(x=N.nextSibling&&N.nextSibling.dataset,x)var ae=x.dgst;x=ae,c=Error(i(419)),c.stack="",c.digest=x,lc({value:c,source:null,stack:null}),r=pm(t,r,o)}else if(cs||Jo(t,r,o,!1),x=(o&t.childLanes)!==0,cs||x){if(x=Sn,x!==null&&(c=As(x,o),c!==0&&c!==F.retryLane))throw F.retryLane=c,ao(t,c),Ys(x,t,c),cm;Km(N)||Sh(),r=pm(t,r,o)}else Km(N)?(r.flags|=192,r.child=t.child,r=null):(t=F.treeContext,Dn=_r(N.nextSibling),ks=r,tn=!0,ni=null,xr=!1,t!==null&&a0(r,t),r=mm(r,c.children),r.flags|=4096);return r}return f?(ci(),N=c.fallback,f=r.mode,F=t.child,ae=F.sibling,c=xa(F,{mode:"hidden",children:c.children}),c.subtreeFlags=F.subtreeFlags&65011712,ae!==null?N=xa(ae,N):(N=io(N,f,o,null),N.flags|=2),N.return=r,c.return=r,c.sibling=N,r.child=c,xc(null,c),c=r.child,N=t.child.memoizedState,N===null?N=dm(o):(f=N.cachePool,f!==null?(F=os._currentValue,f=f.parent!==F?{parent:F,pool:F}:f):f=h0(),N={baseLanes:N.baseLanes|o,cachePool:f}),c.memoizedState=N,c.childLanes=fm(t,x,o),r.memoizedState=hm,xc(t.child,c)):(li(r),o=t.child,t=o.sibling,o=xa(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,t!==null&&(x=r.deletions,x===null?(r.deletions=[t],r.flags|=16):x.push(t)),r.child=o,r.memoizedState=null,o)}function mm(t,r){return r=vh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function vh(t,r){return t=nr(22,t,null,r),t.lanes=0,t}function pm(t,r,o){return mo(r,t.child,null,o),t=mm(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function jv(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Rf(t.return,r,o)}function gm(t,r,o,c,f,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=f,x.treeForkCount=m)}function Tv(t,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var x=es.current,N=(x&2)!==0;if(N?(x=x&1|2,r.flags|=128):x&=1,le(es,x),Ts(t,r,c,o),c=tn?oc:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jv(t,o,r);else if(t.tag===19)jv(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&ih(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),gm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&ih(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}gm(r,!0,o,null,m,c);break;case"together":gm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Ea(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),di|=r.lanes,(o&r.childLanes)===0)if(t!==null){if(Jo(t,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,o=xa(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=xa(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function ym(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Ju(t)))}function ej(t,r,o){switch(r.tag){case 3:Fe(r,r.stateNode.containerInfo),ri(r,os,t.memoizedState.cache),oo();break;case 27:case 5:Dt(r);break;case 4:Fe(r,r.stateNode.containerInfo);break;case 10:ri(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Ff(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(li(r),r.flags|=128,null):(o&r.child.childLanes)!==0?kv(t,r,o):(li(r),t=Ea(t,r,o),t!==null?t.sibling:null);li(r);break;case 19:var f=(t.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Jo(t,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return Tv(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(es,es.current),c)break;return null;case 22:return r.lanes=0,yv(t,r,o,r.pendingProps);case 24:ri(r,os,t.memoizedState.cache)}return Ea(t,r,o)}function Ev(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps)cs=!0;else{if(!ym(t,o)&&(r.flags&128)===0)return cs=!1,ej(t,r,o);cs=(t.flags&131072)!==0}else cs=!1,tn&&(r.flags&1048576)!==0&&r0(r,oc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=ho(r.elementType),r.type=t,typeof t=="function")_f(t)?(c=go(t,c),r.tag=1,r=wv(null,r,t,c,o)):(r.tag=0,r=um(null,r,t,c,o));else{if(t!=null){var f=t.$$typeof;if(f===we){r.tag=11,r=mv(null,r,t,c,o);break e}else if(f===M){r.tag=14,r=pv(null,r,t,c,o);break e}}throw r=ze(t)||t,Error(i(306,r,""))}}return r;case 0:return um(t,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=go(c,r.pendingProps),wv(t,r,c,f,o);case 3:e:{if(Fe(r,r.stateNode.containerInfo),t===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Of(t,r),pc(r,c,null,o);var x=r.memoizedState;if(c=x.cache,ri(r,os,c),c!==m.cache&&Af(r,[os],o,!0),mc(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=_v(t,r,c,o);break e}else if(c!==f){f=yr(Error(i(424)),r),lc(f),r=_v(t,r,c,o);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Dn=_r(t.firstChild),ks=r,tn=!0,ni=null,xr=!0,o=y0(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(oo(),c===f){r=Ea(t,r,o);break e}Ts(t,r,c,o)}r=r.child}return r;case 26:return yh(t,r),t===null?(o=Ob(r.type,null,r.pendingProps,null))?r.memoizedState=o:tn||(o=r.type,t=r.pendingProps,c=Dh(Pe.current).createElement(o),c[nt]=r,c[ft]=t,Es(c,o,t),j(c),r.stateNode=c):r.memoizedState=Ob(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Dt(r),t===null&&tn&&(c=r.stateNode=Db(r.type,r.pendingProps,Pe.current),ks=r,xr=!0,f=Dn,yi(r.type)?(Qm=f,Dn=_r(c.firstChild)):Dn=f),Ts(t,r,r.pendingProps.children,o),yh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&tn&&((f=c=Dn)&&(c=Rj(c,r.type,r.pendingProps,xr),c!==null?(r.stateNode=c,ks=r,Dn=_r(c.firstChild),xr=!1,f=!0):f=!1),f||si(r)),Dt(r),f=r.type,m=r.pendingProps,x=t!==null?t.memoizedProps:null,c=m.children,$m(f,m)?c=null:x!==null&&$m(f,x)&&(r.flags|=32),r.memoizedState!==null&&(f=Hf(t,r,$k,null,null,o),Pc._currentValue=f),yh(t,r),Ts(t,r,c,o),r.child;case 6:return t===null&&tn&&((t=o=Dn)&&(o=Aj(o,r.pendingProps,xr),o!==null?(r.stateNode=o,ks=r,Dn=null,t=!0):t=!1),t||si(r)),null;case 13:return kv(t,r,o);case 4:return Fe(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=mo(r,null,c,o):Ts(t,r,c,o),r.child;case 11:return mv(t,r,r.type,r.pendingProps,o);case 7:return Ts(t,r,r.pendingProps,o),r.child;case 8:return Ts(t,r,r.pendingProps.children,o),r.child;case 12:return Ts(t,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,ri(r,r.type,c.value),Ts(t,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,co(r),f=js(f),c=c(f),r.flags|=1,Ts(t,r,c,o),r.child;case 14:return pv(t,r,r.type,r.pendingProps,o);case 15:return gv(t,r,r.type,r.pendingProps,o);case 19:return Tv(t,r,o);case 31:return Zk(t,r,o);case 22:return yv(t,r,o,r.pendingProps);case 24:return co(r),c=js(os),t===null?(f=Df(),f===null&&(f=Sn,m=Mf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},Lf(r),ri(r,os,f)):((t.lanes&o)!==0&&(Of(t,r),pc(r,null,null,o),mc()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ri(r,os,c)):(c=m.cache,ri(r,os,c),c!==f.cache&&Af(r,[os],o,!0))),Ts(t,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Sa(t){t.flags|=4}function vm(t,r,o,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Zv())t.flags|=8192;else throw fo=nh,Pf}else t.flags&=-16777217}function Sv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Fb(r))if(Zv())t.flags|=8192;else throw fo=nh,Pf}function bh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?qn():536870912,t.lanes|=r,ul|=r)}function wc(t,r){if(!tn)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Pn(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function tj(t,r,o){var c=r.pendingProps;switch(Ef(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(r),null;case 1:return Pn(r),null;case 3:return o=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ka(os),at(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Xo(r)?Sa(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nf())),Pn(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Sa(r),m!==null?(Pn(r),Sv(r,m)):(Pn(r),vm(r,f,null,c,o))):m?m!==t.memoizedState?(Sa(r),Pn(r),Sv(r,m)):(Pn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&Sa(r),Pn(r),vm(r,f,t,c,o)),null;case 27:if(Wt(r),o=Pe.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&Sa(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Pn(r),null}t=pe.current,Xo(r)?i0(r):(t=Db(f,c,o),r.stateNode=t,Sa(r))}return Pn(r),null;case 5:if(Wt(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&Sa(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Pn(r),null}if(m=pe.current,Xo(r))i0(r);else{var x=Dh(Pe.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}m[nt]=r,m[ft]=c;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=m;e:switch(Es(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Sa(r)}}return Pn(r),vm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,o),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&Sa(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(t=Pe.current,Xo(r)){if(t=r.stateNode,o=r.memoizedProps,c=null,f=ks,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[nt]=r,t=!!(t.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||kb(t.nodeValue,o)),t||si(r,!0)}else t=Dh(t).createTextNode(c),t[nt]=r,r.stateNode=t}return Pn(r),null;case 31:if(o=r.memoizedState,t===null||t.memoizedState!==null){if(c=Xo(r),o!==null){if(t===null){if(!c)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[nt]=r}else oo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Pn(r),t=!1}else o=Nf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return r.flags&256?(rr(r),r):(rr(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Pn(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Xo(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[nt]=r}else oo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Pn(r),f=!1}else f=Nf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(rr(r),r):(rr(r),null)}return rr(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,t=t!==null&&t.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==t&&o&&(r.child.flags|=8192),bh(r,r.updateQueue),Pn(r),null);case 4:return at(),t===null&&Um(r.stateNode.containerInfo),Pn(r),null;case 10:return ka(r.type),Pn(r),null;case 19:if(U(es),c=r.memoizedState,c===null)return Pn(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)wc(c,!1);else{if(Yn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=ih(t),m!==null){for(r.flags|=128,wc(c,!1),t=m.updateQueue,r.updateQueue=t,bh(r,t),r.subtreeFlags=0,t=o,o=r.child;o!==null;)t0(o,t),o=o.sibling;return le(es,es.current&1|2),tn&&wa(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&At()>jh&&(r.flags|=128,f=!0,wc(c,!1),r.lanes=4194304)}else{if(!f)if(t=ih(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,bh(r,t),wc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!tn)return Pn(r),null}else 2*At()-c.renderingStartTime>jh&&o!==536870912&&(r.flags|=128,f=!0,wc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=At(),t.sibling=null,o=es.current,le(es,f?o&1|2:o&1),tn&&wa(r,c.treeForkCount),t):(Pn(r),null);case 22:case 23:return rr(r),zf(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Pn(r),r.subtreeFlags&6&&(r.flags|=8192)):Pn(r),o=r.updateQueue,o!==null&&bh(r,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),t!==null&&U(uo),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),ka(os),Pn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function nj(t,r){switch(Ef(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ka(os),at(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Wt(r),null;case 31:if(r.memoizedState!==null){if(rr(r),r.alternate===null)throw Error(i(340));oo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(rr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));oo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return U(es),null;case 4:return at(),null;case 10:return ka(r.type),null;case 22:case 23:return rr(r),zf(),t!==null&&U(uo),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ka(os),null;case 25:return null;default:return null}}function Nv(t,r){switch(Ef(r),r.tag){case 3:ka(os),at();break;case 26:case 27:case 5:Wt(r);break;case 4:at();break;case 31:r.memoizedState!==null&&rr(r);break;case 13:rr(r);break;case 19:U(es);break;case 10:ka(r.type);break;case 22:case 23:rr(r),zf(),t!==null&&U(uo);break;case 24:ka(os)}}function _c(t,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&t)===t){c=void 0;var m=o.create,x=o.inst;c=m(),x.destroy=c}o=o.next}while(o!==f)}}catch(N){xn(r,r.return,N)}}function ui(t,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var x=c.inst,N=x.destroy;if(N!==void 0){x.destroy=void 0,f=r;var F=o,ae=N;try{ae()}catch(xe){xn(f,F,xe)}}}c=c.next}while(c!==m)}}catch(xe){xn(r,r.return,xe)}}function Cv(t){var r=t.updateQueue;if(r!==null){var o=t.stateNode;try{b0(r,o)}catch(c){xn(t,t.return,c)}}}function Rv(t,r,o){o.props=go(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(c){xn(t,r,c)}}function kc(t,r){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof o=="function"?t.refCleanup=o(c):o.current=c}}catch(f){xn(t,r,f)}}function sa(t,r){var o=t.ref,c=t.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){xn(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){xn(t,r,f)}else o.current=null}function Av(t){var r=t.type,o=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){xn(t,t.return,f)}}function bm(t,r,o){try{var c=t.stateNode;jj(c,t.type,o,r),c[ft]=r}catch(f){xn(t,t.return,f)}}function Mv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&yi(t.type)||t.tag===4}function xm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&yi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wm(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(t),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Us));else if(c!==4&&(c===27&&yi(t.type)&&(o=t.stateNode,r=null),t=t.child,t!==null))for(wm(t,r,o),t=t.sibling;t!==null;)wm(t,r,o),t=t.sibling}function xh(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(c===27&&yi(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(xh(t,r,o),t=t.sibling;t!==null;)xh(t,r,o),t=t.sibling}function Iv(t){var r=t.stateNode,o=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Es(r,c,o),r[nt]=t,r[ft]=o}catch(m){xn(t,t.return,m)}}var Na=!1,us=!1,_m=!1,Dv=typeof WeakSet=="function"?WeakSet:Set,xs=null;function sj(t,r){if(t=t.containerInfo,qm=zh,t=Wy(t),pf(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,N=-1,F=-1,ae=0,xe=0,Re=t,ie=null;t:for(;;){for(var fe;Re!==o||f!==0&&Re.nodeType!==3||(N=x+f),Re!==m||c!==0&&Re.nodeType!==3||(F=x+c),Re.nodeType===3&&(x+=Re.nodeValue.length),(fe=Re.firstChild)!==null;)ie=Re,Re=fe;for(;;){if(Re===t)break t;if(ie===o&&++ae===f&&(N=x),ie===m&&++xe===c&&(F=x),(fe=Re.nextSibling)!==null)break;Re=ie,ie=Re.parentNode}Re=fe}o=N===-1||F===-1?null:{start:N,end:F}}else o=null}o=o||{start:0,end:0}}else o=null;for(Hm={focusedElem:t,selectionRange:o},zh=!1,xs=r;xs!==null;)if(r=xs,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,xs=t;else for(;xs!==null;){switch(r=xs,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)f=t[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var ot=go(o.type,f);t=c.getSnapshotBeforeUpdate(ot,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(xt){xn(o,o.return,xt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,o=t.nodeType,o===9)Gm(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,xs=t;break}xs=r.return}}function Pv(t,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ra(t,o),c&4&&_c(5,o);break;case 1:if(Ra(t,o),c&4)if(t=o.stateNode,r===null)try{t.componentDidMount()}catch(x){xn(o,o.return,x)}else{var f=go(o.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(x){xn(o,o.return,x)}}c&64&&Cv(o),c&512&&kc(o,o.return);break;case 3:if(Ra(t,o),c&64&&(t=o.updateQueue,t!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{b0(t,r)}catch(x){xn(o,o.return,x)}}break;case 27:r===null&&c&4&&Iv(o);case 26:case 5:Ra(t,o),r===null&&c&4&&Av(o),c&512&&kc(o,o.return);break;case 12:Ra(t,o);break;case 31:Ra(t,o),c&4&&Vv(t,o);break;case 13:Ra(t,o),c&4&&Bv(t,o),c&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=dj.bind(null,o),Mj(t,o))));break;case 22:if(c=o.memoizedState!==null||Na,!c){r=r!==null&&r.memoizedState!==null||us,f=Na;var m=us;Na=c,(us=r)&&!m?Aa(t,o,(o.subtreeFlags&8772)!==0):Ra(t,o),Na=f,us=m}break;case 30:break;default:Ra(t,o)}}function Lv(t){var r=t.alternate;r!==null&&(t.alternate=null,Lv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&bs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Bn=null,$s=!1;function Ca(t,r,o){for(o=o.child;o!==null;)Ov(t,r,o),o=o.sibling}function Ov(t,r,o){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Ve,o)}catch{}switch(o.tag){case 26:us||sa(o,r),Ca(t,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:us||sa(o,r);var c=Bn,f=$s;yi(o.type)&&(Bn=o.stateNode,$s=!1),Ca(t,r,o),Mc(o.stateNode),Bn=c,$s=f;break;case 5:us||sa(o,r);case 6:if(c=Bn,f=$s,Bn=null,Ca(t,r,o),Bn=c,$s=f,Bn!==null)if($s)try{(Bn.nodeType===9?Bn.body:Bn.nodeName==="HTML"?Bn.ownerDocument.body:Bn).removeChild(o.stateNode)}catch(m){xn(o,r,m)}else try{Bn.removeChild(o.stateNode)}catch(m){xn(o,r,m)}break;case 18:Bn!==null&&($s?(t=Bn,Cb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),vl(t)):Cb(Bn,o.stateNode));break;case 4:c=Bn,f=$s,Bn=o.stateNode.containerInfo,$s=!0,Ca(t,r,o),Bn=c,$s=f;break;case 0:case 11:case 14:case 15:ui(2,o,r),us||ui(4,o,r),Ca(t,r,o);break;case 1:us||(sa(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Rv(o,r,c)),Ca(t,r,o);break;case 21:Ca(t,r,o);break;case 22:us=(c=us)||o.memoizedState!==null,Ca(t,r,o),us=c;break;default:Ca(t,r,o)}}function Vv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{vl(t)}catch(o){xn(r,r.return,o)}}}function Bv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{vl(t)}catch(o){xn(r,r.return,o)}}function rj(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Dv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Dv),r;default:throw Error(i(435,t.tag))}}function wh(t,r){var o=rj(t);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=fj.bind(null,t,c);c.then(f,f)}})}function Ws(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=t,x=r,N=x;e:for(;N!==null;){switch(N.tag){case 27:if(yi(N.type)){Bn=N.stateNode,$s=!1;break e}break;case 5:Bn=N.stateNode,$s=!1;break e;case 3:case 4:Bn=N.stateNode.containerInfo,$s=!0;break e}N=N.return}if(Bn===null)throw Error(i(160));Ov(m,x,f),Bn=null,$s=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Uv(r,t),r=r.sibling}var Dr=null;function Uv(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ws(r,t),Gs(t),c&4&&(ui(3,t,t.return),_c(3,t),ui(5,t,t.return));break;case 1:Ws(r,t),Gs(t),c&512&&(us||o===null||sa(o,o.return)),c&64&&Na&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Dr;if(Ws(r,t),Gs(t),c&512&&(us||o===null||sa(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=t.memoizedState,o===null)if(c===null)if(t.stateNode===null){e:{c=t.type,o=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[as]||m[nt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Es(m,c,o),m[nt]=t,j(m),c=m;break e;case"link":var x=Ub("link","href",f).get(c+(o.href||""));if(x){for(var N=0;N<x.length;N++)if(m=x[N],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(N,1);break t}}m=f.createElement(c),Es(m,c,o),f.head.appendChild(m);break;case"meta":if(x=Ub("meta","content",f).get(c+(o.content||""))){for(N=0;N<x.length;N++)if(m=x[N],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(N,1);break t}}m=f.createElement(c),Es(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[nt]=t,j(m),c=m}t.stateNode=c}else zb(f,t.type,t.stateNode);else t.stateNode=Bb(f,c,t.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?zb(f,t.type,t.stateNode):Bb(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&bm(t,t.memoizedProps,o.memoizedProps)}break;case 27:Ws(r,t),Gs(t),c&512&&(us||o===null||sa(o,o.return)),o!==null&&c&4&&bm(t,t.memoizedProps,o.memoizedProps);break;case 5:if(Ws(r,t),Gs(t),c&512&&(us||o===null||sa(o,o.return)),t.flags&32){f=t.stateNode;try{In(f,"")}catch(ot){xn(t,t.return,ot)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,bm(t,f,o!==null?o.memoizedProps:f)),c&1024&&(_m=!0);break;case 6:if(Ws(r,t),Gs(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,o=t.stateNode;try{o.nodeValue=c}catch(ot){xn(t,t.return,ot)}}break;case 3:if(Oh=null,f=Dr,Dr=Ph(r.containerInfo),Ws(r,t),Dr=f,Gs(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{vl(r.containerInfo)}catch(ot){xn(t,t.return,ot)}_m&&(_m=!1,zv(t));break;case 4:c=Dr,Dr=Ph(t.stateNode.containerInfo),Ws(r,t),Gs(t),Dr=c;break;case 12:Ws(r,t),Gs(t);break;case 31:Ws(r,t),Gs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,wh(t,c)));break;case 13:Ws(r,t),Gs(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(kh=At()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,wh(t,c)));break;case 22:f=t.memoizedState!==null;var F=o!==null&&o.memoizedState!==null,ae=Na,xe=us;if(Na=ae||f,us=xe||F,Ws(r,t),us=xe,Na=ae,Gs(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||F||Na||us||yo(t)),o=null,r=t;;){if(r.tag===5||r.tag===26){if(o===null){F=o=r;try{if(m=F.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{N=F.stateNode;var Re=F.memoizedProps.style,ie=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;N.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(ot){xn(F,F.return,ot)}}}else if(r.tag===6){if(o===null){F=r;try{F.stateNode.nodeValue=f?"":F.memoizedProps}catch(ot){xn(F,F.return,ot)}}}else if(r.tag===18){if(o===null){F=r;try{var fe=F.stateNode;f?Rb(fe,!0):Rb(F.stateNode,!1)}catch(ot){xn(F,F.return,ot)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,wh(t,o))));break;case 19:Ws(r,t),Gs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,wh(t,c)));break;case 30:break;case 21:break;default:Ws(r,t),Gs(t)}}function Gs(t){var r=t.flags;if(r&2){try{for(var o,c=t.return;c!==null;){if(Mv(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=xm(t);xh(t,m,f);break;case 5:var x=o.stateNode;o.flags&32&&(In(x,""),o.flags&=-33);var N=xm(t);xh(t,N,x);break;case 3:case 4:var F=o.stateNode.containerInfo,ae=xm(t);wm(t,ae,F);break;default:throw Error(i(161))}}catch(xe){xn(t,t.return,xe)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function zv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;zv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ra(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Pv(t,r.alternate,r),r=r.sibling}function yo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ui(4,r,r.return),yo(r);break;case 1:sa(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Rv(r,r.return,o),yo(r);break;case 27:Mc(r.stateNode);case 26:case 5:sa(r,r.return),yo(r);break;case 22:r.memoizedState===null&&yo(r);break;case 30:yo(r);break;default:yo(r)}t=t.sibling}}function Aa(t,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,x=m.flags;switch(m.tag){case 0:case 11:case 15:Aa(f,m,o),_c(4,m);break;case 1:if(Aa(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ae){xn(c,c.return,ae)}if(c=m,f=c.updateQueue,f!==null){var N=c.stateNode;try{var F=f.shared.hiddenCallbacks;if(F!==null)for(f.shared.hiddenCallbacks=null,f=0;f<F.length;f++)v0(F[f],N)}catch(ae){xn(c,c.return,ae)}}o&&x&64&&Cv(m),kc(m,m.return);break;case 27:Iv(m);case 26:case 5:Aa(f,m,o),o&&c===null&&x&4&&Av(m),kc(m,m.return);break;case 12:Aa(f,m,o);break;case 31:Aa(f,m,o),o&&x&4&&Vv(f,m);break;case 13:Aa(f,m,o),o&&x&4&&Bv(f,m);break;case 22:m.memoizedState===null&&Aa(f,m,o),kc(m,m.return);break;case 30:break;default:Aa(f,m,o)}r=r.sibling}}function km(t,r){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&cc(o))}function jm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&cc(t))}function Pr(t,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Fv(t,r,o,c),r=r.sibling}function Fv(t,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Pr(t,r,o,c),f&2048&&_c(9,r);break;case 1:Pr(t,r,o,c);break;case 3:Pr(t,r,o,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&cc(t)));break;case 12:if(f&2048){Pr(t,r,o,c),t=r.stateNode;try{var m=r.memoizedProps,x=m.id,N=m.onPostCommit;typeof N=="function"&&N(x,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(F){xn(r,r.return,F)}}else Pr(t,r,o,c);break;case 31:Pr(t,r,o,c);break;case 13:Pr(t,r,o,c);break;case 23:break;case 22:m=r.stateNode,x=r.alternate,r.memoizedState!==null?m._visibility&2?Pr(t,r,o,c):jc(t,r):m._visibility&2?Pr(t,r,o,c):(m._visibility|=2,ol(t,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&km(x,r);break;case 24:Pr(t,r,o,c),f&2048&&jm(r.alternate,r);break;default:Pr(t,r,o,c)}}function ol(t,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,x=r,N=o,F=c,ae=x.flags;switch(x.tag){case 0:case 11:case 15:ol(m,x,N,F,f),_c(8,x);break;case 23:break;case 22:var xe=x.stateNode;x.memoizedState!==null?xe._visibility&2?ol(m,x,N,F,f):jc(m,x):(xe._visibility|=2,ol(m,x,N,F,f)),f&&ae&2048&&km(x.alternate,x);break;case 24:ol(m,x,N,F,f),f&&ae&2048&&jm(x.alternate,x);break;default:ol(m,x,N,F,f)}r=r.sibling}}function jc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=t,c=r,f=c.flags;switch(c.tag){case 22:jc(o,c),f&2048&&km(c.alternate,c);break;case 24:jc(o,c),f&2048&&jm(c.alternate,c);break;default:jc(o,c)}r=r.sibling}}var Tc=8192;function ll(t,r,o){if(t.subtreeFlags&Tc)for(t=t.child;t!==null;)qv(t,r,o),t=t.sibling}function qv(t,r,o){switch(t.tag){case 26:ll(t,r,o),t.flags&Tc&&t.memoizedState!==null&&Hj(o,Dr,t.memoizedState,t.memoizedProps);break;case 5:ll(t,r,o);break;case 3:case 4:var c=Dr;Dr=Ph(t.stateNode.containerInfo),ll(t,r,o),Dr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=Tc,Tc=16777216,ll(t,r,o),Tc=c):ll(t,r,o));break;default:ll(t,r,o)}}function Hv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ec(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];xs=c,Wv(c,t)}Hv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$v(t),t=t.sibling}function $v(t){switch(t.tag){case 0:case 11:case 15:Ec(t),t.flags&2048&&ui(9,t,t.return);break;case 3:Ec(t);break;case 12:Ec(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,_h(t)):Ec(t);break;default:Ec(t)}}function _h(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];xs=c,Wv(c,t)}Hv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ui(8,r,r.return),_h(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,_h(r));break;default:_h(r)}t=t.sibling}}function Wv(t,r){for(;xs!==null;){var o=xs;switch(o.tag){case 0:case 11:case 15:ui(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:cc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,xs=c;else e:for(o=t;xs!==null;){c=xs;var f=c.sibling,m=c.return;if(Lv(c),c===o){xs=null;break e}if(f!==null){f.return=m,xs=f;break e}xs=m}}}var aj={getCacheForType:function(t){var r=js(os),o=r.data.get(t);return o===void 0&&(o=t(),r.data.set(t,o)),o},cacheSignal:function(){return js(os).controller.signal}},ij=typeof WeakMap=="function"?WeakMap:Map,fn=0,Sn=null,Ht=null,Yt=0,bn=0,ar=null,hi=!1,cl=!1,Tm=!1,Ma=0,Yn=0,di=0,vo=0,Em=0,ir=0,ul=0,Sc=null,Ks=null,Sm=!1,kh=0,Gv=0,jh=1/0,Th=null,fi=null,gs=0,mi=null,hl=null,Ia=0,Nm=0,Cm=null,Kv=null,Nc=0,Rm=null;function or(){return(fn&2)!==0&&Yt!==0?Yt&-Yt:Q.T!==null?Lm():Ee()}function Yv(){if(ir===0)if((Yt&536870912)===0||tn){var t=Cn;Cn<<=1,(Cn&3932160)===0&&(Cn=262144),ir=t}else ir=536870912;return t=sr.current,t!==null&&(t.flags|=32),ir}function Ys(t,r,o){(t===Sn&&(bn===2||bn===9)||t.cancelPendingCommit!==null)&&(dl(t,0),pi(t,Yt,ir,!1)),Ln(t,o),((fn&2)===0||t!==Sn)&&(t===Sn&&((fn&2)===0&&(vo|=o),Yn===4&&pi(t,Yt,ir,!1)),ra(t))}function Qv(t,r,o){if((fn&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&t.expiredLanes)===0||hn(t,r),f=c?cj(t,r):Mm(t,r,!0),m=c;do{if(f===0){cl&&!c&&pi(t,r,0,!1);break}else{if(o=t.current.alternate,m&&!oj(o)){f=Mm(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var N=t;f=Sc;var F=N.current.memoizedState.isDehydrated;if(F&&(dl(N,x).flags|=256),x=Mm(N,x,!1),x!==2){if(Tm&&!F){N.errorRecoveryDisabledLanes|=m,vo|=m,f=4;break e}m=Ks,Ks=f,m!==null&&(Ks===null?Ks=m:Ks.push.apply(Ks,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){dl(t,0),pi(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:pi(c,r,ir,!hi);break e;case 2:Ks=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=kh+300-At(),10<f)){if(pi(c,r,ir,!hi),Kt(c,0,!0)!==0)break e;Ia=r,c.timeoutHandle=Sb(Xv.bind(null,c,o,Ks,Th,Sm,r,ir,vo,ul,hi,m,"Throttled",-0,0),f);break e}Xv(c,o,Ks,Th,Sm,r,ir,vo,ul,hi,m,null,-0,0)}}break}while(!0);ra(t)}function Xv(t,r,o,c,f,m,x,N,F,ae,xe,Re,ie,fe){if(t.timeoutHandle=-1,Re=r.subtreeFlags,Re&8192||(Re&16785408)===16785408){Re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Us},qv(r,m,Re);var ot=(m&62914560)===m?kh-At():(m&4194048)===m?Gv-At():0;if(ot=$j(Re,ot),ot!==null){Ia=m,t.cancelPendingCommit=ot(ab.bind(null,t,r,m,o,c,f,x,N,F,xe,Re,null,ie,fe)),pi(t,m,x,!ae);return}}ab(t,r,m,o,c,f,x,N,F)}function oj(t){for(var r=t;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!tr(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function pi(t,r,o,c){r&=~Em,r&=~vo,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-qe(f),x=1<<m;c[m]=-1,f&=~x}o!==0&&vs(t,o,r)}function Eh(){return(fn&6)===0?(Cc(0),!1):!0}function Am(){if(Ht!==null){if(bn===0)var t=Ht.return;else t=Ht,_a=lo=null,Gf(t),nl=null,hc=0,t=Ht;for(;t!==null;)Nv(t.alternate,t),t=t.return;Ht=null}}function dl(t,r){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,Sj(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),Ia=0,Am(),Sn=t,Ht=o=xa(t.current,null),Yt=r,bn=0,ar=null,hi=!1,cl=hn(t,r),Tm=!1,ul=ir=Em=vo=di=Yn=0,Ks=Sc=null,Sm=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-qe(c),m=1<<f;r|=t[f],c&=~m}return Ma=r,Gu(),o}function Jv(t,r){Vt=null,Q.H=bc,r===tl||r===th?(r=m0(),bn=3):r===Pf?(r=m0(),bn=4):bn=r===cm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ar=r,Ht===null&&(Yn=1,ph(t,yr(r,t.current)))}function Zv(){var t=sr.current;return t===null?!0:(Yt&4194048)===Yt?wr===null:(Yt&62914560)===Yt||(Yt&536870912)!==0?t===wr:!1}function eb(){var t=Q.H;return Q.H=bc,t===null?bc:t}function tb(){var t=Q.A;return Q.A=aj,t}function Sh(){Yn=4,hi||(Yt&4194048)!==Yt&&sr.current!==null||(cl=!0),(di&134217727)===0&&(vo&134217727)===0||Sn===null||pi(Sn,Yt,ir,!1)}function Mm(t,r,o){var c=fn;fn|=2;var f=eb(),m=tb();(Sn!==t||Yt!==r)&&(Th=null,dl(t,r)),r=!1;var x=Yn;e:do try{if(bn!==0&&Ht!==null){var N=Ht,F=ar;switch(bn){case 8:Am(),x=6;break e;case 3:case 2:case 9:case 6:sr.current===null&&(r=!0);var ae=bn;if(bn=0,ar=null,fl(t,N,F,ae),o&&cl){x=0;break e}break;default:ae=bn,bn=0,ar=null,fl(t,N,F,ae)}}lj(),x=Yn;break}catch(xe){Jv(t,xe)}while(!0);return r&&t.shellSuspendCounter++,_a=lo=null,fn=c,Q.H=f,Q.A=m,Ht===null&&(Sn=null,Yt=0,Gu()),x}function lj(){for(;Ht!==null;)nb(Ht)}function cj(t,r){var o=fn;fn|=2;var c=eb(),f=tb();Sn!==t||Yt!==r?(Th=null,jh=At()+500,dl(t,r)):cl=hn(t,r);e:do try{if(bn!==0&&Ht!==null){r=Ht;var m=ar;t:switch(bn){case 1:bn=0,ar=null,fl(t,r,m,1);break;case 2:case 9:if(d0(m)){bn=0,ar=null,sb(r);break}r=function(){bn!==2&&bn!==9||Sn!==t||(bn=7),ra(t)},m.then(r,r);break e;case 3:bn=7;break e;case 4:bn=5;break e;case 7:d0(m)?(bn=0,ar=null,sb(r)):(bn=0,ar=null,fl(t,r,m,7));break;case 5:var x=null;switch(Ht.tag){case 26:x=Ht.memoizedState;case 5:case 27:var N=Ht;if(x?Fb(x):N.stateNode.complete){bn=0,ar=null;var F=N.sibling;if(F!==null)Ht=F;else{var ae=N.return;ae!==null?(Ht=ae,Nh(ae)):Ht=null}break t}}bn=0,ar=null,fl(t,r,m,5);break;case 6:bn=0,ar=null,fl(t,r,m,6);break;case 8:Am(),Yn=6;break e;default:throw Error(i(462))}}uj();break}catch(xe){Jv(t,xe)}while(!0);return _a=lo=null,Q.H=c,Q.A=f,fn=o,Ht!==null?0:(Sn=null,Yt=0,Gu(),Yn)}function uj(){for(;Ht!==null&&!Wn();)nb(Ht)}function nb(t){var r=Ev(t.alternate,t,Ma);t.memoizedProps=t.pendingProps,r===null?Nh(t):Ht=r}function sb(t){var r=t,o=r.alternate;switch(r.tag){case 15:case 0:r=xv(o,r,r.pendingProps,r.type,void 0,Yt);break;case 11:r=xv(o,r,r.pendingProps,r.type.render,r.ref,Yt);break;case 5:Gf(r);default:Nv(o,r),r=Ht=t0(r,Ma),r=Ev(o,r,Ma)}t.memoizedProps=t.pendingProps,r===null?Nh(t):Ht=r}function fl(t,r,o,c){_a=lo=null,Gf(r),nl=null,hc=0;var f=r.return;try{if(Jk(t,f,r,o,Yt)){Yn=1,ph(t,yr(o,t.current)),Ht=null;return}}catch(m){if(f!==null)throw Ht=f,m;Yn=1,ph(t,yr(o,t.current)),Ht=null;return}r.flags&32768?(tn||c===1?t=!0:cl||(Yt&536870912)!==0?t=!1:(hi=t=!0,(c===2||c===9||c===3||c===6)&&(c=sr.current,c!==null&&c.tag===13&&(c.flags|=16384))),rb(r,t)):Nh(r)}function Nh(t){var r=t;do{if((r.flags&32768)!==0){rb(r,hi);return}t=r.return;var o=tj(r.alternate,r,Ma);if(o!==null){Ht=o;return}if(r=r.sibling,r!==null){Ht=r;return}Ht=r=t}while(r!==null);Yn===0&&(Yn=5)}function rb(t,r){do{var o=nj(t.alternate,t);if(o!==null){o.flags&=32767,Ht=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(t=t.sibling,t!==null)){Ht=t;return}Ht=t=o}while(t!==null);Yn=6,Ht=null}function ab(t,r,o,c,f,m,x,N,F){t.cancelPendingCommit=null;do Ch();while(gs!==0);if((fn&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=xf,rs(t,o,m,x,N,F),t===Sn&&(Ht=Sn=null,Yt=0),hl=r,mi=t,Ia=o,Nm=m,Cm=f,Kv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,mj(B,function(){return ub(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,f=Te.p,Te.p=2,x=fn,fn|=4;try{sj(t,r,o)}finally{fn=x,Te.p=f,Q.T=c}}gs=1,ib(),ob(),lb()}}function ib(){if(gs===1){gs=0;var t=mi,r=hl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var c=Te.p;Te.p=2;var f=fn;fn|=4;try{Uv(r,t);var m=Hm,x=Wy(t.containerInfo),N=m.focusedElem,F=m.selectionRange;if(x!==N&&N&&N.ownerDocument&&$y(N.ownerDocument.documentElement,N)){if(F!==null&&pf(N)){var ae=F.start,xe=F.end;if(xe===void 0&&(xe=ae),"selectionStart"in N)N.selectionStart=ae,N.selectionEnd=Math.min(xe,N.value.length);else{var Re=N.ownerDocument||document,ie=Re&&Re.defaultView||window;if(ie.getSelection){var fe=ie.getSelection(),ot=N.textContent.length,xt=Math.min(F.start,ot),Tn=F.end===void 0?xt:Math.min(F.end,ot);!fe.extend&&xt>Tn&&(x=Tn,Tn=xt,xt=x);var X=Hy(N,xt),K=Hy(N,Tn);if(X&&K&&(fe.rangeCount!==1||fe.anchorNode!==X.node||fe.anchorOffset!==X.offset||fe.focusNode!==K.node||fe.focusOffset!==K.offset)){var se=Re.createRange();se.setStart(X.node,X.offset),fe.removeAllRanges(),xt>Tn?(fe.addRange(se),fe.extend(K.node,K.offset)):(se.setEnd(K.node,K.offset),fe.addRange(se))}}}}for(Re=[],fe=N;fe=fe.parentNode;)fe.nodeType===1&&Re.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<Re.length;N++){var Se=Re[N];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}zh=!!qm,Hm=qm=null}finally{fn=f,Te.p=c,Q.T=o}}t.current=r,gs=2}}function ob(){if(gs===2){gs=0;var t=mi,r=hl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var c=Te.p;Te.p=2;var f=fn;fn|=4;try{Pv(t,r.alternate,r)}finally{fn=f,Te.p=c,Q.T=o}}gs=3}}function lb(){if(gs===4||gs===3){gs=0,Et();var t=mi,r=hl,o=Ia,c=Kv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?gs=5:(gs=0,hl=mi=null,cb(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(fi=null),ye(o),r=r.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Ve,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Q.T,f=Te.p,Te.p=2,Q.T=null;try{for(var m=t.onRecoverableError,x=0;x<c.length;x++){var N=c[x];m(N.value,{componentStack:N.stack})}}finally{Q.T=r,Te.p=f}}(Ia&3)!==0&&Ch(),ra(t),f=t.pendingLanes,(o&261930)!==0&&(f&42)!==0?t===Rm?Nc++:(Nc=0,Rm=t):Nc=0,Cc(0)}}function cb(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,cc(r)))}function Ch(){return ib(),ob(),lb(),ub()}function ub(){if(gs!==5)return!1;var t=mi,r=Nm;Nm=0;var o=ye(Ia),c=Q.T,f=Te.p;try{Te.p=32>o?32:o,Q.T=null,o=Cm,Cm=null;var m=mi,x=Ia;if(gs=0,hl=mi=null,Ia=0,(fn&6)!==0)throw Error(i(331));var N=fn;if(fn|=4,$v(m.current),Fv(m,m.current,x,o),fn=N,Cc(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Ve,m)}catch{}return!0}finally{Te.p=f,Q.T=c,cb(t,r)}}function hb(t,r,o){r=yr(o,r),r=lm(t.stateNode,r,2),t=oi(t,r,2),t!==null&&(Ln(t,2),ra(t))}function xn(t,r,o){if(t.tag===3)hb(t,t,o);else for(;r!==null;){if(r.tag===3){hb(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(fi===null||!fi.has(c))){t=yr(o,t),o=dv(2),c=oi(r,o,2),c!==null&&(fv(o,c,r,t),Ln(c,2),ra(c));break}}r=r.return}}function Im(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new ij;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(Tm=!0,f.add(o),t=hj.bind(null,t,r,o),r.then(t,t))}function hj(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,Sn===t&&(Yt&o)===o&&(Yn===4||Yn===3&&(Yt&62914560)===Yt&&300>At()-kh?(fn&2)===0&&dl(t,0):Em|=o,ul===Yt&&(ul=0)),ra(t)}function db(t,r){r===0&&(r=qn()),t=ao(t,r),t!==null&&(Ln(t,r),ra(t))}function dj(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),db(t,o)}function fj(t,r){var o=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),db(t,o)}function mj(t,r){return Xe(t,r)}var Rh=null,ml=null,Dm=!1,Ah=!1,Pm=!1,gi=0;function ra(t){t!==ml&&t.next===null&&(ml===null?Rh=ml=t:ml=ml.next=t),Ah=!0,Dm||(Dm=!0,gj())}function Cc(t,r){if(!Pm&&Ah){Pm=!0;do for(var o=!1,c=Rh;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var x=c.suspendedLanes,N=c.pingedLanes;m=(1<<31-qe(42|t)+1)-1,m&=f&~(x&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,gb(c,m))}else m=Yt,m=Kt(c,c===Sn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||hn(c,m)||(o=!0,gb(c,m));c=c.next}while(o);Pm=!1}}function pj(){fb()}function fb(){Ah=Dm=!1;var t=0;gi!==0&&Ej()&&(t=gi);for(var r=At(),o=null,c=Rh;c!==null;){var f=c.next,m=mb(c,r);m===0?(c.next=null,o===null?Rh=f:o.next=f,f===null&&(ml=o)):(o=c,(t!==0||(m&3)!==0)&&(Ah=!0)),c=f}gs!==0&&gs!==5||Cc(t),gi!==0&&(gi=0)}function mb(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-qe(m),N=1<<x,F=f[x];F===-1?((N&o)===0||(N&c)!==0)&&(f[x]=Jn(N,r)):F<=r&&(t.expiredLanes|=N),m&=~N}if(r=Sn,o=Yt,o=Kt(t,t===r?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,o===0||t===r&&(bn===2||bn===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&qt(c),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||hn(t,o)){if(r=o&-o,r===t.callbackPriority)return r;switch(c!==null&&qt(c),ye(o)){case 2:case 8:o=ln;break;case 32:o=B;break;case 268435456:o=ve;break;default:o=B}return c=pb.bind(null,t),o=Xe(o,c),t.callbackPriority=r,t.callbackNode=o,r}return c!==null&&c!==null&&qt(c),t.callbackPriority=2,t.callbackNode=null,2}function pb(t,r){if(gs!==0&&gs!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(Ch()&&t.callbackNode!==o)return null;var c=Yt;return c=Kt(t,t===Sn?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Qv(t,c,r),mb(t,At()),t.callbackNode!=null&&t.callbackNode===o?pb.bind(null,t):null)}function gb(t,r){if(Ch())return null;Qv(t,r,!0)}function gj(){Nj(function(){(fn&6)!==0?Xe(jt,pj):fb()})}function Lm(){if(gi===0){var t=Zo;t===0&&(t=on,on<<=1,(on&261888)===0&&(on=256)),gi=t}return gi}function yb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ya(""+t)}function vb(t,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,t.id&&o.setAttribute("form",t.id),r.parentNode.insertBefore(o,r),t=new FormData(t),o.parentNode.removeChild(o),t}function yj(t,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=yb((f[ft]||null).action),x=c.submitter;x&&(r=(r=x[ft]||null)?yb(r.formAction):x.getAttribute("formAction"),r!==null&&(m=r,x=null));var N=new Xr("action","action",null,c,f);t.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(gi!==0){var F=x?vb(f,x):new FormData(f);nm(o,{pending:!0,data:F,method:f.method,action:m},null,F)}}else typeof m=="function"&&(N.preventDefault(),F=x?vb(f,x):new FormData(f),nm(o,{pending:!0,data:F,method:f.method,action:m},m,F))},currentTarget:f}]})}}for(var Om=0;Om<bf.length;Om++){var Vm=bf[Om],vj=Vm.toLowerCase(),bj=Vm[0].toUpperCase()+Vm.slice(1);Ir(vj,"on"+bj)}Ir(Yy,"onAnimationEnd"),Ir(Qy,"onAnimationIteration"),Ir(Xy,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Pk,"onTransitionRun"),Ir(Lk,"onTransitionStart"),Ir(Ok,"onTransitionCancel"),Ir(Jy,"onTransitionEnd"),be("onMouseEnter",["mouseout","mouseover"]),be("onMouseLeave",["mouseout","mouseover"]),be("onPointerEnter",["pointerout","pointerover"]),be("onPointerLeave",["pointerout","pointerover"]),Ie("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ie("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ie("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ie("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rc));function bb(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var x=c.length-1;0<=x;x--){var N=c[x],F=N.instance,ae=N.currentTarget;if(N=N.listener,F!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=ae;try{m(f)}catch(xe){Wu(xe)}f.currentTarget=null,m=F}else for(x=0;x<c.length;x++){if(N=c[x],F=N.instance,ae=N.currentTarget,N=N.listener,F!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=ae;try{m(f)}catch(xe){Wu(xe)}f.currentTarget=null,m=F}}}}function $t(t,r){var o=r[vt];o===void 0&&(o=r[vt]=new Set);var c=t+"__bubble";o.has(c)||(xb(r,t,2,!1),o.add(c))}function Bm(t,r,o){var c=0;r&&(c|=4),xb(o,t,c,r)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function Um(t){if(!t[Mh]){t[Mh]=!0,L.forEach(function(o){o!=="selectionchange"&&(xj.has(o)||Bm(o,!1,t),Bm(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Mh]||(r[Mh]=!0,Bm("selectionchange",!1,r))}}function xb(t,r,o,c){switch(Yb(r)){case 2:var f=Kj;break;case 8:f=Yj;break;default:f=tp}o=f.bind(null,r,o,t),f=void 0,!Xi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function zm(t,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var N=c.stateNode.containerInfo;if(N===f)break;if(x===4)for(x=c.return;x!==null;){var F=x.tag;if((F===3||F===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;N!==null;){if(x=En(N),x===null)return;if(F=x.tag,F===5||F===6||F===26||F===27){c=m=x;continue e}N=N.parentNode}}c=c.return}Xa(function(){var ae=m,xe=fr(o),Re=[];e:{var ie=Zy.get(t);if(ie!==void 0){var fe=Xr,ot=t;switch(t){case"keypress":if(Zi(o)===0)break e;case"keydown":case"keyup":fe=qu;break;case"focusin":ot="focus",fe=to;break;case"focusout":ot="blur",fe=to;break;case"beforeblur":case"afterblur":fe=to;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=v;break;case Yy:case Qy:case Xy:fe=Lu;break;case Jy:fe=R;break;case"scroll":case"scrollend":fe=ec;break;case"wheel":fe=de;break;case"copy":case"cut":case"paste":fe=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=ba;break;case"toggle":case"beforetoggle":fe=Ot}var xt=(r&4)!==0,Tn=!xt&&(t==="scroll"||t==="scrollend"),X=xt?ie!==null?ie+"Capture":null:ie;xt=[];for(var K=ae,se;K!==null;){var Se=K;if(se=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||se===null||X===null||(Se=Cr(K,X),Se!=null&&xt.push(Ac(K,Se,se))),Tn)break;K=K.return}0<xt.length&&(ie=new fe(ie,ot,null,o,xe),Re.push({event:ie,listeners:xt}))}}if((r&7)===0){e:{if(ie=t==="mouseover"||t==="pointerover",fe=t==="mouseout"||t==="pointerout",ie&&o!==Xl&&(ot=o.relatedTarget||o.fromElement)&&(En(ot)||ot[rt]))break e;if((fe||ie)&&(ie=xe.window===xe?xe:(ie=xe.ownerDocument)?ie.defaultView||ie.parentWindow:window,fe?(ot=o.relatedTarget||o.toElement,fe=ae,ot=ot?En(ot):null,ot!==null&&(Tn=u(ot),xt=ot.tag,ot!==Tn||xt!==5&&xt!==27&&xt!==6)&&(ot=null)):(fe=null,ot=ae),fe!==ot)){if(xt=tc,Se="onMouseLeave",X="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(xt=ba,Se="onPointerLeave",X="onPointerEnter",K="pointer"),Tn=fe==null?ie:he(fe),se=ot==null?ie:he(ot),ie=new xt(Se,K+"leave",fe,o,xe),ie.target=Tn,ie.relatedTarget=se,Se=null,En(xe)===ae&&(xt=new xt(X,K+"enter",ot,o,xe),xt.target=se,xt.relatedTarget=Tn,Se=xt),Tn=Se,fe&&ot)t:{for(xt=wj,X=fe,K=ot,se=0,Se=X;Se;Se=xt(Se))se++;Se=0;for(var gt=K;gt;gt=xt(gt))Se++;for(;0<se-Se;)X=xt(X),se--;for(;0<Se-se;)K=xt(K),Se--;for(;se--;){if(X===K||K!==null&&X===K.alternate){xt=X;break t}X=xt(X),K=xt(K)}xt=null}else xt=null;fe!==null&&wb(Re,ie,fe,xt,!1),ot!==null&&Tn!==null&&wb(Re,Tn,ot,xt,!0)}}e:{if(ie=ae?he(ae):window,fe=ie.nodeName&&ie.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ie.type==="file")var cn=Vy;else if(Ly(ie))if(By)cn=Mk;else{cn=Rk;var ut=Ck}else fe=ie.nodeName,!fe||fe.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ae&&Hn(ae.elementType)&&(cn=Vy):cn=Ak;if(cn&&(cn=cn(t,ae))){Oy(Re,cn,o,xe);break e}ut&&ut(t,ie,ae),t==="focusout"&&ae&&ie.type==="number"&&ae.memoizedProps.value!=null&&ms(ie,"number",ie.value)}switch(ut=ae?he(ae):window,t){case"focusin":(Ly(ut)||ut.contentEditable==="true")&&($o=ut,gf=ae,ic=null);break;case"focusout":ic=gf=$o=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,Gy(Re,o,xe);break;case"selectionchange":if(Dk)break;case"keydown":case"keyup":Gy(Re,o,xe)}var Ut;if(dn)e:{switch(t){case"compositionstart":var Qt="onCompositionStart";break e;case"compositionend":Qt="onCompositionEnd";break e;case"compositionupdate":Qt="onCompositionUpdate";break e}Qt=void 0}else Ho?no(t,o)&&(Qt="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Qt="onCompositionStart");Qt&&(ea&&o.locale!=="ko"&&(Ho||Qt!=="onCompositionStart"?Qt==="onCompositionEnd"&&Ho&&(Ut=Zl()):(Qr=xe,Jl="value"in Qr?Qr.value:Qr.textContent,Ho=!0)),ut=Ih(ae,Qt),0<ut.length&&(Qt=new Zr(Qt,t,null,o,xe),Re.push({event:Qt,listeners:ut}),Ut?Qt.data=Ut:(Ut=qo(o),Ut!==null&&(Qt.data=Ut)))),(Ut=pr?Tk(t,o):Ek(t,o))&&(Qt=Ih(ae,"onBeforeInput"),0<Qt.length&&(ut=new Zr("onBeforeInput","beforeinput",null,o,xe),Re.push({event:ut,listeners:Qt}),ut.data=Ut)),yj(Re,t,ae,o,xe)}bb(Re,r)})}function Ac(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ih(t,r){for(var o=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Cr(t,o),f!=null&&c.unshift(Ac(t,f,m)),f=Cr(t,r),f!=null&&c.push(Ac(t,f,m))),t.tag===3)return c;t=t.return}return[]}function wj(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function wb(t,r,o,c,f){for(var m=r._reactName,x=[];o!==null&&o!==c;){var N=o,F=N.alternate,ae=N.stateNode;if(N=N.tag,F!==null&&F===c)break;N!==5&&N!==26&&N!==27||ae===null||(F=ae,f?(ae=Cr(o,m),ae!=null&&x.unshift(Ac(o,ae,F))):f||(ae=Cr(o,m),ae!=null&&x.push(Ac(o,ae,F)))),o=o.return}x.length!==0&&t.push({event:r,listeners:x})}var _j=/\r\n?/g,kj=/\u0000|\uFFFD/g;function _b(t){return(typeof t=="string"?t:""+t).replace(_j,`
`).replace(kj,"")}function kb(t,r){return r=_b(r),_b(t)===r}function jn(t,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||In(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&In(t,""+c);break;case"className":ne(t,"class",c);break;case"tabIndex":ne(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ne(t,o,c);break;case"style":On(t,c,m);break;case"data":if(r!=="object"){ne(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){t.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=Ya(""+c),t.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&jn(t,r,"name",f.name,f,null),jn(t,r,"formEncType",f.formEncType,f,null),jn(t,r,"formMethod",f.formMethod,f,null),jn(t,r,"formTarget",f.formTarget,f,null)):(jn(t,r,"encType",f.encType,f,null),jn(t,r,"method",f.method,f,null),jn(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=Ya(""+c),t.setAttribute(o,c);break;case"onClick":c!=null&&(t.onclick=Us);break;case"onScroll":c!=null&&$t("scroll",t);break;case"onScrollEnd":c!=null&&$t("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}o=Ya(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""+c):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":c===!0?t.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,c):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(o,c):t.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(o):t.setAttribute(o,c);break;case"popover":$t("beforetoggle",t),$t("toggle",t),Z(t,"popover",c);break;case"xlinkActuate":ge(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ge(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ge(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ge(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ge(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ge(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ge(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ge(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ge(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Z(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Kr.get(o)||o,Z(t,o,c))}}function Fm(t,r,o,c,f,m){switch(o){case"style":On(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"children":typeof c=="string"?In(t,c):(typeof c=="number"||typeof c=="bigint")&&In(t,""+c);break;case"onScroll":c!=null&&$t("scroll",t);break;case"onScrollEnd":c!=null&&$t("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Y.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=t[ft]||null,m=m!=null?m[o]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(r,c,f);break e}o in t?t[o]=c:c===!0?t.setAttribute(o,""):Z(t,o,c)}}}function Es(t,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",t),$t("load",t);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:jn(t,r,m,x,o,null)}}f&&jn(t,r,"srcSet",o.srcSet,o,null),c&&jn(t,r,"src",o.src,o,null);return;case"input":$t("invalid",t);var N=m=x=f=null,F=null,ae=null;for(c in o)if(o.hasOwnProperty(c)){var xe=o[c];if(xe!=null)switch(c){case"name":f=xe;break;case"type":x=xe;break;case"checked":F=xe;break;case"defaultChecked":ae=xe;break;case"value":m=xe;break;case"defaultValue":N=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,r));break;default:jn(t,r,c,xe,o,null)}}is(t,m,N,F,ae,x,f,!1);return;case"select":$t("invalid",t),c=x=m=null;for(f in o)if(o.hasOwnProperty(f)&&(N=o[f],N!=null))switch(f){case"value":m=N;break;case"defaultValue":x=N;break;case"multiple":c=N;default:jn(t,r,f,N,o,null)}r=m,o=x,t.multiple=!!c,r!=null?ps(t,!!c,r,!1):o!=null&&ps(t,!!c,o,!0);return;case"textarea":$t("invalid",t),m=f=c=null;for(x in o)if(o.hasOwnProperty(x)&&(N=o[x],N!=null))switch(x){case"value":c=N;break;case"defaultValue":f=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:jn(t,r,x,N,o,null)}Rn(t,c,f,m);return;case"option":for(F in o)o.hasOwnProperty(F)&&(c=o[F],c!=null)&&(F==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":jn(t,r,F,c,o,null));return;case"dialog":$t("beforetoggle",t),$t("toggle",t),$t("cancel",t),$t("close",t);break;case"iframe":case"object":$t("load",t);break;case"video":case"audio":for(c=0;c<Rc.length;c++)$t(Rc[c],t);break;case"image":$t("error",t),$t("load",t);break;case"details":$t("toggle",t);break;case"embed":case"source":case"link":$t("error",t),$t("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in o)if(o.hasOwnProperty(ae)&&(c=o[ae],c!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:jn(t,r,ae,c,o,null)}return;default:if(Hn(r)){for(xe in o)o.hasOwnProperty(xe)&&(c=o[xe],c!==void 0&&Fm(t,r,xe,c,o,void 0));return}}for(N in o)o.hasOwnProperty(N)&&(c=o[N],c!=null&&jn(t,r,N,c,o,null))}function jj(t,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,N=null,F=null,ae=null,xe=null;for(fe in o){var Re=o[fe];if(o.hasOwnProperty(fe)&&Re!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":F=Re;default:c.hasOwnProperty(fe)||jn(t,r,fe,null,c,Re)}}for(var ie in c){var fe=c[ie];if(Re=o[ie],c.hasOwnProperty(ie)&&(fe!=null||Re!=null))switch(ie){case"type":m=fe;break;case"name":f=fe;break;case"checked":ae=fe;break;case"defaultChecked":xe=fe;break;case"value":x=fe;break;case"defaultValue":N=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,r));break;default:fe!==Re&&jn(t,r,ie,fe,c,Re)}}Zs(t,x,N,F,ae,xe,m,f);return;case"select":fe=x=N=ie=null;for(m in o)if(F=o[m],o.hasOwnProperty(m)&&F!=null)switch(m){case"value":break;case"multiple":fe=F;default:c.hasOwnProperty(m)||jn(t,r,m,null,c,F)}for(f in c)if(m=c[f],F=o[f],c.hasOwnProperty(f)&&(m!=null||F!=null))switch(f){case"value":ie=m;break;case"defaultValue":N=m;break;case"multiple":x=m;default:m!==F&&jn(t,r,f,m,c,F)}r=N,o=x,c=fe,ie!=null?ps(t,!!o,ie,!1):!!c!=!!o&&(r!=null?ps(t,!!o,r,!0):ps(t,!!o,o?[]:"",!1));return;case"textarea":fe=ie=null;for(N in o)if(f=o[N],o.hasOwnProperty(N)&&f!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:jn(t,r,N,null,c,f)}for(x in c)if(f=c[x],m=o[x],c.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":ie=f;break;case"defaultValue":fe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&jn(t,r,x,f,c,m)}Ft(t,ie,fe);return;case"option":for(var ot in o)ie=o[ot],o.hasOwnProperty(ot)&&ie!=null&&!c.hasOwnProperty(ot)&&(ot==="selected"?t.selected=!1:jn(t,r,ot,null,c,ie));for(F in c)ie=c[F],fe=o[F],c.hasOwnProperty(F)&&ie!==fe&&(ie!=null||fe!=null)&&(F==="selected"?t.selected=ie&&typeof ie!="function"&&typeof ie!="symbol":jn(t,r,F,ie,c,fe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in o)ie=o[xt],o.hasOwnProperty(xt)&&ie!=null&&!c.hasOwnProperty(xt)&&jn(t,r,xt,null,c,ie);for(ae in c)if(ie=c[ae],fe=o[ae],c.hasOwnProperty(ae)&&ie!==fe&&(ie!=null||fe!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,r));break;default:jn(t,r,ae,ie,c,fe)}return;default:if(Hn(r)){for(var Tn in o)ie=o[Tn],o.hasOwnProperty(Tn)&&ie!==void 0&&!c.hasOwnProperty(Tn)&&Fm(t,r,Tn,void 0,c,ie);for(xe in c)ie=c[xe],fe=o[xe],!c.hasOwnProperty(xe)||ie===fe||ie===void 0&&fe===void 0||Fm(t,r,xe,ie,c,fe);return}}for(var X in o)ie=o[X],o.hasOwnProperty(X)&&ie!=null&&!c.hasOwnProperty(X)&&jn(t,r,X,null,c,ie);for(Re in c)ie=c[Re],fe=o[Re],!c.hasOwnProperty(Re)||ie===fe||ie==null&&fe==null||jn(t,r,Re,ie,c,fe)}function jb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Tj(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,x=f.initiatorType,N=f.duration;if(m&&N&&jb(x)){for(x=0,N=f.responseEnd,c+=1;c<o.length;c++){var F=o[c],ae=F.startTime;if(ae>N)break;var xe=F.transferSize,Re=F.initiatorType;xe&&jb(Re)&&(F=F.responseEnd,x+=xe*(F<N?1:(N-ae)/(F-ae)))}if(--c,r+=8*(m+x)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var qm=null,Hm=null;function Dh(t){return t.nodeType===9?t:t.ownerDocument}function Tb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Eb(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function $m(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Wm=null;function Ej(){var t=window.event;return t&&t.type==="popstate"?t===Wm?!1:(Wm=t,!0):(Wm=null,!1)}var Sb=typeof setTimeout=="function"?setTimeout:void 0,Sj=typeof clearTimeout=="function"?clearTimeout:void 0,Nb=typeof Promise=="function"?Promise:void 0,Nj=typeof queueMicrotask=="function"?queueMicrotask:typeof Nb<"u"?function(t){return Nb.resolve(null).then(t).catch(Cj)}:Sb;function Cj(t){setTimeout(function(){throw t})}function yi(t){return t==="head"}function Cb(t,r){var o=r,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){t.removeChild(f),vl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Mc(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Mc(o);for(var m=o.firstChild;m;){var x=m.nextSibling,N=m.nodeName;m[as]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=x}}else o==="body"&&Mc(t.ownerDocument.body);o=f}while(o);vl(r)}function Rb(t,r){var o=t;t=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=c}while(o)}function Gm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Gm(o),bs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function Rj(t,r,o,c){for(;t.nodeType===1;){var f=o;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[as])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=_r(t.nextSibling),t===null)break}return null}function Aj(t,r,o){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=_r(t.nextSibling),t===null))return null;return t}function Ab(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=_r(t.nextSibling),t===null))return null;return t}function Km(t){return t.data==="$?"||t.data==="$~"}function Ym(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Mj(t,r){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function _r(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Qm=null;function Mb(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(r===0)return _r(t.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}t=t.nextSibling}return null}function Ib(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return t;r--}else o!=="/$"&&o!=="/&"||r++}t=t.previousSibling}return null}function Db(t,r,o){switch(r=Dh(o),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Mc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);bs(t)}var kr=new Map,Pb=new Set;function Ph(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Da=Te.d;Te.d={f:Ij,r:Dj,D:Pj,C:Lj,L:Oj,m:Vj,X:Uj,S:Bj,M:zj};function Ij(){var t=Da.f(),r=Eh();return t||r}function Dj(t){var r=$(t);r!==null&&r.tag===5&&r.type==="form"?J0(r):Da.r(t)}var pl=typeof document>"u"?null:document;function Lb(t,r,o){var c=pl;if(c&&typeof r=="string"&&r){var f=pn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Pb.has(f)||(Pb.add(f),t={rel:t,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Es(r,"link",t),j(r),c.head.appendChild(r)))}}function Pj(t){Da.D(t),Lb("dns-prefetch",t,null)}function Lj(t,r){Da.C(t,r),Lb("preconnect",t,r)}function Oj(t,r,o){Da.L(t,r,o);var c=pl;if(c&&t&&r){var f='link[rel="preload"][as="'+pn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+pn(o.imageSizes)+'"]')):f+='[href="'+pn(t)+'"]';var m=f;switch(r){case"style":m=gl(t);break;case"script":m=yl(t)}kr.has(m)||(t=T({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:t,as:r},o),kr.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(Ic(m))||r==="script"&&c.querySelector(Dc(m))||(r=c.createElement("link"),Es(r,"link",t),j(r),c.head.appendChild(r)))}}function Vj(t,r){Da.m(t,r);var o=pl;if(o&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+pn(c)+'"][href="'+pn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=yl(t)}if(!kr.has(m)&&(t=T({rel:"modulepreload",href:t},r),kr.set(m,t),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Dc(m)))return}c=o.createElement("link"),Es(c,"link",t),j(c),o.head.appendChild(c)}}}function Bj(t,r,o){Da.S(t,r,o);var c=pl;if(c&&t){var f=b(c).hoistableStyles,m=gl(t);r=r||"default";var x=f.get(m);if(!x){var N={loading:0,preload:null};if(x=c.querySelector(Ic(m)))N.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},o),(o=kr.get(m))&&Xm(t,o);var F=x=c.createElement("link");j(F),Es(F,"link",t),F._p=new Promise(function(ae,xe){F.onload=ae,F.onerror=xe}),F.addEventListener("load",function(){N.loading|=1}),F.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Lh(x,r,c)}x={type:"stylesheet",instance:x,count:1,state:N},f.set(m,x)}}}function Uj(t,r){Da.X(t,r);var o=pl;if(o&&t){var c=b(o).hoistableScripts,f=yl(t),m=c.get(f);m||(m=o.querySelector(Dc(f)),m||(t=T({src:t,async:!0},r),(r=kr.get(f))&&Jm(t,r),m=o.createElement("script"),j(m),Es(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function zj(t,r){Da.M(t,r);var o=pl;if(o&&t){var c=b(o).hoistableScripts,f=yl(t),m=c.get(f);m||(m=o.querySelector(Dc(f)),m||(t=T({src:t,async:!0,type:"module"},r),(r=kr.get(f))&&Jm(t,r),m=o.createElement("script"),j(m),Es(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Ob(t,r,o,c){var f=(f=Pe.current)?Ph(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=gl(o.href),o=b(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=gl(o.href);var m=b(f).hoistableStyles,x=m.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=f.querySelector(Ic(t)))&&!m._p&&(x.instance=m,x.state.loading=5),kr.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},kr.set(t,o),m||Fj(f,t,o,x.state))),r&&c===null)throw Error(i(528,""));return x}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=yl(o),o=b(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function gl(t){return'href="'+pn(t)+'"'}function Ic(t){return'link[rel="stylesheet"]['+t+"]"}function Vb(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function Fj(t,r,o,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Es(r,"link",o),j(r),t.head.appendChild(r))}function yl(t){return'[src="'+pn(t)+'"]'}function Dc(t){return"script[async]"+t}function Bb(t,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+pn(o.href)+'"]');if(c)return r.instance=c,j(c),c;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),j(c),Es(c,"style",f),Lh(c,o.precedence,t),r.instance=c;case"stylesheet":f=gl(o.href);var m=t.querySelector(Ic(f));if(m)return r.state.loading|=4,r.instance=m,j(m),m;c=Vb(o),(f=kr.get(f))&&Xm(c,f),m=(t.ownerDocument||t).createElement("link"),j(m);var x=m;return x._p=new Promise(function(N,F){x.onload=N,x.onerror=F}),Es(m,"link",c),r.state.loading|=4,Lh(m,o.precedence,t),r.instance=m;case"script":return m=yl(o.src),(f=t.querySelector(Dc(m)))?(r.instance=f,j(f),f):(c=o,(f=kr.get(m))&&(c=T({},o),Jm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),j(f),Es(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Lh(c,o.precedence,t));return r.instance}function Lh(t,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,x=0;x<c.length;x++){var N=c[x];if(N.dataset.precedence===r)m=N;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(t,r.firstChild))}function Xm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Jm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Oh=null;function Ub(t,r,o){if(Oh===null){var c=new Map,f=Oh=new Map;f.set(o,c)}else f=Oh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(t))return c;for(c.set(t,null),o=o.getElementsByTagName(t),f=0;f<o.length;f++){var m=o[f];if(!(m[as]||m[nt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(r)||"";x=t+x;var N=c.get(x);N?N.push(m):c.set(x,[m])}}return c}function zb(t,r,o){t=t.ownerDocument||t,t.head.insertBefore(o,r==="title"?t.querySelector("head > title"):null)}function qj(t,r,o){if(o===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Fb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Hj(t,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=gl(c.href),m=r.querySelector(Ic(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Vh.bind(t),r.then(t,t)),o.state.loading|=4,o.instance=m,j(m);return}m=r.ownerDocument||r,c=Vb(c),(f=kr.get(f))&&Xm(c,f),m=m.createElement("link"),j(m);var x=m;x._p=new Promise(function(N,F){x.onload=N,x.onerror=F}),Es(m,"link",c),o.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Vh.bind(t),r.addEventListener("load",o),r.addEventListener("error",o))}}var Zm=0;function $j(t,r){return t.stylesheets&&t.count===0&&Uh(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var c=setTimeout(function(){if(t.stylesheets&&Uh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Zm===0&&(Zm=62500*Tj());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Uh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Zm?50:800)+r);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Vh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Bh=null;function Uh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Bh=new Map,r.forEach(Wj,t),Bh=null,Vh.call(t))}function Wj(t,r){if(!(r.state.loading&4)){var o=Bh.get(t);if(o)var c=o.get(null);else{o=new Map,Bh.set(t,o);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}f=r.instance,x=f.getAttribute("data-precedence"),m=o.get(x)||c,m===c&&o.set(null,f),o.set(x,f),this.count++,c=Vh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Pc={$$typeof:ue,Provider:null,Consumer:null,_currentValue:Le,_currentValue2:Le,_threadCount:0};function Gj(t,r,o,c,f,m,x,N,F){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.hiddenUpdates=yn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function qb(t,r,o,c,f,m,x,N,F,ae,xe,Re){return t=new Gj(t,r,o,x,F,ae,xe,Re,N),r=1,m===!0&&(r|=24),m=nr(3,null,null,r),t.current=m,m.stateNode=t,r=Mf(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Lf(m),t}function Hb(t){return t?(t=Ko,t):Ko}function $b(t,r,o,c,f,m){f=Hb(f),c.context===null?c.context=f:c.pendingContext=f,c=ii(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=oi(t,c,r),o!==null&&(Ys(o,t,r),fc(o,t,r))}function Wb(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function ep(t,r){Wb(t,r),(t=t.alternate)&&Wb(t,r)}function Gb(t){if(t.tag===13||t.tag===31){var r=ao(t,67108864);r!==null&&Ys(r,t,67108864),ep(t,67108864)}}function Kb(t){if(t.tag===13||t.tag===31){var r=or();r=G(r);var o=ao(t,r);o!==null&&Ys(o,t,r),ep(t,r)}}var zh=!0;function Kj(t,r,o,c){var f=Q.T;Q.T=null;var m=Te.p;try{Te.p=2,tp(t,r,o,c)}finally{Te.p=m,Q.T=f}}function Yj(t,r,o,c){var f=Q.T;Q.T=null;var m=Te.p;try{Te.p=8,tp(t,r,o,c)}finally{Te.p=m,Q.T=f}}function tp(t,r,o,c){if(zh){var f=np(c);if(f===null)zm(t,r,c,Fh,o),Qb(t,c);else if(Xj(f,t,r,o,c))c.stopPropagation();else if(Qb(t,c),r&4&&-1<Qj.indexOf(t)){for(;f!==null;){var m=$(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Nt(m.pendingLanes);if(x!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;x;){var F=1<<31-qe(x);N.entanglements[1]|=F,x&=~F}ra(m),(fn&6)===0&&(jh=At()+500,Cc(0))}}break;case 31:case 13:N=ao(m,2),N!==null&&Ys(N,m,2),Eh(),ep(m,2)}if(m=np(c),m===null&&zm(t,r,c,Fh,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else zm(t,r,c,null,o)}}function np(t){return t=fr(t),sp(t)}var Fh=null;function sp(t){if(Fh=null,t=En(t),t!==null){var r=u(t);if(r===null)t=null;else{var o=r.tag;if(o===13){if(t=h(r),t!==null)return t;t=null}else if(o===31){if(t=p(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Fh=t,null}function Yb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nn()){case jt:return 2;case ln:return 8;case B:case ee:return 32;case ve:return 268435456;default:return 32}default:return 32}}var rp=!1,vi=null,bi=null,xi=null,Lc=new Map,Oc=new Map,wi=[],Qj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qb(t,r){switch(t){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":Lc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oc.delete(r.pointerId)}}function Vc(t,r,o,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=$(r),r!==null&&Gb(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function Xj(t,r,o,c,f){switch(r){case"focusin":return vi=Vc(vi,t,r,o,c,f),!0;case"dragenter":return bi=Vc(bi,t,r,o,c,f),!0;case"mouseover":return xi=Vc(xi,t,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Lc.set(m,Vc(Lc.get(m)||null,t,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Oc.set(m,Vc(Oc.get(m)||null,t,r,o,c,f)),!0}return!1}function Xb(t){var r=En(t.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=h(o),r!==null){t.blockedOn=r,ke(t.priority,function(){Kb(o)});return}}else if(r===31){if(r=p(o),r!==null){t.blockedOn=r,ke(t.priority,function(){Kb(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=np(t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);Xl=c,o.target.dispatchEvent(c),Xl=null}else return r=$(o),r!==null&&Gb(r),t.blockedOn=o,!1;r.shift()}return!0}function Jb(t,r,o){qh(t)&&o.delete(r)}function Jj(){rp=!1,vi!==null&&qh(vi)&&(vi=null),bi!==null&&qh(bi)&&(bi=null),xi!==null&&qh(xi)&&(xi=null),Lc.forEach(Jb),Oc.forEach(Jb)}function Hh(t,r){t.blockedOn===r&&(t.blockedOn=null,rp||(rp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Jj)))}var $h=null;function Zb(t){$h!==t&&($h=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){$h===t&&($h=null);for(var r=0;r<t.length;r+=3){var o=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(sp(c||o)===null)continue;break}var m=$(o);m!==null&&(t.splice(r,3),r-=3,nm(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function vl(t){function r(F){return Hh(F,t)}vi!==null&&Hh(vi,t),bi!==null&&Hh(bi,t),xi!==null&&Hh(xi,t),Lc.forEach(r),Oc.forEach(r);for(var o=0;o<wi.length;o++){var c=wi[o];c.blockedOn===t&&(c.blockedOn=null)}for(;0<wi.length&&(o=wi[0],o.blockedOn===null);)Xb(o),o.blockedOn===null&&wi.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],x=f[ft]||null;if(typeof m=="function")x||Zb(o);else if(x){var N=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[ft]||null)N=x.formAction;else if(sp(f)!==null)continue}else N=x.action;typeof N=="function"?o[c+1]=N:(o.splice(c,3),c-=3),Zb(o)}}}function e1(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function ap(t){this._internalRoot=t}Wh.prototype.render=ap.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=or();$b(o,c,t,r,null,null)},Wh.prototype.unmount=ap.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;$b(t.current,2,null,t,null,null),Eh(),r[rt]=null}};function Wh(t){this._internalRoot=t}Wh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ee();t={blockedOn:null,target:t,priority:r};for(var o=0;o<wi.length&&r!==0&&r<wi[o].priority;o++);wi.splice(o,0,t),o===0&&Xb(t)}};var t1=e.version;if(t1!=="19.2.4")throw Error(i(527,t1,"19.2.4"));Te.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?w(t):null,t=t===null?null:t.stateNode,t};var Zj={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{Ve=Gh.inject(Zj),Ye=Gh}catch{}}return Uc.createRoot=function(t,r){if(!l(t))throw Error(i(299));var o=!1,c="",f=lv,m=cv,x=uv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=qb(t,1,!1,null,null,o,c,null,f,m,x,e1),t[rt]=r.current,Um(t),new ap(r)},Uc.hydrateRoot=function(t,r,o){if(!l(t))throw Error(i(299));var c=!1,f="",m=lv,x=cv,N=uv,F=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError),o.formState!==void 0&&(F=o.formState)),r=qb(t,1,!0,r,o??null,c,f,F,m,x,N,e1),r.context=Hb(null),o=r.current,c=or(),c=G(c),f=ii(c),f.callback=null,oi(o,f,c),o=c,r.current.lanes=o,Ln(r,o),ra(r),t[rt]=r.current,Um(t),new Wh(r)},Uc.version="19.2.4",Uc}var h1;function cT(){if(h1)return lp.exports;h1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),lp.exports=lT(),lp.exports}var uT=cT();const hT="modulepreload",dT=function(s){return"/login/"+s},d1={},Sr=function(e,n,i){let l=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=g(n.map(y=>{if(y=dT(y),y in d1)return;d1[y]=!0;const w=y.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${T}`))return;const E=document.createElement("link");if(E.rel=w?"stylesheet":hT,w||(E.as="script"),E.crossOrigin="",E.href=y,p&&E.setAttribute("nonce",p),document.head.appendChild(E),w)return new Promise((O,W)=>{E.addEventListener("load",O),E.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var f1="popstate";function fT(s={}){function e(i,l){let{pathname:u,search:h,hash:p}=i.location;return qp("",{pathname:u,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:au(l)}return pT(e,n,null,s)}function zn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Er(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mT(){return Math.random().toString(36).substring(2,10)}function m1(s,e){return{usr:s.state,key:s.key,idx:e}}function qp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Fl(e):e,state:n,key:e&&e.key||i||mT()}}function au({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Fl(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function pT(s,e,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,h=l.history,p="POP",g=null,y=w();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function w(){return(h.state||{idx:null}).idx}function T(){p="POP";let V=w(),re=V==null?null:V-y;y=V,g&&g({action:p,location:z.location,delta:re})}function E(V,re){p="PUSH";let J=qp(z.location,V,re);y=w()+1;let ue=m1(J,y),we=z.createHref(J);try{h.pushState(ue,"",we)}catch(Be){if(Be instanceof DOMException&&Be.name==="DataCloneError")throw Be;l.location.assign(we)}u&&g&&g({action:p,location:z.location,delta:1})}function O(V,re){p="REPLACE";let J=qp(z.location,V,re);y=w();let ue=m1(J,y),we=z.createHref(J);h.replaceState(ue,"",we),u&&g&&g({action:p,location:z.location,delta:0})}function W(V){return gT(V)}let z={get action(){return p},get location(){return s(l,h)},listen(V){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(f1,T),g=V,()=>{l.removeEventListener(f1,T),g=null}},createHref(V){return e(l,V)},createURL:W,encodeLocation(V){let re=W(V);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:E,replace:O,go(V){return h.go(V)}};return z}function gT(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),zn(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:au(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function px(s,e,n="/"){return yT(s,e,n,!1)}function yT(s,e,n,i){let l=typeof e=="string"?Fl(e):e,u=za(l.pathname||"/",n);if(u==null)return null;let h=gx(s);vT(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=CT(u);p=ST(h[g],y,i)}return p}function gx(s,e=[],n=[],i="",l=!1){let u=(h,p,g=l,y)=>{let w={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(i)&&g)return;zn(w.relativePath.startsWith(i),`Absolute route path "${w.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(i.length)}let T=Oa([i,w.relativePath]),E=n.concat(w);h.children&&h.children.length>0&&(zn(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),gx(h.children,e,E,T,g)),!(h.path==null&&!h.index)&&e.push({path:T,score:TT(T,h.index),routesMeta:E})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of yx(h.path))u(h,p,!0,g)}),e}function yx(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let h=yx(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function vT(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:ET(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var bT=/^:[\w-]+$/,xT=3,wT=2,_T=1,kT=10,jT=-2,p1=s=>s==="*";function TT(s,e){let n=s.split("/"),i=n.length;return n.some(p1)&&(i+=jT),e&&(i+=wT),n.filter(l=>!p1(l)).reduce((l,u)=>l+(bT.test(u)?xT:u===""?_T:kT),i)}function ET(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function ST(s,e,n=!1){let{routesMeta:i}=s,l={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,w=u==="/"?e:e.slice(u.length)||"/",T=wd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),E=g.route;if(!T&&y&&n&&!i[i.length-1].route.index&&(T=wd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!T)return null;Object.assign(l,T.params),h.push({params:l,pathname:Oa([u,T.pathname]),pathnameBase:IT(Oa([u,T.pathnameBase])),route:E}),T.pathnameBase!=="/"&&(u=Oa([u,T.pathnameBase]))}return h}function wd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=NT(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:w,isOptional:T},E)=>{if(w==="*"){let W=p[E]||"";h=u.slice(0,u.length-W.length).replace(/(.)\/+$/,"$1")}const O=p[E];return T&&!O?y[w]=void 0:y[w]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:s}}function NT(s,e=!1,n=!0){Er(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function CT(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Er(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function za(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var RT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function AT(s,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof s=="string"?Fl(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=g1(n.substring(1),"/"):u=g1(n,e)):u=e,{pathname:u,search:DT(i),hash:PT(l)}}function g1(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function dp(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MT(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xg(s){let e=MT(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function wg(s,e,n,i=!1){let l;typeof s=="string"?l=Fl(s):(l={...s},zn(!l.pathname||!l.pathname.includes("?"),dp("?","pathname","search",l)),zn(!l.pathname||!l.pathname.includes("#"),dp("#","pathname","hash",l)),zn(!l.search||!l.search.includes("#"),dp("#","search","hash",l)));let u=s===""||l.pathname==="",h=u?"/":l.pathname,p;if(h==null)p=n;else{let T=e.length-1;if(!i&&h.startsWith("..")){let E=h.split("/");for(;E[0]==="..";)E.shift(),T-=1;l.pathname=E.join("/")}p=T>=0?e[T]:"/"}let g=AT(l,p),y=h&&h!=="/"&&h.endsWith("/"),w=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var Oa=s=>s.join("/").replace(/\/\/+/g,"/"),IT=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),DT=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,PT=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,LT=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function OT(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function VT(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var vx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bx(s,e){let n=s;if(typeof n!="string"||!RT.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(vx)try{let u=new URL(window.location.href),h=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=za(h.pathname,e);h.origin===u.origin&&p!=null?n=p+h.search+h.hash:l=!0}catch{Er(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xx=["POST","PUT","PATCH","DELETE"];new Set(xx);var BT=["GET",...xx];new Set(BT);var ql=_.createContext(null);ql.displayName="DataRouter";var zd=_.createContext(null);zd.displayName="DataRouterState";var UT=_.createContext(!1),wx=_.createContext({isTransitioning:!1});wx.displayName="ViewTransition";var zT=_.createContext(new Map);zT.displayName="Fetchers";var FT=_.createContext(null);FT.displayName="Await";var hr=_.createContext(null);hr.displayName="Navigation";var vu=_.createContext(null);vu.displayName="Location";var $r=_.createContext({outlet:null,matches:[],isDataRoute:!1});$r.displayName="Route";var _g=_.createContext(null);_g.displayName="RouteError";var _x="REACT_ROUTER_ERROR",qT="REDIRECT",HT="ROUTE_ERROR_RESPONSE";function $T(s){if(s.startsWith(`${_x}:${qT}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function WT(s){if(s.startsWith(`${_x}:${HT}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new LT(e.status,e.statusText,e.data)}catch{}}function GT(s,{relative:e}={}){zn(Hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=_.useContext(hr),{hash:l,pathname:u,search:h}=bu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Oa([n,u])),i.createHref({pathname:p,search:h,hash:l})}function Hl(){return _.useContext(vu)!=null}function Wr(){return zn(Hl(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(vu).location}var kx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jx(s){_.useContext(hr).static||_.useLayoutEffect(s)}function Rs(){let{isDataRoute:s}=_.useContext($r);return s?oE():KT()}function KT(){zn(Hl(),"useNavigate() may be used only in the context of a <Router> component.");let s=_.useContext(ql),{basename:e,navigator:n}=_.useContext(hr),{matches:i}=_.useContext($r),{pathname:l}=Wr(),u=JSON.stringify(xg(i)),h=_.useRef(!1);return jx(()=>{h.current=!0}),_.useCallback((g,y={})=>{if(Er(h.current,kx),!h.current)return;if(typeof g=="number"){n.go(g);return}let w=wg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Oa([e,w.pathname])),(y.replace?n.replace:n.push)(w,y.state,y)},[e,n,u,l,s])}_.createContext(null);function YT(){let{matches:s}=_.useContext($r),e=s[s.length-1];return e?e.params:{}}function bu(s,{relative:e}={}){let{matches:n}=_.useContext($r),{pathname:i}=Wr(),l=JSON.stringify(xg(n));return _.useMemo(()=>wg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function QT(s,e){return Tx(s,e)}function Tx(s,e,n,i,l){zn(Hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=_.useContext(hr),{matches:h}=_.useContext($r),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",w=p?p.pathnameBase:"/",T=p&&p.route;{let J=T&&T.path||"";Sx(y,!T||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let E=Wr(),O;if(e){let J=typeof e=="string"?Fl(e):e;zn(w==="/"||J.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${J.pathname}" was given in the \`location\` prop.`),O=J}else O=E;let W=O.pathname||"/",z=W;if(w!=="/"){let J=w.replace(/^\//,"").split("/");z="/"+W.replace(/^\//,"").split("/").slice(J.length).join("/")}let V=px(s,{pathname:z});Er(T||V!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Er(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let re=tE(V&&V.map(J=>Object.assign({},J,{params:Object.assign({},g,J.params),pathname:Oa([w,u.encodeLocation?u.encodeLocation(J.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?w:Oa([w,u.encodeLocation?u.encodeLocation(J.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathnameBase])})),h,n,i,l);return e&&re?_.createElement(vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},re):re}function XT(){let s=iE(),e=OT(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:l},n):null,h)}var JT=_.createElement(XT,null),Ex=class extends _.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=WT(s.digest);n&&(s=n)}let e=s!==void 0?_.createElement($r.Provider,{value:this.props.routeContext},_.createElement(_g.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?_.createElement(ZT,{error:s},e):e}};Ex.contextType=UT;var fp=new WeakMap;function ZT({children:s,error:e}){let{basename:n}=_.useContext(hr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=$T(e.digest);if(i){let l=fp.get(e);if(l)throw l;let u=bx(i.location,n);if(vx&&!fp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw fp.set(e,h),h}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function eE({routeContext:s,match:e,children:n}){let i=_.useContext(ql);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement($r.Provider,{value:s},n)}function tE(s,e=[],n=null,i=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,h=n?.errors;if(h!=null){let w=u.findIndex(T=>T.route.id&&h?.[T.route.id]!==void 0);zn(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,w+1))}let p=!1,g=-1;if(n)for(let w=0;w<u.length;w++){let T=u[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=w),T.route.id){let{loaderData:E,errors:O}=n,W=T.route.loader&&!E.hasOwnProperty(T.route.id)&&(!O||O[T.route.id]===void 0);if(T.route.lazy||W){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&i?(w,T)=>{i(w,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:VT(n.matches),errorInfo:T})}:void 0;return u.reduceRight((w,T,E)=>{let O,W=!1,z=null,V=null;n&&(O=h&&T.route.id?h[T.route.id]:void 0,z=T.route.errorElement||JT,p&&(g<0&&E===0?(Sx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,V=null):g===E&&(W=!0,V=T.route.hydrateFallbackElement||null)));let re=e.concat(u.slice(0,E+1)),J=()=>{let ue;return O?ue=z:W?ue=V:T.route.Component?ue=_.createElement(T.route.Component,null):T.route.element?ue=T.route.element:ue=w,_.createElement(eE,{match:T,routeContext:{outlet:w,matches:re,isDataRoute:n!=null},children:ue})};return n&&(T.route.ErrorBoundary||T.route.errorElement||E===0)?_.createElement(Ex,{location:n.location,revalidation:n.revalidation,component:z,error:O,children:J(),routeContext:{outlet:null,matches:re,isDataRoute:!0},onError:y}):J()},null)}function kg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nE(s){let e=_.useContext(ql);return zn(e,kg(s)),e}function sE(s){let e=_.useContext(zd);return zn(e,kg(s)),e}function rE(s){let e=_.useContext($r);return zn(e,kg(s)),e}function jg(s){let e=rE(s),n=e.matches[e.matches.length-1];return zn(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function aE(){return jg("useRouteId")}function iE(){let s=_.useContext(_g),e=sE("useRouteError"),n=jg("useRouteError");return s!==void 0?s:e.errors?.[n]}function oE(){let{router:s}=nE("useNavigate"),e=jg("useNavigate"),n=_.useRef(!1);return jx(()=>{n.current=!0}),_.useCallback(async(l,u={})=>{Er(n.current,kx),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var y1={};function Sx(s,e,n){!e&&!y1[s]&&(y1[s]=!0,Er(!1,n))}_.memo(lE);function lE({routes:s,future:e,state:n,onError:i}){return Tx(s,void 0,n,i,e)}function cE({to:s,replace:e,state:n,relative:i}){zn(Hl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=_.useContext(hr);Er(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext($r),{pathname:h}=Wr(),p=Rs(),g=wg(s,xg(u),h,i==="path"),y=JSON.stringify(g);return _.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function Un(s){zn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uE({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){zn(!Hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=_.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[p,l,u,h]);typeof n=="string"&&(n=Fl(n));let{pathname:y="/",search:w="",hash:T="",state:E=null,key:O="default"}=n,W=_.useMemo(()=>{let z=za(y,p);return z==null?null:{location:{pathname:z,search:w,hash:T,state:E,key:O},navigationType:i}},[p,y,w,T,E,O,i]);return Er(W!=null,`<Router basename="${p}"> is not able to match the URL "${y}${w}${T}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:_.createElement(hr.Provider,{value:g},_.createElement(vu.Provider,{children:e,value:W}))}function hE({children:s,location:e}){return QT(Hp(s),e)}function Hp(s,e=[]){let n=[];return _.Children.forEach(s,(i,l)=>{if(!_.isValidElement(i))return;let u=[...e,l];if(i.type===_.Fragment){n.push.apply(n,Hp(i.props.children,u));return}zn(i.type===Un,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Hp(i.props.children,u)),n.push(h)}),n}var cd="get",ud="application/x-www-form-urlencoded";function Fd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function dE(s){return Fd(s)&&s.tagName.toLowerCase()==="button"}function fE(s){return Fd(s)&&s.tagName.toLowerCase()==="form"}function mE(s){return Fd(s)&&s.tagName.toLowerCase()==="input"}function pE(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function gE(s,e){return s.button===0&&(!e||e==="_self")&&!pE(s)}function $p(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let i=s[n];return e.concat(Array.isArray(i)?i.map(l=>[n,l]):[[n,i]])},[]))}function yE(s,e){let n=$p(s);return e&&e.forEach((i,l)=>{n.has(l)||e.getAll(l).forEach(u=>{n.append(l,u)})}),n}var Kh=null;function vE(){if(Kh===null)try{new FormData(document.createElement("form"),0),Kh=!1}catch{Kh=!0}return Kh}var bE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mp(s){return s!=null&&!bE.has(s)?(Er(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ud}"`),null):s}function xE(s,e){let n,i,l,u,h;if(fE(s)){let p=s.getAttribute("action");i=p?za(p,e):null,n=s.getAttribute("method")||cd,l=mp(s.getAttribute("enctype"))||ud,u=new FormData(s)}else if(dE(s)||mE(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?za(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||cd,l=mp(s.getAttribute("formenctype"))||mp(p.getAttribute("enctype"))||ud,u=new FormData(p,s),!vE()){let{name:y,type:w,value:T}=s;if(w==="image"){let E=y?`${y}.`:"";u.append(`${E}x`,"0"),u.append(`${E}y`,"0")}else y&&u.append(y,T)}}else{if(Fd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=cd,i=null,l=ud,h=s}return u&&l==="text/plain"&&(h=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function wE(s,e,n,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&za(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function _E(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kE(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function jE(s,e,n){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await _E(u,n);return h.links?h.links():[]}return[]}));return NE(i.flat(1).filter(kE).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function v1(s,e,n,i,l,u){let h=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let w=i.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function TE(s,e,{includeHydrateFallback:n}={}){return EE(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function EE(s){return[...new Set(s)]}function SE(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function NE(s,e){let n=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(SE(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function Nx(){let s=_.useContext(ql);return Tg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function CE(){let s=_.useContext(zd);return Tg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Eg=_.createContext(void 0);Eg.displayName="FrameworkContext";function Cx(){let s=_.useContext(Eg);return Tg(s,"You must render this element inside a <HydratedRouter> element"),s}function RE(s,e){let n=_.useContext(Eg),[i,l]=_.useState(!1),[u,h]=_.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:T}=e,E=_.useRef(null);_.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let z=re=>{re.forEach(J=>{h(J.isIntersecting)})},V=new IntersectionObserver(z,{threshold:.5});return E.current&&V.observe(E.current),()=>{V.disconnect()}}},[s]),_.useEffect(()=>{if(i){let z=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(z)}}},[i]);let O=()=>{l(!0)},W=()=>{l(!1),h(!1)};return n?s!=="intent"?[u,E,{}]:[u,E,{onFocus:zc(p,O),onBlur:zc(g,W),onMouseEnter:zc(y,O),onMouseLeave:zc(w,W),onTouchStart:zc(T,O)}]:[!1,E,{}]}function zc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function AE({page:s,...e}){let{router:n}=Nx(),i=_.useMemo(()=>px(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?_.createElement(IE,{page:s,matches:i,...e}):null}function ME(s){let{manifest:e,routeModules:n}=Cx(),[i,l]=_.useState([]);return _.useEffect(()=>{let u=!1;return jE(s,e,n).then(h=>{u||l(h)}),()=>{u=!0}},[s,e,n]),i}function IE({page:s,matches:e,...n}){let i=Wr(),{future:l,manifest:u,routeModules:h}=Cx(),{basename:p}=Nx(),{loaderData:g,matches:y}=CE(),w=_.useMemo(()=>v1(s,e,y,u,i,"data"),[s,e,y,u,i]),T=_.useMemo(()=>v1(s,e,y,u,i,"assets"),[s,e,y,u,i]),E=_.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let z=new Set,V=!1;if(e.forEach(J=>{let ue=u.routes[J.route.id];!ue||!ue.hasLoader||(!w.some(we=>we.route.id===J.route.id)&&J.route.id in g&&h[J.route.id]?.shouldRevalidate||ue.hasClientLoader?V=!0:z.add(J.route.id))}),z.size===0)return[];let re=wE(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return V&&z.size>0&&re.searchParams.set("_routes",e.filter(J=>z.has(J.route.id)).map(J=>J.route.id).join(",")),[re.pathname+re.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,w,e,s,h]),O=_.useMemo(()=>TE(T,u),[T,u]),W=ME(T);return _.createElement(_.Fragment,null,E.map(z=>_.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...n})),O.map(z=>_.createElement("link",{key:z,rel:"modulepreload",href:z,...n})),W.map(({key:z,link:V})=>_.createElement("link",{key:z,nonce:n.nonce,...V,crossOrigin:V.crossOrigin??n.crossOrigin})))}function DE(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var PE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{PE&&(window.__reactRouterVersion="7.13.0")}catch{}function LE({basename:s,children:e,unstable_useTransitions:n,window:i}){let l=_.useRef();l.current==null&&(l.current=fT({window:i,v5Compat:!0}));let u=l.current,[h,p]=_.useState({action:u.action,location:u.location}),g=_.useCallback(y=>{n===!1?p(y):_.startTransition(()=>p(y))},[n]);return _.useLayoutEffect(()=>u.listen(g),[u,g]),_.createElement(uE,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:n})}var Rx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ax=_.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:h,state:p,target:g,to:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:E,...O},W){let{basename:z,unstable_useTransitions:V}=_.useContext(hr),re=typeof y=="string"&&Rx.test(y),J=bx(y,z);y=J.to;let ue=GT(y,{relative:l}),[we,Be,De]=RE(i,O),M=UE(y,{replace:h,state:p,target:g,preventScrollReset:w,relative:l,viewTransition:T,unstable_defaultShouldRevalidate:E,unstable_useTransitions:V});function S(P){e&&e(P),P.defaultPrevented||M(P)}let A=_.createElement("a",{...O,...De,href:J.absoluteURL||ue,onClick:J.isExternal||u?e:S,ref:DE(W,Be),target:g,"data-discover":!re&&n==="render"?"true":void 0});return we&&!re?_.createElement(_.Fragment,null,A,_.createElement(AE,{page:ue})):A});Ax.displayName="Link";var OE=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:h,viewTransition:p,children:g,...y},w){let T=bu(h,{relative:y.relative}),E=Wr(),O=_.useContext(zd),{navigator:W,basename:z}=_.useContext(hr),V=O!=null&&WE(T)&&p===!0,re=W.encodeLocation?W.encodeLocation(T).pathname:T.pathname,J=E.pathname,ue=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(J=J.toLowerCase(),ue=ue?ue.toLowerCase():null,re=re.toLowerCase()),ue&&z&&(ue=za(ue,z)||ue);const we=re!=="/"&&re.endsWith("/")?re.length-1:re.length;let Be=J===re||!l&&J.startsWith(re)&&J.charAt(we)==="/",De=ue!=null&&(ue===re||!l&&ue.startsWith(re)&&ue.charAt(re.length)==="/"),M={isActive:Be,isPending:De,isTransitioning:V},S=Be?e:void 0,A;typeof i=="function"?A=i(M):A=[i,Be?"active":null,De?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(M):u;return _.createElement(Ax,{...y,"aria-current":S,className:A,ref:w,style:P,to:h,viewTransition:p},typeof g=="function"?g(M):g)});OE.displayName="NavLink";var VE=_.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:u,method:h=cd,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:E,...O},W)=>{let{unstable_useTransitions:z}=_.useContext(hr),V=HE(),re=$E(p,{relative:y}),J=h.toLowerCase()==="get"?"get":"post",ue=typeof p=="string"&&Rx.test(p),we=Be=>{if(g&&g(Be),Be.defaultPrevented)return;Be.preventDefault();let De=Be.nativeEvent.submitter,M=De?.getAttribute("formmethod")||h,S=()=>V(De||Be.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:l,state:u,relative:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:E});z&&n!==!1?_.startTransition(()=>S()):S()};return _.createElement("form",{ref:W,method:J,action:re,onSubmit:i?g:we,...O,"data-discover":!ue&&s==="render"?"true":void 0})});VE.displayName="Form";function BE(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mx(s){let e=_.useContext(ql);return zn(e,BE(s)),e}function UE(s,{target:e,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Rs(),w=Wr(),T=bu(s,{relative:u});return _.useCallback(E=>{if(gE(E,e)){E.preventDefault();let O=n!==void 0?n:au(w)===au(T),W=()=>y(s,{replace:O,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?_.startTransition(()=>W()):W()}},[w,y,T,n,i,e,s,l,u,h,p,g])}function zE(s){Er(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=_.useRef($p(s)),n=_.useRef(!1),i=Wr(),l=_.useMemo(()=>yE(i.search,n.current?null:e.current),[i.search]),u=Rs(),h=_.useCallback((p,g)=>{const y=$p(typeof p=="function"?p(new URLSearchParams(l)):p);n.current=!0,u("?"+y,g)},[u,l]);return[l,h]}var FE=0,qE=()=>`__${String(++FE)}__`;function HE(){let{router:s}=Mx("useSubmit"),{basename:e}=_.useContext(hr),n=aE(),i=s.fetch,l=s.navigate;return _.useCallback(async(u,h={})=>{let{action:p,method:g,encType:y,formData:w,body:T}=xE(u,e);if(h.navigate===!1){let E=h.fetcherKey||qE();await i(E,n,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:w,body:T,formMethod:h.method||g,formEncType:h.encType||y,flushSync:h.flushSync})}else await l(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:w,body:T,formMethod:h.method||g,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,l,e,n])}function $E(s,{relative:e}={}){let{basename:n}=_.useContext(hr),i=_.useContext($r);zn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...bu(s||".",{relative:e})},h=Wr();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(T=>T).forEach(T=>p.append("index",T));let w=p.toString();u.search=w?`?${w}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Oa([n,u.pathname])),au(u)}function WE(s,{relative:e}={}){let n=_.useContext(wx);zn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Mx("useViewTransitionState"),l=bu(s,{relative:e});if(!n.isTransitioning)return!1;let u=za(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=za(n.nextLocation.pathname,i)||n.nextLocation.pathname;return wd(l.pathname,h)!=null||wd(l.pathname,u)!=null}const GE=()=>{};var b1={};const Ix=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},KE=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],h=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],h=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Dx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,p=h?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,w=u>>2,T=(u&3)<<4|p>>4;let E=(p&15)<<2|y>>6,O=y&63;g||(O=64,h||(E=64)),i.push(n[w],n[T],n[E],n[O])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Ix(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):KE(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const T=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||T==null)throw new YE;const E=u<<2|p>>4;if(i.push(E),y!==64){const O=p<<4&240|y>>2;if(i.push(O),T!==64){const W=y<<6&192|T;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class YE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QE=function(s){const e=Ix(s);return Dx.encodeByteArray(e,!0)},_d=function(s){return QE(s).replace(/\./g,"")},Px=function(s){try{return Dx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const JE=()=>XE().__FIREBASE_DEFAULTS__,ZE=()=>{if(typeof process>"u"||typeof b1>"u")return;const s=b1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},eS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Px(s[1]);return e&&JSON.parse(e)},qd=()=>{try{return GE()||JE()||ZE()||eS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Lx=s=>qd()?.emulatorHosts?.[s],Ox=s=>{const e=Lx(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Vx=()=>qd()?.config,Bx=s=>qd()?.[`_${s}`];class tS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function $i(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sg(s){return(await fetch(s,{credentials:"include"})).ok}function Ux(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[_d(JSON.stringify(n)),_d(JSON.stringify(h)),""].join(".")}const Jc={};function nS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Jc))Jc[e]?s.emulator.push(e):s.prod.push(e);return s}function sS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let x1=!1;function Ng(s,e){if(typeof window>"u"||typeof document>"u"||!$i(window.location.host)||Jc[s]===e||Jc[s]||x1)return;Jc[s]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",u=nS().prod.length>0;function h(){const E=document.getElementById(i);E&&E.remove()}function p(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,O){E.setAttribute("width","24"),E.setAttribute("id",O),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{x1=!0,h()},E}function w(E,O){E.setAttribute("id",O),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=sS(i),O=n("text"),W=document.getElementById(O)||document.createElement("span"),z=n("learnmore"),V=document.getElementById(z)||document.createElement("a"),re=n("preprendIcon"),J=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const ue=E.element;p(ue),w(V,z);const we=y();g(J,re),ue.append(J,W,V,we),document.body.appendChild(ue)}u?(W.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Bs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bs())}function aS(){const s=qd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function lS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cS(){const s=Bs();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function uS(){return!aS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hS(){try{return typeof indexedDB=="object"}catch{return!1}}function dS(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const fS="FirebaseError";class ga extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=fS,Object.setPrototypeOf(this,ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?mS(u,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new ga(l,p,i)}}function mS(s,e){return s.replace(pS,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const pS=/\{\$([^}]+)}/g;function gS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function So(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=s[l],h=e[l];if(w1(u)&&w1(h)){if(!So(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function w1(s){return s!==null&&typeof s=="object"}function wu(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Wc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Gc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function yS(s,e){const n=new vS(s,e);return n.subscribe.bind(n)}class vS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");bS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=pp),l.error===void 0&&(l.error=pp),l.complete===void 0&&(l.complete=pp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function pp(){}function Fn(s){return s&&s._delegate?s._delegate:s}class Vi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const wo="[DEFAULT]";class xS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new tS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_S(e))try{this.getOrInitializeService({instanceIdentifier:wo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wo){return this.instances.has(e)}getOptions(e=wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=wo){return this.component?this.component.multipleInstances?e:wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wS(s){return s===wo?void 0:s}function _S(s){return s.instantiationMode==="EAGER"}class kS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Xt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Xt||(Xt={}));const jS={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},TS=Xt.INFO,ES={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},SS=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=ES[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cg{constructor(e){this.name=e,this._logLevel=TS,this._logHandler=SS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const NS=(s,e)=>e.some(n=>s instanceof n);let _1,k1;function CS(){return _1||(_1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RS(){return k1||(k1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zx=new WeakMap,Wp=new WeakMap,Fx=new WeakMap,gp=new WeakMap,Rg=new WeakMap;function AS(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Di(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&zx.set(n,s)}).catch(()=>{}),Rg.set(e,s),e}function MS(s){if(Wp.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Wp.set(s,e)}let Gp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Wp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Fx.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Di(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function IS(s){Gp=s(Gp)}function DS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(yp(this),e,...n);return Fx.set(i,e.sort?e.sort():[e]),Di(i)}:RS().includes(s)?function(...e){return s.apply(yp(this),e),Di(zx.get(this))}:function(...e){return Di(s.apply(yp(this),e))}}function PS(s){return typeof s=="function"?DS(s):(s instanceof IDBTransaction&&MS(s),NS(s,CS())?new Proxy(s,Gp):s)}function Di(s){if(s instanceof IDBRequest)return AS(s);if(gp.has(s))return gp.get(s);const e=PS(s);return e!==s&&(gp.set(s,e),Rg.set(e,s)),e}const yp=s=>Rg.get(s);function LS(s,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(s,e),p=Di(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Di(h.result),g.oldVersion,g.newVersion,Di(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const OS=["get","getKey","getAll","getAllKeys","count"],VS=["put","add","delete","clear"],vp=new Map;function j1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(vp.get(e))return vp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=VS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||OS.includes(n)))return;const u=async function(h,...p){const g=this.transaction(h,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return vp.set(e,u),u}IS(s=>({...s,get:(e,n,i)=>j1(e,n)||s.get(e,n,i),has:(e,n)=>!!j1(e,n)||s.has(e,n)}));class BS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(US(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function US(s){return s.getComponent()?.type==="VERSION"}const Kp="@firebase/app",T1="0.14.7";const Fa=new Cg("@firebase/app"),zS="@firebase/app-compat",FS="@firebase/analytics-compat",qS="@firebase/analytics",HS="@firebase/app-check-compat",$S="@firebase/app-check",WS="@firebase/auth",GS="@firebase/auth-compat",KS="@firebase/database",YS="@firebase/data-connect",QS="@firebase/database-compat",XS="@firebase/functions",JS="@firebase/functions-compat",ZS="@firebase/installations",eN="@firebase/installations-compat",tN="@firebase/messaging",nN="@firebase/messaging-compat",sN="@firebase/performance",rN="@firebase/performance-compat",aN="@firebase/remote-config",iN="@firebase/remote-config-compat",oN="@firebase/storage",lN="@firebase/storage-compat",cN="@firebase/firestore",uN="@firebase/ai",hN="@firebase/firestore-compat",dN="firebase",fN="12.8.0";const Yp="[DEFAULT]",mN={[Kp]:"fire-core",[zS]:"fire-core-compat",[qS]:"fire-analytics",[FS]:"fire-analytics-compat",[$S]:"fire-app-check",[HS]:"fire-app-check-compat",[WS]:"fire-auth",[GS]:"fire-auth-compat",[KS]:"fire-rtdb",[YS]:"fire-data-connect",[QS]:"fire-rtdb-compat",[XS]:"fire-fn",[JS]:"fire-fn-compat",[ZS]:"fire-iid",[eN]:"fire-iid-compat",[tN]:"fire-fcm",[nN]:"fire-fcm-compat",[sN]:"fire-perf",[rN]:"fire-perf-compat",[aN]:"fire-rc",[iN]:"fire-rc-compat",[oN]:"fire-gcs",[lN]:"fire-gcs-compat",[cN]:"fire-fst",[hN]:"fire-fst-compat",[uN]:"fire-vertex","fire-js":"fire-js",[dN]:"fire-js-all"};const kd=new Map,pN=new Map,Qp=new Map;function E1(s,e){try{s.container.addComponent(e)}catch(n){Fa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function No(s){const e=s.name;if(Qp.has(e))return Fa.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,s);for(const n of kd.values())E1(n,s);for(const n of pN.values())E1(n,s);return!0}function Hd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function lr(s){return s==null?!1:s.settings!==void 0}const gN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new xu("app","Firebase",gN);class yN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}const Po=fN;function Ag(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Yp,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Pi.create("bad-app-name",{appName:String(l)});if(n||(n=Vx()),!n)throw Pi.create("no-options");const u=kd.get(l);if(u){if(So(n,u.options)&&So(i,u.config))return u;throw Pi.create("duplicate-app",{appName:l})}const h=new kS(l);for(const g of Qp.values())h.addComponent(g);const p=new yN(n,i,h);return kd.set(l,p),p}function Mg(s=Yp){const e=kd.get(s);if(!e&&s===Yp&&Vx())return Ag();if(!e)throw Pi.create("no-app",{appName:s});return e}function ca(s,e,n){let i=mN[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fa.warn(h.join(" "));return}No(new Vi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const vN="firebase-heartbeat-database",bN=1,iu="firebase-heartbeat-store";let bp=null;function qx(){return bp||(bp=LS(vN,bN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(iu)}catch(n){console.warn(n)}}}}).catch(s=>{throw Pi.create("idb-open",{originalErrorMessage:s.message})})),bp}async function xN(s){try{const n=(await qx()).transaction(iu),i=await n.objectStore(iu).get(Hx(s));return await n.done,i}catch(e){if(e instanceof ga)Fa.warn(e.message);else{const n=Pi.create("idb-get",{originalErrorMessage:e?.message});Fa.warn(n.message)}}}async function S1(s,e){try{const i=(await qx()).transaction(iu,"readwrite");await i.objectStore(iu).put(e,Hx(s)),await i.done}catch(n){if(n instanceof ga)Fa.warn(n.message);else{const i=Pi.create("idb-set",{originalErrorMessage:n?.message});Fa.warn(i.message)}}}function Hx(s){return`${s.name}!${s.options.appId}`}const wN=1024,_N=30;class kN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=N1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>_N){const l=EN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=N1(),{heartbeatsToSend:n,unsentEntries:i}=jN(this._heartbeatsCache.heartbeats),l=_d(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Fa.warn(e),""}}}function N1(){return new Date().toISOString().substring(0,10)}function jN(s,e=wN){const n=[];let i=s.slice();for(const l of s){const u=n.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),C1(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),C1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class TN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hS()?dS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return S1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return S1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function C1(s){return _d(JSON.stringify({version:2,heartbeats:s})).length}function EN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function SN(s){No(new Vi("platform-logger",e=>new BS(e),"PRIVATE")),No(new Vi("heartbeat",e=>new kN(e),"PRIVATE")),ca(Kp,T1,s),ca(Kp,T1,"esm2020"),ca("fire-js","")}SN("");function $x(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NN=$x,Wx=new xu("auth","Firebase",$x());const jd=new Cg("@firebase/auth");function CN(s,...e){jd.logLevel<=Xt.WARN&&jd.warn(`Auth (${Po}): ${s}`,...e)}function hd(s,...e){jd.logLevel<=Xt.ERROR&&jd.error(`Auth (${Po}): ${s}`,...e)}function zr(s,...e){throw Ig(s,...e)}function ua(s,...e){return Ig(s,...e)}function Gx(s,e,n){const i={...NN(),[e]:n};return new xu("auth","Firebase",i).create(e,{appName:s.name})}function Va(s){return Gx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ig(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return Wx.create(s,...e)}function _t(s,e,...n){if(!s)throw Ig(e,...n)}function Pa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw hd(e),new Error(e)}function qa(s,e){s||Pa(e)}function Xp(){return typeof self<"u"&&self.location?.href||""}function RN(){return R1()==="http:"||R1()==="https:"}function R1(){return typeof self<"u"&&self.location?.protocol||null}function AN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RN()||oS()||"connection"in navigator)?navigator.onLine:!0}function MN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,qa(n>e,"Short delay should be less than long delay!"),this.isMobile=rS()||lS()}get(){return AN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dg(s,e){qa(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Kx{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const IN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const DN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PN=new _u(3e4,6e4);function Ga(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ka(s,e,n,i,l={}){return Yx(s,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=wu({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return iS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&$i(s.emulatorConfig.host)&&(y.credentials="include"),Kx.fetch()(await Qx(s,s.config.apiHost,n,p),y)})}async function Yx(s,e,n){s._canInitEmulator=!1;const i={...IN,...e};try{const l=new ON(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Yh(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yh(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Yh(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Yh(s,"user-disabled",h);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Gx(s,w,y);zr(s,w)}}catch(l){if(l instanceof ga)throw l;zr(s,"network-request-failed",{message:String(l)})}}async function ku(s,e,n,i,l={}){const u=await Ka(s,e,n,i,l);return"mfaPendingCredential"in u&&zr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Qx(s,e,n,i){const l=`${e}${n}?${i}`,u=s,h=u.config.emulator?Dg(s.config,l):`${s.config.apiScheme}://${l}`;return DN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function LN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ON{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ua(this.auth,"network-request-failed")),PN.get())})}}function Yh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=ua(s,e,i);return l.customData._tokenResponse=n,l}function A1(s){return s!==void 0&&s.enterprise!==void 0}class VN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BN(s,e){return Ka(s,"GET","/v2/recaptchaConfig",Ga(s,e))}async function UN(s,e){return Ka(s,"POST","/v1/accounts:delete",e)}async function Td(s,e){return Ka(s,"POST","/v1/accounts:lookup",e)}function Zc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zN(s,e=!1){const n=Fn(s),i=await n.getIdToken(e),l=Pg(i);_t(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:Zc(xp(l.auth_time)),issuedAtTime:Zc(xp(l.iat)),expirationTime:Zc(xp(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function xp(s){return Number(s)*1e3}function Pg(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return hd("JWT malformed, contained fewer than 3 sections"),null;try{const l=Px(n);return l?JSON.parse(l):(hd("Failed to decode base64 JWT payload"),null)}catch(l){return hd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function M1(s){const e=Pg(s);return _t(e,"internal-error"),_t(typeof e.exp<"u","internal-error"),_t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ou(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ga&&FN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function FN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class qN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ed(s){const e=s.auth,n=await s.getIdToken(),i=await ou(s,Td(e,{idToken:n}));_t(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?Xx(l.providerUserInfo):[],h=$N(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!h?.length,y=p?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Jp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,w)}async function HN(s){const e=Fn(s);await Ed(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $N(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function Xx(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function WN(s,e){const n=await Yx(s,{},async()=>{const i=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,h=await Qx(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&$i(s.emulatorConfig.host)&&(g.credentials="include"),Kx.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GN(s,e){return Ka(s,"POST","/v2/accounts:revokeToken",Ga(s,e))}class Nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_t(e.idToken,"internal-error"),_t(typeof e.idToken<"u","internal-error"),_t(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):M1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_t(e.length!==0,"internal-error");const n=M1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await WN(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,h=new Nl;return i&&(_t(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(_t(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(_t(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nl,this.toJSON())}_performRefresh(){return Pa("not implemented")}}function ki(s,e){_t(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Br{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new qN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Jp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await ou(this,this.stsTokenManager.getToken(this.auth,e));return _t(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zN(this,e)}reload(){return HN(this)}_assign(e){this!==e&&(_t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ed(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Va(this.auth));const e=await this.getIdToken();return await ou(this,UN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,w=n.lastLoginAt??void 0,{uid:T,emailVerified:E,isAnonymous:O,providerData:W,stsTokenManager:z}=n;_t(T&&z,e,"internal-error");const V=Nl.fromJSON(this.name,z);_t(typeof T=="string",e,"internal-error"),ki(i,e.name),ki(l,e.name),_t(typeof E=="boolean",e,"internal-error"),_t(typeof O=="boolean",e,"internal-error"),ki(u,e.name),ki(h,e.name),ki(p,e.name),ki(g,e.name),ki(y,e.name),ki(w,e.name);const re=new Br({uid:T,auth:e,email:l,emailVerified:E,displayName:i,isAnonymous:O,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:V,createdAt:y,lastLoginAt:w});return W&&Array.isArray(W)&&(re.providerData=W.map(J=>({...J}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,n,i=!1){const l=new Nl;l.updateFromServerResponse(n);const u=new Br({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Ed(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];_t(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Xx(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,p=new Nl;p.updateFromIdToken(i);const g=new Br({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Jp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const I1=new Map;function La(s){qa(s instanceof Function,"Expected a class definition");let e=I1.get(s);return e?(qa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,I1.set(s,e),e)}class Jx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Jx.type="NONE";const D1=Jx;function dd(s,e,n){return`firebase:${s}:${e}:${n}`}class Cl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=dd(this.userKey,l.apiKey,u),this.fullPersistenceKey=dd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Td(this.auth,{idToken:e}).catch(()=>{});return n?Br._fromGetAccountInfoResponse(this.auth,n,e):null}return Br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Cl(La(D1),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||La(D1);const h=dd(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const w=await y._get(h);if(w){let T;if(typeof w=="string"){const E=await Td(e,{idToken:w}).catch(()=>{});if(!E)break;T=await Br._fromGetAccountInfoResponse(e,E,w)}else T=Br._fromJSON(e,w);y!==u&&(p=T),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Cl(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new Cl(u,e,i))}}function P1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rw(e))return"Blackberry";if(aw(e))return"Webos";if(ew(e))return"Safari";if((e.includes("chrome/")||tw(e))&&!e.includes("edge/"))return"Chrome";if(sw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Zx(s=Bs()){return/firefox\//i.test(s)}function ew(s=Bs()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tw(s=Bs()){return/crios\//i.test(s)}function nw(s=Bs()){return/iemobile/i.test(s)}function sw(s=Bs()){return/android/i.test(s)}function rw(s=Bs()){return/blackberry/i.test(s)}function aw(s=Bs()){return/webos/i.test(s)}function Lg(s=Bs()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function KN(s=Bs()){return Lg(s)&&!!window.navigator?.standalone}function YN(){return cS()&&document.documentMode===10}function iw(s=Bs()){return Lg(s)||sw(s)||aw(s)||rw(s)||/windows phone/i.test(s)||nw(s)}function ow(s,e=[]){let n;switch(s){case"Browser":n=P1(Bs());break;case"Worker":n=`${P1(Bs())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${i}`}class QN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function XN(s,e={}){return Ka(s,"GET","/v2/passwordPolicy",Ga(s,e))}const JN=6;class ZN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??JN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class e4{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L1(this),this.idTokenSubscription=new L1(this),this.beforeStateQueue=new QN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=La(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Cl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Td(this,{idToken:e}),i=await Br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(lr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ed(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Va(this));const n=e?Fn(e):null;return n&&_t(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Va(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(La(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XN(this),n=new ZN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await GN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&La(e)||this._popupRedirectResolver;_t(n,this,"argument-error"),this.redirectPersistenceManager=await Cl.create(this,[La(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,l);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ow(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&CN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Wi(s){return Fn(s)}class L1{constructor(e){this.auth=e,this.observer=null,this.addObserver=yS(n=>this.observer=n)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t4(s){$d=s}function lw(s){return $d.loadJS(s)}function n4(){return $d.recaptchaEnterpriseScript}function s4(){return $d.gapiScript}function r4(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class a4{constructor(){this.enterprise=new i4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class i4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const o4="recaptcha-enterprise",cw="NO_RECAPTCHA";class l4{constructor(e){this.type=o4,this.auth=Wi(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{BN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new VN(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,h,p){const g=window.grecaptcha;A1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(cw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new a4().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!n&&A1(window.grecaptcha))l(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=n4();g.length!==0&&(g+=p),lw(g).then(()=>{l(p,u,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function O1(s,e,n,i=!1,l=!1){const u=new l4(s);let h;if(l)h=cw;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Sd(s,e,n,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await O1(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await O1(s,e,n,n==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function c4(s,e){const n=Hd(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(So(u,e??{}))return l;zr(l,"already-initialized")}return n.initialize({options:e})}function u4(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(La);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function h4(s,e,n){const i=Wi(s);_t(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=uw(e),{host:h,port:p}=d4(e),g=p===null?"":`:${p}`,y={url:`${u}//${h}${g}/`},w=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){_t(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),_t(So(y,i.config.emulator)&&So(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,$i(h)?(Sg(`${u}//${h}${g}`),Ng("Auth",!0)):f4()}function uw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function d4(s){const e=uw(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:V1(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:V1(h)}}}function V1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function f4(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Og{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pa("not implemented")}_getIdTokenResponse(e){return Pa("not implemented")}_linkToIdToken(e,n){return Pa("not implemented")}_getReauthenticationResolver(e){return Pa("not implemented")}}async function m4(s,e){return Ka(s,"POST","/v1/accounts:signUp",e)}async function p4(s,e){return ku(s,"POST","/v1/accounts:signInWithPassword",Ga(s,e))}async function g4(s,e){return Ka(s,"POST","/v1/accounts:sendOobCode",Ga(s,e))}async function y4(s,e){return g4(s,e)}async function v4(s,e){return ku(s,"POST","/v1/accounts:signInWithEmailLink",Ga(s,e))}async function b4(s,e){return ku(s,"POST","/v1/accounts:signInWithEmailLink",Ga(s,e))}class lu extends Og{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new lu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new lu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sd(e,n,"signInWithPassword",p4);case"emailLink":return v4(e,{email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sd(e,i,"signUpPassword",m4);case"emailLink":return b4(e,{idToken:n,email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Rl(s,e){return ku(s,"POST","/v1/accounts:signInWithIdp",Ga(s,e))}const x4="http://localhost";class Co extends Og{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const h=new Co(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Rl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Rl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rl(e,n)}buildRequest(){const e={requestUri:x4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}function w4(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _4(s){const e=Wc(Gc(s)).link,n=e?Wc(Gc(e)).deep_link_id:null,i=Wc(Gc(s)).deep_link_id;return(i?Wc(Gc(i)).link:null)||i||n||e||s}class Vg{constructor(e){const n=Wc(Gc(e)),i=n.apiKey??null,l=n.oobCode??null,u=w4(n.mode??null);_t(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_4(e);try{return new Vg(n)}catch{return null}}}class $l{constructor(){this.providerId=$l.PROVIDER_ID}static credential(e,n){return lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Vg.parseLink(n);return _t(i,"argument-error"),lu._fromEmailAndCode(e,i.code,i.tenantId)}}$l.PROVIDER_ID="password";$l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class hw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ju extends hw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ei extends ju{constructor(){super("facebook.com")}static credential(e){return Co._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";class Si extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Co._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Si.credential(n,i)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";class Ni extends ju{constructor(){super("github.com")}static credential(e){return Co._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";class Ci extends ju{constructor(){super("twitter.com")}static credential(e,n){return Co._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ci.credential(n,i)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";async function k4(s,e){return ku(s,"POST","/v1/accounts:signUp",Ga(s,e))}class Ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await Br._fromIdTokenResponse(e,i,l),h=B1(i);return new Ro({user:u,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=B1(i);return new Ro({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function B1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Nd extends ga{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Nd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Nd(e,n,i,l)}}function dw(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Nd._fromErrorAndOperation(s,u,e,i):u})}async function j4(s,e,n=!1){const i=await ou(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Ro._forOperation(s,"link",i)}async function T4(s,e,n=!1){const{auth:i}=s;if(lr(i.app))return Promise.reject(Va(i));const l="reauthenticate";try{const u=await ou(s,dw(i,l,e,s),n);_t(u.idToken,i,"internal-error");const h=Pg(u.idToken);_t(h,i,"internal-error");const{sub:p}=h;return _t(s.uid===p,i,"user-mismatch"),Ro._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&zr(i,"user-mismatch"),u}}async function fw(s,e,n=!1){if(lr(s.app))return Promise.reject(Va(s));const i="signIn",l=await dw(s,i,e),u=await Ro._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(u.user),u}async function E4(s,e){return fw(Wi(s),e)}async function mw(s){const e=Wi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function S4(s,e,n){const i=Wi(s);await Sd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",y4)}async function FD(s,e,n){if(lr(s.app))return Promise.reject(Va(s));const i=Wi(s),h=await Sd(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",k4).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&mw(s),g}),p=await Ro._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function N4(s,e,n){return lr(s.app)?Promise.reject(Va(s)):E4(Fn(s),$l.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&mw(s),i})}function C4(s,e){return Fn(s).setPersistence(e)}function R4(s,e,n,i){return Fn(s).onIdTokenChanged(e,n,i)}function A4(s,e,n){return Fn(s).beforeAuthStateChanged(e,n)}function M4(s,e,n,i){return Fn(s).onAuthStateChanged(e,n,i)}function I4(s){return Fn(s).signOut()}const Cd="__sak";class pw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const D4=1e3,P4=10;class gw extends pw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);YN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,P4):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},D4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gw.type="LOCAL";const yw=gw;class vw extends pw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vw.type="SESSION";const Bg=vw;function L4(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new Wd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,h=this.handlersMap[l];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async y=>y(n.origin,u)),g=await L4(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wd.receivers=[];function Ug(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class O4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const y=Ug("",20);l.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(T){const E=T;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(E.data.response);break;default:clearTimeout(w),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ha(){return window}function V4(s){ha().location.href=s}function bw(){return typeof ha().WorkerGlobalScope<"u"&&typeof ha().importScripts=="function"}async function B4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U4(){return navigator?.serviceWorker?.controller||null}function z4(){return bw()?self:null}const xw="firebaseLocalStorageDb",F4=1,Rd="firebaseLocalStorage",ww="fbase_key";class Tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gd(s,e){return s.transaction([Rd],e?"readwrite":"readonly").objectStore(Rd)}function q4(){const s=indexedDB.deleteDatabase(xw);return new Tu(s).toPromise()}function Zp(){const s=indexedDB.open(xw,F4);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Rd,{keyPath:ww})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Rd)?e(i):(i.close(),await q4(),e(await Zp()))})})}async function U1(s,e,n){const i=Gd(s,!0).put({[ww]:e,value:n});return new Tu(i).toPromise()}async function H4(s,e){const n=Gd(s,!1).get(e),i=await new Tu(n).toPromise();return i===void 0?null:i.value}function z1(s,e){const n=Gd(s,!0).delete(e);return new Tu(n).toPromise()}const $4=800,W4=3;class _w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>W4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wd._getInstance(z4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await B4(),!this.activeServiceWorker)return;this.sender=new O4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||U4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zp();return await U1(e,Cd,"1"),await z1(e,Cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>U1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>H4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>z1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Gd(l,!1).getAll();return new Tu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_w.type="LOCAL";const G4=_w;new _u(3e4,6e4);function K4(s,e){return e?La(e):(_t(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class zg extends Og{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Y4(s){return fw(s.auth,new zg(s),s.bypassAuthState)}function Q4(s){const{auth:e,user:n}=s;return _t(n,e,"internal-error"),T4(n,new zg(s),s.bypassAuthState)}async function X4(s){const{auth:e,user:n}=s;return _t(n,e,"internal-error"),j4(n,new zg(s),s.bypassAuthState)}class kw{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y4;case"linkViaPopup":case"linkViaRedirect":return X4;case"reauthViaPopup":case"reauthViaRedirect":return Q4;default:zr(this.auth,"internal-error")}}resolve(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const J4=new _u(2e3,1e4);class Sl extends kw{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Sl.currentPopupAction&&Sl.currentPopupAction.cancel(),Sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _t(e,this.auth,"internal-error"),e}async onExecution(){qa(this.filter.length===1,"Popup operations only handle one event");const e=Ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,J4.get())};e()}}Sl.currentPopupAction=null;const Z4="pendingRedirect",fd=new Map;class eC extends kw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=fd.get(this.auth._key());if(!e){try{const i=await tC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}fd.set(this.auth._key(),e)}return this.bypassAuthState||fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tC(s,e){const n=rC(e),i=sC(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function nC(s,e){fd.set(s._key(),e)}function sC(s){return La(s._redirectPersistence)}function rC(s){return dd(Z4,s.config.apiKey,s.name)}async function aC(s,e,n=!1){if(lr(s.app))return Promise.reject(Va(s));const i=Wi(s),l=K4(i,e),h=await new eC(i,l,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const iC=600*1e3;class oC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!jw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ua(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iC&&this.cachedEventUids.clear(),this.cachedEventUids.has(F1(e))}saveEventToCache(e){this.cachedEventUids.add(F1(e)),this.lastProcessedEventTime=Date.now()}}function F1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function jw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function lC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jw(s);default:return!1}}async function cC(s,e={}){return Ka(s,"GET","/v1/projects",e)}const uC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hC=/^https?/;async function dC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await cC(s);for(const n of e)try{if(fC(n))return}catch{}zr(s,"unauthorized-domain")}function fC(s){const e=Xp(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!hC.test(n))return!1;if(uC.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const mC=new _u(3e4,6e4);function q1(){const s=ha().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function pC(s){return new Promise((e,n)=>{function i(){q1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q1(),n(ua(s,"network-request-failed"))},timeout:mC.get()})}if(ha().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ha().gapi?.load)i();else{const l=r4("iframefcb");return ha()[l]=()=>{gapi.load?i():n(ua(s,"network-request-failed"))},lw(`${s4()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw md=null,e})}let md=null;function gC(s){return md=md||pC(s),md}const yC=new _u(5e3,15e3),vC="__/auth/iframe",bC="emulator/auth/iframe",xC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _C(s){const e=s.config;_t(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Dg(e,bC):`https://${s.config.authDomain}/${vC}`,i={apiKey:e.apiKey,appName:s.name,v:Po},l=wC.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${wu(i).slice(1)}`}async function kC(s){const e=await gC(s),n=ha().gapi;return _t(n,s,"internal-error"),e.open({where:document.body,url:_C(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xC,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=ua(s,"network-request-failed"),p=ha().setTimeout(()=>{u(h)},yC.get());function g(){ha().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(h)})}))}const jC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TC=500,EC=600,SC="_blank",NC="http://localhost";class H1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CC(s,e,n,i=TC,l=EC){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...jC,width:i.toString(),height:l.toString(),top:u,left:h},y=Bs().toLowerCase();n&&(p=tw(y)?SC:n),Zx(y)&&(e=e||NC,g.scrollbars="yes");const w=Object.entries(g).reduce((E,[O,W])=>`${E}${O}=${W},`,"");if(KN(y)&&p!=="_self")return RC(e||"",p),new H1(null);const T=window.open(e||"",p,w);_t(T,s,"popup-blocked");try{T.focus()}catch{}return new H1(T)}function RC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const AC="__/auth/handler",MC="emulator/auth/handler",IC=encodeURIComponent("fac");async function $1(s,e,n,i,l,u){_t(s.config.authDomain,s,"auth-domain-config-required"),_t(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Po,eventId:l};if(e instanceof hw){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",gS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof ju){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await s._getAppCheckToken(),y=g?`#${IC}=${encodeURIComponent(g)}`:"";return`${DC(s)}?${wu(p).slice(1)}${y}`}function DC({config:s}){return s.emulator?Dg(s,MC):`https://${s.authDomain}/${AC}`}const wp="webStorageSupport";class PC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bg,this._completeRedirectFn=aC,this._overrideRedirectResult=nC}async _openPopup(e,n,i,l){qa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await $1(e,n,i,Xp(),l);return CC(e,u,Ug())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await $1(e,n,i,Xp(),l);return V4(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(qa(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await kC(e),i=new oC(e);return n.register("authEvent",l=>(_t(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wp,{type:wp},l=>{const u=l?.[0]?.[wp];u!==void 0&&n(!!u),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iw()||ew()||Lg()}}const LC=PC;var W1="@firebase/auth",G1="1.12.0";class OC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function VC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BC(s){No(new Vi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;_t(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ow(s)},y=new e4(i,l,u,g);return u4(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),No(new Vi("auth-internal",e=>{const n=Wi(e.getProvider("auth").getImmediate());return(i=>new OC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ca(W1,G1,VC(s)),ca(W1,G1,"esm2020")}const UC=300,zC=Bx("authIdTokenMaxAge")||UC;let K1=null;const FC=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>zC)return;const l=n?.token;K1!==l&&(K1=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Tw(s=Mg()){const e=Hd(s,"auth");if(e.isInitialized())return e.getImmediate();const n=c4(s,{popupRedirectResolver:LC,persistence:[G4,yw,Bg]}),i=Bx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=FC(u.toString());A4(n,h,()=>h(n.currentUser)),R4(n,p=>h(p))}}const l=Lx("auth");return l&&h4(n,`http://${l}`),n}function qC(){return document.getElementsByTagName("head")?.[0]??document}t4({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=ua("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",qC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BC("Browser");var Y1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Li,Ew;(function(){var s;function e(M,S){function A(){}A.prototype=S.prototype,M.F=S.prototype,M.prototype=new A,M.prototype.constructor=M,M.D=function(P,D,H){for(var I=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)I[ze-2]=arguments[ze];return S.prototype[D].apply(P,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,S,A){A||(A=0);const P=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)P[D]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(D=0;D<16;++D)P[D]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=M.g[0],A=M.g[1],D=M.g[2];let H=M.g[3],I;I=S+(H^A&(D^H))+P[0]+3614090360&4294967295,S=A+(I<<7&4294967295|I>>>25),I=H+(D^S&(A^D))+P[1]+3905402710&4294967295,H=S+(I<<12&4294967295|I>>>20),I=D+(A^H&(S^A))+P[2]+606105819&4294967295,D=H+(I<<17&4294967295|I>>>15),I=A+(S^D&(H^S))+P[3]+3250441966&4294967295,A=D+(I<<22&4294967295|I>>>10),I=S+(H^A&(D^H))+P[4]+4118548399&4294967295,S=A+(I<<7&4294967295|I>>>25),I=H+(D^S&(A^D))+P[5]+1200080426&4294967295,H=S+(I<<12&4294967295|I>>>20),I=D+(A^H&(S^A))+P[6]+2821735955&4294967295,D=H+(I<<17&4294967295|I>>>15),I=A+(S^D&(H^S))+P[7]+4249261313&4294967295,A=D+(I<<22&4294967295|I>>>10),I=S+(H^A&(D^H))+P[8]+1770035416&4294967295,S=A+(I<<7&4294967295|I>>>25),I=H+(D^S&(A^D))+P[9]+2336552879&4294967295,H=S+(I<<12&4294967295|I>>>20),I=D+(A^H&(S^A))+P[10]+4294925233&4294967295,D=H+(I<<17&4294967295|I>>>15),I=A+(S^D&(H^S))+P[11]+2304563134&4294967295,A=D+(I<<22&4294967295|I>>>10),I=S+(H^A&(D^H))+P[12]+1804603682&4294967295,S=A+(I<<7&4294967295|I>>>25),I=H+(D^S&(A^D))+P[13]+4254626195&4294967295,H=S+(I<<12&4294967295|I>>>20),I=D+(A^H&(S^A))+P[14]+2792965006&4294967295,D=H+(I<<17&4294967295|I>>>15),I=A+(S^D&(H^S))+P[15]+1236535329&4294967295,A=D+(I<<22&4294967295|I>>>10),I=S+(D^H&(A^D))+P[1]+4129170786&4294967295,S=A+(I<<5&4294967295|I>>>27),I=H+(A^D&(S^A))+P[6]+3225465664&4294967295,H=S+(I<<9&4294967295|I>>>23),I=D+(S^A&(H^S))+P[11]+643717713&4294967295,D=H+(I<<14&4294967295|I>>>18),I=A+(H^S&(D^H))+P[0]+3921069994&4294967295,A=D+(I<<20&4294967295|I>>>12),I=S+(D^H&(A^D))+P[5]+3593408605&4294967295,S=A+(I<<5&4294967295|I>>>27),I=H+(A^D&(S^A))+P[10]+38016083&4294967295,H=S+(I<<9&4294967295|I>>>23),I=D+(S^A&(H^S))+P[15]+3634488961&4294967295,D=H+(I<<14&4294967295|I>>>18),I=A+(H^S&(D^H))+P[4]+3889429448&4294967295,A=D+(I<<20&4294967295|I>>>12),I=S+(D^H&(A^D))+P[9]+568446438&4294967295,S=A+(I<<5&4294967295|I>>>27),I=H+(A^D&(S^A))+P[14]+3275163606&4294967295,H=S+(I<<9&4294967295|I>>>23),I=D+(S^A&(H^S))+P[3]+4107603335&4294967295,D=H+(I<<14&4294967295|I>>>18),I=A+(H^S&(D^H))+P[8]+1163531501&4294967295,A=D+(I<<20&4294967295|I>>>12),I=S+(D^H&(A^D))+P[13]+2850285829&4294967295,S=A+(I<<5&4294967295|I>>>27),I=H+(A^D&(S^A))+P[2]+4243563512&4294967295,H=S+(I<<9&4294967295|I>>>23),I=D+(S^A&(H^S))+P[7]+1735328473&4294967295,D=H+(I<<14&4294967295|I>>>18),I=A+(H^S&(D^H))+P[12]+2368359562&4294967295,A=D+(I<<20&4294967295|I>>>12),I=S+(A^D^H)+P[5]+4294588738&4294967295,S=A+(I<<4&4294967295|I>>>28),I=H+(S^A^D)+P[8]+2272392833&4294967295,H=S+(I<<11&4294967295|I>>>21),I=D+(H^S^A)+P[11]+1839030562&4294967295,D=H+(I<<16&4294967295|I>>>16),I=A+(D^H^S)+P[14]+4259657740&4294967295,A=D+(I<<23&4294967295|I>>>9),I=S+(A^D^H)+P[1]+2763975236&4294967295,S=A+(I<<4&4294967295|I>>>28),I=H+(S^A^D)+P[4]+1272893353&4294967295,H=S+(I<<11&4294967295|I>>>21),I=D+(H^S^A)+P[7]+4139469664&4294967295,D=H+(I<<16&4294967295|I>>>16),I=A+(D^H^S)+P[10]+3200236656&4294967295,A=D+(I<<23&4294967295|I>>>9),I=S+(A^D^H)+P[13]+681279174&4294967295,S=A+(I<<4&4294967295|I>>>28),I=H+(S^A^D)+P[0]+3936430074&4294967295,H=S+(I<<11&4294967295|I>>>21),I=D+(H^S^A)+P[3]+3572445317&4294967295,D=H+(I<<16&4294967295|I>>>16),I=A+(D^H^S)+P[6]+76029189&4294967295,A=D+(I<<23&4294967295|I>>>9),I=S+(A^D^H)+P[9]+3654602809&4294967295,S=A+(I<<4&4294967295|I>>>28),I=H+(S^A^D)+P[12]+3873151461&4294967295,H=S+(I<<11&4294967295|I>>>21),I=D+(H^S^A)+P[15]+530742520&4294967295,D=H+(I<<16&4294967295|I>>>16),I=A+(D^H^S)+P[2]+3299628645&4294967295,A=D+(I<<23&4294967295|I>>>9),I=S+(D^(A|~H))+P[0]+4096336452&4294967295,S=A+(I<<6&4294967295|I>>>26),I=H+(A^(S|~D))+P[7]+1126891415&4294967295,H=S+(I<<10&4294967295|I>>>22),I=D+(S^(H|~A))+P[14]+2878612391&4294967295,D=H+(I<<15&4294967295|I>>>17),I=A+(H^(D|~S))+P[5]+4237533241&4294967295,A=D+(I<<21&4294967295|I>>>11),I=S+(D^(A|~H))+P[12]+1700485571&4294967295,S=A+(I<<6&4294967295|I>>>26),I=H+(A^(S|~D))+P[3]+2399980690&4294967295,H=S+(I<<10&4294967295|I>>>22),I=D+(S^(H|~A))+P[10]+4293915773&4294967295,D=H+(I<<15&4294967295|I>>>17),I=A+(H^(D|~S))+P[1]+2240044497&4294967295,A=D+(I<<21&4294967295|I>>>11),I=S+(D^(A|~H))+P[8]+1873313359&4294967295,S=A+(I<<6&4294967295|I>>>26),I=H+(A^(S|~D))+P[15]+4264355552&4294967295,H=S+(I<<10&4294967295|I>>>22),I=D+(S^(H|~A))+P[6]+2734768916&4294967295,D=H+(I<<15&4294967295|I>>>17),I=A+(H^(D|~S))+P[13]+1309151649&4294967295,A=D+(I<<21&4294967295|I>>>11),I=S+(D^(A|~H))+P[4]+4149444226&4294967295,S=A+(I<<6&4294967295|I>>>26),I=H+(A^(S|~D))+P[11]+3174756917&4294967295,H=S+(I<<10&4294967295|I>>>22),I=D+(S^(H|~A))+P[2]+718787259&4294967295,D=H+(I<<15&4294967295|I>>>17),I=A+(H^(D|~S))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,M.g[2]=M.g[2]+D&4294967295,M.g[3]=M.g[3]+H&4294967295}i.prototype.v=function(M,S){S===void 0&&(S=M.length);const A=S-this.blockSize,P=this.C;let D=this.h,H=0;for(;H<S;){if(D==0)for(;H<=A;)l(this,M,H),H+=this.blockSize;if(typeof M=="string"){for(;H<S;)if(P[D++]=M.charCodeAt(H++),D==this.blockSize){l(this,P),D=0;break}}else for(;H<S;)if(P[D++]=M[H++],D==this.blockSize){l(this,P),D=0;break}}this.h=D,this.o+=S},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;S=this.o*8;for(var A=M.length-8;A<M.length;++A)M[A]=S&255,S/=256;for(this.v(M),M=Array(16),S=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)M[S++]=this.g[A]>>>P&255;return M};function u(M,S){var A=p;return Object.prototype.hasOwnProperty.call(A,M)?A[M]:A[M]=S(M)}function h(M,S){this.h=S;const A=[];let P=!0;for(let D=M.length-1;D>=0;D--){const H=M[D]|0;P&&H==S||(A[D]=H,P=!1)}this.g=A}var p={};function g(M){return-128<=M&&M<128?u(M,function(S){return new h([S|0],S<0?-1:0)}):new h([M|0],M<0?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return V(y(-M));const S=[];let A=1;for(let P=0;M>=A;P++)S[P]=M/A|0,A*=4294967296;return new h(S,0)}function w(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return V(w(M.substring(1),S));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(S,8));let P=T;for(let H=0;H<M.length;H+=8){var D=Math.min(8,M.length-H);const I=parseInt(M.substring(H,H+D),S);D<8?(D=y(Math.pow(S,D)),P=P.j(D).add(y(I))):(P=P.j(A),P=P.add(y(I)))}return P}var T=g(0),E=g(1),O=g(16777216);s=h.prototype,s.m=function(){if(z(this))return-V(this).m();let M=0,S=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);M+=(P>=0?P:4294967296+P)*S,S*=4294967296}return M},s.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(W(this))return"0";if(z(this))return"-"+V(this).toString(M);const S=y(Math.pow(M,6));var A=this;let P="";for(;;){const D=we(A,S).g;A=re(A,D.j(S));let H=((A.g.length>0?A.g[0]:A.h)>>>0).toString(M);if(A=D,W(A))return H+P;for(;H.length<6;)H="0"+H;P=H+P}},s.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function W(M){if(M.h!=0)return!1;for(let S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function z(M){return M.h==-1}s.l=function(M){return M=re(this,M),z(M)?-1:W(M)?0:1};function V(M){const S=M.g.length,A=[];for(let P=0;P<S;P++)A[P]=~M.g[P];return new h(A,~M.h).add(E)}s.abs=function(){return z(this)?V(this):this},s.add=function(M){const S=Math.max(this.g.length,M.g.length),A=[];let P=0;for(let D=0;D<=S;D++){let H=P+(this.i(D)&65535)+(M.i(D)&65535),I=(H>>>16)+(this.i(D)>>>16)+(M.i(D)>>>16);P=I>>>16,H&=65535,I&=65535,A[D]=I<<16|H}return new h(A,A[A.length-1]&-2147483648?-1:0)};function re(M,S){return M.add(V(S))}s.j=function(M){if(W(this)||W(M))return T;if(z(this))return z(M)?V(this).j(V(M)):V(V(this).j(M));if(z(M))return V(this.j(V(M)));if(this.l(O)<0&&M.l(O)<0)return y(this.m()*M.m());const S=this.g.length+M.g.length,A=[];for(var P=0;P<2*S;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<M.g.length;D++){const H=this.i(P)>>>16,I=this.i(P)&65535,ze=M.i(D)>>>16,pt=M.i(D)&65535;A[2*P+2*D]+=I*pt,J(A,2*P+2*D),A[2*P+2*D+1]+=H*pt,J(A,2*P+2*D+1),A[2*P+2*D+1]+=I*ze,J(A,2*P+2*D+1),A[2*P+2*D+2]+=H*ze,J(A,2*P+2*D+2)}for(M=0;M<S;M++)A[M]=A[2*M+1]<<16|A[2*M];for(M=S;M<2*S;M++)A[M]=0;return new h(A,0)};function J(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function ue(M,S){this.g=M,this.h=S}function we(M,S){if(W(S))throw Error("division by zero");if(W(M))return new ue(T,T);if(z(M))return S=we(V(M),S),new ue(V(S.g),V(S.h));if(z(S))return S=we(M,V(S)),new ue(V(S.g),S.h);if(M.g.length>30){if(z(M)||z(S))throw Error("slowDivide_ only works with positive integers.");for(var A=E,P=S;P.l(M)<=0;)A=Be(A),P=Be(P);var D=De(A,1),H=De(P,1);for(P=De(P,2),A=De(A,2);!W(P);){var I=H.add(P);I.l(M)<=0&&(D=D.add(A),H=I),P=De(P,1),A=De(A,1)}return S=re(M,D.j(S)),new ue(D,S)}for(D=T;M.l(S)>=0;){for(A=Math.max(1,Math.floor(M.m()/S.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),H=y(A),I=H.j(S);z(I)||I.l(M)>0;)A-=P,H=y(A),I=H.j(S);W(H)&&(H=E),D=D.add(H),M=re(M,I)}return new ue(D,M)}s.B=function(M){return we(this,M).h},s.and=function(M){const S=Math.max(this.g.length,M.g.length),A=[];for(let P=0;P<S;P++)A[P]=this.i(P)&M.i(P);return new h(A,this.h&M.h)},s.or=function(M){const S=Math.max(this.g.length,M.g.length),A=[];for(let P=0;P<S;P++)A[P]=this.i(P)|M.i(P);return new h(A,this.h|M.h)},s.xor=function(M){const S=Math.max(this.g.length,M.g.length),A=[];for(let P=0;P<S;P++)A[P]=this.i(P)^M.i(P);return new h(A,this.h^M.h)};function Be(M){const S=M.g.length+1,A=[];for(let P=0;P<S;P++)A[P]=M.i(P)<<1|M.i(P-1)>>>31;return new h(A,M.h)}function De(M,S){const A=S>>5;S%=32;const P=M.g.length-A,D=[];for(let H=0;H<P;H++)D[H]=S>0?M.i(H+A)>>>S|M.i(H+A+1)<<32-S:M.i(H+A);return new h(D,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Ew=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,Li=h}).apply(typeof Y1<"u"?Y1:typeof self<"u"?self:typeof window<"u"?window:{});var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Sw,Kc,Nw,pd,eg,Cw,Rw,Aw;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qh=="object"&&Qh];for(var v=0;v<d.length;++v){var k=d[v];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var i=n(this);function l(d,v){if(v)e:{var k=i;d=d.split(".");for(var R=0;R<d.length-1;R++){var te=d[R];if(!(te in k))break e;k=k[te]}d=d[d.length-1],R=k[d],v=v(R),v!=R&&v!=null&&e(k,d,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(v){var k=[],R;for(R in v)Object.prototype.hasOwnProperty.call(v,R)&&k.push([R,v[R]]);return k}});var u=u||{},h=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,k){return d.call.apply(d.bind,arguments)}function y(d,v,k){return y=g,y.apply(null,arguments)}function w(d,v){var k=Array.prototype.slice.call(arguments,1);return function(){var R=k.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function T(d,v){function k(){}k.prototype=v.prototype,d.Z=v.prototype,d.prototype=new k,d.prototype.constructor=d,d.Ob=function(R,te,de){for(var $e=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)$e[Ot-2]=arguments[Ot];return v.prototype[te].apply(R,$e)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function O(d){const v=d.length;if(v>0){const k=Array(v);for(let R=0;R<v;R++)k[R]=d[R];return k}return[]}function W(d,v){for(let R=1;R<arguments.length;R++){const te=arguments[R];var k=typeof te;if(k=k!="object"?k:te?Array.isArray(te)?"array":k:"null",k=="array"||k=="object"&&typeof te.length=="number"){k=d.length||0;const de=te.length||0;d.length=k+de;for(let $e=0;$e<de;$e++)d[k+$e]=te[$e]}else d.push(te)}}class z{constructor(v,k){this.i=v,this.j=k,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(d){h.setTimeout(()=>{throw d},0)}function re(){var d=M;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class J{constructor(){this.h=this.g=null}add(v,k){const R=ue.get();R.set(v,k),this.h?this.h.next=R:this.g=R,this.h=R}}var ue=new z(()=>new we,d=>d.reset());class we{constructor(){this.next=this.g=this.h=null}set(v,k){this.h=v,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,De=!1,M=new J,S=()=>{const d=Promise.resolve(void 0);Be=()=>{d.then(A)}};function A(){for(var d;d=re();){try{d.h.call(d.g)}catch(k){V(k)}var v=ue;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}De=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const k=()=>{};h.addEventListener("test",k,v),h.removeEventListener("test",k,v)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function ze(d,v){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}T(ze,D),ze.prototype.init=function(d,v){const k=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(k=="mouseover"?v=d.fromElement:k=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function Te(d,v,k,R,te){this.listener=d,this.proxy=null,this.src=v,this.type=k,this.capture=!!R,this.ha=te,this.key=++Q,this.da=this.fa=!1}function Le(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ce(d,v,k){for(const R in d)v.call(k,d[R],R,d)}function Oe(d,v){for(const k in d)v.call(void 0,d[k],k,d)}function C(d){const v={};for(const k in d)v[k]=d[k];return v}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(d,v){let k,R;for(let te=1;te<arguments.length;te++){R=arguments[te];for(k in R)d[k]=R[k];for(let de=0;de<U.length;de++)k=U[de],Object.prototype.hasOwnProperty.call(R,k)&&(d[k]=R[k])}}function pe(d){this.src=d,this.g={},this.h=0}pe.prototype.add=function(d,v,k,R,te){const de=d.toString();d=this.g[de],d||(d=this.g[de]=[],this.h++);const $e=Pe(d,v,R,te);return $e>-1?(v=d[$e],k||(v.fa=!1)):(v=new Te(v,this.src,de,!!R,te),v.fa=k,d.push(v)),v};function Ae(d,v){const k=v.type;if(k in d.g){var R=d.g[k],te=Array.prototype.indexOf.call(R,v,void 0),de;(de=te>=0)&&Array.prototype.splice.call(R,te,1),de&&(Le(v),d.g[k].length==0&&(delete d.g[k],d.h--))}}function Pe(d,v,k,R){for(let te=0;te<d.length;++te){const de=d[te];if(!de.da&&de.listener==v&&de.capture==!!k&&de.ha==R)return te}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),Fe={};function at(d,v,k,R,te){if(Array.isArray(v)){for(let de=0;de<v.length;de++)at(d,v[de],k,R,te);return null}return k=wt(k),d&&d[pt]?d.J(v,k,p(R)?!!R.capture:!1,te):Dt(d,v,k,!1,R,te)}function Dt(d,v,k,R,te,de){if(!v)throw Error("Invalid event type");const $e=p(te)?!!te.capture:!!te;let Ot=Ct(d);if(Ot||(d[Qe]=Ot=new pe(d)),k=Ot.add(v,k,R,$e,de),k.proxy)return k;if(R=Wt(),k.proxy=R,R.src=d,R.listener=k,d.addEventListener)H||(te=$e),te===void 0&&(te=!1),d.addEventListener(v.toString(),R,te);else if(d.attachEvent)d.attachEvent(oe(v.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Wt(){function d(k){return v.call(d.src,d.listener,k)}const v=an;return d}function lt(d,v,k,R,te){if(Array.isArray(v))for(var de=0;de<v.length;de++)lt(d,v[de],k,R,te);else R=p(R)?!!R.capture:!!R,k=wt(k),d&&d[pt]?(d=d.i,de=String(v).toString(),de in d.g&&(v=d.g[de],k=Pe(v,k,R,te),k>-1&&(Le(v[k]),Array.prototype.splice.call(v,k,1),v.length==0&&(delete d.g[de],d.h--)))):d&&(d=Ct(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Pe(v,k,R,te)),(k=d>-1?v[d]:null)&&dt(k))}function dt(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[pt])Ae(v.i,d);else{var k=d.type,R=d.proxy;v.removeEventListener?v.removeEventListener(k,R,d.capture):v.detachEvent?v.detachEvent(oe(k),R):v.addListener&&v.removeListener&&v.removeListener(R),(k=Ct(v))?(Ae(k,d),k.h==0&&(k.src=null,v[Qe]=null)):Le(d)}}}function oe(d){return d in Fe?Fe[d]:Fe[d]="on"+d}function an(d,v){if(d.da)d=!0;else{v=new ze(v,this);const k=d.listener,R=d.ha||d.src;d.fa&&dt(d),d=k.call(R,v)}return d}function Ct(d){return d=d[Qe],d instanceof pe?d:null}var bt="__closure_events_fn_"+(Math.random()*1e9>>>0);function wt(d){return typeof d=="function"?d:(d[bt]||(d[bt]=function(v){return d.handleEvent(v)}),d[bt])}function ct(){P.call(this),this.i=new pe(this),this.M=this,this.G=null}T(ct,P),ct.prototype[pt]=!0,ct.prototype.removeEventListener=function(d,v,k,R){lt(this,d,v,k,R)};function Xe(d,v){var k,R=d.G;if(R)for(k=[];R;R=R.G)k.push(R);if(d=d.M,R=v.type||v,typeof v=="string")v=new D(v,d);else if(v instanceof D)v.target=v.target||d;else{var te=v;v=new D(R,d),le(v,te)}te=!0;let de,$e;if(k)for($e=k.length-1;$e>=0;$e--)de=v.g=k[$e],te=qt(de,R,!0,v)&&te;if(de=v.g=d,te=qt(de,R,!0,v)&&te,te=qt(de,R,!1,v)&&te,k)for($e=0;$e<k.length;$e++)de=v.g=k[$e],te=qt(de,R,!1,v)&&te}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const k=d.g[v];for(let R=0;R<k.length;R++)Le(k[R]);delete d.g[v],d.h--}}this.G=null},ct.prototype.J=function(d,v,k,R){return this.i.add(String(d),v,!1,k,R)},ct.prototype.K=function(d,v,k,R){return this.i.add(String(d),v,!0,k,R)};function qt(d,v,k,R){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let te=!0;for(let de=0;de<v.length;++de){const $e=v[de];if($e&&!$e.da&&$e.capture==k){const Ot=$e.listener,Zn=$e.ha||$e.src;$e.fa&&Ae(d.i,$e),te=Ot.call(Zn,R)!==!1&&te}}return te&&!R.defaultPrevented}function Wn(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(d,v||0)}function Et(d){d.g=Wn(()=>{d.g=null,d.i&&(d.i=!1,Et(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class At extends P{constructor(v,k){super(),this.m=v,this.l=k,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(d){P.call(this),this.h=d,this.g={}}T(Nn,P);var jt=[];function ln(d){ce(d.g,function(v,k){this.g.hasOwnProperty(k)&&dt(v)},d),d.g={}}Nn.prototype.N=function(){Nn.Z.N.call(this),ln(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var B=h.JSON.stringify,ee=h.JSON.parse,ve=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function Ue(){}function Ke(){}var Ve={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ye(){D.call(this,"d")}T(Ye,D);function He(){D.call(this,"c")}T(He,D);var qe={},St=null;function Gt(){return St=St||new ct}qe.Ia="serverreachability";function Lt(d){D.call(this,qe.Ia,d)}T(Lt,D);function on(d){const v=Gt();Xe(v,new Lt(v))}qe.STAT_EVENT="statevent";function Cn(d,v){D.call(this,qe.STAT_EVENT,d),this.stat=v}T(Cn,D);function Tt(d){const v=Gt();Xe(v,new Cn(v,d))}qe.Ja="timingevent";function Nt(d,v){D.call(this,qe.Ja,d),this.size=v}T(Nt,D);function Kt(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function hn(){this.g=!0}hn.prototype.ua=function(){this.g=!1};function Jn(d,v,k,R,te,de){d.info(function(){if(d.g)if(de){var $e="",Ot=de.split("&");for(let dn=0;dn<Ot.length;dn++){var Zn=Ot[dn].split("=");if(Zn.length>1){const Vn=Zn[0];Zn=Zn[1];const pr=Vn.split("_");$e=pr.length>=2&&pr[1]=="type"?$e+(Vn+"="+Zn+"&"):$e+(Vn+"=redacted&")}}}else $e=null;else $e=de;return"XMLHTTP REQ ("+R+") [attempt "+te+"]: "+v+`
`+k+`
`+$e})}function qn(d,v,k,R,te,de,$e){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+te+"]: "+v+`
`+k+`
`+de+" "+$e})}function yn(d,v,k,R){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+rs(d,k)+(R?" "+R:"")})}function Ln(d,v){d.info(function(){return"TIMEOUT: "+v})}hn.prototype.info=function(){};function rs(d,v){if(!d.g)return v;if(!v)return null;try{const de=JSON.parse(v);if(de){for(d=0;d<de.length;d++)if(Array.isArray(de[d])){var k=de[d];if(!(k.length<2)){var R=k[1];if(Array.isArray(R)&&!(R.length<1)){var te=R[0];if(te!="noop"&&te!="stop"&&te!="close")for(let $e=1;$e<R.length;$e++)R[$e]=""}}}}return B(de)}catch{return v}}var vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},As;function G(){}T(G,Ue),G.prototype.g=function(){return new XMLHttpRequest},As=new G;function ye(d){return encodeURIComponent(String(d))}function Ee(d){var v=1;d=d.split(":");const k=[];for(;v>0&&d.length;)k.push(d.shift()),v--;return d.length&&k.push(d.join(":")),k}function ke(d,v,k,R){this.j=d,this.i=v,this.l=k,this.S=R||1,this.V=new Nn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new me}function me(){this.i=null,this.g="",this.h=!1}var nt={},ft={};function rt(d,v,k){d.M=1,d.A=Bt(ge(v)),d.u=k,d.R=!0,vt(d,null)}function vt(d,v){d.F=Date.now(),as(d),d.B=ge(d.A);var k=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),Hn(k.i,"t",R),d.C=0,k=d.j.L,d.h=new me,d.g=zu(d.j,k?v:null,!d.u),d.P>0&&(d.O=new At(y(d.Y,d,d.g),d.P)),v=d.V,k=d.g,R=d.ba;var te="readystatechange";Array.isArray(te)||(te&&(jt[0]=te.toString()),te=jt);for(let de=0;de<te.length;de++){const $e=at(k,te[de],R||v.handleEvent,!1,v.h||v);if(!$e)break;v.g[$e.key]=$e}v=d.J?C(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),on(),Jn(d.i,d.v,d.B,d.l,d.S,d.u)}ke.prototype.ba=function(d){d=d.target;const v=this.O;v&&Rr(d)==3?v.j():this.Y(d)},ke.prototype.Y=function(d){try{if(d==this.g)e:{const Ot=Rr(this.g),Zn=this.g.ya(),dn=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||_s(this.g)))){this.K||Ot!=4||Zn==7||(Zn==8||dn<=0?on(3):on(2)),En(this);var v=this.g.ca();this.X=v;var k=mt(this);if(this.o=v==200,qn(this.i,this.v,this.B,this.l,this.S,Ot,v),this.o){if(this.U&&!this.L){t:{if(this.g){var R,te=this.g;if((R=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(R)){var de=R;break t}}de=null}if(d=de)yn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,b(this,d);else{this.o=!1,this.m=3,Tt(12),he(this),$(this);break e}}if(this.R){d=!0;let Vn;for(;!this.K&&this.C<k.length;)if(Vn=Ms(this,k),Vn==ft){Ot==4&&(this.m=4,Tt(14),d=!1),yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==nt){this.m=4,Tt(15),yn(this.i,this.l,k,"[Invalid Chunk]"),d=!1;break}else yn(this.i,this.l,Vn,null),b(this,Vn);if(en(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||k.length!=0||this.h.h||(this.m=1,Tt(16),d=!1),this.o=this.o&&d,!d)yn(this.i,this.l,k,"[Invalid Chunked Response]"),he(this),$(this);else if(k.length>0&&!this.W){this.W=!0;var $e=this.j;$e.g==this&&$e.aa&&!$e.P&&($e.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),nc($e),$e.P=!0,Tt(11))}}else yn(this.i,this.l,k,null),b(this,k);Ot==4&&he(this),this.o&&!this.K&&(Ot==4?Ou(this.j,this):(this.o=!1,as(this)))}else va(this.g),v==400&&k.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),he(this),$(this)}}}catch{}};function mt(d){if(!en(d))return d.g.la();const v=_s(d.g);if(v==="")return"";let k="";const R=v.length,te=Rr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return he(d),$(d),"";d.h.i=new h.TextDecoder}for(let de=0;de<R;de++)d.h.h=!0,k+=d.h.i.decode(v[de],{stream:!(te&&de==R-1)});return v.length=0,d.h.g+=k,d.C=0,d.h.g}function en(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Ms(d,v){var k=d.C,R=v.indexOf(`
`,k);return R==-1?ft:(k=Number(v.substring(k,R)),isNaN(k)?nt:(R+=1,R+k>v.length?ft:(v=v.slice(R,R+k),d.C=R+k,v)))}ke.prototype.cancel=function(){this.K=!0,he(this)};function as(d){d.T=Date.now()+d.H,bs(d,d.H)}function bs(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Kt(y(d.aa,d),v)}function En(d){d.D&&(h.clearTimeout(d.D),d.D=null)}ke.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ln(this.i,this.B),this.M!=2&&(on(),Tt(17)),he(this),this.m=2,$(this)):bs(this,this.T-d)};function $(d){d.j.I==0||d.K||Ou(d.j,d)}function he(d){En(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,ln(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function b(d,v){try{var k=d.j;if(k.I!=0&&(k.g==d||be(k.h,d))){if(!d.L&&be(k.h,d)&&k.I==3){try{var R=k.Ba.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var te=R;if(te[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<d.F)Fo(k),Za(k);else break e;to(k),Tt(18)}}else k.xa=te[1],0<k.xa-k.K&&te[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Kt(y(k.Va,k),6e3));Ie(k.h)<=1&&k.ta&&(k.ta=void 0)}else Zr(k,11)}else if((d.L||k.g==d)&&Fo(k),!I(v))for(te=k.Ba.g.parse(v),v=0;v<te.length;v++){let dn=te[v];const Vn=dn[0];if(!(Vn<=k.K))if(k.K=Vn,dn=dn[1],k.I==2)if(dn[0]=="c"){k.M=dn[1],k.ba=dn[2];const pr=dn[3];pr!=null&&(k.ka=pr,k.j.info("VER="+k.ka));const ea=dn[4];ea!=null&&(k.za=ea,k.j.info("SVER="+k.za));const Ar=dn[5];Ar!=null&&typeof Ar=="number"&&Ar>0&&(R=1.5*Ar,k.O=R,k.j.info("backChannelRequestTimeoutMs_="+R)),R=k;const Mr=d.g;if(Mr){const no=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(no){var de=R.h;de.g||no.indexOf("spdy")==-1&&no.indexOf("quic")==-1&&no.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(je(de,de.h),de.h=null))}if(R.G){const qo=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(R.wa=qo,Je(R.J,R.G,qo))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-d.F,k.j.info("Handshake RTT: "+k.T+"ms")),R=k;var $e=d;if(R.na=Uu(R,R.L?R.ba:null,R.W),$e.L){tt(R.h,$e);var Ot=$e,Zn=R.O;Zn&&(Ot.H=Zn),Ot.D&&(En(Ot),as(Ot)),R.g=$e}else Pu(R);k.i.length>0&&Jr(k)}else dn[0]!="stop"&&dn[0]!="close"||Zr(k,7);else k.I==3&&(dn[0]=="stop"||dn[0]=="close"?dn[0]=="stop"?Zr(k,7):ec(k):dn[0]!="noop"&&k.l&&k.l.qa(dn),k.A=0)}}on(4)}catch{}}var j=class{constructor(d,v){this.g=d,this.map=v}};function L(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Y(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ie(d){return d.h?1:d.g?d.g.size:0}function be(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function je(d,v){d.g?d.g.add(v):d.h=v}function tt(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}L.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function et(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const k of d.g.values())v=v.concat(k.G);return v}return O(d.i)}var q=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Z(d,v){if(d){d=d.split("&");for(let k=0;k<d.length;k++){const R=d[k].indexOf("=");let te,de=null;R>=0?(te=d[k].substring(0,R),de=d[k].substring(R+1)):te=d[k],v(te,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function ne(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof ne?(this.l=d.l,Ce(this,d.j),this.o=d.o,this.g=d.g,We(this,d.u),this.h=d.h,it(this,Kr(d.i)),this.m=d.m):d&&(v=String(d).match(q))?(this.l=!1,Ce(this,v[1]||"",!0),this.o=vn(v[2]||""),this.g=vn(v[3]||"",!0),We(this,v[4]),this.h=vn(v[5]||"",!0),it(this,v[6]||"",!0),this.m=vn(v[7]||"")):(this.l=!1,this.i=new Rn(null,this.l))}ne.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(zt(v,Zs,!0),":");var k=this.g;return(k||v=="file")&&(d.push("//"),(v=this.o)&&d.push(zt(v,Zs,!0),"@"),d.push(ye(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&d.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&d.push("/"),d.push(zt(k,k.charAt(0)=="/"?ms:is,!0))),(k=this.i.toString())&&d.push("?",k),(k=this.m)&&d.push("#",zt(k,Ft)),d.join("")},ne.prototype.resolve=function(d){const v=ge(this);let k=!!d.j;k?Ce(v,d.j):k=!!d.o,k?v.o=d.o:k=!!d.g,k?v.g=d.g:k=d.u!=null;var R=d.h;if(k)We(v,d.u);else if(k=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var te=v.h.lastIndexOf("/");te!=-1&&(R=v.h.slice(0,te+1)+R)}if(te=R,te==".."||te==".")R="";else if(te.indexOf("./")!=-1||te.indexOf("/.")!=-1){R=te.lastIndexOf("/",0)==0,te=te.split("/");const de=[];for(let $e=0;$e<te.length;){const Ot=te[$e++];Ot=="."?R&&$e==te.length&&de.push(""):Ot==".."?((de.length>1||de.length==1&&de[0]!="")&&de.pop(),R&&$e==te.length&&de.push("")):(de.push(Ot),R=!0)}R=de.join("/")}else R=te}return k?v.h=R:k=d.i.toString()!=="",k?it(v,Kr(d.i)):k=!!d.m,k&&(v.m=d.m),v};function ge(d){return new ne(d)}function Ce(d,v,k){d.j=k?vn(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function We(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function it(d,v,k){v instanceof Rn?(d.i=v,Ya(d.i,d.l)):(k||(v=zt(v,ps)),d.i=new Rn(v,d.l))}function Je(d,v,k){d.i.set(v,k)}function Bt(d){return Je(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function vn(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function zt(d,v,k){return typeof d=="string"?(d=encodeURI(d).replace(v,pn),k&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function pn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Zs=/[#\/\?@]/g,is=/[#\?:]/g,ms=/[#\?]/g,ps=/[#\?@]/g,Ft=/#/g;function Rn(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function In(d){d.g||(d.g=new Map,d.h=0,d.i&&Z(d.i,function(v,k){d.add(decodeURIComponent(v.replace(/\+/g," ")),k)}))}s=Rn.prototype,s.add=function(d,v){In(this),this.i=null,d=Nr(this,d);let k=this.g.get(d);return k||this.g.set(d,k=[]),k.push(v),this.h+=1,this};function er(d,v){In(d),v=Nr(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Is(d,v){return In(d),v=Nr(d,v),d.g.has(v)}s.forEach=function(d,v){In(this),this.g.forEach(function(k,R){k.forEach(function(te){d.call(v,te,R,this)},this)},this)};function On(d,v){In(d);let k=[];if(typeof v=="string")Is(d,v)&&(k=k.concat(d.g.get(Nr(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)k=k.concat(d[v]);return k}s.set=function(d,v){return In(this),this.i=null,d=Nr(this,d),Is(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=On(this,d),d.length>0?String(d[0]):v):v};function Hn(d,v,k){er(d,v),k.length>0&&(d.i=null,d.g.set(Nr(d,v),O(k)),d.h+=k.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let R=0;R<v.length;R++){var k=v[R];const te=ye(k);k=On(this,k);for(let de=0;de<k.length;de++){let $e=te;k[de]!==""&&($e+="="+ye(k[de])),d.push($e)}}return this.i=d.join("&")};function Kr(d){const v=new Rn;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Nr(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Ya(d,v){v&&!d.j&&(In(d),d.i=null,d.g.forEach(function(k,R){const te=R.toLowerCase();R!=te&&(er(this,R),Hn(this,te,k))},d)),d.j=v}function Us(d,v){const k=new hn;if(h.Image){const R=new Image;R.onload=w(fr,k,"TestLoadImage: loaded",!0,v,R),R.onerror=w(fr,k,"TestLoadImage: error",!1,v,R),R.onabort=w(fr,k,"TestLoadImage: abort",!1,v,R),R.ontimeout=w(fr,k,"TestLoadImage: timeout",!1,v,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else v(!1)}function Xl(d,v){const k=new hn,R=new AbortController,te=setTimeout(()=>{R.abort(),fr(k,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:R.signal}).then(de=>{clearTimeout(te),de.ok?fr(k,"TestPingServer: ok",!0,v):fr(k,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(te),fr(k,"TestPingServer: error",!1,v)})}function fr(d,v,k,R,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),R(k)}catch{}}function Qa(){this.g=new ve}function Yr(d){this.i=d.Sb||null,this.h=d.ab||!1}T(Yr,Ue),Yr.prototype.g=function(){return new Qi(this.i,this.h)};function Qi(d,v){ct.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Qi,ct),s=Qi.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Cr(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xa(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Cr(this)),this.g&&(this.readyState=3,Cr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Xa(this):Cr(this),this.readyState==3&&Bo(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Xa(this))},s.Na=function(d){this.g&&(this.response=d,Xa(this))},s.ga=function(){this.g&&Xa(this)};function Xa(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Cr(d)}s.setRequestHeader=function(d,v){this.A.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var k=v.next();!k.done;)k=k.value,d.push(k[0]+": "+k[1]),k=v.next();return d.join(`\r
`)};function Cr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function mr(d){let v="";return ce(d,function(k,R){v+=R,v+=":",v+=k,v+=`\r
`}),v}function Xi(d,v,k){e:{for(R in k){var R=!1;break e}R=!0}R||(k=mr(k),typeof d=="string"?k!=null&&ye(k):Je(d,v,k))}function _n(d){ct.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(_n,ct);var Qr=/^https?$/i,Jl=["POST","PUT"];s=_n.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,v,k,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():As.g(),this.g.onreadystatechange=E(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(de){Ji(this,de);return}if(d=k||"",k=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var te in R)k.set(te,R[te]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const de of R.keys())k.set(de,R.get(de));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(k.keys()).find(de=>de.toLowerCase()=="content-type"),te=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Jl,v,void 0)>=0)||R||te||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,$e]of k)this.g.setRequestHeader(de,$e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(de){Ji(this,de)}};function Ji(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Zl(d),ya(d)}function Zl(d){d.A||(d.A=!0,Xe(d,"complete"),Xe(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Xe(this,"complete"),Xe(this,"abort"),ya(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ya(this,!0)),_n.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Zi(this):this.Xa())},s.Xa=function(){Zi(this)};function Zi(d){if(d.h&&typeof u<"u"){if(d.v&&Rr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Xe(d,"readystatechange"),Rr(d)==4){d.h=!1;try{const de=d.ca();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var k;if(!(k=v)){var R;if(R=de===0){let $e=String(d.D).match(q)[1]||null;!$e&&h.self&&h.self.location&&($e=h.self.location.protocol.slice(0,-1)),R=!Qr.test($e?$e.toLowerCase():"")}k=R}if(k)Xe(d,"complete"),Xe(d,"success");else{d.o=6;try{var te=Rr(d)>2?d.g.statusText:""}catch{te=""}d.l=te+" ["+d.ca()+"]",Zl(d)}}finally{ya(d)}}}}function ya(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const k=d.g;d.g=null,v||Xe(d,"ready");try{k.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Rr(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Rr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),ee(v)}};function _s(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function va(d){const v={};d=(d.g&&Rr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(I(d[R]))continue;var k=Ee(d[R]);const te=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const de=v[te]||[];v[te]=de,de.push(k)}Oe(v,function(R){return R.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xr(d,v,k){return k&&k.internalChannelParams&&k.internalChannelParams[d]||v}function Ja(d){this.za=0,this.i=[],this.j=new hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xr("baseRetryDelayMs",5e3,d),this.Za=Xr("retryDelaySeedMs",1e4,d),this.Ta=Xr("forwardChannelMaxRetries",2,d),this.va=Xr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new L(d&&d.concurrentRequestLimit),this.Ba=new Qa,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ja.prototype,s.ka=8,s.I=1,s.connect=function(d,v,k,R){Tt(0),this.W=d,this.H=v||{},k&&R!==void 0&&(this.H.OSID=k,this.H.OAID=R),this.F=this.X,this.J=Uu(this,null,this.W),Jr(this)};function ec(d){if(Uo(d),d.I==3){var v=d.V++,k=ge(d.J);if(Je(k,"SID",d.M),Je(k,"RID",v),Je(k,"TYPE","terminate"),eo(d,k),v=new ke(d,d.j,v),v.M=2,v.A=Bt(ge(k)),k=!1,h.navigator&&h.navigator.sendBeacon)try{k=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!k&&h.Image&&(new Image().src=v.A,k=!0),k||(v.g=zu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),as(v)}Bu(d)}function Za(d){d.g&&(nc(d),d.g.cancel(),d.g=null)}function Uo(d){Za(d),d.v&&(h.clearTimeout(d.v),d.v=null),Fo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Jr(d){if(!Y(d.h)&&!d.m){d.m=!0;var v=d.Ea;Be||S(),De||(Be(),De=!0),M.add(v,d),d.D=0}}function zo(d,v){return Ie(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Kt(y(d.Ea,d,v),Vu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const te=new ke(this,this.j,d);let de=this.o;if(this.U&&(de?(de=C(de),le(de,this.U)):de=this.U),this.u!==null||this.R||(te.J=de,de=null),this.S)e:{for(var v=0,k=0;k<this.i.length;k++){t:{var R=this.i[k];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(v+=R,v>4096){v=k;break e}if(v===4096||k===this.i.length-1){v=k+1;break e}}v=1e3}else v=1e3;v=Du(this,te,v),k=ge(this.J),Je(k,"RID",d),Je(k,"CVER",22),this.G&&Je(k,"X-HTTP-Session-Id",this.G),eo(this,k),de&&(this.R?v="headers="+ye(mr(de))+"&"+v:this.u&&Xi(k,this.u,de)),je(this.h,te),this.Ra&&Je(k,"TYPE","init"),this.S?(Je(k,"$req",v),Je(k,"SID","null"),te.U=!0,rt(te,k,null)):rt(te,k,v),this.I=2}}else this.I==3&&(d?tc(this,d):this.i.length==0||Y(this.h)||tc(this))};function tc(d,v){var k;v?k=v.l:k=d.V++;const R=ge(d.J);Je(R,"SID",d.M),Je(R,"RID",k),Je(R,"AID",d.K),eo(d,R),d.u&&d.o&&Xi(R,d.u,d.o),k=new ke(d,d.j,k,d.D+1),d.u===null&&(k.J=d.o),v&&(d.i=v.G.concat(d.i)),v=Du(d,k,1e3),k.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),je(d.h,k),rt(k,R,v)}function eo(d,v){d.H&&ce(d.H,function(k,R){Je(v,R,k)}),d.l&&ce({},function(k,R){Je(v,R,k)})}function Du(d,v,k){k=Math.min(d.i.length,k);const R=d.l?y(d.l.Ka,d.l,d):null;e:{var te=d.i;let Ot=-1;for(;;){const Zn=["count="+k];Ot==-1?k>0?(Ot=te[0].g,Zn.push("ofs="+Ot)):Ot=0:Zn.push("ofs="+Ot);let dn=!0;for(let Vn=0;Vn<k;Vn++){var de=te[Vn].g;const pr=te[Vn].map;if(de-=Ot,de<0)Ot=Math.max(0,te[Vn].g-100),dn=!1;else try{de="req"+de+"_"||"";try{var $e=pr instanceof Map?pr:Object.entries(pr);for(const[ea,Ar]of $e){let Mr=Ar;p(Ar)&&(Mr=B(Ar)),Zn.push(de+ea+"="+encodeURIComponent(Mr))}}catch(ea){throw Zn.push(de+"type="+encodeURIComponent("_badmap")),ea}}catch{R&&R(pr)}}if(dn){$e=Zn.join("&");break e}}$e=void 0}return d=d.i.splice(0,k),v.G=d,$e}function Pu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;Be||S(),De||(Be(),De=!0),M.add(v,d),d.A=0}}function to(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Kt(y(d.Da,d),Vu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Kt(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Za(this),Lu(this))};function nc(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Lu(d){d.g=new ke(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=ge(d.na);Je(v,"RID","rpc"),Je(v,"SID",d.M),Je(v,"AID",d.K),Je(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&Je(v,"TO",d.ia),Je(v,"TYPE","xmlhttp"),eo(d,v),d.u&&d.o&&Xi(v,d.u,d.o),d.O&&(d.g.H=d.O);var k=d.g;d=d.ba,k.M=1,k.A=Bt(ge(v)),k.u=null,k.R=!0,vt(k,d)}s.Va=function(){this.C!=null&&(this.C=null,Za(this),to(this),Tt(19))};function Fo(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Ou(d,v){var k=null;if(d.g==v){Fo(d),nc(d),d.g=null;var R=2}else if(be(d.h,v))k=v.G,tt(d.h,v),R=1;else return;if(d.I!=0){if(v.o)if(R==1){k=v.u?v.u.length:0,v=Date.now()-v.F;var te=d.D;R=Gt(),Xe(R,new Nt(R,k)),Jr(d)}else Pu(d);else if(te=v.m,te==3||te==0&&v.X>0||!(R==1&&zo(d,v)||R==2&&to(d)))switch(k&&k.length>0&&(v=d.h,v.i=v.i.concat(k)),te){case 1:Zr(d,5);break;case 4:Zr(d,10);break;case 3:Zr(d,6);break;default:Zr(d,2)}}}function Vu(d,v){let k=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(k*=2),k*v}function Zr(d,v){if(d.j.info("Error code "+v),v==2){var k=y(d.bb,d),R=d.Ua;const te=!R;R=new ne(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ce(R,"https"),Bt(R),te?Us(R.toString(),k):Xl(R.toString(),k)}else Tt(2);d.I=0,d.l&&d.l.pa(v),Bu(d),Uo(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Bu(d){if(d.I=0,d.ja=[],d.l){const v=et(d.h);(v.length!=0||d.i.length!=0)&&(W(d.ja,v),W(d.ja,d.i),d.h.i.length=0,O(d.i),d.i.length=0),d.l.oa()}}function Uu(d,v,k){var R=k instanceof ne?ge(k):new ne(k);if(R.g!="")v&&(R.g=v+"."+R.g),We(R,R.u);else{var te=h.location;R=te.protocol,v=v?v+"."+te.hostname:te.hostname,te=+te.port;const de=new ne(null);R&&Ce(de,R),v&&(de.g=v),te&&We(de,te),k&&(de.h=k),R=de}return k=d.G,v=d.wa,k&&v&&Je(R,k,v),Je(R,"VER",d.ka),eo(d,R),R}function zu(d,v,k){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new _n(new Yr({ab:k})):new _n(d.ma),v.Fa(d.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}s=Fu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ei(){}ei.prototype.g=function(d,v){return new zs(d,v)};function zs(d,v){ct.call(this),this.g=new Ja(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!I(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new ba(this)}T(zs,ct),zs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zs.prototype.close=function(){ec(this.g)},zs.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var k={};k.__data__=d,d=k}else this.v&&(k={},k.__data__=B(d),d=k);v.i.push(new j(v.Ya++,d)),v.I==3&&Jr(v)},zs.prototype.N=function(){this.g.l=null,delete this.j,ec(this.g),delete this.g,zs.Z.N.call(this)};function qu(d){Ye.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const k in v){d=k;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}T(qu,Ye);function Hu(){He.call(this),this.status=1}T(Hu,He);function ba(d){this.g=d}T(ba,Fu),ba.prototype.ra=function(){Xe(this.g,"a")},ba.prototype.qa=function(d){Xe(this.g,new qu(d))},ba.prototype.pa=function(d){Xe(this.g,new Hu)},ba.prototype.oa=function(){Xe(this.g,"b")},ei.prototype.createWebChannel=ei.prototype.g,zs.prototype.send=zs.prototype.o,zs.prototype.open=zs.prototype.m,zs.prototype.close=zs.prototype.close,Aw=function(){return new ei},Rw=function(){return Gt()},Cw=qe,eg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,pd=vs,Gn.COMPLETE="complete",Nw=Gn,Ke.EventType=Ve,Ve.OPEN="a",Ve.CLOSE="b",Ve.ERROR="c",Ve.MESSAGE="d",ct.prototype.listen=ct.prototype.J,Kc=Ke,_n.prototype.listenOnce=_n.prototype.K,_n.prototype.getLastError=_n.prototype.Ha,_n.prototype.getLastErrorCode=_n.prototype.ya,_n.prototype.getStatus=_n.prototype.ca,_n.prototype.getResponseJson=_n.prototype.La,_n.prototype.getResponseText=_n.prototype.la,_n.prototype.send=_n.prototype.ea,_n.prototype.setWithCredentials=_n.prototype.Fa,Sw=_n}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});class Ls{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ls.UNAUTHENTICATED=new Ls(null),Ls.GOOGLE_CREDENTIALS=new Ls("google-credentials-uid"),Ls.FIRST_PARTY=new Ls("first-party-uid"),Ls.MOCK_USER=new Ls("mock-user");let Wl="12.8.0";function HC(s){Wl=s}const Ao=new Cg("@firebase/firestore");function kl(){return Ao.logLevel}function st(s,...e){if(Ao.logLevel<=Xt.DEBUG){const n=e.map(Fg);Ao.debug(`Firestore (${Wl}): ${s}`,...n)}}function Ha(s,...e){if(Ao.logLevel<=Xt.ERROR){const n=e.map(Fg);Ao.error(`Firestore (${Wl}): ${s}`,...n)}}function Dl(s,...e){if(Ao.logLevel<=Xt.WARN){const n=e.map(Fg);Ao.warn(`Firestore (${Wl}): ${s}`,...n)}}function Fg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function kt(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Mw(s,i,n)}function Mw(s,e,n){let i=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ha(i),new Error(i)}function gn(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||Mw(e,l,i)}function It(s,e){return s}const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends ga{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ba{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Iw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $C{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ls.UNAUTHENTICATED)))}shutdown(){}}class WC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class GC{constructor(e){this.t=e,this.currentUser=Ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){gn(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new Ba;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ba,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ba)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gn(typeof i.accessToken=="string",31837,{l:i}),new Iw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gn(e===null||typeof e=="string",2055,{h:e}),new Ls(e)}}class KC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ls.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class YC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new KC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ls.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Q1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){gn(this.o===void 0,3512);const i=u=>{u.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,st("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Q1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(gn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Q1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function XC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class qg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=XC(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function Jt(s,e){return s<e?-1:s>e?1:0}function tg(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return _p(l)===_p(u)?Jt(l,u):_p(l)?1:-1}return Jt(s.length,e.length)}const JC=55296,ZC=57343;function _p(s){const e=s.charCodeAt(0);return e>=JC&&e<=ZC}function Pl(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}const X1="__name__";class ia{constructor(e,n,i){n===void 0?n=0:n>e.length&&kt(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&kt(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ia?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=ia.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Jt(e.length,n.length)}static compareSegments(e,n){const i=ia.isNumericId(e),l=ia.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?ia.extractNumericId(e).compare(ia.extractNumericId(n)):tg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Li.fromString(e.substring(4,e.length-2))}}class An extends ia{construct(e,n,i){return new An(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ze(Ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new An(n)}static emptyPath(){return new An([])}}const eR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ns extends ia{construct(e,n,i){return new Ns(e,n,i)}static isValidIdentifier(e){return eR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ns.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X1}static keyField(){return new Ns([X1])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Ze(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Ze(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ze(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(h=!h,l++):p!=="."||h?(i+=p,l++):(u(),l++)}if(u(),h)throw new Ze(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ns(n)}static emptyPath(){return new Ns([])}}class yt{constructor(e){this.path=e}static fromPath(e){return new yt(An.fromString(e))}static fromName(e){return new yt(An.fromString(e).popFirst(5))}static empty(){return new yt(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&An.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return An.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new An(e.slice()))}}function Dw(s,e,n){if(!n)throw new Ze(Ne.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function tR(s,e,n,i){if(e===!0&&i===!0)throw new Ze(Ne.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function J1(s){if(!yt.isDocumentKey(s))throw new Ze(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Z1(s){if(yt.isDocumentKey(s))throw new Ze(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Pw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Kd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":kt(12329,{type:typeof s})}function Fr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ze(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kd(s);throw new Ze(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function nR(s,e){if(e<=0)throw new Ze(Ne.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function fs(s,e){const n={typeString:s};return e&&(n.value=e),n}function Eu(s,e){if(!Pw(s))throw new Ze(Ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const h=s[i];if(l&&typeof h!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Ze(Ne.INVALID_ARGUMENT,n);return!0}const e2=-62135596800,t2=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*t2);return new ht(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ze(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ze(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<e2)throw new Ze(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/t2}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-e2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:fs("string",ht._jsonSchemaVersion),seconds:fs("number"),nanoseconds:fs("number")};class Rt{static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new ht(0,0))}static max(){return new Rt(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const cu=-1;function sR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=Rt.fromTimestamp(i===1e9?new ht(n+1,0):new ht(n,i));return new Bi(l,yt.empty(),e)}function rR(s){return new Bi(s.readTime,s.key,cu)}class Bi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Bi(Rt.min(),yt.empty(),cu)}static max(){return new Bi(Rt.max(),yt.empty(),cu)}}function aR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=yt.comparator(s.documentKey,e.documentKey),n!==0?n:Jt(s.largestBatchId,e.largestBatchId))}const iR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Gl(s){if(s.code!==Ne.FAILED_PRECONDITION||s.message!==iR)throw s;st("LocalStore","Unexpectedly lost primary lease")}class Me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&kt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Me(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Me?n:Me.resolve(n)}catch(n){return Me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Me.reject(n)}static resolve(e){return new Me(((n,i)=>{n(e)}))}static reject(e){return new Me(((n,i)=>{i(e)}))}static waitFor(e){return new Me(((n,i)=>{let l=0,u=0,h=!1;e.forEach((p=>{++l,p.next((()=>{++u,h&&u===l&&n()}),(g=>i(g)))})),h=!0,u===l&&n()}))}static or(e){let n=Me.resolve(!1);for(const i of e)n=n.next((l=>l?Me.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new Me(((i,l)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((w=>{h[y]=w,++p,p===u&&i(h)}),(w=>l(w)))}}))}static doWhile(e,n){return new Me(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function lR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kl(s){return s.name==="IndexedDbTransactionError"}class Yd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yd.ce=-1;const Hg=-1;function Qd(s){return s==null}function Ad(s){return s===0&&1/s==-1/0}function cR(s){return typeof s=="number"&&Number.isInteger(s)&&!Ad(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Lw="";function uR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=n2(e)),e=hR(s.get(n),e);return n2(e)}function hR(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case Lw:n+="";break;default:n+=u}}return n}function n2(s){return s+Lw+""}function s2(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Gi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Ow(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class $n{constructor(e,n){this.comparator=e,this.root=n||Ss.EMPTY}insert(e,n){return new $n(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ss.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ss.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ss{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??Ss.RED,this.left=l??Ss.EMPTY,this.right=u??Ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new Ss(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Ss.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw kt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw kt(27949);return e+(this.isRed()?0:1)}}Ss.EMPTY=null,Ss.RED=!0,Ss.BLACK=!1;Ss.EMPTY=new class{constructor(){this.size=0}get key(){throw kt(57766)}get value(){throw kt(16141)}get color(){throw kt(16727)}get left(){throw kt(29726)}get right(){throw kt(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new Ss(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ys{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new r2(this.data.getIterator())}getIteratorFrom(e){return new r2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof ys)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ys(this.comparator);return n.data=e,n}}class r2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ur{constructor(e){this.fields=e,e.sort(Ns.comparator)}static empty(){return new ur([])}unionWith(e){let n=new ys(Ns.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ur(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class Vw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Vw("Invalid base64 string: "+u):u}})(e);return new Cs(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new Cs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cs.EMPTY_BYTE_STRING=new Cs("");const dR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(s){if(gn(!!s,39018),typeof s=="string"){let e=0;const n=dR.exec(s);if(gn(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ns(s.seconds),nanos:ns(s.nanos)}}function ns(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function zi(s){return typeof s=="string"?Cs.fromBase64String(s):Cs.fromUint8Array(s)}const Bw="server_timestamp",Uw="__type__",zw="__previous_value__",Fw="__local_write_time__";function $g(s){return(s?.mapValue?.fields||{})[Uw]?.stringValue===Bw}function Xd(s){const e=s.mapValue.fields[zw];return $g(e)?Xd(e):e}function uu(s){const e=Ui(s.mapValue.fields[Fw].timestampValue);return new ht(e.seconds,e.nanos)}class fR{constructor(e,n,i,l,u,h,p,g,y,w,T){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w,this.apiKey=T}}const Md="(default)";class hu{constructor(e,n){this.projectId=e,this.database=n||Md}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database===Md}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}function mR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ze(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(s.options.projectId,e)}const qw="__type__",pR="__max__",Jh={mapValue:{}},Hw="__vector__",Id="value";function Fi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?$g(s)?4:yR(s)?9007199254740991:gR(s)?10:11:kt(28295,{value:s})}function pa(s,e){if(s===e)return!0;const n=Fi(s);if(n!==Fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return uu(s).isEqual(uu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=Ui(l.timestampValue),p=Ui(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return zi(l.bytesValue).isEqual(zi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return ns(l.geoPointValue.latitude)===ns(u.geoPointValue.latitude)&&ns(l.geoPointValue.longitude)===ns(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return ns(l.integerValue)===ns(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=ns(l.doubleValue),p=ns(u.doubleValue);return h===p?Ad(h)===Ad(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return Pl(s.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},p=u.mapValue.fields||{};if(s2(h)!==s2(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!pa(h[g],p[g])))return!1;return!0})(s,e);default:return kt(52216,{left:s})}}function du(s,e){return(s.values||[]).find((n=>pa(n,e)))!==void 0}function Ll(s,e){if(s===e)return 0;const n=Fi(s),i=Fi(e);if(n!==i)return Jt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Jt(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=ns(u.integerValue||u.doubleValue),g=ns(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return a2(s.timestampValue,e.timestampValue);case 4:return a2(uu(s),uu(e));case 5:return tg(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=zi(u),g=zi(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=Jt(p[y],g[y]);if(w!==0)return w}return Jt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=Jt(ns(u.latitude),ns(h.latitude));return p!==0?p:Jt(ns(u.longitude),ns(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return i2(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},y=p[Id]?.arrayValue,w=g[Id]?.arrayValue,T=Jt(y?.values?.length||0,w?.values?.length||0);return T!==0?T:i2(y,w)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Jh.mapValue&&h===Jh.mapValue)return 0;if(u===Jh.mapValue)return 1;if(h===Jh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const E=tg(g[T],w[T]);if(E!==0)return E;const O=Ll(p[g[T]],y[w[T]]);if(O!==0)return O}return Jt(g.length,w.length)})(s.mapValue,e.mapValue);default:throw kt(23264,{he:n})}}function a2(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Jt(s,e);const n=Ui(s),i=Ui(e),l=Jt(n.seconds,i.seconds);return l!==0?l:Jt(n.nanos,i.nanos)}function i2(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=Ll(n[l],i[l]);if(u)return u}return Jt(n.length,i.length)}function Ol(s){return ng(s)}function ng(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Ui(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return zi(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return yt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=ng(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const h of i)u?u=!1:l+=",",l+=`${h}:${ng(n.fields[h])}`;return l+"}"})(s.mapValue):kt(61005,{value:s})}function gd(s){switch(Fi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xd(s);return e?16+gd(e):16;case 5:return 2*s.stringValue.length;case 6:return zi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+gd(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return Gi(i.fields,((u,h)=>{l+=u.length+gd(h)})),l})(s.mapValue);default:throw kt(13486,{value:s})}}function o2(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function sg(s){return!!s&&"integerValue"in s}function Wg(s){return!!s&&"arrayValue"in s}function l2(s){return!!s&&"nullValue"in s}function c2(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function yd(s){return!!s&&"mapValue"in s}function gR(s){return(s?.mapValue?.fields||{})[qw]?.stringValue===Hw}function eu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Gi(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=eu(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eu(s.arrayValue.values[n]);return e}return{...s}}function yR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===pR}class Js{constructor(e){this.value=e}static empty(){return new Js({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)}setAll(e){let n=Ns.emptyPath(),i={},l=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,l),i={},l=[],n=p.popLast()}h?i[p.lastSegment()]=eu(h):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];yd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){Gi(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new Js(eu(this.value))}}function $w(s){const e=[];return Gi(s.fields,((n,i)=>{const l=new Ns([n]);if(yd(i)){const u=$w(i.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new ur(e)}class Os{constructor(e,n,i,l,u,h,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Os(e,0,Rt.min(),Rt.min(),Rt.min(),Js.empty(),0)}static newFoundDocument(e,n,i,l){return new Os(e,1,n,Rt.min(),i,l,0)}static newNoDocument(e,n){return new Os(e,2,n,Rt.min(),Rt.min(),Js.empty(),0)}static newUnknownDocument(e,n){return new Os(e,3,n,Rt.min(),Rt.min(),Js.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Js.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Js.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Os&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Os(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dd{constructor(e,n){this.position=e,this.inclusive=n}}function u2(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],h=s.position[l];if(u.field.isKeyField()?i=yt.comparator(yt.fromName(h.referenceValue),n.key):i=Ll(h,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function h2(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!pa(s.position[n],e.position[n]))return!1;return!0}class fu{constructor(e,n="asc"){this.field=e,this.dir=n}}function vR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Ww{}class ds extends Ww{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new xR(e,n,i):n==="array-contains"?new kR(e,i):n==="in"?new jR(e,i):n==="not-in"?new TR(e,i):n==="array-contains-any"?new ER(e,i):new ds(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new wR(e,i):new _R(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ll(n,this.value)):n!==null&&Fi(this.value)===Fi(n)&&this.matchesComparison(Ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qr extends Ww{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new qr(e,n)}matches(e){return Gw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gw(s){return s.op==="and"}function Kw(s){return bR(s)&&Gw(s)}function bR(s){for(const e of s.filters)if(e instanceof qr)return!1;return!0}function rg(s){if(s instanceof ds)return s.field.canonicalString()+s.op.toString()+Ol(s.value);if(Kw(s))return s.filters.map((e=>rg(e))).join(",");{const e=s.filters.map((n=>rg(n))).join(",");return`${s.op}(${e})`}}function Yw(s,e){return s instanceof ds?(function(i,l){return l instanceof ds&&i.op===l.op&&i.field.isEqual(l.field)&&pa(i.value,l.value)})(s,e):s instanceof qr?(function(i,l){return l instanceof qr&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,h,p)=>u&&Yw(h,l.filters[p])),!0):!1})(s,e):void kt(19439)}function Qw(s){return s instanceof ds?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`})(s):s instanceof qr?(function(n){return n.op.toString()+" {"+n.getFilters().map(Qw).join(" ,")+"}"})(s):"Filter"}class xR extends ds{constructor(e,n,i){super(e,n,i),this.key=yt.fromName(i.referenceValue)}matches(e){const n=yt.comparator(e.key,this.key);return this.matchesComparison(n)}}class wR extends ds{constructor(e,n){super(e,"in",n),this.keys=Xw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class _R extends ds{constructor(e,n){super(e,"not-in",n),this.keys=Xw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Xw(s,e){return(e.arrayValue?.values||[]).map((n=>yt.fromName(n.referenceValue)))}class kR extends ds{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wg(n)&&du(n.arrayValue,this.value)}}class jR extends ds{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&du(this.value.arrayValue,n)}}class TR extends ds{constructor(e,n){super(e,"not-in",n)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!du(this.value.arrayValue,n)}}class ER extends ds{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>du(this.value.arrayValue,i)))}}class SR{constructor(e,n=null,i=[],l=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function d2(s,e=null,n=[],i=[],l=null,u=null,h=null){return new SR(s,e,n,i,l,u,h)}function Gg(s){const e=It(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>rg(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Qd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ol(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ol(i))).join(",")),e.Te=n}return e.Te}function Kg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!vR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Yw(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!h2(s.startAt,e.startAt)&&h2(s.endAt,e.endAt)}function ag(s){return yt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Yl{constructor(e,n=null,i=[],l=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function NR(s,e,n,i,l,u,h,p){return new Yl(s,e,n,i,l,u,h,p)}function Yg(s){return new Yl(s)}function f2(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function CR(s){return yt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Jw(s){return s.collectionGroup!==null}function tu(s){const e=It(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new ys(Ns.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new fu(u,i))})),n.has(Ns.keyField().canonicalString())||e.Ie.push(new fu(Ns.keyField(),i))}return e.Ie}function da(s){const e=It(s);return e.Ee||(e.Ee=RR(e,tu(s))),e.Ee}function RR(s,e){if(s.limitType==="F")return d2(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new fu(l.field,u)}));const n=s.endAt?new Dd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Dd(s.startAt.position,s.startAt.inclusive):null;return d2(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function ig(s,e){const n=s.filters.concat([e]);return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function AR(s,e){const n=s.explicitOrderBy.concat([e]);return new Yl(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Pd(s,e,n){return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Jd(s,e){return Kg(da(s),da(e))&&s.limitType===e.limitType}function Zw(s){return`${Gg(da(s))}|lt:${s.limitType}`}function jl(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>Qw(l))).join(", ")}]`),Qd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Ol(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Ol(l))).join(",")),`Target(${i})`})(da(s))}; limitType=${s.limitType})`}function Zd(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):yt.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of tu(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(h,p,g){const y=u2(h,p,g);return h.inclusive?y<=0:y<0})(i.startAt,tu(i),l)||i.endAt&&!(function(h,p,g){const y=u2(h,p,g);return h.inclusive?y>=0:y>0})(i.endAt,tu(i),l))})(s,e)}function MR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function e_(s){return(e,n)=>{let i=!1;for(const l of tu(s)){const u=IR(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function IR(s,e,n){const i=s.field.isKeyField()?yt.comparator(e.key,n.key):(function(u,h,p){const g=h.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Ll(g,y):kt(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return kt(19790,{direction:s.dir})}}class Lo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return Ow(this.inner)}size(){return this.innerSize}}const DR=new $n(yt.comparator);function $a(){return DR}const t_=new $n(yt.comparator);function Yc(...s){let e=t_;for(const n of s)e=e.insert(n.key,n);return e}function n_(s){let e=t_;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function _o(){return nu()}function s_(){return nu()}function nu(){return new Lo((s=>s.toString()),((s,e)=>s.isEqual(e)))}const PR=new $n(yt.comparator),LR=new ys(yt.comparator);function Zt(...s){let e=LR;for(const n of s)e=e.add(n);return e}const OR=new ys(Jt);function VR(){return OR}function Qg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function r_(s){return{integerValue:""+s}}function a_(s,e){return cR(e)?r_(e):Qg(s,e)}class ef{constructor(){this._=void 0}}function BR(s,e,n){return s instanceof mu?(function(l,u){const h={fields:{[Uw]:{stringValue:Bw},[Fw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&$g(u)&&(u=Xd(u)),u&&(h.fields[zw]=u),{mapValue:h}})(n,e):s instanceof pu?o_(s,e):s instanceof gu?l_(s,e):(function(l,u){const h=i_(l,u),p=m2(h)+m2(l.Ae);return sg(h)&&sg(l.Ae)?r_(p):Qg(l.serializer,p)})(s,e)}function UR(s,e,n){return s instanceof pu?o_(s,e):s instanceof gu?l_(s,e):n}function i_(s,e){return s instanceof yu?(function(i){return sg(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class mu extends ef{}class pu extends ef{constructor(e){super(),this.elements=e}}function o_(s,e){const n=c_(e);for(const i of s.elements)n.some((l=>pa(l,i)))||n.push(i);return{arrayValue:{values:n}}}class gu extends ef{constructor(e){super(),this.elements=e}}function l_(s,e){let n=c_(e);for(const i of s.elements)n=n.filter((l=>!pa(l,i)));return{arrayValue:{values:n}}}class yu extends ef{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function m2(s){return ns(s.integerValue||s.doubleValue)}function c_(s){return Wg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class u_{constructor(e,n){this.field=e,this.transform=n}}function zR(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof pu&&l instanceof pu||i instanceof gu&&l instanceof gu?Pl(i.elements,l.elements,pa):i instanceof yu&&l instanceof yu?pa(i.Ae,l.Ae):i instanceof mu&&l instanceof mu})(s.transform,e.transform)}class FR{constructor(e,n){this.version=e,this.transformResults=n}}class Tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class tf{}function h_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Xg(s.key,Tr.none()):new Su(s.key,s.data,Tr.none());{const n=s.data,i=Js.empty();let l=new ys(Ns.comparator);for(let u of e.fields)if(!l.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?i.delete(u):i.set(u,h),l=l.add(u)}return new Ki(s.key,i,new ur(l.toArray()),Tr.none())}}function qR(s,e,n){s instanceof Su?(function(l,u,h){const p=l.value.clone(),g=g2(l.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Ki?(function(l,u,h){if(!vd(l.precondition,u))return void u.convertToUnknownDocument(h.version);const p=g2(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(d_(l)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function su(s,e,n,i){return s instanceof Su?(function(u,h,p,g){if(!vd(u.precondition,h))return p;const y=u.value.clone(),w=y2(u.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof Ki?(function(u,h,p,g){if(!vd(u.precondition,h))return p;const y=y2(u.fieldTransforms,g,h),w=h.data;return w.setAll(d_(u)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,e,n,i):(function(u,h,p){return vd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,n)}function HR(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=i_(i.transform,l||null);u!=null&&(n===null&&(n=Js.empty()),n.set(i.field,u))}return n||null}function p2(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Pl(i,l,((u,h)=>zR(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Su extends tf{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Ki extends tf{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function d_(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function g2(s,e,n){const i=new Map;gn(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],h=u.transform,p=e.data.field(u.field);i.set(u.field,UR(h,p,n[l]))}return i}function y2(s,e,n){const i=new Map;for(const l of s){const u=l.transform,h=n.data.field(l.field);i.set(l.field,BR(u,h,e))}return i}class Xg extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $R extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class WR{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&qR(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=su(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=su(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=s_();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(l.key)?null:p;const g=h_(h,p);g!==null&&i.set(l.key,g),h.isValidDocument()||h.convertToNoDocument(Rt.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Zt())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((n,i)=>p2(n,i)))&&Pl(this.baseMutations,e.baseMutations,((n,i)=>p2(n,i)))}}class Jg{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){gn(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return PR})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,i[h].version);return new Jg(e,n,i,l)}}class GR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class KR{constructor(e,n){this.count=e,this.unchangedNames=n}}var hs,sn;function YR(s){switch(s){case Ne.OK:return kt(64938);case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0;default:return kt(15467,{code:s})}}function f_(s){if(s===void 0)return Ha("GRPC error has no .code"),Ne.UNKNOWN;switch(s){case hs.OK:return Ne.OK;case hs.CANCELLED:return Ne.CANCELLED;case hs.UNKNOWN:return Ne.UNKNOWN;case hs.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case hs.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case hs.INTERNAL:return Ne.INTERNAL;case hs.UNAVAILABLE:return Ne.UNAVAILABLE;case hs.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case hs.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case hs.NOT_FOUND:return Ne.NOT_FOUND;case hs.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case hs.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case hs.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case hs.ABORTED:return Ne.ABORTED;case hs.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case hs.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case hs.DATA_LOSS:return Ne.DATA_LOSS;default:return kt(39323,{code:s})}}(sn=hs||(hs={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";function QR(){return new TextEncoder}const XR=new Li([4294967295,4294967295],0);function v2(s){const e=QR().encode(s),n=new Ew;return n.update(e),new Uint8Array(n.digest())}function b2(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Li([n,i],0),new Li([l,u],0)]}class Zg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Qc(`Invalid padding: ${n}`);if(i<0)throw new Qc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Qc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Li.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Li.fromNumber(i)));return l.compare(XR)===1&&(l=new Li([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=v2(e),[i,l]=b2(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);if(!this.we(h))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Zg(u,l,n);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=v2(e),[i,l]=b2(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);this.be(h)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nf{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new nf(Rt.min(),l,new $n(Jt),$a(),Zt())}}class Nu{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Nu(i,n,Zt(),Zt(),Zt())}}class bd{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class m_{constructor(e,n){this.targetId=e,this.Ce=n}}class p_{constructor(e,n,i=Cs.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class x2{constructor(){this.ve=0,this.Fe=w2(),this.Me=Cs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Zt(),n=Zt(),i=Zt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:kt(38017,{changeType:u})}})),new Nu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=w2()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,gn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class JR{constructor(e){this.Ge=e,this.ze=new Map,this.je=$a(),this.He=Zh(),this.Je=Zh(),this.Ze=new $n(Jt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:kt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(ag(u))if(i===0){const h=new yt(u.path);this.et(n,h,Os.newNoDocument(h,Rt.min()))}else gn(i===1,20013,{expectedCount:i});else{const h=this._t(n);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let h,p;try{h=zi(i).toUint8Array()}catch(g){if(g instanceof Vw)return Dl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Zg(h,l,u)}catch(g){return Dl(g instanceof Qc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&ag(p.target)){const g=new yt(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Os.newNoDocument(g,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let i=Zt();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new nf(e,n,this.Ze,this.je,i);return this.je=$a(),this.He=Zh(),this.Je=Zh(),this.Ze=new $n(Jt),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new x2,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ys(Jt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ys(Jt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||st("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new x2),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zh(){return new $n(yt.comparator)}function w2(){return new $n(yt.comparator)}const ZR={asc:"ASCENDING",desc:"DESCENDING"},eA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tA={and:"AND",or:"OR"};class nA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function og(s,e){return s.useProto3Json||Qd(e)?e:{value:e}}function Ld(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function sA(s,e){return Ld(s,e.toTimestamp())}function fa(s){return gn(!!s,49232),Rt.fromTimestamp((function(n){const i=Ui(n);return new ht(i.seconds,i.nanos)})(s))}function ey(s,e){return lg(s,e).canonicalString()}function lg(s,e){const n=(function(l){return new An(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function y_(s){const e=An.fromString(s);return gn(__(e),10190,{key:e.toString()}),e}function cg(s,e){return ey(s.databaseId,e.path)}function kp(s,e){const n=y_(e);if(n.get(1)!==s.databaseId.projectId)throw new Ze(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Ze(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new yt(b_(n))}function v_(s,e){return ey(s.databaseId,e)}function rA(s){const e=y_(s);return e.length===4?An.emptyPath():b_(e)}function ug(s){return new An(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function b_(s){return gn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function _2(s,e,n){return{name:cg(s,e),fields:n.value.mapValue.fields}}function aA(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:kt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,w){return y.useProto3Json?(gn(w===void 0||typeof w=="string",58123),Cs.fromBase64String(w||"")):(gn(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Cs.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const w=y.code===void 0?Ne.UNKNOWN:f_(y.code);return new Ze(w,y.message||"")})(h);n=new p_(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=kp(s,i.document.name),u=fa(i.document.updateTime),h=i.document.createTime?fa(i.document.createTime):Rt.min(),p=new Js({mapValue:{fields:i.document.fields}}),g=Os.newFoundDocument(l,u,h,p),y=i.targetIds||[],w=i.removedTargetIds||[];n=new bd(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=kp(s,i.document),u=i.readTime?fa(i.readTime):Rt.min(),h=Os.newNoDocument(l,u),p=i.removedTargetIds||[];n=new bd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=kp(s,i.document),u=i.removedTargetIds||[];n=new bd([],u,l,null)}else{if(!("filter"in e))return kt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,h=new KR(l,u),p=i.targetId;n=new m_(p,h)}}return n}function iA(s,e){let n;if(e instanceof Su)n={update:_2(s,e.key,e.value)};else if(e instanceof Xg)n={delete:cg(s,e.key)};else if(e instanceof Ki)n={update:_2(s,e.key,e.data),updateMask:pA(e.fieldMask)};else{if(!(e instanceof $R))return kt(16599,{dt:e.type});n={verify:cg(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof mu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof pu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof gu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof yu)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw kt(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:sA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:kt(27497)})(s,e.precondition)),n}function oA(s,e){return s&&s.length>0?(gn(e!==void 0,14353),s.map((n=>(function(l,u){let h=l.updateTime?fa(l.updateTime):fa(u);return h.isEqual(Rt.min())&&(h=fa(u)),new FR(h,l.transformResults||[])})(n,e)))):[]}function lA(s,e){return{documents:[v_(s,e.path)]}}function cA(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=v_(s,l);const u=(function(y){if(y.length!==0)return w_(qr.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((w=>(function(E){return{field:Tl(E.field),direction:dA(E.dir)}})(w)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=og(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function uA(s){let e=rA(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){gn(i===1,65062);const w=n.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let u=[];n.where&&(u=(function(T){const E=x_(T);return E instanceof qr&&Kw(E)?E.getFilters():[E]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((E=>(function(W){return new fu(El(W.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(E)))})(n.orderBy));let p=null;n.limit&&(p=(function(T){let E;return E=typeof T=="object"?T.value:T,Qd(E)?null:E})(n.limit));let g=null;n.startAt&&(g=(function(T){const E=!!T.before,O=T.values||[];return new Dd(O,E)})(n.startAt));let y=null;return n.endAt&&(y=(function(T){const E=!T.before,O=T.values||[];return new Dd(O,E)})(n.endAt)),NR(e,l,h,u,p,"F",g,y)}function hA(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function x_(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=El(n.unaryFilter.field);return ds.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=El(n.unaryFilter.field);return ds.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=El(n.unaryFilter.field);return ds.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=El(n.unaryFilter.field);return ds.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return kt(61313);default:return kt(60726)}})(s):s.fieldFilter!==void 0?(function(n){return ds.create(El(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return kt(58110);default:return kt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return qr.create(n.compositeFilter.filters.map((i=>x_(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return kt(1026)}})(n.compositeFilter.op))})(s):kt(30097,{filter:s})}function dA(s){return ZR[s]}function fA(s){return eA[s]}function mA(s){return tA[s]}function Tl(s){return{fieldPath:s.canonicalString()}}function El(s){return Ns.fromServerFormat(s.fieldPath)}function w_(s){return s instanceof ds?(function(n){if(n.op==="=="){if(c2(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NAN"}};if(l2(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(c2(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NOT_NAN"}};if(l2(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(n.field),op:fA(n.op),value:n.value}}})(s):s instanceof qr?(function(n){const i=n.getFilters().map((l=>w_(l)));return i.length===1?i[0]:{compositeFilter:{op:mA(n.op),filters:i}}})(s):kt(54877,{filter:s})}function pA(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function __(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function k_(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Ai{constructor(e,n,i,l,u=Rt.min(),h=Rt.min(),p=Cs.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gA{constructor(e){this.yt=e}}function yA(s){const e=uA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Pd(e,e.limit,"L"):e}class vA{constructor(){this.Sn=new bA}addToCollectionParentIndex(e,n){return this.Sn.add(n),Me.resolve()}getCollectionParents(e,n){return Me.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Me.resolve()}deleteFieldIndex(e,n){return Me.resolve()}deleteAllFieldIndexes(e){return Me.resolve()}createTargetIndexes(e,n){return Me.resolve()}getDocumentsMatchingTarget(e,n){return Me.resolve(null)}getIndexType(e,n){return Me.resolve(0)}getFieldIndexes(e,n){return Me.resolve([])}getNextCollectionGroupToUpdate(e){return Me.resolve(null)}getMinOffset(e,n){return Me.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,n){return Me.resolve(Bi.min())}updateCollectionGroup(e,n,i){return Me.resolve()}updateIndexEntries(e,n){return Me.resolve()}}class bA{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new ys(An.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new ys(An.comparator)).toArray()}}const k2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},j_=41943040;class Xs{static withCacheSize(e){return new Xs(e,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Xs.DEFAULT_COLLECTION_PERCENTILE=10,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xs.DEFAULT=new Xs(j_,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xs.DISABLED=new Xs(-1,0,0);class Vl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Vl(0)}static ar(){return new Vl(-1)}}const j2="LruGarbageCollector",xA=1048576;function T2([s,e],[n,i]){const l=Jt(s,n);return l===0?Jt(e,i):l}class wA{constructor(e){this.Pr=e,this.buffer=new ys(T2),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();T2(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class _A{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){st(j2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kl(n)?st(j2,"Ignoring IndexedDB error during garbage collection: ",n):await Gl(n)}await this.Ar(3e5)}))}}class kA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return Me.resolve(Yd.ce);const i=new wA(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve(k2)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k2):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,u,h,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),l=this.params.maximumSequenceNumbersToCollect):l=T,h=Date.now(),this.nthSequenceNumber(e,l)))).next((T=>(i=T,p=Date.now(),this.removeTargets(e,i,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),kl()<=Xt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${l} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),Me.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:T}))))}}function jA(s,e){return new kA(s,e)}class TA{constructor(){this.changes=new Lo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Os.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Me.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class SA{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&su(i.mutation,l,ur.empty(),ht.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Zt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Zt()){const l=_o();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let h=Yc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const i=_o();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Zt())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,i,l){let u=$a();const h=nu(),p=(function(){return nu()})();return n.forEach(((g,y)=>{const w=i.get(y.key);l.has(y.key)&&(w===void 0||w.mutation instanceof Ki)?u=u.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),su(w.mutation,y,w.mutation.getFieldMask(),ht.now())):h.set(y.key,ur.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,w)=>h.set(y,w))),n.forEach(((y,w)=>p.set(y,new EA(w,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=nu();let l=new $n(((h,p)=>h-p)),u=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let w=i.get(g)||ur.empty();w=p.applyToLocalView(y,w),i.set(g,w);const T=(l.get(p.batchId)||Zt()).add(g);l=l.insert(p.batchId,T)}))})).next((()=>{const h=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,T=s_();w.forEach((E=>{if(!u.has(E)){const O=h_(n.get(E),i.get(E));O!==null&&T.set(E,O),u=u.add(E)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return Me.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return CR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Jw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):Me.resolve(_o());let p=cu,g=u;return h.next((y=>Me.forEach(y,((w,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),u.get(w)?Me.resolve():this.remoteDocumentCache.getEntry(e,w).next((E=>{g=g.insert(w,E)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Zt()))).next((w=>({batchId:p,changes:n_(w)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new yt(n)).next((i=>{let l=Yc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let h=Yc();return this.indexManager.getCollectionParents(e,u).next((p=>Me.forEach(p,(g=>{const y=(function(T,E){return new Yl(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((w=>{w.forEach(((T,E)=>{h=h.insert(T,E)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((h=>{u.forEach(((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Os.newInvalidDocument(w)))}));let p=Yc();return h.forEach(((g,y)=>{const w=u.get(g);w!==void 0&&su(w.mutation,y,ur.empty(),ht.now()),Zd(n,y)&&(p=p.insert(g,y))})),p}))}}class NA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Me.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:fa(l.createTime)}})(n)),Me.resolve()}getNamedQuery(e,n){return Me.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:yA(l.bundledQuery),readTime:fa(l.readTime)}})(n)),Me.resolve()}}class CA{constructor(){this.overlays=new $n(yt.comparator),this.Lr=new Map}getOverlay(e,n){return Me.resolve(this.overlays.get(n))}getOverlays(e,n){const i=_o();return Me.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.bt(e,n,u)})),Me.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),Me.resolve()}getOverlaysForCollection(e,n,i){const l=_o(),u=n.length+1,h=new yt(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return Me.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new $n(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let w=u.get(y.largestBatchId);w===null&&(w=_o(),u=u.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=_o(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>p.set(y,w))),!(p.size()>=l)););return Me.resolve(p)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new GR(n,i));let u=this.Lr.get(n);u===void 0&&(u=Zt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class RA{constructor(){this.sessionToken=Cs.EMPTY_BYTE_STRING}getSessionToken(e){return Me.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Me.resolve()}}class ty{constructor(){this.kr=new ys(ws.Kr),this.qr=new ys(ws.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new ws(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new ws(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new yt(new An([])),i=new ws(n,e),l=new ws(n,e+1),u=[];return this.qr.forEachInRange([i,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new yt(new An([])),i=new ws(n,e),l=new ws(n,e+1);let u=Zt();return this.qr.forEachInRange([i,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new ws(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ws{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return yt.comparator(e.key,n.key)||Jt(e.Hr,n.Hr)}static Ur(e,n){return Jt(e.Hr,n.Hr)||yt.comparator(e.key,n.key)}}class AA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ys(ws.Kr)}checkEmpty(e){return Me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new WR(u,n,i,l);this.mutationQueue.push(h);for(const p of l)this.Jr=this.Jr.add(new ws(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Me.resolve(h)}lookupMutationBatch(e,n){return Me.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),u=l<0?0:l;return Me.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(this.mutationQueue.length===0?Hg:this.Yn-1)}getAllMutationBatches(e){return Me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ws(n,0),l=new ws(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(h=>{const p=this.Zr(h.Hr);u.push(p)})),Me.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ys(Jt);return n.forEach((l=>{const u=new ws(l,0),h=new ws(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),Me.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;yt.isDocumentKey(u)||(u=u.child(""));const h=new ws(new yt(u),0);let p=new ys(Jt);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),h),Me.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){gn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Me.forEach(n.mutations,(l=>{const u=new ws(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new ws(n,0),l=this.Jr.firstAfterOrEqual(i);return Me.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Me.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class MA{constructor(e){this.ti=e,this.docs=(function(){return new $n(yt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,h=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Me.resolve(i?i.document.mutableCopy():Os.newInvalidDocument(n))}getEntries(e,n){let i=$a();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Os.newInvalidDocument(l))})),Me.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=$a();const h=n.path,p=new yt(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||aR(rR(w),i)<=0||(l.has(w.key)||Zd(n,w))&&(u=u.insert(w.key,w.mutableCopy()))}return Me.resolve(u)}getAllFromCollectionGroup(e,n,i,l){kt(9500)}ni(e,n){return Me.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new IA(this)}getSize(e){return Me.resolve(this.size)}}class IA extends TA{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),Me.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class DA{constructor(e){this.persistence=e,this.ri=new Lo((n=>Gg(n)),Kg),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.ii=0,this.si=new ty,this.targetCount=0,this.oi=Vl._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),Me.resolve()}getLastRemoteSnapshotVersion(e){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Me.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),Me.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Vl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Me.resolve()}updateTargetData(e,n){return this.lr(n),Me.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Me.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Me.waitFor(u).next((()=>l))}getTargetCount(e){return Me.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return Me.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),Me.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),Me.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Me.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return Me.resolve(i)}containsKey(e,n){return Me.resolve(this.si.containsKey(n))}}class T_{constructor(e,n){this._i={},this.overlays={},this.ai=new Yd(0),this.ui=!1,this.ui=!0,this.ci=new RA,this.referenceDelegate=e(this),this.li=new DA(this),this.indexManager=new vA,this.remoteDocumentCache=(function(l){return new MA(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new gA(n),this.Pi=new NA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new AA(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){st("MemoryPersistence","Starting transaction:",e);const l=new PA(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return Me.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class PA extends oR{constructor(e){super(),this.currentSequenceNumber=e}}class ny{constructor(e){this.persistence=e,this.Ri=new ty,this.Ai=null}static Vi(e){return new ny(e)}get di(){if(this.Ai)return this.Ai;throw kt(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),Me.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),Me.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Me.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.di,(i=>{const l=yt.fromPath(i);return this.mi(e,l).next((u=>{u||n.removeEntry(l,Rt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Me.or([()=>Me.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Od{constructor(e,n){this.persistence=e,this.fi=new Lo((i=>uR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=jA(this,n)}static Vi(e,n){return new Od(e,n)}Ti(){}Ii(e){return Me.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return Me.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?Me.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(h=>this.wr(e,h,n).next((p=>{p||(i++,u.removeEntry(h,Rt.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Me.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Me.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Me.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Me.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gd(e.data.value)),n}wr(e,n,i){return Me.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return Me.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sy{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=Zt(),l=Zt();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new sy(e,n.fromCache,i,l)}}class LA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class OA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return uS()?8:lR(Bs())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,l,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new LA;return this.ys(e,n,h).next((p=>{if(u.result=p,this.As)return this.ws(e,n,h,p.size)}))})).next((()=>u.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(kl()<=Xt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",jl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Me.resolve()):(kl()<=Xt.DEBUG&&st("QueryEngine","Query:",jl(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(kl()<=Xt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",jl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,da(n))):Me.resolve())}gs(e,n){if(f2(n))return Me.resolve(null);let i=da(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Pd(n,null,"F"),i=da(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=Zt(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,h,g.readTime)?this.gs(e,Pd(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,i,l){return f2(n)||l.isEqual(Rt.min())?Me.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,i,l)?Me.resolve(null):(kl()<=Xt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),jl(n)),this.Ds(e,h,n,sR(l,cu)).next((p=>p)))}))}bs(e,n){let i=new ys(e_(e));return n.forEach(((l,u)=>{Zd(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,i){return kl()<=Xt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",jl(n)),this.fs.getDocumentsMatchingQuery(e,n,Bi.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const ry="LocalStore",VA=3e8;class BA{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new $n(Jt),this.Fs=new Lo((u=>Gg(u)),Kg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function UA(s,e,n,i){return new BA(s,e,n,i)}async function E_(s,e){const n=It(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=Zt();for(const y of l){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of u){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function zA(s,e){const n=It(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,w){const T=y.batch,E=T.keys();let O=Me.resolve();return E.forEach((W=>{O=O.next((()=>w.getEntry(g,W))).next((z=>{const V=y.docVersions.get(W);gn(V!==null,48541),z.version.compareTo(V)<0&&(T.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),w.addEntry(z)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(g,T)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Zt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function S_(s){const e=It(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function FA(s,e){const n=It(s),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((w,T)=>{const E=l.get(T);if(!E)return;p.push(n.li.removeMatchingKeys(u,w.removedDocuments,T).next((()=>n.li.addMatchingKeys(u,w.addedDocuments,T))));let O=E.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(Cs.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),l=l.insert(T,O),(function(z,V,re){return z.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=VA?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(E,O,w)&&p.push(n.li.updateTargetData(u,O))}));let g=$a(),y=Zt();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,w))})),p.push(qA(u,h,e.documentUpdates).next((w=>{g=w.Bs,y=w.Ls}))),!i.isEqual(Rt.min())){const w=n.li.getLastRemoteSnapshotVersion(u).next((T=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(w)}return Me.waitFor(p).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=l,u)))}function qA(s,e,n){let i=Zt(),l=Zt();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=$a();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Rt.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):st(ry,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function HA(s,e){const n=It(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Hg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function $A(s,e){const n=It(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((u=>u?(l=u,Me.resolve(l)):n.li.allocateTargetId(i).next((h=>(l=new Ai(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function hg(s,e,n){const i=It(s),l=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!Kl(h))throw h;st(ry,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function E2(s,e,n){const i=It(s);let l=Rt.min(),u=Zt();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,w){const T=It(g),E=T.Fs.get(w);return E!==void 0?Me.resolve(T.vs.get(E)):T.li.getTargetData(y,w)})(i,h,da(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,n?l:Rt.min(),n?u:Zt()))).next((p=>(WA(i,MR(e),p),{documents:p,ks:u})))))}function WA(s,e,n){let i=s.Ms.get(e)||Rt.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class S2{constructor(){this.activeTargetIds=VR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GA{constructor(){this.vo=new S2,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new S2,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KA{Mo(e){}shutdown(){}}const N2="ConnectivityMonitor";class C2{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){st(N2,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){st(N2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ed=null;function dg(){return ed===null?ed=(function(){return 268435456+Math.round(2147483648*Math.random())})():ed++,"0x"+ed.toString(16)}const jp="RestConnection",YA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class QA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Md?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,u){const h=dg(),p=this.Qo(e,n.toUriEncodedString());st(jp,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),w=$i(y);return this.zo(e,p,g,i,w).then((T=>(st(jp,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Dl(jp,`RPC '${e}' ${h} failed with error: `,T,"url: ",p,"request:",i),T}))}jo(e,n,i,l,u,h){return this.Wo(e,n,i,l,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const i=YA[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class XA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Ps="WebChannelConnection",Fc=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Al extends QA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Al.c_){const e=Rw();Fc(e,Cw.STAT_EVENT,(n=>{n.stat===eg.PROXY?st(Ps,"STAT_EVENT: detected buffering proxy"):n.stat===eg.NOPROXY&&st(Ps,"STAT_EVENT: detected no buffering proxy")})),Al.c_=!0}}zo(e,n,i,l,u){const h=dg();return new Promise(((p,g)=>{const y=new Sw;y.setWithCredentials(!0),y.listenOnce(Nw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case pd.NO_ERROR:const T=y.getResponseJson();st(Ps,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),p(T);break;case pd.TIMEOUT:st(Ps,`RPC '${e}' ${h} timed out`),g(new Ze(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case pd.HTTP_ERROR:const E=y.getStatus();if(st(Ps,`RPC '${e}' ${h} failed with status:`,E,"response text:",y.getResponseText()),E>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const W=O?.error;if(W&&W.status&&W.message){const z=(function(re){const J=re.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(J)>=0?J:Ne.UNKNOWN})(W.status);g(new Ze(z,W.message))}else g(new Ze(Ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ze(Ne.UNAVAILABLE,"Connection failed."));break;default:kt(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{st(Ps,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(l);st(Ps,`RPC '${e}' ${h} sending request:`,l),y.send(n,"POST",w,i,15)}))}T_(e,n,i){const l=dg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const y=u.join("");st(Ps,`Creating RPC '${e}' stream ${l}: ${y}`,p);const w=h.createWebChannel(y,p);this.I_(w);let T=!1,E=!1;const O=new XA({Ho:W=>{E?st(Ps,`Not sending because RPC '${e}' stream ${l} is closed:`,W):(T||(st(Ps,`Opening RPC '${e}' stream ${l} transport.`),w.open(),T=!0),st(Ps,`RPC '${e}' stream ${l} sending:`,W),w.send(W))},Jo:()=>w.close()});return Fc(w,Kc.EventType.OPEN,(()=>{E||(st(Ps,`RPC '${e}' stream ${l} transport opened.`),O.i_())})),Fc(w,Kc.EventType.CLOSE,(()=>{E||(E=!0,st(Ps,`RPC '${e}' stream ${l} transport closed`),O.o_(),this.E_(w))})),Fc(w,Kc.EventType.ERROR,(W=>{E||(E=!0,Dl(Ps,`RPC '${e}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),O.o_(new Ze(Ne.UNAVAILABLE,"The operation could not be completed")))})),Fc(w,Kc.EventType.MESSAGE,(W=>{if(!E){const z=W.data[0];gn(!!z,16349);const V=z,re=V?.error||V[0]?.error;if(re){st(Ps,`RPC '${e}' stream ${l} received error:`,re);const J=re.status;let ue=(function(De){const M=hs[De];if(M!==void 0)return f_(M)})(J),we=re.message;ue===void 0&&(ue=Ne.INTERNAL,we="Unknown error status: "+J+" with message "+re.message),E=!0,O.o_(new Ze(ue,we)),w.close()}else st(Ps,`RPC '${e}' stream ${l} received:`,z),O.__(z)}})),Al.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Aw()}}function JA(s){return new Al(s)}function Tp(){return typeof document<"u"?document:null}function sf(s){return new nA(s,!0)}Al.c_=!1;class N_{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const R2="PersistentStream";class C_{constructor(e,n,i,l,u,h,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new N_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ne.RESOURCE_EXHAUSTED?(Ha(n.toString()),Ha("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new Ze(Ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return st(R2,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(st(R2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZA extends C_{constructor(e,n,i,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aA(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Rt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Rt.min():h.readTime?fa(h.readTime):Rt.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=ug(this.serializer),n.addTarget=(function(u,h){let p;const g=h.target;if(p=ag(g)?{documents:lA(u,g)}:{query:cA(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=g_(u,h.resumeToken);const y=og(u,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(Rt.min())>0){p.readTime=Ld(u,h.snapshotVersion.toTimestamp());const y=og(u,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=hA(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=ug(this.serializer),n.removeTarget=e,this.K_(n)}}class eM extends C_{constructor(e,n,i,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return gn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=oA(e.writeResults,e.commitTime),i=fa(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=ug(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>iA(this.serializer,i)))};this.K_(n)}}class tM{}class nM extends tM{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ze(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,lg(n,i),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ze(Ne.UNKNOWN,u.toString())}))}jo(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,lg(n,i),l,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ze(Ne.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function sM(s,e,n,i){return new nM(s,e,n,i)}class rM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ha(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Mo="RemoteStore";class aM{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{Oo(this)&&(st(Mo,"Restarting streams for network reachability change."),await(async function(g){const y=It(g);y.Ea.add(4),await Cu(y),y.Va.set("Unknown"),y.Ea.delete(4),await rf(y)})(this))}))})),this.Va=new rM(i,l)}}async function rf(s){if(Oo(s))for(const e of s.Ra)await e(!0)}async function Cu(s){for(const e of s.Ra)await e(!1)}function R_(s,e){const n=It(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ly(n)?oy(n):Ql(n).O_()&&iy(n,e))}function ay(s,e){const n=It(s),i=Ql(n);n.Ia.delete(e),i.O_()&&A_(n,e),n.Ia.size===0&&(i.O_()?i.L_():Oo(n)&&n.Va.set("Unknown"))}function iy(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Rt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ql(s).Z_(e)}function A_(s,e){s.da.$e(e),Ql(s).X_(e)}function oy(s){s.da=new JR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ql(s).start(),s.Va.ua()}function ly(s){return Oo(s)&&!Ql(s).x_()&&s.Ia.size>0}function Oo(s){return It(s).Ea.size===0}function M_(s){s.da=void 0}async function iM(s){s.Va.set("Online")}async function oM(s){s.Ia.forEach(((e,n)=>{iy(s,e)}))}async function lM(s,e){M_(s),ly(s)?(s.Va.ha(e),oy(s)):s.Va.set("Unknown")}async function cM(s,e,n){if(s.Va.set("Online"),e instanceof p_&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,h),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){st(Mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vd(s,i)}else if(e instanceof bd?s.da.Xe(e):e instanceof m_?s.da.st(e):s.da.tt(e),!n.isEqual(Rt.min()))try{const i=await S_(s.localStore);n.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=u.Ia.get(y);w&&u.Ia.set(y,w.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const w=u.Ia.get(g);if(!w)return;u.Ia.set(g,w.withResumeToken(Cs.EMPTY_BYTE_STRING,w.snapshotVersion)),A_(u,g);const T=new Ai(w.target,g,y,w.sequenceNumber);iy(u,T)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){st(Mo,"Failed to raise snapshot:",i),await Vd(s,i)}}async function Vd(s,e,n){if(!Kl(e))throw e;s.Ea.add(1),await Cu(s),s.Va.set("Offline"),n||(n=()=>S_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{st(Mo,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await rf(s)}))}function I_(s,e){return e().catch((n=>Vd(s,n,e)))}async function af(s){const e=It(s),n=qi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Hg;for(;uM(e);)try{const l=await HA(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,hM(e,l)}catch(l){await Vd(e,l)}D_(e)&&P_(e)}function uM(s){return Oo(s)&&s.Ta.length<10}function hM(s,e){s.Ta.push(e);const n=qi(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function D_(s){return Oo(s)&&!qi(s).x_()&&s.Ta.length>0}function P_(s){qi(s).start()}async function dM(s){qi(s).ra()}async function fM(s){const e=qi(s);for(const n of s.Ta)e.ea(n.mutations)}async function mM(s,e,n){const i=s.Ta.shift(),l=Jg.from(i,e,n);await I_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await af(s)}async function pM(s,e){e&&qi(s).Y_&&await(async function(i,l){if((function(h){return YR(h)&&h!==Ne.ABORTED})(l.code)){const u=i.Ta.shift();qi(i).B_(),await I_(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await af(i)}})(s,e),D_(s)&&P_(s)}async function A2(s,e){const n=It(s);n.asyncQueue.verifyOperationInProgress(),st(Mo,"RemoteStore received new credentials");const i=Oo(n);n.Ea.add(3),await Cu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await rf(n)}async function gM(s,e){const n=It(s);e?(n.Ea.delete(2),await rf(n)):e||(n.Ea.add(2),await Cu(n),n.Va.set("Unknown"))}function Ql(s){return s.ma||(s.ma=(function(n,i,l){const u=It(n);return u.sa(),new ZA(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:iM.bind(null,s),Yo:oM.bind(null,s),t_:lM.bind(null,s),J_:cM.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),ly(s)?oy(s):s.Va.set("Unknown")):(await s.ma.stop(),M_(s))}))),s.ma}function qi(s){return s.fa||(s.fa=(function(n,i,l){const u=It(n);return u.sa(),new eM(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:dM.bind(null,s),t_:pM.bind(null,s),ta:fM.bind(null,s),na:mM.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await af(s)):(await s.fa.stop(),s.Ta.length>0&&(st(Mo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class cy{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const h=Date.now()+i,p=new cy(e,n,h,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uy(s,e){if(Ha("AsyncQueue",`${e}: ${s}`),Kl(s))return new Ze(Ne.UNAVAILABLE,`${e}: ${s}`);throw s}class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||yt.comparator(n.key,i.key):(n,i)=>yt.comparator(n.key,i.key),this.keyedMap=Yc(),this.sortedSet=new $n(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ml;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class M2{constructor(){this.ga=new $n(yt.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):kt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Bl{constructor(e,n,i,l,u,h,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,l,u){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new Bl(e,n,Ml.emptySet(n),h,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}class yM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class vM{constructor(){this.queries=I2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=It(n),u=l.queries;l.queries=I2(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Ze(Ne.ABORTED,"Firestore shutting down"))}}function I2(){return new Lo((s=>Zw(s)),Jd)}async function L_(s,e){const n=It(s);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new yM,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(h){const p=uy(h,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&hy(n)}async function O_(s,e){const n=It(s),i=e.query;let l=3;const u=n.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function bM(s,e){const n=It(s);let i=!1;for(const l of e){const u=l.query,h=n.queries.get(u);if(h){for(const p of h.ba)p.Fa(l)&&(i=!0);h.wa=l}}i&&hy(n)}function xM(s,e,n){const i=It(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(n);i.queries.delete(e)}function hy(s){s.Ca.forEach((e=>{e.next()}))}var fg,D2;(D2=fg||(fg={})).Ma="default",D2.Cache="cache";class V_{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Bl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fg.Cache}}class B_{constructor(e){this.key=e}}class U_{constructor(e){this.key=e}}class wM{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Zt(),this.mutatedKeys=Zt(),this.eu=e_(e),this.tu=new Ml(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new M2,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,T)=>{const E=l.get(w),O=Zd(this.query,T)?T:null,W=!!E&&this.mutatedKeys.has(E.key),z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let V=!1;E&&O?E.data.isEqual(O.data)?W!==z&&(i.track({type:3,doc:O}),V=!0):this.su(E,O)||(i.track({type:2,doc:O}),V=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(p=!0)):!E&&O?(i.track({type:0,doc:O}),V=!0):E&&!O&&(i.track({type:1,doc:E}),V=!0,(g||y)&&(p=!0)),V&&(O?(h=h.add(O),u=z?u.add(w):u.delete(w)):(h=h.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),u=u.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,T)=>(function(O,W){const z=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt(20277,{Vt:V})}};return z(O)-z(W)})(w.type,T.type)||this.eu(w.doc,T.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,h.length!==0||y?{snapshot:new Bl(this.query,e.tu,u,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new M2,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Zt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new U_(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new B_(i))})),n}cu(e){this.Za=e.ks,this.Ya=Zt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const dy="SyncEngine";class _M{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class kM{constructor(e){this.key=e,this.hu=!1}}class jM{constructor(e,n,i,l,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Lo((p=>Zw(p)),Jd),this.Iu=new Map,this.Eu=new Set,this.Ru=new $n(yt.comparator),this.Au=new Map,this.Vu=new ty,this.du={},this.mu=new Map,this.fu=Vl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TM(s,e,n=!0){const i=W_(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await z_(i,e,n,!0),l}async function EM(s,e){const n=W_(s);await z_(n,e,!0,!1)}async function z_(s,e,n,i){const l=await $A(s.localStore,da(e)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await SM(s,e,u,h==="current",l.resumeToken)),s.isPrimaryClient&&n&&R_(s.remoteStore,l),p}async function SM(s,e,n,i,l){s.pu=(T,E,O)=>(async function(z,V,re,J){let ue=V.view.ru(re);ue.Ss&&(ue=await E2(z.localStore,V.query,!1).then((({documents:M})=>V.view.ru(M,ue))));const we=J&&J.targetChanges.get(V.targetId),Be=J&&J.targetMismatches.get(V.targetId)!=null,De=V.view.applyChanges(ue,z.isPrimaryClient,we,Be);return L2(z,V.targetId,De.au),De.snapshot})(s,T,E,O);const u=await E2(s.localStore,e,!0),h=new wM(e,u.ks),p=h.ru(u.documents),g=Nu.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),y=h.applyChanges(p,s.isPrimaryClient,g);L2(s,n,y.au);const w=new _M(e,n,h);return s.Tu.set(e,w),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function NM(s,e,n){const i=It(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((h=>!Jd(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await hg(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&ay(i.remoteStore,l.targetId),mg(i,l.targetId)})).catch(Gl)):(mg(i,l.targetId),await hg(i.localStore,l.targetId,!0))}async function CM(s,e){const n=It(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ay(n.remoteStore,i.targetId))}async function RM(s,e,n){const i=OM(s);try{const l=await(function(h,p){const g=It(h),y=ht.now(),w=p.reduce(((O,W)=>O.add(W.key)),Zt());let T,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let W=$a(),z=Zt();return g.xs.getEntries(O,w).next((V=>{W=V,W.forEach(((re,J)=>{J.isValidDocument()||(z=z.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,W))).next((V=>{T=V;const re=[];for(const J of p){const ue=HR(J,T.get(J.key).overlayedDocument);ue!=null&&re.push(new Ki(J.key,ue,$w(ue.value.mapValue),Tr.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,re,p)})).next((V=>{E=V;const re=V.applyToLocalDocumentSet(T,z);return g.documentOverlayCache.saveOverlays(O,V.batchId,re)}))})).then((()=>({batchId:E.batchId,changes:n_(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(h,p,g){let y=h.du[h.currentUser.toKey()];y||(y=new $n(Jt)),y=y.insert(p,g),h.du[h.currentUser.toKey()]=y})(i,l.batchId,n),await Ru(i,l.changes),await af(i.remoteStore)}catch(l){const u=uy(l,"Failed to persist write");n.reject(u)}}async function F_(s,e){const n=It(s);try{const i=await FA(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=n.Au.get(u);h&&(gn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?gn(h.hu,14607):l.removedDocuments.size>0&&(gn(h.hu,42227),h.hu=!1))})),await Ru(n,i,e)}catch(i){await Gl(i)}}function P2(s,e,n){const i=It(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(h,p){const g=It(h);g.onlineState=p;let y=!1;g.queries.forEach(((w,T)=>{for(const E of T.ba)E.va(p)&&(y=!0)})),y&&hy(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function AM(s,e,n){const i=It(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let h=new $n(yt.comparator);h=h.insert(u,Os.newNoDocument(u,Rt.min()));const p=Zt().add(u),g=new nf(Rt.min(),new Map,new $n(Jt),h,p);await F_(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),fy(i)}else await hg(i.localStore,e,!1).then((()=>mg(i,e,n))).catch(Gl)}async function MM(s,e){const n=It(s),i=e.batch.batchId;try{const l=await zA(n.localStore,e);H_(n,i,null),q_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ru(n,l)}catch(l){await Gl(l)}}async function IM(s,e,n){const i=It(s);try{const l=await(function(h,p){const g=It(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next((T=>(gn(T!==null,37113),w=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(i.localStore,e);H_(i,e,n),q_(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ru(i,l)}catch(l){await Gl(l)}}function q_(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function H_(s,e,n){const i=It(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function mg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||$_(s,i)}))}function $_(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(ay(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),fy(s))}function L2(s,e,n){for(const i of n)i instanceof B_?(s.Vu.addReference(i.key,e),DM(s,i)):i instanceof U_?(st(dy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||$_(s,i.key)):kt(19791,{wu:i})}function DM(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(st(dy,"New document in limbo: "+n),s.Eu.add(i),fy(s))}function fy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new yt(An.fromString(e)),i=s.fu.next();s.Au.set(i,new kM(n)),s.Ru=s.Ru.insert(n,i),R_(s.remoteStore,new Ai(da(Yg(n.path)),i,"TargetPurposeLimboResolution",Yd.ce))}}async function Ru(s,e,n){const i=It(s),l=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const w=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){l.push(y);const w=sy.Es(g.targetId,y);u.push(w)}})))})),await Promise.all(h),i.Pu.J_(l),await(async function(g,y){const w=It(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Me.forEach(y,(E=>Me.forEach(E.Ts,(O=>w.persistence.referenceDelegate.addReference(T,E.targetId,O))).next((()=>Me.forEach(E.Is,(O=>w.persistence.referenceDelegate.removeReference(T,E.targetId,O)))))))))}catch(T){if(!Kl(T))throw T;st(ry,"Failed to update sequence numbers: "+T)}for(const T of y){const E=T.targetId;if(!T.fromCache){const O=w.vs.get(E),W=O.snapshotVersion,z=O.withLastLimboFreeSnapshotVersion(W);w.vs=w.vs.insert(E,z)}}})(i.localStore,u))}async function PM(s,e){const n=It(s);if(!n.currentUser.isEqual(e)){st(dy,"User change. New user:",e.toKey());const i=await E_(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ze(Ne.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ru(n,i.Ns)}}function LM(s,e){const n=It(s),i=n.Au.get(e);if(i&&i.hu)return Zt().add(i.key);{let l=Zt();const u=n.Iu.get(e);if(!u)return l;for(const h of u){const p=n.Tu.get(h);l=l.unionWith(p.view.nu)}return l}}function W_(s){const e=It(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=F_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AM.bind(null,e),e.Pu.J_=bM.bind(null,e.eventManager),e.Pu.yu=xM.bind(null,e.eventManager),e}function OM(s){const e=It(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IM.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UA(this.persistence,new OA,e.initialUser,this.serializer)}Cu(e){return new T_(ny.Vi,this.serializer)}Du(e){return new GA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class VM extends Bd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){gn(this.persistence.referenceDelegate instanceof Od,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new _A(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xs.withCacheSize(this.cacheSizeBytes):Xs.DEFAULT;return new T_((i=>Od.Vi(i,n)),this.serializer)}}class pg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>P2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PM.bind(null,this.syncEngine),await gM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vM})()}createDatastore(e){const n=sf(e.databaseInfo.databaseId),i=JA(e.databaseInfo);return sM(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,h,p){return new aM(i,l,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>P2(this.syncEngine,n,0)),(function(){return C2.v()?new C2:new KA})())}createSyncEngine(e,n){return(function(l,u,h,p,g,y,w){const T=new jM(l,u,h,p,g,y);return w&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=It(n);st(Mo,"RemoteStore shutting down."),i.Ea.add(5),await Cu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}pg.provider={build:()=>new pg};class G_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ha("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Hi="FirestoreClient";class BM{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=Ls.UNAUTHENTICATED,this.clientId=qg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{st(Hi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(st(Hi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=uy(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ep(s,e){s.asyncQueue.verifyOperationInProgress(),st(Hi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await E_(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function O2(s,e){s.asyncQueue.verifyOperationInProgress();const n=await UM(s);st(Hi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>A2(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>A2(e.remoteStore,l))),s._onlineComponents=e}async function UM(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){st(Hi,"Using user provided OfflineComponentProvider");try{await Ep(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Ne.FAILED_PRECONDITION||l.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Dl("Error using user provided cache. Falling back to memory cache: "+n),await Ep(s,new Bd)}}else st(Hi,"Using default OfflineComponentProvider"),await Ep(s,new VM(void 0));return s._offlineComponents}async function K_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(st(Hi,"Using user provided OnlineComponentProvider"),await O2(s,s._uninitializedComponentsProvider._online)):(st(Hi,"Using default OnlineComponentProvider"),await O2(s,new pg))),s._onlineComponents}function zM(s){return K_(s).then((e=>e.syncEngine))}async function Y_(s){const e=await K_(s),n=e.eventManager;return n.onListen=TM.bind(null,e.syncEngine),n.onUnlisten=NM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CM.bind(null,e.syncEngine),n}function FM(s,e,n={}){const i=new Ba;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const w=new G_({next:E=>{w.Nu(),h.enqueueAndForget((()=>O_(u,T)));const O=E.docs.has(p);!O&&E.fromCache?y.reject(new Ze(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&E.fromCache&&g&&g.source==="server"?y.reject(new Ze(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:E=>y.reject(E)}),T=new V_(Yg(p.path),w,{includeMetadataChanges:!0,Ka:!0});return L_(u,T)})(await Y_(s),s.asyncQueue,e,n,i))),i.promise}function qM(s,e,n={}){const i=new Ba;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const w=new G_({next:E=>{w.Nu(),h.enqueueAndForget((()=>O_(u,T))),E.fromCache&&g.source==="server"?y.reject(new Ze(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:E=>y.reject(E)}),T=new V_(p,w,{includeMetadataChanges:!0,Ka:!0});return L_(u,T)})(await Y_(s),s.asyncQueue,e,n,i))),i.promise}function HM(s,e){const n=new Ba;return s.asyncQueue.enqueueAndForget((async()=>RM(await zM(s),e,n))),n.promise}function Q_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const $M="ComponentProvider",V2=new Map;function WM(s,e,n,i,l){return new fR(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Q_(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const X_="firestore.googleapis.com",B2=!0;class U2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X_,this.ssl=B2}else this.host=e.host,this.ssl=e.ssl??B2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=j_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xA)throw new Ze(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ze(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ze(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ze(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class of{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new $C;switch(i.type){case"firstParty":return new YC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ze(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=V2.get(n);i&&(st($M,"Removing Datastore"),V2.delete(n),i.terminate())})(this),Promise.resolve()}}function GM(s,e,n,i={}){s=Fr(s,of);const l=$i(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(Sg(`https://${p}`),Ng("Firestore",!0)),u.host!==X_&&u.host!==p&&Dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!So(g,h)&&(s._setSettings(g),i.mockUserToken)){let y,w;if(typeof i.mockUserToken=="string")y=i.mockUserToken,w=Ls.MOCK_USER;else{y=Ux(i.mockUserToken,s._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ze(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Ls(T)}s._authCredentials=new WC(new Iw(y,w))}}class Yi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class ss{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ss(this.firestore,e,this._key)}toJSON(){return{type:ss._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Eu(n,ss._jsonSchema))return new ss(e,i||null,new yt(An.fromString(n.referencePath)))}}ss._jsonSchemaVersion="firestore/documentReference/1.0",ss._jsonSchema={type:fs("string",ss._jsonSchemaVersion),referencePath:fs("string")};class Oi extends Yi{constructor(e,n,i){super(e,n,Yg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ss(this.firestore,null,new yt(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function Pt(s,e,...n){if(s=Fn(s),Dw("collection","path",e),s instanceof of){const i=An.fromString(e,...n);return Z1(i),new Oi(s,null,i)}{if(!(s instanceof ss||s instanceof Oi))throw new Ze(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(An.fromString(e,...n));return Z1(i),new Oi(s.firestore,null,i)}}function Ge(s,e,...n){if(s=Fn(s),arguments.length===1&&(e=qg.newId()),Dw("doc","path",e),s instanceof of){const i=An.fromString(e,...n);return J1(i),new ss(s,null,new yt(i))}{if(!(s instanceof ss||s instanceof Oi))throw new Ze(Ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(An.fromString(e,...n));return J1(i),new ss(s.firestore,s instanceof Oi?s.converter:null,new yt(i))}}const z2="AsyncQueue";class F2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new N_(this,"async_queue_retry"),this._c=()=>{const i=Tp();i&&st(z2,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Tp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ba;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Kl(e))throw e;st(z2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ha("INTERNAL UNHANDLED ERROR: ",q2(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=cy.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&kt(47125,{Pc:q2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function q2(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Vo extends of{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new F2,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F2(e),this._firestoreClient=void 0,await e}}}function KM(s,e){const n=typeof s=="object"?s:Mg(),i=typeof s=="string"?s:Md,l=Hd(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=Ox("firestore");u&&GM(l,...u)}return l}function my(s){if(s._terminated)throw new Ze(Ne.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||YM(s),s._firestoreClient}function YM(s){const e=s._freezeSettings(),n=WM(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new BM(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jr(Cs.fromBase64String(e))}catch(n){throw new Ze(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jr(Cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,jr._jsonSchema))return jr.fromBase64String(e.bytes)}}jr._jsonSchemaVersion="firestore/bytes/1.0",jr._jsonSchema={type:fs("string",jr._jsonSchemaVersion),bytes:fs("string")};class py{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ze(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ns(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Au{constructor(e){this._methodName=e}}class ma{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ze(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ze(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ma._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,ma._jsonSchema))return new ma(e.latitude,e.longitude)}}ma._jsonSchemaVersion="firestore/geoPoint/1.0",ma._jsonSchema={type:fs("string",ma._jsonSchemaVersion),latitude:fs("number"),longitude:fs("number")};class Ur{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ur._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,Ur._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ur(e.vectorValues);throw new Ze(Ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ur._jsonSchemaVersion="firestore/vectorValue/1.0",Ur._jsonSchema={type:fs("string",Ur._jsonSchemaVersion),vectorValues:fs("object")};const QM=/^__.*__$/;class XM{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new Su(e,this.data,n,this.fieldTransforms)}}class J_{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Z_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt(40011,{dataSource:s})}}class gy{constructor(e,n,i,l,u,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new gy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ud(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Z_(this.dataSource)&&QM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class JM{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||sf(e)}createContext(e,n,i,l=!1){return new gy({dataSource:e,methodName:n,targetDoc:i,path:Ns.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lf(s){const e=s._freezeSettings(),n=sf(s._databaseId);return new JM(s._databaseId,!!e.ignoreUndefinedProperties,n)}function ek(s,e,n,i,l,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);by("Data must be an object, but it was:",h,i);const p=tk(i,h);let g,y;if(u.merge)g=new ur(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const w=[];for(const T of u.mergeFields){const E=Io(e,T,n);if(!h.contains(E))throw new Ze(Ne.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);rk(w,E)||w.push(E)}g=new ur(w),y=h.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=h.fieldTransforms;return new XM(new Js(p),g,y)}class cf extends Au{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cf}}class yy extends Au{_toFieldTransform(e){return new u_(e.path,new mu)}isEqual(e){return e instanceof yy}}class vy extends Au{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new yu(e.serializer,a_(e.serializer,this.Vc));return new u_(e.path,n)}isEqual(e){return e instanceof vy&&this.Vc===e.Vc}}function ZM(s,e,n,i){const l=s.createContext(1,e,n);by("Data must be an object, but it was:",l,i);const u=[],h=Js.empty();Gi(i,((g,y)=>{const w=sk(e,g,n);y=Fn(y);const T=l.childContextForFieldPath(w);if(y instanceof cf)u.push(w);else{const E=Mu(y,T);E!=null&&(u.push(w),h.set(w,E))}}));const p=new ur(u);return new J_(h,p,l.fieldTransforms)}function eI(s,e,n,i,l,u){const h=s.createContext(1,e,n),p=[Io(e,i,n)],g=[l];if(u.length%2!=0)throw new Ze(Ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<u.length;E+=2)p.push(Io(e,u[E])),g.push(u[E+1]);const y=[],w=Js.empty();for(let E=p.length-1;E>=0;--E)if(!rk(y,p[E])){const O=p[E];let W=g[E];W=Fn(W);const z=h.childContextForFieldPath(O);if(W instanceof cf)y.push(O);else{const V=Mu(W,z);V!=null&&(y.push(O),w.set(O,V))}}const T=new ur(y);return new J_(w,T,h.fieldTransforms)}function tI(s,e,n,i=!1){return Mu(n,s.createContext(i?4:3,e))}function Mu(s,e){if(nk(s=Fn(s)))return by("Unsupported field value:",e,s),tk(s,e);if(s instanceof Au)return(function(i,l){if(!Z_(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let h=0;for(const p of i){let g=Mu(p,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=Fn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return a_(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=ht.fromDate(i);return{timestampValue:Ld(l.serializer,u)}}if(i instanceof ht){const u=new ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ld(l.serializer,u)}}if(i instanceof ma)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jr)return{bytesValue:g_(l.serializer,i._byteString)};if(i instanceof ss){const u=l.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ey(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof Ur)return(function(h,p){const g=h instanceof Ur?h.toArray():h;return{mapValue:{fields:{[qw]:{stringValue:Hw},[Id]:{arrayValue:{values:g.map((w=>{if(typeof w!="number")throw p.createError("VectorValues must only contain numeric values.");return Qg(p.serializer,w)}))}}}}}})(i,l);if(k_(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Kd(i)}`)})(s,e)}function tk(s,e){const n={};return Ow(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(s,((i,l)=>{const u=Mu(l,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function nk(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ht||s instanceof ma||s instanceof jr||s instanceof ss||s instanceof Au||s instanceof Ur||k_(s))}function by(s,e,n){if(!nk(n)||!Pw(n)){const i=Kd(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Io(s,e,n){if((e=Fn(e))instanceof py)return e._internalPath;if(typeof e=="string")return sk(s,e);throw Ud("Field path arguments must be of type string or ",s,!1,void 0,n)}const nI=new RegExp("[~\\*/\\[\\]]");function sk(s,e,n){if(e.search(nI)>=0)throw Ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new py(...e.split("."))._internalPath}catch{throw Ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Ud(s,e,n,i,l){const u=i&&!i.isEmpty(),h=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${l}`),g+=")"),new Ze(Ne.INVALID_ARGUMENT,p+s+g)}function rk(s,e){return s.some((n=>n.isEqual(e)))}class sI{convertValue(e,n="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ns(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw kt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Gi(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[Id].arrayValue?.values?.map((i=>ns(i.doubleValue)));return new Ur(n)}convertGeoPoint(e){return new ma(ns(e.latitude),ns(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Xd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const n=Ui(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=An.fromString(e);gn(__(i),9688,{name:e});const l=new hu(i.get(1),i.get(3)),u=new yt(i.popFirst(5));return l.isEqual(n)||Ha(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class ak extends sI{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ss(this.firestore,null,n)}}function cr(){return new yy("serverTimestamp")}function Ua(s){return new vy("increment",s)}const H2="@firebase/firestore",$2="4.10.0";class ik{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Io("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rI extends ik{data(){return super.data()}}function aI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ze(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xy{}class wy extends xy{}function mn(s,e,...n){let i=[];e instanceof xy&&i.push(e),i=i.concat(n),(function(u){const h=u.filter((g=>g instanceof _y)).length,p=u.filter((g=>g instanceof uf)).length;if(h>1||h>0&&p>0)throw new Ze(Ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class uf extends wy{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new uf(e,n,i)}_apply(e){const n=this._parse(e);return ok(e._query,n),new Yi(e.firestore,e.converter,ig(e._query,n))}_parse(e){const n=lf(e.firestore);return(function(u,h,p,g,y,w,T){let E;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Ze(Ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){G2(T,w);const W=[];for(const z of T)W.push(W2(g,u,z));E={arrayValue:{values:W}}}else E=W2(g,u,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||G2(T,w),E=tI(p,h,T,w==="in"||w==="not-in");return ds.create(y,w,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nn(s,e,n){const i=e,l=Io("where",s);return uf._create(l,i,n)}class _y extends xy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _y(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:qr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let h=l;const p=u.getFlattenedFilters();for(const g of p)ok(h,g),h=ig(h,g)})(e._query,n),new Yi(e.firestore,e.converter,ig(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ky extends wy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ky(e,n)}_apply(e){const n=(function(l,u,h){if(l.startAt!==null)throw new Ze(Ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ze(Ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fu(u,h)})(e._query,this._field,this._direction);return new Yi(e.firestore,e.converter,AR(e._query,n))}}function Ul(s,e="asc"){const n=e,i=Io("orderBy",s);return ky._create(i,n)}class jy extends wy{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new jy(e,n,i)}_apply(e){return new Yi(e.firestore,e.converter,Pd(e._query,this._limit,this._limitType))}}function zl(s){return nR("limit",s),jy._create("limit",s,"F")}function W2(s,e,n){if(typeof(n=Fn(n))=="string"){if(n==="")throw new Ze(Ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jw(e)&&n.indexOf("/")!==-1)throw new Ze(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(An.fromString(n));if(!yt.isDocumentKey(i))throw new Ze(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return o2(s,new yt(i))}if(n instanceof ss)return o2(s,n._key);throw new Ze(Ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kd(n)}.`)}function G2(s,e){if(!Array.isArray(s)||s.length===0)throw new Ze(Ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ok(s,e){const n=(function(l,u){for(const h of l)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ze(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function lk(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class Xc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends ik{constructor(e,n,i,l,u,h){super(e,n,i,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Io("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:fs("string",jo._jsonSchemaVersion),bundleSource:fs("string","DocumentSnapshot"),bundleName:fs("string"),bundle:fs("string")};class xd extends jo{data(e={}){return super.data(e)}}class Il{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Xc(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new xd(this._firestore,this._userDataWriter,i.key,i,new Xc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ze(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((p=>{const g=new xd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Xc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new xd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Xc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,w=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:iI(p.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt(61501,{type:s})}}Il._jsonSchemaVersion="firestore/querySnapshot/1.0",Il._jsonSchema={type:fs("string",Il._jsonSchemaVersion),bundleSource:fs("string","QuerySnapshot"),bundleName:fs("string"),bundle:fs("string")};function Mn(s){s=Fr(s,ss);const e=Fr(s.firestore,Vo),n=my(e);return FM(n,s._key).then((i=>oI(e,s,i)))}function rn(s){s=Fr(s,Yi);const e=Fr(s.firestore,Vo),n=my(e),i=new ak(e);return aI(s._query),qM(n,s._query).then((l=>new Il(e,i,s,l)))}function wn(s,e,n){s=Fr(s,ss);const i=Fr(s.firestore,Vo),l=lk(s.converter,e,n),u=lf(i);return hf(i,[ek(u,"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,Tr.none())])}function oa(s,e,n,...i){s=Fr(s,ss);const l=Fr(s.firestore,Vo),u=lf(l);let h;return h=typeof(e=Fn(e))=="string"||e instanceof py?eI(u,"updateDoc",s._key,e,n,i):ZM(u,"updateDoc",s._key,e),hf(l,[h.toMutation(s._key,Tr.exists(!0))])}function Vs(s){return hf(Fr(s.firestore,Vo),[new Xg(s._key,Tr.none())])}function Wa(s,e){const n=Fr(s.firestore,Vo),i=Ge(s),l=lk(s.converter,e),u=lf(s.firestore);return hf(n,[ek(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,Tr.exists(!1))]).then((()=>i))}function hf(s,e){const n=my(s);return HM(n,e)}function oI(s,e,n){const i=n.docs.get(e._key),l=new ak(s);return new jo(s,l,e._key,i,new Xc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){HC(Po),No(new Vi("firestore",((i,{instanceIdentifier:l,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new Vo(new GC(i.getProvider("auth-internal")),new QC(h,i.getProvider("app-check-internal")),mR(h,l),h);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ca(H2,$2,e),ca(H2,$2,"esm2020")})();var lI="firebase",cI="12.8.0";ca(lI,cI,"app");const ck="firebasestorage.googleapis.com",uk="storageBucket",uI=120*1e3,hI=600*1e3;class Xn extends ga{constructor(e,n,i=0){super(Sp(e),`Firebase Storage: ${n} (${Sp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qn||(Qn={}));function Sp(s){return"storage/"+s}function Ty(){const s="An unknown error occurred, please check the error payload for server response.";return new Xn(Qn.UNKNOWN,s)}function dI(s){return new Xn(Qn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function fI(s){return new Xn(Qn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xn(Qn.UNAUTHENTICATED,s)}function pI(){return new Xn(Qn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gI(s){return new Xn(Qn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function yI(){return new Xn(Qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vI(){return new Xn(Qn.CANCELED,"User canceled the upload/download.")}function bI(s){return new Xn(Qn.INVALID_URL,"Invalid URL '"+s+"'.")}function xI(s){return new Xn(Qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function wI(){return new Xn(Qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uk+"' property when initializing the app?")}function _I(){return new Xn(Qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kI(){return new Xn(Qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jI(s){return new Xn(Qn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gg(s){return new Xn(Qn.INVALID_ARGUMENT,s)}function hk(){return new Xn(Qn.APP_DELETED,"The Firebase app was deleted.")}function TI(s){return new Xn(Qn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ru(s,e){return new Xn(Qn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function qc(s){throw new Xn(Qn.INTERNAL_ERROR,"Internal error: "+s)}class Hs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Hs.makeFromUrl(e,n)}catch{return new Hs(e,"")}if(i.path==="")return i;throw xI(e)}static makeFromUrl(e,n){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(we){we.path.charAt(we.path.length-1)==="/"&&(we.path_=we.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+l+h,"i"),g={bucket:1,path:3};function y(we){we.path_=decodeURIComponent(we.path)}const w="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",O=new RegExp(`^https?://${T}/${w}/b/${l}/o${E}`,"i"),W={bucket:1,path:3},z=n===ck?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",re=new RegExp(`^https?://${z}/${l}/${V}`,"i"),ue=[{regex:p,indices:g,postModify:u},{regex:O,indices:W,postModify:y},{regex:re,indices:{bucket:1,path:2},postModify:y}];for(let we=0;we<ue.length;we++){const Be=ue[we],De=Be.regex.exec(e);if(De){const M=De[Be.indices.bucket];let S=De[Be.indices.path];S||(S=""),i=new Hs(M,S),Be.postModify(i);break}}if(i==null)throw bI(e);return i}}class EI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function SI(s,e,n){let i=1,l=null,u=null,h=!1,p=0;function g(){return p===2}let y=!1;function w(...V){y||(y=!0,e.apply(null,V))}function T(V){l=setTimeout(()=>{l=null,s(O,g())},V)}function E(){u&&clearTimeout(u)}function O(V,...re){if(y){E();return}if(V){E(),w.call(null,V,...re);return}if(g()||h){E(),w.call(null,V,...re);return}i<64&&(i*=2);let ue;p===1?(p=2,ue=0):ue=(i+Math.random())*1e3,T(ue)}let W=!1;function z(V){W||(W=!0,E(),!y&&(l!==null?(V||(p=2),clearTimeout(l),T(0)):V||(p=1)))}return T(0),u=setTimeout(()=>{h=!0,z(!0)},n),z}function NI(s){s(!1)}function CI(s){return s!==void 0}function RI(s){return typeof s=="object"&&!Array.isArray(s)}function Ey(s){return typeof s=="string"||s instanceof String}function K2(s){return Sy()&&s instanceof Blob}function Sy(){return typeof Blob<"u"}function yg(s,e,n,i){if(i<e)throw gg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw gg(`Invalid value for '${s}'. Expected ${n} or less.`)}function df(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function dk(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);n=n+l+"&"}return n=n.slice(0,-1),n}var To;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(To||(To={}));function AI(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class MI{constructor(e,n,i,l,u,h,p,g,y,w,T,E=!0,O=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=T,this.retry=E,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((W,z)=>{this.resolve_=W,this.reject_=z,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new td(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===To.NO_ERROR,g=u.getStatus();if(!p||AI(g,this.additionalRetryCodes_)&&this.retry){const w=u.getErrorCode()===To.ABORT;i(!1,new td(!1,null,w));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new td(y,u))})},n=(i,l)=>{const u=this.resolve_,h=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());CI(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=Ty();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(l.canceled){const g=this.appDelete_?hk():vI();h(g)}else{const g=yI();h(g)}};this.canceled_?n(!1,new td(!1,null,!0)):this.backoffId_=SI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&NI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class td{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function II(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function DI(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PI(s,e){e&&(s["X-Firebase-GMPID"]=e)}function LI(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function OI(s,e,n,i,l,u,h=!0,p=!1){const g=dk(s.urlParams),y=s.url+g,w=Object.assign({},s.headers);return PI(w,e),II(w,n),DI(w,u),LI(w,i),new MI(y,s.method,w,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,h,p)}function VI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BI(...s){const e=VI();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(Sy())return new Blob(s);throw new Xn(Qn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function UI(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function zI(s){if(typeof atob>"u")throw jI("base-64");return atob(s)}const la={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Np{constructor(e,n){this.data=e,this.contentType=n||null}}function FI(s,e){switch(s){case la.RAW:return new Np(fk(e));case la.BASE64:case la.BASE64URL:return new Np(mk(s,e));case la.DATA_URL:return new Np(HI(e),$I(e))}throw Ty()}function fk(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++n);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function qI(s){let e;try{e=decodeURIComponent(s)}catch{throw ru(la.DATA_URL,"Malformed data URL.")}return fk(e)}function mk(s,e){switch(s){case la.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw ru(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case la.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw ru(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zI(e)}catch(l){throw l.message.includes("polyfill")?l:ru(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i}class pk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ru(la.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=WI(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function HI(s){const e=new pk(s);return e.base64?mk(la.BASE64,e.rest):qI(e.rest)}function $I(s){return new pk(s).contentType}function WI(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Ri{constructor(e,n){let i=0,l="";K2(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(K2(this.data_)){const i=this.data_,l=UI(i,e,n);return l===null?null:new Ri(l)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ri(i,!0)}}static getBlob(...e){if(Sy()){const n=e.map(i=>i instanceof Ri?i.data_:i);return new Ri(BI.apply(null,n))}else{const n=e.map(h=>Ey(h)?FI(la.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const l=new Uint8Array(i);let u=0;return n.forEach(h=>{for(let p=0;p<h.length;p++)l[u++]=h[p]}),new Ri(l,!0)}}uploadData(){return this.data_}}function Ny(s){let e;try{e=JSON.parse(s)}catch{return null}return RI(e)?e:null}function GI(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function KI(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function gk(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function YI(s,e){return e}class qs{constructor(e,n,i,l){this.server=e,this.local=n||e,this.writable=!!i,this.xform=l||YI}}let nd=null;function QI(s){return!Ey(s)||s.length<2?s:gk(s)}function yk(){if(nd)return nd;const s=[];s.push(new qs("bucket")),s.push(new qs("generation")),s.push(new qs("metageneration")),s.push(new qs("name","fullPath",!0));function e(u,h){return QI(h)}const n=new qs("name");n.xform=e,s.push(n);function i(u,h){return h!==void 0?Number(h):h}const l=new qs("size");return l.xform=i,s.push(l),s.push(new qs("timeCreated")),s.push(new qs("updated")),s.push(new qs("md5Hash",null,!0)),s.push(new qs("cacheControl",null,!0)),s.push(new qs("contentDisposition",null,!0)),s.push(new qs("contentEncoding",null,!0)),s.push(new qs("contentLanguage",null,!0)),s.push(new qs("contentType",null,!0)),s.push(new qs("metadata","customMetadata",!0)),nd=s,nd}function XI(s,e){function n(){const i=s.bucket,l=s.fullPath,u=new Hs(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function JI(s,e,n){const i={};i.type="file";const l=n.length;for(let u=0;u<l;u++){const h=n[u];i[h.local]=h.xform(i,e[h.server])}return XI(i,s),i}function vk(s,e,n){const i=Ny(e);return i===null?null:JI(s,i,n)}function ZI(s,e,n,i){const l=Ny(e);if(l===null||!Ey(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(y=>{const w=s.bucket,T=s.fullPath,E="/b/"+h(w)+"/o/"+h(T),O=df(E,n,i),W=dk({alt:"media",token:y});return O+W})[0]}function e3(s,e){const n={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}const Y2="prefixes",Q2="items";function t3(s,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Y2])for(const l of n[Y2]){const u=l.replace(/\/$/,""),h=s._makeStorageReference(new Hs(e,u));i.prefixes.push(h)}if(n[Q2])for(const l of n[Q2]){const u=s._makeStorageReference(new Hs(e,l.name));i.items.push(u)}return i}function n3(s,e,n){const i=Ny(n);return i===null?null:t3(s,e,i)}class Cy{constructor(e,n,i,l){this.url=e,this.method=n,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ry(s){if(!s)throw Ty()}function s3(s,e){function n(i,l){const u=vk(s,l,e);return Ry(u!==null),u}return n}function r3(s,e){function n(i,l){const u=n3(s,e,l);return Ry(u!==null),u}return n}function a3(s,e){function n(i,l){const u=vk(s,l,e);return Ry(u!==null),ZI(u,l,s.host,s._protocol)}return n}function Ay(s){function e(n,i){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=pI():l=mI():n.getStatus()===402?l=fI(s.bucket):n.getStatus()===403?l=gI(s.path):l=i,l.status=n.getStatus(),l.serverResponse=i.serverResponse,l}return e}function i3(s){const e=Ay(s);function n(i,l){let u=e(i,l);return i.getStatus()===404&&(u=dI(s.path)),u.serverResponse=l.serverResponse,u}return n}function o3(s,e,n,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),i&&(u.pageToken=i),l&&(u.maxResults=l);const h=e.bucketOnlyServerUrl(),p=df(h,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,w=new Cy(p,g,r3(s,e.bucket),y);return w.urlParams=u,w.errorHandler=Ay(e),w}function l3(s,e,n){const i=e.fullServerUrl(),l=df(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new Cy(l,u,a3(s,n),h);return p.errorHandler=i3(e),p}function c3(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function u3(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=c3(null,e)),i}function h3(s,e,n,i,l){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let ue="";for(let we=0;we<2;we++)ue=ue+Math.random().toString().slice(2);return ue}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const y=u3(e,i,l),w=e3(y,n),T="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,E=`\r
--`+g+"--",O=Ri.getBlob(T,i,E);if(O===null)throw _I();const W={name:y.fullPath},z=df(u,s.host,s._protocol),V="POST",re=s.maxUploadRetryTime,J=new Cy(z,V,s3(s,n),re);return J.urlParams=W,J.headers=h,J.body=O.uploadData(),J.errorHandler=Ay(e),J}class d3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=To.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=To.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=To.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,l,u){if(this.sent_)throw qc("cannot .send() more than once");if($i(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class f3 extends d3{initXhr(){this.xhr_.responseType="text"}}function My(){return new f3}class Do{constructor(e,n){this._service=e,n instanceof Hs?this._location=n:this._location=Hs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Do(e,n)}get root(){const e=new Hs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gk(this._location.path)}get storage(){return this._service}get parent(){const e=GI(this._location.path);if(e===null)return null;const n=new Hs(this._location.bucket,e);return new Do(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TI(e)}}function m3(s,e,n){s._throwIfRoot("uploadBytes");const i=h3(s.storage,s._location,yk(),new Ri(e,!0),n);return s.storage.makeRequestWithTokens(i,My).then(l=>({metadata:l,ref:s}))}function p3(s){const e={prefixes:[],items:[]};return bk(s,e).then(()=>e)}async function bk(s,e,n){const l=await g3(s,{pageToken:n});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await bk(s,e,l.nextPageToken)}function g3(s,e){e!=null&&typeof e.maxResults=="number"&&yg("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=o3(s.storage,s._location,"/",n.pageToken,n.maxResults);return s.storage.makeRequestWithTokens(i,My)}function y3(s){s._throwIfRoot("getDownloadURL");const e=l3(s.storage,s._location,yk());return s.storage.makeRequestWithTokens(e,My).then(n=>{if(n===null)throw kI();return n})}function v3(s,e){const n=KI(s._location.path,e),i=new Hs(s._location.bucket,n);return new Do(s.storage,i)}function b3(s){return/^[A-Za-z]+:\/\//.test(s)}function x3(s,e){return new Do(s,e)}function xk(s,e){if(s instanceof Iy){const n=s;if(n._bucket==null)throw wI();const i=new Do(n,n._bucket);return e!=null?xk(i,e):i}else return e!==void 0?v3(s,e):s}function w3(s,e){if(e&&b3(e)){if(s instanceof Iy)return x3(s,e);throw gg("To use ref(service, url), the first argument must be a Storage instance.")}else return xk(s,e)}function X2(s,e){const n=e?.[uk];return n==null?null:Hs.makeFromBucketSpec(n,s)}function _3(s,e,n,i={}){s.host=`${e}:${n}`;const l=$i(e);l&&(Sg(`https://${s.host}/b`),Ng("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:Ux(u,s.app.options.projectId))}class Iy{constructor(e,n,i,l,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=ck,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uI,this._maxUploadRetryTime=hI,this._requests=new Set,l!=null?this._bucket=Hs.makeFromBucketSpec(l,this._host):this._bucket=X2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hs.makeFromBucketSpec(this._url,e):this._bucket=X2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Do(this,e)}_makeRequest(e,n,i,l,u=!0){if(this._deleted)return new EI(hk());{const h=OI(e,this._appId,i,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,l).getPromise()}}const J2="@firebase/storage",Z2="0.14.0";const wk="storage";function vg(s,e,n){return s=Fn(s),m3(s,e,n)}function ex(s){return s=Fn(s),p3(s)}function Eo(s){return s=Fn(s),y3(s)}function Mi(s,e){return s=Fn(s),w3(s,e)}function k3(s=Mg(),e){s=Fn(s);const i=Hd(s,wk).getImmediate({identifier:e}),l=Ox("storage");return l&&j3(i,...l),i}function j3(s,e,n,i={}){_3(s,e,n,i)}function T3(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new Iy(n,i,l,e,Po)}function E3(){No(new Vi(wk,T3,"PUBLIC").setMultipleInstances(!0)),ca(J2,Z2,""),ca(J2,Z2,"esm2020")}E3();const _k={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},Dy=Ag(_k),Hc=Tw(Dy),_e=KM(Dy),Ii=k3(Dy),S3=Ag(_k,"secondary"),HD=Tw(S3),N3="EYdciKDOi3UYBLk1u8hHams5tmO2",kk=_.createContext();function dr(){return _.useContext(kk)}function C3({children:s}){const[e,n]=_.useState(null),[i,l]=_.useState(!1),[u,h]=_.useState(!1),[p,g]=_.useState(null),[y,w]=_.useState(!0);_.useEffect(()=>M4(Hc,async re=>{if(n(re),re)if(re.uid===N3)l(!0),h(!1),g(null);else{l(!1);try{const J=mn(Pt(_e,"clients"),nn("uid","==",re.uid)),ue=await rn(J);if(ue.empty)h(!1),g(null);else{const we=ue.docs[0];h(!0),g({id:we.id,...we.data()})}}catch(J){console.error("Error fetching client data:",J),h(!1),g(null)}}else l(!1),h(!1),g(null);w(!1)}),[]);const z={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:V=>{g(re=>re&&{...re,...V})},login:async(V,re,J=!0)=>(await C4(Hc,J?yw:Bg),await N4(Hc,V,re)),logout:()=>I4(Hc),resetPassword:V=>S4(Hc,V),loading:y};return a.jsx(kk.Provider,{value:z,children:s})}const jk=_.createContext();function Gr(){return _.useContext(jk)}function R3({children:s}){const[e,n]=_.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=_.useState(()=>localStorage.getItem("accent")||"red");_.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),_.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(jk.Provider,{value:p,children:s})}function A3(){const[s,e]=_.useState(""),[n,i]=_.useState(""),[l,u]=_.useState(!0),[h,p]=_.useState(""),[g,y]=_.useState(!1),[w,T]=_.useState(!1),[E,O]=_.useState(!1),{login:W,resetPassword:z,currentUser:V,isAdmin:re,isClient:J,clientData:ue,loading:we}=dr(),Be=Rs();if(_.useEffect(()=>{if(!we&&V){if(re)Be("/dashboard");else if(J){const S=ue?.clientType;Be(S==="core_buddy"?"/client/core-buddy":S==="circuit_vip"||S==="circuit_dropin"?"/client/circuit":"/client")}}},[we,V,re,J,ue,Be]),we)return null;const De=async S=>{S.preventDefault(),p(""),y(!0);try{await W(s,n,l)}catch(A){p(A.message||"Failed to log in"),y(!1)}},M=async S=>{if(S.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await z(s.trim()),O(!0)}catch(A){A.code==="auth/user-not-found"?p("No account found with this email"):p(A.message||"Failed to send reset email")}y(!1)};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:w?"Reset Password":"Client Portal"})]}),h&&a.jsx("div",{className:"error-message",children:h}),E?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{T(!1),O(!1),p("")},children:"Back to Log In"})]}):w?a.jsxs("form",{onSubmit:M,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:De,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:n,onChange:S=>i(S.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:S=>u(S.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!0),p("")},children:"Forgot password?"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Hr({active:s}){const e=Rs(),{clientData:n}=dr(),i=n?.clientType==="block"&&n?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"})}),a.jsx("span",{children:"Workouts"})]}),a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),i&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Iu(s,e,n,i,l){const u=[];for(let h=0;h<s;h++){const p=(h*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:n+i*Math.sin(p),x2:e+l*Math.cos(p),y2:n+l*Math.sin(p),thick:h%5===0})}return u}const Py=Iu(60,100,100,85,96),ko=Iu(60,100,100,78,94),M3=Iu(60,100,100,82,94);Iu(60,50,50,38,46);const I3=Iu(60,40,40,30,37),Cp=[10,25,50,100,200,500,1e3],ji=5;function bl(s){return s.toISOString().split("T")[0]}function D3(s){let e=0;for(const n of Cp){if(s<n)return{prev:e,next:n};e=n}return{prev:Cp[Cp.length-1],next:s+100}}const P3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},L3={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},Rp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}];function tx(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Ap(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function O3(s,e=800){return new Promise(n=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,h=i.height;u>h?u>e&&(h=Math.round(h*e/u),u=e):h>e&&(u=Math.round(u*e/h),h=e),l.width=u,l.height=h,l.getContext("2d").drawImage(i,0,0,u,h),l.toBlob(p=>n(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}const Qs={first_workout:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 4v16"}),a.jsx("path",{d:"M18 4v16"}),a.jsx("path",{d:"M6 12h12"}),a.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),a.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]}),workouts_10:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),a.jsx("path",{d:"M12 14v4"}),a.jsx("path",{d:"M10 18h4"})]}),workouts_25:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),workouts_50:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12h4"}),a.jsx("path",{d:"M16 12h4"}),a.jsx("path",{d:"M12 4v4"}),a.jsx("path",{d:"M12 16v4"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]}),workouts_100:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),streak_2:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M9 16l2 2 4-4"})]}),streak_4:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M8 16h8"}),a.jsx("path",{d:"M12 14v4"})]}),streak_8:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),a.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]}),programme_done:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("path",{d:"M4 22h16"}),a.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),a.jsx("path",{d:"M9 12l2 2 4-4"})]}),habits_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),nutrition_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),a.jsx("path",{d:"M9 7h6"})]}),first_pb:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M12 14v8"}),a.jsx("path",{d:"M9 18l3 3 3-3"}),a.jsx("path",{d:"M10 6l2 2 2-2"})]}),pbs_5:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 20h18"}),a.jsx("path",{d:"M5 20V10l4-6"}),a.jsx("path",{d:"M9 20V4"}),a.jsx("path",{d:"M13 20V10l4-6"}),a.jsx("path",{d:"M17 20V4"}),a.jsx("path",{d:"M21 20V10"})]}),leaderboard_join:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},nx=[{id:"first_workout",icon:Qs.first_workout,name:"First Rep",desc:"Complete your first workout",category:"workouts"},{id:"workouts_10",icon:Qs.workouts_10,name:"On Fire",desc:"Complete 10 workouts",category:"workouts"},{id:"workouts_25",icon:Qs.workouts_25,name:"Lightning",desc:"Complete 25 workouts",category:"workouts"},{id:"workouts_50",icon:Qs.workouts_50,name:"Iron Will",desc:"Complete 50 workouts",category:"workouts"},{id:"workouts_100",icon:Qs.workouts_100,name:"Century Club",desc:"Complete 100 workouts",category:"workouts"},{id:"streak_2",icon:Qs.streak_2,name:"2 Week Warrior",desc:"2-week workout streak",category:"streak"},{id:"streak_4",icon:Qs.streak_4,name:"Month Strong",desc:"4-week workout streak",category:"streak"},{id:"streak_8",icon:Qs.streak_8,name:"Unbreakable",desc:"8-week workout streak",category:"streak"},{id:"programme_done",icon:Qs.programme_done,name:"Finisher",desc:"Complete a programme",category:"programme"},{id:"habits_7",icon:Qs.habits_7,name:"Habit Machine",desc:"7-day perfect habit streak",category:"habits"},{id:"nutrition_7",icon:Qs.nutrition_7,name:"Fuel Master",desc:"Log nutrition 7 days in a row",category:"nutrition"},{id:"first_pb",icon:Qs.first_pb,name:"Record Breaker",desc:"Set your first PB",category:"pbs"},{id:"pbs_5",icon:Qs.pbs_5,name:"Climbing",desc:"Set 5 personal bests",category:"pbs"},{id:"leaderboard_join",icon:Qs.leaderboard_join,name:"Competitor",desc:"Join the leaderboard",category:"social"}];function V3(){const{currentUser:s,isClient:e,clientData:n,logout:i,updateClientData:l,loading:u}=dr(),{isDark:h,toggleTheme:p}=Gr(),g=Rs(),[y,w]=_.useState({hours:0,minutes:0,seconds:0}),[T,E]=_.useState(0),[O,W]=_.useState(0),[z,V]=_.useState(""),[re,J]=_.useState(0),[ue,we]=_.useState(0),[Be,De]=_.useState(!1),[M,S]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[A,P]=_.useState(null),[D,H]=_.useState(0),[I,ze]=_.useState(null),[pt,Q]=_.useState(!1),[Te,Le]=_.useState(!1),[ce,Oe]=_.useState(0),[C,U]=_.useState(0),[le,pe]=_.useState([]),[Ae,Pe]=_.useState([]),[Qe,Fe]=_.useState(null),[at,Dt]=_.useState(!1),Wt=_.useRef(null),[lt,dt]=_.useState([]),[oe,an]=_.useState(null),[Ct,bt]=_.useState(0),[wt,ct]=_.useState(0),[Xe,qt]=_.useState(0),[Wn,Et]=_.useState(0),[At,Nn]=_.useState(null),jt=_.useCallback((b,j="info")=>{Nn({message:b,type:j}),setTimeout(()=>Nn(null),4e3)},[]),[ln,B]=_.useState([]),[ee,ve]=_.useState(!1),[Ue,Ke]=_.useState(""),[Ve,Ye]=_.useState(null),[He,qe]=_.useState(null),[St,Gt]=_.useState(!1),[Lt,on]=_.useState(new Set),[Cn,Tt]=_.useState(new Set),[Nt,Kt]=_.useState({}),[hn,Jn]=_.useState({}),[qn,yn]=_.useState({}),Ln=_.useRef(null),rs=_.useRef(null);_.useEffect(()=>{!u&&!s&&g("/")},[u,s,g]),_.useEffect(()=>{if(n)try{const b=sessionStorage.getItem(`cbDash_${n.id}`);if(b){const j=JSON.parse(b);W(j.programmePct??0),V(j.programmeName??""),J(j.totalWorkouts??0),we(j.habitWeekPct??0),S(j.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),P(j.nutritionTargetData??null),H(j.todayHabitsCount??0),ze(j.nextSession??null),Q(j.hasProgramme??!1),Le(j.programmeComplete??!1),Oe(j.weeklyWorkouts??0),U(j.pbCount??0),pe(j.topPBs??[]),Pe(j.leaderboardTop3??[]),dt(j.unlockedBadges??[]),bt(j.streakWeeks??0),De(!0)}}catch{}},[n]),_.useEffect(()=>{n?.photoURL&&Fe(n.photoURL)},[n]);const vs=async b=>{const j=b.target.files?.[0];if(!(!j||!n)){if(!j.type.startsWith("image/")){jt("Please select an image file","error");return}if(j.size>5*1024*1024){jt("Image must be under 5MB","error");return}Dt(!0);try{const L=await new Promise(be=>{const je=new Image;je.onload=()=>{const tt=document.createElement("canvas"),et=400;let q=je.width,Z=je.height;q>Z?(Z=Z/q*et,q=et):(q=q/Z*et,Z=et),tt.width=q,tt.height=Z,tt.getContext("2d").drawImage(je,0,0,q,Z),tt.toBlob(ne=>be(ne),"image/jpeg",.75)},je.src=URL.createObjectURL(j)}),Y=Mi(Ii,`profilePhotos/${n.id}`);await vg(Y,L);const Ie=await Eo(Y);await oa(Ge(_e,"clients",n.id),{photoURL:Ie}),Fe(Ie),l({photoURL:Ie}),jt("Profile photo updated!","success")}catch(L){console.error("Photo upload error:",L),jt("Failed to upload photo","error")}Dt(!1),Wt.current&&(Wt.current.value="")}};_.useEffect(()=>{const b=()=>{const L=new Date,Y=new Date(L);Y.setHours(23,59,59,999);const Ie=Y-L,be=Math.floor(Ie/(1e3*60*60)),je=Math.floor(Ie%(1e3*60*60)/(1e3*60)),tt=Math.floor(Ie%(1e3*60)/1e3);w({hours:be,minutes:je,seconds:tt}),E(60-tt)};b();const j=setInterval(b,1e3);return()=>clearInterval(j)},[]),_.useEffect(()=>{const b=setInterval(()=>{Et(j=>(j+1)%Rp.length)},8e3);return()=>clearInterval(b)},[]),_.useEffect(()=>{if(!s||!n)return;(async()=>{let j=null,L=0,Y=[],Ie=!1;try{const be=bl(new Date),je=await Mn(Ge(_e,"clientProgrammes",n.id));if(je.exists()){const is=je.data(),ms=P3[is.templateId];if(Q(!0),ms){const ps=is.completedSessions||{},Ft=Object.keys(ps).length,Rn=ms.duration*ms.daysPerWeek;W(Rn>0?Math.round(Ft/Rn*100):0);const In=is.templateId.replace(/_/g," ").replace(/\b\w/g,On=>On.toUpperCase());V(In);const er=L3[is.templateId];let Is=!1;for(let On=1;On<=ms.duration&&!Is;On++)for(let Hn=0;Hn<ms.daysPerWeek&&!Is;Hn++)ps[`w${On}d${Hn}`]||(ze({week:On,dayIdx:Hn,label:er?.[Hn]||`Day ${Hn+1}`}),Is=!0);Is||(Le(!0),Ie=!0)}}const tt=Pt(_e,"workoutLogs"),et=mn(tt,nn("clientId","==",n.id));j=await rn(et);const q=j.docs.filter(is=>is.data().type!=="programme").length;J(q);const Z=new Date,ne=Z.getDay(),ge=ne===0?6:ne-1,Ce=new Date(Z);Ce.setDate(Z.getDate()-ge),Ce.setHours(0,0,0,0);const We=bl(Ce),it=j.docs.filter(is=>(is.data().date||"")>=We).length;Oe(it);const Je=Pt(_e,"habitLogs"),Bt=mn(Je,nn("clientId","==",n.id),nn("date","==",be)),vn=await rn(Bt);let zt=0;if(!vn.empty){const is=vn.docs[0].data().habits||{};zt=Object.values(is).filter(Boolean).length}we(Math.round(zt/ji*100)),H(zt);const pn=await Mn(Ge(_e,"nutritionTargets",n.id));pn.exists()&&P(pn.data());const Zs=await Mn(Ge(_e,"nutritionLogs",`${n.id}_${be}`));if(Zs.exists()){const ms=(Zs.data().entries||[]).reduce((ps,Ft)=>({protein:ps.protein+(Ft.protein||0),carbs:ps.carbs+(Ft.carbs||0),fats:ps.fats+(Ft.fats||0),calories:ps.calories+(Ft.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});S(ms)}}catch(be){console.error("Error loading dashboard stats:",be)}try{let be=[];const je=await Mn(Ge(_e,"coreBuddyPBs",n.id));if(je.exists()){const tt=je.data().exercises||{};U(Object.keys(tt).length),L=Object.keys(tt).length,be=Object.entries(tt).sort(([,et],[,q])=>(q.weight||0)-(et.weight||0)).slice(0,3).map(([et,q])=>({name:et,weight:q.weight,reps:q.reps}))}if(be.length===0){const tt={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},et=mn(Pt(_e,"personalBests"),nn("clientId","==",n.id)),q=await rn(et);if(!q.empty){const Z={};q.docs.forEach(ge=>{const Ce=ge.data().benchmarks||{};Object.entries(Ce).forEach(([We,it])=>{if(!it.weight||!tt[We])return;const Je=(it.weight||0)*(it.reps||1);(!Z[We]||Je>(Z[We].weight||0)*(Z[We].reps||1))&&(Z[We]={name:tt[We],weight:it.weight,reps:it.reps})})});const ne=Object.values(Z);U(ne.length),L=ne.length,be=ne.sort((ge,Ce)=>(Ce.weight||0)-(ge.weight||0)).slice(0,3)}}Y=be,pe(be)}catch(be){console.error("PB fetch error:",be)}try{const be=Pt(_e,"clients"),je=mn(be,nn("leaderboardOptIn","==",!0)),et=(await rn(je)).docs.map(q=>({id:q.id,name:q.data().name,photoURL:q.data().photoURL||null}));Pe(et.slice(0,3))}catch(be){console.error("Leaderboard preview error:",be)}try{let be=0;if(j){const ge=j.docs.map(Ce=>Ce.data().date).filter(Boolean).sort().reverse();if(ge.length>0){const Ce=new Date;let We=new Date(Ce);e:for(let it=0;it<52;it++){const Je=new Date(We),Bt=Je.getDay(),vn=Bt===0?6:Bt-1;Je.setDate(Je.getDate()-vn),Je.setHours(0,0,0,0);const zt=new Date(Je);zt.setDate(zt.getDate()+7);const pn=bl(Je),Zs=bl(zt);if(ge.some(ms=>ms>=pn&&ms<Zs))be++;else{if(it>0)break e;break}We.setDate(We.getDate()-7)}}}bt(be);let je=0;for(let ge=0;ge<30;ge++){const Ce=new Date;Ce.setDate(Ce.getDate()-ge);const We=bl(Ce);try{const it=await rn(mn(Pt(_e,"habitLogs"),nn("clientId","==",n.id),nn("date","==",We)));if(it.empty)break;{const Je=it.docs[0].data().habits||{};if(Object.values(Je).filter(Boolean).length>=ji)je++;else break}}catch{break}}ct(je);let tt=0;for(let ge=0;ge<30;ge++){const Ce=new Date;Ce.setDate(Ce.getDate()-ge);const We=bl(Ce);try{const it=await Mn(Ge(_e,"nutritionLogs",`${n.id}_${We}`));if(it.exists()&&(it.data().entries||[]).length>0)tt++;else break}catch{break}}qt(tt);const et=j?j.docs.length:0,q=[],Z=ge=>q.push(ge);et>=1&&Z("first_workout"),et>=10&&Z("workouts_10"),et>=25&&Z("workouts_25"),et>=50&&Z("workouts_50"),et>=100&&Z("workouts_100"),be>=2&&Z("streak_2"),be>=4&&Z("streak_4"),be>=8&&Z("streak_8"),Ie&&Z("programme_done"),je>=7&&Z("habits_7"),tt>=7&&Z("nutrition_7"),(L>0||Y.length>0)&&Z("first_pb"),L>=5&&Z("pbs_5"),n.leaderboardOptIn&&Z("leaderboard_join"),dt(q);const ne={};q.forEach(ge=>{ne[ge]={unlockedAt:new Date().toISOString()}}),wn(Ge(_e,"achievements",n.id),{badges:ne,updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(be){console.error("Achievement computation error:",be)}De(!0)})()},[s,n]),_.useEffect(()=>{if(!(!Be||!n))try{sessionStorage.setItem(`cbDash_${n.id}`,JSON.stringify({programmePct:O,programmeName:z,totalWorkouts:re,habitWeekPct:ue,nutritionTotals:M,nutritionTargetData:A,todayHabitsCount:D,nextSession:I,hasProgramme:pt,programmeComplete:Te,weeklyWorkouts:ce,pbCount:C,topPBs:le,leaderboardTop3:Ae,unlockedBadges:lt,streakWeeks:Ct}))}catch{}},[Be,O,z,re,ue,M,A,D,I,pt,Te,ce,C,le,Ae,lt,Ct,n]);const Gn=b=>{const j=b.currentTarget,L=j.querySelector(".ripple");L&&L.remove();const Y=j.getBoundingClientRect(),Ie=Math.max(Y.width,Y.height),be=b.clientX-Y.left-Ie/2,je=b.clientY-Y.top-Ie/2,tt=document.createElement("span");tt.className="ripple",tt.style.cssText=`width:${Ie}px;height:${Ie}px;left:${be}px;top:${je}px;`,j.appendChild(tt),setTimeout(()=>tt.remove(),600)},As=n?.name?.split(" ")[0]||"there",{prev:G,next:ye}=D3(re),Ee=ye>G?Math.round((re-G)/(ye-G)*100):100,ke=[{label:"Programme",value:`${O}%`,pct:O,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${re}`,pct:Ee,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${ue}%`,pct:ue,color:"#38B6FF",size:"normal"}],me=b=>!A||!A[b]?0:Math.min(Math.round(M[b]/A[b]*100),100),nt=(()=>{const b=new Date().getHours();return Be&&D>=ji&&M.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:b>=5&&b<12?{main:"Rise and grind,",sub:"let's get after it!"}:b>=12&&b<17?{main:"Oye",sub:"crack on and make it count!"}:b>=17&&b<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),ft=Be?pt&&I&&!Te?{label:"NEXT SESSION",message:`Week ${I.week}, Day ${I.dayIdx+1}  ${I.label}`,cta:"Continue",action:()=>g("/client/core-buddy/programmes"),pct:O,ringLabel:`${O}%`}:D<ji?{label:"DAILY HABITS",message:`${D}/${ji} completed`,cta:"Open Habits",action:()=>g("/client/core-buddy/consistency"),pct:ue,ringLabel:`${D}/${ji}`}:M.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>g("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:pt?Te?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>g("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>g("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null,rt=_.useCallback(async()=>{if(n){ve(!0);try{const b=await rn(mn(Pt(_e,"posts"),nn("authorId","==",n.id),Ul("createdAt","desc"),zl(30)));B(b.docs.map(L=>({id:L.id,...L.data()})));const j=await rn(mn(Pt(_e,"postLikes"),nn("userId","==",n.id)));on(new Set(j.docs.map(L=>L.data().postId)))}catch(b){console.error("Error loading journey:",b)}finally{ve(!1)}}},[n]);_.useEffect(()=>{Be&&n&&rt()},[Be,n,rt]);const vt=b=>{const j=b.target.files?.[0];if(j){if(!j.type.startsWith("image/")){jt("Please select an image file","error");return}if(j.size>10*1024*1024){jt("Image must be under 10MB","error");return}Ye(j),qe(URL.createObjectURL(j))}},mt=()=>{Ye(null),He&&URL.revokeObjectURL(He),qe(null),rs.current&&(rs.current.value="")},en=async()=>{if(!(!Ue.trim()&&!Ve||St||!n)){Gt(!0);try{let b=null;if(Ve){const j=await O3(Ve),L=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,Y=Mi(Ii,`postImages/${n.id}/${L}`);await vg(Y,j),b=await Eo(Y)}await Wa(Pt(_e,"posts"),{authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:Ue.trim(),type:b?"image":"text",imageURL:b||null,createdAt:cr(),likeCount:0,commentCount:0}),Ke(""),mt(),Ln.current&&(Ln.current.style.height="auto"),await rt(),jt("Posted!","success")}catch(b){console.error("Error posting:",b),jt("Failed to post","error")}finally{Gt(!1)}}},Ms=async b=>{if(window.confirm("Delete this post?"))try{await Vs(Ge(_e,"posts",b)),B(j=>j.filter(L=>L.id!==b)),jt("Post deleted","info")}catch(j){console.error("Delete error:",j),jt("Failed to delete","error")}},as=async b=>{if(!n)return;const j=n.id,L=`${b}_${j}`,Y=Lt.has(b),Ie=new Set(Lt);Y?Ie.delete(b):Ie.add(b),on(Ie),B(be=>be.map(je=>je.id===b?{...je,likeCount:Math.max(0,(je.likeCount||0)+(Y?-1:1))}:je));try{Y?(await Vs(Ge(_e,"postLikes",L)),await oa(Ge(_e,"posts",b),{likeCount:Ua(-1)})):(await wn(Ge(_e,"postLikes",L),{postId:b,userId:j,createdAt:cr()}),await oa(Ge(_e,"posts",b),{likeCount:Ua(1)}))}catch(be){console.error("Like error:",be),rt()}},bs=async b=>{try{const j=await rn(mn(Pt(_e,"postComments"),nn("postId","==",b),Ul("createdAt","asc"),zl(50)));Kt(L=>({...L,[b]:j.docs.map(Y=>({id:Y.id,...Y.data()}))}))}catch(j){console.error("Error loading comments:",j)}},En=b=>{const j=new Set(Cn);j.has(b)?j.delete(b):(j.add(b),Nt[b]||bs(b)),Tt(j)},$=async b=>{const j=(hn[b]||"").trim();if(!(!j||!n)){yn(L=>({...L,[b]:!0}));try{await Wa(Pt(_e,"postComments"),{postId:b,authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:j,createdAt:cr()}),await oa(Ge(_e,"posts",b),{commentCount:Ua(1)}),Jn(L=>({...L,[b]:""})),B(L=>L.map(Y=>Y.id===b?{...Y,commentCount:(Y.commentCount||0)+1}:Y)),await bs(b)}catch(L){console.error("Comment error:",L),jt("Failed to comment","error")}finally{yn(L=>({...L,[b]:!1}))}}},he=b=>{Ke(b.target.value),b.target.style.height="auto",b.target.style.height=Math.min(b.target.scrollHeight,120)+"px"};return a.jsxs("div",{className:"cb-dashboard","data-theme":h?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:h?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:Py.map((b,j)=>{const L=j<T;return a.jsx("line",{x1:b.x1,y1:b.y1,x2:b.x2,y2:b.y2,className:`ring-tick ${L?"elapsed":"remaining"}`,strokeWidth:b.thick?"3":"2"},j)})}),a.jsx("div",{className:"cb-ring-center",children:a.jsxs("div",{className:"cb-ring-logo",onClick:()=>Wt.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:Qe||"/Logo.webp",alt:Qe?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${at?" uploading":""}`,children:at?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:Wt,type:"file",accept:"image/*",onChange:vs,style:{display:"none"}})]})})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(y.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(y.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(y.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Rp[Wn].text," ",a.jsx("strong",{children:Rp[Wn].bold})]},Wn)]}),a.jsx("div",{className:"cb-stats-row",children:ke.map(b=>{const j=(b.size==="large",38),L=2*Math.PI*j,Y=L-b.pct/100*L;return a.jsxs("div",{className:`cb-stat-item${b.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:"cb-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:j}),a.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:j,style:{stroke:b.color},strokeDasharray:L,strokeDashoffset:Y})]}),a.jsx("span",{className:"cb-stat-value",style:{color:b.color},children:b.value})]}),a.jsx("span",{className:"cb-stat-label",children:b.label})]},b.label)})}),a.jsxs("p",{className:"cb-coach-msg",children:[nt.main," ",a.jsx("strong",{children:As}),"  ",nt.sub]}),ft&&a.jsxs("button",{className:"cb-nudge-card",onClick:ft.action||void 0,style:ft.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-ft.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:ft.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:ft.label}),a.jsx("span",{className:"cb-nudge-title",children:ft.message}),ft.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[ft.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[a.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:b=>{Gn(b),g("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:me("protein"),color:"#14b8a6"},{label:"C",pct:me("carbs"),color:"var(--color-primary)"},{label:"F",pct:me("fats"),color:"#eab308"},{label:"Cal",pct:me("calories"),color:"#38B6FF"}].map(b=>{const L=2*Math.PI*38,Y=L-b.pct/100*L;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:b.color},strokeDasharray:L,strokeDashoffset:Y})]}),a.jsx("span",{style:{color:b.color},children:b.label})]},b.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:b=>{Gn(b),g("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[ce," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[re," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-grid-row",children:[a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:b=>{Gn(b),g("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:"cb-habit-dots",children:Array.from({length:ji},(b,j)=>a.jsx("span",{className:`cb-habit-dot${j<D?" done":""}`},j))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[D,"/",ji," today"]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:b=>{Gn(b),g("/client/personal-bests?mode=corebuddy")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"PBs"}),le.length>0?a.jsx("div",{className:"cb-pb-preview",children:le.slice(0,2).map(b=>a.jsxs("div",{className:"cb-pb-entry",children:[a.jsx("span",{className:"cb-pb-name",children:b.name}),a.jsxs("span",{className:"cb-pb-value",children:[b.weight,"kg"]})]},b.name))}):a.jsxs("div",{className:"cb-progress-preview",children:[a.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{children:"Start lifting!"})]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:b=>{Gn(b),g("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),Ae.length>0?a.jsx("div",{className:"cb-lb-preview",children:Ae.map((b,j)=>{const L=["#FFD700","#A8B4C0","#CD7F32"][j],Y=b.name?b.name.split(" ").map(be=>be[0]).join("").slice(0,2).toUpperCase():"?",Ie=b.id===n?.id;return a.jsxs("div",{className:`cb-lb-entry${Ie?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:L},children:b.photoURL?a.jsx("img",{src:b.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:Y})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:L},children:["#",j+1]})]},b.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:b=>{Gn(b),g("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-feed ripple-btn",onClick:b=>{Gn(b),g("/client/core-buddy/feed")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Feed"}),a.jsx("p",{children:"See what your buddies are up to and share updates"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-achievements-section",children:[a.jsx("h3",{className:"cb-achievements-title",children:"Achievements"}),a.jsx("div",{className:"cb-badges-scroll",children:nx.map(b=>{const j=lt.includes(b.id);return a.jsxs("button",{className:`cb-badge${j?" unlocked":" locked"}`,onClick:()=>an(oe?.id===b.id?null:b),children:[a.jsx("span",{className:"cb-badge-icon",children:b.icon}),a.jsx("span",{className:"cb-badge-name",children:b.name})]},b.id)})}),oe&&a.jsxs("div",{className:"cb-badge-detail",children:[a.jsx("span",{className:"cb-badge-detail-icon",children:oe.icon}),a.jsxs("div",{className:"cb-badge-detail-info",children:[a.jsx("strong",{children:oe.name}),a.jsx("span",{children:oe.desc}),lt.includes(oe.id)?a.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):a.jsx("span",{className:"cb-badge-status locked",children:"Locked"})]})]}),a.jsxs("p",{className:"cb-badges-count",children:[lt.length,"/",nx.length," unlocked"]})]}),a.jsxs("div",{className:"cb-journey-section",children:[a.jsx("h3",{className:"cb-journey-title",children:"My Journey"}),a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:Qe?a.jsx("img",{src:Qe,alt:""}):a.jsx("span",{children:Ap(n?.name)})}),a.jsxs("div",{className:"journey-compose-body",children:[a.jsx("textarea",{ref:Ln,placeholder:"Share your progress...",value:Ue,onChange:he,rows:1,maxLength:500}),He&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:He,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:mt,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>rs.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:rs,type:"file",accept:"image/*",onChange:vt,hidden:!0}),(Ue.trim()||Ve)&&a.jsx("button",{className:"journey-post-btn",onClick:en,disabled:St,children:St?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),ee?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"cb-spinner"})}):ln.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"Start sharing your fitness journey!"})]}):a.jsx("div",{className:"journey-list",children:ln.map(b=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:b.authorPhotoURL?a.jsx("img",{src:b.authorPhotoURL,alt:""}):a.jsx("span",{children:Ap(b.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:b.authorName}),a.jsx("span",{className:"journey-post-time",children:tx(b.createdAt)})]}),a.jsx("button",{className:"journey-delete-btn",onClick:()=>Ms(b.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),b.content&&a.jsx("p",{className:"journey-post-content",children:b.content}),b.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:b.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${Lt.has(b.id)?" liked":""}`,onClick:()=>as(b.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:Lt.has(b.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:b.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${Cn.has(b.id)?" active":""}`,onClick:()=>En(b.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:b.commentCount||0})]})]}),Cn.has(b.id)&&a.jsxs("div",{className:"journey-comments",children:[Nt[b.id]?.length>0?Nt[b.id].map(j=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",children:j.authorPhotoURL?a.jsx("img",{src:j.authorPhotoURL,alt:""}):a.jsx("span",{children:Ap(j.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:j.authorName}),a.jsx("span",{className:"journey-comment-text",children:j.content})]}),a.jsx("span",{className:"journey-comment-time",children:tx(j.createdAt)})]})]},j.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:hn[b.id]||"",onChange:j=>Jn(L=>({...L,[b.id]:j.target.value})),onKeyDown:j=>{j.key==="Enter"&&$(b.id)},maxLength:300}),a.jsx("button",{onClick:()=>$(b.id),disabled:!(hn[b.id]||"").trim()||qn[b.id],children:qn[b.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},b.id))})]})]})]}),a.jsx(Hr,{active:"home"}),At&&a.jsxs("div",{className:`toast-notification ${At.type}`,children:[At.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),At.message]})]})}const Mp=new Map;function Ti(){return new Date().toISOString().split("T")[0]}const sx=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],B3={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function U3(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function z3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=dr(),{isDark:l,toggleTheme:u,accent:h}=Gr(),p=Rs(),[g,y]=_.useState("loading"),[w,T]=_.useState(null),[E,O]=_.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[W,z]=_.useState(null),[V,re]=_.useState(Ti()),[J,ue]=_.useState({entries:[],water:0}),[we,Be]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[De,M]=_.useState(!1),[S,A]=_.useState(!1),[P,D]=_.useState(()=>{const b=new Date;return{year:b.getFullYear(),month:b.getMonth()}}),[H,I]=_.useState(U3),[ze,pt]=_.useState(null),[Q,Te]=_.useState(null),[Le,ce]=_.useState(!1),[Oe,C]=_.useState(null),[U,le]=_.useState(""),[pe,Ae]=_.useState(!1),[Pe,Qe]=_.useState(""),[Fe,at]=_.useState([]),[Dt,Wt]=_.useState(!1),[lt,dt]=_.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[oe,an]=_.useState(null),[Ct,bt]=_.useState("100"),[wt,ct]=_.useState(0),[Xe,qt]=_.useState("weight"),[Wn,Et]=_.useState(0),[At,Nn]=_.useState(null);_.useRef(null);const jt=_.useRef(!1),ln=_.useRef(null),B=_.useRef(null),ee=_.useRef(null),ve=_.useCallback((b,j="info")=>{Nn({message:b,type:j}),setTimeout(()=>Nn(null),3e3)},[]);_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const j=await Mn(Ge(_e,"nutritionTargets",n.id));j.exists()?(T(j.data()),y("dashboard")):y("setup")}catch(j){console.error("Error loading nutrition data:",j),y("setup")}})()},[n?.id]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const j=await Mn(Ge(_e,"nutritionLogs",`${n.id}_${V}`));if(j.exists()){const L=j.data();ue({entries:L.entries||[],water:L.water||0})}else ue({entries:[],water:0})}catch(j){console.error("Error loading log:",j),ue({entries:[],water:0})}})()},[n?.id,V]),_.useEffect(()=>{const b=J.entries.reduce((j,L)=>({protein:j.protein+(L.protein||0),carbs:j.carbs+(L.carbs||0),fats:j.fats+(L.fats||0),calories:j.calories+(L.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Be(b)},[J.entries]);const Ue=async b=>{try{await wn(Ge(_e,"nutritionLogs",`${n.id}_${V}`),{clientId:n.id,date:V,entries:b.entries,water:b.water,updatedAt:ht.now()})}catch(j){console.error("Error saving nutrition log:",j)}},Ke=V===Ti(),Ve=(b,j)=>new Date(b,j+1,0).getDate(),Ye=(b,j)=>new Date(b,j,1).getDay(),He=["January","February","March","April","May","June","July","August","September","October","November","December"],qe=["Su","Mo","Tu","We","Th","Fr","Sa"],St=()=>{let b=parseFloat(E.weight);E.weightUnit==="lbs"&&(b*=.453592);let j;E.heightUnit==="cm"?j=parseFloat(E.height):j=(parseFloat(E.heightFeet)||0)*30.48+(parseFloat(E.heightInches)||0)*2.54;const L=parseInt(E.age);let Y=E.gender==="male"?10*b+6.25*j-5*L+5:10*b+6.25*j-5*L-161;const be=Y*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[E.dailyActivity],je={low:100,moderate:200,high:300,daily:400},tt=Math.round(be+je[E.trainingFrequency]);let et=tt,q,Z;switch(E.goal){case"lose":et=tt*(1-{light:.15,moderate:.2,harsh:.25}[E.deficitLevel]),q=2.2,Z=.3;break;case"build":et=tt*1.1,q=2,Z=.22;break;default:q=1.8,Z=.25}et=Math.max(et,E.gender==="male"?1400:1100);const ne=Math.round(b*q),ge=Math.round(et*Z/9),Ce=Math.max(0,Math.round((et-ne*4-ge*9)/4));z({calories:Math.round(et),protein:ne,carbs:Ce,fats:ge,bmr:Math.round(Y),neat:Math.round(be),exerciseAdd:je[E.trainingFrequency],tdee:Math.round(tt)})},Gt=async()=>{if(W)try{const b={clientId:n.id,calories:W.calories,protein:W.protein,carbs:W.carbs,fats:W.fats,waterGoal:8,goal:E.goal,updatedAt:ht.now()};await wn(Ge(_e,"nutritionTargets",n.id),b),T(b),y("dashboard"),ve("Macro targets saved!","success")}catch(b){console.error("Error saving targets:",b),ve("Failed to save targets. Please try again.","error")}},Lt=()=>{const b=E.weight&&parseFloat(E.weight)>0,j=E.age&&parseInt(E.age)>0,L=E.heightUnit==="cm"?E.height&&parseFloat(E.height)>0:E.heightFeet&&parseFloat(E.heightFeet)>0||E.heightInches&&parseFloat(E.heightInches)>0;return b&&j&&L},on="nut_favourite_foods",Cn=()=>{try{return JSON.parse(localStorage.getItem(on)||"[]")}catch{return[]}},Tt=b=>Cn().some(j=>j.name.toLowerCase()===(b||"").toLowerCase()),Nt=b=>{const j=Cn(),L=j.findIndex(Y=>Y.name.toLowerCase()===b.name.toLowerCase());L>=0?j.splice(L,1):j.unshift({name:b.name,protein:b.protein,carbs:b.carbs,fats:b.fats,calories:b.calories,serving:b.serving,per100g:b.per100g||null,servingUnit:b.servingUnit||"g",portion:b.portion||null}),localStorage.setItem(on,JSON.stringify(j)),Et(Y=>Y+1)},Kt=b=>{const j=[...J.entries,{...b,meal:H,id:Date.now(),addedAt:new Date().toISOString()}],L={...J,entries:j};ue(L),Ue(L),Te(null),an(null),bt("100"),ct(0),qt("weight"),dt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),ve("Food added!","success")},hn=b=>{const j=J.entries.filter(Y=>Y.id!==b),L={...J,entries:j};ue(L),Ue(L)},Jn=_.useRef(null),qn=async()=>{ce(!0);const b=document.querySelector("#barcode-reader");if(!b){ce(!1),ve("Scanner container not found.","error");return}if(!Jn.current)try{const L=await Sr(()=>import("./quagga.min-BbicSfvA.js").then(Y=>Y.q),[]);Jn.current=L.default}catch(L){console.error("Failed to load barcode scanner:",L),ce(!1),ve("Could not load scanner.","error");return}const j=Jn.current;j.init({inputStream:{type:"LiveStream",target:b,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},L=>{if(L){console.error("Quagga init error:",L),ce(!1),ve("Could not access camera. Check permissions.","error");return}j.start(),jt.current=!0}),j.onDetected(L=>{const Y=L.codeResult.decodedCodes?.filter(be=>be.error!==void 0)?.map(be=>be.error)||[];if((Y.length>0?Y.reduce((be,je)=>be+je,0)/Y.length:1)<.15){const be=L.codeResult.code;j.offDetected(),C(be)}})},yn=()=>{const b=Jn.current;jt.current&&b&&(b.stop(),b.offDetected(),jt.current=!1),ce(!1)},Ln=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,rs=b=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((b||"").replace(/\s/g,"")),vs=b=>{if(!b)return{value:100,unit:"g"};const j=b.toLowerCase().replace(/\s/g,""),L=j.match(/([\d.]+)/),Y=L?parseFloat(L[1]):100;return rs(b)?/cl/.test(j)?{value:Y*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(j)&&!/ml/.test(j)?{value:Y*1e3,unit:"ml"}:{value:Y,unit:"ml"}:{value:Y,unit:"g"}},Gn=b=>{if(rs(b.serving_size)||rs(b.quantity))return"ml";const j=b.product_name||b.product_name_en||"";return Ln.test(j)?"ml":"g"},As=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],G=(b,j)=>{const L=b||"",Y=L.match(/\((\d+\.?\d*)\s*g\)/i),Ie=L.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(Y&&Ie){const tt=parseFloat(Y[1]);let et=Ie[1].replace(/^\d+\s*/,"").trim();if(et&&tt>0)return{label:et,weight:tt}}const be=L.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(be){const tt=parseFloat(be[1]);let et=be[2].replace(/^\d+\s*/,"").trim();if(et&&tt>0)return{label:et,weight:tt}}const je=j||"";for(const{pattern:tt,label:et,weight:q}of As)if(tt.test(je))return{label:et,weight:q};return null},ye=b=>{const j=b.nutriments||{},L=Gn(b),Y=vs(b.serving_size),Ie=L==="ml"?Y.unit==="ml"?Y.value:100:Y.value,be=b.product_name||b.product_name_en||"Unknown Product",je=G(b.serving_size,be);return{name:be,brand:b.brands||"",image:b.image_small_url||b.image_url||null,servingSize:b.serving_size||"100g",servingValue:Ie,servingUnit:L,portion:je,protein:Math.round(j.proteins_100g||j.proteins||0),carbs:Math.round(j.carbohydrates_100g||j.carbohydrates||0),fats:Math.round(j.fat_100g||j.fat||0),calories:Math.round(j["energy-kcal_100g"]||j["energy-kcal"]||(j.energy_100g?j.energy_100g/4.184:0)),per100g:!0}},Ee=async b=>{Ae(!0);try{const j=`https://world.openfoodfacts.org/api/v2/product/${b}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,L=await fetch(j);if(!L.ok)throw new Error(`HTTP ${L.status}`);const Y=await L.json();if(Y.status==="success"||Y.status===1||Y.product){const Ie=ye(Y.product);Ie.calories===0&&Ie.protein===0&&Ie.carbs===0?ve("Product found but no nutrition data available.","error"):(an(Ie),Ie.portion?(ct(1),bt(String(Ie.portion.weight)),qt("portion")):(ct(0),bt(String(Ie.servingValue||100)),qt("weight")),le(""))}else ve("Product not found. Try search or manual entry.","error")}catch(j){console.error("Barcode lookup error:",j),ve("Failed to look up product. Check your connection.","error")}Ae(!1)},ke=(b,j,L)=>{const Y=b.toLowerCase().trim(),Ie=j.toLowerCase().trim(),be=L.toLowerCase().trim();let je=0;return(Y===be||Y===be+"s"||Y+"s"===be)&&(je+=100),(Y.endsWith(" "+be)||Y.endsWith(" "+be+"s"))&&(je+=40),(Y.startsWith(be+" ")||Y.startsWith(be+"s "))&&(je+=15),be.split(/\s+/).some(et=>Ie===et||Ie.startsWith(et))&&(je+=30),je+=Math.max(0,30-Y.length),je},me=async()=>{if(!Pe.trim())return;ln.current&&ln.current.abort();const b=new AbortController;ln.current=b;const j=Pe.trim().toLowerCase(),L=j.split(/\s+/).filter(Boolean);if(Mp.has(j)){at(Mp.get(j));return}Wt(!0);try{const Ie=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Pe.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,be=await fetch(Ie,{signal:b.signal});if(!be.ok)throw new Error(`HTTP ${be.status}`);const tt=((await be.json()).products||[]).map(et=>ye(et)).filter(et=>et.name!=="Unknown Product"&&(et.calories>0||et.protein>0)).filter(et=>{const q=(et.name+" "+et.brand).toLowerCase();return L.every(Z=>q.includes(Z))}).sort((et,q)=>ke(q.name,q.brand,j)-ke(et.name,et.brand,j)).slice(0,10);Mp.set(j,tt),at(tt),tt.length===0&&ve("No results found. Try a different search.","info")}catch(Y){if(Y.name==="AbortError")return;console.error("Search error:",Y),ve("Search failed. Check your connection.","error")}Wt(!1)};_.useEffect(()=>{if(B.current&&clearTimeout(B.current),!(!Pe.trim()||Q!=="search"||oe))return B.current=setTimeout(()=>{me()},700),()=>clearTimeout(B.current)},[Pe]);const nt=()=>{const b={...J,water:J.water+1};ue(b),Ue(b)},ft=()=>{if(J.water<=0)return;const b={...J,water:J.water-1};ue(b),Ue(b)},rt={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},vt=80,mt=2*Math.PI*vt,en=(b,j,L,Y,Ie)=>{const be=Y>0?Math.min(100,Math.round(L/Y*100)):0,je=mt-be/100*mt,tt=rt[Ie]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:vt}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:vt,style:{stroke:tt},strokeDasharray:mt,strokeDashoffset:je})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:tt},children:Math.round(L)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",Y,b==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:tt},children:j})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:tt},children:[be,"%"]})]})};if(_.useEffect(()=>{if(!Oe)return;const b=setTimeout(()=>{const j=Oe;yn(),C(null),Ee(j)},1500);return()=>clearTimeout(b)},[Oe]),_.useEffect(()=>()=>{const b=Jn.current;if(jt.current&&b){try{b.stop(),b.offDetected()}catch{}jt.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:E.gender==="male"?"active":"",onClick:()=>{O(b=>({...b,gender:"male"})),z(null)},children:"Male"}),a.jsx("button",{className:E.gender==="female"?"active":"",onClick:()=>{O(b=>({...b,gender:"female"})),z(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:E.age,onChange:b=>{O(j=>({...j,age:b.target.value})),z(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:E.weight,onChange:b=>{O(j=>({...j,weight:b.target.value})),z(null)},placeholder:E.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:E.weightUnit==="kg"?"active":"",onClick:()=>{O(b=>({...b,weightUnit:"kg"})),z(null)},children:"kg"}),a.jsx("button",{className:E.weightUnit==="lbs"?"active":"",onClick:()=>{O(b=>({...b,weightUnit:"lbs"})),z(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[E.heightUnit==="cm"?a.jsx("input",{type:"number",value:E.height,onChange:b=>{O(j=>({...j,height:b.target.value})),z(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:E.heightFeet,onChange:b=>{O(j=>({...j,heightFeet:b.target.value})),z(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:E.heightInches,onChange:b=>{O(j=>({...j,heightInches:b.target.value})),z(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:E.heightUnit==="cm"?"active":"",onClick:()=>{O(b=>({...b,heightUnit:"cm"})),z(null)},children:"cm"}),a.jsx("button",{className:E.heightUnit==="ft"?"active":"",onClick:()=>{O(b=>({...b,heightUnit:"ft"})),z(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:E.dailyActivity,onChange:b=>{O(j=>({...j,dailyActivity:b.target.value})),z(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:E.trainingFrequency,onChange:b=>{O(j=>({...j,trainingFrequency:b.target.value})),z(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:E.goal==="lose"?"active":"",onClick:()=>{O(b=>({...b,goal:"lose"})),z(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:E.goal==="maintain"?"active":"",onClick:()=>{O(b=>({...b,goal:"maintain"})),z(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:E.goal==="build"?"active":"",onClick:()=>{O(b=>({...b,goal:"build"})),z(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),E.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:E.deficitLevel==="light"?"active":"",onClick:()=>{O(b=>({...b,deficitLevel:"light"})),z(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:E.deficitLevel==="moderate"?"active":"",onClick:()=>{O(b=>({...b,deficitLevel:"moderate"})),z(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:E.deficitLevel==="harsh"?"active":"",onClick:()=>{O(b=>({...b,deficitLevel:"harsh"})),z(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:St,disabled:!Lt(),children:"Calculate Macros"})]}),W&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[en("Protein","Protein",W.protein,W.protein,"ring-protein"),en("Carbs","Carbs",W.carbs,W.carbs,"ring-carbs"),en("Fats","Fats",W.fats,W.fats,"ring-fats"),en("Calories","Calories",W.calories,W.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[W.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[W.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",W.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[W.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:Gt,children:"Set as My Daily Targets"})]})]}),At&&a.jsx("div",{className:`toast-notification ${At.type}`,children:At.message})]});const Ms=b=>{const j=new Date(b+"T12:00:00"),L=j.getDay(),Y=new Date(j);Y.setDate(j.getDate()-(L+6)%7);const Ie=[];for(let be=0;be<7;be++){const je=new Date(Y);je.setDate(Y.getDate()+be),Ie.push(je.toISOString().split("T")[0])}return Ie},as=["M","T","W","T","F","S","S"],bs=(b,j="search")=>{I(b),j==="scan"?(Te("scan"),an(null)):j==="manual"?(Te("manual"),dt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):j==="favourites"?Te("favourites"):(Te("search"),at([]),Qe(""))},En=Ms(V),$=new Date(V+"T12:00:00"),he=`${He[$.getMonth()]} ${$.getFullYear()}`;return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),z(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const b=new Date(V+"T12:00:00");b.setDate(b.getDate()-7);const j=b.toISOString().split("T")[0];re(j)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{M(!De),D({year:$.getFullYear(),month:$.getMonth()})},children:he}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const b=new Date(V+"T12:00:00");b.setDate(b.getDate()+7);const j=b.toISOString().split("T")[0];j<=Ti()&&re(j)},"aria-label":"Next week",disabled:En[6]>=Ti(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:En.map((b,j)=>{const L=new Date(b+"T12:00:00").getDate(),Y=b===V,Ie=b>Ti(),be=b===Ti();return a.jsxs("button",{className:`nut-week-day${Y?" selected":""}${be?" today":""}${Ie?" future":""}`,disabled:Ie,onClick:()=>re(b),children:[a.jsx("span",{className:"nut-week-day-letter",children:as[j]}),a.jsx("span",{className:"nut-week-day-num",children:L})]},b)})})]}),De&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>D(b=>{let j=b.month-1,L=b.year;return j<0&&(j=11,L--),{year:L,month:j}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[He[P.month]," ",P.year]}),a.jsx("button",{onClick:()=>D(b=>{let j=b.month+1,L=b.year;return j>11&&(j=0,L++),{year:L,month:j}}),disabled:P.year===new Date().getFullYear()&&P.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:qe.map(b=>a.jsx("span",{children:b},b))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Ye(P.year,P.month))].map((b,j)=>a.jsx("span",{},`e${j}`)),[...Array(Ve(P.year,P.month))].map((b,j)=>{const L=j+1,Y=`${P.year}-${String(P.month+1).padStart(2,"0")}-${String(L).padStart(2,"0")}`,Ie=Y>Ti(),be=Y===V,je=Y===Ti();return a.jsx("button",{className:`nut-cal-day${be?" selected":""}${je?" today":""}${Ie?" future":""}`,disabled:Ie,onClick:()=>{re(Y),M(!1)},children:L},L)})]})]}),a.jsxs("div",{className:"nut-rings-row",children:[en("Protein","Protein",we.protein,w.protein,"ring-protein"),en("Carbs","Carbs",we.carbs,w.carbs,"ring-carbs"),en("Fats","Fats",we.fats,w.fats,"ring-fats"),en("Calories","kCal",we.calories,w.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone",children:a.jsxs("div",{className:"nut-light-content",children:[Ke&&a.jsxs("button",{className:"nut-water-quick",onClick:()=>A(!0),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsxs("span",{className:"nut-water-quick-count",children:[J.water," / ",w?.waterGoal||8]}),a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:sx.map(b=>{const j=J.entries.filter(Y=>(Y.meal||"snacks")===b.key),L=j.reduce((Y,Ie)=>({protein:Y.protein+(Ie.protein||0),carbs:Y.carbs+(Ie.carbs||0),fats:Y.fats+(Ie.fats||0),calories:Y.calories+(Ie.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${b.key}`,children:B3[b.key]}),a.jsx("span",{className:"nut-meal-card-title",children:b.label}),j.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[L.calories," cal"]}),Ke&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>pt(ze===b.key?null:b.key),"aria-label":`Add to ${b.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),j.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,w.protein>0?L.protein/w.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[L.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,w.carbs>0?L.carbs/w.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[L.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,w.fats>0?L.fats/w.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[L.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,w.calories>0?L.calories/w.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:L.calories})]})]}),j.length>0&&a.jsx("div",{className:"nut-log-list",children:j.map(Y=>a.jsxs("div",{className:"nut-log-item",children:[a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:Y.name}),Y.serving&&a.jsx("span",{className:"nut-log-item-serving",children:Y.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[Y.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[Y.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[Y.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:Y.calories})]}),Ke&&a.jsx("button",{className:"nut-log-delete",onClick:()=>hn(Y.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},Y.id))}),j.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:Ke?"Tap + to add food":"No entries"})})]},b.key)})})})]})}),ze&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>pt(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",sx.find(b=>b.key===ze)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const b=ze;pt(null),bs(b,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const b=ze;pt(null),bs(b,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const b=ze;pt(null),bs(b,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const b=ze;pt(null),bs(b,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),S&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>A(!1),children:a.jsxs("div",{className:"nut-water-popup",onClick:b=>b.stopPropagation(),children:[a.jsxs("div",{className:"nut-water-popup-header",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsx("span",{children:"Water Intake"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>A(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsxs("div",{className:"nut-water-popup-body",children:[a.jsx("div",{className:"nut-water-glasses",children:[...Array(w?.waterGoal||8)].map((b,j)=>a.jsx("div",{className:`nut-water-glass ${j<J.water?"filled":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:j<J.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},j))}),a.jsxs("div",{className:"nut-water-popup-count",children:[J.water," / ",w?.waterGoal||8," glasses"]}),a.jsxs("div",{className:"nut-water-btns",children:[a.jsx("button",{onClick:ft,disabled:J.water<=0,children:"-"}),a.jsx("button",{onClick:nt,children:"+"})]})]})]})}),Q&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{yn(),C(null),Te(null),an(null)},children:a.jsxs("div",{className:"nut-modal",onClick:b=>b.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:Q==="scan"?"Scan Barcode":Q==="search"?"Search Food":Q==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{yn(),C(null),Te(null),an(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Q==="scan"&&!oe&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),Le&&!Oe&&a.jsx("div",{className:"nut-scan-line"}),Oe&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:Oe})]})]}),!Le&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:qn,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),Le&&!Oe&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:U,onChange:b=>le(b.target.value),onKeyDown:b=>b.key==="Enter"&&U.trim()&&Ee(U.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>U.trim()&&Ee(U.trim()),disabled:!U.trim()||pe,children:pe?"...":"Look Up"})]})]}),Q==="scan"&&oe&&(()=>{const b=oe.servingUnit||"g",j=oe.portion,L=Xe==="portion"&&j?wt*j.weight:parseFloat(Ct)||0,Y=L/100,Ie=b==="ml"?[100,200,250,500]:[50,100,150,200],be=Xe==="portion"&&j?`${wt} ${j.label}${wt!==1?"s":""} (${Math.round(L)}${b})`:`${Math.round(L)}${b}`;return a.jsxs("div",{className:"nut-product-result",children:[oe.image&&a.jsx("img",{src:oe.image,alt:oe.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:oe.name}),a.jsx("button",{className:`nut-fav-star confirm${Tt(oe.name)?" active":""}`,onClick:()=>Nt({name:oe.name,protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories,serving:oe.servingSize,per100g:{protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories},servingUnit:oe.servingUnit||"g",portion:oe.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Tt(oe.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),oe.brand&&a.jsx("p",{className:"nut-product-brand",children:oe.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",b,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[oe.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[oe.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[oe.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[oe.calories," cal"]})]}),j&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Xe==="portion"?"active":"",onClick:()=>{qt("portion"),wt<1&&ct(1)},children:"Portions"}),a.jsxs("button",{className:Xe==="weight"?"active":"",onClick:()=>{qt("weight"),bt(String(Math.round(L)||100))},children:["Custom (",b,")"]})]}),Xe==="portion"&&j?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,wt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:wt}),a.jsxs("span",{className:"nut-stepper-label",children:[j.label,wt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(L),b]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(wt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",b,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:Ct,onChange:je=>bt(je.target.value),onFocus:je=>je.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ie.map(je=>a.jsxs("button",{className:`nut-quick-btn${Ct===String(je)?" active":""}`,onClick:()=>bt(String(je)),children:[je,b]},je))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(oe.protein*Y),"p / ",Math.round(oe.carbs*Y),"c / ",Math.round(oe.fats*Y),"f / ",Math.round(oe.calories*Y)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{an(null),Te("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Kt({name:oe.name,protein:Math.round(oe.protein*Y),carbs:Math.round(oe.carbs*Y),fats:Math.round(oe.fats*Y),calories:Math.round(oe.calories*Y),serving:be}),children:"Add"})]})]})})(),Q==="search"&&!oe&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:ee,value:Pe,onChange:b=>Qe(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(clearTimeout(B.current),me())},onFocus:()=>setTimeout(()=>ee.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:me,disabled:Dt,children:Dt?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[Fe.map((b,j)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{an(b),b.portion?(ct(1),bt(String(b.portion.weight)),qt("portion")):(ct(0),bt(String(b.servingValue||100)),qt("weight"))},children:[b.image&&a.jsx("img",{src:b.image,alt:b.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:b.name}),b.brand&&a.jsx("span",{className:"nut-search-item-brand",children:b.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[b.calories," cal  ",b.protein,"p  ",b.carbs,"c  ",b.fats,"f per 100",b.servingUnit||"g"]})]})]},j)),Fe.length===0&&Pe&&!Dt&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),Q==="search"&&oe&&(()=>{const b=oe.servingUnit||"g",j=oe.portion,L=Xe==="portion"&&j?wt*j.weight:parseFloat(Ct)||0,Y=L/100,Ie=b==="ml"?[100,200,250,500]:[50,100,150,200],be=Xe==="portion"&&j?`${wt} ${j.label}${wt!==1?"s":""} (${Math.round(L)}${b})`:`${Math.round(L)}${b}`;return a.jsxs("div",{className:"nut-product-result",children:[oe.image&&a.jsx("img",{src:oe.image,alt:oe.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:oe.name}),a.jsx("button",{className:`nut-fav-star confirm${Tt(oe.name)?" active":""}`,onClick:()=>Nt({name:oe.name,protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories,serving:oe.servingSize,per100g:{protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories},servingUnit:oe.servingUnit||"g",portion:oe.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Tt(oe.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),oe.brand&&a.jsx("p",{className:"nut-product-brand",children:oe.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",b,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[oe.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[oe.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[oe.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[oe.calories," cal"]})]}),j&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Xe==="portion"?"active":"",onClick:()=>{qt("portion"),wt<1&&ct(1)},children:"Portions"}),a.jsxs("button",{className:Xe==="weight"?"active":"",onClick:()=>{qt("weight"),bt(String(Math.round(L)||100))},children:["Custom (",b,")"]})]}),Xe==="portion"&&j?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,wt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:wt}),a.jsxs("span",{className:"nut-stepper-label",children:[j.label,wt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(L),b]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(wt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",b,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:Ct,onChange:je=>bt(je.target.value),onFocus:je=>je.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ie.map(je=>a.jsxs("button",{className:`nut-quick-btn${Ct===String(je)?" active":""}`,onClick:()=>bt(String(je)),children:[je,b]},je))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(oe.protein*Y),"p / ",Math.round(oe.carbs*Y),"c / ",Math.round(oe.fats*Y),"f / ",Math.round(oe.calories*Y)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>an(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Kt({name:oe.name,protein:Math.round(oe.protein*Y),carbs:Math.round(oe.carbs*Y),fats:Math.round(oe.fats*Y),calories:Math.round(oe.calories*Y),serving:be}),children:"Add"})]})]})})(),Q==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:lt.name,onChange:b=>dt(j=>({...j,name:b.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:lt.serving,onChange:b=>dt(j=>({...j,serving:b.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:lt.protein,onChange:b=>dt(j=>({...j,protein:b.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:lt.carbs,onChange:b=>dt(j=>({...j,carbs:b.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:lt.fats,onChange:b=>dt(j=>({...j,fats:b.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:lt.calories,onChange:b=>dt(j=>({...j,calories:b.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!lt.name.trim(),onClick:()=>Kt({name:lt.name,protein:parseFloat(lt.protein)||0,carbs:parseFloat(lt.carbs)||0,fats:parseFloat(lt.fats)||0,calories:parseFloat(lt.calories)||0,serving:lt.serving||""}),children:"Add Food"})]}),Q==="favourites"&&!oe&&(()=>{const b=Cn(),j=L=>{if(L.per100g){const Y=L.per100g;an({name:L.name,brand:"",image:null,servingSize:L.serving||"100g",servingValue:100,servingUnit:L.servingUnit||"g",portion:L.portion||null,protein:Y.protein,carbs:Y.carbs,fats:Y.fats,calories:Y.calories,per100g:!0}),L.portion?(ct(1),bt(String(L.portion.weight)),qt("portion")):(ct(0),bt("100"),qt("weight"))}else Kt({name:L.name,protein:L.protein,carbs:L.carbs,fats:L.fats,calories:L.calories,serving:L.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:b.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:b.map((L,Y)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:Ie=>{Ie.stopPropagation(),Nt(L)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>j(L),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:L.name}),a.jsx("span",{className:"nut-recent-item-serving",children:L.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[L.calories," cal"]})]})]},Y))})})})(),Q==="favourites"&&oe&&(()=>{const b=oe.servingUnit||"g",j=oe.portion,L=Xe==="portion"&&j?wt*j.weight:parseFloat(Ct)||0,Y=L/100,Ie=b==="ml"?[100,200,250,500]:[50,100,150,200],be=Xe==="portion"&&j?`${wt} ${j.label}${wt!==1?"s":""} (${Math.round(L)}${b})`:`${Math.round(L)}${b}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:oe.name}),a.jsx("button",{className:`nut-fav-star confirm${Tt(oe.name)?" active":""}`,onClick:()=>Nt({name:oe.name,protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories,serving:oe.servingSize,per100g:{protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories},servingUnit:oe.servingUnit||"g",portion:oe.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Tt(oe.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",b,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[oe.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[oe.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[oe.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[oe.calories," cal"]})]}),j&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Xe==="portion"?"active":"",onClick:()=>{qt("portion"),wt<1&&ct(1)},children:"Portions"}),a.jsxs("button",{className:Xe==="weight"?"active":"",onClick:()=>{qt("weight"),bt(String(Math.round(L)||100))},children:["Custom (",b,")"]})]}),Xe==="portion"&&j?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,wt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:wt}),a.jsxs("span",{className:"nut-stepper-label",children:[j.label,wt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(L),b]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(wt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",b,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:Ct,onChange:je=>bt(je.target.value),onFocus:je=>je.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ie.map(je=>a.jsxs("button",{className:`nut-quick-btn${Ct===String(je)?" active":""}`,onClick:()=>bt(String(je)),children:[je,b]},je))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(oe.protein*Y),"p / ",Math.round(oe.carbs*Y),"c / ",Math.round(oe.fats*Y),"f / ",Math.round(oe.calories*Y)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>an(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Kt({name:oe.name,protein:Math.round(oe.protein*Y),carbs:Math.round(oe.carbs*Y),fats:Math.round(oe.fats*Y),calories:Math.round(oe.calories*Y),serving:be}),children:"Add"})]})]})})()]})}),a.jsx(Hr,{active:"nutrition"}),At&&a.jsx("div",{className:`toast-notification ${At.type}`,children:At.message})]})}const rx="/login/assets/randomiser-glq9YJkL.jpg",F3="/login/assets/programme-card-workout-CnNzTYkz.webp",q3="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",H3="/login/assets/mg-arms-BeOQU3wx.jpg",ax=60,Ip=5,$3=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],W3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},G3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},K3={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},Dp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Pp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:q3},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],$c=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:H3},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],ix={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},ox=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Lp=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],xl=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],Y3=[5,10,15,20,30];function Q3(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function X3(s){const e=[...s];for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[e[n],e[i]]=[e[i],e[n]]}return e}function J3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=dr(),{isDark:l,toggleTheme:u,accent:h}=Gr(),p=Rs(),[g,y]=_.useState("menu"),[w,T]=_.useState(["bodyweight"]),[E,O]=_.useState("core"),[W,z]=_.useState("intermediate"),[V,re]=_.useState(15),[J,ue]=_.useState([]),[we,Be]=_.useState(!1),De=_.useRef(!1),M=_.useRef([]),[S,A]=_.useState([]),[P,D]=_.useState(2),[H,I]=_.useState(xl[1]),[ze,pt]=_.useState(1),[Q,Te]=_.useState(0),[Le,ce]=_.useState("work"),[Oe,C]=_.useState(0),[U,le]=_.useState(!1),[pe,Ae]=_.useState(0),[Pe,Qe]=_.useState(null),Fe=_.useRef(null);_.useRef(null),_.useRef(null);const[at,Dt]=_.useState(null),Wt=_.useCallback((q,Z="info")=>{Dt({message:q,type:Z}),setTimeout(()=>Dt(null),3e3)},[]),[lt,dt]=_.useState(null),[oe,an]=_.useState(null),[Ct,bt]=_.useState(0),[wt,ct]=_.useState(0),[Xe,qt]=_.useState([]),[Wn,Et]=_.useState(""),[At,Nn]=_.useState(""),[jt,ln]=_.useState(!1),[B,ee]=_.useState(0),[ve,Ue]=_.useState(!1),[Ke,Ve]=_.useState({}),Ye=_.useRef(null),He=_.useRef(null),[qe,St]=_.useState([]),[Gt,Lt]=_.useState(null),[on,Cn]=_.useState(0),[Tt,Nt]=_.useState(0),[Kt,hn]=_.useState(0),[Jn,qn]=_.useState(0),[yn,Ln]=_.useState(0),[rs,vs]=_.useState(0),[Gn,As]=_.useState({beginner:0,intermediate:0,advanced:0}),[G,ye]=_.useState(null),[Ee,ke]=_.useState(""),[me,nt]=_.useState(!1);_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const Z=Pt(_e,"workoutLogs"),ne=mn(Z,nn("clientId","==",n.id)),Ce=(await rn(ne)).docs.map(Ft=>Ft.data()),We=Ce.filter(Ft=>Ft.type!=="programme");qn(We.length);const it=We.reduce((Ft,Rn)=>Ft+(Rn.duration||0),0);Ln(it);const Je={beginner:0,intermediate:0,advanced:0};We.forEach(Ft=>{Ft.level&&Je[Ft.level]!==void 0&&Je[Ft.level]++}),As(Je);const Bt=new Date,vn=Bt.getDay(),zt=vn===0?-6:1-vn,pn=new Date(Bt);pn.setDate(Bt.getDate()+zt),pn.setHours(0,0,0,0);const Zs=pn.getTime(),is=Ce.filter(Ft=>{const Rn=Ft.completedAt;return Rn?(Rn.toDate?Rn.toDate().getTime():new Date(Rn).getTime())>=Zs:!1});Cn(is.filter(Ft=>Ft.type!=="programme").length);let ms=0;if(n)try{const Ft=await Mn(Ge(_e,"clientProgrammes",n.id));if(Ft.exists()){const Rn=Ft.data(),In=Rn.templateId;ms=is.filter(On=>On.type==="programme"&&On.programmeId===In).length,ye(In);const er=Pp.find(On=>On.id===In);er&&ke(er.name);const Is=G3[In];if(Is){const On=Object.keys(Rn.completedSessions||{}).length,Hn=Is.duration*Is.daysPerWeek;hn(Hn>0?Math.round(On/Hn*100):0)}}else ye(null),ke(""),hn(0)}catch{}Nt(ms);const ps=We.map(Ft=>Ft.completedAt).filter(Boolean).map(Ft=>Ft.toDate?Ft.toDate().getTime():new Date(Ft).getTime()).sort((Ft,Rn)=>Rn-Ft);if(ps.length===0)vs(0);else{const Ft=new Set;ps.forEach(Hn=>{const Kr=new Date(Hn),Nr=Kr.getDay(),Ya=Nr===0?-6:1-Nr,Us=new Date(Kr);Us.setDate(Kr.getDate()+Ya),Us.setHours(0,0,0,0),Ft.add(Us.getTime())});const Rn=[...Ft].sort((Hn,Kr)=>Kr-Hn);let In=0;const er=new Date(Bt),Is=Bt.getDay()===0?-6:1-Bt.getDay();er.setDate(Bt.getDate()+Is),er.setHours(0,0,0,0);let On=er.getTime();Rn.includes(On)||(On-=10080*60*1e3);for(let Hn=0;Hn<200&&Rn.includes(On);Hn++)In++,On-=10080*60*1e3;vs(In)}}catch(Z){console.error("Error loading workout stats:",Z)}finally{nt(!0)}})()},[s,n,g]);const ft=()=>{const q=[];let Z;E==="mix"?Z=["core","upper","lower"]:E==="fullbody"?Z=["upper","lower"]:Z=[E];for(const ne of w)for(const ge of Z)q.push(`exercises/${ne}/${ge}`);return q},rt=async()=>{if(De.current){for(;De.current;)await new Promise(q=>setTimeout(q,200));return M.current}De.current=!0,Be(!0);try{const q=ft(),Z=[];for(const We of q)try{const it=Mi(Ii,We),Je=await ex(it);Z.push(...Je.items)}catch{console.warn(`Folder ${We} not found, skipping.`)}if(Z.length===0&&w.includes("bodyweight")&&E==="core")try{const We=Mi(Ii,"core"),it=await ex(We);Z.push(...it.items)}catch{console.warn("Legacy core/ folder not found either.")}if(Z.length===0){const We=w.map(Je=>ox.find(Bt=>Bt.key===Je)?.label).join(" + "),it=Lp.find(Je=>Je.key===E)?.label;return Wt(`No exercises found for ${We} / ${it}. Upload videos to Firebase Storage.`,"error"),De.current=!1,Be(!1),[]}const ne=new Set,ge=Z.filter(We=>{const it=We.name.replace(/\.(mp4|gif)$/i,"");return ne.has(it)?!1:(ne.add(it),!0)}),Ce=await Promise.all(ge.map(async We=>{const it=await Eo(We),Je=Q3(We.name.replace(/\.(mp4|gif)$/i,"")),Bt=/\.gif$/i.test(We.name);return{name:Je,videoUrl:it,isGif:Bt}}));return M.current=Ce,ue(Ce),De.current=!1,Be(!1),Ce}catch(q){console.error("Error loading exercises:",q);const Z=q.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${q.message||q.code||"Unknown error"}`;return Wt(Z,"error"),De.current=!1,Be(!1),[]}},vt=async()=>{y("spinning"),M.current=[];const q=await rt();if(q.length===0){y("setup");return}const Z=xl.find(vn=>vn.key===W);I(Z);const ne=Z.work+Z.rest,ge=V*60,Ce=Math.floor(ge/ne);let We,it;Ce<=6?(We=Math.max(3,Math.floor(Ce/2)),it=Math.floor(Ce/We)):Ce<=12?(We=Math.min(6,Math.floor(Ce/2)),it=Math.floor(Ce/We)):(We=Math.min(10,Math.floor(Ce/2)),it=Math.floor(Ce/We)),it=Math.max(2,it);const Je=X3(q),Bt=Je.slice(0,Math.min(We,Je.length));A(Bt),D(it),setTimeout(()=>y("preview"),2e3)},mt=()=>{y("countdown"),Ae(3)};_.useEffect(()=>{if(g!=="countdown")return;if(pe<=0){y("workout"),pt(1),Te(0),ce("work"),C(H.work),le(!1),be();return}Ie();const q=setTimeout(()=>Ae(Z=>Z-1),1e3);return()=>clearTimeout(q)},[pe,g]),_.useEffect(()=>{if(g!=="workout"||U)return;if(Oe<=0){en();return}Oe<=3&&Ie();const q=setTimeout(()=>C(Z=>Z-1),1e3);return()=>clearTimeout(q)},[Oe,g,U]);const en=()=>{if(Le==="work")ce("rest"),C(H.rest);else{const q=Q+1;if(q>=S.length){const Z=ze+1;if(Z>P){y("complete"),Ms();return}pt(Z),Te(0)}else Te(q);ce("work"),C(H.work),be()}},Ms=async()=>{if(s)try{await Wa(Pt(_e,"workoutLogs"),{clientId:n.id,level:W,duration:V,equipment:w,focus:E,exerciseCount:S.length,rounds:P,exercises:S.map(q=>q.name),completedAt:ht.now()}),Cn(q=>q+1),qn(q=>q+1),Ln(q=>q+V),As(q=>({...q,[W]:(q[W]||0)+1}))}catch(q){console.error("Error saving workout log:",q)}},as=async(q,Z,ne)=>{if(!(!n||!Z))try{const ge=n.id,Ce=await Mn(Ge(_e,"coreBuddyPBs",ge)),it=(Ce.exists()?Ce.data():null)?.exercises||{},Je=it[q];let Bt=!1;if(Je?(Z>(Je.weight||0)||Z===(Je.weight||0)&&ne>(Je.reps||0))&&(Bt=!0):Bt=!0,Bt){const vn={...it,[q]:{weight:Z,reps:ne,achievedAt:ht.now()}};await wn(Ge(_e,"coreBuddyPBs",ge),{clientId:n.id,exercises:vn,updatedAt:ht.now()}),Wt(`New PB! ${Z}kg  ${ne} reps`,"success"),Ie(),await bs(q,Z)}}catch(ge){console.error("Error checking PB:",ge)}},bs=async(q,Z)=>{if(n)try{const ne=await Mn(Ge(_e,"coreBuddyTargets",n.id));if(!ne.exists())return;const Ce=(ne.data().targets||{})[q];if(!Ce||Z<Ce.targetWeight)return;const We=await Mn(Ge(_e,"coreBuddyAchievements",n.id)),it=We.exists()?We.data():{clientId:n.id,badges:[],totalVolume:0};if(it.badges.some(zt=>zt.type==="pb_target"&&zt.exercise===q&&zt.targetWeight===Ce.targetWeight))return;const Bt={type:"pb_target",exercise:q,group:W3[q]||"push",targetWeight:Ce.targetWeight,achievedAt:ht.now()},vn=[...it.badges,Bt];await wn(Ge(_e,"coreBuddyAchievements",n.id),{...it,badges:vn,updatedAt:ht.now()}),St(zt=>[...zt,Bt])}catch(ne){console.error("Error checking target badge:",ne)}},En=async q=>{if(!(!n||q<=0))try{const Z=await Mn(Ge(_e,"coreBuddyAchievements",n.id)),ne=Z.exists()?Z.data():{clientId:n.id,badges:[],totalVolume:0},ge=ne.totalVolume||0,Ce=ge+q,We=[];$3.forEach(Je=>{Ce>=Je.threshold&&ge<Je.threshold&&(ne.badges.some(vn=>vn.type==="volume_milestone"&&vn.milestone===Je.threshold)||We.push({type:"volume_milestone",milestone:Je.threshold,label:Je.label,achievedAt:ht.now()}))});const it=[...ne.badges,...We];await wn(Ge(_e,"coreBuddyAchievements",n.id),{clientId:n.id,badges:it,totalVolume:Math.round(Ce),updatedAt:ht.now()}),We.length>0&&St(Je=>[...Je,...We])}catch(Z){console.error("Error updating volume:",Z)}},$=async q=>{if(an(q),q.interval){const ge=[];for(const Ce of q.exercises){let We=null,it=!1;if(Ce.storagePath)try{const Je=Mi(Ii,Ce.storagePath);We=await Eo(Je),it=/\.gif$/i.test(Ce.storagePath)}catch{}ge.push({name:Ce.name,videoUrl:We,isGif:it})}A(ge),D(q.rounds),I({work:q.work,rest:q.rest}),y("preview");return}const Z={};for(const ge of q.exercises)if(ge.storagePath)try{const Ce=Mi(Ii,ge.storagePath);Z[ge.name]={url:await Eo(Ce),isGif:/\.gif$/i.test(ge.storagePath)}}catch{}Ve(Z);const ne=q.exercises.map(ge=>({name:ge.name,type:ge.type,targetSets:ge.sets,targetReps:ge.reps||0,targetTime:ge.time||0,sets:[]}));qt(ne),bt(0),ct(0),Et(""),Nn(""),Ue(!1),ln(!1),ee(0),St([]),Lt(null),y("muscle_workout")},he=()=>{const q=Ye.current;q&&(q.paused?(q.play(),Ue(!0)):(q.pause(),Ue(!1)))};_.useEffect(()=>{if(g!=="muscle_workout"||!jt||B<=0){g==="muscle_workout"&&jt&&B<=0&&(ln(!1),Ie());return}return He.current=setTimeout(()=>ee(q=>q-1),1e3),()=>clearTimeout(He.current)},[g,jt,B]);const b=async()=>{const q=Xe[Ct];let Z={};if(q.type==="weighted"){const Ce=parseFloat(Wn)||0,We=parseInt(At)||0;if(We===0){Wt("Enter your reps","error");return}Z={weight:Ce,reps:We}}else if(q.type==="reps"){const Ce=parseInt(At)||0;if(Ce===0){Wt("Enter your reps","error");return}Z={reps:Ce}}else if(q.type==="timed"){const Ce=q.targetTime-B;Z={time:Math.max(Ce,1)}}const ne=[...Xe];ne[Ct]={...q,sets:[...q.sets,Z]},qt(ne),q.type==="weighted"&&Z.weight>0&&await as(q.name,Z.weight,Z.reps);const ge=q.sets.length+1;if(ge<q.targetSets)ct(ge),Nn(""),ln(!1),ee(0);else if(Ct+1<Xe.length){const Ce=Ct+1;bt(Ce),ct(0),Et(""),Nn(""),Ue(!1),ln(!1),ee(0)}else await j(ne),y("muscle_complete")},j=async q=>{if(!(!s||!n))try{const Z=q.reduce((ge,Ce)=>ge+Ce.sets.reduce((We,it)=>We+(it.weight||0)*(it.reps||0),0),0),ne=q.reduce((ge,Ce)=>ge+Ce.sets.length,0);await Wa(Pt(_e,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:lt,sessionId:oe?.id,sessionName:oe?.name,exerciseCount:q.length,totalSets:ne,duration:Math.round(ne*1.5),volume:Math.round(Z),exercises:q.map(ge=>({name:ge.name,type:ge.type,sets:ge.sets})),completedAt:ht.now()}),Z>0&&await En(Z),qe.length>0&&Lt({badges:[...qe]})}catch(Z){console.error("Error saving muscle group workout log:",Z)}},L=_.useRef(null),Y=()=>(L.current||(L.current=new(window.AudioContext||window.webkitAudioContext)),L.current),Ie=()=>{try{const q=Y(),Z=q.createOscillator(),ne=q.createGain();Z.connect(ne),ne.connect(q.destination),Z.frequency.value=880,ne.gain.value=.3,Z.start(q.currentTime),Z.stop(q.currentTime+.15)}catch{}},be=()=>{try{const q=Y(),Z=q.createOscillator(),ne=q.createGain();Z.connect(ne),ne.connect(q.destination),Z.frequency.value=1200,ne.gain.value=.4,Z.start(q.currentTime),Z.stop(q.currentTime+.3)}catch{}};_.useEffect(()=>{if(g!=="workout"||Le!=="work"||!S[Q]?.isGif)return;const Z=setInterval(()=>{const ne=Fe.current;if(!ne)return;const ge=ne.getAttribute("src");ne.removeAttribute("src"),setTimeout(()=>{Fe.current&&Fe.current.setAttribute("src",ge)},0)},4e3);return()=>clearInterval(Z)},[g,Le,Q,ze,S]);const je=(q,Z,ne)=>{const ge=Math.round(q/Z*ax);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:M3.map((Ce,We)=>a.jsx("line",{x1:Ce.x1,y1:Ce.y1,x2:Ce.x2,y2:Ce.y2,className:We<ge?`wk-tick-filled ${ne}`:"wk-tick-empty",strokeWidth:Ce.thick?"3":"2"},We))})},tt=()=>{const q=S.length*P;return((ze-1)*S.length+Q+(Le==="rest"?.5:0))/q},et=at&&a.jsx("div",{className:`toast-notification ${at.type}`,children:at.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:a.jsx("img",{src:rx,alt:"Randomise Workout",className:"wk-hero-bg"})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[Pp.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:Pp.map((q,Z)=>q.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:q.id}}),style:{animationDelay:`${Z*.06}s`},children:[a.jsx("img",{src:q.image,alt:q.name,className:"wk-prog-img"}),Z===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},q.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:q.id}}),style:{animationDelay:`${Z*.06}s`},children:[a.jsx("img",{src:F3,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:K3[q.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[q.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:q.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:q.name.toUpperCase()}),a.jsxs("p",{children:[q.daysPerWeek,"x per week  ",q.focus==="fullbody"?"Full Body":q.focus.charAt(0).toUpperCase()+q.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),Z===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},q.id))})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[$c.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:$c.map((q,Z)=>a.jsx("button",{className:`wk-muscle-hero-card${q.image?" wk-muscle-thumb":""}`,onClick:()=>{dt(q.key),y("muscle_sessions")},style:{animationDelay:`${Z*.05}s`},children:q.image?a.jsx("img",{src:q.image,alt:q.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:rx,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:Dp[q.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:q.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:q.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[ix[q.key]?.length||0," sessions"]})]})]})]})},q.key))})]}),a.jsx(Hr,{active:"workouts"}),et]});if(g==="setup"){const q=Lp.find(ne=>ne.key===E)?.label||E,Z=xl.find(ne=>ne.key===W)?.label||W;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsxs("div",{className:"wk-stats-strip",children:[a.jsxs("div",{className:"wk-stats-strip-ring",children:[a.jsx("svg",{viewBox:"0 0 200 200",children:ko.map((ne,ge)=>{const Ce=Math.round(Math.min(on,Ip)/Ip*ax);return a.jsx("line",{x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,className:ge<Ce?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:ne.thick?"3":"2"},ge)})}),a.jsxs("span",{className:"wk-stats-strip-ring-num",children:[on,a.jsxs("small",{children:["/",Ip]})]})]}),a.jsxs("div",{className:"wk-stats-strip-items",children:[a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:Jn}),a.jsx("span",{className:"wk-stats-strip-label",children:"Workouts"})]}),a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:yn}),a.jsx("span",{className:"wk-stats-strip-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:rs}),a.jsx("span",{className:"wk-stats-strip-label",children:"Wk Streak"})]})]})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:Lp.map(ne=>a.jsxs("button",{className:`wk-equip-btn${E===ne.key?" active":""}${ne.key==="mix"?" wk-mix-btn":""}`,onClick:()=>O(ne.key),children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:ne.icon})}),a.jsx("span",{children:ne.label})]},ne.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:xl.map(ne=>a.jsxs("button",{className:`wk-level-card wk-level-${ne.key}${W===ne.key?" active":""}`,onClick:()=>z(ne.key),children:[a.jsx("span",{className:"wk-level-name",children:ne.label}),a.jsx("span",{className:"wk-level-desc",children:ne.desc})]},ne.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:Y3.map(ne=>a.jsxs("button",{className:`wk-time-btn${V===ne?" active":""}`,onClick:()=>re(ne),children:[a.jsx("span",{className:"wk-time-num",children:ne}),a.jsx("span",{className:"wk-time-unit",children:"min"})]},ne))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:ox.map(ne=>{const ge=w.includes(ne.key);return a.jsxs("button",{className:`wk-equip-btn${ge?" active":""}`,onClick:()=>{T(Ce=>ge&&Ce.length===1?Ce:ge?Ce.filter(We=>We!==ne.key):[...Ce,ne.key])},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:ne.icon})}),a.jsx("span",{children:ne.label})]},ne.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[q,"  ",Z,"  ",V," min"]})})]}),a.jsx("div",{className:"wk-go-sticky",children:a.jsx("button",{className:"wk-randomise-btn",onClick:vt,disabled:we,children:we?"Loading exercises...":"Randomise Workout"})}),et]})}if(g==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:ko.map((q,Z)=>a.jsx("line",{x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,className:"wk-spin-tick",strokeWidth:q.thick?"3.5":"2",style:{animationDelay:`${Z*.03}s`}},Z))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),et]});if(g==="preview"){const q=oe?.interval?{work:oe.work,rest:oe.rest}:xl.find(ne=>ne.key===W),Z=S.length*P*(q.work+q.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y(oe?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[oe?.interval&&a.jsx("h2",{className:"mg-preview-title",children:oe.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:S.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:P}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(Z/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[q.work,"/",q.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:S.map((ne,ge)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${ge*.06}s`},onClick:()=>Qe(ne),children:[a.jsx("span",{className:"wk-preview-num",children:ge+1}),a.jsx("div",{className:"wk-preview-thumb",children:ne.isGif?a.jsx("img",{src:ne.videoUrl,alt:ne.name,loading:"lazy"}):a.jsx("video",{src:`${ne.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:ne.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},ge))}),Pe&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>Qe(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:ne=>ne.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>Qe(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Pe.isGif?a.jsx("img",{src:Pe.videoUrl,alt:Pe.name}):a.jsx("video",{src:Pe.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Pe.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!oe?.interval&&a.jsxs("button",{className:"wk-btn-secondary",onClick:()=>vt(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),a.jsx("button",{className:"wk-btn-primary",onClick:mt,children:"Start Workout"})]})]})]})}if(g==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:pe}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const q=S[Q],Z=Le==="work"?H.work:H.rest,ne=Le==="rest"?Q+1<S.length?S[Q+1]:ze<P?S[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"wk-video-container",children:Le==="work"?q.isGif?a.jsx("img",{ref:Fe,className:"wk-video",src:q.videoUrl,alt:q.name},q.videoUrl):a.jsx("video",{className:"wk-video",src:q.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},q.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),ne&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",ne.name]})]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[Q+1," / ",S.length]}),a.jsx("h2",{className:"wk-exercise-name",children:q.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",ze," of ",P]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[je(Oe,Z,Le==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:Oe}),a.jsx("span",{className:`wk-timer-phase ${Le}`,children:Le==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>le(!U),children:U?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{C(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${tt()*100}%`}})})]})}if(g==="complete"){const q=xl.find(ne=>ne.key===W),Z=S.length*P*(q.work+q.rest);return a.jsx("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:ko.map((ne,ge)=>a.jsx("line",{x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,className:"wk-tick-complete",strokeWidth:ne.thick?"3.5":"2",style:{animationDelay:`${ge*.02}s`}},ge))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(Z/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:S.length*P}),a.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:P}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{an(null),dt(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const q=$c.find(ne=>ne.key===lt),Z=ix[lt]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:Dp[lt]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:q?.icon})})}),a.jsxs("h2",{children:[q?.label," Workouts"]}),a.jsxs("p",{children:[Z.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:Z.map((ne,ge)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{an(ne),y("muscle_overview")},style:{animationDelay:`${ge*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:ne.name}),a.jsx("p",{children:ne.desc}),a.jsx("div",{className:"mg-session-meta",children:ne.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[ne.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[ne.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[ne.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const Ce=ne.exercises.map(Je=>Je.sets||0),We=Math.min(...Ce),it=Math.max(...Ce);return We===it?`${We} sets each`:`${We}-${it} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},ne.id))})]}),et]})}if(g==="muscle_overview"){const q=oe;if(!q)return null;const Z=$c.find(ne=>ne.key===lt);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:{background:Dp[lt]},children:a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:Z?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:q.name}),q.level&&a.jsx("span",{className:"mg-overview-level",children:q.level})]}),a.jsx("p",{className:"mg-overview-desc",children:q.desc})]}),q.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:q.overview})]}),q.tips&&q.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:q.tips.map((ne,ge)=>a.jsx("li",{children:ne},ge))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",q.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:q.exercises.map((ne,ge)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:ge+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:ne.name}),q.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[q.work,"s work / ",q.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[ne.sets," sets  ",ne.reps?`${ne.reps} reps`:`${ne.time}s`,ne.type==="weighted"&&"  weighted"]})]})]},ge))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>$(q),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),et]})}if(g==="muscle_workout"){const q=oe;if(!q)return null;const Z=q.exercises[Ct],ne=Xe[Ct];if(!Z||!ne)return null;const ge=ne.sets.length,Ce=q.exercises.length,We=q.exercises.reduce((zt,pn)=>zt+(pn.sets||0),0),Je=Xe.reduce((zt,pn)=>zt+pn.sets.length,0)/We*100,Bt=Ke[Z.name];Z.type==="timed"&&B===0&&!jt&&ge===wt&&setTimeout(()=>ee(Z.time),0);const vn=ge+1<Z.sets?"Log Set":Ct+1<Ce?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Je}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",Ct+1,"/",Ce]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[Bt?a.jsxs("div",{className:"mg-video-container",onClick:he,children:[Bt.isGif?a.jsx("img",{className:"mg-video",src:Bt.url,alt:Z.name}):a.jsx("video",{ref:Ye,className:"mg-video",src:Bt.url,loop:!0,muted:!0,playsInline:!0},Z.name),!ve&&!Bt.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:Z.name}),a.jsx("span",{className:`mg-ex-type-badge ${Z.type}`,children:Z.type==="weighted"?"Weight + Reps":Z.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",ge+1," of ",Z.sets]}),Z.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",Z.reps," reps"]}),Z.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",Z.time,"s"]})]}),Z.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:Wn,onChange:zt=>Et(zt.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:At,onChange:zt=>Nn(zt.target.value),placeholder:"0"})]})]}),Z.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:At,onChange:zt=>Nn(zt.target.value),placeholder:"0"})]})}),Z.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[B,"s"]})}),jt?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>ln(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{B===0&&ee(Z.time),ln(!0)},children:B<Z.time&&B>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:b,children:vn}),ne.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:ne.sets.map((zt,pn)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",pn+1,": ",zt.weight!=null?`${zt.weight}kg  ${zt.reps}`:zt.reps!=null?`${zt.reps} reps`:`${zt.time}s`]})]},pn))})]})]}),et]})}if(g==="muscle_complete"){const q=Xe.reduce((ge,Ce)=>ge+Ce.sets.length,0),Z=Xe.reduce((ge,Ce)=>ge+Ce.sets.reduce((We,it)=>We+(it.weight||0)*(it.reps||0),0),0),ne=$c.find(ge=>ge.key===lt)?.label||"";return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:ko.map((ge,Ce)=>a.jsx("line",{x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,className:"wk-tick-complete",strokeWidth:ge.thick?"3.5":"2",style:{animationDelay:`${Ce*.02}s`}},Ce))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsxs("h2",{className:"wk-complete-title",children:[ne," Complete!"]}),a.jsx("p",{className:"mg-complete-session-name",children:oe?.name}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Xe.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:q}),a.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),Z>0&&a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.round(Z).toLocaleString()}),a.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{an(null),dt(null),Lt(null),y("menu")},children:"Done"})})]}),Gt&&a.jsx("div",{className:"mg-badge-celebration",onClick:()=>Lt(null),children:a.jsxs("div",{className:"mg-badge-celebration-card",children:[a.jsx("div",{className:"mg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:a.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),a.jsx("h3",{className:"mg-badge-celebration-title",children:Gt.badges.length===1?"Badge Earned!":`${Gt.badges.length} Badges Earned!`}),a.jsx("div",{className:"mg-badge-celebration-list",children:Gt.badges.map((ge,Ce)=>a.jsx("div",{className:"mg-badge-celebration-item",children:ge.type==="pb_target"?`${ge.exercise}  ${ge.targetWeight}kg`:ge.label},Ce))}),a.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const Z3=60,eD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},tD=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],lx=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function sd(s,e,n){const i=s.baseReps?s.baseReps+(e-1)*(n.repProg||0):void 0,l=s.baseTime?s.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:s.sets,reps:i,time:l}}const nD={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function sD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=dr(),{isDark:l,toggleTheme:u,accent:h}=Gr(),p=Rs(),g=Wr(),[y,w]=_.useState("loading"),[T,E]=_.useState(null),O=_.useRef(!1),[W,z]=_.useState(null),[V,re]=_.useState(1),[J,ue]=_.useState(0),[we,Be]=_.useState(0),[De,M]=_.useState(0),[S,A]=_.useState([]),[P,D]=_.useState(""),[H,I]=_.useState(""),[ze,pt]=_.useState(!1),[Q,Te]=_.useState(0),Le=_.useRef(null),[ce,Oe]=_.useState({}),[C,U]=_.useState(!1),le=_.useRef(null),[pe,Ae]=_.useState(null),[Pe,Qe]=_.useState([]);_.useEffect(()=>{window.scrollTo(0,0)},[y]);const[Fe,at]=_.useState(null),Dt=_.useCallback((B,ee="info")=>{at({message:B,type:ee}),setTimeout(()=>at(null),4e3)},[]),Wt=_.useRef(null),lt=()=>(Wt.current||(Wt.current=new(window.AudioContext||window.webkitAudioContext)),Wt.current),dt=()=>{try{const B=lt(),ee=B.createOscillator(),ve=B.createGain();ee.connect(ve),ve.connect(B.destination),ee.frequency.value=1200,ve.gain.value=.4,ee.start(B.currentTime),ee.stop(B.currentTime+.3)}catch{}};_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const ee=Ge(_e,"clientProgrammes",n.id),ve=await Mn(ee);ve.exists()?(z(ve.data()),w("dashboard")):g.state?.templateId?w("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(ee){console.error("Error loading programme:",ee),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),_.useEffect(()=>{if(O.current||y==="loading")return;const B=g.state?.templateId;if(!B)return;const ee=lx.find(ve=>ve.id===B);ee&&(O.current=!0,E(ee),w("overview"))},[y,g.state]),_.useEffect(()=>{if(!ze||Q<=0){ze&&Q<=0&&(pt(!1),dt());return}return Le.current=setTimeout(()=>Te(B=>B-1),1e3),()=>clearTimeout(Le.current)},[ze,Q]);const oe=async B=>{if(n)try{await wn(Ge(_e,"clientProgrammes",n.id),B),z(B)}catch(ee){console.error("Error saving programme:",ee),Dt("Failed to save. Check Firestore rules for clientProgrammes.","error")}},an=async B=>{const ee={templateId:B.id,startDate:ht.now(),completedSessions:{}};await oe(ee),w("dashboard")},Ct=async()=>{if(n)try{await Vs(Ge(_e,"clientProgrammes",n.id)),z(null),w("browse")}catch(B){console.error("Error quitting programme:",B)}},bt=()=>W?lx.find(B=>B.id===W.templateId):null,wt=()=>{if(!W)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const B=W.completedSessions||{},ee=Object.keys(B).length,ve=bt();if(!ve)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const Ue=ve.duration*ve.daysPerWeek,Ke=Math.min(Math.floor(ee/ve.daysPerWeek)+1,ve.duration),Ve=ee-(Ke-1)*ve.daysPerWeek;for(let Ye=1;Ye<=ve.duration;Ye++)for(let He=0;He<ve.daysPerWeek;He++){const qe=`w${Ye}d${He}`;if(!B[qe])return{currentWeek:Ye,completedThisWeek:Ve,nextDay:He,nextWeek:Ye,totalCompleted:ee,totalSessions:Ue}}return{currentWeek:ve.duration,completedThisWeek:ve.daysPerWeek,nextDay:-1,totalCompleted:ee,totalSessions:Ue,complete:!0}},ct=(B,ee,ve)=>{if(!W||B<=1)return null;const Ue=`w${B-1}d${ee}`,Ke=W.completedSessions?.[Ue];if(!Ke)return null;const Ve=Ke.exercises?.find(Ye=>Ye.name===ve);return Ve?.sets?.length?Ve.sets[Ve.sets.length-1]:null},Xe=(B,ee)=>{const ve=bt();if(!ve)return;re(B),ue(ee),Be(0),M(0),A([]),I(""),pt(!1),Te(0),U(!1),Oe({});const Ue=ve.days[ee],Ke=Ue.exercises.map(qe=>{const St=sd(qe,B,ve);return{name:qe.name,type:qe.type,pbKey:qe.pbKey,targetSets:St.sets,targetReps:St.reps,targetTime:St.time,sets:[]}});A(Ke);const Ve=Ue.exercises[0],Ye=ct(B,ee,Ve.name);Ye?.weight&&Ve.type==="weighted"?D(String(Ye.weight)):D(""),(async()=>{const qe={};for(const St of Ue.exercises)if(St.storagePath)try{const Gt=Mi(Ii,St.storagePath),Lt=await Eo(Gt);qe[St.name]={url:Lt,isGif:/\.gif$/i.test(St.storagePath)}}catch(Gt){console.warn(`Video not found for ${St.name}:`,Gt)}Oe(qe)})(),w("session")},qt=async()=>{bt();const B=S[we];if(!B)return;let ee={};if(B.type==="weighted"){const Ke=parseFloat(P)||0,Ve=parseInt(H)||0;if(Ve===0){Dt("Enter your reps","error");return}ee={weight:Ke,reps:Ve}}else if(B.type==="reps"){const Ke=parseInt(H)||0;if(Ke===0){Dt("Enter your reps","error");return}ee={reps:Ke}}else if(B.type==="timed"){const Ke=B.targetTime-Q;ee={time:Math.max(Ke,1)}}const ve=[...S];ve[we]={...B,sets:[...B.sets,ee]},A(ve),B.type==="weighted"&&ee.weight>0&&await At(B.name,ee.weight,ee.reps);const Ue=B.sets.length+1;if(Ue<B.targetSets)M(Ue),D(ee.weight?String(ee.weight):""),I(""),pt(!1),Te(0);else if(we+1<S.length){const Ke=we+1;Be(Ke),M(0),U(!1);const Ye=bt()?.days[J]?.exercises[Ke],He=ct(V,J,Ye?.name);He?.weight&&Ye?.type==="weighted"?D(String(He.weight)):D(""),I(""),pt(!1),Te(0)}else await Wn(ve)},Wn=async B=>{if(!W||!n)return;const ee=`w${V}d${J}`,ve={...W.completedSessions,[ee]:{completedAt:new Date().toISOString(),exercises:B.map(Ve=>({name:Ve.name,type:Ve.type,sets:Ve.sets}))}},Ue={...W,completedSessions:ve};await oe(Ue);const Ke=B.reduce((Ve,Ye)=>Ve+Ye.sets.reduce((He,qe)=>He+(qe.weight||0)*(qe.reps||0),0),0);Ke>0&&await Et(Ke);try{const Ve=bt();await Wa(Pt(_e,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:Ve?.id,programmeName:Ve?.name,week:V,day:J+1,exerciseCount:B.length,duration:Math.round(B.reduce((Ye,He)=>Ye+He.sets.length*1.5,0)),volume:Math.round(Ke),completedAt:ht.now()})}catch(Ve){console.error("Error saving workout log:",Ve)}Pe.length>0&&(Ae({badges:[...Pe]}),Qe([])),w("sessionComplete")},Et=async B=>{if(n)try{const ee=await Mn(Ge(_e,"coreBuddyAchievements",n.id)),ve=ee.exists()?ee.data():{clientId:n.id,badges:[],totalVolume:0},Ue=ve.totalVolume||0,Ke=Ue+B,Ve=[];tD.forEach(He=>{Ke>=He.threshold&&Ue<He.threshold&&(ve.badges.some(St=>St.type==="volume_milestone"&&St.milestone===He.threshold)||Ve.push({type:"volume_milestone",milestone:He.threshold,label:He.label,achievedAt:ht.now()}))});const Ye=[...ve.badges,...Ve];await wn(Ge(_e,"coreBuddyAchievements",n.id),{clientId:n.id,badges:Ye,totalVolume:Math.round(Ke),updatedAt:ht.now()}),Ve.length>0&&Qe(He=>[...He,...Ve])}catch(ee){console.error("Error updating volume:",ee)}},At=async(B,ee,ve)=>{if(n)try{const Ue=n.id,Ke=await Mn(Ge(_e,"coreBuddyPBs",Ue)),Ye=(Ke.exists()?Ke.data():null)?.exercises||{},He=Ye[B];let qe=!1;if(He?(ee>(He.weight||0)||ee===(He.weight||0)&&ve>(He.reps||0))&&(qe=!0):qe=!0,qe){const St={...Ye,[B]:{weight:ee,reps:ve,achievedAt:ht.now()}};await wn(Ge(_e,"coreBuddyPBs",Ue),{clientId:n.id,exercises:St,updatedAt:ht.now()}),Dt(`New PB! ${ee}kg  ${ve} reps`,"success"),dt(),await Nn(B,ee)}}catch(Ue){console.error("Error checking PB:",Ue)}},Nn=async(B,ee)=>{if(n)try{const ve=await Mn(Ge(_e,"coreBuddyTargets",n.id));if(!ve.exists())return;const Ke=(ve.data().targets||{})[B];if(!Ke||ee<Ke.targetWeight)return;const Ve=await Mn(Ge(_e,"coreBuddyAchievements",n.id)),Ye=Ve.exists()?Ve.data():{clientId:n.id,badges:[],totalVolume:0};if(Ye.badges.some(Gt=>Gt.type==="pb_target"&&Gt.exercise===B&&Gt.targetWeight===Ke.targetWeight))return;const qe={type:"pb_target",exercise:B,group:eD[B]||"push",targetWeight:Ke.targetWeight,achievedAt:ht.now()},St=[...Ye.badges,qe];await wn(Ge(_e,"coreBuddyAchievements",n.id),{...Ye,badges:St,updatedAt:ht.now()}),Qe(Gt=>[...Gt,qe])}catch(ve){console.error("Error checking target badge:",ve)}},jt=Fe&&a.jsxs("div",{className:`toast-notification ${Fe.type}`,children:[Fe.type==="success"&&a.jsx("span",{children:" "}),Fe.message]}),ln=(B,ee)=>a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:ee,"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(i||y==="loading")return a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&T){const B=T;return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[ln(B.name,()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-overview-hero",children:[a.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:nD[B.focus]})}),a.jsx("h2",{className:"pg-overview-name",children:B.name}),a.jsx("p",{className:"pg-overview-desc",children:B.description}),a.jsxs("div",{className:"pg-overview-stats",children:[a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:B.duration}),a.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:B.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:B.duration*B.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),a.jsx("div",{className:"pg-overview-days",children:B.days.map((ee,ve)=>a.jsxs("div",{className:"pg-day-card",children:[a.jsxs("div",{className:"pg-day-header",children:[a.jsx("span",{className:"pg-day-name",children:ee.name}),a.jsx("span",{className:"pg-day-label",children:ee.label})]}),a.jsx("div",{className:"pg-day-exercises",children:ee.exercises.map((Ue,Ke)=>{const Ve=sd(Ue,1,B);return a.jsxs("div",{className:"pg-day-ex",children:[a.jsx("span",{className:"pg-day-ex-name",children:Ue.name}),a.jsx("span",{className:"pg-day-ex-target",children:Ue.type==="timed"?`${Ve.sets}${Ve.time}s`:`${Ve.sets}${Ve.reps}`}),a.jsx("span",{className:`pg-day-ex-badge pg-badge-${Ue.type}`,children:Ue.type==="weighted"?"WT":Ue.type==="timed"?"TMR":"BW"})]},Ke)})})]},ve))}),a.jsxs("div",{className:"pg-overview-note",children:[a.jsx("strong",{children:"Progressive Overload:"})," +",B.repProg," reps/week",B.timeProg?`, +${B.timeProg}s/week for timed`:""]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>an(B),children:"Start Programme"})]}),jt]})}if(y==="dashboard"){const B=bt();if(!B)return w("browse"),null;const ee=wt(),ve=W?.completedSessions||{},Ue=ee.totalSessions?Math.round(ee.totalCompleted/ee.totalSessions*100):0,Ke=Math.round(ee.totalCompleted/(ee.totalSessions||1)*Z3);return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[ln("Programme",()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-dash-hero",children:[a.jsxs("div",{className:"pg-dash-ring-wrap",children:[a.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:ko.map((Ve,Ye)=>a.jsx("line",{x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,className:Ye<Ke?"pg-tick-filled":"pg-tick-empty",strokeWidth:Ve.thick?"3":"2"},Ye))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"pg-dash-ring-logo",width:"50",height:"50"})]}),a.jsx("h2",{className:"pg-dash-name",children:B.name}),a.jsxs("div",{className:"pg-dash-progress-text",children:[a.jsxs("span",{className:"pg-dash-pct",children:[Ue,"%"]}),a.jsxs("span",{className:"pg-dash-week",children:["Week ",ee.currentWeek," of ",B.duration]})]})]}),a.jsx("div",{className:"pg-weeks",children:Array.from({length:B.duration},(Ve,Ye)=>{const He=Ye+1;return a.jsxs("div",{className:`pg-week-row${He===ee.currentWeek?" pg-week-current":""}`,children:[a.jsxs("span",{className:"pg-week-label",children:["W",He]}),a.jsx("div",{className:"pg-week-days",children:B.days.map((qe,St)=>{const Gt=`w${He}d${St}`,Lt=!!ve[Gt],on=!ee.complete&&He===ee.nextWeek&&St===ee.nextDay;return a.jsx("button",{className:`pg-day-dot${Lt?" done":""}${on?" next":""}`,disabled:Lt,onClick:()=>{on&&Xe(He,St)},children:Lt?a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}):a.jsx("span",{children:qe.name.replace("Day ","")})},St)})})]},Ye)})}),!ee.complete&&ee.nextDay>=0&&a.jsxs("div",{className:"pg-next-session",children:[a.jsx("h3",{children:"Next Session"}),a.jsxs("p",{className:"pg-next-info",children:["Week ",ee.nextWeek,"  ",B.days[ee.nextDay].name,": ",B.days[ee.nextDay].label]}),a.jsx("div",{className:"pg-next-exercises",children:B.days[ee.nextDay].exercises.map((Ve,Ye)=>{const He=sd(Ve,ee.nextWeek,B);return a.jsxs("div",{className:"pg-next-ex",children:[a.jsx("span",{className:"pg-next-ex-name",children:Ve.name}),a.jsx("span",{className:"pg-next-ex-target",children:Ve.type==="timed"?`${He.sets}${He.time}s`:`${He.sets}${He.reps}`})]},Ye)})}),a.jsx("button",{className:"pg-start-btn",onClick:()=>Xe(ee.nextWeek,ee.nextDay),children:"Start Session"})]}),ee.complete&&a.jsxs("div",{className:"pg-complete-msg",children:[a.jsx("h3",{children:"Programme Complete! "}),a.jsxs("p",{children:["You finished all ",ee.totalSessions," sessions."]}),a.jsx("button",{className:"pg-start-btn",onClick:Ct,children:"Choose New Programme"})]}),a.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&Ct()},children:"Quit Programme"})]}),a.jsx(Hr,{active:"workouts"}),jt]})}if(y==="session"){const B=bt();if(!B)return null;const ee=B.days[J],ve=ee.exercises[we],Ue=sd(ve,V,B),Ke=S[we],Ve=Ke?.sets?.length||0,Ye=ee.exercises.length,He=(we+Ve/Ue.sets)/Ye,qe=ce[ve.name],St=ct(V,J,ve.name);ve.type==="timed"&&Q===0&&!ze&&Ve===De&&setTimeout(()=>Te(Ue.time),0);const Gt=()=>{qe?.isGif?U(!C):le.current&&(C?le.current.pause():le.current.play(),U(!C))};return a.jsxs("div",{className:"pg-page pg-page-session","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"pg-session-progress",children:a.jsx("div",{className:"pg-session-progress-fill",style:{width:`${He*100}%`}})}),a.jsxs("div",{className:"pg-session-header",children:[a.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&w("dashboard")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),a.jsxs("div",{className:"pg-session-title",children:[a.jsxs("span",{className:"pg-session-counter",children:[we+1," / ",Ye]}),a.jsxs("span",{className:"pg-session-week",children:["Week ",V,"  ",ee.name]})]})]}),qe&&a.jsxs("div",{className:"pg-video-container",onClick:Gt,children:[qe.isGif?a.jsx("img",{className:"pg-video",src:qe.url,alt:ve.name}):a.jsx("video",{ref:le,className:"pg-video",src:qe.url,loop:!0,muted:!0,playsInline:!0},ve.name),!C&&a.jsxs("div",{className:"pg-video-overlay",children:[a.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),a.jsx("div",{className:"pg-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"pg-exercise-card",children:[a.jsx("h2",{className:"pg-ex-name",children:ve.name}),a.jsx("span",{className:`pg-ex-type-badge pg-badge-${ve.type}`,children:ve.type==="weighted"?"Weight + Reps":ve.type==="timed"?"Timed":"Reps Only"}),ve.type==="weighted"&&St&&a.jsxs("div",{className:"pg-last-week",children:[a.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),a.jsxs("span",{className:"pg-last-week-value",children:[St.weight,"kg x ",St.reps," reps"]})]}),a.jsxs("div",{className:"pg-ex-set-info",children:[a.jsxs("span",{className:"pg-ex-set-num",children:["Set ",Ve+1," of ",Ue.sets]}),a.jsxs("span",{className:"pg-ex-target",children:["Target: ",ve.type==="timed"?`${Ue.time}s hold`:`${Ue.reps} reps`]})]}),ve.type==="weighted"&&a.jsxs("div",{className:"pg-input-area",children:[a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",value:P,onChange:Lt=>D(Lt.target.value),placeholder:"0",className:"pg-input"})]}),a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:H,onChange:Lt=>I(Lt.target.value),placeholder:String(Ue.reps),className:"pg-input"})]})]}),ve.type==="reps"&&a.jsx("div",{className:"pg-input-area",children:a.jsxs("div",{className:"pg-input-group pg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:H,onChange:Lt=>I(Lt.target.value),placeholder:String(Ue.reps),className:"pg-input"})]})}),ve.type==="timed"&&a.jsxs("div",{className:"pg-timer-area",children:[a.jsx("div",{className:"pg-timer-display",children:a.jsxs("span",{className:"pg-timer-value",children:[Q,"s"]})}),ze?a.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>pt(!1),children:"Stop"}):a.jsx("button",{className:"pg-timer-btn",onClick:()=>{Q===0&&Te(Ue.time),pt(!0)},children:Q<Ue.time&&Q>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"pg-log-set-btn",onClick:qt,disabled:ve.type==="timed"&&ze,children:Ve+1<Ue.sets?"Log Set":we+1<Ye?"Log Set  Next Exercise":"Log Set  Complete"}),Ke?.sets?.length>0&&a.jsx("div",{className:"pg-completed-sets",children:Ke.sets.map((Lt,on)=>a.jsxs("div",{className:"pg-completed-set",children:[a.jsx("span",{className:"pg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",on+1,": ",Lt.weight!==void 0?`${Lt.weight}kg  ${Lt.reps}`:Lt.time!==void 0?`${Lt.time}s`:`${Lt.reps} reps`]})]},on))})]}),jt]})}if(y==="sessionComplete"){const ee=bt()?.days[J],ve=S.reduce((Ke,Ve)=>Ke+Ve.sets.length,0),Ue=S.reduce((Ke,Ve)=>Ke+Ve.sets.reduce((Ye,He)=>Ye+(He.weight||0)*(He.reps||0),0),0);return a.jsxs("div",{className:"pg-page pg-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"pg-session-done",children:[a.jsxs("div",{className:"pg-done-ring",children:[a.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:ko.map((Ke,Ve)=>a.jsx("line",{x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,className:"pg-tick-complete",strokeWidth:Ke.thick?"3.5":"2",style:{animationDelay:`${Ve*.02}s`}},Ve))}),a.jsx("div",{className:"pg-done-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),a.jsxs("p",{className:"pg-done-subtitle",children:["Week ",V,"  ",ee?.name,": ",ee?.label]}),a.jsxs("div",{className:"pg-done-stats",children:[a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:S.length}),a.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:ve}),a.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),Ue>0&&a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Math.round(Ue).toLocaleString()}),a.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>w("dashboard"),children:"Back to Programme"})]}),pe&&a.jsx("div",{className:"pg-badge-celebration",onClick:()=>Ae(null),children:a.jsxs("div",{className:"pg-badge-celebration-card",onClick:Ke=>Ke.stopPropagation(),children:[a.jsx("div",{className:"pg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pg-badge-celebration-title",children:pe.badges.length===1?"Badge Earned!":`${pe.badges.length} Badges Earned!`}),a.jsx("div",{className:"pg-badge-celebration-list",children:pe.badges.map((Ke,Ve)=>a.jsx("div",{className:"pg-badge-celebration-item",children:Ke.type==="pb_target"?`${Ke.exercise}  ${Ke.targetWeight}kg`:Ke.label},Ve))}),a.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Ae(null),children:"Tap to dismiss"})]})}),jt]})}return null}const rD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},aD={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},Op=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function iD(s){return rD[s]||"push"}function oD(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function lD(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function cD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=dr(),{isDark:l,toggleTheme:u,accent:h}=Gr(),p=Rs(),[g,y]=_.useState(!0),[w,T]=_.useState(null),[E,O]=_.useState({});_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const[A,P]=await Promise.all([Mn(Ge(_e,"coreBuddyAchievements",n.id)),Mn(Ge(_e,"coreBuddyPBs",n.id))]);A.exists()&&T(A.data()),P.exists()&&O(P.data().exercises||{})}catch(A){console.error("Error loading achievements:",A)}y(!1)})()},[n]);const W=w?.badges||[],z=w?.totalVolume||0,V=W.filter(S=>S.type==="pb_target"),re=W.filter(S=>S.type==="volume_milestone"),J={push:[],pull:[],lower:[],core:[]};V.forEach(S=>{const A=S.group||iD(S.exercise);J[A]&&J[A].push(S)});const ue=Op.find(S=>z<S.threshold),we=Op.filter(S=>z>=S.threshold).pop()?.threshold||0,Be=ue?(z-we)/(ue.threshold-we):1;if(i||g)return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsx("div",{className:"ach-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});const De=W.length,M=De>0||z>0;return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ach-main",children:[a.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/core-buddy"),children:" Back"}),a.jsxs("div",{className:"ach-stats-banner",children:[a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:De}),a.jsx("span",{className:"ach-stat-label",children:De===1?"Badge":"Badges"})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:oD(z)}),a.jsxs("span",{className:"ach-stat-label",children:[lD(z)," lifted"]})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Object.keys(E).length}),a.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!M&&a.jsxs("div",{className:"ach-empty",children:[a.jsx("div",{className:"ach-empty-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),a.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),a.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),a.jsx("h4",{children:"No achievements yet"}),a.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),a.jsxs("div",{className:"ach-volume-hero",children:[a.jsxs("div",{className:"ach-volume-ring",children:[a.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:ko.map((S,A)=>{const P=A<Math.round(Be*60);return a.jsx("line",{x1:S.x1,y1:S.y1,x2:S.x2,y2:S.y2,className:P?"ach-tick-filled":"ach-tick-empty",strokeWidth:S.thick?"3":"2"},A)})}),a.jsxs("div",{className:"ach-volume-center",children:[a.jsx("span",{className:"ach-volume-number",children:Math.round(z).toLocaleString()}),a.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),ue&&a.jsxs("div",{className:"ach-volume-next",children:["Next: ",a.jsx("strong",{children:ue.label})," (",(ue.threshold-z).toLocaleString(),"kg to go)"]})]}),a.jsx("div",{className:"ach-milestone-shelf",children:Op.map((S,A)=>{const P=z>=S.threshold,D=re.find(H=>H.milestone===S.threshold);return a.jsxs("div",{className:`ach-milestone ${P?"unlocked":"locked"}`,children:[a.jsx("div",{className:"ach-milestone-hex",children:a.jsx("span",{className:"ach-milestone-icon",children:S.icon})}),a.jsx("span",{className:"ach-milestone-label",children:S.label}),D?.achievedAt&&a.jsx("span",{className:"ach-milestone-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},A)})})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),V.length===0?a.jsx("div",{className:"ach-pb-empty",children:a.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",a.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(J).map(([S,A])=>{if(A.length===0)return null;const P=aD[S];return a.jsxs("div",{className:"ach-group",children:[a.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:P.color},children:[a.jsx("span",{className:"ach-group-label",style:{color:P.color},children:P.label}),a.jsx("span",{className:"ach-group-count",children:A.length})]}),a.jsx("div",{className:"ach-badge-grid",children:A.map((D,H)=>a.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${H*.06}s`,"--group-color":P.color},children:[a.jsx("div",{className:"ach-badge-hex",style:{borderColor:P.color,boxShadow:`0 0 12px ${P.color}33`},children:a.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:P.color,strokeWidth:"2",strokeLinecap:"round",children:a.jsx("path",{d:P.icon})})}),a.jsxs("div",{className:"ach-badge-info",children:[a.jsx("span",{className:"ach-badge-exercise",children:D.exercise}),a.jsxs("span",{className:"ach-badge-value",style:{color:P.color},children:[D.targetWeight,"kg"]}),D.achievedAt&&a.jsx("span",{className:"ach-badge-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},H))})]},S)})]})]}),a.jsx(Hr,{active:"home"})]})}const rd=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function uD(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Vp(s){return s.toISOString().split("T")[0]}function hD(s){return Array.from({length:7},(e,n)=>{const i=new Date(s);return i.setDate(s.getDate()+n),i})}function dD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=dr(),{isDark:l,toggleTheme:u,accent:h}=Gr(),p=Rs(),[g,y]=_.useState({}),[w,T]=_.useState(!0),[E,O]=_.useState(!1),[W,z]=_.useState(0),[V,re]=_.useState(null),[J,ue]=_.useState(null),[we,Be]=_.useState(!1),De=_.useRef([]),M=_.useRef([]),S=_.useCallback((U,le="info")=>{re({message:U,type:le}),setTimeout(()=>re(null),3e3)},[]),A=new Date,P=Vp(A),D=uD(A),H=hD(D),I=["M","T","W","T","F","S","S"];_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const le=Pt(_e,"habitLogs"),pe=mn(le,nn("clientId","==",n.id)),Ae=await rn(pe),Pe={};Ae.docs.forEach(at=>{const Dt=at.data();Pe[Dt.date]={...Dt,_id:at.id}}),y(Pe);let Qe=0;const Fe=new Date(A);for(;;){const at=Vp(Fe),Dt=Pe[at];if(Dt)if(Object.values(Dt.habits||{}).filter(Boolean).length>=3)Qe++,Fe.setDate(Fe.getDate()-1);else break;else if(at===P)Fe.setDate(Fe.getDate()-1);else break}z(Qe)}catch(le){console.error("Error loading habit logs:",le)}finally{T(!1)}})()},[s,n]);const ze=g[P]||{habits:{}},pt=async U=>{if(!s||E)return;const le=ze.habits?.[U]||!1;le||(De.current=[...Array(10)].map((pe,Ae)=>{const Pe=Ae/10*2*Math.PI,Qe=18+Math.random()*20;return{tx:Math.cos(Pe)*Qe,ty:Math.sin(Pe)*Qe,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),ue(U),setTimeout(()=>ue(null),700)),O(!0);try{const pe=ze.habits||{},Ae={...pe,[U]:!pe[U]},Pe=ze._id||`${n.id}_${P}`;await wn(Ge(_e,"habitLogs",Pe),{clientId:n.id,date:P,habits:Ae}),y(Fe=>({...Fe,[P]:{clientId:n.id,date:P,habits:Ae,_id:Pe}})),Object.values(Ae).filter(Boolean).length===rd.length&&!le&&(M.current=[...Array(50)].map((Fe,at)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][at%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{Be(!0),setTimeout(()=>Be(!1),3500)},500))}catch(pe){console.error("Error saving habit:",pe),S("Failed to save. Try again.","error")}finally{O(!1)}},Q=H.map(U=>{const le=Vp(U),pe=g[le],Ae=pe?Object.values(pe.habits||{}).filter(Boolean).length:0;return{date:U,dateStr:le,completed:Ae,total:rd.length}}),Te=Q.reduce((U,le)=>U+le.completed,0),Le=Q.reduce((U,le)=>U+le.total,0),ce=Le>0?Math.round(Te/Le*100):0,Oe=Object.values(ze.habits||{}).filter(Boolean).length,C=Math.round(Oe/rd.length*100);return a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||w?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-ring-section",children:[a.jsxs("div",{className:"cbc-progress-ring",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-C/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-pct",children:[C,"%"]}),a.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),a.jsxs("div",{className:"cbc-streak",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{className:"cbc-streak-count",children:W}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsx("div",{className:"cbc-habits",children:rd.map(U=>{const le=ze.habits?.[U.key]||!1,pe=J===U.key;return a.jsxs("button",{className:`cbc-habit-btn cbc-habit-${U.key} ${le?"cbc-habit-done":""} ${pe?"cbc-habit-just-checked":""}`,onClick:()=>pt(U.key),disabled:E,children:[a.jsx("div",{className:"cbc-habit-check",children:le?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${pe?"cbc-check-animate":""}`})}):a.jsx("div",{className:"cbc-habit-circle"})}),pe&&a.jsx("div",{className:"cbc-particles",children:De.current.map((Ae,Pe)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${Ae.tx}px`,"--ty":`${Ae.ty}px`,"--size":`${Ae.size}px`,animationDuration:`${Ae.duration}s`}},Pe))}),a.jsx("div",{className:`cbc-habit-icon cbc-icon-${U.key}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:U.icon})})}),a.jsx("span",{className:"cbc-habit-label",children:U.label})]},U.key)})})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsx("div",{className:"cbc-week-grid",children:Q.map((U,le)=>{const pe=U.dateStr===P,Ae=U.total>0?U.completed/U.total:0,Pe=38,Qe=2*Math.PI*Pe,Fe=Qe-Ae*Qe;return a.jsxs("div",{className:`cbc-day-ring ${pe?"cbc-day-today":""} ${U.completed>0?"cbc-day-active":""}`,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:Pe}),a.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:Pe,strokeDasharray:Qe,strokeDashoffset:Fe})]}),a.jsx("span",{className:"cbc-day-label",children:I[le]}),a.jsxs("span",{className:"cbc-day-count",children:[U.completed,"/",U.total]})]},le)})}),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${ce}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[Te," / ",Le," habits this week (",ce,"%)"]})]})]})]}),a.jsx(Hr,{active:"home"}),we&&a.jsxs("div",{className:"cbc-celebration",onClick:()=>Be(!1),children:[a.jsx("div",{className:"cbc-confetti-container",children:M.current.map((U,le)=>a.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${U.x}%`,"--delay":`${U.delay}s`,"--color":U.color,"--drift":`${U.drift}px`,"--spin":`${U.spin}deg`,"--duration":`${U.duration}s`,width:`${U.width}px`,height:`${U.height}px`}},le))}),a.jsxs("div",{className:"cbc-celebration-card",children:[a.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),a.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),a.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),V&&a.jsx("div",{className:`toast-notification ${V.type}`,children:V.message})]})}function ad(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function cx(s,e){return[s,e].sort().join("_")}function fD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=dr(),{isDark:l,toggleTheme:u}=Gr(),h=Rs(),[p,g]=_.useState("buddies"),[y,w]=_.useState([]),[T,E]=_.useState([]),[O,W]=_.useState([]),[z,V]=_.useState(""),[re,J]=_.useState([]),[ue,we]=_.useState([]),[Be,De]=_.useState(!0),[M,S]=_.useState(null),[A,P]=_.useState(null),D=_.useCallback((ce,Oe="info")=>{P({message:ce,type:Oe}),setTimeout(()=>P(null),3500)},[]);_.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const H=_.useCallback(async()=>{if(n){De(!0);try{const ce=n.id,C=(await rn(Pt(_e,"clients"))).docs.map(Fe=>({id:Fe.id,...Fe.data()}));we(C);const U=Object.fromEntries(C.map(Fe=>[Fe.id,Fe])),le=await rn(mn(Pt(_e,"buddies"),nn("user1","==",ce))),pe=await rn(mn(Pt(_e,"buddies"),nn("user2","==",ce))),Ae=new Set;[...le.docs,...pe.docs].forEach(Fe=>{const at=Fe.data(),Dt=at.user1===ce?at.user2:at.user1;Ae.add(Dt)}),w(Array.from(Ae).map(Fe=>U[Fe]).filter(Boolean));const Pe=await rn(mn(Pt(_e,"buddyRequests"),nn("toId","==",ce),nn("status","==","pending")));E(Pe.docs.map(Fe=>({reqId:Fe.id,...Fe.data(),fromClient:U[Fe.data().fromId]})).filter(Fe=>Fe.fromClient));const Qe=await rn(mn(Pt(_e,"buddyRequests"),nn("fromId","==",ce),nn("status","==","pending")));W(Qe.docs.map(Fe=>({reqId:Fe.id,...Fe.data(),toClient:U[Fe.data().toId]})).filter(Fe=>Fe.toClient))}catch(ce){console.error("Error fetching buddy data:",ce),D("Failed to load buddies","error")}finally{De(!1)}}},[n,D]);_.useEffect(()=>{H()},[H]),_.useEffect(()=>{if(!z.trim()||!n){J([]);return}const ce=z.toLowerCase(),Oe=n.id,C=new Set(y.map(Ae=>Ae.id)),U=new Set(O.map(Ae=>Ae.toId)),le=new Set(T.map(Ae=>Ae.fromId)),pe=ue.filter(Ae=>Ae.id===Oe||!Ae.name||!Ae.coreBuddyAccess?!1:Ae.name.toLowerCase().includes(ce)).map(Ae=>({...Ae,isBuddy:C.has(Ae.id),isPendingOut:U.has(Ae.id),isPendingIn:le.has(Ae.id)})).slice(0,20);J(pe)},[z,ue,y,O,T,n]);const I=async ce=>{S(ce);try{const Oe=`${n.id}_${ce}`;await wn(Ge(_e,"buddyRequests",Oe),{fromId:n.id,toId:ce,status:"pending",createdAt:cr()}),D("Buddy request sent!","success"),await H()}catch(Oe){console.error("Error sending request:",Oe),D("Failed to send request","error")}finally{S(null)}},ze=async ce=>{S(ce.reqId);try{const Oe=cx(ce.fromId,n.id);await wn(Ge(_e,"buddies",Oe),{user1:[ce.fromId,n.id].sort()[0],user2:[ce.fromId,n.id].sort()[1],connectedAt:cr()}),await Vs(Ge(_e,"buddyRequests",ce.reqId)),D("Buddy added!","success"),await H()}catch(Oe){console.error("Error accepting request:",Oe),D("Failed to accept","error")}finally{S(null)}},pt=async ce=>{S(ce.reqId);try{await Vs(Ge(_e,"buddyRequests",ce.reqId)),D("Request declined","info"),await H()}catch(Oe){console.error("Error declining:",Oe),D("Failed to decline","error")}finally{S(null)}},Q=async ce=>{S(ce.reqId);try{await Vs(Ge(_e,"buddyRequests",ce.reqId)),D("Request cancelled","info"),await H()}catch(Oe){console.error("Error cancelling:",Oe),D("Failed to cancel","error")}finally{S(null)}},Te=async ce=>{S(ce);try{const Oe=cx(n.id,ce);await Vs(Ge(_e,"buddies",Oe)),D("Buddy removed","info"),await H()}catch(Oe){console.error("Error removing buddy:",Oe),D("Failed to remove buddy","error")}finally{S(null)}},Le=T.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!n?null:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),Le>0&&a.jsx("span",{className:"bdy-tab-badge",children:Le})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Be?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(ce=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${ce.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:ce.photoURL?a.jsx("img",{src:ce.photoURL,alt:ce.name}):a.jsx("span",{children:ad(ce.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:ce.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:Oe=>{Oe.stopPropagation(),Te(ce.id)},disabled:M===ce.id,"aria-label":"Remove buddy",children:M===ce.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ce.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[T.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:T.map(ce=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:ce.fromClient.photoURL?a.jsx("img",{src:ce.fromClient.photoURL,alt:ce.fromClient.name}):a.jsx("span",{children:ad(ce.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ce.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>ze(ce),disabled:M===ce.reqId,children:M===ce.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>pt(ce),disabled:M===ce.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},ce.reqId))})]}),O.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:O.map(ce=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:ce.toClient?.photoURL?a.jsx("img",{src:ce.toClient.photoURL,alt:ce.toClient.name}):a.jsx("span",{children:ad(ce.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ce.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>Q(ce),disabled:M===ce.reqId,children:M===ce.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},ce.reqId))})]}),T.length===0&&O.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:z,onChange:ce=>V(ce.target.value),autoFocus:!0}),z&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>V(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),z.trim()&&re.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',z,'"']})}),re.length>0&&a.jsx("div",{className:"bdy-list",children:re.map(ce=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${ce.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:ce.photoURL?a.jsx("img",{src:ce.photoURL,alt:ce.name}):a.jsx("span",{children:ad(ce.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ce.name}),ce.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),ce.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):ce.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):ce.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:Oe=>{Oe.stopPropagation();const C=T.find(U=>U.fromId===ce.id);C&&ze(C)},disabled:!!M,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:Oe=>{Oe.stopPropagation(),I(ce.id)},disabled:M===ce.id,children:M===ce.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},ce.id))})]})]})]}),a.jsx(Hr,{}),A&&a.jsxs("div",{className:`toast-notification ${A.type}`,children:[a.jsx("span",{className:"toast-icon",children:A.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):A.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:A.message})]})]})}function id(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Bp(s,e){return[s,e].sort().join("_")}function mD(s){if(s<60)return`${s}m`;const e=Math.floor(s/60),n=s%60;return n>0?`${e}h ${n}m`:`${e}h`}function pD(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function ux(s){return s.toISOString().split("T")[0]}function gD(s){if(s.size===0)return 0;const n=pD(new Date);let i=0,l=new Date(n);const u=new Date(l);u.setDate(u.getDate()+6);let h=!1;s.forEach(p=>{const g=new Date(p);g>=l&&g<=u&&(h=!0)}),h||l.setDate(l.getDate()-7);for(let p=0;p<52;p++){const g=new Date(l),y=new Date(l);y.setDate(y.getDate()+6);let w=!1;if(s.forEach(T=>{const E=new Date(T);E>=g&&E<=y&&(w=!0)}),w)i++,l.setDate(l.getDate()-7);else break}return i}function hx(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function yD(s,e=800){return new Promise(n=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,h=i.height;u>h?u>e&&(h=Math.round(h*e/u),u=e):h>e&&(u=Math.round(u*e/h),h=e),l.width=u,l.height=h,l.getContext("2d").drawImage(i,0,0,u,h),l.toBlob(p=>n(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}const dx=[{id:"first_workout",name:"First Rep",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 4v16"}),a.jsx("path",{d:"M18 4v16"}),a.jsx("path",{d:"M6 12h12"}),a.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),a.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]})},{id:"workouts_10",name:"On Fire",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),a.jsx("path",{d:"M12 14v4"}),a.jsx("path",{d:"M10 18h4"})]})},{id:"workouts_25",name:"Lightning",icon:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})},{id:"workouts_50",name:"Iron Will",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12h4"}),a.jsx("path",{d:"M16 12h4"}),a.jsx("path",{d:"M12 4v4"}),a.jsx("path",{d:"M12 16v4"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]})},{id:"workouts_100",name:"Century",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]})},{id:"streak_2",name:"2 Wk",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M9 16l2 2 4-4"})]})},{id:"streak_4",name:"4 Wk",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M8 16h8"}),a.jsx("path",{d:"M12 14v4"})]})},{id:"streak_8",name:"8 Wk",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),a.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]})},{id:"programme_done",name:"Finisher",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("path",{d:"M4 22h16"}),a.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),a.jsx("path",{d:"M9 12l2 2 4-4"})]})},{id:"habits_7",name:"Habits",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})},{id:"nutrition_7",name:"Fuel",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),a.jsx("path",{d:"M9 7h6"})]})},{id:"first_pb",name:"PB",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M12 14v8"}),a.jsx("path",{d:"M9 18l3 3 3-3"}),a.jsx("path",{d:"M10 6l2 2 2-2"})]})},{id:"pbs_5",name:"Climb",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 20h18"}),a.jsx("path",{d:"M5 20V10l4-6"}),a.jsx("path",{d:"M9 20V4"}),a.jsx("path",{d:"M13 20V10l4-6"}),a.jsx("path",{d:"M17 20V4"}),a.jsx("path",{d:"M21 20V10"})]})},{id:"leaderboard_join",name:"Social",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}];function vD(){const{userId:s}=YT(),{currentUser:e,isClient:n,clientData:i,loading:l}=dr(),{isDark:u,toggleTheme:h}=Gr(),p=Rs(),[g,y]=_.useState(null),[w,T]=_.useState({workouts:0,minutes:0,streak:0}),[E,O]=_.useState([]),[W,z]=_.useState("none"),[V,re]=_.useState(null),[J,ue]=_.useState(!0),[we,Be]=_.useState(!1),[De,M]=_.useState(null),[S,A]=_.useState([]),[P,D]=_.useState(!1),[H,I]=_.useState(""),[ze,pt]=_.useState(null),[Q,Te]=_.useState(null),[Le,ce]=_.useState(!1),[Oe,C]=_.useState(new Set),[U,le]=_.useState(new Set),[pe,Ae]=_.useState({}),[Pe,Qe]=_.useState({}),[Fe,at]=_.useState({}),Dt=_.useRef(null),Wt=_.useRef(null),lt=_.useCallback((B,ee="info")=>{M({message:B,type:ee}),setTimeout(()=>M(null),3500)},[]);_.useEffect(()=>{!l&&(!e||!n)&&p("/")},[e,n,l,p]);const dt=i?.id===s;_.useEffect(()=>{if(!i||!s)return;let B=!1;return(async()=>{ue(!0);try{const Ue=(await rn(Pt(_e,"clients"))).docs.map(Nt=>({id:Nt.id,...Nt.data()})).find(Nt=>Nt.id===s);if(!Ue){B||ue(!1);return}B||y(Ue);const Ke=new Date,Ve=new Date(Ke);Ve.setDate(Ve.getDate()-365),Ve.setHours(0,0,0,0);let Ye=0,He=0;const qe=new Set;(await rn(mn(Pt(_e,"workoutLogs"),nn("clientId","==",s)))).docs.forEach(Nt=>{const Kt=Nt.data();Ye++,He+=Kt.duration||0,Kt.completedAt&&qe.add(ux(Kt.completedAt.toDate()))}),(await rn(Pt(_e,"circuitSessions"))).docs.forEach(Nt=>{const Kt=Nt.data();(Kt.slots||[]).forEach(hn=>{hn.attended&&hn.memberId===s&&(Ye++,He+=45,qe.add(Kt.date))})});const Lt=ux(new Date);(await rn(mn(Pt(_e,"sessions"),nn("clientId","==",s)))).docs.forEach(Nt=>{const Kt=Nt.data();Kt.date<=Lt&&(Ye++,He+=Kt.duration||45,qe.add(Kt.date))});const Cn=gD(qe);B||T({workouts:Ye,minutes:He,streak:Cn});const Tt=await Mn(Ge(_e,"coreBuddyAchievements",s));if(B||O(Tt.exists()?Tt.data().unlocked||[]:[]),!dt){const Nt=i.id,Kt=Bp(Nt,s);if((await Mn(Ge(_e,"buddies",Kt))).exists())B||z("buddy");else{const Jn=`${Nt}_${s}`,qn=await Mn(Ge(_e,"buddyRequests",Jn));if(qn.exists()&&qn.data().status==="pending")B||(z("pending_out"),re(Jn));else{const yn=`${s}_${Nt}`,Ln=await Mn(Ge(_e,"buddyRequests",yn));Ln.exists()&&Ln.data().status==="pending"?B||(z("pending_in"),re(yn)):B||z("none")}}}}catch(ee){console.error("Error loading profile:",ee)}finally{B||ue(!1)}})(),()=>{B=!0}},[i,s,dt]);const oe=async()=>{Be(!0);try{const B=`${i.id}_${s}`;await wn(Ge(_e,"buddyRequests",B),{fromId:i.id,toId:s,status:"pending",createdAt:cr()}),z("pending_out"),re(B),lt("Buddy request sent!","success")}catch(B){console.error(B),lt("Failed to send request","error")}finally{Be(!1)}},an=async()=>{if(V){Be(!0);try{const B=Bp(i.id,s);await wn(Ge(_e,"buddies",B),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:cr()}),await Vs(Ge(_e,"buddyRequests",V)),z("buddy"),lt("Buddy added!","success")}catch(B){console.error(B),lt("Failed to accept","error")}finally{Be(!1)}}},Ct=async()=>{if(V){Be(!0);try{await Vs(Ge(_e,"buddyRequests",V)),z("none"),lt(W==="pending_out"?"Request cancelled":"Request declined","info")}catch(B){console.error(B),lt("Failed","error")}finally{Be(!1)}}},bt=async()=>{Be(!0);try{const B=Bp(i.id,s);await Vs(Ge(_e,"buddies",B)),z("none"),lt("Buddy removed","info")}catch(B){console.error(B),lt("Failed to remove","error")}finally{Be(!1)}},wt=_.useCallback(async()=>{if(s){D(!0);try{const B=await rn(mn(Pt(_e,"posts"),nn("authorId","==",s),Ul("createdAt","desc"),zl(30)));if(A(B.docs.map(ee=>({id:ee.id,...ee.data()}))),i){const ee=await rn(mn(Pt(_e,"postLikes"),nn("userId","==",i.id)));C(new Set(ee.docs.map(ve=>ve.data().postId)))}}catch(B){console.error("Error loading journey:",B)}finally{D(!1)}}},[s,i]);_.useEffect(()=>{!J&&g&&wt()},[J,g,wt]);const ct=B=>{const ee=B.target.files?.[0];if(ee){if(!ee.type.startsWith("image/")){lt("Please select an image file","error");return}if(ee.size>10*1024*1024){lt("Image must be under 10MB","error");return}pt(ee),Te(URL.createObjectURL(ee))}},Xe=()=>{pt(null),Q&&URL.revokeObjectURL(Q),Te(null),Wt.current&&(Wt.current.value="")},qt=async()=>{if(!(!H.trim()&&!ze||Le||!i)){ce(!0);try{let B=null;if(ze){const ee=await yD(ze),ve=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,Ue=Mi(Ii,`postImages/${i.id}/${ve}`);await vg(Ue,ee),B=await Eo(Ue)}await Wa(Pt(_e,"posts"),{authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:H.trim(),type:B?"image":"text",imageURL:B||null,createdAt:cr(),likeCount:0,commentCount:0}),I(""),Xe(),Dt.current&&(Dt.current.style.height="auto"),await wt(),lt("Posted!","success")}catch(B){console.error("Error posting:",B),lt("Failed to post","error")}finally{ce(!1)}}},Wn=async B=>{if(window.confirm("Delete this post?"))try{await Vs(Ge(_e,"posts",B)),A(ee=>ee.filter(ve=>ve.id!==B)),lt("Post deleted","info")}catch(ee){console.error("Delete error:",ee),lt("Failed to delete","error")}},Et=async B=>{if(!i)return;const ee=i.id,ve=`${B}_${ee}`,Ue=Oe.has(B),Ke=new Set(Oe);Ue?Ke.delete(B):Ke.add(B),C(Ke),A(Ve=>Ve.map(Ye=>Ye.id===B?{...Ye,likeCount:Math.max(0,(Ye.likeCount||0)+(Ue?-1:1))}:Ye));try{Ue?(await Vs(Ge(_e,"postLikes",ve)),await oa(Ge(_e,"posts",B),{likeCount:Ua(-1)})):(await wn(Ge(_e,"postLikes",ve),{postId:B,userId:ee,createdAt:cr()}),await oa(Ge(_e,"posts",B),{likeCount:Ua(1)}))}catch(Ve){console.error("Like error:",Ve),wt()}},At=async B=>{try{const ee=await rn(mn(Pt(_e,"postComments"),nn("postId","==",B),Ul("createdAt","asc"),zl(50)));Ae(ve=>({...ve,[B]:ee.docs.map(Ue=>({id:Ue.id,...Ue.data()}))}))}catch(ee){console.error("Error loading comments:",ee)}},Nn=B=>{const ee=new Set(U);ee.has(B)?ee.delete(B):(ee.add(B),pe[B]||At(B)),le(ee)},jt=async B=>{const ee=(Pe[B]||"").trim();if(!(!ee||!i)){at(ve=>({...ve,[B]:!0}));try{await Wa(Pt(_e,"postComments"),{postId:B,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:ee,createdAt:cr()}),await oa(Ge(_e,"posts",B),{commentCount:Ua(1)}),Qe(ve=>({...ve,[B]:""})),A(ve=>ve.map(Ue=>Ue.id===B?{...Ue,commentCount:(Ue.commentCount||0)+1}:Ue)),await At(B)}catch(ve){console.error("Comment error:",ve),lt("Failed to comment","error")}finally{at(ve=>({...ve,[B]:!1}))}}},ln=B=>{I(B.target.value),B.target.style.height="auto",B.target.style.height=Math.min(B.target.scrollHeight,120)+"px"};return l||J||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!n?null:g?a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:h,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:id(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),dt&&a.jsx("span",{className:"prf-you-label",children:"You"}),!dt&&a.jsxs("div",{className:"prf-buddy-action",children:[W==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:oe,disabled:we,children:we?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),W==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:Ct,disabled:we,children:we?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),W==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:an,disabled:we,children:we?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:Ct,disabled:we,children:"Decline"})]}),W==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:bt,disabled:we,children:we?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),a.jsxs("div",{className:"prf-stats",children:[a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:w.workouts}),a.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:mD(w.minutes)}),a.jsx("span",{className:"prf-stat-label",children:"Active Time"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[w.streak,a.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),a.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:"Achievements"}),a.jsx("div",{className:"prf-badges",children:dx.map(B=>{const ee=E.includes(B.id);return a.jsxs("div",{className:`prf-badge${ee?" unlocked":" locked"}`,title:B.name,children:[a.jsx("span",{className:"prf-badge-icon",children:B.icon}),a.jsx("span",{className:"prf-badge-name",children:B.name})]},B.id)})}),a.jsxs("p",{className:"prf-badges-count",children:[E.length,"/",dx.length," unlocked"]})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:dt?"My Journey":`${g.name?.split(" ")[0]}'s Journey`}),dt&&a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:i.photoURL?a.jsx("img",{src:i.photoURL,alt:""}):a.jsx("span",{children:id(i.name)})}),a.jsxs("div",{className:"journey-compose-body",children:[a.jsx("textarea",{ref:Dt,placeholder:"Share your progress...",value:H,onChange:ln,rows:1,maxLength:500}),Q&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:Q,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:Xe,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>Wt.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:Wt,type:"file",accept:"image/*",onChange:ct,hidden:!0}),(H.trim()||ze)&&a.jsx("button",{className:"journey-post-btn",onClick:qt,disabled:Le,children:Le?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),P?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):S.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:dt?"Start sharing your fitness journey!":"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:S.map(B=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:B.authorPhotoURL?a.jsx("img",{src:B.authorPhotoURL,alt:""}):a.jsx("span",{children:id(B.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:B.authorName}),a.jsx("span",{className:"journey-post-time",children:hx(B.createdAt)})]}),B.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>Wn(B.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),B.content&&a.jsx("p",{className:"journey-post-content",children:B.content}),B.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:B.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${Oe.has(B.id)?" liked":""}`,onClick:()=>Et(B.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:Oe.has(B.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:B.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${U.has(B.id)?" active":""}`,onClick:()=>Nn(B.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:B.commentCount||0})]})]}),U.has(B.id)&&a.jsxs("div",{className:"journey-comments",children:[pe[B.id]?.length>0?pe[B.id].map(ee=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${ee.authorId}`),children:ee.authorPhotoURL?a.jsx("img",{src:ee.authorPhotoURL,alt:""}):a.jsx("span",{children:id(ee.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:ee.authorName}),a.jsx("span",{className:"journey-comment-text",children:ee.content})]}),a.jsx("span",{className:"journey-comment-time",children:hx(ee.createdAt)})]})]},ee.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:Pe[B.id]||"",onChange:ee=>Qe(ve=>({...ve,[B.id]:ee.target.value})),onKeyDown:ee=>{ee.key==="Enter"&&jt(B.id)},maxLength:300}),a.jsx("button",{onClick:()=>jt(B.id),disabled:!(Pe[B.id]||"").trim()||Fe[B.id],children:Fe[B.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},B.id))})]})]}),a.jsx(Hr,{}),De&&a.jsxs("div",{className:`toast-notification ${De.type}`,children:[a.jsx("span",{className:"toast-icon",children:De.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):De.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:De.message})]})]}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(Hr,{})]})}function Up(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function fx(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function bD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=dr(),{isDark:l,toggleTheme:u}=Gr(),h=Rs(),[p,g]=_.useState([]),[y,w]=_.useState(!0),[T,E]=_.useState(""),[O,W]=_.useState(!1),[z,V]=_.useState(new Set),[re,J]=_.useState(new Set),[ue,we]=_.useState({}),[Be,De]=_.useState({}),[M,S]=_.useState({}),[A,P]=_.useState(null),D=_.useRef(null),H=_.useCallback((C,U="info")=>{P({message:C,type:U}),setTimeout(()=>P(null),3500)},[]);_.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const I=_.useCallback(async()=>{if(n){w(!0);try{const C=n.id,U=await rn(mn(Pt(_e,"buddies"),nn("user1","==",C))),le=await rn(mn(Pt(_e,"buddies"),nn("user2","==",C))),pe=new Set;[...U.docs,...le.docs].forEach(Fe=>{const at=Fe.data();pe.add(at.user1===C?at.user2:at.user1)});const Ae=[C,...Array.from(pe)].slice(0,30);let Pe=[];Ae.length>0&&(Pe=(await rn(mn(Pt(_e,"posts"),nn("authorId","in",Ae),Ul("createdAt","desc"),zl(50)))).docs.map(at=>({id:at.id,...at.data()}))),g(Pe);const Qe=await rn(mn(Pt(_e,"postLikes"),nn("userId","==",C)));V(new Set(Qe.docs.map(Fe=>Fe.data().postId)))}catch(C){console.error("Error loading feed:",C),H("Failed to load feed","error")}finally{w(!1)}}},[n,H]);_.useEffect(()=>{I()},[I]);const ze=async()=>{if(!(!T.trim()||O||!n)){W(!0);try{await Wa(Pt(_e,"posts"),{authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:T.trim(),type:"text",createdAt:cr(),likeCount:0,commentCount:0}),E(""),D.current&&(D.current.style.height="auto"),await I(),H("Posted!","success")}catch(C){console.error("Error posting:",C),H("Failed to post","error")}finally{W(!1)}}},pt=async C=>{if(window.confirm("Delete this post?"))try{await Vs(Ge(_e,"posts",C)),g(U=>U.filter(le=>le.id!==C)),H("Post deleted","info")}catch(U){console.error("Delete error:",U),H("Failed to delete","error")}},Q=async C=>{if(!n)return;const U=n.id,le=`${C}_${U}`,pe=z.has(C),Ae=new Set(z);pe?Ae.delete(C):Ae.add(C),V(Ae),g(Pe=>Pe.map(Qe=>Qe.id===C?{...Qe,likeCount:Math.max(0,(Qe.likeCount||0)+(pe?-1:1))}:Qe));try{pe?(await Vs(Ge(_e,"postLikes",le)),await oa(Ge(_e,"posts",C),{likeCount:Ua(-1)})):(await wn(Ge(_e,"postLikes",le),{postId:C,userId:U,createdAt:cr()}),await oa(Ge(_e,"posts",C),{likeCount:Ua(1)}))}catch(Pe){console.error("Like error:",Pe),I()}},Te=async C=>{try{const U=await rn(mn(Pt(_e,"postComments"),nn("postId","==",C),Ul("createdAt","asc"),zl(50)));we(le=>({...le,[C]:U.docs.map(pe=>({id:pe.id,...pe.data()}))}))}catch(U){console.error("Error loading comments:",U)}},Le=C=>{const U=new Set(re);U.has(C)?U.delete(C):(U.add(C),ue[C]||Te(C)),J(U)},ce=async C=>{const U=(Be[C]||"").trim();if(!(!U||!n)){S(le=>({...le,[C]:!0}));try{await Wa(Pt(_e,"postComments"),{postId:C,authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:U,createdAt:cr()}),await oa(Ge(_e,"posts",C),{commentCount:Ua(1)}),De(le=>({...le,[C]:""})),g(le=>le.map(pe=>pe.id===C?{...pe,commentCount:(pe.commentCount||0)+1}:pe)),await Te(C)}catch(le){console.error("Comment error:",le),H("Failed to comment","error")}finally{S(le=>({...le,[C]:!1}))}}},Oe=C=>{E(C.target.value),C.target.style.height="auto",C.target.style.height=Math.min(C.target.scrollHeight,120)+"px"};return i?a.jsx("div",{className:"feed-loading","data-theme":l?"dark":"light",children:a.jsx("div",{className:"feed-spinner"})}):!s||!e||!n?null:a.jsxs("div",{className:"feed-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"feed-main",children:[a.jsx("h1",{className:"feed-title",children:"Feed"}),a.jsxs("div",{className:"feed-compose",children:[a.jsx("div",{className:"feed-compose-avatar",children:n.photoURL?a.jsx("img",{src:n.photoURL,alt:""}):a.jsx("span",{children:Up(n.name)})}),a.jsxs("div",{className:"feed-compose-body",children:[a.jsx("textarea",{ref:D,placeholder:"Share an update with your buddies...",value:T,onChange:Oe,rows:1,maxLength:500}),T.trim()&&a.jsx("button",{className:"feed-post-btn",onClick:ze,disabled:O,children:O?a.jsx("div",{className:"feed-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]}),y?a.jsx("div",{className:"feed-content-loading",children:a.jsx("div",{className:"feed-spinner"})}):p.length===0?a.jsxs("div",{className:"feed-empty",children:[a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("h3",{children:"No posts yet"}),a.jsx("p",{children:"Share an update or add buddies to see their posts here!"})]}):a.jsx("div",{className:"feed-list",children:p.map(C=>a.jsxs("div",{className:"feed-post",children:[a.jsxs("div",{className:"feed-post-header",children:[a.jsx("div",{className:"feed-post-avatar",onClick:()=>h(`/client/core-buddy/profile/${C.authorId}`),children:C.authorPhotoURL?a.jsx("img",{src:C.authorPhotoURL,alt:""}):a.jsx("span",{children:Up(C.authorName)})}),a.jsxs("div",{className:"feed-post-meta",onClick:()=>h(`/client/core-buddy/profile/${C.authorId}`),children:[a.jsx("span",{className:"feed-post-name",children:C.authorName}),a.jsx("span",{className:"feed-post-time",children:fx(C.createdAt)})]}),C.authorId===n.id&&a.jsx("button",{className:"feed-delete-btn",onClick:()=>pt(C.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),C.content&&a.jsx("p",{className:"feed-post-content",children:C.content}),C.imageURL&&a.jsx("div",{className:"feed-post-image",children:a.jsx("img",{src:C.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"feed-post-actions",children:[a.jsxs("button",{className:`feed-action-btn${z.has(C.id)?" liked":""}`,onClick:()=>Q(C.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:z.has(C.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:C.likeCount||0})]}),a.jsxs("button",{className:`feed-action-btn${re.has(C.id)?" active":""}`,onClick:()=>Le(C.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:C.commentCount||0})]})]}),re.has(C.id)&&a.jsxs("div",{className:"feed-comments",children:[ue[C.id]?.length>0?ue[C.id].map(U=>a.jsxs("div",{className:"feed-comment",children:[a.jsx("div",{className:"feed-comment-avatar",onClick:()=>h(`/client/core-buddy/profile/${U.authorId}`),children:U.authorPhotoURL?a.jsx("img",{src:U.authorPhotoURL,alt:""}):a.jsx("span",{children:Up(U.authorName)})}),a.jsxs("div",{className:"feed-comment-body",children:[a.jsxs("div",{className:"feed-comment-bubble",children:[a.jsx("span",{className:"feed-comment-name",children:U.authorName}),a.jsx("span",{className:"feed-comment-text",children:U.content})]}),a.jsx("span",{className:"feed-comment-time",children:fx(U.createdAt)})]})]},U.id)):a.jsx("p",{className:"feed-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"feed-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:Be[C.id]||"",onChange:U=>De(le=>({...le,[C.id]:U.target.value})),onKeyDown:U=>{U.key==="Enter"&&ce(C.id)},maxLength:300}),a.jsx("button",{onClick:()=>ce(C.id),disabled:!(Be[C.id]||"").trim()||M[C.id],children:M[C.id]?a.jsx("div",{className:"feed-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},C.id))})]}),a.jsx(Hr,{}),A&&a.jsxs("div",{className:`toast-notification ${A.type}`,children:[a.jsx("span",{className:"toast-icon",children:A.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):A.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:A.message})]})]})}const Lr=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],bo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function xD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Or(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function wD(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function _D(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function od(s,e){if(!e)return"-";switch(s.unit){case"weight":return _D(e.weight,e.reps);case"time":return wD(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function wl(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function zp(s,e){return!e||e===0?null:(s-e)/e*100}function kD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(z=>{const V=z.benchmarks?.[e];if(!V)return 0;switch(n){case"weight":return(V.weight||0)*(V.reps||0);case"time":return V.time||0;case"reps":return V.reps||0;case"distance":return V.distance||0;default:return 0}}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,w=p-y*2,T=g-y*2,E=i.map((z,V)=>{const re=y+V/(i.length-1)*w,J=y+T-(z-u)/h*T;return{x:re,y:J,value:z}}),O=E.map((z,V)=>`${V===0?"M":"L"} ${z.x} ${z.y}`).join(" "),W=O+` L ${E[E.length-1].x} ${y+T} L ${E[0].x} ${y+T} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:W,fill:"url(#trendGradientJr)"}),a.jsx("path",{d:O,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),E.map((z,V)=>a.jsx("circle",{cx:z.x,cy:z.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},V))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((z,V)=>a.jsxs("span",{className:"pb-trend-label",children:[z.month.split("-")[1],"/",z.month.split("-")[0].slice(2)]},V))})]})}function jD(){const[s,e]=_.useState("bests"),[n,i]=_.useState([]),[l,u]=_.useState(!0),[h,p]=_.useState(!1),[g,y]=_.useState(0),[w,T]=_.useState(!1),[E,O]=_.useState(!1),[W,z]=_.useState(!1),[V,re]=_.useState({}),[J,ue]=_.useState({}),[we,Be]=_.useState({}),[De,M]=_.useState({}),[S,A]=_.useState({}),[P,D]=_.useState(!1),[H,I]=_.useState({}),[ze,pt]=_.useState([]),[Q,Te]=_.useState(null),[Le,ce]=_.useState(null),[Oe,C]=_.useState(!1),[U,le]=_.useState(""),[pe,Ae]=_.useState(""),Pe=_.useRef(null),Qe=_.useRef(0),Fe=_.useRef(0),at=_.useRef("right"),Dt=_.useCallback(G=>{y(ye=>{const Ee=Math.max(0,Math.min(Lr.length-1,G));return Ee===ye?ye:(at.current=Ee>ye?"right":"left",Ee)})},[]),{currentUser:Wt,isClient:lt,clientData:dt,loading:oe}=dr(),{isDark:an}=Gr(),Ct=Rs(),bt=_.useCallback((G,ye="info")=>{ce({message:G,type:ye}),setTimeout(()=>ce(null),4e3)},[]);_.useEffect(()=>{!oe&&(!Wt||!lt)&&Ct("/")},[Wt,lt,oe,Ct]),_.useEffect(()=>{dt&&wt()},[dt]);const wt=async()=>{try{const G=mn(Pt(_e,"juniorPBs"),nn("clientId","==",dt.id)),Ee=(await rn(G)).docs.map(rt=>({id:rt.id,...rt.data()}));Ee.sort((rt,vt)=>rt.month.localeCompare(vt.month)),i(Ee);const ke=mn(Pt(_e,"juniorPBTargets"),nn("clientId","==",dt.id)),me=await rn(ke);if(!me.empty){const rt=me.docs[0].data();Be(rt.targets||{}),M(rt.metricTargets||{}),A(rt.targets||{}),I(rt.metricTargets||{})}const nt=mn(Pt(_e,"juniorAchievements"),nn("clientId","==",dt.id)),ft=await rn(nt);ft.empty||pt(ft.docs[0].data().badges||[])}catch(G){console.error("Error fetching junior personal bests:",G)}u(!1)},ct=xD(),Xe=n.find(G=>G.month===ct),qt=n.filter(G=>G.month<ct),Wn=qt.length>0?qt[qt.length-1]:null;_.useEffect(()=>{Xe?(re(Xe.benchmarks||{}),ue(Xe.bodyMetrics||{})):(re({}),ue({}))},[Xe?.id]);const Et=async(G,ye)=>{const Ee=[];if(G==="strength"?Lr.forEach(ke=>{const me=we[ke.key];if(!me)return;const nt=ye[ke.key];if(!nt)return;let ft;if(me.targetType==="time"){if(!me.targetValue)return;const rt=me.startValue||0,vt=nt.time||0,mt=me.targetValue-rt;ft=mt===0?vt>=me.targetValue?1:0:Math.max(0,(vt-rt)/mt)}else if(me.targetType==="reps"){if(!me.targetReps)return;const rt=me.startReps||0,vt=nt.reps||0,mt=me.targetReps-rt;ft=mt===0?vt>=me.targetReps?1:0:Math.max(0,(vt-rt)/mt)}else if(me.targetType==="distance"){if(!me.targetDistance)return;const rt=me.startDistance||0,vt=nt.distance||0,mt=me.targetDistance-rt;ft=mt===0?vt>=me.targetDistance?1:0:Math.max(0,(vt-rt)/mt)}else{if(!me.targetWeight&&!me.targetReps)return;const rt=(me.startWeight||0)*(me.startReps||0),vt=(me.targetWeight||0)*(me.targetReps||0),mt=(nt.weight||0)*(nt.reps||0),en=vt-rt;ft=en===0?mt>=vt?1:0:Math.max(0,(mt-rt)/en)}if(ft>=1){let rt,vt;me.targetType==="time"?(rt=ze.some(mt=>mt.type==="strength"&&mt.key===ke.key&&mt.targetValue===me.targetValue),vt=`${ke.name} ${me.targetValue}s`):me.targetType==="reps"?(rt=ze.some(mt=>mt.type==="strength"&&mt.key===ke.key&&mt.targetReps===me.targetReps),vt=`${ke.name} ${me.targetReps} reps`):me.targetType==="distance"?(rt=ze.some(mt=>mt.type==="strength"&&mt.key===ke.key&&mt.targetDistance===me.targetDistance),vt=`${ke.name} ${me.targetDistance}cm`):(rt=ze.some(mt=>mt.type==="strength"&&mt.key===ke.key&&mt.targetWeight===me.targetWeight&&mt.targetReps===me.targetReps),vt=`${ke.name} ${me.targetWeight}kg  ${me.targetReps}`),rt||Ee.push({type:"strength",key:ke.key,...me.targetType==="time"?{targetType:"time",targetValue:me.targetValue}:me.targetType==="reps"?{targetType:"reps",targetReps:me.targetReps}:me.targetType==="distance"?{targetType:"distance",targetDistance:me.targetDistance}:{targetWeight:me.targetWeight,targetReps:me.targetReps},achievedMonth:ct,label:vt})}}):bo.forEach(ke=>{const me=De[ke.key];if(!me||!me.targetValue)return;const nt=ye[ke.key];if(nt==null)return;const ft=me.startValue||0,rt=me.targetValue,vt=rt-ft;(vt===0?nt===rt?1:0:Math.max(0,(nt-ft)/vt))>=1&&(ze.some(Ms=>Ms.type==="metric"&&Ms.key===ke.key&&Ms.targetValue===rt)||Ee.push({type:"metric",key:ke.key,targetValue:rt,achievedMonth:ct,label:`${ke.name} ${rt}${ke.suffix}`}))}),Ee.length>0){const ke=[...ze,...Ee];await wn(Ge(_e,"juniorAchievements",dt.id),{clientId:dt.id,badges:ke,updatedAt:ht.now()}),pt(ke),Te(Ee),setTimeout(()=>Te(null),5e3)}},At=(G,ye)=>{if(G==="strength"){const Ee=we[ye];if(!Ee)return!1;switch(Lr.find(me=>me.key===ye)?.unit){case"time":return ze.some(me=>me.type==="strength"&&me.key===ye&&me.targetValue===Ee.targetValue);case"reps":return ze.some(me=>me.type==="strength"&&me.key===ye&&me.targetReps===Ee.targetReps);case"distance":return ze.some(me=>me.type==="strength"&&me.key===ye&&me.targetDistance===Ee.targetDistance);default:return!Ee.targetWeight&&!Ee.targetReps?!1:ze.some(me=>me.type==="strength"&&me.key===ye&&me.targetWeight===Ee.targetWeight&&me.targetReps===Ee.targetReps)}}else{const Ee=De[ye];return!Ee||!Ee.targetValue?!1:ze.some(ke=>ke.type==="metric"&&ke.key===ye&&ke.targetValue===Ee.targetValue)}},Nn=async()=>{p(!0);try{const G=`${dt.id}_${ct}`,ye=Xe||{};await wn(Ge(_e,"juniorPBs",G),{clientId:dt.id,month:ct,benchmarks:V,bodyMetrics:ye.bodyMetrics||J||{},createdAt:ye.createdAt||ht.now(),updatedAt:ht.now()}),await Et("strength",V),bt("Benchmarks saved!","success"),T(!1),await wt()}catch(G){console.error("Error saving benchmarks:",G),bt("Failed to save. Please try again.","error")}p(!1)},jt=async()=>{p(!0);try{const G=`${dt.id}_${ct}`,ye=Xe||{};await wn(Ge(_e,"juniorPBs",G),{clientId:dt.id,month:ct,benchmarks:ye.benchmarks||V||{},bodyMetrics:J,createdAt:ye.createdAt||ht.now(),updatedAt:ht.now()}),await Et("metric",J),bt("Body metrics saved!","success"),O(!1),await wt()}catch(G){console.error("Error saving metrics:",G),bt("Failed to save. Please try again.","error")}p(!1)},ln=(G,ye,Ee)=>{re(ke=>({...ke,[G]:{...ke[G],[ye]:Ee===""?"":parseFloat(Ee)}}))},B=(G,ye)=>{ue(Ee=>({...Ee,[G]:ye===""?"":parseFloat(ye)}))},ee=(G,ye,Ee)=>{A(ke=>({...ke,[G]:{...ke[G],[ye]:Ee===""?"":parseFloat(Ee)}}))},ve=async()=>{p(!0);try{const G=`targets_${dt.id}`,ye=Xe?.benchmarks||{},Ee={};Lr.forEach(ke=>{const me=ye[ke.key];switch(ke.unit){case"time":S[ke.key]?.targetValue&&(Ee[ke.key]={targetType:"time",targetValue:S[ke.key].targetValue,startValue:me?.time||0});break;case"reps":S[ke.key]?.targetReps&&(Ee[ke.key]={targetType:"reps",targetReps:S[ke.key].targetReps,startReps:me?.reps||0});break;case"distance":S[ke.key]?.targetDistance&&(Ee[ke.key]={targetType:"distance",targetDistance:S[ke.key].targetDistance,startDistance:me?.distance||0});break;default:(S[ke.key]?.targetWeight||S[ke.key]?.targetReps)&&(Ee[ke.key]={targetWeight:S[ke.key].targetWeight||0,targetReps:S[ke.key].targetReps||0,startWeight:me?.weight||0,startReps:me?.reps||0})}}),await wn(Ge(_e,"juniorPBTargets",G),{clientId:dt.id,targets:Ee,metricTargets:De,updatedAt:ht.now()}),Be(Ee),A(Ee),bt("Targets saved!","success"),z(!1)}catch(G){console.error("Error saving targets:",G),bt("Failed to save targets.","error")}p(!1)},Ue=(G,ye)=>{I(Ee=>({...Ee,[G]:{...Ee[G],targetValue:ye===""?"":parseFloat(ye)}}))},Ke=async()=>{p(!0);try{const G=`targets_${dt.id}`,ye={};bo.forEach(Ee=>{if(H[Ee.key]?.targetValue){const ke=Xe?.bodyMetrics?.[Ee.key]||0;ye[Ee.key]={targetValue:H[Ee.key].targetValue,startValue:ke}}}),await wn(Ge(_e,"juniorPBTargets",G),{clientId:dt.id,targets:we,metricTargets:ye,updatedAt:ht.now()}),M(ye),I(ye),bt("Metric targets saved!","success"),D(!1)}catch(G){console.error("Error saving metric targets:",G),bt("Failed to save targets.","error")}p(!1)},Ve=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const G=Ge(_e,"juniorPBTargets",`targets_${dt.id}`);await Vs(G),Be({}),M({}),A({}),I({}),bt("All goals have been reset","success")}catch(G){console.error("Error resetting targets:",G),bt("Failed to reset goals","error")}p(!1)}},Ye=(G,ye)=>{const Ee=we[G];if(!Ee||!ye)return null;if(Ee.targetType==="time"){if(!Ee.targetValue)return null;const rt=Ee.startValue||0,vt=Ee.targetValue,mt=ye.time||0,en=vt-rt;return en<=0?mt>=vt?1:0:Math.max(0,Math.min((mt-rt)/en,1))}if(Ee.targetType==="reps"){if(!Ee.targetReps)return null;const rt=Ee.startReps||0,vt=Ee.targetReps,mt=ye.reps||0,en=vt-rt;return en<=0?mt>=vt?1:0:Math.max(0,Math.min((mt-rt)/en,1))}if(Ee.targetType==="distance"){if(!Ee.targetDistance)return null;const rt=Ee.startDistance||0,vt=Ee.targetDistance,mt=ye.distance||0,en=vt-rt;return en<=0?mt>=vt?1:0:Math.max(0,Math.min((mt-rt)/en,1))}if(!Ee.targetWeight&&!Ee.targetReps)return null;const ke=(Ee.startWeight||0)*(Ee.startReps||0),me=(Ee.targetWeight||0)*(Ee.targetReps||0),nt=(ye.weight||0)*(ye.reps||0),ft=me-ke;return ft<=0?nt>=me?1:0:Math.max(0,Math.min((nt-ke)/ft,1))},He=G=>{const ye=De[G];if(!ye||!ye.targetValue)return null;const Ee=Xe?.bodyMetrics?.[G];if(Ee==null)return null;const ke=ye.startValue||0,me=ye.targetValue,nt=me-ke;return nt===0?Ee===me?1:0:Math.max(0,Math.min((Ee-ke)/nt,1))},qe=G=>{Qe.current=G.touches[0].clientX,Fe.current=0},St=G=>{Fe.current=G.touches[0].clientX-Qe.current},Gt=()=>{Fe.current<-50?Dt(g+1):Fe.current>50&&Dt(g-1),Fe.current=0},Lt=G=>{const ye=Xe?.bodyMetrics?.[G],Ee=Wn?.bodyMetrics?.[G];return ye==null||Ee==null?null:parseFloat((ye-Ee).toFixed(2))},on=n.find(G=>G.month===U),Cn=n.find(G=>G.month===pe);if(oe||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Wt||!lt||!dt)return null;const Tt=Lr[g],Nt=Xe?.benchmarks?.[Tt.key],Kt=Wn?.benchmarks?.[Tt.key],hn=wl(Tt,Nt),Jn=wl(Tt,Kt),qn=zp(hn,Jn),yn=Ye(Tt.key,Nt),Ln=yn!==null,rs=yn!==null&&yn>=1,vs=Ln?Math.round(yn*60):hn>0?15:0,Gn=we[Tt.key],As=G=>G?G.targetType==="time"?`${G.startValue||0}s  ${G.targetValue}s`:G.targetType==="reps"?`${G.startReps||0}  ${G.targetReps} reps`:G.targetType==="distance"?`${G.startDistance||0}  ${G.targetDistance}cm`:`${G.startWeight||0}kg${G.startReps||0}  ${G.targetWeight}kg${G.targetReps}`:null;return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>Ct("/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Junior Strength Tests"}),a.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:Pe,onTouchStart:qe,onTouchMove:St,onTouchEnd:Gt,children:[a.jsx("div",{className:`pb-ring-container slide-from-${at.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Py.map((G,ye)=>{const Ee=ye<Math.round(vs);return a.jsx("line",{x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,className:`pb-ring-tick ${Ee?rs?"hit":"filled":"empty"}`,strokeWidth:G.thick?"3":"2"},ye)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:Tt.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[Tt.name,At("strength",Tt.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:Nt?od(Tt,Nt):"-"}),qn!==null&&a.jsxs("div",{className:`pb-ring-change ${qn>=0?"positive":"negative"}`,children:[qn>=0?"+":"",qn.toFixed(1),"%"]}),qn===null&&Nt&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),Gn&&a.jsx("div",{className:`pb-ring-target ${rs?"hit":""}`,children:rs?"Target hit!":As(Gn)}),!Gn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:Lr.map((G,ye)=>a.jsx("button",{className:`pb-dot ${ye===g?"active":""}`,onClick:()=>Dt(ye)},ye))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Dt(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Dt(g+1),disabled:g===Lr.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(kD,{data:n,exerciseKey:Tt.key,unit:Tt.unit})]})]}),!w&&!W&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:Xe?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>z(!0),children:Object.keys(we).length>0?"Edit Targets":"Set Targets"}),(Object.keys(we).length>0||Object.keys(De).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ve,disabled:h,children:"Reset All Goals"})]}),w&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Or(ct)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),re(Xe?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:Lr.map(G=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:G.name}),G.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:V[G.key]?.weight??"",onChange:ye=>ln(G.key,"weight",ye.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:V[G.key]?.reps??"",onChange:ye=>ln(G.key,"reps",ye.target.value),placeholder:"0"})]})]}):G.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Reps (max in 1 min)"}),a.jsx("input",{type:"number",value:V[G.key]?.reps??"",onChange:ye=>ln(G.key,"reps",ye.target.value),placeholder:"0"})]})}):G.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:V[G.key]?.distance??"",onChange:ye=>ln(G.key,"distance",ye.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:V[G.key]?.time??"",onChange:ye=>ln(G.key,"time",ye.target.value),placeholder:"0"})]})})]},G.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),re(Xe?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Nn,disabled:h,children:h?"Saving...":"Save"})]})]}),W&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{z(!1),A(we)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Lr.map(G=>{const ye=Xe?.benchmarks?.[G.key];let Ee="-";if(ye)switch(G.unit){case"weight":(ye.weight||ye.reps)&&(Ee=`${ye.weight||0}kg  ${ye.reps||0}`);break;case"time":ye.time&&(Ee=`${ye.time}s`);break;case"reps":ye.reps&&(Ee=`${ye.reps} reps`);break;case"distance":ye.distance&&(Ee=`${ye.distance} cm`);break}return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:G.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",Ee]})]}),G.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:S[G.key]?.targetWeight??"",onChange:ke=>ee(G.key,"targetWeight",ke.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:S[G.key]?.targetReps??"",onChange:ke=>ee(G.key,"targetReps",ke.target.value),placeholder:"0"})]})]}):G.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Reps (in 1 min)"}),a.jsx("input",{type:"number",value:S[G.key]?.targetReps??"",onChange:ke=>ee(G.key,"targetReps",ke.target.value),placeholder:"0"})]})}):G.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:S[G.key]?.targetDistance??"",onChange:ke=>ee(G.key,"targetDistance",ke.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:S[G.key]?.targetValue??"",onChange:ke=>ee(G.key,"targetValue",ke.target.value),placeholder:"0"})]})})]},G.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{z(!1),A(we)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:ve,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!E&&!P&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Or(ct)}),a.jsx("div",{className:"pb-metrics-list",children:bo.map(G=>{const ye=Xe?.bodyMetrics?.[G.key],Ee=Lt(G.key),ke=De[G.key],me=He(G.key),nt=me!==null&&me>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[G.name,At("metric",G.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),ke&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",ke.targetValue," ",G.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ye!=null?`${ye} ${G.suffix}`:"-"}),Ee!==null&&a.jsxs("span",{className:`pb-metric-change ${Ee>0?"up":Ee<0?"down":"same"}`,children:[Ee>0?"+":"",Ee," ",G.suffix]})]})]}),me!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${nt?"hit":""}`,style:{width:`${Math.round(me*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${nt?"hit":""}`,children:nt?"Hit!":`${Math.round(me*100)}%`})]})]},G.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>O(!0),children:Xe?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(De).length>0?"Edit Targets":"Set Targets"}),(Object.keys(we).length>0||Object.keys(De).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ve,disabled:h,children:"Reset All Goals"})]})]}),E&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Or(ct)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{O(!1),ue(Xe?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:bo.map(G=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[G.name," (",G.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:J[G.key]??"",onChange:ye=>B(G.key,ye.target.value),placeholder:"0"})]})},G.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{O(!1),ue(Xe?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:jt,disabled:h,children:h?"Saving...":"Save"})]})]}),P&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),I(De)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),bo.map(G=>{const ye=Xe?.bodyMetrics?.[G.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:G.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ye!=null?`${ye} ${G.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",G.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:H[G.key]?.targetValue??"",onChange:Ee=>Ue(G.key,Ee.target.value),placeholder:"0"})]})})]},G.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),I(De)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ke,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[ze.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...ze].reverse().map((G,ye)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ye*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:G.label}),a.jsx("span",{className:"pb-achievement-date",children:Or(G.achievedMonth)})]})]},ye))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${Oe?"active":""}`,onClick:()=>{C(!Oe),!Oe&&n.length>=2&&(le(n[0].month),Ae(n[n.length-1].month))},children:Oe?"Back to Timeline":"Compare Months"})}),Oe?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:U,onChange:G=>le(G.target.value),children:n.map(G=>a.jsx("option",{value:G.month,children:Or(G.month)},G.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:pe,onChange:G=>Ae(G.target.value),children:n.map(G=>a.jsx("option",{value:G.month,children:Or(G.month)},G.month))})]})]}),on&&Cn&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Tests"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Or(U).split(" ")[0]}),a.jsx("span",{children:Or(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),Lr.map(G=>{const ye=on.benchmarks?.[G.key],Ee=Cn.benchmarks?.[G.key],ke=wl(G,ye),me=wl(G,Ee),nt=zp(me,ke);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:G.name}),a.jsx("span",{className:"pb-compare-val",children:ye?od(G,ye):"-"}),a.jsx("span",{className:"pb-compare-val",children:Ee?od(G,Ee):"-"}),a.jsx("span",{className:`pb-compare-change ${nt!==null?nt>=0?"positive":"negative":""}`,children:nt!==null?`${nt>=0?"+":""}${nt.toFixed(1)}%`:"-"})]},G.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Or(U).split(" ")[0]}),a.jsx("span",{children:Or(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),bo.map(G=>{const ye=on.bodyMetrics?.[G.key],Ee=Cn.bodyMetrics?.[G.key],ke=ye!=null&&Ee!=null?parseFloat((Ee-ye).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:G.name}),a.jsx("span",{className:"pb-compare-val",children:ye!=null?`${ye}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:Ee!=null?`${Ee}`:"-"}),a.jsx("span",{className:`pb-compare-change ${ke!==null?ke>0?"positive":ke<0?"negative":"neutral":""}`,children:ke!==null?`${ke>0?"+":""}${ke} ${G.suffix}`:"-"})]},G.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((G,ye)=>{const Ee=n.filter(ke=>ke.month<G.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ye*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Or(G.month)}),G.benchmarks&&Object.keys(G.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Tests"}),Lr.map(ke=>{const me=G.benchmarks[ke.key];if(!me)return null;const nt=Ee?.benchmarks?.[ke.key],ft=wl(ke,me),rt=wl(ke,nt),vt=zp(ft,rt);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:ke.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:od(ke,me)}),vt!==null&&a.jsxs("span",{className:`pb-timeline-change ${vt>=0?"positive":"negative"}`,children:[vt>=0?"+":"",vt.toFixed(1),"%"]})]})]},ke.key)})]}),G.bodyMetrics&&Object.keys(G.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),bo.map(ke=>{const me=G.bodyMetrics[ke.key];if(me==null)return null;const nt=Ee?.bodyMetrics?.[ke.key],ft=nt!=null?parseFloat((me-nt).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:ke.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[me," ",ke.suffix]}),ft!==null&&a.jsxs("span",{className:`pb-timeline-change ${ft>0?"positive":ft<0?"negative":"neutral"}`,children:[ft>0?"+":"",ft," ",ke.suffix]})]})]},ke.key)})]})]})]},G.id)})})]})})]}),Q&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Te(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:Q.length===1?"Target Achieved!":`${Q.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:Q.map((G,ye)=>a.jsx("div",{className:"pb-celebration-badge",children:G.label},ye))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Le&&a.jsxs("div",{className:`toast-notification ${Le.type}`,children:[a.jsx("span",{className:"toast-icon",children:Le.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Le.message}),a.jsx("button",{className:"toast-close",onClick:()=>ce(null),children:""})]}),a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),dt?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]})]})}const aa=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],xo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function TD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Vr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function ld(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function mx(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function _l(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Fp(s,e){return!e||e===0?null:(s-e)/e*100}function ED({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(z=>{const V=z.benchmarks?.[e];return V?n==="time"?V.time||0:(V.weight||0)*(V.reps||0):0}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,w=p-y*2,T=g-y*2,E=i.map((z,V)=>{const re=y+V/(i.length-1)*w,J=y+T-(z-u)/h*T;return{x:re,y:J,value:z}}),O=E.map((z,V)=>`${V===0?"M":"L"} ${z.x} ${z.y}`).join(" "),W=O+` L ${E[E.length-1].x} ${y+T} L ${E[0].x} ${y+T} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:W,fill:"url(#trendGradient)"}),a.jsx("path",{d:O,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),E.map((z,V)=>a.jsx("circle",{cx:z.x,cy:z.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},V))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((z,V)=>a.jsxs("span",{className:"pb-trend-label",children:[z.month.split("-")[1],"/",z.month.split("-")[0].slice(2)]},V))})]})}function SD(){const[s,e]=_.useState("bests"),[n,i]=_.useState([]),[l,u]=_.useState(!0),[h,p]=_.useState(!1),[g,y]=_.useState(0),[w,T]=_.useState(!1),[E,O]=_.useState(!1),[W,z]=_.useState(!1),[V,re]=_.useState({}),[J,ue]=_.useState({}),[we,Be]=_.useState({}),[De,M]=_.useState({}),[S,A]=_.useState({}),[P,D]=_.useState(!1),[H,I]=_.useState({}),[ze,pt]=_.useState([]),[Q,Te]=_.useState(null),[Le,ce]=_.useState(null),[Oe,C]=_.useState(!1),[U,le]=_.useState(""),[pe,Ae]=_.useState(""),[Pe,Qe]=_.useState({}),[Fe,at]=_.useState({}),[Dt,Wt]=_.useState(null),[lt,dt]=_.useState(null),[oe,an]=_.useState(""),Ct=_.useRef(null),bt=_.useRef(0),wt=_.useRef(0),ct=_.useRef("right"),Xe=_.useCallback($=>{y(he=>{const b=Math.max(0,Math.min(aa.length-1,$));return b===he?he:(ct.current=b>he?"right":"left",b)})},[]),{currentUser:qt,isClient:Wn,clientData:Et,loading:At}=dr(),{isDark:Nn}=Gr(),jt=Rs(),[ln]=zE(),B=ln.get("mode")==="corebuddy",ee=!B&&(!Et?.clientType||Et.clientType==="block"),ve=_.useCallback(($,he="info")=>{ce({message:$,type:he}),setTimeout(()=>ce(null),4e3)},[]);_.useEffect(()=>{!At&&(!qt||!Wn)&&jt("/")},[qt,Wn,At,jt]),_.useEffect(()=>{Et&&(ee?Ue():(async()=>{try{const[he,b,j]=await Promise.all([Mn(Ge(_e,"coreBuddyPBs",Et.id)),Mn(Ge(_e,"coreBuddyTargets",Et.id)),Mn(Ge(_e,"coreBuddyAchievements",Et.id))]);he.exists()&&Qe(he.data().exercises||{}),b.exists()&&at(b.data().targets||{}),j.exists()&&Wt(j.data())}catch(he){console.error("Error loading Core Buddy PBs:",he)}u(!1)})())},[Et]);const Ue=async()=>{try{const $=mn(Pt(_e,"personalBests"),nn("clientId","==",Et.id)),b=(await rn($)).docs.map(be=>({id:be.id,...be.data()}));b.sort((be,je)=>be.month.localeCompare(je.month)),i(b);const j=mn(Pt(_e,"personalBestTargets"),nn("clientId","==",Et.id)),L=await rn(j);if(!L.empty){const be=L.docs[0].data();Be(be.targets||{}),M(be.metricTargets||{}),A(be.targets||{}),I(be.metricTargets||{})}const Y=mn(Pt(_e,"achievements"),nn("clientId","==",Et.id)),Ie=await rn(Y);Ie.empty||pt(Ie.docs[0].data().badges||[])}catch($){console.error("Error fetching personal bests:",$)}u(!1)},Ke=async()=>{if(!lt||!oe||!Et)return;const $=parseFloat(oe),he=Pe[lt];if(!he||$<=he.weight){ve("Target must be higher than current PB","error");return}p(!0);try{const b={...Fe,[lt]:{targetWeight:$,setAt:ht.now(),currentPBWhenSet:he.weight}};await wn(Ge(_e,"coreBuddyTargets",Et.id),{clientId:Et.id,targets:b,updatedAt:ht.now()}),at(b),dt(null),an(""),ve("Target set!","success")}catch(b){console.error("Error saving target:",b),ve("Failed to save target","error")}p(!1)},Ve=$=>{if(!Dt?.badges)return!1;const he=Fe[$];return he?Dt.badges.some(b=>b.type==="pb_target"&&b.exercise===$&&b.targetWeight===he.targetWeight):!1},Ye=$=>{const he=Fe[$];if(!he)return null;const b=Pe[$];if(!b)return 0;const j=he.currentPBWhenSet||0,L=he.targetWeight,Y=L-j;return Y<=0?b.weight>=L?1:0:Math.max(0,Math.min((b.weight-j)/Y,1))},He=TD(),qe=n.find($=>$.month===He),St=n.filter($=>$.month<He),Gt=St.length>0?St[St.length-1]:null;_.useEffect(()=>{qe?(re(qe.benchmarks||{}),ue(qe.bodyMetrics||{})):(re({}),ue({}))},[qe?.id]);const Lt=async($,he)=>{const b=[];if($==="strength"?aa.forEach(j=>{const L=we[j.key];if(!L)return;const Y=he[j.key];if(!Y)return;let Ie;if(L.targetType==="time"){if(!L.targetValue)return;const be=L.startValue||0,je=Y.time||0,tt=L.targetValue-be;Ie=tt===0?je>=L.targetValue?1:0:Math.max(0,(je-be)/tt)}else{if(!L.targetWeight&&!L.targetReps)return;const be=(L.startWeight||0)*(L.startReps||0),je=(L.targetWeight||0)*(L.targetReps||0),tt=(Y.weight||0)*(Y.reps||0),et=je-be;Ie=et===0?tt>=je?1:0:Math.max(0,(tt-be)/et)}if(Ie>=1&&!(L.targetType==="time"?ze.some(je=>je.type==="strength"&&je.key===j.key&&je.targetValue===L.targetValue):ze.some(je=>je.type==="strength"&&je.key===j.key&&je.targetWeight===L.targetWeight&&je.targetReps===L.targetReps))){const je=L.targetType==="time"?`${j.name} ${L.targetValue}s`:`${j.name} ${L.targetWeight}kg  ${L.targetReps}`;b.push({type:"strength",key:j.key,...L.targetType==="time"?{targetType:"time",targetValue:L.targetValue}:{targetWeight:L.targetWeight,targetReps:L.targetReps},achievedMonth:He,label:je})}}):xo.forEach(j=>{const L=De[j.key];if(!L||!L.targetValue)return;const Y=he[j.key];if(Y==null)return;const Ie=L.startValue||0,be=L.targetValue,je=be-Ie;(je===0?Y===be?1:0:Math.max(0,(Y-Ie)/je))>=1&&(ze.some(q=>q.type==="metric"&&q.key===j.key&&q.targetValue===be)||b.push({type:"metric",key:j.key,targetValue:be,achievedMonth:He,label:`${j.name} ${be}${j.suffix}`}))}),b.length>0){const j=[...ze,...b];await wn(Ge(_e,"achievements",Et.id),{clientId:Et.id,badges:j,updatedAt:ht.now()}),pt(j),Te(b),setTimeout(()=>Te(null),5e3)}},on=($,he)=>{if($==="strength"){const b=we[he];return b?b.targetType==="time"?ze.some(j=>j.type==="strength"&&j.key===he&&j.targetValue===b.targetValue):!b.targetWeight&&!b.targetReps?!1:ze.some(j=>j.type==="strength"&&j.key===he&&j.targetWeight===b.targetWeight&&j.targetReps===b.targetReps):!1}else{const b=De[he];return!b||!b.targetValue?!1:ze.some(j=>j.type==="metric"&&j.key===he&&j.targetValue===b.targetValue)}},Cn=async()=>{p(!0);try{const $=`${Et.id}_${He}`,he=qe||{};await wn(Ge(_e,"personalBests",$),{clientId:Et.id,month:He,benchmarks:V,bodyMetrics:he.bodyMetrics||J||{},createdAt:he.createdAt||ht.now(),updatedAt:ht.now()}),await Lt("strength",V),ve("Benchmarks saved!","success"),T(!1),await Ue()}catch($){console.error("Error saving benchmarks:",$),ve("Failed to save. Please try again.","error")}p(!1)},Tt=async()=>{p(!0);try{const $=`${Et.id}_${He}`,he=qe||{};await wn(Ge(_e,"personalBests",$),{clientId:Et.id,month:He,benchmarks:he.benchmarks||V||{},bodyMetrics:J,createdAt:he.createdAt||ht.now(),updatedAt:ht.now()}),await Lt("metric",J),ve("Body metrics saved!","success"),O(!1),await Ue()}catch($){console.error("Error saving metrics:",$),ve("Failed to save. Please try again.","error")}p(!1)},Nt=($,he,b)=>{re(j=>({...j,[$]:{...j[$],[he]:b===""?"":parseFloat(b)}}))},Kt=($,he)=>{ue(b=>({...b,[$]:he===""?"":parseFloat(he)}))},hn=($,he,b)=>{A(j=>({...j,[$]:{...j[$],[he]:b===""?"":parseFloat(b)}}))},Jn=async()=>{p(!0);try{const $=`targets_${Et.id}`,he=qe?.benchmarks||{},b={};aa.forEach(j=>{const L=he[j.key];j.unit==="time"?S[j.key]?.targetValue&&(b[j.key]={targetType:"time",targetValue:S[j.key].targetValue,startValue:L?.time||0}):(S[j.key]?.targetWeight||S[j.key]?.targetReps)&&(b[j.key]={targetWeight:S[j.key].targetWeight||0,targetReps:S[j.key].targetReps||0,startWeight:L?.weight||0,startReps:L?.reps||0})}),await wn(Ge(_e,"personalBestTargets",$),{clientId:Et.id,targets:b,metricTargets:De,updatedAt:ht.now()}),Be(b),A(b),ve("Targets saved!","success"),z(!1)}catch($){console.error("Error saving targets:",$),ve("Failed to save targets.","error")}p(!1)},qn=($,he)=>{I(b=>({...b,[$]:{...b[$],targetValue:he===""?"":parseFloat(he)}}))},yn=async()=>{p(!0);try{const $=`targets_${Et.id}`,he={};xo.forEach(b=>{if(H[b.key]?.targetValue){const j=qe?.bodyMetrics?.[b.key]||0;he[b.key]={targetValue:H[b.key].targetValue,startValue:j}}}),await wn(Ge(_e,"personalBestTargets",$),{clientId:Et.id,targets:we,metricTargets:he,updatedAt:ht.now()}),M(he),I(he),ve("Metric targets saved!","success"),D(!1)}catch($){console.error("Error saving metric targets:",$),ve("Failed to save targets.","error")}p(!1)},Ln=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const $=Ge(_e,"personalBestTargets",`targets_${Et.id}`);await Vs($),Be({}),M({}),A({}),I({}),ve("All goals have been reset","success")}catch($){console.error("Error resetting targets:",$),ve("Failed to reset goals","error")}p(!1)}},rs=($,he)=>{const b=we[$];if(!b||!he)return null;if(b.targetType==="time"){if(!b.targetValue)return null;const be=b.startValue||0,je=b.targetValue,tt=he.time||0,et=je-be;return et<=0?tt>=je?1:0:Math.max(0,Math.min((tt-be)/et,1))}if(!b.targetWeight&&!b.targetReps)return null;const j=(b.startWeight||0)*(b.startReps||0),L=(b.targetWeight||0)*(b.targetReps||0),Y=(he.weight||0)*(he.reps||0),Ie=L-j;return Ie<=0?Y>=L?1:0:Math.max(0,Math.min((Y-j)/Ie,1))},vs=$=>{const he=De[$];if(!he||!he.targetValue)return null;const b=qe?.bodyMetrics?.[$];if(b==null)return null;const j=he.startValue||0,L=he.targetValue,Y=L-j;return Y===0?b===L?1:0:Math.max(0,Math.min((b-j)/Y,1))},Gn=$=>{bt.current=$.touches[0].clientX,wt.current=0},As=$=>{wt.current=$.touches[0].clientX-bt.current},G=()=>{wt.current<-50?Xe(g+1):wt.current>50&&Xe(g-1),wt.current=0},ye=$=>{const he=qe?.bodyMetrics?.[$],b=Gt?.bodyMetrics?.[$];return he==null||b==null?null:parseFloat((he-b).toFixed(2))},Ee=n.find($=>$.month===U),ke=n.find($=>$.month===pe);if(At||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!qt||!Wn||!Et)return null;if(ee&&Et?.isJunior)return a.jsx(jD,{});const me=aa[g],nt=qe?.benchmarks?.[me.key],ft=Gt?.benchmarks?.[me.key],rt=_l(me,nt),vt=_l(me,ft),mt=Fp(rt,vt),en=rs(me.key,nt),Ms=en!==null,as=en!==null&&en>=1,bs=Ms?Math.round(en*60):rt>0?15:0,En=we[me.key];return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>jt(B?"/client/core-buddy":"/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Personal Bests"}),a.jsx("p",{children:ee?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!ee&&a.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Pe).length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("div",{className:"pb-cb-empty-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),a.jsx("h4",{children:"No personal bests yet"}),a.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):a.jsx("div",{className:"pb-cb-grid",children:Object.entries(Pe).sort(([$],[he])=>$.localeCompare(he)).map(([$,he],b)=>{const j=Fe[$],L=Ye($),Y=L!==null&&L>=1,Ie=Ve($),be=L!==null?Math.round(L*60):60;return a.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${b*.05}s`},children:[a.jsxs("div",{className:"pb-cb-card-ring",children:[a.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:I3.map((je,tt)=>{const et=tt<be;return a.jsx("line",{x1:je.x1,y1:je.y1,x2:je.x2,y2:je.y2,className:`pb-ring-tick ${et?Y?"hit":"filled":"empty"}`,strokeWidth:je.thick?"2":"1.5"},tt)})}),a.jsx("div",{className:"pb-cb-ring-icon",children:Ie?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),a.jsxs("div",{className:"pb-cb-card-info",children:[a.jsx("h4",{className:"pb-cb-card-name",children:$}),a.jsxs("div",{className:"pb-cb-card-value",children:[he.weight,"kg  ",he.reps]}),he.achievedAt&&a.jsx("div",{className:"pb-cb-card-date",children:(he.achievedAt.toDate?he.achievedAt.toDate():new Date(he.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),j&&!Y&&a.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",j.targetWeight,"kg (",Math.round((L||0)*100),"%)"]}),j&&Y&&!Ie&&a.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),Ie&&a.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),a.jsx("div",{className:"pb-cb-card-action",children:j?Y&&Ie?a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{dt($),an("")},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{dt($),an("")},children:a.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},$)})}),Object.keys(Pe).length>0&&a.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>jt("/client/core-buddy/achievements"),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),lt&&a.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>dt(null),children:a.jsxs("div",{className:"pb-cb-target-modal",onClick:$=>$.stopPropagation(),children:[a.jsx("h3",{children:"Set Target"}),a.jsx("p",{className:"pb-cb-target-exercise-name",children:lt}),a.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",a.jsxs("strong",{children:[Pe[lt]?.weight,"kg"]})]}),a.jsxs("div",{className:"pb-cb-target-input-wrap",children:[a.jsx("label",{children:"Your target (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:oe,onChange:$=>an($.target.value),placeholder:String((Pe[lt]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),a.jsxs("div",{className:"pb-cb-target-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>dt(null),children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ke,disabled:h,children:h?"Saving...":"Set Target"})]})]})})]}),ee&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:Ct,onTouchStart:Gn,onTouchMove:As,onTouchEnd:G,children:[a.jsx("div",{className:`pb-ring-container slide-from-${ct.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Py.map(($,he)=>{const b=he<Math.round(bs);return a.jsx("line",{x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,className:`pb-ring-tick ${b?as?"hit":"filled":"empty"}`,strokeWidth:$.thick?"3":"2"},he)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:me.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[me.name,on("strength",me.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:nt?me.unit==="time"?ld(nt.time):mx(nt.weight,nt.reps):"-"}),mt!==null&&a.jsxs("div",{className:`pb-ring-change ${mt>=0?"positive":"negative"}`,children:[mt>=0?"+":"",mt.toFixed(1),"%"]}),mt===null&&nt&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),En&&a.jsx("div",{className:`pb-ring-target ${as?"hit":""}`,children:as?"Target hit!":En.targetType==="time"?`${En.startValue||0}s  ${En.targetValue}s`:`${En.startWeight||0}kg${En.startReps||0}  ${En.targetWeight}kg${En.targetReps}`}),!En&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:aa.map(($,he)=>a.jsx("button",{className:`pb-dot ${he===g?"active":""}`,onClick:()=>Xe(he)},he))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Xe(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Xe(g+1),disabled:g===aa.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(ED,{data:n,exerciseKey:me.key,unit:me.unit})]})]}),!w&&!W&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:qe?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>z(!0),children:Object.keys(we).length>0?"Edit Targets":"Set Targets"}),(Object.keys(we).length>0||Object.keys(De).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ln,disabled:h,children:"Reset All Goals"})]}),w&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Vr(He)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),re(qe?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:aa.map($=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:$.name}),$.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:V[$.key]?.weight??"",onChange:he=>Nt($.key,"weight",he.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:V[$.key]?.reps??"",onChange:he=>Nt($.key,"reps",he.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:V[$.key]?.time??"",onChange:he=>Nt($.key,"time",he.target.value),placeholder:"0"})]})})]},$.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),re(qe?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Cn,disabled:h,children:h?"Saving...":"Save"})]})]}),W&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{z(!1),A(we)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),aa.map($=>{const he=qe?.benchmarks?.[$.key];let b="-";return he&&($.unit==="time"&&he.time?b=`${he.time}s`:(he.weight||he.reps)&&(b=`${he.weight||0}kg  ${he.reps||0}`)),a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:$.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",b]})]}),$.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:S[$.key]?.targetWeight??"",onChange:j=>hn($.key,"targetWeight",j.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:S[$.key]?.targetReps??"",onChange:j=>hn($.key,"targetReps",j.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:S[$.key]?.targetValue??"",onChange:j=>hn($.key,"targetValue",j.target.value),placeholder:"0"})]})})]},$.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{z(!1),A(we)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Jn,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!E&&!P&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Vr(He)}),a.jsx("div",{className:"pb-metrics-list",children:xo.map($=>{const he=qe?.bodyMetrics?.[$.key],b=ye($.key),j=De[$.key],L=vs($.key),Y=L!==null&&L>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[$.name,on("metric",$.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),j&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",j.targetValue," ",$.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:he!=null?`${he} ${$.suffix}`:"-"}),b!==null&&a.jsxs("span",{className:`pb-metric-change ${b>0?"up":b<0?"down":"same"}`,children:[b>0?"+":"",b," ",$.suffix]})]})]}),L!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${Y?"hit":""}`,style:{width:`${Math.round(L*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${Y?"hit":""}`,children:Y?"Hit!":`${Math.round(L*100)}%`})]})]},$.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>O(!0),children:qe?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(De).length>0?"Edit Targets":"Set Targets"}),(Object.keys(we).length>0||Object.keys(De).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ln,disabled:h,children:"Reset All Goals"})]})]}),E&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Vr(He)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{O(!1),ue(qe?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:xo.map($=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[$.name," (",$.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:J[$.key]??"",onChange:he=>Kt($.key,he.target.value),placeholder:"0"})]})},$.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{O(!1),ue(qe?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Tt,disabled:h,children:h?"Saving...":"Save"})]})]}),P&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),I(De)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),xo.map($=>{const he=qe?.bodyMetrics?.[$.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:$.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",he!=null?`${he} ${$.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",$.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:H[$.key]?.targetValue??"",onChange:b=>qn($.key,b.target.value),placeholder:"0"})]})})]},$.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),I(De)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:yn,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[ze.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...ze].reverse().map(($,he)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${he*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:$.label}),a.jsx("span",{className:"pb-achievement-date",children:Vr($.achievedMonth)})]})]},he))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${Oe?"active":""}`,onClick:()=>{C(!Oe),!Oe&&n.length>=2&&(le(n[0].month),Ae(n[n.length-1].month))},children:Oe?"Back to Timeline":"Compare Months"})}),Oe?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:U,onChange:$=>le($.target.value),children:n.map($=>a.jsx("option",{value:$.month,children:Vr($.month)},$.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:pe,onChange:$=>Ae($.target.value),children:n.map($=>a.jsx("option",{value:$.month,children:Vr($.month)},$.month))})]})]}),Ee&&ke&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Benchmarks"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Vr(U).split(" ")[0]}),a.jsx("span",{children:Vr(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),aa.map($=>{const he=Ee.benchmarks?.[$.key],b=ke.benchmarks?.[$.key],j=_l($,he),L=_l($,b),Y=Fp(L,j);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:$.name}),a.jsx("span",{className:"pb-compare-val",children:he?$.unit==="time"?ld(he.time):`${he.weight}x${he.reps}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:b?$.unit==="time"?ld(b.time):`${b.weight}x${b.reps}`:"-"}),a.jsx("span",{className:`pb-compare-change ${Y!==null?Y>=0?"positive":"negative":""}`,children:Y!==null?`${Y>=0?"+":""}${Y.toFixed(1)}%`:"-"})]},$.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Vr(U).split(" ")[0]}),a.jsx("span",{children:Vr(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),xo.map($=>{const he=Ee.bodyMetrics?.[$.key],b=ke.bodyMetrics?.[$.key],j=he!=null&&b!=null?parseFloat((b-he).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:$.name}),a.jsx("span",{className:"pb-compare-val",children:he!=null?`${he}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:b!=null?`${b}`:"-"}),a.jsx("span",{className:`pb-compare-change ${j!==null?j>0?"positive":j<0?"negative":"neutral":""}`,children:j!==null?`${j>0?"+":""}${j} ${$.suffix}`:"-"})]},$.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map(($,he)=>{const b=n.find(j=>j.month<$.month&&n.indexOf(j)===n.indexOf($)-1)||n.filter(j=>j.month<$.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${he*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Vr($.month)}),$.benchmarks&&Object.keys($.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Benchmarks"}),aa.map(j=>{const L=$.benchmarks[j.key];if(!L)return null;const Y=b?.benchmarks?.[j.key],Ie=_l(j,L),be=_l(j,Y),je=Fp(Ie,be);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:j.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:j.unit==="time"?ld(L.time):mx(L.weight,L.reps)}),je!==null&&a.jsxs("span",{className:`pb-timeline-change ${je>=0?"positive":"negative"}`,children:[je>=0?"+":"",je.toFixed(1),"%"]})]})]},j.key)})]}),$.bodyMetrics&&Object.keys($.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),xo.map(j=>{const L=$.bodyMetrics[j.key];if(L==null)return null;const Y=b?.bodyMetrics?.[j.key],Ie=Y!=null?parseFloat((L-Y).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:j.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[L," ",j.suffix]}),Ie!==null&&a.jsxs("span",{className:`pb-timeline-change ${Ie>0?"positive":Ie<0?"negative":"neutral"}`,children:[Ie>0?"+":"",Ie," ",j.suffix]})]})]},j.key)})]})]})]},$.id)})})]})})]})]}),Q&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Te(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:Q.length===1?"Target Achieved!":`${Q.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:Q.map(($,he)=>a.jsx("div",{className:"pb-celebration-badge",children:$.label},he))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Le&&a.jsxs("div",{className:`toast-notification ${Le.type}`,children:[a.jsx("span",{className:"toast-icon",children:Le.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Le.message}),a.jsx("button",{className:"toast-close",onClick:()=>ce(null),children:""})]}),ee&&a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>jt("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>jt("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>jt("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),Et?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>jt("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]}),B&&a.jsx(Hr,{active:"progress"})]})}const ND=_.lazy(()=>Sr(()=>import("./Dashboard-CQo0bfWW.js"),__vite__mapDeps([0,1]))),CD=_.lazy(()=>Sr(()=>import("./AddClient-CL-znvAw.js"),__vite__mapDeps([2,3]))),RD=_.lazy(()=>Sr(()=>import("./ClientDashboard-BM6yS7bM.js"),[])),AD=_.lazy(()=>Sr(()=>import("./ClientForms-DC9a2sSW.js"),__vite__mapDeps([4,5]))),MD=_.lazy(()=>Sr(()=>import("./ClientTools-DT7Sb9qI.js"),__vite__mapDeps([6,7]))),ID=_.lazy(()=>Sr(()=>import("./MacroCalculator-CeEH5SbA.js"),__vite__mapDeps([8,7]))),DD=_.lazy(()=>Sr(()=>import("./ProteinSnacks-BzHzt4PS.js"),__vite__mapDeps([9,7]))),PD=_.lazy(()=>Sr(()=>import("./DailyMotivation-Bb2n4tO1.js"),__vite__mapDeps([10,7]))),LD=_.lazy(()=>Sr(()=>import("./CircuitDashboard-DPNLYSSO.js"),__vite__mapDeps([11,12]))),OD=_.lazy(()=>Sr(()=>import("./CircuitBooking-zp6ls3S7.js"),__vite__mapDeps([13,14,12]))),VD=_.lazy(()=>Sr(()=>import("./Leaderboard-B9AHYN5Y.js"),__vite__mapDeps([15,16])));function BD({children:s}){const{pathname:e}=Wr();return _.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),_.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function UD(){const s=Rs();return _.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function zD(){return a.jsx(R3,{children:a.jsx(C3,{children:a.jsxs(LE,{basename:"/login",children:[a.jsx(UD,{}),a.jsx(BD,{children:a.jsx(_.Suspense,{fallback:null,children:a.jsxs(hE,{children:[a.jsx(Un,{path:"/",element:a.jsx(A3,{})}),a.jsx(Un,{path:"/dashboard",element:a.jsx(ND,{})}),a.jsx(Un,{path:"/add-client",element:a.jsx(CD,{})}),a.jsx(Un,{path:"/client",element:a.jsx(RD,{})}),a.jsx(Un,{path:"/client/forms",element:a.jsx(AD,{})}),a.jsx(Un,{path:"/client/tools",element:a.jsx(MD,{})}),a.jsx(Un,{path:"/client/tools/macros",element:a.jsx(ID,{})}),a.jsx(Un,{path:"/client/tools/snacks",element:a.jsx(DD,{})}),a.jsx(Un,{path:"/client/tools/motivation",element:a.jsx(PD,{})}),a.jsx(Un,{path:"/client/personal-bests",element:a.jsx(SD,{})}),a.jsx(Un,{path:"/client/circuit",element:a.jsx(LD,{})}),a.jsx(Un,{path:"/client/circuit/booking",element:a.jsx(OD,{})}),a.jsx(Un,{path:"/client/core-buddy",element:a.jsx(V3,{})}),a.jsx(Un,{path:"/client/core-buddy/nutrition",element:a.jsx(z3,{})}),a.jsx(Un,{path:"/client/core-buddy/workouts",element:a.jsx(J3,{})}),a.jsx(Un,{path:"/client/core-buddy/programmes",element:a.jsx(sD,{})}),a.jsx(Un,{path:"/client/core-buddy/achievements",element:a.jsx(cD,{})}),a.jsx(Un,{path:"/client/core-buddy/consistency",element:a.jsx(dD,{})}),a.jsx(Un,{path:"/client/core-buddy/buddies",element:a.jsx(fD,{})}),a.jsx(Un,{path:"/client/core-buddy/profile/:userId",element:a.jsx(vD,{})}),a.jsx(Un,{path:"/client/core-buddy/feed",element:a.jsx(bD,{})}),a.jsx(Un,{path:"/client/leaderboard",element:a.jsx(VD,{})}),a.jsx(Un,{path:"*",element:a.jsx(cE,{to:"/",replace:!0})})]})})})]})})})}uT.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(zD,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{Hr as C,ht as T,Wa as a,Vs as b,Pt as c,_e as d,Ge as e,FD as f,rn as g,I4 as h,Mn as i,a as j,dr as k,Gr as l,Rs as m,Py as n,Ul as o,wn as p,mn as q,_ as r,HD as s,oa as u,nn as w};
