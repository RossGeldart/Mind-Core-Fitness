import{r as s,l as V,n as z,A as G,j as e,z as S,D as k}from"./index-MlZf6Xw1.js";function _(){const[m,F]=s.useState(""),[h,A]=s.useState(""),[r,P]=s.useState(""),[f,E]=s.useState(""),[p,n]=s.useState(""),[x,j]=s.useState(!1),[c,y]=s.useState(!1),[d,b]=s.useState(!1),[u,o]=s.useState(""),[v,w]=s.useState(!1),{signup:q,loginWithGoogle:B,currentUser:a,isClient:C,clientData:N,loading:g}=V(),i=z();if(s.useEffect(()=>{!g&&a&&C&&(a.emailVerified?i(G(N)):y(!0))},[g,a,C,N,i]),s.useEffect(()=>{if(!c||!a)return;const t=setInterval(async()=>{try{await a.reload(),a.emailVerified&&i("/onboarding")}catch{}},3e3);return()=>clearInterval(t)},[c,a,i]),g)return null;const L=async t=>{if(t.preventDefault(),n(""),r.length<6)return n("Password must be at least 6 characters");if(r!==f)return n("Passwords do not match");j(!0);try{const l=await q(m,h,r);await k(l.user),typeof fbq=="function"&&fbq("track","CompleteRegistration",{content_name:"Core Buddy Signup",content_category:"Fitness App",status:!0}),y(!0)}catch(l){l.code==="auth/email-already-in-use"?n("An account with this email already exists"):n(l.message||"Failed to create account")}finally{j(!1)}},M=async()=>{if(!(!a||d)){b(!0),o("");try{await k(a),o("Verification email sent! Check your inbox.")}catch(t){t.code==="auth/too-many-requests"?o("Too many attempts â€” please wait a minute and try again."):o("Failed to resend. Please try again.")}finally{b(!1)}}},R=async()=>{n(""),w(!0);try{await B(),typeof fbq=="function"&&fbq("track","CompleteRegistration",{content_name:"Core Buddy Signup - Google",content_category:"Fitness App",status:!0}),i("/onboarding")}catch(t){t.code!=="auth/popup-closed-by-user"&&n(t.message||"Failed to sign up with Google"),w(!1)}};return c?e.jsxs("div",{className:"login-container",children:[e.jsx(S,{className:"login-theme-toggle"}),e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),e.jsx("p",{children:"Verify Your Email"})]}),e.jsxs("p",{style:{textAlign:"center",opacity:.8,margin:"1rem 0"},children:["We've sent a verification link to ",e.jsx("strong",{children:a?.email}),". Please check your inbox and click the link to continue."]}),e.jsx("p",{style:{textAlign:"center",opacity:.5,fontSize:"0.85rem",margin:"0.5rem 0 1.5rem"},children:"This page will automatically continue once you verify."}),u&&e.jsx("div",{className:u.includes("sent")?"success-message":"error-message",style:{marginBottom:"1rem"},children:u}),e.jsx("button",{type:"button",className:"login-btn",onClick:M,disabled:d,style:{marginBottom:"0.5rem"},children:d?"Sending...":"Resend Verification Email"}),e.jsx("button",{type:"button",className:"forgot-link",onClick:()=>i("/"),children:"Back to Login"})]})]}):e.jsxs("div",{className:"login-container",children:[e.jsx(S,{className:"login-theme-toggle"}),e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),e.jsx("p",{children:"Create Your Free Account"})]}),p&&e.jsx("div",{className:"error-message",children:p}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",value:m,onChange:t=>F(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:h,onChange:t=>A(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:r,onChange:t=>P(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:f,onChange:t=>E(t.target.value),required:!0})]}),e.jsx("button",{type:"submit",className:"login-btn",disabled:x,children:x?"Creating Account...":"Create Free Account"})]}),e.jsx("div",{className:"login-divider",children:e.jsx("span",{children:"or"})}),e.jsxs("button",{type:"button",className:"google-btn",onClick:R,disabled:v,children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 48 48",children:[e.jsx("path",{fill:"#4285F4",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),e.jsx("path",{fill:"#34A853",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),e.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),e.jsx("path",{fill:"#EA4335",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.18 1.48-4.96 2.35-8.16 2.35-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"})]}),v?"Signing up...":"Sign up with Google"]}),e.jsx("button",{type:"button",className:"forgot-link",onClick:()=>i("/"),children:"Already have an account? Log in"}),e.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})]})}export{_ as default};
