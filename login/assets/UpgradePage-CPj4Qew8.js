import{l as j,t as g,n as v,r as t,j as e,v as p}from"./index-CgU-jN3B.js";function k(){const{currentUser:r,clientData:s}=j(),{isPremium:h,subscriptionStatus:m}=g(),c=v(),[d,o]=t.useState(null),[a,l]=t.useState(null);async function u(){if(s?.stripeCustomerId){o("manage"),l(null);try{const n={"Content-Type":"application/json"};if(r){const x=await r.getIdToken();n.Authorization=`Bearer ${x}`}const i=await(await fetch("/api/create-portal-session",{method:"POST",headers:n,body:JSON.stringify({stripeCustomerId:s.stripeCustomerId,clientId:s.id})})).json();i.url?window.location.href=i.url:l(i.error||"Something went wrong")}catch(n){console.error("Portal error:",n),l("Unable to open subscription portal")}finally{o(null)}}}return h?e.jsxs("div",{className:"upgrade-page",children:[e.jsx(p,{className:"upgrade-theme-toggle"}),e.jsxs("button",{className:"upgrade-back-btn",onClick:()=>c(-1),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 12H5"}),e.jsx("path",{d:"M12 19l-7-7 7-7"})]}),"Back"]}),e.jsxs("div",{className:"upgrade-header",children:[e.jsx("div",{className:"upgrade-icon upgrade-icon-active",children:e.jsx("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z"})})}),e.jsx("h1",{children:"You're on Premium!"}),e.jsxs("p",{className:"upgrade-status",children:["Status: ",e.jsx("strong",{children:m||"active"})]})]}),s?.stripeCustomerId&&e.jsx("button",{className:"upgrade-manage-btn",onClick:u,disabled:d==="manage",children:d==="manage"?"Opening...":"Manage Subscription"}),a&&e.jsx("p",{className:"upgrade-error",children:a})]}):e.jsxs("div",{className:"upgrade-page",children:[e.jsx(p,{className:"upgrade-theme-toggle"}),e.jsxs("button",{className:"upgrade-back-btn",onClick:()=>c(-1),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 12H5"}),e.jsx("path",{d:"M12 19l-7-7 7-7"})]}),"Back"]}),e.jsxs("div",{className:"upgrade-header",children:[e.jsx("div",{className:"upgrade-icon",children:e.jsx("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z"})})}),e.jsx("h1",{children:"Upgrade to Premium"}),e.jsx("p",{children:"Unlock all Core Buddy features with a 7-day free trial"})]}),e.jsxs("div",{className:"upgrade-plans",children:[e.jsxs("div",{className:"plan-card plan-coming-soon",children:[e.jsx("div",{className:"plan-coming-soon-overlay",children:e.jsx("span",{children:"Coming Soon"})}),e.jsx("div",{className:"plan-name",children:"Monthly"}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"plan-amount",children:"£19.99"}),e.jsx("span",{className:"plan-period",children:"/month"})]}),e.jsxs("ul",{className:"plan-features",children:[e.jsx("li",{children:"7-day free trial"}),e.jsx("li",{children:"All premium features"}),e.jsx("li",{children:"Cancel anytime"})]}),e.jsx("div",{className:"plan-cta",children:"Coming Soon"})]}),e.jsxs("div",{className:"plan-card plan-card-featured plan-coming-soon",children:[e.jsx("div",{className:"plan-coming-soon-overlay",children:e.jsx("span",{children:"Coming Soon"})}),e.jsx("div",{className:"plan-badge-save",children:"Best Value — Save 17%"}),e.jsx("div",{className:"plan-name",children:"Annual"}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"plan-amount",children:"£199.99"}),e.jsx("span",{className:"plan-period",children:"/year"})]}),e.jsxs("ul",{className:"plan-features",children:[e.jsx("li",{children:"7-day free trial"}),e.jsx("li",{children:"All premium features"}),e.jsx("li",{children:"Best value"})]}),e.jsx("div",{className:"plan-cta plan-cta-featured",children:"Coming Soon"})]}),e.jsxs("div",{className:"plan-divider",children:[e.jsx("span",{className:"plan-divider-line"}),e.jsx("span",{className:"plan-divider-text",children:"Core Buddy AI"}),e.jsx("span",{className:"plan-divider-line"})]}),e.jsxs("div",{className:"plan-card plan-coming-soon",children:[e.jsx("div",{className:"plan-coming-soon-overlay",children:e.jsx("span",{children:"Coming Soon"})}),e.jsx("div",{className:"plan-badge-save",children:"AI Coaching"}),e.jsx("div",{className:"plan-name",children:"AI Monthly"}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"plan-amount",children:"£34.99"}),e.jsx("span",{className:"plan-period",children:"/month"})]}),e.jsxs("ul",{className:"plan-features",children:[e.jsx("li",{children:"AI personal coaching"}),e.jsx("li",{children:"All Premium features"}),e.jsx("li",{children:"Cancel anytime"})]}),e.jsx("div",{className:"plan-cta",children:"Coming Soon"})]}),e.jsxs("div",{className:"plan-card plan-coming-soon",children:[e.jsx("div",{className:"plan-coming-soon-overlay",children:e.jsx("span",{children:"Coming Soon"})}),e.jsx("div",{className:"plan-badge-save",children:"AI Coaching — Best Value"}),e.jsx("div",{className:"plan-name",children:"AI Annual"}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"plan-amount",children:"£299.99"}),e.jsx("span",{className:"plan-period",children:"/year"})]}),e.jsxs("ul",{className:"plan-features",children:[e.jsx("li",{children:"AI personal coaching"}),e.jsx("li",{children:"All Premium features"}),e.jsx("li",{children:"Best value"})]}),e.jsx("div",{className:"plan-cta",children:"Coming Soon"})]})]}),a&&e.jsx("p",{className:"upgrade-error",children:a})]})}export{k as default};
