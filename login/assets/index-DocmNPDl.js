const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-Y1rPzKsx.js","assets/scheduleUtils-a2tn0x12.js","assets/Dashboard-BvdLF0uv.css","assets/AddClient-BARRBQHp.js","assets/AddClient-DH1OFzHo.css","assets/ClientDashboard-tK1ksa3e.js","assets/ClientDashboard-BI8UXFpK.css","assets/ClientForms-CnT_-9kM.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-T-ZjUaKm.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-uAldcflN.js","assets/ProteinSnacks-CVBP5otY.js","assets/DailyMotivation-DoJc80kQ.js","assets/CircuitDashboard-DZMcAQy8.js","assets/CircuitDashboard-C8T0uect.css","assets/CircuitBooking-wPhPd7pE.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/PersonalBests-PzbFg2P1.js","assets/PersonalBests-BkG3fixu.css","assets/Leaderboard-DKZiixOe.js","assets/Leaderboard-Dq-r5svP.css","assets/UpgradePage-CRoyWHAo.js","assets/stripe-Da7IPrZW.js","assets/UpgradePage-Chom0F_j.css","assets/Onboarding-CHCajmWl.js","assets/Onboarding-DvZF-mkH.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=t(l);fetch(l.href,u)}})();var Ep={exports:{}},Hc={};var zb;function Ej(){if(zb)return Hc;zb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:d,ref:l!==void 0?l:null,props:u}}return Hc.Fragment=e,Hc.jsx=t,Hc.jsxs=t,Hc}var Fb;function Tj(){return Fb||(Fb=1,Ep.exports=Ej()),Ep.exports}var a=Tj(),Tp={exports:{}},_t={};var qb;function jj(){if(qb)return _t;qb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function P(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,z={};function K(O,re,we){this.props=O,this.context=re,this.refs=z,this.updater=we||G}K.prototype.isReactComponent={},K.prototype.setState=function(O,re){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,re,"setState")},K.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function W(){}W.prototype=K.prototype;function Q(O,re,we){this.props=O,this.context=re,this.refs=z,this.updater=we||G}var oe=Q.prototype=new W;oe.constructor=Q,q(oe,K.prototype),oe.isPureReactComponent=!0;var Te=Array.isArray;function be(){}var C={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function I(O,re,we){var ke=we.ref;return{$$typeof:s,type:O,key:re,ref:ke!==void 0?ke:null,props:we}}function V(O,re){return I(O.type,re,O.props)}function L(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function D(O){var re={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(we){return re[we]})}var R=/\/+/g;function Me(O,re){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):re.toString(36)}function Ye(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(be,be):(O.status="pending",O.then(function(re){O.status==="pending"&&(O.status="fulfilled",O.value=re)},function(re){O.status==="pending"&&(O.status="rejected",O.reason=re)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function ee(O,re,we,ke,xe){var Ee=typeof O;(Ee==="undefined"||Ee==="boolean")&&(O=null);var Pe=!1;if(O===null)Pe=!0;else switch(Ee){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(O.$$typeof){case s:case e:Pe=!0;break;case b:return Pe=O._init,ee(Pe(O._payload),re,we,ke,xe)}}if(Pe)return xe=xe(O),Pe=ke===""?"."+Me(O,0):ke,Te(xe)?(we="",Pe!=null&&(we=Pe.replace(R,"$&/")+"/"),ee(xe,re,we,"",function(Lt){return Lt})):xe!=null&&(L(xe)&&(xe=V(xe,we+(xe.key==null||O&&O.key===xe.key?"":(""+xe.key).replace(R,"$&/")+"/")+Pe)),re.push(xe)),1;Pe=0;var et=ke===""?".":ke+":";if(Te(O))for(var Oe=0;Oe<O.length;Oe++)ke=O[Oe],Ee=et+Me(ke,Oe),Pe+=ee(ke,re,we,Ee,xe);else if(Oe=P(O),typeof Oe=="function")for(O=Oe.call(O),Oe=0;!(ke=O.next()).done;)ke=ke.value,Ee=et+Me(ke,Oe++),Pe+=ee(ke,re,we,Ee,xe);else if(Ee==="object"){if(typeof O.then=="function")return ee(Ye(O),re,we,ke,xe);throw re=String(O),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function Se(O,re,we){if(O==null)return O;var ke=[],xe=0;return ee(O,ke,"","",function(Ee){return re.call(we,Ee,xe++)}),ke}function Ie(O){if(O._status===-1){var re=O._result;re=re(),re.then(function(we){(O._status===0||O._status===-1)&&(O._status=1,O._result=we)},function(we){(O._status===0||O._status===-1)&&(O._status=2,O._result=we)}),O._status===-1&&(O._status=0,O._result=re)}if(O._status===1)return O._result.default;throw O._result}var Ce=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},X={map:Se,forEach:function(O,re,we){Se(O,function(){re.apply(this,arguments)},we)},count:function(O){var re=0;return Se(O,function(){re++}),re},toArray:function(O){return Se(O,function(re){return re})||[]},only:function(O){if(!L(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return _t.Activity=E,_t.Children=X,_t.Component=K,_t.Fragment=t,_t.Profiler=l,_t.PureComponent=Q,_t.StrictMode=i,_t.Suspense=g,_t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,_t.__COMPILER_RUNTIME={__proto__:null,c:function(O){return C.H.useMemoCache(O)}},_t.cache=function(O){return function(){return O.apply(null,arguments)}},_t.cacheSignal=function(){return null},_t.cloneElement=function(O,re,we){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ke=q({},O.props),xe=O.key;if(re!=null)for(Ee in re.key!==void 0&&(xe=""+re.key),re)!j.call(re,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&re.ref===void 0||(ke[Ee]=re[Ee]);var Ee=arguments.length-2;if(Ee===1)ke.children=we;else if(1<Ee){for(var Pe=Array(Ee),et=0;et<Ee;et++)Pe[et]=arguments[et+2];ke.children=Pe}return I(O.type,xe,ke)},_t.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},_t.createElement=function(O,re,we){var ke,xe={},Ee=null;if(re!=null)for(ke in re.key!==void 0&&(Ee=""+re.key),re)j.call(re,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&(xe[ke]=re[ke]);var Pe=arguments.length-2;if(Pe===1)xe.children=we;else if(1<Pe){for(var et=Array(Pe),Oe=0;Oe<Pe;Oe++)et[Oe]=arguments[Oe+2];xe.children=et}if(O&&O.defaultProps)for(ke in Pe=O.defaultProps,Pe)xe[ke]===void 0&&(xe[ke]=Pe[ke]);return I(O,Ee,xe)},_t.createRef=function(){return{current:null}},_t.forwardRef=function(O){return{$$typeof:p,render:O}},_t.isValidElement=L,_t.lazy=function(O){return{$$typeof:b,_payload:{_status:-1,_result:O},_init:Ie}},_t.memo=function(O,re){return{$$typeof:y,type:O,compare:re===void 0?null:re}},_t.startTransition=function(O){var re=C.T,we={};C.T=we;try{var ke=O(),xe=C.S;xe!==null&&xe(we,ke),typeof ke=="object"&&ke!==null&&typeof ke.then=="function"&&ke.then(be,Ce)}catch(Ee){Ce(Ee)}finally{re!==null&&we.types!==null&&(re.types=we.types),C.T=re}},_t.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},_t.use=function(O){return C.H.use(O)},_t.useActionState=function(O,re,we){return C.H.useActionState(O,re,we)},_t.useCallback=function(O,re){return C.H.useCallback(O,re)},_t.useContext=function(O){return C.H.useContext(O)},_t.useDebugValue=function(){},_t.useDeferredValue=function(O,re){return C.H.useDeferredValue(O,re)},_t.useEffect=function(O,re){return C.H.useEffect(O,re)},_t.useEffectEvent=function(O){return C.H.useEffectEvent(O)},_t.useId=function(){return C.H.useId()},_t.useImperativeHandle=function(O,re,we){return C.H.useImperativeHandle(O,re,we)},_t.useInsertionEffect=function(O,re){return C.H.useInsertionEffect(O,re)},_t.useLayoutEffect=function(O,re){return C.H.useLayoutEffect(O,re)},_t.useMemo=function(O,re){return C.H.useMemo(O,re)},_t.useOptimistic=function(O,re){return C.H.useOptimistic(O,re)},_t.useReducer=function(O,re,we){return C.H.useReducer(O,re,we)},_t.useRef=function(O){return C.H.useRef(O)},_t.useState=function(O){return C.H.useState(O)},_t.useSyncExternalStore=function(O,re,we){return C.H.useSyncExternalStore(O,re,we)},_t.useTransition=function(){return C.H.useTransition()},_t.version="19.2.4",_t}var Hb;function Yg(){return Hb||(Hb=1,Tp.exports=jj()),Tp.exports}var x=Yg(),jp={exports:{}},$c={},Sp={exports:{}},Cp={};var $b;function Sj(){return $b||($b=1,(function(s){function e(ee,Se){var Ie=ee.length;ee.push(Se);e:for(;0<Ie;){var Ce=Ie-1>>>1,X=ee[Ce];if(0<l(X,Se))ee[Ce]=Se,ee[Ie]=X,Ie=Ce;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var Se=ee[0],Ie=ee.pop();if(Ie!==Se){ee[0]=Ie;e:for(var Ce=0,X=ee.length,O=X>>>1;Ce<O;){var re=2*(Ce+1)-1,we=ee[re],ke=re+1,xe=ee[ke];if(0>l(we,Ie))ke<X&&0>l(xe,we)?(ee[Ce]=xe,ee[ke]=Ie,Ce=ke):(ee[Ce]=we,ee[re]=Ie,Ce=re);else if(ke<X&&0>l(xe,Ie))ee[Ce]=xe,ee[ke]=Ie,Ce=ke;else break e}}return Se}function l(ee,Se){var Ie=ee.sortIndex-Se.sortIndex;return Ie!==0?Ie:ee.id-Se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],b=1,E=null,T=3,P=!1,G=!1,q=!1,z=!1,K=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function oe(ee){for(var Se=t(y);Se!==null;){if(Se.callback===null)i(y);else if(Se.startTime<=ee)i(y),Se.sortIndex=Se.expirationTime,e(g,Se);else break;Se=t(y)}}function Te(ee){if(q=!1,oe(ee),!G)if(t(g)!==null)G=!0,be||(be=!0,D());else{var Se=t(y);Se!==null&&Ye(Te,Se.startTime-ee)}}var be=!1,C=-1,j=5,I=-1;function V(){return z?!0:!(s.unstable_now()-I<j)}function L(){if(z=!1,be){var ee=s.unstable_now();I=ee;var Se=!0;try{e:{G=!1,q&&(q=!1,W(C),C=-1),P=!0;var Ie=T;try{t:{for(oe(ee),E=t(g);E!==null&&!(E.expirationTime>ee&&V());){var Ce=E.callback;if(typeof Ce=="function"){E.callback=null,T=E.priorityLevel;var X=Ce(E.expirationTime<=ee);if(ee=s.unstable_now(),typeof X=="function"){E.callback=X,oe(ee),Se=!0;break t}E===t(g)&&i(g),oe(ee)}else i(g);E=t(g)}if(E!==null)Se=!0;else{var O=t(y);O!==null&&Ye(Te,O.startTime-ee),Se=!1}}break e}finally{E=null,T=Ie,P=!1}Se=void 0}}finally{Se?D():be=!1}}}var D;if(typeof Q=="function")D=function(){Q(L)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Me=R.port2;R.port1.onmessage=L,D=function(){Me.postMessage(null)}}else D=function(){K(L,0)};function Ye(ee,Se){C=K(function(){ee(s.unstable_now())},Se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var Se=3;break;default:Se=T}var Ie=T;T=Se;try{return ee()}finally{T=Ie}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(ee,Se){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Ie=T;T=ee;try{return Se()}finally{T=Ie}},s.unstable_scheduleCallback=function(ee,Se,Ie){var Ce=s.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Ce+Ie:Ce):Ie=Ce,ee){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Ie+X,ee={id:b++,callback:Se,priorityLevel:ee,startTime:Ie,expirationTime:X,sortIndex:-1},Ie>Ce?(ee.sortIndex=Ie,e(y,ee),t(g)===null&&ee===t(y)&&(q?(W(C),C=-1):q=!0,Ye(Te,Ie-Ce))):(ee.sortIndex=X,e(g,ee),G||P||(G=!0,be||(be=!0,D()))),ee},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(ee){var Se=T;return function(){var Ie=T;T=Se;try{return ee.apply(this,arguments)}finally{T=Ie}}}})(Cp)),Cp}var Wb;function Cj(){return Wb||(Wb=1,Sp.exports=Sj()),Sp.exports}var Np={exports:{}},Us={};var Gb;function Nj(){if(Gb)return Us;Gb=1;var s=Yg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:g,containerInfo:y,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Us.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Us.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,b)},Us.flushSync=function(g){var y=d.T,b=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=y,i.p=b,i.d.f()}},Us.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Us.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Us.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:P}):b==="script"&&i.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Us.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Us.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Us.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Us.requestFormReset=function(g){i.d.r(g)},Us.unstable_batchedUpdates=function(g,y){return g(y)},Us.useFormState=function(g,y,b){return d.H.useFormState(g,y,b)},Us.useFormStatus=function(){return d.H.useHostTransitionStatus()},Us.version="19.2.4",Us}var Kb;function Aj(){if(Kb)return Np.exports;Kb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Np.exports=Nj(),Np.exports}var Yb;function Rj(){if(Yb)return $c;Yb=1;var s=Cj(),e=Yg(),t=Aj();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function d(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(i(188))}function y(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),n;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var _=!1,S=f.child;S;){if(S===o){_=!0,o=f,c=m;break}if(S===c){_=!0,c=f,o=m;break}S=S.sibling}if(!_){for(S=m.child;S;){if(S===o){_=!0,o=m,c=f;break}if(S===c){_=!0,c=m,o=f;break}S=S.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function b(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=b(n),r!==null)return r;n=n.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function D(n){return n===null||typeof n!="object"?null:(n=L&&n[L]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function Me(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case K:return"Profiler";case z:return"StrictMode";case Te:return"Suspense";case be:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case G:return"Portal";case Q:return n.displayName||"Context";case W:return(n._context.displayName||"Context")+".Consumer";case oe:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return r=n.displayName||null,r!==null?r:Me(n.type)||"Memo";case j:r=n._payload,n=n._init;try{return Me(n(r))}catch{}}return null}var Ye=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie={pending:!1,data:null,method:null,action:null},Ce=[],X=-1;function O(n){return{current:n}}function re(n){0>X||(n.current=Ce[X],Ce[X]=null,X--)}function we(n,r){X++,Ce[X]=n.current,n.current=r}var ke=O(null),xe=O(null),Ee=O(null),Pe=O(null);function et(n,r){switch(we(Ee,r),we(xe,n),we(ke,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?ub(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=ub(r),n=db(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}re(ke),we(ke,n)}function Oe(){re(ke),re(xe),re(Ee)}function Lt(n){n.memoizedState!==null&&we(Pe,n);var r=ke.current,o=db(r,n.type);r!==o&&(we(xe,n),we(ke,o))}function Xt(n){xe.current===n&&(re(ke),re(xe)),Pe.current===n&&(re(Pe),Bc._currentValue=Ie)}var In,Ct;function nt(n){if(In===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);In=r&&r[1]||"",Ct=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+In+n+Ct}var ft=!1;function lt(n,r){if(!n||ft)return"";ft=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(he){var ae=he}Reflect.construct(n,[],_e)}else{try{_e.call()}catch(he){ae=he}n.call(_e.prototype)}}else{try{throw Error()}catch(he){ae=he}(_e=n())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(he){if(he&&ae&&typeof he.stack=="string")return[he.stack,ae.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),_=m[0],S=m[1];if(_&&S){var B=_.split(`
`),ne=S.split(`
`);for(f=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;if(c===B.length||f===ne.length)for(c=B.length-1,f=ne.length-1;1<=c&&0<=f&&B[c]!==ne[f];)f--;for(;1<=c&&0<=f;c--,f--)if(B[c]!==ne[f]){if(c!==1||f!==1)do if(c--,f--,0>f||B[c]!==ne[f]){var me=`
`+B[c].replace(" at new "," at ");return n.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",n.displayName)),me}while(1<=c&&0<=f);break}}}finally{ft=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?nt(o):""}function Mn(n,r){switch(n.tag){case 26:case 27:case 5:return nt(n.type);case 16:return nt("Lazy");case 13:return n.child!==r&&r!==null?nt("Suspense Fallback"):nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return lt(n.type,!1);case 11:return lt(n.type.render,!1);case 1:return lt(n.type,!0);case 31:return nt("Activity");default:return""}}function de(n){try{var r="",o=null;do r+=Mn(n,o),o=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Tt=Object.prototype.hasOwnProperty,mt=s.unstable_scheduleCallback,It=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,Et=s.unstable_requestPaint,pt=s.unstable_now,Jt=s.unstable_getCurrentPriorityLevel,js=s.unstable_ImmediatePriority,es=s.unstable_UserBlockingPriority,Wt=s.unstable_NormalPriority,se=s.unstable_LowPriority,Ne=s.unstable_IdlePriority,ht=s.log,gt=s.unstable_setDisableYieldValue,st=null,He=null;function tt(n){if(typeof ht=="function"&&gt(n),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(st,n)}catch{}}var Fe=Math.clz32?Math.clz32:jn,Zt=Math.log,nn=Math.LN2;function jn(n){return n>>>=0,n===0?32:31-(Zt(n)/nn|0)|0}var Dn=256,Hn=262144,zt=4194304;function Ln(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _n(n,r,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=Ln(c):(_&=S,_!==0?f=Ln(_):o||(o=S&~n,o!==0&&(f=Ln(o))))):(S=c&~m,S!==0?f=Ln(S):_!==0?f=Ln(_):o||(o=c&~n,o!==0&&(f=Ln(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function sn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function fr(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function le(){var n=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),n}function Re(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Ge(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ct(n,r,o,c,f,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,B=n.expirationTimes,ne=n.hiddenUpdates;for(o=_&~o;0<o;){var me=31-Fe(o),_e=1<<me;S[me]=0,B[me]=-1;var ae=ne[me];if(ae!==null)for(ne[me]=null,me=0;me<ae.length;me++){var he=ae[me];he!==null&&(he.lane&=-536870913)}o&=~_e}c!==0&&at(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~r))}function at(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-Fe(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function mn(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-Fe(o),f=1<<c;f&r|n[c]&r&&(n[c]|=r),o&=~f}}function kn(n,r){var o=r&-r;return o=(o&42)!==0?1:ln(o),(o&(n.suspendedLanes|r))!==0?0:o}function ln(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function pn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ss(){var n=Se.p;return n!==0?n:(n=window.event,n===void 0?32:Db(n.type))}function ts(n,r){var o=Se.p;try{return Se.p=n,r()}finally{Se.p=o}}var os=Math.random().toString(36).slice(2),Gt="__reactFiber$"+os,En="__reactProps$"+os,Cs="__reactContainer$"+os,Nr="__reactEvents$"+os,di="__reactListeners$"+os,Ar="__reactHandles$"+os,mr="__reactResources$"+os,$n="__reactMarker$"+os;function Gs(n){delete n[Gt],delete n[En],delete n[Nr],delete n[di],delete n[Ar]}function ls(n){var r=n[Gt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Cs]||o[Gt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=vb(n);n!==null;){if(o=n[Gt])return o;n=vb(n)}return r}n=o,o=n.parentNode}return null}function Sn(n){if(n=n[Gt]||n[Cs]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function On(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function Wn(n){var r=n[mr];return r||(r=n[mr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ft(n){n[$n]=!0}var Kr=new Set,Ks={};function cs(n,r){Cn(n,r),Cn(n+"Capture",r)}function Cn(n,r){for(Ks[n]=r,n=0;n<r.length;n++)Kr.add(r[n])}var Ys=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hi={},M={};function F(n){return Tt.call(M,n)?!0:Tt.call(hi,n)?!1:Ys.test(n)?M[n]=!0:(hi[n]=!0,!1)}function ie(n,r,o){if(F(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function ue(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function ze(n,r,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+c)}}function Ve(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function qt(n,r,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ke(n){if(!n._valueTracker){var r=qe(n)?"checked":"value";n._valueTracker=qt(n,r,""+n[r])}}function zn(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=qe(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function Gn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ns=/[\n"\\]/g;function Pn(n){return n.replace(Ns,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function us(n,r,o,c,f,m,_,S){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),r!=null?_==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Ve(r)):n.value!==""+Ve(r)&&(n.value=""+Ve(r)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),r!=null?Di(n,_,Ve(r)):o!=null?Di(n,_,Ve(o)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Ve(S):n.removeAttribute("name")}function Yr(n,r,o,c,f,m,_,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ke(n);return}o=o!=null?""+Ve(o):"",r=r!=null?""+Ve(r):o,S||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=S?n.checked:!!c,n.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Ke(n)}function Di(n,r,o){r==="number"&&Gn(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function pr(n,r,o,c){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Ve(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function pa(n,r,o){if(r!=null&&(r=""+Ve(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+Ve(o):""}function Rr(n,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(Ye(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Ve(r),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Ke(n)}function xs(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var fi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qr(n,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,o):typeof o!="number"||o===0||fi.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Xr(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&Qr(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Qr(n,m,r[m])}function As(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Li=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ir=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mi(n){return Ir.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ns(){}var w=null;function N(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var U=null,$=null;function Z(n){var r=Sn(n);if(r&&(n=r.stateNode)){var o=n[En]||null;e:switch(n=r.stateNode,r.type){case"input":if(us(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var f=c[En]||null;if(!f)throw Error(i(90));us(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===n.form&&zn(c)}break e;case"textarea":pa(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&pr(n,!!o.multiple,r,!1)}}}var pe=!1;function fe(n,r,o){if(pe)return n(r,o);pe=!0;try{var c=n(r);return c}finally{if(pe=!1,(U!==null||$!==null)&&(Od(),U&&(r=U,n=$,$=U=null,Z(r),n)))for(r=0;r<n.length;r++)Z(n[r])}}function Ae(n,r){var o=n.stateNode;if(o===null)return null;var c=o[En]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var De=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Je=!1;if(De)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Je=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch{Je=!1}var Nt=null,_s=null,ot=null;function gn(){if(ot)return ot;var n,r=_s,o=r.length,c,f="value"in Nt?Nt.value:Nt.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var _=o-n;for(c=1;c<=_&&r[o-c]===f[m-c];c++);return ot=f.slice(n,1<c?1-c:void 0)}function dn(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function yt(){return!0}function Kt(){return!1}function rn(n){function r(o,c,f,m,_){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?yt:Kt,this.isPropagationStopped=Kt,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=yt)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=yt)},persist:function(){},isPersistent:yt}),r}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kn=rn(Fn),Nn=E({},Fn,{view:0,detail:0}),Qs=rn(Nn),rr,Oi,Mr,pi=E({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mr&&(Mr&&n.type==="mousemove"?(rr=n.screenX-Mr.screenX,Oi=n.screenY-Mr.screenY):Oi=rr=0,Mr=n),rr)},movementY:function(n){return"movementY"in n?n.movementY:Oi}}),ac=rn(pi),oo=E({},pi,{dataTransfer:0}),Hu=rn(oo),$u=E({},Nn,{relatedTarget:0}),lo=rn($u),oc=E({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Wu=rn(oc),Jo=E({},Fn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gu=rn(Jo),Ku=E({},Fn,{data:0}),gi=rn(Ku),Yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Xu[n])?!!r[n]:!1}function ga(){return Ju}var Xs=E({},Nn,{key:function(n){if(n.key){var r=Yu[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=dn(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(n){return n.type==="keypress"?dn(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?dn(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Zu=rn(Xs),ed=E({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pi=rn(ed),h=E({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga}),v=rn(h),k=E({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=rn(k),J=E({},pi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=rn(J),Le=E({},Fn,{newState:0,oldState:0}),jt=rn(Le),ss=[9,13,27,32],an=De&&"CompositionEvent"in window,Vn=null;De&&"documentMode"in document&&(Vn=document.documentMode);var Dr=De&&"TextEvent"in window&&!Vn,yi=De&&(!an||Vn&&8<Vn&&11>=Vn),Jr=" ",Zr=!1;function co(n,r){switch(n){case"keyup":return ss.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var el=!1;function KE(n,r){switch(n){case"compositionend":return Zo(r);case"keypress":return r.which!==32?null:(Zr=!0,Jr);case"textInput":return n=r.data,n===Jr&&Zr?null:n;default:return null}}function YE(n,r){if(el)return n==="compositionend"||!an&&co(n,r)?(n=gn(),ot=_s=Nt=null,el=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yi&&r.locale!=="ko"?null:r.data;default:return null}}var QE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x0(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!QE[n.type]:r==="textarea"}function _0(n,r,o,c){U?$?$.push(c):$=[c]:U=c,r=qd(r,"onChange"),0<r.length&&(o=new Kn("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var lc=null,cc=null;function XE(n){rb(n,0)}function td(n){var r=On(n);if(zn(r))return n}function k0(n,r){if(n==="change")return r}var E0=!1;if(De){var Rf;if(De){var If="oninput"in document;if(!If){var T0=document.createElement("div");T0.setAttribute("oninput","return;"),If=typeof T0.oninput=="function"}Rf=If}else Rf=!1;E0=Rf&&(!document.documentMode||9<document.documentMode)}function j0(){lc&&(lc.detachEvent("onpropertychange",S0),cc=lc=null)}function S0(n){if(n.propertyName==="value"&&td(cc)){var r=[];_0(r,cc,n,N(n)),fe(XE,r)}}function JE(n,r,o){n==="focusin"?(j0(),lc=r,cc=o,lc.attachEvent("onpropertychange",S0)):n==="focusout"&&j0()}function ZE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return td(cc)}function eT(n,r){if(n==="click")return td(r)}function tT(n,r){if(n==="input"||n==="change")return td(r)}function nT(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var gr=typeof Object.is=="function"?Object.is:nT;function uc(n,r){if(gr(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Tt.call(r,f)||!gr(n[f],r[f]))return!1}return!0}function C0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function N0(n,r){var o=C0(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=C0(o)}}function A0(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?A0(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function R0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Gn(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Gn(n.document)}return r}function Mf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var sT=De&&"documentMode"in document&&11>=document.documentMode,tl=null,Df=null,dc=null,Lf=!1;function I0(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Lf||tl==null||tl!==Gn(c)||(c=tl,"selectionStart"in c&&Mf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),dc&&uc(dc,c)||(dc=c,c=qd(Df,"onSelect"),0<c.length&&(r=new Kn("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=tl)))}function uo(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var nl={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},Of={},M0={};De&&(M0=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function ho(n){if(Of[n])return Of[n];if(!nl[n])return n;var r=nl[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in M0)return Of[n]=r[o];return n}var D0=ho("animationend"),L0=ho("animationiteration"),O0=ho("animationstart"),rT=ho("transitionrun"),iT=ho("transitionstart"),aT=ho("transitioncancel"),P0=ho("transitionend"),V0=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function ei(n,r){V0.set(n,r),cs(r,[n])}var nd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Lr=[],sl=0,Vf=0;function sd(){for(var n=sl,r=Vf=sl=0;r<n;){var o=Lr[r];Lr[r++]=null;var c=Lr[r];Lr[r++]=null;var f=Lr[r];Lr[r++]=null;var m=Lr[r];if(Lr[r++]=null,c!==null&&f!==null){var _=c.pending;_===null?f.next=f:(f.next=_.next,_.next=f),c.pending=f}m!==0&&U0(o,f,m)}}function rd(n,r,o,c){Lr[sl++]=n,Lr[sl++]=r,Lr[sl++]=o,Lr[sl++]=c,Vf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Uf(n,r,o,c){return rd(n,r,o,c),id(n)}function fo(n,r){return rd(n,null,null,r),id(n)}function U0(n,r,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-Fe(o),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function id(n){if(50<Mc)throw Mc=0,Km=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var rl={};function oT(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(n,r,o,c){return new oT(n,r,o,c)}function Bf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Vi(n,r){var o=n.alternate;return o===null?(o=yr(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function B0(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function ad(n,r,o,c,f,m){var _=0;if(c=n,typeof n=="function")Bf(n)&&(_=1);else if(typeof n=="string")_=hj(n,o,ke.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=yr(31,o,r,f),n.elementType=I,n.lanes=m,n;case q:return mo(o.children,f,m,r);case z:_=8,f|=24;break;case K:return n=yr(12,o,r,f|2),n.elementType=K,n.lanes=m,n;case Te:return n=yr(13,o,r,f),n.elementType=Te,n.lanes=m,n;case be:return n=yr(19,o,r,f),n.elementType=be,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:_=10;break e;case W:_=9;break e;case oe:_=11;break e;case C:_=14;break e;case j:_=16,c=null;break e}_=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=yr(_,o,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function mo(n,r,o,c){return n=yr(7,n,c,r),n.lanes=o,n}function zf(n,r,o){return n=yr(6,n,null,r),n.lanes=o,n}function z0(n){var r=yr(18,null,null,0);return r.stateNode=n,r}function Ff(n,r,o){return r=yr(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var F0=new WeakMap;function Or(n,r){if(typeof n=="object"&&n!==null){var o=F0.get(n);return o!==void 0?o:(r={value:n,source:r,stack:de(r)},F0.set(n,r),r)}return{value:n,source:r,stack:de(r)}}var il=[],al=0,od=null,hc=0,Pr=[],Vr=0,ya=null,vi=1,bi="";function Ui(n,r){il[al++]=hc,il[al++]=od,od=n,hc=r}function q0(n,r,o){Pr[Vr++]=vi,Pr[Vr++]=bi,Pr[Vr++]=ya,ya=n;var c=vi;n=bi;var f=32-Fe(c)-1;c&=~(1<<f),o+=1;var m=32-Fe(r)+f;if(30<m){var _=f-f%5;m=(c&(1<<_)-1).toString(32),c>>=_,f-=_,vi=1<<32-Fe(r)+f|o<<f|c,bi=m+n}else vi=1<<m|o<<f|c,bi=n}function qf(n){n.return!==null&&(Ui(n,1),q0(n,1,0))}function Hf(n){for(;n===od;)od=il[--al],il[al]=null,hc=il[--al],il[al]=null;for(;n===ya;)ya=Pr[--Vr],Pr[Vr]=null,bi=Pr[--Vr],Pr[Vr]=null,vi=Pr[--Vr],Pr[Vr]=null}function H0(n,r){Pr[Vr++]=vi,Pr[Vr++]=bi,Pr[Vr++]=ya,vi=r.id,bi=r.overflow,ya=n}var Rs=null,An=null,Ht=!1,va=null,Ur=!1,$f=Error(i(519));function ba(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fc(Or(r,n)),$f}function $0(n){var r=n.stateNode,o=n.type,c=n.memoizedProps;switch(r[Gt]=n,r[En]=c,o){case"dialog":Dt("cancel",r),Dt("close",r);break;case"iframe":case"object":case"embed":Dt("load",r);break;case"video":case"audio":for(o=0;o<Lc.length;o++)Dt(Lc[o],r);break;case"source":Dt("error",r);break;case"img":case"image":case"link":Dt("error",r),Dt("load",r);break;case"details":Dt("toggle",r);break;case"input":Dt("invalid",r),Yr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Dt("invalid",r);break;case"textarea":Dt("invalid",r),Rr(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||lb(r.textContent,o)?(c.popover!=null&&(Dt("beforetoggle",r),Dt("toggle",r)),c.onScroll!=null&&Dt("scroll",r),c.onScrollEnd!=null&&Dt("scrollend",r),c.onClick!=null&&(r.onclick=ns),r=!0):r=!1,r||ba(n,!0)}function W0(n){for(Rs=n.return;Rs;)switch(Rs.tag){case 5:case 31:case 13:Ur=!1;return;case 27:case 3:Ur=!0;return;default:Rs=Rs.return}}function ol(n){if(n!==Rs)return!1;if(!Ht)return W0(n),Ht=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||cp(n.type,n.memoizedProps)),o=!o),o&&An&&ba(n),W0(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));An=yb(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));An=yb(n)}else r===27?(r=An,Ma(n.type)?(n=mp,mp=null,An=n):An=r):An=Rs?zr(n.stateNode.nextSibling):null;return!0}function po(){An=Rs=null,Ht=!1}function Wf(){var n=va;return n!==null&&(lr===null?lr=n:lr.push.apply(lr,n),va=null),n}function fc(n){va===null?va=[n]:va.push(n)}var Gf=O(null),go=null,Bi=null;function wa(n,r,o){we(Gf,r._currentValue),r._currentValue=o}function zi(n){n._currentValue=Gf.current,re(Gf)}function Kf(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function Yf(n,r,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var B=0;B<r.length;B++)if(S.context===r[B]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),Kf(m.return,o,n),c||(_=null);break e}m=S.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),Kf(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function ll(n,r,o,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var S=f.type;gr(f.pendingProps.value,_.value)||(n!==null?n.push(S):n=[S])}}else if(f===Pe.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Bc):n=[Bc])}f=f.return}n!==null&&Yf(r,n,o,c),r.flags|=262144}function ld(n){for(n=n.firstContext;n!==null;){if(!gr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function yo(n){go=n,Bi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Is(n){return G0(go,n)}function cd(n,r){return go===null&&yo(n),G0(n,r)}function G0(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Bi===null){if(n===null)throw Error(i(308));Bi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Bi=Bi.next=r;return o}var lT=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},cT=s.unstable_scheduleCallback,uT=s.unstable_NormalPriority,ds={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qf(){return{controller:new lT,data:new Map,refCount:0}}function mc(n){n.refCount--,n.refCount===0&&cT(uT,function(){n.controller.abort()})}var pc=null,Xf=0,cl=0,ul=null;function dT(n,r){if(pc===null){var o=pc=[];Xf=0,cl=ep(),ul={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Xf++,r.then(K0,K0),r}function K0(){if(--Xf===0&&pc!==null){ul!==null&&(ul.status="fulfilled");var n=pc;pc=null,cl=0,ul=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function hT(n,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Y0=ee.S;ee.S=function(n,r){I1=pt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&dT(n,r),Y0!==null&&Y0(n,r)};var vo=O(null);function Jf(){var n=vo.current;return n!==null?n:xn.pooledCache}function ud(n,r){r===null?we(vo,vo.current):we(vo,r.pool)}function Q0(){var n=Jf();return n===null?null:{parent:ds._currentValue,pool:n}}var dl=Error(i(460)),Zf=Error(i(474)),dd=Error(i(542)),hd={then:function(){}};function X0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function J0(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(ns,ns),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,ev(n),n;default:if(typeof r.status=="string")r.then(ns,ns);else{if(n=xn,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,ev(n),n}throw wo=r,dl}}function bo(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(wo=o,dl):o}}var wo=null;function Z0(){if(wo===null)throw Error(i(459));var n=wo;return wo=null,n}function ev(n){if(n===dl||n===dd)throw Error(i(483))}var hl=null,gc=0;function fd(n){var r=gc;return gc+=1,hl===null&&(hl=[]),J0(hl,n,r)}function yc(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function md(n,r){throw r.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function tv(n){function r(Y,H){if(n){var te=Y.deletions;te===null?(Y.deletions=[H],Y.flags|=16):te.push(H)}}function o(Y,H){if(!n)return null;for(;H!==null;)r(Y,H),H=H.sibling;return null}function c(Y){for(var H=new Map;Y!==null;)Y.key!==null?H.set(Y.key,Y):H.set(Y.index,Y),Y=Y.sibling;return H}function f(Y,H){return Y=Vi(Y,H),Y.index=0,Y.sibling=null,Y}function m(Y,H,te){return Y.index=te,n?(te=Y.alternate,te!==null?(te=te.index,te<H?(Y.flags|=67108866,H):te):(Y.flags|=67108866,H)):(Y.flags|=1048576,H)}function _(Y){return n&&Y.alternate===null&&(Y.flags|=67108866),Y}function S(Y,H,te,ye){return H===null||H.tag!==6?(H=zf(te,Y.mode,ye),H.return=Y,H):(H=f(H,te),H.return=Y,H)}function B(Y,H,te,ye){var rt=te.type;return rt===q?me(Y,H,te.props.children,ye,te.key):H!==null&&(H.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===j&&bo(rt)===H.type)?(H=f(H,te.props),yc(H,te),H.return=Y,H):(H=ad(te.type,te.key,te.props,null,Y.mode,ye),yc(H,te),H.return=Y,H)}function ne(Y,H,te,ye){return H===null||H.tag!==4||H.stateNode.containerInfo!==te.containerInfo||H.stateNode.implementation!==te.implementation?(H=Ff(te,Y.mode,ye),H.return=Y,H):(H=f(H,te.children||[]),H.return=Y,H)}function me(Y,H,te,ye,rt){return H===null||H.tag!==7?(H=mo(te,Y.mode,ye,rt),H.return=Y,H):(H=f(H,te),H.return=Y,H)}function _e(Y,H,te){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=zf(""+H,Y.mode,te),H.return=Y,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case P:return te=ad(H.type,H.key,H.props,null,Y.mode,te),yc(te,H),te.return=Y,te;case G:return H=Ff(H,Y.mode,te),H.return=Y,H;case j:return H=bo(H),_e(Y,H,te)}if(Ye(H)||D(H))return H=mo(H,Y.mode,te,null),H.return=Y,H;if(typeof H.then=="function")return _e(Y,fd(H),te);if(H.$$typeof===Q)return _e(Y,cd(Y,H),te);md(Y,H)}return null}function ae(Y,H,te,ye){var rt=H!==null?H.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return rt!==null?null:S(Y,H,""+te,ye);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case P:return te.key===rt?B(Y,H,te,ye):null;case G:return te.key===rt?ne(Y,H,te,ye):null;case j:return te=bo(te),ae(Y,H,te,ye)}if(Ye(te)||D(te))return rt!==null?null:me(Y,H,te,ye,null);if(typeof te.then=="function")return ae(Y,H,fd(te),ye);if(te.$$typeof===Q)return ae(Y,H,cd(Y,te),ye);md(Y,te)}return null}function he(Y,H,te,ye,rt){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return Y=Y.get(te)||null,S(H,Y,""+ye,rt);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case P:return Y=Y.get(ye.key===null?te:ye.key)||null,B(H,Y,ye,rt);case G:return Y=Y.get(ye.key===null?te:ye.key)||null,ne(H,Y,ye,rt);case j:return ye=bo(ye),he(Y,H,te,ye,rt)}if(Ye(ye)||D(ye))return Y=Y.get(te)||null,me(H,Y,ye,rt,null);if(typeof ye.then=="function")return he(Y,H,te,fd(ye),rt);if(ye.$$typeof===Q)return he(Y,H,te,cd(H,ye),rt);md(H,ye)}return null}function Qe(Y,H,te,ye){for(var rt=null,en=null,Ze=H,At=H=0,Pt=null;Ze!==null&&At<te.length;At++){Ze.index>At?(Pt=Ze,Ze=null):Pt=Ze.sibling;var tn=ae(Y,Ze,te[At],ye);if(tn===null){Ze===null&&(Ze=Pt);break}n&&Ze&&tn.alternate===null&&r(Y,Ze),H=m(tn,H,At),en===null?rt=tn:en.sibling=tn,en=tn,Ze=Pt}if(At===te.length)return o(Y,Ze),Ht&&Ui(Y,At),rt;if(Ze===null){for(;At<te.length;At++)Ze=_e(Y,te[At],ye),Ze!==null&&(H=m(Ze,H,At),en===null?rt=Ze:en.sibling=Ze,en=Ze);return Ht&&Ui(Y,At),rt}for(Ze=c(Ze);At<te.length;At++)Pt=he(Ze,Y,At,te[At],ye),Pt!==null&&(n&&Pt.alternate!==null&&Ze.delete(Pt.key===null?At:Pt.key),H=m(Pt,H,At),en===null?rt=Pt:en.sibling=Pt,en=Pt);return n&&Ze.forEach(function(Va){return r(Y,Va)}),Ht&&Ui(Y,At),rt}function ut(Y,H,te,ye){if(te==null)throw Error(i(151));for(var rt=null,en=null,Ze=H,At=H=0,Pt=null,tn=te.next();Ze!==null&&!tn.done;At++,tn=te.next()){Ze.index>At?(Pt=Ze,Ze=null):Pt=Ze.sibling;var Va=ae(Y,Ze,tn.value,ye);if(Va===null){Ze===null&&(Ze=Pt);break}n&&Ze&&Va.alternate===null&&r(Y,Ze),H=m(Va,H,At),en===null?rt=Va:en.sibling=Va,en=Va,Ze=Pt}if(tn.done)return o(Y,Ze),Ht&&Ui(Y,At),rt;if(Ze===null){for(;!tn.done;At++,tn=te.next())tn=_e(Y,tn.value,ye),tn!==null&&(H=m(tn,H,At),en===null?rt=tn:en.sibling=tn,en=tn);return Ht&&Ui(Y,At),rt}for(Ze=c(Ze);!tn.done;At++,tn=te.next())tn=he(Ze,Y,At,tn.value,ye),tn!==null&&(n&&tn.alternate!==null&&Ze.delete(tn.key===null?At:tn.key),H=m(tn,H,At),en===null?rt=tn:en.sibling=tn,en=tn);return n&&Ze.forEach(function(kj){return r(Y,kj)}),Ht&&Ui(Y,At),rt}function bn(Y,H,te,ye){if(typeof te=="object"&&te!==null&&te.type===q&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case P:e:{for(var rt=te.key;H!==null;){if(H.key===rt){if(rt=te.type,rt===q){if(H.tag===7){o(Y,H.sibling),ye=f(H,te.props.children),ye.return=Y,Y=ye;break e}}else if(H.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===j&&bo(rt)===H.type){o(Y,H.sibling),ye=f(H,te.props),yc(ye,te),ye.return=Y,Y=ye;break e}o(Y,H);break}else r(Y,H);H=H.sibling}te.type===q?(ye=mo(te.props.children,Y.mode,ye,te.key),ye.return=Y,Y=ye):(ye=ad(te.type,te.key,te.props,null,Y.mode,ye),yc(ye,te),ye.return=Y,Y=ye)}return _(Y);case G:e:{for(rt=te.key;H!==null;){if(H.key===rt)if(H.tag===4&&H.stateNode.containerInfo===te.containerInfo&&H.stateNode.implementation===te.implementation){o(Y,H.sibling),ye=f(H,te.children||[]),ye.return=Y,Y=ye;break e}else{o(Y,H);break}else r(Y,H);H=H.sibling}ye=Ff(te,Y.mode,ye),ye.return=Y,Y=ye}return _(Y);case j:return te=bo(te),bn(Y,H,te,ye)}if(Ye(te))return Qe(Y,H,te,ye);if(D(te)){if(rt=D(te),typeof rt!="function")throw Error(i(150));return te=rt.call(te),ut(Y,H,te,ye)}if(typeof te.then=="function")return bn(Y,H,fd(te),ye);if(te.$$typeof===Q)return bn(Y,H,cd(Y,te),ye);md(Y,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,H!==null&&H.tag===6?(o(Y,H.sibling),ye=f(H,te),ye.return=Y,Y=ye):(o(Y,H),ye=zf(te,Y.mode,ye),ye.return=Y,Y=ye),_(Y)):o(Y,H)}return function(Y,H,te,ye){try{gc=0;var rt=bn(Y,H,te,ye);return hl=null,rt}catch(Ze){if(Ze===dl||Ze===dd)throw Ze;var en=yr(29,Ze,null,Y.mode);return en.lanes=ye,en.return=Y,en}}}var xo=tv(!0),nv=tv(!1),xa=!1;function em(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tm(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function _a(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ka(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(on&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=id(n),U0(n,null,o),r}return rd(n,c,r,o),id(n)}function vc(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,mn(n,o)}}function nm(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var sm=!1;function bc(){if(sm){var n=ul;if(n!==null)throw n}}function wc(n,r,o,c){sm=!1;var f=n.updateQueue;xa=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var B=S,ne=B.next;B.next=null,_===null?m=ne:_.next=ne,_=B;var me=n.alternate;me!==null&&(me=me.updateQueue,S=me.lastBaseUpdate,S!==_&&(S===null?me.firstBaseUpdate=ne:S.next=ne,me.lastBaseUpdate=B))}if(m!==null){var _e=f.baseState;_=0,me=ne=B=null,S=m;do{var ae=S.lane&-536870913,he=ae!==S.lane;if(he?(Ot&ae)===ae:(c&ae)===ae){ae!==0&&ae===cl&&(sm=!0),me!==null&&(me=me.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Qe=n,ut=S;ae=r;var bn=o;switch(ut.tag){case 1:if(Qe=ut.payload,typeof Qe=="function"){_e=Qe.call(bn,_e,ae);break e}_e=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=ut.payload,ae=typeof Qe=="function"?Qe.call(bn,_e,ae):Qe,ae==null)break e;_e=E({},_e,ae);break e;case 2:xa=!0}}ae=S.callback,ae!==null&&(n.flags|=64,he&&(n.flags|=8192),he=f.callbacks,he===null?f.callbacks=[ae]:he.push(ae))}else he={lane:ae,tag:S.tag,payload:S.payload,callback:S.callback,next:null},me===null?(ne=me=he,B=_e):me=me.next=he,_|=ae;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;he=S,S=he.next,he.next=null,f.lastBaseUpdate=he,f.shared.pending=null}}while(!0);me===null&&(B=_e),f.baseState=B,f.firstBaseUpdate=ne,f.lastBaseUpdate=me,m===null&&(f.shared.lanes=0),Ca|=_,n.lanes=_,n.memoizedState=_e}}function sv(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function rv(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)sv(o[n],r)}var fl=O(null),pd=O(0);function iv(n,r){n=Qi,we(pd,n),we(fl,r),Qi=n|r.baseLanes}function rm(){we(pd,Qi),we(fl,fl.current)}function im(){Qi=pd.current,re(fl),re(pd)}var vr=O(null),Br=null;function Ea(n){var r=n.alternate;we(rs,rs.current&1),we(vr,n),Br===null&&(r===null||fl.current!==null||r.memoizedState!==null)&&(Br=n)}function am(n){we(rs,rs.current),we(vr,n),Br===null&&(Br=n)}function av(n){n.tag===22?(we(rs,rs.current),we(vr,n),Br===null&&(Br=n)):Ta()}function Ta(){we(rs,rs.current),we(vr,vr.current)}function br(n){re(vr),Br===n&&(Br=null),re(rs)}var rs=O(0);function gd(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||hp(o)||fp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Fi=0,St=null,yn=null,hs=null,yd=!1,ml=!1,_o=!1,vd=0,xc=0,pl=null,fT=0;function Yn(){throw Error(i(321))}function om(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!gr(n[o],r[o]))return!1;return!0}function lm(n,r,o,c,f,m){return Fi=m,St=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=n===null||n.memoizedState===null?qv:km,_o=!1,m=o(c,f),_o=!1,ml&&(m=lv(r,o,c,f)),ov(n),m}function ov(n){ee.H=Ec;var r=yn!==null&&yn.next!==null;if(Fi=0,hs=yn=St=null,yd=!1,xc=0,pl=null,r)throw Error(i(300));n===null||fs||(n=n.dependencies,n!==null&&ld(n)&&(fs=!0))}function lv(n,r,o,c){St=n;var f=0;do{if(ml&&(pl=null),xc=0,ml=!1,25<=f)throw Error(i(301));if(f+=1,hs=yn=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ee.H=Hv,m=r(o,c)}while(ml);return m}function mT(){var n=ee.H,r=n.useState()[0];return r=typeof r.then=="function"?_c(r):r,n=n.useState()[0],(yn!==null?yn.memoizedState:null)!==n&&(St.flags|=1024),r}function cm(){var n=vd!==0;return vd=0,n}function um(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function dm(n){if(yd){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}yd=!1}Fi=0,hs=yn=St=null,ml=!1,xc=vd=0,pl=null}function Js(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hs===null?St.memoizedState=hs=n:hs=hs.next=n,hs}function is(){if(yn===null){var n=St.alternate;n=n!==null?n.memoizedState:null}else n=yn.next;var r=hs===null?St.memoizedState:hs.next;if(r!==null)hs=r,yn=n;else{if(n===null)throw St.alternate===null?Error(i(467)):Error(i(310));yn=n,n={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},hs===null?St.memoizedState=hs=n:hs=hs.next=n}return hs}function bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _c(n){var r=xc;return xc+=1,pl===null&&(pl=[]),n=J0(pl,n,r),r=St,(hs===null?r.memoizedState:hs.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?qv:km),n}function wd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return _c(n);if(n.$$typeof===Q)return Is(n)}throw Error(i(438,String(n)))}function hm(n){var r=null,o=St.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=St.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=bd(),St.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),c=0;c<n;c++)o[c]=V;return r.index++,o}function qi(n,r){return typeof r=="function"?r(n):r}function xd(n){var r=is();return fm(r,yn,n)}function fm(n,r,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var S=_=null,B=null,ne=r,me=!1;do{var _e=ne.lane&-536870913;if(_e!==ne.lane?(Ot&_e)===_e:(Fi&_e)===_e){var ae=ne.revertLane;if(ae===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),_e===cl&&(me=!0);else if((Fi&ae)===ae){ne=ne.next,ae===cl&&(me=!0);continue}else _e={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},B===null?(S=B=_e,_=m):B=B.next=_e,St.lanes|=ae,Ca|=ae;_e=ne.action,_o&&o(m,_e),m=ne.hasEagerState?ne.eagerState:o(m,_e)}else ae={lane:_e,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},B===null?(S=B=ae,_=m):B=B.next=ae,St.lanes|=_e,Ca|=_e;ne=ne.next}while(ne!==null&&ne!==r);if(B===null?_=m:B.next=S,!gr(m,n.memoizedState)&&(fs=!0,me&&(o=ul,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=B,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function mm(n){var r=is(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);gr(m,r.memoizedState)||(fs=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function cv(n,r,o){var c=St,f=is(),m=Ht;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var _=!gr((yn||f).memoizedState,o);if(_&&(f.memoizedState=o,fs=!0),f=f.queue,ym(hv.bind(null,c,f,n),[n]),f.getSnapshot!==r||_||hs!==null&&hs.memoizedState.tag&1){if(c.flags|=2048,gl(9,{destroy:void 0},dv.bind(null,c,f,o,r),null),xn===null)throw Error(i(349));m||(Fi&127)!==0||uv(c,r,o)}return o}function uv(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=St.updateQueue,r===null?(r=bd(),St.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function dv(n,r,o,c){r.value=o,r.getSnapshot=c,fv(r)&&mv(n)}function hv(n,r,o){return o(function(){fv(r)&&mv(n)})}function fv(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!gr(n,o)}catch{return!0}}function mv(n){var r=fo(n,2);r!==null&&cr(r,n,2)}function pm(n){var r=Js();if(typeof n=="function"){var o=n;if(n=o(),_o){tt(!0);try{o()}finally{tt(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:n},r}function pv(n,r,o,c){return n.baseState=o,fm(n,yn,typeof c=="function"?c:qi)}function pT(n,r,o,c,f){if(Ed(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};ee.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,gv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function gv(n,r){var o=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=ee.T,_={};ee.T=_;try{var S=o(f,c),B=ee.S;B!==null&&B(_,S),yv(n,r,S)}catch(ne){gm(n,r,ne)}finally{m!==null&&_.types!==null&&(m.types=_.types),ee.T=m}}else try{m=o(f,c),yv(n,r,m)}catch(ne){gm(n,r,ne)}}function yv(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){vv(n,r,c)},function(c){return gm(n,r,c)}):vv(n,r,o)}function vv(n,r,o){r.status="fulfilled",r.value=o,bv(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,gv(n,o)))}function gm(n,r,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,bv(r),r=r.next;while(r!==c)}n.action=null}function bv(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function wv(n,r){return r}function xv(n,r){if(Ht){var o=xn.formState;if(o!==null){e:{var c=St;if(Ht){if(An){t:{for(var f=An,m=Ur;f.nodeType!==8;){if(!m){f=null;break t}if(f=zr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){An=zr(f.nextSibling),c=f.data==="F!";break e}}ba(c)}c=!1}c&&(r=o[0])}}return o=Js(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wv,lastRenderedState:r},o.queue=c,o=Bv.bind(null,St,c),c.dispatch=o,c=pm(!1),m=_m.bind(null,St,!1,c.queue),c=Js(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,o=pT.bind(null,St,f,m,o),f.dispatch=o,c.memoizedState=n,[r,o,!1]}function _v(n){var r=is();return kv(r,yn,n)}function kv(n,r,o){if(r=fm(n,r,wv)[0],n=xd(qi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=_c(r)}catch(_){throw _===dl?dd:_}else c=r;r=is();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(St.flags|=2048,gl(9,{destroy:void 0},gT.bind(null,f,o),null)),[c,m,n]}function gT(n,r){n.action=r}function Ev(n){var r=is(),o=yn;if(o!==null)return kv(r,o,n);is(),r=r.memoizedState,o=is();var c=o.queue.dispatch;return o.memoizedState=n,[r,c,!1]}function gl(n,r,o,c){return n={tag:n,create:o,deps:c,inst:r,next:null},r=St.updateQueue,r===null&&(r=bd(),St.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n),n}function Tv(){return is().memoizedState}function _d(n,r,o,c){var f=Js();St.flags|=n,f.memoizedState=gl(1|r,{destroy:void 0},o,c===void 0?null:c)}function kd(n,r,o,c){var f=is();c=c===void 0?null:c;var m=f.memoizedState.inst;yn!==null&&c!==null&&om(c,yn.memoizedState.deps)?f.memoizedState=gl(r,m,o,c):(St.flags|=n,f.memoizedState=gl(1|r,m,o,c))}function jv(n,r){_d(8390656,8,n,r)}function ym(n,r){kd(2048,8,n,r)}function yT(n){St.flags|=4;var r=St.updateQueue;if(r===null)r=bd(),St.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function Sv(n){var r=is().memoizedState;return yT({ref:r,nextImpl:n}),function(){if((on&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Cv(n,r){return kd(4,2,n,r)}function Nv(n,r){return kd(4,4,n,r)}function Av(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Rv(n,r,o){o=o!=null?o.concat([n]):null,kd(4,4,Av.bind(null,r,n),o)}function vm(){}function Iv(n,r){var o=is();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&om(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function Mv(n,r){var o=is();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&om(r,c[1]))return c[0];if(c=n(),_o){tt(!0);try{n()}finally{tt(!1)}}return o.memoizedState=[c,r],c}function bm(n,r,o){return o===void 0||(Fi&1073741824)!==0&&(Ot&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=D1(),St.lanes|=n,Ca|=n,o)}function Dv(n,r,o,c){return gr(o,r)?o:fl.current!==null?(n=bm(n,o,c),gr(n,r)||(fs=!0),n):(Fi&42)===0||(Fi&1073741824)!==0&&(Ot&261930)===0?(fs=!0,n.memoizedState=o):(n=D1(),St.lanes|=n,Ca|=n,r)}function Lv(n,r,o,c,f){var m=Se.p;Se.p=m!==0&&8>m?m:8;var _=ee.T,S={};ee.T=S,_m(n,!1,r,o);try{var B=f(),ne=ee.S;if(ne!==null&&ne(S,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var me=hT(B,c);kc(n,r,me,_r(n))}else kc(n,r,c,_r(n))}catch(_e){kc(n,r,{then:function(){},status:"rejected",reason:_e},_r())}finally{Se.p=m,_!==null&&S.types!==null&&(_.types=S.types),ee.T=_}}function vT(){}function wm(n,r,o,c){if(n.tag!==5)throw Error(i(476));var f=Ov(n).queue;Lv(n,f,r,Ie,o===null?vT:function(){return Pv(n),o(c)})}function Ov(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Ie,baseState:Ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:Ie},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Pv(n){var r=Ov(n);r.next===null&&(r=n.alternate.memoizedState),kc(n,r.next.queue,{},_r())}function xm(){return Is(Bc)}function Vv(){return is().memoizedState}function Uv(){return is().memoizedState}function bT(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=_r();n=_a(o);var c=ka(r,n,o);c!==null&&(cr(c,r,o),vc(c,r,o)),r={cache:Qf()},n.payload=r;return}r=r.return}}function wT(n,r,o){var c=_r();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ed(n)?zv(r,o):(o=Uf(n,r,o,c),o!==null&&(cr(o,n,c),Fv(o,r,c)))}function Bv(n,r,o){var c=_r();kc(n,r,o,c)}function kc(n,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ed(n))zv(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,S=m(_,o);if(f.hasEagerState=!0,f.eagerState=S,gr(S,_))return rd(n,r,f,0),xn===null&&sd(),!1}catch{}if(o=Uf(n,r,f,c),o!==null)return cr(o,n,c),Fv(o,r,c),!0}return!1}function _m(n,r,o,c){if(c={lane:2,revertLane:ep(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ed(n)){if(r)throw Error(i(479))}else r=Uf(n,o,c,2),r!==null&&cr(r,n,2)}function Ed(n){var r=n.alternate;return n===St||r!==null&&r===St}function zv(n,r){ml=yd=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function Fv(n,r,o){if((o&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,mn(n,o)}}var Ec={readContext:Is,use:wd,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useLayoutEffect:Yn,useInsertionEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useSyncExternalStore:Yn,useId:Yn,useHostTransitionStatus:Yn,useFormState:Yn,useActionState:Yn,useOptimistic:Yn,useMemoCache:Yn,useCacheRefresh:Yn};Ec.useEffectEvent=Yn;var qv={readContext:Is,use:wd,useCallback:function(n,r){return Js().memoizedState=[n,r===void 0?null:r],n},useContext:Is,useEffect:jv,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,_d(4194308,4,Av.bind(null,r,n),o)},useLayoutEffect:function(n,r){return _d(4194308,4,n,r)},useInsertionEffect:function(n,r){_d(4,2,n,r)},useMemo:function(n,r){var o=Js();r=r===void 0?null:r;var c=n();if(_o){tt(!0);try{n()}finally{tt(!1)}}return o.memoizedState=[c,r],c},useReducer:function(n,r,o){var c=Js();if(o!==void 0){var f=o(r);if(_o){tt(!0);try{o(r)}finally{tt(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=wT.bind(null,St,n),[c.memoizedState,n]},useRef:function(n){var r=Js();return n={current:n},r.memoizedState=n},useState:function(n){n=pm(n);var r=n.queue,o=Bv.bind(null,St,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:vm,useDeferredValue:function(n,r){var o=Js();return bm(o,n,r)},useTransition:function(){var n=pm(!1);return n=Lv.bind(null,St,n.queue,!0,!1),Js().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var c=St,f=Js();if(Ht){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),xn===null)throw Error(i(349));(Ot&127)!==0||uv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,jv(hv.bind(null,c,m,n),[n]),c.flags|=2048,gl(9,{destroy:void 0},dv.bind(null,c,m,o,r),null),o},useId:function(){var n=Js(),r=xn.identifierPrefix;if(Ht){var o=bi,c=vi;o=(c&~(1<<32-Fe(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=vd++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=fT++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:xm,useFormState:xv,useActionState:xv,useOptimistic:function(n){var r=Js();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=_m.bind(null,St,!0,o),o.dispatch=r,[n,r]},useMemoCache:hm,useCacheRefresh:function(){return Js().memoizedState=bT.bind(null,St)},useEffectEvent:function(n){var r=Js(),o={impl:n};return r.memoizedState=o,function(){if((on&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},km={readContext:Is,use:wd,useCallback:Iv,useContext:Is,useEffect:ym,useImperativeHandle:Rv,useInsertionEffect:Cv,useLayoutEffect:Nv,useMemo:Mv,useReducer:xd,useRef:Tv,useState:function(){return xd(qi)},useDebugValue:vm,useDeferredValue:function(n,r){var o=is();return Dv(o,yn.memoizedState,n,r)},useTransition:function(){var n=xd(qi)[0],r=is().memoizedState;return[typeof n=="boolean"?n:_c(n),r]},useSyncExternalStore:cv,useId:Vv,useHostTransitionStatus:xm,useFormState:_v,useActionState:_v,useOptimistic:function(n,r){var o=is();return pv(o,yn,n,r)},useMemoCache:hm,useCacheRefresh:Uv};km.useEffectEvent=Sv;var Hv={readContext:Is,use:wd,useCallback:Iv,useContext:Is,useEffect:ym,useImperativeHandle:Rv,useInsertionEffect:Cv,useLayoutEffect:Nv,useMemo:Mv,useReducer:mm,useRef:Tv,useState:function(){return mm(qi)},useDebugValue:vm,useDeferredValue:function(n,r){var o=is();return yn===null?bm(o,n,r):Dv(o,yn.memoizedState,n,r)},useTransition:function(){var n=mm(qi)[0],r=is().memoizedState;return[typeof n=="boolean"?n:_c(n),r]},useSyncExternalStore:cv,useId:Vv,useHostTransitionStatus:xm,useFormState:Ev,useActionState:Ev,useOptimistic:function(n,r){var o=is();return yn!==null?pv(o,yn,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:hm,useCacheRefresh:Uv};Hv.useEffectEvent=Sv;function Em(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:E({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Tm={enqueueSetState:function(n,r,o){n=n._reactInternals;var c=_r(),f=_a(c);f.payload=r,o!=null&&(f.callback=o),r=ka(n,f,c),r!==null&&(cr(r,n,c),vc(r,n,c))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=_r(),f=_a(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=ka(n,f,c),r!==null&&(cr(r,n,c),vc(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=_r(),c=_a(o);c.tag=2,r!=null&&(c.callback=r),r=ka(n,c,o),r!==null&&(cr(r,n,o),vc(r,n,o))}};function $v(n,r,o,c,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,_):r.prototype&&r.prototype.isPureReactComponent?!uc(o,c)||!uc(f,m):!0}function Wv(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&Tm.enqueueReplaceState(r,r.state,null)}function ko(n,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(n=n.defaultProps){o===r&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Gv(n){nd(n)}function Kv(n){console.error(n)}function Yv(n){nd(n)}function Td(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Qv(n,r,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function jm(n,r,o){return o=_a(o),o.tag=3,o.payload={element:null},o.callback=function(){Td(n,r)},o}function Xv(n){return n=_a(n),n.tag=3,n}function Jv(n,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Qv(r,o,c)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Qv(r,o,c),typeof f!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function xT(n,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&ll(r,o,f,!0),o=vr.current,o!==null){switch(o.tag){case 31:case 13:return Br===null?Pd():o.alternate===null&&Qn===0&&(Qn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===hd?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Xm(n,c,f)),!1;case 22:return o.flags|=65536,c===hd?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Xm(n,c,f)),!1}throw Error(i(435,o.tag))}return Xm(n,c,f),Pd(),!1}if(Ht)return r=vr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==$f&&(n=Error(i(422),{cause:c}),fc(Or(n,o)))):(c!==$f&&(r=Error(i(423),{cause:c}),fc(Or(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Or(c,o),f=jm(n.stateNode,c,f),nm(n,f),Qn!==4&&(Qn=2)),!1;var m=Error(i(520),{cause:c});if(m=Or(m,o),Ic===null?Ic=[m]:Ic.push(m),Qn!==4&&(Qn=2),r===null)return!0;c=Or(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=jm(o.stateNode,c,n),nm(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Na===null||!Na.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Xv(f),Jv(f,n,o,c),nm(o,f),!1}o=o.return}while(o!==null);return!1}var Sm=Error(i(461)),fs=!1;function Ms(n,r,o,c){r.child=n===null?nv(r,null,o,c):xo(r,n.child,o,c)}function Zv(n,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var _={};for(var S in c)S!=="ref"&&(_[S]=c[S])}else _=c;return yo(r),c=lm(n,r,o,_,m,f),S=cm(),n!==null&&!fs?(um(n,r,f),Hi(n,r,f)):(Ht&&S&&qf(r),r.flags|=1,Ms(n,r,c,f),r.child)}function e1(n,r,o,c,f){if(n===null){var m=o.type;return typeof m=="function"&&!Bf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,t1(n,r,m,c,f)):(n=ad(o.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Lm(n,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:uc,o(_,c)&&n.ref===r.ref)return Hi(n,r,f)}return r.flags|=1,n=Vi(m,c),n.ref=r.ref,n.return=r,r.child=n}function t1(n,r,o,c,f){if(n!==null){var m=n.memoizedProps;if(uc(m,c)&&n.ref===r.ref)if(fs=!1,r.pendingProps=c=m,Lm(n,f))(n.flags&131072)!==0&&(fs=!0);else return r.lanes=n.lanes,Hi(n,r,f)}return Cm(n,r,o,c,f)}function n1(n,r,o,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return s1(n,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&ud(r,m!==null?m.cachePool:null),m!==null?iv(r,m):rm(),av(r);else return c=r.lanes=536870912,s1(n,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(ud(r,m.cachePool),iv(r,m),Ta(),r.memoizedState=null):(n!==null&&ud(r,null),rm(),Ta());return Ms(n,r,f,o),r.child}function Tc(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function s1(n,r,o,c,f){var m=Jf();return m=m===null?null:{parent:ds._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},n!==null&&ud(r,null),rm(),av(r),n!==null&&ll(n,r,c,!0),r.childLanes=f,null}function jd(n,r){return r=Cd({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function r1(n,r,o){return xo(r,n.child,null,o),n=jd(r,r.pendingProps),n.flags|=2,br(r),r.memoizedState=null,n}function _T(n,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Ht){if(c.mode==="hidden")return n=jd(r,c),r.lanes=536870912,Tc(null,n);if(am(r),(n=An)?(n=gb(n,Ur),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ya!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=z0(n),o.return=r,r.child=o,Rs=r,An=null)):n=null,n===null)throw ba(r);return r.lanes=536870912,null}return jd(r,c)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(am(r),f)if(r.flags&256)r.flags&=-257,r=r1(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(fs||ll(n,r,o,!1),f=(o&n.childLanes)!==0,fs||f){if(c=xn,c!==null&&(_=kn(c,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,fo(n,_),cr(c,n,_),Sm;Pd(),r=r1(n,r,o)}else n=m.treeContext,An=zr(_.nextSibling),Rs=r,Ht=!0,va=null,Ur=!1,n!==null&&H0(r,n),r=jd(r,c),r.flags|=4096;return r}return n=Vi(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Sd(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Cm(n,r,o,c,f){return yo(r),o=lm(n,r,o,c,void 0,f),c=cm(),n!==null&&!fs?(um(n,r,f),Hi(n,r,f)):(Ht&&c&&qf(r),r.flags|=1,Ms(n,r,o,f),r.child)}function i1(n,r,o,c,f,m){return yo(r),r.updateQueue=null,o=lv(r,c,o,f),ov(n),c=cm(),n!==null&&!fs?(um(n,r,m),Hi(n,r,m)):(Ht&&c&&qf(r),r.flags|=1,Ms(n,r,o,m),r.child)}function a1(n,r,o,c,f){if(yo(r),r.stateNode===null){var m=rl,_=o.contextType;typeof _=="object"&&_!==null&&(m=Is(_)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Tm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},em(r),_=o.contextType,m.context=typeof _=="object"&&_!==null?Is(_):rl,m.state=r.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Em(r,o,_,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Tm.enqueueReplaceState(m,m.state,null),wc(r,c,m,f),bc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var S=r.memoizedProps,B=ko(o,S);m.props=B;var ne=m.context,me=o.contextType;_=rl,typeof me=="object"&&me!==null&&(_=Is(me));var _e=o.getDerivedStateFromProps;me=typeof _e=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,me||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||ne!==_)&&Wv(r,m,c,_),xa=!1;var ae=r.memoizedState;m.state=ae,wc(r,c,m,f),bc(),ne=r.memoizedState,S||ae!==ne||xa?(typeof _e=="function"&&(Em(r,o,_e,c),ne=r.memoizedState),(B=xa||$v(r,o,B,c,ae,ne,_))?(me||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ne),m.props=c,m.state=ne,m.context=_,c=B):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,tm(n,r),_=r.memoizedProps,me=ko(o,_),m.props=me,_e=r.pendingProps,ae=m.context,ne=o.contextType,B=rl,typeof ne=="object"&&ne!==null&&(B=Is(ne)),S=o.getDerivedStateFromProps,(ne=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==_e||ae!==B)&&Wv(r,m,c,B),xa=!1,ae=r.memoizedState,m.state=ae,wc(r,c,m,f),bc();var he=r.memoizedState;_!==_e||ae!==he||xa||n!==null&&n.dependencies!==null&&ld(n.dependencies)?(typeof S=="function"&&(Em(r,o,S,c),he=r.memoizedState),(me=xa||$v(r,o,me,c,ae,he,B)||n!==null&&n.dependencies!==null&&ld(n.dependencies))?(ne||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,he,B),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,he,B)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&ae===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&ae===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=he),m.props=c,m.state=he,m.context=B,c=me):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&ae===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&ae===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,Sd(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=xo(r,n.child,null,f),r.child=xo(r,null,o,f)):Ms(n,r,o,f),r.memoizedState=m.state,n=r.child):n=Hi(n,r,f),n}function o1(n,r,o,c){return po(),r.flags|=256,Ms(n,r,o,c),r.child}var Nm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Am(n){return{baseLanes:n,cachePool:Q0()}}function Rm(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=xr),n}function l1(n,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(rs.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,n===null){if(Ht){if(f?Ea(r):Ta(),(n=An)?(n=gb(n,Ur),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ya!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=z0(n),o.return=r,r.child=o,Rs=r,An=null)):n=null,n===null)throw ba(r);return fp(n)?r.lanes=32:r.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(Ta(),f=r.mode,S=Cd({mode:"hidden",children:S},f),c=mo(c,f,o,null),S.return=r,c.return=r,S.sibling=c,r.child=S,c=r.child,c.memoizedState=Am(o),c.childLanes=Rm(n,_,o),r.memoizedState=Nm,Tc(null,c)):(Ea(r),Im(r,S))}var B=n.memoizedState;if(B!==null&&(S=B.dehydrated,S!==null)){if(m)r.flags&256?(Ea(r),r.flags&=-257,r=Mm(n,r,o)):r.memoizedState!==null?(Ta(),r.child=n.child,r.flags|=128,r=null):(Ta(),S=c.fallback,f=r.mode,c=Cd({mode:"visible",children:c.children},f),S=mo(S,f,o,null),S.flags|=2,c.return=r,S.return=r,c.sibling=S,r.child=c,xo(r,n.child,null,o),c=r.child,c.memoizedState=Am(o),c.childLanes=Rm(n,_,o),r.memoizedState=Nm,r=Tc(null,c));else if(Ea(r),fp(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var ne=_.dgst;_=ne,c=Error(i(419)),c.stack="",c.digest=_,fc({value:c,source:null,stack:null}),r=Mm(n,r,o)}else if(fs||ll(n,r,o,!1),_=(o&n.childLanes)!==0,fs||_){if(_=xn,_!==null&&(c=kn(_,o),c!==0&&c!==B.retryLane))throw B.retryLane=c,fo(n,c),cr(_,n,c),Sm;hp(S)||Pd(),r=Mm(n,r,o)}else hp(S)?(r.flags|=192,r.child=n.child,r=null):(n=B.treeContext,An=zr(S.nextSibling),Rs=r,Ht=!0,va=null,Ur=!1,n!==null&&H0(r,n),r=Im(r,c.children),r.flags|=4096);return r}return f?(Ta(),S=c.fallback,f=r.mode,B=n.child,ne=B.sibling,c=Vi(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,ne!==null?S=Vi(ne,S):(S=mo(S,f,o,null),S.flags|=2),S.return=r,c.return=r,c.sibling=S,r.child=c,Tc(null,c),c=r.child,S=n.child.memoizedState,S===null?S=Am(o):(f=S.cachePool,f!==null?(B=ds._currentValue,f=f.parent!==B?{parent:B,pool:B}:f):f=Q0(),S={baseLanes:S.baseLanes|o,cachePool:f}),c.memoizedState=S,c.childLanes=Rm(n,_,o),r.memoizedState=Nm,Tc(n.child,c)):(Ea(r),o=n.child,n=o.sibling,o=Vi(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,n!==null&&(_=r.deletions,_===null?(r.deletions=[n],r.flags|=16):_.push(n)),r.child=o,r.memoizedState=null,o)}function Im(n,r){return r=Cd({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Cd(n,r){return n=yr(22,n,null,r),n.lanes=0,n}function Mm(n,r,o){return xo(r,n.child,null,o),n=Im(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function c1(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Kf(n.return,r,o)}function Dm(n,r,o,c,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function u1(n,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var _=rs.current,S=(_&2)!==0;if(S?(_=_&1|2,r.flags|=128):_&=1,we(rs,_),Ms(n,r,c,o),c=Ht?hc:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&c1(n,o,r);else if(n.tag===19)c1(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&gd(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Dm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&gd(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Dm(r,!0,o,null,m,c);break;case"together":Dm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Hi(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Ca|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(ll(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Vi(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Vi(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Lm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&ld(n)))}function kT(n,r,o){switch(r.tag){case 3:et(r,r.stateNode.containerInfo),wa(r,ds,n.memoizedState.cache),po();break;case 27:case 5:Lt(r);break;case 4:et(r,r.stateNode.containerInfo);break;case 10:wa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,am(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ea(r),r.flags|=128,null):(o&r.child.childLanes)!==0?l1(n,r,o):(Ea(r),n=Hi(n,r,o),n!==null?n.sibling:null);Ea(r);break;case 19:var f=(n.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(ll(n,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return u1(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),we(rs,rs.current),c)break;return null;case 22:return r.lanes=0,n1(n,r,o,r.pendingProps);case 24:wa(r,ds,n.memoizedState.cache)}return Hi(n,r,o)}function d1(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)fs=!0;else{if(!Lm(n,o)&&(r.flags&128)===0)return fs=!1,kT(n,r,o);fs=(n.flags&131072)!==0}else fs=!1,Ht&&(r.flags&1048576)!==0&&q0(r,hc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=bo(r.elementType),r.type=n,typeof n=="function")Bf(n)?(c=ko(n,c),r.tag=1,r=a1(null,r,n,c,o)):(r.tag=0,r=Cm(null,r,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===oe){r.tag=11,r=Zv(null,r,n,c,o);break e}else if(f===C){r.tag=14,r=e1(null,r,n,c,o);break e}}throw r=Me(n)||n,Error(i(306,r,""))}}return r;case 0:return Cm(n,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=ko(c,r.pendingProps),a1(n,r,c,f,o);case 3:e:{if(et(r,r.stateNode.containerInfo),n===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,tm(n,r),wc(r,c,null,o);var _=r.memoizedState;if(c=_.cache,wa(r,ds,c),c!==m.cache&&Yf(r,[ds],o,!0),bc(),c=_.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=o1(n,r,c,o);break e}else if(c!==f){f=Or(Error(i(424)),r),fc(f),r=o1(n,r,c,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,An=zr(n.firstChild),Rs=r,Ht=!0,va=null,Ur=!0,o=nv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(po(),c===f){r=Hi(n,r,o);break e}Ms(n,r,c,o)}r=r.child}return r;case 26:return Sd(n,r),n===null?(o=_b(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ht||(o=r.type,n=r.pendingProps,c=Hd(Ee.current).createElement(o),c[Gt]=r,c[En]=n,Ds(c,o,n),Ft(c),r.stateNode=c):r.memoizedState=_b(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Lt(r),n===null&&Ht&&(c=r.stateNode=bb(r.type,r.pendingProps,Ee.current),Rs=r,Ur=!0,f=An,Ma(r.type)?(mp=f,An=zr(c.firstChild)):An=f),Ms(n,r,r.pendingProps.children,o),Sd(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Ht&&((f=c=An)&&(c=ZT(c,r.type,r.pendingProps,Ur),c!==null?(r.stateNode=c,Rs=r,An=zr(c.firstChild),Ur=!1,f=!0):f=!1),f||ba(r)),Lt(r),f=r.type,m=r.pendingProps,_=n!==null?n.memoizedProps:null,c=m.children,cp(f,m)?c=null:_!==null&&cp(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=lm(n,r,mT,null,null,o),Bc._currentValue=f),Sd(n,r),Ms(n,r,c,o),r.child;case 6:return n===null&&Ht&&((n=o=An)&&(o=ej(o,r.pendingProps,Ur),o!==null?(r.stateNode=o,Rs=r,An=null,n=!0):n=!1),n||ba(r)),null;case 13:return l1(n,r,o);case 4:return et(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=xo(r,null,c,o):Ms(n,r,c,o),r.child;case 11:return Zv(n,r,r.type,r.pendingProps,o);case 7:return Ms(n,r,r.pendingProps,o),r.child;case 8:return Ms(n,r,r.pendingProps.children,o),r.child;case 12:return Ms(n,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,wa(r,r.type,c.value),Ms(n,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,yo(r),f=Is(f),c=c(f),r.flags|=1,Ms(n,r,c,o),r.child;case 14:return e1(n,r,r.type,r.pendingProps,o);case 15:return t1(n,r,r.type,r.pendingProps,o);case 19:return u1(n,r,o);case 31:return _T(n,r,o);case 22:return n1(n,r,o,r.pendingProps);case 24:return yo(r),c=Is(ds),n===null?(f=Jf(),f===null&&(f=xn,m=Qf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},em(r),wa(r,ds,f)):((n.lanes&o)!==0&&(tm(n,r),wc(r,null,null,o),bc()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),wa(r,ds,c)):(c=m.cache,wa(r,ds,c),c!==f.cache&&Yf(r,[ds],o,!0))),Ms(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function $i(n){n.flags|=4}function Om(n,r,o,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(V1())n.flags|=8192;else throw wo=hd,Zf}else n.flags&=-16777217}function h1(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Sb(r))if(V1())n.flags|=8192;else throw wo=hd,Zf}function Nd(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?le():536870912,n.lanes|=r,wl|=r)}function jc(n,r){if(!Ht)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Rn(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function ET(n,r,o){var c=r.pendingProps;switch(Hf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(r),null;case 1:return Rn(r),null;case 3:return o=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),zi(ds),Oe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ol(r)?$i(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wf())),Rn(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?($i(r),m!==null?(Rn(r),h1(r,m)):(Rn(r),Om(r,f,null,c,o))):m?m!==n.memoizedState?($i(r),Rn(r),h1(r,m)):(Rn(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&$i(r),Rn(r),Om(r,f,n,c,o)),null;case 27:if(Xt(r),o=Ee.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&$i(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Rn(r),null}n=ke.current,ol(r)?$0(r):(n=bb(f,c,o),r.stateNode=n,$i(r))}return Rn(r),null;case 5:if(Xt(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&$i(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Rn(r),null}if(m=ke.current,ol(r))$0(r);else{var _=Hd(Ee.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?_.createElement(f,{is:c.is}):_.createElement(f)}}m[Gt]=r,m[En]=c;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=m;e:switch(Ds(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&$i(r)}}return Rn(r),Om(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&$i(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=Ee.current,ol(r)){if(n=r.stateNode,o=r.memoizedProps,c=null,f=Rs,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Gt]=r,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||lb(n.nodeValue,o)),n||ba(r,!0)}else n=Hd(n).createTextNode(c),n[Gt]=r,r.stateNode=n}return Rn(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(c=ol(r),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Gt]=r}else po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Rn(r),n=!1}else o=Wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(br(r),r):(br(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Rn(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ol(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Gt]=r}else po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Rn(r),f=!1}else f=Wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(br(r),r):(br(r),null)}return br(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),Nd(r,r.updateQueue),Rn(r),null);case 4:return Oe(),n===null&&rp(r.stateNode.containerInfo),Rn(r),null;case 10:return zi(r.type),Rn(r),null;case 19:if(re(rs),c=r.memoizedState,c===null)return Rn(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)jc(c,!1);else{if(Qn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=gd(n),m!==null){for(r.flags|=128,jc(c,!1),n=m.updateQueue,r.updateQueue=n,Nd(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)B0(o,n),o=o.sibling;return we(rs,rs.current&1|2),Ht&&Ui(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&pt()>Dd&&(r.flags|=128,f=!0,jc(c,!1),r.lanes=4194304)}else{if(!f)if(n=gd(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Nd(r,n),jc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Ht)return Rn(r),null}else 2*pt()-c.renderingStartTime>Dd&&o!==536870912&&(r.flags|=128,f=!0,jc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(n=c.last,n!==null?n.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=pt(),n.sibling=null,o=rs.current,we(rs,f?o&1|2:o&1),Ht&&Ui(r,c.treeForkCount),n):(Rn(r),null);case 22:case 23:return br(r),im(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Rn(r),r.subtreeFlags&6&&(r.flags|=8192)):Rn(r),o=r.updateQueue,o!==null&&Nd(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),n!==null&&re(vo),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),zi(ds),Rn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function TT(n,r){switch(Hf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return zi(ds),Oe(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Xt(r),null;case 31:if(r.memoizedState!==null){if(br(r),r.alternate===null)throw Error(i(340));po()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(br(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));po()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return re(rs),null;case 4:return Oe(),null;case 10:return zi(r.type),null;case 22:case 23:return br(r),im(),n!==null&&re(vo),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return zi(ds),null;case 25:return null;default:return null}}function f1(n,r){switch(Hf(r),r.tag){case 3:zi(ds),Oe();break;case 26:case 27:case 5:Xt(r);break;case 4:Oe();break;case 31:r.memoizedState!==null&&br(r);break;case 13:br(r);break;case 19:re(rs);break;case 10:zi(r.type);break;case 22:case 23:br(r),im(),n!==null&&re(vo);break;case 24:zi(ds)}}function Sc(n,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var m=o.create,_=o.inst;c=m(),_.destroy=c}o=o.next}while(o!==f)}}catch(S){fn(r,r.return,S)}}function ja(n,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var _=c.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,f=r;var B=o,ne=S;try{ne()}catch(me){fn(f,B,me)}}}c=c.next}while(c!==m)}}catch(me){fn(r,r.return,me)}}function m1(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{rv(r,o)}catch(c){fn(n,n.return,c)}}}function p1(n,r,o){o.props=ko(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){fn(n,r,c)}}function Cc(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){fn(n,r,f)}}function wi(n,r){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){fn(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){fn(n,r,f)}else o.current=null}function g1(n){var r=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){fn(n,n.return,f)}}function Pm(n,r,o){try{var c=n.stateNode;GT(c,n.type,o,r),c[En]=r}catch(f){fn(n,n.return,f)}}function y1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ma(n.type)||n.tag===4}function Vm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||y1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ma(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Um(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ns));else if(c!==4&&(c===27&&Ma(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Um(n,r,o),n=n.sibling;n!==null;)Um(n,r,o),n=n.sibling}function Ad(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&(c===27&&Ma(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Ad(n,r,o),n=n.sibling;n!==null;)Ad(n,r,o),n=n.sibling}function v1(n){var r=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Ds(r,c,o),r[Gt]=n,r[En]=o}catch(m){fn(n,n.return,m)}}var Wi=!1,ms=!1,Bm=!1,b1=typeof WeakSet=="function"?WeakSet:Set,ks=null;function jT(n,r){if(n=n.containerInfo,op=Xd,n=R0(n),Mf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,S=-1,B=-1,ne=0,me=0,_e=n,ae=null;t:for(;;){for(var he;_e!==o||f!==0&&_e.nodeType!==3||(S=_+f),_e!==m||c!==0&&_e.nodeType!==3||(B=_+c),_e.nodeType===3&&(_+=_e.nodeValue.length),(he=_e.firstChild)!==null;)ae=_e,_e=he;for(;;){if(_e===n)break t;if(ae===o&&++ne===f&&(S=_),ae===m&&++me===c&&(B=_),(he=_e.nextSibling)!==null)break;_e=ae,ae=_e.parentNode}_e=he}o=S===-1||B===-1?null:{start:S,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(lp={focusedElem:n,selectionRange:o},Xd=!1,ks=r;ks!==null;)if(r=ks,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ks=n;else for(;ks!==null;){switch(r=ks,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var Qe=ko(o.type,f);n=c.getSnapshotBeforeUpdate(Qe,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(ut){fn(o,o.return,ut)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)dp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":dp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,ks=n;break}ks=r.return}}function w1(n,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ki(n,o),c&4&&Sc(5,o);break;case 1:if(Ki(n,o),c&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(_){fn(o,o.return,_)}else{var f=ko(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(_){fn(o,o.return,_)}}c&64&&m1(o),c&512&&Cc(o,o.return);break;case 3:if(Ki(n,o),c&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{rv(n,r)}catch(_){fn(o,o.return,_)}}break;case 27:r===null&&c&4&&v1(o);case 26:case 5:Ki(n,o),r===null&&c&4&&g1(o),c&512&&Cc(o,o.return);break;case 12:Ki(n,o);break;case 31:Ki(n,o),c&4&&k1(n,o);break;case 13:Ki(n,o),c&4&&E1(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=LT.bind(null,o),tj(n,o))));break;case 22:if(c=o.memoizedState!==null||Wi,!c){r=r!==null&&r.memoizedState!==null||ms,f=Wi;var m=ms;Wi=c,(ms=r)&&!m?Yi(n,o,(o.subtreeFlags&8772)!==0):Ki(n,o),Wi=f,ms=m}break;case 30:break;default:Ki(n,o)}}function x1(n){var r=n.alternate;r!==null&&(n.alternate=null,x1(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Gs(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Un=null,ir=!1;function Gi(n,r,o){for(o=o.child;o!==null;)_1(n,r,o),o=o.sibling}function _1(n,r,o){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(st,o)}catch{}switch(o.tag){case 26:ms||wi(o,r),Gi(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ms||wi(o,r);var c=Un,f=ir;Ma(o.type)&&(Un=o.stateNode,ir=!1),Gi(n,r,o),Pc(o.stateNode),Un=c,ir=f;break;case 5:ms||wi(o,r);case 6:if(c=Un,f=ir,Un=null,Gi(n,r,o),Un=c,ir=f,Un!==null)if(ir)try{(Un.nodeType===9?Un.body:Un.nodeName==="HTML"?Un.ownerDocument.body:Un).removeChild(o.stateNode)}catch(m){fn(o,r,m)}else try{Un.removeChild(o.stateNode)}catch(m){fn(o,r,m)}break;case 18:Un!==null&&(ir?(n=Un,mb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Cl(n)):mb(Un,o.stateNode));break;case 4:c=Un,f=ir,Un=o.stateNode.containerInfo,ir=!0,Gi(n,r,o),Un=c,ir=f;break;case 0:case 11:case 14:case 15:ja(2,o,r),ms||ja(4,o,r),Gi(n,r,o);break;case 1:ms||(wi(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&p1(o,r,c)),Gi(n,r,o);break;case 21:Gi(n,r,o);break;case 22:ms=(c=ms)||o.memoizedState!==null,Gi(n,r,o),ms=c;break;default:Gi(n,r,o)}}function k1(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Cl(n)}catch(o){fn(r,r.return,o)}}}function E1(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Cl(n)}catch(o){fn(r,r.return,o)}}function ST(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new b1),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new b1),r;default:throw Error(i(435,n.tag))}}function Rd(n,r){var o=ST(n);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=OT.bind(null,n,c);c.then(f,f)}})}function ar(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=n,_=r,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(Ma(S.type)){Un=S.stateNode,ir=!1;break e}break;case 5:Un=S.stateNode,ir=!1;break e;case 3:case 4:Un=S.stateNode.containerInfo,ir=!0;break e}S=S.return}if(Un===null)throw Error(i(160));_1(m,_,f),Un=null,ir=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)T1(r,n),r=r.sibling}var ti=null;function T1(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ar(r,n),or(n),c&4&&(ja(3,n,n.return),Sc(3,n),ja(5,n,n.return));break;case 1:ar(r,n),or(n),c&512&&(ms||o===null||wi(o,o.return)),c&64&&Wi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=ti;if(ar(r,n),or(n),c&512&&(ms||o===null||wi(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[$n]||m[Gt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Ds(m,c,o),m[Gt]=n,Ft(m),c=m;break e;case"link":var _=Tb("link","href",f).get(c+(o.href||""));if(_){for(var S=0;S<_.length;S++)if(m=_[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(S,1);break t}}m=f.createElement(c),Ds(m,c,o),f.head.appendChild(m);break;case"meta":if(_=Tb("meta","content",f).get(c+(o.content||""))){for(S=0;S<_.length;S++)if(m=_[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(S,1);break t}}m=f.createElement(c),Ds(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[Gt]=n,Ft(m),c=m}n.stateNode=c}else jb(f,n.type,n.stateNode);else n.stateNode=Eb(f,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?jb(f,n.type,n.stateNode):Eb(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Pm(n,n.memoizedProps,o.memoizedProps)}break;case 27:ar(r,n),or(n),c&512&&(ms||o===null||wi(o,o.return)),o!==null&&c&4&&Pm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(ar(r,n),or(n),c&512&&(ms||o===null||wi(o,o.return)),n.flags&32){f=n.stateNode;try{xs(f,"")}catch(Qe){fn(n,n.return,Qe)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Pm(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Bm=!0);break;case 6:if(ar(r,n),or(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Qe){fn(n,n.return,Qe)}}break;case 3:if(Gd=null,f=ti,ti=$d(r.containerInfo),ar(r,n),ti=f,or(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Cl(r.containerInfo)}catch(Qe){fn(n,n.return,Qe)}Bm&&(Bm=!1,j1(n));break;case 4:c=ti,ti=$d(n.stateNode.containerInfo),ar(r,n),or(n),ti=c;break;case 12:ar(r,n),or(n);break;case 31:ar(r,n),or(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Rd(n,c)));break;case 13:ar(r,n),or(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Md=pt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Rd(n,c)));break;case 22:f=n.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,ne=Wi,me=ms;if(Wi=ne||f,ms=me||B,ar(r,n),ms=me,Wi=ne,or(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||B||Wi||ms||Eo(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){B=o=r;try{if(m=B.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=B.stateNode;var _e=B.memoizedProps.style,ae=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;S.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Qe){fn(B,B.return,Qe)}}}else if(r.tag===6){if(o===null){B=r;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(Qe){fn(B,B.return,Qe)}}}else if(r.tag===18){if(o===null){B=r;try{var he=B.stateNode;f?pb(he,!0):pb(B.stateNode,!1)}catch(Qe){fn(B,B.return,Qe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Rd(n,o))));break;case 19:ar(r,n),or(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Rd(n,c)));break;case 30:break;case 21:break;default:ar(r,n),or(n)}}function or(n){var r=n.flags;if(r&2){try{for(var o,c=n.return;c!==null;){if(y1(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Vm(n);Ad(n,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(xs(_,""),o.flags&=-33);var S=Vm(n);Ad(n,S,_);break;case 3:case 4:var B=o.stateNode.containerInfo,ne=Vm(n);Um(n,ne,B);break;default:throw Error(i(161))}}catch(me){fn(n,n.return,me)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function j1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;j1(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Ki(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)w1(n,r.alternate,r),r=r.sibling}function Eo(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:ja(4,r,r.return),Eo(r);break;case 1:wi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&p1(r,r.return,o),Eo(r);break;case 27:Pc(r.stateNode);case 26:case 5:wi(r,r.return),Eo(r);break;case 22:r.memoizedState===null&&Eo(r);break;case 30:Eo(r);break;default:Eo(r)}n=n.sibling}}function Yi(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,_=m.flags;switch(m.tag){case 0:case 11:case 15:Yi(f,m,o),Sc(4,m);break;case 1:if(Yi(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ne){fn(c,c.return,ne)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)sv(B[f],S)}catch(ne){fn(c,c.return,ne)}}o&&_&64&&m1(m),Cc(m,m.return);break;case 27:v1(m);case 26:case 5:Yi(f,m,o),o&&c===null&&_&4&&g1(m),Cc(m,m.return);break;case 12:Yi(f,m,o);break;case 31:Yi(f,m,o),o&&_&4&&k1(f,m);break;case 13:Yi(f,m,o),o&&_&4&&E1(f,m);break;case 22:m.memoizedState===null&&Yi(f,m,o),Cc(m,m.return);break;case 30:break;default:Yi(f,m,o)}r=r.sibling}}function zm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&mc(o))}function Fm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&mc(n))}function ni(n,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)S1(n,r,o,c),r=r.sibling}function S1(n,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ni(n,r,o,c),f&2048&&Sc(9,r);break;case 1:ni(n,r,o,c);break;case 3:ni(n,r,o,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&mc(n)));break;case 12:if(f&2048){ni(n,r,o,c),n=r.stateNode;try{var m=r.memoizedProps,_=m.id,S=m.onPostCommit;typeof S=="function"&&S(_,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(B){fn(r,r.return,B)}}else ni(n,r,o,c);break;case 31:ni(n,r,o,c);break;case 13:ni(n,r,o,c);break;case 23:break;case 22:m=r.stateNode,_=r.alternate,r.memoizedState!==null?m._visibility&2?ni(n,r,o,c):Nc(n,r):m._visibility&2?ni(n,r,o,c):(m._visibility|=2,yl(n,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&zm(_,r);break;case 24:ni(n,r,o,c),f&2048&&Fm(r.alternate,r);break;default:ni(n,r,o,c)}}function yl(n,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,_=r,S=o,B=c,ne=_.flags;switch(_.tag){case 0:case 11:case 15:yl(m,_,S,B,f),Sc(8,_);break;case 23:break;case 22:var me=_.stateNode;_.memoizedState!==null?me._visibility&2?yl(m,_,S,B,f):Nc(m,_):(me._visibility|=2,yl(m,_,S,B,f)),f&&ne&2048&&zm(_.alternate,_);break;case 24:yl(m,_,S,B,f),f&&ne&2048&&Fm(_.alternate,_);break;default:yl(m,_,S,B,f)}r=r.sibling}}function Nc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,c=r,f=c.flags;switch(c.tag){case 22:Nc(o,c),f&2048&&zm(c.alternate,c);break;case 24:Nc(o,c),f&2048&&Fm(c.alternate,c);break;default:Nc(o,c)}r=r.sibling}}var Ac=8192;function vl(n,r,o){if(n.subtreeFlags&Ac)for(n=n.child;n!==null;)C1(n,r,o),n=n.sibling}function C1(n,r,o){switch(n.tag){case 26:vl(n,r,o),n.flags&Ac&&n.memoizedState!==null&&fj(o,ti,n.memoizedState,n.memoizedProps);break;case 5:vl(n,r,o);break;case 3:case 4:var c=ti;ti=$d(n.stateNode.containerInfo),vl(n,r,o),ti=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Ac,Ac=16777216,vl(n,r,o),Ac=c):vl(n,r,o));break;default:vl(n,r,o)}}function N1(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Rc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];ks=c,R1(c,n)}N1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)A1(n),n=n.sibling}function A1(n){switch(n.tag){case 0:case 11:case 15:Rc(n),n.flags&2048&&ja(9,n,n.return);break;case 3:Rc(n);break;case 12:Rc(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Id(n)):Rc(n);break;default:Rc(n)}}function Id(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];ks=c,R1(c,n)}N1(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:ja(8,r,r.return),Id(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Id(r));break;default:Id(r)}n=n.sibling}}function R1(n,r){for(;ks!==null;){var o=ks;switch(o.tag){case 0:case 11:case 15:ja(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:mc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,ks=c;else e:for(o=n;ks!==null;){c=ks;var f=c.sibling,m=c.return;if(x1(c),c===o){ks=null;break e}if(f!==null){f.return=m,ks=f;break e}ks=m}}}var CT={getCacheForType:function(n){var r=Is(ds),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return Is(ds).controller.signal}},NT=typeof WeakMap=="function"?WeakMap:Map,on=0,xn=null,Mt=null,Ot=0,hn=0,wr=null,Sa=!1,bl=!1,qm=!1,Qi=0,Qn=0,Ca=0,To=0,Hm=0,xr=0,wl=0,Ic=null,lr=null,$m=!1,Md=0,I1=0,Dd=1/0,Ld=null,Na=null,bs=0,Aa=null,xl=null,Xi=0,Wm=0,Gm=null,M1=null,Mc=0,Km=null;function _r(){return(on&2)!==0&&Ot!==0?Ot&-Ot:ee.T!==null?ep():Ss()}function D1(){if(xr===0)if((Ot&536870912)===0||Ht){var n=Hn;Hn<<=1,(Hn&3932160)===0&&(Hn=262144),xr=n}else xr=536870912;return n=vr.current,n!==null&&(n.flags|=32),xr}function cr(n,r,o){(n===xn&&(hn===2||hn===9)||n.cancelPendingCommit!==null)&&(_l(n,0),Ra(n,Ot,xr,!1)),Ge(n,o),((on&2)===0||n!==xn)&&(n===xn&&((on&2)===0&&(To|=o),Qn===4&&Ra(n,Ot,xr,!1)),xi(n))}function L1(n,r,o){if((on&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&n.expiredLanes)===0||sn(n,r),f=c?IT(n,r):Qm(n,r,!0),m=c;do{if(f===0){bl&&!c&&Ra(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!AT(o)){f=Qm(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var S=n;f=Ic;var B=S.current.memoizedState.isDehydrated;if(B&&(_l(S,_).flags|=256),_=Qm(S,_,!1),_!==2){if(qm&&!B){S.errorRecoveryDisabledLanes|=m,To|=m,f=4;break e}m=lr,lr=f,m!==null&&(lr===null?lr=m:lr.push.apply(lr,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){_l(n,0),Ra(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ra(c,r,xr,!Sa);break e;case 2:lr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Md+300-pt(),10<f)){if(Ra(c,r,xr,!Sa),_n(c,0,!0)!==0)break e;Xi=r,c.timeoutHandle=hb(O1.bind(null,c,o,lr,Ld,$m,r,xr,To,wl,Sa,m,"Throttled",-0,0),f);break e}O1(c,o,lr,Ld,$m,r,xr,To,wl,Sa,m,null,-0,0)}}break}while(!0);xi(n)}function O1(n,r,o,c,f,m,_,S,B,ne,me,_e,ae,he){if(n.timeoutHandle=-1,_e=r.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ns},C1(r,m,_e);var Qe=(m&62914560)===m?Md-pt():(m&4194048)===m?I1-pt():0;if(Qe=mj(_e,Qe),Qe!==null){Xi=m,n.cancelPendingCommit=Qe(H1.bind(null,n,r,m,o,c,f,_,S,B,me,_e,null,ae,he)),Ra(n,m,_,!ne);return}}H1(n,r,m,o,c,f,_,S,B)}function AT(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!gr(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ra(n,r,o,c){r&=~Hm,r&=~To,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-Fe(f),_=1<<m;c[m]=-1,f&=~_}o!==0&&at(n,o,r)}function Od(){return(on&6)===0?(Dc(0),!1):!0}function Ym(){if(Mt!==null){if(hn===0)var n=Mt.return;else n=Mt,Bi=go=null,dm(n),hl=null,gc=0,n=Mt;for(;n!==null;)f1(n.alternate,n),n=n.return;Mt=null}}function _l(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,QT(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Xi=0,Ym(),xn=n,Mt=o=Vi(n.current,null),Ot=r,hn=0,wr=null,Sa=!1,bl=sn(n,r),qm=!1,wl=xr=Hm=To=Ca=Qn=0,lr=Ic=null,$m=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-Fe(c),m=1<<f;r|=n[f],c&=~m}return Qi=r,sd(),o}function P1(n,r){St=null,ee.H=Ec,r===dl||r===dd?(r=Z0(),hn=3):r===Zf?(r=Z0(),hn=4):hn=r===Sm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,wr=r,Mt===null&&(Qn=1,Td(n,Or(r,n.current)))}function V1(){var n=vr.current;return n===null?!0:(Ot&4194048)===Ot?Br===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?n===Br:!1}function U1(){var n=ee.H;return ee.H=Ec,n===null?Ec:n}function B1(){var n=ee.A;return ee.A=CT,n}function Pd(){Qn=4,Sa||(Ot&4194048)!==Ot&&vr.current!==null||(bl=!0),(Ca&134217727)===0&&(To&134217727)===0||xn===null||Ra(xn,Ot,xr,!1)}function Qm(n,r,o){var c=on;on|=2;var f=U1(),m=B1();(xn!==n||Ot!==r)&&(Ld=null,_l(n,r)),r=!1;var _=Qn;e:do try{if(hn!==0&&Mt!==null){var S=Mt,B=wr;switch(hn){case 8:Ym(),_=6;break e;case 3:case 2:case 9:case 6:vr.current===null&&(r=!0);var ne=hn;if(hn=0,wr=null,kl(n,S,B,ne),o&&bl){_=0;break e}break;default:ne=hn,hn=0,wr=null,kl(n,S,B,ne)}}RT(),_=Qn;break}catch(me){P1(n,me)}while(!0);return r&&n.shellSuspendCounter++,Bi=go=null,on=c,ee.H=f,ee.A=m,Mt===null&&(xn=null,Ot=0,sd()),_}function RT(){for(;Mt!==null;)z1(Mt)}function IT(n,r){var o=on;on|=2;var c=U1(),f=B1();xn!==n||Ot!==r?(Ld=null,Dd=pt()+500,_l(n,r)):bl=sn(n,r);e:do try{if(hn!==0&&Mt!==null){r=Mt;var m=wr;t:switch(hn){case 1:hn=0,wr=null,kl(n,r,m,1);break;case 2:case 9:if(X0(m)){hn=0,wr=null,F1(r);break}r=function(){hn!==2&&hn!==9||xn!==n||(hn=7),xi(n)},m.then(r,r);break e;case 3:hn=7;break e;case 4:hn=5;break e;case 7:X0(m)?(hn=0,wr=null,F1(r)):(hn=0,wr=null,kl(n,r,m,7));break;case 5:var _=null;switch(Mt.tag){case 26:_=Mt.memoizedState;case 5:case 27:var S=Mt;if(_?Sb(_):S.stateNode.complete){hn=0,wr=null;var B=S.sibling;if(B!==null)Mt=B;else{var ne=S.return;ne!==null?(Mt=ne,Vd(ne)):Mt=null}break t}}hn=0,wr=null,kl(n,r,m,5);break;case 6:hn=0,wr=null,kl(n,r,m,6);break;case 8:Ym(),Qn=6;break e;default:throw Error(i(462))}}MT();break}catch(me){P1(n,me)}while(!0);return Bi=go=null,ee.H=c,ee.A=f,on=o,Mt!==null?0:(xn=null,Ot=0,sd(),Qn)}function MT(){for(;Mt!==null&&!Xe();)z1(Mt)}function z1(n){var r=d1(n.alternate,n,Qi);n.memoizedProps=n.pendingProps,r===null?Vd(n):Mt=r}function F1(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=i1(o,r,r.pendingProps,r.type,void 0,Ot);break;case 11:r=i1(o,r,r.pendingProps,r.type.render,r.ref,Ot);break;case 5:dm(r);default:f1(o,r),r=Mt=B0(r,Qi),r=d1(o,r,Qi)}n.memoizedProps=n.pendingProps,r===null?Vd(n):Mt=r}function kl(n,r,o,c){Bi=go=null,dm(r),hl=null,gc=0;var f=r.return;try{if(xT(n,f,r,o,Ot)){Qn=1,Td(n,Or(o,n.current)),Mt=null;return}}catch(m){if(f!==null)throw Mt=f,m;Qn=1,Td(n,Or(o,n.current)),Mt=null;return}r.flags&32768?(Ht||c===1?n=!0:bl||(Ot&536870912)!==0?n=!1:(Sa=n=!0,(c===2||c===9||c===3||c===6)&&(c=vr.current,c!==null&&c.tag===13&&(c.flags|=16384))),q1(r,n)):Vd(r)}function Vd(n){var r=n;do{if((r.flags&32768)!==0){q1(r,Sa);return}n=r.return;var o=ET(r.alternate,r,Qi);if(o!==null){Mt=o;return}if(r=r.sibling,r!==null){Mt=r;return}Mt=r=n}while(r!==null);Qn===0&&(Qn=5)}function q1(n,r){do{var o=TT(n.alternate,n);if(o!==null){o.flags&=32767,Mt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Mt=n;return}Mt=n=o}while(n!==null);Qn=6,Mt=null}function H1(n,r,o,c,f,m,_,S,B){n.cancelPendingCommit=null;do Ud();while(bs!==0);if((on&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Vf,ct(n,o,m,_,S,B),n===xn&&(Mt=xn=null,Ot=0),xl=r,Aa=n,Xi=o,Wm=m,Gm=f,M1=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,PT(Wt,function(){return Y1(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null,f=Se.p,Se.p=2,_=on,on|=4;try{jT(n,r,o)}finally{on=_,Se.p=f,ee.T=c}}bs=1,$1(),W1(),G1()}}function $1(){if(bs===1){bs=0;var n=Aa,r=xl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=ee.T,ee.T=null;var c=Se.p;Se.p=2;var f=on;on|=4;try{T1(r,n);var m=lp,_=R0(n.containerInfo),S=m.focusedElem,B=m.selectionRange;if(_!==S&&S&&S.ownerDocument&&A0(S.ownerDocument.documentElement,S)){if(B!==null&&Mf(S)){var ne=B.start,me=B.end;if(me===void 0&&(me=ne),"selectionStart"in S)S.selectionStart=ne,S.selectionEnd=Math.min(me,S.value.length);else{var _e=S.ownerDocument||document,ae=_e&&_e.defaultView||window;if(ae.getSelection){var he=ae.getSelection(),Qe=S.textContent.length,ut=Math.min(B.start,Qe),bn=B.end===void 0?ut:Math.min(B.end,Qe);!he.extend&&ut>bn&&(_=bn,bn=ut,ut=_);var Y=N0(S,ut),H=N0(S,bn);if(Y&&H&&(he.rangeCount!==1||he.anchorNode!==Y.node||he.anchorOffset!==Y.offset||he.focusNode!==H.node||he.focusOffset!==H.offset)){var te=_e.createRange();te.setStart(Y.node,Y.offset),he.removeAllRanges(),ut>bn?(he.addRange(te),he.extend(H.node,H.offset)):(te.setEnd(H.node,H.offset),he.addRange(te))}}}}for(_e=[],he=S;he=he.parentNode;)he.nodeType===1&&_e.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<_e.length;S++){var ye=_e[S];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Xd=!!op,lp=op=null}finally{on=f,Se.p=c,ee.T=o}}n.current=r,bs=2}}function W1(){if(bs===2){bs=0;var n=Aa,r=xl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=ee.T,ee.T=null;var c=Se.p;Se.p=2;var f=on;on|=4;try{w1(n,r.alternate,r)}finally{on=f,Se.p=c,ee.T=o}}bs=3}}function G1(){if(bs===4||bs===3){bs=0,Et();var n=Aa,r=xl,o=Xi,c=M1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?bs=5:(bs=0,xl=Aa=null,K1(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Na=null),pn(o),r=r.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(st,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=ee.T,f=Se.p,Se.p=2,ee.T=null;try{for(var m=n.onRecoverableError,_=0;_<c.length;_++){var S=c[_];m(S.value,{componentStack:S.stack})}}finally{ee.T=r,Se.p=f}}(Xi&3)!==0&&Ud(),xi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Km?Mc++:(Mc=0,Km=n):Mc=0,Dc(0)}}function K1(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,mc(r)))}function Ud(){return $1(),W1(),G1(),Y1()}function Y1(){if(bs!==5)return!1;var n=Aa,r=Wm;Wm=0;var o=pn(Xi),c=ee.T,f=Se.p;try{Se.p=32>o?32:o,ee.T=null,o=Gm,Gm=null;var m=Aa,_=Xi;if(bs=0,xl=Aa=null,Xi=0,(on&6)!==0)throw Error(i(331));var S=on;if(on|=4,A1(m.current),S1(m,m.current,_,o),on=S,Dc(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(st,m)}catch{}return!0}finally{Se.p=f,ee.T=c,K1(n,r)}}function Q1(n,r,o){r=Or(o,r),r=jm(n.stateNode,r,2),n=ka(n,r,2),n!==null&&(Ge(n,2),xi(n))}function fn(n,r,o){if(n.tag===3)Q1(n,n,o);else for(;r!==null;){if(r.tag===3){Q1(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Na===null||!Na.has(c))){n=Or(o,n),o=Xv(2),c=ka(r,o,2),c!==null&&(Jv(o,c,r,n),Ge(c,2),xi(c));break}}r=r.return}}function Xm(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new NT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(qm=!0,f.add(o),n=DT.bind(null,n,r,o),r.then(n,n))}function DT(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,xn===n&&(Ot&o)===o&&(Qn===4||Qn===3&&(Ot&62914560)===Ot&&300>pt()-Md?(on&2)===0&&_l(n,0):Hm|=o,wl===Ot&&(wl=0)),xi(n)}function X1(n,r){r===0&&(r=le()),n=fo(n,r),n!==null&&(Ge(n,r),xi(n))}function LT(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),X1(n,o)}function OT(n,r){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),X1(n,o)}function PT(n,r){return mt(n,r)}var Bd=null,El=null,Jm=!1,zd=!1,Zm=!1,Ia=0;function xi(n){n!==El&&n.next===null&&(El===null?Bd=El=n:El=El.next=n),zd=!0,Jm||(Jm=!0,UT())}function Dc(n,r){if(!Zm&&zd){Zm=!0;do for(var o=!1,c=Bd;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var _=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-Fe(42|n)+1)-1,m&=f&~(_&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,tb(c,m))}else m=Ot,m=_n(c,c===xn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||sn(c,m)||(o=!0,tb(c,m));c=c.next}while(o);Zm=!1}}function VT(){J1()}function J1(){zd=Jm=!1;var n=0;Ia!==0&&YT()&&(n=Ia);for(var r=pt(),o=null,c=Bd;c!==null;){var f=c.next,m=Z1(c,r);m===0?(c.next=null,o===null?Bd=f:o.next=f,f===null&&(El=o)):(o=c,(n!==0||(m&3)!==0)&&(zd=!0)),c=f}bs!==0&&bs!==5||Dc(n),Ia!==0&&(Ia=0)}function Z1(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-Fe(m),S=1<<_,B=f[_];B===-1?((S&o)===0||(S&c)!==0)&&(f[_]=fr(S,r)):B<=r&&(n.expiredLanes|=S),m&=~S}if(r=xn,o=Ot,o=_n(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===r&&(hn===2||hn===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&It(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||sn(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(c!==null&&It(c),pn(o)){case 2:case 8:o=es;break;case 32:o=Wt;break;case 268435456:o=Ne;break;default:o=Wt}return c=eb.bind(null,n),o=mt(o,c),n.callbackPriority=r,n.callbackNode=o,r}return c!==null&&c!==null&&It(c),n.callbackPriority=2,n.callbackNode=null,2}function eb(n,r){if(bs!==0&&bs!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ud()&&n.callbackNode!==o)return null;var c=Ot;return c=_n(n,n===xn?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(L1(n,c,r),Z1(n,pt()),n.callbackNode!=null&&n.callbackNode===o?eb.bind(null,n):null)}function tb(n,r){if(Ud())return null;L1(n,r,!0)}function UT(){XT(function(){(on&6)!==0?mt(js,VT):J1()})}function ep(){if(Ia===0){var n=cl;n===0&&(n=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),Ia=n}return Ia}function nb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:mi(""+n)}function sb(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function BT(n,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=nb((f[En]||null).action),_=c.submitter;_&&(r=(r=_[En]||null)?nb(r.formAction):_.getAttribute("formAction"),r!==null&&(m=r,_=null));var S=new Kn("action","action",null,c,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ia!==0){var B=_?sb(f,_):new FormData(f);wm(o,{pending:!0,data:B,method:f.method,action:m},null,B)}}else typeof m=="function"&&(S.preventDefault(),B=_?sb(f,_):new FormData(f),wm(o,{pending:!0,data:B,method:f.method,action:m},m,B))},currentTarget:f}]})}}for(var tp=0;tp<Pf.length;tp++){var np=Pf[tp],zT=np.toLowerCase(),FT=np[0].toUpperCase()+np.slice(1);ei(zT,"on"+FT)}ei(D0,"onAnimationEnd"),ei(L0,"onAnimationIteration"),ei(O0,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(rT,"onTransitionRun"),ei(iT,"onTransitionStart"),ei(aT,"onTransitionCancel"),ei(P0,"onTransitionEnd"),Cn("onMouseEnter",["mouseout","mouseover"]),Cn("onMouseLeave",["mouseout","mouseover"]),Cn("onPointerEnter",["pointerout","pointerover"]),Cn("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function rb(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var _=c.length-1;0<=_;_--){var S=c[_],B=S.instance,ne=S.currentTarget;if(S=S.listener,B!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ne;try{m(f)}catch(me){nd(me)}f.currentTarget=null,m=B}else for(_=0;_<c.length;_++){if(S=c[_],B=S.instance,ne=S.currentTarget,S=S.listener,B!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ne;try{m(f)}catch(me){nd(me)}f.currentTarget=null,m=B}}}}function Dt(n,r){var o=r[Nr];o===void 0&&(o=r[Nr]=new Set);var c=n+"__bubble";o.has(c)||(ib(r,n,2,!1),o.add(c))}function sp(n,r,o){var c=0;r&&(c|=4),ib(o,n,c,r)}var Fd="_reactListening"+Math.random().toString(36).slice(2);function rp(n){if(!n[Fd]){n[Fd]=!0,Kr.forEach(function(o){o!=="selectionchange"&&(qT.has(o)||sp(o,!1,n),sp(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Fd]||(r[Fd]=!0,sp("selectionchange",!1,r))}}function ib(n,r,o,c){switch(Db(r)){case 2:var f=yj;break;case 8:f=vj;break;default:f=bp}o=f.bind(null,r,o,n),f=void 0,!Je||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function ip(n,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var S=c.stateNode.containerInfo;if(S===f)break;if(_===4)for(_=c.return;_!==null;){var B=_.tag;if((B===3||B===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;S!==null;){if(_=ls(S),_===null)return;if(B=_.tag,B===5||B===6||B===26||B===27){c=m=_;continue e}S=S.parentNode}}c=c.return}fe(function(){var ne=m,me=N(o),_e=[];e:{var ae=V0.get(n);if(ae!==void 0){var he=Kn,Qe=n;switch(n){case"keypress":if(dn(o)===0)break e;case"keydown":case"keyup":he=Zu;break;case"focusin":Qe="focus",he=lo;break;case"focusout":Qe="blur",he=lo;break;case"beforeblur":case"afterblur":he=lo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=v;break;case D0:case L0:case O0:he=Wu;break;case P0:he=A;break;case"scroll":case"scrollend":he=Qs;break;case"wheel":he=ce;break;case"copy":case"cut":case"paste":he=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Pi;break;case"toggle":case"beforetoggle":he=jt}var ut=(r&4)!==0,bn=!ut&&(n==="scroll"||n==="scrollend"),Y=ut?ae!==null?ae+"Capture":null:ae;ut=[];for(var H=ne,te;H!==null;){var ye=H;if(te=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||te===null||Y===null||(ye=Ae(H,Y),ye!=null&&ut.push(Oc(H,ye,te))),bn)break;H=H.return}0<ut.length&&(ae=new he(ae,Qe,null,o,me),_e.push({event:ae,listeners:ut}))}}if((r&7)===0){e:{if(ae=n==="mouseover"||n==="pointerover",he=n==="mouseout"||n==="pointerout",ae&&o!==w&&(Qe=o.relatedTarget||o.fromElement)&&(ls(Qe)||Qe[Cs]))break e;if((he||ae)&&(ae=me.window===me?me:(ae=me.ownerDocument)?ae.defaultView||ae.parentWindow:window,he?(Qe=o.relatedTarget||o.toElement,he=ne,Qe=Qe?ls(Qe):null,Qe!==null&&(bn=u(Qe),ut=Qe.tag,Qe!==bn||ut!==5&&ut!==27&&ut!==6)&&(Qe=null)):(he=null,Qe=ne),he!==Qe)){if(ut=ac,ye="onMouseLeave",Y="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(ut=Pi,ye="onPointerLeave",Y="onPointerEnter",H="pointer"),bn=he==null?ae:On(he),te=Qe==null?ae:On(Qe),ae=new ut(ye,H+"leave",he,o,me),ae.target=bn,ae.relatedTarget=te,ye=null,ls(me)===ne&&(ut=new ut(Y,H+"enter",Qe,o,me),ut.target=te,ut.relatedTarget=bn,ye=ut),bn=ye,he&&Qe)t:{for(ut=HT,Y=he,H=Qe,te=0,ye=Y;ye;ye=ut(ye))te++;ye=0;for(var rt=H;rt;rt=ut(rt))ye++;for(;0<te-ye;)Y=ut(Y),te--;for(;0<ye-te;)H=ut(H),ye--;for(;te--;){if(Y===H||H!==null&&Y===H.alternate){ut=Y;break t}Y=ut(Y),H=ut(H)}ut=null}else ut=null;he!==null&&ab(_e,ae,he,ut,!1),Qe!==null&&bn!==null&&ab(_e,bn,Qe,ut,!0)}}e:{if(ae=ne?On(ne):window,he=ae.nodeName&&ae.nodeName.toLowerCase(),he==="select"||he==="input"&&ae.type==="file")var en=k0;else if(x0(ae))if(E0)en=tT;else{en=ZE;var Ze=JE}else he=ae.nodeName,!he||he.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ne&&As(ne.elementType)&&(en=k0):en=eT;if(en&&(en=en(n,ne))){_0(_e,en,o,me);break e}Ze&&Ze(n,ae,ne),n==="focusout"&&ne&&ae.type==="number"&&ne.memoizedProps.value!=null&&Di(ae,"number",ae.value)}switch(Ze=ne?On(ne):window,n){case"focusin":(x0(Ze)||Ze.contentEditable==="true")&&(tl=Ze,Df=ne,dc=null);break;case"focusout":dc=Df=tl=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,I0(_e,o,me);break;case"selectionchange":if(sT)break;case"keydown":case"keyup":I0(_e,o,me)}var At;if(an)e:{switch(n){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else el?co(n,o)&&(Pt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Pt="onCompositionStart");Pt&&(yi&&o.locale!=="ko"&&(el||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&el&&(At=gn()):(Nt=me,_s="value"in Nt?Nt.value:Nt.textContent,el=!0)),Ze=qd(ne,Pt),0<Ze.length&&(Pt=new gi(Pt,n,null,o,me),_e.push({event:Pt,listeners:Ze}),At?Pt.data=At:(At=Zo(o),At!==null&&(Pt.data=At)))),(At=Dr?KE(n,o):YE(n,o))&&(Pt=qd(ne,"onBeforeInput"),0<Pt.length&&(Ze=new gi("onBeforeInput","beforeinput",null,o,me),_e.push({event:Ze,listeners:Pt}),Ze.data=At)),BT(_e,n,ne,o,me)}rb(_e,r)})}function Oc(n,r,o){return{instance:n,listener:r,currentTarget:o}}function qd(n,r){for(var o=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ae(n,o),f!=null&&c.unshift(Oc(n,f,m)),f=Ae(n,r),f!=null&&c.push(Oc(n,f,m))),n.tag===3)return c;n=n.return}return[]}function HT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ab(n,r,o,c,f){for(var m=r._reactName,_=[];o!==null&&o!==c;){var S=o,B=S.alternate,ne=S.stateNode;if(S=S.tag,B!==null&&B===c)break;S!==5&&S!==26&&S!==27||ne===null||(B=ne,f?(ne=Ae(o,m),ne!=null&&_.unshift(Oc(o,ne,B))):f||(ne=Ae(o,m),ne!=null&&_.push(Oc(o,ne,B)))),o=o.return}_.length!==0&&n.push({event:r,listeners:_})}var $T=/\r\n?/g,WT=/\u0000|\uFFFD/g;function ob(n){return(typeof n=="string"?n:""+n).replace($T,`
`).replace(WT,"")}function lb(n,r){return r=ob(r),ob(n)===r}function vn(n,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||xs(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&xs(n,""+c);break;case"className":ue(n,"class",c);break;case"tabIndex":ue(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ue(n,o,c);break;case"style":Xr(n,c,m);break;case"data":if(r!=="object"){ue(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=mi(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&vn(n,r,"name",f.name,f,null),vn(n,r,"formEncType",f.formEncType,f,null),vn(n,r,"formMethod",f.formMethod,f,null),vn(n,r,"formTarget",f.formTarget,f,null)):(vn(n,r,"encType",f.encType,f,null),vn(n,r,"method",f.method,f,null),vn(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=mi(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=ns);break;case"onScroll":c!=null&&Dt("scroll",n);break;case"onScrollEnd":c!=null&&Dt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=mi(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Dt("beforetoggle",n),Dt("toggle",n),ie(n,"popover",c);break;case"xlinkActuate":ze(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ze(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ze(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ze(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ze(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ze(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ze(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ze(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ze(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ie(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Li.get(o)||o,ie(n,o,c))}}function ap(n,r,o,c,f,m){switch(o){case"style":Xr(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?xs(n,c):(typeof c=="number"||typeof c=="bigint")&&xs(n,""+c);break;case"onScroll":c!=null&&Dt("scroll",n);break;case"onScrollEnd":c!=null&&Dt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ks.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[En]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):ie(n,o,c)}}}function Ds(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",n),Dt("load",n);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:vn(n,r,m,_,o,null)}}f&&vn(n,r,"srcSet",o.srcSet,o,null),c&&vn(n,r,"src",o.src,o,null);return;case"input":Dt("invalid",n);var S=m=_=f=null,B=null,ne=null;for(c in o)if(o.hasOwnProperty(c)){var me=o[c];if(me!=null)switch(c){case"name":f=me;break;case"type":_=me;break;case"checked":B=me;break;case"defaultChecked":ne=me;break;case"value":m=me;break;case"defaultValue":S=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,r));break;default:vn(n,r,c,me,o,null)}}Yr(n,m,S,B,ne,_,f,!1);return;case"select":Dt("invalid",n),c=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":_=S;break;case"multiple":c=S;default:vn(n,r,f,S,o,null)}r=m,o=_,n.multiple=!!c,r!=null?pr(n,!!c,r,!1):o!=null&&pr(n,!!c,o,!0);return;case"textarea":Dt("invalid",n),m=f=c=null;for(_ in o)if(o.hasOwnProperty(_)&&(S=o[_],S!=null))switch(_){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:vn(n,r,_,S,o,null)}Rr(n,c,f,m);return;case"option":for(B in o)o.hasOwnProperty(B)&&(c=o[B],c!=null)&&(B==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":vn(n,r,B,c,o,null));return;case"dialog":Dt("beforetoggle",n),Dt("toggle",n),Dt("cancel",n),Dt("close",n);break;case"iframe":case"object":Dt("load",n);break;case"video":case"audio":for(c=0;c<Lc.length;c++)Dt(Lc[c],n);break;case"image":Dt("error",n),Dt("load",n);break;case"details":Dt("toggle",n);break;case"embed":case"source":case"link":Dt("error",n),Dt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in o)if(o.hasOwnProperty(ne)&&(c=o[ne],c!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:vn(n,r,ne,c,o,null)}return;default:if(As(r)){for(me in o)o.hasOwnProperty(me)&&(c=o[me],c!==void 0&&ap(n,r,me,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&vn(n,r,S,c,o,null))}function GT(n,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,S=null,B=null,ne=null,me=null;for(he in o){var _e=o[he];if(o.hasOwnProperty(he)&&_e!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":B=_e;default:c.hasOwnProperty(he)||vn(n,r,he,null,c,_e)}}for(var ae in c){var he=c[ae];if(_e=o[ae],c.hasOwnProperty(ae)&&(he!=null||_e!=null))switch(ae){case"type":m=he;break;case"name":f=he;break;case"checked":ne=he;break;case"defaultChecked":me=he;break;case"value":_=he;break;case"defaultValue":S=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,r));break;default:he!==_e&&vn(n,r,ae,he,c,_e)}}us(n,_,S,B,ne,me,m,f);return;case"select":he=_=S=ae=null;for(m in o)if(B=o[m],o.hasOwnProperty(m)&&B!=null)switch(m){case"value":break;case"multiple":he=B;default:c.hasOwnProperty(m)||vn(n,r,m,null,c,B)}for(f in c)if(m=c[f],B=o[f],c.hasOwnProperty(f)&&(m!=null||B!=null))switch(f){case"value":ae=m;break;case"defaultValue":S=m;break;case"multiple":_=m;default:m!==B&&vn(n,r,f,m,c,B)}r=S,o=_,c=he,ae!=null?pr(n,!!o,ae,!1):!!c!=!!o&&(r!=null?pr(n,!!o,r,!0):pr(n,!!o,o?[]:"",!1));return;case"textarea":he=ae=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:vn(n,r,S,null,c,f)}for(_ in c)if(f=c[_],m=o[_],c.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":ae=f;break;case"defaultValue":he=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&vn(n,r,_,f,c,m)}pa(n,ae,he);return;case"option":for(var Qe in o)ae=o[Qe],o.hasOwnProperty(Qe)&&ae!=null&&!c.hasOwnProperty(Qe)&&(Qe==="selected"?n.selected=!1:vn(n,r,Qe,null,c,ae));for(B in c)ae=c[B],he=o[B],c.hasOwnProperty(B)&&ae!==he&&(ae!=null||he!=null)&&(B==="selected"?n.selected=ae&&typeof ae!="function"&&typeof ae!="symbol":vn(n,r,B,ae,c,he));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in o)ae=o[ut],o.hasOwnProperty(ut)&&ae!=null&&!c.hasOwnProperty(ut)&&vn(n,r,ut,null,c,ae);for(ne in c)if(ae=c[ne],he=o[ne],c.hasOwnProperty(ne)&&ae!==he&&(ae!=null||he!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,r));break;default:vn(n,r,ne,ae,c,he)}return;default:if(As(r)){for(var bn in o)ae=o[bn],o.hasOwnProperty(bn)&&ae!==void 0&&!c.hasOwnProperty(bn)&&ap(n,r,bn,void 0,c,ae);for(me in c)ae=c[me],he=o[me],!c.hasOwnProperty(me)||ae===he||ae===void 0&&he===void 0||ap(n,r,me,ae,c,he);return}}for(var Y in o)ae=o[Y],o.hasOwnProperty(Y)&&ae!=null&&!c.hasOwnProperty(Y)&&vn(n,r,Y,null,c,ae);for(_e in c)ae=c[_e],he=o[_e],!c.hasOwnProperty(_e)||ae===he||ae==null&&he==null||vn(n,r,_e,ae,c,he)}function cb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,_=f.initiatorType,S=f.duration;if(m&&S&&cb(_)){for(_=0,S=f.responseEnd,c+=1;c<o.length;c++){var B=o[c],ne=B.startTime;if(ne>S)break;var me=B.transferSize,_e=B.initiatorType;me&&cb(_e)&&(B=B.responseEnd,_+=me*(B<S?1:(S-ne)/(B-ne)))}if(--c,r+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var op=null,lp=null;function Hd(n){return n.nodeType===9?n:n.ownerDocument}function ub(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function db(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function cp(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var up=null;function YT(){var n=window.event;return n&&n.type==="popstate"?n===up?!1:(up=n,!0):(up=null,!1)}var hb=typeof setTimeout=="function"?setTimeout:void 0,QT=typeof clearTimeout=="function"?clearTimeout:void 0,fb=typeof Promise=="function"?Promise:void 0,XT=typeof queueMicrotask=="function"?queueMicrotask:typeof fb<"u"?function(n){return fb.resolve(null).then(n).catch(JT)}:hb;function JT(n){setTimeout(function(){throw n})}function Ma(n){return n==="head"}function mb(n,r){var o=r,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),Cl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Pc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Pc(o);for(var m=o.firstChild;m;){var _=m.nextSibling,S=m.nodeName;m[$n]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&Pc(n.ownerDocument.body);o=f}while(o);Cl(r)}function pb(n,r){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function dp(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":dp(o),Gs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function ZT(n,r,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[$n])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=zr(n.nextSibling),n===null)break}return null}function ej(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=zr(n.nextSibling),n===null))return null;return n}function gb(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=zr(n.nextSibling),n===null))return null;return n}function hp(n){return n.data==="$?"||n.data==="$~"}function fp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function tj(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function zr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var mp=null;function yb(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return zr(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function vb(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function bb(n,r,o){switch(r=Hd(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Pc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Gs(n)}var Fr=new Map,wb=new Set;function $d(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ji=Se.d;Se.d={f:nj,r:sj,D:rj,C:ij,L:aj,m:oj,X:cj,S:lj,M:uj};function nj(){var n=Ji.f(),r=Od();return n||r}function sj(n){var r=Sn(n);r!==null&&r.tag===5&&r.type==="form"?Pv(r):Ji.r(n)}var Tl=typeof document>"u"?null:document;function xb(n,r,o){var c=Tl;if(c&&typeof r=="string"&&r){var f=Pn(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),wb.has(f)||(wb.add(f),n={rel:n,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Ds(r,"link",n),Ft(r),c.head.appendChild(r)))}}function rj(n){Ji.D(n),xb("dns-prefetch",n,null)}function ij(n,r){Ji.C(n,r),xb("preconnect",n,r)}function aj(n,r,o){Ji.L(n,r,o);var c=Tl;if(c&&n&&r){var f='link[rel="preload"][as="'+Pn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Pn(o.imageSizes)+'"]')):f+='[href="'+Pn(n)+'"]';var m=f;switch(r){case"style":m=jl(n);break;case"script":m=Sl(n)}Fr.has(m)||(n=E({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Fr.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Vc(m))||r==="script"&&c.querySelector(Uc(m))||(r=c.createElement("link"),Ds(r,"link",n),Ft(r),c.head.appendChild(r)))}}function oj(n,r){Ji.m(n,r);var o=Tl;if(o&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Pn(c)+'"][href="'+Pn(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Sl(n)}if(!Fr.has(m)&&(n=E({rel:"modulepreload",href:n},r),Fr.set(m,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Uc(m)))return}c=o.createElement("link"),Ds(c,"link",n),Ft(c),o.head.appendChild(c)}}}function lj(n,r,o){Ji.S(n,r,o);var c=Tl;if(c&&n){var f=Wn(c).hoistableStyles,m=jl(n);r=r||"default";var _=f.get(m);if(!_){var S={loading:0,preload:null};if(_=c.querySelector(Vc(m)))S.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Fr.get(m))&&pp(n,o);var B=_=c.createElement("link");Ft(B),Ds(B,"link",n),B._p=new Promise(function(ne,me){B.onload=ne,B.onerror=me}),B.addEventListener("load",function(){S.loading|=1}),B.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Wd(_,r,c)}_={type:"stylesheet",instance:_,count:1,state:S},f.set(m,_)}}}function cj(n,r){Ji.X(n,r);var o=Tl;if(o&&n){var c=Wn(o).hoistableScripts,f=Sl(n),m=c.get(f);m||(m=o.querySelector(Uc(f)),m||(n=E({src:n,async:!0},r),(r=Fr.get(f))&&gp(n,r),m=o.createElement("script"),Ft(m),Ds(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function uj(n,r){Ji.M(n,r);var o=Tl;if(o&&n){var c=Wn(o).hoistableScripts,f=Sl(n),m=c.get(f);m||(m=o.querySelector(Uc(f)),m||(n=E({src:n,async:!0,type:"module"},r),(r=Fr.get(f))&&gp(n,r),m=o.createElement("script"),Ft(m),Ds(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function _b(n,r,o,c){var f=(f=Ee.current)?$d(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=jl(o.href),o=Wn(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=jl(o.href);var m=Wn(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(Vc(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Fr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Fr.set(n,o),m||dj(f,n,o,_.state))),r&&c===null)throw Error(i(528,""));return _}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Sl(o),o=Wn(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function jl(n){return'href="'+Pn(n)+'"'}function Vc(n){return'link[rel="stylesheet"]['+n+"]"}function kb(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function dj(n,r,o,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Ds(r,"link",o),Ft(r),n.head.appendChild(r))}function Sl(n){return'[src="'+Pn(n)+'"]'}function Uc(n){return"script[async]"+n}function Eb(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+Pn(o.href)+'"]');if(c)return r.instance=c,Ft(c),c;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Ft(c),Ds(c,"style",f),Wd(c,o.precedence,n),r.instance=c;case"stylesheet":f=jl(o.href);var m=n.querySelector(Vc(f));if(m)return r.state.loading|=4,r.instance=m,Ft(m),m;c=kb(o),(f=Fr.get(f))&&pp(c,f),m=(n.ownerDocument||n).createElement("link"),Ft(m);var _=m;return _._p=new Promise(function(S,B){_.onload=S,_.onerror=B}),Ds(m,"link",c),r.state.loading|=4,Wd(m,o.precedence,n),r.instance=m;case"script":return m=Sl(o.src),(f=n.querySelector(Uc(m)))?(r.instance=f,Ft(f),f):(c=o,(f=Fr.get(m))&&(c=E({},o),gp(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ft(f),Ds(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Wd(c,o.precedence,n));return r.instance}function Wd(n,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,_=0;_<c.length;_++){var S=c[_];if(S.dataset.precedence===r)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function pp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function gp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Gd=null;function Tb(n,r,o){if(Gd===null){var c=new Map,f=Gd=new Map;f.set(o,c)}else f=Gd,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[$n]||m[Gt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(r)||"";_=n+_;var S=c.get(_);S?S.push(m):c.set(_,[m])}}return c}function jb(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function hj(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Sb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function fj(n,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=jl(c.href),m=r.querySelector(Vc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Kd.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=m,Ft(m);return}m=r.ownerDocument||r,c=kb(c),(f=Fr.get(f))&&pp(c,f),m=m.createElement("link"),Ft(m);var _=m;_._p=new Promise(function(S,B){_.onload=S,_.onerror=B}),Ds(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Kd.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var yp=0;function mj(n,r){return n.stylesheets&&n.count===0&&Qd(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Qd(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&yp===0&&(yp=62500*KT());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Qd(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>yp?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Kd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Yd=null;function Qd(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Yd=new Map,r.forEach(pj,n),Yd=null,Kd.call(n))}function pj(n,r){if(!(r.state.loading&4)){var o=Yd.get(n);if(o)var c=o.get(null);else{o=new Map,Yd.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),c=_)}c&&o.set(null,c)}f=r.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||c,m===c&&o.set(null,f),o.set(_,f),this.count++,c=Kd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Bc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ie,_currentValue2:Ie,_threadCount:0};function gj(n,r,o,c,f,m,_,S,B){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Cb(n,r,o,c,f,m,_,S,B,ne,me,_e){return n=new gj(n,r,o,_,B,ne,me,_e,S),r=1,m===!0&&(r|=24),m=yr(3,null,null,r),n.current=m,m.stateNode=n,r=Qf(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},em(m),n}function Nb(n){return n?(n=rl,n):rl}function Ab(n,r,o,c,f,m){f=Nb(f),c.context===null?c.context=f:c.pendingContext=f,c=_a(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=ka(n,c,r),o!==null&&(cr(o,n,r),vc(o,n,r))}function Rb(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function vp(n,r){Rb(n,r),(n=n.alternate)&&Rb(n,r)}function Ib(n){if(n.tag===13||n.tag===31){var r=fo(n,67108864);r!==null&&cr(r,n,67108864),vp(n,67108864)}}function Mb(n){if(n.tag===13||n.tag===31){var r=_r();r=ln(r);var o=fo(n,r);o!==null&&cr(o,n,r),vp(n,r)}}var Xd=!0;function yj(n,r,o,c){var f=ee.T;ee.T=null;var m=Se.p;try{Se.p=2,bp(n,r,o,c)}finally{Se.p=m,ee.T=f}}function vj(n,r,o,c){var f=ee.T;ee.T=null;var m=Se.p;try{Se.p=8,bp(n,r,o,c)}finally{Se.p=m,ee.T=f}}function bp(n,r,o,c){if(Xd){var f=wp(c);if(f===null)ip(n,r,c,Jd,o),Lb(n,c);else if(wj(f,n,r,o,c))c.stopPropagation();else if(Lb(n,c),r&4&&-1<bj.indexOf(n)){for(;f!==null;){var m=Sn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Ln(m.pendingLanes);if(_!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var B=1<<31-Fe(_);S.entanglements[1]|=B,_&=~B}xi(m),(on&6)===0&&(Dd=pt()+500,Dc(0))}}break;case 31:case 13:S=fo(m,2),S!==null&&cr(S,m,2),Od(),vp(m,2)}if(m=wp(c),m===null&&ip(n,r,c,Jd,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else ip(n,r,c,null,o)}}function wp(n){return n=N(n),xp(n)}var Jd=null;function xp(n){if(Jd=null,n=ls(n),n!==null){var r=u(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=d(r),n!==null)return n;n=null}else if(o===31){if(n=p(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Jd=n,null}function Db(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jt()){case js:return 2;case es:return 8;case Wt:case se:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var _p=!1,Da=null,La=null,Oa=null,zc=new Map,Fc=new Map,Pa=[],bj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lb(n,r){switch(n){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":zc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(r.pointerId)}}function qc(n,r,o,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Sn(r),r!==null&&Ib(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function wj(n,r,o,c,f){switch(r){case"focusin":return Da=qc(Da,n,r,o,c,f),!0;case"dragenter":return La=qc(La,n,r,o,c,f),!0;case"mouseover":return Oa=qc(Oa,n,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return zc.set(m,qc(zc.get(m)||null,n,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Fc.set(m,qc(Fc.get(m)||null,n,r,o,c,f)),!0}return!1}function Ob(n){var r=ls(n.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=d(o),r!==null){n.blockedOn=r,ts(n.priority,function(){Mb(o)});return}}else if(r===31){if(r=p(o),r!==null){n.blockedOn=r,ts(n.priority,function(){Mb(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zd(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=wp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);w=c,o.target.dispatchEvent(c),w=null}else return r=Sn(o),r!==null&&Ib(r),n.blockedOn=o,!1;r.shift()}return!0}function Pb(n,r,o){Zd(n)&&o.delete(r)}function xj(){_p=!1,Da!==null&&Zd(Da)&&(Da=null),La!==null&&Zd(La)&&(La=null),Oa!==null&&Zd(Oa)&&(Oa=null),zc.forEach(Pb),Fc.forEach(Pb)}function eh(n,r){n.blockedOn===r&&(n.blockedOn=null,_p||(_p=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,xj)))}var th=null;function Vb(n){th!==n&&(th=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){th===n&&(th=null);for(var r=0;r<n.length;r+=3){var o=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(xp(c||o)===null)continue;break}var m=Sn(o);m!==null&&(n.splice(r,3),r-=3,wm(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Cl(n){function r(B){return eh(B,n)}Da!==null&&eh(Da,n),La!==null&&eh(La,n),Oa!==null&&eh(Oa,n),zc.forEach(r),Fc.forEach(r);for(var o=0;o<Pa.length;o++){var c=Pa[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Pa.length&&(o=Pa[0],o.blockedOn===null);)Ob(o),o.blockedOn===null&&Pa.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],_=f[En]||null;if(typeof m=="function")_||Vb(o);else if(_){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[En]||null)S=_.formAction;else if(xp(f)!==null)continue}else S=_.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),Vb(o)}}}function Ub(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function kp(n){this._internalRoot=n}nh.prototype.render=kp.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=_r();Ab(o,c,n,r,null,null)},nh.prototype.unmount=kp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Ab(n.current,2,null,n,null,null),Od(),r[Cs]=null}};function nh(n){this._internalRoot=n}nh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ss();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Pa.length&&r!==0&&r<Pa[o].priority;o++);Pa.splice(o,0,n),o===0&&Ob(n)}};var Bb=e.version;if(Bb!=="19.2.4")throw Error(i(527,Bb,"19.2.4"));Se.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(r),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var _j={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{st=sh.inject(_j),He=sh}catch{}}return $c.createRoot=function(n,r){if(!l(n))throw Error(i(299));var o=!1,c="",f=Gv,m=Kv,_=Yv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=Cb(n,1,!1,null,null,o,c,null,f,m,_,Ub),n[Cs]=r.current,rp(n),new kp(r)},$c.hydrateRoot=function(n,r,o){if(!l(n))throw Error(i(299));var c=!1,f="",m=Gv,_=Kv,S=Yv,B=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),r=Cb(n,1,!0,r,o??null,c,f,B,m,_,S,Ub),r.context=Nb(null),o=r.current,c=_r(),c=ln(c),f=_a(c),f.callback=null,ka(o,f,c),o=c,r.current.lanes=o,Ge(r,o),xi(r),n[Cs]=r.current,rp(n),new nh(r)},$c.version="19.2.4",$c}var Qb;function Ij(){if(Qb)return jp.exports;Qb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),jp.exports=Rj(),jp.exports}var Mj=Ij();const Dj="modulepreload",Lj=function(s){return"/login/"+s},Xb={},$s=function(e,t,i){let l=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");l=g(t.map(y=>{if(y=Lj(y),y in Xb)return;Xb[y]=!0;const b=y.endsWith(".css"),E=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${E}`))return;const T=document.createElement("link");if(T.rel=b?"stylesheet":Dj,b||(T.as="script"),T.crossOrigin="",T.href=y,p&&T.setAttribute("nonce",p),document.head.appendChild(T),b)return new Promise((P,G)=>{T.addEventListener("load",P),T.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var Jb="popstate";function Oj(s={}){function e(i,l){let{pathname:u,search:d,hash:p}=i.location;return mg("",{pathname:u,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(i,l){return typeof l=="string"?l:hu(l)}return Vj(e,t,null,s)}function Bn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function $r(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Pj(){return Math.random().toString(36).substring(2,10)}function Zb(s,e){return{usr:s.state,key:s.key,idx:e}}function mg(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ql(e):e,state:t,key:e&&e.key||i||Pj()}}function hu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Ql(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function Vj(s,e,t,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,d=l.history,p="POP",g=null,y=b();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function b(){return(d.state||{idx:null}).idx}function E(){p="POP";let z=b(),K=z==null?null:z-y;y=z,g&&g({action:p,location:q.location,delta:K})}function T(z,K){p="PUSH";let W=mg(q.location,z,K);y=b()+1;let Q=Zb(W,y),oe=q.createHref(W);try{d.pushState(Q,"",oe)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;l.location.assign(oe)}u&&g&&g({action:p,location:q.location,delta:1})}function P(z,K){p="REPLACE";let W=mg(q.location,z,K);y=b();let Q=Zb(W,y),oe=q.createHref(W);d.replaceState(Q,"",oe),u&&g&&g({action:p,location:q.location,delta:0})}function G(z){return Uj(z)}let q={get action(){return p},get location(){return s(l,d)},listen(z){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Jb,E),g=z,()=>{l.removeEventListener(Jb,E),g=null}},createHref(z){return e(l,z)},createURL:G,encodeLocation(z){let K=G(z);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:T,replace:P,go(z){return d.go(z)}};return q}function Uj(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Bn(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:hu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function hx(s,e,t="/"){return Bj(s,e,t,!1)}function Bj(s,e,t,i){let l=typeof e=="string"?Ql(e):e,u=aa(l.pathname||"/",t);if(u==null)return null;let d=fx(s);zj(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=Jj(u);p=Qj(d[g],y,i)}return p}function fx(s,e=[],t=[],i="",l=!1){let u=(d,p,g=l,y)=>{let b={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;Bn(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let E=na([i,b.relativePath]),T=t.concat(b);d.children&&d.children.length>0&&(Bn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),fx(d.children,e,T,E,g)),!(d.path==null&&!d.index)&&e.push({path:E,score:Kj(E,d.index),routesMeta:T})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of mx(d.path))u(d,p,!0,g)}),e}function mx(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,l=t.endsWith("?"),u=t.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let d=mx(i.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function zj(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Yj(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Fj=/^:[\w-]+$/,qj=3,Hj=2,$j=1,Wj=10,Gj=-2,e2=s=>s==="*";function Kj(s,e){let t=s.split("/"),i=t.length;return t.some(e2)&&(i+=Gj),e&&(i+=Hj),t.filter(l=>!e2(l)).reduce((l,u)=>l+(Fj.test(u)?qj:u===""?$j:Wj),i)}function Yj(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function Qj(s,e,t=!1){let{routesMeta:i}=s,l={},u="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,b=u==="/"?e:e.slice(u.length)||"/",E=Ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),T=g.route;if(!E&&y&&t&&!i[i.length-1].route.index&&(E=Ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!E)return null;Object.assign(l,E.params),d.push({params:l,pathname:na([u,E.pathname]),pathnameBase:nS(na([u,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(u=na([u,E.pathnameBase]))}return d}function Ih(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=Xj(s.path,s.caseSensitive,s.end),l=e.match(t);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:E},T)=>{if(b==="*"){let G=p[T]||"";d=u.slice(0,u.length-G.length).replace(/(.)\/+$/,"$1")}const P=p[T];return E&&!P?y[b]=void 0:y[b]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function Xj(s,e=!1,t=!0){$r(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function Jj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $r(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function aa(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var Zj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function eS(s,e="/"){let{pathname:t,search:i="",hash:l=""}=typeof s=="string"?Ql(s):s,u;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?u=t2(t.substring(1),"/"):u=t2(t,e)):u=e,{pathname:u,search:sS(i),hash:rS(l)}}function t2(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function Ap(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tS(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Qg(s){let e=tS(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Xg(s,e,t,i=!1){let l;typeof s=="string"?l=Ql(s):(l={...s},Bn(!l.pathname||!l.pathname.includes("?"),Ap("?","pathname","search",l)),Bn(!l.pathname||!l.pathname.includes("#"),Ap("#","pathname","hash",l)),Bn(!l.search||!l.search.includes("#"),Ap("#","search","hash",l)));let u=s===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=t;else{let E=e.length-1;if(!i&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),E-=1;l.pathname=T.join("/")}p=E>=0?e[E]:"/"}let g=eS(l,p),y=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var na=s=>s.join("/").replace(/\/\/+/g,"/"),nS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),sS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,rS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,iS=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function aS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function oS(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var px=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gx(s,e){let t=s;if(typeof t!="string"||!Zj.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,l=!1;if(px)try{let u=new URL(window.location.href),d=t.startsWith("//")?new URL(u.protocol+t):new URL(t),p=aa(d.pathname,e);d.origin===u.origin&&p!=null?t=p+d.search+d.hash:l=!0}catch{$r(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yx=["POST","PUT","PATCH","DELETE"];new Set(yx);var lS=["GET",...yx];new Set(lS);var Xl=x.createContext(null);Xl.displayName="DataRouter";var ef=x.createContext(null);ef.displayName="DataRouterState";var cS=x.createContext(!1),vx=x.createContext({isTransitioning:!1});vx.displayName="ViewTransition";var uS=x.createContext(new Map);uS.displayName="Fetchers";var dS=x.createContext(null);dS.displayName="Await";var Sr=x.createContext(null);Sr.displayName="Navigation";var Su=x.createContext(null);Su.displayName="Location";var ci=x.createContext({outlet:null,matches:[],isDataRoute:!1});ci.displayName="Route";var Jg=x.createContext(null);Jg.displayName="RouteError";var bx="REACT_ROUTER_ERROR",hS="REDIRECT",fS="ROUTE_ERROR_RESPONSE";function mS(s){if(s.startsWith(`${bx}:${hS}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function pS(s){if(s.startsWith(`${bx}:${fS}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new iS(e.status,e.statusText,e.data)}catch{}}function gS(s,{relative:e}={}){Bn(Jl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=x.useContext(Sr),{hash:l,pathname:u,search:d}=Cu(s,{relative:e}),p=u;return t!=="/"&&(p=u==="/"?t:na([t,u])),i.createHref({pathname:p,search:d,hash:l})}function Jl(){return x.useContext(Su)!=null}function Ii(){return Bn(Jl(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Su).location}var wx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xx(s){x.useContext(Sr).static||x.useLayoutEffect(s)}function Ws(){let{isDataRoute:s}=x.useContext(ci);return s?AS():yS()}function yS(){Bn(Jl(),"useNavigate() may be used only in the context of a <Router> component.");let s=x.useContext(Xl),{basename:e,navigator:t}=x.useContext(Sr),{matches:i}=x.useContext(ci),{pathname:l}=Ii(),u=JSON.stringify(Qg(i)),d=x.useRef(!1);return xx(()=>{d.current=!0}),x.useCallback((g,y={})=>{if($r(d.current,wx),!d.current)return;if(typeof g=="number"){t.go(g);return}let b=Xg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:na([e,b.pathname])),(y.replace?t.replace:t.push)(b,y.state,y)},[e,t,u,l,s])}x.createContext(null);function vS(){let{matches:s}=x.useContext(ci),e=s[s.length-1];return e?e.params:{}}function Cu(s,{relative:e}={}){let{matches:t}=x.useContext(ci),{pathname:i}=Ii(),l=JSON.stringify(Qg(t));return x.useMemo(()=>Xg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function bS(s,e){return _x(s,e)}function _x(s,e,t,i,l){Bn(Jl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=x.useContext(Sr),{matches:d}=x.useContext(ci),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",E=p&&p.route;{let W=E&&E.path||"";Ex(y,!E||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let T=Ii(),P;if(e){let W=typeof e=="string"?Ql(e):e;Bn(b==="/"||W.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${W.pathname}" was given in the \`location\` prop.`),P=W}else P=T;let G=P.pathname||"/",q=G;if(b!=="/"){let W=b.replace(/^\//,"").split("/");q="/"+G.replace(/^\//,"").split("/").slice(W.length).join("/")}let z=hx(s,{pathname:q});$r(E||z!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),$r(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=ES(z&&z.map(W=>Object.assign({},W,{params:Object.assign({},g,W.params),pathname:na([b,u.encodeLocation?u.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?b:na([b,u.encodeLocation?u.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),d,t,i,l);return e&&K?x.createElement(Su.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},K):K}function wS(){let s=NS(),e=aS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:u},"ErrorBoundary")," or"," ",x.createElement("code",{style:u},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),t?x.createElement("pre",{style:l},t):null,d)}var xS=x.createElement(wS,null),kx=class extends x.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=pS(s.digest);t&&(s=t)}let e=s!==void 0?x.createElement(ci.Provider,{value:this.props.routeContext},x.createElement(Jg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?x.createElement(_S,{error:s},e):e}};kx.contextType=cS;var Rp=new WeakMap;function _S({children:s,error:e}){let{basename:t}=x.useContext(Sr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=mS(e.digest);if(i){let l=Rp.get(e);if(l)throw l;let u=gx(i.location,t);if(px&&!Rp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw Rp.set(e,d),d}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function kS({routeContext:s,match:e,children:t}){let i=x.useContext(Xl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(ci.Provider,{value:s},t)}function ES(s,e=[],t=null,i=null,l=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,d=t?.errors;if(d!=null){let b=u.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);Bn(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(t)for(let b=0;b<u.length;b++){let E=u[b];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=b),E.route.id){let{loaderData:T,errors:P}=t,G=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!P||P[E.route.id]===void 0);if(E.route.lazy||G){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=t&&i?(b,E)=>{i(b,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:oS(t.matches),errorInfo:E})}:void 0;return u.reduceRight((b,E,T)=>{let P,G=!1,q=null,z=null;t&&(P=d&&E.route.id?d[E.route.id]:void 0,q=E.route.errorElement||xS,p&&(g<0&&T===0?(Ex("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),G=!0,z=null):g===T&&(G=!0,z=E.route.hydrateFallbackElement||null)));let K=e.concat(u.slice(0,T+1)),W=()=>{let Q;return P?Q=q:G?Q=z:E.route.Component?Q=x.createElement(E.route.Component,null):E.route.element?Q=E.route.element:Q=b,x.createElement(kS,{match:E,routeContext:{outlet:b,matches:K,isDataRoute:t!=null},children:Q})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?x.createElement(kx,{location:t.location,revalidation:t.revalidation,component:q,error:P,children:W(),routeContext:{outlet:null,matches:K,isDataRoute:!0},onError:y}):W()},null)}function Zg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TS(s){let e=x.useContext(Xl);return Bn(e,Zg(s)),e}function jS(s){let e=x.useContext(ef);return Bn(e,Zg(s)),e}function SS(s){let e=x.useContext(ci);return Bn(e,Zg(s)),e}function ey(s){let e=SS(s),t=e.matches[e.matches.length-1];return Bn(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function CS(){return ey("useRouteId")}function NS(){let s=x.useContext(Jg),e=jS("useRouteError"),t=ey("useRouteError");return s!==void 0?s:e.errors?.[t]}function AS(){let{router:s}=TS("useNavigate"),e=ey("useNavigate"),t=x.useRef(!1);return xx(()=>{t.current=!0}),x.useCallback(async(l,u={})=>{$r(t.current,wx),t.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var n2={};function Ex(s,e,t){!e&&!n2[s]&&(n2[s]=!0,$r(!1,t))}x.memo(RS);function RS({routes:s,future:e,state:t,onError:i}){return _x(s,void 0,t,i,e)}function Tx({to:s,replace:e,state:t,relative:i}){Bn(Jl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=x.useContext(Sr);$r(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=x.useContext(ci),{pathname:d}=Ii(),p=Ws(),g=Xg(s,Qg(u),d,i==="path"),y=JSON.stringify(g);return x.useEffect(()=>{p(JSON.parse(y),{replace:e,state:t,relative:i})},[p,y,i,e,t]),null}function wn(s){Bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IS({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){Bn(!Jl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=x.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[p,l,u,d]);typeof t=="string"&&(t=Ql(t));let{pathname:y="/",search:b="",hash:E="",state:T=null,key:P="default"}=t,G=x.useMemo(()=>{let q=aa(y,p);return q==null?null:{location:{pathname:q,search:b,hash:E,state:T,key:P},navigationType:i}},[p,y,b,E,T,P,i]);return $r(G!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${E}" because it does not start with the basename, so the <Router> won't render anything.`),G==null?null:x.createElement(Sr.Provider,{value:g},x.createElement(Su.Provider,{children:e,value:G}))}function MS({children:s,location:e}){return bS(pg(s),e)}function pg(s,e=[]){let t=[];return x.Children.forEach(s,(i,l)=>{if(!x.isValidElement(i))return;let u=[...e,l];if(i.type===x.Fragment){t.push.apply(t,pg(i.props.children,u));return}Bn(i.type===wn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=pg(i.props.children,u)),t.push(d)}),t}var bh="get",wh="application/x-www-form-urlencoded";function tf(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function DS(s){return tf(s)&&s.tagName.toLowerCase()==="button"}function LS(s){return tf(s)&&s.tagName.toLowerCase()==="form"}function OS(s){return tf(s)&&s.tagName.toLowerCase()==="input"}function PS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function VS(s,e){return s.button===0&&(!e||e==="_self")&&!PS(s)}function gg(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let i=s[t];return e.concat(Array.isArray(i)?i.map(l=>[t,l]):[[t,i]])},[]))}function US(s,e){let t=gg(s);return e&&e.forEach((i,l)=>{t.has(l)||e.getAll(l).forEach(u=>{t.append(l,u)})}),t}var rh=null;function BS(){if(rh===null)try{new FormData(document.createElement("form"),0),rh=!1}catch{rh=!0}return rh}var zS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ip(s){return s!=null&&!zS.has(s)?($r(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wh}"`),null):s}function FS(s,e){let t,i,l,u,d;if(LS(s)){let p=s.getAttribute("action");i=p?aa(p,e):null,t=s.getAttribute("method")||bh,l=Ip(s.getAttribute("enctype"))||wh,u=new FormData(s)}else if(DS(s)||OS(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?aa(g,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||bh,l=Ip(s.getAttribute("formenctype"))||Ip(p.getAttribute("enctype"))||wh,u=new FormData(p,s),!BS()){let{name:y,type:b,value:E}=s;if(b==="image"){let T=y?`${y}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else y&&u.append(y,E)}}else{if(tf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bh,i=null,l=wh,d=s}return u&&l==="text/plain"&&(d=u,u=void 0),{action:i,method:t.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ty(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function qS(s,e,t,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&aa(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function HS(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $S(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function WS(s,e,t){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await HS(u,t);return d.links?d.links():[]}return[]}));return QS(i.flat(1).filter($S).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function s2(s,e,t,i,l,u){let d=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,p=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function GS(s,e,{includeHydrateFallback:t}={}){return KS(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function KS(s){return[...new Set(s)]}function YS(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function QS(s,e){let t=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(YS(l));return t.has(u)||(t.add(u),i.push({key:u,link:l})),i},[])}function jx(){let s=x.useContext(Xl);return ty(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function XS(){let s=x.useContext(ef);return ty(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ny=x.createContext(void 0);ny.displayName="FrameworkContext";function Sx(){let s=x.useContext(ny);return ty(s,"You must render this element inside a <HydratedRouter> element"),s}function JS(s,e){let t=x.useContext(ny),[i,l]=x.useState(!1),[u,d]=x.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:E}=e,T=x.useRef(null);x.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let q=K=>{K.forEach(W=>{d(W.isIntersecting)})},z=new IntersectionObserver(q,{threshold:.5});return T.current&&z.observe(T.current),()=>{z.disconnect()}}},[s]),x.useEffect(()=>{if(i){let q=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(q)}}},[i]);let P=()=>{l(!0)},G=()=>{l(!1),d(!1)};return t?s!=="intent"?[u,T,{}]:[u,T,{onFocus:Wc(p,P),onBlur:Wc(g,G),onMouseEnter:Wc(y,P),onMouseLeave:Wc(b,G),onTouchStart:Wc(E,P)}]:[!1,T,{}]}function Wc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function ZS({page:s,...e}){let{router:t}=jx(),i=x.useMemo(()=>hx(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?x.createElement(tC,{page:s,matches:i,...e}):null}function eC(s){let{manifest:e,routeModules:t}=Sx(),[i,l]=x.useState([]);return x.useEffect(()=>{let u=!1;return WS(s,e,t).then(d=>{u||l(d)}),()=>{u=!0}},[s,e,t]),i}function tC({page:s,matches:e,...t}){let i=Ii(),{future:l,manifest:u,routeModules:d}=Sx(),{basename:p}=jx(),{loaderData:g,matches:y}=XS(),b=x.useMemo(()=>s2(s,e,y,u,i,"data"),[s,e,y,u,i]),E=x.useMemo(()=>s2(s,e,y,u,i,"assets"),[s,e,y,u,i]),T=x.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let q=new Set,z=!1;if(e.forEach(W=>{let Q=u.routes[W.route.id];!Q||!Q.hasLoader||(!b.some(oe=>oe.route.id===W.route.id)&&W.route.id in g&&d[W.route.id]?.shouldRevalidate||Q.hasClientLoader?z=!0:q.add(W.route.id))}),q.size===0)return[];let K=qS(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return z&&q.size>0&&K.searchParams.set("_routes",e.filter(W=>q.has(W.route.id)).map(W=>W.route.id).join(",")),[K.pathname+K.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,b,e,s,d]),P=x.useMemo(()=>GS(E,u),[E,u]),G=eC(E);return x.createElement(x.Fragment,null,T.map(q=>x.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...t})),P.map(q=>x.createElement("link",{key:q,rel:"modulepreload",href:q,...t})),G.map(({key:q,link:z})=>x.createElement("link",{key:q,nonce:t.nonce,...z,crossOrigin:z.crossOrigin??t.crossOrigin})))}function nC(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var sC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sC&&(window.__reactRouterVersion="7.13.0")}catch{}function rC({basename:s,children:e,unstable_useTransitions:t,window:i}){let l=x.useRef();l.current==null&&(l.current=Oj({window:i,v5Compat:!0}));let u=l.current,[d,p]=x.useState({action:u.action,location:u.location}),g=x.useCallback(y=>{t===!1?p(y):x.startTransition(()=>p(y))},[t]);return x.useLayoutEffect(()=>u.listen(g),[u,g]),x.createElement(IS,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:t})}var Cx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nx=x.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:l,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T,...P},G){let{basename:q,unstable_useTransitions:z}=x.useContext(Sr),K=typeof y=="string"&&Cx.test(y),W=gx(y,q);y=W.to;let Q=gS(y,{relative:l}),[oe,Te,be]=JS(i,P),C=lC(y,{replace:d,state:p,target:g,preventScrollReset:b,relative:l,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:z});function j(V){e&&e(V),V.defaultPrevented||C(V)}let I=x.createElement("a",{...P,...be,href:W.absoluteURL||Q,onClick:W.isExternal||u?e:j,ref:nC(G,Te),target:g,"data-discover":!K&&t==="render"?"true":void 0});return oe&&!K?x.createElement(x.Fragment,null,I,x.createElement(ZS,{page:Q})):I});Nx.displayName="Link";var iC=x.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:p,children:g,...y},b){let E=Cu(d,{relative:y.relative}),T=Ii(),P=x.useContext(ef),{navigator:G,basename:q}=x.useContext(Sr),z=P!=null&&fC(E)&&p===!0,K=G.encodeLocation?G.encodeLocation(E).pathname:E.pathname,W=T.pathname,Q=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;t||(W=W.toLowerCase(),Q=Q?Q.toLowerCase():null,K=K.toLowerCase()),Q&&q&&(Q=aa(Q,q)||Q);const oe=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let Te=W===K||!l&&W.startsWith(K)&&W.charAt(oe)==="/",be=Q!=null&&(Q===K||!l&&Q.startsWith(K)&&Q.charAt(K.length)==="/"),C={isActive:Te,isPending:be,isTransitioning:z},j=Te?e:void 0,I;typeof i=="function"?I=i(C):I=[i,Te?"active":null,be?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(C):u;return x.createElement(Nx,{...y,"aria-current":j,className:I,ref:b,style:V,to:d,viewTransition:p},typeof g=="function"?g(C):g)});iC.displayName="NavLink";var aC=x.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:l,state:u,method:d=bh,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T,...P},G)=>{let{unstable_useTransitions:q}=x.useContext(Sr),z=dC(),K=hC(p,{relative:y}),W=d.toLowerCase()==="get"?"get":"post",Q=typeof p=="string"&&Cx.test(p),oe=Te=>{if(g&&g(Te),Te.defaultPrevented)return;Te.preventDefault();let be=Te.nativeEvent.submitter,C=be?.getAttribute("formmethod")||d,j=()=>z(be||Te.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:l,state:u,relative:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T});q&&t!==!1?x.startTransition(()=>j()):j()};return x.createElement("form",{ref:G,method:W,action:K,onSubmit:i?g:oe,...P,"data-discover":!Q&&s==="render"?"true":void 0})});aC.displayName="Form";function oC(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ax(s){let e=x.useContext(Xl);return Bn(e,oC(s)),e}function lC(s,{target:e,replace:t,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Ws(),b=Ii(),E=Cu(s,{relative:u});return x.useCallback(T=>{if(VS(T,e)){T.preventDefault();let P=t!==void 0?t:hu(b)===hu(E),G=()=>y(s,{replace:P,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?x.startTransition(()=>G()):G()}},[b,y,E,t,i,e,s,l,u,d,p,g])}function RO(s){$r(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=x.useRef(gg(s)),t=x.useRef(!1),i=Ii(),l=x.useMemo(()=>US(i.search,t.current?null:e.current),[i.search]),u=Ws(),d=x.useCallback((p,g)=>{const y=gg(typeof p=="function"?p(new URLSearchParams(l)):p);t.current=!0,u("?"+y,g)},[u,l]);return[l,d]}var cC=0,uC=()=>`__${String(++cC)}__`;function dC(){let{router:s}=Ax("useSubmit"),{basename:e}=x.useContext(Sr),t=CS(),i=s.fetch,l=s.navigate;return x.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:b,body:E}=FS(u,e);if(d.navigate===!1){let T=d.fetcherKey||uC();await i(T,t,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:E,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await l(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:E,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:t,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,l,e,t])}function hC(s,{relative:e}={}){let{basename:t}=x.useContext(Sr),i=x.useContext(ci);Bn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...Cu(s||".",{relative:e})},d=Ii();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(E=>E).forEach(E=>p.append("index",E));let b=p.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:na([t,u.pathname])),hu(u)}function fC(s,{relative:e}={}){let t=x.useContext(vx);Bn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Ax("useViewTransitionState"),l=Cu(s,{relative:e});if(!t.isTransitioning)return!1;let u=aa(t.currentLocation.pathname,i)||t.currentLocation.pathname,d=aa(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Ih(l.pathname,d)!=null||Ih(l.pathname,u)!=null}const mC=()=>{};var r2={};const Rx=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},pC=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const l=s[t++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[t++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[t++],d=s[t++],p=s[t++],g=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],d=s[t++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Ix={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],d=l+1<s.length,p=d?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,b=u>>2,E=(u&3)<<4|p>>4;let T=(p&15)<<2|y>>6,P=y&63;g||(P=64,d||(T=64)),i.push(t[b],t[E],t[T],t[P])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Rx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):pC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=t[s.charAt(l++)],p=l<s.length?t[s.charAt(l)]:0;++l;const y=l<s.length?t[s.charAt(l)]:64;++l;const E=l<s.length?t[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||E==null)throw new gC;const T=u<<2|p>>4;if(i.push(T),y!==64){const P=p<<4&240|y>>2;if(i.push(P),E!==64){const G=y<<6&192|E;i.push(G)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class gC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yC=function(s){const e=Rx(s);return Ix.encodeByteArray(e,!0)},Mh=function(s){return yC(s).replace(/\./g,"")},Mx=function(s){try{return Ix.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const bC=()=>vC().__FIREBASE_DEFAULTS__,wC=()=>{if(typeof process>"u"||typeof r2>"u")return;const s=r2.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},xC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Mx(s[1]);return e&&JSON.parse(e)},nf=()=>{try{return mC()||bC()||wC()||xC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Dx=s=>nf()?.emulatorHosts?.[s],Lx=s=>{const e=Dx(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Ox=()=>nf()?.config,Px=s=>nf()?.[`_${s}`];class _C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function so(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sy(s){return(await fetch(s,{credentials:"include"})).ok}function Vx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Mh(JSON.stringify(t)),Mh(JSON.stringify(d)),""].join(".")}const iu={};function kC(){const s={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?s.emulator.push(e):s.prod.push(e);return s}function EC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let i2=!1;function ry(s,e){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||iu[s]===e||iu[s]||i2)return;iu[s]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",u=kC().prod.length>0;function d(){const T=document.getElementById(i);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,P){T.setAttribute("width","24"),T.setAttribute("id",P),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{i2=!0,d()},T}function b(T,P){T.setAttribute("id",P),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=EC(i),P=t("text"),G=document.getElementById(P)||document.createElement("span"),q=t("learnmore"),z=document.getElementById(q)||document.createElement("a"),K=t("preprendIcon"),W=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;p(Q),b(z,q);const oe=y();g(W,K),Q.append(W,G,z,oe),document.body.appendChild(Q)}u?(G.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Hs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hs())}function jC(){const s=nf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CC(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function NC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AC(){const s=Hs();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function RC(){return!jC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ux(){try{return typeof indexedDB=="object"}catch{return!1}}function Bx(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(t){e(t)}})}function IC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const MC="FirebaseError";class ui extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=MC,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ho.prototype.create)}}class Ho{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?DC(u,i):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new ui(l,p,i)}}function DC(s,e){return s.replace(LC,(t,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const LC=/\{\$([^}]+)}/g;function OC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function oa(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const l of t){if(!i.includes(l))return!1;const u=s[l],d=e[l];if(a2(u)&&a2(d)){if(!oa(u,d))return!1}else if(u!==d)return!1}for(const l of i)if(!t.includes(l))return!1;return!0}function a2(s){return s!==null&&typeof s=="object"}function Nu(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Zc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function eu(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function PC(s,e){const t=new VC(s,e);return t.subscribe.bind(t)}class VC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let l;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");UC(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:i},l.next===void 0&&(l.next=Mp),l.error===void 0&&(l.error=Mp),l.complete===void 0&&(l.complete=Mp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UC(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Mp(){}function un(s){return s&&s._delegate?s._delegate:s}class Wr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Co="[DEFAULT]";class BC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new _C;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FC(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&d.resolve(l)}return l}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const l of i)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:zC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zC(s){return s===Co?void 0:s}function FC(s){return s.instantiationMode==="EAGER"}class qC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new BC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Vt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Vt||(Vt={}));const HC={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},$C=Vt.INFO,WC={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},GC=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=WC[e];if(l)console[l](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class iy{constructor(e){this.name=e,this._logLevel=$C,this._logHandler=GC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...e),this._logHandler(this,Vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...e),this._logHandler(this,Vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...e),this._logHandler(this,Vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...e),this._logHandler(this,Vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...e),this._logHandler(this,Vt.ERROR,...e)}}const KC=(s,e)=>e.some(t=>s instanceof t);let o2,l2;function YC(){return o2||(o2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QC(){return l2||(l2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zx=new WeakMap,yg=new WeakMap,Fx=new WeakMap,Dp=new WeakMap,ay=new WeakMap;function XC(s){const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{t(sa(s.result)),l()},d=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&zx.set(t,s)}).catch(()=>{}),ay.set(e,s),e}function JC(s){if(yg.has(s))return;const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{t(),l()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});yg.set(s,e)}let vg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return yg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Fx.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sa(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function ZC(s){vg=s(vg)}function eN(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Lp(this),e,...t);return Fx.set(i,e.sort?e.sort():[e]),sa(i)}:QC().includes(s)?function(...e){return s.apply(Lp(this),e),sa(zx.get(this))}:function(...e){return sa(s.apply(Lp(this),e))}}function tN(s){return typeof s=="function"?eN(s):(s instanceof IDBTransaction&&JC(s),KC(s,YC())?new Proxy(s,vg):s)}function sa(s){if(s instanceof IDBRequest)return XC(s);if(Dp.has(s))return Dp.get(s);const e=tN(s);return e!==s&&(Dp.set(s,e),ay.set(e,s)),e}const Lp=s=>ay.get(s);function sf(s,e,{blocked:t,upgrade:i,blocking:l,terminated:u}={}){const d=indexedDB.open(s,e),p=sa(d);return i&&d.addEventListener("upgradeneeded",g=>{i(sa(d.result),g.oldVersion,g.newVersion,sa(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}function Op(s,{blocked:e}={}){const t=indexedDB.deleteDatabase(s);return e&&t.addEventListener("blocked",i=>e(i.oldVersion,i)),sa(t).then(()=>{})}const nN=["get","getKey","getAll","getAllKeys","count"],sN=["put","add","delete","clear"],Pp=new Map;function c2(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Pp.get(e))return Pp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,l=sN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(l||nN.includes(t)))return;const u=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),l&&g.done]))[0]};return Pp.set(e,u),u}ZC(s=>({...s,get:(e,t,i)=>c2(e,t)||s.get(e,t,i),has:(e,t)=>!!c2(e,t)||s.has(e,t)}));class rN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(iN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function iN(s){return s.getComponent()?.type==="VERSION"}const bg="@firebase/app",u2="0.14.7";const la=new iy("@firebase/app"),aN="@firebase/app-compat",oN="@firebase/analytics-compat",lN="@firebase/analytics",cN="@firebase/app-check-compat",uN="@firebase/app-check",dN="@firebase/auth",hN="@firebase/auth-compat",fN="@firebase/database",mN="@firebase/data-connect",pN="@firebase/database-compat",gN="@firebase/functions",yN="@firebase/functions-compat",vN="@firebase/installations",bN="@firebase/installations-compat",wN="@firebase/messaging",xN="@firebase/messaging-compat",_N="@firebase/performance",kN="@firebase/performance-compat",EN="@firebase/remote-config",TN="@firebase/remote-config-compat",jN="@firebase/storage",SN="@firebase/storage-compat",CN="@firebase/firestore",NN="@firebase/ai",AN="@firebase/firestore-compat",RN="firebase",IN="12.8.0";const wg="[DEFAULT]",MN={[bg]:"fire-core",[aN]:"fire-core-compat",[lN]:"fire-analytics",[oN]:"fire-analytics-compat",[uN]:"fire-app-check",[cN]:"fire-app-check-compat",[dN]:"fire-auth",[hN]:"fire-auth-compat",[fN]:"fire-rtdb",[mN]:"fire-data-connect",[pN]:"fire-rtdb-compat",[gN]:"fire-fn",[yN]:"fire-fn-compat",[vN]:"fire-iid",[bN]:"fire-iid-compat",[wN]:"fire-fcm",[xN]:"fire-fcm-compat",[_N]:"fire-perf",[kN]:"fire-perf-compat",[EN]:"fire-rc",[TN]:"fire-rc-compat",[jN]:"fire-gcs",[SN]:"fire-gcs-compat",[CN]:"fire-fst",[AN]:"fire-fst-compat",[NN]:"fire-vertex","fire-js":"fire-js",[RN]:"fire-js-all"};const Dh=new Map,DN=new Map,xg=new Map;function d2(s,e){try{s.container.addComponent(e)}catch(t){la.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ai(s){const e=s.name;if(xg.has(e))return la.debug(`There were multiple attempts to register component ${e}.`),!1;xg.set(e,s);for(const t of Dh.values())d2(t,s);for(const t of DN.values())d2(t,s);return!0}function $o(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function kr(s){return s==null?!1:s.settings!==void 0}const LN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ka=new Ho("app","Firebase",LN);class ON{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ka.create("app-deleted",{appName:this._name})}}const Wo=IN;function oy(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:wg,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Ka.create("bad-app-name",{appName:String(l)});if(t||(t=Ox()),!t)throw Ka.create("no-options");const u=Dh.get(l);if(u){if(oa(t,u.options)&&oa(i,u.config))return u;throw Ka.create("duplicate-app",{appName:l})}const d=new qC(l);for(const g of xg.values())d.addComponent(g);const p=new ON(t,i,d);return Dh.set(l,p),p}function Au(s=wg){const e=Dh.get(s);if(!e&&s===wg&&Ox())return oy();if(!e)throw Ka.create("no-app",{appName:s});return e}function hr(s,e,t){let i=MN[s]??s;t&&(i+=`-${t}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),la.warn(d.join(" "));return}ai(new Wr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const PN="firebase-heartbeat-database",VN=1,fu="firebase-heartbeat-store";let Vp=null;function qx(){return Vp||(Vp=sf(PN,VN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(fu)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ka.create("idb-open",{originalErrorMessage:s.message})})),Vp}async function UN(s){try{const t=(await qx()).transaction(fu),i=await t.objectStore(fu).get(Hx(s));return await t.done,i}catch(e){if(e instanceof ui)la.warn(e.message);else{const t=Ka.create("idb-get",{originalErrorMessage:e?.message});la.warn(t.message)}}}async function h2(s,e){try{const i=(await qx()).transaction(fu,"readwrite");await i.objectStore(fu).put(e,Hx(s)),await i.done}catch(t){if(t instanceof ui)la.warn(t.message);else{const i=Ka.create("idb-set",{originalErrorMessage:t?.message});la.warn(i.message)}}}function Hx(s){return`${s.name}!${s.options.appId}`}const BN=1024,zN=30;class FN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=f2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>zN){const l=$N(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){la.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=f2(),{heartbeatsToSend:t,unsentEntries:i}=qN(this._heartbeatsCache.heartbeats),l=Mh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return la.warn(e),""}}}function f2(){return new Date().toISOString().substring(0,10)}function qN(s,e=BN){const t=[];let i=s.slice();for(const l of s){const u=t.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),m2(t)>e){u.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),m2(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class HN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ux()?Bx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await UN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return h2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return h2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function m2(s){return Mh(JSON.stringify({version:2,heartbeats:s})).length}function $N(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function WN(s){ai(new Wr("platform-logger",e=>new rN(e),"PRIVATE")),ai(new Wr("heartbeat",e=>new FN(e),"PRIVATE")),hr(bg,u2,s),hr(bg,u2,"esm2020"),hr("fire-js","")}WN("");function $x(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GN=$x,Wx=new Ho("auth","Firebase",$x());const Lh=new iy("@firebase/auth");function KN(s,...e){Lh.logLevel<=Vt.WARN&&Lh.warn(`Auth (${Wo}): ${s}`,...e)}function xh(s,...e){Lh.logLevel<=Vt.ERROR&&Lh.error(`Auth (${Wo}): ${s}`,...e)}function oi(s,...e){throw ly(s,...e)}function Ti(s,...e){return ly(s,...e)}function Gx(s,e,t){const i={...GN(),[e]:t};return new Ho("auth","Firebase",i).create(e,{appName:s.name})}function ra(s){return Gx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ly(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return Wx.create(s,...e)}function vt(s,e,...t){if(!s)throw ly(e,...t)}function ea(s){const e="INTERNAL ASSERTION FAILED: "+s;throw xh(e),new Error(e)}function ca(s,e){s||ea(e)}function _g(){return typeof self<"u"&&self.location?.href||""}function YN(){return p2()==="http:"||p2()==="https:"}function p2(){return typeof self<"u"&&self.location?.protocol||null}function QN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YN()||CC()||"connection"in navigator)?navigator.onLine:!0}function XN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,ca(t>e,"Short delay should be less than long delay!"),this.isMobile=TC()||NC()}get(){return QN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cy(s,e){ca(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Kx{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ea("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ea("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ea("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const JN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ZN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eA=new Ru(3e4,6e4);function ha(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function fa(s,e,t,i,l={}){return Yx(s,l,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const p=Nu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return SC()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&so(s.emulatorConfig.host)&&(y.credentials="include"),Kx.fetch()(await Qx(s,s.config.apiHost,t,p),y)})}async function Yx(s,e,t){s._canInitEmulator=!1;const i={...JN,...e};try{const l=new nA(s),u=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw ih(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw ih(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw ih(s,"user-disabled",d);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Gx(s,b,y);oi(s,b)}}catch(l){if(l instanceof ui)throw l;oi(s,"network-request-failed",{message:String(l)})}}async function Iu(s,e,t,i,l={}){const u=await fa(s,e,t,i,l);return"mfaPendingCredential"in u&&oi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Qx(s,e,t,i){const l=`${e}${t}?${i}`,u=s,d=u.config.emulator?cy(s.config,l):`${s.config.apiScheme}://${l}`;return ZN.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function tA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ti(this.auth,"network-request-failed")),eA.get())})}}function ih(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const l=Ti(s,e,i);return l.customData._tokenResponse=t,l}function g2(s){return s!==void 0&&s.enterprise!==void 0}class sA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rA(s,e){return fa(s,"GET","/v2/recaptchaConfig",ha(s,e))}async function iA(s,e){return fa(s,"POST","/v1/accounts:delete",e)}async function Oh(s,e){return fa(s,"POST","/v1/accounts:lookup",e)}function au(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aA(s,e=!1){const t=un(s),i=await t.getIdToken(e),l=uy(i);vt(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:i,authTime:au(Up(l.auth_time)),issuedAtTime:au(Up(l.iat)),expirationTime:au(Up(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Up(s){return Number(s)*1e3}function uy(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return xh("JWT malformed, contained fewer than 3 sections"),null;try{const l=Mx(t);return l?JSON.parse(l):(xh("Failed to decode base64 JWT payload"),null)}catch(l){return xh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function y2(s){const e=uy(s);return vt(e,"internal-error"),vt(typeof e.exp<"u","internal-error"),vt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mu(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ui&&oA(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function oA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class lA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class kg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ph(s){const e=s.auth,t=await s.getIdToken(),i=await mu(s,Oh(e,{idToken:t}));vt(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?Xx(l.providerUserInfo):[],d=uA(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!d?.length,y=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new kg(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function cA(s){const e=un(s);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uA(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function Xx(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function dA(s,e){const t=await Yx(s,{},async()=>{const i=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,d=await Qx(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&so(s.emulatorConfig.host)&&(g.credentials="include"),Kx.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hA(s,e){return fa(s,"POST","/v2/accounts:revokeToken",ha(s,e))}class Ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vt(e.idToken,"internal-error"),vt(typeof e.idToken<"u","internal-error"),vt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){vt(e.length!==0,"internal-error");const t=y2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(vt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:l,expiresIn:u}=await dA(e,t);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:l,expirationTime:u}=t,d=new Ol;return i&&(vt(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),l&&(vt(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(vt(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ol,this.toJSON())}_performRefresh(){return ea("not implemented")}}function Ua(s,e){vt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ri{constructor({uid:e,auth:t,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new lA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new kg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await mu(this,this.stsTokenManager.getToken(this.auth,e));return vt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return aA(this,e)}reload(){return cA(this)}_assign(e){this!==e&&(vt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kr(this.auth.app))return Promise.reject(ra(this.auth));const e=await this.getIdToken();return await mu(this,iA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,l=t.email??void 0,u=t.phoneNumber??void 0,d=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:P,providerData:G,stsTokenManager:q}=t;vt(E&&q,e,"internal-error");const z=Ol.fromJSON(this.name,q);vt(typeof E=="string",e,"internal-error"),Ua(i,e.name),Ua(l,e.name),vt(typeof T=="boolean",e,"internal-error"),vt(typeof P=="boolean",e,"internal-error"),Ua(u,e.name),Ua(d,e.name),Ua(p,e.name),Ua(g,e.name),Ua(y,e.name),Ua(b,e.name);const K=new ri({uid:E,auth:e,email:l,emailVerified:T,displayName:i,isAnonymous:P,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:z,createdAt:y,lastLoginAt:b});return G&&Array.isArray(G)&&(K.providerData=G.map(W=>({...W}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,t,i=!1){const l=new Ol;l.updateFromServerResponse(t);const u=new ri({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Ph(u),u}static async _fromGetAccountInfoResponse(e,t,i){const l=t.users[0];vt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Xx(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,p=new Ol;p.updateFromIdToken(i);const g=new ri({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new kg(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const v2=new Map;function ta(s){ca(s instanceof Function,"Expected a class definition");let e=v2.get(s);return e?(ca(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,v2.set(s,e),e)}class Jx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Jx.type="NONE";const b2=Jx;function _h(s,e,t){return`firebase:${s}:${e}:${t}`}class Pl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=_h(this.userKey,l.apiKey,u),this.fullPersistenceKey=_h("persistence",l.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Oh(this.auth,{idToken:e}).catch(()=>{});return t?ri._fromGetAccountInfoResponse(this.auth,t,e):null}return ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Pl(ta(b2),e,i);const l=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||ta(b2);const d=_h(i,e.config.apiKey,e.name);let p=null;for(const y of t)try{const b=await y._get(d);if(b){let E;if(typeof b=="string"){const T=await Oh(e,{idToken:b}).catch(()=>{});if(!T)break;E=await ri._fromGetAccountInfoResponse(e,T,b)}else E=ri._fromJSON(e,b);y!==u&&(p=E),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Pl(u,e,i):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new Pl(u,e,i))}}function w2(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r_(e))return"Blackberry";if(i_(e))return"Webos";if(e_(e))return"Safari";if((e.includes("chrome/")||t_(e))&&!e.includes("edge/"))return"Chrome";if(s_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function Zx(s=Hs()){return/firefox\//i.test(s)}function e_(s=Hs()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t_(s=Hs()){return/crios\//i.test(s)}function n_(s=Hs()){return/iemobile/i.test(s)}function s_(s=Hs()){return/android/i.test(s)}function r_(s=Hs()){return/blackberry/i.test(s)}function i_(s=Hs()){return/webos/i.test(s)}function dy(s=Hs()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function fA(s=Hs()){return dy(s)&&!!window.navigator?.standalone}function mA(){return AC()&&document.documentMode===10}function a_(s=Hs()){return dy(s)||s_(s)||i_(s)||r_(s)||/windows phone/i.test(s)||n_(s)}function o_(s,e=[]){let t;switch(s){case"Browser":t=w2(Hs());break;case"Worker":t=`${w2(Hs())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${i}`}class pA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function gA(s,e={}){return fa(s,"GET","/v2/passwordPolicy",ha(s,e))}const yA=6;class vA{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??yA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class bA{constructor(e,t,i,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x2(this),this.idTokenSubscription=new x2(this),this.beforeStateQueue=new pA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ta(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Oh(this,{idToken:e}),i=await ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(kr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kr(this.app))return Promise.reject(ra(this));const t=e?un(e):null;return t&&vt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&vt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kr(this.app)?Promise.reject(ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kr(this.app)?Promise.reject(ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gA(this),t=new vA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ho("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await hA(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ta(e)||this._popupRedirectResolver;vt(t,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[ta(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,l){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(vt(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&KN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ro(s){return un(s)}class x2{constructor(e){this.auth=e,this.observer=null,this.addObserver=PC(t=>this.observer=t)}get next(){return vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wA(s){rf=s}function l_(s){return rf.loadJS(s)}function xA(){return rf.recaptchaEnterpriseScript}function _A(){return rf.gapiScript}function kA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class EA{constructor(){this.enterprise=new TA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class TA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const jA="recaptcha-enterprise",c_="NO_RECAPTCHA";class SA{constructor(e){this.type=jA,this.auth=ro(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{rA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new sA(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,d,p){const g=window.grecaptcha;g2(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(c_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EA().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(p=>{if(!t&&g2(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=xA();g.length!==0&&(g+=p),l_(g).then(()=>{l(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function _2(s,e,t,i=!1,l=!1){const u=new SA(s);let d;if(l)d=c_;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Vh(s,e,t,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await _2(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await _2(s,e,t,t==="getOobCode");return i(s,d)}else return Promise.reject(u)})}function CA(s,e){const t=$o(s,"auth");if(t.isInitialized()){const l=t.getImmediate(),u=t.getOptions();if(oa(u,e??{}))return l;oi(l,"already-initialized")}return t.initialize({options:e})}function NA(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ta);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function AA(s,e,t){const i=ro(s);vt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=u_(e),{host:d,port:p}=RA(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},b=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){vt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),vt(oa(y,i.config.emulator)&&oa(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,so(d)?(sy(`${u}//${d}${g}`),ry("Auth",!0)):IA()}function u_(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function RA(s){const e=u_(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:k2(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:k2(d)}}}function k2(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function IA(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class hy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ea("not implemented")}_getIdTokenResponse(e){return ea("not implemented")}_linkToIdToken(e,t){return ea("not implemented")}_getReauthenticationResolver(e){return ea("not implemented")}}async function MA(s,e){return fa(s,"POST","/v1/accounts:signUp",e)}async function DA(s,e){return Iu(s,"POST","/v1/accounts:signInWithPassword",ha(s,e))}async function d_(s,e){return fa(s,"POST","/v1/accounts:sendOobCode",ha(s,e))}async function LA(s,e){return d_(s,e)}async function OA(s,e){return d_(s,e)}async function PA(s,e){return Iu(s,"POST","/v1/accounts:signInWithEmailLink",ha(s,e))}async function VA(s,e){return Iu(s,"POST","/v1/accounts:signInWithEmailLink",ha(s,e))}class pu extends hy{constructor(e,t,i,l=null){super("password",i),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new pu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new pu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vh(e,t,"signInWithPassword",DA);case"emailLink":return PA(e,{email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vh(e,i,"signUpPassword",MA);case"emailLink":return VA(e,{idToken:t,email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vl(s,e){return Iu(s,"POST","/v1/accounts:signInWithIdp",ha(s,e))}const UA="http://localhost";class Oo extends hy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=t;if(!i||!l)return null;const d=new Oo(i,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Vl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Vl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vl(e,t)}buildRequest(){const e={requestUri:UA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nu(t)}return e}}function BA(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zA(s){const e=Zc(eu(s)).link,t=e?Zc(eu(e)).deep_link_id:null,i=Zc(eu(s)).deep_link_id;return(i?Zc(eu(i)).link:null)||i||t||e||s}class fy{constructor(e){const t=Zc(eu(e)),i=t.apiKey??null,l=t.oobCode??null,u=BA(t.mode??null);vt(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=zA(e);try{return new fy(t)}catch{return null}}}class Zl{constructor(){this.providerId=Zl.PROVIDER_ID}static credential(e,t){return pu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=fy.parseLink(t);return vt(i,"argument-error"),pu._fromEmailAndCode(e,i.code,i.tenantId)}}Zl.PROVIDER_ID="password";Zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class h_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mu extends h_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ba extends Mu{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ba.credential(e.oauthAccessToken)}catch{return null}}}Ba.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ba.PROVIDER_ID="facebook.com";class za extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oo._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return za.credentialFromTaggedObject(e)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return za.credential(t,i)}catch{return null}}}za.GOOGLE_SIGN_IN_METHOD="google.com";za.PROVIDER_ID="google.com";class Fa extends Mu{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fa.credential(e.oauthAccessToken)}catch{return null}}}Fa.GITHUB_SIGN_IN_METHOD="github.com";Fa.PROVIDER_ID="github.com";class qa extends Mu{constructor(){super("twitter.com")}static credential(e,t){return Oo._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return qa.credential(t,i)}catch{return null}}}qa.TWITTER_SIGN_IN_METHOD="twitter.com";qa.PROVIDER_ID="twitter.com";async function FA(s,e){return Iu(s,"POST","/v1/accounts:signUp",ha(s,e))}class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,l=!1){const u=await ri._fromIdTokenResponse(e,i,l),d=E2(i);return new Po({user:u,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const l=E2(i);return new Po({user:e,providerId:l,_tokenResponse:i,operationType:t})}}function E2(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Uh extends ui{constructor(e,t,i,l){super(t.code,t.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Uh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,l){return new Uh(e,t,i,l)}}function f_(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Uh._fromErrorAndOperation(s,u,e,i):u})}async function qA(s,e,t=!1){const i=await mu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Po._forOperation(s,"link",i)}async function HA(s,e,t=!1){const{auth:i}=s;if(kr(i.app))return Promise.reject(ra(i));const l="reauthenticate";try{const u=await mu(s,f_(i,l,e,s),t);vt(u.idToken,i,"internal-error");const d=uy(u.idToken);vt(d,i,"internal-error");const{sub:p}=d;return vt(s.uid===p,i,"user-mismatch"),Po._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&oi(i,"user-mismatch"),u}}async function m_(s,e,t=!1){if(kr(s.app))return Promise.reject(ra(s));const i="signIn",l=await f_(s,i,e),u=await Po._fromIdTokenResponse(s,i,l);return t||await s._updateCurrentUser(u.user),u}async function $A(s,e){return m_(ro(s),e)}async function p_(s){const e=ro(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WA(s,e,t){const i=ro(s);await Vh(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",OA)}async function GA(s,e,t){if(kr(s.app))return Promise.reject(ra(s));const i=ro(s),d=await Vh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FA).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&p_(s),g}),p=await Po._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function KA(s,e,t){return kr(s.app)?Promise.reject(ra(s)):$A(un(s),Zl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&p_(s),i})}async function IO(s,e){const t=un(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:u}=await LA(t.auth,l);u!==s.email&&await s.reload()}function T2(s,e){return un(s).setPersistence(e)}function YA(s,e,t,i){return un(s).onIdTokenChanged(e,t,i)}function QA(s,e,t){return un(s).beforeAuthStateChanged(e,t)}function XA(s,e,t,i){return un(s).onAuthStateChanged(e,t,i)}function JA(s){return un(s).signOut()}const Bh="__sak";class g_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ZA=1e3,e4=10;class y_ extends g_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),l=this.localCache[t];i!==l&&e(t,l,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);mA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,e4):l()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},ZA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}y_.type="LOCAL";const Eg=y_;class v_ extends g_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}v_.type="SESSION";const my=v_;function t4(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const i=new af(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:l,data:u}=t.data,d=this.handlersMap[l];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(d).map(async y=>y(t.origin,u)),g=await t4(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];function py(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class n4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=py("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:l,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(T.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ji(){return window}function s4(s){ji().location.href=s}function b_(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function r4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i4(){return navigator?.serviceWorker?.controller||null}function a4(){return b_()?self:null}const w_="firebaseLocalStorageDb",o4=1,zh="firebaseLocalStorage",x_="fbase_key";class Du{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function of(s,e){return s.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function l4(){const s=indexedDB.deleteDatabase(w_);return new Du(s).toPromise()}function Tg(){const s=indexedDB.open(w_,o4);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(zh,{keyPath:x_})}catch(l){t(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(zh)?e(i):(i.close(),await l4(),e(await Tg()))})})}async function j2(s,e,t){const i=of(s,!0).put({[x_]:e,value:t});return new Du(i).toPromise()}async function c4(s,e){const t=of(s,!1).get(e),i=await new Du(t).toPromise();return i===void 0?null:i.value}function S2(s,e){const t=of(s,!0).delete(e);return new Du(t).toPromise()}const u4=800,d4=3;class __{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>d4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return b_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(a4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await r4(),!this.activeServiceWorker)return;this.sender=new n4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tg();return await j2(e,Bh,"1"),await S2(e,Bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>j2(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>c4(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>S2(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=of(l,!1).getAll();return new Du(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}__.type="LOCAL";const h4=__;new Ru(3e4,6e4);function f4(s,e){return e?ta(e):(vt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class gy extends hy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function m4(s){return m_(s.auth,new gy(s),s.bypassAuthState)}function p4(s){const{auth:e,user:t}=s;return vt(t,e,"internal-error"),HA(t,new gy(s),s.bypassAuthState)}async function g4(s){const{auth:e,user:t}=s;return vt(t,e,"internal-error"),qA(t,new gy(s),s.bypassAuthState)}class k_{constructor(e,t,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m4;case"linkViaPopup":case"linkViaRedirect":return g4;case"reauthViaPopup":case"reauthViaRedirect":return p4;default:oi(this.auth,"internal-error")}}resolve(e){ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const y4=new Ru(2e3,1e4);class Ll extends k_{constructor(e,t,i,l,u){super(e,t,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Ll.currentPopupAction&&Ll.currentPopupAction.cancel(),Ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vt(e,this.auth,"internal-error"),e}async onExecution(){ca(this.filter.length===1,"Popup operations only handle one event");const e=py();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y4.get())};e()}}Ll.currentPopupAction=null;const v4="pendingRedirect",kh=new Map;class b4 extends k_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=kh.get(this.auth._key());if(!e){try{const i=await w4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}kh.set(this.auth._key(),e)}return this.bypassAuthState||kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w4(s,e){const t=k4(e),i=_4(s);if(!await i._isAvailable())return!1;const l=await i._get(t)==="true";return await i._remove(t),l}function x4(s,e){kh.set(s._key(),e)}function _4(s){return ta(s._redirectPersistence)}function k4(s){return _h(v4,s.config.apiKey,s.name)}async function E4(s,e,t=!1){if(kr(s.app))return Promise.reject(ra(s));const i=ro(s),l=f4(i,e),d=await new b4(i,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}const T4=600*1e3;class j4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!E_(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T4&&this.cachedEventUids.clear(),this.cachedEventUids.has(C2(e))}saveEventToCache(e){this.cachedEventUids.add(C2(e)),this.lastProcessedEventTime=Date.now()}}function C2(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function E_({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function S4(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E_(s);default:return!1}}async function C4(s,e={}){return fa(s,"GET","/v1/projects",e)}const N4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A4=/^https?/;async function R4(s){if(s.config.emulator)return;const{authorizedDomains:e}=await C4(s);for(const t of e)try{if(I4(t))return}catch{}oi(s,"unauthorized-domain")}function I4(s){const e=_g(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!A4.test(t))return!1;if(N4.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const M4=new Ru(3e4,6e4);function N2(){const s=ji().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function D4(s){return new Promise((e,t)=>{function i(){N2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N2(),t(Ti(s,"network-request-failed"))},timeout:M4.get()})}if(ji().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ji().gapi?.load)i();else{const l=kA("iframefcb");return ji()[l]=()=>{gapi.load?i():t(Ti(s,"network-request-failed"))},l_(`${_A()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function L4(s){return Eh=Eh||D4(s),Eh}const O4=new Ru(5e3,15e3),P4="__/auth/iframe",V4="emulator/auth/iframe",U4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z4(s){const e=s.config;vt(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?cy(e,V4):`https://${s.config.authDomain}/${P4}`,i={apiKey:e.apiKey,appName:s.name,v:Wo},l=B4.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${Nu(i).slice(1)}`}async function F4(s){const e=await L4(s),t=ji().gapi;return vt(t,s,"internal-error"),e.open({where:document.body,url:z4(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U4,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const d=Ti(s,"network-request-failed"),p=ji().setTimeout(()=>{u(d)},O4.get());function g(){ji().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(d)})}))}const q4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H4=500,$4=600,W4="_blank",G4="http://localhost";class A2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K4(s,e,t,i=H4,l=$4){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...q4,width:i.toString(),height:l.toString(),top:u,left:d},y=Hs().toLowerCase();t&&(p=t_(y)?W4:t),Zx(y)&&(e=e||G4,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[P,G])=>`${T}${P}=${G},`,"");if(fA(y)&&p!=="_self")return Y4(e||"",p),new A2(null);const E=window.open(e||"",p,b);vt(E,s,"popup-blocked");try{E.focus()}catch{}return new A2(E)}function Y4(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const Q4="__/auth/handler",X4="emulator/auth/handler",J4=encodeURIComponent("fac");async function R2(s,e,t,i,l,u){vt(s.config.authDomain,s,"auth-domain-config-required"),vt(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Wo,eventId:l};if(e instanceof h_){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",OC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))d[b]=E}if(e instanceof Mu){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),y=g?`#${J4}=${encodeURIComponent(g)}`:"";return`${Z4(s)}?${Nu(p).slice(1)}${y}`}function Z4({config:s}){return s.emulator?cy(s,X4):`https://${s.authDomain}/${Q4}`}const Bp="webStorageSupport";class eR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=my,this._completeRedirectFn=E4,this._overrideRedirectResult=x4}async _openPopup(e,t,i,l){ca(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await R2(e,t,i,_g(),l);return K4(e,u,py())}async _openRedirect(e,t,i,l){await this._originValidation(e);const u=await R2(e,t,i,_g(),l);return s4(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:u}=this.eventManagers[t];return l?Promise.resolve(l):(ca(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await F4(e),i=new j4(e);return t.register("authEvent",l=>(vt(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bp,{type:Bp},l=>{const u=l?.[0]?.[Bp];u!==void 0&&t(!!u),oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=R4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return a_()||e_()||dy()}}const tR=eR;var I2="@firebase/auth",M2="1.12.0";class nR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rR(s){ai(new Wr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;vt(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o_(s)},y=new bA(i,l,u,g);return NA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ai(new Wr("auth-internal",e=>{const t=ro(e.getProvider("auth").getImmediate());return(i=>new nR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),hr(I2,M2,sR(s)),hr(I2,M2,"esm2020")}const iR=300,aR=Px("authIdTokenMaxAge")||iR;let D2=null;const oR=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>aR)return;const l=t?.token;D2!==l&&(D2=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function T_(s=Au()){const e=$o(s,"auth");if(e.isInitialized())return e.getImmediate();const t=CA(s,{popupRedirectResolver:tR,persistence:[h4,Eg,my]}),i=Px("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=oR(u.toString());QA(t,d,()=>d(t.currentUser)),YA(t,p=>d(p))}}const l=Dx("auth");return l&&AA(t,`http://${l}`),t}function lR(){return document.getElementsByTagName("head")?.[0]??document}wA({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=Ti("internal-error");u.customData=l,t(u)},i.type="text/javascript",i.charset="UTF-8",lR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rR("Browser");var L2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ya,j_;(function(){var s;function e(C,j){function I(){}I.prototype=j.prototype,C.F=j.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(V,L,D){for(var R=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)R[Me-2]=arguments[Me];return j.prototype[L].apply(V,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(C,j,I){I||(I=0);const V=Array(16);if(typeof j=="string")for(var L=0;L<16;++L)V[L]=j.charCodeAt(I++)|j.charCodeAt(I++)<<8|j.charCodeAt(I++)<<16|j.charCodeAt(I++)<<24;else for(L=0;L<16;++L)V[L]=j[I++]|j[I++]<<8|j[I++]<<16|j[I++]<<24;j=C.g[0],I=C.g[1],L=C.g[2];let D=C.g[3],R;R=j+(D^I&(L^D))+V[0]+3614090360&4294967295,j=I+(R<<7&4294967295|R>>>25),R=D+(L^j&(I^L))+V[1]+3905402710&4294967295,D=j+(R<<12&4294967295|R>>>20),R=L+(I^D&(j^I))+V[2]+606105819&4294967295,L=D+(R<<17&4294967295|R>>>15),R=I+(j^L&(D^j))+V[3]+3250441966&4294967295,I=L+(R<<22&4294967295|R>>>10),R=j+(D^I&(L^D))+V[4]+4118548399&4294967295,j=I+(R<<7&4294967295|R>>>25),R=D+(L^j&(I^L))+V[5]+1200080426&4294967295,D=j+(R<<12&4294967295|R>>>20),R=L+(I^D&(j^I))+V[6]+2821735955&4294967295,L=D+(R<<17&4294967295|R>>>15),R=I+(j^L&(D^j))+V[7]+4249261313&4294967295,I=L+(R<<22&4294967295|R>>>10),R=j+(D^I&(L^D))+V[8]+1770035416&4294967295,j=I+(R<<7&4294967295|R>>>25),R=D+(L^j&(I^L))+V[9]+2336552879&4294967295,D=j+(R<<12&4294967295|R>>>20),R=L+(I^D&(j^I))+V[10]+4294925233&4294967295,L=D+(R<<17&4294967295|R>>>15),R=I+(j^L&(D^j))+V[11]+2304563134&4294967295,I=L+(R<<22&4294967295|R>>>10),R=j+(D^I&(L^D))+V[12]+1804603682&4294967295,j=I+(R<<7&4294967295|R>>>25),R=D+(L^j&(I^L))+V[13]+4254626195&4294967295,D=j+(R<<12&4294967295|R>>>20),R=L+(I^D&(j^I))+V[14]+2792965006&4294967295,L=D+(R<<17&4294967295|R>>>15),R=I+(j^L&(D^j))+V[15]+1236535329&4294967295,I=L+(R<<22&4294967295|R>>>10),R=j+(L^D&(I^L))+V[1]+4129170786&4294967295,j=I+(R<<5&4294967295|R>>>27),R=D+(I^L&(j^I))+V[6]+3225465664&4294967295,D=j+(R<<9&4294967295|R>>>23),R=L+(j^I&(D^j))+V[11]+643717713&4294967295,L=D+(R<<14&4294967295|R>>>18),R=I+(D^j&(L^D))+V[0]+3921069994&4294967295,I=L+(R<<20&4294967295|R>>>12),R=j+(L^D&(I^L))+V[5]+3593408605&4294967295,j=I+(R<<5&4294967295|R>>>27),R=D+(I^L&(j^I))+V[10]+38016083&4294967295,D=j+(R<<9&4294967295|R>>>23),R=L+(j^I&(D^j))+V[15]+3634488961&4294967295,L=D+(R<<14&4294967295|R>>>18),R=I+(D^j&(L^D))+V[4]+3889429448&4294967295,I=L+(R<<20&4294967295|R>>>12),R=j+(L^D&(I^L))+V[9]+568446438&4294967295,j=I+(R<<5&4294967295|R>>>27),R=D+(I^L&(j^I))+V[14]+3275163606&4294967295,D=j+(R<<9&4294967295|R>>>23),R=L+(j^I&(D^j))+V[3]+4107603335&4294967295,L=D+(R<<14&4294967295|R>>>18),R=I+(D^j&(L^D))+V[8]+1163531501&4294967295,I=L+(R<<20&4294967295|R>>>12),R=j+(L^D&(I^L))+V[13]+2850285829&4294967295,j=I+(R<<5&4294967295|R>>>27),R=D+(I^L&(j^I))+V[2]+4243563512&4294967295,D=j+(R<<9&4294967295|R>>>23),R=L+(j^I&(D^j))+V[7]+1735328473&4294967295,L=D+(R<<14&4294967295|R>>>18),R=I+(D^j&(L^D))+V[12]+2368359562&4294967295,I=L+(R<<20&4294967295|R>>>12),R=j+(I^L^D)+V[5]+4294588738&4294967295,j=I+(R<<4&4294967295|R>>>28),R=D+(j^I^L)+V[8]+2272392833&4294967295,D=j+(R<<11&4294967295|R>>>21),R=L+(D^j^I)+V[11]+1839030562&4294967295,L=D+(R<<16&4294967295|R>>>16),R=I+(L^D^j)+V[14]+4259657740&4294967295,I=L+(R<<23&4294967295|R>>>9),R=j+(I^L^D)+V[1]+2763975236&4294967295,j=I+(R<<4&4294967295|R>>>28),R=D+(j^I^L)+V[4]+1272893353&4294967295,D=j+(R<<11&4294967295|R>>>21),R=L+(D^j^I)+V[7]+4139469664&4294967295,L=D+(R<<16&4294967295|R>>>16),R=I+(L^D^j)+V[10]+3200236656&4294967295,I=L+(R<<23&4294967295|R>>>9),R=j+(I^L^D)+V[13]+681279174&4294967295,j=I+(R<<4&4294967295|R>>>28),R=D+(j^I^L)+V[0]+3936430074&4294967295,D=j+(R<<11&4294967295|R>>>21),R=L+(D^j^I)+V[3]+3572445317&4294967295,L=D+(R<<16&4294967295|R>>>16),R=I+(L^D^j)+V[6]+76029189&4294967295,I=L+(R<<23&4294967295|R>>>9),R=j+(I^L^D)+V[9]+3654602809&4294967295,j=I+(R<<4&4294967295|R>>>28),R=D+(j^I^L)+V[12]+3873151461&4294967295,D=j+(R<<11&4294967295|R>>>21),R=L+(D^j^I)+V[15]+530742520&4294967295,L=D+(R<<16&4294967295|R>>>16),R=I+(L^D^j)+V[2]+3299628645&4294967295,I=L+(R<<23&4294967295|R>>>9),R=j+(L^(I|~D))+V[0]+4096336452&4294967295,j=I+(R<<6&4294967295|R>>>26),R=D+(I^(j|~L))+V[7]+1126891415&4294967295,D=j+(R<<10&4294967295|R>>>22),R=L+(j^(D|~I))+V[14]+2878612391&4294967295,L=D+(R<<15&4294967295|R>>>17),R=I+(D^(L|~j))+V[5]+4237533241&4294967295,I=L+(R<<21&4294967295|R>>>11),R=j+(L^(I|~D))+V[12]+1700485571&4294967295,j=I+(R<<6&4294967295|R>>>26),R=D+(I^(j|~L))+V[3]+2399980690&4294967295,D=j+(R<<10&4294967295|R>>>22),R=L+(j^(D|~I))+V[10]+4293915773&4294967295,L=D+(R<<15&4294967295|R>>>17),R=I+(D^(L|~j))+V[1]+2240044497&4294967295,I=L+(R<<21&4294967295|R>>>11),R=j+(L^(I|~D))+V[8]+1873313359&4294967295,j=I+(R<<6&4294967295|R>>>26),R=D+(I^(j|~L))+V[15]+4264355552&4294967295,D=j+(R<<10&4294967295|R>>>22),R=L+(j^(D|~I))+V[6]+2734768916&4294967295,L=D+(R<<15&4294967295|R>>>17),R=I+(D^(L|~j))+V[13]+1309151649&4294967295,I=L+(R<<21&4294967295|R>>>11),R=j+(L^(I|~D))+V[4]+4149444226&4294967295,j=I+(R<<6&4294967295|R>>>26),R=D+(I^(j|~L))+V[11]+3174756917&4294967295,D=j+(R<<10&4294967295|R>>>22),R=L+(j^(D|~I))+V[2]+718787259&4294967295,L=D+(R<<15&4294967295|R>>>17),R=I+(D^(L|~j))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+j&4294967295,C.g[1]=C.g[1]+(L+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+D&4294967295}i.prototype.v=function(C,j){j===void 0&&(j=C.length);const I=j-this.blockSize,V=this.C;let L=this.h,D=0;for(;D<j;){if(L==0)for(;D<=I;)l(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<j;)if(V[L++]=C.charCodeAt(D++),L==this.blockSize){l(this,V),L=0;break}}else for(;D<j;)if(V[L++]=C[D++],L==this.blockSize){l(this,V),L=0;break}}this.h=L,this.o+=j},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var j=1;j<C.length-8;++j)C[j]=0;j=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=j&255,j/=256;for(this.v(C),C=Array(16),j=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)C[j++]=this.g[I]>>>V&255;return C};function u(C,j){var I=p;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=j(C)}function d(C,j){this.h=j;const I=[];let V=!0;for(let L=C.length-1;L>=0;L--){const D=C[L]|0;V&&D==j||(I[L]=D,V=!1)}this.g=I}var p={};function g(C){return-128<=C&&C<128?u(C,function(j){return new d([j|0],j<0?-1:0)}):new d([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return z(y(-C));const j=[];let I=1;for(let V=0;C>=I;V++)j[V]=C/I|0,I*=4294967296;return new d(j,0)}function b(C,j){if(C.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(C.charAt(0)=="-")return z(b(C.substring(1),j));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(j,8));let V=E;for(let D=0;D<C.length;D+=8){var L=Math.min(8,C.length-D);const R=parseInt(C.substring(D,D+L),j);L<8?(L=y(Math.pow(j,L)),V=V.j(L).add(y(R))):(V=V.j(I),V=V.add(y(R)))}return V}var E=g(0),T=g(1),P=g(16777216);s=d.prototype,s.m=function(){if(q(this))return-z(this).m();let C=0,j=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);C+=(V>=0?V:4294967296+V)*j,j*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(G(this))return"0";if(q(this))return"-"+z(this).toString(C);const j=y(Math.pow(C,6));var I=this;let V="";for(;;){const L=oe(I,j).g;I=K(I,L.j(j));let D=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=L,G(I))return D+V;for(;D.length<6;)D="0"+D;V=D+V}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function G(C){if(C.h!=0)return!1;for(let j=0;j<C.g.length;j++)if(C.g[j]!=0)return!1;return!0}function q(C){return C.h==-1}s.l=function(C){return C=K(this,C),q(C)?-1:G(C)?0:1};function z(C){const j=C.g.length,I=[];for(let V=0;V<j;V++)I[V]=~C.g[V];return new d(I,~C.h).add(T)}s.abs=function(){return q(this)?z(this):this},s.add=function(C){const j=Math.max(this.g.length,C.g.length),I=[];let V=0;for(let L=0;L<=j;L++){let D=V+(this.i(L)&65535)+(C.i(L)&65535),R=(D>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);V=R>>>16,D&=65535,R&=65535,I[L]=R<<16|D}return new d(I,I[I.length-1]&-2147483648?-1:0)};function K(C,j){return C.add(z(j))}s.j=function(C){if(G(this)||G(C))return E;if(q(this))return q(C)?z(this).j(z(C)):z(z(this).j(C));if(q(C))return z(this.j(z(C)));if(this.l(P)<0&&C.l(P)<0)return y(this.m()*C.m());const j=this.g.length+C.g.length,I=[];for(var V=0;V<2*j;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let L=0;L<C.g.length;L++){const D=this.i(V)>>>16,R=this.i(V)&65535,Me=C.i(L)>>>16,Ye=C.i(L)&65535;I[2*V+2*L]+=R*Ye,W(I,2*V+2*L),I[2*V+2*L+1]+=D*Ye,W(I,2*V+2*L+1),I[2*V+2*L+1]+=R*Me,W(I,2*V+2*L+1),I[2*V+2*L+2]+=D*Me,W(I,2*V+2*L+2)}for(C=0;C<j;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=j;C<2*j;C++)I[C]=0;return new d(I,0)};function W(C,j){for(;(C[j]&65535)!=C[j];)C[j+1]+=C[j]>>>16,C[j]&=65535,j++}function Q(C,j){this.g=C,this.h=j}function oe(C,j){if(G(j))throw Error("division by zero");if(G(C))return new Q(E,E);if(q(C))return j=oe(z(C),j),new Q(z(j.g),z(j.h));if(q(j))return j=oe(C,z(j)),new Q(z(j.g),j.h);if(C.g.length>30){if(q(C)||q(j))throw Error("slowDivide_ only works with positive integers.");for(var I=T,V=j;V.l(C)<=0;)I=Te(I),V=Te(V);var L=be(I,1),D=be(V,1);for(V=be(V,2),I=be(I,2);!G(V);){var R=D.add(V);R.l(C)<=0&&(L=L.add(I),D=R),V=be(V,1),I=be(I,1)}return j=K(C,L.j(j)),new Q(L,j)}for(L=E;C.l(j)>=0;){for(I=Math.max(1,Math.floor(C.m()/j.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),D=y(I),R=D.j(j);q(R)||R.l(C)>0;)I-=V,D=y(I),R=D.j(j);G(D)&&(D=T),L=L.add(D),C=K(C,R)}return new Q(L,C)}s.B=function(C){return oe(this,C).h},s.and=function(C){const j=Math.max(this.g.length,C.g.length),I=[];for(let V=0;V<j;V++)I[V]=this.i(V)&C.i(V);return new d(I,this.h&C.h)},s.or=function(C){const j=Math.max(this.g.length,C.g.length),I=[];for(let V=0;V<j;V++)I[V]=this.i(V)|C.i(V);return new d(I,this.h|C.h)},s.xor=function(C){const j=Math.max(this.g.length,C.g.length),I=[];for(let V=0;V<j;V++)I[V]=this.i(V)^C.i(V);return new d(I,this.h^C.h)};function Te(C){const j=C.g.length+1,I=[];for(let V=0;V<j;V++)I[V]=C.i(V)<<1|C.i(V-1)>>>31;return new d(I,C.h)}function be(C,j){const I=j>>5;j%=32;const V=C.g.length-I,L=[];for(let D=0;D<V;D++)L[D]=j>0?C.i(D+I)>>>j|C.i(D+I+1)<<32-j:C.i(D+I);return new d(L,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,j_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Ya=d}).apply(typeof L2<"u"?L2:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var S_,tu,C_,Th,jg,N_,A_,R_;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var v=0;v<h.length;++v){var k=h[v];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var i=t(this);function l(h,v){if(v)e:{var k=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var J=h[A];if(!(J in k))break e;k=k[J]}h=h[h.length-1],A=k[h],v=v(A),v!=A&&v!=null&&e(k,h,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(v){var k=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&k.push([A,v[A]]);return k}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,k){return h.call.apply(h.bind,arguments)}function y(h,v,k){return y=g,y.apply(null,arguments)}function b(h,v){var k=Array.prototype.slice.call(arguments,1);return function(){var A=k.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function E(h,v){function k(){}k.prototype=v.prototype,h.Z=v.prototype,h.prototype=new k,h.prototype.constructor=h,h.Ob=function(A,J,ce){for(var Le=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)Le[jt-2]=arguments[jt];return v.prototype[J].apply(A,Le)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function P(h){const v=h.length;if(v>0){const k=Array(v);for(let A=0;A<v;A++)k[A]=h[A];return k}return[]}function G(h,v){for(let A=1;A<arguments.length;A++){const J=arguments[A];var k=typeof J;if(k=k!="object"?k:J?Array.isArray(J)?"array":k:"null",k=="array"||k=="object"&&typeof J.length=="number"){k=h.length||0;const ce=J.length||0;h.length=k+ce;for(let Le=0;Le<ce;Le++)h[k+Le]=J[Le]}else h.push(J)}}class q{constructor(v,k){this.i=v,this.j=k,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function z(h){d.setTimeout(()=>{throw h},0)}function K(){var h=C;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class W{constructor(){this.h=this.g=null}add(v,k){const A=Q.get();A.set(v,k),this.h?this.h.next=A:this.g=A,this.h=A}}var Q=new q(()=>new oe,h=>h.reset());class oe{constructor(){this.next=this.g=this.h=null}set(v,k){this.h=v,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,be=!1,C=new W,j=()=>{const h=Promise.resolve(void 0);Te=()=>{h.then(I)}};function I(){for(var h;h=K();){try{h.h.call(h.g)}catch(k){z(k)}var v=Q;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}be=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const k=()=>{};d.addEventListener("test",k,v),d.removeEventListener("test",k,v)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function Me(h,v){L.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}E(Me,L),Me.prototype.init=function(h,v){const k=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(k=="mouseover"?v=h.fromElement:k=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ye="closure_listenable_"+(Math.random()*1e6|0),ee=0;function Se(h,v,k,A,J){this.listener=h,this.proxy=null,this.src=v,this.type=k,this.capture=!!A,this.ha=J,this.key=++ee,this.da=this.fa=!1}function Ie(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ce(h,v,k){for(const A in h)v.call(k,h[A],A,h)}function X(h,v){for(const k in h)v.call(void 0,h[k],k,h)}function O(h){const v={};for(const k in h)v[k]=h[k];return v}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(h,v){let k,A;for(let J=1;J<arguments.length;J++){A=arguments[J];for(k in A)h[k]=A[k];for(let ce=0;ce<re.length;ce++)k=re[ce],Object.prototype.hasOwnProperty.call(A,k)&&(h[k]=A[k])}}function ke(h){this.src=h,this.g={},this.h=0}ke.prototype.add=function(h,v,k,A,J){const ce=h.toString();h=this.g[ce],h||(h=this.g[ce]=[],this.h++);const Le=Ee(h,v,A,J);return Le>-1?(v=h[Le],k||(v.fa=!1)):(v=new Se(v,this.src,ce,!!A,J),v.fa=k,h.push(v)),v};function xe(h,v){const k=v.type;if(k in h.g){var A=h.g[k],J=Array.prototype.indexOf.call(A,v,void 0),ce;(ce=J>=0)&&Array.prototype.splice.call(A,J,1),ce&&(Ie(v),h.g[k].length==0&&(delete h.g[k],h.h--))}}function Ee(h,v,k,A){for(let J=0;J<h.length;++J){const ce=h[J];if(!ce.da&&ce.listener==v&&ce.capture==!!k&&ce.ha==A)return J}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),et={};function Oe(h,v,k,A,J){if(Array.isArray(v)){for(let ce=0;ce<v.length;ce++)Oe(h,v[ce],k,A,J);return null}return k=de(k),h&&h[Ye]?h.J(v,k,p(A)?!!A.capture:!1,J):Lt(h,v,k,!1,A,J)}function Lt(h,v,k,A,J,ce){if(!v)throw Error("Invalid event type");const Le=p(J)?!!J.capture:!!J;let jt=lt(h);if(jt||(h[Pe]=jt=new ke(h)),k=jt.add(v,k,A,Le,ce),k.proxy)return k;if(A=Xt(),k.proxy=A,A.src=h,A.listener=k,h.addEventListener)D||(J=Le),J===void 0&&(J=!1),h.addEventListener(v.toString(),A,J);else if(h.attachEvent)h.attachEvent(nt(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Xt(){function h(k){return v.call(h.src,h.listener,k)}const v=ft;return h}function In(h,v,k,A,J){if(Array.isArray(v))for(var ce=0;ce<v.length;ce++)In(h,v[ce],k,A,J);else A=p(A)?!!A.capture:!!A,k=de(k),h&&h[Ye]?(h=h.i,ce=String(v).toString(),ce in h.g&&(v=h.g[ce],k=Ee(v,k,A,J),k>-1&&(Ie(v[k]),Array.prototype.splice.call(v,k,1),v.length==0&&(delete h.g[ce],h.h--)))):h&&(h=lt(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Ee(v,k,A,J)),(k=h>-1?v[h]:null)&&Ct(k))}function Ct(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Ye])xe(v.i,h);else{var k=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(k,A,h.capture):v.detachEvent?v.detachEvent(nt(k),A):v.addListener&&v.removeListener&&v.removeListener(A),(k=lt(v))?(xe(k,h),k.h==0&&(k.src=null,v[Pe]=null)):Ie(h)}}}function nt(h){return h in et?et[h]:et[h]="on"+h}function ft(h,v){if(h.da)h=!0;else{v=new Me(v,this);const k=h.listener,A=h.ha||h.src;h.fa&&Ct(h),h=k.call(A,v)}return h}function lt(h){return h=h[Pe],h instanceof ke?h:null}var Mn="__closure_events_fn_"+(Math.random()*1e9>>>0);function de(h){return typeof h=="function"?h:(h[Mn]||(h[Mn]=function(v){return h.handleEvent(v)}),h[Mn])}function Tt(){V.call(this),this.i=new ke(this),this.M=this,this.G=null}E(Tt,V),Tt.prototype[Ye]=!0,Tt.prototype.removeEventListener=function(h,v,k,A){In(this,h,v,k,A)};function mt(h,v){var k,A=h.G;if(A)for(k=[];A;A=A.G)k.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new L(v,h);else if(v instanceof L)v.target=v.target||h;else{var J=v;v=new L(A,h),we(v,J)}J=!0;let ce,Le;if(k)for(Le=k.length-1;Le>=0;Le--)ce=v.g=k[Le],J=It(ce,A,!0,v)&&J;if(ce=v.g=h,J=It(ce,A,!0,v)&&J,J=It(ce,A,!1,v)&&J,k)for(Le=0;Le<k.length;Le++)ce=v.g=k[Le],J=It(ce,A,!1,v)&&J}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const k=h.g[v];for(let A=0;A<k.length;A++)Ie(k[A]);delete h.g[v],h.h--}}this.G=null},Tt.prototype.J=function(h,v,k,A){return this.i.add(String(h),v,!1,k,A)},Tt.prototype.K=function(h,v,k,A){return this.i.add(String(h),v,!0,k,A)};function It(h,v,k,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let J=!0;for(let ce=0;ce<v.length;++ce){const Le=v[ce];if(Le&&!Le.da&&Le.capture==k){const jt=Le.listener,ss=Le.ha||Le.src;Le.fa&&xe(h.i,Le),J=jt.call(ss,A)!==!1&&J}}return J&&!A.defaultPrevented}function Xe(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Et(h){h.g=Xe(()=>{h.g=null,h.i&&(h.i=!1,Et(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class pt extends V{constructor(v,k){super(),this.m=v,this.l=k,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(h){V.call(this),this.h=h,this.g={}}E(Jt,V);var js=[];function es(h){Ce(h.g,function(v,k){this.g.hasOwnProperty(k)&&Ct(v)},h),h.g={}}Jt.prototype.N=function(){Jt.Z.N.call(this),es(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=d.JSON.stringify,se=d.JSON.parse,Ne=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ht(){}function gt(){}var st={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function He(){L.call(this,"d")}E(He,L);function tt(){L.call(this,"c")}E(tt,L);var Fe={},Zt=null;function nn(){return Zt=Zt||new Tt}Fe.Ia="serverreachability";function jn(h){L.call(this,Fe.Ia,h)}E(jn,L);function Dn(h){const v=nn();mt(v,new jn(v))}Fe.STAT_EVENT="statevent";function Hn(h,v){L.call(this,Fe.STAT_EVENT,h),this.stat=v}E(Hn,L);function zt(h){const v=nn();mt(v,new Hn(v,h))}Fe.Ja="timingevent";function Ln(h,v){L.call(this,Fe.Ja,h),this.size=v}E(Ln,L);function _n(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function sn(){this.g=!0}sn.prototype.ua=function(){this.g=!1};function fr(h,v,k,A,J,ce){h.info(function(){if(h.g)if(ce){var Le="",jt=ce.split("&");for(let an=0;an<jt.length;an++){var ss=jt[an].split("=");if(ss.length>1){const Vn=ss[0];ss=ss[1];const Dr=Vn.split("_");Le=Dr.length>=2&&Dr[1]=="type"?Le+(Vn+"="+ss+"&"):Le+(Vn+"=redacted&")}}}else Le=null;else Le=ce;return"XMLHTTP REQ ("+A+") [attempt "+J+"]: "+v+`
`+k+`
`+Le})}function le(h,v,k,A,J,ce,Le){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+J+"]: "+v+`
`+k+`
`+ce+" "+Le})}function Re(h,v,k,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+ct(h,k)+(A?" "+A:"")})}function Ge(h,v){h.info(function(){return"TIMEOUT: "+v})}sn.prototype.info=function(){};function ct(h,v){if(!h.g)return v;if(!v)return null;try{const ce=JSON.parse(v);if(ce){for(h=0;h<ce.length;h++)if(Array.isArray(ce[h])){var k=ce[h];if(!(k.length<2)){var A=k[1];if(Array.isArray(A)&&!(A.length<1)){var J=A[0];if(J!="noop"&&J!="stop"&&J!="close")for(let Le=1;Le<A.length;Le++)A[Le]=""}}}}return Wt(ce)}catch{return v}}var at={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kn;function ln(){}E(ln,ht),ln.prototype.g=function(){return new XMLHttpRequest},kn=new ln;function pn(h){return encodeURIComponent(String(h))}function Ss(h){var v=1;h=h.split(":");const k=[];for(;v>0&&h.length;)k.push(h.shift()),v--;return h.length&&k.push(h.join(":")),k}function ts(h,v,k,A){this.j=h,this.i=v,this.l=k,this.S=A||1,this.V=new Jt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new os}function os(){this.i=null,this.g="",this.h=!1}var Gt={},En={};function Cs(h,v,k){h.M=1,h.A=zn(ze(v)),h.u=k,h.R=!0,Nr(h,null)}function Nr(h,v){h.F=Date.now(),$n(h),h.B=ze(h.A);var k=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),As(k.i,"t",A),h.C=0,k=h.j.L,h.h=new os,h.g=Xu(h.j,k?v:null,!h.u),h.P>0&&(h.O=new pt(y(h.Y,h,h.g),h.P)),v=h.V,k=h.g,A=h.ba;var J="readystatechange";Array.isArray(J)||(J&&(js[0]=J.toString()),J=js);for(let ce=0;ce<J.length;ce++){const Le=Oe(k,J[ce],A||v.handleEvent,!1,v.h||v);if(!Le)break;v.g[Le.key]=Le}v=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Dn(),fr(h.i,h.v,h.B,h.l,h.S,h.u)}ts.prototype.ba=function(h){h=h.target;const v=this.O;v&&Kt(h)==3?v.j():this.Y(h)},ts.prototype.Y=function(h){try{if(h==this.g)e:{const jt=Kt(this.g),ss=this.g.ya(),an=this.g.ca();if(!(jt<3)&&(jt!=3||this.g&&(this.h.h||this.g.la()||rn(this.g)))){this.K||jt!=4||ss==7||(ss==8||an<=0?Dn(3):Dn(2)),ls(this);var v=this.g.ca();this.X=v;var k=di(this);if(this.o=v==200,le(this.i,this.v,this.B,this.l,this.S,jt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var A,J=this.g;if((A=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var ce=A;break t}}ce=null}if(h=ce)Re(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wn(this,h);else{this.o=!1,this.m=3,zt(12),On(this),Sn(this);break e}}if(this.R){h=!0;let Vn;for(;!this.K&&this.C<k.length;)if(Vn=mr(this,k),Vn==En){jt==4&&(this.m=4,zt(14),h=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Gt){this.m=4,zt(15),Re(this.i,this.l,k,"[Invalid Chunk]"),h=!1;break}else Re(this.i,this.l,Vn,null),Wn(this,Vn);if(Ar(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||k.length!=0||this.h.h||(this.m=1,zt(16),h=!1),this.o=this.o&&h,!h)Re(this.i,this.l,k,"[Invalid Chunked Response]"),On(this),Sn(this);else if(k.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),oc(Le),Le.P=!0,zt(11))}}else Re(this.i,this.l,k,null),Wn(this,k);jt==4&&On(this),this.o&&!this.K&&(jt==4?Gu(this.j,this):(this.o=!1,$n(this)))}else Fn(this.g),v==400&&k.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),On(this),Sn(this)}}}catch{}};function di(h){if(!Ar(h))return h.g.la();const v=rn(h.g);if(v==="")return"";let k="";const A=v.length,J=Kt(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return On(h),Sn(h),"";h.h.i=new d.TextDecoder}for(let ce=0;ce<A;ce++)h.h.h=!0,k+=h.h.i.decode(v[ce],{stream:!(J&&ce==A-1)});return v.length=0,h.h.g+=k,h.C=0,h.h.g}function Ar(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function mr(h,v){var k=h.C,A=v.indexOf(`
`,k);return A==-1?En:(k=Number(v.substring(k,A)),isNaN(k)?Gt:(A+=1,A+k>v.length?En:(v=v.slice(A,A+k),h.C=A+k,v)))}ts.prototype.cancel=function(){this.K=!0,On(this)};function $n(h){h.T=Date.now()+h.H,Gs(h,h.H)}function Gs(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=_n(y(h.aa,h),v)}function ls(h){h.D&&(d.clearTimeout(h.D),h.D=null)}ts.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ge(this.i,this.B),this.M!=2&&(Dn(),zt(17)),On(this),this.m=2,Sn(this)):Gs(this,this.T-h)};function Sn(h){h.j.I==0||h.K||Gu(h.j,h)}function On(h){ls(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,es(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Wn(h,v){try{var k=h.j;if(k.I!=0&&(k.g==h||Cn(k.h,h))){if(!h.L&&Cn(k.h,h)&&k.I==3){try{var A=k.Ba.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var J=A;if(J[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<h.F)Jo(k),rr(k);else break e;lo(k),zt(18)}}else k.xa=J[1],0<k.xa-k.K&&J[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=_n(y(k.Va,k),6e3));cs(k.h)<=1&&k.ta&&(k.ta=void 0)}else gi(k,11)}else if((h.L||k.g==h)&&Jo(k),!R(v))for(J=k.Ba.g.parse(v),v=0;v<J.length;v++){let an=J[v];const Vn=an[0];if(!(Vn<=k.K))if(k.K=Vn,an=an[1],k.I==2)if(an[0]=="c"){k.M=an[1],k.ba=an[2];const Dr=an[3];Dr!=null&&(k.ka=Dr,k.j.info("VER="+k.ka));const yi=an[4];yi!=null&&(k.za=yi,k.j.info("SVER="+k.za));const Jr=an[5];Jr!=null&&typeof Jr=="number"&&Jr>0&&(A=1.5*Jr,k.O=A,k.j.info("backChannelRequestTimeoutMs_="+A)),A=k;const Zr=h.g;if(Zr){const co=Zr.g?Zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(co){var ce=A.h;ce.g||co.indexOf("spdy")==-1&&co.indexOf("quic")==-1&&co.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Ys(ce,ce.h),ce.h=null))}if(A.G){const Zo=Zr.g?Zr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zo&&(A.wa=Zo,Ke(A.J,A.G,Zo))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-h.F,k.j.info("Handshake RTT: "+k.T+"ms")),A=k;var Le=h;if(A.na=Qu(A,A.L?A.ba:null,A.W),Le.L){hi(A.h,Le);var jt=Le,ss=A.O;ss&&(jt.H=ss),jt.D&&(ls(jt),$n(jt)),A.g=Le}else $u(A);k.i.length>0&&Mr(k)}else an[0]!="stop"&&an[0]!="close"||gi(k,7);else k.I==3&&(an[0]=="stop"||an[0]=="close"?an[0]=="stop"?gi(k,7):Qs(k):an[0]!="noop"&&k.l&&k.l.qa(an),k.A=0)}}Dn(4)}catch{}}var Ft=class{constructor(h,v){this.g=h,this.map=v}};function Kr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ks(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function cs(h){return h.h?1:h.g?h.g.size:0}function Cn(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ys(h,v){h.g?h.g.add(v):h.h=v}function hi(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Kr.prototype.cancel=function(){if(this.i=M(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function M(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const k of h.g.values())v=v.concat(k.G);return v}return P(h.i)}var F=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ie(h,v){if(h){h=h.split("&");for(let k=0;k<h.length;k++){const A=h[k].indexOf("=");let J,ce=null;A>=0?(J=h[k].substring(0,A),ce=h[k].substring(A+1)):J=h[k],v(J,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function ue(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof ue?(this.l=h.l,Ve(this,h.j),this.o=h.o,this.g=h.g,qe(this,h.u),this.h=h.h,qt(this,Li(h.i)),this.m=h.m):h&&(v=String(h).match(F))?(this.l=!1,Ve(this,v[1]||"",!0),this.o=Gn(v[2]||""),this.g=Gn(v[3]||"",!0),qe(this,v[4]),this.h=Gn(v[5]||"",!0),qt(this,v[6]||"",!0),this.m=Gn(v[7]||"")):(this.l=!1,this.i=new Rr(null,this.l))}ue.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Ns(v,us,!0),":");var k=this.g;return(k||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ns(v,us,!0),"@"),h.push(pn(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&h.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&h.push("/"),h.push(Ns(k,k.charAt(0)=="/"?Di:Yr,!0))),(k=this.i.toString())&&h.push("?",k),(k=this.m)&&h.push("#",Ns(k,pa)),h.join("")},ue.prototype.resolve=function(h){const v=ze(this);let k=!!h.j;k?Ve(v,h.j):k=!!h.o,k?v.o=h.o:k=!!h.g,k?v.g=h.g:k=h.u!=null;var A=h.h;if(k)qe(v,h.u);else if(k=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var J=v.h.lastIndexOf("/");J!=-1&&(A=v.h.slice(0,J+1)+A)}if(J=A,J==".."||J==".")A="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){A=J.lastIndexOf("/",0)==0,J=J.split("/");const ce=[];for(let Le=0;Le<J.length;){const jt=J[Le++];jt=="."?A&&Le==J.length&&ce.push(""):jt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),A&&Le==J.length&&ce.push("")):(ce.push(jt),A=!0)}A=ce.join("/")}else A=J}return k?v.h=A:k=h.i.toString()!=="",k?qt(v,Li(h.i)):k=!!h.m,k&&(v.m=h.m),v};function ze(h){return new ue(h)}function Ve(h,v,k){h.j=k?Gn(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function qe(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function qt(h,v,k){v instanceof Rr?(h.i=v,mi(h.i,h.l)):(k||(v=Ns(v,pr)),h.i=new Rr(v,h.l))}function Ke(h,v,k){h.i.set(v,k)}function zn(h){return Ke(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Gn(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ns(h,v,k){return typeof h=="string"?(h=encodeURI(h).replace(v,Pn),k&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Pn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var us=/[#\/\?@]/g,Yr=/[#\?:]/g,Di=/[#\?]/g,pr=/[#\?@]/g,pa=/#/g;function Rr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function xs(h){h.g||(h.g=new Map,h.h=0,h.i&&ie(h.i,function(v,k){h.add(decodeURIComponent(v.replace(/\+/g," ")),k)}))}s=Rr.prototype,s.add=function(h,v){xs(this),this.i=null,h=Ir(this,h);let k=this.g.get(h);return k||this.g.set(h,k=[]),k.push(v),this.h+=1,this};function fi(h,v){xs(h),v=Ir(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Qr(h,v){return xs(h),v=Ir(h,v),h.g.has(v)}s.forEach=function(h,v){xs(this),this.g.forEach(function(k,A){k.forEach(function(J){h.call(v,J,A,this)},this)},this)};function Xr(h,v){xs(h);let k=[];if(typeof v=="string")Qr(h,v)&&(k=k.concat(h.g.get(Ir(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)k=k.concat(h[v]);return k}s.set=function(h,v){return xs(this),this.i=null,h=Ir(this,h),Qr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Xr(this,h),h.length>0?String(h[0]):v):v};function As(h,v,k){fi(h,v),k.length>0&&(h.i=null,h.g.set(Ir(h,v),P(k)),h.h+=k.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let A=0;A<v.length;A++){var k=v[A];const J=pn(k);k=Xr(this,k);for(let ce=0;ce<k.length;ce++){let Le=J;k[ce]!==""&&(Le+="="+pn(k[ce])),h.push(Le)}}return this.i=h.join("&")};function Li(h){const v=new Rr;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Ir(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function mi(h,v){v&&!h.j&&(xs(h),h.i=null,h.g.forEach(function(k,A){const J=A.toLowerCase();A!=J&&(fi(this,A),As(this,J,k))},h)),h.j=v}function ns(h,v){const k=new sn;if(d.Image){const A=new Image;A.onload=b(N,k,"TestLoadImage: loaded",!0,v,A),A.onerror=b(N,k,"TestLoadImage: error",!1,v,A),A.onabort=b(N,k,"TestLoadImage: abort",!1,v,A),A.ontimeout=b(N,k,"TestLoadImage: timeout",!1,v,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function w(h,v){const k=new sn,A=new AbortController,J=setTimeout(()=>{A.abort(),N(k,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(ce=>{clearTimeout(J),ce.ok?N(k,"TestPingServer: ok",!0,v):N(k,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(J),N(k,"TestPingServer: error",!1,v)})}function N(h,v,k,A,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),A(k)}catch{}}function U(){this.g=new Ne}function $(h){this.i=h.Sb||null,this.h=h.ab||!1}E($,ht),$.prototype.g=function(){return new Z(this.i,this.h)};function Z(h,v){Tt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Z,Tt),s=Z.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Ae(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fe(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ae(this)),this.g&&(this.readyState=3,Ae(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;pe(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function pe(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?fe(this):Ae(this),this.readyState==3&&pe(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,fe(this))},s.Na=function(h){this.g&&(this.response=h,fe(this))},s.ga=function(){this.g&&fe(this)};function fe(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ae(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var k=v.next();!k.done;)k=k.value,h.push(k[0]+": "+k[1]),k=v.next();return h.join(`\r
`)};function Ae(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Z.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function De(h){let v="";return Ce(h,function(k,A){v+=A,v+=":",v+=k,v+=`\r
`}),v}function Je(h,v,k){e:{for(A in k){var A=!1;break e}A=!0}A||(k=De(k),typeof h=="string"?k!=null&&pn(k):Ke(h,v,k))}function Be(h){Tt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Be,Tt);var Nt=/^https?$/i,_s=["POST","PUT"];s=Be.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,k,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kn.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ce){ot(this,ce);return}if(h=k||"",k=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var J in A)k.set(J,A[J]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const ce of A.keys())k.set(ce,A.get(ce));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(k.keys()).find(ce=>ce.toLowerCase()=="content-type"),J=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(_s,v,void 0)>=0)||A||J||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,Le]of k)this.g.setRequestHeader(ce,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ce){ot(this,ce)}};function ot(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,gn(h),yt(h)}function gn(h){h.A||(h.A=!0,mt(h,"complete"),mt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,mt(this,"complete"),mt(this,"abort"),yt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yt(this,!0)),Be.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?dn(this):this.Xa())},s.Xa=function(){dn(this)};function dn(h){if(h.h&&typeof u<"u"){if(h.v&&Kt(h)==4)setTimeout(h.Ca.bind(h),0);else if(mt(h,"readystatechange"),Kt(h)==4){h.h=!1;try{const ce=h.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var k;if(!(k=v)){var A;if(A=ce===0){let Le=String(h.D).match(F)[1]||null;!Le&&d.self&&d.self.location&&(Le=d.self.location.protocol.slice(0,-1)),A=!Nt.test(Le?Le.toLowerCase():"")}k=A}if(k)mt(h,"complete"),mt(h,"success");else{h.o=6;try{var J=Kt(h)>2?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.ca()+"]",gn(h)}}finally{yt(h)}}}}function yt(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const k=h.g;h.g=null,v||mt(h,"ready");try{k.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Kt(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Kt(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),se(v)}};function rn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Fn(h){const v={};h=(h.g&&Kt(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(R(h[A]))continue;var k=Ss(h[A]);const J=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const ce=v[J]||[];v[J]=ce,ce.push(k)}X(v,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kn(h,v,k){return k&&k.internalChannelParams&&k.internalChannelParams[h]||v}function Nn(h){this.za=0,this.i=[],this.j=new sn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Kn("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Kn("baseRetryDelayMs",5e3,h),this.Za=Kn("retryDelaySeedMs",1e4,h),this.Ta=Kn("forwardChannelMaxRetries",2,h),this.va=Kn("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Kr(h&&h.concurrentRequestLimit),this.Ba=new U,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Nn.prototype,s.ka=8,s.I=1,s.connect=function(h,v,k,A){zt(0),this.W=h,this.H=v||{},k&&A!==void 0&&(this.H.OSID=k,this.H.OAID=A),this.F=this.X,this.J=Qu(this,null,this.W),Mr(this)};function Qs(h){if(Oi(h),h.I==3){var v=h.V++,k=ze(h.J);if(Ke(k,"SID",h.M),Ke(k,"RID",v),Ke(k,"TYPE","terminate"),oo(h,k),v=new ts(h,h.j,v),v.M=2,v.A=zn(ze(k)),k=!1,d.navigator&&d.navigator.sendBeacon)try{k=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!k&&d.Image&&(new Image().src=v.A,k=!0),k||(v.g=Xu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),$n(v)}Yu(h)}function rr(h){h.g&&(oc(h),h.g.cancel(),h.g=null)}function Oi(h){rr(h),h.v&&(d.clearTimeout(h.v),h.v=null),Jo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Mr(h){if(!Ks(h.h)&&!h.m){h.m=!0;var v=h.Ea;Te||j(),be||(Te(),be=!0),C.add(v,h),h.D=0}}function pi(h,v){return cs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=_n(y(h.Ea,h,v),Ku(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const J=new ts(this,this.j,h);let ce=this.o;if(this.U&&(ce?(ce=O(ce),we(ce,this.U)):ce=this.U),this.u!==null||this.R||(J.J=ce,ce=null),this.S)e:{for(var v=0,k=0;k<this.i.length;k++){t:{var A=this.i[k];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,v>4096){v=k;break e}if(v===4096||k===this.i.length-1){v=k+1;break e}}v=1e3}else v=1e3;v=Hu(this,J,v),k=ze(this.J),Ke(k,"RID",h),Ke(k,"CVER",22),this.G&&Ke(k,"X-HTTP-Session-Id",this.G),oo(this,k),ce&&(this.R?v="headers="+pn(De(ce))+"&"+v:this.u&&Je(k,this.u,ce)),Ys(this.h,J),this.Ra&&Ke(k,"TYPE","init"),this.S?(Ke(k,"$req",v),Ke(k,"SID","null"),J.U=!0,Cs(J,k,null)):Cs(J,k,v),this.I=2}}else this.I==3&&(h?ac(this,h):this.i.length==0||Ks(this.h)||ac(this))};function ac(h,v){var k;v?k=v.l:k=h.V++;const A=ze(h.J);Ke(A,"SID",h.M),Ke(A,"RID",k),Ke(A,"AID",h.K),oo(h,A),h.u&&h.o&&Je(A,h.u,h.o),k=new ts(h,h.j,k,h.D+1),h.u===null&&(k.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Hu(h,k,1e3),k.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ys(h.h,k),Cs(k,A,v)}function oo(h,v){h.H&&Ce(h.H,function(k,A){Ke(v,A,k)}),h.l&&Ce({},function(k,A){Ke(v,A,k)})}function Hu(h,v,k){k=Math.min(h.i.length,k);const A=h.l?y(h.l.Ka,h.l,h):null;e:{var J=h.i;let jt=-1;for(;;){const ss=["count="+k];jt==-1?k>0?(jt=J[0].g,ss.push("ofs="+jt)):jt=0:ss.push("ofs="+jt);let an=!0;for(let Vn=0;Vn<k;Vn++){var ce=J[Vn].g;const Dr=J[Vn].map;if(ce-=jt,ce<0)jt=Math.max(0,J[Vn].g-100),an=!1;else try{ce="req"+ce+"_"||"";try{var Le=Dr instanceof Map?Dr:Object.entries(Dr);for(const[yi,Jr]of Le){let Zr=Jr;p(Jr)&&(Zr=Wt(Jr)),ss.push(ce+yi+"="+encodeURIComponent(Zr))}}catch(yi){throw ss.push(ce+"type="+encodeURIComponent("_badmap")),yi}}catch{A&&A(Dr)}}if(an){Le=ss.join("&");break e}}Le=void 0}return h=h.i.splice(0,k),v.G=h,Le}function $u(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;Te||j(),be||(Te(),be=!0),C.add(v,h),h.A=0}}function lo(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=_n(y(h.Da,h),Ku(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=_n(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),rr(this),Wu(this))};function oc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Wu(h){h.g=new ts(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=ze(h.na);Ke(v,"RID","rpc"),Ke(v,"SID",h.M),Ke(v,"AID",h.K),Ke(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ke(v,"TO",h.ia),Ke(v,"TYPE","xmlhttp"),oo(h,v),h.u&&h.o&&Je(v,h.u,h.o),h.O&&(h.g.H=h.O);var k=h.g;h=h.ba,k.M=1,k.A=zn(ze(v)),k.u=null,k.R=!0,Nr(k,h)}s.Va=function(){this.C!=null&&(this.C=null,rr(this),lo(this),zt(19))};function Jo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Gu(h,v){var k=null;if(h.g==v){Jo(h),oc(h),h.g=null;var A=2}else if(Cn(h.h,v))k=v.G,hi(h.h,v),A=1;else return;if(h.I!=0){if(v.o)if(A==1){k=v.u?v.u.length:0,v=Date.now()-v.F;var J=h.D;A=nn(),mt(A,new Ln(A,k)),Mr(h)}else $u(h);else if(J=v.m,J==3||J==0&&v.X>0||!(A==1&&pi(h,v)||A==2&&lo(h)))switch(k&&k.length>0&&(v=h.h,v.i=v.i.concat(k)),J){case 1:gi(h,5);break;case 4:gi(h,10);break;case 3:gi(h,6);break;default:gi(h,2)}}}function Ku(h,v){let k=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(k*=2),k*v}function gi(h,v){if(h.j.info("Error code "+v),v==2){var k=y(h.bb,h),A=h.Ua;const J=!A;A=new ue(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ve(A,"https"),zn(A),J?ns(A.toString(),k):w(A.toString(),k)}else zt(2);h.I=0,h.l&&h.l.pa(v),Yu(h),Oi(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Yu(h){if(h.I=0,h.ja=[],h.l){const v=M(h.h);(v.length!=0||h.i.length!=0)&&(G(h.ja,v),G(h.ja,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.oa()}}function Qu(h,v,k){var A=k instanceof ue?ze(k):new ue(k);if(A.g!="")v&&(A.g=v+"."+A.g),qe(A,A.u);else{var J=d.location;A=J.protocol,v=v?v+"."+J.hostname:J.hostname,J=+J.port;const ce=new ue(null);A&&Ve(ce,A),v&&(ce.g=v),J&&qe(ce,J),k&&(ce.h=k),A=ce}return k=h.G,v=h.wa,k&&v&&Ke(A,k,v),Ke(A,"VER",h.ka),oo(h,A),A}function Xu(h,v,k){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new Be(new $({ab:k})):new Be(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ju(){}s=Ju.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ga(){}ga.prototype.g=function(h,v){return new Xs(h,v)};function Xs(h,v){Tt.call(this),this.g=new Nn(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!R(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!R(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Pi(this)}E(Xs,Tt),Xs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xs.prototype.close=function(){Qs(this.g)},Xs.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var k={};k.__data__=h,h=k}else this.v&&(k={},k.__data__=Wt(h),h=k);v.i.push(new Ft(v.Ya++,h)),v.I==3&&Mr(v)},Xs.prototype.N=function(){this.g.l=null,delete this.j,Qs(this.g),delete this.g,Xs.Z.N.call(this)};function Zu(h){He.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const k in v){h=k;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}E(Zu,He);function ed(){tt.call(this),this.status=1}E(ed,tt);function Pi(h){this.g=h}E(Pi,Ju),Pi.prototype.ra=function(){mt(this.g,"a")},Pi.prototype.qa=function(h){mt(this.g,new Zu(h))},Pi.prototype.pa=function(h){mt(this.g,new ed)},Pi.prototype.oa=function(){mt(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,Xs.prototype.send=Xs.prototype.o,Xs.prototype.open=Xs.prototype.m,Xs.prototype.close=Xs.prototype.close,R_=function(){return new ga},A_=function(){return nn()},N_=Fe,jg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,Th=at,mn.COMPLETE="complete",C_=mn,gt.EventType=st,st.OPEN="a",st.CLOSE="b",st.ERROR="c",st.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,tu=gt,Be.prototype.listenOnce=Be.prototype.K,Be.prototype.getLastError=Be.prototype.Ha,Be.prototype.getLastErrorCode=Be.prototype.ya,Be.prototype.getStatus=Be.prototype.ca,Be.prototype.getResponseJson=Be.prototype.La,Be.prototype.getResponseText=Be.prototype.la,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Fa,S_=Be}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});class zs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zs.UNAUTHENTICATED=new zs(null),zs.GOOGLE_CREDENTIALS=new zs("google-credentials-uid"),zs.FIRST_PARTY=new zs("first-party-uid"),zs.MOCK_USER=new zs("mock-user");let ec="12.8.0";function cR(s){ec=s}const Vo=new iy("@firebase/firestore");function Rl(){return Vo.logLevel}function $e(s,...e){if(Vo.logLevel<=Vt.DEBUG){const t=e.map(yy);Vo.debug(`Firestore (${ec}): ${s}`,...t)}}function ua(s,...e){if(Vo.logLevel<=Vt.ERROR){const t=e.map(yy);Vo.error(`Firestore (${ec}): ${s}`,...t)}}function Fl(s,...e){if(Vo.logLevel<=Vt.WARN){const t=e.map(yy);Vo.warn(`Firestore (${ec}): ${s}`,...t)}}function yy(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function bt(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,I_(s,i,t)}function I_(s,e,t){let i=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ua(i),new Error(i)}function cn(s,e,t,i){let l="Unexpected state";typeof t=="string"?l=t:i=t,s||I_(e,l,i)}function kt(s,e){return s}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends ui{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ia{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class M_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zs.UNAUTHENTICATED)))}shutdown(){}}class dR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class hR{constructor(e){this.t=e,this.currentUser=zs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){cn(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new ia;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ia,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ia)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(cn(typeof i.accessToken=="string",31837,{l:i}),new M_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return cn(e===null||typeof e=="string",2055,{h:e}),new zs(e)}}class fR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=zs.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class mR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new fR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){cn(this.o===void 0,3512);const i=u=>{u.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,$e("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new O2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(cn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new O2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function gR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class vy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=gR(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<t&&(i+=e.charAt(l[u]%62))}return i}}function Ut(s,e){return s<e?-1:s>e?1:0}function Sg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return zp(l)===zp(u)?Ut(l,u):zp(l)?1:-1}return Ut(s.length,e.length)}const yR=55296,vR=57343;function zp(s){const e=s.charCodeAt(0);return e>=yR&&e<=vR}function ql(s,e,t){return s.length===e.length&&s.every(((i,l)=>t(i,e[l])))}const P2="__name__";class ki{constructor(e,t,i){t===void 0?t=0:t>e.length&&bt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&bt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let l=0;l<i;l++){const u=ki.compareSegments(e.get(l),t.get(l));if(u!==0)return u}return Ut(e.length,t.length)}static compareSegments(e,t){const i=ki.isNumericId(e),l=ki.isNumericId(t);return i&&!l?-1:!i&&l?1:i&&l?ki.extractNumericId(e).compare(ki.extractNumericId(t)):Sg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ya.fromString(e.substring(4,e.length-2))}}class Tn extends ki{construct(e,t,i){return new Tn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ue(ge.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((l=>l.length>0)))}return new Tn(t)}static emptyPath(){return new Tn([])}}const bR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Os extends ki{construct(e,t,i){return new Os(e,t,i)}static isValidIdentifier(e){return bR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Os.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P2}static keyField(){return new Os([P2])}static fromServerFormat(e){const t=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Ue(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Ue(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ue(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(i+=p,l++):(u(),l++)}if(u(),d)throw new Ue(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Os(t)}static emptyPath(){return new Os([])}}class it{constructor(e){this.path=e}static fromPath(e){return new it(Tn.fromString(e))}static fromName(e){return new it(Tn.fromString(e).popFirst(5))}static empty(){return new it(Tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new Tn(e.slice()))}}function D_(s,e,t){if(!t)throw new Ue(ge.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function wR(s,e,t,i){if(e===!0&&i===!0)throw new Ue(ge.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function V2(s){if(!it.isDocumentKey(s))throw new Ue(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function U2(s){if(it.isDocumentKey(s))throw new Ue(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function L_(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function lf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":bt(12329,{type:typeof s})}function tr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ue(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lf(s);throw new Ue(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function xR(s,e){if(e<=0)throw new Ue(ge.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function vs(s,e){const t={typeString:s};return e&&(t.value=e),t}function Lu(s,e){if(!L_(s))throw new Ue(ge.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const d=s[i];if(l&&typeof d!==l){t=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new Ue(ge.INVALID_ARGUMENT,t);return!0}const B2=-62135596800,z2=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*z2);return new Rt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<B2)throw new Ue(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/z2}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:vs("string",Rt._jsonSchemaVersion),seconds:vs("number"),nanoseconds:vs("number")};class xt{static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Rt(0,0))}static max(){return new xt(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const gu=-1;function _R(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=xt.fromTimestamp(i===1e9?new Rt(t+1,0):new Rt(t,i));return new Xa(l,it.empty(),e)}function kR(s){return new Xa(s.readTime,s.key,gu)}class Xa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Xa(xt.min(),it.empty(),gu)}static max(){return new Xa(xt.max(),it.empty(),gu)}}function ER(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=it.comparator(s.documentKey,e.documentKey),t!==0?t:Ut(s.largestBatchId,e.largestBatchId))}const TR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function tc(s){if(s.code!==ge.FAILED_PRECONDITION||s.message!==TR)throw s;$e("LocalStore","Unexpectedly lost primary lease")}class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&bt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new je(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof je?t:je.resolve(t)}catch(t){return je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):je.reject(t)}static resolve(e){return new je(((t,i)=>{t(e)}))}static reject(e){return new je(((t,i)=>{i(e)}))}static waitFor(e){return new je(((t,i)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&t()}),(g=>i(g)))})),d=!0,u===l&&t()}))}static or(e){let t=je.resolve(!1);for(const i of e)t=t.next((l=>l?je.resolve(l):i()));return t}static forEach(e,t){const i=[];return e.forEach(((l,u)=>{i.push(t.call(this,l,u))})),this.waitFor(i)}static mapArray(e,t){return new je(((i,l)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next((b=>{d[y]=b,++p,p===u&&i(d)}),(b=>l(b)))}}))}static doWhile(e,t){return new je(((i,l)=>{const u=()=>{e()===!0?t().next((()=>{u()}),l):i()};u()}))}}function SR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nc(s){return s.name==="IndexedDbTransactionError"}class cf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cf.ce=-1;const by=-1;function uf(s){return s==null}function Fh(s){return s===0&&1/s==-1/0}function CR(s){return typeof s=="number"&&Number.isInteger(s)&&!Fh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const O_="";function NR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=F2(e)),e=AR(s.get(t),e);return F2(e)}function AR(s,e){let t=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":t+="";break;case O_:t+="";break;default:t+=u}}return t}function F2(s){return s+O_+""}function q2(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function io(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function P_(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class qn{constructor(e,t){this.comparator=e,this.root=t||Ls.EMPTY}insert(e,t){return new qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ls.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ls.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return t+i.left.size;l<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,t,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ls{constructor(e,t,i,l,u){this.key=e,this.value=t,this.color=i??Ls.RED,this.left=l??Ls.EMPTY,this.right=u??Ls.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,l,u){return new Ls(e??this.key,t??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,t,i),null):u===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ls.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Ls.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw bt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw bt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw bt(27949);return e+(this.isRed()?0:1)}}Ls.EMPTY=null,Ls.RED=!0,Ls.BLACK=!1;Ls.EMPTY=new class{constructor(){this.size=0}get key(){throw bt(57766)}get value(){throw bt(16141)}get color(){throw bt(16727)}get left(){throw bt(29726)}get right(){throw bt(36894)}copy(e,t,i,l,u){return this}insert(e,t,i){return new Ls(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ws{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new H2(this.data.getIterator())}getIteratorFrom(e){return new H2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ws)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ws(this.comparator);return t.data=e,t}}class H2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Tr{constructor(e){this.fields=e,e.sort(Os.comparator)}static empty(){return new Tr([])}unionWith(e){let t=new ws(Os.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class V_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new V_("Invalid base64 string: "+u):u}})(e);return new Vs(t)}static fromUint8Array(e){const t=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new Vs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vs.EMPTY_BYTE_STRING=new Vs("");const RR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(s){if(cn(!!s,39018),typeof s=="string"){let e=0;const t=RR.exec(s);if(cn(!!t,46558,{timestamp:s}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:as(s.seconds),nanos:as(s.nanos)}}function as(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Za(s){return typeof s=="string"?Vs.fromBase64String(s):Vs.fromUint8Array(s)}const U_="server_timestamp",B_="__type__",z_="__previous_value__",F_="__local_write_time__";function wy(s){return(s?.mapValue?.fields||{})[B_]?.stringValue===U_}function df(s){const e=s.mapValue.fields[z_];return wy(e)?df(e):e}function yu(s){const e=Ja(s.mapValue.fields[F_].timestampValue);return new Rt(e.seconds,e.nanos)}class IR{constructor(e,t,i,l,u,d,p,g,y,b,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=E}}const qh="(default)";class vu{constructor(e,t){this.projectId=e,this.database=t||qh}static empty(){return new vu("","")}get isDefaultDatabase(){return this.database===qh}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}function MR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ue(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(s.options.projectId,e)}const q_="__type__",DR="__max__",lh={mapValue:{}},H_="__vector__",Hh="value";function eo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?wy(s)?4:OR(s)?9007199254740991:LR(s)?10:11:bt(28295,{value:s})}function Ai(s,e){if(s===e)return!0;const t=eo(s);if(t!==eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return yu(s).isEqual(yu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=Ja(l.timestampValue),p=Ja(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Za(l.bytesValue).isEqual(Za(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return as(l.geoPointValue.latitude)===as(u.geoPointValue.latitude)&&as(l.geoPointValue.longitude)===as(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return as(l.integerValue)===as(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=as(l.doubleValue),p=as(u.doubleValue);return d===p?Fh(d)===Fh(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return ql(s.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(q2(d)!==q2(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Ai(d[g],p[g])))return!1;return!0})(s,e);default:return bt(52216,{left:s})}}function bu(s,e){return(s.values||[]).find((t=>Ai(t,e)))!==void 0}function Hl(s,e){if(s===e)return 0;const t=eo(s),i=eo(e);if(t!==i)return Ut(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=as(u.integerValue||u.doubleValue),g=as(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return $2(s.timestampValue,e.timestampValue);case 4:return $2(yu(s),yu(e));case 5:return Sg(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Za(u),g=Za(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Ut(p[y],g[y]);if(b!==0)return b}return Ut(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=Ut(as(u.latitude),as(d.latitude));return p!==0?p:Ut(as(u.longitude),as(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return W2(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[Hh]?.arrayValue,b=g[Hh]?.arrayValue,E=Ut(y?.values?.length||0,b?.values?.length||0);return E!==0?E:W2(y,b)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===lh.mapValue&&d===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(d===lh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let E=0;E<g.length&&E<b.length;++E){const T=Sg(g[E],b[E]);if(T!==0)return T;const P=Hl(p[g[E]],y[b[E]]);if(P!==0)return P}return Ut(g.length,b.length)})(s.mapValue,e.mapValue);default:throw bt(23264,{he:t})}}function $2(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ut(s,e);const t=Ja(s),i=Ja(e),l=Ut(t.seconds,i.seconds);return l!==0?l:Ut(t.nanos,i.nanos)}function W2(s,e){const t=s.values||[],i=e.values||[];for(let l=0;l<t.length&&l<i.length;++l){const u=Hl(t[l],i[l]);if(u)return u}return Ut(t.length,i.length)}function $l(s){return Cg(s)}function Cg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Ja(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Za(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return it.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",l=!0;for(const u of t.values||[])l?l=!1:i+=",",i+=Cg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let l="{",u=!0;for(const d of i)u?u=!1:l+=",",l+=`${d}:${Cg(t.fields[d])}`;return l+"}"})(s.mapValue):bt(61005,{value:s})}function jh(s){switch(eo(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=df(s);return e?16+jh(e):16;case 5:return 2*s.stringValue.length;case 6:return Za(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+jh(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return io(i.fields,((u,d)=>{l+=u.length+jh(d)})),l})(s.mapValue);default:throw bt(13486,{value:s})}}function G2(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ng(s){return!!s&&"integerValue"in s}function xy(s){return!!s&&"arrayValue"in s}function K2(s){return!!s&&"nullValue"in s}function Y2(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Sh(s){return!!s&&"mapValue"in s}function LR(s){return(s?.mapValue?.fields||{})[q_]?.stringValue===H_}function ou(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return io(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ou(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(s.arrayValue.values[t]);return e}return{...s}}function OR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===DR}class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=Os.emptyPath(),i={},l=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,l),i={},l=[],t=p.popLast()}d?i[p.lastSegment()]=ou(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,l)}delete(e){const t=this.field(e.popLast());Sh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ai(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=t.mapValue.fields[e.get(i)];Sh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,i){io(t,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new dr(ou(this.value))}}function $_(s){const e=[];return io(s.fields,((t,i)=>{const l=new Os([t]);if(Sh(i)){const u=$_(i.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new Tr(e)}class Fs{constructor(e,t,i,l,u,d,p){this.key=e,this.documentType=t,this.version=i,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Fs(e,0,xt.min(),xt.min(),xt.min(),dr.empty(),0)}static newFoundDocument(e,t,i,l){return new Fs(e,1,t,xt.min(),i,l,0)}static newNoDocument(e,t){return new Fs(e,2,t,xt.min(),xt.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new Fs(e,3,t,xt.min(),xt.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $h{constructor(e,t){this.position=e,this.inclusive=t}}function Q2(s,e,t){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],d=s.position[l];if(u.field.isKeyField()?i=it.comparator(it.fromName(d.referenceValue),t.key):i=Hl(d,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function X2(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ai(s.position[t],e.position[t]))return!1;return!0}class wu{constructor(e,t="asc"){this.field=e,this.dir=t}}function PR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class W_{}class ys extends W_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new UR(e,t,i):t==="array-contains"?new FR(e,i):t==="in"?new qR(e,i):t==="not-in"?new HR(e,i):t==="array-contains-any"?new $R(e,i):new ys(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new BR(e,i):new zR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Hl(t,this.value)):t!==null&&eo(this.value)===eo(t)&&this.matchesComparison(Hl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return bt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends W_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new li(e,t)}matches(e){return G_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function G_(s){return s.op==="and"}function K_(s){return VR(s)&&G_(s)}function VR(s){for(const e of s.filters)if(e instanceof li)return!1;return!0}function Ag(s){if(s instanceof ys)return s.field.canonicalString()+s.op.toString()+$l(s.value);if(K_(s))return s.filters.map((e=>Ag(e))).join(",");{const e=s.filters.map((t=>Ag(t))).join(",");return`${s.op}(${e})`}}function Y_(s,e){return s instanceof ys?(function(i,l){return l instanceof ys&&i.op===l.op&&i.field.isEqual(l.field)&&Ai(i.value,l.value)})(s,e):s instanceof li?(function(i,l){return l instanceof li&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,d,p)=>u&&Y_(d,l.filters[p])),!0):!1})(s,e):void bt(19439)}function Q_(s){return s instanceof ys?(function(t){return`${t.field.canonicalString()} ${t.op} ${$l(t.value)}`})(s):s instanceof li?(function(t){return t.op.toString()+" {"+t.getFilters().map(Q_).join(" ,")+"}"})(s):"Filter"}class UR extends ys{constructor(e,t,i){super(e,t,i),this.key=it.fromName(i.referenceValue)}matches(e){const t=it.comparator(e.key,this.key);return this.matchesComparison(t)}}class BR extends ys{constructor(e,t){super(e,"in",t),this.keys=X_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class zR extends ys{constructor(e,t){super(e,"not-in",t),this.keys=X_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function X_(s,e){return(e.arrayValue?.values||[]).map((t=>it.fromName(t.referenceValue)))}class FR extends ys{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xy(t)&&bu(t.arrayValue,this.value)}}class qR extends ys{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bu(this.value.arrayValue,t)}}class HR extends ys{constructor(e,t){super(e,"not-in",t)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bu(this.value.arrayValue,t)}}class $R extends ys{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>bu(this.value.arrayValue,i)))}}class WR{constructor(e,t=null,i=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function J2(s,e=null,t=[],i=[],l=null,u=null,d=null){return new WR(s,e,t,i,l,u,d)}function _y(s){const e=kt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Ag(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),uf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>$l(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>$l(i))).join(",")),e.Te=t}return e.Te}function ky(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!PR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Y_(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!X2(s.startAt,e.startAt)&&X2(s.endAt,e.endAt)}function Rg(s){return it.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class sc{constructor(e,t=null,i=[],l=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function GR(s,e,t,i,l,u,d,p){return new sc(s,e,t,i,l,u,d,p)}function hf(s){return new sc(s)}function Z2(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function KR(s){return it.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function J_(s){return s.collectionGroup!==null}function lu(s){const e=kt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new ws(Os.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new wu(u,i))})),t.has(Os.keyField().canonicalString())||e.Ie.push(new wu(Os.keyField(),i))}return e.Ie}function Si(s){const e=kt(s);return e.Ee||(e.Ee=YR(e,lu(s))),e.Ee}function YR(s,e){if(s.limitType==="F")return J2(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new wu(l.field,u)}));const t=s.endAt?new $h(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new $h(s.startAt.position,s.startAt.inclusive):null;return J2(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Ig(s,e){const t=s.filters.concat([e]);return new sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function QR(s,e){const t=s.explicitOrderBy.concat([e]);return new sc(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Wh(s,e,t){return new sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function ff(s,e){return ky(Si(s),Si(e))&&s.limitType===e.limitType}function Z_(s){return`${_y(Si(s))}|lt:${s.limitType}`}function Il(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((l=>Q_(l))).join(", ")}]`),uf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((l=>$l(l))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((l=>$l(l))).join(",")),`Target(${i})`})(Si(s))}; limitType=${s.limitType})`}function mf(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):it.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of lu(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(d,p,g){const y=Q2(d,p,g);return d.inclusive?y<=0:y<0})(i.startAt,lu(i),l)||i.endAt&&!(function(d,p,g){const y=Q2(d,p,g);return d.inclusive?y>=0:y>0})(i.endAt,lu(i),l))})(s,e)}function XR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ek(s){return(e,t)=>{let i=!1;for(const l of lu(s)){const u=JR(l,e,t);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function JR(s,e,t){const i=s.field.isKeyField()?it.comparator(e.key,t.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Hl(g,y):bt(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return bt(19790,{direction:s.dir})}}class Go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[t]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){io(this.inner,((t,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return P_(this.inner)}size(){return this.innerSize}}const ZR=new qn(it.comparator);function da(){return ZR}const tk=new qn(it.comparator);function nu(...s){let e=tk;for(const t of s)e=e.insert(t.key,t);return e}function nk(s){let e=tk;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function No(){return cu()}function sk(){return cu()}function cu(){return new Go((s=>s.toString()),((s,e)=>s.isEqual(e)))}const eI=new qn(it.comparator),tI=new ws(it.comparator);function Bt(...s){let e=tI;for(const t of s)e=e.add(t);return e}const nI=new ws(Ut);function sI(){return nI}function Ey(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(e)?"-0":e}}function rk(s){return{integerValue:""+s}}function ik(s,e){return CR(e)?rk(e):Ey(s,e)}class pf{constructor(){this._=void 0}}function rI(s,e,t){return s instanceof xu?(function(l,u){const d={fields:{[B_]:{stringValue:U_},[F_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&wy(u)&&(u=df(u)),u&&(d.fields[z_]=u),{mapValue:d}})(t,e):s instanceof Wl?ok(s,e):s instanceof Gl?lk(s,e):(function(l,u){const d=ak(l,u),p=ew(d)+ew(l.Ae);return Ng(d)&&Ng(l.Ae)?rk(p):Ey(l.serializer,p)})(s,e)}function iI(s,e,t){return s instanceof Wl?ok(s,e):s instanceof Gl?lk(s,e):t}function ak(s,e){return s instanceof _u?(function(i){return Ng(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class xu extends pf{}class Wl extends pf{constructor(e){super(),this.elements=e}}function ok(s,e){const t=ck(e);for(const i of s.elements)t.some((l=>Ai(l,i)))||t.push(i);return{arrayValue:{values:t}}}class Gl extends pf{constructor(e){super(),this.elements=e}}function lk(s,e){let t=ck(e);for(const i of s.elements)t=t.filter((l=>!Ai(l,i)));return{arrayValue:{values:t}}}class _u extends pf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ew(s){return as(s.integerValue||s.doubleValue)}function ck(s){return xy(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class gf{constructor(e,t){this.field=e,this.transform=t}}function aI(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof Wl&&l instanceof Wl||i instanceof Gl&&l instanceof Gl?ql(i.elements,l.elements,Ai):i instanceof _u&&l instanceof _u?Ai(i.Ae,l.Ae):i instanceof xu&&l instanceof xu})(s.transform,e.transform)}class oI{constructor(e,t){this.version=e,this.transformResults=t}}class nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ch(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class yf{}function uk(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new vf(s.key,nr.none()):new Ou(s.key,s.data,nr.none());{const t=s.data,i=dr.empty();let l=new ws(Os.comparator);for(let u of e.fields)if(!l.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?i.delete(u):i.set(u,d),l=l.add(u)}return new ao(s.key,i,new Tr(l.toArray()),nr.none())}}function lI(s,e,t){s instanceof Ou?(function(l,u,d){const p=l.value.clone(),g=nw(l.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,t):s instanceof ao?(function(l,u,d){if(!Ch(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=nw(l.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(dk(l)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function uu(s,e,t,i){return s instanceof Ou?(function(u,d,p,g){if(!Ch(u.precondition,d))return p;const y=u.value.clone(),b=sw(u.fieldTransforms,g,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,t,i):s instanceof ao?(function(u,d,p,g){if(!Ch(u.precondition,d))return p;const y=sw(u.fieldTransforms,g,d),b=d.data;return b.setAll(dk(u)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(s,e,t,i):(function(u,d,p){return Ch(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,t)}function cI(s,e){let t=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=ak(i.transform,l||null);u!=null&&(t===null&&(t=dr.empty()),t.set(i.field,u))}return t||null}function tw(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&ql(i,l,((u,d)=>aI(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ou extends yf{constructor(e,t,i,l=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ao extends yf{constructor(e,t,i,l,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function dk(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function nw(s,e,t){const i=new Map;cn(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let l=0;l<t.length;l++){const u=s[l],d=u.transform,p=e.data.field(u.field);i.set(u.field,iI(d,p,t[l]))}return i}function sw(s,e,t){const i=new Map;for(const l of s){const u=l.transform,d=t.data.field(l.field);i.set(l.field,rI(u,d,e))}return i}class vf extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uI extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dI{constructor(e,t,i,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&lI(u,e,i[l])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=uu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=uu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=sk();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=t.has(l.key)?null:p;const g=uk(d,p);g!==null&&i.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(xt.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Bt())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,((t,i)=>tw(t,i)))&&ql(this.baseMutations,e.baseMutations,((t,i)=>tw(t,i)))}}class Ty{constructor(e,t,i,l){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=l}static from(e,t,i){cn(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return eI})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,i[d].version);return new Ty(e,t,i,l)}}class hI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class fI{constructor(e,t){this.count=e,this.unchangedNames=t}}var ps,Yt;function mI(s){switch(s){case ge.OK:return bt(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return bt(15467,{code:s})}}function hk(s){if(s===void 0)return ua("GRPC error has no .code"),ge.UNKNOWN;switch(s){case ps.OK:return ge.OK;case ps.CANCELLED:return ge.CANCELLED;case ps.UNKNOWN:return ge.UNKNOWN;case ps.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case ps.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case ps.INTERNAL:return ge.INTERNAL;case ps.UNAVAILABLE:return ge.UNAVAILABLE;case ps.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case ps.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case ps.NOT_FOUND:return ge.NOT_FOUND;case ps.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case ps.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case ps.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case ps.ABORTED:return ge.ABORTED;case ps.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case ps.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case ps.DATA_LOSS:return ge.DATA_LOSS;default:return bt(39323,{code:s})}}(Yt=ps||(ps={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";function pI(){return new TextEncoder}const gI=new Ya([4294967295,4294967295],0);function rw(s){const e=pI().encode(s),t=new j_;return t.update(e),new Uint8Array(t.digest())}function iw(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ya([t,i],0),new Ya([l,u],0)]}class jy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new su(`Invalid padding: ${t}`);if(i<0)throw new su(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new su(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ya.fromNumber(this.ge)}ye(e,t,i){let l=e.add(t.multiply(Ya.fromNumber(i)));return l.compare(gI)===1&&(l=new Ya([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=rw(e),[i,l]=iw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);if(!this.we(d))return!1}return!0}static create(e,t,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new jy(u,l,t);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const t=rw(e),[i,l]=iw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);this.be(d)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bf{constructor(e,t,i,l,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const l=new Map;return l.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new bf(xt.min(),l,new qn(Ut),da(),Bt())}}class Pu{constructor(e,t,i,l,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Pu(i,t,Bt(),Bt(),Bt())}}class Nh{constructor(e,t,i,l){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=l}}class fk{constructor(e,t){this.targetId=e,this.Ce=t}}class mk{constructor(e,t,i=Vs.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=l}}class aw{constructor(){this.ve=0,this.Fe=ow(),this.Me=Vs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Bt(),t=Bt(),i=Bt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:i=i.add(l);break;default:bt(38017,{changeType:u})}})),new Pu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=ow()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,cn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class yI{constructor(e){this.Ge=e,this.ze=new Map,this.je=da(),this.He=ch(),this.Je=ch(),this.Ze=new qn(Ut)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:bt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,i=e.Ce.count,l=this.ot(t);if(l){const u=l.target;if(Rg(u))if(i===0){const d=new it(u.path);this.et(t,d,Fs.newNoDocument(d,xt.min()))}else cn(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=t;let d,p;try{d=Za(i).toUint8Array()}catch(g){if(g instanceof V_)return Fl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new jy(d,l,u)}catch(g){return Fl(g instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let l=0;return i.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(t,u,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&Rg(p.target)){const g=new it(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Fs.newNoDocument(g,e))}u.Be&&(t.set(d,u.ke()),u.Ke())}}));let i=Bt();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new bf(e,t,this.Ze,this.je,i);return this.je=da(),this.He=ch(),this.Je=ch(),this.Ze=new qn(Ut),l}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.qe(t,1):l.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new aw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ws(Ut),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ws(Ut),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||$e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new aw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ch(){return new qn(it.comparator)}function ow(){return new qn(it.comparator)}const vI={asc:"ASCENDING",desc:"DESCENDING"},bI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wI={and:"AND",or:"OR"};class xI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mg(s,e){return s.useProto3Json||uf(e)?e:{value:e}}function Gh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pk(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function _I(s,e){return Gh(s,e.toTimestamp())}function Ci(s){return cn(!!s,49232),xt.fromTimestamp((function(t){const i=Ja(t);return new Rt(i.seconds,i.nanos)})(s))}function Sy(s,e){return Dg(s,e).canonicalString()}function Dg(s,e){const t=(function(l){return new Tn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?t:t.child(e)}function gk(s){const e=Tn.fromString(s);return cn(xk(e),10190,{key:e.toString()}),e}function Lg(s,e){return Sy(s.databaseId,e.path)}function Fp(s,e){const t=gk(e);if(t.get(1)!==s.databaseId.projectId)throw new Ue(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ue(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new it(vk(t))}function yk(s,e){return Sy(s.databaseId,e)}function kI(s){const e=gk(s);return e.length===4?Tn.emptyPath():vk(e)}function Og(s){return new Tn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function vk(s){return cn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function lw(s,e,t){return{name:Lg(s,e),fields:t.value.mapValue.fields}}function EI(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:bt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(cn(b===void 0||typeof b=="string",58123),Vs.fromBase64String(b||"")):(cn(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Vs.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const b=y.code===void 0?ge.UNKNOWN:hk(y.code);return new Ue(b,y.message||"")})(d);t=new mk(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=Fp(s,i.document.name),u=Ci(i.document.updateTime),d=i.document.createTime?Ci(i.document.createTime):xt.min(),p=new dr({mapValue:{fields:i.document.fields}}),g=Fs.newFoundDocument(l,u,d,p),y=i.targetIds||[],b=i.removedTargetIds||[];t=new Nh(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=Fp(s,i.document),u=i.readTime?Ci(i.readTime):xt.min(),d=Fs.newNoDocument(l,u),p=i.removedTargetIds||[];t=new Nh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=Fp(s,i.document),u=i.removedTargetIds||[];t=new Nh([],u,l,null)}else{if(!("filter"in e))return bt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,d=new fI(l,u),p=i.targetId;t=new fk(p,d)}}return t}function TI(s,e){let t;if(e instanceof Ou)t={update:lw(s,e.key,e.value)};else if(e instanceof vf)t={delete:Lg(s,e.key)};else if(e instanceof ao)t={update:lw(s,e.key,e.data),updateMask:DI(e.fieldMask)};else{if(!(e instanceof uI))return bt(16599,{dt:e.type});t={verify:Lg(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const p=d.transform;if(p instanceof xu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Wl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Gl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof _u)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw bt(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:_I(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:bt(27497)})(s,e.precondition)),t}function jI(s,e){return s&&s.length>0?(cn(e!==void 0,14353),s.map((t=>(function(l,u){let d=l.updateTime?Ci(l.updateTime):Ci(u);return d.isEqual(xt.min())&&(d=Ci(u)),new oI(d,l.transformResults||[])})(t,e)))):[]}function SI(s,e){return{documents:[yk(s,e.path)]}}function CI(s,e){const t={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=yk(s,l);const u=(function(y){if(y.length!==0)return wk(li.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:Ml(T.field),direction:RI(T.dir)}})(b)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=Mg(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:l}}function NI(s){let e=kI(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let l=null;if(i>0){cn(i===1,65062);const b=t.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=(function(E){const T=bk(E);return T instanceof li&&K_(T)?T.getFilters():[T]})(t.where));let d=[];t.orderBy&&(d=(function(E){return E.map((T=>(function(G){return new wu(Dl(G.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(T)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let T;return T=typeof E=="object"?E.value:E,uf(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(E){const T=!!E.before,P=E.values||[];return new $h(P,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const T=!E.before,P=E.values||[];return new $h(P,T)})(t.endAt)),GR(e,l,d,u,p,"F",g,y)}function AI(s,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bk(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Dl(t.unaryFilter.field);return ys.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Dl(t.unaryFilter.field);return ys.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Dl(t.unaryFilter.field);return ys.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Dl(t.unaryFilter.field);return ys.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return bt(61313);default:return bt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return ys.create(Dl(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return bt(58110);default:return bt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return li.create(t.compositeFilter.filters.map((i=>bk(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return bt(1026)}})(t.compositeFilter.op))})(s):bt(30097,{filter:s})}function RI(s){return vI[s]}function II(s){return bI[s]}function MI(s){return wI[s]}function Ml(s){return{fieldPath:s.canonicalString()}}function Dl(s){return Os.fromServerFormat(s.fieldPath)}function wk(s){return s instanceof ys?(function(t){if(t.op==="=="){if(Y2(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NAN"}};if(K2(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Y2(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NAN"}};if(K2(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(t.field),op:II(t.op),value:t.value}}})(s):s instanceof li?(function(t){const i=t.getFilters().map((l=>wk(l)));return i.length===1?i[0]:{compositeFilter:{op:MI(t.op),filters:i}}})(s):bt(54877,{filter:s})}function DI(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xk(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function _k(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class $a{constructor(e,t,i,l,u=xt.min(),d=xt.min(),p=Vs.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new $a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class LI{constructor(e){this.yt=e}}function OI(s){const e=NI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Wh(e,e.limit,"L"):e}class PI{constructor(){this.Sn=new VI}addToCollectionParentIndex(e,t){return this.Sn.add(t),je.resolve()}getCollectionParents(e,t){return je.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return je.resolve()}deleteFieldIndex(e,t){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,t){return je.resolve()}getDocumentsMatchingTarget(e,t){return je.resolve(null)}getIndexType(e,t){return je.resolve(0)}getFieldIndexes(e,t){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,t){return je.resolve(Xa.min())}getMinOffsetFromCollectionGroup(e,t){return je.resolve(Xa.min())}updateCollectionGroup(e,t,i){return je.resolve()}updateIndexEntries(e,t){return je.resolve()}}class VI{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t]||new ws(Tn.comparator),u=!l.has(i);return this.index[t]=l.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t];return l&&l.has(i)}getEntries(e){return(this.index[e]||new ws(Tn.comparator)).toArray()}}const cw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kk=41943040;class ur{static withCacheSize(e){return new ur(e,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(kk,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);class Kl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Kl(0)}static ar(){return new Kl(-1)}}const uw="LruGarbageCollector",UI=1048576;function dw([s,e],[t,i]){const l=Ut(s,t);return l===0?Ut(e,i):l}class BI{constructor(e){this.Pr=e,this.buffer=new ws(dw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();dw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){$e(uw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){nc(t)?$e(uw,"Ignoring IndexedDB error during garbage collection: ",t):await tc(t)}await this.Ar(3e5)}))}}class FI{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return je.resolve(cf.ce);const i=new BI(t);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(cw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,l,u,d,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,d=Date.now(),this.nthSequenceNumber(e,l)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,t)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),Rl()<=Vt.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:E}))))}}function qI(s,e){return new FI(s,e)}class HI{constructor(){this.changes=new Go((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?je.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $I{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class WI{constructor(e,t,i,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(i!==null&&uu(i.mutation,l,Tr.empty(),Rt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Bt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Bt()){const l=No();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,i).next((u=>{let d=nu();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=No();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Bt())))}populateOverlays(e,t,i){const l=[];return i.forEach((u=>{t.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,i,l){let u=da();const d=cu(),p=(function(){return cu()})();return t.forEach(((g,y)=>{const b=i.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof ao)?u=u.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),uu(b.mutation,y,b.mutation.getFieldMask(),Rt.now())):d.set(y.key,Tr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,b)=>d.set(y,b))),t.forEach(((y,b)=>p.set(y,new $I(b,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=cu();let l=new qn(((d,p)=>d-p)),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let b=i.get(g)||Tr.empty();b=p.applyToLocalView(y,b),i.set(g,b);const E=(l.get(p.batchId)||Bt()).add(g);l=l.insert(p.batchId,E)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,E=sk();b.forEach((T=>{if(!u.has(T)){const P=uk(t.get(T),i.get(T));P!==null&&E.set(T,P),u=u.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,E))}return je.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,l){return KR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):J_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,l):this.getDocumentsMatchingCollectionQuery(e,t,i,l)}getNextDocuments(e,t,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,l-u.size):je.resolve(No());let p=gu,g=u;return d.next((y=>je.forEach(y,((b,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),u.get(b)?je.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Bt()))).next((b=>({batchId:p,changes:nk(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new it(t)).next((i=>{let l=nu();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,l){const u=t.collectionGroup;let d=nu();return this.indexManager.getCollectionParents(e,u).next((p=>je.forEach(p,(g=>{const y=(function(E,T){return new sc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((b=>{b.forEach(((E,T)=>{d=d.insert(E,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,l)))).next((d=>{u.forEach(((g,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,Fs.newInvalidDocument(b)))}));let p=nu();return d.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&uu(b.mutation,y,Tr.empty(),Rt.now()),mf(t,y)&&(p=p.insert(g,y))})),p}))}}class GI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return je.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Ci(l.createTime)}})(t)),je.resolve()}getNamedQuery(e,t){return je.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(l){return{name:l.name,query:OI(l.bundledQuery),readTime:Ci(l.readTime)}})(t)),je.resolve()}}class KI{constructor(){this.overlays=new qn(it.comparator),this.Lr=new Map}getOverlay(e,t){return je.resolve(this.overlays.get(t))}getOverlays(e,t){const i=No();return je.forEach(t,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((l,u)=>{this.bt(e,t,u)})),je.resolve()}removeOverlaysForBatchId(e,t,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),je.resolve()}getOverlaysForCollection(e,t,i){const l=No(),u=t.length+1,d=new it(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return je.resolve(l)}getOverlaysForCollectionGroup(e,t,i,l){let u=new qn(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let b=u.get(y.largestBatchId);b===null&&(b=No(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=No(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=l)););return je.resolve(p)}bt(e,t,i){const l=this.overlays.get(i.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new hI(t,i));let u=this.Lr.get(t);u===void 0&&(u=Bt(),this.Lr.set(t,u)),this.Lr.set(t,u.add(i.key))}}class YI{constructor(){this.sessionToken=Vs.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,je.resolve()}}class Cy{constructor(){this.kr=new ws(Es.Kr),this.qr=new ws(Es.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Es(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Es(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new it(new Tn([])),i=new Es(t,e),l=new Es(t,e+1),u=[];return this.qr.forEachInRange([i,l],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new it(new Tn([])),i=new Es(t,e),l=new Es(t,e+1);let u=Bt();return this.qr.forEachInRange([i,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new Es(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Es{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return it.comparator(e.key,t.key)||Ut(e.Hr,t.Hr)}static Ur(e,t){return Ut(e.Hr,t.Hr)||it.comparator(e.key,t.key)}}class QI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ws(Es.Kr)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new dI(u,t,i,l);this.mutationQueue.push(d);for(const p of l)this.Jr=this.Jr.add(new Es(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return je.resolve(d)}lookupMutationBatch(e,t){return je.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,l=this.Xr(i),u=l<0?0:l;return je.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?by:this.Yn-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Es(t,0),l=new Es(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(d=>{const p=this.Zr(d.Hr);u.push(p)})),je.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ws(Ut);return t.forEach((l=>{const u=new Es(l,0),d=new Es(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{i=i.add(p.Hr)}))})),je.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,l=i.length+1;let u=i;it.isDocumentKey(u)||(u=u.child(""));const d=new Es(new it(u),0);let p=new ws(Ut);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),d),je.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){cn(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return je.forEach(t.mutations,(l=>{const u=new Es(l.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Es(t,0),l=this.Jr.firstAfterOrEqual(i);return je.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class XI{constructor(e){this.ti=e,this.docs=(function(){return new qn(it.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,l=this.docs.get(i),u=l?l.size:0,d=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return je.resolve(i?i.document.mutableCopy():Fs.newInvalidDocument(t))}getEntries(e,t){let i=da();return t.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Fs.newInvalidDocument(l))})),je.resolve(i)}getDocumentsMatchingQuery(e,t,i,l){let u=da();const d=t.path,p=new it(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||ER(kR(b),i)<=0||(l.has(b.key)||mf(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return je.resolve(u)}getAllFromCollectionGroup(e,t,i,l){bt(9500)}ni(e,t){return je.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new JI(this)}getSize(e){return je.resolve(this.size)}}class JI extends HI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?t.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),je.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class ZI{constructor(e){this.persistence=e,this.ri=new Go((t=>_y(t)),ky),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.ii=0,this.si=new Cy,this.targetCount=0,this.oi=Kl._r()}forEachTarget(e,t){return this.ri.forEach(((i,l)=>t(l))),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),je.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Kl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,je.resolve()}updateTargetData(e,t){return this.lr(t),je.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,t,i){let l=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),je.waitFor(u).next((()=>l))}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return je.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),je.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const l=this.persistence.referenceDelegate,u=[];return l&&t.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),je.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),je.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return je.resolve(i)}containsKey(e,t){return je.resolve(this.si.containsKey(t))}}class Ek{constructor(e,t){this._i={},this.overlays={},this.ai=new cf(0),this.ui=!1,this.ui=!0,this.ci=new YI,this.referenceDelegate=e(this),this.li=new ZI(this),this.indexManager=new PI,this.remoteDocumentCache=(function(l){return new XI(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new LI(t),this.Pi=new GI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new QI(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){$e("MemoryPersistence","Starting transaction:",e);const l=new e6(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,t){return je.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class e6 extends jR{constructor(e){super(),this.currentSequenceNumber=e}}class Ny{constructor(e){this.persistence=e,this.Ri=new Cy,this.Ai=null}static Vi(e){return new Ny(e)}get di(){if(this.Ai)return this.Ai;throw bt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),je.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),je.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),je.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.di,(i=>{const l=it.fromPath(i);return this.mi(e,l).next((u=>{u||t.removeEntry(l,xt.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return je.or([()=>je.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Kh{constructor(e,t){this.persistence=e,this.fi=new Go((i=>NR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=qI(this,t)}static Vi(e,t){return new Kh(e,t)}Ti(){}Ii(e){return je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((l=>i+l))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return je.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?je.resolve():t(l)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,t).next((p=>{p||(i++,u.removeEntry(d,xt.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),je.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),je.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),je.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),je.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jh(e.data.value)),t}wr(e,t,i){return je.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.fi.get(t);return je.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ay{constructor(e,t,i,l){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=l}static Es(e,t){let i=Bt(),l=Bt();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Ay(e,t.fromCache,i,l)}}class t6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class n6{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return RC()?8:SR(Hs())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,l){const u={result:null};return this.gs(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,t,l,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new t6;return this.ys(e,t,d).next((p=>{if(u.result=p,this.As)return this.ws(e,t,d,p.size)}))})).next((()=>u.result))}ws(e,t,i,l){return i.documentReadCount<this.Vs?(Rl()<=Vt.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",Il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),je.resolve()):(Rl()<=Vt.DEBUG&&$e("QueryEngine","Query:",Il(t),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Rl()<=Vt.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",Il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Si(t))):je.resolve())}gs(e,t){if(Z2(t))return je.resolve(null);let i=Si(t);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Wh(t,null,"F"),i=Si(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=Bt(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(t,p);return this.Ss(t,y,d,g.readTime)?this.gs(e,Wh(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,i,l){return Z2(t)||l.isEqual(xt.min())?je.resolve(null):this.fs.getDocuments(e,i).next((u=>{const d=this.bs(t,u);return this.Ss(t,d,i,l)?je.resolve(null):(Rl()<=Vt.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Il(t)),this.Ds(e,d,t,_R(l,gu)).next((p=>p)))}))}bs(e,t){let i=new ws(ek(e));return t.forEach(((l,u)=>{mf(e,u)&&(i=i.add(u))})),i}Ss(e,t,i,l){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,t,i){return Rl()<=Vt.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Il(t)),this.fs.getDocumentsMatchingQuery(e,t,Xa.min(),i)}Ds(e,t,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Ry="LocalStore",s6=3e8;class r6{constructor(e,t,i,l){this.persistence=e,this.Cs=t,this.serializer=l,this.vs=new qn(Ut),this.Fs=new Go((u=>_y(u)),ky),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function i6(s,e,t,i){return new r6(s,e,t,i)}async function Tk(s,e){const t=kt(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return t.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],p=[];let g=Bt();for(const y of l){d.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function a6(s,e){const t=kt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const E=y.batch,T=E.keys();let P=je.resolve();return T.forEach((G=>{P=P.next((()=>b.getEntry(g,G))).next((q=>{const z=y.docVersions.get(G);cn(z!==null,48541),q.version.compareTo(z)<0&&(E.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),b.addEntry(q)))}))})),P.next((()=>p.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Bt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,l)))}))}function jk(s){const e=kt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function o6(s,e){const t=kt(s),i=e.snapshotVersion;let l=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});l=t.vs;const p=[];e.targetChanges.forEach(((b,E)=>{const T=l.get(E);if(!T)return;p.push(t.li.removeMatchingKeys(u,b.removedDocuments,E).next((()=>t.li.addMatchingKeys(u,b.addedDocuments,E))));let P=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(Vs.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,i)),l=l.insert(E,P),(function(q,z,K){return q.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=s6?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(T,P,b)&&p.push(t.li.updateTargetData(u,P))}));let g=da(),y=Bt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(l6(u,d,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!i.isEqual(xt.min())){const b=t.li.getLastRemoteSnapshotVersion(u).next((E=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(b)}return je.waitFor(p).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(t.vs=l,u)))}function l6(s,e,t){let i=Bt(),l=Bt();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=da();return t.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(xt.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):$e(Ry,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:l}}))}function c6(s,e){const t=kt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=by),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function u6(s,e){const t=kt(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return t.li.getTargetData(i,e).next((u=>u?(l=u,je.resolve(l)):t.li.allocateTargetId(i).next((d=>(l=new $a(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=t.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Pg(s,e,t){const i=kt(s),l=i.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!nc(d))throw d;$e(Ry,`Failed to update sequence numbers for target ${e}: ${d}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function hw(s,e,t){const i=kt(s);let l=xt.min(),u=Bt();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,b){const E=kt(g),T=E.Fs.get(b);return T!==void 0?je.resolve(E.vs.get(T)):E.li.getTargetData(y,b)})(i,d,Si(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,t?l:xt.min(),t?u:Bt()))).next((p=>(d6(i,XR(e),p),{documents:p,ks:u})))))}function d6(s,e,t){let i=s.Ms.get(e)||xt.min();t.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class fw{constructor(){this.activeTargetIds=sI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h6{constructor(){this.vo=new fw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new fw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class f6{Mo(e){}shutdown(){}}const mw="ConnectivityMonitor";class pw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){$e(mw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){$e(mw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let uh=null;function Vg(){return uh===null?uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():uh++,"0x"+uh.toString(16)}const qp="RestConnection",m6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class p6{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===qh?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,t,i,l,u){const d=Vg(),p=this.Qo(e,t.toUriEncodedString());$e(qp,`Sending RPC '${e}' ${d}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),b=so(y);return this.zo(e,p,g,i,b).then((E=>($e(qp,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw Fl(qp,`RPC '${e}' ${d} failed with error: `,E,"url: ",p,"request:",i),E}))}jo(e,t,i,l,u,d){return this.Wo(e,t,i,l,u)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ec})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,t){const i=m6[e];let l=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class g6{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Bs="WebChannelConnection",Gc=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Ul extends p6{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ul.c_){const e=A_();Gc(e,N_.STAT_EVENT,(t=>{t.stat===jg.PROXY?$e(Bs,"STAT_EVENT: detected buffering proxy"):t.stat===jg.NOPROXY&&$e(Bs,"STAT_EVENT: detected no buffering proxy")})),Ul.c_=!0}}zo(e,t,i,l,u){const d=Vg();return new Promise(((p,g)=>{const y=new S_;y.setWithCredentials(!0),y.listenOnce(C_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Th.NO_ERROR:const E=y.getResponseJson();$e(Bs,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),p(E);break;case Th.TIMEOUT:$e(Bs,`RPC '${e}' ${d} timed out`),g(new Ue(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Th.HTTP_ERROR:const T=y.getStatus();if($e(Bs,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const G=P?.error;if(G&&G.status&&G.message){const q=(function(K){const W=K.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(W)>=0?W:ge.UNKNOWN})(G.status);g(new Ue(q,G.message))}else g(new Ue(ge.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ue(ge.UNAVAILABLE,"Connection failed."));break;default:bt(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{$e(Bs,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(l);$e(Bs,`RPC '${e}' ${d} sending request:`,l),y.send(t,"POST",b,i,15)}))}T_(e,t,i){const l=Vg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=u.join("");$e(Bs,`Creating RPC '${e}' stream ${l}: ${y}`,p);const b=d.createWebChannel(y,p);this.I_(b);let E=!1,T=!1;const P=new g6({Ho:G=>{T?$e(Bs,`Not sending because RPC '${e}' stream ${l} is closed:`,G):(E||($e(Bs,`Opening RPC '${e}' stream ${l} transport.`),b.open(),E=!0),$e(Bs,`RPC '${e}' stream ${l} sending:`,G),b.send(G))},Jo:()=>b.close()});return Gc(b,tu.EventType.OPEN,(()=>{T||($e(Bs,`RPC '${e}' stream ${l} transport opened.`),P.i_())})),Gc(b,tu.EventType.CLOSE,(()=>{T||(T=!0,$e(Bs,`RPC '${e}' stream ${l} transport closed`),P.o_(),this.E_(b))})),Gc(b,tu.EventType.ERROR,(G=>{T||(T=!0,Fl(Bs,`RPC '${e}' stream ${l} transport errored. Name:`,G.name,"Message:",G.message),P.o_(new Ue(ge.UNAVAILABLE,"The operation could not be completed")))})),Gc(b,tu.EventType.MESSAGE,(G=>{if(!T){const q=G.data[0];cn(!!q,16349);const z=q,K=z?.error||z[0]?.error;if(K){$e(Bs,`RPC '${e}' stream ${l} received error:`,K);const W=K.status;let Q=(function(be){const C=ps[be];if(C!==void 0)return hk(C)})(W),oe=K.message;Q===void 0&&(Q=ge.INTERNAL,oe="Unknown error status: "+W+" with message "+K.message),T=!0,P.o_(new Ue(Q,oe)),b.close()}else $e(Bs,`RPC '${e}' stream ${l} received:`,q),P.__(q)}})),Ul.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return R_()}}function y6(s){return new Ul(s)}function Hp(){return typeof document<"u"?document:null}function wf(s){return new xI(s,!0)}Ul.c_=!1;class Sk{constructor(e,t,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-i);l>0&&$e("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const gw="PersistentStream";class Ck{constructor(e,t,i,l,u,d,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Sk(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(ua(t.toString()),ua("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===t&&this.G_(i,l)}),(i=>{e((()=>{const l=new Ue(ge.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return $e(gw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():($e(gw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class v6 extends Ck{constructor(e,t,i,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,l,d),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=EI(this.serializer,e),i=(function(u){if(!("targetChange"in u))return xt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?xt.min():d.readTime?Ci(d.readTime):xt.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Og(this.serializer),t.addTarget=(function(u,d){let p;const g=d.target;if(p=Rg(g)?{documents:SI(u,g)}:{query:CI(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=pk(u,d.resumeToken);const y=Mg(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(xt.min())>0){p.readTime=Gh(u,d.snapshotVersion.toTimestamp());const y=Mg(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=AI(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Og(this.serializer),t.removeTarget=e,this.K_(t)}}class b6 extends Ck{constructor(e,t,i,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,l,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return cn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,cn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){cn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=jI(e.writeResults,e.commitTime),i=Ci(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Og(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>TI(this.serializer,i)))};this.K_(t)}}class w6{}class x6 extends w6{constructor(e,t,i,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ue(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,Dg(t,i),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ue(ge.UNKNOWN,u.toString())}))}jo(e,t,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Dg(t,i),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ue(ge.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function _6(s,e,t,i){return new x6(s,e,t,i)}class k6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ua(t),this.aa=!1):$e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Uo="RemoteStore";class E6{constructor(e,t,i,l,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{i.enqueueAndForget((async()=>{Ko(this)&&($e(Uo,"Restarting streams for network reachability change."),await(async function(g){const y=kt(g);y.Ea.add(4),await Vu(y),y.Va.set("Unknown"),y.Ea.delete(4),await xf(y)})(this))}))})),this.Va=new k6(i,l)}}async function xf(s){if(Ko(s))for(const e of s.Ra)await e(!0)}async function Vu(s){for(const e of s.Ra)await e(!1)}function Nk(s,e){const t=kt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ly(t)?Dy(t):rc(t).O_()&&My(t,e))}function Iy(s,e){const t=kt(s),i=rc(t);t.Ia.delete(e),i.O_()&&Ak(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ko(t)&&t.Va.set("Unknown"))}function My(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xt.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rc(s).Z_(e)}function Ak(s,e){s.da.$e(e),rc(s).X_(e)}function Dy(s){s.da=new yI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),rc(s).start(),s.Va.ua()}function Ly(s){return Ko(s)&&!rc(s).x_()&&s.Ia.size>0}function Ko(s){return kt(s).Ea.size===0}function Rk(s){s.da=void 0}async function T6(s){s.Va.set("Online")}async function j6(s){s.Ia.forEach(((e,t)=>{My(s,e)}))}async function S6(s,e){Rk(s),Ly(s)?(s.Va.ha(e),Dy(s)):s.Va.set("Unknown")}async function C6(s,e,t){if(s.Va.set("Online"),e instanceof mk&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){$e(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Yh(s,i)}else if(e instanceof Nh?s.da.Xe(e):e instanceof fk?s.da.st(e):s.da.tt(e),!t.isEqual(xt.min()))try{const i=await jk(s.localStore);t.compareTo(i)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(Vs.EMPTY_BYTE_STRING,b.snapshotVersion)),Ak(u,g);const E=new $a(b.target,g,y,b.sequenceNumber);My(u,E)})),u.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(i){$e(Uo,"Failed to raise snapshot:",i),await Yh(s,i)}}async function Yh(s,e,t){if(!nc(e))throw e;s.Ea.add(1),await Vu(s),s.Va.set("Offline"),t||(t=()=>jk(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{$e(Uo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await xf(s)}))}function Ik(s,e){return e().catch((t=>Yh(s,t,e)))}async function _f(s){const e=kt(s),t=to(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:by;for(;N6(e);)try{const l=await c6(e.localStore,i);if(l===null){e.Ta.length===0&&t.L_();break}i=l.batchId,A6(e,l)}catch(l){await Yh(e,l)}Mk(e)&&Dk(e)}function N6(s){return Ko(s)&&s.Ta.length<10}function A6(s,e){s.Ta.push(e);const t=to(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function Mk(s){return Ko(s)&&!to(s).x_()&&s.Ta.length>0}function Dk(s){to(s).start()}async function R6(s){to(s).ra()}async function I6(s){const e=to(s);for(const t of s.Ta)e.ea(t.mutations)}async function M6(s,e,t){const i=s.Ta.shift(),l=Ty.from(i,e,t);await Ik(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await _f(s)}async function D6(s,e){e&&to(s).Y_&&await(async function(i,l){if((function(d){return mI(d)&&d!==ge.ABORTED})(l.code)){const u=i.Ta.shift();to(i).B_(),await Ik(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await _f(i)}})(s,e),Mk(s)&&Dk(s)}async function yw(s,e){const t=kt(s);t.asyncQueue.verifyOperationInProgress(),$e(Uo,"RemoteStore received new credentials");const i=Ko(t);t.Ea.add(3),await Vu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await xf(t)}async function L6(s,e){const t=kt(s);e?(t.Ea.delete(2),await xf(t)):e||(t.Ea.add(2),await Vu(t),t.Va.set("Unknown"))}function rc(s){return s.ma||(s.ma=(function(t,i,l){const u=kt(t);return u.sa(),new v6(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:T6.bind(null,s),Yo:j6.bind(null,s),t_:S6.bind(null,s),J_:C6.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Ly(s)?Dy(s):s.Va.set("Unknown")):(await s.ma.stop(),Rk(s))}))),s.ma}function to(s){return s.fa||(s.fa=(function(t,i,l){const u=kt(t);return u.sa(),new b6(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:R6.bind(null,s),t_:D6.bind(null,s),ta:I6.bind(null,s),na:M6.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await _f(s)):(await s.fa.stop(),s.Ta.length>0&&($e(Uo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Oy{constructor(e,t,i,l,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,l,u){const d=Date.now()+i,p=new Oy(e,t,d,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Py(s,e){if(ua("AsyncQueue",`${e}: ${s}`),nc(s))return new Ue(ge.UNAVAILABLE,`${e}: ${s}`);throw s}class Bl{static emptySet(e){return new Bl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||it.comparator(t.key,i.key):(t,i)=>it.comparator(t.key,i.key),this.keyedMap=nu(),this.sortedSet=new qn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Bl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class vw{constructor(){this.ga=new qn(it.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):bt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Yl{constructor(e,t,i,l,u,d,p,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,l,u){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new Yl(e,t,Bl.emptySet(t),d,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==i[l].type||!t[l].doc.isEqual(i[l].doc))return!1;return!0}}class O6{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class P6{constructor(){this.queries=bw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const l=kt(t),u=l.queries;l.queries=bw(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Ue(ge.ABORTED,"Firestore shutting down"))}}function bw(){return new Go((s=>Z_(s)),ff)}async function Vy(s,e){const t=kt(s);let i=3;const l=e.query;let u=t.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new O6,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(l,!0);break;case 1:u.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const p=Py(d,`Initialization of query '${Il(e.query)}' failed`);return void e.onError(p)}t.queries.set(l,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&By(t)}async function Uy(s,e){const t=kt(s),i=e.query;let l=3;const u=t.queries.get(i);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function V6(s,e){const t=kt(s);let i=!1;for(const l of e){const u=l.query,d=t.queries.get(u);if(d){for(const p of d.ba)p.Fa(l)&&(i=!0);d.wa=l}}i&&By(t)}function U6(s,e,t){const i=kt(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(t);i.queries.delete(e)}function By(s){s.Ca.forEach((e=>{e.next()}))}var Ug,ww;(ww=Ug||(Ug={})).Ma="default",ww.Cache="cache";class zy{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Yl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ug.Cache}}class Lk{constructor(e){this.key=e}}class Ok{constructor(e){this.key=e}}class B6{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Bt(),this.mutatedKeys=Bt(),this.eu=ek(e),this.tu=new Bl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new vw,l=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,E)=>{const T=l.get(b),P=mf(this.query,E)?E:null,G=!!T&&this.mutatedKeys.has(T.key),q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let z=!1;T&&P?T.data.isEqual(P.data)?G!==q&&(i.track({type:3,doc:P}),z=!0):this.su(T,P)||(i.track({type:2,doc:P}),z=!0,(g&&this.eu(P,g)>0||y&&this.eu(P,y)<0)&&(p=!0)):!T&&P?(i.track({type:0,doc:P}),z=!0):T&&!P&&(i.track({type:1,doc:T}),z=!0,(g||y)&&(p=!0)),z&&(P?(d=d.add(P),u=q?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),i.track({type:1,doc:b})}return{tu:d,iu:i,Ss:p,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,E)=>(function(P,G){const q=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt(20277,{Vt:z})}};return q(P)-q(G)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(i),l=l??!1;const p=t&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new Yl(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Bt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new Ok(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new Lk(i))})),t}cu(e){this.Za=e.ks,this.Ya=Bt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Fy="SyncEngine";class z6{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class F6{constructor(e){this.key=e,this.hu=!1}}class q6{constructor(e,t,i,l,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Go((p=>Z_(p)),ff),this.Iu=new Map,this.Eu=new Set,this.Ru=new qn(it.comparator),this.Au=new Map,this.Vu=new Cy,this.du={},this.mu=new Map,this.fu=Kl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function H6(s,e,t=!0){const i=Fk(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await Pk(i,e,t,!0),l}async function $6(s,e){const t=Fk(s);await Pk(t,e,!0,!1)}async function Pk(s,e,t,i){const l=await u6(s.localStore,Si(e)),u=l.targetId,d=s.sharedClientState.addLocalQueryTarget(u,t);let p;return i&&(p=await W6(s,e,u,d==="current",l.resumeToken)),s.isPrimaryClient&&t&&Nk(s.remoteStore,l),p}async function W6(s,e,t,i,l){s.pu=(E,T,P)=>(async function(q,z,K,W){let Q=z.view.ru(K);Q.Ss&&(Q=await hw(q.localStore,z.query,!1).then((({documents:C})=>z.view.ru(C,Q))));const oe=W&&W.targetChanges.get(z.targetId),Te=W&&W.targetMismatches.get(z.targetId)!=null,be=z.view.applyChanges(Q,q.isPrimaryClient,oe,Te);return _w(q,z.targetId,be.au),be.snapshot})(s,E,T,P);const u=await hw(s.localStore,e,!0),d=new B6(e,u.ks),p=d.ru(u.documents),g=Pu.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",l),y=d.applyChanges(p,s.isPrimaryClient,g);_w(s,t,y.au);const b=new z6(e,t,d);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function G6(s,e,t){const i=kt(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((d=>!ff(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await Pg(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),t&&Iy(i.remoteStore,l.targetId),Bg(i,l.targetId)})).catch(tc)):(Bg(i,l.targetId),await Pg(i.localStore,l.targetId,!0))}async function K6(s,e){const t=kt(s),i=t.Tu.get(e),l=t.Iu.get(i.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Iy(t.remoteStore,i.targetId))}async function Y6(s,e,t){const i=nM(s);try{const l=await(function(d,p){const g=kt(d),y=Rt.now(),b=p.reduce(((P,G)=>P.add(G.key)),Bt());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let G=da(),q=Bt();return g.xs.getEntries(P,b).next((z=>{G=z,G.forEach(((K,W)=>{W.isValidDocument()||(q=q.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,G))).next((z=>{E=z;const K=[];for(const W of p){const Q=cI(W,E.get(W.key).overlayedDocument);Q!=null&&K.push(new ao(W.key,Q,$_(Q.value.mapValue),nr.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,K,p)})).next((z=>{T=z;const K=z.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(P,z.batchId,K)}))})).then((()=>({batchId:T.batchId,changes:nk(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new qn(Ut)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(i,l.batchId,t),await Uu(i,l.changes),await _f(i.remoteStore)}catch(l){const u=Py(l,"Failed to persist write");t.reject(u)}}async function Vk(s,e){const t=kt(s);try{const i=await o6(t.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=t.Au.get(u);d&&(cn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?cn(d.hu,14607):l.removedDocuments.size>0&&(cn(d.hu,42227),d.hu=!1))})),await Uu(t,i,e)}catch(i){await tc(i)}}function xw(s,e,t){const i=kt(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const l=[];i.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=kt(d);g.onlineState=p;let y=!1;g.queries.forEach(((b,E)=>{for(const T of E.ba)T.va(p)&&(y=!0)})),y&&By(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Q6(s,e,t){const i=kt(s);i.sharedClientState.updateQueryState(e,"rejected",t);const l=i.Au.get(e),u=l&&l.key;if(u){let d=new qn(it.comparator);d=d.insert(u,Fs.newNoDocument(u,xt.min()));const p=Bt().add(u),g=new bf(xt.min(),new Map,new qn(Ut),d,p);await Vk(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),qy(i)}else await Pg(i.localStore,e,!1).then((()=>Bg(i,e,t))).catch(tc)}async function X6(s,e){const t=kt(s),i=e.batch.batchId;try{const l=await a6(t.localStore,e);Bk(t,i,null),Uk(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Uu(t,l)}catch(l){await tc(l)}}async function J6(s,e,t){const i=kt(s);try{const l=await(function(d,p){const g=kt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((E=>(cn(E!==null,37113),b=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);Bk(i,e,t),Uk(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Uu(i,l)}catch(l){await tc(l)}}function Uk(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function Bk(s,e,t){const i=kt(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(t?u.reject(t):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function Bg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||zk(s,i)}))}function zk(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(Iy(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),qy(s))}function _w(s,e,t){for(const i of t)i instanceof Lk?(s.Vu.addReference(i.key,e),Z6(s,i)):i instanceof Ok?($e(Fy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||zk(s,i.key)):bt(19791,{wu:i})}function Z6(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||($e(Fy,"New document in limbo: "+t),s.Eu.add(i),qy(s))}function qy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new it(Tn.fromString(e)),i=s.fu.next();s.Au.set(i,new F6(t)),s.Ru=s.Ru.insert(t,i),Nk(s.remoteStore,new $a(Si(hf(t.path)),i,"TargetPurposeLimboResolution",cf.ce))}}async function Uu(s,e,t){const i=kt(s),l=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{d.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const b=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){l.push(y);const b=Ay.Es(g.targetId,y);u.push(b)}})))})),await Promise.all(d),i.Pu.J_(l),await(async function(g,y){const b=kt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>je.forEach(y,(T=>je.forEach(T.Ts,(P=>b.persistence.referenceDelegate.addReference(E,T.targetId,P))).next((()=>je.forEach(T.Is,(P=>b.persistence.referenceDelegate.removeReference(E,T.targetId,P)))))))))}catch(E){if(!nc(E))throw E;$e(Ry,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const P=b.vs.get(T),G=P.snapshotVersion,q=P.withLastLimboFreeSnapshotVersion(G);b.vs=b.vs.insert(T,q)}}})(i.localStore,u))}async function eM(s,e){const t=kt(s);if(!t.currentUser.isEqual(e)){$e(Fy,"User change. New user:",e.toKey());const i=await Tk(t.localStore,e);t.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ue(ge.CANCELLED,d))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Uu(t,i.Ns)}}function tM(s,e){const t=kt(s),i=t.Au.get(e);if(i&&i.hu)return Bt().add(i.key);{let l=Bt();const u=t.Iu.get(e);if(!u)return l;for(const d of u){const p=t.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function Fk(s){const e=kt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q6.bind(null,e),e.Pu.J_=V6.bind(null,e.eventManager),e.Pu.yu=U6.bind(null,e.eventManager),e}function nM(s){const e=kt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=J6.bind(null,e),e}class Qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return i6(this.persistence,new n6,e.initialUser,this.serializer)}Cu(e){return new Ek(Ny.Vi,this.serializer)}Du(e){return new h6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qh.provider={build:()=>new Qh};class sM extends Qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){cn(this.persistence.referenceDelegate instanceof Kh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new zI(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new Ek((i=>Kh.Vi(i,t)),this.serializer)}}class zg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=eM.bind(null,this.syncEngine),await L6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new P6})()}createDatastore(e){const t=wf(e.databaseInfo.databaseId),i=y6(e.databaseInfo);return _6(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,l,u,d,p){return new E6(i,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>xw(this.syncEngine,t,0)),(function(){return pw.v()?new pw:new f6})())}createSyncEngine(e,t){return(function(l,u,d,p,g,y,b){const E=new q6(l,u,d,p,g,y);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=kt(t);$e(Uo,"RemoteStore shutting down."),i.Ea.add(5),await Vu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}zg.provider={build:()=>new zg};class Hy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ua("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const no="FirestoreClient";class rM{constructor(e,t,i,l,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=l,this.user=zs.UNAUTHENTICATED,this.clientId=vy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{$e(no,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>($e(no,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Py(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function $p(s,e){s.asyncQueue.verifyOperationInProgress(),$e(no,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await Tk(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function kw(s,e){s.asyncQueue.verifyOperationInProgress();const t=await iM(s);$e(no,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>yw(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>yw(e.remoteStore,l))),s._onlineComponents=e}async function iM(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){$e(no,"Using user provided OfflineComponentProvider");try{await $p(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ge.FAILED_PRECONDITION||l.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;Fl("Error using user provided cache. Falling back to memory cache: "+t),await $p(s,new Qh)}}else $e(no,"Using default OfflineComponentProvider"),await $p(s,new sM(void 0));return s._offlineComponents}async function qk(s){return s._onlineComponents||(s._uninitializedComponentsProvider?($e(no,"Using user provided OnlineComponentProvider"),await kw(s,s._uninitializedComponentsProvider._online)):($e(no,"Using default OnlineComponentProvider"),await kw(s,new zg))),s._onlineComponents}function aM(s){return qk(s).then((e=>e.syncEngine))}async function Xh(s){const e=await qk(s),t=e.eventManager;return t.onListen=H6.bind(null,e.syncEngine),t.onUnlisten=G6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=K6.bind(null,e.syncEngine),t}function oM(s,e,t,i){const l=new Hy(i),u=new zy(e,l,t);return s.asyncQueue.enqueueAndForget((async()=>Vy(await Xh(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>Uy(await Xh(s),u)))}}function lM(s,e,t={}){const i=new ia;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const b=new Hy({next:T=>{b.Nu(),d.enqueueAndForget((()=>Uy(u,E)));const P=T.docs.has(p);!P&&T.fromCache?y.reject(new Ue(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&T.fromCache&&g&&g.source==="server"?y.reject(new Ue(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new zy(hf(p.path),b,{includeMetadataChanges:!0,Ka:!0});return Vy(u,E)})(await Xh(s),s.asyncQueue,e,t,i))),i.promise}function cM(s,e,t={}){const i=new ia;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const b=new Hy({next:T=>{b.Nu(),d.enqueueAndForget((()=>Uy(u,E))),T.fromCache&&g.source==="server"?y.reject(new Ue(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new zy(p,b,{includeMetadataChanges:!0,Ka:!0});return Vy(u,E)})(await Xh(s),s.asyncQueue,e,t,i))),i.promise}function uM(s,e){const t=new ia;return s.asyncQueue.enqueueAndForget((async()=>Y6(await aM(s),e,t))),t.promise}function Hk(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const dM="ComponentProvider",Ew=new Map;function hM(s,e,t,i,l){return new IR(s,e,t,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Hk(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const $k="firestore.googleapis.com",Tw=!0;class jw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$k,this.ssl=Tw}else this.host=e.host,this.ssl=e.ssl??Tw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UI)throw new Ue(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hk(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ue(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ue(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ue(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kf{constructor(e,t,i,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new uR;switch(i.type){case"firstParty":return new mR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ue(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Ew.get(t);i&&($e(dM,"Removing Datastore"),Ew.delete(t),i.terminate())})(this),Promise.resolve()}}function fM(s,e,t,i={}){s=tr(s,kf);const l=so(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;l&&(sy(`https://${p}`),ry("Firestore",!0)),u.host!==$k&&u.host!==p&&Fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!oa(g,d)&&(s._setSettings(g),i.mockUserToken)){let y,b;if(typeof i.mockUserToken=="string")y=i.mockUserToken,b=zs.MOCK_USER;else{y=Vx(i.mockUserToken,s._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Ue(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new zs(E)}s._authCredentials=new dR(new M_(y,b))}}class ma{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ma(this.firestore,e,this._query)}}class Xn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}toJSON(){return{type:Xn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Lu(t,Xn._jsonSchema))return new Xn(e,i||null,new it(Tn.fromString(t.referencePath)))}}Xn._jsonSchemaVersion="firestore/documentReference/1.0",Xn._jsonSchema={type:vs("string",Xn._jsonSchemaVersion),referencePath:vs("string")};class Qa extends ma{constructor(e,t,i){super(e,t,hf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new it(e))}withConverter(e){return new Qa(this.firestore,e,this._path)}}function dt(s,e,...t){if(s=un(s),D_("collection","path",e),s instanceof kf){const i=Tn.fromString(e,...t);return U2(i),new Qa(s,null,i)}{if(!(s instanceof Xn||s instanceof Qa))throw new Ue(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Tn.fromString(e,...t));return U2(i),new Qa(s.firestore,null,i)}}function We(s,e,...t){if(s=un(s),arguments.length===1&&(e=vy.newId()),D_("doc","path",e),s instanceof kf){const i=Tn.fromString(e,...t);return V2(i),new Xn(s,null,new it(i))}{if(!(s instanceof Xn||s instanceof Qa))throw new Ue(ge.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Tn.fromString(e,...t));return V2(i),new Xn(s.firestore,s instanceof Qa?s.converter:null,new it(i))}}const Sw="AsyncQueue";class Cw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Sk(this,"async_queue_retry"),this._c=()=>{const i=Hp();i&&$e(Sw,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Hp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ia;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!nc(e))throw e;$e(Sw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ua("INTERNAL UNHANDLED ERROR: ",Nw(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=Oy.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&bt(47125,{Pc:Nw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Nw(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ri extends kf{constructor(e,t,i,l){super(e,t,i,l),this.type="firestore",this._queue=new Cw,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cw(e),this._firestoreClient=void 0,await e}}}function mM(s,e){const t=typeof s=="object"?s:Au(),i=typeof s=="string"?s:qh,l=$o(t,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=Lx("firestore");u&&fM(l,...u)}return l}function Bu(s){if(s._terminated)throw new Ue(ge.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||pM(s),s._firestoreClient}function pM(s){const e=s._freezeSettings(),t=hM(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new rM(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class Hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hr(Vs.fromBase64String(e))}catch(t){throw new Ue(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hr(Vs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,Hr._jsonSchema))return Hr.fromBase64String(e.bytes)}}Hr._jsonSchemaVersion="firestore/bytes/1.0",Hr._jsonSchema={type:vs("string",Hr._jsonSchemaVersion),bytes:vs("string")};class Ef{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ue(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Os(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yo{constructor(e){this._methodName=e}}class Ni{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ni._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,Ni._jsonSchema))return new Ni(e.latitude,e.longitude)}}Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:vs("string",Ni._jsonSchemaVersion),latitude:vs("number"),longitude:vs("number")};class ii{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ii(e.vectorValues);throw new Ue(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ii._jsonSchemaVersion="firestore/vectorValue/1.0",ii._jsonSchema={type:vs("string",ii._jsonSchemaVersion),vectorValues:vs("object")};const gM=/^__.*__$/;class yM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ou(e,this.data,t,this.fieldTransforms)}}class Wk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gk(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt(40011,{dataSource:s})}}class Tf{constructor(e,t,i,l,u,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Tf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Gk(this.dataSource)&&gM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class vM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||wf(e)}createContext(e,t,i,l=!1){return new Tf({dataSource:e,methodName:t,targetDoc:i,path:Os.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zu(s){const e=s._freezeSettings(),t=wf(s._databaseId);return new vM(s._databaseId,!!e.ignoreUndefinedProperties,t)}function $y(s,e,t,i,l,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,t,l);Qy("Data must be an object, but it was:",d,i);const p=Xk(i,d);let g,y;if(u.merge)g=new Tr(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const E of u.mergeFields){const T=Bo(e,E,t);if(!d.contains(T))throw new Ue(ge.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);eE(b,T)||b.push(T)}g=new Tr(b),y=d.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=d.fieldTransforms;return new yM(new dr(p),g,y)}class jf extends Yo{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function Kk(s,e,t){return new Tf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:s._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Wy extends Yo{_toFieldTransform(e){return new gf(e.path,new xu)}isEqual(e){return e instanceof Wy}}class Gy extends Yo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Kk(this,e,!0),i=this.Ac.map((u=>Qo(u,t))),l=new Wl(i);return new gf(e.path,l)}isEqual(e){return e instanceof Gy&&oa(this.Ac,e.Ac)}}class Ky extends Yo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Kk(this,e,!0),i=this.Ac.map((u=>Qo(u,t))),l=new Gl(i);return new gf(e.path,l)}isEqual(e){return e instanceof Ky&&oa(this.Ac,e.Ac)}}class Yy extends Yo{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new _u(e.serializer,ik(e.serializer,this.Vc));return new gf(e.path,t)}isEqual(e){return e instanceof Yy&&this.Vc===e.Vc}}function Yk(s,e,t,i){const l=s.createContext(1,e,t);Qy("Data must be an object, but it was:",l,i);const u=[],d=dr.empty();io(i,((g,y)=>{const b=Zk(e,g,t);y=un(y);const E=l.childContextForFieldPath(b);if(y instanceof jf)u.push(b);else{const T=Qo(y,E);T!=null&&(u.push(b),d.set(b,T))}}));const p=new Tr(u);return new Wk(d,p,l.fieldTransforms)}function Qk(s,e,t,i,l,u){const d=s.createContext(1,e,t),p=[Bo(e,i,t)],g=[l];if(u.length%2!=0)throw new Ue(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)p.push(Bo(e,u[T])),g.push(u[T+1]);const y=[],b=dr.empty();for(let T=p.length-1;T>=0;--T)if(!eE(y,p[T])){const P=p[T];let G=g[T];G=un(G);const q=d.childContextForFieldPath(P);if(G instanceof jf)y.push(P);else{const z=Qo(G,q);z!=null&&(y.push(P),b.set(P,z))}}const E=new Tr(y);return new Wk(b,E,d.fieldTransforms)}function bM(s,e,t,i=!1){return Qo(t,s.createContext(i?4:3,e))}function Qo(s,e){if(Jk(s=un(s)))return Qy("Unsupported field value:",e,s),Xk(s,e);if(s instanceof Yo)return(function(i,l){if(!Gk(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let d=0;for(const p of i){let g=Qo(p,l.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=un(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ik(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Rt.fromDate(i);return{timestampValue:Gh(l.serializer,u)}}if(i instanceof Rt){const u=new Rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Gh(l.serializer,u)}}if(i instanceof Ni)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Hr)return{bytesValue:pk(l.serializer,i._byteString)};if(i instanceof Xn){const u=l.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Sy(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof ii)return(function(d,p){const g=d instanceof ii?d.toArray():d;return{mapValue:{fields:{[q_]:{stringValue:H_},[Hh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return Ey(p.serializer,b)}))}}}}}})(i,l);if(_k(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${lf(i)}`)})(s,e)}function Xk(s,e){const t={};return P_(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):io(s,((i,l)=>{const u=Qo(l,e.childContextForField(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function Jk(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Rt||s instanceof Ni||s instanceof Hr||s instanceof Xn||s instanceof Yo||s instanceof ii||_k(s))}function Qy(s,e,t){if(!Jk(t)||!L_(t)){const i=lf(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Bo(s,e,t){if((e=un(e))instanceof Ef)return e._internalPath;if(typeof e=="string")return Zk(s,e);throw Jh("Field path arguments must be of type string or ",s,!1,void 0,t)}const wM=new RegExp("[~\\*/\\[\\]]");function Zk(s,e,t){if(e.search(wM)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Ef(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Jh(s,e,t,i,l){const u=i&&!i.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${l}`),g+=")"),new Ue(ge.INVALID_ARGUMENT,p+s+g)}function eE(s,e){return s.some((t=>t.isEqual(e)))}class xM{convertValue(e,t="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return as(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Za(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw bt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return io(e,((l,u)=>{i[l]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[Hh].arrayValue?.values?.map((i=>as(i.doubleValue)));return new ii(t)}convertGeoPoint(e){return new Ni(as(e.latitude),as(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=df(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const t=Ja(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Tn.fromString(e);cn(xk(i),9688,{name:e});const l=new vu(i.get(1),i.get(3)),u=new it(i.popFirst(5));return l.isEqual(t)||ua(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class Xy extends xM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}function Ps(){return new Wy("serverTimestamp")}function _M(...s){return new Gy("arrayUnion",s)}function kM(...s){return new Ky("arrayRemove",s)}function Ao(s){return new Yy("increment",s)}const Aw="@firebase/firestore",Rw="4.10.0";function Iw(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const l=t;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class tE{constructor(e,t,i,l,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Bo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class EM extends tE{data(){return super.data()}}function nE(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ue(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jy{}class Zy extends Jy{}function Qt(s,e,...t){let i=[];e instanceof Jy&&i.push(e),i=i.concat(t),(function(u){const d=u.filter((g=>g instanceof e0)).length,p=u.filter((g=>g instanceof Sf)).length;if(d>1||d>0&&p>0)throw new Ue(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class Sf extends Zy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Sf(e,t,i)}_apply(e){const t=this._parse(e);return sE(e._query,t),new ma(e.firestore,e.converter,Ig(e._query,t))}_parse(e){const t=zu(e.firestore);return(function(u,d,p,g,y,b,E){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ue(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Dw(E,b);const G=[];for(const q of E)G.push(Mw(g,u,q));T={arrayValue:{values:G}}}else T=Mw(g,u,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Dw(E,b),T=bM(p,d,E,b==="in"||b==="not-in");return ys.create(y,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wt(s,e,t){const i=e,l=Bo("where",s);return Sf._create(l,i,t)}class e0 extends Jy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new e0(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:li.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,u){let d=l;const p=u.getFlattenedFilters();for(const g of p)sE(d,g),d=Ig(d,g)})(e._query,t),new ma(e.firestore,e.converter,Ig(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class t0 extends Zy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new t0(e,t)}_apply(e){const t=(function(l,u,d){if(l.startAt!==null)throw new Ue(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ue(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wu(u,d)})(e._query,this._field,this._direction);return new ma(e.firestore,e.converter,QR(e._query,t))}}function ku(s,e="asc"){const t=e,i=Bo("orderBy",s);return t0._create(i,t)}class n0 extends Zy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n0(e,t,i)}_apply(e){return new ma(e.firestore,e.converter,Wh(e._query,this._limit,this._limitType))}}function Eu(s){return xR("limit",s),n0._create("limit",s,"F")}function Mw(s,e,t){if(typeof(t=un(t))=="string"){if(t==="")throw new Ue(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!J_(e)&&t.indexOf("/")!==-1)throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Tn.fromString(t));if(!it.isDocumentKey(i))throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return G2(s,new it(i))}if(t instanceof Xn)return G2(s,t._key);throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lf(t)}.`)}function Dw(s,e){if(!Array.isArray(s)||s.length===0)throw new Ue(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sE(s,e){const t=(function(l,u){for(const d of l)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ue(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function s0(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class ru{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Io extends tE{constructor(e,t,i,l,u,d){super(e,t,i,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Bo("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Io._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Io._jsonSchemaVersion="firestore/documentSnapshot/1.0",Io._jsonSchema={type:vs("string",Io._jsonSchemaVersion),bundleSource:vs("string","DocumentSnapshot"),bundleName:vs("string"),bundle:vs("string")};class Ah extends Io{data(e={}){return super.data(e)}}class Mo{constructor(e,t,i,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new ru(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ah(this._firestore,this._userDataWriter,i.key,i,new ru(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new Ah(l._firestore,l._userDataWriter,p.doc.key,p.doc,new ru(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new Ah(l._firestore,l._userDataWriter,p.doc.key,p.doc,new ru(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),b=d.indexOf(p.doc.key)),{type:TM(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TM(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt(61501,{type:s})}}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:vs("string",Mo._jsonSchemaVersion),bundleSource:vs("string","QuerySnapshot"),bundleName:vs("string"),bundle:vs("string")};class jM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zu(e)}set(e,t,i){this._verifyNotCommitted();const l=Wp(e,this._firestore),u=s0(l.converter,t,i),d=$y(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,i);return this._mutations.push(d.toMutation(l._key,nr.none())),this}update(e,t,i,...l){this._verifyNotCommitted();const u=Wp(e,this._firestore);let d;return d=typeof(t=un(t))=="string"||t instanceof Ef?Qk(this._dataReader,"WriteBatch.update",u._key,t,i,l):Yk(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wp(e,this._firestore);return this._mutations=this._mutations.concat(new vf(t._key,nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wp(s,e){if((s=un(s)).firestore!==e)throw new Ue(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function qs(s){s=tr(s,Xn);const e=tr(s.firestore,Ri),t=Bu(e);return lM(t,s._key).then((i=>iE(e,s,i)))}function $t(s){s=tr(s,ma);const e=tr(s.firestore,Ri),t=Bu(e),i=new Xy(e);return nE(s._query),cM(t,s._query).then((l=>new Mo(e,i,s,l)))}function Ts(s,e,t){s=tr(s,Xn);const i=tr(s.firestore,Ri),l=s0(s.converter,e,t),u=zu(i);return Fu(i,[$y(u,"setDoc",s._key,l,s.converter!==null,t).toMutation(s._key,nr.none())])}function gs(s,e,t,...i){s=tr(s,Xn);const l=tr(s.firestore,Ri),u=zu(l);let d;return d=typeof(e=un(e))=="string"||e instanceof Ef?Qk(u,"updateDoc",s._key,e,t,i):Yk(u,"updateDoc",s._key,e),Fu(l,[d.toMutation(s._key,nr.exists(!0))])}function Er(s){return Fu(tr(s.firestore,Ri),[new vf(s._key,nr.none())])}function jr(s,e){const t=tr(s.firestore,Ri),i=We(s),l=s0(s.converter,e),u=zu(s.firestore);return Fu(t,[$y(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,nr.exists(!1))]).then((()=>i))}function rE(s,...e){s=un(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Iw(e[i])||(t=e[i++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Iw(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,d,p;if(s instanceof Xn)d=tr(s.firestore,Ri),p=hf(s._key.path),u={next:y=>{e[i]&&e[i](iE(d,s,y))},error:e[i+1],complete:e[i+2]};else{const y=tr(s,ma);d=tr(y.firestore,Ri),p=y._query;const b=new Xy(d);u={next:E=>{e[i]&&e[i](new Mo(d,b,y,E))},error:e[i+1],complete:e[i+2]},nE(s._query)}const g=Bu(d);return oM(g,p,l,u)}function Fu(s,e){const t=Bu(s);return uM(t,e)}function iE(s,e,t){const i=t.docs.get(e._key),l=new Xy(s);return new Io(s,l,e._key,i,new ru(t.hasPendingWrites,t.fromCache),e.converter)}function Lw(s){return s=tr(s,Ri),Bu(s),new jM(s,(e=>Fu(s,e)))}(function(e,t=!0){cR(Wo),ai(new Wr("firestore",((i,{instanceIdentifier:l,options:u})=>{const d=i.getProvider("app").getImmediate(),p=new Ri(new hR(i.getProvider("auth-internal")),new pR(d,i.getProvider("app-check-internal")),MR(d,l),d);return u={useFetchStreams:t,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),hr(Aw,Rw,e),hr(Aw,Rw,"esm2020")})();var SM="firebase",CM="12.8.0";hr(SM,CM,"app");const aE="firebasestorage.googleapis.com",oE="storageBucket",NM=120*1e3,AM=600*1e3;class Zn extends ui{constructor(e,t,i=0){super(Gp(e),`Firebase Storage: ${t} (${Gp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Jn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Jn||(Jn={}));function Gp(s){return"storage/"+s}function r0(){const s="An unknown error occurred, please check the error payload for server response.";return new Zn(Jn.UNKNOWN,s)}function RM(s){return new Zn(Jn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function IM(s){return new Zn(Jn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function MM(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zn(Jn.UNAUTHENTICATED,s)}function DM(){return new Zn(Jn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LM(s){return new Zn(Jn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function OM(){return new Zn(Jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PM(){return new Zn(Jn.CANCELED,"User canceled the upload/download.")}function VM(s){return new Zn(Jn.INVALID_URL,"Invalid URL '"+s+"'.")}function UM(s){return new Zn(Jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function BM(){return new Zn(Jn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+oE+"' property when initializing the app?")}function zM(){return new Zn(Jn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function FM(){return new Zn(Jn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function qM(s){return new Zn(Jn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Fg(s){return new Zn(Jn.INVALID_ARGUMENT,s)}function lE(){return new Zn(Jn.APP_DELETED,"The Firebase app was deleted.")}function HM(s){return new Zn(Jn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function du(s,e){return new Zn(Jn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Kc(s){throw new Zn(Jn.INTERNAL_ERROR,"Internal error: "+s)}class er{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=er.makeFromUrl(e,t)}catch{return new er(e,"")}if(i.path==="")return i;throw UM(e)}static makeFromUrl(e,t){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function y(oe){oe.path_=decodeURIComponent(oe.path)}const b="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",P=new RegExp(`^https?://${E}/${b}/b/${l}/o${T}`,"i"),G={bucket:1,path:3},q=t===aE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,z="([^?#]*)",K=new RegExp(`^https?://${q}/${l}/${z}`,"i"),Q=[{regex:p,indices:g,postModify:u},{regex:P,indices:G,postModify:y},{regex:K,indices:{bucket:1,path:2},postModify:y}];for(let oe=0;oe<Q.length;oe++){const Te=Q[oe],be=Te.regex.exec(e);if(be){const C=be[Te.indices.bucket];let j=be[Te.indices.path];j||(j=""),i=new er(C,j),Te.postModify(i);break}}if(i==null)throw VM(e);return i}}class $M{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function WM(s,e,t){let i=1,l=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function b(...z){y||(y=!0,e.apply(null,z))}function E(z){l=setTimeout(()=>{l=null,s(P,g())},z)}function T(){u&&clearTimeout(u)}function P(z,...K){if(y){T();return}if(z){T(),b.call(null,z,...K);return}if(g()||d){T(),b.call(null,z,...K);return}i<64&&(i*=2);let Q;p===1?(p=2,Q=0):Q=(i+Math.random())*1e3,E(Q)}let G=!1;function q(z){G||(G=!0,T(),!y&&(l!==null?(z||(p=2),clearTimeout(l),E(0)):z||(p=1)))}return E(0),u=setTimeout(()=>{d=!0,q(!0)},t),q}function GM(s){s(!1)}function KM(s){return s!==void 0}function YM(s){return typeof s=="object"&&!Array.isArray(s)}function i0(s){return typeof s=="string"||s instanceof String}function Ow(s){return a0()&&s instanceof Blob}function a0(){return typeof Blob<"u"}function qg(s,e,t,i){if(i<e)throw Fg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>t)throw Fg(`Invalid value for '${s}'. Expected ${t} or less.`)}function Cf(s,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${s}`}function cE(s){const e=encodeURIComponent;let t="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);t=t+l+"&"}return t=t.slice(0,-1),t}var Do;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Do||(Do={}));function QM(s,e){const t=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||l||u}class XM{constructor(e,t,i,l,u,d,p,g,y,b,E,T=!0,P=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((G,q)=>{this.resolve_=G,this.reject_=q,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new dh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===Do.NO_ERROR,g=u.getStatus();if(!p||QM(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Do.ABORT;i(!1,new dh(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new dh(y,u))})},t=(i,l)=>{const u=this.resolve_,d=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());KM(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=r0();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(l.canceled){const g=this.appDelete_?lE():PM();d(g)}else{const g=OM();d(g)}};this.canceled_?t(!1,new dh(!1,null,!0)):this.backoffId_=WM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dh{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function JM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function ZM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function eD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function tD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function nD(s,e,t,i,l,u,d=!0,p=!1){const g=cE(s.urlParams),y=s.url+g,b=Object.assign({},s.headers);return eD(b,e),JM(b,t),ZM(b,u),tD(b,i),new XM(y,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,d,p)}function sD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rD(...s){const e=sD();if(e!==void 0){const t=new e;for(let i=0;i<s.length;i++)t.append(s[i]);return t.getBlob()}else{if(a0())return new Blob(s);throw new Zn(Jn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function iD(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function aD(s){if(typeof atob>"u")throw qM("base-64");return atob(s)}const Ei={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kp{constructor(e,t){this.data=e,this.contentType=t||null}}function oD(s,e){switch(s){case Ei.RAW:return new Kp(uE(e));case Ei.BASE64:case Ei.BASE64URL:return new Kp(dE(s,e));case Ei.DATA_URL:return new Kp(cD(e),uD(e))}throw r0()}function uE(s){const e=[];for(let t=0;t<s.length;t++){let i=s.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=i,d=s.charCodeAt(++t);i=65536|(u&1023)<<10|d&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function lD(s){let e;try{e=decodeURIComponent(s)}catch{throw du(Ei.DATA_URL,"Malformed data URL.")}return uE(e)}function dE(s,e){switch(s){case Ei.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw du(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case Ei.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw du(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=aD(e)}catch(l){throw l.message.includes("polyfill")?l:du(s,"Invalid character found")}const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i}class hE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw du(Ei.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=dD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function cD(s){const e=new hE(s);return e.base64?dE(Ei.BASE64,e.rest):lD(e.rest)}function uD(s){return new hE(s).contentType}function dD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Ha{constructor(e,t){let i=0,l="";Ow(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ow(this.data_)){const i=this.data_,l=iD(i,e,t);return l===null?null:new Ha(l)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ha(i,!0)}}static getBlob(...e){if(a0()){const t=e.map(i=>i instanceof Ha?i.data_:i);return new Ha(rD.apply(null,t))}else{const t=e.map(d=>i0(d)?oD(Ei.RAW,d).data:d.data_);let i=0;t.forEach(d=>{i+=d.byteLength});const l=new Uint8Array(i);let u=0;return t.forEach(d=>{for(let p=0;p<d.length;p++)l[u++]=d[p]}),new Ha(l,!0)}}uploadData(){return this.data_}}function o0(s){let e;try{e=JSON.parse(s)}catch{return null}return YM(e)?e:null}function hD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function fD(s,e){const t=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?t:s+"/"+t}function fE(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function mD(s,e){return e}class Zs{constructor(e,t,i,l){this.server=e,this.local=t||e,this.writable=!!i,this.xform=l||mD}}let hh=null;function pD(s){return!i0(s)||s.length<2?s:fE(s)}function mE(){if(hh)return hh;const s=[];s.push(new Zs("bucket")),s.push(new Zs("generation")),s.push(new Zs("metageneration")),s.push(new Zs("name","fullPath",!0));function e(u,d){return pD(d)}const t=new Zs("name");t.xform=e,s.push(t);function i(u,d){return d!==void 0?Number(d):d}const l=new Zs("size");return l.xform=i,s.push(l),s.push(new Zs("timeCreated")),s.push(new Zs("updated")),s.push(new Zs("md5Hash",null,!0)),s.push(new Zs("cacheControl",null,!0)),s.push(new Zs("contentDisposition",null,!0)),s.push(new Zs("contentEncoding",null,!0)),s.push(new Zs("contentLanguage",null,!0)),s.push(new Zs("contentType",null,!0)),s.push(new Zs("metadata","customMetadata",!0)),hh=s,hh}function gD(s,e){function t(){const i=s.bucket,l=s.fullPath,u=new er(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function yD(s,e,t){const i={};i.type="file";const l=t.length;for(let u=0;u<l;u++){const d=t[u];i[d.local]=d.xform(i,e[d.server])}return gD(i,s),i}function pE(s,e,t){const i=o0(e);return i===null?null:yD(s,i,t)}function vD(s,e,t,i){const l=o0(e);if(l===null||!i0(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const b=s.bucket,E=s.fullPath,T="/b/"+d(b)+"/o/"+d(E),P=Cf(T,t,i),G=cE({alt:"media",token:y});return P+G})[0]}function bD(s,e){const t={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}const Pw="prefixes",Vw="items";function wD(s,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Pw])for(const l of t[Pw]){const u=l.replace(/\/$/,""),d=s._makeStorageReference(new er(e,u));i.prefixes.push(d)}if(t[Vw])for(const l of t[Vw]){const u=s._makeStorageReference(new er(e,l.name));i.items.push(u)}return i}function xD(s,e,t){const i=o0(t);return i===null?null:wD(s,e,i)}class l0{constructor(e,t,i,l){this.url=e,this.method=t,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function c0(s){if(!s)throw r0()}function _D(s,e){function t(i,l){const u=pE(s,l,e);return c0(u!==null),u}return t}function kD(s,e){function t(i,l){const u=xD(s,e,l);return c0(u!==null),u}return t}function ED(s,e){function t(i,l){const u=pE(s,l,e);return c0(u!==null),vD(u,l,s.host,s._protocol)}return t}function u0(s){function e(t,i){let l;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?l=DM():l=MM():t.getStatus()===402?l=IM(s.bucket):t.getStatus()===403?l=LM(s.path):l=i,l.status=t.getStatus(),l.serverResponse=i.serverResponse,l}return e}function TD(s){const e=u0(s);function t(i,l){let u=e(i,l);return i.getStatus()===404&&(u=RM(s.path)),u.serverResponse=l.serverResponse,u}return t}function jD(s,e,t,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",t.length>0&&(u.delimiter=t),i&&(u.pageToken=i),l&&(u.maxResults=l);const d=e.bucketOnlyServerUrl(),p=Cf(d,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,b=new l0(p,g,kD(s,e.bucket),y);return b.urlParams=u,b.errorHandler=u0(e),b}function SD(s,e,t){const i=e.fullServerUrl(),l=Cf(i,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new l0(l,u,ED(s,t),d);return p.errorHandler=TD(e),p}function CD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function ND(s,e,t){const i=Object.assign({},t);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=CD(null,e)),i}function AD(s,e,t,i,l){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let Q="";for(let oe=0;oe<2;oe++)Q=Q+Math.random().toString().slice(2);return Q}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=ND(e,i,l),b=bD(y,t),E="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",P=Ha.getBlob(E,i,T);if(P===null)throw zM();const G={name:y.fullPath},q=Cf(u,s.host,s._protocol),z="POST",K=s.maxUploadRetryTime,W=new l0(q,z,_D(s,t),K);return W.urlParams=G,W.headers=d,W.body=P.uploadData(),W.errorHandler=u0(e),W}class RD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Do.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Do.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Do.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,l,u){if(this.sent_)throw Kc("cannot .send() more than once");if(so(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Kc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Kc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Kc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Kc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ID extends RD{initXhr(){this.xhr_.responseType="text"}}function d0(){return new ID}class zo{constructor(e,t){this._service=e,t instanceof er?this._location=t:this._location=er.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new zo(e,t)}get root(){const e=new er(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fE(this._location.path)}get storage(){return this._service}get parent(){const e=hD(this._location.path);if(e===null)return null;const t=new er(this._location.bucket,e);return new zo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw HM(e)}}function MD(s,e,t){s._throwIfRoot("uploadBytes");const i=AD(s.storage,s._location,mE(),new Ha(e,!0),t);return s.storage.makeRequestWithTokens(i,d0).then(l=>({metadata:l,ref:s}))}function DD(s){const e={prefixes:[],items:[]};return gE(s,e).then(()=>e)}async function gE(s,e,t){const l=await LD(s,{pageToken:t});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await gE(s,e,l.nextPageToken)}function LD(s,e){e!=null&&typeof e.maxResults=="number"&&qg("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=jD(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(i,d0)}function OD(s){s._throwIfRoot("getDownloadURL");const e=SD(s.storage,s._location,mE());return s.storage.makeRequestWithTokens(e,d0).then(t=>{if(t===null)throw FM();return t})}function PD(s,e){const t=fD(s._location.path,e),i=new er(s._location.bucket,t);return new zo(s.storage,i)}function VD(s){return/^[A-Za-z]+:\/\//.test(s)}function UD(s,e){return new zo(s,e)}function yE(s,e){if(s instanceof h0){const t=s;if(t._bucket==null)throw BM();const i=new zo(t,t._bucket);return e!=null?yE(i,e):i}else return e!==void 0?PD(s,e):s}function BD(s,e){if(e&&VD(e)){if(s instanceof h0)return UD(s,e);throw Fg("To use ref(service, url), the first argument must be a Storage instance.")}else return yE(s,e)}function Uw(s,e){const t=e?.[oE];return t==null?null:er.makeFromBucketSpec(t,s)}function zD(s,e,t,i={}){s.host=`${e}:${t}`;const l=so(e);l&&(sy(`https://${s.host}/b`),ry("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:Vx(u,s.app.options.projectId))}class h0{constructor(e,t,i,l,u,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=aE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NM,this._maxUploadRetryTime=AM,this._requests=new Set,l!=null?this._bucket=er.makeFromBucketSpec(l,this._host):this._bucket=Uw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=er.makeFromBucketSpec(this._url,e):this._bucket=Uw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zo(this,e)}_makeRequest(e,t,i,l,u=!0){if(this._deleted)return new $M(lE());{const d=nD(e,this._appId,i,l,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,l).getPromise()}}const Bw="@firebase/storage",zw="0.14.0";const vE="storage";function Rh(s,e,t){return s=un(s),MD(s,e,t)}function Fw(s){return s=un(s),DD(s)}function Lo(s){return s=un(s),OD(s)}function Wa(s,e){return s=un(s),BD(s,e)}function FD(s=Au(),e){s=un(s);const i=$o(s,vE).getImmediate({identifier:e}),l=Lx("storage");return l&&qD(i,...l),i}function qD(s,e,t,i={}){zD(s,e,t,i)}function HD(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new h0(t,i,l,e,Wo)}function $D(){ai(new Wr(vE,HD,"PUBLIC").setMultipleInstances(!0)),hr(Bw,zw,""),hr(Bw,zw,"esm2020")}$D();const bE={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},f0=oy(bE),jo=T_(f0),ve=mM(f0),Ga=FD(f0),WD=oy(bE,"secondary"),DO=T_(WD),GD="EYdciKDOi3UYBLk1u8hHams5tmO2",wE=x.createContext();function Cr(){return x.useContext(wE)}function KD({children:s}){const[e,t]=x.useState(null),[i,l]=x.useState(!1),[u,d]=x.useState(!1),[p,g]=x.useState(null),[y,b]=x.useState(!0);x.useEffect(()=>{let W=null;const Q=XA(jo,oe=>{if(t(oe),W&&(W(),W=null),oe)if(oe.uid===GD)l(!0),d(!1),g(null),b(!1);else{l(!1);const Te=Qt(dt(ve,"clients"),wt("uid","==",oe.uid)),be=async()=>{const C=localStorage.getItem("mcf_clientId");if(C)try{const j=await qs(We(ve,"clients",C));j.exists()&&(d(!0),g({id:j.id,...j.data()}))}catch(j){console.error("Direct client read failed:",j)}};W=rE(Te,async C=>{if(C.empty)await be();else{const j=C.docs[0];d(!0),g({id:j.id,...j.data()});try{localStorage.setItem("mcf_clientId",j.id)}catch{}}b(!1)},async C=>{console.error("Error listening to client data:",C),await be(),b(!1)})}else l(!1),d(!1),g(null),b(!1)});return()=>{Q(),W&&W()}},[]);const K={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:W=>{g(Q=>Q?{...Q,...W}:W)},resolveClient:async()=>{if(p)return p;const W=localStorage.getItem("mcf_clientId");if(W)try{const Q=await qs(We(ve,"clients",W));if(Q.exists()){const oe={id:Q.id,...Q.data()};return d(!0),g(oe),oe}}catch(Q){console.error("resolveClient direct read failed:",Q)}if(e){const Q=Qt(dt(ve,"clients"),wt("uid","==",e.uid)),oe=await $t(Q);if(!oe.empty){const Te={id:oe.docs[0].id,...oe.docs[0].data()};return d(!0),g(Te),Te}}return null},login:async(W,Q,oe=!0)=>(await T2(jo,oe?Eg:my),await KA(jo,W,Q)),signup:async(W,Q,oe)=>{await T2(jo,Eg);const Te=await GA(jo,Q.trim().toLowerCase(),oe),be=Te.user,C=We(dt(ve,"clients")),j={uid:be.uid,name:W.trim(),email:Q.trim().toLowerCase(),clientType:"core_buddy",coreBuddyAccess:!0,status:"active",tier:"free",subscriptionStatus:null,signupSource:"self_signup",createdAt:Rt.now()};await Ts(C,j),d(!0),g({id:C.id,...j});try{localStorage.setItem("mcf_clientId",C.id)}catch{}return Te},logout:()=>{try{localStorage.removeItem("mcf_clientId")}catch{}return JA(jo)},resetPassword:W=>WA(jo,W),loading:y};return a.jsx(wE.Provider,{value:K,children:s})}const xE=x.createContext();function Mi(){return x.useContext(xE)}function YD({children:s}){const[e,t]=x.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=x.useState(()=>localStorage.getItem("accent")||"red");x.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),x.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),t(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(xE.Provider,{value:p,children:s})}const _E=x.createContext();function ic(){return x.useContext(_E)}const QD=["nutrition","buddies"],XD=[5,10],JD=2,ZD=1;function e3({children:s}){const{clientData:e,loading:t}=Cr(),i=x.useMemo(()=>{const l=e?.tier||"free",u=e?.subscriptionStatus||null,d=e&&e.signupSource!=="self_signup",p=l==="premium"||!!d;function g(y){return p?!0:!QD.includes(y)}return{tier:l,subscriptionStatus:u,isPremium:p,canAccess:g,loading:t,FREE_RANDOMISER_DURATIONS:XD,FREE_RANDOMISER_WEEKLY_LIMIT:JD,FREE_HABIT_LIMIT:ZD}},[e?.tier,e?.subscriptionStatus,e?.signupSource,t]);return a.jsx(_E.Provider,{value:i,children:s})}function t3(s){if(s?.signupSource==="self_signup"&&!s?.onboardingComplete)return"/onboarding";const e=s?.clientType;return e==="core_buddy"?"/client/core-buddy":e==="circuit_vip"||e==="circuit_dropin"?"/client/circuit":"/client"}function n3({className:s=""}){const{isDark:e,toggleTheme:t}=Mi();return a.jsx("button",{className:s||"theme-toggle",onClick:t,"aria-label":e?"Switch to light mode":"Switch to dark mode",children:e?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})})}function s3(){const[s,e]=x.useState(""),[t,i]=x.useState(""),[l,u]=x.useState(!0),[d,p]=x.useState(""),[g,y]=x.useState(!1),[b,E]=x.useState(!1),[T,P]=x.useState(!1),{login:G,resetPassword:q,currentUser:z,isAdmin:K,isClient:W,clientData:Q,loading:oe}=Cr(),Te=Ws();if(x.useEffect(()=>{if(!oe&&z){if(!z.emailVerified&&Q?.signupSource==="self_signup"){Te("/signup");return}K?Te("/dashboard"):W?Te(t3(Q)):(y(!1),p("No account found. Please sign up or contact your trainer."))}},[oe,z,K,W,Q,Te]),oe||z)return a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"var(--bg-body)"},children:a.jsx("div",{style:{width:36,height:36,border:"3px solid var(--color-primary-light)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"app-spin .7s linear infinite"}})});const be=async j=>{j.preventDefault(),p(""),y(!0);try{await G(s,t,l)}catch(I){p(I.message||"Failed to log in"),y(!1)}},C=async j=>{if(j.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await q(s.trim()),P(!0)}catch(I){I.code==="auth/user-not-found"?p("No account found with this email"):p(I.message||"Failed to send reset email")}y(!1)};return a.jsxs("div",{className:"login-container",children:[a.jsx(n3,{className:"login-theme-toggle"}),a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:a.jsx("strong",{children:b?"Reset Password":"Sign in as 1-2-1 or a Core Buddy"})})]}),d&&a.jsx("div",{className:"error-message",children:d}),T?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{E(!1),P(!1),p("")},children:"Back to Log In"})]}):b?a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:j=>e(j.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:be,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:j=>e(j.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:t,onChange:j=>i(j.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:j=>u(j.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!0),p("")},children:"Forgot password?"}),a.jsx("button",{type:"button",className:"login-btn login-btn-outline",onClick:()=>Te("/signup"),children:"Don't have an account? Create one free"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})]})}function fh({feature:s,children:e}){const{canAccess:t,loading:i}=ic();return i||t(s)?e:a.jsx(Tx,{to:"/upgrade",replace:!0})}function Gr({active:s}){const e=Ws(),{clientData:t}=Cr(),{isPremium:i}=ic(),l=t?.clientType==="block"&&t?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{children:"Profile"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:a.jsx("path",{d:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"})}),a.jsx("span",{children:"Workout"})]}),i&&a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),i&&a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),a.jsxs("button",{className:`block-nav-tab${s==="badges"?" active":""}`,onClick:()=>e("/client/core-buddy/badges"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M9 14l-4 8h14l-4-8"})]}),a.jsx("span",{children:"Badges"})]}),l&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Xo({children:s,onRefresh:e}){const[t,i]=x.useState(0),[l,u]=x.useState(!1),d=x.useRef(null),p=x.useRef(0),g=x.useRef(!1),y=x.useCallback(T=>{window.scrollY<=0&&(p.current=T.touches[0].clientY,g.current=!0)},[]),b=x.useCallback(T=>{if(!g.current||l)return;const P=T.touches[0].clientY-p.current;P>20&&window.scrollY<=0&&(T.preventDefault(),i(Math.min((P-20)*.35,80)))},[l]),E=x.useCallback(async()=>{t>55&&!l&&(u(!0),e?await e():window.location.reload(),u(!1)),i(0),g.current=!1},[t,l,e]);return a.jsxs("div",{ref:d,onTouchStart:y,onTouchMove:b,onTouchEnd:E,children:[a.jsxs("div",{className:`pull-refresh-indicator ${t>0?"visible":""} ${l?"refreshing":""}`,style:{height:t},children:[a.jsx("div",{className:`refresh-spinner ${l?"spinning":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),a.jsx("span",{className:"refresh-text",children:l?"Refreshing...":"Pull to refresh"})]}),s]})}function qu(s,e,t,i,l){const u=[];for(let d=0;d<s;d++){const p=(d*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:t+i*Math.sin(p),x2:e+l*Math.cos(p),y2:t+l*Math.sin(p),thick:d%5===0})}return u}const kE=qu(60,100,100,85,96),r3=qu(60,100,100,78,94),i3=qu(60,100,100,82,94);qu(60,50,50,38,46);const LO=qu(60,40,40,30,37);function a3({steps:s,onFinish:e,active:t}){const[i,l]=x.useState(0),[u,d]=x.useState(null),[p,g]=x.useState("below"),[y,b]=x.useState(!1),E=x.useRef(null),T=x.useRef(t);T.current=t,x.useEffect(()=>{t||l(0)},[t]),x.useEffect(()=>{if(!t)return;const Te=be=>be.preventDefault();return document.addEventListener("touchmove",Te,{passive:!1}),document.addEventListener("wheel",Te,{passive:!1}),document.body.style.overflow="hidden",()=>{document.removeEventListener("touchmove",Te),document.removeEventListener("wheel",Te),document.body.style.overflow=""}},[t]);const P=x.useMemo(()=>t?s.filter(Te=>document.querySelector(Te.selector)):[],[t]),G=P[i],q=i===P.length-1,z=G?.selector,K=x.useCallback(()=>{if(!z)return;const Te=document.querySelector(z);if(!Te){d(null);return}const be=Te.getBoundingClientRect(),C=8;d({top:be.top-C,left:be.left-C,width:be.width+C*2,height:be.height+C*2});const j=window.innerHeight-be.bottom;g(j<260?"above":"below")},[z]);if(x.useEffect(()=>{if(!t||!z)return;b(!0);const Te=document.querySelector(z);if(Te){document.body.style.overflow="",Te.scrollIntoView({behavior:"smooth",block:"center"});let be=null,C=0,j=0;const I=60,V=()=>{j++;const R=Te.getBoundingClientRect(),Me=Math.round(R.top);if(be!==null&&Me===be?C++:C=0,be=Me,C>=3||j>=I){T.current&&(document.body.style.overflow="hidden"),K(),b(!1);return}L=requestAnimationFrame(V)};let L;const D=setTimeout(()=>{L=requestAnimationFrame(V)},120);return()=>{clearTimeout(D),L&&cancelAnimationFrame(L),T.current&&(document.body.style.overflow="hidden")}}},[t,i,z,K]),x.useEffect(()=>{if(!t)return;const Te=()=>{E.current&&cancelAnimationFrame(E.current),E.current=requestAnimationFrame(K)};return window.addEventListener("scroll",Te,!0),window.addEventListener("resize",Te),()=>{window.removeEventListener("scroll",Te,!0),window.removeEventListener("resize",Te),E.current&&cancelAnimationFrame(E.current)}},[t,K]),!t||!G||P.length===0)return null;const W=()=>{q?e():l(i+1)},Q=()=>{i>0&&l(i-1)},oe=()=>e();return a.jsxs("div",{className:"st-overlay",onClick:Te=>{Te.stopPropagation()},children:[a.jsx("div",{className:"st-backdrop",onClick:W}),u&&a.jsx("div",{className:`st-spotlight${y?" st-transitioning":""}`,style:{top:u.top,left:u.left,width:u.width,height:u.height}}),u&&a.jsxs("div",{className:`st-tooltip st-tooltip-${p}${y?" st-transitioning":""}`,style:{top:p==="below"?Math.min(Math.max(u.top+u.height+16,16),window.innerHeight-200):void 0,bottom:p==="above"?Math.min(Math.max(window.innerHeight-u.top+16,16),window.innerHeight-60):void 0,left:Math.max(16,Math.min(u.left,window.innerWidth-320))},children:[a.jsx("div",{className:"st-dots",children:P.map((Te,be)=>a.jsx("span",{className:`st-dot${be===i?" active":""}${be<i?" done":""}`},be))}),a.jsx("h3",{className:"st-title",children:G.title}),a.jsx("p",{className:"st-body",children:G.body}),a.jsxs("div",{className:"st-actions",children:[i>0&&a.jsx("button",{className:"st-btn st-btn-back",onClick:Q,children:"Back"}),a.jsx("button",{className:"st-btn st-btn-next",onClick:W,children:G.cta||(q?"Let's Go!":"Next")})]}),a.jsx("button",{className:"st-skip",onClick:oe,children:"Skip tour"})]})]})}const o3="/login/assets/first_workout-B8SFkzJX.PNG",l3="/login/assets/workouts_10-Z5R3u0xH.PNG",c3="/login/assets/workouts_25-CzxSlcAj.PNG",u3="/login/assets/workouts_50-BpzWup3V.PNG",d3="/login/assets/workouts_100-D7_r6tn1.PNG",h3="/login/assets/streak_2-CsRr-XA9.PNG",f3="/login/assets/streak_4-BHO09tbw.PNG",m3="/login/assets/streak_8-DX2UWMko.PNG",p3="/login/assets/first_pb-aVf_CNWy.PNG",g3="/login/assets/pbs_5-Cippawgg.PNG",y3="/login/assets/pbs_10-CZgGh9Kv.PNG",v3="/login/assets/pbs_100-C67b1wfS.PNG",b3="/login/assets/nutrition_7-CHVV11fj.PNG",w3="/login/assets/leaderboard_join-BLoId4Hz.PNG",x3="/login/assets/habits_7-Dvki70KO.PNG",_3="/login/assets/starter_streak-CCltAfrC.PNG",k3="/login/assets/consistency_king-Cho2jxBt.PNG",E3="/login/assets/thirty_in_thirty-B0BVHafW.PNG",T3="/login/assets/minute_master-hA2RLkIL.PNG",j3="/login/assets/habit_machine--nFXaIUW.PNG",S3="/login/assets/iron_will-Dh2dTaie.PNG",zl=[{id:"first_workout",img:o3,name:"First Rep",desc:"Complete your first workout",category:"workouts",threshold:1},{id:"workouts_10",img:l3,name:"On Fire",desc:"Complete 10 workouts",category:"workouts",threshold:10},{id:"workouts_25",img:c3,name:"Dedicated",desc:"Complete 25 workouts",category:"workouts",threshold:25},{id:"workouts_50",img:u3,name:"Unstoppable",desc:"Complete 50 workouts",category:"workouts",threshold:50},{id:"workouts_100",img:d3,name:"Century",desc:"Complete 100 workouts",category:"workouts",threshold:100},{id:"streak_2",img:h3,name:"2 Week Streak",desc:"Work out for 2 weeks in a row",category:"streaks",threshold:2},{id:"streak_4",img:f3,name:"Month Strong",desc:"Work out for 4 weeks in a row",category:"streaks",threshold:4},{id:"streak_8",img:m3,name:"Iron Will",desc:"Work out for 8 weeks in a row",category:"streaks",threshold:8},{id:"first_pb",img:p3,name:"First PB",desc:"Set your first personal best",category:"pbs",threshold:1},{id:"pbs_5",img:g3,name:"PB Hunter",desc:"Set 5 personal bests",category:"pbs",threshold:5},{id:"pbs_10",img:y3,name:"PB Machine",desc:"Set 10 personal bests",category:"pbs",threshold:10},{id:"pbs_100",img:v3,name:"PB Legend",desc:"Set 100 personal bests",category:"pbs",threshold:100},{id:"nutrition_7",img:b3,name:"Macro Master",desc:"Hit your macro targets 7 days in a row",category:"nutrition",threshold:7},{id:"leaderboard_join",img:w3,name:"Competitor",desc:"Join the leaderboard",category:"leaderboard",threshold:1},{id:"habits_7",img:x3,name:"Habit Streak",desc:"Complete your daily habits 7 days in a row",category:"habits",threshold:7},{id:"starter_streak",img:_3,name:"Starter Streak",desc:"Complete 5 workouts in 7 days",category:"challenges",threshold:1},{id:"consistency_king",img:k3,name:"Consistency King",desc:"Complete 12 workouts in 30 days",category:"challenges",threshold:1},{id:"thirty_in_thirty",img:E3,name:"30 in 30",desc:"Complete 30 workouts in 30 days",category:"challenges",threshold:1},{id:"minute_master",img:T3,name:"Minute Master",desc:"Train for 300 total minutes in 30 days",category:"challenges",threshold:1},{id:"habit_machine",img:j3,name:"Habit Machine",desc:"Hit all daily habits for 7 days straight",category:"challenges",threshold:1},{id:"iron_will",img:S3,name:"Iron Will",desc:"Work out every day for 14 days straight",category:"challenges",threshold:1}],qw=3,C3=5;function Yp(s){return s.toISOString().split("T")[0]}const Qp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}],Yc={morning:[{main:"Rise and grind,",sub:"let's get after it!"},{main:"New day, new gains,",sub:"let's build something!"},{main:"The early bird gets the gains,",sub:"let's go!"},{main:"Winners wake up ready,",sub:"you showed up!"}],afternoon:[{main:"Oye",sub:"crack on and make it count!"},{main:"Halfway through the day,",sub:"don't ease off now!"},{main:"Afternoon push,",sub:"this is where champions are made!"},{main:"Still time to make today count,",sub:"let's go!"}],evening:[{main:"Evening session?",sub:"Let's finish strong!"},{main:"End the day on a high,",sub:"you earned it!"},{main:"Night owls lift heavier,",sub:"prove it!"},{main:"One more session today?",sub:"Close it out!"}],night:[{main:"Burning the midnight oil,",sub:"Respect the hustle!"},{main:"Late night dedication,",sub:"that's what sets you apart!"},{main:"While they sleep,",sub:"you grind!"}],allDone:[{main:"Smashed it today,",sub:"Rest up and go again tomorrow."},{main:"All tasks crushed,",sub:"Absolute machine!"},{main:"Nothing left undone,",sub:"That's elite-level discipline."}]};function Xp(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Qc(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function N3(s,e=800){return new Promise(t=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,d=i.height;u>d?u>e&&(d=Math.round(d*e/u),u=e):d>e&&(u=Math.round(u*e/d),d=e),l.width=u,l.height=d,l.getContext("2d").drawImage(i,0,0,u,d),l.toBlob(p=>t(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}function A3(){const{currentUser:s,isClient:e,clientData:t,logout:i,updateClientData:l,loading:u}=Cr(),{isDark:d,toggleTheme:p}=Mi(),{isPremium:g,FREE_HABIT_LIMIT:y}=ic(),b=Ws(),E=g?C3:y,[T,P]=x.useState({hours:0,minutes:0,seconds:0}),[G,q]=x.useState(0),[z,K]=x.useState(0),[W,Q]=x.useState(0),[oe,Te]=x.useState(!1),[be,C]=x.useState({protein:0,carbs:0,fats:0,calories:0}),[j,I]=x.useState(null),[V,L]=x.useState(0),[D,R]=x.useState(0),[Me,Ye]=x.useState(qw),[ee,Se]=x.useState(!1),[Ie,Ce]=x.useState(!1),[X,O]=x.useState([]),[re,we]=x.useState(null),[ke,xe]=x.useState(!1),Ee=x.useRef(null),[Pe,et]=x.useState(0),[Oe,Lt]=x.useState(0),[Xt,In]=x.useState(null),Ct=x.useCallback((w,N="info")=>{In({message:w,type:N}),setTimeout(()=>In(null),4e3)},[]),[nt,ft]=x.useState([]),[lt,Mn]=x.useState(!1),[de,Tt]=x.useState(""),[mt,It]=x.useState(null),[Xe,Et]=x.useState(null),[pt,Jt]=x.useState(!1),[js,es]=x.useState(new Set),[Wt,se]=x.useState(new Set),[Ne,ht]=x.useState({}),[gt,st]=x.useState({}),[He,tt]=x.useState({}),[Fe,Zt]=x.useState({}),[nn,jn]=x.useState({}),[Dn,Hn]=x.useState({}),zt=x.useRef(null),Ln=x.useRef(null),_n=x.useRef({}),[sn,fr]=x.useState([]),[le,Re]=x.useState(!1),Ge=x.useRef(null),[ct,at]=x.useState([]),[mn,kn]=x.useState(""),[ln,pn]=x.useState(!1),[Ss,ts]=x.useState(null),[os,Gt]=x.useState([]),[En,Cs]=x.useState(null),[Nr,di]=x.useState(!1),Ar=x.useRef(!1),[mr,$n]=x.useState(null),[Gs,ls]=x.useState(!1),Sn=x.useRef(!1),On=(()=>{const w=[{selector:".cb-ring-container",title:"Your 24-Hour Countdown",body:"Every day resets. This ring tracks the time you have left  tap your photo to personalise your profile.",cta:"Next"},{selector:".cb-stats-row",title:"Progress at a Glance",body:"Your workout streak, sessions this week, and daily habits  all in one row. These fill up as you go."},{selector:".cb-nudge-card",title:"Smart Suggestions",body:"We'll highlight what needs your attention  your next session, unfinished habits, or a meal to log."},{selector:".cb-card-workouts-hero",title:"Workout",body:"Randomiser workouts  pick your focus, level and time. Save and replay your favourites.",cta:"Next"}];return g&&w.push({selector:".cb-card-nutrition",title:"Nutrition Tracking",body:"Set your macro targets, scan barcodes, and log meals to hit your daily goals."},{selector:".cb-card-consistency",title:"Daily Habits",body:"5 simple habits each day  train, hit protein, 10k steps, sleep, and hydrate. Build your streak."},{selector:".cb-card-buddies",title:"Buddies & Social",body:"Connect with other members, share your journey, and keep each other accountable."},{selector:".cb-journey-section",title:"Share Your Journey",body:"Post photos, updates, and milestones  your fitness journey in one place. Like and comment on each other's posts."}),w.push({selector:".block-bottom-nav",title:"You're All Set!",body:"Use the nav bar to jump between your profile, workouts, nutrition, and buddies. Time to get after it.",cta:"Let's Go!"}),w})();x.useEffect(()=>{!u&&!s&&b("/")},[u,s,b]),x.useEffect(()=>{!u&&t&&t.signupSource==="self_signup"&&!t.onboardingComplete&&b("/onboarding")},[u,t,b]),x.useEffect(()=>{let w=t?.tourComplete||Sn.current;if(!w&&t?.id)try{w=!!localStorage.getItem(`tourDone_${t.id}`)}catch{}if(oe&&t&&!w){const N=setTimeout(()=>ls(!0),600);return()=>clearTimeout(N)}},[oe,t]),x.useEffect(()=>{if(!(!oe||!t?.id)){try{if(localStorage.getItem(`targetHint_${t.id}`))return}catch{}if(!t?.weeklyWorkoutTarget){const w=setTimeout(()=>Ce(!0),1500);return()=>clearTimeout(w)}}},[oe,t]),x.useEffect(()=>{if(t)try{const w=sessionStorage.getItem(`cbDash_${t.id}`);if(w){const N=JSON.parse(w);K(N.totalWorkouts??0),Q(N.habitWeekPct??0),C(N.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),I(N.nutritionTargetData??null),L(N.todayHabitsCount??0),R(N.weeklyWorkouts??0),Ye(N.weeklyWorkoutTarget??qw),O(N.leaderboardTop3??[]),et(N.streakWeeks??0),Te(!0)}}catch{}},[t]),x.useEffect(()=>{t?.photoURL&&we(t.photoURL),t?.weeklyWorkoutTarget&&Ye(t.weeklyWorkoutTarget)},[t]),x.useEffect(()=>{if(!t)return;const w=Qt(dt(ve,"notifications"),wt("toId","==",t.id)),N=rE(w,U=>{const $=U.docs.map(Z=>({id:Z.id,...Z.data()}));$.sort((Z,pe)=>{const fe=Z.createdAt?.toMillis?.()||0;return(pe.createdAt?.toMillis?.()||0)-fe}),fr($.slice(0,50))},U=>{console.error("Notification listener error:",U),U.code==="permission-denied"&&console.warn("Firestore rules may be missing for the notifications collection. Please update your Firestore rules in the Firebase Console.")});return()=>N()},[t]),x.useEffect(()=>{const w=N=>{Ge.current&&!Ge.current.contains(N.target)&&Re(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),x.useEffect(()=>{if(!t)return;const w=t.id;(async()=>{try{const[N,U,$]=await Promise.all([$t(Qt(dt(ve,"buddies"),wt("user1","==",w))),$t(Qt(dt(ve,"buddies"),wt("user2","==",w))),$t(dt(ve,"clients"))]),Z=new Set;[...N.docs,...U.docs].forEach(fe=>{const Ae=fe.data();Z.add(Ae.user1===w?Ae.user2:Ae.user1)});const pe={};$.docs.forEach(fe=>{pe[fe.id]=fe.data()}),at(Array.from(Z).filter(fe=>pe[fe]).map(fe=>({id:fe,name:pe[fe].name,photoURL:pe[fe].photoURL||null})))}catch(N){console.error("Error loading buddies for mentions:",N)}})()},[t]);const Wn=sn.filter(w=>!w.read).length,Ft=async()=>{const w=sn.filter(U=>!U.read);if(!w.length)return;const N=Lw(ve);w.forEach(U=>N.update(We(ve,"notifications",U.id),{read:!0})),await N.commit()},Kr=async()=>{if(!sn.length)return;const w=Lw(ve);sn.forEach(N=>w.delete(We(ve,"notifications",N.id))),await w.commit()},Ks=async(w,N,U={})=>{if(!(!t||w===t.id))try{await jr(dt(ve,"notifications"),{toId:w,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:N,read:!1,createdAt:Ps(),...U})}catch($){console.error("Notification create error:",$),$.code==="permission-denied"&&Ct("Notifications blocked  check Firestore rules","error")}},cs=(w,N)=>{const U=N==="compose"?zt.current?.selectionStart:null,Z=(U!=null?w.slice(0,U):w).match(/@(\w*)$/);if(Z){pn(!0),ts(N),kn(Z[1].toLowerCase());const pe=ct.filter(fe=>fe.name&&fe.name.toLowerCase().includes(Z[1].toLowerCase())).slice(0,5);Gt(pe)}else pn(!1),Gt([])},Cn=(w,N)=>{if(N==="compose"){const U=zt.current,$=de,Z=U?.selectionStart??$.length,pe=$.slice(0,Z),fe=$.slice(Z),Ae=pe.replace(/@\w*$/,`@${w.name} `);Tt(Ae+fe),setTimeout(()=>{U?.focus(),U.selectionStart=U.selectionEnd=Ae.length},0)}else{const $=(gt[N]||"").replace(/@\w*$/,`@${w.name} `);st(Z=>({...Z,[N]:$}))}pn(!1),Gt([])},Ys=w=>w&&w.split(/(@\w[\w\s]*?\s)/g).map((U,$)=>U.startsWith("@")&&ct.some(Z=>U.trim()===`@${Z.name}`)?a.jsx("span",{className:"mention-highlight",children:U.trim()},$):U),hi=async w=>{const N=w.target.files?.[0];if(!(!N||!t)){if(!N.type.startsWith("image/")){Ct("Please select an image file","error");return}if(N.size>5*1024*1024){Ct("Image must be under 5MB","error");return}xe(!0);try{const U=await new Promise(pe=>{const fe=new Image;fe.onload=()=>{const Ae=document.createElement("canvas"),De=400;let Je=fe.width,Be=fe.height;Je>Be?(Be=Be/Je*De,Je=De):(Je=Je/Be*De,Be=De),Ae.width=Je,Ae.height=Be,Ae.getContext("2d").drawImage(fe,0,0,Je,Be),Ae.toBlob(Nt=>pe(Nt),"image/jpeg",.75)},fe.src=URL.createObjectURL(N)}),$=Wa(Ga,`profilePhotos/${t.id}`);await Rh($,U);const Z=await Lo($);await gs(We(ve,"clients",t.id),{photoURL:Z}),we(Z),l({photoURL:Z}),Ct("Profile photo updated!","success")}catch(U){console.error("Photo upload error:",U),Ct("Failed to upload photo","error")}xe(!1),Ee.current&&(Ee.current.value="")}};x.useEffect(()=>{const w=()=>{const U=new Date,$=new Date(U);$.setHours(23,59,59,999);const Z=$-U,pe=Math.floor(Z/(1e3*60*60)),fe=Math.floor(Z%(1e3*60*60)/(1e3*60)),Ae=Math.floor(Z%(1e3*60)/1e3);P({hours:pe,minutes:fe,seconds:Ae}),q(60-Ae)};w();const N=setInterval(w,1e3);return()=>clearInterval(N)},[]),x.useEffect(()=>{const w=setInterval(()=>{Lt(N=>(N+1)%Qp.length)},8e3);return()=>clearInterval(w)},[]),x.useEffect(()=>{if(!s||!t)return;(async()=>{let N=null,U=null;try{const $=Yp(new Date),Z=dt(ve,"workoutLogs"),pe=Qt(Z,wt("clientId","==",t.id));N=await $t(pe),K(N.docs.length);const fe=new Date,Ae=fe.getDay(),De=Ae===0?6:Ae-1,Je=new Date(fe);Je.setDate(fe.getDate()-De),Je.setHours(0,0,0,0);const Be=Je.getTime(),Nt=N.docs.filter(rn=>{const Fn=rn.data().completedAt;return Fn?(Fn.toDate?Fn.toDate().getTime():new Date(Fn).getTime())>=Be:!1}).length;R(Nt);const _s=dt(ve,"habitLogs"),ot=Qt(_s,wt("clientId","==",t.id),wt("date","==",$)),gn=await $t(ot);let dn=0;if(!gn.empty){const rn=gn.docs[0].data().habits||{};dn=Math.min(Object.values(rn).filter(Boolean).length,E)}Q(Math.round(dn/E*100)),L(dn);const yt=await qs(We(ve,"nutritionTargets",t.id));yt.exists()&&(I(yt.data()),U=yt.data());const Kt=await qs(We(ve,"nutritionLogs",`${t.id}_${$}`));if(Kt.exists()){const Fn=(Kt.data().entries||[]).reduce((Kn,Nn)=>({protein:Kn.protein+(Nn.protein||0),carbs:Kn.carbs+(Nn.carbs||0),fats:Kn.fats+(Nn.fats||0),calories:Kn.calories+(Nn.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});C(Fn)}}catch($){console.error("Error loading dashboard stats:",$)}try{const $=dt(ve,"clients"),Z=Qt($,wt("leaderboardOptIn","==",!0)),fe=(await $t(Z)).docs.map(Ae=>({id:Ae.id,name:Ae.data().name,photoURL:Ae.data().photoURL||null}));if(O(fe.slice(0,3)),t?.id){const Ae=fe.findIndex(Je=>Je.id===t.id),De=Ae>=0?Ae+1:null;try{const Je=`lbRank_${t.id}`,Be=sessionStorage.getItem(Je);Be&&$n(parseInt(Be,10)),De&&sessionStorage.setItem(Je,String(De))}catch{}}}catch($){console.error("Leaderboard preview error:",$)}try{let $=0;if(N){const Z=N.docs.map(pe=>pe.data().date).filter(Boolean).sort().reverse();if(Z.length>0){const pe=new Date;let fe=new Date(pe);e:for(let Ae=0;Ae<52;Ae++){const De=new Date(fe),Je=De.getDay(),Be=Je===0?6:Je-1;De.setDate(De.getDate()-Be),De.setHours(0,0,0,0);const Nt=new Date(De);Nt.setDate(Nt.getDate()+7);const _s=Yp(De),ot=Yp(Nt);if(Z.some(dn=>dn>=_s&&dn<ot))$++;else{if(Ae>0)break e;break}fe.setDate(fe.getDate()-7)}}}et($)}catch($){console.error("Streak computation error:",$)}Te(!0)})()},[s,t,E]),x.useEffect(()=>{if(!(!oe||!t))try{sessionStorage.setItem(`cbDash_${t.id}`,JSON.stringify({totalWorkouts:z,habitWeekPct:W,nutritionTotals:be,nutritionTargetData:j,todayHabitsCount:V,weeklyWorkouts:D,weeklyWorkoutTarget:Me,leaderboardTop3:X,streakWeeks:Pe}))}catch{}},[oe,z,W,be,j,V,D,Me,X,Pe,t]),x.useEffect(()=>{if(!(!oe||Ar.current)&&D>=Me&&Me>0){const w=`weekCeleb_${t?.id}_${new Date().toISOString().slice(0,10).replace(/-\d{2}$/,"")}`;try{if(sessionStorage.getItem(w))return;sessionStorage.setItem(w,"1")}catch{}Ar.current=!0,di(!0),setTimeout(()=>di(!1),3500)}},[oe,D,Me,t]);const M=x.useCallback(async()=>{if(Sn.current=!0,ls(!1),l({tourComplete:!0}),t?.id){try{localStorage.setItem(`tourDone_${t.id}`,"1")}catch{}try{await gs(We(ve,"clients",t.id),{tourComplete:!0})}catch(w){console.error("Failed to save tour completion:",w)}}},[t,l]),F=x.useCallback(async w=>{if(Ye(w),Se(!1),Ce(!1),t?.id){try{localStorage.setItem(`targetHint_${t.id}`,"1")}catch{}try{await gs(We(ve,"clients",t.id),{weeklyWorkoutTarget:w})}catch(N){console.error("Failed to save weekly target:",N)}}},[t]),ie=w=>{const N=w.currentTarget,U=N.querySelector(".ripple");U&&U.remove();const $=N.getBoundingClientRect(),Z=Math.max($.width,$.height),pe=w.clientX-$.left-Z/2,fe=w.clientY-$.top-Z/2,Ae=document.createElement("span");Ae.className="ripple",Ae.style.cssText=`width:${Z}px;height:${Z}px;left:${pe}px;top:${fe}px;`,N.appendChild(Ae),setTimeout(()=>Ae.remove(),600)},ue=t?.name?.split(" ")[0]||"there",ze=Math.min(Math.round(D/Me*100),100),Ve=Pe>0?Math.min(Math.round(Pe/12*100),100):0,qe=[{label:"Wk Streak",value:`${Pe}`,pct:Ve,color:"var(--color-primary)",size:"normal"},{label:"Workouts",value:`${D}/${Me}`,pct:ze,color:"var(--color-primary)",size:"large",editable:!0},{label:"Habits Today",value:`${W}%`,pct:W,color:"var(--color-primary)",size:"normal"}],qt=be.calories>0&&j?.calories&&be.calories>=j.calories*.8,Ke=D>=Me&&Me>0,zn=V>=E,Gn=(()=>{if(!oe)return null;const w=Me-D;return w===1?"1 more workout to hit your weekly goal":w===2?"2 more workouts to hit your weekly goal":E-V===1?"1 habit left to complete today":null})(),Ns=w=>!j||!j[w]?0:Math.min(Math.round(be[w]/j[w]*100),100),Pn=(()=>{const w=new Date().getHours(),N=oe&&V>=E&&be.calories>0,U=$=>$[Math.floor(Date.now()/6e4%$.length)];return N?U(Yc.allDone):w>=5&&w<12?U(Yc.morning):w>=12&&w<17?U(Yc.afternoon):w>=17&&w<21?U(Yc.evening):U(Yc.night)})(),us=oe?D===0?{label:"WORKOUT",message:"No workouts this week yet",cta:"Start One",action:()=>b("/client/core-buddy/workouts"),pct:0,ringLabel:"0"}:V<E?{label:"DAILY HABITS",message:`${V}/${E} completed`,cta:"Open Habits",action:()=>b("/client/core-buddy/consistency"),pct:W,ringLabel:`${V}/${E}`}:g&&be.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>b("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:null,Yr=x.useCallback(async()=>{if(t){Mn(!0);try{const w=await $t(Qt(dt(ve,"posts"),wt("authorId","==",t.id),ku("createdAt","desc"),Eu(30)));ft(w.docs.map(U=>({id:U.id,...U.data()})));const N=await $t(Qt(dt(ve,"postLikes"),wt("userId","==",t.id)));es(new Set(N.docs.map(U=>U.data().postId)))}catch(w){console.error("Error loading journey:",w)}finally{Mn(!1)}}},[t]);x.useEffect(()=>{oe&&t&&Yr()},[oe,t,Yr]);const Di=w=>{const N=w.target.files?.[0];if(N){if(!N.type.startsWith("image/")){Ct("Please select an image file","error");return}if(N.size>10*1024*1024){Ct("Image must be under 10MB","error");return}It(N),Et(URL.createObjectURL(N))}},pr=()=>{It(null),Xe&&URL.revokeObjectURL(Xe),Et(null),Ln.current&&(Ln.current.value="")},pa=async()=>{if(!(!de.trim()&&!mt||pt||!t)){Jt(!0);try{let w=null;if(mt){const Z=await N3(mt),pe=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,fe=Wa(Ga,`postImages/${t.id}/${pe}`);await Rh(fe,Z),w=await Lo(fe)}await jr(dt(ve,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:de.trim(),type:w?"image":"text",imageURL:w||null,createdAt:Ps(),likeCount:0,commentCount:0});const U=de.trim().match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(U){const Z=new Set;U.forEach(pe=>{const fe=pe.slice(1).trim(),Ae=ct.find(De=>De.name&&De.name.toLowerCase()===fe.toLowerCase());Ae&&!Z.has(Ae.id)&&(Z.add(Ae.id),Ks(Ae.id,"mention",{}))})}Tt(""),pr(),zt.current&&(zt.current.style.height="auto"),await Yr();const $=ct.length;Ct($>0?`Shared with ${$} ${$===1?"buddy":"buddies"}`:"Posted to your journey!","success")}catch(w){console.error("Error posting:",w),Ct(w?.message||"Failed to post","error")}finally{Jt(!1)}}},Rr=async w=>{if(window.confirm("Delete this post?"))try{await Er(We(ve,"posts",w)),ft(N=>N.filter(U=>U.id!==w)),Ct("Post deleted","info")}catch(N){console.error("Delete error:",N),Ct("Failed to delete","error")}},xs=async w=>{if(!t)return;const N=t.id,U=`${w}_${N}`,$=js.has(w),Z=new Set(js);$?Z.delete(w):Z.add(w),es(Z),ft(pe=>pe.map(fe=>fe.id===w?{...fe,likeCount:Math.max(0,(fe.likeCount||0)+($?-1:1))}:fe));try{if($)await Er(We(ve,"postLikes",U)),await gs(We(ve,"posts",w),{likeCount:Ao(-1)});else{await Ts(We(ve,"postLikes",U),{postId:w,userId:N,createdAt:Ps()}),await gs(We(ve,"posts",w),{likeCount:Ao(1)});const pe=nt.find(fe=>fe.id===w);pe&&Ks(pe.authorId,"like",{postId:w})}}catch(pe){console.error("Like error:",pe),Yr()}},fi=async w=>{try{const N=await $t(Qt(dt(ve,"postComments"),wt("postId","==",w),ku("createdAt","asc"),Eu(50)));ht(U=>({...U,[w]:N.docs.map($=>({id:$.id,...$.data()}))}))}catch(N){console.error("Error loading comments:",N)}},Qr=w=>{const N=new Set(Wt);N.has(w)?N.delete(w):(N.add(w),Ne[w]||fi(w)),se(N)},Xr=async w=>{const N=(gt[w]||"").trim(),U=nn[w];if(!(!N&&!U||!t)){tt($=>({...$,[w]:!0}));try{let $=null;if(U){const De=Wa(Ga,`comment-images/${Date.now()}_${U.name}`);await Rh(De,U),$=await Lo(De)}const Z={postId:w,authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:N||"",createdAt:Ps()};$&&(Z.imageURL=$);const pe=Fe[w];pe&&(Z.replyToId=pe.id,Z.replyToName=pe.authorName),await jr(dt(ve,"postComments"),Z),await gs(We(ve,"posts",w),{commentCount:Ao(1)});const fe=nt.find(De=>De.id===w);fe&&Ks(fe.authorId,"comment",{postId:w});const Ae=N.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Ae){const De=new Set;Ae.forEach(Je=>{const Be=Je.slice(1).trim(),Nt=ct.find(_s=>_s.name&&_s.name.toLowerCase()===Be.toLowerCase());Nt&&!De.has(Nt.id)&&(De.add(Nt.id),Ks(Nt.id,"mention",{postId:w}))})}st(De=>({...De,[w]:""})),jn(De=>({...De,[w]:null})),Hn(De=>({...De,[w]:null})),Zt(De=>({...De,[w]:null})),_n.current[w]&&(_n.current[w].value=""),ft(De=>De.map(Je=>Je.id===w?{...Je,commentCount:(Je.commentCount||0)+1}:Je)),await fi(w)}catch($){console.error("Comment error:",$),Ct("Failed to comment","error")}finally{tt($=>({...$,[w]:!1}))}}},As=async(w,N)=>{try{await Er(We(ve,"postComments",N)),await gs(We(ve,"posts",w),{commentCount:Ao(-1)}),ht(U=>({...U,[w]:(U[w]||[]).filter($=>$.id!==N)})),ft(U=>U.map($=>$.id===w?{...$,commentCount:Math.max(($.commentCount||1)-1,0)}:$))}catch(U){console.error("Delete comment error:",U),Ct("Failed to delete comment","error")}},Li=(w,N)=>{const U=N.target.files?.[0];if(!U)return;if(U.size>5*1024*1024){Ct("Image must be under 5MB","error");return}jn(Z=>({...Z,[w]:U}));const $=new FileReader;$.onload=Z=>Hn(pe=>({...pe,[w]:Z.target.result})),$.readAsDataURL(U)},Ir=w=>{jn(N=>({...N,[w]:null})),Hn(N=>({...N,[w]:null})),_n.current[w]&&(_n.current[w].value="")},mi=w=>{Tt(w.target.value),w.target.style.height="auto",w.target.style.height=Math.min(w.target.scrollHeight,120)+"px",cs(w.target.value,"compose")},ns=(w,N)=>{st(U=>({...U,[w]:N})),cs(N,w)};return a.jsx(Xo,{children:a.jsxs("div",{className:"cb-dashboard","data-theme":d?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-left-group",children:[a.jsxs("div",{className:"header-notif-wrap",ref:Ge,children:[a.jsxs("button",{className:"header-notif-btn",onClick:()=>{Re(!le),le||Ft()},"aria-label":"Notifications",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),Wn>0&&a.jsx("span",{className:"header-notif-badge",children:Wn>9?"9+":Wn})]}),le&&a.jsxs("div",{className:"notif-panel",children:[a.jsxs("div",{className:"notif-panel-header",children:[a.jsx("span",{className:"notif-panel-title",children:"Notifications"}),sn.length>0&&a.jsx("button",{className:"notif-clear-btn",onClick:Kr,children:"Clear all"})]}),a.jsx("div",{className:"notif-panel-list",children:sn.length===0?a.jsx("div",{className:"notif-empty",children:"No notifications yet"}):sn.map(w=>a.jsxs("div",{className:`notif-item${w.read?"":" unread"}`,onClick:()=>{if(Re(!1),w.type==="buddy_request"||w.type==="buddy_accept")b(g?"/client/core-buddy/buddies":"/upgrade");else if((w.type==="like"||w.type==="comment")&&w.postId){if(!Wt.has(w.postId)){const N=new Set(Wt);N.add(w.postId),se(N),Ne[w.postId]||fi(w.postId)}setTimeout(()=>{const N=document.getElementById(`post-${w.postId}`);N&&N.scrollIntoView({behavior:"smooth",block:"center"})},150)}else w.type==="like"||w.type==="comment"?document.querySelector(".cb-journey-section")?.scrollIntoView({behavior:"smooth"}):w.type==="mention"&&b(`/client/core-buddy/profile/${w.fromId}`)},children:[a.jsx("div",{className:"notif-item-avatar",children:w.fromPhotoURL?a.jsx("img",{src:w.fromPhotoURL,alt:""}):a.jsx("span",{children:(w.fromName||"?")[0]})}),a.jsxs("div",{className:"notif-item-body",children:[a.jsxs("p",{className:"notif-item-text",children:[a.jsx("strong",{children:w.fromName})," ",w.type==="buddy_request"&&"sent you a buddy request",w.type==="buddy_accept"&&"accepted your buddy request",w.type==="like"&&"liked your post",w.type==="comment"&&"commented on your post",w.type==="mention"&&"mentioned you"]}),a.jsx("span",{className:"notif-item-time",children:Xp(w.createdAt)})]})]},w.id))})]})]}),a.jsx("button",{className:"header-icon-btn",onClick:()=>b("/client/core-buddy/settings"),"aria-label":"Settings",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{className:"header-icon-btn",onClick:p,"aria-label":d?"Switch to light mode":"Switch to dark mode",children:d?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),a.jsx("button",{className:"header-icon-btn",onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:kE.map((w,N)=>{const U=N<G;return a.jsx("line",{x1:w.x1,y1:w.y1,x2:w.x2,y2:w.y2,className:`ring-tick ${U?"elapsed":"remaining"}`,strokeWidth:w.thick?"3":"2"},N)})}),a.jsxs("div",{className:"cb-ring-center",children:[a.jsxs("div",{className:"cb-ring-logo",onClick:()=>Ee.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:re||"/Logo.webp",alt:re?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${ke?" uploading":""}`,children:ke?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:Ee,type:"file",accept:"image/*",onChange:hi,style:{display:"none"}})]}),!re&&!ke&&a.jsx("div",{className:"cb-photo-badge",onClick:()=>Ee.current?.click(),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(T.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(T.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(T.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Qp[Oe].text," ",a.jsx("strong",{children:Qp[Oe].bold})]},Oe)]}),a.jsx("div",{className:"cb-stats-row",children:qe.map(w=>{const N=(w.size==="large",38),U=2*Math.PI*N,$=U-w.pct/100*U,Z=w.editable,pe=w.pct>=75&&w.pct<100,fe=w.pct>=100;return a.jsxs("div",{className:`cb-stat-item${w.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:`cb-stat-ring${Z?" cb-stat-tappable":""}${Z&&Ie?" cb-stat-hint":""}${pe?" cb-stat-near":""}${fe?" cb-stat-complete":""}`,onClick:Z?()=>{Se(!0),Ce(!1)}:void 0,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:N}),a.jsx("circle",{className:`cb-stat-fill${pe?" cb-fill-near":""}${fe?" cb-fill-complete":""}`,cx:"50",cy:"50",r:N,strokeDasharray:U,strokeDashoffset:$})]}),a.jsx("span",{className:`cb-stat-value${fe?" cb-val-complete":""}`,children:w.value})]}),a.jsxs("span",{className:"cb-stat-label",children:[w.label==="Wk Streak"&&Pe>0&&a.jsx("svg",{className:"cb-streak-flame",width:"12",height:"12",viewBox:"0 0 24 24",fill:"var(--color-primary)",stroke:"none",children:a.jsx("path",{d:"M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"})}),w.label]})]},w.label)})}),ee&&a.jsx("div",{className:"cb-target-overlay",onClick:()=>Se(!1),children:a.jsxs("div",{className:"cb-target-picker",onClick:w=>w.stopPropagation(),children:[a.jsx("h4",{children:"Weekly workout goal"}),a.jsx("p",{children:"How many sessions per week?"}),a.jsx("div",{className:"cb-target-options",children:[1,2,3,4,5,6,7].map(w=>a.jsx("button",{className:`cb-target-option${w===Me?" active":""}`,onClick:()=>F(w),children:w},w))})]})}),a.jsxs("p",{className:"cb-coach-msg",children:[Pn.main," ",a.jsx("strong",{children:ue}),"  ",Pn.sub]}),Gn&&a.jsxs("div",{className:"cb-milestone-hint",children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:Gn})]}),us&&a.jsxs("button",{className:"cb-nudge-card",onClick:us.action||void 0,style:us.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-us.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:us.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:us.label}),a.jsx("span",{className:"cb-nudge-title",children:us.message}),us.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[us.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[g&&a.jsxs("button",{className:`cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn${qt?" cb-card-done":""}`,onClick:w=>{ie(w),b("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:Ns("protein"),color:"var(--color-primary)"},{label:"C",pct:Ns("carbs"),color:"var(--color-primary)"},{label:"F",pct:Ns("fats"),color:"var(--color-primary)"},{label:"Cal",pct:Ns("calories"),color:"var(--color-primary)"}].map(w=>{const U=2*Math.PI*38,$=U-w.pct/100*U;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:w.color},strokeDasharray:U,strokeDashoffset:$})]}),a.jsx("span",{style:{color:w.color},children:w.label})]},w.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:`cb-feature-card cb-card-workouts-hero ripple-btn${Ke?" cb-card-done":""}`,onClick:w=>{ie(w),b("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workout"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[D," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[z," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:`cb-feature-card cb-card-consistency ripple-btn${zn?" cb-card-done":""}`,onClick:w=>{ie(w),b("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:`cb-habit-dots${V>=E?" cb-habits-all-done":""}`,children:Array.from({length:E},(w,N)=>a.jsx("span",{className:`cb-habit-dot${N<V?" done":""}${!N&&V>0&&N>=V?" cb-dot-warming":""}`,style:N>=V&&V>0?{"--glow-intensity":Math.min(V/E,.9)}:void 0},N))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[V,"/",E," today"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:w=>{ie(w),b("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),X.length>0?a.jsx("div",{className:"cb-lb-preview",children:X.map((w,N)=>{const U=["#FFD700","#A8B4C0","#CD7F32"][N],$=w.name?w.name.split(" ").map(Ae=>Ae[0]).join("").slice(0,2).toUpperCase():"?",Z=w.id===t?.id,pe=N+1,fe=Z&&mr?mr-pe:0;return a.jsxs("div",{className:`cb-lb-entry${Z?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:U},children:w.photoURL?a.jsx("img",{src:w.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:$})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:U},children:["#",pe,Z&&fe>0&&a.jsxs("span",{className:"cb-lb-movement cb-lb-up",children:["+",fe]}),Z&&fe<0&&a.jsx("span",{className:"cb-lb-movement cb-lb-down",children:fe})]})]},w.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("button",{className:"cb-feature-card cb-card-challenge ripple-btn",onClick:w=>{ie(w),b("/client/core-buddy/challenges")},children:[a.jsx("div",{className:"cb-card-icon-wrap cb-card-icon-challenge",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"})})}),a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Challenges"}),a.jsx("p",{children:"Push yourself with timed fitness challenges"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:w=>{ie(w),b("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("div",{className:"cb-journey-section",children:[a.jsx("h3",{className:"cb-journey-title",children:"My Journey"}),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:re?a.jsx("img",{src:re,alt:""}):a.jsx("span",{children:Qc(t?.name)})}),a.jsxs("div",{className:"journey-compose-body",style:{position:"relative"},children:[a.jsx("textarea",{ref:zt,placeholder:"Share your progress... (use @ to mention)",value:de,onChange:mi,rows:1,maxLength:500}),ln&&Ss==="compose"&&os.length>0&&a.jsx("div",{className:"mention-dropdown",children:os.map(w=>a.jsxs("button",{className:"mention-option",onClick:()=>Cn(w,"compose"),children:[a.jsx("div",{className:"mention-option-avatar",children:w.photoURL?a.jsx("img",{src:w.photoURL,alt:""}):a.jsx("span",{children:Qc(w.name)})}),a.jsx("span",{children:w.name})]},w.id))}),Xe&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:Xe,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:pr,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>Ln.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:Ln,type:"file",accept:"image/*",onChange:Di,hidden:!0}),(de.trim()||mt)&&a.jsx("button",{className:"journey-post-btn",onClick:pa,disabled:pt,children:pt?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),lt?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"cb-spinner"})}):nt.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"Start sharing your fitness journey!"})]}):a.jsx("div",{className:"journey-list",children:nt.map(w=>a.jsxs("div",{id:`post-${w.id}`,className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:w.authorPhotoURL?a.jsx("img",{src:w.authorPhotoURL,alt:""}):a.jsx("span",{children:Qc(w.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:w.authorName}),a.jsx("span",{className:"journey-post-time",children:Xp(w.createdAt)})]}),a.jsx("button",{className:"journey-delete-btn",onClick:()=>Rr(w.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),w.type==="workout_summary"&&w.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:w.metadata.title}),w.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:w.metadata.stats.map(N=>`${N.value} ${N.label}`).join("    ")}),!w.metadata.stats?.length&&w.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:w.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed a workout using Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):w.type==="badge_earned"&&w.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame journey-card-logo-badge",children:(()=>{const N=zl.find(U=>U.id===w.metadata.badgeId);return N?.img?a.jsx("img",{src:N.img,alt:w.metadata.title,className:"journey-card-logo-img"}):a.jsx("img",{src:"/Logo.webp",alt:w.metadata.title,className:"journey-card-logo-img"})})()}),a.jsx("h3",{className:"journey-card-title",children:w.metadata.title}),w.metadata.badgeDesc&&a.jsx("p",{className:"journey-card-stats-line",children:w.metadata.badgeDesc}),a.jsx("p",{className:"journey-card-cta",children:"I just earned a badge on Core Buddy"}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):w.type==="habits_summary"&&w.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:w.metadata.title}),w.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:w.metadata.stats.map(N=>`${N.value} ${N.label}`).join("    ")}),w.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:w.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed my daily habits with Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):a.jsxs(a.Fragment,{children:[w.content&&a.jsx("p",{className:"journey-post-content",children:Ys(w.content)}),w.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:w.imageURL,alt:"Post",loading:"lazy"})})]}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${js.has(w.id)?" liked":""}`,onClick:()=>xs(w.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:js.has(w.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:w.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${Wt.has(w.id)?" active":""}`,onClick:()=>Qr(w.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:w.commentCount||0})]})]}),Wt.has(w.id)&&a.jsxs("div",{className:"journey-comments",children:[Ne[w.id]?.length>0?Ne[w.id].map(N=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",children:N.authorPhotoURL?a.jsx("img",{src:N.authorPhotoURL,alt:""}):a.jsx("span",{children:Qc(N.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:N.authorName}),N.replyToName&&a.jsxs("span",{className:"journey-comment-reply-tag",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"9 14 4 9 9 4"}),a.jsx("path",{d:"M20 20v-7a4 4 0 0 0-4-4H4"})]}),N.replyToName]}),N.content&&a.jsx("span",{className:"journey-comment-text",children:Ys(N.content)}),N.imageURL&&a.jsx("img",{className:"journey-comment-image",src:N.imageURL,alt:"Comment",loading:"lazy"})]}),a.jsxs("div",{className:"journey-comment-actions-row",children:[a.jsx("span",{className:"journey-comment-time",children:Xp(N.createdAt)}),a.jsx("button",{className:"journey-comment-reply-btn",onClick:()=>Zt(U=>({...U,[w.id]:{id:N.id,authorName:N.authorName}})),children:"Reply"}),a.jsx("button",{className:"journey-comment-delete-btn",onClick:()=>As(w.id,N.id),"aria-label":"Delete comment",children:a.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})]},N.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),Fe[w.id]&&a.jsxs("div",{className:"journey-comment-replying",children:[a.jsxs("span",{children:["Replying to ",a.jsx("strong",{children:Fe[w.id].authorName})]}),a.jsx("button",{onClick:()=>Zt(N=>({...N,[w.id]:null})),"aria-label":"Cancel reply",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),Dn[w.id]&&a.jsxs("div",{className:"journey-comment-img-preview",children:[a.jsx("img",{src:Dn[w.id],alt:"Preview"}),a.jsx("button",{onClick:()=>Ir(w.id),"aria-label":"Remove image",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("button",{className:"journey-comment-img-btn",onClick:()=>_n.current[w.id]?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:N=>{_n.current[w.id]=N},type:"file",accept:"image/*",onChange:N=>Li(w.id,N),hidden:!0}),a.jsx("input",{type:"text",placeholder:"Comment",value:gt[w.id]||"",onChange:N=>ns(w.id,N.target.value),onKeyDown:N=>{N.key==="Enter"&&Xr(w.id)},maxLength:300}),ln&&Ss===w.id&&os.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:os.map(N=>a.jsxs("button",{className:"mention-option",onClick:()=>Cn(N,w.id),children:[a.jsx("div",{className:"mention-option-avatar",children:N.photoURL?a.jsx("img",{src:N.photoURL,alt:""}):a.jsx("span",{children:Qc(N.name)})}),a.jsx("span",{children:N.name})]},N.id))}),a.jsx("button",{onClick:()=>Xr(w.id),disabled:!(gt[w.id]||"").trim()&&!nn[w.id]||He[w.id],children:He[w.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},w.id))})]})]}),!g&&a.jsxs("button",{className:"cb-upgrade-cta",onClick:()=>b("/upgrade"),children:[a.jsx("span",{className:"cb-upgrade-cta-text",children:"Unlock the full experience"}),a.jsx("span",{className:"cb-upgrade-cta-sub",children:"Unlimited workout times, nutrition, buddies & more"}),a.jsxs("svg",{className:"cb-upgrade-cta-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]})]})]}),a.jsx(Gr,{active:"home"}),Nr&&a.jsx("div",{className:"cb-weekly-celebration",children:a.jsxs("div",{className:"cb-weekly-celebration-card",children:[a.jsx("span",{className:"cb-weekly-celebration-icon",children:a.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h4",{children:"Weekly Goal Smashed!"}),a.jsxs("p",{children:[D,"/",Me," sessions complete"]})]})}),Xt&&a.jsxs("div",{className:`toast-notification ${Xt.type}`,children:[Xt.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Xt.type==="success"&&a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),Xt.message]}),a.jsx(a3,{steps:On,active:Gs,onFinish:M})]})})}const Jp=new Map;function si(){return new Date().toISOString().split("T")[0]}const Hw=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],R3={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function I3(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function M3(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Cr(),{isDark:l,toggleTheme:u,accent:d}=Mi(),p=Ws(),[g,y]=x.useState("loading"),[b,E]=x.useState(null),[T,P]=x.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[G,q]=x.useState(null),[z,K]=x.useState(si()),[W,Q]=x.useState({entries:[]}),[oe,Te]=x.useState({protein:0,carbs:0,fats:0,calories:0}),[be,C]=x.useState(!1),[j,I]=x.useState(()=>{const M=new Date;return{year:M.getFullYear(),month:M.getMonth()}}),[V,L]=x.useState(!1),[D,R]=x.useState(()=>{const M=new Date;return{year:M.getFullYear(),month:M.getMonth()}}),[Me,Ye]=x.useState(!1),[ee,Se]=x.useState(I3),[Ie,Ce]=x.useState(null),[X,O]=x.useState(null),[re,we]=x.useState(!1),[ke,xe]=x.useState(null),[Ee,Pe]=x.useState(""),[et,Oe]=x.useState(!1),[Lt,Xt]=x.useState(""),[In,Ct]=x.useState([]),[nt,ft]=x.useState(!1),[lt,Mn]=x.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[de,Tt]=x.useState(null),[mt,It]=x.useState("100"),[Xe,Et]=x.useState(0),[pt,Jt]=x.useState("weight"),[js,es]=x.useState(0),[Wt,se]=x.useState(null);x.useRef(null);const Ne=x.useRef(!1),ht=x.useRef(null),gt=x.useRef(null),st=x.useRef(null),He=x.useCallback((M,F="info")=>{se({message:M,type:F}),setTimeout(()=>se(null),3e3)},[]);x.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),x.useEffect(()=>{if(!t?.id)return;(async()=>{try{const F=await qs(We(ve,"nutritionTargets",t.id));F.exists()?(E(F.data()),y("dashboard")):y("setup")}catch(F){console.error("Error loading nutrition data:",F),y("setup")}})()},[t?.id]),x.useEffect(()=>{if(!t?.id)return;(async()=>{try{const F=await qs(We(ve,"nutritionLogs",`${t.id}_${z}`));if(F.exists()){const ie=F.data();Q({entries:ie.entries||[]})}else Q({entries:[]})}catch(F){console.error("Error loading log:",F),Q({entries:[]})}})()},[t?.id,z]),x.useEffect(()=>{const M=W.entries.reduce((F,ie)=>({protein:F.protein+(ie.protein||0),carbs:F.carbs+(ie.carbs||0),fats:F.fats+(ie.fats||0),calories:F.calories+(ie.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Te(M)},[W.entries]);const tt=async M=>{try{await Ts(We(ve,"nutritionLogs",`${t.id}_${z}`),{clientId:t.id,date:z,entries:M.entries,updatedAt:Rt.now()})}catch(F){console.error("Error saving nutrition log:",F)}},Fe=z===si(),Zt=(M,F)=>new Date(M,F+1,0).getDate(),nn=(M,F)=>new Date(M,F,1).getDay(),jn=M=>{if(M===si())return"Today";const F=new Date(M+"T12:00:00"),ie=new Date;return ie.setDate(ie.getDate()-1),M===ie.toISOString().split("T")[0]?"Yesterday":F.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})},Dn=["January","February","March","April","May","June","July","August","September","October","November","December"],Hn=["Su","Mo","Tu","We","Th","Fr","Sa"],zt=()=>{let M=parseFloat(T.weight);T.weightUnit==="lbs"&&(M*=.453592);let F;T.heightUnit==="cm"?F=parseFloat(T.height):F=(parseFloat(T.heightFeet)||0)*30.48+(parseFloat(T.heightInches)||0)*2.54;const ie=parseInt(T.age);let ue=T.gender==="male"?10*M+6.25*F-5*ie+5:10*M+6.25*F-5*ie-161;const Ve=ue*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[T.dailyActivity],qe={low:100,moderate:200,high:300,daily:400},qt=Math.round(Ve+qe[T.trainingFrequency]);let Ke=qt,zn,Gn;switch(T.goal){case"lose":Ke=qt*(1-{light:.15,moderate:.2,harsh:.25}[T.deficitLevel]),zn=2.2,Gn=.3;break;case"build":Ke=qt*1.1,zn=2,Gn=.22;break;default:zn=1.8,Gn=.25}Ke=Math.max(Ke,T.gender==="male"?1400:1100);const Ns=Math.round(M*zn),Pn=Math.round(Ke*Gn/9),us=Math.max(0,Math.round((Ke-Ns*4-Pn*9)/4));q({calories:Math.round(Ke),protein:Ns,carbs:us,fats:Pn,bmr:Math.round(ue),neat:Math.round(Ve),exerciseAdd:qe[T.trainingFrequency],tdee:Math.round(qt)})},Ln=async()=>{if(G)try{const M={clientId:t.id,calories:G.calories,protein:G.protein,carbs:G.carbs,fats:G.fats,goal:T.goal,updatedAt:Rt.now()};await Ts(We(ve,"nutritionTargets",t.id),M),E(M),y("dashboard"),He("Macro targets saved!","success")}catch(M){console.error("Error saving targets:",M),He("Failed to save targets. Please try again.","error")}},_n=()=>{const M=T.weight&&parseFloat(T.weight)>0,F=T.age&&parseInt(T.age)>0,ie=T.heightUnit==="cm"?T.height&&parseFloat(T.height)>0:T.heightFeet&&parseFloat(T.heightFeet)>0||T.heightInches&&parseFloat(T.heightInches)>0;return M&&F&&ie},sn="nut_favourite_foods",fr=()=>{try{return JSON.parse(localStorage.getItem(sn)||"[]")}catch{return[]}};x.useEffect(()=>{if(!t?.id)return;(async()=>{try{const F=await qs(We(ve,"favouriteFoods",t.id));if(F.exists()){const ie=F.data().items||[];localStorage.setItem(sn,JSON.stringify(ie)),es(ue=>ue+1)}else{const ie=fr();ie.length>0&&await Ts(We(ve,"favouriteFoods",t.id),{items:ie,updatedAt:Rt.now()})}}catch(F){console.error("Error loading favourites:",F)}})()},[t?.id]);const le=M=>fr().some(F=>F.name.toLowerCase()===(M||"").toLowerCase()),Re=M=>{const F=fr(),ie=F.findIndex(ue=>ue.name.toLowerCase()===M.name.toLowerCase());ie>=0?F.splice(ie,1):F.unshift({name:M.name,protein:M.protein,carbs:M.carbs,fats:M.fats,calories:M.calories,serving:M.serving,per100g:M.per100g||null,servingUnit:M.servingUnit||"g",portion:M.portion||null}),localStorage.setItem(sn,JSON.stringify(F)),t?.id&&Ts(We(ve,"favouriteFoods",t.id),{items:F,updatedAt:Rt.now()}).catch(ue=>console.error("Error saving favourites:",ue)),es(ue=>ue+1)},Ge=M=>{const F=[...W.entries,{...M,meal:ee,id:Date.now(),addedAt:new Date().toISOString()}],ie={...W,entries:F};Q(ie),tt(ie),O(null),Tt(null),It("100"),Et(0),Jt("weight"),Mn({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),He("Food added!","success")},ct=M=>{const F=W.entries.filter(ue=>ue.id!==M),ie={...W,entries:F};Q(ie),tt(ie)},at=async M=>{if(!(!t?.id||M===z)){Ye(!0);try{const F=await qs(We(ve,"nutritionLogs",`${t.id}_${M}`));if(!F.exists()||!F.data().entries?.length){He("No food logged on that day","error");return}const ie=F.data().entries.map(Ve=>({...Ve,id:Date.now()+Math.random(),addedAt:new Date().toISOString()})),ue=[...W.entries,...ie],ze={...W,entries:ue};Q(ze),tt(ze),L(!1),He(`Copied ${ie.length} items from ${jn(M)}`,"success")}catch(F){console.error("Error copying day:",F),He("Failed to copy day","error")}finally{Ye(!1)}}},mn=x.useRef(null),kn=x.useRef([]),ln=3,pn=5,Ss=async()=>{we(!0);const M=document.querySelector("#barcode-reader");if(!M){we(!1),He("Scanner container not found.","error");return}if(!mn.current)try{const ie=await $s(()=>import("./quagga.min-BbicSfvA.js").then(ue=>ue.q),[]);mn.current=ie.default}catch(ie){console.error("Failed to load barcode scanner:",ie),we(!1),He("Could not load scanner.","error");return}const F=mn.current;F.init({inputStream:{type:"LiveStream",target:M,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},ie=>{if(ie){console.error("Quagga init error:",ie),we(!1),He("Could not access camera. Check permissions.","error");return}F.start(),Ne.current=!0}),kn.current=[],F.onDetected(ie=>{const ue=ie.codeResult.decodedCodes?.filter(Ve=>Ve.error!==void 0)?.map(Ve=>Ve.error)||[];if((ue.length>0?ue.reduce((Ve,qe)=>Ve+qe,0)/ue.length:1)<.15){const Ve=ie.codeResult.code,qe=kn.current;qe.push(Ve),qe.length>pn&&qe.shift(),qe.filter(Ke=>Ke===Ve).length>=ln&&(F.offDetected(),kn.current=[],xe(Ve))}})},ts=()=>{const M=mn.current;Ne.current&&M&&(M.stop(),M.offDetected(),Ne.current=!1),we(!1)},os=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,Gt=M=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((M||"").replace(/\s/g,"")),En=M=>{if(!M)return{value:100,unit:"g"};const F=M.toLowerCase().replace(/\s/g,""),ie=F.match(/([\d.]+)/),ue=ie?parseFloat(ie[1]):100;return Gt(M)?/cl/.test(F)?{value:ue*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(F)&&!/ml/.test(F)?{value:ue*1e3,unit:"ml"}:{value:ue,unit:"ml"}:{value:ue,unit:"g"}},Cs=M=>{if(Gt(M.serving_size)||Gt(M.quantity))return"ml";const F=M.product_name||M.product_name_en||"";return os.test(F)?"ml":"g"},Nr=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],di=(M,F)=>{const ie=M||"",ue=ie.match(/\((\d+\.?\d*)\s*g\)/i),ze=ie.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(ue&&ze){const qt=parseFloat(ue[1]);let Ke=ze[1].replace(/^\d+\s*/,"").trim();if(Ke&&qt>0)return{label:Ke,weight:qt}}const Ve=ie.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Ve){const qt=parseFloat(Ve[1]);let Ke=Ve[2].replace(/^\d+\s*/,"").trim();if(Ke&&qt>0)return{label:Ke,weight:qt}}const qe=F||"";for(const{pattern:qt,label:Ke,weight:zn}of Nr)if(qt.test(qe))return{label:Ke,weight:zn};return null},Ar=M=>{const F=M.nutriments||{},ie=Cs(M),ue=En(M.serving_size),ze=ie==="ml"?ue.unit==="ml"?ue.value:100:ue.value,Ve=M.product_name||M.product_name_en||"Unknown Product",qe=di(M.serving_size,Ve);return{name:Ve,brand:M.brands||"",image:M.image_small_url||M.image_url||null,servingSize:M.serving_size||"100g",servingValue:ze,servingUnit:ie,portion:qe,protein:Math.round(F.proteins_100g||F.proteins||0),carbs:Math.round(F.carbohydrates_100g||F.carbohydrates||0),fats:Math.round(F.fat_100g||F.fat||0),calories:Math.round(F["energy-kcal_100g"]||F["energy-kcal"]||(F.energy_100g?F.energy_100g/4.184:0)),per100g:!0}},mr=async M=>{Oe(!0);try{const F=`https://world.openfoodfacts.org/api/v2/product/${M}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,ie=await fetch(F);if(!ie.ok)throw new Error(`HTTP ${ie.status}`);const ue=await ie.json();if(ue.status==="success"||ue.status===1||ue.product){const ze=Ar(ue.product);ze.calories===0&&ze.protein===0&&ze.carbs===0?He("Product found but no nutrition data available.","error"):(Tt(ze),ze.portion?(Et(1),It(String(ze.portion.weight)),Jt("portion")):(Et(0),It(String(ze.servingValue||100)),Jt("weight")),Pe(""))}else He("Product not found. Try search or manual entry.","error")}catch(F){console.error("Barcode lookup error:",F),He("Failed to look up product. Check your connection.","error")}Oe(!1)},$n=(M,F,ie)=>{const ue=M.toLowerCase().trim(),ze=F.toLowerCase().trim(),Ve=ie.toLowerCase().trim();let qe=0;return(ue===Ve||ue===Ve+"s"||ue+"s"===Ve)&&(qe+=100),(ue.endsWith(" "+Ve)||ue.endsWith(" "+Ve+"s"))&&(qe+=40),(ue.startsWith(Ve+" ")||ue.startsWith(Ve+"s "))&&(qe+=15),Ve.split(/\s+/).some(Ke=>ze===Ke||ze.startsWith(Ke))&&(qe+=30),qe+=Math.max(0,30-ue.length),qe},Gs=async()=>{if(!Lt.trim())return;ht.current&&ht.current.abort();const M=new AbortController;ht.current=M;const F=Lt.trim().toLowerCase(),ie=F.split(/\s+/).filter(Boolean);if(Jp.has(F)){Ct(Jp.get(F));return}ft(!0);try{const ze=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Lt.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Ve=await fetch(ze,{signal:M.signal});if(!Ve.ok)throw new Error(`HTTP ${Ve.status}`);const qt=((await Ve.json()).products||[]).map(Ke=>Ar(Ke)).filter(Ke=>Ke.name!=="Unknown Product"&&(Ke.calories>0||Ke.protein>0)).filter(Ke=>{const zn=(Ke.name+" "+Ke.brand).toLowerCase();return ie.every(Gn=>zn.includes(Gn))}).sort((Ke,zn)=>$n(zn.name,zn.brand,F)-$n(Ke.name,Ke.brand,F)).slice(0,10);Jp.set(F,qt),Ct(qt),qt.length===0&&He("No results found. Try a different search.","info")}catch(ue){if(ue.name==="AbortError")return;console.error("Search error:",ue),He("Search failed. Check your connection.","error")}ft(!1)};x.useEffect(()=>{if(gt.current&&clearTimeout(gt.current),!(!Lt.trim()||X!=="search"||de))return gt.current=setTimeout(()=>{Gs()},700),()=>clearTimeout(gt.current)},[Lt]);const ls=l,Sn={"ring-protein":ls?"#2dd4bf":"#14b8a6","ring-carbs":ls?"#fbbf24":"#f59e0b","ring-fats":ls?"#a78bfa":"#8b5cf6","ring-cals":"var(--color-primary)"},On=80,Wn=2*Math.PI*On,Ft=(M,F,ie,ue,ze)=>{const Ve=ue>0?Math.min(100,Math.round(ie/ue*100)):0,qe=Wn-Ve/100*Wn,qt=Sn[ze]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:On}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:On,style:{stroke:qt},strokeDasharray:Wn,strokeDashoffset:qe})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:qt},children:Math.round(ie)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",ue,M==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:qt},children:F})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:qt},children:[Ve,"%"]})]})};if(x.useEffect(()=>{if(!ke)return;const M=setTimeout(()=>{const F=ke;ts(),xe(null),mr(F)},1500);return()=>clearTimeout(M)},[ke]),x.useEffect(()=>()=>{const M=mn.current;if(Ne.current&&M){try{M.stop(),M.offDetected()}catch{}Ne.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:T.gender==="male"?"active":"",onClick:()=>{P(M=>({...M,gender:"male"})),q(null)},children:"Male"}),a.jsx("button",{className:T.gender==="female"?"active":"",onClick:()=>{P(M=>({...M,gender:"female"})),q(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:T.age,onChange:M=>{P(F=>({...F,age:M.target.value})),q(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:T.weight,onChange:M=>{P(F=>({...F,weight:M.target.value})),q(null)},placeholder:T.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:T.weightUnit==="kg"?"active":"",onClick:()=>{P(M=>({...M,weightUnit:"kg"})),q(null)},children:"kg"}),a.jsx("button",{className:T.weightUnit==="lbs"?"active":"",onClick:()=>{P(M=>({...M,weightUnit:"lbs"})),q(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[T.heightUnit==="cm"?a.jsx("input",{type:"number",value:T.height,onChange:M=>{P(F=>({...F,height:M.target.value})),q(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:T.heightFeet,onChange:M=>{P(F=>({...F,heightFeet:M.target.value})),q(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:T.heightInches,onChange:M=>{P(F=>({...F,heightInches:M.target.value})),q(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:T.heightUnit==="cm"?"active":"",onClick:()=>{P(M=>({...M,heightUnit:"cm"})),q(null)},children:"cm"}),a.jsx("button",{className:T.heightUnit==="ft"?"active":"",onClick:()=>{P(M=>({...M,heightUnit:"ft"})),q(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:T.dailyActivity,onChange:M=>{P(F=>({...F,dailyActivity:M.target.value})),q(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:T.trainingFrequency,onChange:M=>{P(F=>({...F,trainingFrequency:M.target.value})),q(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:T.goal==="lose"?"active":"",onClick:()=>{P(M=>({...M,goal:"lose"})),q(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:T.goal==="maintain"?"active":"",onClick:()=>{P(M=>({...M,goal:"maintain"})),q(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:T.goal==="build"?"active":"",onClick:()=>{P(M=>({...M,goal:"build"})),q(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),T.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:T.deficitLevel==="light"?"active":"",onClick:()=>{P(M=>({...M,deficitLevel:"light"})),q(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:T.deficitLevel==="moderate"?"active":"",onClick:()=>{P(M=>({...M,deficitLevel:"moderate"})),q(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:T.deficitLevel==="harsh"?"active":"",onClick:()=>{P(M=>({...M,deficitLevel:"harsh"})),q(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:zt,disabled:!_n(),children:"Calculate Macros"})]}),G&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[Ft("Protein","Protein",G.protein,G.protein,"ring-protein"),Ft("Carbs","Carbs",G.carbs,G.carbs,"ring-carbs"),Ft("Fats","Fats",G.fats,G.fats,"ring-fats"),Ft("Calories","Calories",G.calories,G.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[G.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[G.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",G.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[G.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:Ln,children:"Set as My Daily Targets"})]})]}),Wt&&a.jsx("div",{className:`toast-notification ${Wt.type}`,children:Wt.message})]});const Kr=M=>{const F=new Date(M+"T12:00:00"),ie=F.getDay(),ue=new Date(F);ue.setDate(F.getDate()-(ie+6)%7);const ze=[];for(let Ve=0;Ve<7;Ve++){const qe=new Date(ue);qe.setDate(ue.getDate()+Ve),ze.push(qe.toISOString().split("T")[0])}return ze},Ks=["M","T","W","T","F","S","S"],cs=(M,F="search")=>{Se(M),F==="scan"?(O("scan"),Tt(null)):F==="manual"?(O("manual"),Mn({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):F==="favourites"?O("favourites"):(O("search"),Ct([]),Xt(""))},Cn=Kr(z),Ys=new Date(z+"T12:00:00"),hi=`${Dn[Ys.getMonth()]} ${Ys.getFullYear()}`;return a.jsx(Xo,{children:a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),q(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip anim-fade-up",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const M=new Date(z+"T12:00:00");M.setDate(M.getDate()-7);const F=M.toISOString().split("T")[0];K(F)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{C(!be),I({year:Ys.getFullYear(),month:Ys.getMonth()})},children:hi}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const M=new Date(z+"T12:00:00");M.setDate(M.getDate()+7);const F=M.toISOString().split("T")[0];F<=si()&&K(F)},"aria-label":"Next week",disabled:Cn[6]>=si(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:Cn.map((M,F)=>{const ie=new Date(M+"T12:00:00").getDate(),ue=M===z,ze=M>si(),Ve=M===si();return a.jsxs("button",{className:`nut-week-day${ue?" selected":""}${Ve?" today":""}${ze?" future":""}`,disabled:ze,onClick:()=>K(M),children:[a.jsx("span",{className:"nut-week-day-letter",children:Ks[F]}),a.jsx("span",{className:"nut-week-day-num",children:ie})]},M)})})]}),be&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>I(M=>{let F=M.month-1,ie=M.year;return F<0&&(F=11,ie--),{year:ie,month:F}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[Dn[j.month]," ",j.year]}),a.jsx("button",{onClick:()=>I(M=>{let F=M.month+1,ie=M.year;return F>11&&(F=0,ie++),{year:ie,month:F}}),disabled:j.year===new Date().getFullYear()&&j.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Hn.map(M=>a.jsx("span",{children:M},M))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(nn(j.year,j.month))].map((M,F)=>a.jsx("span",{},`e${F}`)),[...Array(Zt(j.year,j.month))].map((M,F)=>{const ie=F+1,ue=`${j.year}-${String(j.month+1).padStart(2,"0")}-${String(ie).padStart(2,"0")}`,ze=ue>si(),Ve=ue===z,qe=ue===si();return a.jsx("button",{className:`nut-cal-day${Ve?" selected":""}${qe?" today":""}${ze?" future":""}`,disabled:ze,onClick:()=>{K(ue),C(!1)},children:ie},ie)})]})]}),a.jsxs("div",{className:"nut-rings-row anim-fade-up-d2",children:[Ft("Protein","Protein",oe.protein,b.protein,"ring-protein"),Ft("Carbs","Carbs",oe.carbs,b.carbs,"ring-carbs"),Ft("Fats","Fats",oe.fats,b.fats,"ring-fats"),Ft("Calories","kCal",oe.calories,b.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone anim-fade-up-d4",children:a.jsxs("div",{className:"nut-light-content",children:[Fe&&a.jsx("div",{className:"nut-quick-row",children:a.jsxs("button",{className:"nut-copy-day-btn",onClick:()=>{L(!0),R({year:new Date().getFullYear(),month:new Date().getMonth()})},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),a.jsx("span",{children:"Copy day"})]})}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:Hw.map(M=>{const F=W.entries.filter(ue=>(ue.meal||"snacks")===M.key),ie=F.reduce((ue,ze)=>({protein:ue.protein+(ze.protein||0),carbs:ue.carbs+(ze.carbs||0),fats:ue.fats+(ze.fats||0),calories:ue.calories+(ze.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${M.key}`,children:R3[M.key]}),a.jsx("span",{className:"nut-meal-card-title",children:M.label}),F.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[ie.calories," cal"]}),Fe&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>Ce(Ie===M.key?null:M.key),"aria-label":`Add to ${M.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),F.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,b.protein>0?ie.protein/b.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[ie.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,b.carbs>0?ie.carbs/b.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[ie.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,b.fats>0?ie.fats/b.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[ie.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,b.calories>0?ie.calories/b.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:ie.calories})]})]}),F.length>0&&a.jsx("div",{className:"nut-log-list",children:F.map(ue=>a.jsxs("div",{className:"nut-log-item",children:[a.jsx("button",{className:`nut-fav-star log${le(ue.name)?" active":""}`,onClick:()=>Re(ue),"aria-label":le(ue.name)?"Remove from favourites":"Add to favourites",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:le(ue.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:ue.name}),ue.serving&&a.jsx("span",{className:"nut-log-item-serving",children:ue.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ue.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[ue.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[ue.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:ue.calories})]}),Fe&&a.jsx("button",{className:"nut-log-delete",onClick:()=>ct(ue.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ue.id))}),F.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:Fe?"Tap + to add food":"No entries"})})]},M.key)})})})]})}),Ie&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>Ce(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",Hw.find(M=>M.key===Ie)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const M=Ie;Ce(null),cs(M,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const M=Ie;Ce(null),cs(M,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const M=Ie;Ce(null),cs(M,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const M=Ie;Ce(null),cs(M,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),V&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>L(!1),children:a.jsxs("div",{className:"nut-copy-from-popup",onClick:M=>M.stopPropagation(),children:[a.jsxs("div",{className:"nut-copy-from-header",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),a.jsx("span",{children:"Copy from..."}),a.jsx("button",{className:"nut-modal-close",onClick:()=>L(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsx("p",{className:"nut-copy-from-hint",children:"Pick a day to copy its food log into today"}),a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>R(M=>{let F=M.month-1,ie=M.year;return F<0&&(F=11,ie--),{year:ie,month:F}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[Dn[D.month]," ",D.year]}),a.jsx("button",{onClick:()=>R(M=>{let F=M.month+1,ie=M.year;return F>11&&(F=0,ie++),{year:ie,month:F}}),disabled:D.year===new Date().getFullYear()&&D.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Hn.map(M=>a.jsx("span",{children:M},M))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(nn(D.year,D.month))].map((M,F)=>a.jsx("span",{},`e${F}`)),[...Array(Zt(D.year,D.month))].map((M,F)=>{const ie=F+1,ue=`${D.year}-${String(D.month+1).padStart(2,"0")}-${String(ie).padStart(2,"0")}`,ze=ue>si(),Ve=ue===z,qe=ue===si(),qt=ze||Ve;return a.jsx("button",{className:`nut-cal-day${Ve?" selected":""}${qe?" today":""}${ze?" future":""}`,disabled:qt,onClick:()=>at(ue),children:ie},ie)})]}),Me&&a.jsxs("div",{className:"nut-copy-from-loading",children:[a.jsx("div",{className:"wk-loading-spinner"}),a.jsx("span",{children:"Copying..."})]})]})}),X&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{ts(),xe(null),O(null),Tt(null)},children:a.jsxs("div",{className:"nut-modal",onClick:M=>M.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:X==="scan"?"Scan Barcode":X==="search"?"Search Food":X==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{ts(),xe(null),O(null),Tt(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),X==="scan"&&!de&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),re&&!ke&&a.jsx("div",{className:"nut-scan-line"}),ke&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:ke})]})]}),!re&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:Ss,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),re&&!ke&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:Ee,onChange:M=>Pe(M.target.value),onKeyDown:M=>M.key==="Enter"&&Ee.trim()&&mr(Ee.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>Ee.trim()&&mr(Ee.trim()),disabled:!Ee.trim()||et,children:et?"...":"Look Up"})]})]}),X==="scan"&&de&&(()=>{const M=de.servingUnit||"g",F=de.portion,ie=pt==="portion"&&F?Xe*F.weight:parseFloat(mt)||0,ue=ie/100,ze=M==="ml"?[100,200,250,500]:[50,100,150,200],Ve=pt==="portion"&&F?`${Xe} ${F.label}${Xe!==1?"s":""} (${Math.round(ie)}${M})`:`${Math.round(ie)}${M}`;return a.jsxs("div",{className:"nut-product-result",children:[de.image&&a.jsx("img",{src:de.image,alt:de.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:de.name}),a.jsx("button",{className:`nut-fav-star confirm${le(de.name)?" active":""}`,onClick:()=>Re({name:de.name,protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories,serving:de.servingSize,per100g:{protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories},servingUnit:de.servingUnit||"g",portion:de.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:le(de.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),de.brand&&a.jsx("p",{className:"nut-product-brand",children:de.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",M,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[de.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[de.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[de.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[de.calories," cal"]})]}),F&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:pt==="portion"?"active":"",onClick:()=>{Jt("portion"),Xe<1&&Et(1)},children:"Portions"}),a.jsxs("button",{className:pt==="weight"?"active":"",onClick:()=>{Jt("weight"),It(String(Math.round(ie)||100))},children:["Custom (",M,")"]})]}),pt==="portion"&&F?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Et(Math.max(1,Xe-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Xe}),a.jsxs("span",{className:"nut-stepper-label",children:[F.label,Xe!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(ie),M]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Et(Xe+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",M,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:mt,onChange:qe=>It(qe.target.value),onFocus:qe=>qe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:ze.map(qe=>a.jsxs("button",{className:`nut-quick-btn${mt===String(qe)?" active":""}`,onClick:()=>It(String(qe)),children:[qe,M]},qe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(de.protein*ue),"p / ",Math.round(de.carbs*ue),"c / ",Math.round(de.fats*ue),"f / ",Math.round(de.calories*ue)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{Tt(null),O("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ge({name:de.name,protein:Math.round(de.protein*ue),carbs:Math.round(de.carbs*ue),fats:Math.round(de.fats*ue),calories:Math.round(de.calories*ue),serving:Ve}),children:"Add"})]})]})})(),X==="search"&&!de&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:st,value:Lt,onChange:M=>Xt(M.target.value),onKeyDown:M=>{M.key==="Enter"&&(clearTimeout(gt.current),Gs())},onFocus:()=>setTimeout(()=>st.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:Gs,disabled:nt,children:nt?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[In.map((M,F)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{Tt(M),M.portion?(Et(1),It(String(M.portion.weight)),Jt("portion")):(Et(0),It(String(M.servingValue||100)),Jt("weight"))},children:[M.image&&a.jsx("img",{src:M.image,alt:M.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:M.name}),M.brand&&a.jsx("span",{className:"nut-search-item-brand",children:M.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[M.calories," cal  ",M.protein,"p  ",M.carbs,"c  ",M.fats,"f per 100",M.servingUnit||"g"]})]})]},F)),In.length===0&&Lt&&!nt&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),X==="search"&&de&&(()=>{const M=de.servingUnit||"g",F=de.portion,ie=pt==="portion"&&F?Xe*F.weight:parseFloat(mt)||0,ue=ie/100,ze=M==="ml"?[100,200,250,500]:[50,100,150,200],Ve=pt==="portion"&&F?`${Xe} ${F.label}${Xe!==1?"s":""} (${Math.round(ie)}${M})`:`${Math.round(ie)}${M}`;return a.jsxs("div",{className:"nut-product-result",children:[de.image&&a.jsx("img",{src:de.image,alt:de.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:de.name}),a.jsx("button",{className:`nut-fav-star confirm${le(de.name)?" active":""}`,onClick:()=>Re({name:de.name,protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories,serving:de.servingSize,per100g:{protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories},servingUnit:de.servingUnit||"g",portion:de.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:le(de.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),de.brand&&a.jsx("p",{className:"nut-product-brand",children:de.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",M,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[de.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[de.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[de.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[de.calories," cal"]})]}),F&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:pt==="portion"?"active":"",onClick:()=>{Jt("portion"),Xe<1&&Et(1)},children:"Portions"}),a.jsxs("button",{className:pt==="weight"?"active":"",onClick:()=>{Jt("weight"),It(String(Math.round(ie)||100))},children:["Custom (",M,")"]})]}),pt==="portion"&&F?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Et(Math.max(1,Xe-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Xe}),a.jsxs("span",{className:"nut-stepper-label",children:[F.label,Xe!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(ie),M]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Et(Xe+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",M,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:mt,onChange:qe=>It(qe.target.value),onFocus:qe=>qe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:ze.map(qe=>a.jsxs("button",{className:`nut-quick-btn${mt===String(qe)?" active":""}`,onClick:()=>It(String(qe)),children:[qe,M]},qe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(de.protein*ue),"p / ",Math.round(de.carbs*ue),"c / ",Math.round(de.fats*ue),"f / ",Math.round(de.calories*ue)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>Tt(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ge({name:de.name,protein:Math.round(de.protein*ue),carbs:Math.round(de.carbs*ue),fats:Math.round(de.fats*ue),calories:Math.round(de.calories*ue),serving:Ve}),children:"Add"})]})]})})(),X==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:lt.name,onChange:M=>Mn(F=>({...F,name:M.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:lt.serving,onChange:M=>Mn(F=>({...F,serving:M.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:lt.protein,onChange:M=>Mn(F=>({...F,protein:M.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:lt.carbs,onChange:M=>Mn(F=>({...F,carbs:M.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:lt.fats,onChange:M=>Mn(F=>({...F,fats:M.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:lt.calories,onChange:M=>Mn(F=>({...F,calories:M.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!lt.name.trim(),onClick:()=>Ge({name:lt.name,protein:parseFloat(lt.protein)||0,carbs:parseFloat(lt.carbs)||0,fats:parseFloat(lt.fats)||0,calories:parseFloat(lt.calories)||0,serving:lt.serving||""}),children:"Add Food"})]}),X==="favourites"&&!de&&(()=>{const M=fr(),F=ie=>{if(ie.per100g){const ue=ie.per100g;Tt({name:ie.name,brand:"",image:null,servingSize:ie.serving||"100g",servingValue:100,servingUnit:ie.servingUnit||"g",portion:ie.portion||null,protein:ue.protein,carbs:ue.carbs,fats:ue.fats,calories:ue.calories,per100g:!0}),ie.portion?(Et(1),It(String(ie.portion.weight)),Jt("portion")):(Et(0),It("100"),Jt("weight"))}else Ge({name:ie.name,protein:ie.protein,carbs:ie.carbs,fats:ie.fats,calories:ie.calories,serving:ie.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:M.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:M.map((ie,ue)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:ze=>{ze.stopPropagation(),Re(ie)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>F(ie),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:ie.name}),a.jsx("span",{className:"nut-recent-item-serving",children:ie.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[ie.calories," cal"]})]})]},ue))})})})(),X==="favourites"&&de&&(()=>{const M=de.servingUnit||"g",F=de.portion,ie=pt==="portion"&&F?Xe*F.weight:parseFloat(mt)||0,ue=ie/100,ze=M==="ml"?[100,200,250,500]:[50,100,150,200],Ve=pt==="portion"&&F?`${Xe} ${F.label}${Xe!==1?"s":""} (${Math.round(ie)}${M})`:`${Math.round(ie)}${M}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:de.name}),a.jsx("button",{className:`nut-fav-star confirm${le(de.name)?" active":""}`,onClick:()=>Re({name:de.name,protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories,serving:de.servingSize,per100g:{protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories},servingUnit:de.servingUnit||"g",portion:de.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:le(de.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",M,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[de.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[de.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[de.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[de.calories," cal"]})]}),F&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:pt==="portion"?"active":"",onClick:()=>{Jt("portion"),Xe<1&&Et(1)},children:"Portions"}),a.jsxs("button",{className:pt==="weight"?"active":"",onClick:()=>{Jt("weight"),It(String(Math.round(ie)||100))},children:["Custom (",M,")"]})]}),pt==="portion"&&F?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Et(Math.max(1,Xe-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Xe}),a.jsxs("span",{className:"nut-stepper-label",children:[F.label,Xe!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(ie),M]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Et(Xe+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",M,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:mt,onChange:qe=>It(qe.target.value),onFocus:qe=>qe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:ze.map(qe=>a.jsxs("button",{className:`nut-quick-btn${mt===String(qe)?" active":""}`,onClick:()=>It(String(qe)),children:[qe,M]},qe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(de.protein*ue),"p / ",Math.round(de.carbs*ue),"c / ",Math.round(de.fats*ue),"f / ",Math.round(de.calories*ue)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>Tt(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ge({name:de.name,protein:Math.round(de.protein*ue),carbs:Math.round(de.carbs*ue),fats:Math.round(de.fats*ue),calories:Math.round(de.calories*ue),serving:Ve}),children:"Add"})]})]})})()]})}),a.jsx(Gr,{active:"nutrition"}),Wt&&a.jsx("div",{className:`toast-notification ${Wt.type}`,children:Wt.message})]})})}async function D3(s){const{type:e="workout",title:t="Workout Complete!",stats:i=[],badges:l=[],badgeImage:u,badgeDesc:d}=s,p=1080,g=1920,y=document.createElement("canvas");y.width=p,y.height=g;const b=y.getContext("2d"),E="#2a2a28",T="#ffffff",P="#A12F3A",G="#1a1a1a",q="#555555";b.fillStyle=E,b.fillRect(0,0,p,g);const z=Math.round(p*.82),K=Math.round(g*.75),W=Math.round((p-z)/2),Q=Math.round((g-K)/2),oe=28,Te=5;b.save(),b.shadowColor="rgba(0, 0, 0, 0.45)",b.shadowBlur=40,b.shadowOffsetY=10,$w(b,W,Q,z,K,oe),b.fillStyle=T,b.fill(),b.restore(),b.save(),$w(b,W,Q,z,K,oe),b.strokeStyle=P,b.lineWidth=Te,b.stroke(),b.restore();const be=220,C=50,j=52,I=68,V=10,L=36,D=48,R=30,Me=34,Ye=46,ee=30,Se=28;b.font=`bold ${j}px 'Orbitron', sans-serif`;const Ie=Xc(b,t.toUpperCase(),z-100);b.font=`500 ${L}px 'Montserrat', sans-serif`;let Ce=[];e==="badge"&&d?Ce=Xc(b,d,z-120):e==="badge"&&l.length>0?Ce=Xc(b,l.join("    "),z-120):i.length>0&&(Ce=Xc(b,i.map(ft=>`${ft.value} ${ft.label}`).join("    "),z-120));const X=e==="badge"?"I just earned a badge on Core Buddy ":e==="habits"?"I just completed my daily habits with Core Buddy ":"I just completed a workout using Core Buddy ";b.font=`bold ${Me}px 'Montserrat', sans-serif`;const O=Xc(b,X,z-80);let re=Ie.length*I;Ce.length>0&&(re+=V+Ce.length*D),re+=R+O.length*Ye,re+=ee+Se;const ke=Q+K-60-re,Ee=Q+40,Pe=ke-C,et=p/2,Oe=(Ee+Pe)/2,Lt=e==="badge"&&u?u:"/Logo.webp";b.save();const Xt=e==="badge"?"rgba(255, 193, 7, 0.15)":"rgba(161, 47, 58, 0.12)",In=b.createRadialGradient(et,Oe,be*.6,et,Oe,be*1.5);In.addColorStop(0,Xt),In.addColorStop(1,"rgba(0, 0, 0, 0)"),b.fillStyle=In,b.fillRect(et-be*1.5,Oe-be*1.5,be*3,be*3),b.restore(),b.beginPath(),b.arc(et,Oe,be+6,0,Math.PI*2),b.fillStyle=T,b.fill();const Ct=e==="badge"?"#ffc107":P;b.beginPath(),b.arc(et,Oe,be,0,Math.PI*2),b.strokeStyle=Ct,b.lineWidth=5,b.stroke();try{const ft=await L3(Lt);b.save(),b.beginPath(),b.arc(et,Oe,be-6,0,Math.PI*2),b.clip();const lt=(be-6)*2;b.drawImage(ft,et-be+6,Oe-be+6,lt,lt),b.restore()}catch{b.textAlign="center",b.textBaseline="middle",b.fillStyle=P,b.font="bold 80px 'Orbitron', sans-serif",b.fillText(e==="badge"?"":"MCF",et,Oe)}let nt=ke;b.textAlign="center",b.textBaseline="alphabetic",b.fillStyle=G,b.font=`bold ${j}px 'Orbitron', sans-serif`;for(const ft of Ie)b.fillText(ft,p/2,nt),nt+=I;if(Ce.length>0){nt+=V,b.fillStyle=q,b.font=`500 ${L}px 'Montserrat', sans-serif`;for(const ft of Ce)b.fillText(ft,p/2,nt),nt+=D}nt+=R,b.fillStyle=G,b.font=`bold ${Me}px 'Montserrat', sans-serif`;for(const ft of O)b.fillText(ft,p/2,nt),nt+=Ye;return nt+=ee,b.fillStyle=P,b.font=`600 ${Se}px 'Montserrat', sans-serif`,b.fillText("Make It Count with Core Buddy",p/2,nt),new Promise(ft=>{y.toBlob(lt=>ft(lt),"image/png")})}function $w(s,e,t,i,l,u){s.beginPath(),s.moveTo(e+u,t),s.lineTo(e+i-u,t),s.quadraticCurveTo(e+i,t,e+i,t+u),s.lineTo(e+i,t+l-u),s.quadraticCurveTo(e+i,t+l,e+i-u,t+l),s.lineTo(e+u,t+l),s.quadraticCurveTo(e,t+l,e,t+l-u),s.lineTo(e,t+u),s.quadraticCurveTo(e,t,e+u,t),s.closePath()}function L3(s){return new Promise((e,t)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>e(i),i.onerror=t,i.src=s})}function Xc(s,e,t){if(s.measureText(e).width<=t)return[e];const i=e.split(" "),l=[];let u="";for(const d of i){const p=u?`${u} ${d}`:d;s.measureText(p).width>t&&u?(l.push(u),u=d):u=p}return u&&l.push(u),l}function O3(){const s=x.useRef(null),e=x.useCallback(()=>{if(!s.current)try{s.current=new(window.AudioContext||window.webkitAudioContext)}catch{}const u=s.current;return u?.state==="suspended"&&u.resume(),u},[]),t=x.useCallback(()=>{navigator.vibrate&&navigator.vibrate([40,60,30]);const u=e();if(!u)return;const d=u.currentTime,p=u.createBiquadFilter();p.type="lowpass",p.frequency.value=500,p.Q.value=.7,p.connect(u.destination);const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=50,y.gain.value=.3,y.gain.setTargetAtTime(0,d+.08,.04),g.connect(y).connect(p),g.start(d),g.stop(d+.2);const b=u.createOscillator(),E=u.createGain();b.type="sine",b.frequency.value=70,E.gain.value=.2,E.gain.setTargetAtTime(0,d+.22,.04),b.connect(E).connect(p),b.start(d+.15),b.stop(d+.35)},[e]),i=x.useCallback(()=>{navigator.vibrate&&navigator.vibrate(30);const u=e();if(!u)return;const d=u.currentTime,p=u.createBiquadFilter();p.type="lowpass",p.frequency.value=500,p.Q.value=.7,p.connect(u.destination);const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=55,y.gain.value=.35,y.gain.setTargetAtTime(0,d+.08,.04),g.connect(y).connect(p),g.start(d),g.stop(d+.2)},[e]),l=x.useCallback(()=>{navigator.vibrate&&navigator.vibrate([50,80,100]);const u=e();u&&[0,.12].forEach((d,p)=>{const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=p===0?523:784,y.gain.value=.12,y.gain.setTargetAtTime(0,u.currentTime+d+.15,.02),g.connect(y).connect(u.destination),g.start(u.currentTime+d),g.stop(u.currentTime+d+.2)})},[e]);return x.useEffect(()=>()=>{s.current?.close()},[]),{tap:i,tick:t,complete:l}}const P3=2e3,Hg=42,Nl=2*Math.PI*Hg,V3=1200,Ww=["Another one in the bank!","Consistency beats everything.","You showed up  that's what counts.","Stronger every session."];function $g({title:s,subtitle:e,stats:t,onDone:i,onDismissStart:l,onShareJourney:u,userName:d,buttonLabel:p="Done",holdLabel:g="Hold To Complete Session",shareType:y="workout",hideShare:b=!1}){const[E,T]=x.useState("hold"),[P,G]=x.useState(!1),[q,z]=x.useState(0),[K,W]=x.useState(!1),[Q,oe]=x.useState(!1),[Te,be]=x.useState(null),C=O3(),j=x.useRef(null),I=x.useRef(null),V=x.useRef(null),L=x.useRef(null),D=x.useRef(!1),R=x.useRef(!1),Me=x.useRef(0),Ye=x.useRef(Ww[Math.floor(Math.random()*Ww.length)]),ee=x.useRef([...Array(80)].map((xe,Ee)=>({x:5+Math.random()*90,delay:Math.random()*3.5,color:["#A12F3A","#ffffff","#000000"][Ee%3],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.8+Math.random()*2,width:4+Math.random()*6,height:4+Math.random()*8,shape:Ee%3}))),Se=x.useCallback(()=>{if(D.current)return;D.current=!0,R.current=!1,Me.current=0,G(!0),z(0),L.current=performance.now(),C.tap(),j.current&&(j.current.style.strokeDashoffset=Nl);const xe=Ee=>{const Pe=Ee-L.current,et=Math.min(Pe/P3,1);if(j.current&&(j.current.style.strokeDashoffset=Nl-et*Nl),I.current){const Oe=8*(1-et),Lt=1-et,Xt=1+et*.15;I.current.style.filter=`blur(${Oe}px) grayscale(${Lt})`,I.current.style.transform=`scale(${Xt})`}z(et),Pe-Me.current>=V3&&(Me.current=Pe,C.tick()),et<1?V.current=requestAnimationFrame(xe):(D.current=!1,R.current=!0,V.current=null,G(!1),z(1),C.complete(),T("celebrate"))};V.current=requestAnimationFrame(xe)},[C]),Ie=x.useCallback(()=>{D.current&&(D.current=!1,V.current&&(cancelAnimationFrame(V.current),V.current=null),j.current&&(j.current.style.strokeDashoffset=Nl),I.current&&(I.current.style.filter="",I.current.style.transform=""),G(!1),z(0))},[]),Ce=x.useCallback(()=>{W(!0),l?.(),setTimeout(()=>{i?.()},300)},[i,l]),X=x.useCallback(()=>{const xe=[s||"Workout Complete!"];return e&&xe.push(e),t?.length&&xe.push(t.map(Ee=>`${Ee.value} ${Ee.label}`).join(" | ")),xe.push("#MindCoreFitness"),xe.join(`
`)},[s,e,t]),O=x.useCallback(async()=>{if(!(Q||!u))try{await u({type:y==="habits"?"habits_summary":"workout_summary",title:s||"Workout Complete!",subtitle:e,stats:t||[],quote:Ye.current}),oe(!0),be("Posted to Journey!"),setTimeout(()=>be(null),2500)}catch(xe){console.error("Journey post failed:",xe),be(xe?.message||"Failed to post"),setTimeout(()=>be(null),3500)}},[Q,u,s,e,t]),[re,we]=x.useState(!1),ke=x.useCallback(async()=>{we(!0);try{const xe=await D3({type:y||"workout",title:s||"Workout Complete!",subtitle:e,stats:t||[],quote:Ye.current,userName:d}),Ee=X();if(navigator.share&&navigator.canShare?.({files:[new File([xe],"workout.png",{type:"image/png"})]})){const Pe=new File([xe],"workout.png",{type:"image/png"});await navigator.share({title:"Mind Core Fitness",text:Ee,files:[Pe]})}else navigator.share?await navigator.share({title:"Mind Core Fitness",text:Ee}):(await navigator.clipboard.writeText(Ee),be("Copied to clipboard!"),setTimeout(()=>be(null),2500))}catch{try{await navigator.clipboard.writeText(X()),be("Copied to clipboard!"),setTimeout(()=>be(null),2500)}catch{}}finally{we(!1)}},[s,e,t,d,X]);return E==="hold"?a.jsxs("div",{className:"wc-hold-page",children:[a.jsx("div",{className:"wc-hold-glow","aria-hidden":"true"}),a.jsx("p",{className:"wc-hold-label",children:g}),a.jsxs("div",{className:`wc-hold-ring-touch ${P?"wc-holding":""}`,onPointerDown:xe=>{xe.preventDefault(),Se()},onPointerUp:Ie,onPointerLeave:Ie,onPointerCancel:Ie,onClick:xe=>{xe.stopPropagation(),R.current&&(R.current=!1)},role:"button",tabIndex:0,"aria-label":"Press and hold to finish workout",onKeyDown:xe=>{(xe.key==="Enter"||xe.key===" ")&&(xe.preventDefault(),C.complete(),T("celebrate"))},children:[a.jsx("div",{className:"wc-hold-ring-glow","aria-hidden":"true"}),a.jsxs("svg",{className:"wc-hold-ring-svg",viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wc-hold-ring-track",cx:"50",cy:"50",r:Hg}),a.jsx("circle",{className:"wc-hold-ring-fill",ref:j,cx:"50",cy:"50",r:Hg,style:{strokeDasharray:Nl,strokeDashoffset:Nl}})]}),a.jsx("img",{ref:I,src:"/Logo.webp",alt:"Mind Core Fitness",className:"wc-hold-logo",draggable:!1})]})]}):a.jsxs("div",{className:`wc-celeb-overlay ${K?"wc-celeb-dismissing":""}`,children:[a.jsx("div",{className:"wc-celeb-confetti","aria-hidden":"true",children:ee.current.map((xe,Ee)=>a.jsx("span",{className:`wc-celeb-confetti-piece wc-confetti-shape-${xe.shape}`,style:{"--x":`${xe.x}%`,"--delay":`${xe.delay}s`,"--color":xe.color,"--drift":`${xe.drift}px`,"--spin":`${xe.spin}deg`,"--duration":`${xe.duration}s`,width:`${xe.width}px`,height:`${xe.height}px`}},Ee))}),a.jsxs("div",{className:"wc-celeb-content",children:[a.jsx("div",{className:"wc-celeb-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wc-celeb-logo-img"})}),a.jsx("h2",{className:"wc-celeb-heading",children:s||"Congratulations!"}),e&&a.jsx("p",{className:"wc-celeb-subtext",children:e}),a.jsx("p",{className:"wc-celeb-quote",children:Ye.current}),t&&t.length>0&&a.jsx("div",{className:"wc-celeb-stats-row",children:t.map((xe,Ee)=>a.jsxs("div",{className:"wc-celeb-stat",children:[a.jsx("span",{className:"wc-celeb-stat-val",children:xe.value}),a.jsx("span",{className:"wc-celeb-stat-label",children:xe.label})]},Ee))}),!b&&a.jsxs("div",{className:"wc-share-row",children:[u&&a.jsxs("button",{className:`wc-share-btn wc-share-journey ${Q?"wc-share-done":""}`,onClick:O,disabled:Q,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20h9"}),a.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4Z"})]}),Q?"Posted!":"Post to Journey"]}),a.jsxs("button",{className:"wc-share-btn wc-share-external",onClick:ke,disabled:re,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"18",cy:"5",r:"3"}),a.jsx("circle",{cx:"6",cy:"12",r:"3"}),a.jsx("circle",{cx:"18",cy:"19",r:"3"}),a.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),a.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),re?"Generating...":"Share"]})]}),a.jsx("button",{className:"wc-celeb-btn",onClick:Ce,children:p}),Te&&a.jsx("div",{className:"wc-share-toast",children:Te})]})]})}const Gw="/login/assets/randomiser-glq9YJkL.jpg",Kw="/login/assets/programme-card-workout-CnNzTYkz.webp",U3="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",B3="/login/assets/muscle-group-arms-C9AdZL4-.png",z3="/login/assets/arms-bicep-BUrmT1o-.png",F3="/login/assets/arms-tricep-D9tAnFnS.png",q3="/login/assets/arms-full-arms-BY3TvpJm.png",H3="/login/assets/muscle-group-chest-Cxfuc7XI.png",$3="/login/assets/chest-strength-BR4BAFTH.png",W3="/login/assets/chest-hypertrophy-B8yNrvjB.png",G3="/login/assets/chest-endurance-e-OSWtWO.png",K3="/login/assets/muscle-group-shoulders-DibNtCLF.png",Y3="/login/assets/shoulders-strength-CKlZBF5A.png",Q3="/login/assets/shoulders-hypertrophy-BUd76jiS.png",X3="/login/assets/shoulders-endurance-HuqNG5rD.png",J3="/login/assets/muscle-group-core-CPR-bdRg.png",Z3="/login/assets/core-lower-abs-TVcqGMFJ.png",e5="/login/assets/core-obliques-rotation-Djb7Qlbk.png",t5="/login/assets/core-weighted-core-4Kwh9mTv.png",n5="/login/assets/muscle-group-back-8JPV-YUo.png",s5="/login/assets/back-strength-BmSRxnwo.png",r5="/login/assets/back-hypertrophy-CXHmsnCz.png",i5="/login/assets/back-endurance-C8qJ8l5I.png",a5="/login/assets/muscle-group-legs-B8jcbdov.png",o5="/login/assets/legs-quads-DbnfsebI.png",l5="/login/assets/legs-hamstrings-glutes-BrfsvvzX.png",c5="/login/assets/legs-power-plyo-D2qBXeUR.png",u5=60,Zp=5,d5={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},h5={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},eg={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},tg=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:U3},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Jc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:B3},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z",image:H3},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z",image:n5},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",image:K3},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z",image:a5},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",image:J3}],Yw={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",image:$3,level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",image:W3,level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",image:G3,level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",image:s5,level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",image:r5,level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",image:i5,level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",image:Y3,level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",image:Q3,level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",image:X3,level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",image:z3,level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",image:F3,level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",image:q3,level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",image:o5,level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",image:l5,level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",image:c5,level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",image:Z3,level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",image:e5,level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",image:t5,level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},ng=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],qr=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],_i=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],sg=[5,10,15,20,30],mh={core:"#e85d04",upper:"#2196f3",lower:"#4caf50",fullbody:"#9c27b0",mix:"#ff9800"},Qw=["Mix up your focus areas to build balanced strength.","Consistency beats intensity  show up and press play.","Try a new difficulty level to keep your body guessing.","Short on time? A 5-minute blast still counts.","Save your favourite combos so you can replay them anytime.","Your body adapts  switch equipment for fresh stimulus.","Rest days are growth days. Listen to your body.","Challenge yourself: go one level higher this week."];function f5(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function m5(s){const e=[...s];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function p5(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Cr(),{isDark:l,toggleTheme:u,accent:d}=Mi(),{isPremium:p,FREE_RANDOMISER_DURATIONS:g,FREE_RANDOMISER_WEEKLY_LIMIT:y}=ic(),b=Ws(),[E,T]=x.useState("randomiser_hub"),[P,G]=x.useState(["bodyweight"]),[q,z]=x.useState("core"),[K,W]=x.useState("intermediate"),[Q,oe]=x.useState(p?15:5),[Te,be]=x.useState([]),[C,j]=x.useState(!1),I=x.useRef(!1),V=x.useRef([]),[L,D]=x.useState([]),[R,Me]=x.useState(2),[Ye,ee]=x.useState(_i[1]),[Se,Ie]=x.useState(1),[Ce,X]=x.useState(0),[O,re]=x.useState("work"),[we,ke]=x.useState(0),[xe,Ee]=x.useState(!1),[Pe,et]=x.useState(0),[Oe,Lt]=x.useState(!1),[Xt,In]=x.useState(!1),[Ct,nt]=x.useState(null),ft=x.useRef(null);x.useRef(null),x.useRef(null);const[lt,Mn]=x.useState(null),de=x.useCallback((w,N="info")=>{Mn({message:w,type:N}),setTimeout(()=>Mn(null),3e3)},[]),Tt=x.useCallback(async w=>{if(!t)throw new Error("Not signed in");const N=w&&typeof w=="object"&&w.type;await jr(dt(ve,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:N?"":w,type:N?w.type:"text",imageURL:null,createdAt:Ps(),likeCount:0,commentCount:0,...N?{metadata:{title:w.title||"",subtitle:w.subtitle||"",stats:w.stats||[],quote:w.quote||"",badges:w.badges||[]}}:{}})},[t]),[mt,It]=x.useState(null),[Xe,Et]=x.useState(null),[pt,Jt]=x.useState(0),[js,es]=x.useState(0),[Wt,se]=x.useState([]),[Ne,ht]=x.useState(""),[gt,st]=x.useState(""),[He,tt]=x.useState(!1),[Fe,Zt]=x.useState(0),[nn,jn]=x.useState(!1),[Dn,Hn]=x.useState({}),zt=x.useRef(null),Ln=x.useRef(null),[_n,sn]=x.useState(0),[fr,le]=x.useState(0),[Re,Ge]=x.useState(0),[ct,at]=x.useState(0),[mn,kn]=x.useState(0),[ln,pn]=x.useState(0),[Ss,ts]=x.useState({beginner:0,intermediate:0,advanced:0}),os=p?sg:sg.filter(w=>g.includes(w)),Gt=!p&&_n>=y,[En,Cs]=x.useState([]),[Nr,di]=x.useState(!1),[Ar,mr]=x.useState({}),[$n,Gs]=x.useState(!1),[ls,Sn]=x.useState(!1),[On,Wn]=x.useState(""),[Ft,Kr]=x.useState(null),[Ks,cs]=x.useState([]),[Cn,Ys]=x.useState({total:0,favouriteFocus:null,streak:0}),[hi,M]=x.useState(null),[F,ie]=x.useState(""),[ue,ze]=x.useState(!1);x.useEffect(()=>{!i&&(!s||!e)&&b("/")},[s,e,i,b]),x.useEffect(()=>{if(!s||!t)return;(async()=>{try{const N=dt(ve,"workoutLogs"),U=Qt(N,wt("clientId","==",t.id)),Z=(await $t(U)).docs.map(yt=>yt.data()),pe=Z.filter(yt=>yt.type!=="programme");at(pe.length);const fe=pe.reduce((yt,Kt)=>yt+(Kt.duration||0),0);kn(fe);const Ae={beginner:0,intermediate:0,advanced:0};pe.forEach(yt=>{yt.level&&Ae[yt.level]!==void 0&&Ae[yt.level]++}),ts(Ae);const De=new Date,Je=De.getDay(),Be=Je===0?-6:1-Je,Nt=new Date(De);Nt.setDate(De.getDate()+Be),Nt.setHours(0,0,0,0);const _s=Nt.getTime(),ot=Z.filter(yt=>{const Kt=yt.completedAt;return Kt?(Kt.toDate?Kt.toDate().getTime():new Date(Kt).getTime())>=_s:!1});sn(ot.filter(yt=>yt.type!=="programme").length);let gn=0;if(t)try{const yt=await qs(We(ve,"clientProgrammes",t.id));if(yt.exists()){const Kt=yt.data(),rn=Kt.templateId;gn=ot.filter(Nn=>Nn.type==="programme"&&Nn.programmeId===rn).length,M(rn);const Fn=tg.find(Nn=>Nn.id===rn);Fn&&ie(Fn.name);const Kn=d5[rn];if(Kn){const Nn=Object.keys(Kt.completedSessions||{}).length,Qs=Kn.duration*Kn.daysPerWeek;Ge(Qs>0?Math.round(Nn/Qs*100):0)}}else M(null),ie(""),Ge(0)}catch{}le(gn);const dn=pe.map(yt=>yt.completedAt).filter(Boolean).map(yt=>yt.toDate?yt.toDate().getTime():new Date(yt).getTime()).sort((yt,Kt)=>Kt-yt);if(dn.length===0)pn(0);else{const yt=new Set;dn.forEach(Qs=>{const rr=new Date(Qs),Oi=rr.getDay(),Mr=Oi===0?-6:1-Oi,pi=new Date(rr);pi.setDate(rr.getDate()+Mr),pi.setHours(0,0,0,0),yt.add(pi.getTime())});const Kt=[...yt].sort((Qs,rr)=>rr-Qs);let rn=0;const Fn=new Date(De),Kn=De.getDay()===0?-6:1-De.getDay();Fn.setDate(De.getDate()+Kn),Fn.setHours(0,0,0,0);let Nn=Fn.getTime();Kt.includes(Nn)||(Nn-=10080*60*1e3);for(let Qs=0;Qs<200&&Kt.includes(Nn);Qs++)rn++,Nn-=10080*60*1e3;pn(rn)}}catch(N){console.error("Error loading workout stats:",N)}finally{ze(!0)}})()},[s,t,E]),x.useEffect(()=>{if(!s||!t)return;(async()=>{try{const N=Qt(dt(ve,"savedWorkouts"),wt("clientId","==",t.id)),$=(await $t(N)).docs.map(Z=>({id:Z.id,...Z.data()}));$.sort((Z,pe)=>{const fe=Z.savedAt?.toMillis?.()||Z.savedAt?.seconds*1e3||0;return(pe.savedAt?.toMillis?.()||pe.savedAt?.seconds*1e3||0)-fe}),Cs($)}catch(N){console.error("Error loading saved workouts:",N)}finally{di(!0)}})()},[s,t]),x.useEffect(()=>{if(!s||!t)return;(async()=>{try{const N=Qt(dt(ve,"workoutLogs"),wt("clientId","==",t.id),ku("completedAt","desc"),Eu(20)),Z=(await $t(N)).docs.map(ot=>ot.data()).filter(ot=>ot.type!=="programme"&&ot.type!=="muscle_group");cs(Z.slice(0,3));const pe=Z.length,fe={};Z.forEach(ot=>{ot.focus&&(fe[ot.focus]=(fe[ot.focus]||0)+1)});const Ae=Object.keys(fe).sort((ot,gn)=>fe[gn]-fe[ot])[0]||null;let De=0;if(Z.length>0){const ot=new Set;Z.forEach(yt=>{const Kt=yt.completedAt?.toDate?yt.completedAt.toDate():yt.completedAt?new Date(yt.completedAt):null;Kt&&ot.add(new Date(Kt.getFullYear(),Kt.getMonth(),Kt.getDate()).toDateString())});const gn=new Date;gn.setHours(0,0,0,0);let dn=new Date(gn);for(ot.has(dn.toDateString())||dn.setDate(dn.getDate()-1);ot.has(dn.toDateString());)De++,dn.setDate(dn.getDate()-1)}Ys({total:pe,favouriteFocus:Ae,streak:De});const Je={core:null,upper:null,lower:null,fullbody:null};Z.forEach(ot=>{if(ot.focus&&Je[ot.focus]===null&&ot.completedAt){const gn=ot.completedAt.toDate?ot.completedAt.toDate():new Date(ot.completedAt);Je[ot.focus]=gn}});let Be=null,Nt=new Date;const _s=["core","upper","lower","fullbody"];for(const ot of _s){if(Je[ot]===null){const gn=qr.find(dn=>dn.key===ot)?.label||ot;Be={focus:ot,label:gn,daysAgo:null,message:`You haven't tried ${gn} yet`};break}if(Je[ot]<Nt){Nt=Je[ot];const gn=Math.floor((Date.now()-Je[ot].getTime())/864e5);if(gn>=5){const dn=qr.find(yt=>yt.key===ot)?.label||ot;Be={focus:ot,label:dn,daysAgo:gn,message:`${dn}  ${gn} days ago`}}}}Kr(Be)}catch(N){console.error("Error loading recent workouts:",N)}})()},[s,t,E]);const Ve=async w=>{if(!(!s||!t||L.length===0)){Gs(!0);try{const N=qr.find(Z=>Z.key===q)?.label||q,U=w||`${N} ${Q}min`,$=await jr(dt(ve,"savedWorkouts"),{clientId:t.id,name:U,equipment:P,focus:q,level:K,duration:Q,exercises:L.map(Z=>({name:Z.name,videoUrl:Z.videoUrl,isGif:Z.isGif||!1})),rounds:R,savedAt:Rt.now()});Cs(Z=>[{id:$.id,clientId:t.id,name:U,equipment:P,focus:q,level:K,duration:Q,exercises:L.map(pe=>({name:pe.name,videoUrl:pe.videoUrl,isGif:pe.isGif||!1})),rounds:R,savedAt:Rt.now()},...Z]),de("Workout saved!","success")}catch(N){console.error("Error saving workout:",N),de("Failed to save workout","error")}finally{Gs(!1),Sn(!1),Wn("")}}},qe=async w=>{try{await Er(We(ve,"savedWorkouts",w)),Cs(N=>N.filter(U=>U.id!==w)),de("Workout removed","info")}catch(N){console.error("Error deleting saved workout:",N),de("Failed to remove workout","error")}},qt=w=>{G(w.equipment||["bodyweight"]),z(w.focus||"core"),W(w.level||"intermediate"),oe(w.duration||15);const N=_i.find(U=>U.key===(w.level||"intermediate"));ee(N),D(w.exercises||[]),Me(w.rounds||2),T("preview")},Ke=async()=>{const w=JSON.parse(localStorage.getItem("mcf_last_randomiser")||"null");G(w?.equipment||["bodyweight"]),z(w?.focus||"core"),W(w?.level||"intermediate"),oe(w?.duration||15),setTimeout(()=>Pn(),50)},zn=()=>{localStorage.setItem("mcf_last_randomiser",JSON.stringify({equipment:P,focus:q,level:K,duration:Q}))};localStorage.getItem("mcf_last_randomiser");const Gn=()=>{const w=[];let N;q==="mix"?N=["core","upper","lower"]:q==="fullbody"?N=["upper","lower"]:N=[q];for(const U of P)for(const $ of N)w.push(`exercises/${U}/${$}`);return w},Ns=async()=>{if(I.current){for(;I.current;)await new Promise(w=>setTimeout(w,200));return V.current}I.current=!0,j(!0);try{const w=Gn(),N=[];for(const pe of w)try{const fe=Wa(Ga,pe),Ae=await Fw(fe);N.push(...Ae.items)}catch{console.warn(`Folder ${pe} not found, skipping.`)}if(N.length===0&&P.includes("bodyweight")&&q==="core")try{const pe=Wa(Ga,"core"),fe=await Fw(pe);N.push(...fe.items)}catch{console.warn("Legacy core/ folder not found either.")}if(N.length===0){const pe=P.map(Ae=>ng.find(De=>De.key===Ae)?.label).join(" + "),fe=qr.find(Ae=>Ae.key===q)?.label;return de(`No exercises found for ${pe} / ${fe}. Upload videos to Firebase Storage.`,"error"),I.current=!1,j(!1),[]}const U=new Set,$=N.filter(pe=>{const fe=pe.name.replace(/\.(mp4|gif)$/i,"");return U.has(fe)?!1:(U.add(fe),!0)}),Z=await Promise.all($.map(async pe=>{const fe=await Lo(pe),Ae=f5(pe.name.replace(/\.(mp4|gif)$/i,"")),De=/\.gif$/i.test(pe.name);return{name:Ae,videoUrl:fe,isGif:De}}));return V.current=Z,be(Z),I.current=!1,j(!1),Z}catch(w){console.error("Error loading exercises:",w);const N=w.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${w.message||w.code||"Unknown error"}`;return de(N,"error"),I.current=!1,j(!1),[]}},Pn=async()=>{if(Gt)return;zn(),T("spinning"),V.current=[];const w=await Ns();if(w.length===0){T("setup");return}const N=_i.find(Je=>Je.key===K);ee(N);const U=N.work+N.rest,$=Q*60,Z=Math.floor($/U);let pe,fe;Z<=6?(pe=Math.max(3,Math.floor(Z/2)),fe=Math.floor(Z/pe)):Z<=12?(pe=Math.min(6,Math.floor(Z/2)),fe=Math.floor(Z/pe)):(pe=Math.min(10,Math.floor(Z/2)),fe=Math.floor(Z/pe)),fe=Math.max(2,fe);const Ae=m5(w),De=Ae.slice(0,Math.min(pe,Ae.length));D(De),Me(fe),setTimeout(()=>T("preview"),2e3)},us=()=>{T("countdown"),et(3)};x.useEffect(()=>{if(E!=="countdown")return;if(Pe<=0){T("workout"),Ie(1),X(0),re("work"),ke(Ye.work),Ee(!1),Li();return}As();const w=setTimeout(()=>et(N=>N-1),1e3);return()=>clearTimeout(w)},[Pe,E]),x.useEffect(()=>{if(E!=="workout"||xe)return;if(we<=0){Yr();return}we<=3&&As();const w=setTimeout(()=>ke(N=>N-1),1e3);return()=>clearTimeout(w)},[we,E,xe]);const Yr=()=>{if(O==="work")re("rest"),ke(Ye.rest);else{const w=Ce+1;if(w>=L.length){const N=Se+1;if(N>R){Lt(!0),Di();return}Ie(N),X(0)}else X(w);re("work"),ke(Ye.work),Li()}},Di=async()=>{if(s)try{await jr(dt(ve,"workoutLogs"),{clientId:t.id,level:K,duration:Q,equipment:P,focus:q,exerciseCount:L.length,rounds:R,exercises:L.map(w=>w.name),completedAt:Rt.now()}),typeof fbq=="function"&&fbq("trackCustom","WorkoutCompleted",{duration:Q,level:K,focus_area:q,exercise_count:L.length}),sn(w=>w+1),at(w=>w+1),kn(w=>w+Q),ts(w=>({...w,[K]:(w[K]||0)+1}))}catch(w){console.error("Error saving workout log:",w)}},pr=async(w,N,U)=>{if(!(!t||!N))try{const $=t.id,Z=await qs(We(ve,"coreBuddyPBs",$)),fe=(Z.exists()?Z.data():null)?.exercises||{},Ae=fe[w];let De=!1;if(Ae?(N>(Ae.weight||0)||N===(Ae.weight||0)&&U>(Ae.reps||0))&&(De=!0):De=!0,De){const Je={...fe,[w]:{weight:N,reps:U,achievedAt:Rt.now()}};await Ts(We(ve,"coreBuddyPBs",$),{clientId:t.id,exercises:Je,updatedAt:Rt.now()}),de(`New PB! ${N}kg  ${U} reps`,"success"),As()}}catch($){console.error("Error checking PB:",$)}},pa=async w=>{if(Et(w),w.interval){const $=[];for(const Z of w.exercises){let pe=null,fe=!1;if(Z.storagePath)try{const Ae=Wa(Ga,Z.storagePath);pe=await Lo(Ae),fe=/\.gif$/i.test(Z.storagePath)}catch{}$.push({name:Z.name,videoUrl:pe,isGif:fe})}D($),Me(w.rounds),ee({work:w.work,rest:w.rest}),T("preview");return}const N={};for(const $ of w.exercises)if($.storagePath)try{const Z=Wa(Ga,$.storagePath);N[$.name]={url:await Lo(Z),isGif:/\.gif$/i.test($.storagePath)}}catch{}Hn(N);const U=w.exercises.map($=>({name:$.name,type:$.type,targetSets:$.sets,targetReps:$.reps||0,targetTime:$.time||0,sets:[]}));se(U),Jt(0),es(0),ht(""),st(""),jn(!1),tt(!1),Zt(0),setMgSessionBadges([]),setMgBadgeCelebration(null),T("muscle_workout")},Rr=()=>{const w=zt.current;w&&(w.paused?(w.play(),jn(!0)):(w.pause(),jn(!1)))};x.useEffect(()=>{if(E!=="muscle_workout"||!He||Fe<=0){E==="muscle_workout"&&He&&Fe<=0&&(tt(!1),As());return}return Ln.current=setTimeout(()=>Zt(w=>w-1),1e3),()=>clearTimeout(Ln.current)},[E,He,Fe]);const xs=async()=>{const w=Wt[pt];let N={};if(w.type==="weighted"){const Z=parseFloat(Ne)||0,pe=parseInt(gt)||0;if(pe===0){de("Enter your reps","error");return}N={weight:Z,reps:pe}}else if(w.type==="reps"){const Z=parseInt(gt)||0;if(Z===0){de("Enter your reps","error");return}N={reps:Z}}else if(w.type==="timed"){const Z=w.targetTime-Fe;N={time:Math.max(Z,1)}}const U=[...Wt];U[pt]={...w,sets:[...w.sets,N]},se(U),w.type==="weighted"&&N.weight>0&&await pr(w.name,N.weight,N.reps);const $=w.sets.length+1;if($<w.targetSets)es($),st(""),tt(!1),Zt(0);else if(pt+1<Wt.length){const Z=pt+1;Jt(Z),es(0),ht(""),st(""),jn(!1),tt(!1),Zt(0)}else await fi(U),In(!0)},fi=async w=>{if(!(!s||!t))try{const N=w.reduce((U,$)=>U+$.sets.length,0);await jr(dt(ve,"workoutLogs"),{clientId:t.id,type:"muscle_group",muscleGroup:mt,sessionId:Xe?.id,sessionName:Xe?.name,exerciseCount:w.length,totalSets:N,duration:Math.round(N*1.5),exercises:w.map(U=>({name:U.name,type:U.type,sets:U.sets})),completedAt:Rt.now()})}catch(N){console.error("Error saving muscle group workout log:",N)}},Qr=x.useRef(null),Xr=()=>(Qr.current||(Qr.current=new(window.AudioContext||window.webkitAudioContext)),Qr.current),As=()=>{try{const w=Xr(),N=w.createOscillator(),U=w.createGain();N.connect(U),U.connect(w.destination),N.frequency.value=880,U.gain.value=.3,N.start(w.currentTime),N.stop(w.currentTime+.15)}catch{}},Li=()=>{try{const w=Xr(),N=w.createOscillator(),U=w.createGain();N.connect(U),U.connect(w.destination),N.frequency.value=1200,U.gain.value=.4,N.start(w.currentTime),N.stop(w.currentTime+.3)}catch{}};x.useEffect(()=>{if(E!=="workout"||O!=="work"||!L[Ce]?.isGif)return;const N=setInterval(()=>{const U=ft.current;if(!U)return;const $=U.getAttribute("src");U.removeAttribute("src"),setTimeout(()=>{ft.current&&ft.current.setAttribute("src",$)},0)},4e3);return()=>clearInterval(N)},[E,O,Ce,Se,L]);const Ir=(w,N,U)=>{const $=Math.round(w/N*u5);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:i3.map((Z,pe)=>a.jsx("line",{x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,className:pe<$?`wk-tick-filled ${U}`:"wk-tick-empty",strokeWidth:Z.thick?"3":"2"},pe))})},mi=()=>{const w=L.length*R;return((Se-1)*L.length+Ce+(O==="rest"?.5:0))/w},ns=lt&&a.jsx("div",{className:`toast-notification ${lt.type}`,children:lt.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(E==="menu")return a.jsx(Xo,{children:a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>T("randomiser_hub"),children:a.jsx("img",{src:Gw,alt:"Randomise Workout",className:"wk-hero-bg"})}),!p&&a.jsxs("button",{className:"wk-hero-card wk-free-card-premium",onClick:()=>b("/upgrade"),children:[a.jsx("img",{src:Kw,alt:"Programmes",className:"wk-hero-bg"}),a.jsx("div",{className:"wk-free-card-overlay"}),a.jsxs("div",{className:"wk-free-card-content",children:[a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{className:"wk-free-card-label",children:"Unlock Full Access"})]})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[tg.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:tg.map((w,N)=>w.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>b("/client/core-buddy/programmes",{state:{templateId:w.id}}),style:{animationDelay:`${N*.06}s`},children:[a.jsx("img",{src:w.image,alt:w.name,className:"wk-prog-img"}),N===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},w.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>b("/client/core-buddy/programmes",{state:{templateId:w.id}}),style:{animationDelay:`${N*.06}s`},children:[a.jsx("img",{src:Kw,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:h5[w.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[w.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:w.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:w.name.toUpperCase()}),a.jsxs("p",{children:[w.daysPerWeek,"x per week  ",w.focus==="fullbody"?"Full Body":w.focus.charAt(0).toUpperCase()+w.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),N===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},w.id))})})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[Jc.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:Jc.map((w,N)=>a.jsx("button",{className:`wk-muscle-hero-card${w.image?" wk-muscle-thumb":""}`,onClick:()=>{It(w.key),T("muscle_sessions")},style:{animationDelay:`${N*.05}s`},children:w.image?a.jsx("img",{src:w.image,alt:w.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:Gw,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:eg[w.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:w.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:w.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[Yw[w.key]?.length||0," sessions"]})]})]})]})},w.key))})]})]}),a.jsx(Gr,{active:"workouts"}),ns]})});if(E==="randomiser_hub"){const w=JSON.parse(localStorage.getItem("mcf_last_randomiser")||"null")||{focus:"core",level:"intermediate",duration:15},N=qr.find($=>$.key===w.focus)?.label||w.focus,U=_i.find($=>$.key===w.level)?.label||w.level;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-hub-heading wk-hub-heading-hero",children:[a.jsx("div",{className:"wk-hub-circle-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-hub-circle-logo"})}),a.jsx("h2",{children:"Randomiser"}),a.jsx("p",{children:"Generate, save & replay workouts"})]}),a.jsxs("div",{className:"wk-hub-launch-zone",children:[Cn.total>0&&a.jsxs("div",{className:"wk-hub-stats",children:[a.jsxs("div",{className:"wk-hub-stat",children:[a.jsx("span",{className:"wk-hub-stat-value",children:Cn.total}),a.jsx("span",{className:"wk-hub-stat-label",children:"Workouts"})]}),Cn.streak>0&&a.jsxs("div",{className:"wk-hub-stat",children:[a.jsxs("span",{className:"wk-hub-stat-value",children:[Cn.streak,a.jsx("small",{children:"d"})]}),a.jsx("span",{className:"wk-hub-stat-label",children:"Streak"})]}),Cn.favouriteFocus&&a.jsxs("div",{className:"wk-hub-stat",children:[a.jsx("span",{className:"wk-hub-stat-value wk-hub-stat-focus",style:{color:mh[Cn.favouriteFocus]||"var(--color-primary)"},children:qr.find($=>$.key===Cn.favouriteFocus)?.label||Cn.favouriteFocus}),a.jsx("span",{className:"wk-hub-stat-label",children:"Top Focus"})]})]}),a.jsxs("div",{className:"wk-hub-actions",children:[a.jsxs("button",{className:"wk-hub-action-btn wk-hub-new wk-hub-new-glow",onClick:()=>T("setup"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New Workout"]}),a.jsxs("button",{className:"wk-hub-action-btn wk-hub-quick",onClick:Ke,disabled:Gt,children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),"Quick Start",a.jsxs("span",{className:"wk-hub-quick-meta",children:[N,"  ",U,"  ",w.duration,"min"]})]})]}),Ft&&a.jsxs("button",{className:"wk-hub-suggestion",onClick:()=>{z(Ft.focus),T("setup")},children:[a.jsx("svg",{className:"wk-hub-suggestion-bulb",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),a.jsxs("div",{className:"wk-hub-suggestion-info",children:[a.jsx("span",{className:"wk-hub-suggestion-label",children:Ft.message}),a.jsx("span",{className:"wk-hub-suggestion-cta",children:"Tap to set up "})]}),a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"wk-hub-tip",children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),Qw[Math.floor(Date.now()/864e5)%Qw.length]]})]}),p&&a.jsxs("div",{className:"wk-hub-section wk-hub-section--saved",children:[a.jsxs("h3",{className:"wk-hub-section-title",children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Saved Workouts",En.length>0&&a.jsx("span",{className:"wk-hub-count",children:En.length})]}),Nr?En.length===0?a.jsxs("div",{className:"wk-hub-empty wk-hub-empty-enhanced",children:[a.jsx("svg",{className:"wk-hub-empty-icon",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),a.jsx("p",{children:a.jsx("strong",{children:"No saved workouts yet"})}),a.jsx("p",{className:"wk-hub-empty-sub",children:"Generate a workout and hit save to stash it here for quick replay."})]}):a.jsx("div",{className:"wk-hub-saved-categories",children:qr.map($=>{const Z=En.filter(fe=>fe.focus===$.key);if(Z.length===0)return null;const pe=Ar[$.key]||!1;return a.jsxs("div",{className:"wk-hub-saved-cat",children:[a.jsxs("button",{className:`wk-hub-saved-cat-header${pe?" wk-hub-saved-cat-open":""}`,style:{"--cat-color":mh[$.key]||"var(--color-primary)"},onClick:()=>mr(fe=>({...fe,[$.key]:!fe[$.key]})),children:[a.jsxs("span",{className:"wk-hub-saved-cat-label",children:[a.jsx("span",{className:"wk-hub-focus-pill",style:{"--pill-color":mh[$.key]||"var(--color-primary)"},children:$.label}),a.jsx("span",{className:"wk-hub-saved-cat-count",children:Z.length})]}),a.jsx("svg",{className:`wk-hub-saved-cat-chevron${pe?" wk-hub-saved-cat-chevron-open":""}`,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),pe&&a.jsx("div",{className:"wk-hub-saved-list",children:Z.map((fe,Ae)=>{const De=(fe.equipment||[]).map(Be=>ng.find(Nt=>Nt.key===Be)?.label||Be).join(", "),Je=_i.find(Be=>Be.key===fe.level)?.label||fe.level;return a.jsxs("div",{className:"wk-hub-saved-card",style:{animationDelay:`${Ae*.05}s`},children:[a.jsxs("button",{className:"wk-hub-saved-main",onClick:()=>qt(fe),children:[a.jsxs("div",{className:"wk-hub-saved-info",children:[a.jsx("span",{className:"wk-hub-saved-name",children:fe.name}),a.jsx("span",{className:"wk-hub-saved-tags",children:a.jsxs("span",{className:"wk-hub-saved-meta",children:[Je,"  ",fe.duration,"min  ",(fe.exercises||[]).length," ex"]})}),De&&a.jsx("span",{className:"wk-hub-saved-equip",children:De})]}),a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]}),a.jsx("button",{className:"wk-hub-saved-delete",onClick:()=>qe(fe.id),"aria-label":"Remove saved workout",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"3 6 5 6 21 6"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]},fe.id)})})]},$.key)})}):a.jsx("div",{className:"wk-hub-empty",children:a.jsx("div",{className:"wk-loading-spinner"})})]}),a.jsxs("div",{className:"wk-hub-section wk-hub-section--recent",children:[a.jsxs("h3",{className:"wk-hub-section-title",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Recent"]}),Ks.length===0?a.jsxs("div",{className:"wk-hub-empty wk-hub-empty-enhanced",children:[a.jsxs("svg",{className:"wk-hub-empty-icon",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),a.jsx("p",{children:a.jsx("strong",{children:"No workouts yet"})}),a.jsx("p",{className:"wk-hub-empty-sub",children:"Complete your first workout to see your history here."})]}):a.jsx("div",{className:"wk-hub-recent-list",children:Ks.map(($,Z)=>{const pe=qr.find(Je=>Je.key===$.focus)?.label||$.focus||"",fe=_i.find(Je=>Je.key===$.level)?.label||$.level||"",Ae=$.completedAt?.toDate?$.completedAt.toDate():$.completedAt?new Date($.completedAt):null,De=Ae?(()=>{const Je=Math.floor((Date.now()-Ae.getTime())/1e3);return Je<3600?`${Math.floor(Je/60)}m ago`:Je<86400?`${Math.floor(Je/3600)}h ago`:`${Math.floor(Je/86400)}d ago`})():"";return a.jsxs("button",{className:"wk-hub-recent-card",style:{animationDelay:`${Z*.05}s`},onClick:()=>{z($.focus||"core"),W($.level||"intermediate"),oe($.duration||15),$.equipment&&G($.equipment),T("setup")},children:[a.jsx("div",{className:"wk-hub-recent-info",children:a.jsxs("span",{className:"wk-hub-recent-tags",children:[a.jsx("span",{className:"wk-hub-focus-pill",style:{"--pill-color":mh[$.focus]||"var(--color-primary)"},children:pe}),a.jsxs("span",{className:"wk-hub-recent-meta",children:[fe,"  ",$.duration||"?","min  ",$.exerciseCount||"?"," ex"]})]})}),a.jsxs("div",{className:"wk-hub-recent-action",children:[a.jsx("span",{className:"wk-hub-recent-time",children:De}),a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]},Z)})})]})]}),a.jsx(Gr,{active:"workouts"}),ns]})}if(E==="setup"){const w=qr.find(U=>U.key===q)?.label||q,N=_i.find(U=>U.key===K)?.label||K;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("randomiser_hub"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsx("div",{className:"wk-stats-row",children:[{label:"Total",value:`${ct}`,pct:ct>0?Math.min(Math.round(ct/100*100),100):0,color:"#14b8a6",size:"normal"},{label:"This Week",value:`${_n}/${Zp}`,pct:Math.round(Math.min(_n,Zp)/Zp*100),color:"var(--color-primary)",size:"large"},{label:"Wk Streak",value:`${ln}`,pct:ln>0?Math.min(Math.round(ln/12*100),100):0,color:"#38B6FF",size:"normal"}].map(U=>{const Z=2*Math.PI*38,pe=Z-U.pct/100*Z;return a.jsxs("div",{className:`wk-stat-item${U.size==="large"?" wk-stat-large":""}`,children:[a.jsxs("div",{className:"wk-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wk-stat-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"wk-stat-fill",cx:"50",cy:"50",r:38,style:{stroke:U.color},strokeDasharray:Z,strokeDashoffset:pe})]}),a.jsx("span",{className:"wk-stat-value",style:{color:U.color},children:U.value})]}),a.jsx("span",{className:"wk-stat-label",children:U.label})]},U.label)})}),a.jsxs("div",{className:"wk-setup-flow",children:[a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:qr.map(U=>a.jsxs("button",{className:`wk-equip-btn${q===U.key?" active":""}${U.key==="mix"?" wk-mix-btn":""}`,onClick:()=>{As(),z(U.key)},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:U.icon})}),a.jsx("span",{children:U.label})]},U.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:_i.map(U=>a.jsxs("button",{className:`wk-level-card wk-level-${U.key}${K===U.key?" active":""}`,onClick:()=>{As(),W(U.key)},children:[a.jsx("span",{className:"wk-level-name",children:U.label}),a.jsx("span",{className:"wk-level-desc",children:U.desc})]},U.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:sg.map(U=>{const $=!os.includes(U);return a.jsxs("button",{className:`wk-time-btn${Q===U?" active":""}${$?" locked":""}`,onClick:()=>{$||(As(),oe(U))},disabled:$,children:[a.jsx("span",{className:"wk-time-num",children:U}),a.jsx("span",{className:"wk-time-unit",children:$?a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}):"min"})]},U)})})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:ng.map(U=>{const $=P.includes(U.key);return a.jsxs("button",{className:`wk-equip-btn${$?" active":""}`,onClick:()=>{$&&P.length===1||(As(),G(Z=>$&&Z.length===1?Z:$?Z.filter(pe=>pe!==U.key):[...Z,U.key]))},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:U.icon})}),a.jsx("span",{children:U.label})]},U.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[w,"  ",N,"  ",Q," min"]})})]})]}),a.jsxs("div",{className:"wk-go-sticky",children:[Gt&&a.jsx("p",{className:"wk-free-limit-msg",children:"You've used your free workout this week. Upgrade for unlimited access."}),a.jsx("button",{className:"wk-randomise-btn",onClick:Pn,disabled:C||Gt,children:C?"Loading exercises...":Gt?"Limit Reached":"Randomise Workout"})]}),ns]})}if(E==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:r3.map((w,N)=>a.jsx("line",{x1:w.x1,y1:w.y1,x2:w.x2,y2:w.y2,className:"wk-spin-tick",strokeWidth:w.thick?"3.5":"2",style:{animationDelay:`${N*.03}s`}},N))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),ns]});if(E==="preview"){const w=Xe?.interval?{work:Xe.work,rest:Xe.rest}:_i.find(U=>U.key===K),N=L.length*R*(w.work+w.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T(Xe?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[Xe?.interval&&a.jsx("h2",{className:"mg-preview-title",children:Xe.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:L.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:R}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(N/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[w.work,"/",w.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:L.map((U,$)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${$*.06}s`},onClick:()=>nt(U),children:[a.jsx("span",{className:"wk-preview-num",children:$+1}),a.jsx("div",{className:"wk-preview-thumb",children:U.isGif?a.jsx("img",{src:U.videoUrl,alt:U.name,loading:"lazy"}):a.jsx("video",{src:`${U.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:U.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},$))}),Ct&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>nt(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:U=>U.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>nt(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Ct.isGif?a.jsx("img",{src:Ct.videoUrl,alt:Ct.name}):a.jsx("video",{src:Ct.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Ct.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!Xe?.interval&&a.jsxs("div",{className:"wk-preview-actions-row",children:[a.jsxs("button",{className:"wk-btn-secondary wk-btn-half",onClick:()=>Pn(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),p&&a.jsxs("button",{className:"wk-btn-secondary wk-btn-half",onClick:()=>Sn(!0),disabled:$n,children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save"]})]}),a.jsx("button",{className:"wk-btn-primary wk-btn-full",onClick:us,children:"Start Workout"})]}),ls&&a.jsx("div",{className:"wk-save-modal-backdrop",onClick:()=>Sn(!1),children:a.jsxs("div",{className:"wk-save-modal",onClick:U=>U.stopPropagation(),children:[a.jsx("h3",{children:"Save Workout"}),a.jsx("p",{children:"Give this workout a name (or leave blank for auto-name)"}),a.jsx("input",{type:"text",className:"wk-save-input",value:On,onChange:U=>Wn(U.target.value),placeholder:`${qr.find(U=>U.key===q)?.label||q} ${Q}min`,maxLength:40,autoFocus:!0}),a.jsxs("div",{className:"wk-save-modal-actions",children:[a.jsx("button",{className:"wk-btn-secondary",onClick:()=>Sn(!1),children:"Cancel"}),a.jsx("button",{className:"wk-btn-primary",onClick:()=>Ve(On),disabled:$n,children:$n?"Saving...":"Save"})]})]})})]})]})}if(E==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":d,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:Pe}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(E==="workout"){const w=L[Ce],N=O==="work"?Ye.work:Ye.rest,U=O==="rest"?Ce+1<L.length?L[Ce+1]:Se<R?L[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"wk-video-container",children:O==="work"?w.isGif?a.jsx("img",{ref:ft,className:"wk-video",src:w.videoUrl,alt:w.name},w.videoUrl):a.jsx("video",{className:"wk-video",src:w.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},w.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),U&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",U.name]})]})}),a.jsx("div",{className:"wk-back-row",children:a.jsxs("button",{className:"wk-back-btn",onClick:()=>{confirm("Leave workout?")&&T("randomiser_hub")},children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[Ce+1," / ",L.length]}),a.jsx("h2",{className:"wk-exercise-name",children:w.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",Se," of ",R]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[Ir(we,N,O==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:we}),a.jsx("span",{className:`wk-timer-phase ${O}`,children:O==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&T("randomiser_hub")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>Ee(!xe),children:xe?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{ke(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${mi()*100}%`}})}),Oe&&(()=>{const $=_i.find(pe=>pe.key===K),Z=L.length*R*($.work+$.rest);return a.jsxs(a.Fragment,{children:[a.jsx($g,{title:"Workout Complete!",stats:[{value:Math.ceil(Z/60),label:"Minutes"},{value:L.length*R,label:"Intervals"},{value:R,label:"Rounds"}],hideShare:!p,onShareJourney:t?Tt:null,userName:t?.name,onDismissStart:()=>T("randomiser_hub"),onDone:()=>{Lt(!1),Et(null),It(null)}}),!Xe?.interval&&a.jsxs("button",{className:"wk-complete-save-btn",onClick:()=>Sn(!0),disabled:$n,children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save This Workout"]}),ls&&a.jsx("div",{className:"wk-save-modal-backdrop",onClick:()=>Sn(!1),style:{zIndex:10001},children:a.jsxs("div",{className:"wk-save-modal",onClick:pe=>pe.stopPropagation(),children:[a.jsx("h3",{children:"Save Workout"}),a.jsx("p",{children:"Give this workout a name (or leave blank for auto-name)"}),a.jsx("input",{type:"text",className:"wk-save-input",value:On,onChange:pe=>Wn(pe.target.value),placeholder:`${qr.find(pe=>pe.key===q)?.label||q} ${Q}min`,maxLength:40,autoFocus:!0}),a.jsxs("div",{className:"wk-save-modal-actions",children:[a.jsx("button",{className:"wk-btn-secondary",onClick:()=>Sn(!1),children:"Cancel"}),a.jsx("button",{className:"wk-btn-primary",onClick:()=>Ve(On),disabled:$n,children:$n?"Saving...":"Save"})]})]})})]})})()]})}if(E==="muscle_sessions"){const w=Jc.find(U=>U.key===mt),N=Yw[mt]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("randomiser_hub"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:eg[mt]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:w?.icon})})}),a.jsxs("h2",{children:[w?.label," Workouts"]}),a.jsxs("p",{children:[N.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:N.map((U,$)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{Et(U),T("muscle_overview")},style:{animationDelay:`${$*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:U.name}),a.jsx("p",{children:U.desc}),a.jsx("div",{className:"mg-session-meta",children:U.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[U.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[U.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[U.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const Z=U.exercises.map(Ae=>Ae.sets||0),pe=Math.min(...Z),fe=Math.max(...Z);return pe===fe?`${pe} sets each`:`${pe}-${fe} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},U.id))})]}),ns]})}if(E==="muscle_overview"){const w=Xe;if(!w)return null;const N=Jc.find(U=>U.key===mt);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:w.image?void 0:{background:eg[mt]},children:w.image?a.jsx("img",{src:w.image,alt:w.name,className:"mg-overview-hero-img"}):a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:N?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:w.name}),w.level&&a.jsx("span",{className:"mg-overview-level",children:w.level})]}),a.jsx("p",{className:"mg-overview-desc",children:w.desc})]}),w.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:w.overview})]}),w.tips&&w.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:w.tips.map((U,$)=>a.jsx("li",{children:U},$))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",w.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:w.exercises.map((U,$)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:$+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:U.name}),w.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[w.work,"s work / ",w.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[U.sets," sets  ",U.reps?`${U.reps} reps`:`${U.time}s`,U.type==="weighted"&&"  weighted"]})]})]},$))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>pa(w),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),ns]})}if(E==="muscle_workout"){const w=Xe;if(!w)return null;const N=w.exercises[pt],U=Wt[pt];if(!N||!U)return null;const $=U.sets.length,Z=w.exercises.length,pe=w.exercises.reduce((Be,Nt)=>Be+(Nt.sets||0),0),Ae=Wt.reduce((Be,Nt)=>Be+Nt.sets.length,0)/pe*100,De=Dn[N.name];N.type==="timed"&&Fe===0&&!He&&$===js&&setTimeout(()=>Zt(N.time),0);const Je=$+1<N.sets?"Log Set":pt+1<Z?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Ae}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&T("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",pt+1,"/",Z]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[De?a.jsxs("div",{className:"mg-video-container",onClick:Rr,children:[De.isGif?a.jsx("img",{className:"mg-video",src:De.url,alt:N.name}):a.jsx("video",{ref:zt,className:"mg-video",src:De.url,loop:!0,muted:!0,playsInline:!0},N.name),!nn&&!De.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:N.name}),a.jsx("span",{className:`mg-ex-type-badge ${N.type}`,children:N.type==="weighted"?"Weight + Reps":N.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",$+1," of ",N.sets]}),N.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",N.reps," reps"]}),N.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",N.time,"s"]})]}),N.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:Ne,onChange:Be=>ht(Be.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:gt,onChange:Be=>st(Be.target.value),placeholder:"0"})]})]}),N.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:gt,onChange:Be=>st(Be.target.value),placeholder:"0"})]})}),N.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[Fe,"s"]})}),He?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>tt(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{Fe===0&&Zt(N.time),tt(!0)},children:Fe<N.time&&Fe>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:xs,children:Je}),U.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:U.sets.map((Be,Nt)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",Nt+1,": ",Be.weight!=null?`${Be.weight}kg  ${Be.reps}`:Be.reps!=null?`${Be.reps} reps`:`${Be.time}s`]})]},Nt))})]})]}),ns,Xt&&(()=>{const Be=Wt.reduce((ot,gn)=>ot+gn.sets.length,0),Nt=Jc.find(ot=>ot.key===mt)?.label||"",_s=[{value:Wt.length,label:"Exercises"},{value:Be,label:"Sets"}];return a.jsx($g,{title:`${Nt} Complete!`,subtitle:Xe?.name,stats:_s,hideShare:!p,onShareJourney:t?Tt:null,userName:t?.name,onDismissStart:()=>T("randomiser_hub"),onDone:()=>{In(!1),Et(null),It(null)}})})()]})}return null}const g5=[{key:"trained",label:"Trained",icon:"M4 10v4M8 7v10M8 12h8M16 7v10M20 10v4",color:"#A12F3A",darkColor:"#E8475A"},{key:"protein",label:"Hit Protein",icon:"M12 22c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10zM12 18c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z",color:"#4caf50",darkColor:"#5CDB61"},{key:"steps",label:"10k Steps",icon:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20M4 12.5A2.5 2.5 0 0 1 6.5 10H20M4 5.5A2.5 2.5 0 0 1 6.5 3H20",color:"#ff9800",darkColor:"#FFB020"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",color:"#7c3aed",darkColor:"#9B5AF2"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z",color:"#2196f3",darkColor:"#42A5F5"}],y5="M12 2l2.4 7.2L22 12l-7.6 2.8L12 22l-2.4-7.2L2 12l7.6-2.8z",v5="#e91e63",b5="#FF4D88",w5=700,Wg=42,Al=2*Math.PI*Wg,ph=["Every day counts. See you tomorrow!","Consistency is your superpower.","Perfect day  keep the streak alive!","You showed up for yourself today."];function x5(s){const e=new Date(s),t=e.getDay(),i=t===0?-6:1-t;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function So(s){return s.toISOString().split("T")[0]}function _5(s){return Array.from({length:7},(e,t)=>{const i=new Date(s);return i.setDate(s.getDate()+t),i})}function k5(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Cr(),{isDark:l,toggleTheme:u,accent:d}=Mi(),{isPremium:p,FREE_HABIT_LIMIT:g}=ic(),y=Ws(),[b,E]=x.useState({}),[T,P]=x.useState([]),[G,q]=x.useState(!0),[z,K]=x.useState(!1),[W,Q]=x.useState(0),[oe,Te]=x.useState(null),[be,C]=x.useState(null),[j,I]=x.useState(!1),[V,L]=x.useState(!1),[D,R]=x.useState(!1),[Me,Ye]=x.useState(!1),[ee,Se]=x.useState(""),[Ie,Ce]=x.useState(null),[X,O]=x.useState([]),[re,we]=x.useState(null),ke=x.useRef(null),xe=x.useRef(null),Ee=x.useRef(null),Pe=x.useRef(null),et=x.useRef(!1),Oe=x.useRef({}),Lt=x.useRef([]),Xt=x.useRef([]),In=x.useRef(null),Ct=x.useRef(ph[Math.floor(Math.random()*ph.length)]),nt=x.useCallback((le,Re="info")=>{Te({message:le,type:Re}),setTimeout(()=>Te(null),3e3)},[]),ft=new Date,lt=So(ft),Mn=x5(ft),de=_5(Mn),Tt=["M","T","W","T","F","S","S"],mt=(le,Re)=>l&&Re?Re:le,It=[...g5.filter(le=>!X.includes(le.key)).map(le=>({...le,color:mt(le.color,le.darkColor)})),...T.map(le=>({key:`custom_${le.id}`,label:le.label,icon:y5,color:mt(v5,b5),isCustom:!0,id:le.id}))],Xe=p?It:It.slice(0,g);x.useEffect(()=>{!i&&(!s||!e)&&y("/")},[s,e,i,y]),x.useEffect(()=>{if(!s||!t)return;(async()=>{try{const Re=dt(ve,"habitLogs"),Ge=Qt(Re,wt("clientId","==",t.id)),ct=await $t(Ge),at={};ct.docs.forEach(pn=>{const Ss=pn.data();at[Ss.date]={...Ss,_id:pn.id}}),E(at);const mn=await qs(We(ve,"customHabits",t.id));if(mn.exists()){const pn=mn.data();P(pn.habits||[]),O(pn.hiddenDefaults||[])}let kn=0;const ln=new Date(ft);for(;;){const pn=So(ln),Ss=at[pn];if(Ss)if(Object.values(Ss.habits||{}).filter(Boolean).length>=3)kn++,ln.setDate(ln.getDate()-1);else break;else if(pn===lt)ln.setDate(ln.getDate()-1);else break}Q(kn)}catch(Re){console.error("Error loading habit logs:",Re)}finally{q(!1)}})()},[s,t]);const Et=b[lt]||{habits:{}};x.useEffect(()=>{Object.values(Et.habits||{}).filter(Boolean).length<Xe.length&&D&&R(!1)},[Xe.length,Et.habits]);const pt=async le=>{if(!(!s||z||Et.habits?.[le])){Lt.current=[...Array(10)].map((Ge,ct)=>{const at=ct/10*2*Math.PI,mn=18+Math.random()*20;return{tx:Math.cos(at)*mn,ty:Math.sin(at)*mn,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),C(le),setTimeout(()=>C(null),700),navigator.vibrate&&navigator.vibrate(50),K(!0);try{const ct={...Et.habits||{},[le]:!0},at=Et._id||`${t.id}_${lt}`;E(kn=>({...kn,[lt]:{clientId:t.id,date:lt,habits:ct,_id:at}})),await Ts(We(ve,"habitLogs",at),{clientId:t.id,date:lt,habits:ct}),Object.values(ct).filter(Boolean).length===Xe.length&&!D&&(Ct.current=ph[Math.floor(Math.random()*ph.length)],Xt.current=[...Array(80)].map((kn,ln)=>({x:5+Math.random()*90,delay:Math.random()*3.5,color:["#A12F3A","#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#FFD700","#ffffff","#9c27b0"][ln%9],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.8+Math.random()*2,width:4+Math.random()*6,height:4+Math.random()*8,shape:ln%3})),setTimeout(()=>{I(!0),R(!0),setTimeout(()=>In.current?.focus(),1100)},400))}catch(Ge){console.error("Error saving habit:",Ge),nt("Failed to save. Try again.","error"),E(ct=>({...ct,[lt]:{...ct[lt],habits:{...ct[lt]?.habits||{},[le]:!1}}}))}finally{K(!1)}}},Jt=async le=>{if(!(!s||z)){K(!0);try{const Ge={...Et.habits||{},[le]:!1},ct=Et._id||`${t.id}_${lt}`;await Ts(We(ve,"habitLogs",ct),{clientId:t.id,date:lt,habits:Ge}),E(at=>({...at,[lt]:{clientId:t.id,date:lt,habits:Ge,_id:ct}}))}catch(Re){console.error("Error undoing habit:",Re),nt("Failed to undo. Try again.","error")}finally{K(!1)}}},js=le=>{if(Et.habits?.[le]||!1||z||Pe.current)return;Pe.current=le,we(le),xe.current=performance.now();const Ge=Oe.current[le];Ge&&(Ge.style.strokeDashoffset=Al);const ct=at=>{const mn=at-xe.current,kn=Math.min(mn/w5,1),ln=Oe.current[le];ln&&(ln.style.strokeDashoffset=Al-kn*Al),kn<1?Ee.current=requestAnimationFrame(ct):(Pe.current=null,et.current=!0,Ee.current=null,we(null),pt(le))};Ee.current=requestAnimationFrame(ct)},es=()=>{if(!Pe.current)return;const le=Pe.current;Pe.current=null,Ee.current&&(cancelAnimationFrame(Ee.current),Ee.current=null),ke.current&&(clearTimeout(ke.current),ke.current=null),Oe.current[le]&&(Oe.current[le].style.strokeDashoffset=Al),we(null),xe.current=null};x.useEffect(()=>()=>{Ee.current&&cancelAnimationFrame(Ee.current),ke.current&&clearTimeout(ke.current)},[]);const Wt=x.useCallback(async le=>{if(!t)throw new Error("Not signed in");const Re=le&&typeof le=="object"&&le.type;await jr(dt(ve,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:Re?"":le,type:Re?le.type:"text",imageURL:null,createdAt:Ps(),likeCount:0,commentCount:0,...Re?{metadata:{title:le.title||"",subtitle:le.subtitle||"",stats:le.stats||[],quote:le.quote||"",badges:le.badges||[]}}:{}})},[t]),se=async()=>{const le=ee.trim();if(!le)return;if(!t?.id){nt("Still loading, try again","error");return}const Re=Date.now().toString(36),Ge=[...T,{id:Re,label:le}];try{await Ts(We(ve,"customHabits",t.id),{clientId:t.id,habits:Ge,hiddenDefaults:X},{merge:!0}),P(Ge),Se(""),Ye(!1),nt(`Added "${le}"`,"success")}catch(ct){console.error("Error adding custom habit:",ct),nt(ct?.code==="permission-denied"?"Permission denied  check Firestore rules for customHabits":`Failed to add habit: ${ct?.message||"Unknown error"}`,"error")}},Ne=async le=>{if(!t?.id)return;const Re=T.filter(Ge=>Ge.id!==le);try{await Ts(We(ve,"customHabits",t.id),{clientId:t.id,habits:Re,hiddenDefaults:X},{merge:!0}),P(Re),Ce(null),nt("Habit removed","success")}catch(Ge){console.error("Error deleting habit:",Ge),nt("Failed to remove","error")}},ht=async le=>{if(!t?.id)return;const Re=[...X,le];try{await Ts(We(ve,"customHabits",t.id),{clientId:t.id,habits:T,hiddenDefaults:Re},{merge:!0}),O(Re),Ce(null),nt("Habit removed","success")}catch(Ge){console.error("Error hiding default habit:",Ge),nt("Failed to remove","error")}},gt=de.map(le=>{const Re=So(le),Ge=b[Re],ct=Ge?Object.values(Ge.habits||{}).filter(Boolean).length:0;return{date:le,dateStr:Re,completed:ct,total:Xe.length}}),st=gt.reduce((le,Re)=>le+Re.completed,0),He=gt.reduce((le,Re)=>le+Re.total,0),tt=He>0?Math.round(st/He*100):0,Fe=Object.values(Et.habits||{}).filter(Boolean).length,Zt=Xe.length>0?Math.round(Fe/Xe.length*100):0,nn=Fe===Xe.length&&Xe.length>0,jn=(()=>{const le=Object.keys(b).sort();let Re=0,Ge=0,ct=null;for(const at of le){const mn=b[at];if(Object.values(mn.habits||{}).filter(Boolean).length>=3){if(ct){const ln=new Date(ct);Ge=(new Date(at)-ln)/(1e3*60*60*24)===1?Ge+1:1}else Ge=1;Ge>Re&&(Re=Ge),ct=at}else Ge=0,ct=null}return Math.max(Re,W)})(),Dn=new Date(ft.getFullYear(),ft.getMonth(),1),Hn=Dn.toLocaleString("default",{month:"long"}),zt=new Date(ft.getFullYear(),ft.getMonth()+1,0).getDate(),Ln=(Dn.getDay()+6)%7,_n=Array.from({length:zt},(le,Re)=>{const Ge=new Date(ft.getFullYear(),ft.getMonth(),Re+1),ct=So(Ge),at=b[ct],mn=at?Object.values(at.habits||{}).filter(Boolean).length:0,kn=Ge>ft;return{day:Re+1,dateStr:ct,completed:mn,total:Xe.length,isFuture:kn,isToday:ct===lt}}),sn=Xe.map(le=>({...le,days:de.map(Re=>{const Ge=So(Re);return b[Ge]?.habits?.[le.key]||!1})})),fr=gt.filter(le=>le.completed===le.total&&le.total>0).length;return a.jsx(Xo,{children:a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||G?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-hero anim-fade-up",children:[a.jsxs("div",{className:`cbc-progress-ring${nn?" cbc-ring-complete":""}`,children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-Zt/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-count",children:[Fe,a.jsx("span",{className:"cbc-ring-divider",children:"/"}),Xe.length]}),a.jsx("span",{className:"cbc-ring-label",children:nn?"complete":"today"})]})]}),a.jsx("p",{className:"cbc-hero-tagline",children:nn?"You showed up for yourself today.":Fe===0?"Start your day strong.":`${Xe.length-Fe} to go  keep pushing.`})]}),a.jsxs("div",{className:"cbc-streak-card anim-fade-up-d1",children:[a.jsx("div",{className:"cbc-streak-icon",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}),a.jsxs("div",{className:"cbc-streak-info",children:[a.jsx("span",{className:"cbc-streak-count",children:W}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]}),a.jsxs("div",{className:"cbc-streak-best",children:[a.jsx("span",{className:"cbc-streak-best-val",children:jn}),a.jsx("span",{className:"cbc-streak-best-label",children:"best"})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d2",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsxs("div",{className:"cbc-habits-grid",children:[Xe.map(le=>{const Re=Et.habits?.[le.key]||!1,Ge=be===le.key,ct=re===le.key;return a.jsxs("div",{className:`cbc-habit-tile ${Re?"cbc-habit-done":""} ${Ge?"cbc-habit-just-checked":""}`,style:{"--habit-color":le.color},children:[p&&a.jsx("button",{className:"cbc-habit-delete",onClick:at=>{at.stopPropagation(),Ce(le.isCustom?{type:"custom",id:le.id,label:le.label}:{type:"default",key:le.key,label:le.label})},"aria-label":`Remove ${le.label}`,children:a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsxs("div",{className:`cbc-habit-ring-touch ${ct?"cbc-holding":""} ${Re?"cbc-ring-completed":""}`,onPointerDown:at=>{Re||(at.preventDefault(),js(le.key))},onPointerUp:es,onPointerLeave:es,onPointerCancel:es,onClick:at=>{if(at.stopPropagation(),et.current){et.current=!1;return}Re&&Jt(le.key)},role:"button",tabIndex:0,"aria-label":Re?`Undo ${le.label}`:`Press and hold to complete ${le.label}`,onKeyDown:at=>{(at.key==="Enter"||at.key===" ")&&(at.preventDefault(),Re?Jt(le.key):pt(le.key))},children:[a.jsxs("svg",{className:"cbc-habit-ring-svg",viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-habit-ring-track",cx:"50",cy:"50",r:Wg}),a.jsx("circle",{className:"cbc-habit-ring-fill",ref:at=>{at&&(Oe.current[le.key]=at)},cx:"50",cy:"50",r:Wg,style:{stroke:le.color,strokeDasharray:Al,strokeDashoffset:Re?0:Al}})]}),Re&&a.jsx("div",{className:"cbc-habit-glow-orb",style:{"--habit-color":le.color}}),a.jsx("div",{className:"cbc-habit-ring-icon",style:{color:le.color},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:le.icon})})}),Ge&&a.jsx("div",{className:"cbc-particles",children:Lt.current.map((at,mn)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${at.tx}px`,"--ty":`${at.ty}px`,"--size":`${at.size}px`,"--particle-color":le.color,animationDuration:`${at.duration}s`}},mn))})]}),a.jsx("span",{className:"cbc-habit-label",children:le.label}),Re?a.jsx("span",{className:"cbc-habit-done-tag",children:"Done"}):a.jsx("span",{className:"cbc-habit-hold-hint",children:"Hold to complete"})]},le.key)}),p?a.jsxs("div",{className:"cbc-habit-tile cbc-add-tile",onClick:()=>Ye(!0),role:"button",tabIndex:0,children:[a.jsx("div",{className:"cbc-add-ring",children:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),a.jsx("span",{className:"cbc-habit-label",children:"Add Habit"}),a.jsx("span",{className:"cbc-habit-hold-hint",children:"Your own"})]}):a.jsxs("div",{className:"cbc-habit-tile cbc-unlock-tile",onClick:()=>y("/upgrade"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"cbc-unlock-ring",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("span",{className:"cbc-habit-label",children:"More Habits"}),a.jsx("span",{className:"cbc-habit-hold-hint",children:"Custom & editable"})]})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d3",children:[a.jsxs("div",{className:"cbc-section-header",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsxs("span",{className:"cbc-section-badge",children:[fr,"/7 perfect"]})]}),a.jsxs("div",{className:"cbc-weekly-card",children:[a.jsxs("div",{className:"cbc-weekly-header",children:[a.jsx("span",{className:"cbc-weekly-habit-name"}),Tt.map((le,Re)=>a.jsx("span",{className:`cbc-weekly-day-label${de[Re]&&So(de[Re])===lt?" cbc-today-label":""}`,children:le},Re))]}),sn.map(le=>(le.days.filter(Boolean).length,a.jsxs("div",{className:"cbc-weekly-row",children:[a.jsx("span",{className:"cbc-weekly-habit-name",style:{color:le.color},children:le.label}),le.days.map((Re,Ge)=>a.jsx("span",{className:`cbc-weekly-dot${Re?" cbc-dot-done":""}${de[Ge]&&So(de[Ge])===lt?" cbc-dot-today":""}`,style:Re?{background:le.color,borderColor:le.color,boxShadow:`0 0 6px ${le.color}40`}:void 0},Ge))]},le.key))),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${tt}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[st,"/",He," completed (",tt,"%)"]})]})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d4",children:[a.jsx("h2",{className:"cbc-section-title",children:Hn}),a.jsxs("div",{className:"cbc-calendar-card",children:[a.jsx("div",{className:"cbc-cal-header",children:["M","T","W","T","F","S","S"].map((le,Re)=>a.jsx("span",{className:"cbc-cal-day-label",children:le},Re))}),a.jsxs("div",{className:"cbc-cal-grid",children:[Array.from({length:Ln},(le,Re)=>a.jsx("span",{className:"cbc-cal-cell cbc-cal-empty"},`e${Re}`)),_n.map(le=>{const Re=le.total>0?le.completed/le.total:0,Ge=le.isFuture?-1:Re===0?0:Re<.4?1:Re<.75?2:Re<1?3:4;return a.jsx("span",{className:`cbc-cal-cell${le.isToday?" cbc-cal-today":""}${Ge===4?" cbc-cal-perfect":""} cbc-cal-heat-${Ge<0?"future":Ge}`,children:le.day},le.day)})]}),a.jsxs("div",{className:"cbc-cal-legend",children:[a.jsx("span",{className:"cbc-cal-legend-label",children:"Less"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-0"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-1"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-2"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-3"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-4"}),a.jsx("span",{className:"cbc-cal-legend-label",children:"More"})]})]})]})]}),a.jsx(Gr,{active:"home"}),Me&&a.jsx("div",{className:"cbc-modal-overlay",onClick:()=>Ye(!1),children:a.jsxs("div",{className:"cbc-modal",onClick:le=>le.stopPropagation(),children:[a.jsx("h3",{className:"cbc-modal-title",children:"Add Habit"}),a.jsx("p",{className:"cbc-modal-desc",children:"Track something personal to your routine."}),a.jsx("input",{className:"cbc-modal-input",type:"text",placeholder:"e.g. Meditate, Stretch, Read...",value:ee,onChange:le=>Se(le.target.value),maxLength:30,autoFocus:!0,onKeyDown:le=>le.key==="Enter"&&se()}),a.jsxs("div",{className:"cbc-modal-actions",children:[a.jsx("button",{className:"cbc-modal-cancel",onClick:()=>{Ye(!1),Se("")},children:"Cancel"}),a.jsx("button",{className:"cbc-modal-save",onClick:se,disabled:!ee.trim(),children:"Add"})]})]})}),Ie&&a.jsx("div",{className:"cbc-modal-overlay",onClick:()=>Ce(null),children:a.jsxs("div",{className:"cbc-modal",onClick:le=>le.stopPropagation(),children:[a.jsxs("h3",{className:"cbc-modal-title",children:['Remove "',Ie.label,'"?']}),a.jsx("p",{className:"cbc-modal-desc",children:"This will remove the habit from your daily tracker. Past logs won't be affected."}),a.jsxs("div",{className:"cbc-modal-actions",children:[a.jsx("button",{className:"cbc-modal-cancel",onClick:()=>Ce(null),children:"Keep"}),a.jsx("button",{className:"cbc-modal-delete",onClick:()=>Ie.type==="custom"?Ne(Ie.id):ht(Ie.key),children:"Remove"})]})]})}),j&&a.jsx($g,{title:"All Habits Complete!",subtitle:Ct.current,stats:[{value:`${Fe}/${Xe.length}`,label:"Habits"},{value:W||1,label:"Day Streak"}],buttonLabel:"Keep Going",holdLabel:"Hold To Complete Today's Habits",shareType:"habits",hideShare:!p,onShareJourney:t?Wt:null,userName:t?.name,onDone:()=>{I(!1),L(!1)}}),oe&&a.jsx("div",{className:`toast-notification ${oe.type}`,children:oe.message})]})})}function gh(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Xw(s,e){return[s,e].sort().join("_")}function E5(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Cr(),{isDark:l,toggleTheme:u}=Mi(),d=Ws(),[p,g]=x.useState("buddies"),[y,b]=x.useState([]),[E,T]=x.useState([]),[P,G]=x.useState([]),[q,z]=x.useState(""),[K,W]=x.useState([]),[Q,oe]=x.useState([]),[Te,be]=x.useState(!0),[C,j]=x.useState(null),[I,V]=x.useState(null),L=x.useCallback((X,O="info")=>{V({message:X,type:O}),setTimeout(()=>V(null),3500)},[]);x.useEffect(()=>{!i&&(!s||!e)&&d("/")},[s,e,i,d]);const D=x.useCallback(async()=>{if(t){be(!0);try{const X=t.id,re=(await $t(dt(ve,"clients"))).docs.map(Oe=>({id:Oe.id,...Oe.data()}));oe(re);const we=Object.fromEntries(re.map(Oe=>[Oe.id,Oe])),ke=await $t(Qt(dt(ve,"buddies"),wt("user1","==",X))),xe=await $t(Qt(dt(ve,"buddies"),wt("user2","==",X))),Ee=new Set;[...ke.docs,...xe.docs].forEach(Oe=>{const Lt=Oe.data(),Xt=Lt.user1===X?Lt.user2:Lt.user1;Ee.add(Xt)}),b(Array.from(Ee).map(Oe=>we[Oe]).filter(Boolean));const Pe=await $t(Qt(dt(ve,"buddyRequests"),wt("toId","==",X),wt("status","==","pending")));T(Pe.docs.map(Oe=>({reqId:Oe.id,...Oe.data(),fromClient:we[Oe.data().fromId]})).filter(Oe=>Oe.fromClient));const et=await $t(Qt(dt(ve,"buddyRequests"),wt("fromId","==",X),wt("status","==","pending")));G(et.docs.map(Oe=>({reqId:Oe.id,...Oe.data(),toClient:we[Oe.data().toId]})).filter(Oe=>Oe.toClient))}catch(X){console.error("Error fetching buddy data:",X),L("Failed to load buddies","error")}finally{be(!1)}}},[t,L]);x.useEffect(()=>{D()},[D]),x.useEffect(()=>{if(!q.trim()||!t){W([]);return}const X=q.toLowerCase(),O=t.id,re=new Set(y.map(Ee=>Ee.id)),we=new Set(P.map(Ee=>Ee.toId)),ke=new Set(E.map(Ee=>Ee.fromId)),xe=Q.filter(Ee=>Ee.id===O||!Ee.name||!Ee.coreBuddyAccess&&Ee.clientType!=="core_buddy"?!1:Ee.name.toLowerCase().includes(X)).map(Ee=>({...Ee,isBuddy:re.has(Ee.id),isPendingOut:we.has(Ee.id),isPendingIn:ke.has(Ee.id)})).slice(0,20);W(xe)},[q,Q,y,P,E,t]);const R=async(X,O)=>{if(!(!t||X===t.id))try{await jr(dt(ve,"notifications"),{toId:X,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:O,read:!1,createdAt:Ps()})}catch(re){console.error("Notification error:",re),re.code==="permission-denied"&&L("Notifications blocked  check Firestore rules","error")}},Me=async X=>{j(X);try{const O=`${t.id}_${X}`;await Ts(We(ve,"buddyRequests",O),{fromId:t.id,toId:X,status:"pending",createdAt:Ps()}),await R(X,"buddy_request"),L("Buddy request sent!","success"),await D()}catch(O){console.error("Error sending request:",O),L("Failed to send request","error")}finally{j(null)}},Ye=async X=>{j(X.reqId);try{const O=Xw(X.fromId,t.id);await Ts(We(ve,"buddies",O),{user1:[X.fromId,t.id].sort()[0],user2:[X.fromId,t.id].sort()[1],connectedAt:Ps()}),await Er(We(ve,"buddyRequests",X.reqId)),await R(X.fromId,"buddy_accept"),L("Buddy added!","success"),await D()}catch(O){console.error("Error accepting request:",O),L("Failed to accept","error")}finally{j(null)}},ee=async X=>{j(X.reqId);try{await Er(We(ve,"buddyRequests",X.reqId)),L("Request declined","info"),await D()}catch(O){console.error("Error declining:",O),L("Failed to decline","error")}finally{j(null)}},Se=async X=>{j(X.reqId);try{await Er(We(ve,"buddyRequests",X.reqId)),L("Request cancelled","info"),await D()}catch(O){console.error("Error cancelling:",O),L("Failed to cancel","error")}finally{j(null)}},Ie=async X=>{j(X);try{const O=Xw(t.id,X);await Er(We(ve,"buddies",O)),L("Buddy removed","info"),await D()}catch(O){console.error("Error removing buddy:",O),L("Failed to remove buddy","error")}finally{j(null)}},Ce=E.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!t?null:a.jsx(Xo,{children:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("button",{className:"bdy-leaderboard-link",onClick:()=>d("/client/leaderboard"),children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("rect",{x:"6",y:"9",width:"12",height:"13",rx:"2"}),a.jsx("path",{d:"M12 9v13"}),a.jsx("path",{d:"M2 22h20"})]}),a.jsx("span",{children:"Leaderboard"}),a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),Ce>0&&a.jsx("span",{className:"bdy-tab-badge",children:Ce})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Te?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(X=>a.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${X.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:X.photoURL?a.jsx("img",{src:X.photoURL,alt:X.name}):a.jsx("span",{children:gh(X.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:X.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:O=>{O.stopPropagation(),Ie(X.id)},disabled:C===X.id,"aria-label":"Remove buddy",children:C===X.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},X.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[E.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:E.map(X=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:X.fromClient.photoURL?a.jsx("img",{src:X.fromClient.photoURL,alt:X.fromClient.name}):a.jsx("span",{children:gh(X.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:X.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>Ye(X),disabled:C===X.reqId,children:C===X.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>ee(X),disabled:C===X.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},X.reqId))})]}),P.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:P.map(X=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:X.toClient?.photoURL?a.jsx("img",{src:X.toClient.photoURL,alt:X.toClient.name}):a.jsx("span",{children:gh(X.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:X.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>Se(X),disabled:C===X.reqId,children:C===X.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},X.reqId))})]}),E.length===0&&P.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:q,onChange:X=>z(X.target.value),autoFocus:!0}),q&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>z(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),q.trim()&&K.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',q,'"']})}),K.length>0&&a.jsx("div",{className:"bdy-list",children:K.map(X=>a.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${X.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:X.photoURL?a.jsx("img",{src:X.photoURL,alt:X.name}):a.jsx("span",{children:gh(X.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:X.name}),X.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),X.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):X.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):X.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:O=>{O.stopPropagation();const re=E.find(we=>we.fromId===X.id);re&&Ye(re)},disabled:!!C,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:O=>{O.stopPropagation(),Me(X.id)},disabled:C===X.id,children:C===X.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},X.id))})]})]})]}),a.jsx(Gr,{}),I&&a.jsxs("div",{className:`toast-notification ${I.type}`,children:[a.jsx("span",{className:"toast-icon",children:I.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):I.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:I.message})]})]})})}function yh(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function rg(s,e){return[s,e].sort().join("_")}const T5=5;function ig(s){return s.toISOString().split("T")[0]}function Jw(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function j5(){const{userId:s}=vS(),{currentUser:e,isClient:t,clientData:i,loading:l}=Cr(),{isDark:u,toggleTheme:d}=Mi(),p=Ws(),[g,y]=x.useState(null),[b,E]=x.useState("none"),[T,P]=x.useState(null),[G,q]=x.useState(!0),[z,K]=x.useState(!1),[W,Q]=x.useState(null),[oe,Te]=x.useState([]),[be,C]=x.useState(!1),[j,I]=x.useState(new Set),[V,L]=x.useState(new Set),[D,R]=x.useState({}),[Me,Ye]=x.useState({}),[ee,Se]=x.useState({}),[Ie,Ce]=x.useState(!0),[X,O]=x.useState(0),[re,we]=x.useState(0),[ke,xe]=x.useState(0),[Ee,Pe]=x.useState([]),[et,Oe]=x.useState(!1),[Lt,Xt]=x.useState(null),[In,Ct]=x.useState([]),nt=x.useCallback((se,Ne="info")=>{Q({message:se,type:Ne}),setTimeout(()=>Q(null),3500)},[]);x.useEffect(()=>{!l&&(!e||!t)&&p("/")},[e,t,l,p]),x.useEffect(()=>{i&&s&&i.id===s&&p("/client/core-buddy",{replace:!0})},[i,s,p]),x.useEffect(()=>{if(!i||!s||i.id===s)return;let se=!1;return(async()=>{q(!0);try{const gt=(await $t(dt(ve,"clients"))).docs.map(Fe=>({id:Fe.id,...Fe.data()})).find(Fe=>Fe.id===s);if(!gt){se||q(!1);return}se||y(gt);const st=i.id,He=rg(st,s);if((await qs(We(ve,"buddies",He))).exists())se||E("buddy");else{const Fe=`${st}_${s}`,Zt=await qs(We(ve,"buddyRequests",Fe));if(Zt.exists()&&Zt.data().status==="pending")se||(E("pending_out"),P(Fe));else{const nn=`${s}_${st}`,jn=await qs(We(ve,"buddyRequests",nn));jn.exists()&&jn.data().status==="pending"?se||(E("pending_in"),P(nn)):se||E("none")}}}catch(Ne){console.error("Error loading profile:",Ne)}finally{se||q(!1)}})(),()=>{se=!0}},[i,s]),x.useEffect(()=>{if(!s||!g)return;let se=!1;return(async()=>{Ce(!0);try{const Ne=await $t(Qt(dt(ve,"workoutLogs"),wt("clientId","==",s)));if(se)return;const ht=Ne.docs.length;O(ht);let gt=0;const st=Ne.docs.map(tt=>tt.data().date).filter(Boolean).sort().reverse();if(st.length>0){const tt=new Date;let Fe=new Date(tt);for(let Zt=0;Zt<52;Zt++){const nn=new Date(Fe),jn=nn.getDay(),Dn=jn===0?6:jn-1;nn.setDate(nn.getDate()-Dn),nn.setHours(0,0,0,0);const Hn=new Date(nn);Hn.setDate(Hn.getDate()+7);const zt=ig(nn),Ln=ig(Hn);if(st.some(sn=>sn>=zt&&sn<Ln))gt++;else{if(Zt>0)break;break}Fe.setDate(Fe.getDate()-7)}}se||we(gt);let He=0;for(let tt=0;tt<30;tt++){const Fe=new Date;Fe.setDate(Fe.getDate()-tt);const Zt=ig(Fe);try{const nn=await $t(Qt(dt(ve,"habitLogs"),wt("clientId","==",s),wt("date","==",Zt)));if(nn.empty)break;{const jn=nn.docs[0].data().habits||{};if(Object.values(jn).filter(Boolean).length>=T5)He++;else break}}catch{break}}se||xe(He)}catch(Ne){console.error("Error loading buddy stats:",Ne)}finally{se||Ce(!1)}})(),()=>{se=!0}},[s,g]),x.useEffect(()=>{if(!i)return;const se=i.id;(async()=>{try{const[Ne,ht,gt]=await Promise.all([$t(Qt(dt(ve,"buddies"),wt("user1","==",se))),$t(Qt(dt(ve,"buddies"),wt("user2","==",se))),$t(dt(ve,"clients"))]),st=new Set;[...Ne.docs,...ht.docs].forEach(tt=>{const Fe=tt.data();st.add(Fe.user1===se?Fe.user2:Fe.user1)});const He={};gt.docs.forEach(tt=>{He[tt.id]=tt.data()}),Pe(Array.from(st).filter(tt=>He[tt]).map(tt=>({id:tt,name:He[tt].name,photoURL:He[tt].photoURL||null})))}catch(Ne){console.error("Error loading buddies for mentions:",Ne)}})()},[i]);const ft=async(se,Ne,ht={})=>{if(!(!i||se===i.id))try{await jr(dt(ve,"notifications"),{toId:se,fromId:i.id,fromName:i.name||"Someone",fromPhotoURL:i.photoURL||null,type:Ne,read:!1,createdAt:Ps(),...ht})}catch(gt){console.error("Notification error:",gt),gt.code==="permission-denied"&&nt("Notifications blocked  check Firestore rules","error")}},lt=async()=>{K(!0);try{const se=`${i.id}_${s}`;await Ts(We(ve,"buddyRequests",se),{fromId:i.id,toId:s,status:"pending",createdAt:Ps()}),await ft(s,"buddy_request"),E("pending_out"),P(se),nt("Buddy request sent!","success")}catch(se){console.error(se),nt("Failed to send request","error")}finally{K(!1)}},Mn=async()=>{if(T){K(!0);try{const se=rg(i.id,s);await Ts(We(ve,"buddies",se),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:Ps()}),await Er(We(ve,"buddyRequests",T)),await ft(s,"buddy_accept"),E("buddy"),nt("Buddy added!","success")}catch(se){console.error(se),nt("Failed to accept","error")}finally{K(!1)}}},de=async()=>{if(T){K(!0);try{await Er(We(ve,"buddyRequests",T)),E("none"),nt(b==="pending_out"?"Request cancelled":"Request declined","info")}catch(se){console.error(se),nt("Failed","error")}finally{K(!1)}}},Tt=async()=>{K(!0);try{const se=rg(i.id,s);await Er(We(ve,"buddies",se)),E("none"),nt("Buddy removed","info")}catch(se){console.error(se),nt("Failed to remove","error")}finally{K(!1)}},mt=x.useCallback(async()=>{if(s){C(!0);try{const se=await $t(Qt(dt(ve,"posts"),wt("authorId","==",s),ku("createdAt","desc"),Eu(30)));if(Te(se.docs.map(Ne=>({id:Ne.id,...Ne.data()}))),i){const Ne=await $t(Qt(dt(ve,"postLikes"),wt("userId","==",i.id)));I(new Set(Ne.docs.map(ht=>ht.data().postId)))}}catch(se){console.error("Error loading journey:",se)}finally{C(!1)}}},[s,i]);x.useEffect(()=>{!G&&g&&mt()},[G,g,mt]);const It=async se=>{if(window.confirm("Delete this post?"))try{await Er(We(ve,"posts",se)),Te(Ne=>Ne.filter(ht=>ht.id!==se)),nt("Post deleted","info")}catch(Ne){console.error("Delete error:",Ne),nt("Failed to delete","error")}},Xe=async se=>{if(!i)return;const Ne=i.id,ht=`${se}_${Ne}`,gt=j.has(se),st=new Set(j);gt?st.delete(se):st.add(se),I(st),Te(He=>He.map(tt=>tt.id===se?{...tt,likeCount:Math.max(0,(tt.likeCount||0)+(gt?-1:1))}:tt));try{if(gt)await Er(We(ve,"postLikes",ht)),await gs(We(ve,"posts",se),{likeCount:Ao(-1)});else{await Ts(We(ve,"postLikes",ht),{postId:se,userId:Ne,createdAt:Ps()}),await gs(We(ve,"posts",se),{likeCount:Ao(1)});const He=oe.find(tt=>tt.id===se);He&&ft(He.authorId,"like",{postId:se})}}catch(He){console.error("Like error:",He),mt()}},Et=async se=>{try{const Ne=await $t(Qt(dt(ve,"postComments"),wt("postId","==",se),ku("createdAt","asc"),Eu(50)));R(ht=>({...ht,[se]:Ne.docs.map(gt=>({id:gt.id,...gt.data()}))}))}catch(Ne){console.error("Error loading comments:",Ne)}},pt=se=>{const Ne=new Set(V);Ne.has(se)?Ne.delete(se):(Ne.add(se),D[se]||Et(se)),L(Ne)},Jt=(se,Ne)=>{const ht=se.match(/@(\w*)$/);if(ht){Oe(!0),Xt(Ne);const gt=Ee.filter(st=>st.name&&st.name.toLowerCase().includes(ht[1].toLowerCase())).slice(0,5);Ct(gt)}else Oe(!1),Ct([])},js=(se,Ne)=>{const gt=(Me[Ne]||"").replace(/@\w*$/,`@${se.name} `);Ye(st=>({...st,[Ne]:gt})),Oe(!1),Ct([])},es=(se,Ne)=>{Ye(ht=>({...ht,[se]:Ne})),Jt(Ne,se)},Wt=async se=>{const Ne=(Me[se]||"").trim();if(!(!Ne||!i)){Se(ht=>({...ht,[se]:!0}));try{await jr(dt(ve,"postComments"),{postId:se,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:Ne,createdAt:Ps()}),await gs(We(ve,"posts",se),{commentCount:Ao(1)});const ht=oe.find(st=>st.id===se);ht&&ft(ht.authorId,"comment",{postId:se});const gt=Ne.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(gt){const st=new Set;gt.forEach(He=>{const tt=He.slice(1).trim(),Fe=Ee.find(Zt=>Zt.name&&Zt.name.toLowerCase()===tt.toLowerCase());Fe&&!st.has(Fe.id)&&(st.add(Fe.id),ft(Fe.id,"mention",{postId:se}))})}Ye(st=>({...st,[se]:""})),Te(st=>st.map(He=>He.id===se?{...He,commentCount:(He.commentCount||0)+1}:He)),await Et(se)}catch(ht){console.error("Comment error:",ht),nt("Failed to comment","error")}finally{Se(ht=>({...ht,[se]:!1}))}}};return l||G||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!t?null:g?a.jsx(Xo,{children:a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:yh(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),a.jsxs("div",{className:"prf-buddy-action",children:[b==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:lt,disabled:z,children:z?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),b==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:de,disabled:z,children:z?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),b==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:Mn,disabled:z,children:z?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:de,disabled:z,children:"Decline"})]}),b==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:Tt,disabled:z,children:z?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),Ie?a.jsx("div",{className:"prf-stats-loading",children:a.jsx("div",{className:"prf-spinner"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"prf-stats",children:[a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:X}),a.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[re,a.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),a.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),ke>0&&a.jsx("div",{className:"prf-info-row",children:a.jsxs("div",{className:"prf-info-card info-habit",children:[a.jsx("div",{className:"prf-info-icon",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})}),a.jsxs("div",{className:"prf-info-text",children:[a.jsxs("span",{className:"prf-info-value",children:[ke," day",ke!==1?"s":""]}),a.jsx("span",{className:"prf-info-sub",children:"Habit Streak"})]})]})})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:`${g.name?.split(" ")[0]}'s Journey`}),be?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):oe.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:oe.map(se=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:se.authorPhotoURL?a.jsx("img",{src:se.authorPhotoURL,alt:""}):a.jsx("span",{children:yh(se.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:se.authorName}),a.jsx("span",{className:"journey-post-time",children:Jw(se.createdAt)})]}),se.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>It(se.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),se.type==="workout_summary"&&se.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:se.metadata.title}),se.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.stats.map(Ne=>`${Ne.value} ${Ne.label}`).join("    ")}),!se.metadata.stats?.length&&se.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed a workout using Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):se.type==="badge_earned"&&se.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame journey-card-logo-badge",children:(()=>{const Ne=zl.find(ht=>ht.id===se.metadata.badgeId);return Ne?.img?a.jsx("img",{src:Ne.img,alt:se.metadata.title,className:"journey-card-logo-img"}):a.jsx("img",{src:"/Logo.webp",alt:se.metadata.title,className:"journey-card-logo-img"})})()}),a.jsx("h3",{className:"journey-card-title",children:se.metadata.title}),se.metadata.badgeDesc&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.badgeDesc}),a.jsx("p",{className:"journey-card-cta",children:"I just earned a badge on Core Buddy"}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):se.type==="habits_summary"&&se.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:se.metadata.title}),se.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.stats.map(Ne=>`${Ne.value} ${Ne.label}`).join("    ")}),se.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed my daily habits with Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):a.jsxs(a.Fragment,{children:[se.content&&a.jsx("p",{className:"journey-post-content",children:se.content}),se.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:se.imageURL,alt:"Post",loading:"lazy"})})]}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${j.has(se.id)?" liked":""}`,onClick:()=>Xe(se.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:j.has(se.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:se.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${V.has(se.id)?" active":""}`,onClick:()=>pt(se.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:se.commentCount||0})]})]}),V.has(se.id)&&a.jsxs("div",{className:"journey-comments",children:[D[se.id]?.length>0?D[se.id].map(Ne=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${Ne.authorId}`),children:Ne.authorPhotoURL?a.jsx("img",{src:Ne.authorPhotoURL,alt:""}):a.jsx("span",{children:yh(Ne.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:Ne.authorName}),a.jsx("span",{className:"journey-comment-text",children:Ne.content})]}),a.jsx("span",{className:"journey-comment-time",children:Jw(Ne.createdAt)})]})]},Ne.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("input",{type:"text",placeholder:"Comment... (@ to mention)",value:Me[se.id]||"",onChange:Ne=>es(se.id,Ne.target.value),onKeyDown:Ne=>{Ne.key==="Enter"&&Wt(se.id)},maxLength:300}),et&&Lt===se.id&&In.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:In.map(Ne=>a.jsxs("button",{className:"mention-option",onClick:()=>js(Ne,se.id),children:[a.jsx("div",{className:"mention-option-avatar",children:Ne.photoURL?a.jsx("img",{src:Ne.photoURL,alt:""}):a.jsx("span",{children:yh(Ne.name)})}),a.jsx("span",{children:Ne.name})]},Ne.id))}),a.jsx("button",{onClick:()=>Wt(se.id),disabled:!(Me[se.id]||"").trim()||ee[se.id],children:ee[se.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},se.id))})]})]}),a.jsx(Gr,{}),W&&a.jsxs("div",{className:`toast-notification ${W.type}`,children:[a.jsx("span",{className:"toast-icon",children:W.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):W.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:W.message})]})]})}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(Gr,{})]})}const ag=[{text:"Build your dashboard...",bold:"your way"},{text:"Pick what matters to you...",bold:"nothing else"},{text:"Your goals, your layout...",bold:"your rules"}],Zw=[{id:"stats",label:"Stats Rings",desc:"Programme %, workouts this week, habits today",icon:"rings",defaultOn:!0},{id:"workouts",label:"Workouts",desc:"Sessions this week and total count",icon:"dumbbell",defaultOn:!0},{id:"habits",label:"Habits",desc:"Daily habit tracker dots",icon:"check",defaultOn:!0},{id:"pbs",label:"Personal Bests",desc:"Your top lifts at a glance",icon:"trophy"},{id:"nutrition",label:"Nutrition",desc:"Macro rings  protein, carbs, fats, cals",icon:"apple"},{id:"leaderboard",label:"Leaderboard",desc:"See where you rank among buddies",icon:"podium"},{id:"journey",label:"Journey",desc:"Your posts, likes and comments feed",icon:"feed"},{id:"coach",label:"Coach Message",desc:"Motivational nudge from Buddy",icon:"message",defaultOn:!0},{id:"nudge",label:"Smart Nudge",desc:"Contextual reminder of what to do next",icon:"lightbulb"}];function S5(s){switch(s){case"rings":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]});case"dumbbell":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M6.5 6.5h11v11h-11z",strokeLinejoin:"round"}),a.jsx("line",{x1:"2",y1:"12",x2:"6.5",y2:"12"}),a.jsx("line",{x1:"17.5",y1:"12",x2:"22",y2:"12"})]});case"check":return a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})});case"trophy":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M6 9H3V6a1 1 0 0 1 1-1h2M18 9h3V6a1 1 0 0 0-1-1h-2"}),a.jsx("path",{d:"M6 5h12v7a6 6 0 0 1-12 0V5z"}),a.jsx("path",{d:"M9 21h6"}),a.jsx("path",{d:"M12 17v4"})]});case"apple":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M12 3c-1.5 0-3 1-3 1s-3-.5-4.5 1.5S3 9 3 12s1.5 6 3 8 3 3 6 3 4.5-1 6-3 3-5 3-8-1.5-4-3-6.5S13.5 3 12 3z"}),a.jsx("path",{d:"M12 3c0 0 1-2 3-2"})]});case"podium":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"2",y:"14",width:"6",height:"8",rx:"1"}),a.jsx("rect",{x:"9",y:"8",width:"6",height:"14",rx:"1"}),a.jsx("rect",{x:"16",y:"11",width:"6",height:"11",rx:"1"})]});case"medal":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"15",r:"6"}),a.jsx("path",{d:"M8.21 13.89L7 2h10l-1.21 11.89"})]});case"feed":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3"}),a.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),a.jsx("line",{x1:"3",y1:"15",x2:"21",y2:"15"})]});case"message":return a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})});case"lightbulb":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 18h6"}),a.jsx("path",{d:"M10 22h4"}),a.jsx("path",{d:"M12 2a7 7 0 0 0-4 12.7V17h8v-2.3A7 7 0 0 0 12 2z"})]});default:return null}}function C5(){const s=Ws(),{clientData:e,currentUser:t,updateClientData:i,resolveClient:l}=Cr(),[u,d]=x.useState({hours:0,minutes:0,seconds:0}),[p,g]=x.useState(0),[y,b]=x.useState(0),[E,T]=x.useState(null),[P,G]=x.useState(!1),q=x.useRef(null),[z,K]=x.useState(()=>{const D=e?.dashboardWidgets;return D&&Array.isArray(D)?D:Zw.filter(R=>R.defaultOn).map(R=>R.id)}),[W,Q]=x.useState(!1),[oe,Te]=x.useState(!1),[be,C]=x.useState(null);x.useEffect(()=>{e?.photoURL&&T(e.photoURL)},[e?.photoURL]),x.useEffect(()=>{const D=()=>{const Me=new Date,Ye=new Date(Me);Ye.setHours(23,59,59,999);const ee=Ye-Me;d({hours:Math.floor(ee/36e5),minutes:Math.floor(ee%36e5/6e4),seconds:Math.floor(ee%6e4/1e3)}),g(60-Math.floor(ee%6e4/1e3))};D();const R=setInterval(D,1e3);return()=>clearInterval(R)},[]),x.useEffect(()=>{const D=setInterval(()=>b(R=>(R+1)%ag.length),8e3);return()=>clearInterval(D)},[]);const j=async D=>{const R=D.target.files?.[0];if(!(!R||!e?.id)){G(!0);try{const Me=Wa(Ga,`profilePhotos/${e.id}`);await Rh(Me,R);const Ye=await Lo(Me);await gs(We(ve,"clients",e.id),{photoURL:Ye}),T(Ye),i({photoURL:Ye})}catch(Me){console.error("Photo upload error:",Me)}finally{G(!1)}}},I=D=>{Te(!1),K(R=>R.includes(D)?R.filter(Me=>Me!==D):[...R,D])},V=(D,R)=>{Te(!1),K(Me=>{const Ye=Me.indexOf(D);if(Ye<0)return Me;const ee=Ye+R;if(ee<0||ee>=Me.length)return Me;const Se=[...Me];return[Se[Ye],Se[ee]]=[Se[ee],Se[Ye]],Se})},L=async()=>{Q(!0),C(null);try{const D=e||await l();if(!D?.id){C("Could not find your profile. Try refreshing."),Q(!1);return}await gs(We(ve,"clients",D.id),{dashboardWidgets:z}),i({dashboardWidgets:z}),Te(!0)}catch(D){console.error("Save config error:",D),C("Save failed  please try again.")}finally{Q(!1)}};return a.jsx(Xo,{children:a.jsxs("div",{className:"bldr-page",children:[a.jsxs("div",{className:"bldr-container",children:[a.jsxs("div",{className:"bldr-header",children:[a.jsx("button",{className:"bldr-back",onClick:()=>s("/client/core-buddy"),children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("h1",{className:"bldr-title",children:"Build Your Dashboard"})]}),a.jsxs("div",{className:"bldr-ring-container",children:[a.jsxs("div",{className:"bldr-ring",children:[a.jsx("svg",{className:"bldr-ring-svg",viewBox:"0 0 200 200",children:kE.map((D,R)=>a.jsx("line",{x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,className:`bldr-tick ${R<p?"elapsed":"remaining"}`,strokeWidth:D.thick?"3":"2"},R))}),a.jsxs("div",{className:"bldr-ring-center",children:[a.jsxs("div",{className:"bldr-ring-photo",onClick:()=>q.current?.click(),children:[a.jsx("img",{src:E||"/Logo.webp",alt:E?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`bldr-photo-overlay${P?" uploading":""}`,children:P?a.jsx("div",{className:"bldr-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:j,style:{display:"none"}})]}),!E&&!P&&a.jsx("div",{className:"bldr-photo-badge",onClick:()=>q.current?.click(),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),a.jsxs("div",{className:"bldr-countdown",children:[a.jsx("span",{className:"bldr-timer-digit",children:String(u.hours).padStart(2,"0")}),a.jsx("span",{className:"bldr-timer-colon",children:":"}),a.jsx("span",{className:"bldr-timer-digit",children:String(u.minutes).padStart(2,"0")}),a.jsx("span",{className:"bldr-timer-colon",children:":"}),a.jsx("span",{className:"bldr-timer-digit bldr-timer-sec",children:String(u.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"bldr-ring-label",children:"remaining today"}),a.jsxs("p",{className:"bldr-tagline",children:[ag[y].text," ",a.jsx("strong",{children:ag[y].bold})]})]}),a.jsxs("div",{className:"bldr-section",children:[a.jsx("h2",{className:"bldr-section-title",children:"Choose Your Widgets"}),a.jsx("p",{className:"bldr-section-desc",children:"The countdown ring and your profile always stay at the top. Pick what goes below."}),a.jsx("div",{className:"bldr-widgets-list",children:Zw.map(D=>{const R=z.includes(D.id),Me=z.indexOf(D.id);return a.jsxs("div",{className:`bldr-widget-card${R?" active":""}`,children:[a.jsx("div",{className:"bldr-widget-icon",children:S5(D.icon)}),a.jsxs("div",{className:"bldr-widget-info",children:[a.jsx("div",{className:"bldr-widget-label",children:D.label}),a.jsx("div",{className:"bldr-widget-desc",children:D.desc})]}),a.jsxs("div",{className:"bldr-widget-actions",children:[R&&a.jsxs("div",{className:"bldr-widget-order",children:[a.jsx("button",{className:"bldr-order-btn",onClick:()=>V(D.id,-1),disabled:Me===0,"aria-label":"Move up",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M18 15l-6-6-6 6"})})}),a.jsx("span",{className:"bldr-order-num",children:Me+1}),a.jsx("button",{className:"bldr-order-btn",onClick:()=>V(D.id,1),disabled:Me===z.length-1,"aria-label":"Move down",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M6 9l6 6 6-6"})})})]}),a.jsx("button",{className:`bldr-toggle${R?" on":""}`,onClick:()=>I(D.id),"aria-label":R?`Remove ${D.label}`:`Add ${D.label}`,children:a.jsx("div",{className:"bldr-toggle-thumb"})})]})]},D.id)})})]}),a.jsxs("div",{className:"bldr-save-wrap",children:[a.jsx("button",{className:`bldr-save-btn${oe?" saved":""}`,onClick:L,disabled:W||oe,children:W?"Saving...":oe?"Saved":"Save Dashboard"}),be&&a.jsx("p",{className:"bldr-save-error",children:be}),oe&&a.jsx("button",{className:"bldr-view-btn",onClick:()=>s("/client/core-buddy"),children:"View Dashboard"})]})]}),a.jsx(Gr,{active:"home"})]})})}const EE="@firebase/installations",m0="0.6.19";const TE=1e4,jE=`w:${m0}`,SE="FIS_v2",N5="https://firebaseinstallations.googleapis.com/v1",A5=3600*1e3,R5="installations",I5="Installations";const M5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fo=new Ho(R5,I5,M5);function CE(s){return s instanceof ui&&s.code.includes("request-failed")}function NE({projectId:s}){return`${N5}/projects/${s}/installations`}function AE(s){return{token:s.token,requestStatus:2,expiresIn:L5(s.expiresIn),creationTime:Date.now()}}async function RE(s,e){const i=(await e.json()).error;return Fo.create("request-failed",{requestName:s,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function IE({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function D5(s,{refreshToken:e}){const t=IE(s);return t.append("Authorization",O5(e)),t}async function ME(s){const e=await s();return e.status>=500&&e.status<600?s():e}function L5(s){return Number(s.replace("s","000"))}function O5(s){return`${SE} ${s}`}async function P5({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const i=NE(s),l=IE(s),u=e.getImmediate({optional:!0});if(u){const y=await u.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const d={fid:t,authVersion:SE,appId:s.appId,sdkVersion:jE},p={method:"POST",headers:l,body:JSON.stringify(d)},g=await ME(()=>fetch(i,p));if(g.ok){const y=await g.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:AE(y.authToken)}}else throw await RE("Create Installation",g)}function DE(s){return new Promise(e=>{setTimeout(e,s)})}function V5(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}const U5=/^[cdef][\w-]{21}$/,Gg="";function B5(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=z5(s);return U5.test(t)?t:Gg}catch{return Gg}}function z5(s){return V5(s).substr(0,22)}function Nf(s){return`${s.appName}!${s.appId}`}const LE=new Map;function OE(s,e){const t=Nf(s);PE(t,e),F5(t,e)}function PE(s,e){const t=LE.get(s);if(t)for(const i of t)i(e)}function F5(s,e){const t=q5();t&&t.postMessage({key:s,fid:e}),H5()}let Ro=null;function q5(){return!Ro&&"BroadcastChannel"in self&&(Ro=new BroadcastChannel("[Firebase] FID Change"),Ro.onmessage=s=>{PE(s.data.key,s.data.fid)}),Ro}function H5(){LE.size===0&&Ro&&(Ro.close(),Ro=null)}const $5="firebase-installations-database",W5=1,qo="firebase-installations-store";let og=null;function p0(){return og||(og=sf($5,W5,{upgrade:(s,e)=>{e===0&&s.createObjectStore(qo)}})),og}async function Zh(s,e){const t=Nf(s),l=(await p0()).transaction(qo,"readwrite"),u=l.objectStore(qo),d=await u.get(t);return await u.put(e,t),await l.done,(!d||d.fid!==e.fid)&&OE(s,e.fid),e}async function VE(s){const e=Nf(s),i=(await p0()).transaction(qo,"readwrite");await i.objectStore(qo).delete(e),await i.done}async function Af(s,e){const t=Nf(s),l=(await p0()).transaction(qo,"readwrite"),u=l.objectStore(qo),d=await u.get(t),p=e(d);return p===void 0?await u.delete(t):await u.put(p,t),await l.done,p&&(!d||d.fid!==p.fid)&&OE(s,p.fid),p}async function g0(s){let e;const t=await Af(s.appConfig,i=>{const l=G5(i),u=K5(s,l);return e=u.registrationPromise,u.installationEntry});return t.fid===Gg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function G5(s){const e=s||{fid:B5(),registrationStatus:0};return UE(e)}function K5(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Fo.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Y5(s,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Q5(s)}:{installationEntry:e}}async function Y5(s,e){try{const t=await P5(s,e);return Zh(s.appConfig,t)}catch(t){throw CE(t)&&t.customData.serverCode===409?await VE(s.appConfig):await Zh(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Q5(s){let e=await ex(s.appConfig);for(;e.registrationStatus===1;)await DE(100),e=await ex(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await g0(s);return i||t}return e}function ex(s){return Af(s,e=>{if(!e)throw Fo.create("installation-not-found");return UE(e)})}function UE(s){return X5(s)?{fid:s.fid,registrationStatus:0}:s}function X5(s){return s.registrationStatus===1&&s.registrationTime+TE<Date.now()}async function J5({appConfig:s,heartbeatServiceProvider:e},t){const i=Z5(s,t),l=D5(s,t),u=e.getImmediate({optional:!0});if(u){const y=await u.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const d={installation:{sdkVersion:jE,appId:s.appId}},p={method:"POST",headers:l,body:JSON.stringify(d)},g=await ME(()=>fetch(i,p));if(g.ok){const y=await g.json();return AE(y)}else throw await RE("Generate Auth Token",g)}function Z5(s,{fid:e}){return`${NE(s)}/${e}/authTokens:generate`}async function y0(s,e=!1){let t;const i=await Af(s.appConfig,u=>{if(!BE(u))throw Fo.create("not-registered");const d=u.authToken;if(!e&&nL(d))return u;if(d.requestStatus===1)return t=eL(s,e),u;{if(!navigator.onLine)throw Fo.create("app-offline");const p=rL(u);return t=tL(s,p),p}});return t?await t:i.authToken}async function eL(s,e){let t=await tx(s.appConfig);for(;t.authToken.requestStatus===1;)await DE(100),t=await tx(s.appConfig);const i=t.authToken;return i.requestStatus===0?y0(s,e):i}function tx(s){return Af(s,e=>{if(!BE(e))throw Fo.create("not-registered");const t=e.authToken;return iL(t)?{...e,authToken:{requestStatus:0}}:e})}async function tL(s,e){try{const t=await J5(s,e),i={...e,authToken:t};return await Zh(s.appConfig,i),t}catch(t){if(CE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await VE(s.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Zh(s.appConfig,i)}throw t}}function BE(s){return s!==void 0&&s.registrationStatus===2}function nL(s){return s.requestStatus===2&&!sL(s)}function sL(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+A5}function rL(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function iL(s){return s.requestStatus===1&&s.requestTime+TE<Date.now()}async function aL(s){const e=s,{installationEntry:t,registrationPromise:i}=await g0(e);return i?i.catch(console.error):y0(e).catch(console.error),t.fid}async function oL(s,e=!1){const t=s;return await lL(t),(await y0(t,e)).token}async function lL(s){const{registrationPromise:e}=await g0(s);e&&await e}function cL(s){if(!s||!s.options)throw lg("App Configuration");if(!s.name)throw lg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw lg(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function lg(s){return Fo.create("missing-app-config-values",{valueName:s})}const zE="installations",uL="installations-internal",dL=s=>{const e=s.getProvider("app").getImmediate(),t=cL(e),i=$o(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},hL=s=>{const e=s.getProvider("app").getImmediate(),t=$o(e,zE).getImmediate();return{getId:()=>aL(t),getToken:l=>oL(t,l)}};function fL(){ai(new Wr(zE,dL,"PUBLIC")),ai(new Wr(uL,hL,"PRIVATE"))}fL();hr(EE,m0);hr(EE,m0,"esm2020");const mL="/firebase-messaging-sw.js",pL="/firebase-cloud-messaging-push-scope",FE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gL="https://fcmregistrations.googleapis.com/v1",qE="google.c.a.c_id",yL="google.c.a.c_l",vL="google.c.a.ts",bL="google.c.a.e",nx=1e4;var sx;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(sx||(sx={}));var Tu;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(Tu||(Tu={}));function Zi(s){const e=new Uint8Array(s);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wL(s){const e="=".repeat((4-s.length%4)%4),t=(s+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),l=new Uint8Array(i.length);for(let u=0;u<i.length;++u)l[u]=i.charCodeAt(u);return l}const cg="fcm_token_details_db",xL=5,rx="fcm_token_object_Store";async function _L(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(cg))return null;let e=null;return(await sf(cg,xL,{upgrade:async(i,l,u,d)=>{if(l<2||!i.objectStoreNames.contains(rx))return;const p=d.objectStore(rx),g=await p.index("fcmSenderId").get(s);if(await p.clear(),!!g){if(l===2){const y=g;if(!y.auth||!y.p256dh||!y.endpoint)return;e={token:y.fcmToken,createTime:y.createTime??Date.now(),subscriptionOptions:{auth:y.auth,p256dh:y.p256dh,endpoint:y.endpoint,swScope:y.swScope,vapidKey:typeof y.vapidKey=="string"?y.vapidKey:Zi(y.vapidKey)}}}else if(l===3){const y=g;e={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Zi(y.auth),p256dh:Zi(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Zi(y.vapidKey)}}}else if(l===4){const y=g;e={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Zi(y.auth),p256dh:Zi(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Zi(y.vapidKey)}}}}}})).close(),await Op(cg),await Op("fcm_vapid_details_db"),await Op("undefined"),kL(e)?e:null}function kL(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:e}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const EL="firebase-messaging-database",TL=1,ju="firebase-messaging-store";let ug=null;function HE(){return ug||(ug=sf(EL,TL,{upgrade:(s,e)=>{e===0&&s.createObjectStore(ju)}})),ug}async function jL(s){const e=$E(s),i=await(await HE()).transaction(ju).objectStore(ju).get(e);if(i)return i;{const l=await _L(s.appConfig.senderId);if(l)return await v0(s,l),l}}async function v0(s,e){const t=$E(s),l=(await HE()).transaction(ju,"readwrite");return await l.objectStore(ju).put(e,t),await l.done,e}function $E({appConfig:s}){return s.appId}const SL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},sr=new Ho("messaging","Messaging",SL);async function CL(s,e){const t=await w0(s),i=WE(e),l={method:"POST",headers:t,body:JSON.stringify(i)};let u;try{u=await(await fetch(b0(s.appConfig),l)).json()}catch(d){throw sr.create("token-subscribe-failed",{errorInfo:d?.toString()})}if(u.error){const d=u.error.message;throw sr.create("token-subscribe-failed",{errorInfo:d})}if(!u.token)throw sr.create("token-subscribe-no-token");return u.token}async function NL(s,e){const t=await w0(s),i=WE(e.subscriptionOptions),l={method:"PATCH",headers:t,body:JSON.stringify(i)};let u;try{u=await(await fetch(`${b0(s.appConfig)}/${e.token}`,l)).json()}catch(d){throw sr.create("token-update-failed",{errorInfo:d?.toString()})}if(u.error){const d=u.error.message;throw sr.create("token-update-failed",{errorInfo:d})}if(!u.token)throw sr.create("token-update-no-token");return u.token}async function AL(s,e){const i={method:"DELETE",headers:await w0(s)};try{const u=await(await fetch(`${b0(s.appConfig)}/${e}`,i)).json();if(u.error){const d=u.error.message;throw sr.create("token-unsubscribe-failed",{errorInfo:d})}}catch(l){throw sr.create("token-unsubscribe-failed",{errorInfo:l?.toString()})}}function b0({projectId:s}){return`${gL}/projects/${s}/registrations`}async function w0({appConfig:s,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function WE({p256dh:s,auth:e,endpoint:t,vapidKey:i}){const l={web:{endpoint:t,auth:e,p256dh:s}};return i!==FE&&(l.web.applicationPubKey=i),l}const RL=10080*60*1e3;async function IL(s){const e=await DL(s.swRegistration,s.vapidKey),t={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:e.endpoint,auth:Zi(e.getKey("auth")),p256dh:Zi(e.getKey("p256dh"))},i=await jL(s.firebaseDependencies);if(i){if(LL(i.subscriptionOptions,t))return Date.now()>=i.createTime+RL?ML(s,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{await AL(s.firebaseDependencies,i.token)}catch(l){console.warn(l)}return ix(s.firebaseDependencies,t)}else return ix(s.firebaseDependencies,t)}async function ML(s,e){try{const t=await NL(s.firebaseDependencies,e),i={...e,token:t,createTime:Date.now()};return await v0(s.firebaseDependencies,i),t}catch(t){throw t}}async function ix(s,e){const i={token:await CL(s,e),createTime:Date.now(),subscriptionOptions:e};return await v0(s,i),i.token}async function DL(s,e){const t=await s.pushManager.getSubscription();return t||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:wL(e)})}function LL(s,e){const t=e.vapidKey===s.vapidKey,i=e.endpoint===s.endpoint,l=e.auth===s.auth,u=e.p256dh===s.p256dh;return t&&i&&l&&u}function ax(s){const e={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return OL(e,s),PL(e,s),VL(e,s),e}function OL(s,e){if(!e.notification)return;s.notification={};const t=e.notification.title;t&&(s.notification.title=t);const i=e.notification.body;i&&(s.notification.body=i);const l=e.notification.image;l&&(s.notification.image=l);const u=e.notification.icon;u&&(s.notification.icon=u)}function PL(s,e){e.data&&(s.data=e.data)}function VL(s,e){if(!e.fcmOptions&&!e.notification?.click_action)return;s.fcmOptions={};const t=e.fcmOptions?.link??e.notification?.click_action;t&&(s.fcmOptions.link=t);const i=e.fcmOptions?.analytics_label;i&&(s.fcmOptions.analyticsLabel=i)}function UL(s){return typeof s=="object"&&!!s&&qE in s}function BL(s){if(!s||!s.options)throw dg("App Configuration Object");if(!s.name)throw dg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=s;for(const i of e)if(!t[i])throw dg(i);return{appName:s.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function dg(s){return sr.create("missing-app-config-values",{valueName:s})}class zL{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const l=BL(e);this.firebaseDependencies={app:e,appConfig:l,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}async function FL(s){try{s.swRegistration=await navigator.serviceWorker.register(mL,{scope:pL}),s.swRegistration.update().catch(()=>{}),await qL(s.swRegistration)}catch(e){throw sr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function qL(s){return new Promise((e,t)=>{const i=setTimeout(()=>t(new Error(`Service worker not registered after ${nx} ms`)),nx),l=s.installing||s.waiting;s.active?(clearTimeout(i),e()):l?l.onstatechange=u=>{u.target?.state==="activated"&&(l.onstatechange=null,clearTimeout(i),e())}:(clearTimeout(i),t(new Error("No incoming service worker found.")))})}async function HL(s,e){if(!e&&!s.swRegistration&&await FL(s),!(!e&&s.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw sr.create("invalid-sw-registration");s.swRegistration=e}}async function $L(s,e){e?s.vapidKey=e:s.vapidKey||(s.vapidKey=FE)}async function GE(s,e){if(!navigator)throw sr.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw sr.create("permission-blocked");return await $L(s,e?.vapidKey),await HL(s,e?.serviceWorkerRegistration),IL(s)}async function WL(s,e,t){const i=GL(e);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[qE],message_name:t[yL],message_time:t[vL],message_device_time:Math.floor(Date.now()/1e3)})}function GL(s){switch(s){case Tu.NOTIFICATION_CLICKED:return"notification_open";case Tu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function KL(s,e){const t=e.data;if(!t.isFirebaseMessaging)return;s.onMessageHandler&&t.messageType===Tu.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(ax(t)):s.onMessageHandler.next(ax(t)));const i=t.data;UL(i)&&i[bL]==="1"&&await WL(s,t.messageType,i)}const ox="@firebase/messaging",lx="0.12.23";const YL=s=>{const e=new zL(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>KL(e,t)),e},QL=s=>{const e=s.getProvider("messaging").getImmediate();return{getToken:i=>GE(e,i)}};function XL(){ai(new Wr("messaging",YL,"PUBLIC")),ai(new Wr("messaging-internal",QL,"PRIVATE")),hr(ox,lx),hr(ox,lx,"esm2020")}async function JL(){try{await Bx()}catch{return!1}return typeof window<"u"&&Ux()&&IC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function ZL(s=Au()){return JL().then(e=>{if(!e)throw sr.create("unsupported-browser")},e=>{throw sr.create("indexed-db-unsupported")}),$o(un(s),"messaging").getImmediate()}async function eO(s,e){return s=un(s),GE(s,e)}XL();const tO="BNVNdqAPfJYhKBjF9qd-YPEMYIbecZLWiOGUF5tOBfNuv6P1iXgJS6IoS9dHLM5gp-WMrExfir0pCpkMzOdTWKY";let hg=null;function nO(){if(!hg)try{hg=ZL(Au())}catch{return null}return hg}function Kg(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}function cx(){return"Notification"in window?Notification.permission:"denied"}function sO(s){const e=Object.getOwnPropertyDescriptor(Notification,"permission");Object.defineProperty(Notification,"permission",{get:()=>"granted",configurable:!0});const t=()=>{e?Object.defineProperty(Notification,"permission",e):delete Notification.permission};try{const i=s();return i&&typeof i.then=="function"?i.then(l=>(t(),l),l=>{throw t(),l}):(t(),i)}catch(i){throw t(),i}}async function rO(s){if(!Kg())return null;try{const e=await Notification.requestPermission(),t=nO();if(!t)return console.error("Push: could not initialise Firebase Messaging"),null;const i=await navigator.serviceWorker.ready,l=e!=="granted";let u=null;const d=3;for(let p=1;p<=d;p++){try{const g=()=>eO(t,{vapidKey:tO,serviceWorkerRegistration:i});if(u=l?await sO(g):await g(),u)break}catch(g){console.warn(`Push getToken attempt ${p}/${d} failed:`,g)}p<d&&await new Promise(g=>setTimeout(g,1500*p))}return u&&s&&await gs(We(ve,"clients",s),{fcmTokens:_M(u)}),u}catch(e){return console.error("Push permission request failed:",e),null}}async function iO(s,e){if(!(!e||!s))try{await gs(We(ve,"clients",s),{fcmTokens:kM(e)})}catch(t){console.error("Token revoke failed:",t)}}const aO=[{key:"buddy_request",label:"Buddy requests",desc:"When someone sends you a buddy request"},{key:"buddy_accept",label:"Buddy accepted",desc:"When your buddy request is accepted"},{key:"like",label:"Likes",desc:"When someone likes your post"},{key:"comment",label:"Comments",desc:"When someone comments on your post"},{key:"mention",label:"Mentions",desc:"When someone @mentions you"}];function oO(){const{currentUser:s,clientData:e,updateClientData:t,logout:i,loading:l}=Cr(),{isDark:u,toggleTheme:d}=Mi(),p=Ws(),[g,y]=x.useState(!1),[b,E]=x.useState(null),[T,P]=x.useState(!1),[G,q]=x.useState("default"),[z,K]=x.useState({buddy_request:!0,buddy_accept:!0,like:!0,comment:!0,mention:!0}),[W,Q]=x.useState(null),oe=x.useCallback((C,j="info")=>{Q({message:C,type:j}),setTimeout(()=>Q(null),4e3)},[]);x.useEffect(()=>{!l&&!s&&p("/")},[l,s,p]),x.useEffect(()=>{if(!e)return;const C=e.notificationPrefs;C&&K(I=>({...I,...C}));const j=e.fcmTokens||[];j.length>0&&(y(!0),E(j[j.length-1])),q(cx())},[e]);const Te=async()=>{if(e){P(!0);try{if(g)b&&await iO(e.id,b),y(!1),E(null),t({fcmTokens:[]}),oe("Push notifications disabled","info");else{if(!Kg()){oe("Push notifications are not supported on this device","error");return}const C=await rO(e.id),j=cx();q(j),C?(y(!0),E(C),t({fcmTokens:[...e.fcmTokens||[],C]}),oe("Push notifications enabled!","success")):oe(j==="denied"?"Notifications blocked  enable them in your device settings, remove the app from your home screen and re-add it":j==="granted"?"Permission granted but setup failed  try closing and reopening the app, then toggle again":"Could not enable notifications  please try again","error")}}catch(C){console.error("Push toggle failed:",C),oe("Something went wrong  please try again","error")}finally{P(!1)}}},be=async C=>{if(!e)return;const j={...z,[C]:!z[C]};K(j);try{await gs(We(ve,"clients",e.id),{notificationPrefs:j}),t({notificationPrefs:j})}catch(I){console.error("Failed to save pref:",I),K(V=>({...V,[C]:!V[C]})),oe("Failed to save preference","error")}};return l||!e?a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})}):a.jsxs("div",{className:"cb-settings","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Back",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 12H5"}),a.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"settings-main",children:[a.jsx("h1",{className:"settings-title",children:"Settings"}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),"Notifications"]}),Kg()?a.jsxs("div",{className:"settings-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Push notifications"}),a.jsx("span",{className:"settings-row-desc",children:"Receive notifications even when the app is closed"})]}),a.jsx("button",{className:`settings-toggle${g?" on":""}${T?" loading":""}`,onClick:Te,disabled:T,"aria-label":"Toggle push notifications",children:a.jsx("span",{className:"settings-toggle-knob"})})]}):a.jsx("p",{className:"settings-hint",children:"Add the app to your home screen for background push notifications. In-app notifications still work below."}),a.jsxs("div",{className:"settings-sub-section",children:[a.jsx("span",{className:"settings-sub-title",children:"Notify me about"}),aO.map(C=>a.jsxs("div",{className:"settings-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:C.label}),a.jsx("span",{className:"settings-row-desc",children:C.desc})]}),a.jsx("button",{className:`settings-toggle${z[C.key]?" on":""}`,onClick:()=>be(C.key),"aria-label":`Toggle ${C.label}`,children:a.jsx("span",{className:"settings-toggle-knob"})})]},C.key))]})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Account"]}),a.jsxs("div",{className:"settings-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Dark mode"}),a.jsx("span",{className:"settings-row-desc",children:"Switch between light and dark themes"})]}),a.jsx("button",{className:`settings-toggle${u?" on":""}`,onClick:d,"aria-label":"Toggle dark mode",children:a.jsx("span",{className:"settings-toggle-knob"})})]}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Email"}),a.jsx("span",{className:"settings-row-desc",children:e?.email||""})]})}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Plan"}),a.jsx("span",{className:"settings-row-desc",style:{textTransform:"capitalize"},children:e?.tier||"free"})]})})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Support & Feedback"]}),a.jsxs("a",{href:"mailto:ross@mindcorefitness.com?subject=Core%20Buddy%20Bug%20Report",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Report a Bug"}),a.jsx("span",{className:"settings-row-desc",children:"Found something not working? Let us know"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]}),a.jsxs("a",{href:"mailto:ross@mindcorefitness.com?subject=Core%20Buddy%20Feature%20Request",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Request a Feature"}),a.jsx("span",{className:"settings-row-desc",children:"Have an idea to improve Core Buddy?"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]}),a.jsxs("a",{href:"mailto:ross@mindcorefitness.com?subject=Core%20Buddy%20Feedback",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"General Feedback"}),a.jsx("span",{className:"settings-row-desc",children:"We'd love to hear from you"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Contact Email"}),a.jsx("span",{className:"settings-row-desc",children:"ross@mindcorefitness.com"})]})})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),a.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Legal"]}),a.jsxs("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Privacy Policy"}),a.jsx("span",{className:"settings-row-desc",children:"How we collect, use, and protect your data"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]}),a.jsxs("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Terms & Conditions"}),a.jsx("span",{className:"settings-row-desc",children:"Terms of use for Core Buddy"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"About"]}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Core Buddy"}),a.jsx("span",{className:"settings-row-desc",children:"Food. Habits. Move."})]})}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Version"}),a.jsx("span",{className:"settings-row-desc",children:"1.0.0"})]})}),a.jsxs("a",{href:"/core-buddy",target:"_blank",rel:"noopener noreferrer",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Visit Our Website"}),a.jsx("span",{className:"settings-row-desc",children:"mindcorefitness.com"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]})]}),W&&a.jsx("div",{className:`settings-toast ${W.type}`,children:W.message}),a.jsx(Gr,{active:"home"})]})}const vh=[{id:"starter_streak",name:"Starter Streak",description:"Complete 5 workouts in 7 days",goal:5,duration:7,type:"workouts",difficulty:"easy",icon:"flame",premium:!0},{id:"consistency_king",name:"Consistency King",description:"Complete 12 workouts in 30 days",goal:12,duration:30,type:"workouts",difficulty:"medium",icon:"crown",premium:!0},{id:"thirty_in_thirty",name:"30 in 30",description:"Complete 30 workouts in 30 days",goal:30,duration:30,type:"workouts",difficulty:"hard",icon:"fire",premium:!0},{id:"minute_master",name:"Minute Master",description:"Train for 300 total minutes in 30 days",goal:300,duration:30,type:"minutes",difficulty:"medium",icon:"clock",premium:!0},{id:"habit_machine",name:"Habit Machine",description:"Hit all daily habits for 7 days straight",goal:7,duration:7,type:"habits_perfect",difficulty:"medium",icon:"check",premium:!0},{id:"iron_will",name:"Iron Will",description:"Work out every day for 14 days straight",goal:14,duration:14,type:"streak",difficulty:"hard",icon:"shield",premium:!0}];function fg({icon:s,size:e=28}){const t={width:e,height:e};switch(s){case"flame":return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"})});case"crown":return a.jsxs("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7z"}),a.jsx("path",{d:"M3 20h18"})]});case"fire":return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"})});case"clock":return a.jsxs("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]});case"check":return a.jsxs("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]});case"shield":return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})});default:return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("circle",{cx:"12",cy:"12",r:"10"})})}}function ux({progress:s,goal:e,size:t=160,stroke:i=10,label:l}){const u=Math.min(s/e,1),d=(t-i)/2,p=2*Math.PI*d,g=p*(1-u);return a.jsxs("div",{className:"ch-ring-wrap",children:[a.jsxs("svg",{width:t,height:t,className:"ch-ring-svg",children:[a.jsx("circle",{cx:t/2,cy:t/2,r:d,fill:"none",stroke:"var(--ch-ring-bg)",strokeWidth:i}),a.jsx("circle",{cx:t/2,cy:t/2,r:d,fill:"none",stroke:"var(--color-primary)",strokeWidth:i,strokeDasharray:p,strokeDashoffset:g,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.6s ease",transform:"rotate(-90deg)",transformOrigin:"50% 50%"}})]}),a.jsxs("div",{className:"ch-ring-centre",children:[a.jsxs("span",{className:"ch-ring-num",children:[s,a.jsxs("span",{className:"ch-ring-slash",children:[" / ",e]})]}),l&&a.jsx("span",{className:"ch-ring-label",children:l})]})]})}const dx={easy:"#34C759",medium:"#FF9500",hard:"#FF3B30"};async function lO(s,e,t){const i=t instanceof Rt?t:Rt.fromDate(new Date(t)),l=Rt.now();switch(s.type){case"workouts":{const u=Qt(dt(ve,"workoutLogs"),wt("clientId","==",e),wt("completedAt",">=",i),wt("completedAt","<=",l));return(await $t(u)).size}case"minutes":{const u=Qt(dt(ve,"workoutLogs"),wt("clientId","==",e),wt("completedAt",">=",i),wt("completedAt","<=",l));return(await $t(u)).docs.reduce((p,g)=>p+(g.data().duration||0),0)}case"habits_perfect":{const u=i.toDate().toISOString().slice(0,10),d=new Date().toISOString().slice(0,10),p=Qt(dt(ve,"habitLogs"),wt("clientId","==",e));return(await $t(p)).docs.filter(y=>{const b=y.data().date;if(b<u||b>d)return!1;const E=y.data().habits||{};return Object.values(E).length>0&&Object.values(E).every(T=>T===!0)}).length}case"streak":{const u=Qt(dt(ve,"workoutLogs"),wt("clientId","==",e),wt("completedAt",">=",i),wt("completedAt","<=",l)),d=await $t(u),p=new Set(d.docs.map(E=>E.data().completedAt.toDate().toISOString().slice(0,10)));let g=0;const y=new Date(i.toDate()),b=new Date;for(;p.has(y.toISOString().slice(0,10))&&y<=b;)g++,y.setDate(y.getDate()+1);return g}default:return 0}}function cO(){const{currentUser:s,clientData:e,loading:t}=Cr(),{isDark:i,toggleTheme:l}=Mi(),{isPremium:u}=ic(),d=Ws(),[p,g]=x.useState(null),[y,b]=x.useState(null),[E,T]=x.useState(0),[P,G]=x.useState(0),[q,z]=x.useState(!0),[K,W]=x.useState(!1),[Q,oe]=x.useState(null),[Te,be]=x.useState(null),[C,j]=x.useState(!1),[I,V]=x.useState(null),L=x.useCallback((Ce,X="info")=>{be({message:Ce,type:X}),setTimeout(()=>be(null),4e3)},[]);x.useEffect(()=>{!t&&!s&&d("/")},[t,s,d]);const D=x.useCallback(async()=>{if(e){z(!0);try{const Ce=Qt(dt(ve,"userChallenges"),wt("clientId","==",e.id),wt("status","==","active")),X=await $t(Ce);if(X.empty)g(null),b(null);else{const we=X.docs[0],ke={id:we.id,...we.data()},xe=vh.find(Ee=>Ee.id===ke.challengeId);if(ke.endDate.toDate()<new Date)await gs(We(ve,"userChallenges",we.id),{status:"failed"}),g(null),b(null),L("Challenge expired  time ran out","error");else if(g(ke),b(xe),xe){const Ee=await lO(xe,e.id,ke.startDate);if(T(Ee),Ee>=xe.goal&&ke.status==="active"){if(await gs(We(ve,"userChallenges",we.id),{status:"completed",completedAt:Ps()}),j(!0),g(Pe=>Pe?{...Pe,status:"completed"}:null),!ke.badgeAwarded){const Pe=zl.find(et=>et.id===xe.id);if(Pe)try{const et=We(ve,"coreBuddyBadges",e.id),Oe=await qs(et),Lt=Oe.exists()?Oe.data().earned||[]:[];if(!Lt.some(Xt=>Xt.id===Pe.id)){const Xt={id:Pe.id,earnedAt:new Date().toISOString()};Oe.exists()?await gs(et,{earned:[...Lt,Xt]}):await Ts(et,{earned:[Xt]})}await gs(We(ve,"userChallenges",we.id),{badgeAwarded:!0}),await jr(dt(ve,"posts"),{authorId:e.id,authorName:e.name||"Anonymous",authorPhotoURL:e.photoURL||null,type:"badge_earned",metadata:{title:Pe.name,badgeDesc:Pe.desc,badgeId:Pe.id},createdAt:Ps(),likeCount:0,commentCount:0}),V(Pe)}catch(et){console.error("Badge award failed:",et)}}typeof fbq=="function"&&fbq("trackCustom","ChallengeCompleted",{challenge_name:xe.name,challenge_type:xe.type,duration_days:xe.duration})}}}const O=Qt(dt(ve,"userChallenges"),wt("clientId","==",e.id),wt("status","==","completed")),re=await $t(O);G(re.size)}catch(Ce){console.error("Failed to load challenges:",Ce)}finally{z(!1)}}},[e,L]);x.useEffect(()=>{D()},[D]);const R=async Ce=>{if(!(!e||K)){W(!0);try{const X=vh.find(xe=>xe.id===Ce);if(!X)return;const O=Qt(dt(ve,"userChallenges"),wt("clientId","==",e.id),wt("status","==","active"));if(!(await $t(O)).empty){oe(null),L("You already have an active challenge","info"),await D();return}const we=Rt.now(),ke=Rt.fromDate(new Date(Date.now()+X.duration*864e5));await jr(dt(ve,"userChallenges"),{clientId:e.id,challengeId:Ce,startDate:we,endDate:ke,status:"active",completedAt:null,badgeAwarded:!1,createdAt:Ps()}),oe(null),L(`${X.name} started  let's go!`,"success"),await D()}catch(X){console.error("Start challenge failed:",X),X?.code==="permission-denied"?L("Permission denied  please re-login and try again","error"):L("Something went wrong  try again","error")}finally{W(!1)}}},Me=async()=>{if(!(!p||K)){W(!0);try{await gs(We(ve,"userChallenges",p.id),{status:"failed"}),g(null),b(null),T(0),oe(null),L("Challenge abandoned","info"),await D()}catch(Ce){console.error("Give up failed:",Ce),L("Something went wrong","error")}finally{W(!1)}}},Ye=p?.endDate?Math.max(0,Math.ceil((p.endDate.toDate()-new Date)/864e5)):0,ee=()=>{if(!y||!p)return"";const Ce=Math.max(1,Math.ceil((Date.now()-p.startDate.toDate())/864e5)),X=y.goal/y.duration*Ce;return E>=X*1.15?"Ahead":E>=X*.85?"On Track":"Behind"};if(t||!e)return a.jsx("div",{className:"ch-loading",children:a.jsx("div",{className:"ch-spinner"})});const Se=p&&p.status==="active"&&y,Ie=C||p&&p.status==="completed";return a.jsxs("div",{className:"ch-page","data-theme":i?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Back",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 12H5"}),a.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:l,"aria-label":"Toggle theme",children:i?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ch-main",children:[a.jsx("h1",{className:"ch-title",children:"Challenges"}),a.jsx("p",{className:"ch-subtitle",children:"Push yourself with timed fitness challenges"}),q?a.jsx("div",{className:"ch-loading",children:a.jsx("div",{className:"ch-spinner"})}):Ie?a.jsxs("div",{className:"ch-completed-section",children:[a.jsx(ux,{progress:y?.goal||1,goal:y?.goal||1,label:"Complete"}),a.jsx("div",{className:"ch-completed-pulse"}),a.jsx("h2",{className:"ch-completed-heading",children:"Challenge Complete!"}),a.jsx("p",{className:"ch-completed-name",children:y?.name}),a.jsxs("p",{className:"ch-completed-count",children:[P+(C?1:0)," challenge",P!==0?"s":""," completed"]}),a.jsx("button",{className:"ch-btn ch-btn-primary",onClick:()=>{j(!1),g(null),b(null),D()},children:"Choose Next Challenge"})]}):Se?a.jsxs("div",{className:"ch-active-section",children:[a.jsx(ux,{progress:E,goal:y.goal,label:y.type==="minutes"?"minutes":y.type==="streak"?"day streak":y.type==="habits_perfect"?"perfect days":"workouts"}),a.jsxs("div",{className:"ch-active-info",children:[a.jsxs("div",{className:"ch-info-row",children:[a.jsxs("div",{className:"ch-info-item",children:[a.jsx("span",{className:"ch-info-val",children:Ye}),a.jsx("span",{className:"ch-info-key",children:"days left"})]}),a.jsx("div",{className:`ch-pace ch-pace-${ee().toLowerCase().replace(" ","")}`,children:ee()})]}),a.jsx("h2",{className:"ch-active-name",children:y.name}),a.jsx("p",{className:"ch-active-desc",children:y.description})]}),a.jsx("button",{className:"ch-give-up",onClick:()=>oe("giveup"),children:"Give Up"}),a.jsxs("div",{className:"ch-browse-locked",children:[a.jsx("p",{className:"ch-browse-locked-note",children:"Complete your current challenge to start a new one"}),a.jsx("div",{className:"ch-grid ch-grid-dimmed",children:vh.filter(Ce=>Ce.id!==y.id).map(Ce=>a.jsxs("div",{className:"ch-card ch-card-locked",children:[a.jsx("div",{className:"ch-card-icon",children:a.jsx(fg,{icon:Ce.icon,size:24})}),a.jsxs("div",{className:"ch-card-body",children:[a.jsx("h3",{children:Ce.name}),a.jsx("p",{children:Ce.description})]})]},Ce.id))})]})]}):a.jsxs("div",{className:"ch-browse-section",children:[!u&&a.jsxs("div",{className:"ch-premium-banner",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{children:"Challenges are a premium feature"}),a.jsx("button",{className:"ch-upgrade-link",onClick:()=>d("/upgrade"),children:"Upgrade"})]}),a.jsx("div",{className:"ch-grid",children:vh.map(Ce=>a.jsxs("button",{className:`ch-card${u?"":" ch-card-gated"}`,onClick:()=>u?oe(Ce):d("/upgrade"),children:[!u&&a.jsx("div",{className:"ch-lock-overlay",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("div",{className:"ch-card-icon",children:a.jsx(fg,{icon:Ce.icon})}),a.jsxs("div",{className:"ch-card-body",children:[a.jsx("h3",{children:Ce.name}),a.jsx("p",{children:Ce.description}),a.jsxs("div",{className:"ch-card-tags",children:[a.jsxs("span",{className:"ch-tag ch-tag-dur",children:[Ce.duration," days"]}),a.jsx("span",{className:"ch-tag ch-tag-diff",style:{color:dx[Ce.difficulty]},children:Ce.difficulty})]})]}),a.jsx("svg",{className:"ch-card-arrow",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]},Ce.id))})]})]}),Q&&Q!=="giveup"&&a.jsx("div",{className:"ch-modal-backdrop",onClick:()=>!K&&oe(null),children:a.jsxs("div",{className:"ch-modal",onClick:Ce=>Ce.stopPropagation(),children:[a.jsx("div",{className:"ch-modal-icon",children:a.jsx(fg,{icon:Q.icon,size:36})}),a.jsx("h2",{children:Q.name}),a.jsx("p",{children:Q.description}),a.jsxs("div",{className:"ch-modal-details",children:[a.jsxs("span",{children:[Q.duration," days"]}),a.jsx("span",{style:{color:dx[Q.difficulty]},children:Q.difficulty})]}),a.jsx("button",{className:"ch-btn ch-btn-primary",onClick:()=>R(Q.id),disabled:K,children:K?"Starting...":"Start Challenge"}),a.jsx("button",{className:"ch-btn ch-btn-secondary",onClick:()=>oe(null),disabled:K,children:"Cancel"})]})}),Q==="giveup"&&a.jsx("div",{className:"ch-modal-backdrop",onClick:()=>!K&&oe(null),children:a.jsxs("div",{className:"ch-modal",onClick:Ce=>Ce.stopPropagation(),children:[a.jsx("h2",{children:"Give Up?"}),a.jsx("p",{children:"Your progress will be lost and this challenge will be marked as failed."}),a.jsx("button",{className:"ch-btn ch-btn-danger",onClick:Me,disabled:K,children:K?"Abandoning...":"Yes, Give Up"}),a.jsx("button",{className:"ch-btn ch-btn-secondary",onClick:()=>oe(null),disabled:K,children:"Keep Going"})]})}),I&&a.jsxs("div",{className:"cb-celebration-overlay",onClick:()=>V(null),children:[a.jsx("div",{className:"cb-confetti-container",children:Array.from({length:24}).map((Ce,X)=>a.jsx("div",{className:"cb-confetti-piece",style:{"--angle":`${X/24*360}deg`,"--distance":`${80+Math.random()*60}px`,"--drift":`${(Math.random()-.5)*40}px`,"--size":`${4+Math.random()*4}px`,"--color":["#FFD700","#FF6B6B","#4ECDC4","#A1C4FD","#F093FB","#FFECD2"][X%6],"--delay":`${Math.random()*.3}s`}},X))}),a.jsxs("div",{className:"cb-celebration-content",children:[a.jsx("div",{className:"cb-celebration-glow"}),I.img&&a.jsx("img",{src:I.img,alt:I.name,className:"cb-celebration-badge-img"}),a.jsx("h2",{className:"cb-celebration-title",children:"Badge Unlocked!"}),a.jsx("p",{className:"cb-celebration-name",children:I.name}),a.jsx("p",{className:"cb-celebration-desc",children:I.desc}),a.jsx("button",{className:"cb-celebration-dismiss",children:"Tap to dismiss"})]})]}),Te&&a.jsx("div",{className:`ch-toast ch-toast-${Te.type}`,children:Te.message}),a.jsx(Gr,{})]})}const uO={workouts:"Workouts",streaks:"Streaks",pbs:"Personal Bests",nutrition:"Nutrition",leaderboard:"Leaderboard",habits:"Habits",challenges:"Challenges"},dO=["workouts","streaks","pbs","nutrition","leaderboard","habits","challenges"];function hO(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Cr(),{isDark:l,toggleTheme:u}=Mi(),d=Ws(),[p,g]=x.useState(new Set),[y,b]=x.useState({}),[E,T]=x.useState(!0),[P,G]=x.useState(null);x.useEffect(()=>{!i&&(!s||!e)&&d("/")},[s,e,i,d]),x.useEffect(()=>{t&&(async()=>{T(!0);try{const K=await qs(We(ve,"coreBuddyBadges",t.id));if(K.exists()){const W=K.data().earned||[];g(new Set(W.map(oe=>oe.id)));const Q={};W.forEach(oe=>{Q[oe.id]=oe}),b(Q)}}catch(K){console.error("Failed to load badges:",K)}finally{T(!1)}})()},[t]);const q=dO.map(K=>({key:K,label:uO[K],badges:zl.filter(W=>W.category===K)})).filter(K=>K.badges.length>0),z=zl.filter(K=>p.has(K.id)).length;return i||!t?a.jsx("div",{className:"bdg-loading",children:a.jsx("div",{className:"bdg-spinner"})}):a.jsxs("div",{className:"bdg-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Back",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 12H5"}),a.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdg-main",children:[a.jsx("h1",{className:"bdg-title",children:"Badges"}),a.jsxs("p",{className:"bdg-subtitle",children:[z," / ",zl.length," earned"]}),E?a.jsx("div",{className:"bdg-loading-inline",children:a.jsx("div",{className:"bdg-spinner"})}):q.map(K=>a.jsxs("div",{className:"bdg-category",children:[a.jsx("h2",{className:"bdg-category-title",children:K.label}),a.jsx("div",{className:"bdg-grid",children:K.badges.map(W=>{const Q=p.has(W.id);return a.jsxs("button",{className:`bdg-item${Q?" earned":" locked"}`,onClick:()=>G(W),children:[a.jsxs("div",{className:"bdg-img-wrap",children:[W.img?a.jsx("img",{src:W.img,alt:W.name,className:"bdg-img"}):a.jsx("div",{className:"bdg-img-placeholder",children:a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M9 14l-4 8h14l-4-8"})]})}),!Q&&a.jsx("div",{className:"bdg-lock-overlay",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})})]}),a.jsx("span",{className:"bdg-name",children:W.name})]},W.id)})})]},K.key))]}),P&&a.jsx("div",{className:"bdg-modal-backdrop",onClick:()=>G(null),children:a.jsxs("div",{className:"bdg-modal",onClick:K=>K.stopPropagation(),children:[a.jsx("div",{className:`bdg-modal-img-wrap${p.has(P.id)?" earned":" locked"}`,children:P.img?a.jsx("img",{src:P.img,alt:P.name,className:"bdg-modal-img"}):a.jsx("div",{className:"bdg-modal-placeholder",children:a.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M9 14l-4 8h14l-4-8"})]})})}),a.jsx("h2",{className:"bdg-modal-name",children:P.name}),a.jsx("p",{className:"bdg-modal-desc",children:P.desc}),p.has(P.id)?a.jsxs("span",{className:"bdg-modal-status earned",children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})}),"Earned",y[P.id]?.earnedAt?`  ${new Date(y[P.id].earnedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:""]}):a.jsxs("span",{className:"bdg-modal-status locked",children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),"Locked"]}),a.jsx("button",{className:"bdg-modal-close",onClick:()=>G(null),children:"Close"})]})}),a.jsx(Gr,{active:"badges"})]})}const fO=x.lazy(()=>$s(()=>import("./Dashboard-Y1rPzKsx.js"),__vite__mapDeps([0,1,2]))),mO=x.lazy(()=>$s(()=>import("./AddClient-BARRBQHp.js"),__vite__mapDeps([3,4]))),pO=x.lazy(()=>$s(()=>import("./ClientDashboard-tK1ksa3e.js"),__vite__mapDeps([5,1,6]))),gO=x.lazy(()=>$s(()=>import("./ClientForms-CnT_-9kM.js"),__vite__mapDeps([7,8,6]))),yO=x.lazy(()=>$s(()=>import("./ClientTools-T-ZjUaKm.js"),__vite__mapDeps([9,10,6]))),vO=x.lazy(()=>$s(()=>import("./MacroCalculator-uAldcflN.js"),__vite__mapDeps([11,10,6]))),bO=x.lazy(()=>$s(()=>import("./ProteinSnacks-CVBP5otY.js"),__vite__mapDeps([12,10,6]))),wO=x.lazy(()=>$s(()=>import("./DailyMotivation-DoJc80kQ.js"),__vite__mapDeps([13,10,6]))),xO=x.lazy(()=>$s(()=>import("./CircuitDashboard-DZMcAQy8.js"),__vite__mapDeps([14,15]))),_O=x.lazy(()=>$s(()=>import("./CircuitBooking-wPhPd7pE.js"),__vite__mapDeps([16,17,15]))),kO=x.lazy(()=>$s(()=>import("./PersonalBests-PzbFg2P1.js"),__vite__mapDeps([18,19,6]))),EO=x.lazy(()=>$s(()=>import("./Leaderboard-DKZiixOe.js"),__vite__mapDeps([20,21]))),TO=x.lazy(()=>$s(()=>import("./UpgradePage-CRoyWHAo.js"),__vite__mapDeps([22,23,24]))),jO=x.lazy(()=>$s(()=>import("./SignUp-_Uw1r1tk.js"),[])),SO=x.lazy(()=>$s(()=>import("./Onboarding-CHCajmWl.js"),__vite__mapDeps([25,23,26])));function CO({children:s}){const{pathname:e}=Ii();return x.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),x.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function NO(){const s=Ws();return x.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function AO(){return a.jsx(YD,{children:a.jsx(KD,{children:a.jsx(e3,{children:a.jsxs(rC,{basename:"/login",children:[a.jsx(NO,{}),a.jsx(CO,{children:a.jsx(x.Suspense,{fallback:a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:a.jsx("div",{style:{width:36,height:36,border:"3px solid var(--color-primary-light)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"app-spin .7s linear infinite"}})}),children:a.jsxs(MS,{children:[a.jsx(wn,{path:"/",element:a.jsx(s3,{})}),a.jsx(wn,{path:"/dashboard",element:a.jsx(fO,{})}),a.jsx(wn,{path:"/add-client",element:a.jsx(mO,{})}),a.jsx(wn,{path:"/client",element:a.jsx(pO,{})}),a.jsx(wn,{path:"/client/forms",element:a.jsx(gO,{})}),a.jsx(wn,{path:"/client/tools",element:a.jsx(yO,{})}),a.jsx(wn,{path:"/client/tools/macros",element:a.jsx(vO,{})}),a.jsx(wn,{path:"/client/tools/snacks",element:a.jsx(bO,{})}),a.jsx(wn,{path:"/client/tools/motivation",element:a.jsx(wO,{})}),a.jsx(wn,{path:"/client/personal-bests",element:a.jsx(kO,{})}),a.jsx(wn,{path:"/client/circuit",element:a.jsx(xO,{})}),a.jsx(wn,{path:"/client/circuit/booking",element:a.jsx(_O,{})}),a.jsx(wn,{path:"/client/core-buddy",element:a.jsx(A3,{})}),a.jsx(wn,{path:"/client/core-buddy/nutrition",element:a.jsx(fh,{feature:"nutrition",children:a.jsx(M3,{})})}),a.jsx(wn,{path:"/client/core-buddy/workouts",element:a.jsx(p5,{})}),a.jsx(wn,{path:"/client/core-buddy/consistency",element:a.jsx(fh,{feature:"consistency",children:a.jsx(k5,{})})}),a.jsx(wn,{path:"/client/core-buddy/buddies",element:a.jsx(fh,{feature:"buddies",children:a.jsx(E5,{})})}),a.jsx(wn,{path:"/client/core-buddy/builder",element:a.jsx(C5,{})}),a.jsx(wn,{path:"/client/core-buddy/profile/:userId",element:a.jsx(j5,{})}),a.jsx(wn,{path:"/client/core-buddy/settings",element:a.jsx(oO,{})}),a.jsx(wn,{path:"/client/core-buddy/challenges",element:a.jsx(cO,{})}),a.jsx(wn,{path:"/client/core-buddy/badges",element:a.jsx(hO,{})}),a.jsx(wn,{path:"/client/leaderboard",element:a.jsx(fh,{feature:"leaderboard",children:a.jsx(EO,{})})}),a.jsx(wn,{path:"/signup",element:a.jsx(jO,{})}),a.jsx(wn,{path:"/onboarding",element:a.jsx(SO,{})}),a.jsx(wn,{path:"/upgrade",element:a.jsx(TO,{})}),a.jsx(wn,{path:"*",element:a.jsx(Tx,{to:"/",replace:!0})})]})})})]})})})})}Mj.createRoot(document.getElementById("root")).render(a.jsx(x.StrictMode,{children:a.jsx(AO,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").then(s=>{setInterval(()=>s.update(),3600*1e3)}).catch(s=>console.warn("SW registration failed:",s))});export{IO as A,Ps as B,Gr as C,Xo as P,Rt as T,jr as a,Er as b,dt as c,ve as d,We as e,GA as f,$t as g,JA as h,Ts as i,a as j,qs as k,Cr as l,Mi as m,Ws as n,ku as o,kE as p,Qt as q,x as r,DO as s,RO as t,gs as u,LO as v,wt as w,ic as x,n3 as y,t3 as z};
