import{r as s,l as T,n as U,A as D,j as e,z as k,D as F}from"./index-DbfKrWrI.js";function H(){const[m,P]=s.useState(""),[p,q]=s.useState(""),[o,B]=s.useState(""),[h,E]=s.useState(""),[f,n]=s.useState(""),[x,y]=s.useState(!1),[c,j]=s.useState(!1),[d,b]=s.useState(!1),[u,l]=s.useState(""),[v,w]=s.useState(!1),[C,N]=s.useState(!1),{signup:L,loginWithGoogle:M,loginWithApple:z,currentUser:a,isClient:S,clientData:A,loading:g}=T(),i=U();if(s.useEffect(()=>{!g&&a&&S&&(a.emailVerified?i(D(A)):j(!0))},[g,a,S,A,i]),s.useEffect(()=>{if(!c||!a)return;const t=setInterval(async()=>{try{await a.reload(),a.emailVerified&&i("/onboarding")}catch{}},3e3);return()=>clearInterval(t)},[c,a,i]),g)return null;const R=async t=>{if(t.preventDefault(),n(""),o.length<6)return n("Password must be at least 6 characters");if(o!==h)return n("Passwords do not match");y(!0);try{const r=await L(m,p,o);await F(r.user),typeof fbq=="function"&&fbq("track","CompleteRegistration",{content_name:"Core Buddy Signup",content_category:"Fitness App",status:!0}),j(!0)}catch(r){r.code==="auth/email-already-in-use"?n("An account with this email already exists"):n(r.message||"Failed to create account")}finally{y(!1)}},V=async()=>{if(!(!a||d)){b(!0),l("");try{await F(a),l("Verification email sent! Check your inbox.")}catch(t){t.code==="auth/too-many-requests"?l("Too many attempts â€” please wait a minute and try again."):l("Failed to resend. Please try again.")}finally{b(!1)}}},G=async()=>{n(""),w(!0);try{await M(),typeof fbq=="function"&&fbq("track","CompleteRegistration",{content_name:"Core Buddy Signup - Google",content_category:"Fitness App",status:!0}),i("/onboarding")}catch(t){t.code!=="auth/popup-closed-by-user"&&n(t.message||"Failed to sign up with Google"),w(!1)}},_=async()=>{n(""),N(!0);try{await z(),typeof fbq=="function"&&fbq("track","CompleteRegistration",{content_name:"Core Buddy Signup - Apple",content_category:"Fitness App",status:!0}),i("/onboarding")}catch(t){t.code!=="auth/popup-closed-by-user"&&n(t.message||"Failed to sign up with Apple"),N(!1)}};return c?e.jsxs("div",{className:"login-container",children:[e.jsx(k,{className:"login-theme-toggle"}),e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),e.jsx("p",{children:"Verify Your Email"})]}),e.jsxs("p",{style:{textAlign:"center",opacity:.8,margin:"1rem 0"},children:["We've sent a verification link to ",e.jsx("strong",{children:a?.email}),". Please check your inbox and click the link to continue."]}),e.jsx("p",{style:{textAlign:"center",opacity:.5,fontSize:"0.85rem",margin:"0.5rem 0 1.5rem"},children:"This page will automatically continue once you verify."}),u&&e.jsx("div",{className:u.includes("sent")?"success-message":"error-message",style:{marginBottom:"1rem"},children:u}),e.jsx("button",{type:"button",className:"login-btn",onClick:V,disabled:d,style:{marginBottom:"0.5rem"},children:d?"Sending...":"Resend Verification Email"}),e.jsx("button",{type:"button",className:"forgot-link",onClick:()=>i("/"),children:"Back to Login"})]})]}):e.jsxs("div",{className:"login-container",children:[e.jsx(k,{className:"login-theme-toggle"}),e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),e.jsx("p",{children:"Create Your Free Account"})]}),f&&e.jsx("div",{className:"error-message",children:f}),e.jsxs("button",{type:"button",className:"google-btn",onClick:G,disabled:v,children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 48 48",children:[e.jsx("path",{fill:"#4285F4",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),e.jsx("path",{fill:"#34A853",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),e.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),e.jsx("path",{fill:"#EA4335",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.18 1.48-4.96 2.35-8.16 2.35-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"})]}),v?"Signing up...":"Sign up with Google"]}),e.jsxs("button",{type:"button",className:"apple-btn",onClick:_,disabled:C,children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),C?"Signing up...":"Sign up with Apple"]}),e.jsx("div",{className:"login-divider",children:e.jsx("span",{children:"or"})}),e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",value:m,onChange:t=>P(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:p,onChange:t=>q(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:o,onChange:t=>B(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:h,onChange:t=>E(t.target.value),required:!0})]}),e.jsx("button",{type:"submit",className:"login-btn",disabled:x,children:x?"Creating Account...":"Create Free Account"})]}),e.jsx("button",{type:"button",className:"forgot-link",onClick:()=>i("/"),children:"Already have an account? Log in"}),e.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})]})}export{H as default};
