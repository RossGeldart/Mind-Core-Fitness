const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-BdJN7bfA.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-rgmfVuDl.js","assets/AddClient-DH1OFzHo.css","assets/ClientDashboard-B3SmPV61.js","assets/ClientDashboard-DWAc5Nzm.css","assets/ClientForms-CqUAgH52.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-KC_eW3HL.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-DH-AQO8R.js","assets/ProteinSnacks-DcKY8_PL.js","assets/DailyMotivation-D8tn3Ujx.js","assets/PersonalBests-BmtuJN48.js","assets/PersonalBests-CLy1OZpT.css","assets/CircuitDashboard-CPeaB8t0.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-C62Tq1kI.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-BywbDisI.js","assets/Leaderboard-DUGNGeOY.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Dm={exports:{}},yc={};var fb;function sT(){if(fb)return yc;fb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:r,type:i,key:d,ref:o!==void 0?o:null,props:u}}return yc.Fragment=e,yc.jsx=n,yc.jsxs=n,yc}var mb;function rT(){return mb||(mb=1,Dm.exports=sT()),Dm.exports}var c=rT(),Mm={exports:{}},lt={};var pb;function iT(){if(pb)return lt;pb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),T=Symbol.iterator;function O(P){return P===null||typeof P!="object"?null:(P=T&&P[T]||P["@@iterator"],typeof P=="function"?P:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,z={};function ie(P,H,de){this.props=P,this.context=H,this.refs=z,this.updater=de||q}ie.prototype.isReactComponent={},ie.prototype.setState=function(P,H){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,H,"setState")},ie.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ee(){}ee.prototype=ie.prototype;function he(P,H,de){this.props=P,this.context=H,this.refs=z,this.updater=de||q}var _e=he.prototype=new ee;_e.constructor=he,G(_e,ie.prototype),_e.isPureReactComponent=!0;var je=Array.isArray;function Ne(){}var N={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function R(P,H,de){var ye=de.ref;return{$$typeof:r,type:P,key:H,ref:ye!==void 0?ye:null,props:de}}function I(P,H){return R(P.type,H,P.props)}function D(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function U(P){var H={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(de){return H[de]})}var j=/\/+/g;function et(P,H){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):H.toString(36)}function pt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Ne,Ne):(P.status="pending",P.then(function(H){P.status==="pending"&&(P.status="fulfilled",P.value=H)},function(H){P.status==="pending"&&(P.status="rejected",P.reason=H)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function W(P,H,de,ye,Ae){var xe=typeof P;(xe==="undefined"||xe==="boolean")&&(P=null);var Fe=!1;if(P===null)Fe=!0;else switch(xe){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(P.$$typeof){case r:case e:Fe=!0;break;case w:return Fe=P._init,W(Fe(P._payload),H,de,ye,Ae)}}if(Fe)return Ae=Ae(P),Fe=ye===""?"."+et(P,0):ye,je(Ae)?(de="",Fe!=null&&(de=Fe.replace(j,"$&/")+"/"),W(Ae,H,de,"",function(Qt){return Qt})):Ae!=null&&(D(Ae)&&(Ae=I(Ae,de+(Ae.key==null||P&&P.key===Ae.key?"":(""+Ae.key).replace(j,"$&/")+"/")+Fe)),H.push(Ae)),1;Fe=0;var rt=ye===""?".":ye+":";if(je(P))for(var it=0;it<P.length;it++)ye=P[it],xe=rt+et(ye,it),Fe+=W(ye,H,de,xe,Ae);else if(it=O(P),typeof it=="function")for(P=it.call(P),it=0;!(ye=P.next()).done;)ye=ye.value,xe=rt+et(ye,it++),Fe+=W(ye,H,de,xe,Ae);else if(xe==="object"){if(typeof P.then=="function")return W(pt(P),H,de,ye,Ae);throw H=String(P),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function ge(P,H,de){if(P==null)return P;var ye=[],Ae=0;return W(P,ye,"","",function(xe){return H.call(de,xe,Ae++)}),ye}function ke(P){if(P._status===-1){var H=P._result;H=H(),H.then(function(de){(P._status===0||P._status===-1)&&(P._status=1,P._result=de)},function(de){(P._status===0||P._status===-1)&&(P._status=2,P._result=de)}),P._status===-1&&(P._status=0,P._result=H)}if(P._status===1)return P._result.default;throw P._result}var Je=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Qe={map:ge,forEach:function(P,H,de){ge(P,function(){H.apply(this,arguments)},de)},count:function(P){var H=0;return ge(P,function(){H++}),H},toArray:function(P){return ge(P,function(H){return H})||[]},only:function(P){if(!D(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return lt.Activity=x,lt.Children=Qe,lt.Component=ie,lt.Fragment=n,lt.Profiler=o,lt.PureComponent=he,lt.StrictMode=i,lt.Suspense=g,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,lt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return N.H.useMemoCache(P)}},lt.cache=function(P){return function(){return P.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(P,H,de){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ye=G({},P.props),Ae=P.key;if(H!=null)for(xe in H.key!==void 0&&(Ae=""+H.key),H)!S.call(H,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&H.ref===void 0||(ye[xe]=H[xe]);var xe=arguments.length-2;if(xe===1)ye.children=de;else if(1<xe){for(var Fe=Array(xe),rt=0;rt<xe;rt++)Fe[rt]=arguments[rt+2];ye.children=Fe}return R(P.type,Ae,ye)},lt.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},lt.createElement=function(P,H,de){var ye,Ae={},xe=null;if(H!=null)for(ye in H.key!==void 0&&(xe=""+H.key),H)S.call(H,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Ae[ye]=H[ye]);var Fe=arguments.length-2;if(Fe===1)Ae.children=de;else if(1<Fe){for(var rt=Array(Fe),it=0;it<Fe;it++)rt[it]=arguments[it+2];Ae.children=rt}if(P&&P.defaultProps)for(ye in Fe=P.defaultProps,Fe)Ae[ye]===void 0&&(Ae[ye]=Fe[ye]);return R(P,xe,Ae)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(P){return{$$typeof:p,render:P}},lt.isValidElement=D,lt.lazy=function(P){return{$$typeof:w,_payload:{_status:-1,_result:P},_init:ke}},lt.memo=function(P,H){return{$$typeof:y,type:P,compare:H===void 0?null:H}},lt.startTransition=function(P){var H=N.T,de={};N.T=de;try{var ye=P(),Ae=N.S;Ae!==null&&Ae(de,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(Ne,Je)}catch(xe){Je(xe)}finally{H!==null&&de.types!==null&&(H.types=de.types),N.T=H}},lt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},lt.use=function(P){return N.H.use(P)},lt.useActionState=function(P,H,de){return N.H.useActionState(P,H,de)},lt.useCallback=function(P,H){return N.H.useCallback(P,H)},lt.useContext=function(P){return N.H.useContext(P)},lt.useDebugValue=function(){},lt.useDeferredValue=function(P,H){return N.H.useDeferredValue(P,H)},lt.useEffect=function(P,H){return N.H.useEffect(P,H)},lt.useEffectEvent=function(P){return N.H.useEffectEvent(P)},lt.useId=function(){return N.H.useId()},lt.useImperativeHandle=function(P,H,de){return N.H.useImperativeHandle(P,H,de)},lt.useInsertionEffect=function(P,H){return N.H.useInsertionEffect(P,H)},lt.useLayoutEffect=function(P,H){return N.H.useLayoutEffect(P,H)},lt.useMemo=function(P,H){return N.H.useMemo(P,H)},lt.useOptimistic=function(P,H){return N.H.useOptimistic(P,H)},lt.useReducer=function(P,H,de){return N.H.useReducer(P,H,de)},lt.useRef=function(P){return N.H.useRef(P)},lt.useState=function(P){return N.H.useState(P)},lt.useSyncExternalStore=function(P,H,de){return N.H.useSyncExternalStore(P,H,de)},lt.useTransition=function(){return N.H.useTransition()},lt.version="19.2.4",lt}var gb;function Bp(){return gb||(gb=1,Mm.exports=iT()),Mm.exports}var k=Bp(),Pm={exports:{}},vc={},Om={exports:{}},Lm={};var yb;function aT(){return yb||(yb=1,(function(r){function e(W,ge){var ke=W.length;W.push(ge);e:for(;0<ke;){var Je=ke-1>>>1,Qe=W[Je];if(0<o(Qe,ge))W[Je]=ge,W[ke]=Qe,ke=Je;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ge=W[0],ke=W.pop();if(ke!==ge){W[0]=ke;e:for(var Je=0,Qe=W.length,P=Qe>>>1;Je<P;){var H=2*(Je+1)-1,de=W[H],ye=H+1,Ae=W[ye];if(0>o(de,ke))ye<Qe&&0>o(Ae,de)?(W[Je]=Ae,W[ye]=ke,Je=ye):(W[Je]=de,W[H]=ke,Je=H);else if(ye<Qe&&0>o(Ae,ke))W[Je]=Ae,W[ye]=ke,Je=ye;else break e}}return ge}function o(W,ge){var ke=W.sortIndex-ge.sortIndex;return ke!==0?ke:W.id-ge.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],w=1,x=null,T=3,O=!1,q=!1,G=!1,z=!1,ie=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;function _e(W){for(var ge=n(y);ge!==null;){if(ge.callback===null)i(y);else if(ge.startTime<=W)i(y),ge.sortIndex=ge.expirationTime,e(g,ge);else break;ge=n(y)}}function je(W){if(G=!1,_e(W),!q)if(n(g)!==null)q=!0,Ne||(Ne=!0,U());else{var ge=n(y);ge!==null&&pt(je,ge.startTime-W)}}var Ne=!1,N=-1,S=5,R=-1;function I(){return z?!0:!(r.unstable_now()-R<S)}function D(){if(z=!1,Ne){var W=r.unstable_now();R=W;var ge=!0;try{e:{q=!1,G&&(G=!1,ee(N),N=-1),O=!0;var ke=T;try{t:{for(_e(W),x=n(g);x!==null&&!(x.expirationTime>W&&I());){var Je=x.callback;if(typeof Je=="function"){x.callback=null,T=x.priorityLevel;var Qe=Je(x.expirationTime<=W);if(W=r.unstable_now(),typeof Qe=="function"){x.callback=Qe,_e(W),ge=!0;break t}x===n(g)&&i(g),_e(W)}else i(g);x=n(g)}if(x!==null)ge=!0;else{var P=n(y);P!==null&&pt(je,P.startTime-W),ge=!1}}break e}finally{x=null,T=ke,O=!1}ge=void 0}}finally{ge?U():Ne=!1}}}var U;if(typeof he=="function")U=function(){he(D)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,et=j.port2;j.port1.onmessage=D,U=function(){et.postMessage(null)}}else U=function(){ie(D,0)};function pt(W,ge){N=ie(function(){W(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(W){switch(T){case 1:case 2:case 3:var ge=3;break;default:ge=T}var ke=T;T=ge;try{return W()}finally{T=ke}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(W,ge){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ke=T;T=W;try{return ge()}finally{T=ke}},r.unstable_scheduleCallback=function(W,ge,ke){var Je=r.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?Je+ke:Je):ke=Je,W){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ke+Qe,W={id:w++,callback:ge,priorityLevel:W,startTime:ke,expirationTime:Qe,sortIndex:-1},ke>Je?(W.sortIndex=ke,e(y,W),n(g)===null&&W===n(y)&&(G?(ee(N),N=-1):G=!0,pt(je,ke-Je))):(W.sortIndex=Qe,e(g,W),q||O||(q=!0,Ne||(Ne=!0,U()))),W},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(W){var ge=T;return function(){var ke=T;T=ge;try{return W.apply(this,arguments)}finally{T=ke}}}})(Lm)),Lm}var vb;function oT(){return vb||(vb=1,Om.exports=aT()),Om.exports}var Vm={exports:{}},is={};var bb;function lT(){if(bb)return is;bb=1;var r=Bp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,w){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:g,containerInfo:y,implementation:w}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return is.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,is.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,w)},is.flushSync=function(g){var y=d.T,w=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=y,i.p=w,i.d.f()}},is.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},is.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},is.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,x=p(w,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:O}):w==="script"&&i.d.X(g,{crossOrigin:x,integrity:T,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},is.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},is.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,x=p(w,y.crossOrigin);i.d.L(g,w,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},is.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},is.requestFormReset=function(g){i.d.r(g)},is.unstable_batchedUpdates=function(g,y){return g(y)},is.useFormState=function(g,y,w){return d.H.useFormState(g,y,w)},is.useFormStatus=function(){return d.H.useHostTransitionStatus()},is.version="19.2.4",is}var _b;function cT(){if(_b)return Vm.exports;_b=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vm.exports=lT(),Vm.exports}var wb;function uT(){if(wb)return vc;wb=1;var r=oT(),e=Bp(),n=cT();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function y(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,l=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),t;if(m===l)return g(f),s;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=m;else{for(var b=!1,E=f.child;E;){if(E===a){b=!0,a=f,l=m;break}if(E===l){b=!0,l=f,a=m;break}E=E.sibling}if(!b){for(E=m.child;E;){if(E===a){b=!0,a=m,l=f;break}if(E===l){b=!0,l=m,a=f;break}E=E.sibling}if(!b)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function w(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=w(t),s!==null)return s;t=t.sibling}return null}var x=Object.assign,T=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),he=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function et(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case ie:return"Profiler";case z:return"StrictMode";case je:return"Suspense";case Ne:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case he:return t.displayName||"Context";case ee:return(t._context.displayName||"Context")+".Consumer";case _e:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return s=t.displayName||null,s!==null?s:et(t.type)||"Memo";case S:s=t._payload,t=t._init;try{return et(t(s))}catch{}}return null}var pt=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},Je=[],Qe=-1;function P(t){return{current:t}}function H(t){0>Qe||(t.current=Je[Qe],Je[Qe]=null,Qe--)}function de(t,s){Qe++,Je[Qe]=t.current,t.current=s}var ye=P(null),Ae=P(null),xe=P(null),Fe=P(null);function rt(t,s){switch(de(xe,s),de(Ae,t),de(ye,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?O0(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=O0(s),t=L0(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}H(ye),de(ye,t)}function it(){H(ye),H(Ae),H(xe)}function Qt(t){t.memoizedState!==null&&de(Fe,t);var s=ye.current,a=L0(s,t.type);s!==a&&(de(Ae,t),de(ye,a))}function pn(t){Ae.current===t&&(H(ye),H(Ae)),Fe.current===t&&(H(Fe),fc._currentValue=ke)}var At,en;function J(t){if(At===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);At=s&&s[1]||"",en=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+At+t+en}var Ee=!1;function Ge(t,s){if(!t||Ee)return"";Ee=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(te){var Q=te}Reflect.construct(t,[],ue)}else{try{ue.call()}catch(te){Q=te}t.call(ue.prototype)}}else{try{throw Error()}catch(te){Q=te}(ue=t())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(te){if(te&&Q&&typeof te.stack=="string")return[te.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),b=m[0],E=m[1];if(b&&E){var M=b.split(`
`),Y=E.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===Y.length)for(l=M.length-1,f=Y.length-1;1<=l&&0<=f&&M[l]!==Y[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==Y[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==Y[f]){var se=`
`+M[l].replace(" at new "," at ");return t.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",t.displayName)),se}while(1<=l&&0<=f);break}}}finally{Ee=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?J(a):""}function We(t,s){switch(t.tag){case 26:case 27:case 5:return J(t.type);case 16:return J("Lazy");case 13:return t.child!==s&&s!==null?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return Ge(t.type,!1);case 11:return Ge(t.type.render,!1);case 1:return Ge(t.type,!0);case 31:return J("Activity");default:return""}}function Ze(t){try{var s="",a=null;do s+=We(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var qe=Object.prototype.hasOwnProperty,$e=r.unstable_scheduleCallback,It=r.unstable_cancelCallback,_n=r.unstable_shouldYield,us=r.unstable_requestPaint,Ot=r.unstable_now,gn=r.unstable_getCurrentPriorityLevel,tn=r.unstable_ImmediatePriority,wn=r.unstable_UserBlockingPriority,ae=r.unstable_NormalPriority,pe=r.unstable_LowPriority,be=r.unstable_IdlePriority,Ve=r.log,Ce=r.unstable_setDisableYieldValue,Te=null,De=null;function Se(t){if(typeof Ve=="function"&&Ce(t),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(Te,t)}catch{}}var Me=Math.clz32?Math.clz32:yt,at=Math.log,vt=Math.LN2;function yt(t){return t>>>=0,t===0?32:31-(at(t)/vt|0)|0}var Jt=256,Rn=262144,Rt=4194304;function Lt(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Bt(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?f=Lt(l):(b&=E,b!==0?f=Lt(b):a||(a=E&~t,a!==0&&(f=Lt(a))))):(E=l&~m,E!==0?f=Lt(E):b!==0?f=Lt(b):a||(a=l&~t,a!==0&&(f=Lt(a)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:f}function ts(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function rr(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $r(){var t=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),t}function ns(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function zs(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Kr(t,s,a,l,f,m){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,M=t.expirationTimes,Y=t.hiddenUpdates;for(a=b&~a;0<a;){var se=31-Me(a),ue=1<<se;E[se]=0,M[se]=-1;var Q=Y[se];if(Q!==null)for(Y[se]=null,se=0;se<Q.length;se++){var te=Q[se];te!==null&&(te.lane&=-536870913)}a&=~ue}l!==0&&Fs(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~s))}function Fs(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-Me(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ai(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-Me(a),f=1<<l;f&s|t[l]&s&&(t[l]|=s),a&=~f}}function xr(t,s){var a=s&-s;return a=(a&42)!==0?1:Er(a),(a&(t.suspendedLanes|s))!==0?0:a}function Er(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function hs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Yr(){var t=ge.p;return t!==0?t:(t=window.event,t===void 0?32:ab(t.type))}function Hn(t,s){var a=ge.p;try{return ge.p=t,s()}finally{ge.p=a}}var ss=Math.random().toString(36).slice(2),an="__reactFiber$"+ss,yn="__reactProps$"+ss,bs="__reactContainer$"+ss,Rs="__reactEvents$"+ss,Qr="__reactListeners$"+ss,ds="__reactHandles$"+ss,Ri="__reactResources$"+ss,_s="__reactMarker$"+ss;function Cs(t){delete t[an],delete t[yn],delete t[Rs],delete t[Qr],delete t[ds]}function fs(t){var s=t[an];if(s)return s;for(var a=t.parentNode;a;){if(s=a[bs]||a[an]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=H0(t);t!==null;){if(a=t[an])return a;t=H0(t)}return s}t=a,a=t.parentNode}return null}function On(t){if(t=t[an]||t[bs]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Gn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function C(t){var s=t[Ri];return s||(s=t[Ri]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function V(t){t[_s]=!0}var re=new Set,oe={};function ze(t,s){Ue(t,s),Ue(t+"Capture",s)}function Ue(t,s){for(oe[t]=s,t=0;t<s.length;t++)re.add(s[t])}var He=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zt={},ut={};function B(t){return qe.call(ut,t)?!0:qe.call(zt,t)?!1:He.test(t)?ut[t]=!0:(zt[t]=!0,!1)}function ne(t,s,a){if(B(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function X(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function me(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function ve(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pe(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function st(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){a=""+b,m.call(this,b)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Oe(t){if(!t._valueTracker){var s=Pe(t)?"checked":"value";t._valueTracker=st(t,s,""+t[s])}}function wt(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Pe(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function on(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Dt=/[\n"\\]/g;function nn(t){return t.replace(Dt,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ci(t,s,a,l,f,m,b,E){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),s!=null?b==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+ve(s)):t.value!==""+ve(s)&&(t.value=""+ve(s)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),s!=null?Ni(t,b,ve(s)):a!=null?Ni(t,b,ve(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+ve(E):t.removeAttribute("name")}function Ra(t,s,a,l,f,m,b,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Oe(t);return}a=a!=null?""+ve(a):"",s=s!=null?""+ve(s):a,E||s===t.value||(t.value=s),t.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),Oe(t)}function Ni(t,s,a){s==="number"&&on(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ir(t,s,a,l){if(t=t.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=s.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ve(a),s=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function jt(t,s,a){if(s!=null&&(s=""+ve(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+ve(a):""}function hn(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(pt(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=ve(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Oe(t)}function dn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var ar=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function or(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||ar.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Wn(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&or(t,f,l)}else for(var m in s)s.hasOwnProperty(m)&&or(t,m,s[m])}function rs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ii(t){return lr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ms(){}var Cl=null;function qs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ji=null,Sr=null;function Ca(t){var s=On(t);if(s&&(t=s.stateNode)){var a=t[yn]||null;e:switch(t=s.stateNode,s.type){case"input":if(Ci(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+nn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var f=l[yn]||null;if(!f)throw Error(i(90));Ci(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&wt(l)}break e;case"textarea":jt(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ir(t,!!a.multiple,s,!1)}}}var bo=!1;function Di(t,s,a){if(bo)return t(s,a);bo=!0;try{var l=t(s);return l}finally{if(bo=!1,(ji!==null||Sr!==null)&&(nh(),ji&&(s=ji,t=Sr,Sr=ji=null,Ca(s),t)))for(s=0;s<t.length;s++)Ca(t[s])}}function cr(t,s){var a=t.stateNode;if(a===null)return null;var l=a[yn]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=!1;if(Hs)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Na=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Na=!1}var kr=null,Nl=null,Ia=null;function Il(){if(Ia)return Ia;var t,s=Nl,a=s.length,l,f="value"in kr?kr.value:kr.textContent,m=f.length;for(t=0;t<a&&s[t]===f[t];t++);var b=a-t;for(l=1;l<=b&&s[a-l]===f[m-l];l++);return Ia=f.slice(t,1<l?1-l:void 0)}function ja(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Xr(){return!0}function ur(){return!1}function $n(t){function s(a,l,f,m,b){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Xr:ur,this.isPropagationStopped=ur,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),s}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ar=$n(Jr),Mi=x({},Jr,{view:0,detail:0}),jl=$n(Mi),Pi,_o,Rr,wo=x({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rr&&(Rr&&t.type==="mousemove"?(Pi=t.screenX-Rr.screenX,_o=t.screenY-Rr.screenY):_o=Pi=0,Rr=t),Pi)},movementY:function(t){return"movementY"in t?t.movementY:_o}}),Dl=$n(wo),Da=x({},wo,{dataTransfer:0}),uu=$n(Da),hu=x({},Mi,{relatedTarget:0}),Ma=$n(hu),Ml=x({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),du=$n(Ml),xo=x({},Jr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fu=$n(xo),mu=x({},Jr,{data:0}),Cr=$n(mu),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=yu[t])?!!s[t]:!1}function Oi(){return vu}var ps=x({},Mi,{key:function(t){if(t.key){var s=pu[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ja(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oi,charCode:function(t){return t.type==="keypress"?ja(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ja(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bu=$n(ps),_u=x({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zr=$n(_u),h=x({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oi}),v=$n(h),_=x({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=$n(_),$=x({},wo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=$n($),we=x({},Jr,{newState:0,oldState:0}),dt=$n(we),xn=[9,13,27,32],Vt=Hs&&"CompositionEvent"in window,ln=null;Hs&&"documentMode"in document&&(ln=document.documentMode);var Gs=Hs&&"TextEvent"in window&&!ln,Nr=Hs&&(!Vt||ln&&8<ln&&11>=ln),hr=" ",dr=!1;function Pa(t,s){switch(t){case"keyup":return xn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var To=!1;function Ax(t,s){switch(t){case"compositionend":return Eo(s);case"keypress":return s.which!==32?null:(dr=!0,hr);case"textInput":return t=s.data,t===hr&&dr?null:t;default:return null}}function Rx(t,s){if(To)return t==="compositionend"||!Vt&&Pa(t,s)?(t=Il(),Ia=Nl=kr=null,To=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Nr&&s.locale!=="ko"?null:s.data;default:return null}}var Cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $g(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Cx[t.type]:s==="textarea"}function Kg(t,s,a,l){ji?Sr?Sr.push(l):Sr=[l]:ji=l,s=ch(s,"onChange"),0<s.length&&(a=new Ar("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var Pl=null,Ol=null;function Nx(t){N0(t,0)}function wu(t){var s=Gn(t);if(wt(s))return t}function Yg(t,s){if(t==="change")return s}var Qg=!1;if(Hs){var Ud;if(Hs){var Bd="oninput"in document;if(!Bd){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),Bd=typeof Xg.oninput=="function"}Ud=Bd}else Ud=!1;Qg=Ud&&(!document.documentMode||9<document.documentMode)}function Jg(){Pl&&(Pl.detachEvent("onpropertychange",Zg),Ol=Pl=null)}function Zg(t){if(t.propertyName==="value"&&wu(Ol)){var s=[];Kg(s,Ol,t,qs(t)),Di(Nx,s)}}function Ix(t,s,a){t==="focusin"?(Jg(),Pl=s,Ol=a,Pl.attachEvent("onpropertychange",Zg)):t==="focusout"&&Jg()}function jx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wu(Ol)}function Dx(t,s){if(t==="click")return wu(s)}function Mx(t,s){if(t==="input"||t==="change")return wu(s)}function Px(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Ns=typeof Object.is=="function"?Object.is:Px;function Ll(t,s){if(Ns(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!qe.call(s,f)||!Ns(t[f],s[f]))return!1}return!0}function ey(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ty(t,s){var a=ey(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ey(a)}}function ny(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?ny(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function sy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=on(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=on(t.document)}return s}function zd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Ox=Hs&&"documentMode"in document&&11>=document.documentMode,So=null,Fd=null,Vl=null,qd=!1;function ry(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qd||So==null||So!==on(l)||(l=So,"selectionStart"in l&&zd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Vl&&Ll(Vl,l)||(Vl=l,l=ch(Fd,"onSelect"),0<l.length&&(s=new Ar("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=So)))}function Oa(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var ko={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionrun:Oa("Transition","TransitionRun"),transitionstart:Oa("Transition","TransitionStart"),transitioncancel:Oa("Transition","TransitionCancel"),transitionend:Oa("Transition","TransitionEnd")},Hd={},iy={};Hs&&(iy=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function La(t){if(Hd[t])return Hd[t];if(!ko[t])return t;var s=ko[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in iy)return Hd[t]=s[a];return t}var ay=La("animationend"),oy=La("animationiteration"),ly=La("animationstart"),Lx=La("transitionrun"),Vx=La("transitionstart"),Ux=La("transitioncancel"),cy=La("transitionend"),uy=new Map,Gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gd.push("scrollEnd");function fr(t,s){uy.set(t,s),ze(s,[t])}var xu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ws=[],Ao=0,Wd=0;function Eu(){for(var t=Ao,s=Wd=Ao=0;s<t;){var a=Ws[s];Ws[s++]=null;var l=Ws[s];Ws[s++]=null;var f=Ws[s];Ws[s++]=null;var m=Ws[s];if(Ws[s++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}m!==0&&hy(a,f,m)}}function Tu(t,s,a,l){Ws[Ao++]=t,Ws[Ao++]=s,Ws[Ao++]=a,Ws[Ao++]=l,Wd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function $d(t,s,a,l){return Tu(t,s,a,l),Su(t)}function Va(t,s){return Tu(t,null,null,s),Su(t)}function hy(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-Me(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[s]:l.push(s),s.lane=a|536870912),m):null}function Su(t){if(50<ac)throw ac=0,sm=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ro={};function Bx(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(t,s,a,l){return new Bx(t,s,a,l)}function Kd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ei(t,s){var a=t.alternate;return a===null?(a=Is(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function dy(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function ku(t,s,a,l,f,m){var b=0;if(l=t,typeof t=="function")Kd(t)&&(b=1);else if(typeof t=="string")b=GE(t,a,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Is(31,a,s,f),t.elementType=R,t.lanes=m,t;case G:return Ua(a.children,f,m,s);case z:b=8,f|=24;break;case ie:return t=Is(12,a,s,f|2),t.elementType=ie,t.lanes=m,t;case je:return t=Is(13,a,s,f),t.elementType=je,t.lanes=m,t;case Ne:return t=Is(19,a,s,f),t.elementType=Ne,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case he:b=10;break e;case ee:b=9;break e;case _e:b=11;break e;case N:b=14;break e;case S:b=16,l=null;break e}b=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return s=Is(b,a,s,f),s.elementType=t,s.type=l,s.lanes=m,s}function Ua(t,s,a,l){return t=Is(7,t,l,s),t.lanes=a,t}function Yd(t,s,a){return t=Is(6,t,null,s),t.lanes=a,t}function fy(t){var s=Is(18,null,null,0);return s.stateNode=t,s}function Qd(t,s,a){return s=Is(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var my=new WeakMap;function $s(t,s){if(typeof t=="object"&&t!==null){var a=my.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Ze(s)},my.set(t,s),s)}return{value:t,source:s,stack:Ze(s)}}var Co=[],No=0,Au=null,Ul=0,Ks=[],Ys=0,Li=null,Ir=1,jr="";function ti(t,s){Co[No++]=Ul,Co[No++]=Au,Au=t,Ul=s}function py(t,s,a){Ks[Ys++]=Ir,Ks[Ys++]=jr,Ks[Ys++]=Li,Li=t;var l=Ir;t=jr;var f=32-Me(l)-1;l&=~(1<<f),a+=1;var m=32-Me(s)+f;if(30<m){var b=f-f%5;m=(l&(1<<b)-1).toString(32),l>>=b,f-=b,Ir=1<<32-Me(s)+f|a<<f|l,jr=m+t}else Ir=1<<m|a<<f|l,jr=t}function Xd(t){t.return!==null&&(ti(t,1),py(t,1,0))}function Jd(t){for(;t===Au;)Au=Co[--No],Co[No]=null,Ul=Co[--No],Co[No]=null;for(;t===Li;)Li=Ks[--Ys],Ks[Ys]=null,jr=Ks[--Ys],Ks[Ys]=null,Ir=Ks[--Ys],Ks[Ys]=null}function gy(t,s){Ks[Ys++]=Ir,Ks[Ys++]=jr,Ks[Ys++]=Li,Ir=s.id,jr=s.overflow,Li=t}var Kn=null,sn=null,Ct=!1,Vi=null,Qs=!1,Zd=Error(i(519));function Ui(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bl($s(s,t)),Zd}function yy(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[an]=t,s[yn]=l,a){case"dialog":_t("cancel",s),_t("close",s);break;case"iframe":case"object":case"embed":_t("load",s);break;case"video":case"audio":for(a=0;a<lc.length;a++)_t(lc[a],s);break;case"source":_t("error",s);break;case"img":case"image":case"link":_t("error",s),_t("load",s);break;case"details":_t("toggle",s);break;case"input":_t("invalid",s),Ra(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":_t("invalid",s);break;case"textarea":_t("invalid",s),hn(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||M0(s.textContent,a)?(l.popover!=null&&(_t("beforetoggle",s),_t("toggle",s)),l.onScroll!=null&&_t("scroll",s),l.onScrollEnd!=null&&_t("scrollend",s),l.onClick!=null&&(s.onclick=ms),s=!0):s=!1,s||Ui(t,!0)}function vy(t){for(Kn=t.return;Kn;)switch(Kn.tag){case 5:case 31:case 13:Qs=!1;return;case 27:case 3:Qs=!0;return;default:Kn=Kn.return}}function Io(t){if(t!==Kn)return!1;if(!Ct)return vy(t),Ct=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||vm(t.type,t.memoizedProps)),a=!a),a&&sn&&Ui(t),vy(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));sn=q0(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));sn=q0(t)}else s===27?(s=sn,Zi(t.type)?(t=Em,Em=null,sn=t):sn=s):sn=Kn?Js(t.stateNode.nextSibling):null;return!0}function Ba(){sn=Kn=null,Ct=!1}function ef(){var t=Vi;return t!==null&&(Ts===null?Ts=t:Ts.push.apply(Ts,t),Vi=null),t}function Bl(t){Vi===null?Vi=[t]:Vi.push(t)}var tf=P(null),za=null,ni=null;function Bi(t,s,a){de(tf,s._currentValue),s._currentValue=a}function si(t){t._currentValue=tf.current,H(tf)}function nf(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function sf(t,s,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var M=0;M<s.length;M++)if(E.context===s[M]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),nf(m.return,a,t),l||(b=null);break e}m=E.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=a,m=b.alternate,m!==null&&(m.lanes|=a),nf(b,a,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function jo(t,s,a,l){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var E=f.type;Ns(f.pendingProps.value,b.value)||(t!==null?t.push(E):t=[E])}}else if(f===Fe.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(fc):t=[fc])}f=f.return}t!==null&&sf(s,t,a,l),s.flags|=262144}function Ru(t){for(t=t.firstContext;t!==null;){if(!Ns(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Fa(t){za=t,ni=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Yn(t){return by(za,t)}function Cu(t,s){return za===null&&Fa(t),by(t,s)}function by(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ni===null){if(t===null)throw Error(i(308));ni=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ni=ni.next=s;return a}var zx=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},Fx=r.unstable_scheduleCallback,qx=r.unstable_NormalPriority,Cn={$$typeof:he,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rf(){return{controller:new zx,data:new Map,refCount:0}}function zl(t){t.refCount--,t.refCount===0&&Fx(qx,function(){t.controller.abort()})}var Fl=null,af=0,Do=0,Mo=null;function Hx(t,s){if(Fl===null){var a=Fl=[];af=0,Do=cm(),Mo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return af++,s.then(_y,_y),s}function _y(){if(--af===0&&Fl!==null){Mo!==null&&(Mo.status="fulfilled");var t=Fl;Fl=null,Do=0,Mo=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function Gx(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var wy=W.S;W.S=function(t,s){r0=Ot(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Hx(t,s),wy!==null&&wy(t,s)};var qa=P(null);function of(){var t=qa.current;return t!==null?t:Xt.pooledCache}function Nu(t,s){s===null?de(qa,qa.current):de(qa,s.pool)}function xy(){var t=of();return t===null?null:{parent:Cn._currentValue,pool:t}}var Po=Error(i(460)),lf=Error(i(474)),Iu=Error(i(542)),ju={then:function(){}};function Ey(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ty(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(ms,ms),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,ky(t),t;default:if(typeof s.status=="string")s.then(ms,ms);else{if(t=Xt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,ky(t),t}throw Ga=s,Po}}function Ha(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ga=a,Po):a}}var Ga=null;function Sy(){if(Ga===null)throw Error(i(459));var t=Ga;return Ga=null,t}function ky(t){if(t===Po||t===Iu)throw Error(i(483))}var Oo=null,ql=0;function Du(t){var s=ql;return ql+=1,Oo===null&&(Oo=[]),Ty(Oo,t,s)}function Hl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Mu(t,s){throw s.$$typeof===T?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Ay(t){function s(F,L){if(t){var K=F.deletions;K===null?(F.deletions=[L],F.flags|=16):K.push(L)}}function a(F,L){if(!t)return null;for(;L!==null;)s(F,L),L=L.sibling;return null}function l(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function f(F,L){return F=ei(F,L),F.index=0,F.sibling=null,F}function m(F,L,K){return F.index=K,t?(K=F.alternate,K!==null?(K=K.index,K<L?(F.flags|=67108866,L):K):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function b(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function E(F,L,K,le){return L===null||L.tag!==6?(L=Yd(K,F.mode,le),L.return=F,L):(L=f(L,K),L.return=F,L)}function M(F,L,K,le){var Ke=K.type;return Ke===G?se(F,L,K.props.children,le,K.key):L!==null&&(L.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===S&&Ha(Ke)===L.type)?(L=f(L,K.props),Hl(L,K),L.return=F,L):(L=ku(K.type,K.key,K.props,null,F.mode,le),Hl(L,K),L.return=F,L)}function Y(F,L,K,le){return L===null||L.tag!==4||L.stateNode.containerInfo!==K.containerInfo||L.stateNode.implementation!==K.implementation?(L=Qd(K,F.mode,le),L.return=F,L):(L=f(L,K.children||[]),L.return=F,L)}function se(F,L,K,le,Ke){return L===null||L.tag!==7?(L=Ua(K,F.mode,le,Ke),L.return=F,L):(L=f(L,K),L.return=F,L)}function ue(F,L,K){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Yd(""+L,F.mode,K),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case O:return K=ku(L.type,L.key,L.props,null,F.mode,K),Hl(K,L),K.return=F,K;case q:return L=Qd(L,F.mode,K),L.return=F,L;case S:return L=Ha(L),ue(F,L,K)}if(pt(L)||U(L))return L=Ua(L,F.mode,K,null),L.return=F,L;if(typeof L.then=="function")return ue(F,Du(L),K);if(L.$$typeof===he)return ue(F,Cu(F,L),K);Mu(F,L)}return null}function Q(F,L,K,le){var Ke=L!==null?L.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ke!==null?null:E(F,L,""+K,le);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case O:return K.key===Ke?M(F,L,K,le):null;case q:return K.key===Ke?Y(F,L,K,le):null;case S:return K=Ha(K),Q(F,L,K,le)}if(pt(K)||U(K))return Ke!==null?null:se(F,L,K,le,null);if(typeof K.then=="function")return Q(F,L,Du(K),le);if(K.$$typeof===he)return Q(F,L,Cu(F,K),le);Mu(F,K)}return null}function te(F,L,K,le,Ke){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return F=F.get(K)||null,E(L,F,""+le,Ke);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case O:return F=F.get(le.key===null?K:le.key)||null,M(L,F,le,Ke);case q:return F=F.get(le.key===null?K:le.key)||null,Y(L,F,le,Ke);case S:return le=Ha(le),te(F,L,K,le,Ke)}if(pt(le)||U(le))return F=F.get(K)||null,se(L,F,le,Ke,null);if(typeof le.then=="function")return te(F,L,K,Du(le),Ke);if(le.$$typeof===he)return te(F,L,K,Cu(L,le),Ke);Mu(L,le)}return null}function Le(F,L,K,le){for(var Ke=null,Mt=null,Be=L,mt=L=0,Et=null;Be!==null&&mt<K.length;mt++){Be.index>mt?(Et=Be,Be=null):Et=Be.sibling;var Pt=Q(F,Be,K[mt],le);if(Pt===null){Be===null&&(Be=Et);break}t&&Be&&Pt.alternate===null&&s(F,Be),L=m(Pt,L,mt),Mt===null?Ke=Pt:Mt.sibling=Pt,Mt=Pt,Be=Et}if(mt===K.length)return a(F,Be),Ct&&ti(F,mt),Ke;if(Be===null){for(;mt<K.length;mt++)Be=ue(F,K[mt],le),Be!==null&&(L=m(Be,L,mt),Mt===null?Ke=Be:Mt.sibling=Be,Mt=Be);return Ct&&ti(F,mt),Ke}for(Be=l(Be);mt<K.length;mt++)Et=te(Be,F,mt,K[mt],le),Et!==null&&(t&&Et.alternate!==null&&Be.delete(Et.key===null?mt:Et.key),L=m(Et,L,mt),Mt===null?Ke=Et:Mt.sibling=Et,Mt=Et);return t&&Be.forEach(function(ra){return s(F,ra)}),Ct&&ti(F,mt),Ke}function Xe(F,L,K,le){if(K==null)throw Error(i(151));for(var Ke=null,Mt=null,Be=L,mt=L=0,Et=null,Pt=K.next();Be!==null&&!Pt.done;mt++,Pt=K.next()){Be.index>mt?(Et=Be,Be=null):Et=Be.sibling;var ra=Q(F,Be,Pt.value,le);if(ra===null){Be===null&&(Be=Et);break}t&&Be&&ra.alternate===null&&s(F,Be),L=m(ra,L,mt),Mt===null?Ke=ra:Mt.sibling=ra,Mt=ra,Be=Et}if(Pt.done)return a(F,Be),Ct&&ti(F,mt),Ke;if(Be===null){for(;!Pt.done;mt++,Pt=K.next())Pt=ue(F,Pt.value,le),Pt!==null&&(L=m(Pt,L,mt),Mt===null?Ke=Pt:Mt.sibling=Pt,Mt=Pt);return Ct&&ti(F,mt),Ke}for(Be=l(Be);!Pt.done;mt++,Pt=K.next())Pt=te(Be,F,mt,Pt.value,le),Pt!==null&&(t&&Pt.alternate!==null&&Be.delete(Pt.key===null?mt:Pt.key),L=m(Pt,L,mt),Mt===null?Ke=Pt:Mt.sibling=Pt,Mt=Pt);return t&&Be.forEach(function(nT){return s(F,nT)}),Ct&&ti(F,mt),Ke}function Yt(F,L,K,le){if(typeof K=="object"&&K!==null&&K.type===G&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case O:e:{for(var Ke=K.key;L!==null;){if(L.key===Ke){if(Ke=K.type,Ke===G){if(L.tag===7){a(F,L.sibling),le=f(L,K.props.children),le.return=F,F=le;break e}}else if(L.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===S&&Ha(Ke)===L.type){a(F,L.sibling),le=f(L,K.props),Hl(le,K),le.return=F,F=le;break e}a(F,L);break}else s(F,L);L=L.sibling}K.type===G?(le=Ua(K.props.children,F.mode,le,K.key),le.return=F,F=le):(le=ku(K.type,K.key,K.props,null,F.mode,le),Hl(le,K),le.return=F,F=le)}return b(F);case q:e:{for(Ke=K.key;L!==null;){if(L.key===Ke)if(L.tag===4&&L.stateNode.containerInfo===K.containerInfo&&L.stateNode.implementation===K.implementation){a(F,L.sibling),le=f(L,K.children||[]),le.return=F,F=le;break e}else{a(F,L);break}else s(F,L);L=L.sibling}le=Qd(K,F.mode,le),le.return=F,F=le}return b(F);case S:return K=Ha(K),Yt(F,L,K,le)}if(pt(K))return Le(F,L,K,le);if(U(K)){if(Ke=U(K),typeof Ke!="function")throw Error(i(150));return K=Ke.call(K),Xe(F,L,K,le)}if(typeof K.then=="function")return Yt(F,L,Du(K),le);if(K.$$typeof===he)return Yt(F,L,Cu(F,K),le);Mu(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,L!==null&&L.tag===6?(a(F,L.sibling),le=f(L,K),le.return=F,F=le):(a(F,L),le=Yd(K,F.mode,le),le.return=F,F=le),b(F)):a(F,L)}return function(F,L,K,le){try{ql=0;var Ke=Yt(F,L,K,le);return Oo=null,Ke}catch(Be){if(Be===Po||Be===Iu)throw Be;var Mt=Is(29,Be,null,F.mode);return Mt.lanes=le,Mt.return=F,Mt}}}var Wa=Ay(!0),Ry=Ay(!1),zi=!1;function cf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uf(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qi(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ut&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Su(t),hy(t,null,a),s}return Tu(t,l,s,a),Su(t)}function Gl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Ai(t,a)}}function hf(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var df=!1;function Wl(){if(df){var t=Mo;if(t!==null)throw t}}function $l(t,s,a,l){df=!1;var f=t.updateQueue;zi=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var M=E,Y=M.next;M.next=null,b===null?m=Y:b.next=Y,b=M;var se=t.alternate;se!==null&&(se=se.updateQueue,E=se.lastBaseUpdate,E!==b&&(E===null?se.firstBaseUpdate=Y:E.next=Y,se.lastBaseUpdate=M))}if(m!==null){var ue=f.baseState;b=0,se=Y=M=null,E=m;do{var Q=E.lane&-536870913,te=Q!==E.lane;if(te?(xt&Q)===Q:(l&Q)===Q){Q!==0&&Q===Do&&(df=!0),se!==null&&(se=se.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Le=t,Xe=E;Q=s;var Yt=a;switch(Xe.tag){case 1:if(Le=Xe.payload,typeof Le=="function"){ue=Le.call(Yt,ue,Q);break e}ue=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Xe.payload,Q=typeof Le=="function"?Le.call(Yt,ue,Q):Le,Q==null)break e;ue=x({},ue,Q);break e;case 2:zi=!0}}Q=E.callback,Q!==null&&(t.flags|=64,te&&(t.flags|=8192),te=f.callbacks,te===null?f.callbacks=[Q]:te.push(Q))}else te={lane:Q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},se===null?(Y=se=te,M=ue):se=se.next=te,b|=Q;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;te=E,E=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);se===null&&(M=ue),f.baseState=M,f.firstBaseUpdate=Y,f.lastBaseUpdate=se,m===null&&(f.shared.lanes=0),Ki|=b,t.lanes=b,t.memoizedState=ue}}function Cy(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function Ny(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Cy(a[t],s)}var Lo=P(null),Pu=P(0);function Iy(t,s){t=di,de(Pu,t),de(Lo,s),di=t|s.baseLanes}function ff(){de(Pu,di),de(Lo,Lo.current)}function mf(){di=Pu.current,H(Lo),H(Pu)}var js=P(null),Xs=null;function Hi(t){var s=t.alternate;de(En,En.current&1),de(js,t),Xs===null&&(s===null||Lo.current!==null||s.memoizedState!==null)&&(Xs=t)}function pf(t){de(En,En.current),de(js,t),Xs===null&&(Xs=t)}function jy(t){t.tag===22?(de(En,En.current),de(js,t),Xs===null&&(Xs=t)):Gi()}function Gi(){de(En,En.current),de(js,js.current)}function Ds(t){H(js),Xs===t&&(Xs=null),H(En)}var En=P(0);function Ou(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||wm(a)||xm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ri=0,ft=null,$t=null,Nn=null,Lu=!1,Vo=!1,$a=!1,Vu=0,Kl=0,Uo=null,Wx=0;function vn(){throw Error(i(321))}function gf(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Ns(t[a],s[a]))return!1;return!0}function yf(t,s,a,l,f,m){return ri=m,ft=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=t===null||t.memoizedState===null?pv:jf,$a=!1,m=a(l,f),$a=!1,Vo&&(m=My(s,a,l,f)),Dy(t),m}function Dy(t){W.H=Xl;var s=$t!==null&&$t.next!==null;if(ri=0,Nn=$t=ft=null,Lu=!1,Kl=0,Uo=null,s)throw Error(i(300));t===null||In||(t=t.dependencies,t!==null&&Ru(t)&&(In=!0))}function My(t,s,a,l){ft=t;var f=0;do{if(Vo&&(Uo=null),Kl=0,Vo=!1,25<=f)throw Error(i(301));if(f+=1,Nn=$t=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}W.H=gv,m=s(a,l)}while(Vo);return m}function $x(){var t=W.H,s=t.useState()[0];return s=typeof s.then=="function"?Yl(s):s,t=t.useState()[0],($t!==null?$t.memoizedState:null)!==t&&(ft.flags|=1024),s}function vf(){var t=Vu!==0;return Vu=0,t}function bf(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function _f(t){if(Lu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Lu=!1}ri=0,Nn=$t=ft=null,Vo=!1,Kl=Vu=0,Uo=null}function gs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?ft.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function Tn(){if($t===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var s=Nn===null?ft.memoizedState:Nn.next;if(s!==null)Nn=s,$t=t;else{if(t===null)throw ft.alternate===null?Error(i(467)):Error(i(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Nn===null?ft.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(t){var s=Kl;return Kl+=1,Uo===null&&(Uo=[]),t=Ty(Uo,t,s),s=ft,(Nn===null?s.memoizedState:Nn.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?pv:jf),t}function Bu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Yl(t);if(t.$$typeof===he)return Yn(t)}throw Error(i(438,String(t)))}function wf(t){var s=null,a=ft.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=ft.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Uu(),ft.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=I;return s.index++,a}function ii(t,s){return typeof s=="function"?s(t):s}function zu(t){var s=Tn();return xf(s,$t,t)}function xf(t,s,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}s.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var E=b=null,M=null,Y=s,se=!1;do{var ue=Y.lane&-536870913;if(ue!==Y.lane?(xt&ue)===ue:(ri&ue)===ue){var Q=Y.revertLane;if(Q===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ue===Do&&(se=!0);else if((ri&Q)===Q){Y=Y.next,Q===Do&&(se=!0);continue}else ue={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},M===null?(E=M=ue,b=m):M=M.next=ue,ft.lanes|=Q,Ki|=Q;ue=Y.action,$a&&a(m,ue),m=Y.hasEagerState?Y.eagerState:a(m,ue)}else Q={lane:ue,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},M===null?(E=M=Q,b=m):M=M.next=Q,ft.lanes|=ue,Ki|=ue;Y=Y.next}while(Y!==null&&Y!==s);if(M===null?b=m:M.next=E,!Ns(m,t.memoizedState)&&(In=!0,se&&(a=Mo,a!==null)))throw a;t.memoizedState=m,t.baseState=b,t.baseQueue=M,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ef(t){var s=Tn(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);Ns(m,s.memoizedState)||(In=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function Py(t,s,a){var l=ft,f=Tn(),m=Ct;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=s();var b=!Ns(($t||f).memoizedState,a);if(b&&(f.memoizedState=a,In=!0),f=f.queue,kf(Vy.bind(null,l,f,t),[t]),f.getSnapshot!==s||b||Nn!==null&&Nn.memoizedState.tag&1){if(l.flags|=2048,Bo(9,{destroy:void 0},Ly.bind(null,l,f,a,s),null),Xt===null)throw Error(i(349));m||(ri&127)!==0||Oy(l,s,a)}return a}function Oy(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=ft.updateQueue,s===null?(s=Uu(),ft.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Ly(t,s,a,l){s.value=a,s.getSnapshot=l,Uy(s)&&By(t)}function Vy(t,s,a){return a(function(){Uy(s)&&By(t)})}function Uy(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Ns(t,a)}catch{return!0}}function By(t){var s=Va(t,2);s!==null&&Ss(s,t,2)}function Tf(t){var s=gs();if(typeof t=="function"){var a=t;if(t=a(),$a){Se(!0);try{a()}finally{Se(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:t},s}function zy(t,s,a,l){return t.baseState=a,xf(t,$t,typeof l=="function"?l:ii)}function Kx(t,s,a,l,f){if(Hu(t))throw Error(i(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};W.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,Fy(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Fy(t,s){var a=s.action,l=s.payload,f=t.state;if(s.isTransition){var m=W.T,b={};W.T=b;try{var E=a(f,l),M=W.S;M!==null&&M(b,E),qy(t,s,E)}catch(Y){Sf(t,s,Y)}finally{m!==null&&b.types!==null&&(m.types=b.types),W.T=m}}else try{m=a(f,l),qy(t,s,m)}catch(Y){Sf(t,s,Y)}}function qy(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Hy(t,s,l)},function(l){return Sf(t,s,l)}):Hy(t,s,a)}function Hy(t,s,a){s.status="fulfilled",s.value=a,Gy(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Fy(t,a)))}function Sf(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,Gy(s),s=s.next;while(s!==l)}t.action=null}function Gy(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Wy(t,s){return s}function $y(t,s){if(Ct){var a=Xt.formState;if(a!==null){e:{var l=ft;if(Ct){if(sn){t:{for(var f=sn,m=Qs;f.nodeType!==8;){if(!m){f=null;break t}if(f=Js(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){sn=Js(f.nextSibling),l=f.data==="F!";break e}}Ui(l)}l=!1}l&&(s=a[0])}}return a=gs(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wy,lastRenderedState:s},a.queue=l,a=dv.bind(null,ft,l),l.dispatch=a,l=Tf(!1),m=If.bind(null,ft,!1,l.queue),l=gs(),f={state:s,dispatch:null,action:t,pending:null},l.queue=f,a=Kx.bind(null,ft,f,m,a),f.dispatch=a,l.memoizedState=t,[s,a,!1]}function Ky(t){var s=Tn();return Yy(s,$t,t)}function Yy(t,s,a){if(s=xf(t,s,Wy)[0],t=zu(ii)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Yl(s)}catch(b){throw b===Po?Iu:b}else l=s;s=Tn();var f=s.queue,m=f.dispatch;return a!==s.memoizedState&&(ft.flags|=2048,Bo(9,{destroy:void 0},Yx.bind(null,f,a),null)),[l,m,t]}function Yx(t,s){t.action=s}function Qy(t){var s=Tn(),a=$t;if(a!==null)return Yy(s,a,t);Tn(),s=s.memoizedState,a=Tn();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Bo(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=ft.updateQueue,s===null&&(s=Uu(),ft.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function Xy(){return Tn().memoizedState}function Fu(t,s,a,l){var f=gs();ft.flags|=t,f.memoizedState=Bo(1|s,{destroy:void 0},a,l===void 0?null:l)}function qu(t,s,a,l){var f=Tn();l=l===void 0?null:l;var m=f.memoizedState.inst;$t!==null&&l!==null&&gf(l,$t.memoizedState.deps)?f.memoizedState=Bo(s,m,a,l):(ft.flags|=t,f.memoizedState=Bo(1|s,m,a,l))}function Jy(t,s){Fu(8390656,8,t,s)}function kf(t,s){qu(2048,8,t,s)}function Qx(t){ft.flags|=4;var s=ft.updateQueue;if(s===null)s=Uu(),ft.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function Zy(t){var s=Tn().memoizedState;return Qx({ref:s,nextImpl:t}),function(){if((Ut&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function ev(t,s){return qu(4,2,t,s)}function tv(t,s){return qu(4,4,t,s)}function nv(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function sv(t,s,a){a=a!=null?a.concat([t]):null,qu(4,4,nv.bind(null,s,t),a)}function Af(){}function rv(t,s){var a=Tn();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&gf(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function iv(t,s){var a=Tn();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&gf(s,l[1]))return l[0];if(l=t(),$a){Se(!0);try{t()}finally{Se(!1)}}return a.memoizedState=[l,s],l}function Rf(t,s,a){return a===void 0||(ri&1073741824)!==0&&(xt&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=a0(),ft.lanes|=t,Ki|=t,a)}function av(t,s,a,l){return Ns(a,s)?a:Lo.current!==null?(t=Rf(t,a,l),Ns(t,s)||(In=!0),t):(ri&42)===0||(ri&1073741824)!==0&&(xt&261930)===0?(In=!0,t.memoizedState=a):(t=a0(),ft.lanes|=t,Ki|=t,s)}function ov(t,s,a,l,f){var m=ge.p;ge.p=m!==0&&8>m?m:8;var b=W.T,E={};W.T=E,If(t,!1,s,a);try{var M=f(),Y=W.S;if(Y!==null&&Y(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var se=Gx(M,l);Ql(t,s,se,Os(t))}else Ql(t,s,l,Os(t))}catch(ue){Ql(t,s,{then:function(){},status:"rejected",reason:ue},Os())}finally{ge.p=m,b!==null&&E.types!==null&&(b.types=E.types),W.T=b}}function Xx(){}function Cf(t,s,a,l){if(t.tag!==5)throw Error(i(476));var f=lv(t).queue;ov(t,f,s,ke,a===null?Xx:function(){return cv(t),a(l)})}function lv(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:ke},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function cv(t){var s=lv(t);s.next===null&&(s=t.alternate.memoizedState),Ql(t,s.next.queue,{},Os())}function Nf(){return Yn(fc)}function uv(){return Tn().memoizedState}function hv(){return Tn().memoizedState}function Jx(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Os();t=Fi(a);var l=qi(s,t,a);l!==null&&(Ss(l,s,a),Gl(l,s,a)),s={cache:rf()},t.payload=s;return}s=s.return}}function Zx(t,s,a){var l=Os();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Hu(t)?fv(s,a):(a=$d(t,s,a,l),a!==null&&(Ss(a,t,l),mv(a,s,l)))}function dv(t,s,a){var l=Os();Ql(t,s,a,l)}function Ql(t,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Hu(t))fv(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,E=m(b,a);if(f.hasEagerState=!0,f.eagerState=E,Ns(E,b))return Tu(t,s,f,0),Xt===null&&Eu(),!1}catch{}if(a=$d(t,s,f,l),a!==null)return Ss(a,t,l),mv(a,s,l),!0}return!1}function If(t,s,a,l){if(l={lane:2,revertLane:cm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Hu(t)){if(s)throw Error(i(479))}else s=$d(t,a,l,2),s!==null&&Ss(s,t,2)}function Hu(t){var s=t.alternate;return t===ft||s!==null&&s===ft}function fv(t,s){Vo=Lu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function mv(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Ai(t,a)}}var Xl={readContext:Yn,use:Bu,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn};Xl.useEffectEvent=vn;var pv={readContext:Yn,use:Bu,useCallback:function(t,s){return gs().memoizedState=[t,s===void 0?null:s],t},useContext:Yn,useEffect:Jy,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Fu(4194308,4,nv.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Fu(4194308,4,t,s)},useInsertionEffect:function(t,s){Fu(4,2,t,s)},useMemo:function(t,s){var a=gs();s=s===void 0?null:s;var l=t();if($a){Se(!0);try{t()}finally{Se(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=gs();if(a!==void 0){var f=a(s);if($a){Se(!0);try{a(s)}finally{Se(!1)}}}else f=s;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=Zx.bind(null,ft,t),[l.memoizedState,t]},useRef:function(t){var s=gs();return t={current:t},s.memoizedState=t},useState:function(t){t=Tf(t);var s=t.queue,a=dv.bind(null,ft,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Af,useDeferredValue:function(t,s){var a=gs();return Rf(a,t,s)},useTransition:function(){var t=Tf(!1);return t=ov.bind(null,ft,t.queue,!0,!1),gs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=ft,f=gs();if(Ct){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),Xt===null)throw Error(i(349));(xt&127)!==0||Oy(l,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,Jy(Vy.bind(null,l,m,t),[t]),l.flags|=2048,Bo(9,{destroy:void 0},Ly.bind(null,l,m,a,s),null),a},useId:function(){var t=gs(),s=Xt.identifierPrefix;if(Ct){var a=jr,l=Ir;a=(l&~(1<<32-Me(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Vu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Wx++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Nf,useFormState:$y,useActionState:$y,useOptimistic:function(t){var s=gs();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=If.bind(null,ft,!0,a),a.dispatch=s,[t,s]},useMemoCache:wf,useCacheRefresh:function(){return gs().memoizedState=Jx.bind(null,ft)},useEffectEvent:function(t){var s=gs(),a={impl:t};return s.memoizedState=a,function(){if((Ut&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},jf={readContext:Yn,use:Bu,useCallback:rv,useContext:Yn,useEffect:kf,useImperativeHandle:sv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:iv,useReducer:zu,useRef:Xy,useState:function(){return zu(ii)},useDebugValue:Af,useDeferredValue:function(t,s){var a=Tn();return av(a,$t.memoizedState,t,s)},useTransition:function(){var t=zu(ii)[0],s=Tn().memoizedState;return[typeof t=="boolean"?t:Yl(t),s]},useSyncExternalStore:Py,useId:uv,useHostTransitionStatus:Nf,useFormState:Ky,useActionState:Ky,useOptimistic:function(t,s){var a=Tn();return zy(a,$t,t,s)},useMemoCache:wf,useCacheRefresh:hv};jf.useEffectEvent=Zy;var gv={readContext:Yn,use:Bu,useCallback:rv,useContext:Yn,useEffect:kf,useImperativeHandle:sv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:iv,useReducer:Ef,useRef:Xy,useState:function(){return Ef(ii)},useDebugValue:Af,useDeferredValue:function(t,s){var a=Tn();return $t===null?Rf(a,t,s):av(a,$t.memoizedState,t,s)},useTransition:function(){var t=Ef(ii)[0],s=Tn().memoizedState;return[typeof t=="boolean"?t:Yl(t),s]},useSyncExternalStore:Py,useId:uv,useHostTransitionStatus:Nf,useFormState:Qy,useActionState:Qy,useOptimistic:function(t,s){var a=Tn();return $t!==null?zy(a,$t,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:wf,useCacheRefresh:hv};gv.useEffectEvent=Zy;function Df(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:x({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Mf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Os(),f=Fi(l);f.payload=s,a!=null&&(f.callback=a),s=qi(t,f,l),s!==null&&(Ss(s,t,l),Gl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Os(),f=Fi(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=qi(t,f,l),s!==null&&(Ss(s,t,l),Gl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Os(),l=Fi(a);l.tag=2,s!=null&&(l.callback=s),s=qi(t,l,a),s!==null&&(Ss(s,t,a),Gl(s,t,a))}};function yv(t,s,a,l,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,b):s.prototype&&s.prototype.isPureReactComponent?!Ll(a,l)||!Ll(f,m):!0}function vv(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&Mf.enqueueReplaceState(s,s.state,null)}function Ka(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=x({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function bv(t){xu(t)}function _v(t){console.error(t)}function wv(t){xu(t)}function Gu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function xv(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Pf(t,s,a){return a=Fi(a),a.tag=3,a.payload={element:null},a.callback=function(){Gu(t,s)},a}function Ev(t){return t=Fi(t),t.tag=3,t}function Tv(t,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){xv(s,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){xv(s,a,l),typeof f!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function eE(t,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&jo(s,a,f,!0),a=js.current,a!==null){switch(a.tag){case 31:case 13:return Xs===null?sh():a.alternate===null&&bn===0&&(bn=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===ju?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),am(t,l,f)),!1;case 22:return a.flags|=65536,l===ju?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),am(t,l,f)),!1}throw Error(i(435,a.tag))}return am(t,l,f),sh(),!1}if(Ct)return s=js.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Zd&&(t=Error(i(422),{cause:l}),Bl($s(t,a)))):(l!==Zd&&(s=Error(i(423),{cause:l}),Bl($s(s,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=$s(l,a),f=Pf(t.stateNode,l,f),hf(t,f),bn!==4&&(bn=2)),!1;var m=Error(i(520),{cause:l});if(m=$s(m,a),ic===null?ic=[m]:ic.push(m),bn!==4&&(bn=2),s===null)return!0;l=$s(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Pf(a.stateNode,l,t),hf(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Yi===null||!Yi.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ev(f),Tv(f,t,a,l),hf(a,f),!1}a=a.return}while(a!==null);return!1}var Of=Error(i(461)),In=!1;function Qn(t,s,a,l){s.child=t===null?Ry(s,null,a,l):Wa(s,t.child,a,l)}function Sv(t,s,a,l,f){a=a.render;var m=s.ref;if("ref"in l){var b={};for(var E in l)E!=="ref"&&(b[E]=l[E])}else b=l;return Fa(s),l=yf(t,s,a,b,m,f),E=vf(),t!==null&&!In?(bf(t,s,f),ai(t,s,f)):(Ct&&E&&Xd(s),s.flags|=1,Qn(t,s,l,f),s.child)}function kv(t,s,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!Kd(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Av(t,s,m,l,f)):(t=ku(a.type,null,l,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Hf(t,f)){var b=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ll,a(b,l)&&t.ref===s.ref)return ai(t,s,f)}return s.flags|=1,t=ei(m,l),t.ref=s.ref,t.return=s,s.child=t}function Av(t,s,a,l,f){if(t!==null){var m=t.memoizedProps;if(Ll(m,l)&&t.ref===s.ref)if(In=!1,s.pendingProps=l=m,Hf(t,f))(t.flags&131072)!==0&&(In=!0);else return s.lanes=t.lanes,ai(t,s,f)}return Lf(t,s,a,l,f)}function Rv(t,s,a,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=s.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,s.child=null;return Cv(t,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Nu(s,m!==null?m.cachePool:null),m!==null?Iy(s,m):ff(),jy(s);else return l=s.lanes=536870912,Cv(t,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Nu(s,m.cachePool),Iy(s,m),Gi(),s.memoizedState=null):(t!==null&&Nu(s,null),ff(),Gi());return Qn(t,s,f,a),s.child}function Jl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Cv(t,s,a,l,f){var m=of();return m=m===null?null:{parent:Cn._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&Nu(s,null),ff(),jy(s),t!==null&&jo(t,s,l,!0),s.childLanes=f,null}function Wu(t,s){return s=Ku({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Nv(t,s,a){return Wa(s,t.child,null,a),t=Wu(s,s.pendingProps),t.flags|=2,Ds(s),s.memoizedState=null,t}function tE(t,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Ct){if(l.mode==="hidden")return t=Wu(s,l),s.lanes=536870912,Jl(null,t);if(pf(s),(t=sn)?(t=F0(t,Qs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Li!==null?{id:Ir,overflow:jr}:null,retryLane:536870912,hydrationErrors:null},a=fy(t),a.return=s,s.child=a,Kn=s,sn=null)):t=null,t===null)throw Ui(s);return s.lanes=536870912,null}return Wu(s,l)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(pf(s),f)if(s.flags&256)s.flags&=-257,s=Nv(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(In||jo(t,s,a,!1),f=(a&t.childLanes)!==0,In||f){if(l=Xt,l!==null&&(b=xr(l,a),b!==0&&b!==m.retryLane))throw m.retryLane=b,Va(t,b),Ss(l,t,b),Of;sh(),s=Nv(t,s,a)}else t=m.treeContext,sn=Js(b.nextSibling),Kn=s,Ct=!0,Vi=null,Qs=!1,t!==null&&gy(s,t),s=Wu(s,l),s.flags|=4096;return s}return t=ei(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function $u(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function Lf(t,s,a,l,f){return Fa(s),a=yf(t,s,a,l,void 0,f),l=vf(),t!==null&&!In?(bf(t,s,f),ai(t,s,f)):(Ct&&l&&Xd(s),s.flags|=1,Qn(t,s,a,f),s.child)}function Iv(t,s,a,l,f,m){return Fa(s),s.updateQueue=null,a=My(s,l,a,f),Dy(t),l=vf(),t!==null&&!In?(bf(t,s,m),ai(t,s,m)):(Ct&&l&&Xd(s),s.flags|=1,Qn(t,s,a,m),s.child)}function jv(t,s,a,l,f){if(Fa(s),s.stateNode===null){var m=Ro,b=a.contextType;typeof b=="object"&&b!==null&&(m=Yn(b)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Mf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},cf(s),b=a.contextType,m.context=typeof b=="object"&&b!==null?Yn(b):Ro,m.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Df(s,a,b,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Mf.enqueueReplaceState(m,m.state,null),$l(s,l,m,f),Wl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var E=s.memoizedProps,M=Ka(a,E);m.props=M;var Y=m.context,se=a.contextType;b=Ro,typeof se=="object"&&se!==null&&(b=Yn(se));var ue=a.getDerivedStateFromProps;se=typeof ue=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||Y!==b)&&vv(s,m,l,b),zi=!1;var Q=s.memoizedState;m.state=Q,$l(s,l,m,f),Wl(),Y=s.memoizedState,E||Q!==Y||zi?(typeof ue=="function"&&(Df(s,a,ue,l),Y=s.memoizedState),(M=zi||yv(s,a,M,l,Q,Y,b))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=Y),m.props=l,m.state=Y,m.context=b,l=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,uf(t,s),b=s.memoizedProps,se=Ka(a,b),m.props=se,ue=s.pendingProps,Q=m.context,Y=a.contextType,M=Ro,typeof Y=="object"&&Y!==null&&(M=Yn(Y)),E=a.getDerivedStateFromProps,(Y=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ue||Q!==M)&&vv(s,m,l,M),zi=!1,Q=s.memoizedState,m.state=Q,$l(s,l,m,f),Wl();var te=s.memoizedState;b!==ue||Q!==te||zi||t!==null&&t.dependencies!==null&&Ru(t.dependencies)?(typeof E=="function"&&(Df(s,a,E,l),te=s.memoizedState),(se=zi||yv(s,a,se,l,Q,te,M)||t!==null&&t.dependencies!==null&&Ru(t.dependencies))?(Y||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,te,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,te,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&Q===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&Q===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=te),m.props=l,m.state=te,m.context=M,l=se):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&Q===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&Q===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,$u(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=Wa(s,t.child,null,f),s.child=Wa(s,null,a,f)):Qn(t,s,a,f),s.memoizedState=m.state,t=s.child):t=ai(t,s,f),t}function Dv(t,s,a,l){return Ba(),s.flags|=256,Qn(t,s,a,l),s.child}var Vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uf(t){return{baseLanes:t,cachePool:xy()}}function Bf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Ps),t}function Mv(t,s,a){var l=s.pendingProps,f=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(En.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,t===null){if(Ct){if(f?Hi(s):Gi(),(t=sn)?(t=F0(t,Qs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Li!==null?{id:Ir,overflow:jr}:null,retryLane:536870912,hydrationErrors:null},a=fy(t),a.return=s,s.child=a,Kn=s,sn=null)):t=null,t===null)throw Ui(s);return xm(t)?s.lanes=32:s.lanes=536870912,null}var E=l.children;return l=l.fallback,f?(Gi(),f=s.mode,E=Ku({mode:"hidden",children:E},f),l=Ua(l,f,a,null),E.return=s,l.return=s,E.sibling=l,s.child=E,l=s.child,l.memoizedState=Uf(a),l.childLanes=Bf(t,b,a),s.memoizedState=Vf,Jl(null,l)):(Hi(s),zf(s,E))}var M=t.memoizedState;if(M!==null&&(E=M.dehydrated,E!==null)){if(m)s.flags&256?(Hi(s),s.flags&=-257,s=Ff(t,s,a)):s.memoizedState!==null?(Gi(),s.child=t.child,s.flags|=128,s=null):(Gi(),E=l.fallback,f=s.mode,l=Ku({mode:"visible",children:l.children},f),E=Ua(E,f,a,null),E.flags|=2,l.return=s,E.return=s,l.sibling=E,s.child=l,Wa(s,t.child,null,a),l=s.child,l.memoizedState=Uf(a),l.childLanes=Bf(t,b,a),s.memoizedState=Vf,s=Jl(null,l));else if(Hi(s),xm(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var Y=b.dgst;b=Y,l=Error(i(419)),l.stack="",l.digest=b,Bl({value:l,source:null,stack:null}),s=Ff(t,s,a)}else if(In||jo(t,s,a,!1),b=(a&t.childLanes)!==0,In||b){if(b=Xt,b!==null&&(l=xr(b,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Va(t,l),Ss(b,t,l),Of;wm(E)||sh(),s=Ff(t,s,a)}else wm(E)?(s.flags|=192,s.child=t.child,s=null):(t=M.treeContext,sn=Js(E.nextSibling),Kn=s,Ct=!0,Vi=null,Qs=!1,t!==null&&gy(s,t),s=zf(s,l.children),s.flags|=4096);return s}return f?(Gi(),E=l.fallback,f=s.mode,M=t.child,Y=M.sibling,l=ei(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,Y!==null?E=ei(Y,E):(E=Ua(E,f,a,null),E.flags|=2),E.return=s,l.return=s,l.sibling=E,s.child=l,Jl(null,l),l=s.child,E=t.child.memoizedState,E===null?E=Uf(a):(f=E.cachePool,f!==null?(M=Cn._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=xy(),E={baseLanes:E.baseLanes|a,cachePool:f}),l.memoizedState=E,l.childLanes=Bf(t,b,a),s.memoizedState=Vf,Jl(t.child,l)):(Hi(s),a=t.child,t=a.sibling,a=ei(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(b=s.deletions,b===null?(s.deletions=[t],s.flags|=16):b.push(t)),s.child=a,s.memoizedState=null,a)}function zf(t,s){return s=Ku({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Ku(t,s){return t=Is(22,t,null,s),t.lanes=0,t}function Ff(t,s,a){return Wa(s,t.child,null,a),t=zf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Pv(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),nf(t.return,s,a)}function qf(t,s,a,l,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=f,b.treeForkCount=m)}function Ov(t,s,a){var l=s.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var b=En.current,E=(b&2)!==0;if(E?(b=b&1|2,s.flags|=128):b&=1,de(En,b),Qn(t,s,l,a),l=Ct?Ul:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Pv(t,a,s);else if(t.tag===19)Pv(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)t=a.alternate,t!==null&&Ou(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),qf(s,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&Ou(t)===null){s.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}qf(s,!0,a,null,m,l);break;case"together":qf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function ai(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Ki|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(jo(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=ei(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=ei(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Hf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Ru(t)))}function nE(t,s,a){switch(s.tag){case 3:rt(s,s.stateNode.containerInfo),Bi(s,Cn,t.memoizedState.cache),Ba();break;case 27:case 5:Qt(s);break;case 4:rt(s,s.stateNode.containerInfo);break;case 10:Bi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,pf(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Hi(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Mv(t,s,a):(Hi(s),t=ai(t,s,a),t!==null?t.sibling:null);Hi(s);break;case 19:var f=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(jo(t,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return Ov(t,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),de(En,En.current),l)break;return null;case 22:return s.lanes=0,Rv(t,s,a,s.pendingProps);case 24:Bi(s,Cn,t.memoizedState.cache)}return ai(t,s,a)}function Lv(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)In=!0;else{if(!Hf(t,a)&&(s.flags&128)===0)return In=!1,nE(t,s,a);In=(t.flags&131072)!==0}else In=!1,Ct&&(s.flags&1048576)!==0&&py(s,Ul,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=Ha(s.elementType),s.type=t,typeof t=="function")Kd(t)?(l=Ka(t,l),s.tag=1,s=jv(null,s,t,l,a)):(s.tag=0,s=Lf(null,s,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===_e){s.tag=11,s=Sv(null,s,t,l,a);break e}else if(f===N){s.tag=14,s=kv(null,s,t,l,a);break e}}throw s=et(t)||t,Error(i(306,s,""))}}return s;case 0:return Lf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=Ka(l,s.pendingProps),jv(t,s,l,f,a);case 3:e:{if(rt(s,s.stateNode.containerInfo),t===null)throw Error(i(387));l=s.pendingProps;var m=s.memoizedState;f=m.element,uf(t,s),$l(s,l,null,a);var b=s.memoizedState;if(l=b.cache,Bi(s,Cn,l),l!==m.cache&&sf(s,[Cn],a,!0),Wl(),l=b.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Dv(t,s,l,a);break e}else if(l!==f){f=$s(Error(i(424)),s),Bl(f),s=Dv(t,s,l,a);break e}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,sn=Js(t.firstChild),Kn=s,Ct=!0,Vi=null,Qs=!0,a=Ry(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ba(),l===f){s=ai(t,s,a);break e}Qn(t,s,l,a)}s=s.child}return s;case 26:return $u(t,s),t===null?(a=K0(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ct||(a=s.type,t=s.pendingProps,l=uh(xe.current).createElement(a),l[an]=s,l[yn]=t,Xn(l,a,t),V(l),s.stateNode=l):s.memoizedState=K0(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Qt(s),t===null&&Ct&&(l=s.stateNode=G0(s.type,s.pendingProps,xe.current),Kn=s,Qs=!0,f=sn,Zi(s.type)?(Em=f,sn=Js(l.firstChild)):sn=f),Qn(t,s,s.pendingProps.children,a),$u(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Ct&&((f=l=sn)&&(l=jE(l,s.type,s.pendingProps,Qs),l!==null?(s.stateNode=l,Kn=s,sn=Js(l.firstChild),Qs=!1,f=!0):f=!1),f||Ui(s)),Qt(s),f=s.type,m=s.pendingProps,b=t!==null?t.memoizedProps:null,l=m.children,vm(f,m)?l=null:b!==null&&vm(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=yf(t,s,$x,null,null,a),fc._currentValue=f),$u(t,s),Qn(t,s,l,a),s.child;case 6:return t===null&&Ct&&((t=a=sn)&&(a=DE(a,s.pendingProps,Qs),a!==null?(s.stateNode=a,Kn=s,sn=null,t=!0):t=!1),t||Ui(s)),null;case 13:return Mv(t,s,a);case 4:return rt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Wa(s,null,l,a):Qn(t,s,l,a),s.child;case 11:return Sv(t,s,s.type,s.pendingProps,a);case 7:return Qn(t,s,s.pendingProps,a),s.child;case 8:return Qn(t,s,s.pendingProps.children,a),s.child;case 12:return Qn(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Bi(s,s.type,l.value),Qn(t,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,Fa(s),f=Yn(f),l=l(f),s.flags|=1,Qn(t,s,l,a),s.child;case 14:return kv(t,s,s.type,s.pendingProps,a);case 15:return Av(t,s,s.type,s.pendingProps,a);case 19:return Ov(t,s,a);case 31:return tE(t,s,a);case 22:return Rv(t,s,a,s.pendingProps);case 24:return Fa(s),l=Yn(Cn),t===null?(f=of(),f===null&&(f=Xt,m=rf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),s.memoizedState={parent:l,cache:f},cf(s),Bi(s,Cn,f)):((t.lanes&a)!==0&&(uf(t,s),$l(s,null,null,a),Wl()),f=t.memoizedState,m=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Bi(s,Cn,l)):(l=m.cache,Bi(s,Cn,l),l!==f.cache&&sf(s,[Cn],a,!0))),Qn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function oi(t){t.flags|=4}function Gf(t,s,a,l,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(u0())t.flags|=8192;else throw Ga=ju,lf}else t.flags&=-16777217}function Vv(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Z0(s))if(u0())t.flags|=8192;else throw Ga=ju,lf}function Yu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?$r():536870912,t.lanes|=s,Ho|=s)}function Zl(t,s){if(!Ct)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function rn(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function sE(t,s,a){var l=s.pendingProps;switch(Jd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(s),null;case 1:return rn(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),si(Cn),it(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Io(s)?oi(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ef())),rn(s),null;case 26:var f=s.type,m=s.memoizedState;return t===null?(oi(s),m!==null?(rn(s),Vv(s,m)):(rn(s),Gf(s,f,null,l,a))):m?m!==t.memoizedState?(oi(s),rn(s),Vv(s,m)):(rn(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&oi(s),rn(s),Gf(s,f,t,l,a)),null;case 27:if(pn(s),a=xe.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&oi(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return rn(s),null}t=ye.current,Io(s)?yy(s):(t=G0(f,l,a),s.stateNode=t,oi(s))}return rn(s),null;case 5:if(pn(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&oi(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return rn(s),null}if(m=ye.current,Io(s))yy(s);else{var b=uh(xe.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}m[an]=s,m[yn]=l;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=m;e:switch(Xn(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&oi(s)}}return rn(s),Gf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&oi(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(t=xe.current,Io(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,f=Kn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[an]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||M0(t.nodeValue,a)),t||Ui(s,!0)}else t=uh(t).createTextNode(l),t[an]=s,s.stateNode=t}return rn(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=Io(s),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[an]=s}else Ba(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rn(s),t=!1}else a=ef(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Ds(s),s):(Ds(s),null);if((s.flags&128)!==0)throw Error(i(558))}return rn(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Io(s),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[an]=s}else Ba(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rn(s),f=!1}else f=ef(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Ds(s),s):(Ds(s),null)}return Ds(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Yu(s,s.updateQueue),rn(s),null);case 4:return it(),t===null&&fm(s.stateNode.containerInfo),rn(s),null;case 10:return si(s.type),rn(s),null;case 19:if(H(En),l=s.memoizedState,l===null)return rn(s),null;if(f=(s.flags&128)!==0,m=l.rendering,m===null)if(f)Zl(l,!1);else{if(bn!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Ou(t),m!==null){for(s.flags|=128,Zl(l,!1),t=m.updateQueue,s.updateQueue=t,Yu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)dy(a,t),a=a.sibling;return de(En,En.current&1|2),Ct&&ti(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&Ot()>eh&&(s.flags|=128,f=!0,Zl(l,!1),s.lanes=4194304)}else{if(!f)if(t=Ou(m),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,Yu(s,t),Zl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Ct)return rn(s),null}else 2*Ot()-l.renderingStartTime>eh&&a!==536870912&&(s.flags|=128,f=!0,Zl(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(t=l.last,t!==null?t.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ot(),t.sibling=null,a=En.current,de(En,f?a&1|2:a&1),Ct&&ti(s,l.treeForkCount),t):(rn(s),null);case 22:case 23:return Ds(s),mf(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(rn(s),s.subtreeFlags&6&&(s.flags|=8192)):rn(s),a=s.updateQueue,a!==null&&Yu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&H(qa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),si(Cn),rn(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function rE(t,s){switch(Jd(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return si(Cn),it(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return pn(s),null;case 31:if(s.memoizedState!==null){if(Ds(s),s.alternate===null)throw Error(i(340));Ba()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Ds(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ba()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return H(En),null;case 4:return it(),null;case 10:return si(s.type),null;case 22:case 23:return Ds(s),mf(),t!==null&&H(qa),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return si(Cn),null;case 25:return null;default:return null}}function Uv(t,s){switch(Jd(s),s.tag){case 3:si(Cn),it();break;case 26:case 27:case 5:pn(s);break;case 4:it();break;case 31:s.memoizedState!==null&&Ds(s);break;case 13:Ds(s);break;case 19:H(En);break;case 10:si(s.type);break;case 22:case 23:Ds(s),mf(),t!==null&&H(qa);break;case 24:si(Cn)}}function ec(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,b=a.inst;l=m(),b.destroy=l}a=a.next}while(a!==f)}}catch(E){Gt(s,s.return,E)}}function Wi(t,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var b=l.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,f=s;var M=a,Y=E;try{Y()}catch(se){Gt(f,M,se)}}}l=l.next}while(l!==m)}}catch(se){Gt(s,s.return,se)}}function Bv(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Ny(s,a)}catch(l){Gt(t,t.return,l)}}}function zv(t,s,a){a.props=Ka(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Gt(t,s,l)}}function tc(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){Gt(t,s,f)}}function Dr(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Gt(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Gt(t,s,f)}else a.current=null}function Fv(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Gt(t,t.return,f)}}function Wf(t,s,a){try{var l=t.stateNode;kE(l,t.type,a,s),l[yn]=s}catch(f){Gt(t,t.return,f)}}function qv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Zi(t.type)||t.tag===4}function $f(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Zi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kf(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ms));else if(l!==4&&(l===27&&Zi(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Kf(t,s,a),t=t.sibling;t!==null;)Kf(t,s,a),t=t.sibling}function Qu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&Zi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Qu(t,s,a),t=t.sibling;t!==null;)Qu(t,s,a),t=t.sibling}function Hv(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Xn(s,l,a),s[an]=t,s[yn]=a}catch(m){Gt(t,t.return,m)}}var li=!1,jn=!1,Yf=!1,Gv=typeof WeakSet=="function"?WeakSet:Set,Un=null;function iE(t,s){if(t=t.containerInfo,gm=yh,t=sy(t),zd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var b=0,E=-1,M=-1,Y=0,se=0,ue=t,Q=null;t:for(;;){for(var te;ue!==a||f!==0&&ue.nodeType!==3||(E=b+f),ue!==m||l!==0&&ue.nodeType!==3||(M=b+l),ue.nodeType===3&&(b+=ue.nodeValue.length),(te=ue.firstChild)!==null;)Q=ue,ue=te;for(;;){if(ue===t)break t;if(Q===a&&++Y===f&&(E=b),Q===m&&++se===l&&(M=b),(te=ue.nextSibling)!==null)break;ue=Q,Q=ue.parentNode}ue=te}a=E===-1||M===-1?null:{start:E,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(ym={focusedElem:t,selectionRange:a},yh=!1,Un=s;Un!==null;)if(s=Un,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Un=t;else for(;Un!==null;){switch(s=Un,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Le=Ka(a.type,f);t=l.getSnapshotBeforeUpdate(Le,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Xe){Gt(a,a.return,Xe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)_m(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":_m(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,Un=t;break}Un=s.return}}function Wv(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ui(t,a),l&4&&ec(5,a);break;case 1:if(ui(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(b){Gt(a,a.return,b)}else{var f=Ka(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Gt(a,a.return,b)}}l&64&&Bv(a),l&512&&tc(a,a.return);break;case 3:if(ui(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Ny(t,s)}catch(b){Gt(a,a.return,b)}}break;case 27:s===null&&l&4&&Hv(a);case 26:case 5:ui(t,a),s===null&&l&4&&Fv(a),l&512&&tc(a,a.return);break;case 12:ui(t,a);break;case 31:ui(t,a),l&4&&Yv(t,a);break;case 13:ui(t,a),l&4&&Qv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=mE.bind(null,a),ME(t,a))));break;case 22:if(l=a.memoizedState!==null||li,!l){s=s!==null&&s.memoizedState!==null||jn,f=li;var m=jn;li=l,(jn=s)&&!m?hi(t,a,(a.subtreeFlags&8772)!==0):ui(t,a),li=f,jn=m}break;case 30:break;default:ui(t,a)}}function $v(t){var s=t.alternate;s!==null&&(t.alternate=null,$v(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Cs(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var cn=null,ws=!1;function ci(t,s,a){for(a=a.child;a!==null;)Kv(t,s,a),a=a.sibling}function Kv(t,s,a){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(Te,a)}catch{}switch(a.tag){case 26:jn||Dr(a,s),ci(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:jn||Dr(a,s);var l=cn,f=ws;Zi(a.type)&&(cn=a.stateNode,ws=!1),ci(t,s,a),uc(a.stateNode),cn=l,ws=f;break;case 5:jn||Dr(a,s);case 6:if(l=cn,f=ws,cn=null,ci(t,s,a),cn=l,ws=f,cn!==null)if(ws)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(a.stateNode)}catch(m){Gt(a,s,m)}else try{cn.removeChild(a.stateNode)}catch(m){Gt(a,s,m)}break;case 18:cn!==null&&(ws?(t=cn,B0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Jo(t)):B0(cn,a.stateNode));break;case 4:l=cn,f=ws,cn=a.stateNode.containerInfo,ws=!0,ci(t,s,a),cn=l,ws=f;break;case 0:case 11:case 14:case 15:Wi(2,a,s),jn||Wi(4,a,s),ci(t,s,a);break;case 1:jn||(Dr(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&zv(a,s,l)),ci(t,s,a);break;case 21:ci(t,s,a);break;case 22:jn=(l=jn)||a.memoizedState!==null,ci(t,s,a),jn=l;break;default:ci(t,s,a)}}function Yv(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Jo(t)}catch(a){Gt(s,s.return,a)}}}function Qv(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Jo(t)}catch(a){Gt(s,s.return,a)}}function aE(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Gv),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Gv),s;default:throw Error(i(435,t.tag))}}function Xu(t,s){var a=aE(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=pE.bind(null,t,l);l.then(f,f)}})}function xs(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,b=s,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Zi(E.type)){cn=E.stateNode,ws=!1;break e}break;case 5:cn=E.stateNode,ws=!1;break e;case 3:case 4:cn=E.stateNode.containerInfo,ws=!0;break e}E=E.return}if(cn===null)throw Error(i(160));Kv(m,b,f),cn=null,ws=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Xv(s,t),s=s.sibling}var mr=null;function Xv(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:xs(s,t),Es(t),l&4&&(Wi(3,t,t.return),ec(3,t),Wi(5,t,t.return));break;case 1:xs(s,t),Es(t),l&512&&(jn||a===null||Dr(a,a.return)),l&64&&li&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=mr;if(xs(s,t),Es(t),l&512&&(jn||a===null||Dr(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[_s]||m[an]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Xn(m,l,a),m[an]=t,V(m),l=m;break e;case"link":var b=X0("link","href",f).get(l+(a.href||""));if(b){for(var E=0;E<b.length;E++)if(m=b[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(E,1);break t}}m=f.createElement(l),Xn(m,l,a),f.head.appendChild(m);break;case"meta":if(b=X0("meta","content",f).get(l+(a.content||""))){for(E=0;E<b.length;E++)if(m=b[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(E,1);break t}}m=f.createElement(l),Xn(m,l,a),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[an]=t,V(m),l=m}t.stateNode=l}else J0(f,t.type,t.stateNode);else t.stateNode=Q0(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?J0(f,t.type,t.stateNode):Q0(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Wf(t,t.memoizedProps,a.memoizedProps)}break;case 27:xs(s,t),Es(t),l&512&&(jn||a===null||Dr(a,a.return)),a!==null&&l&4&&Wf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(xs(s,t),Es(t),l&512&&(jn||a===null||Dr(a,a.return)),t.flags&32){f=t.stateNode;try{dn(f,"")}catch(Le){Gt(t,t.return,Le)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Wf(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Yf=!0);break;case 6:if(xs(s,t),Es(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Le){Gt(t,t.return,Le)}}break;case 3:if(fh=null,f=mr,mr=hh(s.containerInfo),xs(s,t),mr=f,Es(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Jo(s.containerInfo)}catch(Le){Gt(t,t.return,Le)}Yf&&(Yf=!1,Jv(t));break;case 4:l=mr,mr=hh(t.stateNode.containerInfo),xs(s,t),Es(t),mr=l;break;case 12:xs(s,t),Es(t);break;case 31:xs(s,t),Es(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Xu(t,l)));break;case 13:xs(s,t),Es(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Zu=Ot()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Xu(t,l)));break;case 22:f=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,Y=li,se=jn;if(li=Y||f,jn=se||M,xs(s,t),jn=se,li=Y,Es(t),l&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||M||li||jn||Ya(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){M=a=s;try{if(m=M.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=M.stateNode;var ue=M.memoizedProps.style,Q=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;E.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Le){Gt(M,M.return,Le)}}}else if(s.tag===6){if(a===null){M=s;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(Le){Gt(M,M.return,Le)}}}else if(s.tag===18){if(a===null){M=s;try{var te=M.stateNode;f?z0(te,!0):z0(M.stateNode,!1)}catch(Le){Gt(M,M.return,Le)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Xu(t,a))));break;case 19:xs(s,t),Es(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Xu(t,l)));break;case 30:break;case 21:break;default:xs(s,t),Es(t)}}function Es(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(qv(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=$f(t);Qu(t,m,f);break;case 5:var b=a.stateNode;a.flags&32&&(dn(b,""),a.flags&=-33);var E=$f(t);Qu(t,E,b);break;case 3:case 4:var M=a.stateNode.containerInfo,Y=$f(t);Kf(t,Y,M);break;default:throw Error(i(161))}}catch(se){Gt(t,t.return,se)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Jv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Jv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function ui(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Wv(t,s.alternate,s),s=s.sibling}function Ya(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Wi(4,s,s.return),Ya(s);break;case 1:Dr(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&zv(s,s.return,a),Ya(s);break;case 27:uc(s.stateNode);case 26:case 5:Dr(s,s.return),Ya(s);break;case 22:s.memoizedState===null&&Ya(s);break;case 30:Ya(s);break;default:Ya(s)}t=t.sibling}}function hi(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=t,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:hi(f,m,a),ec(4,m);break;case 1:if(hi(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){Gt(l,l.return,Y)}if(l=m,f=l.updateQueue,f!==null){var E=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)Cy(M[f],E)}catch(Y){Gt(l,l.return,Y)}}a&&b&64&&Bv(m),tc(m,m.return);break;case 27:Hv(m);case 26:case 5:hi(f,m,a),a&&l===null&&b&4&&Fv(m),tc(m,m.return);break;case 12:hi(f,m,a);break;case 31:hi(f,m,a),a&&b&4&&Yv(f,m);break;case 13:hi(f,m,a),a&&b&4&&Qv(f,m);break;case 22:m.memoizedState===null&&hi(f,m,a),tc(m,m.return);break;case 30:break;default:hi(f,m,a)}s=s.sibling}}function Qf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&zl(a))}function Xf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&zl(t))}function pr(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Zv(t,s,a,l),s=s.sibling}function Zv(t,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:pr(t,s,a,l),f&2048&&ec(9,s);break;case 1:pr(t,s,a,l);break;case 3:pr(t,s,a,l),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&zl(t)));break;case 12:if(f&2048){pr(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,b=m.id,E=m.onPostCommit;typeof E=="function"&&E(b,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){Gt(s,s.return,M)}}else pr(t,s,a,l);break;case 31:pr(t,s,a,l);break;case 13:pr(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?pr(t,s,a,l):nc(t,s):m._visibility&2?pr(t,s,a,l):(m._visibility|=2,zo(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Qf(b,s);break;case 24:pr(t,s,a,l),f&2048&&Xf(s.alternate,s);break;default:pr(t,s,a,l)}}function zo(t,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,b=s,E=a,M=l,Y=b.flags;switch(b.tag){case 0:case 11:case 15:zo(m,b,E,M,f),ec(8,b);break;case 23:break;case 22:var se=b.stateNode;b.memoizedState!==null?se._visibility&2?zo(m,b,E,M,f):nc(m,b):(se._visibility|=2,zo(m,b,E,M,f)),f&&Y&2048&&Qf(b.alternate,b);break;case 24:zo(m,b,E,M,f),f&&Y&2048&&Xf(b.alternate,b);break;default:zo(m,b,E,M,f)}s=s.sibling}}function nc(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,f=l.flags;switch(l.tag){case 22:nc(a,l),f&2048&&Qf(l.alternate,l);break;case 24:nc(a,l),f&2048&&Xf(l.alternate,l);break;default:nc(a,l)}s=s.sibling}}var sc=8192;function Fo(t,s,a){if(t.subtreeFlags&sc)for(t=t.child;t!==null;)e0(t,s,a),t=t.sibling}function e0(t,s,a){switch(t.tag){case 26:Fo(t,s,a),t.flags&sc&&t.memoizedState!==null&&WE(a,mr,t.memoizedState,t.memoizedProps);break;case 5:Fo(t,s,a);break;case 3:case 4:var l=mr;mr=hh(t.stateNode.containerInfo),Fo(t,s,a),mr=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=sc,sc=16777216,Fo(t,s,a),sc=l):Fo(t,s,a));break;default:Fo(t,s,a)}}function t0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function rc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Un=l,s0(l,t)}t0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)n0(t),t=t.sibling}function n0(t){switch(t.tag){case 0:case 11:case 15:rc(t),t.flags&2048&&Wi(9,t,t.return);break;case 3:rc(t);break;case 12:rc(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Ju(t)):rc(t);break;default:rc(t)}}function Ju(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Un=l,s0(l,t)}t0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Wi(8,s,s.return),Ju(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(s));break;default:Ju(s)}t=t.sibling}}function s0(t,s){for(;Un!==null;){var a=Un;switch(a.tag){case 0:case 11:case 15:Wi(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:zl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Un=l;else e:for(a=t;Un!==null;){l=Un;var f=l.sibling,m=l.return;if($v(l),l===a){Un=null;break e}if(f!==null){f.return=m,Un=f;break e}Un=m}}}var oE={getCacheForType:function(t){var s=Yn(Cn),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Yn(Cn).controller.signal}},lE=typeof WeakMap=="function"?WeakMap:Map,Ut=0,Xt=null,bt=null,xt=0,Ht=0,Ms=null,$i=!1,qo=!1,Jf=!1,di=0,bn=0,Ki=0,Qa=0,Zf=0,Ps=0,Ho=0,ic=null,Ts=null,em=!1,Zu=0,r0=0,eh=1/0,th=null,Yi=null,Ln=0,Qi=null,Go=null,fi=0,tm=0,nm=null,i0=null,ac=0,sm=null;function Os(){return(Ut&2)!==0&&xt!==0?xt&-xt:W.T!==null?cm():Yr()}function a0(){if(Ps===0)if((xt&536870912)===0||Ct){var t=Rn;Rn<<=1,(Rn&3932160)===0&&(Rn=262144),Ps=t}else Ps=536870912;return t=js.current,t!==null&&(t.flags|=32),Ps}function Ss(t,s,a){(t===Xt&&(Ht===2||Ht===9)||t.cancelPendingCommit!==null)&&(Wo(t,0),Xi(t,xt,Ps,!1)),zs(t,a),((Ut&2)===0||t!==Xt)&&(t===Xt&&((Ut&2)===0&&(Qa|=a),bn===4&&Xi(t,xt,Ps,!1)),Mr(t))}function o0(t,s,a){if((Ut&6)!==0)throw Error(i(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||ts(t,s),f=l?hE(t,s):im(t,s,!0),m=l;do{if(f===0){qo&&!l&&Xi(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!cE(a)){f=im(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var E=t;f=ic;var M=E.current.memoizedState.isDehydrated;if(M&&(Wo(E,b).flags|=256),b=im(E,b,!1),b!==2){if(Jf&&!M){E.errorRecoveryDisabledLanes|=m,Qa|=m,f=4;break e}m=Ts,Ts=f,m!==null&&(Ts===null?Ts=m:Ts.push.apply(Ts,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){Wo(t,0),Xi(t,s,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Xi(l,s,Ps,!$i);break e;case 2:Ts=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Zu+300-Ot(),10<f)){if(Xi(l,s,Ps,!$i),Bt(l,0,!0)!==0)break e;fi=s,l.timeoutHandle=V0(l0.bind(null,l,a,Ts,th,em,s,Ps,Qa,Ho,$i,m,"Throttled",-0,0),f);break e}l0(l,a,Ts,th,em,s,Ps,Qa,Ho,$i,m,null,-0,0)}}break}while(!0);Mr(t)}function l0(t,s,a,l,f,m,b,E,M,Y,se,ue,Q,te){if(t.timeoutHandle=-1,ue=s.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ms},e0(s,m,ue);var Le=(m&62914560)===m?Zu-Ot():(m&4194048)===m?r0-Ot():0;if(Le=$E(ue,Le),Le!==null){fi=m,t.cancelPendingCommit=Le(g0.bind(null,t,s,m,a,l,f,b,E,M,se,ue,null,Q,te)),Xi(t,m,b,!Y);return}}g0(t,s,m,a,l,f,b,E,M)}function cE(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Ns(m(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xi(t,s,a,l){s&=~Zf,s&=~Qa,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var f=s;0<f;){var m=31-Me(f),b=1<<m;l[m]=-1,f&=~b}a!==0&&Fs(t,a,s)}function nh(){return(Ut&6)===0?(oc(0),!1):!0}function rm(){if(bt!==null){if(Ht===0)var t=bt.return;else t=bt,ni=za=null,_f(t),Oo=null,ql=0,t=bt;for(;t!==null;)Uv(t.alternate,t),t=t.return;bt=null}}function Wo(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,CE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),fi=0,rm(),Xt=t,bt=a=ei(t.current,null),xt=s,Ht=0,Ms=null,$i=!1,qo=ts(t,s),Jf=!1,Ho=Ps=Zf=Qa=Ki=bn=0,Ts=ic=null,em=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var f=31-Me(l),m=1<<f;s|=t[f],l&=~m}return di=s,Eu(),a}function c0(t,s){ft=null,W.H=Xl,s===Po||s===Iu?(s=Sy(),Ht=3):s===lf?(s=Sy(),Ht=4):Ht=s===Of?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ms=s,bt===null&&(bn=1,Gu(t,$s(s,t.current)))}function u0(){var t=js.current;return t===null?!0:(xt&4194048)===xt?Xs===null:(xt&62914560)===xt||(xt&536870912)!==0?t===Xs:!1}function h0(){var t=W.H;return W.H=Xl,t===null?Xl:t}function d0(){var t=W.A;return W.A=oE,t}function sh(){bn=4,$i||(xt&4194048)!==xt&&js.current!==null||(qo=!0),(Ki&134217727)===0&&(Qa&134217727)===0||Xt===null||Xi(Xt,xt,Ps,!1)}function im(t,s,a){var l=Ut;Ut|=2;var f=h0(),m=d0();(Xt!==t||xt!==s)&&(th=null,Wo(t,s)),s=!1;var b=bn;e:do try{if(Ht!==0&&bt!==null){var E=bt,M=Ms;switch(Ht){case 8:rm(),b=6;break e;case 3:case 2:case 9:case 6:js.current===null&&(s=!0);var Y=Ht;if(Ht=0,Ms=null,$o(t,E,M,Y),a&&qo){b=0;break e}break;default:Y=Ht,Ht=0,Ms=null,$o(t,E,M,Y)}}uE(),b=bn;break}catch(se){c0(t,se)}while(!0);return s&&t.shellSuspendCounter++,ni=za=null,Ut=l,W.H=f,W.A=m,bt===null&&(Xt=null,xt=0,Eu()),b}function uE(){for(;bt!==null;)f0(bt)}function hE(t,s){var a=Ut;Ut|=2;var l=h0(),f=d0();Xt!==t||xt!==s?(th=null,eh=Ot()+500,Wo(t,s)):qo=ts(t,s);e:do try{if(Ht!==0&&bt!==null){s=bt;var m=Ms;t:switch(Ht){case 1:Ht=0,Ms=null,$o(t,s,m,1);break;case 2:case 9:if(Ey(m)){Ht=0,Ms=null,m0(s);break}s=function(){Ht!==2&&Ht!==9||Xt!==t||(Ht=7),Mr(t)},m.then(s,s);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:Ey(m)?(Ht=0,Ms=null,m0(s)):(Ht=0,Ms=null,$o(t,s,m,7));break;case 5:var b=null;switch(bt.tag){case 26:b=bt.memoizedState;case 5:case 27:var E=bt;if(b?Z0(b):E.stateNode.complete){Ht=0,Ms=null;var M=E.sibling;if(M!==null)bt=M;else{var Y=E.return;Y!==null?(bt=Y,rh(Y)):bt=null}break t}}Ht=0,Ms=null,$o(t,s,m,5);break;case 6:Ht=0,Ms=null,$o(t,s,m,6);break;case 8:rm(),bn=6;break e;default:throw Error(i(462))}}dE();break}catch(se){c0(t,se)}while(!0);return ni=za=null,W.H=l,W.A=f,Ut=a,bt!==null?0:(Xt=null,xt=0,Eu(),bn)}function dE(){for(;bt!==null&&!_n();)f0(bt)}function f0(t){var s=Lv(t.alternate,t,di);t.memoizedProps=t.pendingProps,s===null?rh(t):bt=s}function m0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Iv(a,s,s.pendingProps,s.type,void 0,xt);break;case 11:s=Iv(a,s,s.pendingProps,s.type.render,s.ref,xt);break;case 5:_f(s);default:Uv(a,s),s=bt=dy(s,di),s=Lv(a,s,di)}t.memoizedProps=t.pendingProps,s===null?rh(t):bt=s}function $o(t,s,a,l){ni=za=null,_f(s),Oo=null,ql=0;var f=s.return;try{if(eE(t,f,s,a,xt)){bn=1,Gu(t,$s(a,t.current)),bt=null;return}}catch(m){if(f!==null)throw bt=f,m;bn=1,Gu(t,$s(a,t.current)),bt=null;return}s.flags&32768?(Ct||l===1?t=!0:qo||(xt&536870912)!==0?t=!1:($i=t=!0,(l===2||l===9||l===3||l===6)&&(l=js.current,l!==null&&l.tag===13&&(l.flags|=16384))),p0(s,t)):rh(s)}function rh(t){var s=t;do{if((s.flags&32768)!==0){p0(s,$i);return}t=s.return;var a=sE(s.alternate,s,di);if(a!==null){bt=a;return}if(s=s.sibling,s!==null){bt=s;return}bt=s=t}while(s!==null);bn===0&&(bn=5)}function p0(t,s){do{var a=rE(t.alternate,t);if(a!==null){a.flags&=32767,bt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){bt=t;return}bt=t=a}while(t!==null);bn=6,bt=null}function g0(t,s,a,l,f,m,b,E,M){t.cancelPendingCommit=null;do ih();while(Ln!==0);if((Ut&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Wd,Kr(t,a,m,b,E,M),t===Xt&&(bt=Xt=null,xt=0),Go=s,Qi=t,fi=a,tm=m,nm=f,i0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,gE(ae,function(){return w0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=W.T,W.T=null,f=ge.p,ge.p=2,b=Ut,Ut|=4;try{iE(t,s,a)}finally{Ut=b,ge.p=f,W.T=l}}Ln=1,y0(),v0(),b0()}}function y0(){if(Ln===1){Ln=0;var t=Qi,s=Go,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var l=ge.p;ge.p=2;var f=Ut;Ut|=4;try{Xv(s,t);var m=ym,b=sy(t.containerInfo),E=m.focusedElem,M=m.selectionRange;if(b!==E&&E&&E.ownerDocument&&ny(E.ownerDocument.documentElement,E)){if(M!==null&&zd(E)){var Y=M.start,se=M.end;if(se===void 0&&(se=Y),"selectionStart"in E)E.selectionStart=Y,E.selectionEnd=Math.min(se,E.value.length);else{var ue=E.ownerDocument||document,Q=ue&&ue.defaultView||window;if(Q.getSelection){var te=Q.getSelection(),Le=E.textContent.length,Xe=Math.min(M.start,Le),Yt=M.end===void 0?Xe:Math.min(M.end,Le);!te.extend&&Xe>Yt&&(b=Yt,Yt=Xe,Xe=b);var F=ty(E,Xe),L=ty(E,Yt);if(F&&L&&(te.rangeCount!==1||te.anchorNode!==F.node||te.anchorOffset!==F.offset||te.focusNode!==L.node||te.focusOffset!==L.offset)){var K=ue.createRange();K.setStart(F.node,F.offset),te.removeAllRanges(),Xe>Yt?(te.addRange(K),te.extend(L.node,L.offset)):(K.setEnd(L.node,L.offset),te.addRange(K))}}}}for(ue=[],te=E;te=te.parentNode;)te.nodeType===1&&ue.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ue.length;E++){var le=ue[E];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}yh=!!gm,ym=gm=null}finally{Ut=f,ge.p=l,W.T=a}}t.current=s,Ln=2}}function v0(){if(Ln===2){Ln=0;var t=Qi,s=Go,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var l=ge.p;ge.p=2;var f=Ut;Ut|=4;try{Wv(t,s.alternate,s)}finally{Ut=f,ge.p=l,W.T=a}}Ln=3}}function b0(){if(Ln===4||Ln===3){Ln=0,us();var t=Qi,s=Go,a=fi,l=i0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ln=5:(Ln=0,Go=Qi=null,_0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Yi=null),hs(a),s=s.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(Te,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=W.T,f=ge.p,ge.p=2,W.T=null;try{for(var m=t.onRecoverableError,b=0;b<l.length;b++){var E=l[b];m(E.value,{componentStack:E.stack})}}finally{W.T=s,ge.p=f}}(fi&3)!==0&&ih(),Mr(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===sm?ac++:(ac=0,sm=t):ac=0,oc(0)}}function _0(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,zl(s)))}function ih(){return y0(),v0(),b0(),w0()}function w0(){if(Ln!==5)return!1;var t=Qi,s=tm;tm=0;var a=hs(fi),l=W.T,f=ge.p;try{ge.p=32>a?32:a,W.T=null,a=nm,nm=null;var m=Qi,b=fi;if(Ln=0,Go=Qi=null,fi=0,(Ut&6)!==0)throw Error(i(331));var E=Ut;if(Ut|=4,n0(m.current),Zv(m,m.current,b,a),Ut=E,oc(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(Te,m)}catch{}return!0}finally{ge.p=f,W.T=l,_0(t,s)}}function x0(t,s,a){s=$s(a,s),s=Pf(t.stateNode,s,2),t=qi(t,s,2),t!==null&&(zs(t,2),Mr(t))}function Gt(t,s,a){if(t.tag===3)x0(t,t,a);else for(;s!==null;){if(s.tag===3){x0(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Yi===null||!Yi.has(l))){t=$s(a,t),a=Ev(2),l=qi(s,a,2),l!==null&&(Tv(a,l,s,t),zs(l,2),Mr(l));break}}s=s.return}}function am(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new lE;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(Jf=!0,f.add(a),t=fE.bind(null,t,s,a),s.then(t,t))}function fE(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Xt===t&&(xt&a)===a&&(bn===4||bn===3&&(xt&62914560)===xt&&300>Ot()-Zu?(Ut&2)===0&&Wo(t,0):Zf|=a,Ho===xt&&(Ho=0)),Mr(t)}function E0(t,s){s===0&&(s=$r()),t=Va(t,s),t!==null&&(zs(t,s),Mr(t))}function mE(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),E0(t,a)}function pE(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),E0(t,a)}function gE(t,s){return $e(t,s)}var ah=null,Ko=null,om=!1,oh=!1,lm=!1,Ji=0;function Mr(t){t!==Ko&&t.next===null&&(Ko===null?ah=Ko=t:Ko=Ko.next=t),oh=!0,om||(om=!0,vE())}function oc(t,s){if(!lm&&oh){lm=!0;do for(var a=!1,l=ah;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var b=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-Me(42|t)+1)-1,m&=f&~(b&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,A0(l,m))}else m=xt,m=Bt(l,l===Xt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ts(l,m)||(a=!0,A0(l,m));l=l.next}while(a);lm=!1}}function yE(){T0()}function T0(){oh=om=!1;var t=0;Ji!==0&&RE()&&(t=Ji);for(var s=Ot(),a=null,l=ah;l!==null;){var f=l.next,m=S0(l,s);m===0?(l.next=null,a===null?ah=f:a.next=f,f===null&&(Ko=a)):(a=l,(t!==0||(m&3)!==0)&&(oh=!0)),l=f}Ln!==0&&Ln!==5||oc(t),Ji!==0&&(Ji=0)}function S0(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Me(m),E=1<<b,M=f[b];M===-1?((E&a)===0||(E&l)!==0)&&(f[b]=rr(E,s)):M<=s&&(t.expiredLanes|=E),m&=~E}if(s=Xt,a=xt,a=Bt(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(Ht===2||Ht===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&It(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ts(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&It(l),hs(a)){case 2:case 8:a=wn;break;case 32:a=ae;break;case 268435456:a=be;break;default:a=ae}return l=k0.bind(null,t),a=$e(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&It(l),t.callbackPriority=2,t.callbackNode=null,2}function k0(t,s){if(Ln!==0&&Ln!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ih()&&t.callbackNode!==a)return null;var l=xt;return l=Bt(t,t===Xt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(o0(t,l,s),S0(t,Ot()),t.callbackNode!=null&&t.callbackNode===a?k0.bind(null,t):null)}function A0(t,s){if(ih())return null;o0(t,s,!0)}function vE(){NE(function(){(Ut&6)!==0?$e(tn,yE):T0()})}function cm(){if(Ji===0){var t=Do;t===0&&(t=Jt,Jt<<=1,(Jt&261888)===0&&(Jt=256)),Ji=t}return Ji}function R0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ii(""+t)}function C0(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function bE(t,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var m=R0((f[yn]||null).action),b=l.submitter;b&&(s=(s=b[yn]||null)?R0(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var E=new Ar("action","action",null,l,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ji!==0){var M=b?C0(f,b):new FormData(f);Cf(a,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(E.preventDefault(),M=b?C0(f,b):new FormData(f),Cf(a,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var um=0;um<Gd.length;um++){var hm=Gd[um],_E=hm.toLowerCase(),wE=hm[0].toUpperCase()+hm.slice(1);fr(_E,"on"+wE)}fr(ay,"onAnimationEnd"),fr(oy,"onAnimationIteration"),fr(ly,"onAnimationStart"),fr("dblclick","onDoubleClick"),fr("focusin","onFocus"),fr("focusout","onBlur"),fr(Lx,"onTransitionRun"),fr(Vx,"onTransitionStart"),fr(Ux,"onTransitionCancel"),fr(cy,"onTransitionEnd"),Ue("onMouseEnter",["mouseout","mouseover"]),Ue("onMouseLeave",["mouseout","mouseover"]),Ue("onPointerEnter",["pointerout","pointerover"]),Ue("onPointerLeave",["pointerout","pointerover"]),ze("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ze("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ze("onBeforeInput",["compositionend","keypress","textInput","paste"]),ze("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lc));function N0(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var b=l.length-1;0<=b;b--){var E=l[b],M=E.instance,Y=E.currentTarget;if(E=E.listener,M!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=Y;try{m(f)}catch(se){xu(se)}f.currentTarget=null,m=M}else for(b=0;b<l.length;b++){if(E=l[b],M=E.instance,Y=E.currentTarget,E=E.listener,M!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=Y;try{m(f)}catch(se){xu(se)}f.currentTarget=null,m=M}}}}function _t(t,s){var a=s[Rs];a===void 0&&(a=s[Rs]=new Set);var l=t+"__bubble";a.has(l)||(I0(s,t,2,!1),a.add(l))}function dm(t,s,a){var l=0;s&&(l|=4),I0(a,t,l,s)}var lh="_reactListening"+Math.random().toString(36).slice(2);function fm(t){if(!t[lh]){t[lh]=!0,re.forEach(function(a){a!=="selectionchange"&&(xE.has(a)||dm(a,!1,t),dm(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[lh]||(s[lh]=!0,dm("selectionchange",!1,s))}}function I0(t,s,a,l){switch(ab(s)){case 2:var f=QE;break;case 8:f=XE;break;default:f=Rm}a=f.bind(null,s,a,t),f=void 0,!Na||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(s,a,{capture:!0,passive:f}):t.addEventListener(s,a,!0):f!==void 0?t.addEventListener(s,a,{passive:f}):t.addEventListener(s,a,!1)}function mm(t,s,a,l,f){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var E=l.stateNode.containerInfo;if(E===f)break;if(b===4)for(b=l.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;E!==null;){if(b=fs(E),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){l=m=b;continue e}E=E.parentNode}}l=l.return}Di(function(){var Y=m,se=qs(a),ue=[];e:{var Q=uy.get(t);if(Q!==void 0){var te=Ar,Le=t;switch(t){case"keypress":if(ja(a)===0)break e;case"keydown":case"keyup":te=bu;break;case"focusin":Le="focus",te=Ma;break;case"focusout":Le="blur",te=Ma;break;case"beforeblur":case"afterblur":te=Ma;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=v;break;case ay:case oy:case ly:te=du;break;case cy:te=A;break;case"scroll":case"scrollend":te=jl;break;case"wheel":te=Z;break;case"copy":case"cut":case"paste":te=fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Zr;break;case"toggle":case"beforetoggle":te=dt}var Xe=(s&4)!==0,Yt=!Xe&&(t==="scroll"||t==="scrollend"),F=Xe?Q!==null?Q+"Capture":null:Q;Xe=[];for(var L=Y,K;L!==null;){var le=L;if(K=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||K===null||F===null||(le=cr(L,F),le!=null&&Xe.push(cc(L,le,K))),Yt)break;L=L.return}0<Xe.length&&(Q=new te(Q,Le,null,a,se),ue.push({event:Q,listeners:Xe}))}}if((s&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",te=t==="mouseout"||t==="pointerout",Q&&a!==Cl&&(Le=a.relatedTarget||a.fromElement)&&(fs(Le)||Le[bs]))break e;if((te||Q)&&(Q=se.window===se?se:(Q=se.ownerDocument)?Q.defaultView||Q.parentWindow:window,te?(Le=a.relatedTarget||a.toElement,te=Y,Le=Le?fs(Le):null,Le!==null&&(Yt=u(Le),Xe=Le.tag,Le!==Yt||Xe!==5&&Xe!==27&&Xe!==6)&&(Le=null)):(te=null,Le=Y),te!==Le)){if(Xe=Dl,le="onMouseLeave",F="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Xe=Zr,le="onPointerLeave",F="onPointerEnter",L="pointer"),Yt=te==null?Q:Gn(te),K=Le==null?Q:Gn(Le),Q=new Xe(le,L+"leave",te,a,se),Q.target=Yt,Q.relatedTarget=K,le=null,fs(se)===Y&&(Xe=new Xe(F,L+"enter",Le,a,se),Xe.target=K,Xe.relatedTarget=Yt,le=Xe),Yt=le,te&&Le)t:{for(Xe=EE,F=te,L=Le,K=0,le=F;le;le=Xe(le))K++;le=0;for(var Ke=L;Ke;Ke=Xe(Ke))le++;for(;0<K-le;)F=Xe(F),K--;for(;0<le-K;)L=Xe(L),le--;for(;K--;){if(F===L||L!==null&&F===L.alternate){Xe=F;break t}F=Xe(F),L=Xe(L)}Xe=null}else Xe=null;te!==null&&j0(ue,Q,te,Xe,!1),Le!==null&&Yt!==null&&j0(ue,Yt,Le,Xe,!0)}}e:{if(Q=Y?Gn(Y):window,te=Q.nodeName&&Q.nodeName.toLowerCase(),te==="select"||te==="input"&&Q.type==="file")var Mt=Yg;else if($g(Q))if(Qg)Mt=Mx;else{Mt=jx;var Be=Ix}else te=Q.nodeName,!te||te.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?Y&&rs(Y.elementType)&&(Mt=Yg):Mt=Dx;if(Mt&&(Mt=Mt(t,Y))){Kg(ue,Mt,a,se);break e}Be&&Be(t,Q,Y),t==="focusout"&&Y&&Q.type==="number"&&Y.memoizedProps.value!=null&&Ni(Q,"number",Q.value)}switch(Be=Y?Gn(Y):window,t){case"focusin":($g(Be)||Be.contentEditable==="true")&&(So=Be,Fd=Y,Vl=null);break;case"focusout":Vl=Fd=So=null;break;case"mousedown":qd=!0;break;case"contextmenu":case"mouseup":case"dragend":qd=!1,ry(ue,a,se);break;case"selectionchange":if(Ox)break;case"keydown":case"keyup":ry(ue,a,se)}var mt;if(Vt)e:{switch(t){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else To?Pa(t,a)&&(Et="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Et="onCompositionStart");Et&&(Nr&&a.locale!=="ko"&&(To||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&To&&(mt=Il()):(kr=se,Nl="value"in kr?kr.value:kr.textContent,To=!0)),Be=ch(Y,Et),0<Be.length&&(Et=new Cr(Et,t,null,a,se),ue.push({event:Et,listeners:Be}),mt?Et.data=mt:(mt=Eo(a),mt!==null&&(Et.data=mt)))),(mt=Gs?Ax(t,a):Rx(t,a))&&(Et=ch(Y,"onBeforeInput"),0<Et.length&&(Be=new Cr("onBeforeInput","beforeinput",null,a,se),ue.push({event:Be,listeners:Et}),Be.data=mt)),bE(ue,t,Y,a,se)}N0(ue,s)})}function cc(t,s,a){return{instance:t,listener:s,currentTarget:a}}function ch(t,s){for(var a=s+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=cr(t,a),f!=null&&l.unshift(cc(t,f,m)),f=cr(t,s),f!=null&&l.push(cc(t,f,m))),t.tag===3)return l;t=t.return}return[]}function EE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function j0(t,s,a,l,f){for(var m=s._reactName,b=[];a!==null&&a!==l;){var E=a,M=E.alternate,Y=E.stateNode;if(E=E.tag,M!==null&&M===l)break;E!==5&&E!==26&&E!==27||Y===null||(M=Y,f?(Y=cr(a,m),Y!=null&&b.unshift(cc(a,Y,M))):f||(Y=cr(a,m),Y!=null&&b.push(cc(a,Y,M)))),a=a.return}b.length!==0&&t.push({event:s,listeners:b})}var TE=/\r\n?/g,SE=/\u0000|\uFFFD/g;function D0(t){return(typeof t=="string"?t:""+t).replace(TE,`
`).replace(SE,"")}function M0(t,s){return s=D0(s),D0(t)===s}function Kt(t,s,a,l,f,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||dn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&dn(t,""+l);break;case"className":X(t,"class",l);break;case"tabIndex":X(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":X(t,a,l);break;case"style":Wn(t,l,m);break;case"data":if(s!=="object"){X(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ii(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&Kt(t,s,"name",f.name,f,null),Kt(t,s,"formEncType",f.formEncType,f,null),Kt(t,s,"formMethod",f.formMethod,f,null),Kt(t,s,"formTarget",f.formTarget,f,null)):(Kt(t,s,"encType",f.encType,f,null),Kt(t,s,"method",f.method,f,null),Kt(t,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ii(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ms);break;case"onScroll":l!=null&&_t("scroll",t);break;case"onScrollEnd":l!=null&&_t("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ii(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":_t("beforetoggle",t),_t("toggle",t),ne(t,"popover",l);break;case"xlinkActuate":me(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":me(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":me(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":me(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":me(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":me(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":me(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":me(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":me(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ne(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Tr.get(a)||a,ne(t,a,l))}}function pm(t,s,a,l,f,m){switch(a){case"style":Wn(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?dn(t,l):(typeof l=="number"||typeof l=="bigint")&&dn(t,""+l);break;case"onScroll":l!=null&&_t("scroll",t);break;case"onScrollEnd":l!=null&&_t("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oe.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),m=t[yn]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ne(t,a,l)}}}function Xn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",t),_t("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var b=a[m];if(b!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Kt(t,s,m,b,a,null)}}f&&Kt(t,s,"srcSet",a.srcSet,a,null),l&&Kt(t,s,"src",a.src,a,null);return;case"input":_t("invalid",t);var E=m=b=f=null,M=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var se=a[l];if(se!=null)switch(l){case"name":f=se;break;case"type":b=se;break;case"checked":M=se;break;case"defaultChecked":Y=se;break;case"value":m=se;break;case"defaultValue":E=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,s));break;default:Kt(t,s,l,se,a,null)}}Ra(t,m,E,M,Y,b,f,!1);return;case"select":_t("invalid",t),l=b=m=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":b=E;break;case"multiple":l=E;default:Kt(t,s,f,E,a,null)}s=m,a=b,t.multiple=!!l,s!=null?ir(t,!!l,s,!1):a!=null&&ir(t,!!l,a,!0);return;case"textarea":_t("invalid",t),m=f=l=null;for(b in a)if(a.hasOwnProperty(b)&&(E=a[b],E!=null))switch(b){case"value":l=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Kt(t,s,b,E,a,null)}hn(t,l,f,m);return;case"option":for(M in a)a.hasOwnProperty(M)&&(l=a[M],l!=null)&&(M==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Kt(t,s,M,l,a,null));return;case"dialog":_t("beforetoggle",t),_t("toggle",t),_t("cancel",t),_t("close",t);break;case"iframe":case"object":_t("load",t);break;case"video":case"audio":for(l=0;l<lc.length;l++)_t(lc[l],t);break;case"image":_t("error",t),_t("load",t);break;case"details":_t("toggle",t);break;case"embed":case"source":case"link":_t("error",t),_t("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Kt(t,s,Y,l,a,null)}return;default:if(rs(s)){for(se in a)a.hasOwnProperty(se)&&(l=a[se],l!==void 0&&pm(t,s,se,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Kt(t,s,E,l,a,null))}function kE(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,E=null,M=null,Y=null,se=null;for(te in a){var ue=a[te];if(a.hasOwnProperty(te)&&ue!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":M=ue;default:l.hasOwnProperty(te)||Kt(t,s,te,null,l,ue)}}for(var Q in l){var te=l[Q];if(ue=a[Q],l.hasOwnProperty(Q)&&(te!=null||ue!=null))switch(Q){case"type":m=te;break;case"name":f=te;break;case"checked":Y=te;break;case"defaultChecked":se=te;break;case"value":b=te;break;case"defaultValue":E=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:te!==ue&&Kt(t,s,Q,te,l,ue)}}Ci(t,b,E,M,Y,se,m,f);return;case"select":te=b=E=Q=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":te=M;default:l.hasOwnProperty(m)||Kt(t,s,m,null,l,M)}for(f in l)if(m=l[f],M=a[f],l.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":Q=m;break;case"defaultValue":E=m;break;case"multiple":b=m;default:m!==M&&Kt(t,s,f,m,l,M)}s=E,a=b,l=te,Q!=null?ir(t,!!a,Q,!1):!!l!=!!a&&(s!=null?ir(t,!!a,s,!0):ir(t,!!a,a?[]:"",!1));return;case"textarea":te=Q=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Kt(t,s,E,null,l,f)}for(b in l)if(f=l[b],m=a[b],l.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":Q=f;break;case"defaultValue":te=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Kt(t,s,b,f,l,m)}jt(t,Q,te);return;case"option":for(var Le in a)Q=a[Le],a.hasOwnProperty(Le)&&Q!=null&&!l.hasOwnProperty(Le)&&(Le==="selected"?t.selected=!1:Kt(t,s,Le,null,l,Q));for(M in l)Q=l[M],te=a[M],l.hasOwnProperty(M)&&Q!==te&&(Q!=null||te!=null)&&(M==="selected"?t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":Kt(t,s,M,Q,l,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in a)Q=a[Xe],a.hasOwnProperty(Xe)&&Q!=null&&!l.hasOwnProperty(Xe)&&Kt(t,s,Xe,null,l,Q);for(Y in l)if(Q=l[Y],te=a[Y],l.hasOwnProperty(Y)&&Q!==te&&(Q!=null||te!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:Kt(t,s,Y,Q,l,te)}return;default:if(rs(s)){for(var Yt in a)Q=a[Yt],a.hasOwnProperty(Yt)&&Q!==void 0&&!l.hasOwnProperty(Yt)&&pm(t,s,Yt,void 0,l,Q);for(se in l)Q=l[se],te=a[se],!l.hasOwnProperty(se)||Q===te||Q===void 0&&te===void 0||pm(t,s,se,Q,l,te);return}}for(var F in a)Q=a[F],a.hasOwnProperty(F)&&Q!=null&&!l.hasOwnProperty(F)&&Kt(t,s,F,null,l,Q);for(ue in l)Q=l[ue],te=a[ue],!l.hasOwnProperty(ue)||Q===te||Q==null&&te==null||Kt(t,s,ue,Q,l,te)}function P0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,b=f.initiatorType,E=f.duration;if(m&&E&&P0(b)){for(b=0,E=f.responseEnd,l+=1;l<a.length;l++){var M=a[l],Y=M.startTime;if(Y>E)break;var se=M.transferSize,ue=M.initiatorType;se&&P0(ue)&&(M=M.responseEnd,b+=se*(M<E?1:(E-Y)/(M-Y)))}if(--l,s+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var gm=null,ym=null;function uh(t){return t.nodeType===9?t:t.ownerDocument}function O0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L0(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function vm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bm=null;function RE(){var t=window.event;return t&&t.type==="popstate"?t===bm?!1:(bm=t,!0):(bm=null,!1)}var V0=typeof setTimeout=="function"?setTimeout:void 0,CE=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,NE=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(t){return U0.resolve(null).then(t).catch(IE)}:V0;function IE(t){setTimeout(function(){throw t})}function Zi(t){return t==="head"}function B0(t,s){var a=s,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),Jo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")uc(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,uc(a);for(var m=a.firstChild;m;){var b=m.nextSibling,E=m.nodeName;m[_s]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=b}}else a==="body"&&uc(t.ownerDocument.body);a=f}while(a);Jo(s)}function z0(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function _m(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_m(a),Cs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function jE(t,s,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[_s])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Js(t.nextSibling),t===null)break}return null}function DE(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Js(t.nextSibling),t===null))return null;return t}function F0(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Js(t.nextSibling),t===null))return null;return t}function wm(t){return t.data==="$?"||t.data==="$~"}function xm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ME(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Js(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Em=null;function q0(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return Js(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function H0(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function G0(t,s,a){switch(s=uh(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function uc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Cs(t)}var Zs=new Map,W0=new Set;function hh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var mi=ge.d;ge.d={f:PE,r:OE,D:LE,C:VE,L:UE,m:BE,X:FE,S:zE,M:qE};function PE(){var t=mi.f(),s=nh();return t||s}function OE(t){var s=On(t);s!==null&&s.tag===5&&s.type==="form"?cv(s):mi.r(t)}var Yo=typeof document>"u"?null:document;function $0(t,s,a){var l=Yo;if(l&&typeof s=="string"&&s){var f=nn(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),W0.has(f)||(W0.add(f),t={rel:t,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Xn(s,"link",t),V(s),l.head.appendChild(s)))}}function LE(t){mi.D(t),$0("dns-prefetch",t,null)}function VE(t,s){mi.C(t,s),$0("preconnect",t,s)}function UE(t,s,a){mi.L(t,s,a);var l=Yo;if(l&&t&&s){var f='link[rel="preload"][as="'+nn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+nn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+nn(a.imageSizes)+'"]')):f+='[href="'+nn(t)+'"]';var m=f;switch(s){case"style":m=Qo(t);break;case"script":m=Xo(t)}Zs.has(m)||(t=x({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Zs.set(m,t),l.querySelector(f)!==null||s==="style"&&l.querySelector(hc(m))||s==="script"&&l.querySelector(dc(m))||(s=l.createElement("link"),Xn(s,"link",t),V(s),l.head.appendChild(s)))}}function BE(t,s){mi.m(t,s);var a=Yo;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+nn(l)+'"][href="'+nn(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Xo(t)}if(!Zs.has(m)&&(t=x({rel:"modulepreload",href:t},s),Zs.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(dc(m)))return}l=a.createElement("link"),Xn(l,"link",t),V(l),a.head.appendChild(l)}}}function zE(t,s,a){mi.S(t,s,a);var l=Yo;if(l&&t){var f=C(l).hoistableStyles,m=Qo(t);s=s||"default";var b=f.get(m);if(!b){var E={loading:0,preload:null};if(b=l.querySelector(hc(m)))E.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Zs.get(m))&&Tm(t,a);var M=b=l.createElement("link");V(M),Xn(M,"link",t),M._p=new Promise(function(Y,se){M.onload=Y,M.onerror=se}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,dh(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:E},f.set(m,b)}}}function FE(t,s){mi.X(t,s);var a=Yo;if(a&&t){var l=C(a).hoistableScripts,f=Xo(t),m=l.get(f);m||(m=a.querySelector(dc(f)),m||(t=x({src:t,async:!0},s),(s=Zs.get(f))&&Sm(t,s),m=a.createElement("script"),V(m),Xn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function qE(t,s){mi.M(t,s);var a=Yo;if(a&&t){var l=C(a).hoistableScripts,f=Xo(t),m=l.get(f);m||(m=a.querySelector(dc(f)),m||(t=x({src:t,async:!0,type:"module"},s),(s=Zs.get(f))&&Sm(t,s),m=a.createElement("script"),V(m),Xn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function K0(t,s,a,l){var f=(f=xe.current)?hh(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Qo(a.href),a=C(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Qo(a.href);var m=C(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(hc(t)))&&!m._p&&(b.instance=m,b.state.loading=5),Zs.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zs.set(t,a),m||HE(f,t,a,b.state))),s&&l===null)throw Error(i(528,""));return b}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xo(a),a=C(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Qo(t){return'href="'+nn(t)+'"'}function hc(t){return'link[rel="stylesheet"]['+t+"]"}function Y0(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function HE(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Xn(s,"link",a),V(s),t.head.appendChild(s))}function Xo(t){return'[src="'+nn(t)+'"]'}function dc(t){return"script[async]"+t}function Q0(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+nn(a.href)+'"]');if(l)return s.instance=l,V(l),l;var f=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),V(l),Xn(l,"style",f),dh(l,a.precedence,t),s.instance=l;case"stylesheet":f=Qo(a.href);var m=t.querySelector(hc(f));if(m)return s.state.loading|=4,s.instance=m,V(m),m;l=Y0(a),(f=Zs.get(f))&&Tm(l,f),m=(t.ownerDocument||t).createElement("link"),V(m);var b=m;return b._p=new Promise(function(E,M){b.onload=E,b.onerror=M}),Xn(m,"link",l),s.state.loading|=4,dh(m,a.precedence,t),s.instance=m;case"script":return m=Xo(a.src),(f=t.querySelector(dc(m)))?(s.instance=f,V(f),f):(l=a,(f=Zs.get(m))&&(l=x({},a),Sm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),V(f),Xn(f,"link",l),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,dh(l,a.precedence,t));return s.instance}function dh(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,b=0;b<l.length;b++){var E=l[b];if(E.dataset.precedence===s)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Tm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Sm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var fh=null;function X0(t,s,a){if(fh===null){var l=new Map,f=fh=new Map;f.set(a,l)}else f=fh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[_s]||m[an]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=t+b;var E=l.get(b);E?E.push(m):l.set(b,[m])}}return l}function J0(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function GE(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Z0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function WE(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Qo(l.href),m=s.querySelector(hc(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=mh.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,V(m);return}m=s.ownerDocument||s,l=Y0(l),(f=Zs.get(f))&&Tm(l,f),m=m.createElement("link"),V(m);var b=m;b._p=new Promise(function(E,M){b.onload=E,b.onerror=M}),Xn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=mh.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var km=0;function $E(t,s){return t.stylesheets&&t.count===0&&gh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&gh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&km===0&&(km=62500*AE());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&gh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>km?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ph=null;function gh(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ph=new Map,s.forEach(KE,t),ph=null,mh.call(t))}function KE(t,s){if(!(s.state.loading&4)){var a=ph.get(t);if(a)var l=a.get(null);else{a=new Map,ph.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}f=s.instance,b=f.getAttribute("data-precedence"),m=a.get(b)||l,m===l&&a.set(null,f),a.set(b,f),this.count++,l=mh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var fc={$$typeof:he,Provider:null,Consumer:null,_currentValue:ke,_currentValue2:ke,_threadCount:0};function YE(t,s,a,l,f,m,b,E,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ns(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.hiddenUpdates=ns(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function eb(t,s,a,l,f,m,b,E,M,Y,se,ue){return t=new YE(t,s,a,b,M,Y,se,ue,E),s=1,m===!0&&(s|=24),m=Is(3,null,null,s),t.current=m,m.stateNode=t,s=rf(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},cf(m),t}function tb(t){return t?(t=Ro,t):Ro}function nb(t,s,a,l,f,m){f=tb(f),l.context===null?l.context=f:l.pendingContext=f,l=Fi(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=qi(t,l,s),a!==null&&(Ss(a,t,s),Gl(a,t,s))}function sb(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Am(t,s){sb(t,s),(t=t.alternate)&&sb(t,s)}function rb(t){if(t.tag===13||t.tag===31){var s=Va(t,67108864);s!==null&&Ss(s,t,67108864),Am(t,67108864)}}function ib(t){if(t.tag===13||t.tag===31){var s=Os();s=Er(s);var a=Va(t,s);a!==null&&Ss(a,t,s),Am(t,s)}}var yh=!0;function QE(t,s,a,l){var f=W.T;W.T=null;var m=ge.p;try{ge.p=2,Rm(t,s,a,l)}finally{ge.p=m,W.T=f}}function XE(t,s,a,l){var f=W.T;W.T=null;var m=ge.p;try{ge.p=8,Rm(t,s,a,l)}finally{ge.p=m,W.T=f}}function Rm(t,s,a,l){if(yh){var f=Cm(l);if(f===null)mm(t,s,l,vh,a),ob(t,l);else if(ZE(f,t,s,a,l))l.stopPropagation();else if(ob(t,l),s&4&&-1<JE.indexOf(t)){for(;f!==null;){var m=On(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Lt(m.pendingLanes);if(b!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var M=1<<31-Me(b);E.entanglements[1]|=M,b&=~M}Mr(m),(Ut&6)===0&&(eh=Ot()+500,oc(0))}}break;case 31:case 13:E=Va(m,2),E!==null&&Ss(E,m,2),nh(),Am(m,2)}if(m=Cm(l),m===null&&mm(t,s,l,vh,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else mm(t,s,l,null,a)}}function Cm(t){return t=qs(t),Nm(t)}var vh=null;function Nm(t){if(vh=null,t=fs(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=d(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return vh=t,null}function ab(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gn()){case tn:return 2;case wn:return 8;case ae:case pe:return 32;case be:return 268435456;default:return 32}default:return 32}}var Im=!1,ea=null,ta=null,na=null,mc=new Map,pc=new Map,sa=[],JE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ob(t,s){switch(t){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":mc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(s.pointerId)}}function gc(t,s,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},s!==null&&(s=On(s),s!==null&&rb(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function ZE(t,s,a,l,f){switch(s){case"focusin":return ea=gc(ea,t,s,a,l,f),!0;case"dragenter":return ta=gc(ta,t,s,a,l,f),!0;case"mouseover":return na=gc(na,t,s,a,l,f),!0;case"pointerover":var m=f.pointerId;return mc.set(m,gc(mc.get(m)||null,t,s,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,pc.set(m,gc(pc.get(m)||null,t,s,a,l,f)),!0}return!1}function lb(t){var s=fs(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){t.blockedOn=s,Hn(t.priority,function(){ib(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,Hn(t.priority,function(){ib(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Cm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Cl=l,a.target.dispatchEvent(l),Cl=null}else return s=On(a),s!==null&&rb(s),t.blockedOn=a,!1;s.shift()}return!0}function cb(t,s,a){bh(t)&&a.delete(s)}function eT(){Im=!1,ea!==null&&bh(ea)&&(ea=null),ta!==null&&bh(ta)&&(ta=null),na!==null&&bh(na)&&(na=null),mc.forEach(cb),pc.forEach(cb)}function _h(t,s){t.blockedOn===s&&(t.blockedOn=null,Im||(Im=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,eT)))}var wh=null;function ub(t){wh!==t&&(wh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){wh===t&&(wh=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],f=t[s+2];if(typeof l!="function"){if(Nm(l||a)===null)continue;break}var m=On(a);m!==null&&(t.splice(s,3),s-=3,Cf(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Jo(t){function s(M){return _h(M,t)}ea!==null&&_h(ea,t),ta!==null&&_h(ta,t),na!==null&&_h(na,t),mc.forEach(s),pc.forEach(s);for(var a=0;a<sa.length;a++){var l=sa[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<sa.length&&(a=sa[0],a.blockedOn===null);)lb(a),a.blockedOn===null&&sa.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],b=f[yn]||null;if(typeof m=="function")b||ub(a);else if(b){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[yn]||null)E=b.formAction;else if(Nm(f)!==null)continue}else E=b.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),ub(a)}}}function hb(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function jm(t){this._internalRoot=t}xh.prototype.render=jm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=Os();nb(a,l,t,s,null,null)},xh.prototype.unmount=jm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;nb(t.current,2,null,t,null,null),nh(),s[bs]=null}};function xh(t){this._internalRoot=t}xh.prototype.unstable_scheduleHydration=function(t){if(t){var s=Yr();t={blockedOn:null,target:t,priority:s};for(var a=0;a<sa.length&&s!==0&&s<sa[a].priority;a++);sa.splice(a,0,t),a===0&&lb(t)}};var db=e.version;if(db!=="19.2.4")throw Error(i(527,db,"19.2.4"));ge.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(s),t=t!==null?w(t):null,t=t===null?null:t.stateNode,t};var tT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{Te=Eh.inject(tT),De=Eh}catch{}}return vc.createRoot=function(t,s){if(!o(t))throw Error(i(299));var a=!1,l="",f=bv,m=_v,b=wv;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=eb(t,1,!1,null,null,a,l,null,f,m,b,hb),t[bs]=s.current,fm(t),new jm(s)},vc.hydrateRoot=function(t,s,a){if(!o(t))throw Error(i(299));var l=!1,f="",m=bv,b=_v,E=wv,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),s=eb(t,1,!0,s,a??null,l,f,M,m,b,E,hb),s.context=tb(null),a=s.current,l=Os(),l=Er(l),f=Fi(l),f.callback=null,qi(a,f,l),a=l,s.current.lanes=a,zs(s,a),Mr(s),t[bs]=s.current,fm(t),new xh(s)},vc.version="19.2.4",vc}var xb;function hT(){if(xb)return Pm.exports;xb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pm.exports=uT(),Pm.exports}var dT=hT();const fT="modulepreload",mT=function(r){return"/login/"+r},Eb={},Us=function(e,n,i){let o=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");o=g(n.map(y=>{if(y=mT(y),y in Eb)return;Eb[y]=!0;const w=y.endsWith(".css"),x=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${x}`))return;const T=document.createElement("link");if(T.rel=w?"stylesheet":fT,w||(T.as="script"),T.crossOrigin="",T.href=y,p&&T.setAttribute("nonce",p),document.head.appendChild(T),w)return new Promise((O,q)=>{T.addEventListener("load",O),T.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var Tb="popstate";function pT(r={}){function e(i,o){let{pathname:u,search:d,hash:p}=i.location;return cp("",{pathname:u,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:Vc(o)}return yT(e,n,null,r)}function un(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function nr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gT(){return Math.random().toString(36).substring(2,10)}function Sb(r,e){return{usr:r.state,key:r.key,idx:e}}function cp(r,e,n=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?vl(e):e,state:n,key:e&&e.key||i||gT()}}function Vc({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function vl(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function yT(r,e,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,d=o.history,p="POP",g=null,y=w();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function w(){return(d.state||{idx:null}).idx}function x(){p="POP";let z=w(),ie=z==null?null:z-y;y=z,g&&g({action:p,location:G.location,delta:ie})}function T(z,ie){p="PUSH";let ee=cp(G.location,z,ie);y=w()+1;let he=Sb(ee,y),_e=G.createHref(ee);try{d.pushState(he,"",_e)}catch(je){if(je instanceof DOMException&&je.name==="DataCloneError")throw je;o.location.assign(_e)}u&&g&&g({action:p,location:G.location,delta:1})}function O(z,ie){p="REPLACE";let ee=cp(G.location,z,ie);y=w();let he=Sb(ee,y),_e=G.createHref(ee);d.replaceState(he,"",_e),u&&g&&g({action:p,location:G.location,delta:0})}function q(z){return vT(z)}let G={get action(){return p},get location(){return r(o,d)},listen(z){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Tb,x),g=z,()=>{o.removeEventListener(Tb,x),g=null}},createHref(z){return e(o,z)},createURL:q,encodeLocation(z){let ie=q(z);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:T,replace:O,go(z){return d.go(z)}};return G}function vT(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),un(n,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Vc(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function y1(r,e,n="/"){return bT(r,e,n,!1)}function bT(r,e,n,i){let o=typeof e=="string"?vl(e):e,u=_i(o.pathname||"/",n);if(u==null)return null;let d=v1(r);_T(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=IT(u);p=CT(d[g],y,i)}return p}function v1(r,e=[],n=[],i="",o=!1){let u=(d,p,g=o,y)=>{let w={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(i)&&g)return;un(w.relativePath.startsWith(i),`Absolute route path "${w.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(i.length)}let x=yi([i,w.relativePath]),T=n.concat(w);d.children&&d.children.length>0&&(un(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),v1(d.children,e,T,x,g)),!(d.path==null&&!d.index)&&e.push({path:x,score:AT(x,d.index),routesMeta:T})};return r.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of b1(d.path))u(d,p,!0,g)}),e}function b1(r){let e=r.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let d=b1(i.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...d),p.map(g=>r.startsWith("/")&&g===""?"/":g)}function _T(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:RT(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var wT=/^:[\w-]+$/,xT=3,ET=2,TT=1,ST=10,kT=-2,kb=r=>r==="*";function AT(r,e){let n=r.split("/"),i=n.length;return n.some(kb)&&(i+=kT),e&&(i+=ET),n.filter(o=>!kb(o)).reduce((o,u)=>o+(wT.test(u)?xT:u===""?TT:ST),i)}function RT(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function CT(r,e,n=!1){let{routesMeta:i}=r,o={},u="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,w=u==="/"?e:e.slice(u.length)||"/",x=Kh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),T=g.route;if(!x&&y&&n&&!i[i.length-1].route.index&&(x=Kh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!x)return null;Object.assign(o,x.params),d.push({params:o,pathname:yi([u,x.pathname]),pathnameBase:PT(yi([u,x.pathnameBase])),route:T}),x.pathnameBase!=="/"&&(u=yi([u,x.pathnameBase]))}return d}function Kh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,i]=NT(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((y,{paramName:w,isOptional:x},T)=>{if(w==="*"){let q=p[T]||"";d=u.slice(0,u.length-q.length).replace(/(.)\/+$/,"$1")}const O=p[T];return x&&!O?y[w]=void 0:y[w]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:r}}function NT(r,e=!1,n=!0){nr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function IT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function _i(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=r.charAt(n);return i&&i!=="/"?null:r.slice(n)||"/"}var jT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function DT(r,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof r=="string"?vl(r):r,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=Ab(n.substring(1),"/"):u=Ab(n,e)):u=e,{pathname:u,search:OT(i),hash:LT(o)}}function Ab(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Um(r,e,n,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MT(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zp(r){let e=MT(r);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Fp(r,e,n,i=!1){let o;typeof r=="string"?o=vl(r):(o={...r},un(!o.pathname||!o.pathname.includes("?"),Um("?","pathname","search",o)),un(!o.pathname||!o.pathname.includes("#"),Um("#","pathname","hash",o)),un(!o.search||!o.search.includes("#"),Um("#","search","hash",o)));let u=r===""||o.pathname==="",d=u?"/":o.pathname,p;if(d==null)p=n;else{let x=e.length-1;if(!i&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),x-=1;o.pathname=T.join("/")}p=x>=0?e[x]:"/"}let g=DT(o,p),y=d&&d!=="/"&&d.endsWith("/"),w=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var yi=r=>r.join("/").replace(/\/\/+/g,"/"),PT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),OT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,LT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,VT=class{constructor(r,e,n,i=!1){this.status=r,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function UT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function BT(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var _1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function w1(r,e){let n=r;if(typeof n!="string"||!jT.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,o=!1;if(_1)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=_i(d.pathname,e);d.origin===u.origin&&p!=null?n=p+d.search+d.hash:o=!0}catch{nr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var x1=["POST","PUT","PATCH","DELETE"];new Set(x1);var zT=["GET",...x1];new Set(zT);var bl=k.createContext(null);bl.displayName="DataRouter";var pd=k.createContext(null);pd.displayName="DataRouterState";var FT=k.createContext(!1),E1=k.createContext({isTransitioning:!1});E1.displayName="ViewTransition";var qT=k.createContext(new Map);qT.displayName="Fetchers";var HT=k.createContext(null);HT.displayName="Await";var Bs=k.createContext(null);Bs.displayName="Navigation";var Yc=k.createContext(null);Yc.displayName="Location";var Gr=k.createContext({outlet:null,matches:[],isDataRoute:!1});Gr.displayName="Route";var qp=k.createContext(null);qp.displayName="RouteError";var T1="REACT_ROUTER_ERROR",GT="REDIRECT",WT="ROUTE_ERROR_RESPONSE";function $T(r){if(r.startsWith(`${T1}:${GT}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function KT(r){if(r.startsWith(`${T1}:${WT}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new VT(e.status,e.statusText,e.data)}catch{}}function YT(r,{relative:e}={}){un(_l(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=k.useContext(Bs),{hash:o,pathname:u,search:d}=Qc(r,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:yi([n,u])),i.createHref({pathname:p,search:d,hash:o})}function _l(){return k.useContext(Yc)!=null}function wr(){return un(_l(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Yc).location}var S1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function k1(r){k.useContext(Bs).static||k.useLayoutEffect(r)}function sr(){let{isDataRoute:r}=k.useContext(Gr);return r?lS():QT()}function QT(){un(_l(),"useNavigate() may be used only in the context of a <Router> component.");let r=k.useContext(bl),{basename:e,navigator:n}=k.useContext(Bs),{matches:i}=k.useContext(Gr),{pathname:o}=wr(),u=JSON.stringify(zp(i)),d=k.useRef(!1);return k1(()=>{d.current=!0}),k.useCallback((g,y={})=>{if(nr(d.current,S1),!d.current)return;if(typeof g=="number"){n.go(g);return}let w=Fp(g,JSON.parse(u),o,y.relative==="path");r==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:yi([e,w.pathname])),(y.replace?n.replace:n.push)(w,y.state,y)},[e,n,u,o,r])}k.createContext(null);function Qc(r,{relative:e}={}){let{matches:n}=k.useContext(Gr),{pathname:i}=wr(),o=JSON.stringify(zp(n));return k.useMemo(()=>Fp(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function XT(r,e){return A1(r,e)}function A1(r,e,n,i,o){un(_l(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=k.useContext(Bs),{matches:d}=k.useContext(Gr),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",w=p?p.pathnameBase:"/",x=p&&p.route;{let ee=x&&x.path||"";C1(y,!x||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let T=wr(),O;if(e){let ee=typeof e=="string"?vl(e):e;un(w==="/"||ee.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),O=ee}else O=T;let q=O.pathname||"/",G=q;if(w!=="/"){let ee=w.replace(/^\//,"").split("/");G="/"+q.replace(/^\//,"").split("/").slice(ee.length).join("/")}let z=y1(r,{pathname:G});nr(x||z!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),nr(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ie=nS(z&&z.map(ee=>Object.assign({},ee,{params:Object.assign({},g,ee.params),pathname:yi([w,u.encodeLocation?u.encodeLocation(ee.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?w:yi([w,u.encodeLocation?u.encodeLocation(ee.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathnameBase])})),d,n,i,o);return e&&ie?k.createElement(Yc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},ie):ie}function JT(){let r=oS(),e=UT(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:u},"ErrorBoundary")," or"," ",k.createElement("code",{style:u},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,d)}var ZT=k.createElement(JT,null),R1=class extends k.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const n=KT(r.digest);n&&(r=n)}let e=r!==void 0?k.createElement(Gr.Provider,{value:this.props.routeContext},k.createElement(qp.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?k.createElement(eS,{error:r},e):e}};R1.contextType=FT;var Bm=new WeakMap;function eS({children:r,error:e}){let{basename:n}=k.useContext(Bs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=$T(e.digest);if(i){let o=Bm.get(e);if(o)throw o;let u=w1(i.location,n);if(_1&&!Bm.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw Bm.set(e,d),d}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return r}function tS({routeContext:r,match:e,children:n}){let i=k.useContext(bl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Gr.Provider,{value:r},n)}function nS(r,e=[],n=null,i=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,d=n?.errors;if(d!=null){let w=u.findIndex(x=>x.route.id&&d?.[x.route.id]!==void 0);un(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,w+1))}let p=!1,g=-1;if(n)for(let w=0;w<u.length;w++){let x=u[w];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=w),x.route.id){let{loaderData:T,errors:O}=n,q=x.route.loader&&!T.hasOwnProperty(x.route.id)&&(!O||O[x.route.id]===void 0);if(x.route.lazy||q){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&i?(w,x)=>{i(w,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:BT(n.matches),errorInfo:x})}:void 0;return u.reduceRight((w,x,T)=>{let O,q=!1,G=null,z=null;n&&(O=d&&x.route.id?d[x.route.id]:void 0,G=x.route.errorElement||ZT,p&&(g<0&&T===0?(C1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),q=!0,z=null):g===T&&(q=!0,z=x.route.hydrateFallbackElement||null)));let ie=e.concat(u.slice(0,T+1)),ee=()=>{let he;return O?he=G:q?he=z:x.route.Component?he=k.createElement(x.route.Component,null):x.route.element?he=x.route.element:he=w,k.createElement(tS,{match:x,routeContext:{outlet:w,matches:ie,isDataRoute:n!=null},children:he})};return n&&(x.route.ErrorBoundary||x.route.errorElement||T===0)?k.createElement(R1,{location:n.location,revalidation:n.revalidation,component:G,error:O,children:ee(),routeContext:{outlet:null,matches:ie,isDataRoute:!0},onError:y}):ee()},null)}function Hp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sS(r){let e=k.useContext(bl);return un(e,Hp(r)),e}function rS(r){let e=k.useContext(pd);return un(e,Hp(r)),e}function iS(r){let e=k.useContext(Gr);return un(e,Hp(r)),e}function Gp(r){let e=iS(r),n=e.matches[e.matches.length-1];return un(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function aS(){return Gp("useRouteId")}function oS(){let r=k.useContext(qp),e=rS("useRouteError"),n=Gp("useRouteError");return r!==void 0?r:e.errors?.[n]}function lS(){let{router:r}=sS("useNavigate"),e=Gp("useNavigate"),n=k.useRef(!1);return k1(()=>{n.current=!0}),k.useCallback(async(o,u={})=>{nr(n.current,S1),n.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var Rb={};function C1(r,e,n){!e&&!Rb[r]&&(Rb[r]=!0,nr(!1,n))}k.memo(cS);function cS({routes:r,future:e,state:n,onError:i}){return A1(r,void 0,n,i,e)}function uS({to:r,replace:e,state:n,relative:i}){un(_l(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=k.useContext(Bs);nr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=k.useContext(Gr),{pathname:d}=wr(),p=sr(),g=Fp(r,zp(u),d,i==="path"),y=JSON.stringify(g);return k.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function Sn(r){un(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hS({basename:r="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:u=!1,unstable_useTransitions:d}){un(!_l(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=r.replace(/^\/*/,"/"),g=k.useMemo(()=>({basename:p,navigator:o,static:u,unstable_useTransitions:d,future:{}}),[p,o,u,d]);typeof n=="string"&&(n=vl(n));let{pathname:y="/",search:w="",hash:x="",state:T=null,key:O="default"}=n,q=k.useMemo(()=>{let G=_i(y,p);return G==null?null:{location:{pathname:G,search:w,hash:x,state:T,key:O},navigationType:i}},[p,y,w,x,T,O,i]);return nr(q!=null,`<Router basename="${p}"> is not able to match the URL "${y}${w}${x}" because it does not start with the basename, so the <Router> won't render anything.`),q==null?null:k.createElement(Bs.Provider,{value:g},k.createElement(Yc.Provider,{children:e,value:q}))}function dS({children:r,location:e}){return XT(up(r),e)}function up(r,e=[]){let n=[];return k.Children.forEach(r,(i,o)=>{if(!k.isValidElement(i))return;let u=[...e,o];if(i.type===k.Fragment){n.push.apply(n,up(i.props.children,u));return}un(i.type===Sn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),un(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=up(i.props.children,u)),n.push(d)}),n}var Ph="get",Oh="application/x-www-form-urlencoded";function gd(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function fS(r){return gd(r)&&r.tagName.toLowerCase()==="button"}function mS(r){return gd(r)&&r.tagName.toLowerCase()==="form"}function pS(r){return gd(r)&&r.tagName.toLowerCase()==="input"}function gS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function yS(r,e){return r.button===0&&(!e||e==="_self")&&!gS(r)}function hp(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,n)=>{let i=r[n];return e.concat(Array.isArray(i)?i.map(o=>[n,o]):[[n,i]])},[]))}function vS(r,e){let n=hp(r);return e&&e.forEach((i,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var Th=null;function bS(){if(Th===null)try{new FormData(document.createElement("form"),0),Th=!1}catch{Th=!0}return Th}var _S=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zm(r){return r!=null&&!_S.has(r)?(nr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Oh}"`),null):r}function wS(r,e){let n,i,o,u,d;if(mS(r)){let p=r.getAttribute("action");i=p?_i(p,e):null,n=r.getAttribute("method")||Ph,o=zm(r.getAttribute("enctype"))||Oh,u=new FormData(r)}else if(fS(r)||pS(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||p.getAttribute("action");if(i=g?_i(g,e):null,n=r.getAttribute("formmethod")||p.getAttribute("method")||Ph,o=zm(r.getAttribute("formenctype"))||zm(p.getAttribute("enctype"))||Oh,u=new FormData(p,r),!bS()){let{name:y,type:w,value:x}=r;if(w==="image"){let T=y?`${y}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else y&&u.append(y,x)}}else{if(gd(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ph,i=null,o=Oh,d=r}return u&&o==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function xS(r,e,n,i){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${i}`:o.pathname=`${o.pathname}.${i}`:o.pathname==="/"?o.pathname=`_root.${i}`:e&&_i(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function ES(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function SS(r,e,n){let i=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await ES(u,n);return d.links?d.links():[]}return[]}));return CS(i.flat(1).filter(TS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Cb(r,e,n,i,o,u){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let w=i.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let x=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function kS(r,e,{includeHydrateFallback:n}={}){return AS(r.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function AS(r){return[...new Set(r)]}function RS(r){let e={},n=Object.keys(r).sort();for(let i of n)e[i]=r[i];return e}function CS(r,e){let n=new Set;return new Set(e),r.reduce((i,o)=>{let u=JSON.stringify(RS(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}function N1(){let r=k.useContext(bl);return Wp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function NS(){let r=k.useContext(pd);return Wp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var $p=k.createContext(void 0);$p.displayName="FrameworkContext";function I1(){let r=k.useContext($p);return Wp(r,"You must render this element inside a <HydratedRouter> element"),r}function IS(r,e){let n=k.useContext($p),[i,o]=k.useState(!1),[u,d]=k.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:x}=e,T=k.useRef(null);k.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let G=ie=>{ie.forEach(ee=>{d(ee.isIntersecting)})},z=new IntersectionObserver(G,{threshold:.5});return T.current&&z.observe(T.current),()=>{z.disconnect()}}},[r]),k.useEffect(()=>{if(i){let G=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(G)}}},[i]);let O=()=>{o(!0)},q=()=>{o(!1),d(!1)};return n?r!=="intent"?[u,T,{}]:[u,T,{onFocus:bc(p,O),onBlur:bc(g,q),onMouseEnter:bc(y,O),onMouseLeave:bc(w,q),onTouchStart:bc(x,O)}]:[!1,T,{}]}function bc(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function jS({page:r,...e}){let{router:n}=N1(),i=k.useMemo(()=>y1(n.routes,r,n.basename),[n.routes,r,n.basename]);return i?k.createElement(MS,{page:r,matches:i,...e}):null}function DS(r){let{manifest:e,routeModules:n}=I1(),[i,o]=k.useState([]);return k.useEffect(()=>{let u=!1;return SS(r,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[r,e,n]),i}function MS({page:r,matches:e,...n}){let i=wr(),{future:o,manifest:u,routeModules:d}=I1(),{basename:p}=N1(),{loaderData:g,matches:y}=NS(),w=k.useMemo(()=>Cb(r,e,y,u,i,"data"),[r,e,y,u,i]),x=k.useMemo(()=>Cb(r,e,y,u,i,"assets"),[r,e,y,u,i]),T=k.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let G=new Set,z=!1;if(e.forEach(ee=>{let he=u.routes[ee.route.id];!he||!he.hasLoader||(!w.some(_e=>_e.route.id===ee.route.id)&&ee.route.id in g&&d[ee.route.id]?.shouldRevalidate||he.hasClientLoader?z=!0:G.add(ee.route.id))}),G.size===0)return[];let ie=xS(r,p,o.unstable_trailingSlashAwareDataRequests,"data");return z&&G.size>0&&ie.searchParams.set("_routes",e.filter(ee=>G.has(ee.route.id)).map(ee=>ee.route.id).join(",")),[ie.pathname+ie.search]},[p,o.unstable_trailingSlashAwareDataRequests,g,i,u,w,e,r,d]),O=k.useMemo(()=>kS(x,u),[x,u]),q=DS(x);return k.createElement(k.Fragment,null,T.map(G=>k.createElement("link",{key:G,rel:"prefetch",as:"fetch",href:G,...n})),O.map(G=>k.createElement("link",{key:G,rel:"modulepreload",href:G,...n})),q.map(({key:G,link:z})=>k.createElement("link",{key:G,nonce:n.nonce,...z,crossOrigin:z.crossOrigin??n.crossOrigin})))}function PS(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var OS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{OS&&(window.__reactRouterVersion="7.13.0")}catch{}function LS({basename:r,children:e,unstable_useTransitions:n,window:i}){let o=k.useRef();o.current==null&&(o.current=pT({window:i,v5Compat:!0}));let u=o.current,[d,p]=k.useState({action:u.action,location:u.location}),g=k.useCallback(y=>{n===!1?p(y):k.startTransition(()=>p(y))},[n]);return k.useLayoutEffect(()=>u.listen(g),[u,g]),k.createElement(hS,{basename:r,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var j1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D1=k.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:w,viewTransition:x,unstable_defaultShouldRevalidate:T,...O},q){let{basename:G,unstable_useTransitions:z}=k.useContext(Bs),ie=typeof y=="string"&&j1.test(y),ee=w1(y,G);y=ee.to;let he=YT(y,{relative:o}),[_e,je,Ne]=IS(i,O),N=zS(y,{replace:d,state:p,target:g,preventScrollReset:w,relative:o,viewTransition:x,unstable_defaultShouldRevalidate:T,unstable_useTransitions:z});function S(I){e&&e(I),I.defaultPrevented||N(I)}let R=k.createElement("a",{...O,...Ne,href:ee.absoluteURL||he,onClick:ee.isExternal||u?e:S,ref:PS(q,je),target:g,"data-discover":!ie&&n==="render"?"true":void 0});return _e&&!ie?k.createElement(k.Fragment,null,R,k.createElement(jS,{page:he})):R});D1.displayName="Link";var VS=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:d,viewTransition:p,children:g,...y},w){let x=Qc(d,{relative:y.relative}),T=wr(),O=k.useContext(pd),{navigator:q,basename:G}=k.useContext(Bs),z=O!=null&&WS(x)&&p===!0,ie=q.encodeLocation?q.encodeLocation(x).pathname:x.pathname,ee=T.pathname,he=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(ee=ee.toLowerCase(),he=he?he.toLowerCase():null,ie=ie.toLowerCase()),he&&G&&(he=_i(he,G)||he);const _e=ie!=="/"&&ie.endsWith("/")?ie.length-1:ie.length;let je=ee===ie||!o&&ee.startsWith(ie)&&ee.charAt(_e)==="/",Ne=he!=null&&(he===ie||!o&&he.startsWith(ie)&&he.charAt(ie.length)==="/"),N={isActive:je,isPending:Ne,isTransitioning:z},S=je?e:void 0,R;typeof i=="function"?R=i(N):R=[i,je?"active":null,Ne?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let I=typeof u=="function"?u(N):u;return k.createElement(D1,{...y,"aria-current":S,className:R,ref:w,style:I,to:d,viewTransition:p},typeof g=="function"?g(N):g)});VS.displayName="NavLink";var US=k.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:u,method:d=Ph,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:x,unstable_defaultShouldRevalidate:T,...O},q)=>{let{unstable_useTransitions:G}=k.useContext(Bs),z=HS(),ie=GS(p,{relative:y}),ee=d.toLowerCase()==="get"?"get":"post",he=typeof p=="string"&&j1.test(p),_e=je=>{if(g&&g(je),je.defaultPrevented)return;je.preventDefault();let Ne=je.nativeEvent.submitter,N=Ne?.getAttribute("formmethod")||d,S=()=>z(Ne||je.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:o,state:u,relative:y,preventScrollReset:w,viewTransition:x,unstable_defaultShouldRevalidate:T});G&&n!==!1?k.startTransition(()=>S()):S()};return k.createElement("form",{ref:q,method:ee,action:ie,onSubmit:i?g:_e,...O,"data-discover":!he&&r==="render"?"true":void 0})});US.displayName="Form";function BS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M1(r){let e=k.useContext(bl);return un(e,BS(r)),e}function zS(r,{target:e,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=sr(),w=wr(),x=Qc(r,{relative:u});return k.useCallback(T=>{if(yS(T,e)){T.preventDefault();let O=n!==void 0?n:Vc(w)===Vc(x),q=()=>y(r,{replace:O,state:i,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?k.startTransition(()=>q()):q()}},[w,y,x,n,i,e,r,o,u,d,p,g])}function m3(r){nr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=k.useRef(hp(r)),n=k.useRef(!1),i=wr(),o=k.useMemo(()=>vS(i.search,n.current?null:e.current),[i.search]),u=sr(),d=k.useCallback((p,g)=>{const y=hp(typeof p=="function"?p(new URLSearchParams(o)):p);n.current=!0,u("?"+y,g)},[u,o]);return[o,d]}var FS=0,qS=()=>`__${String(++FS)}__`;function HS(){let{router:r}=M1("useSubmit"),{basename:e}=k.useContext(Bs),n=aS(),i=r.fetch,o=r.navigate;return k.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:w,body:x}=wS(u,e);if(d.navigate===!1){let T=d.fetcherKey||qS();await i(T,n,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:w,body:x,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await o(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:w,body:x,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,o,e,n])}function GS(r,{relative:e}={}){let{basename:n}=k.useContext(Bs),i=k.useContext(Gr);un(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...Qc(r||".",{relative:e})},d=wr();if(r==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(x=>x).forEach(x=>p.append("index",x));let w=p.toString();u.search=w?`?${w}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:yi([n,u.pathname])),Vc(u)}function WS(r,{relative:e}={}){let n=k.useContext(E1);un(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=M1("useViewTransitionState"),o=Qc(r,{relative:e});if(!n.isTransitioning)return!1;let u=_i(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=_i(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Kh(o.pathname,d)!=null||Kh(o.pathname,u)!=null}const $S=()=>{};var Nb={};const P1=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},KS=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],d=r[n++],p=r[n++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],d=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},O1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const u=r[o],d=o+1<r.length,p=d?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,w=u>>2,x=(u&3)<<4|p>>4;let T=(p&15)<<2|y>>6,O=y&63;g||(O=64,d||(T=64)),i.push(n[w],n[x],n[T],n[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(P1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):KS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],p=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const x=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||p==null||y==null||x==null)throw new YS;const T=u<<2|p>>4;if(i.push(T),y!==64){const O=p<<4&240|y>>2;if(i.push(O),x!==64){const q=y<<6&192|x;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class YS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QS=function(r){const e=P1(r);return O1.encodeByteArray(e,!0)},Yh=function(r){return QS(r).replace(/\./g,"")},L1=function(r){try{return O1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const JS=()=>XS().__FIREBASE_DEFAULTS__,ZS=()=>{if(typeof process>"u"||typeof Nb>"u")return;const r=Nb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},ek=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&L1(r[1]);return e&&JSON.parse(e)},yd=()=>{try{return $S()||JS()||ZS()||ek()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},V1=r=>yd()?.emulatorHosts?.[r],U1=r=>{const e=V1(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},B1=()=>yd()?.config,z1=r=>yd()?.[`_${r}`];class tk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Ea(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kp(r){return(await fetch(r,{credentials:"include"})).ok}function F1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Yh(JSON.stringify(n)),Yh(JSON.stringify(d)),""].join(".")}const jc={};function nk(){const r={prod:[],emulator:[]};for(const e of Object.keys(jc))jc[e]?r.emulator.push(e):r.prod.push(e);return r}function sk(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Ib=!1;function Yp(r,e){if(typeof window>"u"||typeof document>"u"||!Ea(window.location.host)||jc[r]===e||jc[r]||Ib)return;jc[r]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",u=nk().prod.length>0;function d(){const T=document.getElementById(i);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,O){T.setAttribute("width","24"),T.setAttribute("id",O),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Ib=!0,d()},T}function w(T,O){T.setAttribute("id",O),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=sk(i),O=n("text"),q=document.getElementById(O)||document.createElement("span"),G=n("learnmore"),z=document.getElementById(G)||document.createElement("a"),ie=n("preprendIcon"),ee=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const he=T.element;p(he),w(z,G);const _e=y();g(ee,ie),he.append(ee,q,z,_e),document.body.appendChild(he)}u?(q.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function cs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cs())}function ik(){const r=yd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ak(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ok(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function lk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ck(){const r=cs();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function uk(){return!ik()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hk(){try{return typeof indexedDB=="object"}catch{return!1}}function dk(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const fk="FirebaseError";class Wr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=fk,Object.setPrototypeOf(this,Wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xc.prototype.create)}}class Xc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?mk(u,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new Wr(o,p,i)}}function mk(r,e){return r.replace(pk,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const pk=/\{\$([^}]+)}/g;function gk(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function io(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const u=r[o],d=e[o];if(jb(u)&&jb(d)){if(!io(u,d))return!1}else if(u!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function jb(r){return r!==null&&typeof r=="object"}function Jc(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Tc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Sc(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function yk(r,e){const n=new vk(r,e);return n.subscribe.bind(n)}class vk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");bk(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Fm),o.error===void 0&&(o.error=Fm),o.complete===void 0&&(o.complete=Fm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bk(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Fm(){}function fn(r){return r&&r._delegate?r._delegate:r}class ga{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ja="[DEFAULT]";class _k{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new tk;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xk(e))try{this.getOrInitializeService({instanceIdentifier:Ja})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=Ja){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ja){return this.instances.has(e)}getOptions(e=Ja){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&d.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wk(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ja){return this.component?this.component.multipleInstances?e:Ja:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wk(r){return r===Ja?void 0:r}function xk(r){return r.instantiationMode==="EAGER"}class Ek{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _k(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Tt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Tt||(Tt={}));const Tk={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},Sk=Tt.INFO,kk={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},Ak=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=kk[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qp{constructor(e){this.name=e,this._logLevel=Sk,this._logHandler=Ak,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...e),this._logHandler(this,Tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...e),this._logHandler(this,Tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...e),this._logHandler(this,Tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...e),this._logHandler(this,Tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...e),this._logHandler(this,Tt.ERROR,...e)}}const Rk=(r,e)=>e.some(n=>r instanceof n);let Db,Mb;function Ck(){return Db||(Db=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nk(){return Mb||(Mb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const q1=new WeakMap,dp=new WeakMap,H1=new WeakMap,qm=new WeakMap,Xp=new WeakMap;function Ik(r){const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",d)},u=()=>{n(da(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&q1.set(n,r)}).catch(()=>{}),Xp.set(e,r),e}function jk(r){if(dp.has(r))return;const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",d),r.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",d),r.addEventListener("abort",d)});dp.set(r,e)}let fp={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return dp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||H1.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return da(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Dk(r){fp=r(fp)}function Mk(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(Hm(this),e,...n);return H1.set(i,e.sort?e.sort():[e]),da(i)}:Nk().includes(r)?function(...e){return r.apply(Hm(this),e),da(q1.get(this))}:function(...e){return da(r.apply(Hm(this),e))}}function Pk(r){return typeof r=="function"?Mk(r):(r instanceof IDBTransaction&&jk(r),Rk(r,Ck())?new Proxy(r,fp):r)}function da(r){if(r instanceof IDBRequest)return Ik(r);if(qm.has(r))return qm.get(r);const e=Pk(r);return e!==r&&(qm.set(r,e),Xp.set(e,r)),e}const Hm=r=>Xp.get(r);function Ok(r,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const d=indexedDB.open(r,e),p=da(d);return i&&d.addEventListener("upgradeneeded",g=>{i(da(d.result),g.oldVersion,g.newVersion,da(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const Lk=["get","getKey","getAll","getAllKeys","count"],Vk=["put","add","delete","clear"],Gm=new Map;function Pb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Gm.get(e))return Gm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=Vk.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Lk.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return Gm.set(e,u),u}Dk(r=>({...r,get:(e,n,i)=>Pb(e,n)||r.get(e,n,i),has:(e,n)=>!!Pb(e,n)||r.has(e,n)}));class Uk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bk(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Bk(r){return r.getComponent()?.type==="VERSION"}const mp="@firebase/app",Ob="0.14.7";const wi=new Qp("@firebase/app"),zk="@firebase/app-compat",Fk="@firebase/analytics-compat",qk="@firebase/analytics",Hk="@firebase/app-check-compat",Gk="@firebase/app-check",Wk="@firebase/auth",$k="@firebase/auth-compat",Kk="@firebase/database",Yk="@firebase/data-connect",Qk="@firebase/database-compat",Xk="@firebase/functions",Jk="@firebase/functions-compat",Zk="@firebase/installations",eA="@firebase/installations-compat",tA="@firebase/messaging",nA="@firebase/messaging-compat",sA="@firebase/performance",rA="@firebase/performance-compat",iA="@firebase/remote-config",aA="@firebase/remote-config-compat",oA="@firebase/storage",lA="@firebase/storage-compat",cA="@firebase/firestore",uA="@firebase/ai",hA="@firebase/firestore-compat",dA="firebase",fA="12.8.0";const pp="[DEFAULT]",mA={[mp]:"fire-core",[zk]:"fire-core-compat",[qk]:"fire-analytics",[Fk]:"fire-analytics-compat",[Gk]:"fire-app-check",[Hk]:"fire-app-check-compat",[Wk]:"fire-auth",[$k]:"fire-auth-compat",[Kk]:"fire-rtdb",[Yk]:"fire-data-connect",[Qk]:"fire-rtdb-compat",[Xk]:"fire-fn",[Jk]:"fire-fn-compat",[Zk]:"fire-iid",[eA]:"fire-iid-compat",[tA]:"fire-fcm",[nA]:"fire-fcm-compat",[sA]:"fire-perf",[rA]:"fire-perf-compat",[iA]:"fire-rc",[aA]:"fire-rc-compat",[oA]:"fire-gcs",[lA]:"fire-gcs-compat",[cA]:"fire-fst",[hA]:"fire-fst-compat",[uA]:"fire-vertex","fire-js":"fire-js",[dA]:"fire-js-all"};const Qh=new Map,pA=new Map,gp=new Map;function Lb(r,e){try{r.container.addComponent(e)}catch(n){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ao(r){const e=r.name;if(gp.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;gp.set(e,r);for(const n of Qh.values())Lb(n,r);for(const n of pA.values())Lb(n,r);return!0}function vd(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Ls(r){return r==null?!1:r.settings!==void 0}const gA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fa=new Xc("app","Firebase",gA);class yA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fa.create("app-deleted",{appName:this._name})}}const mo=fA;function Jp(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i={name:pp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw fa.create("bad-app-name",{appName:String(o)});if(n||(n=B1()),!n)throw fa.create("no-options");const u=Qh.get(o);if(u){if(io(n,u.options)&&io(i,u.config))return u;throw fa.create("duplicate-app",{appName:o})}const d=new Ek(o);for(const g of gp.values())d.addComponent(g);const p=new yA(n,i,d);return Qh.set(o,p),p}function Zp(r=pp){const e=Qh.get(r);if(!e&&r===pp&&B1())return Jp();if(!e)throw fa.create("no-app",{appName:r});return e}function Vr(r,e,n){let i=mA[r]??r;n&&(i+=`-${n}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(d.join(" "));return}ao(new ga(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const vA="firebase-heartbeat-database",bA=1,Uc="firebase-heartbeat-store";let Wm=null;function G1(){return Wm||(Wm=Ok(vA,bA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Uc)}catch(n){console.warn(n)}}}}).catch(r=>{throw fa.create("idb-open",{originalErrorMessage:r.message})})),Wm}async function _A(r){try{const n=(await G1()).transaction(Uc),i=await n.objectStore(Uc).get(W1(r));return await n.done,i}catch(e){if(e instanceof Wr)wi.warn(e.message);else{const n=fa.create("idb-get",{originalErrorMessage:e?.message});wi.warn(n.message)}}}async function Vb(r,e){try{const i=(await G1()).transaction(Uc,"readwrite");await i.objectStore(Uc).put(e,W1(r)),await i.done}catch(n){if(n instanceof Wr)wi.warn(n.message);else{const i=fa.create("idb-set",{originalErrorMessage:n?.message});wi.warn(i.message)}}}function W1(r){return`${r.name}!${r.options.appId}`}const wA=1024,xA=30;class EA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ub();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>xA){const o=kA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ub(),{heartbeatsToSend:n,unsentEntries:i}=TA(this._heartbeatsCache.heartbeats),o=Yh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return wi.warn(e),""}}}function Ub(){return new Date().toISOString().substring(0,10)}function TA(r,e=wA){const n=[];let i=r.slice();for(const o of r){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),Bb(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Bb(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class SA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hk()?dk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _A(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Vb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Vb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Bb(r){return Yh(JSON.stringify({version:2,heartbeats:r})).length}function kA(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}function AA(r){ao(new ga("platform-logger",e=>new Uk(e),"PRIVATE")),ao(new ga("heartbeat",e=>new EA(e),"PRIVATE")),Vr(mp,Ob,r),Vr(mp,Ob,"esm2020"),Vr("fire-js","")}AA("");function $1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RA=$1,K1=new Xc("auth","Firebase",$1());const Xh=new Qp("@firebase/auth");function CA(r,...e){Xh.logLevel<=Tt.WARN&&Xh.warn(`Auth (${mo}): ${r}`,...e)}function Lh(r,...e){Xh.logLevel<=Tt.ERROR&&Xh.error(`Auth (${mo}): ${r}`,...e)}function vr(r,...e){throw eg(r,...e)}function Ur(r,...e){return eg(r,...e)}function Y1(r,e,n){const i={...RA(),[e]:n};return new Xc("auth","Firebase",i).create(e,{appName:r.name})}function vi(r){return Y1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eg(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return K1.create(r,...e)}function tt(r,e,...n){if(!r)throw eg(e,...n)}function pi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Lh(e),new Error(e)}function xi(r,e){r||pi(e)}function yp(){return typeof self<"u"&&self.location?.href||""}function NA(){return zb()==="http:"||zb()==="https:"}function zb(){return typeof self<"u"&&self.location?.protocol||null}function IA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NA()||ok()||"connection"in navigator)?navigator.onLine:!0}function jA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Zc{constructor(e,n){this.shortDelay=e,this.longDelay=n,xi(n>e,"Short delay should be less than long delay!"),this.isMobile=rk()||lk()}get(){return IA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tg(r,e){xi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Q1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const DA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const MA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PA=new Zc(3e4,6e4);function Si(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ki(r,e,n,i,o={}){return X1(r,o,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const p=Jc({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...u};return ak()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Ea(r.emulatorConfig.host)&&(y.credentials="include"),Q1.fetch()(await J1(r,r.config.apiHost,n,p),y)})}async function X1(r,e,n){r._canInitEmulator=!1;const i={...DA,...e};try{const o=new LA(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Sh(r,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Sh(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Sh(r,"user-disabled",d);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Y1(r,w,y);vr(r,w)}}catch(o){if(o instanceof Wr)throw o;vr(r,"network-request-failed",{message:String(o)})}}async function eu(r,e,n,i,o={}){const u=await ki(r,e,n,i,o);return"mfaPendingCredential"in u&&vr(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function J1(r,e,n,i){const o=`${e}${n}?${i}`,u=r,d=u.config.emulator?tg(r.config,o):`${r.config.apiScheme}://${o}`;return MA.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function OA(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ur(this.auth,"network-request-failed")),PA.get())})}}function Sh(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ur(r,e,i);return o.customData._tokenResponse=n,o}function Fb(r){return r!==void 0&&r.enterprise!==void 0}class VA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return OA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function UA(r,e){return ki(r,"GET","/v2/recaptchaConfig",Si(r,e))}async function BA(r,e){return ki(r,"POST","/v1/accounts:delete",e)}async function Jh(r,e){return ki(r,"POST","/v1/accounts:lookup",e)}function Dc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zA(r,e=!1){const n=fn(r),i=await n.getIdToken(e),o=ng(i);tt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:i,authTime:Dc($m(o.auth_time)),issuedAtTime:Dc($m(o.iat)),expirationTime:Dc($m(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function $m(r){return Number(r)*1e3}function ng(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return Lh("JWT malformed, contained fewer than 3 sections"),null;try{const o=L1(n);return o?JSON.parse(o):(Lh("Failed to decode base64 JWT payload"),null)}catch(o){return Lh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function qb(r){const e=ng(r);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Bc(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Wr&&FA(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function FA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class qA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class vp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dc(this.lastLoginAt),this.creationTime=Dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Zh(r){const e=r.auth,n=await r.getIdToken(),i=await Bc(r,Jh(e,{idToken:n}));tt(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?Z1(o.providerUserInfo):[],d=GA(r.providerData,u),p=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!d?.length,y=p?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new vp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,w)}async function HA(r){const e=fn(r);await Zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GA(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Z1(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function WA(r,e){const n=await X1(r,{},async()=>{const i=Jc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,d=await J1(r,o,"/v1/token",`key=${u}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return r.emulatorConfig&&Ea(r.emulatorConfig.host)&&(g.credentials="include"),Q1.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $A(r,e){return ki(r,"POST","/v2/accounts:revokeToken",Si(r,e))}class il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const n=qb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:u}=await WA(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:u}=n,d=new il;return i&&(tt(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(tt(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(tt(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new il,this.toJSON())}_performRefresh(){return pi("not implemented")}}function ia(r,e){tt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gr{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new qA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Bc(this,this.stsTokenManager.getToken(this.auth,e));return tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zA(this,e)}reload(){return HA(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Zh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ls(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await Bc(this,BA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,w=n.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:O,providerData:q,stsTokenManager:G}=n;tt(x&&G,e,"internal-error");const z=il.fromJSON(this.name,G);tt(typeof x=="string",e,"internal-error"),ia(i,e.name),ia(o,e.name),tt(typeof T=="boolean",e,"internal-error"),tt(typeof O=="boolean",e,"internal-error"),ia(u,e.name),ia(d,e.name),ia(p,e.name),ia(g,e.name),ia(y,e.name),ia(w,e.name);const ie=new gr({uid:x,auth:e,email:o,emailVerified:T,displayName:i,isAnonymous:O,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:z,createdAt:y,lastLoginAt:w});return q&&Array.isArray(q)&&(ie.providerData=q.map(ee=>({...ee}))),g&&(ie._redirectEventId=g),ie}static async _fromIdTokenResponse(e,n,i=!1){const o=new il;o.updateFromServerResponse(n);const u=new gr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Zh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];tt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Z1(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,p=new il;p.updateFromIdToken(i);const g=new gr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new vp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const Hb=new Map;function gi(r){xi(r instanceof Function,"Expected a class definition");let e=Hb.get(r);return e?(xi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Hb.set(r,e),e)}class ew{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ew.type="NONE";const Gb=ew;function Vh(r,e,n){return`firebase:${r}:${e}:${n}`}class al{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=Vh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Vh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Jh(this.auth,{idToken:e}).catch(()=>{});return n?gr._fromGetAccountInfoResponse(this.auth,n,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new al(gi(Gb),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||gi(Gb);const d=Vh(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const w=await y._get(d);if(w){let x;if(typeof w=="string"){const T=await Jh(e,{idToken:w}).catch(()=>{});if(!T)break;x=await gr._fromGetAccountInfoResponse(e,T,w)}else x=gr._fromJSON(e,w);y!==u&&(p=x),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new al(u,e,i):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new al(u,e,i))}}function Wb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aw(e))return"Blackberry";if(ow(e))return"Webos";if(nw(e))return"Safari";if((e.includes("chrome/")||sw(e))&&!e.includes("edge/"))return"Chrome";if(iw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if(i?.length===2)return i[1]}return"Other"}function tw(r=cs()){return/firefox\//i.test(r)}function nw(r=cs()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sw(r=cs()){return/crios\//i.test(r)}function rw(r=cs()){return/iemobile/i.test(r)}function iw(r=cs()){return/android/i.test(r)}function aw(r=cs()){return/blackberry/i.test(r)}function ow(r=cs()){return/webos/i.test(r)}function sg(r=cs()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function KA(r=cs()){return sg(r)&&!!window.navigator?.standalone}function YA(){return ck()&&document.documentMode===10}function lw(r=cs()){return sg(r)||iw(r)||ow(r)||aw(r)||/windows phone/i.test(r)||rw(r)}function cw(r,e=[]){let n;switch(r){case"Browser":n=Wb(cs());break;case"Worker":n=`${Wb(cs())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mo}/${i}`}class QA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function XA(r,e={}){return ki(r,"GET","/v2/passwordPolicy",Si(r,e))}const JA=6;class ZA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??JA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class eR{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $b(this),this.idTokenSubscription=new $b(this),this.beforeStateQueue=new QA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await al.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jh(this,{idToken:e}),i=await gr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ls(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ls(this.app))return Promise.reject(vi(this));const n=e?fn(e):null;return n&&tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ls(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ls(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XA(this),n=new ZA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await $A(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gi(e)||this._popupRedirectResolver;tt(n,this,"argument-error"),this.redirectPersistenceManager=await al.create(this,[gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Ls(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&CA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ta(r){return fn(r)}class $b{constructor(e){this.auth=e,this.observer=null,this.addObserver=yk(n=>this.observer=n)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tR(r){bd=r}function uw(r){return bd.loadJS(r)}function nR(){return bd.recaptchaEnterpriseScript}function sR(){return bd.gapiScript}function rR(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class iR{constructor(){this.enterprise=new aR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class aR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const oR="recaptcha-enterprise",hw="NO_RECAPTCHA";class lR{constructor(e){this.type=oR,this.auth=Ta(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{UA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new VA(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function o(u,d,p){const g=window.grecaptcha;Fb(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(hw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iR().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(p=>{if(!n&&Fb(window.grecaptcha))o(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=nR();g.length!==0&&(g+=p),uw(g).then(()=>{o(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function Kb(r,e,n,i=!1,o=!1){const u=new lR(r);let d;if(o)d=hw;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function ed(r,e,n,i,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Kb(r,e,n,n==="getOobCode");return i(r,u)}else return i(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Kb(r,e,n,n==="getOobCode");return i(r,d)}else return Promise.reject(u)})}function cR(r,e){const n=vd(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(io(u,e??{}))return o;vr(o,"already-initialized")}return n.initialize({options:e})}function uR(r,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(gi);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function hR(r,e,n){const i=Ta(r);tt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=dw(e),{host:d,port:p}=dR(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},w=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){tt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),tt(io(y,i.config.emulator)&&io(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Ea(d)?(Kp(`${u}//${d}${g}`),Yp("Auth",!0)):fR()}function dw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function dR(r){const e=dw(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:Yb(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:Yb(d)}}}function Yb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function fR(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class rg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,n){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}async function mR(r,e){return ki(r,"POST","/v1/accounts:signUp",e)}async function pR(r,e){return eu(r,"POST","/v1/accounts:signInWithPassword",Si(r,e))}async function gR(r,e){return ki(r,"POST","/v1/accounts:sendOobCode",Si(r,e))}async function yR(r,e){return gR(r,e)}async function vR(r,e){return eu(r,"POST","/v1/accounts:signInWithEmailLink",Si(r,e))}async function bR(r,e){return eu(r,"POST","/v1/accounts:signInWithEmailLink",Si(r,e))}class zc extends rg{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new zc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new zc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ed(e,n,"signInWithPassword",pR);case"emailLink":return vR(e,{email:this._email,oobCode:this._password});default:vr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ed(e,i,"signUpPassword",mR);case"emailLink":return bR(e,{idToken:n,email:this._email,oobCode:this._password});default:vr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ol(r,e){return eu(r,"POST","/v1/accounts:signInWithIdp",Si(r,e))}const _R="http://localhost";class oo extends rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...u}=n;if(!i||!o)return null;const d=new oo(i,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return ol(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ol(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ol(e,n)}buildRequest(){const e={requestUri:_R,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jc(n)}return e}}function wR(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xR(r){const e=Tc(Sc(r)).link,n=e?Tc(Sc(e)).deep_link_id:null,i=Tc(Sc(r)).deep_link_id;return(i?Tc(Sc(i)).link:null)||i||n||e||r}class ig{constructor(e){const n=Tc(Sc(e)),i=n.apiKey??null,o=n.oobCode??null,u=wR(n.mode??null);tt(i&&o&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=xR(e);try{return new ig(n)}catch{return null}}}class wl{constructor(){this.providerId=wl.PROVIDER_ID}static credential(e,n){return zc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=ig.parseLink(n);return tt(i,"argument-error"),zc._fromEmailAndCode(e,i.code,i.tenantId)}}wl.PROVIDER_ID="password";wl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class fw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class tu extends fw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class oa extends tu{constructor(){super("facebook.com")}static credential(e){return oo._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oa.credential(e.oauthAccessToken)}catch{return null}}}oa.FACEBOOK_SIGN_IN_METHOD="facebook.com";oa.PROVIDER_ID="facebook.com";class la extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oo._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return la.credential(n,i)}catch{return null}}}la.GOOGLE_SIGN_IN_METHOD="google.com";la.PROVIDER_ID="google.com";class ca extends tu{constructor(){super("github.com")}static credential(e){return oo._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ca.credential(e.oauthAccessToken)}catch{return null}}}ca.GITHUB_SIGN_IN_METHOD="github.com";ca.PROVIDER_ID="github.com";class ua extends tu{constructor(){super("twitter.com")}static credential(e,n){return oo._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ua.credential(n,i)}catch{return null}}}ua.TWITTER_SIGN_IN_METHOD="twitter.com";ua.PROVIDER_ID="twitter.com";async function ER(r,e){return eu(r,"POST","/v1/accounts:signUp",Si(r,e))}class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const u=await gr._fromIdTokenResponse(e,i,o),d=Qb(i);return new lo({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=Qb(i);return new lo({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function Qb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class td extends Wr{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,td.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new td(e,n,i,o)}}function mw(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?td._fromErrorAndOperation(r,u,e,i):u})}async function TR(r,e,n=!1){const i=await Bc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return lo._forOperation(r,"link",i)}async function SR(r,e,n=!1){const{auth:i}=r;if(Ls(i.app))return Promise.reject(vi(i));const o="reauthenticate";try{const u=await Bc(r,mw(i,o,e,r),n);tt(u.idToken,i,"internal-error");const d=ng(u.idToken);tt(d,i,"internal-error");const{sub:p}=d;return tt(r.uid===p,i,"user-mismatch"),lo._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&vr(i,"user-mismatch"),u}}async function pw(r,e,n=!1){if(Ls(r.app))return Promise.reject(vi(r));const i="signIn",o=await mw(r,i,e),u=await lo._fromIdTokenResponse(r,i,o);return n||await r._updateCurrentUser(u.user),u}async function kR(r,e){return pw(Ta(r),e)}async function gw(r){const e=Ta(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AR(r,e,n){const i=Ta(r);await ed(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",yR)}async function p3(r,e,n){if(Ls(r.app))return Promise.reject(vi(r));const i=Ta(r),d=await ed(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ER).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&gw(r),g}),p=await lo._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function RR(r,e,n){return Ls(r.app)?Promise.reject(vi(r)):kR(fn(r),wl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&gw(r),i})}function CR(r,e){return fn(r).setPersistence(e)}function NR(r,e,n,i){return fn(r).onIdTokenChanged(e,n,i)}function IR(r,e,n){return fn(r).beforeAuthStateChanged(e,n)}function jR(r,e,n,i){return fn(r).onAuthStateChanged(e,n,i)}function DR(r){return fn(r).signOut()}const nd="__sak";class yw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nd,"1"),this.storage.removeItem(nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const MR=1e3,PR=10;class vw extends yw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);YA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,PR):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},MR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vw.type="LOCAL";const bw=vw;class _w extends yw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_w.type="SESSION";const ag=_w;function OR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class _d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new _d(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async y=>y(n.origin,u)),g=await OR(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_d.receivers=[];function og(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}class LR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=og("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(x){const T=x;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(T.data.response);break;default:clearTimeout(w),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Br(){return window}function VR(r){Br().location.href=r}function ww(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function UR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BR(){return navigator?.serviceWorker?.controller||null}function zR(){return ww()?self:null}const xw="firebaseLocalStorageDb",FR=1,sd="firebaseLocalStorage",Ew="fbase_key";class nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wd(r,e){return r.transaction([sd],e?"readwrite":"readonly").objectStore(sd)}function qR(){const r=indexedDB.deleteDatabase(xw);return new nu(r).toPromise()}function bp(){const r=indexedDB.open(xw,FR);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(sd,{keyPath:Ew})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(sd)?e(i):(i.close(),await qR(),e(await bp()))})})}async function Xb(r,e,n){const i=wd(r,!0).put({[Ew]:e,value:n});return new nu(i).toPromise()}async function HR(r,e){const n=wd(r,!1).get(e),i=await new nu(n).toPromise();return i===void 0?null:i.value}function Jb(r,e){const n=wd(r,!0).delete(e);return new nu(n).toPromise()}const GR=800,WR=3;class Tw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>WR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ww()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_d._getInstance(zR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await UR(),!this.activeServiceWorker)return;this.sender=new LR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bp();return await Xb(e,nd,"1"),await Jb(e,nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Xb(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>HR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=wd(o,!1).getAll();return new nu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tw.type="LOCAL";const $R=Tw;new Zc(3e4,6e4);function KR(r,e){return e?gi(e):(tt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class lg extends rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ol(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ol(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YR(r){return pw(r.auth,new lg(r),r.bypassAuthState)}function QR(r){const{auth:e,user:n}=r;return tt(n,e,"internal-error"),SR(n,new lg(r),r.bypassAuthState)}async function XR(r){const{auth:e,user:n}=r;return tt(n,e,"internal-error"),TR(n,new lg(r),r.bypassAuthState)}class Sw{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YR;case"linkViaPopup":case"linkViaRedirect":return XR;case"reauthViaPopup":case"reauthViaRedirect":return QR;default:vr(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const JR=new Zc(2e3,1e4);class rl extends Sw{constructor(e,n,i,o,u){super(e,n,o,u),this.provider=i,this.authWindow=null,this.pollId=null,rl.currentPopupAction&&rl.currentPopupAction.cancel(),rl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JR.get())};e()}}rl.currentPopupAction=null;const ZR="pendingRedirect",Uh=new Map;class eC extends Sw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Uh.get(this.auth._key());if(!e){try{const i=await tC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Uh.set(this.auth._key(),e)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tC(r,e){const n=rC(e),i=sC(r);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function nC(r,e){Uh.set(r._key(),e)}function sC(r){return gi(r._redirectPersistence)}function rC(r){return Vh(ZR,r.config.apiKey,r.name)}async function iC(r,e,n=!1){if(Ls(r.app))return Promise.reject(vi(r));const i=Ta(r),o=KR(i,e),d=await new eC(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}const aC=600*1e3;class oC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!kw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ur(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zb(e))}saveEventToCache(e){this.cachedEventUids.add(Zb(e)),this.lastProcessedEventTime=Date.now()}}function Zb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function kw({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function lC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kw(r);default:return!1}}async function cC(r,e={}){return ki(r,"GET","/v1/projects",e)}const uC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hC=/^https?/;async function dC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await cC(r);for(const n of e)try{if(fC(n))return}catch{}vr(r,"unauthorized-domain")}function fC(r){const e=yp(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!hC.test(n))return!1;if(uC.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const mC=new Zc(3e4,6e4);function e_(){const r=Br().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function pC(r){return new Promise((e,n)=>{function i(){e_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e_(),n(Ur(r,"network-request-failed"))},timeout:mC.get()})}if(Br().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Br().gapi?.load)i();else{const o=rR("iframefcb");return Br()[o]=()=>{gapi.load?i():n(Ur(r,"network-request-failed"))},uw(`${sR()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Bh=null,e})}let Bh=null;function gC(r){return Bh=Bh||pC(r),Bh}const yC=new Zc(5e3,15e3),vC="__/auth/iframe",bC="emulator/auth/iframe",_C={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xC(r){const e=r.config;tt(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?tg(e,bC):`https://${r.config.authDomain}/${vC}`,i={apiKey:e.apiKey,appName:r.name,v:mo},o=wC.get(r.config.apiHost);o&&(i.eid=o);const u=r._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${Jc(i).slice(1)}`}async function EC(r){const e=await gC(r),n=Br().gapi;return tt(n,r,"internal-error"),e.open({where:document.body,url:xC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_C,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const d=Ur(r,"network-request-failed"),p=Br().setTimeout(()=>{u(d)},yC.get());function g(){Br().clearTimeout(p),o(i)}i.ping(g).then(g,()=>{u(d)})}))}const TC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SC=500,kC=600,AC="_blank",RC="http://localhost";class t_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CC(r,e,n,i=SC,o=kC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...TC,width:i.toString(),height:o.toString(),top:u,left:d},y=cs().toLowerCase();n&&(p=sw(y)?AC:n),tw(y)&&(e=e||RC,g.scrollbars="yes");const w=Object.entries(g).reduce((T,[O,q])=>`${T}${O}=${q},`,"");if(KA(y)&&p!=="_self")return NC(e||"",p),new t_(null);const x=window.open(e||"",p,w);tt(x,r,"popup-blocked");try{x.focus()}catch{}return new t_(x)}function NC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const IC="__/auth/handler",jC="emulator/auth/handler",DC=encodeURIComponent("fac");async function n_(r,e,n,i,o,u){tt(r.config.authDomain,r,"auth-domain-config-required"),tt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:mo,eventId:o};if(e instanceof fw){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",gk(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,x]of Object.entries({}))d[w]=x}if(e instanceof tu){const w=e.getScopes().filter(x=>x!=="");w.length>0&&(d.scopes=w.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await r._getAppCheckToken(),y=g?`#${DC}=${encodeURIComponent(g)}`:"";return`${MC(r)}?${Jc(p).slice(1)}${y}`}function MC({config:r}){return r.emulator?tg(r,jC):`https://${r.authDomain}/${IC}`}const Km="webStorageSupport";class PC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ag,this._completeRedirectFn=iC,this._overrideRedirectResult=nC}async _openPopup(e,n,i,o){xi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await n_(e,n,i,yp(),o);return CC(e,u,og())}async _openRedirect(e,n,i,o){await this._originValidation(e);const u=await n_(e,n,i,yp(),o);return VR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(xi(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await EC(e),i=new oC(e);return n.register("authEvent",o=>(tt(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Km,{type:Km},o=>{const u=o?.[0]?.[Km];u!==void 0&&n(!!u),vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lw()||nw()||sg()}}const OC=PC;var s_="@firebase/auth",r_="1.12.0";class LC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function VC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UC(r){ao(new ga("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;tt(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cw(r)},y=new eR(i,o,u,g);return uR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ao(new ga("auth-internal",e=>{const n=Ta(e.getProvider("auth").getImmediate());return(i=>new LC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(s_,r_,VC(r)),Vr(s_,r_,"esm2020")}const BC=300,zC=z1("authIdTokenMaxAge")||BC;let i_=null;const FC=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>zC)return;const o=n?.token;i_!==o&&(i_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Aw(r=Zp()){const e=vd(r,"auth");if(e.isInitialized())return e.getImmediate();const n=cR(r,{popupRedirectResolver:OC,persistence:[$R,bw,ag]}),i=z1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=FC(u.toString());IR(n,d,()=>d(n.currentUser)),NR(n,p=>d(p))}}const o=V1("auth");return o&&hR(n,`http://${o}`),n}function qC(){return document.getElementsByTagName("head")?.[0]??document}tR({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const u=Ur("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",qC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UC("Browser");var a_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ma,Rw;(function(){var r;function e(N,S){function R(){}R.prototype=S.prototype,N.F=S.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(I,D,U){for(var j=Array(arguments.length-2),et=2;et<arguments.length;et++)j[et-2]=arguments[et];return S.prototype[D].apply(I,j)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,S,R){R||(R=0);const I=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)I[D]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(D=0;D<16;++D)I[D]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=N.g[0],R=N.g[1],D=N.g[2];let U=N.g[3],j;j=S+(U^R&(D^U))+I[0]+3614090360&4294967295,S=R+(j<<7&4294967295|j>>>25),j=U+(D^S&(R^D))+I[1]+3905402710&4294967295,U=S+(j<<12&4294967295|j>>>20),j=D+(R^U&(S^R))+I[2]+606105819&4294967295,D=U+(j<<17&4294967295|j>>>15),j=R+(S^D&(U^S))+I[3]+3250441966&4294967295,R=D+(j<<22&4294967295|j>>>10),j=S+(U^R&(D^U))+I[4]+4118548399&4294967295,S=R+(j<<7&4294967295|j>>>25),j=U+(D^S&(R^D))+I[5]+1200080426&4294967295,U=S+(j<<12&4294967295|j>>>20),j=D+(R^U&(S^R))+I[6]+2821735955&4294967295,D=U+(j<<17&4294967295|j>>>15),j=R+(S^D&(U^S))+I[7]+4249261313&4294967295,R=D+(j<<22&4294967295|j>>>10),j=S+(U^R&(D^U))+I[8]+1770035416&4294967295,S=R+(j<<7&4294967295|j>>>25),j=U+(D^S&(R^D))+I[9]+2336552879&4294967295,U=S+(j<<12&4294967295|j>>>20),j=D+(R^U&(S^R))+I[10]+4294925233&4294967295,D=U+(j<<17&4294967295|j>>>15),j=R+(S^D&(U^S))+I[11]+2304563134&4294967295,R=D+(j<<22&4294967295|j>>>10),j=S+(U^R&(D^U))+I[12]+1804603682&4294967295,S=R+(j<<7&4294967295|j>>>25),j=U+(D^S&(R^D))+I[13]+4254626195&4294967295,U=S+(j<<12&4294967295|j>>>20),j=D+(R^U&(S^R))+I[14]+2792965006&4294967295,D=U+(j<<17&4294967295|j>>>15),j=R+(S^D&(U^S))+I[15]+1236535329&4294967295,R=D+(j<<22&4294967295|j>>>10),j=S+(D^U&(R^D))+I[1]+4129170786&4294967295,S=R+(j<<5&4294967295|j>>>27),j=U+(R^D&(S^R))+I[6]+3225465664&4294967295,U=S+(j<<9&4294967295|j>>>23),j=D+(S^R&(U^S))+I[11]+643717713&4294967295,D=U+(j<<14&4294967295|j>>>18),j=R+(U^S&(D^U))+I[0]+3921069994&4294967295,R=D+(j<<20&4294967295|j>>>12),j=S+(D^U&(R^D))+I[5]+3593408605&4294967295,S=R+(j<<5&4294967295|j>>>27),j=U+(R^D&(S^R))+I[10]+38016083&4294967295,U=S+(j<<9&4294967295|j>>>23),j=D+(S^R&(U^S))+I[15]+3634488961&4294967295,D=U+(j<<14&4294967295|j>>>18),j=R+(U^S&(D^U))+I[4]+3889429448&4294967295,R=D+(j<<20&4294967295|j>>>12),j=S+(D^U&(R^D))+I[9]+568446438&4294967295,S=R+(j<<5&4294967295|j>>>27),j=U+(R^D&(S^R))+I[14]+3275163606&4294967295,U=S+(j<<9&4294967295|j>>>23),j=D+(S^R&(U^S))+I[3]+4107603335&4294967295,D=U+(j<<14&4294967295|j>>>18),j=R+(U^S&(D^U))+I[8]+1163531501&4294967295,R=D+(j<<20&4294967295|j>>>12),j=S+(D^U&(R^D))+I[13]+2850285829&4294967295,S=R+(j<<5&4294967295|j>>>27),j=U+(R^D&(S^R))+I[2]+4243563512&4294967295,U=S+(j<<9&4294967295|j>>>23),j=D+(S^R&(U^S))+I[7]+1735328473&4294967295,D=U+(j<<14&4294967295|j>>>18),j=R+(U^S&(D^U))+I[12]+2368359562&4294967295,R=D+(j<<20&4294967295|j>>>12),j=S+(R^D^U)+I[5]+4294588738&4294967295,S=R+(j<<4&4294967295|j>>>28),j=U+(S^R^D)+I[8]+2272392833&4294967295,U=S+(j<<11&4294967295|j>>>21),j=D+(U^S^R)+I[11]+1839030562&4294967295,D=U+(j<<16&4294967295|j>>>16),j=R+(D^U^S)+I[14]+4259657740&4294967295,R=D+(j<<23&4294967295|j>>>9),j=S+(R^D^U)+I[1]+2763975236&4294967295,S=R+(j<<4&4294967295|j>>>28),j=U+(S^R^D)+I[4]+1272893353&4294967295,U=S+(j<<11&4294967295|j>>>21),j=D+(U^S^R)+I[7]+4139469664&4294967295,D=U+(j<<16&4294967295|j>>>16),j=R+(D^U^S)+I[10]+3200236656&4294967295,R=D+(j<<23&4294967295|j>>>9),j=S+(R^D^U)+I[13]+681279174&4294967295,S=R+(j<<4&4294967295|j>>>28),j=U+(S^R^D)+I[0]+3936430074&4294967295,U=S+(j<<11&4294967295|j>>>21),j=D+(U^S^R)+I[3]+3572445317&4294967295,D=U+(j<<16&4294967295|j>>>16),j=R+(D^U^S)+I[6]+76029189&4294967295,R=D+(j<<23&4294967295|j>>>9),j=S+(R^D^U)+I[9]+3654602809&4294967295,S=R+(j<<4&4294967295|j>>>28),j=U+(S^R^D)+I[12]+3873151461&4294967295,U=S+(j<<11&4294967295|j>>>21),j=D+(U^S^R)+I[15]+530742520&4294967295,D=U+(j<<16&4294967295|j>>>16),j=R+(D^U^S)+I[2]+3299628645&4294967295,R=D+(j<<23&4294967295|j>>>9),j=S+(D^(R|~U))+I[0]+4096336452&4294967295,S=R+(j<<6&4294967295|j>>>26),j=U+(R^(S|~D))+I[7]+1126891415&4294967295,U=S+(j<<10&4294967295|j>>>22),j=D+(S^(U|~R))+I[14]+2878612391&4294967295,D=U+(j<<15&4294967295|j>>>17),j=R+(U^(D|~S))+I[5]+4237533241&4294967295,R=D+(j<<21&4294967295|j>>>11),j=S+(D^(R|~U))+I[12]+1700485571&4294967295,S=R+(j<<6&4294967295|j>>>26),j=U+(R^(S|~D))+I[3]+2399980690&4294967295,U=S+(j<<10&4294967295|j>>>22),j=D+(S^(U|~R))+I[10]+4293915773&4294967295,D=U+(j<<15&4294967295|j>>>17),j=R+(U^(D|~S))+I[1]+2240044497&4294967295,R=D+(j<<21&4294967295|j>>>11),j=S+(D^(R|~U))+I[8]+1873313359&4294967295,S=R+(j<<6&4294967295|j>>>26),j=U+(R^(S|~D))+I[15]+4264355552&4294967295,U=S+(j<<10&4294967295|j>>>22),j=D+(S^(U|~R))+I[6]+2734768916&4294967295,D=U+(j<<15&4294967295|j>>>17),j=R+(U^(D|~S))+I[13]+1309151649&4294967295,R=D+(j<<21&4294967295|j>>>11),j=S+(D^(R|~U))+I[4]+4149444226&4294967295,S=R+(j<<6&4294967295|j>>>26),j=U+(R^(S|~D))+I[11]+3174756917&4294967295,U=S+(j<<10&4294967295|j>>>22),j=D+(S^(U|~R))+I[2]+718787259&4294967295,D=U+(j<<15&4294967295|j>>>17),j=R+(U^(D|~S))+I[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(D+(j<<21&4294967295|j>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+U&4294967295}i.prototype.v=function(N,S){S===void 0&&(S=N.length);const R=S-this.blockSize,I=this.C;let D=this.h,U=0;for(;U<S;){if(D==0)for(;U<=R;)o(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<S;)if(I[D++]=N.charCodeAt(U++),D==this.blockSize){o(this,I),D=0;break}}else for(;U<S;)if(I[D++]=N[U++],D==this.blockSize){o(this,I),D=0;break}}this.h=D,this.o+=S},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;S=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=S&255,S/=256;for(this.v(N),N=Array(16),S=0,R=0;R<4;++R)for(let I=0;I<32;I+=8)N[S++]=this.g[R]>>>I&255;return N};function u(N,S){var R=p;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=S(N)}function d(N,S){this.h=S;const R=[];let I=!0;for(let D=N.length-1;D>=0;D--){const U=N[D]|0;I&&U==S||(R[D]=U,I=!1)}this.g=R}var p={};function g(N){return-128<=N&&N<128?u(N,function(S){return new d([S|0],S<0?-1:0)}):new d([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return x;if(N<0)return z(y(-N));const S=[];let R=1;for(let I=0;N>=R;I++)S[I]=N/R|0,R*=4294967296;return new d(S,0)}function w(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return z(w(N.substring(1),S));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(S,8));let I=x;for(let U=0;U<N.length;U+=8){var D=Math.min(8,N.length-U);const j=parseInt(N.substring(U,U+D),S);D<8?(D=y(Math.pow(S,D)),I=I.j(D).add(y(j))):(I=I.j(R),I=I.add(y(j)))}return I}var x=g(0),T=g(1),O=g(16777216);r=d.prototype,r.m=function(){if(G(this))return-z(this).m();let N=0,S=1;for(let R=0;R<this.g.length;R++){const I=this.i(R);N+=(I>=0?I:4294967296+I)*S,S*=4294967296}return N},r.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(q(this))return"0";if(G(this))return"-"+z(this).toString(N);const S=y(Math.pow(N,6));var R=this;let I="";for(;;){const D=_e(R,S).g;R=ie(R,D.j(S));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=D,q(R))return U+I;for(;U.length<6;)U="0"+U;I=U+I}},r.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function q(N){if(N.h!=0)return!1;for(let S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function G(N){return N.h==-1}r.l=function(N){return N=ie(this,N),G(N)?-1:q(N)?0:1};function z(N){const S=N.g.length,R=[];for(let I=0;I<S;I++)R[I]=~N.g[I];return new d(R,~N.h).add(T)}r.abs=function(){return G(this)?z(this):this},r.add=function(N){const S=Math.max(this.g.length,N.g.length),R=[];let I=0;for(let D=0;D<=S;D++){let U=I+(this.i(D)&65535)+(N.i(D)&65535),j=(U>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);I=j>>>16,U&=65535,j&=65535,R[D]=j<<16|U}return new d(R,R[R.length-1]&-2147483648?-1:0)};function ie(N,S){return N.add(z(S))}r.j=function(N){if(q(this)||q(N))return x;if(G(this))return G(N)?z(this).j(z(N)):z(z(this).j(N));if(G(N))return z(this.j(z(N)));if(this.l(O)<0&&N.l(O)<0)return y(this.m()*N.m());const S=this.g.length+N.g.length,R=[];for(var I=0;I<2*S;I++)R[I]=0;for(I=0;I<this.g.length;I++)for(let D=0;D<N.g.length;D++){const U=this.i(I)>>>16,j=this.i(I)&65535,et=N.i(D)>>>16,pt=N.i(D)&65535;R[2*I+2*D]+=j*pt,ee(R,2*I+2*D),R[2*I+2*D+1]+=U*pt,ee(R,2*I+2*D+1),R[2*I+2*D+1]+=j*et,ee(R,2*I+2*D+1),R[2*I+2*D+2]+=U*et,ee(R,2*I+2*D+2)}for(N=0;N<S;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=S;N<2*S;N++)R[N]=0;return new d(R,0)};function ee(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function he(N,S){this.g=N,this.h=S}function _e(N,S){if(q(S))throw Error("division by zero");if(q(N))return new he(x,x);if(G(N))return S=_e(z(N),S),new he(z(S.g),z(S.h));if(G(S))return S=_e(N,z(S)),new he(z(S.g),S.h);if(N.g.length>30){if(G(N)||G(S))throw Error("slowDivide_ only works with positive integers.");for(var R=T,I=S;I.l(N)<=0;)R=je(R),I=je(I);var D=Ne(R,1),U=Ne(I,1);for(I=Ne(I,2),R=Ne(R,2);!q(I);){var j=U.add(I);j.l(N)<=0&&(D=D.add(R),U=j),I=Ne(I,1),R=Ne(R,1)}return S=ie(N,D.j(S)),new he(D,S)}for(D=x;N.l(S)>=0;){for(R=Math.max(1,Math.floor(N.m()/S.m())),I=Math.ceil(Math.log(R)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),U=y(R),j=U.j(S);G(j)||j.l(N)>0;)R-=I,U=y(R),j=U.j(S);q(U)&&(U=T),D=D.add(U),N=ie(N,j)}return new he(D,N)}r.B=function(N){return _e(this,N).h},r.and=function(N){const S=Math.max(this.g.length,N.g.length),R=[];for(let I=0;I<S;I++)R[I]=this.i(I)&N.i(I);return new d(R,this.h&N.h)},r.or=function(N){const S=Math.max(this.g.length,N.g.length),R=[];for(let I=0;I<S;I++)R[I]=this.i(I)|N.i(I);return new d(R,this.h|N.h)},r.xor=function(N){const S=Math.max(this.g.length,N.g.length),R=[];for(let I=0;I<S;I++)R[I]=this.i(I)^N.i(I);return new d(R,this.h^N.h)};function je(N){const S=N.g.length+1,R=[];for(let I=0;I<S;I++)R[I]=N.i(I)<<1|N.i(I-1)>>>31;return new d(R,N.h)}function Ne(N,S){const R=S>>5;S%=32;const I=N.g.length-R,D=[];for(let U=0;U<I;U++)D[U]=S>0?N.i(U+R)>>>S|N.i(U+R+1)<<32-S:N.i(U+R);return new d(D,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Rw=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=w,ma=d}).apply(typeof a_<"u"?a_:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Cw,kc,Nw,zh,_p,Iw,jw,Dw;(function(){var r,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var v=0;v<h.length;++v){var _=h[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function o(h,v){if(v)e:{var _=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var $=h[A];if(!($ in _))break e;_=_[$]}h=h[h.length-1],A=_[h],v=v(A),v!=A&&v!=null&&e(_,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var _=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&_.push([A,v[A]]);return _}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,_){return h.call.apply(h.bind,arguments)}function y(h,v,_){return y=g,y.apply(null,arguments)}function w(h,v){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function x(h,v){function _(){}_.prototype=v.prototype,h.Z=v.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(A,$,Z){for(var we=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)we[dt-2]=arguments[dt];return v.prototype[$].apply(A,we)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const v=h.length;if(v>0){const _=Array(v);for(let A=0;A<v;A++)_[A]=h[A];return _}return[]}function q(h,v){for(let A=1;A<arguments.length;A++){const $=arguments[A];var _=typeof $;if(_=_!="object"?_:$?Array.isArray($)?"array":_:"null",_=="array"||_=="object"&&typeof $.length=="number"){_=h.length||0;const Z=$.length||0;h.length=_+Z;for(let we=0;we<Z;we++)h[_+we]=$[we]}else h.push($)}}class G{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function z(h){d.setTimeout(()=>{throw h},0)}function ie(){var h=N;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ee{constructor(){this.h=this.g=null}add(v,_){const A=he.get();A.set(v,_),this.h?this.h.next=A:this.g=A,this.h=A}}var he=new G(()=>new _e,h=>h.reset());class _e{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let je,Ne=!1,N=new ee,S=()=>{const h=Promise.resolve(void 0);je=()=>{h.then(R)}};function R(){for(var h;h=ie();){try{h.h.call(h.g)}catch(_){z(_)}var v=he;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}Ne=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,v),d.removeEventListener("test",_,v)}catch{}return h})();function j(h){return/^[\s\xa0]*$/.test(h)}function et(h,v){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}x(et,D),et.prototype.init=function(h,v){const _=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(_=="mouseover"?v=h.fromElement:_=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&et.Z.h.call(this)},et.prototype.h=function(){et.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),W=0;function ge(h,v,_,A,$){this.listener=h,this.proxy=null,this.src=v,this.type=_,this.capture=!!A,this.ha=$,this.key=++W,this.da=this.fa=!1}function ke(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Je(h,v,_){for(const A in h)v.call(_,h[A],A,h)}function Qe(h,v){for(const _ in h)v.call(void 0,h[_],_,h)}function P(h){const v={};for(const _ in h)v[_]=h[_];return v}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(h,v){let _,A;for(let $=1;$<arguments.length;$++){A=arguments[$];for(_ in A)h[_]=A[_];for(let Z=0;Z<H.length;Z++)_=H[Z],Object.prototype.hasOwnProperty.call(A,_)&&(h[_]=A[_])}}function ye(h){this.src=h,this.g={},this.h=0}ye.prototype.add=function(h,v,_,A,$){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const we=xe(h,v,A,$);return we>-1?(v=h[we],_||(v.fa=!1)):(v=new ge(v,this.src,Z,!!A,$),v.fa=_,h.push(v)),v};function Ae(h,v){const _=v.type;if(_ in h.g){var A=h.g[_],$=Array.prototype.indexOf.call(A,v,void 0),Z;(Z=$>=0)&&Array.prototype.splice.call(A,$,1),Z&&(ke(v),h.g[_].length==0&&(delete h.g[_],h.h--))}}function xe(h,v,_,A){for(let $=0;$<h.length;++$){const Z=h[$];if(!Z.da&&Z.listener==v&&Z.capture==!!_&&Z.ha==A)return $}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),rt={};function it(h,v,_,A,$){if(Array.isArray(v)){for(let Z=0;Z<v.length;Z++)it(h,v[Z],_,A,$);return null}return _=Ze(_),h&&h[pt]?h.J(v,_,p(A)?!!A.capture:!1,$):Qt(h,v,_,!1,A,$)}function Qt(h,v,_,A,$,Z){if(!v)throw Error("Invalid event type");const we=p($)?!!$.capture:!!$;let dt=Ge(h);if(dt||(h[Fe]=dt=new ye(h)),_=dt.add(v,_,A,we,Z),_.proxy)return _;if(A=pn(),_.proxy=A,A.src=h,A.listener=_,h.addEventListener)U||($=we),$===void 0&&($=!1),h.addEventListener(v.toString(),A,$);else if(h.attachEvent)h.attachEvent(J(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function pn(){function h(_){return v.call(h.src,h.listener,_)}const v=Ee;return h}function At(h,v,_,A,$){if(Array.isArray(v))for(var Z=0;Z<v.length;Z++)At(h,v[Z],_,A,$);else A=p(A)?!!A.capture:!!A,_=Ze(_),h&&h[pt]?(h=h.i,Z=String(v).toString(),Z in h.g&&(v=h.g[Z],_=xe(v,_,A,$),_>-1&&(ke(v[_]),Array.prototype.splice.call(v,_,1),v.length==0&&(delete h.g[Z],h.h--)))):h&&(h=Ge(h))&&(v=h.g[v.toString()],h=-1,v&&(h=xe(v,_,A,$)),(_=h>-1?v[h]:null)&&en(_))}function en(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[pt])Ae(v.i,h);else{var _=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(_,A,h.capture):v.detachEvent?v.detachEvent(J(_),A):v.addListener&&v.removeListener&&v.removeListener(A),(_=Ge(v))?(Ae(_,h),_.h==0&&(_.src=null,v[Fe]=null)):ke(h)}}}function J(h){return h in rt?rt[h]:rt[h]="on"+h}function Ee(h,v){if(h.da)h=!0;else{v=new et(v,this);const _=h.listener,A=h.ha||h.src;h.fa&&en(h),h=_.call(A,v)}return h}function Ge(h){return h=h[Fe],h instanceof ye?h:null}var We="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ze(h){return typeof h=="function"?h:(h[We]||(h[We]=function(v){return h.handleEvent(v)}),h[We])}function qe(){I.call(this),this.i=new ye(this),this.M=this,this.G=null}x(qe,I),qe.prototype[pt]=!0,qe.prototype.removeEventListener=function(h,v,_,A){At(this,h,v,_,A)};function $e(h,v){var _,A=h.G;if(A)for(_=[];A;A=A.G)_.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new D(v,h);else if(v instanceof D)v.target=v.target||h;else{var $=v;v=new D(A,h),de(v,$)}$=!0;let Z,we;if(_)for(we=_.length-1;we>=0;we--)Z=v.g=_[we],$=It(Z,A,!0,v)&&$;if(Z=v.g=h,$=It(Z,A,!0,v)&&$,$=It(Z,A,!1,v)&&$,_)for(we=0;we<_.length;we++)Z=v.g=_[we],$=It(Z,A,!1,v)&&$}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const _=h.g[v];for(let A=0;A<_.length;A++)ke(_[A]);delete h.g[v],h.h--}}this.G=null},qe.prototype.J=function(h,v,_,A){return this.i.add(String(h),v,!1,_,A)},qe.prototype.K=function(h,v,_,A){return this.i.add(String(h),v,!0,_,A)};function It(h,v,_,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let $=!0;for(let Z=0;Z<v.length;++Z){const we=v[Z];if(we&&!we.da&&we.capture==_){const dt=we.listener,xn=we.ha||we.src;we.fa&&Ae(h.i,we),$=dt.call(xn,A)!==!1&&$}}return $&&!A.defaultPrevented}function _n(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function us(h){h.g=_n(()=>{h.g=null,h.i&&(h.i=!1,us(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Ot extends I{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:us(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gn(h){I.call(this),this.h=h,this.g={}}x(gn,I);var tn=[];function wn(h){Je(h.g,function(v,_){this.g.hasOwnProperty(_)&&en(v)},h),h.g={}}gn.prototype.N=function(){gn.Z.N.call(this),wn(this)},gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=d.JSON.stringify,pe=d.JSON.parse,be=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ve(){}function Ce(){}var Te={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function De(){D.call(this,"d")}x(De,D);function Se(){D.call(this,"c")}x(Se,D);var Me={},at=null;function vt(){return at=at||new qe}Me.Ia="serverreachability";function yt(h){D.call(this,Me.Ia,h)}x(yt,D);function Jt(h){const v=vt();$e(v,new yt(v))}Me.STAT_EVENT="statevent";function Rn(h,v){D.call(this,Me.STAT_EVENT,h),this.stat=v}x(Rn,D);function Rt(h){const v=vt();$e(v,new Rn(v,h))}Me.Ja="timingevent";function Lt(h,v){D.call(this,Me.Ja,h),this.size=v}x(Lt,D);function Bt(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function ts(){this.g=!0}ts.prototype.ua=function(){this.g=!1};function rr(h,v,_,A,$,Z){h.info(function(){if(h.g)if(Z){var we="",dt=Z.split("&");for(let Vt=0;Vt<dt.length;Vt++){var xn=dt[Vt].split("=");if(xn.length>1){const ln=xn[0];xn=xn[1];const Gs=ln.split("_");we=Gs.length>=2&&Gs[1]=="type"?we+(ln+"="+xn+"&"):we+(ln+"=redacted&")}}}else we=null;else we=Z;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+v+`
`+_+`
`+we})}function $r(h,v,_,A,$,Z,we){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+v+`
`+_+`
`+Z+" "+we})}function ns(h,v,_,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Kr(h,_)+(A?" "+A:"")})}function zs(h,v){h.info(function(){return"TIMEOUT: "+v})}ts.prototype.info=function(){};function Kr(h,v){if(!h.g)return v;if(!v)return null;try{const Z=JSON.parse(v);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var _=Z[h];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var $=A[0];if($!="noop"&&$!="stop"&&$!="close")for(let we=1;we<A.length;we++)A[we]=""}}}}return ae(Z)}catch{return v}}var Fs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ai={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xr;function Er(){}x(Er,Ve),Er.prototype.g=function(){return new XMLHttpRequest},xr=new Er;function hs(h){return encodeURIComponent(String(h))}function Yr(h){var v=1;h=h.split(":");const _=[];for(;v>0&&h.length;)_.push(h.shift()),v--;return h.length&&_.push(h.join(":")),_}function Hn(h,v,_,A){this.j=h,this.i=v,this.l=_,this.S=A||1,this.V=new gn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ss}function ss(){this.i=null,this.g="",this.h=!1}var an={},yn={};function bs(h,v,_){h.M=1,h.A=wt(me(v)),h.u=_,h.R=!0,Rs(h,null)}function Rs(h,v){h.F=Date.now(),_s(h),h.B=me(h.A);var _=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),rs(_.i,"t",A),h.C=0,_=h.j.L,h.h=new ss,h.g=yu(h.j,_?v:null,!h.u),h.P>0&&(h.O=new Ot(y(h.Y,h,h.g),h.P)),v=h.V,_=h.g,A=h.ba;var $="readystatechange";Array.isArray($)||($&&(tn[0]=$.toString()),$=tn);for(let Z=0;Z<$.length;Z++){const we=it(_,$[Z],A||v.handleEvent,!1,v.h||v);if(!we)break;v.g[we.key]=we}v=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Jt(),rr(h.i,h.v,h.B,h.l,h.S,h.u)}Hn.prototype.ba=function(h){h=h.target;const v=this.O;v&&ur(h)==3?v.j():this.Y(h)},Hn.prototype.Y=function(h){try{if(h==this.g)e:{const dt=ur(this.g),xn=this.g.ya(),Vt=this.g.ca();if(!(dt<3)&&(dt!=3||this.g&&(this.h.h||this.g.la()||$n(this.g)))){this.K||dt!=4||xn==7||(xn==8||Vt<=0?Jt(3):Jt(2)),fs(this);var v=this.g.ca();this.X=v;var _=Qr(this);if(this.o=v==200,$r(this.i,this.v,this.B,this.l,this.S,dt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var A,$=this.g;if((A=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(A)){var Z=A;break t}}Z=null}if(h=Z)ns(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,C(this,h);else{this.o=!1,this.m=3,Rt(12),Gn(this),On(this);break e}}if(this.R){h=!0;let ln;for(;!this.K&&this.C<_.length;)if(ln=Ri(this,_),ln==yn){dt==4&&(this.m=4,Rt(14),h=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==an){this.m=4,Rt(15),ns(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else ns(this.i,this.l,ln,null),C(this,ln);if(ds(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||_.length!=0||this.h.h||(this.m=1,Rt(16),h=!1),this.o=this.o&&h,!h)ns(this.i,this.l,_,"[Invalid Chunked Response]"),Gn(this),On(this);else if(_.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Ml(we),we.P=!0,Rt(11))}}else ns(this.i,this.l,_,null),C(this,_);dt==4&&Gn(this),this.o&&!this.K&&(dt==4?fu(this.j,this):(this.o=!1,_s(this)))}else Jr(this.g),v==400&&_.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Gn(this),On(this)}}}catch{}};function Qr(h){if(!ds(h))return h.g.la();const v=$n(h.g);if(v==="")return"";let _="";const A=v.length,$=ur(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Gn(h),On(h),"";h.h.i=new d.TextDecoder}for(let Z=0;Z<A;Z++)h.h.h=!0,_+=h.h.i.decode(v[Z],{stream:!($&&Z==A-1)});return v.length=0,h.h.g+=_,h.C=0,h.h.g}function ds(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ri(h,v){var _=h.C,A=v.indexOf(`
`,_);return A==-1?yn:(_=Number(v.substring(_,A)),isNaN(_)?an:(A+=1,A+_>v.length?yn:(v=v.slice(A,A+_),h.C=A+_,v)))}Hn.prototype.cancel=function(){this.K=!0,Gn(this)};function _s(h){h.T=Date.now()+h.H,Cs(h,h.H)}function Cs(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Bt(y(h.aa,h),v)}function fs(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Hn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(zs(this.i,this.B),this.M!=2&&(Jt(),Rt(17)),Gn(this),this.m=2,On(this)):Cs(this,this.T-h)};function On(h){h.j.I==0||h.K||fu(h.j,h)}function Gn(h){fs(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,wn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function C(h,v){try{var _=h.j;if(_.I!=0&&(_.g==h||Ue(_.h,h))){if(!h.L&&Ue(_.h,h)&&_.I==3){try{var A=_.Ba.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var $=A;if($[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)xo(_),Pi(_);else break e;Ma(_),Rt(18)}}else _.xa=$[1],0<_.xa-_.K&&$[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Bt(y(_.Va,_),6e3));ze(_.h)<=1&&_.ta&&(_.ta=void 0)}else Cr(_,11)}else if((h.L||_.g==h)&&xo(_),!j(v))for($=_.Ba.g.parse(v),v=0;v<$.length;v++){let Vt=$[v];const ln=Vt[0];if(!(ln<=_.K))if(_.K=ln,Vt=Vt[1],_.I==2)if(Vt[0]=="c"){_.M=Vt[1],_.ba=Vt[2];const Gs=Vt[3];Gs!=null&&(_.ka=Gs,_.j.info("VER="+_.ka));const Nr=Vt[4];Nr!=null&&(_.za=Nr,_.j.info("SVER="+_.za));const hr=Vt[5];hr!=null&&typeof hr=="number"&&hr>0&&(A=1.5*hr,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const dr=h.g;if(dr){const Pa=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var Z=A.h;Z.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(He(Z,Z.h),Z.h=null))}if(A.G){const Eo=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(A.wa=Eo,Oe(A.J,A.G,Eo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var we=h;if(A.na=gu(A,A.L?A.ba:null,A.W),we.L){zt(A.h,we);var dt=we,xn=A.O;xn&&(dt.H=xn),dt.D&&(fs(dt),_s(dt)),A.g=we}else hu(A);_.i.length>0&&Rr(_)}else Vt[0]!="stop"&&Vt[0]!="close"||Cr(_,7);else _.I==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?Cr(_,7):jl(_):Vt[0]!="noop"&&_.l&&_.l.qa(Vt),_.A=0)}}Jt(4)}catch{}}var V=class{constructor(h,v){this.g=h,this.map=v}};function re(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function oe(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ze(h){return h.h?1:h.g?h.g.size:0}function Ue(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function He(h,v){h.g?h.g.add(v):h.h=v}function zt(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}re.prototype.cancel=function(){if(this.i=ut(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ut(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const _ of h.g.values())v=v.concat(_.G);return v}return O(h.i)}var B=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ne(h,v){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const A=h[_].indexOf("=");let $,Z=null;A>=0?($=h[_].substring(0,A),Z=h[_].substring(A+1)):$=h[_],v($,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function X(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof X?(this.l=h.l,ve(this,h.j),this.o=h.o,this.g=h.g,Pe(this,h.u),this.h=h.h,st(this,Tr(h.i)),this.m=h.m):h&&(v=String(h).match(B))?(this.l=!1,ve(this,v[1]||"",!0),this.o=on(v[2]||""),this.g=on(v[3]||"",!0),Pe(this,v[4]),this.h=on(v[5]||"",!0),st(this,v[6]||"",!0),this.m=on(v[7]||"")):(this.l=!1,this.i=new hn(null,this.l))}X.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Dt(v,Ci,!0),":");var _=this.g;return(_||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Dt(v,Ci,!0),"@"),h.push(hs(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Dt(_,_.charAt(0)=="/"?Ni:Ra,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Dt(_,jt)),h.join("")},X.prototype.resolve=function(h){const v=me(this);let _=!!h.j;_?ve(v,h.j):_=!!h.o,_?v.o=h.o:_=!!h.g,_?v.g=h.g:_=h.u!=null;var A=h.h;if(_)Pe(v,h.u);else if(_=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var $=v.h.lastIndexOf("/");$!=-1&&(A=v.h.slice(0,$+1)+A)}if($=A,$==".."||$==".")A="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){A=$.lastIndexOf("/",0)==0,$=$.split("/");const Z=[];for(let we=0;we<$.length;){const dt=$[we++];dt=="."?A&&we==$.length&&Z.push(""):dt==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),A&&we==$.length&&Z.push("")):(Z.push(dt),A=!0)}A=Z.join("/")}else A=$}return _?v.h=A:_=h.i.toString()!=="",_?st(v,Tr(h.i)):_=!!h.m,_&&(v.m=h.m),v};function me(h){return new X(h)}function ve(h,v,_){h.j=_?on(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Pe(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function st(h,v,_){v instanceof hn?(h.i=v,Ii(h.i,h.l)):(_||(v=Dt(v,ir)),h.i=new hn(v,h.l))}function Oe(h,v,_){h.i.set(v,_)}function wt(h){return Oe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function on(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Dt(h,v,_){return typeof h=="string"?(h=encodeURI(h).replace(v,nn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function nn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ci=/[#\/\?@]/g,Ra=/[#\?:]/g,Ni=/[#\?]/g,ir=/[#\?@]/g,jt=/#/g;function hn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function dn(h){h.g||(h.g=new Map,h.h=0,h.i&&ne(h.i,function(v,_){h.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}r=hn.prototype,r.add=function(h,v){dn(this),this.i=null,h=lr(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(v),this.h+=1,this};function ar(h,v){dn(h),v=lr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function or(h,v){return dn(h),v=lr(h,v),h.g.has(v)}r.forEach=function(h,v){dn(this),this.g.forEach(function(_,A){_.forEach(function($){h.call(v,$,A,this)},this)},this)};function Wn(h,v){dn(h);let _=[];if(typeof v=="string")or(h,v)&&(_=_.concat(h.g.get(lr(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)_=_.concat(h[v]);return _}r.set=function(h,v){return dn(this),this.i=null,h=lr(this,h),or(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},r.get=function(h,v){return h?(h=Wn(this,h),h.length>0?String(h[0]):v):v};function rs(h,v,_){ar(h,v),_.length>0&&(h.i=null,h.g.set(lr(h,v),O(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let A=0;A<v.length;A++){var _=v[A];const $=hs(_);_=Wn(this,_);for(let Z=0;Z<_.length;Z++){let we=$;_[Z]!==""&&(we+="="+hs(_[Z])),h.push(we)}}return this.i=h.join("&")};function Tr(h){const v=new hn;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function lr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ii(h,v){v&&!h.j&&(dn(h),h.i=null,h.g.forEach(function(_,A){const $=A.toLowerCase();A!=$&&(ar(this,A),rs(this,$,_))},h)),h.j=v}function ms(h,v){const _=new ts;if(d.Image){const A=new Image;A.onload=w(qs,_,"TestLoadImage: loaded",!0,v,A),A.onerror=w(qs,_,"TestLoadImage: error",!1,v,A),A.onabort=w(qs,_,"TestLoadImage: abort",!1,v,A),A.ontimeout=w(qs,_,"TestLoadImage: timeout",!1,v,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function Cl(h,v){const _=new ts,A=new AbortController,$=setTimeout(()=>{A.abort(),qs(_,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(Z=>{clearTimeout($),Z.ok?qs(_,"TestPingServer: ok",!0,v):qs(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout($),qs(_,"TestPingServer: error",!1,v)})}function qs(h,v,_,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(_)}catch{}}function ji(){this.g=new be}function Sr(h){this.i=h.Sb||null,this.h=h.ab||!1}x(Sr,Ve),Sr.prototype.g=function(){return new Ca(this.i,this.h)};function Ca(h,v){qe.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Ca,qe),r=Ca.prototype,r.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,cr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function bo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Di(this):cr(this),this.readyState==3&&bo(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Di(this))},r.Na=function(h){this.g&&(this.response=h,Di(this))},r.ga=function(){this.g&&Di(this)};function Di(h){h.readyState=4,h.l=null,h.j=null,h.B=null,cr(h)}r.setRequestHeader=function(h,v){this.A.append(h,v)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=v.next();return h.join(`\r
`)};function cr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Hs(h){let v="";return Je(h,function(_,A){v+=A,v+=":",v+=_,v+=`\r
`}),v}function Na(h,v,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=Hs(_),typeof h=="string"?_!=null&&hs(_):Oe(h,v,_))}function Wt(h){qe.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Wt,qe);var kr=/^https?$/i,Nl=["POST","PUT"];r=Wt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,v,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xr.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Z){Ia(this,Z);return}if(h=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)_.set($,A[$]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())_.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(Z=>Z.toLowerCase()=="content-type"),$=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Nl,v,void 0)>=0)||A||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,we]of _)this.g.setRequestHeader(Z,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){Ia(this,Z)}};function Ia(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Il(h),Xr(h)}function Il(h){h.A||(h.A=!0,$e(h,"complete"),$e(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,$e(this,"complete"),$e(this,"abort"),Xr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xr(this,!0)),Wt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ja(this):this.Xa())},r.Xa=function(){ja(this)};function ja(h){if(h.h&&typeof u<"u"){if(h.v&&ur(h)==4)setTimeout(h.Ca.bind(h),0);else if($e(h,"readystatechange"),ur(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var A;if(A=Z===0){let we=String(h.D).match(B)[1]||null;!we&&d.self&&d.self.location&&(we=d.self.location.protocol.slice(0,-1)),A=!kr.test(we?we.toLowerCase():"")}_=A}if(_)$e(h,"complete"),$e(h,"success");else{h.o=6;try{var $=ur(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",Il(h)}}finally{Xr(h)}}}}function Xr(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,v||$e(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ur(h){return h.g?h.g.readyState:0}r.ca=function(){try{return ur(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),pe(v)}};function $n(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Jr(h){const v={};h=(h.g&&ur(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(j(h[A]))continue;var _=Yr(h[A]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Z=v[$]||[];v[$]=Z,Z.push(_)}Qe(v,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ar(h,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||v}function Mi(h){this.za=0,this.i=[],this.j=new ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ar("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ar("baseRetryDelayMs",5e3,h),this.Za=Ar("retryDelaySeedMs",1e4,h),this.Ta=Ar("forwardChannelMaxRetries",2,h),this.va=Ar("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new re(h&&h.concurrentRequestLimit),this.Ba=new ji,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Mi.prototype,r.ka=8,r.I=1,r.connect=function(h,v,_,A){Rt(0),this.W=h,this.H=v||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=gu(this,null,this.W),Rr(this)};function jl(h){if(_o(h),h.I==3){var v=h.V++,_=me(h.J);if(Oe(_,"SID",h.M),Oe(_,"RID",v),Oe(_,"TYPE","terminate"),Da(h,_),v=new Hn(h,h.j,v),v.M=2,v.A=wt(me(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=v.A,_=!0),_||(v.g=yu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),_s(v)}pu(h)}function Pi(h){h.g&&(Ml(h),h.g.cancel(),h.g=null)}function _o(h){Pi(h),h.v&&(d.clearTimeout(h.v),h.v=null),xo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Rr(h){if(!oe(h.h)&&!h.m){h.m=!0;var v=h.Ea;je||S(),Ne||(je(),Ne=!0),N.add(v,h),h.D=0}}function wo(h,v){return ze(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Bt(y(h.Ea,h,v),mu(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new Hn(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=P(Z),de(Z,this.U)):Z=this.U),this.u!==null||this.R||($.J=Z,Z=null),this.S)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,v>4096){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=uu(this,$,v),_=me(this.J),Oe(_,"RID",h),Oe(_,"CVER",22),this.G&&Oe(_,"X-HTTP-Session-Id",this.G),Da(this,_),Z&&(this.R?v="headers="+hs(Hs(Z))+"&"+v:this.u&&Na(_,this.u,Z)),He(this.h,$),this.Ra&&Oe(_,"TYPE","init"),this.S?(Oe(_,"$req",v),Oe(_,"SID","null"),$.U=!0,bs($,_,null)):bs($,_,v),this.I=2}}else this.I==3&&(h?Dl(this,h):this.i.length==0||oe(this.h)||Dl(this))};function Dl(h,v){var _;v?_=v.l:_=h.V++;const A=me(h.J);Oe(A,"SID",h.M),Oe(A,"RID",_),Oe(A,"AID",h.K),Da(h,A),h.u&&h.o&&Na(A,h.u,h.o),_=new Hn(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),v&&(h.i=v.G.concat(h.i)),v=uu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),He(h.h,_),bs(_,A,v)}function Da(h,v){h.H&&Je(h.H,function(_,A){Oe(v,A,_)}),h.l&&Je({},function(_,A){Oe(v,A,_)})}function uu(h,v,_){_=Math.min(h.i.length,_);const A=h.l?y(h.l.Ka,h.l,h):null;e:{var $=h.i;let dt=-1;for(;;){const xn=["count="+_];dt==-1?_>0?(dt=$[0].g,xn.push("ofs="+dt)):dt=0:xn.push("ofs="+dt);let Vt=!0;for(let ln=0;ln<_;ln++){var Z=$[ln].g;const Gs=$[ln].map;if(Z-=dt,Z<0)dt=Math.max(0,$[ln].g-100),Vt=!1;else try{Z="req"+Z+"_"||"";try{var we=Gs instanceof Map?Gs:Object.entries(Gs);for(const[Nr,hr]of we){let dr=hr;p(hr)&&(dr=ae(hr)),xn.push(Z+Nr+"="+encodeURIComponent(dr))}}catch(Nr){throw xn.push(Z+"type="+encodeURIComponent("_badmap")),Nr}}catch{A&&A(Gs)}}if(Vt){we=xn.join("&");break e}}we=void 0}return h=h.i.splice(0,_),v.G=h,we}function hu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;je||S(),Ne||(je(),Ne=!0),N.add(v,h),h.A=0}}function Ma(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Bt(y(h.Da,h),mu(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Bt(y(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Pi(this),du(this))};function Ml(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function du(h){h.g=new Hn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=me(h.na);Oe(v,"RID","rpc"),Oe(v,"SID",h.M),Oe(v,"AID",h.K),Oe(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Oe(v,"TO",h.ia),Oe(v,"TYPE","xmlhttp"),Da(h,v),h.u&&h.o&&Na(v,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=wt(me(v)),_.u=null,_.R=!0,Rs(_,h)}r.Va=function(){this.C!=null&&(this.C=null,Pi(this),Ma(this),Rt(19))};function xo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function fu(h,v){var _=null;if(h.g==v){xo(h),Ml(h),h.g=null;var A=2}else if(Ue(h.h,v))_=v.G,zt(h.h,v),A=1;else return;if(h.I!=0){if(v.o)if(A==1){_=v.u?v.u.length:0,v=Date.now()-v.F;var $=h.D;A=vt(),$e(A,new Lt(A,_)),Rr(h)}else hu(h);else if($=v.m,$==3||$==0&&v.X>0||!(A==1&&wo(h,v)||A==2&&Ma(h)))switch(_&&_.length>0&&(v=h.h,v.i=v.i.concat(_)),$){case 1:Cr(h,5);break;case 4:Cr(h,10);break;case 3:Cr(h,6);break;default:Cr(h,2)}}}function mu(h,v){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*v}function Cr(h,v){if(h.j.info("Error code "+v),v==2){var _=y(h.bb,h),A=h.Ua;const $=!A;A=new X(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ve(A,"https"),wt(A),$?ms(A.toString(),_):Cl(A.toString(),_)}else Rt(2);h.I=0,h.l&&h.l.pa(v),pu(h),_o(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function pu(h){if(h.I=0,h.ja=[],h.l){const v=ut(h.h);(v.length!=0||h.i.length!=0)&&(q(h.ja,v),q(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function gu(h,v,_){var A=_ instanceof X?me(_):new X(_);if(A.g!="")v&&(A.g=v+"."+A.g),Pe(A,A.u);else{var $=d.location;A=$.protocol,v=v?v+"."+$.hostname:$.hostname,$=+$.port;const Z=new X(null);A&&ve(Z,A),v&&(Z.g=v),$&&Pe(Z,$),_&&(Z.h=_),A=Z}return _=h.G,v=h.wa,_&&v&&Oe(A,_,v),Oe(A,"VER",h.ka),Da(h,A),A}function yu(h,v,_){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new Wt(new Sr({ab:_})):new Wt(h.ma),v.Fa(h.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function vu(){}r=vu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Oi(){}Oi.prototype.g=function(h,v){return new ps(h,v)};function ps(h,v){qe.call(this),this.g=new Mi(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!j(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!j(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Zr(this)}x(ps,qe),ps.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ps.prototype.close=function(){jl(this.g)},ps.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=ae(h),h=_);v.i.push(new V(v.Ya++,h)),v.I==3&&Rr(v)},ps.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,ps.Z.N.call(this)};function bu(h){De.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const _ in v){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}x(bu,De);function _u(){Se.call(this),this.status=1}x(_u,Se);function Zr(h){this.g=h}x(Zr,vu),Zr.prototype.ra=function(){$e(this.g,"a")},Zr.prototype.qa=function(h){$e(this.g,new bu(h))},Zr.prototype.pa=function(h){$e(this.g,new _u)},Zr.prototype.oa=function(){$e(this.g,"b")},Oi.prototype.createWebChannel=Oi.prototype.g,ps.prototype.send=ps.prototype.o,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,Dw=function(){return new Oi},jw=function(){return vt()},Iw=Me,_p={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fs.NO_ERROR=0,Fs.TIMEOUT=8,Fs.HTTP_ERROR=6,zh=Fs,Ai.COMPLETE="complete",Nw=Ai,Ce.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",qe.prototype.listen=qe.prototype.J,kc=Ce,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,Cw=Wt}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});class os{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}os.UNAUTHENTICATED=new os(null),os.GOOGLE_CREDENTIALS=new os("google-credentials-uid"),os.FIRST_PARTY=new os("first-party-uid"),os.MOCK_USER=new os("mock-user");let xl="12.8.0";function HC(r){xl=r}const co=new Qp("@firebase/firestore");function el(){return co.logLevel}function Ie(r,...e){if(co.logLevel<=Tt.DEBUG){const n=e.map(cg);co.debug(`Firestore (${xl}): ${r}`,...n)}}function Ei(r,...e){if(co.logLevel<=Tt.ERROR){const n=e.map(cg);co.error(`Firestore (${xl}): ${r}`,...n)}}function dl(r,...e){if(co.logLevel<=Tt.WARN){const n=e.map(cg);co.warn(`Firestore (${xl}): ${r}`,...n)}}function cg(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function nt(r,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Mw(r,i,n)}function Mw(r,e,n){let i=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ei(i),new Error(i)}function qt(r,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,r||Mw(e,o,i)}function ct(r,e){return r}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Pw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(os.UNAUTHENTICATED)))}shutdown(){}}class WC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $C{constructor(e){this.t=e,this.currentUser=os.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qt(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new bi,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new bi)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qt(typeof i.accessToken=="string",31837,{l:i}),new Pw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qt(e===null||typeof e=="string",2055,{h:e}),new os(e)}}class KC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=os.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class YC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new KC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(os.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class o_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ls(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qt(this.o===void 0,3512);const i=u=>{u.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ie("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new o_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new o_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function XC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}class ug{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=XC(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}}function St(r,e){return r<e?-1:r>e?1:0}function wp(r,e){const n=Math.min(r.length,e.length);for(let i=0;i<n;i++){const o=r.charAt(i),u=e.charAt(i);if(o!==u)return Ym(o)===Ym(u)?St(o,u):Ym(o)?1:-1}return St(r.length,e.length)}const JC=55296,ZC=57343;function Ym(r){const e=r.charCodeAt(0);return e>=JC&&e<=ZC}function fl(r,e,n){return r.length===e.length&&r.every(((i,o)=>n(i,e[o])))}const l_="__name__";class Pr{constructor(e,n,i){n===void 0?n=0:n>e.length&&nt(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&nt(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const u=Pr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return St(e.length,n.length)}static compareSegments(e,n){const i=Pr.isNumericId(e),o=Pr.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Pr.extractNumericId(e).compare(Pr.extractNumericId(n)):wp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ma.fromString(e.substring(4,e.length-2))}}class Zt extends Pr{construct(e,n,i){return new Zt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new Zt(n)}static emptyPath(){return new Zt([])}}const eN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends Pr{construct(e,n,i){return new Zn(e,n,i)}static isValidIdentifier(e){return eN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l_}static keyField(){return new Zn([l_])}static fromServerFormat(e){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(u(),o++)}if(u(),d)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(n)}static emptyPath(){return new Zn([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(Zt.fromString(e))}static fromName(e){return new Ye(Zt.fromString(e).popFirst(5))}static empty(){return new Ye(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Zt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new Zt(e.slice()))}}function Ow(r,e,n){if(!n)throw new Re(ce.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function tN(r,e,n,i){if(e===!0&&i===!0)throw new Re(ce.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function c_(r){if(!Ye.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function u_(r){if(Ye.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Lw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function xd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":nt(12329,{type:typeof r})}function br(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xd(r);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function Pn(r,e){const n={typeString:r};return e&&(n.value=e),n}function su(r,e){if(!Lw(r))throw new Re(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){n=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Re(ce.INVALID_ARGUMENT,n);return!0}const h_=-62135596800,d_=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*d_);return new ht(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<h_)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d_}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(su(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-h_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Pn("string",ht._jsonSchemaVersion),seconds:Pn("number"),nanoseconds:Pn("number")};class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new ht(0,0))}static max(){return new ot(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Fc=-1;function nN(r,e){const n=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=ot.fromTimestamp(i===1e9?new ht(n+1,0):new ht(n,i));return new ya(o,Ye.empty(),e)}function sN(r){return new ya(r.readTime,r.key,Fc)}class ya{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ya(ot.min(),Ye.empty(),Fc)}static max(){return new ya(ot.max(),Ye.empty(),Fc)}}function rN(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ye.comparator(r.documentKey,e.documentKey),n!==0?n:St(r.largestBatchId,e.largestBatchId))}const iN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function El(r){if(r.code!==ce.FAILED_PRECONDITION||r.message!==iN)throw r;Ie("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,i)=>{n(e)}))}static reject(e){return new fe(((n,i)=>{i(e)}))}static waitFor(e){return new fe(((n,i)=>{let o=0,u=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++u,d&&u===o&&n()}),(g=>i(g)))})),d=!0,u===o&&n()}))}static or(e){let n=fe.resolve(!1);for(const i of e)n=n.next((o=>o?fe.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,u)=>{i.push(n.call(this,o,u))})),this.waitFor(i)}static mapArray(e,n){return new fe(((i,o)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((w=>{d[y]=w,++p,p===u&&i(d)}),(w=>o(w)))}}))}static doWhile(e,n){return new fe(((i,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):i()};u()}))}}function oN(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tl(r){return r.name==="IndexedDbTransactionError"}class Ed{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ed.ce=-1;const hg=-1;function Td(r){return r==null}function rd(r){return r===0&&1/r==-1/0}function lN(r){return typeof r=="number"&&Number.isInteger(r)&&!rd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Vw="";function cN(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=f_(e)),e=uN(r.get(n),e);return f_(e)}function uN(r,e){let n=e;const i=r.length;for(let o=0;o<i;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case Vw:n+="";break;default:n+=u}}return n}function f_(r){return r+Vw+""}function m_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Sa(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function Uw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class mn{constructor(e,n){this.comparator=e,this.root=n||Jn.EMPTY}insert(e,n){return new mn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ah(this.root,e,this.comparator,!0)}}class Ah{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jn{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??Jn.RED,this.left=o??Jn.EMPTY,this.right=u??Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new Jn(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Jn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw nt(27949);return e+(this.isRed()?0:1)}}Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw nt(57766)}get value(){throw nt(16141)}get color(){throw nt(16727)}get left(){throw nt(29726)}get right(){throw nt(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new Jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p_(this.data.getIterator())}getIteratorFrom(e){return new p_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Vn(this.comparator);return n.data=e,n}}class p_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Vs{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new Vs([])}unionWith(e){let n=new Vn(Zn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Vs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class Bw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class es{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Bw("Invalid base64 string: "+u):u}})(e);return new es(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new es(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}es.EMPTY_BYTE_STRING=new es("");const hN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function va(r){if(qt(!!r,39018),typeof r=="string"){let e=0;const n=hN.exec(r);if(qt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:kn(r.seconds),nanos:kn(r.nanos)}}function kn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ba(r){return typeof r=="string"?es.fromBase64String(r):es.fromUint8Array(r)}const zw="server_timestamp",Fw="__type__",qw="__previous_value__",Hw="__local_write_time__";function dg(r){return(r?.mapValue?.fields||{})[Fw]?.stringValue===zw}function Sd(r){const e=r.mapValue.fields[qw];return dg(e)?Sd(e):e}function qc(r){const e=va(r.mapValue.fields[Hw].timestampValue);return new ht(e.seconds,e.nanos)}class dN{constructor(e,n,i,o,u,d,p,g,y,w,x){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w,this.apiKey=x}}const id="(default)";class Hc{constructor(e,n){this.projectId=e,this.database=n||id}static empty(){return new Hc("","")}get isDefaultDatabase(){return this.database===id}isEqual(e){return e instanceof Hc&&e.projectId===this.projectId&&e.database===this.database}}function fN(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hc(r.options.projectId,e)}const Gw="__type__",mN="__max__",Rh={mapValue:{}},Ww="__vector__",ad="value";function _a(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?dg(r)?4:gN(r)?9007199254740991:pN(r)?10:11:nt(28295,{value:r})}function Hr(r,e){if(r===e)return!0;const n=_a(r);if(n!==_a(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return qc(r).isEqual(qc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=va(o.timestampValue),p=va(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return ba(o.bytesValue).isEqual(ba(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return kn(o.geoPointValue.latitude)===kn(u.geoPointValue.latitude)&&kn(o.geoPointValue.longitude)===kn(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return kn(o.integerValue)===kn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=kn(o.doubleValue),p=kn(u.doubleValue);return d===p?rd(d)===rd(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return fl(r.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},p=u.mapValue.fields||{};if(m_(d)!==m_(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Hr(d[g],p[g])))return!1;return!0})(r,e);default:return nt(52216,{left:r})}}function Gc(r,e){return(r.values||[]).find((n=>Hr(n,e)))!==void 0}function ml(r,e){if(r===e)return 0;const n=_a(r),i=_a(e);if(n!==i)return St(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(r.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=kn(u.integerValue||u.doubleValue),g=kn(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return g_(r.timestampValue,e.timestampValue);case 4:return g_(qc(r),qc(e));case 5:return wp(r.stringValue,e.stringValue);case 6:return(function(u,d){const p=ba(u),g=ba(d);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=St(p[y],g[y]);if(w!==0)return w}return St(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=St(kn(u.latitude),kn(d.latitude));return p!==0?p:St(kn(u.longitude),kn(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return y_(r.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[ad]?.arrayValue,w=g[ad]?.arrayValue,x=St(y?.values?.length||0,w?.values?.length||0);return x!==0?x:y_(y,w)})(r.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Rh.mapValue&&d===Rh.mapValue)return 0;if(u===Rh.mapValue)return 1;if(d===Rh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let x=0;x<g.length&&x<w.length;++x){const T=wp(g[x],w[x]);if(T!==0)return T;const O=ml(p[g[x]],y[w[x]]);if(O!==0)return O}return St(g.length,w.length)})(r.mapValue,e.mapValue);default:throw nt(23264,{he:n})}}function g_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return St(r,e);const n=va(r),i=va(e),o=St(n.seconds,i.seconds);return o!==0?o:St(n.nanos,i.nanos)}function y_(r,e){const n=r.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=ml(n[o],i[o]);if(u)return u}return St(n.length,i.length)}function pl(r){return xp(r)}function xp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const i=va(n);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return ba(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Ye.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=xp(u);return i+"]"})(r.arrayValue):"mapValue"in r?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${xp(n.fields[d])}`;return o+"}"})(r.mapValue):nt(61005,{value:r})}function Fh(r){switch(_a(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sd(r);return e?16+Fh(e):16;case 5:return 2*r.stringValue.length;case 6:return ba(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+Fh(u)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Sa(i.fields,((u,d)=>{o+=u.length+Fh(d)})),o})(r.mapValue);default:throw nt(13486,{value:r})}}function v_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ep(r){return!!r&&"integerValue"in r}function fg(r){return!!r&&"arrayValue"in r}function b_(r){return!!r&&"nullValue"in r}function __(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function qh(r){return!!r&&"mapValue"in r}function pN(r){return(r?.mapValue?.fields||{})[Gw]?.stringValue===Ww}function Mc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Sa(r.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Mc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mc(r.arrayValue.values[n]);return e}return{...r}}function gN(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===mN}class As{constructor(e){this.value=e}static empty(){return new As({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mc(n)}setAll(e){let n=Zn.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=p.popLast()}d?i[p.lastSegment()]=Mc(d):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(e){const n=this.field(e.popLast());qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];qh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Sa(n,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new As(Mc(this.value))}}function $w(r){const e=[];return Sa(r.fields,((n,i)=>{const o=new Zn([n]);if(qh(i)){const u=$w(i.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Vs(e)}class ls{constructor(e,n,i,o,u,d,p){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new ls(e,0,ot.min(),ot.min(),ot.min(),As.empty(),0)}static newFoundDocument(e,n,i,o){return new ls(e,1,n,ot.min(),i,o,0)}static newNoDocument(e,n){return new ls(e,2,n,ot.min(),ot.min(),As.empty(),0)}static newUnknownDocument(e,n){return new ls(e,3,n,ot.min(),ot.min(),As.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=As.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=As.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class od{constructor(e,n){this.position=e,this.inclusive=n}}function w_(r,e,n){let i=0;for(let o=0;o<r.position.length;o++){const u=e[o],d=r.position[o];if(u.field.isKeyField()?i=Ye.comparator(Ye.fromName(d.referenceValue),n.key):i=ml(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function x_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Hr(r.position[n],e.position[n]))return!1;return!0}class Wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function yN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Kw{}class Mn extends Kw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new bN(e,n,i):n==="array-contains"?new xN(e,i):n==="in"?new EN(e,i):n==="not-in"?new TN(e,i):n==="array-contains-any"?new SN(e,i):new Mn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new _N(e,i):new wN(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ml(n,this.value)):n!==null&&_a(this.value)===_a(n)&&this.matchesComparison(ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _r extends Kw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new _r(e,n)}matches(e){return Yw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Yw(r){return r.op==="and"}function Qw(r){return vN(r)&&Yw(r)}function vN(r){for(const e of r.filters)if(e instanceof _r)return!1;return!0}function Tp(r){if(r instanceof Mn)return r.field.canonicalString()+r.op.toString()+pl(r.value);if(Qw(r))return r.filters.map((e=>Tp(e))).join(",");{const e=r.filters.map((n=>Tp(n))).join(",");return`${r.op}(${e})`}}function Xw(r,e){return r instanceof Mn?(function(i,o){return o instanceof Mn&&i.op===o.op&&i.field.isEqual(o.field)&&Hr(i.value,o.value)})(r,e):r instanceof _r?(function(i,o){return o instanceof _r&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,d,p)=>u&&Xw(d,o.filters[p])),!0):!1})(r,e):void nt(19439)}function Jw(r){return r instanceof Mn?(function(n){return`${n.field.canonicalString()} ${n.op} ${pl(n.value)}`})(r):r instanceof _r?(function(n){return n.op.toString()+" {"+n.getFilters().map(Jw).join(" ,")+"}"})(r):"Filter"}class bN extends Mn{constructor(e,n,i){super(e,n,i),this.key=Ye.fromName(i.referenceValue)}matches(e){const n=Ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class _N extends Mn{constructor(e,n){super(e,"in",n),this.keys=Zw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class wN extends Mn{constructor(e,n){super(e,"not-in",n),this.keys=Zw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Zw(r,e){return(e.arrayValue?.values||[]).map((n=>Ye.fromName(n.referenceValue)))}class xN extends Mn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fg(n)&&Gc(n.arrayValue,this.value)}}class EN extends Mn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gc(this.value.arrayValue,n)}}class TN extends Mn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gc(this.value.arrayValue,n)}}class SN extends Mn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Gc(this.value.arrayValue,i)))}}class kN{constructor(e,n=null,i=[],o=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function E_(r,e=null,n=[],i=[],o=null,u=null,d=null){return new kN(r,e,n,i,o,u,d)}function mg(r){const e=ct(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Tp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>pl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>pl(i))).join(",")),e.Te=n}return e.Te}function pg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!yN(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!Xw(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!x_(r.startAt,e.startAt)&&x_(r.endAt,e.endAt)}function Sp(r){return Ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Sl{constructor(e,n=null,i=[],o=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function AN(r,e,n,i,o,u,d,p){return new Sl(r,e,n,i,o,u,d,p)}function gg(r){return new Sl(r)}function T_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function RN(r){return Ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function e2(r){return r.collectionGroup!==null}function Pc(r){const e=ct(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Vn(Zn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Wc(u,i))})),n.has(Zn.keyField().canonicalString())||e.Ie.push(new Wc(Zn.keyField(),i))}return e.Ie}function zr(r){const e=ct(r);return e.Ee||(e.Ee=CN(e,Pc(r))),e.Ee}function CN(r,e){if(r.limitType==="F")return E_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Wc(o.field,u)}));const n=r.endAt?new od(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new od(r.startAt.position,r.startAt.inclusive):null;return E_(r.path,r.collectionGroup,e,r.filters,r.limit,n,i)}}function kp(r,e){const n=r.filters.concat([e]);return new Sl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function NN(r,e){const n=r.explicitOrderBy.concat([e]);return new Sl(r.path,r.collectionGroup,n,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Ap(r,e,n){return new Sl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function kd(r,e){return pg(zr(r),zr(e))&&r.limitType===e.limitType}function t2(r){return`${mg(zr(r))}|lt:${r.limitType}`}function tl(r){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>Jw(o))).join(", ")}]`),Td(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>pl(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>pl(o))).join(",")),`Target(${i})`})(zr(r))}; limitType=${r.limitType})`}function Ad(r,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Ye.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(r,e)&&(function(i,o){for(const u of Pc(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,g){const y=w_(d,p,g);return d.inclusive?y<=0:y<0})(i.startAt,Pc(i),o)||i.endAt&&!(function(d,p,g){const y=w_(d,p,g);return d.inclusive?y>=0:y>0})(i.endAt,Pc(i),o))})(r,e)}function IN(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function n2(r){return(e,n)=>{let i=!1;for(const o of Pc(r)){const u=jN(o,e,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function jN(r,e,n){const i=r.field.isKeyField()?Ye.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?ml(g,y):nt(42886)})(r.field,e,n);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return nt(19790,{direction:r.dir})}}class po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,((n,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return Uw(this.inner)}size(){return this.innerSize}}const DN=new mn(Ye.comparator);function Ti(){return DN}const s2=new mn(Ye.comparator);function Ac(...r){let e=s2;for(const n of r)e=e.insert(n.key,n);return e}function r2(r){let e=s2;return r.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Za(){return Oc()}function i2(){return Oc()}function Oc(){return new po((r=>r.toString()),((r,e)=>r.isEqual(e)))}const MN=new mn(Ye.comparator),PN=new Vn(Ye.comparator);function kt(...r){let e=PN;for(const n of r)e=e.add(n);return e}const ON=new Vn(St);function LN(){return ON}function yg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rd(e)?"-0":e}}function a2(r){return{integerValue:""+r}}function VN(r,e){return lN(e)?a2(e):yg(r,e)}class Rd{constructor(){this._=void 0}}function UN(r,e,n){return r instanceof ld?(function(o,u){const d={fields:{[Fw]:{stringValue:zw},[Hw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&dg(u)&&(u=Sd(u)),u&&(d.fields[qw]=u),{mapValue:d}})(n,e):r instanceof $c?l2(r,e):r instanceof Kc?c2(r,e):(function(o,u){const d=o2(o,u),p=S_(d)+S_(o.Ae);return Ep(d)&&Ep(o.Ae)?a2(p):yg(o.serializer,p)})(r,e)}function BN(r,e,n){return r instanceof $c?l2(r,e):r instanceof Kc?c2(r,e):n}function o2(r,e){return r instanceof cd?(function(i){return Ep(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class ld extends Rd{}class $c extends Rd{constructor(e){super(),this.elements=e}}function l2(r,e){const n=u2(e);for(const i of r.elements)n.some((o=>Hr(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Kc extends Rd{constructor(e){super(),this.elements=e}}function c2(r,e){let n=u2(e);for(const i of r.elements)n=n.filter((o=>!Hr(o,i)));return{arrayValue:{values:n}}}class cd extends Rd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function S_(r){return kn(r.integerValue||r.doubleValue)}function u2(r){return fg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function zN(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof $c&&o instanceof $c||i instanceof Kc&&o instanceof Kc?fl(i.elements,o.elements,Hr):i instanceof cd&&o instanceof cd?Hr(i.Ae,o.Ae):i instanceof ld&&o instanceof ld})(r.transform,e.transform)}class FN{constructor(e,n){this.version=e,this.transformResults=n}}class tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Cd{}function h2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new vg(r.key,tr.none()):new ru(r.key,r.data,tr.none());{const n=r.data,i=As.empty();let o=new Vn(Zn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),o=o.add(u)}return new ka(r.key,i,new Vs(o.toArray()),tr.none())}}function qN(r,e,n){r instanceof ru?(function(o,u,d){const p=o.value.clone(),g=A_(o.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):r instanceof ka?(function(o,u,d){if(!Hh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const p=A_(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(d2(o)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Lc(r,e,n,i){return r instanceof ru?(function(u,d,p,g){if(!Hh(u.precondition,d))return p;const y=u.value.clone(),w=R_(u.fieldTransforms,g,d);return y.setAll(w),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,e,n,i):r instanceof ka?(function(u,d,p,g){if(!Hh(u.precondition,d))return p;const y=R_(u.fieldTransforms,g,d),w=d.data;return w.setAll(d2(u)),w.setAll(y),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(r,e,n,i):(function(u,d,p){return Hh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,n)}function HN(r,e){let n=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),u=o2(i.transform,o||null);u!=null&&(n===null&&(n=As.empty()),n.set(i.field,u))}return n||null}function k_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&fl(i,o,((u,d)=>zN(u,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ru extends Cd{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ka extends Cd{constructor(e,n,i,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function d2(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=r.data.field(n);e.set(n,i)}})),e}function A_(r,e,n){const i=new Map;qt(r.length===n.length,32656,{Ve:n.length,de:r.length});for(let o=0;o<n.length;o++){const u=r[o],d=u.transform,p=e.data.field(u.field);i.set(u.field,BN(d,p,n[o]))}return i}function R_(r,e,n){const i=new Map;for(const o of r){const u=o.transform,d=n.data.field(o.field);i.set(o.field,UN(u,d,e))}return i}class vg extends Cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GN extends Cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class WN{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&qN(u,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Lc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Lc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=i2();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(o.key)?null:p;const g=h2(d,p);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(ot.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),kt())}isEqual(e){return this.batchId===e.batchId&&fl(this.mutations,e.mutations,((n,i)=>k_(n,i)))&&fl(this.baseMutations,e.baseMutations,((n,i)=>k_(n,i)))}}class bg{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){qt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return MN})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,i[d].version);return new bg(e,n,i,o)}}class $N{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class KN{constructor(e,n){this.count=e,this.unchangedNames=n}}var Dn,Nt;function YN(r){switch(r){case ce.OK:return nt(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return nt(15467,{code:r})}}function f2(r){if(r===void 0)return Ei("GRPC error has no .code"),ce.UNKNOWN;switch(r){case Dn.OK:return ce.OK;case Dn.CANCELLED:return ce.CANCELLED;case Dn.UNKNOWN:return ce.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return ce.INTERNAL;case Dn.UNAVAILABLE:return ce.UNAVAILABLE;case Dn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Dn.NOT_FOUND:return ce.NOT_FOUND;case Dn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Dn.ABORTED:return ce.ABORTED;case Dn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Dn.DATA_LOSS:return ce.DATA_LOSS;default:return nt(39323,{code:r})}}(Nt=Dn||(Dn={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";function QN(){return new TextEncoder}const XN=new ma([4294967295,4294967295],0);function C_(r){const e=QN().encode(r),n=new Rw;return n.update(e),new Uint8Array(n.digest())}function N_(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ma([n,i],0),new ma([o,u],0)]}class _g{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Rc(`Invalid padding: ${n}`);if(i<0)throw new Rc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Rc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Rc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ma.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(ma.fromNumber(i)));return o.compare(XN)===1&&(o=new ma([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=C_(e),[i,o]=N_(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);if(!this.we(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new _g(u,o,n);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=C_(e),[i,o]=N_(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);this.be(d)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nd{constructor(e,n,i,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Nd(ot.min(),o,new mn(St),Ti(),kt())}}class iu{constructor(e,n,i,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new iu(i,n,kt(),kt(),kt())}}class Gh{constructor(e,n,i,o){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=o}}class m2{constructor(e,n){this.targetId=e,this.Ce=n}}class p2{constructor(e,n,i=es.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class I_{constructor(){this.ve=0,this.Fe=j_(),this.Me=es.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=kt(),n=kt(),i=kt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:nt(38017,{changeType:u})}})),new iu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=j_()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class JN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ti(),this.He=Ch(),this.Je=Ch(),this.Ze=new mn(St)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:nt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Sp(u))if(i===0){const d=new Ye(u.path);this.et(n,d,ls.newNoDocument(d,ot.min()))}else qt(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let d,p;try{d=ba(i).toUint8Array()}catch(g){if(g instanceof Bw)return dl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new _g(d,o,u)}catch(g){return dl(g instanceof Rc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&Sp(p.target)){const g=new Ye(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,ls.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let i=kt();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Nd(e,n,this.Ze,this.je,i);return this.je=Ti(),this.He=Ch(),this.Je=Ch(),this.Ze=new mn(St),o}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new I_,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Vn(St),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Vn(St),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new I_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ch(){return new mn(Ye.comparator)}function j_(){return new mn(Ye.comparator)}const ZN={asc:"ASCENDING",desc:"DESCENDING"},e4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t4={and:"AND",or:"OR"};class n4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rp(r,e){return r.useProto3Json||Td(e)?e:{value:e}}function ud(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function s4(r,e){return ud(r,e.toTimestamp())}function Fr(r){return qt(!!r,49232),ot.fromTimestamp((function(n){const i=va(n);return new ht(i.seconds,i.nanos)})(r))}function wg(r,e){return Cp(r,e).canonicalString()}function Cp(r,e){const n=(function(o){return new Zt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function y2(r){const e=Zt.fromString(r);return qt(x2(e),10190,{key:e.toString()}),e}function Np(r,e){return wg(r.databaseId,e.path)}function Qm(r,e){const n=y2(e);if(n.get(1)!==r.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ye(b2(n))}function v2(r,e){return wg(r.databaseId,e)}function r4(r){const e=y2(r);return e.length===4?Zt.emptyPath():b2(e)}function Ip(r){return new Zt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function b2(r){return qt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function D_(r,e,n){return{name:Np(r,e),fields:n.value.mapValue.fields}}function i4(r,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:nt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,w){return y.useProto3Json?(qt(w===void 0||typeof w=="string",58123),es.fromBase64String(w||"")):(qt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),es.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const w=y.code===void 0?ce.UNKNOWN:f2(y.code);return new Re(w,y.message||"")})(d);n=new p2(i,o,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Qm(r,i.document.name),u=Fr(i.document.updateTime),d=i.document.createTime?Fr(i.document.createTime):ot.min(),p=new As({mapValue:{fields:i.document.fields}}),g=ls.newFoundDocument(o,u,d,p),y=i.targetIds||[],w=i.removedTargetIds||[];n=new Gh(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Qm(r,i.document),u=i.readTime?Fr(i.readTime):ot.min(),d=ls.newNoDocument(o,u),p=i.removedTargetIds||[];n=new Gh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Qm(r,i.document),u=i.removedTargetIds||[];n=new Gh([],u,o,null)}else{if(!("filter"in e))return nt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,d=new KN(o,u),p=i.targetId;n=new m2(p,d)}}return n}function a4(r,e){let n;if(e instanceof ru)n={update:D_(r,e.key,e.value)};else if(e instanceof vg)n={delete:Np(r,e.key)};else if(e instanceof ka)n={update:D_(r,e.key,e.data),updateMask:p4(e.fieldMask)};else{if(!(e instanceof GN))return nt(16599,{dt:e.type});n={verify:Np(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const p=d.transform;if(p instanceof ld)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof $c)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Kc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof cd)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw nt(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:s4(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:nt(27497)})(r,e.precondition)),n}function o4(r,e){return r&&r.length>0?(qt(e!==void 0,14353),r.map((n=>(function(o,u){let d=o.updateTime?Fr(o.updateTime):Fr(u);return d.isEqual(ot.min())&&(d=Fr(u)),new FN(d,o.transformResults||[])})(n,e)))):[]}function l4(r,e){return{documents:[v2(r,e.path)]}}function c4(r,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=v2(r,o);const u=(function(y){if(y.length!==0)return w2(_r.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((w=>(function(T){return{field:nl(T.field),direction:d4(T.dir)}})(w)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Rp(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function u4(r){let e=r4(r.parent);const n=r.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){qt(i===1,65062);const w=n.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let u=[];n.where&&(u=(function(x){const T=_2(x);return T instanceof _r&&Qw(T)?T.getFilters():[T]})(n.where));let d=[];n.orderBy&&(d=(function(x){return x.map((T=>(function(q){return new Wc(sl(q.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(x){let T;return T=typeof x=="object"?x.value:x,Td(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(x){const T=!!x.before,O=x.values||[];return new od(O,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(x){const T=!x.before,O=x.values||[];return new od(O,T)})(n.endAt)),AN(e,o,d,u,p,"F",g,y)}function h4(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _2(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=sl(n.unaryFilter.field);return Mn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=sl(n.unaryFilter.field);return Mn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=sl(n.unaryFilter.field);return Mn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=sl(n.unaryFilter.field);return Mn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nt(61313);default:return nt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Mn.create(sl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nt(58110);default:return nt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return _r.create(n.compositeFilter.filters.map((i=>_2(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return nt(1026)}})(n.compositeFilter.op))})(r):nt(30097,{filter:r})}function d4(r){return ZN[r]}function f4(r){return e4[r]}function m4(r){return t4[r]}function nl(r){return{fieldPath:r.canonicalString()}}function sl(r){return Zn.fromServerFormat(r.fieldPath)}function w2(r){return r instanceof Mn?(function(n){if(n.op==="=="){if(__(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NAN"}};if(b_(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(__(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NOT_NAN"}};if(b_(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(n.field),op:f4(n.op),value:n.value}}})(r):r instanceof _r?(function(n){const i=n.getFilters().map((o=>w2(o)));return i.length===1?i[0]:{compositeFilter:{op:m4(n.op),filters:i}}})(r):nt(54877,{filter:r})}function p4(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function x2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function E2(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class ha{constructor(e,n,i,o,u=ot.min(),d=ot.min(),p=es.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new ha(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class g4{constructor(e){this.yt=e}}function y4(r){const e=u4({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ap(e,e.limit,"L"):e}class v4{constructor(){this.Sn=new b4}addToCollectionParentIndex(e,n){return this.Sn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(ya.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(ya.min())}updateCollectionGroup(e,n,i){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class b4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Vn(Zt.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Vn(Zt.comparator)).toArray()}}const M_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T2=41943040;class ks{static withCacheSize(e){return new ks(e,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}ks.DEFAULT_COLLECTION_PERCENTILE=10,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ks.DEFAULT=new ks(T2,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ks.DISABLED=new ks(-1,0,0);class gl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new gl(0)}static ar(){return new gl(-1)}}const P_="LruGarbageCollector",_4=1048576;function O_([r,e],[n,i]){const o=St(r,n);return o===0?St(e,i):o}class w4{constructor(e){this.Pr=e,this.buffer=new Vn(O_),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();O_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class x4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ie(P_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tl(n)?Ie(P_,"Ignoring IndexedDB error during garbage collection: ",n):await El(n)}await this.Ar(3e5)}))}}class E4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(Ed.ce);const i=new w4(n);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(M_)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M_):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,o,u,d,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,d=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(i=x,p=Date.now(),this.removeTargets(e,i,n)))).next((x=>(u=x,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(y=Date.now(),el()<=Tt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${x} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x}))))}}function T4(r,e){return new E4(r,e)}class S4{constructor(){this.changes=new po((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ls.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?fe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class k4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class A4{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Lc(i.mutation,o,Vs.empty(),ht.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,kt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=kt()){const o=Za();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((u=>{let d=Ac();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=Za();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,kt())))}populateOverlays(e,n,i){const o=[];return i.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,i,o){let u=Ti();const d=Oc(),p=(function(){return Oc()})();return n.forEach(((g,y)=>{const w=i.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof ka)?u=u.insert(y.key,y):w!==void 0?(d.set(y.key,w.mutation.getFieldMask()),Lc(w.mutation,y,w.mutation.getFieldMask(),ht.now())):d.set(y.key,Vs.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,w)=>d.set(y,w))),n.forEach(((y,w)=>p.set(y,new k4(w,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=Oc();let o=new mn(((d,p)=>d-p)),u=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let w=i.get(g)||Vs.empty();w=p.applyToLocalView(y,w),i.set(g,w);const x=(o.get(p.batchId)||kt()).add(g);o=o.insert(p.batchId,x)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,x=i2();w.forEach((T=>{if(!u.has(T)){const O=h2(n.get(T),i.get(T));O!==null&&x.set(T,O),u=u.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,x))}return fe.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return RN(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):e2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-u.size):fe.resolve(Za());let p=Fc,g=u;return d.next((y=>fe.forEach(y,((w,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),u.get(w)?fe.resolve():this.remoteDocumentCache.getEntry(e,w).next((T=>{g=g.insert(w,T)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,kt()))).next((w=>({batchId:p,changes:r2(w)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ye(n)).next((i=>{let o=Ac();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const u=n.collectionGroup;let d=Ac();return this.indexManager.getCollectionParents(e,u).next((p=>fe.forEach(p,(g=>{const y=(function(x,T){return new Sl(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((w=>{w.forEach(((x,T)=>{d=d.insert(x,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,o)))).next((d=>{u.forEach(((g,y)=>{const w=y.getKey();d.get(w)===null&&(d=d.insert(w,ls.newInvalidDocument(w)))}));let p=Ac();return d.forEach(((g,y)=>{const w=u.get(g);w!==void 0&&Lc(w.mutation,y,Vs.empty(),ht.now()),Ad(n,y)&&(p=p.insert(g,y))})),p}))}}class R4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return fe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Fr(o.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:y4(o.bundledQuery),readTime:Fr(o.readTime)}})(n)),fe.resolve()}}class C4{constructor(){this.overlays=new mn(Ye.comparator),this.Lr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Za();return fe.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,u)=>{this.bt(e,n,u)})),fe.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),fe.resolve()}getOverlaysForCollection(e,n,i){const o=Za(),u=n.length+1,d=new Ye(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let u=new mn(((y,w)=>y-w));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let w=u.get(y.largestBatchId);w===null&&(w=Za(),u=u.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=Za(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>p.set(y,w))),!(p.size()>=o)););return fe.resolve(p)}bt(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new $N(n,i));let u=this.Lr.get(n);u===void 0&&(u=kt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class N4{constructor(){this.sessionToken=es.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}class xg{constructor(){this.kr=new Vn(Bn.Kr),this.qr=new Vn(Bn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new Bn(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Bn(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new Ye(new Zt([])),i=new Bn(n,e),o=new Bn(n,e+1),u=[];return this.qr.forEachInRange([i,o],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ye(new Zt([])),i=new Bn(n,e),o=new Bn(n,e+1);let u=kt();return this.qr.forEachInRange([i,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Bn(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Bn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ye.comparator(e.key,n.key)||St(e.Hr,n.Hr)}static Ur(e,n){return St(e.Hr,n.Hr)||Ye.comparator(e.key,n.key)}}class I4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Vn(Bn.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new WN(u,n,i,o);this.mutationQueue.push(d);for(const p of o)this.Jr=this.Jr.add(new Bn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return fe.resolve(d)}lookupMutationBatch(e,n){return fe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.Xr(i),u=o<0?0:o;return fe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?hg:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Bn(n,0),o=new Bn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,o],(d=>{const p=this.Zr(d.Hr);u.push(p)})),fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Vn(St);return n.forEach((o=>{const u=new Bn(o,0),d=new Bn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{i=i.add(p.Hr)}))})),fe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let u=i;Ye.isDocumentKey(u)||(u=u.child(""));const d=new Bn(new Ye(u),0);let p=new Vn(St);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)}),d),fe.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){qt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return fe.forEach(n.mutations,(o=>{const u=new Bn(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new Bn(n,0),o=this.Jr.firstAfterOrEqual(i);return fe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class j4{constructor(e){this.ti=e,this.docs=(function(){return new mn(Ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,d=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return fe.resolve(i?i.document.mutableCopy():ls.newInvalidDocument(n))}getEntries(e,n){let i=Ti();return n.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():ls.newInvalidDocument(o))})),fe.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let u=Ti();const d=n.path,p=new Ye(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||rN(sN(w),i)<=0||(o.has(w.key)||Ad(n,w))&&(u=u.insert(w.key,w.mutableCopy()))}return fe.resolve(u)}getAllFromCollectionGroup(e,n,i,o){nt(9500)}ni(e,n){return fe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new D4(this)}getSize(e){return fe.resolve(this.size)}}class D4 extends S4{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),fe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class M4{constructor(e){this.persistence=e,this.ri=new po((n=>mg(n)),pg),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.ii=0,this.si=new xg,this.targetCount=0,this.oi=gl._r()}forEachTarget(e,n){return this.ri.forEach(((i,o)=>n(o))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),fe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new gl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.lr(n),fe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,i){let o=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),fe.waitFor(u).next((()=>o))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return fe.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),fe.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),fe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return fe.resolve(i)}containsKey(e,n){return fe.resolve(this.si.containsKey(n))}}class S2{constructor(e,n){this._i={},this.overlays={},this.ai=new Ed(0),this.ui=!1,this.ui=!0,this.ci=new N4,this.referenceDelegate=e(this),this.li=new M4(this),this.indexManager=new v4,this.remoteDocumentCache=(function(o){return new j4(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new g4(n),this.Pi=new R4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new C4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new I4(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){Ie("MemoryPersistence","Starting transaction:",e);const o=new P4(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return fe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class P4 extends aN{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Ri=new xg,this.Ai=null}static Vi(e){return new Eg(e)}get di(){if(this.Ai)return this.Ai;throw nt(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),fe.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(i=>{const o=Ye.fromPath(i);return this.mi(e,o).next((u=>{u||n.removeEntry(o,ot.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class hd{constructor(e,n){this.persistence=e,this.fi=new po((i=>cN(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=T4(this,n)}static Vi(e,n){return new hd(e,n)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return fe.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((u=>u?fe.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(i++,u.removeEntry(d,ot.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fh(e.data.value)),n}wr(e,n,i){return fe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return fe.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Tg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=o}static Es(e,n){let i=kt(),o=kt();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Tg(e,n.fromCache,i,o)}}class O4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class L4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return uk()?8:oN(cs())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,o,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new O4;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,i,o){return i.documentReadCount<this.Vs?(el()<=Tt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",tl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(el()<=Tt.DEBUG&&Ie("QueryEngine","Query:",tl(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(el()<=Tt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",tl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):fe.resolve())}gs(e,n){if(T_(n))return fe.resolve(null);let i=zr(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Ap(n,null,"F"),i=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=kt(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,d,g.readTime)?this.gs(e,Ap(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,i,o){return T_(n)||o.isEqual(ot.min())?fe.resolve(null):this.fs.getDocuments(e,i).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,i,o)?fe.resolve(null):(el()<=Tt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),tl(n)),this.Ds(e,d,n,nN(o,Fc)).next((p=>p)))}))}bs(e,n){let i=new Vn(n2(e));return n.forEach(((o,u)=>{Ad(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,i){return el()<=Tt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",tl(n)),this.fs.getDocumentsMatchingQuery(e,n,ya.min(),i)}Ds(e,n,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Sg="LocalStore",V4=3e8;class U4{constructor(e,n,i,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new mn(St),this.Fs=new po((u=>mg(u)),pg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function B4(r,e,n,i){return new U4(r,e,n,i)}async function k2(r,e){const n=ct(r);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],p=[];let g=kt();for(const y of o){d.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of u){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function z4(r,e){const n=ct(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,w){const x=y.batch,T=x.keys();let O=fe.resolve();return T.forEach((q=>{O=O.next((()=>w.getEntry(g,q))).next((G=>{const z=y.docVersions.get(q);qt(z!==null,48541),G.version.compareTo(z)<0&&(x.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),w.addEntry(G)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(g,x)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=kt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function A2(r){const e=ct(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function F4(r,e){const n=ct(r),i=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((w,x)=>{const T=o.get(x);if(!T)return;p.push(n.li.removeMatchingKeys(u,w.removedDocuments,x).next((()=>n.li.addMatchingKeys(u,w.addedDocuments,x))));let O=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(x)!==null?O=O.withResumeToken(es.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),o=o.insert(x,O),(function(G,z,ie){return G.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=V4?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(T,O,w)&&p.push(n.li.updateTargetData(u,O))}));let g=Ti(),y=kt();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,w))})),p.push(q4(u,d,e.documentUpdates).next((w=>{g=w.Bs,y=w.Ls}))),!i.isEqual(ot.min())){const w=n.li.getLastRemoteSnapshotVersion(u).next((x=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(w)}return fe.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=o,u)))}function q4(r,e,n){let i=kt(),o=kt();return n.forEach((u=>i=i.add(u))),e.getEntries(r,i).next((u=>{let d=Ti();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(ot.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):Ie(Sg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function H4(r,e){const n=ct(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=hg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function G4(r,e){const n=ct(r);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.li.getTargetData(i,e).next((u=>u?(o=u,fe.resolve(o)):n.li.allocateTargetId(i).next((d=>(o=new ha(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function jp(r,e,n){const i=ct(r),o=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Tl(d))throw d;Ie(Sg,`Failed to update sequence numbers for target ${e}: ${d}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function L_(r,e,n){const i=ct(r);let o=ot.min(),u=kt();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,w){const x=ct(g),T=x.Fs.get(w);return T!==void 0?fe.resolve(x.vs.get(T)):x.li.getTargetData(y,w)})(i,d,zr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,n?o:ot.min(),n?u:kt()))).next((p=>(W4(i,IN(e),p),{documents:p,ks:u})))))}function W4(r,e,n){let i=r.Ms.get(e)||ot.min();n.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),r.Ms.set(e,i)}class V_{constructor(){this.activeTargetIds=LN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $4{constructor(){this.vo=new V_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new V_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class K4{Mo(e){}shutdown(){}}const U_="ConnectivityMonitor";class B_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ie(U_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ie(U_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Nh=null;function Dp(){return Nh===null?Nh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nh++,"0x"+Nh.toString(16)}const Xm="RestConnection",Y4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Q4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===id?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,n,i,o,u){const d=Dp(),p=this.Qo(e,n.toUriEncodedString());Ie(Xm,`Sending RPC '${e}' ${d}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:y}=new URL(p),w=Ea(y);return this.zo(e,p,g,i,w).then((x=>(Ie(Xm,`Received RPC '${e}' ${d}: `,x),x)),(x=>{throw dl(Xm,`RPC '${e}' ${d} failed with error: `,x,"url: ",p,"request:",i),x}))}jo(e,n,i,o,u,d){return this.Wo(e,n,i,o,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),i&&i.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const i=Y4[e];let o=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class X4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const as="WebChannelConnection",_c=(r,e,n)=>{r.listen(e,(i=>{try{n(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class ll extends Q4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ll.c_){const e=jw();_c(e,Iw.STAT_EVENT,(n=>{n.stat===_p.PROXY?Ie(as,"STAT_EVENT: detected buffering proxy"):n.stat===_p.NOPROXY&&Ie(as,"STAT_EVENT: detected no buffering proxy")})),ll.c_=!0}}zo(e,n,i,o,u){const d=Dp();return new Promise(((p,g)=>{const y=new Cw;y.setWithCredentials(!0),y.listenOnce(Nw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case zh.NO_ERROR:const x=y.getResponseJson();Ie(as,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),p(x);break;case zh.TIMEOUT:Ie(as,`RPC '${e}' ${d} timed out`),g(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case zh.HTTP_ERROR:const T=y.getStatus();if(Ie(as,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const q=O?.error;if(q&&q.status&&q.message){const G=(function(ie){const ee=ie.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ee)>=0?ee:ce.UNKNOWN})(q.status);g(new Re(G,q.message))}else g(new Re(ce.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:nt(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Ie(as,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(o);Ie(as,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",w,i,15)}))}T_(e,n,i){const o=Dp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const y=u.join("");Ie(as,`Creating RPC '${e}' stream ${o}: ${y}`,p);const w=d.createWebChannel(y,p);this.I_(w);let x=!1,T=!1;const O=new X4({Ho:q=>{T?Ie(as,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(x||(Ie(as,`Opening RPC '${e}' stream ${o} transport.`),w.open(),x=!0),Ie(as,`RPC '${e}' stream ${o} sending:`,q),w.send(q))},Jo:()=>w.close()});return _c(w,kc.EventType.OPEN,(()=>{T||(Ie(as,`RPC '${e}' stream ${o} transport opened.`),O.i_())})),_c(w,kc.EventType.CLOSE,(()=>{T||(T=!0,Ie(as,`RPC '${e}' stream ${o} transport closed`),O.o_(),this.E_(w))})),_c(w,kc.EventType.ERROR,(q=>{T||(T=!0,dl(as,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),O.o_(new Re(ce.UNAVAILABLE,"The operation could not be completed")))})),_c(w,kc.EventType.MESSAGE,(q=>{if(!T){const G=q.data[0];qt(!!G,16349);const z=G,ie=z?.error||z[0]?.error;if(ie){Ie(as,`RPC '${e}' stream ${o} received error:`,ie);const ee=ie.status;let he=(function(Ne){const N=Dn[Ne];if(N!==void 0)return f2(N)})(ee),_e=ie.message;he===void 0&&(he=ce.INTERNAL,_e="Unknown error status: "+ee+" with message "+ie.message),T=!0,O.o_(new Re(he,_e)),w.close()}else Ie(as,`RPC '${e}' stream ${o} received:`,G),O.__(G)}})),ll.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Dw()}}function J4(r){return new ll(r)}function Jm(){return typeof document<"u"?document:null}function Id(r){return new n4(r,!0)}ll.c_=!1;class R2{constructor(e,n,i=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&Ie("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const z_="PersistentStream";class C2{constructor(e,n,i,o,u,d,p,g){this.Ci=e,this.b_=i,this.S_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Ei(n.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new Re(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(z_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ie(z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Z4 extends C2{constructor(e,n,i,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=i4(this.serializer,e),i=(function(u){if(!("targetChange"in u))return ot.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?ot.min():d.readTime?Fr(d.readTime):ot.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=Ip(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=Sp(g)?{documents:l4(u,g)}:{query:c4(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=g2(u,d.resumeToken);const y=Rp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(ot.min())>0){p.readTime=ud(u,d.snapshotVersion.toTimestamp());const y=Rp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=h4(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=Ip(this.serializer),n.removeTarget=e,this.K_(n)}}class eI extends C2{constructor(e,n,i,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=o4(e.writeResults,e.commitTime),i=Fr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Ip(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>a4(this.serializer,i)))};this.K_(n)}}class tI{}class nI extends tI{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,Cp(n,i),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ce.UNKNOWN,u.toString())}))}jo(e,n,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Cp(n,i),o,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Re(ce.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function sI(r,e,n,i){return new nI(r,e,n,i)}class rI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ei(n),this.aa=!1):Ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const uo="RemoteStore";class iI{constructor(e,n,i,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{i.enqueueAndForget((async()=>{go(this)&&(Ie(uo,"Restarting streams for network reachability change."),await(async function(g){const y=ct(g);y.Ea.add(4),await au(y),y.Va.set("Unknown"),y.Ea.delete(4),await jd(y)})(this))}))})),this.Va=new rI(i,o)}}async function jd(r){if(go(r))for(const e of r.Ra)await e(!0)}async function au(r){for(const e of r.Ra)await e(!1)}function N2(r,e){const n=ct(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Cg(n)?Rg(n):kl(n).O_()&&Ag(n,e))}function kg(r,e){const n=ct(r),i=kl(n);n.Ia.delete(e),i.O_()&&I2(n,e),n.Ia.size===0&&(i.O_()?i.L_():go(n)&&n.Va.set("Unknown"))}function Ag(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}kl(r).Z_(e)}function I2(r,e){r.da.$e(e),kl(r).X_(e)}function Rg(r){r.da=new JN({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),kl(r).start(),r.Va.ua()}function Cg(r){return go(r)&&!kl(r).x_()&&r.Ia.size>0}function go(r){return ct(r).Ea.size===0}function j2(r){r.da=void 0}async function aI(r){r.Va.set("Online")}async function oI(r){r.Ia.forEach(((e,n)=>{Ag(r,e)}))}async function lI(r,e){j2(r),Cg(r)?(r.Va.ha(e),Rg(r)):r.Va.set("Unknown")}async function cI(r,e,n){if(r.Va.set("Online"),e instanceof p2&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.da.removeTarget(p))})(r,e)}catch(i){Ie(uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await dd(r,i)}else if(e instanceof Gh?r.da.Xe(e):e instanceof m2?r.da.st(e):r.da.tt(e),!n.isEqual(ot.min()))try{const i=await A2(r.localStore);n.compareTo(i)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=u.Ia.get(y);w&&u.Ia.set(y,w.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const w=u.Ia.get(g);if(!w)return;u.Ia.set(g,w.withResumeToken(es.EMPTY_BYTE_STRING,w.snapshotVersion)),I2(u,g);const x=new ha(w.target,g,y,w.sequenceNumber);Ag(u,x)})),u.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(i){Ie(uo,"Failed to raise snapshot:",i),await dd(r,i)}}async function dd(r,e,n){if(!Tl(e))throw e;r.Ea.add(1),await au(r),r.Va.set("Offline"),n||(n=()=>A2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ie(uo,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await jd(r)}))}function D2(r,e){return e().catch((n=>dd(r,n,e)))}async function Dd(r){const e=ct(r),n=wa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;uI(e);)try{const o=await H4(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,hI(e,o)}catch(o){await dd(e,o)}M2(e)&&P2(e)}function uI(r){return go(r)&&r.Ta.length<10}function hI(r,e){r.Ta.push(e);const n=wa(r);n.O_()&&n.Y_&&n.ea(e.mutations)}function M2(r){return go(r)&&!wa(r).x_()&&r.Ta.length>0}function P2(r){wa(r).start()}async function dI(r){wa(r).ra()}async function fI(r){const e=wa(r);for(const n of r.Ta)e.ea(n.mutations)}async function mI(r,e,n){const i=r.Ta.shift(),o=bg.from(i,e,n);await D2(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Dd(r)}async function pI(r,e){e&&wa(r).Y_&&await(async function(i,o){if((function(d){return YN(d)&&d!==ce.ABORTED})(o.code)){const u=i.Ta.shift();wa(i).B_(),await D2(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Dd(i)}})(r,e),M2(r)&&P2(r)}async function F_(r,e){const n=ct(r);n.asyncQueue.verifyOperationInProgress(),Ie(uo,"RemoteStore received new credentials");const i=go(n);n.Ea.add(3),await au(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await jd(n)}async function gI(r,e){const n=ct(r);e?(n.Ea.delete(2),await jd(n)):e||(n.Ea.add(2),await au(n),n.Va.set("Unknown"))}function kl(r){return r.ma||(r.ma=(function(n,i,o){const u=ct(n);return u.sa(),new Z4(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Zo:aI.bind(null,r),Yo:oI.bind(null,r),t_:lI.bind(null,r),J_:cI.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Cg(r)?Rg(r):r.Va.set("Unknown")):(await r.ma.stop(),j2(r))}))),r.ma}function wa(r){return r.fa||(r.fa=(function(n,i,o){const u=ct(n);return u.sa(),new eI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:dI.bind(null,r),t_:pI.bind(null,r),ta:fI.bind(null,r),na:mI.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Dd(r)):(await r.fa.stop(),r.Ta.length>0&&(Ie(uo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Ng{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){const d=Date.now()+i,p=new Ng(e,n,d,o,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(r,e){if(Ei("AsyncQueue",`${e}: ${r}`),Tl(r))return new Re(ce.UNAVAILABLE,`${e}: ${r}`);throw r}class cl{static emptySet(e){return new cl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ye.comparator(n.key,i.key):(n,i)=>Ye.comparator(n.key,i.key),this.keyedMap=Ac(),this.sortedSet=new mn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new cl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class q_{constructor(){this.ga=new mn(Ye.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):nt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class yl{constructor(e,n,i,o,u,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new yl(e,n,cl.emptySet(n),d,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}class yI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class vI{constructor(){this.queries=H_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=ct(n),u=o.queries;o.queries=H_(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Re(ce.ABORTED,"Firestore shutting down"))}}function H_(){return new po((r=>t2(r)),kd)}async function O2(r,e){const n=ct(r);let i=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(i=2):(u=new yI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=Ig(d,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&jg(n)}async function L2(r,e){const n=ct(r),i=e.query;let o=3;const u=n.queries.get(i);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function bI(r,e){const n=ct(r);let i=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(o)&&(i=!0);d.wa=o}}i&&jg(n)}function _I(r,e,n){const i=ct(r),o=i.queries.get(e);if(o)for(const u of o.ba)u.onError(n);i.queries.delete(e)}function jg(r){r.Ca.forEach((e=>{e.next()}))}var Mp,G_;(G_=Mp||(Mp={})).Ma="default",G_.Cache="cache";class V2{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new yl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mp.Cache}}class U2{constructor(e){this.key=e}}class B2{constructor(e){this.key=e}}class wI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=kt(),this.mutatedKeys=kt(),this.eu=n2(e),this.tu=new cl(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new q_,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,x)=>{const T=o.get(w),O=Ad(this.query,x)?x:null,q=!!T&&this.mutatedKeys.has(T.key),G=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let z=!1;T&&O?T.data.isEqual(O.data)?q!==G&&(i.track({type:3,doc:O}),z=!0):this.su(T,O)||(i.track({type:2,doc:O}),z=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(p=!0)):!T&&O?(i.track({type:0,doc:O}),z=!0):T&&!O&&(i.track({type:1,doc:T}),z=!0,(g||y)&&(p=!0)),z&&(O?(d=d.add(O),u=G?u.add(w):u.delete(w)):(d=d.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),u=u.delete(w.key),i.track({type:1,doc:w})}return{tu:d,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,x)=>(function(O,q){const G=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt(20277,{Vt:z})}};return G(O)-G(q)})(w.type,x.type)||this.eu(w.doc,x.doc))),this.ou(i),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new yl(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new q_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=kt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new B2(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new U2(i))})),n}cu(e){this.Za=e.ks,this.Ya=kt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Dg="SyncEngine";class xI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class EI{constructor(e){this.key=e,this.hu=!1}}class TI{constructor(e,n,i,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new po((p=>t2(p)),kd),this.Iu=new Map,this.Eu=new Set,this.Ru=new mn(Ye.comparator),this.Au=new Map,this.Vu=new xg,this.du={},this.mu=new Map,this.fu=gl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SI(r,e,n=!0){const i=W2(r);let o;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await z2(i,e,n,!0),o}async function kI(r,e){const n=W2(r);await z2(n,e,!0,!1)}async function z2(r,e,n,i){const o=await G4(r.localStore,zr(e)),u=o.targetId,d=r.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await AI(r,e,u,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&N2(r.remoteStore,o),p}async function AI(r,e,n,i,o){r.pu=(x,T,O)=>(async function(G,z,ie,ee){let he=z.view.ru(ie);he.Ss&&(he=await L_(G.localStore,z.query,!1).then((({documents:N})=>z.view.ru(N,he))));const _e=ee&&ee.targetChanges.get(z.targetId),je=ee&&ee.targetMismatches.get(z.targetId)!=null,Ne=z.view.applyChanges(he,G.isPrimaryClient,_e,je);return $_(G,z.targetId,Ne.au),Ne.snapshot})(r,x,T,O);const u=await L_(r.localStore,e,!0),d=new wI(e,u.ks),p=d.ru(u.documents),g=iu.createSynthesizedTargetChangeForCurrentChange(n,i&&r.onlineState!=="Offline",o),y=d.applyChanges(p,r.isPrimaryClient,g);$_(r,n,y.au);const w=new xI(e,n,d);return r.Tu.set(e,w),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function RI(r,e,n){const i=ct(r),o=i.Tu.get(e),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((d=>!kd(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await jp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&kg(i.remoteStore,o.targetId),Pp(i,o.targetId)})).catch(El)):(Pp(i,o.targetId),await jp(i.localStore,o.targetId,!0))}async function CI(r,e){const n=ct(r),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),kg(n.remoteStore,i.targetId))}async function NI(r,e,n){const i=LI(r);try{const o=await(function(d,p){const g=ct(d),y=ht.now(),w=p.reduce(((O,q)=>O.add(q.key)),kt());let x,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let q=Ti(),G=kt();return g.xs.getEntries(O,w).next((z=>{q=z,q.forEach(((ie,ee)=>{ee.isValidDocument()||(G=G.add(ie))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,q))).next((z=>{x=z;const ie=[];for(const ee of p){const he=HN(ee,x.get(ee.key).overlayedDocument);he!=null&&ie.push(new ka(ee.key,he,$w(he.value.mapValue),tr.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,ie,p)})).next((z=>{T=z;const ie=z.applyToLocalDocumentSet(x,G);return g.documentOverlayCache.saveOverlays(O,z.batchId,ie)}))})).then((()=>({batchId:T.batchId,changes:r2(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new mn(St)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(i,o.batchId,n),await ou(i,o.changes),await Dd(i.remoteStore)}catch(o){const u=Ig(o,"Failed to persist write");n.reject(u)}}async function F2(r,e){const n=ct(r);try{const i=await F4(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(qt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?qt(d.hu,14607):o.removedDocuments.size>0&&(qt(d.hu,42227),d.hu=!1))})),await ou(n,i,e)}catch(i){await El(i)}}function W_(r,e,n){const i=ct(r);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=ct(d);g.onlineState=p;let y=!1;g.queries.forEach(((w,x)=>{for(const T of x.ba)T.va(p)&&(y=!0)})),y&&jg(g)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function II(r,e,n){const i=ct(r);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),u=o&&o.key;if(u){let d=new mn(Ye.comparator);d=d.insert(u,ls.newNoDocument(u,ot.min()));const p=kt().add(u),g=new Nd(ot.min(),new Map,new mn(St),d,p);await F2(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),Mg(i)}else await jp(i.localStore,e,!1).then((()=>Pp(i,e,n))).catch(El)}async function jI(r,e){const n=ct(r),i=e.batch.batchId;try{const o=await z4(n.localStore,e);H2(n,i,null),q2(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ou(n,o)}catch(o){await El(o)}}async function DI(r,e,n){const i=ct(r);try{const o=await(function(d,p){const g=ct(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next((x=>(qt(x!==null,37113),w=x.keys(),g.mutationQueue.removeMutationBatch(y,x)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(i.localStore,e);H2(i,e,n),q2(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await ou(i,o)}catch(o){await El(o)}}function q2(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function H2(r,e,n){const i=ct(r);let o=i.du[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function Pp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),n&&r.Pu.yu(i,n);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||G2(r,i)}))}function G2(r,e){r.Eu.delete(e.path.canonicalString());const n=r.Ru.get(e);n!==null&&(kg(r.remoteStore,n),r.Ru=r.Ru.remove(e),r.Au.delete(n),Mg(r))}function $_(r,e,n){for(const i of n)i instanceof U2?(r.Vu.addReference(i.key,e),MI(r,i)):i instanceof B2?(Ie(Dg,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||G2(r,i.key)):nt(19791,{wu:i})}function MI(r,e){const n=e.key,i=n.path.canonicalString();r.Ru.get(n)||r.Eu.has(i)||(Ie(Dg,"New document in limbo: "+n),r.Eu.add(i),Mg(r))}function Mg(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Ye(Zt.fromString(e)),i=r.fu.next();r.Au.set(i,new EI(n)),r.Ru=r.Ru.insert(n,i),N2(r.remoteStore,new ha(zr(gg(n.path)),i,"TargetPurposeLimboResolution",Ed.ce))}}async function ou(r,e,n){const i=ct(r),o=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{d.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const w=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Tg.Es(g.targetId,y);u.push(w)}})))})),await Promise.all(d),i.Pu.J_(o),await(async function(g,y){const w=ct(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>fe.forEach(y,(T=>fe.forEach(T.Ts,(O=>w.persistence.referenceDelegate.addReference(x,T.targetId,O))).next((()=>fe.forEach(T.Is,(O=>w.persistence.referenceDelegate.removeReference(x,T.targetId,O)))))))))}catch(x){if(!Tl(x))throw x;Ie(Sg,"Failed to update sequence numbers: "+x)}for(const x of y){const T=x.targetId;if(!x.fromCache){const O=w.vs.get(T),q=O.snapshotVersion,G=O.withLastLimboFreeSnapshotVersion(q);w.vs=w.vs.insert(T,G)}}})(i.localStore,u))}async function PI(r,e){const n=ct(r);if(!n.currentUser.isEqual(e)){Ie(Dg,"User change. New user:",e.toKey());const i=await k2(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Re(ce.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ou(n,i.Ns)}}function OI(r,e){const n=ct(r),i=n.Au.get(e);if(i&&i.hu)return kt().add(i.key);{let o=kt();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function W2(r){const e=ct(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=F2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=II.bind(null,e),e.Pu.J_=bI.bind(null,e.eventManager),e.Pu.yu=_I.bind(null,e.eventManager),e}function LI(r){const e=ct(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DI.bind(null,e),e}class fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Id(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return B4(this.persistence,new L4,e.initialUser,this.serializer)}Cu(e){return new S2(Eg.Vi,this.serializer)}Du(e){return new $4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fd.provider={build:()=>new fd};class VI extends fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qt(this.persistence.referenceDelegate instanceof hd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new x4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ks.withCacheSize(this.cacheSizeBytes):ks.DEFAULT;return new S2((i=>hd.Vi(i,n)),this.serializer)}}class Op{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>W_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PI.bind(null,this.syncEngine),await gI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vI})()}createDatastore(e){const n=Id(e.databaseInfo.databaseId),i=J4(e.databaseInfo);return sI(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,u,d,p){return new iI(i,o,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>W_(this.syncEngine,n,0)),(function(){return B_.v()?new B_:new K4})())}createSyncEngine(e,n){return(function(o,u,d,p,g,y,w){const x=new TI(o,u,d,p,g,y);return w&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=ct(n);Ie(uo,"RemoteStore shutting down."),i.Ea.add(5),await au(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Op.provider={build:()=>new Op};class $2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const xa="FirestoreClient";class UI{constructor(e,n,i,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=o,this.user=os.UNAUTHENTICATED,this.clientId=ug.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{Ie(xa,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(Ie(xa,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ig(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Zm(r,e){r.asyncQueue.verifyOperationInProgress(),Ie(xa,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let i=n.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await k2(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function K_(r,e){r.asyncQueue.verifyOperationInProgress();const n=await BI(r);Ie(xa,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((i=>F_(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>F_(e.remoteStore,o))),r._onlineComponents=e}async function BI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ie(xa,"Using user provided OfflineComponentProvider");try{await Zm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ce.FAILED_PRECONDITION||o.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;dl("Error using user provided cache. Falling back to memory cache: "+n),await Zm(r,new fd)}}else Ie(xa,"Using default OfflineComponentProvider"),await Zm(r,new VI(void 0));return r._offlineComponents}async function K2(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ie(xa,"Using user provided OnlineComponentProvider"),await K_(r,r._uninitializedComponentsProvider._online)):(Ie(xa,"Using default OnlineComponentProvider"),await K_(r,new Op))),r._onlineComponents}function zI(r){return K2(r).then((e=>e.syncEngine))}async function Y2(r){const e=await K2(r),n=e.eventManager;return n.onListen=SI.bind(null,e.syncEngine),n.onUnlisten=RI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CI.bind(null,e.syncEngine),n}function FI(r,e,n={}){const i=new bi;return r.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const w=new $2({next:T=>{w.Nu(),d.enqueueAndForget((()=>L2(u,x)));const O=T.docs.has(p);!O&&T.fromCache?y.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&T.fromCache&&g&&g.source==="server"?y.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new V2(gg(p.path),w,{includeMetadataChanges:!0,Ka:!0});return O2(u,x)})(await Y2(r),r.asyncQueue,e,n,i))),i.promise}function qI(r,e,n={}){const i=new bi;return r.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const w=new $2({next:T=>{w.Nu(),d.enqueueAndForget((()=>L2(u,x))),T.fromCache&&g.source==="server"?y.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new V2(p,w,{includeMetadataChanges:!0,Ka:!0});return O2(u,x)})(await Y2(r),r.asyncQueue,e,n,i))),i.promise}function HI(r,e){const n=new bi;return r.asyncQueue.enqueueAndForget((async()=>NI(await zI(r),e,n))),n.promise}function Q2(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const GI="ComponentProvider",Y_=new Map;function WI(r,e,n,i,o){return new dN(r,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,Q2(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}const X2="firestore.googleapis.com",Q_=!0;class X_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X2,this.ssl=Q_}else this.host=e.host,this.ssl=e.ssl??Q_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_4)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q2(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Md{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new GC;switch(i.type){case"firstParty":return new YC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Y_.get(n);i&&(Ie(GI,"Removing Datastore"),Y_.delete(n),i.terminate())})(this),Promise.resolve()}}function $I(r,e,n,i={}){r=br(r,Md);const o=Ea(e),u=r._getSettings(),d={...u,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;o&&(Kp(`https://${p}`),Yp("Firestore",!0)),u.host!==X2&&u.host!==p&&dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:i};if(!io(g,d)&&(r._setSettings(g),i.mockUserToken)){let y,w;if(typeof i.mockUserToken=="string")y=i.mockUserToken,w=os.MOCK_USER;else{y=F1(i.mockUserToken,r._app?.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new os(x)}r._authCredentials=new WC(new Pw(y,w))}}class yo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yo(this.firestore,e,this._query)}}class An{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}toJSON(){return{type:An._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(su(n,An._jsonSchema))return new An(e,i||null,new Ye(Zt.fromString(n.referencePath)))}}An._jsonSchemaVersion="firestore/documentReference/1.0",An._jsonSchema={type:Pn("string",An._jsonSchemaVersion),referencePath:Pn("string")};class pa extends yo{constructor(e,n,i){super(e,n,gg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new Ye(e))}withConverter(e){return new pa(this.firestore,e,this._path)}}function Or(r,e,...n){if(r=fn(r),Ow("collection","path",e),r instanceof Md){const i=Zt.fromString(e,...n);return u_(i),new pa(r,null,i)}{if(!(r instanceof An||r instanceof pa))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Zt.fromString(e,...n));return u_(i),new pa(r.firestore,null,i)}}function Ft(r,e,...n){if(r=fn(r),arguments.length===1&&(e=ug.newId()),Ow("doc","path",e),r instanceof Md){const i=Zt.fromString(e,...n);return c_(i),new An(r,null,new Ye(i))}{if(!(r instanceof An||r instanceof pa))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Zt.fromString(e,...n));return c_(i),new An(r.firestore,r instanceof pa?r.converter:null,new Ye(i))}}const J_="AsyncQueue";class Z_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R2(this,"async_queue_retry"),this._c=()=>{const i=Jm();i&&Ie(J_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Jm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new bi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Tl(e))throw e;Ie(J_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ei("INTERNAL UNHANDLED ERROR: ",e1(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Ng.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&nt(47125,{Pc:e1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function e1(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class vo extends Md{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new Z_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z_(e),this._firestoreClient=void 0,await e}}}function KI(r,e){const n=typeof r=="object"?r:Zp(),i=typeof r=="string"?r:id,o=vd(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=U1("firestore");u&&$I(o,...u)}return o}function Pg(r){if(r._terminated)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||YI(r),r._firestoreClient}function YI(r){const e=r._freezeSettings(),n=WI(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new UI(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new er(es.fromBase64String(e))}catch(n){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new er(es.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(su(e,er._jsonSchema))return er.fromBase64String(e.bytes)}}er._jsonSchemaVersion="firestore/bytes/1.0",er._jsonSchema={type:Pn("string",er._jsonSchemaVersion),bytes:Pn("string")};class Og{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lg{constructor(e){this._methodName=e}}class qr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qr._jsonSchemaVersion}}static fromJSON(e){if(su(e,qr._jsonSchema))return new qr(e.latitude,e.longitude)}}qr._jsonSchemaVersion="firestore/geoPoint/1.0",qr._jsonSchema={type:Pn("string",qr._jsonSchemaVersion),latitude:Pn("number"),longitude:Pn("number")};class yr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(su(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new yr(e.vectorValues);throw new Re(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:Pn("string",yr._jsonSchemaVersion),vectorValues:Pn("object")};const QI=/^__.*__$/;class XI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ka(e,this.data,this.fieldMask,n,this.fieldTransforms):new ru(e,this.data,n,this.fieldTransforms)}}class J2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ka(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Z2(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt(40011,{dataSource:r})}}class Vg{constructor(e,n,i,o,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return md(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Z2(this.dataSource)&&QI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class JI{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Id(e)}createContext(e,n,i,o=!1){return new Vg({dataSource:e,methodName:n,targetDoc:i,path:Zn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pd(r){const e=r._freezeSettings(),n=Id(r._databaseId);return new JI(r._databaseId,!!e.ignoreUndefinedProperties,n)}function ex(r,e,n,i,o,u={}){const d=r.createContext(u.merge||u.mergeFields?2:0,e,n,o);Ug("Data must be an object, but it was:",d,i);const p=tx(i,d);let g,y;if(u.merge)g=new Vs(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const w=[];for(const x of u.mergeFields){const T=ho(e,x,n);if(!d.contains(T))throw new Re(ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);rx(w,T)||w.push(T)}g=new Vs(w),y=d.fieldTransforms.filter((x=>g.covers(x.field)))}else g=null,y=d.fieldTransforms;return new XI(new As(p),g,y)}class Od extends Lg{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Od}}function ZI(r,e,n,i){const o=r.createContext(1,e,n);Ug("Data must be an object, but it was:",o,i);const u=[],d=As.empty();Sa(i,((g,y)=>{const w=sx(e,g,n);y=fn(y);const x=o.childContextForFieldPath(w);if(y instanceof Od)u.push(w);else{const T=lu(y,x);T!=null&&(u.push(w),d.set(w,T))}}));const p=new Vs(u);return new J2(d,p,o.fieldTransforms)}function ej(r,e,n,i,o,u){const d=r.createContext(1,e,n),p=[ho(e,i,n)],g=[o];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)p.push(ho(e,u[T])),g.push(u[T+1]);const y=[],w=As.empty();for(let T=p.length-1;T>=0;--T)if(!rx(y,p[T])){const O=p[T];let q=g[T];q=fn(q);const G=d.childContextForFieldPath(O);if(q instanceof Od)y.push(O);else{const z=lu(q,G);z!=null&&(y.push(O),w.set(O,z))}}const x=new Vs(y);return new J2(w,x,d.fieldTransforms)}function tj(r,e,n,i=!1){return lu(n,r.createContext(i?4:3,e))}function lu(r,e){if(nx(r=fn(r)))return Ug("Unsupported field value:",e,r),tx(r,e);if(r instanceof Lg)return(function(i,o){if(!Z2(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const u=[];let d=0;for(const p of i){let g=lu(p,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(r,e)}return(function(i,o){if((i=fn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return VN(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=ht.fromDate(i);return{timestampValue:ud(o.serializer,u)}}if(i instanceof ht){const u=new ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ud(o.serializer,u)}}if(i instanceof qr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof er)return{bytesValue:g2(o.serializer,i._byteString)};if(i instanceof An){const u=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:wg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof yr)return(function(d,p){const g=d instanceof yr?d.toArray():d;return{mapValue:{fields:{[Gw]:{stringValue:Ww},[ad]:{arrayValue:{values:g.map((w=>{if(typeof w!="number")throw p.createError("VectorValues must only contain numeric values.");return yg(p.serializer,w)}))}}}}}})(i,o);if(E2(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${xd(i)}`)})(r,e)}function tx(r,e){const n={};return Uw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(r,((i,o)=>{const u=lu(o,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function nx(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ht||r instanceof qr||r instanceof er||r instanceof An||r instanceof Lg||r instanceof yr||E2(r))}function Ug(r,e,n){if(!nx(n)||!Lw(n)){const i=xd(n);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function ho(r,e,n){if((e=fn(e))instanceof Og)return e._internalPath;if(typeof e=="string")return sx(r,e);throw md("Field path arguments must be of type string or ",r,!1,void 0,n)}const nj=new RegExp("[~\\*/\\[\\]]");function sx(r,e,n){if(e.search(nj)>=0)throw md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Og(...e.split("."))._internalPath}catch{throw md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function md(r,e,n,i,o){const u=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new Re(ce.INVALID_ARGUMENT,p+r+g)}function rx(r,e){return r.some((n=>n.isEqual(e)))}class sj{convertValue(e,n="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw nt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Sa(e,((o,u)=>{i[o]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[ad].arrayValue?.values?.map((i=>kn(i.doubleValue)));return new yr(n)}convertGeoPoint(e){return new qr(kn(e.latitude),kn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Sd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){const n=va(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Zt.fromString(e);qt(x2(i),9688,{name:e});const o=new Hc(i.get(1),i.get(3)),u=new Ye(i.popFirst(5));return o.isEqual(n)||Ei(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class ix extends sj{constructor(e){super(),this.firestore=e}convertBytes(e){return new er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,n)}}const t1="@firebase/firestore",n1="4.10.0";class ax{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(ho("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rj extends ax{data(){return super.data()}}function ij(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bg{}class ox extends Bg{}function ul(r,e,...n){let i=[];e instanceof Bg&&i.push(e),i=i.concat(n),(function(u){const d=u.filter((g=>g instanceof zg)).length,p=u.filter((g=>g instanceof Ld)).length;if(d>1||d>0&&p>0)throw new Re(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Ld extends ox{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ld(e,n,i)}_apply(e){const n=this._parse(e);return lx(e._query,n),new yo(e.firestore,e.converter,kp(e._query,n))}_parse(e){const n=Pd(e.firestore);return(function(u,d,p,g,y,w,x){let T;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){r1(x,w);const q=[];for(const G of x)q.push(s1(g,u,G));T={arrayValue:{values:q}}}else T=s1(g,u,x)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||r1(x,w),T=tj(p,d,x,w==="in"||w==="not-in");return Mn.create(y,w,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function eo(r,e,n){const i=e,o=ho("where",r);return Ld._create(o,i,n)}class zg extends Bg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:_r.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const p=u.getFlattenedFilters();for(const g of p)lx(d,g),d=kp(d,g)})(e._query,n),new yo(e.firestore,e.converter,kp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fg extends ox{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fg(e,n)}_apply(e){const n=(function(o,u,d){if(o.startAt!==null)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wc(u,d)})(e._query,this._field,this._direction);return new yo(e.firestore,e.converter,NN(e._query,n))}}function y3(r,e="asc"){const n=e,i=ho("orderBy",r);return Fg._create(i,n)}function s1(r,e,n){if(typeof(n=fn(n))=="string"){if(n==="")throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!e2(e)&&n.indexOf("/")!==-1)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Zt.fromString(n));if(!Ye.isDocumentKey(i))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return v_(r,new Ye(i))}if(n instanceof An)return v_(r,n._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xd(n)}.`)}function r1(r,e){if(!Array.isArray(r)||r.length===0)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lx(r,e){const n=(function(o,u){for(const d of o)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Re(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function cx(r,e,n){let i;return i=r?r.toFirestore(e):e,i}class Cc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class so extends ax{constructor(e,n,i,o,u,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ho("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=so._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}so._jsonSchemaVersion="firestore/documentSnapshot/1.0",so._jsonSchema={type:Pn("string",so._jsonSchemaVersion),bundleSource:Pn("string","DocumentSnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class Wh extends so{data(e={}){return super.data(e)}}class hl{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Cc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Wh(this._firestore,this._userDataWriter,i.key,i,new Cc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new Wh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Cc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new Wh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Cc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),w=d.indexOf(p.doc.key)),{type:aj(p.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ug.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt(61501,{type:r})}}hl._jsonSchemaVersion="firestore/querySnapshot/1.0",hl._jsonSchema={type:Pn("string",hl._jsonSchemaVersion),bundleSource:Pn("string","QuerySnapshot"),bundleName:Pn("string"),bundle:Pn("string")};function zn(r){r=br(r,An);const e=br(r.firestore,vo),n=Pg(e);return FI(n,r._key).then((i=>lj(e,r,i)))}function to(r){r=br(r,yo);const e=br(r.firestore,vo),n=Pg(e),i=new ix(e);return ij(r._query),qI(n,r._query).then((o=>new hl(e,i,r,o)))}function Lr(r,e,n){r=br(r,An);const i=br(r.firestore,vo),o=cx(r.converter,e),u=Pd(i);return Vd(i,[ex(u,"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,tr.none())])}function v3(r,e,n,...i){r=br(r,An);const o=br(r.firestore,vo),u=Pd(o);let d;return d=typeof(e=fn(e))=="string"||e instanceof Og?ej(u,"updateDoc",r._key,e,n,i):ZI(u,"updateDoc",r._key,e),Vd(o,[d.toMutation(r._key,tr.exists(!0))])}function oj(r){return Vd(br(r.firestore,vo),[new vg(r._key,tr.none())])}function Lp(r,e){const n=br(r.firestore,vo),i=Ft(r),o=cx(r.converter,e),u=Pd(r.firestore);return Vd(n,[ex(u,"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,tr.exists(!1))]).then((()=>i))}function Vd(r,e){const n=Pg(r);return HI(n,e)}function lj(r,e,n){const i=n.docs.get(e._key),o=new ix(r);return new so(r,o,e._key,i,new Cc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){HC(mo),ao(new ga("firestore",((i,{instanceIdentifier:o,options:u})=>{const d=i.getProvider("app").getImmediate(),p=new vo(new $C(i.getProvider("auth-internal")),new QC(d,i.getProvider("app-check-internal")),fN(d,o),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Vr(t1,n1,e),Vr(t1,n1,"esm2020")})();var cj="firebase",uj="12.8.0";Vr(cj,uj,"app");const ux="firebasestorage.googleapis.com",hx="storageBucket",hj=120*1e3,dj=600*1e3;class qn extends Wr{constructor(e,n,i=0){super(ep(e),`Firebase Storage: ${n} (${ep(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ep(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fn;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fn||(Fn={}));function ep(r){return"storage/"+r}function dx(){const r="An unknown error occurred, please check the error payload for server response.";return new qn(Fn.UNKNOWN,r)}function fj(r){return new qn(Fn.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function mj(r){return new qn(Fn.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pj(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qn(Fn.UNAUTHENTICATED,r)}function gj(){return new qn(Fn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yj(r){return new qn(Fn.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function vj(){return new qn(Fn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bj(){return new qn(Fn.CANCELED,"User canceled the upload/download.")}function _j(r){return new qn(Fn.INVALID_URL,"Invalid URL '"+r+"'.")}function wj(r){return new qn(Fn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function xj(){return new qn(Fn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hx+"' property when initializing the app?")}function Ej(){return new qn(Fn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Vp(r){return new qn(Fn.INVALID_ARGUMENT,r)}function fx(){return new qn(Fn.APP_DELETED,"The Firebase app was deleted.")}function Tj(r){return new qn(Fn.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wc(r){throw new qn(Fn.INTERNAL_ERROR,"Internal error: "+r)}class vs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=vs.makeFromUrl(e,n)}catch{return new vs(e,"")}if(i.path==="")return i;throw wj(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function u(_e){_e.path.charAt(_e.path.length-1)==="/"&&(_e.path_=_e.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(_e){_e.path_=decodeURIComponent(_e.path)}const w="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",O=new RegExp(`^https?://${x}/${w}/b/${o}/o${T}`,"i"),q={bucket:1,path:3},G=n===ux?"(?:storage.googleapis.com|storage.cloud.google.com)":n,z="([^?#]*)",ie=new RegExp(`^https?://${G}/${o}/${z}`,"i"),he=[{regex:p,indices:g,postModify:u},{regex:O,indices:q,postModify:y},{regex:ie,indices:{bucket:1,path:2},postModify:y}];for(let _e=0;_e<he.length;_e++){const je=he[_e],Ne=je.regex.exec(e);if(Ne){const N=Ne[je.indices.bucket];let S=Ne[je.indices.path];S||(S=""),i=new vs(N,S),je.postModify(i);break}}if(i==null)throw _j(e);return i}}class Sj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function kj(r,e,n){let i=1,o=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function w(...z){y||(y=!0,e.apply(null,z))}function x(z){o=setTimeout(()=>{o=null,r(O,g())},z)}function T(){u&&clearTimeout(u)}function O(z,...ie){if(y){T();return}if(z){T(),w.call(null,z,...ie);return}if(g()||d){T(),w.call(null,z,...ie);return}i<64&&(i*=2);let he;p===1?(p=2,he=0):he=(i+Math.random())*1e3,x(he)}let q=!1;function G(z){q||(q=!0,T(),!y&&(o!==null?(z||(p=2),clearTimeout(o),x(0)):z||(p=1)))}return x(0),u=setTimeout(()=>{d=!0,G(!0)},n),G}function Aj(r){r(!1)}function Rj(r){return r!==void 0}function Cj(r){return typeof r=="object"&&!Array.isArray(r)}function mx(r){return typeof r=="string"||r instanceof String}function Up(r,e,n,i){if(i<e)throw Vp(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>n)throw Vp(`Invalid value for '${r}'. Expected ${n} or less.`)}function qg(r,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${r}`}function px(r){const e=encodeURIComponent;let n="?";for(const i in r)if(r.hasOwnProperty(i)){const o=e(i)+"="+e(r[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var ro;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(ro||(ro={}));function Nj(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return n||o||u}class Ij{constructor(e,n,i,o,u,d,p,g,y,w,x,T=!0,O=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=x,this.retry=T,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,G)=>{this.resolve_=q,this.reject_=G,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Ih(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===ro.NO_ERROR,g=u.getStatus();if(!p||Nj(g,this.additionalRetryCodes_)&&this.retry){const w=u.getErrorCode()===ro.ABORT;i(!1,new Ih(!1,null,w));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new Ih(y,u))})},n=(i,o)=>{const u=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());Rj(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=dx();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?fx():bj();d(g)}else{const g=vj();d(g)}};this.canceled_?n(!1,new Ih(!1,null,!0)):this.backoffId_=kj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Aj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ih{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function jj(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function Dj(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Mj(r,e){e&&(r["X-Firebase-GMPID"]=e)}function Pj(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function Oj(r,e,n,i,o,u,d=!0,p=!1){const g=px(r.urlParams),y=r.url+g,w=Object.assign({},r.headers);return Mj(w,e),jj(w,n),Dj(w,u),Pj(w,i),new Ij(y,r.method,w,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d,p)}function Hg(r){let e;try{e=JSON.parse(r)}catch{return null}return Cj(e)?e:null}function Lj(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Vj(r,e){const n=e.split("/").filter(i=>i.length>0).join("/");return r.length===0?n:r+"/"+n}function gx(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}function Uj(r,e){return e}class ys{constructor(e,n,i,o){this.server=e,this.local=n||e,this.writable=!!i,this.xform=o||Uj}}let jh=null;function Bj(r){return!mx(r)||r.length<2?r:gx(r)}function zj(){if(jh)return jh;const r=[];r.push(new ys("bucket")),r.push(new ys("generation")),r.push(new ys("metageneration")),r.push(new ys("name","fullPath",!0));function e(u,d){return Bj(d)}const n=new ys("name");n.xform=e,r.push(n);function i(u,d){return d!==void 0?Number(d):d}const o=new ys("size");return o.xform=i,r.push(o),r.push(new ys("timeCreated")),r.push(new ys("updated")),r.push(new ys("md5Hash",null,!0)),r.push(new ys("cacheControl",null,!0)),r.push(new ys("contentDisposition",null,!0)),r.push(new ys("contentEncoding",null,!0)),r.push(new ys("contentLanguage",null,!0)),r.push(new ys("contentType",null,!0)),r.push(new ys("metadata","customMetadata",!0)),jh=r,jh}function Fj(r,e){function n(){const i=r.bucket,o=r.fullPath,u=new vs(i,o);return e._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:n})}function qj(r,e,n){const i={};i.type="file";const o=n.length;for(let u=0;u<o;u++){const d=n[u];i[d.local]=d.xform(i,e[d.server])}return Fj(i,r),i}function Hj(r,e,n){const i=Hg(e);return i===null?null:qj(r,i,n)}function Gj(r,e,n,i){const o=Hg(e);if(o===null||!mx(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const w=r.bucket,x=r.fullPath,T="/b/"+d(w)+"/o/"+d(x),O=qg(T,n,i),q=px({alt:"media",token:y});return O+q})[0]}const i1="prefixes",a1="items";function Wj(r,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[i1])for(const o of n[i1]){const u=o.replace(/\/$/,""),d=r._makeStorageReference(new vs(e,u));i.prefixes.push(d)}if(n[a1])for(const o of n[a1]){const u=r._makeStorageReference(new vs(e,o.name));i.items.push(u)}return i}function $j(r,e,n){const i=Hg(n);return i===null?null:Wj(r,e,i)}class yx{constructor(e,n,i,o){this.url=e,this.method=n,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function vx(r){if(!r)throw dx()}function Kj(r,e){function n(i,o){const u=$j(r,e,o);return vx(u!==null),u}return n}function Yj(r,e){function n(i,o){const u=Hj(r,o,e);return vx(u!==null),Gj(u,o,r.host,r._protocol)}return n}function bx(r){function e(n,i){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=gj():o=pj():n.getStatus()===402?o=mj(r.bucket):n.getStatus()===403?o=yj(r.path):o=i,o.status=n.getStatus(),o.serverResponse=i.serverResponse,o}return e}function Qj(r){const e=bx(r);function n(i,o){let u=e(i,o);return i.getStatus()===404&&(u=fj(r.path)),u.serverResponse=o.serverResponse,u}return n}function Xj(r,e,n,i,o){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),i&&(u.pageToken=i),o&&(u.maxResults=o);const d=e.bucketOnlyServerUrl(),p=qg(d,r.host,r._protocol),g="GET",y=r.maxOperationRetryTime,w=new yx(p,g,Kj(r,e.bucket),y);return w.urlParams=u,w.errorHandler=bx(e),w}function Jj(r,e,n){const i=e.fullServerUrl(),o=qg(i,r.host,r._protocol),u="GET",d=r.maxOperationRetryTime,p=new yx(o,u,Yj(r,n),d);return p.errorHandler=Qj(e),p}class Zj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ro.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ro.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ro.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,o,u){if(this.sent_)throw wc("cannot .send() more than once");if(Ea(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class eD extends Zj{initXhr(){this.xhr_.responseType="text"}}function _x(){return new eD}class fo{constructor(e,n){this._service=e,n instanceof vs?this._location=n:this._location=vs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fo(e,n)}get root(){const e=new vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gx(this._location.path)}get storage(){return this._service}get parent(){const e=Lj(this._location.path);if(e===null)return null;const n=new vs(this._location.bucket,e);return new fo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Tj(e)}}function tD(r){const e={prefixes:[],items:[]};return wx(r,e).then(()=>e)}async function wx(r,e,n){const o=await nD(r,{pageToken:n});e.prefixes.push(...o.prefixes),e.items.push(...o.items),o.nextPageToken!=null&&await wx(r,e,o.nextPageToken)}function nD(r,e){e!=null&&typeof e.maxResults=="number"&&Up("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=Xj(r.storage,r._location,"/",n.pageToken,n.maxResults);return r.storage.makeRequestWithTokens(i,_x)}function sD(r){r._throwIfRoot("getDownloadURL");const e=Jj(r.storage,r._location,zj());return r.storage.makeRequestWithTokens(e,_x).then(n=>{if(n===null)throw Ej();return n})}function rD(r,e){const n=Vj(r._location.path,e),i=new vs(r._location.bucket,n);return new fo(r.storage,i)}function iD(r){return/^[A-Za-z]+:\/\//.test(r)}function aD(r,e){return new fo(r,e)}function xx(r,e){if(r instanceof Gg){const n=r;if(n._bucket==null)throw xj();const i=new fo(n,n._bucket);return e!=null?xx(i,e):i}else return e!==void 0?rD(r,e):r}function oD(r,e){if(e&&iD(e)){if(r instanceof Gg)return aD(r,e);throw Vp("To use ref(service, url), the first argument must be a Storage instance.")}else return xx(r,e)}function o1(r,e){const n=e?.[hx];return n==null?null:vs.makeFromBucketSpec(n,r)}function lD(r,e,n,i={}){r.host=`${e}:${n}`;const o=Ea(e);o&&(Kp(`https://${r.host}/b`),Yp("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:u}=i;u&&(r._overrideAuthToken=typeof u=="string"?u:F1(u,r.app.options.projectId))}class Gg{constructor(e,n,i,o,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=ux,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hj,this._maxUploadRetryTime=dj,this._requests=new Set,o!=null?this._bucket=vs.makeFromBucketSpec(o,this._host):this._bucket=o1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vs.makeFromBucketSpec(this._url,e):this._bucket=o1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Up("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Up("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ls(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fo(this,e)}_makeRequest(e,n,i,o,u=!0){if(this._deleted)return new Sj(fx());{const d=Oj(e,this._appId,i,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const l1="@firebase/storage",c1="0.14.0";const Ex="storage";function u1(r){return r=fn(r),tD(r)}function $h(r){return r=fn(r),sD(r)}function Nc(r,e){return r=fn(r),oD(r,e)}function cD(r=Zp(),e){r=fn(r);const i=vd(r,Ex).getImmediate({identifier:e}),o=U1("storage");return o&&uD(i,...o),i}function uD(r,e,n,i={}){lD(r,e,n,i)}function hD(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new Gg(n,i,o,e,mo)}function dD(){ao(new ga(Ex,hD,"PUBLIC").setMultipleInstances(!0)),Vr(l1,c1,""),Vr(l1,c1,"esm2020")}dD();const Tx={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},Wg=Jp(Tx),xc=Aw(Wg),gt=KI(Wg),Ic=cD(Wg),fD=Jp(Tx,"secondary"),b3=Aw(fD),mD="EYdciKDOi3UYBLk1u8hHams5tmO2",Sx=k.createContext();function Aa(){return k.useContext(Sx)}function pD({children:r}){const[e,n]=k.useState(null),[i,o]=k.useState(!1),[u,d]=k.useState(!1),[p,g]=k.useState(null),[y,w]=k.useState(!0);k.useEffect(()=>jR(xc,async ie=>{if(n(ie),ie)if(ie.uid===mD)o(!0),d(!1),g(null);else{o(!1);try{const ee=ul(Or(gt,"clients"),eo("uid","==",ie.uid)),he=await to(ee);if(he.empty)d(!1),g(null);else{const _e=he.docs[0];d(!0),g({id:_e.id,..._e.data()})}}catch(ee){console.error("Error fetching client data:",ee),d(!1),g(null)}}else o(!1),d(!1),g(null);w(!1)}),[]);const G={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:z=>{g(ie=>ie&&{...ie,...z})},login:async(z,ie,ee=!0)=>(await CR(xc,ee?bw:ag),await RR(xc,z,ie)),logout:()=>DR(xc),resetPassword:z=>AR(xc,z),loading:y};return c.jsx(Sx.Provider,{value:G,children:r})}const kx=k.createContext();function Al(){return k.useContext(kx)}function gD({children:r}){const[e,n]=k.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,o]=k.useState(()=>localStorage.getItem("accent")||"red");k.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),k.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>o(g)};return c.jsx(kx.Provider,{value:p,children:r})}function yD(){const[r,e]=k.useState(""),[n,i]=k.useState(""),[o,u]=k.useState(!0),[d,p]=k.useState(""),[g,y]=k.useState(!1),[w,x]=k.useState(!1),[T,O]=k.useState(!1),{login:q,resetPassword:G,currentUser:z,isAdmin:ie,isClient:ee,clientData:he,loading:_e}=Aa(),je=sr();if(k.useEffect(()=>{if(!_e&&z){if(ie)je("/dashboard");else if(ee){const S=he?.clientType;je(S==="core_buddy"?"/client/core-buddy":S==="circuit_vip"||S==="circuit_dropin"?"/client/circuit":"/client")}}},[_e,z,ie,ee,he,je]),_e)return null;const Ne=async S=>{S.preventDefault(),p(""),y(!0);try{await q(r,n,o)}catch(R){p(R.message||"Failed to log in"),y(!1)}},N=async S=>{if(S.preventDefault(),p(""),!r.trim()){p("Please enter your email address");return}y(!0);try{await G(r.trim()),O(!0)}catch(R){R.code==="auth/user-not-found"?p("No account found with this email"):p(R.message||"Failed to send reset email")}y(!1)};return c.jsx("div",{className:"login-container",children:c.jsxs("div",{className:"login-card",children:[c.jsxs("div",{className:"login-header",children:[c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),c.jsx("p",{children:w?"Reset Password":"Client Portal"})]}),d&&c.jsx("div",{className:"error-message",children:d}),T?c.jsxs("div",{className:"reset-sent",children:[c.jsx("div",{className:"reset-sent-icon",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),c.jsx("p",{children:"Reset email sent!"}),c.jsx("span",{children:"Check your inbox for a password reset link"}),c.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{x(!1),O(!1),p("")},children:"Back to Log In"})]}):w?c.jsxs("form",{onSubmit:N,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{type:"email",id:"email",value:r,onChange:S=>e(S.target.value),placeholder:"Enter your email",required:!0})]}),c.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),c.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{x(!1),p("")},children:"Back to Log In"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("form",{onSubmit:Ne,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{type:"email",id:"email",value:r,onChange:S=>e(S.target.value),required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"password",children:"Password"}),c.jsx("input",{type:"password",id:"password",value:n,onChange:S=>i(S.target.value),required:!0})]}),c.jsx("div",{className:"remember-me",children:c.jsxs("label",{children:[c.jsx("input",{type:"checkbox",checked:o,onChange:S=>u(S.target.checked)}),c.jsx("span",{children:"Remember me"})]})}),c.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),c.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{x(!0),p("")},children:"Forgot password?"})]}),c.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Rl({active:r}){const e=sr(),{clientData:n}=Aa(),i=n?.clientType==="block"&&n?.coreBuddyAccess;return c.jsxs("nav",{className:"block-bottom-nav",children:[c.jsxs("button",{className:`block-nav-tab${r==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[c.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),c.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),c.jsx("span",{children:"Home"})]}),c.jsxs("button",{className:`block-nav-tab${r==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"})}),c.jsx("span",{children:"Workouts"})]}),c.jsxs("button",{className:`block-nav-tab${r==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),c.jsx("span",{children:"Nutrition"})]}),c.jsxs("button",{className:`block-nav-tab${r==="progress"?" active":""}`,onClick:()=>e("/client/personal-bests?mode=corebuddy"),children:[c.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 20V10"}),c.jsx("path",{d:"M18 20V4"}),c.jsx("path",{d:"M6 20v-4"})]}),c.jsx("span",{children:"Progress"})]}),i&&c.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[c.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),c.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),c.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),c.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),c.jsx("span",{children:"Block"})]})]})}function cu(r,e,n,i,o){const u=[];for(let d=0;d<r;d++){const p=(d*(360/r)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:n+i*Math.sin(p),x2:e+o*Math.cos(p),y2:n+o*Math.sin(p),thick:d%5===0})}return u}const vD=cu(60,100,100,85,96),no=cu(60,100,100,78,94),bD=cu(60,100,100,82,94);cu(60,50,50,38,46);const _3=cu(60,40,40,30,37),tp=[10,25,50,100,200,500,1e3],Xa=5;function h1(r){return r.toISOString().split("T")[0]}function _D(r){let e=0;for(const n of tp){if(r<n)return{prev:e,next:n};e=n}return{prev:tp[tp.length-1],next:r+100}}const wD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},xD={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]};function ED(){const{currentUser:r,isClient:e,clientData:n,logout:i,loading:o}=Aa(),{isDark:u,toggleTheme:d}=Al(),p=sr(),[g,y]=k.useState({hours:0,minutes:0,seconds:0}),[w,x]=k.useState(0),[T,O]=k.useState(0),[q,G]=k.useState(""),[z,ie]=k.useState(0),[ee,he]=k.useState(0),[_e,je]=k.useState(!1),[Ne,N]=k.useState({protein:0,carbs:0,fats:0,calories:0}),[S,R]=k.useState(null),[I,D]=k.useState(0),[U,j]=k.useState(null),[et,pt]=k.useState(!1),[W,ge]=k.useState(!1),[ke,Je]=k.useState(0),[Qe,P]=k.useState(0),[H,de]=k.useState([]),[ye,Ae]=k.useState(null);k.useCallback((Ee,Ge="info")=>{Ae({message:Ee,type:Ge}),setTimeout(()=>Ae(null),4e3)},[]),k.useEffect(()=>{!o&&!r&&p("/")},[o,r,p]),k.useEffect(()=>{const Ee=()=>{const We=new Date,Ze=new Date(We);Ze.setHours(23,59,59,999);const qe=Ze-We,$e=Math.floor(qe/(1e3*60*60)),It=Math.floor(qe%(1e3*60*60)/(1e3*60)),_n=Math.floor(qe%(1e3*60)/1e3);y({hours:$e,minutes:It,seconds:_n}),x(60-_n)};Ee();const Ge=setInterval(Ee,1e3);return()=>clearInterval(Ge)},[]),k.useEffect(()=>{if(!r||!n)return;(async()=>{try{const Ge=h1(new Date),We=await zn(Ft(gt,"clientProgrammes",n.id));if(We.exists()){const Se=We.data(),Me=wD[Se.templateId];if(pt(!0),Me){const at=Se.completedSessions||{},vt=Object.keys(at).length,yt=Me.duration*Me.daysPerWeek;O(yt>0?Math.round(vt/yt*100):0);const Jt=Se.templateId.replace(/_/g," ").replace(/\b\w/g,Lt=>Lt.toUpperCase());G(Jt);const Rn=xD[Se.templateId];let Rt=!1;for(let Lt=1;Lt<=Me.duration&&!Rt;Lt++)for(let Bt=0;Bt<Me.daysPerWeek&&!Rt;Bt++)at[`w${Lt}d${Bt}`]||(j({week:Lt,dayIdx:Bt,label:Rn?.[Bt]||`Day ${Bt+1}`}),Rt=!0);Rt||ge(!0)}}const Ze=Or(gt,"workoutLogs"),qe=ul(Ze,eo("clientId","==",n.id)),$e=await to(qe),It=$e.docs.filter(Se=>Se.data().type!=="programme").length;ie(It);const _n=new Date,us=_n.getDay(),Ot=us===0?6:us-1,gn=new Date(_n);gn.setDate(_n.getDate()-Ot),gn.setHours(0,0,0,0);const tn=h1(gn),wn=$e.docs.filter(Se=>(Se.data().date||"")>=tn).length;Je(wn);const ae=Or(gt,"habitLogs"),pe=ul(ae,eo("clientId","==",n.id),eo("date","==",Ge)),be=await to(pe);let Ve=0;if(!be.empty){const Se=be.docs[0].data().habits||{};Ve=Object.values(Se).filter(Boolean).length}he(Math.round(Ve/Xa*100)),D(Ve);const Ce=await zn(Ft(gt,"nutritionTargets",n.id));Ce.exists()&&R(Ce.data());const Te=await zn(Ft(gt,"nutritionLogs",`${n.id}_${Ge}`));if(Te.exists()){const Me=(Te.data().entries||[]).reduce((at,vt)=>({protein:at.protein+(vt.protein||0),carbs:at.carbs+(vt.carbs||0),fats:at.fats+(vt.fats||0),calories:at.calories+(vt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});N(Me)}const De=await zn(Ft(gt,"coreBuddyPBs",n.id));if(De.exists()){const Se=De.data().exercises||{};P(Object.keys(Se).length)}try{const Se=Or(gt,"clients"),Me=ul(Se,eo("leaderboardOptIn","==",!0)),vt=(await to(Me)).docs.map(yt=>({id:yt.id,name:yt.data().name}));if(vt.length>0){const yt=Or(gt,"workoutLogs"),Jt=await to(yt),Rn={};Jt.docs.forEach(Lt=>{const Bt=Lt.data();(Bt.date||"")>=tn&&(Rn[Bt.clientId]=(Rn[Bt.clientId]||0)+1)});const Rt=vt.map(Lt=>({...Lt,count:Rn[Lt.id]||0})).sort((Lt,Bt)=>Bt.count-Lt.count).slice(0,3);de(Rt)}}catch(Se){console.error("Leaderboard preview error:",Se)}}catch(Ge){console.error("Error loading dashboard stats:",Ge)}finally{je(!0)}})()},[r,n]);const xe=Ee=>{const Ge=Ee.currentTarget,We=Ge.querySelector(".ripple");We&&We.remove();const Ze=Ge.getBoundingClientRect(),qe=Math.max(Ze.width,Ze.height),$e=Ee.clientX-Ze.left-qe/2,It=Ee.clientY-Ze.top-qe/2,_n=document.createElement("span");_n.className="ripple",_n.style.cssText=`width:${qe}px;height:${qe}px;left:${$e}px;top:${It}px;`,Ge.appendChild(_n),setTimeout(()=>_n.remove(),600)},Fe=n?.name?.split(" ")[0]||"there",{prev:rt,next:it}=_D(z),Qt=it>rt?Math.round((z-rt)/(it-rt)*100):100,pn=[{label:"Programme",value:`${T}%`,pct:T,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${z}`,pct:Qt,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${ee}%`,pct:ee,color:"#38B6FF",size:"normal"}],At=Ee=>!S||!S[Ee]?0:Math.min(Math.round(Ne[Ee]/S[Ee]*100),100),en=(()=>{const Ee=new Date().getHours();return _e&&I>=Xa&&Ne.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:Ee>=5&&Ee<12?{main:"Rise and grind,",sub:"let's get after it!"}:Ee>=12&&Ee<17?{main:"Oye",sub:"crack on and make it count!"}:Ee>=17&&Ee<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),J=_e?et&&U&&!W?{label:"NEXT SESSION",message:`Week ${U.week}, Day ${U.dayIdx+1}  ${U.label}`,cta:"Continue",action:()=>p("/client/core-buddy/programmes"),pct:T,ringLabel:`${T}%`}:I<Xa?{label:"DAILY HABITS",message:`${I}/${Xa} completed`,cta:"Open Habits",action:()=>p("/client/core-buddy/consistency"),pct:ee,ringLabel:`${I}/${Xa}`}:Ne.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>p("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:et?W?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>p("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>p("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null;return c.jsxs("div",{className:"cb-dashboard","data-theme":u?"dark":"light",children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsxs("div",{className:"header-actions",children:[c.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),c.jsx("button",{onClick:i,"aria-label":"Log out",children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),c.jsx("polyline",{points:"16 17 21 12 16 7"}),c.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),c.jsxs("main",{className:"cb-main",children:[c.jsxs("div",{className:"cb-ring-container",children:[c.jsxs("div",{className:"cb-ring",children:[c.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:vD.map((Ee,Ge)=>{const We=Ge<w;return c.jsx("line",{x1:Ee.x1,y1:Ee.y1,x2:Ee.x2,y2:Ee.y2,className:`ring-tick ${We?"elapsed":"remaining"}`,strokeWidth:Ee.thick?"3":"2"},Ge)})}),c.jsxs("div",{className:"cb-ring-center",children:[c.jsx("div",{className:"cb-ring-logo",children:c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness"})}),c.jsxs("div",{className:"cb-ring-countdown",children:[c.jsx("span",{className:"cb-timer-digit",children:String(g.hours).padStart(2,"0")}),c.jsx("span",{className:"cb-timer-colon",children:":"}),c.jsx("span",{className:"cb-timer-digit",children:String(g.minutes).padStart(2,"0")}),c.jsx("span",{className:"cb-timer-colon",children:":"}),c.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(g.seconds).padStart(2,"0")})]}),c.jsx("div",{className:"cb-ring-label",children:"remaining today"})]})]}),c.jsxs("p",{className:"cb-ring-tagline",children:["You have 24 hours a day... ",c.jsx("strong",{children:"make it count"})," with Core Buddy"]})]}),c.jsx("div",{className:"cb-stats-row",children:pn.map(Ee=>{const Ge=(Ee.size==="large",38),We=2*Math.PI*Ge,Ze=We-Ee.pct/100*We;return c.jsxs("div",{className:`cb-stat-item${Ee.size==="large"?" cb-stat-large":""}`,children:[c.jsxs("div",{className:"cb-stat-ring",children:[c.jsxs("svg",{viewBox:"0 0 100 100",children:[c.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:Ge}),c.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:Ge,style:{stroke:Ee.color},strokeDasharray:We,strokeDashoffset:Ze})]}),c.jsx("span",{className:"cb-stat-value",style:{color:Ee.color},children:Ee.value})]}),c.jsx("span",{className:"cb-stat-label",children:Ee.label})]},Ee.label)})}),c.jsxs("p",{className:"cb-coach-msg",children:[en.main," ",c.jsx("strong",{children:Fe}),"  ",en.sub]}),J&&c.jsxs("button",{className:"cb-nudge-card",onClick:J.action||void 0,style:J.action?void 0:{cursor:"default"},children:[c.jsxs("div",{className:"cb-nudge-ring",children:[c.jsxs("svg",{viewBox:"0 0 100 100",children:[c.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),c.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-J.pct/100*2*Math.PI*38})]}),c.jsx("span",{className:"cb-nudge-ring-val",children:J.ringLabel})]}),c.jsxs("div",{className:"cb-nudge-info",children:[c.jsx("span",{className:"cb-nudge-label",children:J.label}),c.jsx("span",{className:"cb-nudge-title",children:J.message}),J.cta&&c.jsxs("span",{className:"cb-nudge-cta",children:[J.cta," "]})]})]}),c.jsxs("div",{className:"cb-features",children:[c.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:Ee=>{xe(Ee),p("/client/core-buddy/nutrition")},children:[c.jsxs("div",{className:"cb-card-top-row",children:[c.jsx("div",{className:"cb-card-content",children:c.jsx("h3",{children:"Today's Nutrition"})}),c.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M9 18l6-6-6-6"})})]}),c.jsx("div",{className:"cb-card-preview-row",children:c.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:At("protein"),color:"#14b8a6"},{label:"C",pct:At("carbs"),color:"var(--color-primary)"},{label:"F",pct:At("fats"),color:"#eab308"},{label:"Cal",pct:At("calories"),color:"#38B6FF"}].map(Ee=>{const We=2*Math.PI*38,Ze=We-Ee.pct/100*We;return c.jsxs("div",{className:"cb-mini-ring",children:[c.jsxs("svg",{viewBox:"0 0 100 100",children:[c.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),c.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:Ee.color},strokeDasharray:We,strokeDashoffset:Ze})]}),c.jsx("span",{style:{color:Ee.color},children:Ee.label})]},Ee.label)})})}),c.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),c.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:Ee=>{xe(Ee),p("/client/core-buddy/workouts")},children:[c.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),c.jsxs("div",{className:"cb-hero-stats",children:[c.jsxs("span",{children:[ke," this week"]}),c.jsx("span",{className:"cb-hero-dot",children:""}),c.jsxs("span",{children:[z," total"]})]}),c.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M9 18l6-6-6-6"})})]}),c.jsxs("button",{className:"cb-feature-card cb-card-consistency ripple-btn",onClick:Ee=>{xe(Ee),p("/client/core-buddy/consistency")},children:[c.jsxs("div",{className:"cb-card-content",children:[c.jsx("h3",{children:"Daily Habits"}),c.jsxs("div",{className:"cb-habit-dots",children:[Array.from({length:Xa},(Ee,Ge)=>c.jsx("span",{className:`cb-habit-dot${Ge<I?" done":""}`},Ge)),c.jsxs("span",{className:"cb-habit-dots-label",children:[I,"/",Xa]})]})]}),c.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M9 18l6-6-6-6"})})]}),c.jsxs("button",{className:"cb-feature-card cb-card-progress ripple-btn",onClick:Ee=>{xe(Ee),p("/client/personal-bests?mode=corebuddy")},children:[c.jsxs("div",{className:"cb-card-content",children:[c.jsx("h3",{children:"My Progress"}),c.jsxs("div",{className:"cb-progress-preview",children:[c.jsx("svg",{className:"cb-progress-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),c.jsxs("span",{children:[Qe," PB",Qe!==1?"s":""," recorded"]})]})]}),c.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M9 18l6-6-6-6"})})]}),c.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:Ee=>{xe(Ee),p("/client/leaderboard")},children:[c.jsxs("div",{className:"cb-card-content",children:[c.jsx("h3",{children:"Leaderboard"}),H.length>0&&c.jsx("div",{className:"cb-lb-preview",children:H.map((Ee,Ge)=>{const We=["#FFD700","#A8B4C0","#CD7F32"][Ge],Ze=Ee.name?Ee.name.split(" ").map($e=>$e[0]).join("").slice(0,2).toUpperCase():"?",qe=Ee.id===n?.id;return c.jsxs("div",{className:`cb-lb-entry${qe?" cb-lb-me":""}`,children:[c.jsx("div",{className:"cb-lb-avatar",style:{borderColor:We},children:c.jsx("span",{children:Ze})}),c.jsxs("span",{className:"cb-lb-rank",style:{color:We},children:["#",Ge+1]})]},Ee.id)})})]}),c.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M9 18l6-6-6-6"})})]})]})]}),c.jsx(Rl,{active:"home"}),ye&&c.jsxs("div",{className:`toast-notification ${ye.type}`,children:[ye.type==="info"&&c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),c.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),ye.message]})]})}const np=new Map;function aa(){return new Date().toISOString().split("T")[0]}const TD=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],SD={breakfast:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),c.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),c.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),c.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),c.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function kD(){const r=new Date().getHours();return r<11?"breakfast":r<14?"lunch":r<17?"snacks":"dinner"}function AD(){const{currentUser:r,isClient:e,clientData:n,loading:i}=Aa(),{isDark:o,toggleTheme:u,accent:d}=Al(),p=sr(),[g,y]=k.useState("loading"),[w,x]=k.useState(null),[T,O]=k.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[q,G]=k.useState(null),[z,ie]=k.useState(aa()),[ee,he]=k.useState({entries:[],water:0}),[_e,je]=k.useState({protein:0,carbs:0,fats:0,calories:0}),[Ne,N]=k.useState(!1),[S,R]=k.useState(!1),[I,D]=k.useState(()=>{const C=new Date;return{year:C.getFullYear(),month:C.getMonth()}}),[U,j]=k.useState(kD),[et,pt]=k.useState(null),[W,ge]=k.useState(null),[ke,Je]=k.useState(!1),[Qe,P]=k.useState(null),[H,de]=k.useState(""),[ye,Ae]=k.useState(!1),[xe,Fe]=k.useState(""),[rt,it]=k.useState([]),[Qt,pn]=k.useState(!1),[At,en]=k.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[J,Ee]=k.useState(null),[Ge,We]=k.useState("100"),[Ze,qe]=k.useState(0),[$e,It]=k.useState("weight"),[_n,us]=k.useState(0),[Ot,gn]=k.useState(null);k.useRef(null);const tn=k.useRef(!1),wn=k.useRef(null),ae=k.useRef(null),pe=k.useRef(null),be=k.useCallback((C,V="info")=>{gn({message:C,type:V}),setTimeout(()=>gn(null),3e3)},[]);k.useEffect(()=>{!i&&(!r||!e)&&p("/")},[r,e,i,p]),k.useEffect(()=>{if(!n?.id)return;(async()=>{try{const V=await zn(Ft(gt,"nutritionTargets",n.id));V.exists()?(x(V.data()),y("dashboard")):y("setup")}catch(V){console.error("Error loading nutrition data:",V),y("setup")}})()},[n?.id]),k.useEffect(()=>{if(!n?.id)return;(async()=>{try{const V=await zn(Ft(gt,"nutritionLogs",`${n.id}_${z}`));if(V.exists()){const re=V.data();he({entries:re.entries||[],water:re.water||0})}else he({entries:[],water:0})}catch(V){console.error("Error loading log:",V),he({entries:[],water:0})}})()},[n?.id,z]),k.useEffect(()=>{const C=ee.entries.reduce((V,re)=>({protein:V.protein+(re.protein||0),carbs:V.carbs+(re.carbs||0),fats:V.fats+(re.fats||0),calories:V.calories+(re.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});je(C)},[ee.entries]);const Ve=async C=>{try{await Lr(Ft(gt,"nutritionLogs",`${n.id}_${z}`),{clientId:n.id,date:z,entries:C.entries,water:C.water,updatedAt:ht.now()})}catch(V){console.error("Error saving nutrition log:",V)}},Ce=z===aa(),Te=(C,V)=>new Date(C,V+1,0).getDate(),De=(C,V)=>new Date(C,V,1).getDay(),Se=["January","February","March","April","May","June","July","August","September","October","November","December"],Me=["Su","Mo","Tu","We","Th","Fr","Sa"],at=()=>{let C=parseFloat(T.weight);T.weightUnit==="lbs"&&(C*=.453592);let V;T.heightUnit==="cm"?V=parseFloat(T.height):V=(parseFloat(T.heightFeet)||0)*30.48+(parseFloat(T.heightInches)||0)*2.54;const re=parseInt(T.age);let oe=T.gender==="male"?10*C+6.25*V-5*re+5:10*C+6.25*V-5*re-161;const Ue=oe*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[T.dailyActivity],He={low:100,moderate:200,high:300,daily:400},zt=Math.round(Ue+He[T.trainingFrequency]);let ut=zt,B,ne;switch(T.goal){case"lose":ut=zt*(1-{light:.15,moderate:.2,harsh:.25}[T.deficitLevel]),B=2.2,ne=.3;break;case"build":ut=zt*1.1,B=2,ne=.22;break;default:B=1.8,ne=.25}ut=Math.max(ut,T.gender==="male"?1400:1100);const X=Math.round(C*B),me=Math.round(ut*ne/9),ve=Math.max(0,Math.round((ut-X*4-me*9)/4));G({calories:Math.round(ut),protein:X,carbs:ve,fats:me,bmr:Math.round(oe),neat:Math.round(Ue),exerciseAdd:He[T.trainingFrequency],tdee:Math.round(zt)})},vt=async()=>{if(q)try{const C={clientId:n.id,calories:q.calories,protein:q.protein,carbs:q.carbs,fats:q.fats,waterGoal:8,goal:T.goal,updatedAt:ht.now()};await Lr(Ft(gt,"nutritionTargets",n.id),C),x(C),y("dashboard"),be("Macro targets saved!","success")}catch(C){console.error("Error saving targets:",C),be("Failed to save targets. Please try again.","error")}},yt=()=>{const C=T.weight&&parseFloat(T.weight)>0,V=T.age&&parseInt(T.age)>0,re=T.heightUnit==="cm"?T.height&&parseFloat(T.height)>0:T.heightFeet&&parseFloat(T.heightFeet)>0||T.heightInches&&parseFloat(T.heightInches)>0;return C&&V&&re},Jt="nut_favourite_foods",Rn=()=>{try{return JSON.parse(localStorage.getItem(Jt)||"[]")}catch{return[]}},Rt=C=>Rn().some(V=>V.name.toLowerCase()===(C||"").toLowerCase()),Lt=C=>{const V=Rn(),re=V.findIndex(oe=>oe.name.toLowerCase()===C.name.toLowerCase());re>=0?V.splice(re,1):V.unshift({name:C.name,protein:C.protein,carbs:C.carbs,fats:C.fats,calories:C.calories,serving:C.serving,per100g:C.per100g||null,servingUnit:C.servingUnit||"g",portion:C.portion||null}),localStorage.setItem(Jt,JSON.stringify(V)),us(oe=>oe+1)},Bt=C=>{const V=[...ee.entries,{...C,meal:U,id:Date.now(),addedAt:new Date().toISOString()}],re={...ee,entries:V};he(re),Ve(re),ge(null),Ee(null),We("100"),qe(0),It("weight"),en({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),be("Food added!","success")},ts=C=>{const V=ee.entries.filter(oe=>oe.id!==C),re={...ee,entries:V};he(re),Ve(re)},rr=k.useRef(null),$r=async()=>{Je(!0);const C=document.querySelector("#barcode-reader");if(!C){Je(!1),be("Scanner container not found.","error");return}if(!rr.current)try{const re=await Us(()=>import("./quagga.min-BbicSfvA.js").then(oe=>oe.q),[]);rr.current=re.default}catch(re){console.error("Failed to load barcode scanner:",re),Je(!1),be("Could not load scanner.","error");return}const V=rr.current;V.init({inputStream:{type:"LiveStream",target:C,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},re=>{if(re){console.error("Quagga init error:",re),Je(!1),be("Could not access camera. Check permissions.","error");return}V.start(),tn.current=!0}),V.onDetected(re=>{const oe=re.codeResult.decodedCodes?.filter(Ue=>Ue.error!==void 0)?.map(Ue=>Ue.error)||[];if((oe.length>0?oe.reduce((Ue,He)=>Ue+He,0)/oe.length:1)<.15){const Ue=re.codeResult.code;V.offDetected(),P(Ue)}})},ns=()=>{const C=rr.current;tn.current&&C&&(C.stop(),C.offDetected(),tn.current=!1),Je(!1)},zs=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,Kr=C=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((C||"").replace(/\s/g,"")),Fs=C=>{if(!C)return{value:100,unit:"g"};const V=C.toLowerCase().replace(/\s/g,""),re=V.match(/([\d.]+)/),oe=re?parseFloat(re[1]):100;return Kr(C)?/cl/.test(V)?{value:oe*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(V)&&!/ml/.test(V)?{value:oe*1e3,unit:"ml"}:{value:oe,unit:"ml"}:{value:oe,unit:"g"}},Ai=C=>{if(Kr(C.serving_size)||Kr(C.quantity))return"ml";const V=C.product_name||C.product_name_en||"";return zs.test(V)?"ml":"g"},xr=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],Er=(C,V)=>{const re=C||"",oe=re.match(/\((\d+\.?\d*)\s*g\)/i),ze=re.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(oe&&ze){const zt=parseFloat(oe[1]);let ut=ze[1].replace(/^\d+\s*/,"").trim();if(ut&&zt>0)return{label:ut,weight:zt}}const Ue=re.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Ue){const zt=parseFloat(Ue[1]);let ut=Ue[2].replace(/^\d+\s*/,"").trim();if(ut&&zt>0)return{label:ut,weight:zt}}const He=V||"";for(const{pattern:zt,label:ut,weight:B}of xr)if(zt.test(He))return{label:ut,weight:B};return null},hs=C=>{const V=C.nutriments||{},re=Ai(C),oe=Fs(C.serving_size),ze=re==="ml"?oe.unit==="ml"?oe.value:100:oe.value,Ue=C.product_name||C.product_name_en||"Unknown Product",He=Er(C.serving_size,Ue);return{name:Ue,brand:C.brands||"",image:C.image_small_url||C.image_url||null,servingSize:C.serving_size||"100g",servingValue:ze,servingUnit:re,portion:He,protein:Math.round(V.proteins_100g||V.proteins||0),carbs:Math.round(V.carbohydrates_100g||V.carbohydrates||0),fats:Math.round(V.fat_100g||V.fat||0),calories:Math.round(V["energy-kcal_100g"]||V["energy-kcal"]||(V.energy_100g?V.energy_100g/4.184:0)),per100g:!0}},Yr=async C=>{Ae(!0);try{const V=`https://world.openfoodfacts.org/api/v2/product/${C}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,re=await fetch(V);if(!re.ok)throw new Error(`HTTP ${re.status}`);const oe=await re.json();if(oe.status==="success"||oe.status===1||oe.product){const ze=hs(oe.product);ze.calories===0&&ze.protein===0&&ze.carbs===0?be("Product found but no nutrition data available.","error"):(Ee(ze),ze.portion?(qe(1),We(String(ze.portion.weight)),It("portion")):(qe(0),We(String(ze.servingValue||100)),It("weight")),de(""))}else be("Product not found. Try search or manual entry.","error")}catch(V){console.error("Barcode lookup error:",V),be("Failed to look up product. Check your connection.","error")}Ae(!1)},Hn=(C,V,re)=>{const oe=C.toLowerCase().trim(),ze=V.toLowerCase().trim(),Ue=re.toLowerCase().trim();let He=0;return(oe===Ue||oe===Ue+"s"||oe+"s"===Ue)&&(He+=100),(oe.endsWith(" "+Ue)||oe.endsWith(" "+Ue+"s"))&&(He+=40),(oe.startsWith(Ue+" ")||oe.startsWith(Ue+"s "))&&(He+=15),Ue.split(/\s+/).some(ut=>ze===ut||ze.startsWith(ut))&&(He+=30),He+=Math.max(0,30-oe.length),He},ss=async()=>{if(!xe.trim())return;wn.current&&wn.current.abort();const C=new AbortController;wn.current=C;const V=xe.trim().toLowerCase(),re=V.split(/\s+/).filter(Boolean);if(np.has(V)){it(np.get(V));return}pn(!0);try{const ze=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(xe.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Ue=await fetch(ze,{signal:C.signal});if(!Ue.ok)throw new Error(`HTTP ${Ue.status}`);const zt=((await Ue.json()).products||[]).map(ut=>hs(ut)).filter(ut=>ut.name!=="Unknown Product"&&(ut.calories>0||ut.protein>0)).filter(ut=>{const B=(ut.name+" "+ut.brand).toLowerCase();return re.every(ne=>B.includes(ne))}).sort((ut,B)=>Hn(B.name,B.brand,V)-Hn(ut.name,ut.brand,V)).slice(0,10);np.set(V,zt),it(zt),zt.length===0&&be("No results found. Try a different search.","info")}catch(oe){if(oe.name==="AbortError")return;console.error("Search error:",oe),be("Search failed. Check your connection.","error")}pn(!1)};k.useEffect(()=>{if(ae.current&&clearTimeout(ae.current),!(!xe.trim()||W!=="search"||J))return ae.current=setTimeout(()=>{ss()},700),()=>clearTimeout(ae.current)},[xe]);const an=()=>{const C={...ee,water:ee.water+1};he(C),Ve(C)},yn=()=>{if(ee.water<=0)return;const C={...ee,water:ee.water-1};he(C),Ve(C)},bs={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},Rs=80,Qr=2*Math.PI*Rs,ds=(C,V,re,oe,ze)=>{const Ue=oe>0?Math.min(100,Math.round(re/oe*100)):0,He=Qr-Ue/100*Qr,zt=bs[ze]||"#14b8a6";return c.jsxs("div",{className:"nut-ring-wrap",children:[c.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[c.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:Rs}),c.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:Rs,style:{stroke:zt},strokeDasharray:Qr,strokeDashoffset:He})]}),c.jsxs("div",{className:"nut-ring-center",children:[c.jsx("span",{className:"nut-ring-value",style:{color:zt},children:Math.round(re)}),c.jsxs("span",{className:"nut-ring-target",children:["/ ",oe,C==="Calories"?"":"g"]}),c.jsx("span",{className:"nut-ring-label",style:{color:zt},children:V})]}),c.jsxs("span",{className:"nut-ring-pct",style:{color:zt},children:[Ue,"%"]})]})};if(k.useEffect(()=>{if(!Qe)return;const C=setTimeout(()=>{const V=Qe;ns(),P(null),Yr(V)},1500);return()=>clearTimeout(C)},[Qe]),k.useEffect(()=>()=>{const C=rr.current;if(tn.current&&C){try{C.stop(),C.offDetected()}catch{}tn.current=!1}},[]),i||g==="loading")return c.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),c.jsx("div",{className:"nut-loading-inline",children:c.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return c.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsx("div",{className:"header-actions",children:c.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),c.jsxs("main",{className:"nut-main",children:[c.jsxs("div",{className:"nut-setup-intro",children:[c.jsx("h2",{children:"Set Your Daily Targets"}),c.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),c.jsxs("div",{className:"nut-calc-form",children:[c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Gender"}),c.jsxs("div",{className:"nut-toggle-group",children:[c.jsx("button",{className:T.gender==="male"?"active":"",onClick:()=>{O(C=>({...C,gender:"male"})),G(null)},children:"Male"}),c.jsx("button",{className:T.gender==="female"?"active":"",onClick:()=>{O(C=>({...C,gender:"female"})),G(null)},children:"Female"})]})]}),c.jsxs("div",{className:"nut-form-row",children:[c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Age"}),c.jsx("input",{type:"number",value:T.age,onChange:C=>{O(V=>({...V,age:C.target.value})),G(null)},placeholder:"Years",min:"15",max:"100"})]}),c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Weight"}),c.jsxs("div",{className:"nut-input-unit",children:[c.jsx("input",{type:"number",value:T.weight,onChange:C=>{O(V=>({...V,weight:C.target.value})),G(null)},placeholder:T.weightUnit,min:"30",max:"300"}),c.jsxs("div",{className:"nut-unit-toggle",children:[c.jsx("button",{className:T.weightUnit==="kg"?"active":"",onClick:()=>{O(C=>({...C,weightUnit:"kg"})),G(null)},children:"kg"}),c.jsx("button",{className:T.weightUnit==="lbs"?"active":"",onClick:()=>{O(C=>({...C,weightUnit:"lbs"})),G(null)},children:"lbs"})]})]})]})]}),c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Height"}),c.jsxs("div",{className:"nut-input-unit",children:[T.heightUnit==="cm"?c.jsx("input",{type:"number",value:T.height,onChange:C=>{O(V=>({...V,height:C.target.value})),G(null)},placeholder:"cm",min:"100",max:"250"}):c.jsxs("div",{className:"nut-height-imperial",children:[c.jsx("input",{type:"number",value:T.heightFeet,onChange:C=>{O(V=>({...V,heightFeet:C.target.value})),G(null)},placeholder:"ft",min:"4",max:"7"}),c.jsx("input",{type:"number",value:T.heightInches,onChange:C=>{O(V=>({...V,heightInches:C.target.value})),G(null)},placeholder:"in",min:"0",max:"11"})]}),c.jsxs("div",{className:"nut-unit-toggle",children:[c.jsx("button",{className:T.heightUnit==="cm"?"active":"",onClick:()=>{O(C=>({...C,heightUnit:"cm"})),G(null)},children:"cm"}),c.jsx("button",{className:T.heightUnit==="ft"?"active":"",onClick:()=>{O(C=>({...C,heightUnit:"ft"})),G(null)},children:"ft/in"})]})]})]}),c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Daily Activity (outside of training)"}),c.jsxs("select",{value:T.dailyActivity,onChange:C=>{O(V=>({...V,dailyActivity:C.target.value})),G(null)},children:[c.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),c.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),c.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),c.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Training Sessions per Week"}),c.jsxs("select",{value:T.trainingFrequency,onChange:C=>{O(V=>({...V,trainingFrequency:C.target.value})),G(null)},children:[c.jsx("option",{value:"low",children:"1-2 sessions"}),c.jsx("option",{value:"moderate",children:"3-4 sessions"}),c.jsx("option",{value:"high",children:"5-6 sessions"}),c.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Fitness Goal"}),c.jsxs("div",{className:"nut-goal-options",children:[c.jsxs("button",{className:T.goal==="lose"?"active":"",onClick:()=>{O(C=>({...C,goal:"lose"})),G(null)},children:[c.jsx("span",{className:"nut-goal-icon",children:"-"}),c.jsx("span",{children:"Lose Weight"})]}),c.jsxs("button",{className:T.goal==="maintain"?"active":"",onClick:()=>{O(C=>({...C,goal:"maintain"})),G(null)},children:[c.jsx("span",{className:"nut-goal-icon",children:"="}),c.jsx("span",{children:"Maintain"})]}),c.jsxs("button",{className:T.goal==="build"?"active":"",onClick:()=>{O(C=>({...C,goal:"build"})),G(null)},children:[c.jsx("span",{className:"nut-goal-icon",children:"+"}),c.jsx("span",{children:"Build Muscle"})]})]})]}),T.goal==="lose"&&c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Deficit Level"}),c.jsxs("div",{className:"nut-deficit-options",children:[c.jsxs("button",{className:T.deficitLevel==="light"?"active":"",onClick:()=>{O(C=>({...C,deficitLevel:"light"})),G(null)},children:[c.jsx("strong",{children:"Mild"}),c.jsx("span",{children:"15% below TDEE"})]}),c.jsxs("button",{className:T.deficitLevel==="moderate"?"active":"",onClick:()=>{O(C=>({...C,deficitLevel:"moderate"})),G(null)},children:[c.jsx("strong",{children:"Moderate"}),c.jsx("span",{children:"20% below TDEE"})]}),c.jsxs("button",{className:T.deficitLevel==="harsh"?"active":"",onClick:()=>{O(C=>({...C,deficitLevel:"harsh"})),G(null)},children:[c.jsx("strong",{children:"Aggressive"}),c.jsx("span",{children:"25% below TDEE"})]})]})]}),c.jsx("button",{className:"nut-calc-btn",onClick:at,disabled:!yt(),children:"Calculate Macros"})]}),q&&c.jsxs("div",{className:"nut-calc-results",children:[c.jsx("h3",{children:"Your Daily Targets"}),c.jsxs("div",{className:"nut-calc-rings",children:[ds("Protein","Protein",q.protein,q.protein,"ring-protein"),ds("Carbs","Carbs",q.carbs,q.carbs,"ring-carbs"),ds("Fats","Fats",q.fats,q.fats,"ring-fats"),ds("Calories","Calories",q.calories,q.calories,"ring-cals")]}),c.jsxs("div",{className:"nut-calc-info",children:[c.jsxs("div",{className:"nut-calc-info-row",children:[c.jsx("span",{children:"BMR (body at rest)"}),c.jsxs("span",{children:[q.bmr," cal"]})]}),c.jsxs("div",{className:"nut-calc-info-row",children:[c.jsx("span",{children:"+ Daily activity (NEAT)"}),c.jsxs("span",{children:[q.neat," cal"]})]}),c.jsxs("div",{className:"nut-calc-info-row",children:[c.jsx("span",{children:"+ Training sessions"}),c.jsxs("span",{children:["+",q.exerciseAdd," cal"]})]}),c.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[c.jsx("span",{children:"TDEE (total burn)"}),c.jsxs("span",{children:[q.tdee," cal"]})]})]}),c.jsx("button",{className:"nut-save-targets-btn",onClick:vt,children:"Set as My Daily Targets"})]})]}),Ot&&c.jsx("div",{className:`toast-notification ${Ot.type}`,children:Ot.message})]});const Ri=C=>{const V=new Date(C+"T12:00:00"),re=V.getDay(),oe=new Date(V);oe.setDate(V.getDate()-(re+6)%7);const ze=[];for(let Ue=0;Ue<7;Ue++){const He=new Date(oe);He.setDate(oe.getDate()+Ue),ze.push(He.toISOString().split("T")[0])}return ze},_s=["M","T","W","T","F","S","S"],Cs=(C,V="search")=>{j(C),V==="scan"?(ge("scan"),Ee(null)):V==="manual"?(ge("manual"),en({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):V==="favourites"?ge("favourites"):(ge("search"),it([]),Fe(""))},fs=Ri(z),On=new Date(z+"T12:00:00"),Gn=`${Se[On.getMonth()]} ${On.getFullYear()}`;return c.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsxs("div",{className:"nut-dark-zone",children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsxs("div",{className:"header-actions",children:[c.jsx("button",{onClick:()=>{y("setup"),G(null)},"aria-label":"Recalculate macros",children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"3"}),c.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),c.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),c.jsxs("div",{className:"nut-dark-content",children:[c.jsxs("div",{className:"nut-week-strip",children:[c.jsxs("div",{className:"nut-week-header",children:[c.jsx("button",{className:"nut-week-arrow",onClick:()=>{const C=new Date(z+"T12:00:00");C.setDate(C.getDate()-7);const V=C.toISOString().split("T")[0];ie(V)},"aria-label":"Previous week",children:c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:c.jsx("polyline",{points:"15 18 9 12 15 6"})})}),c.jsx("button",{className:"nut-week-month-label",onClick:()=>{N(!Ne),D({year:On.getFullYear(),month:On.getMonth()})},children:Gn}),c.jsx("button",{className:"nut-week-arrow",onClick:()=>{const C=new Date(z+"T12:00:00");C.setDate(C.getDate()+7);const V=C.toISOString().split("T")[0];V<=aa()&&ie(V)},"aria-label":"Next week",disabled:fs[6]>=aa(),children:c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:c.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),c.jsx("div",{className:"nut-week-days",children:fs.map((C,V)=>{const re=new Date(C+"T12:00:00").getDate(),oe=C===z,ze=C>aa(),Ue=C===aa();return c.jsxs("button",{className:`nut-week-day${oe?" selected":""}${Ue?" today":""}${ze?" future":""}`,disabled:ze,onClick:()=>ie(C),children:[c.jsx("span",{className:"nut-week-day-letter",children:_s[V]}),c.jsx("span",{className:"nut-week-day-num",children:re})]},C)})})]}),Ne&&c.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[c.jsxs("div",{className:"nut-cal-header",children:[c.jsx("button",{onClick:()=>D(C=>{let V=C.month-1,re=C.year;return V<0&&(V=11,re--),{year:re,month:V}}),children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("polyline",{points:"15 18 9 12 15 6"})})}),c.jsxs("span",{children:[Se[I.month]," ",I.year]}),c.jsx("button",{onClick:()=>D(C=>{let V=C.month+1,re=C.year;return V>11&&(V=0,re++),{year:re,month:V}}),disabled:I.year===new Date().getFullYear()&&I.month>=new Date().getMonth(),children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),c.jsx("div",{className:"nut-cal-days-header",children:Me.map(C=>c.jsx("span",{children:C},C))}),c.jsxs("div",{className:"nut-cal-grid",children:[[...Array(De(I.year,I.month))].map((C,V)=>c.jsx("span",{},`e${V}`)),[...Array(Te(I.year,I.month))].map((C,V)=>{const re=V+1,oe=`${I.year}-${String(I.month+1).padStart(2,"0")}-${String(re).padStart(2,"0")}`,ze=oe>aa(),Ue=oe===z,He=oe===aa();return c.jsx("button",{className:`nut-cal-day${Ue?" selected":""}${He?" today":""}${ze?" future":""}`,disabled:ze,onClick:()=>{ie(oe),N(!1)},children:re},re)})]})]}),c.jsxs("div",{className:"nut-rings-row",children:[ds("Protein","Protein",_e.protein,w.protein,"ring-protein"),ds("Carbs","Carbs",_e.carbs,w.carbs,"ring-carbs"),ds("Fats","Fats",_e.fats,w.fats,"ring-fats"),ds("Calories","kCal",_e.calories,w.calories,"ring-cals")]})]})]}),c.jsx("div",{className:"nut-light-zone",children:c.jsxs("div",{className:"nut-light-content",children:[Ce&&c.jsxs("button",{className:"nut-water-quick",onClick:()=>R(!0),children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:c.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),c.jsxs("span",{className:"nut-water-quick-count",children:[ee.water," / ",w?.waterGoal||8]}),c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[c.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),c.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),c.jsx("div",{className:"nut-log-section",children:c.jsx("div",{className:"nut-meals-list",children:TD.map(C=>{const V=ee.entries.filter(oe=>(oe.meal||"snacks")===C.key),re=V.reduce((oe,ze)=>({protein:oe.protein+(ze.protein||0),carbs:oe.carbs+(ze.carbs||0),fats:oe.fats+(ze.fats||0),calories:oe.calories+(ze.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return c.jsxs("div",{className:"nut-meal-card",children:[c.jsxs("div",{className:"nut-meal-card-header",children:[c.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${C.key}`,children:SD[C.key]}),c.jsx("span",{className:"nut-meal-card-title",children:C.label}),V.length>0&&c.jsxs("span",{className:"nut-meal-card-cal",children:[re.calories," cal"]}),Ce&&c.jsxs("div",{className:"nut-add-wrapper",children:[c.jsx("button",{className:"nut-meal-add-btn",onClick:()=>pt(et===C.key?null:C.key),"aria-label":`Add to ${C.label}`,children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[c.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),c.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),et===C.key&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>pt(null)}),c.jsxs("div",{className:"nut-add-picker",children:[c.jsxs("button",{onClick:()=>{pt(null),Cs(C.key,"scan")},children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),c.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),c.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),c.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),c.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),c.jsx("span",{children:"Scan"})]}),c.jsxs("button",{onClick:()=>{pt(null),Cs(C.key,"search")},children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),c.jsx("span",{children:"Search"})]}),c.jsxs("button",{onClick:()=>{pt(null),Cs(C.key,"manual")},children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),c.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),c.jsx("span",{children:"Manual"})]}),c.jsxs("button",{onClick:()=>{pt(null),Cs(C.key,"favourites")},children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),c.jsx("span",{children:"Favs"})]})]})]})]})]}),V.length>0&&c.jsxs("div",{className:"nut-meal-bars",children:[c.jsxs("div",{className:"nut-meal-bar-row",children:[c.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),c.jsx("div",{className:"nut-meal-bar-track",children:c.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,w.protein>0?re.protein/w.protein*100:0)}%`}})}),c.jsxs("span",{className:"nut-meal-bar-val",children:[re.protein,"g"]})]}),c.jsxs("div",{className:"nut-meal-bar-row",children:[c.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),c.jsx("div",{className:"nut-meal-bar-track",children:c.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,w.carbs>0?re.carbs/w.carbs*100:0)}%`}})}),c.jsxs("span",{className:"nut-meal-bar-val",children:[re.carbs,"g"]})]}),c.jsxs("div",{className:"nut-meal-bar-row",children:[c.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),c.jsx("div",{className:"nut-meal-bar-track",children:c.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,w.fats>0?re.fats/w.fats*100:0)}%`}})}),c.jsxs("span",{className:"nut-meal-bar-val",children:[re.fats,"g"]})]}),c.jsxs("div",{className:"nut-meal-bar-row",children:[c.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),c.jsx("div",{className:"nut-meal-bar-track",children:c.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,w.calories>0?re.calories/w.calories*100:0)}%`}})}),c.jsx("span",{className:"nut-meal-bar-val",children:re.calories})]})]}),V.length>0&&c.jsx("div",{className:"nut-log-list",children:V.map(oe=>c.jsxs("div",{className:"nut-log-item",children:[c.jsxs("div",{className:"nut-log-item-info",children:[c.jsx("span",{className:"nut-log-item-name",children:oe.name}),oe.serving&&c.jsx("span",{className:"nut-log-item-serving",children:oe.serving})]}),c.jsxs("div",{className:"nut-log-item-macros",children:[c.jsxs("span",{className:"nut-macro-p",children:[oe.protein,"p"]}),c.jsxs("span",{className:"nut-macro-c",children:[oe.carbs,"c"]}),c.jsxs("span",{className:"nut-macro-f",children:[oe.fats,"f"]}),c.jsx("span",{className:"nut-macro-cal",children:oe.calories})]}),Ce&&c.jsx("button",{className:"nut-log-delete",onClick:()=>ts(oe.id),"aria-label":"Remove",children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},oe.id))}),V.length===0&&c.jsx("div",{className:"nut-meal-empty",children:c.jsx("p",{children:Ce?"Tap + to add food":"No entries"})})]},C.key)})})})]})}),S&&c.jsx("div",{className:"nut-modal-overlay",onClick:()=>R(!1),children:c.jsxs("div",{className:"nut-water-popup",onClick:C=>C.stopPropagation(),children:[c.jsxs("div",{className:"nut-water-popup-header",children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:c.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),c.jsx("span",{children:"Water Intake"}),c.jsx("button",{className:"nut-modal-close",onClick:()=>R(!1),children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsxs("div",{className:"nut-water-popup-body",children:[c.jsx("div",{className:"nut-water-glasses",children:[...Array(w?.waterGoal||8)].map((C,V)=>c.jsx("div",{className:`nut-water-glass ${V<ee.water?"filled":""}`,children:c.jsx("svg",{viewBox:"0 0 24 24",fill:V<ee.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:c.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},V))}),c.jsxs("div",{className:"nut-water-popup-count",children:[ee.water," / ",w?.waterGoal||8," glasses"]}),c.jsxs("div",{className:"nut-water-btns",children:[c.jsx("button",{onClick:yn,disabled:ee.water<=0,children:"-"}),c.jsx("button",{onClick:an,children:"+"})]})]})]})}),W&&c.jsx("div",{className:"nut-modal-overlay",onClick:()=>{ns(),P(null),ge(null),Ee(null)},children:c.jsxs("div",{className:"nut-modal",onClick:C=>C.stopPropagation(),children:[c.jsxs("div",{className:"nut-modal-header",children:[c.jsx("h3",{children:W==="scan"?"Scan Barcode":W==="search"?"Search Food":W==="favourites"?"Favourites":"Manual Entry"}),c.jsx("button",{className:"nut-modal-close",onClick:()=>{ns(),P(null),ge(null),Ee(null)},children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),W==="scan"&&!J&&c.jsxs("div",{className:"nut-scan-area",children:[c.jsxs("div",{className:"nut-scanner-wrapper",children:[c.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),ke&&!Qe&&c.jsx("div",{className:"nut-scan-line"}),Qe&&c.jsxs("div",{className:"nut-scan-detected-overlay",children:[c.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M20 6L9 17l-5-5"})}),c.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),c.jsx("p",{className:"nut-scan-detected-code",children:Qe})]})]}),!ke&&c.jsxs("button",{className:"nut-scan-start-btn",onClick:$r,children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),c.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),c.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),c.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),c.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),ke&&!Qe&&c.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),c.jsx("div",{className:"nut-barcode-divider",children:c.jsx("span",{children:"or enter barcode manually"})}),c.jsxs("div",{className:"nut-barcode-manual",children:[c.jsx("input",{type:"text",inputMode:"numeric",value:H,onChange:C=>de(C.target.value),onKeyDown:C=>C.key==="Enter"&&H.trim()&&Yr(H.trim()),placeholder:"Enter barcode number"}),c.jsx("button",{onClick:()=>H.trim()&&Yr(H.trim()),disabled:!H.trim()||ye,children:ye?"...":"Look Up"})]})]}),W==="scan"&&J&&(()=>{const C=J.servingUnit||"g",V=J.portion,re=$e==="portion"&&V?Ze*V.weight:parseFloat(Ge)||0,oe=re/100,ze=C==="ml"?[100,200,250,500]:[50,100,150,200],Ue=$e==="portion"&&V?`${Ze} ${V.label}${Ze!==1?"s":""} (${Math.round(re)}${C})`:`${Math.round(re)}${C}`;return c.jsxs("div",{className:"nut-product-result",children:[J.image&&c.jsx("img",{src:J.image,alt:J.name||"Product",className:"nut-product-img",loading:"lazy"}),c.jsxs("div",{className:"nut-product-name-row",children:[c.jsx("h4",{children:J.name}),c.jsx("button",{className:`nut-fav-star confirm${Rt(J.name)?" active":""}`,onClick:()=>Lt({name:J.name,protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories,serving:J.servingSize,per100g:{protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories},servingUnit:J.servingUnit||"g",portion:J.portion||null}),children:c.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Rt(J.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),J.brand&&c.jsx("p",{className:"nut-product-brand",children:J.brand}),c.jsxs("p",{className:"nut-product-per",children:["Per 100",C,":"]}),c.jsxs("div",{className:"nut-product-macros",children:[c.jsxs("span",{className:"nut-macro-p",children:[J.protein,"g P"]}),c.jsxs("span",{className:"nut-macro-c",children:[J.carbs,"g C"]}),c.jsxs("span",{className:"nut-macro-f",children:[J.fats,"g F"]}),c.jsxs("span",{className:"nut-macro-cal",children:[J.calories," cal"]})]}),V&&c.jsxs("div",{className:"nut-mode-toggle",children:[c.jsx("button",{className:$e==="portion"?"active":"",onClick:()=>{It("portion"),Ze<1&&qe(1)},children:"Portions"}),c.jsxs("button",{className:$e==="weight"?"active":"",onClick:()=>{It("weight"),We(String(Math.round(re)||100))},children:["Custom (",C,")"]})]}),$e==="portion"&&V?c.jsxs("div",{className:"nut-portion-stepper",children:[c.jsx("button",{className:"nut-stepper-btn",onClick:()=>qe(Math.max(1,Ze-1)),children:"-"}),c.jsxs("div",{className:"nut-stepper-display",children:[c.jsx("span",{className:"nut-stepper-count",children:Ze}),c.jsxs("span",{className:"nut-stepper-label",children:[V.label,Ze!==1?"s":""]}),c.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),C]})]}),c.jsx("button",{className:"nut-stepper-btn",onClick:()=>qe(Ze+1),children:"+"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"nut-serving-adjust",children:[c.jsxs("label",{children:["Serving (",C,")"]}),c.jsx("input",{type:"number",inputMode:"numeric",value:Ge,onChange:He=>We(He.target.value),onFocus:He=>He.target.select(),min:"0"})]}),c.jsx("div",{className:"nut-quick-amounts",children:ze.map(He=>c.jsxs("button",{className:`nut-quick-btn${Ge===String(He)?" active":""}`,onClick:()=>We(String(He)),children:[He,C]},He))})]}),c.jsx("div",{className:"nut-product-total",children:c.jsxs("span",{children:["Total: ",Math.round(J.protein*oe),"p / ",Math.round(J.carbs*oe),"c / ",Math.round(J.fats*oe),"f / ",Math.round(J.calories*oe)," cal"]})}),c.jsxs("div",{className:"nut-product-actions",children:[c.jsx("button",{className:"nut-btn-secondary",onClick:()=>{Ee(null),ge("scan")},children:"Scan Again"}),c.jsx("button",{className:"nut-btn-primary",onClick:()=>Bt({name:J.name,protein:Math.round(J.protein*oe),carbs:Math.round(J.carbs*oe),fats:Math.round(J.fats*oe),calories:Math.round(J.calories*oe),serving:Ue}),children:"Add"})]})]})})(),W==="search"&&!J&&c.jsxs("div",{className:"nut-search-area",children:[c.jsxs("div",{className:"nut-search-bar",children:[c.jsx("input",{type:"text",ref:pe,value:xe,onChange:C=>Fe(C.target.value),onKeyDown:C=>{C.key==="Enter"&&(clearTimeout(ae.current),ss())},onFocus:()=>setTimeout(()=>pe.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),c.jsx("button",{onClick:ss,disabled:Qt,children:Qt?"...":"Search"})]}),c.jsxs("div",{className:"nut-search-results",children:[rt.map((C,V)=>c.jsxs("button",{className:"nut-search-item",onClick:()=>{Ee(C),C.portion?(qe(1),We(String(C.portion.weight)),It("portion")):(qe(0),We(String(C.servingValue||100)),It("weight"))},children:[C.image&&c.jsx("img",{src:C.image,alt:C.name||"Product",loading:"lazy"}),c.jsxs("div",{className:"nut-search-item-info",children:[c.jsx("span",{className:"nut-search-item-name",children:C.name}),C.brand&&c.jsx("span",{className:"nut-search-item-brand",children:C.brand}),c.jsxs("span",{className:"nut-search-item-macros",children:[C.calories," cal  ",C.protein,"p  ",C.carbs,"c  ",C.fats,"f per 100",C.servingUnit||"g"]})]})]},V)),rt.length===0&&xe&&!Qt&&c.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),W==="search"&&J&&(()=>{const C=J.servingUnit||"g",V=J.portion,re=$e==="portion"&&V?Ze*V.weight:parseFloat(Ge)||0,oe=re/100,ze=C==="ml"?[100,200,250,500]:[50,100,150,200],Ue=$e==="portion"&&V?`${Ze} ${V.label}${Ze!==1?"s":""} (${Math.round(re)}${C})`:`${Math.round(re)}${C}`;return c.jsxs("div",{className:"nut-product-result",children:[J.image&&c.jsx("img",{src:J.image,alt:J.name||"Product",className:"nut-product-img",loading:"lazy"}),c.jsxs("div",{className:"nut-product-name-row",children:[c.jsx("h4",{children:J.name}),c.jsx("button",{className:`nut-fav-star confirm${Rt(J.name)?" active":""}`,onClick:()=>Lt({name:J.name,protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories,serving:J.servingSize,per100g:{protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories},servingUnit:J.servingUnit||"g",portion:J.portion||null}),children:c.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Rt(J.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),J.brand&&c.jsx("p",{className:"nut-product-brand",children:J.brand}),c.jsxs("p",{className:"nut-product-per",children:["Per 100",C,":"]}),c.jsxs("div",{className:"nut-product-macros",children:[c.jsxs("span",{className:"nut-macro-p",children:[J.protein,"g P"]}),c.jsxs("span",{className:"nut-macro-c",children:[J.carbs,"g C"]}),c.jsxs("span",{className:"nut-macro-f",children:[J.fats,"g F"]}),c.jsxs("span",{className:"nut-macro-cal",children:[J.calories," cal"]})]}),V&&c.jsxs("div",{className:"nut-mode-toggle",children:[c.jsx("button",{className:$e==="portion"?"active":"",onClick:()=>{It("portion"),Ze<1&&qe(1)},children:"Portions"}),c.jsxs("button",{className:$e==="weight"?"active":"",onClick:()=>{It("weight"),We(String(Math.round(re)||100))},children:["Custom (",C,")"]})]}),$e==="portion"&&V?c.jsxs("div",{className:"nut-portion-stepper",children:[c.jsx("button",{className:"nut-stepper-btn",onClick:()=>qe(Math.max(1,Ze-1)),children:"-"}),c.jsxs("div",{className:"nut-stepper-display",children:[c.jsx("span",{className:"nut-stepper-count",children:Ze}),c.jsxs("span",{className:"nut-stepper-label",children:[V.label,Ze!==1?"s":""]}),c.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),C]})]}),c.jsx("button",{className:"nut-stepper-btn",onClick:()=>qe(Ze+1),children:"+"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"nut-serving-adjust",children:[c.jsxs("label",{children:["Serving (",C,")"]}),c.jsx("input",{type:"number",inputMode:"numeric",value:Ge,onChange:He=>We(He.target.value),onFocus:He=>He.target.select(),min:"0"})]}),c.jsx("div",{className:"nut-quick-amounts",children:ze.map(He=>c.jsxs("button",{className:`nut-quick-btn${Ge===String(He)?" active":""}`,onClick:()=>We(String(He)),children:[He,C]},He))})]}),c.jsx("div",{className:"nut-product-total",children:c.jsxs("span",{children:["Total: ",Math.round(J.protein*oe),"p / ",Math.round(J.carbs*oe),"c / ",Math.round(J.fats*oe),"f / ",Math.round(J.calories*oe)," cal"]})}),c.jsxs("div",{className:"nut-product-actions",children:[c.jsx("button",{className:"nut-btn-secondary",onClick:()=>Ee(null),children:"Back to Search"}),c.jsx("button",{className:"nut-btn-primary",onClick:()=>Bt({name:J.name,protein:Math.round(J.protein*oe),carbs:Math.round(J.carbs*oe),fats:Math.round(J.fats*oe),calories:Math.round(J.calories*oe),serving:Ue}),children:"Add"})]})]})})(),W==="manual"&&c.jsxs("div",{className:"nut-manual-form",children:[c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Food Name"}),c.jsx("input",{type:"text",value:At.name,onChange:C=>en(V=>({...V,name:C.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Serving Size (optional)"}),c.jsx("input",{type:"text",value:At.serving,onChange:C=>en(V=>({...V,serving:C.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),c.jsxs("div",{className:"nut-manual-macros",children:[c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Protein (g)"}),c.jsx("input",{type:"number",value:At.protein,onChange:C=>en(V=>({...V,protein:C.target.value})),min:"0"})]}),c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Carbs (g)"}),c.jsx("input",{type:"number",value:At.carbs,onChange:C=>en(V=>({...V,carbs:C.target.value})),min:"0"})]}),c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Fats (g)"}),c.jsx("input",{type:"number",value:At.fats,onChange:C=>en(V=>({...V,fats:C.target.value})),min:"0"})]}),c.jsxs("div",{className:"nut-form-group",children:[c.jsx("label",{children:"Calories"}),c.jsx("input",{type:"number",value:At.calories,onChange:C=>en(V=>({...V,calories:C.target.value})),min:"0"})]})]}),c.jsx("button",{className:"nut-btn-primary",disabled:!At.name.trim(),onClick:()=>Bt({name:At.name,protein:parseFloat(At.protein)||0,carbs:parseFloat(At.carbs)||0,fats:parseFloat(At.fats)||0,calories:parseFloat(At.calories)||0,serving:At.serving||""}),children:"Add Food"})]}),W==="favourites"&&!J&&(()=>{const C=Rn(),V=re=>{if(re.per100g){const oe=re.per100g;Ee({name:re.name,brand:"",image:null,servingSize:re.serving||"100g",servingValue:100,servingUnit:re.servingUnit||"g",portion:re.portion||null,protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories,per100g:!0}),re.portion?(qe(1),We(String(re.portion.weight)),It("portion")):(qe(0),We("100"),It("weight"))}else Bt({name:re.name,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,serving:re.serving||""})};return c.jsx("div",{className:"nut-recent-area",children:C.length===0?c.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):c.jsx("div",{className:"nut-recent-list",children:C.map((re,oe)=>c.jsxs("div",{className:"nut-recent-item-row",children:[c.jsx("button",{className:"nut-fav-star active",onClick:ze=>{ze.stopPropagation(),Lt(re)},children:c.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),c.jsxs("button",{className:"nut-recent-item",onClick:()=>V(re),children:[c.jsxs("div",{className:"nut-recent-item-info",children:[c.jsx("span",{className:"nut-recent-item-name",children:re.name}),c.jsx("span",{className:"nut-recent-item-serving",children:re.serving||""})]}),c.jsxs("span",{className:"nut-recent-item-macros",children:[re.calories," cal"]})]})]},oe))})})})(),W==="favourites"&&J&&(()=>{const C=J.servingUnit||"g",V=J.portion,re=$e==="portion"&&V?Ze*V.weight:parseFloat(Ge)||0,oe=re/100,ze=C==="ml"?[100,200,250,500]:[50,100,150,200],Ue=$e==="portion"&&V?`${Ze} ${V.label}${Ze!==1?"s":""} (${Math.round(re)}${C})`:`${Math.round(re)}${C}`;return c.jsxs("div",{className:"nut-product-result",children:[c.jsxs("div",{className:"nut-product-name-row",children:[c.jsx("h4",{children:J.name}),c.jsx("button",{className:`nut-fav-star confirm${Rt(J.name)?" active":""}`,onClick:()=>Lt({name:J.name,protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories,serving:J.servingSize,per100g:{protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories},servingUnit:J.servingUnit||"g",portion:J.portion||null}),children:c.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Rt(J.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),c.jsxs("p",{className:"nut-product-per",children:["Per 100",C,":"]}),c.jsxs("div",{className:"nut-product-macros",children:[c.jsxs("span",{className:"nut-macro-p",children:[J.protein,"g P"]}),c.jsxs("span",{className:"nut-macro-c",children:[J.carbs,"g C"]}),c.jsxs("span",{className:"nut-macro-f",children:[J.fats,"g F"]}),c.jsxs("span",{className:"nut-macro-cal",children:[J.calories," cal"]})]}),V&&c.jsxs("div",{className:"nut-mode-toggle",children:[c.jsx("button",{className:$e==="portion"?"active":"",onClick:()=>{It("portion"),Ze<1&&qe(1)},children:"Portions"}),c.jsxs("button",{className:$e==="weight"?"active":"",onClick:()=>{It("weight"),We(String(Math.round(re)||100))},children:["Custom (",C,")"]})]}),$e==="portion"&&V?c.jsxs("div",{className:"nut-portion-stepper",children:[c.jsx("button",{className:"nut-stepper-btn",onClick:()=>qe(Math.max(1,Ze-1)),children:"-"}),c.jsxs("div",{className:"nut-stepper-display",children:[c.jsx("span",{className:"nut-stepper-count",children:Ze}),c.jsxs("span",{className:"nut-stepper-label",children:[V.label,Ze!==1?"s":""]}),c.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),C]})]}),c.jsx("button",{className:"nut-stepper-btn",onClick:()=>qe(Ze+1),children:"+"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"nut-serving-adjust",children:[c.jsxs("label",{children:["Serving (",C,")"]}),c.jsx("input",{type:"number",inputMode:"numeric",value:Ge,onChange:He=>We(He.target.value),onFocus:He=>He.target.select(),min:"0"})]}),c.jsx("div",{className:"nut-quick-amounts",children:ze.map(He=>c.jsxs("button",{className:`nut-quick-btn${Ge===String(He)?" active":""}`,onClick:()=>We(String(He)),children:[He,C]},He))})]}),c.jsx("div",{className:"nut-product-total",children:c.jsxs("span",{children:["Total: ",Math.round(J.protein*oe),"p / ",Math.round(J.carbs*oe),"c / ",Math.round(J.fats*oe),"f / ",Math.round(J.calories*oe)," cal"]})}),c.jsxs("div",{className:"nut-product-actions",children:[c.jsx("button",{className:"nut-btn-secondary",onClick:()=>Ee(null),children:"Back to Favourites"}),c.jsx("button",{className:"nut-btn-primary",onClick:()=>Bt({name:J.name,protein:Math.round(J.protein*oe),carbs:Math.round(J.carbs*oe),fats:Math.round(J.fats*oe),calories:Math.round(J.calories*oe),serving:Ue}),children:"Add"})]})]})})()]})}),c.jsx(Rl,{active:"nutrition"}),Ot&&c.jsx("div",{className:`toast-notification ${Ot.type}`,children:Ot.message})]})}const d1="/login/assets/randomiser-glq9YJkL.jpg",RD="/login/assets/programme-card-workout-CnNzTYkz.webp",CD="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",ND="/login/assets/mg-arms-BeOQU3wx.jpg",f1=60,sp=5,ID=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],jD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},DD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},MD={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},rp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},ip=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:CD},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Ec=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:ND},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],m1={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},p1=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],ap=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],Zo=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],PD=[5,10,15,20,30];function OD(r){return r.replace(/\b\w/g,e=>e.toUpperCase())}function LD(r){const e=[...r];for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[e[n],e[i]]=[e[i],e[n]]}return e}function VD(){const{currentUser:r,isClient:e,clientData:n,loading:i}=Aa(),{isDark:o,toggleTheme:u,accent:d}=Al(),p=sr(),[g,y]=k.useState("menu"),[w,x]=k.useState(["bodyweight"]),[T,O]=k.useState("core"),[q,G]=k.useState("intermediate"),[z,ie]=k.useState(15),[ee,he]=k.useState([]),[_e,je]=k.useState(!1),Ne=k.useRef(!1),N=k.useRef([]),[S,R]=k.useState([]),[I,D]=k.useState(2),[U,j]=k.useState(Zo[1]),[et,pt]=k.useState(1),[W,ge]=k.useState(0),[ke,Je]=k.useState("work"),[Qe,P]=k.useState(0),[H,de]=k.useState(!1),[ye,Ae]=k.useState(0),[xe,Fe]=k.useState(null),rt=k.useRef(null);k.useRef(null),k.useRef(null);const[it,Qt]=k.useState(null),pn=k.useCallback((B,ne="info")=>{Qt({message:B,type:ne}),setTimeout(()=>Qt(null),3e3)},[]),[At,en]=k.useState(null),[J,Ee]=k.useState(null),[Ge,We]=k.useState(0),[Ze,qe]=k.useState(0),[$e,It]=k.useState([]),[_n,us]=k.useState(""),[Ot,gn]=k.useState(""),[tn,wn]=k.useState(!1),[ae,pe]=k.useState(0),[be,Ve]=k.useState(!1),[Ce,Te]=k.useState({}),De=k.useRef(null),Se=k.useRef(null),[Me,at]=k.useState([]),[vt,yt]=k.useState(null),[Jt,Rn]=k.useState(0),[Rt,Lt]=k.useState(0),[Bt,ts]=k.useState(0),[rr,$r]=k.useState(0),[ns,zs]=k.useState(0),[Kr,Fs]=k.useState(0),[Ai,xr]=k.useState({beginner:0,intermediate:0,advanced:0}),[Er,hs]=k.useState(null),[Yr,Hn]=k.useState(""),[ss,an]=k.useState(!1);k.useEffect(()=>{!i&&(!r||!e)&&p("/")},[r,e,i,p]),k.useEffect(()=>{if(!r||!n)return;(async()=>{try{const ne=Or(gt,"workoutLogs"),X=ul(ne,eo("clientId","==",n.id)),ve=(await to(X)).docs.map(jt=>jt.data()),Pe=ve.filter(jt=>jt.type!=="programme");$r(Pe.length);const st=Pe.reduce((jt,hn)=>jt+(hn.duration||0),0);zs(st);const Oe={beginner:0,intermediate:0,advanced:0};Pe.forEach(jt=>{jt.level&&Oe[jt.level]!==void 0&&Oe[jt.level]++}),xr(Oe);const wt=new Date,on=wt.getDay(),Dt=on===0?-6:1-on,nn=new Date(wt);nn.setDate(wt.getDate()+Dt),nn.setHours(0,0,0,0);const Ci=nn.getTime(),Ra=ve.filter(jt=>{const hn=jt.completedAt;return hn?(hn.toDate?hn.toDate().getTime():new Date(hn).getTime())>=Ci:!1});Rn(Ra.filter(jt=>jt.type!=="programme").length);let Ni=0;if(n)try{const jt=await zn(Ft(gt,"clientProgrammes",n.id));if(jt.exists()){const hn=jt.data(),dn=hn.templateId;Ni=Ra.filter(Wn=>Wn.type==="programme"&&Wn.programmeId===dn).length,hs(dn);const ar=ip.find(Wn=>Wn.id===dn);ar&&Hn(ar.name);const or=DD[dn];if(or){const Wn=Object.keys(hn.completedSessions||{}).length,rs=or.duration*or.daysPerWeek;ts(rs>0?Math.round(Wn/rs*100):0)}}else hs(null),Hn(""),ts(0)}catch{}Lt(Ni);const ir=Pe.map(jt=>jt.completedAt).filter(Boolean).map(jt=>jt.toDate?jt.toDate().getTime():new Date(jt).getTime()).sort((jt,hn)=>hn-jt);if(ir.length===0)Fs(0);else{const jt=new Set;ir.forEach(rs=>{const Tr=new Date(rs),lr=Tr.getDay(),Ii=lr===0?-6:1-lr,ms=new Date(Tr);ms.setDate(Tr.getDate()+Ii),ms.setHours(0,0,0,0),jt.add(ms.getTime())});const hn=[...jt].sort((rs,Tr)=>Tr-rs);let dn=0;const ar=new Date(wt),or=wt.getDay()===0?-6:1-wt.getDay();ar.setDate(wt.getDate()+or),ar.setHours(0,0,0,0);let Wn=ar.getTime();hn.includes(Wn)||(Wn-=10080*60*1e3);for(let rs=0;rs<200&&hn.includes(Wn);rs++)dn++,Wn-=10080*60*1e3;Fs(dn)}}catch(ne){console.error("Error loading workout stats:",ne)}finally{an(!0)}})()},[r,n,g]);const yn=()=>{const B=[];let ne;T==="mix"?ne=["core","upper","lower"]:T==="fullbody"?ne=["upper","lower"]:ne=[T];for(const X of w)for(const me of ne)B.push(`exercises/${X}/${me}`);return B},bs=async()=>{if(Ne.current){for(;Ne.current;)await new Promise(B=>setTimeout(B,200));return N.current}Ne.current=!0,je(!0);try{const B=yn(),ne=[];for(const Pe of B)try{const st=Nc(Ic,Pe),Oe=await u1(st);ne.push(...Oe.items)}catch{console.warn(`Folder ${Pe} not found, skipping.`)}if(ne.length===0&&w.includes("bodyweight")&&T==="core")try{const Pe=Nc(Ic,"core"),st=await u1(Pe);ne.push(...st.items)}catch{console.warn("Legacy core/ folder not found either.")}if(ne.length===0){const Pe=w.map(Oe=>p1.find(wt=>wt.key===Oe)?.label).join(" + "),st=ap.find(Oe=>Oe.key===T)?.label;return pn(`No exercises found for ${Pe} / ${st}. Upload videos to Firebase Storage.`,"error"),Ne.current=!1,je(!1),[]}const X=new Set,me=ne.filter(Pe=>{const st=Pe.name.replace(/\.(mp4|gif)$/i,"");return X.has(st)?!1:(X.add(st),!0)}),ve=await Promise.all(me.map(async Pe=>{const st=await $h(Pe),Oe=OD(Pe.name.replace(/\.(mp4|gif)$/i,"")),wt=/\.gif$/i.test(Pe.name);return{name:Oe,videoUrl:st,isGif:wt}}));return N.current=ve,he(ve),Ne.current=!1,je(!1),ve}catch(B){console.error("Error loading exercises:",B);const ne=B.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${B.message||B.code||"Unknown error"}`;return pn(ne,"error"),Ne.current=!1,je(!1),[]}},Rs=async()=>{y("spinning"),N.current=[];const B=await bs();if(B.length===0){y("setup");return}const ne=Zo.find(on=>on.key===q);j(ne);const X=ne.work+ne.rest,me=z*60,ve=Math.floor(me/X);let Pe,st;ve<=6?(Pe=Math.max(3,Math.floor(ve/2)),st=Math.floor(ve/Pe)):ve<=12?(Pe=Math.min(6,Math.floor(ve/2)),st=Math.floor(ve/Pe)):(Pe=Math.min(10,Math.floor(ve/2)),st=Math.floor(ve/Pe)),st=Math.max(2,st);const Oe=LD(B),wt=Oe.slice(0,Math.min(Pe,Oe.length));R(wt),D(st),setTimeout(()=>y("preview"),2e3)},Qr=()=>{y("countdown"),Ae(3)};k.useEffect(()=>{if(g!=="countdown")return;if(ye<=0){y("workout"),pt(1),ge(0),Je("work"),P(U.work),de(!1),Ue();return}ze();const B=setTimeout(()=>Ae(ne=>ne-1),1e3);return()=>clearTimeout(B)},[ye,g]),k.useEffect(()=>{if(g!=="workout"||H)return;if(Qe<=0){ds();return}Qe<=3&&ze();const B=setTimeout(()=>P(ne=>ne-1),1e3);return()=>clearTimeout(B)},[Qe,g,H]);const ds=()=>{if(ke==="work")Je("rest"),P(U.rest);else{const B=W+1;if(B>=S.length){const ne=et+1;if(ne>I){y("complete"),Ri();return}pt(ne),ge(0)}else ge(B);Je("work"),P(U.work),Ue()}},Ri=async()=>{if(r)try{await Lp(Or(gt,"workoutLogs"),{clientId:n.id,level:q,duration:z,equipment:w,focus:T,exerciseCount:S.length,rounds:I,exercises:S.map(B=>B.name),completedAt:ht.now()}),Rn(B=>B+1),$r(B=>B+1),zs(B=>B+z),xr(B=>({...B,[q]:(B[q]||0)+1}))}catch(B){console.error("Error saving workout log:",B)}},_s=async(B,ne,X)=>{if(!(!n||!ne))try{const me=n.id,ve=await zn(Ft(gt,"coreBuddyPBs",me)),st=(ve.exists()?ve.data():null)?.exercises||{},Oe=st[B];let wt=!1;if(Oe?(ne>(Oe.weight||0)||ne===(Oe.weight||0)&&X>(Oe.reps||0))&&(wt=!0):wt=!0,wt){const on={...st,[B]:{weight:ne,reps:X,achievedAt:ht.now()}};await Lr(Ft(gt,"coreBuddyPBs",me),{clientId:n.id,exercises:on,updatedAt:ht.now()}),pn(`New PB! ${ne}kg  ${X} reps`,"success"),ze(),await Cs(B,ne)}}catch(me){console.error("Error checking PB:",me)}},Cs=async(B,ne)=>{if(n)try{const X=await zn(Ft(gt,"coreBuddyTargets",n.id));if(!X.exists())return;const ve=(X.data().targets||{})[B];if(!ve||ne<ve.targetWeight)return;const Pe=await zn(Ft(gt,"coreBuddyAchievements",n.id)),st=Pe.exists()?Pe.data():{clientId:n.id,badges:[],totalVolume:0};if(st.badges.some(Dt=>Dt.type==="pb_target"&&Dt.exercise===B&&Dt.targetWeight===ve.targetWeight))return;const wt={type:"pb_target",exercise:B,group:jD[B]||"push",targetWeight:ve.targetWeight,achievedAt:ht.now()},on=[...st.badges,wt];await Lr(Ft(gt,"coreBuddyAchievements",n.id),{...st,badges:on,updatedAt:ht.now()}),at(Dt=>[...Dt,wt])}catch(X){console.error("Error checking target badge:",X)}},fs=async B=>{if(!(!n||B<=0))try{const ne=await zn(Ft(gt,"coreBuddyAchievements",n.id)),X=ne.exists()?ne.data():{clientId:n.id,badges:[],totalVolume:0},me=X.totalVolume||0,ve=me+B,Pe=[];ID.forEach(Oe=>{ve>=Oe.threshold&&me<Oe.threshold&&(X.badges.some(on=>on.type==="volume_milestone"&&on.milestone===Oe.threshold)||Pe.push({type:"volume_milestone",milestone:Oe.threshold,label:Oe.label,achievedAt:ht.now()}))});const st=[...X.badges,...Pe];await Lr(Ft(gt,"coreBuddyAchievements",n.id),{clientId:n.id,badges:st,totalVolume:Math.round(ve),updatedAt:ht.now()}),Pe.length>0&&at(Oe=>[...Oe,...Pe])}catch(ne){console.error("Error updating volume:",ne)}},On=async B=>{if(Ee(B),B.interval){const me=[];for(const ve of B.exercises){let Pe=null,st=!1;if(ve.storagePath)try{const Oe=Nc(Ic,ve.storagePath);Pe=await $h(Oe),st=/\.gif$/i.test(ve.storagePath)}catch{}me.push({name:ve.name,videoUrl:Pe,isGif:st})}R(me),D(B.rounds),j({work:B.work,rest:B.rest}),y("preview");return}const ne={};for(const me of B.exercises)if(me.storagePath)try{const ve=Nc(Ic,me.storagePath);ne[me.name]={url:await $h(ve),isGif:/\.gif$/i.test(me.storagePath)}}catch{}Te(ne);const X=B.exercises.map(me=>({name:me.name,type:me.type,targetSets:me.sets,targetReps:me.reps||0,targetTime:me.time||0,sets:[]}));It(X),We(0),qe(0),us(""),gn(""),Ve(!1),wn(!1),pe(0),at([]),yt(null),y("muscle_workout")},Gn=()=>{const B=De.current;B&&(B.paused?(B.play(),Ve(!0)):(B.pause(),Ve(!1)))};k.useEffect(()=>{if(g!=="muscle_workout"||!tn||ae<=0){g==="muscle_workout"&&tn&&ae<=0&&(wn(!1),ze());return}return Se.current=setTimeout(()=>pe(B=>B-1),1e3),()=>clearTimeout(Se.current)},[g,tn,ae]);const C=async()=>{const B=$e[Ge];let ne={};if(B.type==="weighted"){const ve=parseFloat(_n)||0,Pe=parseInt(Ot)||0;if(Pe===0){pn("Enter your reps","error");return}ne={weight:ve,reps:Pe}}else if(B.type==="reps"){const ve=parseInt(Ot)||0;if(ve===0){pn("Enter your reps","error");return}ne={reps:ve}}else if(B.type==="timed"){const ve=B.targetTime-ae;ne={time:Math.max(ve,1)}}const X=[...$e];X[Ge]={...B,sets:[...B.sets,ne]},It(X),B.type==="weighted"&&ne.weight>0&&await _s(B.name,ne.weight,ne.reps);const me=B.sets.length+1;if(me<B.targetSets)qe(me),gn(""),wn(!1),pe(0);else if(Ge+1<$e.length){const ve=Ge+1;We(ve),qe(0),us(""),gn(""),Ve(!1),wn(!1),pe(0)}else await V(X),y("muscle_complete")},V=async B=>{if(!(!r||!n))try{const ne=B.reduce((me,ve)=>me+ve.sets.reduce((Pe,st)=>Pe+(st.weight||0)*(st.reps||0),0),0),X=B.reduce((me,ve)=>me+ve.sets.length,0);await Lp(Or(gt,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:At,sessionId:J?.id,sessionName:J?.name,exerciseCount:B.length,totalSets:X,duration:Math.round(X*1.5),volume:Math.round(ne),exercises:B.map(me=>({name:me.name,type:me.type,sets:me.sets})),completedAt:ht.now()}),ne>0&&await fs(ne),Me.length>0&&yt({badges:[...Me]})}catch(ne){console.error("Error saving muscle group workout log:",ne)}},re=k.useRef(null),oe=()=>(re.current||(re.current=new(window.AudioContext||window.webkitAudioContext)),re.current),ze=()=>{try{const B=oe(),ne=B.createOscillator(),X=B.createGain();ne.connect(X),X.connect(B.destination),ne.frequency.value=880,X.gain.value=.3,ne.start(B.currentTime),ne.stop(B.currentTime+.15)}catch{}},Ue=()=>{try{const B=oe(),ne=B.createOscillator(),X=B.createGain();ne.connect(X),X.connect(B.destination),ne.frequency.value=1200,X.gain.value=.4,ne.start(B.currentTime),ne.stop(B.currentTime+.3)}catch{}};k.useEffect(()=>{if(g!=="workout"||ke!=="work"||!S[W]?.isGif)return;const ne=setInterval(()=>{const X=rt.current;if(!X)return;const me=X.getAttribute("src");X.removeAttribute("src"),setTimeout(()=>{rt.current&&rt.current.setAttribute("src",me)},0)},4e3);return()=>clearInterval(ne)},[g,ke,W,et,S]);const He=(B,ne,X)=>{const me=Math.round(B/ne*f1);return c.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:bD.map((ve,Pe)=>c.jsx("line",{x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,className:Pe<me?`wk-tick-filled ${X}`:"wk-tick-empty",strokeWidth:ve.thick?"3":"2"},Pe))})},zt=()=>{const B=S.length*I;return((et-1)*S.length+W+(ke==="rest"?.5:0))/B},ut=it&&c.jsx("div",{className:`toast-notification ${it.type}`,children:it.message});if(i)return c.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),c.jsx("div",{className:"wk-loading-inline",children:c.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return c.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsx("div",{className:"header-actions",children:c.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),c.jsxs("main",{className:"wk-main",children:[c.jsxs("div",{className:"wk-menu-heading",children:[c.jsx("h2",{children:"Choose Your Workout"}),c.jsx("p",{children:"No excuses. Just results."})]}),c.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:c.jsx("img",{src:d1,alt:"Randomise Workout",className:"wk-hero-bg"})}),c.jsxs("div",{className:"wk-section-header",children:[c.jsx("h2",{children:"Programmes"}),c.jsxs("span",{className:"wk-section-count",children:[ip.length," available"]})]}),c.jsx("div",{className:"wk-prog-scroll-wrap",children:c.jsx("div",{className:"wk-prog-scroll",children:ip.map((B,ne)=>B.image?c.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:B.id}}),style:{animationDelay:`${ne*.06}s`},children:[c.jsx("img",{src:B.image,alt:B.name,className:"wk-prog-img"}),ne===0&&c.jsx("div",{className:"wk-swipe-arrow",children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M9 18l6-6-6-6"})})})]},B.id):c.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:B.id}}),style:{animationDelay:`${ne*.06}s`},children:[c.jsx("img",{src:RD,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),c.jsx("div",{className:"wk-prog-hero-overlay",style:{background:MD[B.focus]}}),c.jsxs("div",{className:"wk-prog-hero-content",children:[c.jsxs("div",{className:"wk-prog-hero-top",children:[c.jsxs("span",{className:"wk-prog-hero-badge",children:[B.duration," WEEKS"]}),c.jsx("span",{className:"wk-prog-hero-level",children:B.level})]}),c.jsxs("div",{className:"wk-prog-hero-bottom",children:[c.jsx("h3",{children:B.name.toUpperCase()}),c.jsxs("p",{children:[B.daysPerWeek,"x per week  ",B.focus==="fullbody"?"Full Body":B.focus.charAt(0).toUpperCase()+B.focus.slice(1)," Focus"]}),c.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),ne===0&&c.jsx("div",{className:"wk-swipe-arrow",children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M9 18l6-6-6-6"})})})]},B.id))})}),c.jsxs("div",{className:"wk-section-header",children:[c.jsx("h2",{children:"Muscle Groups"}),c.jsxs("span",{className:"wk-section-count",children:[Ec.length," groups"]})]}),c.jsx("div",{className:"wk-muscle-grid",children:Ec.map((B,ne)=>c.jsx("button",{className:`wk-muscle-hero-card${B.image?" wk-muscle-thumb":""}`,onClick:()=>{en(B.key),y("muscle_sessions")},style:{animationDelay:`${ne*.05}s`},children:B.image?c.jsx("img",{src:B.image,alt:B.label,className:"wk-muscle-thumb-img"}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:d1,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),c.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:rp[B.key]}}),c.jsxs("div",{className:"wk-muscle-hero-content",children:[c.jsx("div",{className:"wk-muscle-hero-icon",children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:B.icon})})}),c.jsxs("div",{className:"wk-muscle-hero-text",children:[c.jsx("span",{className:"wk-muscle-hero-name",children:B.label}),c.jsxs("span",{className:"wk-muscle-hero-count",children:[m1[B.key]?.length||0," sessions"]})]})]})]})},B.key))})]}),c.jsx(Rl,{active:"workouts"}),ut]});if(g==="setup"){const B=ap.find(X=>X.key===T)?.label||T,ne=Zo.find(X=>X.key===q)?.label||q;return c.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsx("div",{className:"header-actions",children:c.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),c.jsxs("main",{className:"wk-main wk-setup-main",children:[c.jsxs("div",{className:"wk-stats-strip",children:[c.jsxs("div",{className:"wk-stats-strip-ring",children:[c.jsx("svg",{viewBox:"0 0 200 200",children:no.map((X,me)=>{const ve=Math.round(Math.min(Jt,sp)/sp*f1);return c.jsx("line",{x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,className:me<ve?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:X.thick?"3":"2"},me)})}),c.jsxs("span",{className:"wk-stats-strip-ring-num",children:[Jt,c.jsxs("small",{children:["/",sp]})]})]}),c.jsxs("div",{className:"wk-stats-strip-items",children:[c.jsxs("div",{className:"wk-stats-strip-item",children:[c.jsx("span",{className:"wk-stats-strip-num",children:rr}),c.jsx("span",{className:"wk-stats-strip-label",children:"Workouts"})]}),c.jsxs("div",{className:"wk-stats-strip-item",children:[c.jsx("span",{className:"wk-stats-strip-num",children:ns}),c.jsx("span",{className:"wk-stats-strip-label",children:"Minutes"})]}),c.jsxs("div",{className:"wk-stats-strip-item",children:[c.jsx("span",{className:"wk-stats-strip-num",children:Kr}),c.jsx("span",{className:"wk-stats-strip-label",children:"Wk Streak"})]})]})]}),c.jsxs("div",{className:"wk-setup-section",children:[c.jsx("h2",{children:"Focus Area"}),c.jsx("div",{className:"wk-focus-grid",children:ap.map(X=>c.jsxs("button",{className:`wk-equip-btn${T===X.key?" active":""}${X.key==="mix"?" wk-mix-btn":""}`,onClick:()=>O(X.key),children:[c.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:X.icon})}),c.jsx("span",{children:X.label})]},X.key))})]}),c.jsxs("div",{className:"wk-setup-section",children:[c.jsx("h2",{children:"Level"}),c.jsx("div",{className:"wk-level-cards",children:Zo.map(X=>c.jsxs("button",{className:`wk-level-card wk-level-${X.key}${q===X.key?" active":""}`,onClick:()=>G(X.key),children:[c.jsx("span",{className:"wk-level-name",children:X.label}),c.jsx("span",{className:"wk-level-desc",children:X.desc})]},X.key))})]}),c.jsxs("div",{className:"wk-setup-section",children:[c.jsx("h2",{children:"Time"}),c.jsx("div",{className:"wk-time-options",children:PD.map(X=>c.jsxs("button",{className:`wk-time-btn${z===X?" active":""}`,onClick:()=>ie(X),children:[c.jsx("span",{className:"wk-time-num",children:X}),c.jsx("span",{className:"wk-time-unit",children:"min"})]},X))})]}),c.jsxs("div",{className:"wk-setup-section",children:[c.jsx("h2",{children:"Equipment"}),c.jsx("div",{className:"wk-equip-options",children:p1.map(X=>{const me=w.includes(X.key);return c.jsxs("button",{className:`wk-equip-btn${me?" active":""}`,onClick:()=>{x(ve=>me&&ve.length===1?ve:me?ve.filter(Pe=>Pe!==X.key):[...ve,X.key])},children:[c.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:X.icon})}),c.jsx("span",{children:X.label})]},X.key)})})]}),c.jsx("div",{className:"wk-setup-summary",children:c.jsxs("span",{children:[B,"  ",ne,"  ",z," min"]})})]}),c.jsx("div",{className:"wk-go-sticky",children:c.jsx("button",{className:"wk-randomise-btn",onClick:Rs,disabled:_e,children:_e?"Loading exercises...":"Randomise Workout"})}),ut]})}if(g==="spinning")return c.jsxs("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":d,children:[c.jsxs("div",{className:"wk-spin-container",children:[c.jsxs("div",{className:"wk-spin-ring",children:[c.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:no.map((B,ne)=>c.jsx("line",{x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,className:"wk-spin-tick",strokeWidth:B.thick?"3.5":"2",style:{animationDelay:`${ne*.03}s`}},ne))}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),c.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),ut]});if(g==="preview"){const B=J?.interval?{work:J.work,rest:J.rest}:Zo.find(X=>X.key===q),ne=S.length*I*(B.work+B.rest);return c.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>y(J?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsx("div",{className:"header-actions",children:c.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),c.jsxs("main",{className:"wk-main",children:[J?.interval&&c.jsx("h2",{className:"mg-preview-title",children:J.name}),c.jsxs("div",{className:"wk-preview-stats",children:[c.jsxs("div",{className:"wk-stat",children:[c.jsx("span",{className:"wk-stat-val",children:S.length}),c.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),c.jsxs("div",{className:"wk-stat",children:[c.jsx("span",{className:"wk-stat-val",children:I}),c.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),c.jsxs("div",{className:"wk-stat",children:[c.jsx("span",{className:"wk-stat-val",children:Math.ceil(ne/60)}),c.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),c.jsxs("div",{className:"wk-stat",children:[c.jsxs("span",{className:"wk-stat-val",children:[B.work,"/",B.rest]}),c.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),c.jsx("div",{className:"wk-preview-list",children:S.map((X,me)=>c.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${me*.06}s`},onClick:()=>Fe(X),children:[c.jsx("span",{className:"wk-preview-num",children:me+1}),c.jsx("div",{className:"wk-preview-thumb",children:X.isGif?c.jsx("img",{src:X.videoUrl,alt:X.name,loading:"lazy"}):c.jsx("video",{src:`${X.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),c.jsx("span",{className:"wk-preview-name",children:X.name}),c.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},me))}),xe&&c.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>Fe(null),children:c.jsxs("div",{className:"wk-preview-modal",onClick:X=>X.stopPropagation(),children:[c.jsx("button",{className:"wk-preview-modal-close",onClick:()=>Fe(null),"aria-label":"Close preview",children:c.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),c.jsx("div",{className:"wk-preview-modal-video",children:xe.isGif?c.jsx("img",{src:xe.videoUrl,alt:xe.name}):c.jsx("video",{src:xe.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),c.jsx("h3",{className:"wk-preview-modal-title",children:xe.name})]})}),c.jsxs("div",{className:"wk-preview-actions",children:[!J?.interval&&c.jsxs("button",{className:"wk-btn-secondary",onClick:()=>Rs(),children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("polyline",{points:"1 4 1 10 7 10"}),c.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),c.jsx("button",{className:"wk-btn-primary",onClick:Qr,children:"Start Workout"})]})]})]})}if(g==="countdown")return c.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":o?"dark":"light","data-accent":d,children:c.jsxs("div",{className:"wk-countdown-big",children:[c.jsx("span",{className:"wk-countdown-num",children:ye}),c.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const B=S[W],ne=ke==="work"?U.work:U.rest,X=ke==="rest"?W+1<S.length?S[W+1]:et<I?S[0]:null:null;return c.jsxs("div",{className:"wk-page wk-page-workout","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("div",{className:"wk-video-container",children:ke==="work"?B.isGif?c.jsx("img",{ref:rt,className:"wk-video",src:B.videoUrl,alt:B.name},B.videoUrl):c.jsx("video",{className:"wk-video",src:B.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},B.videoUrl):c.jsxs("div",{className:"wk-rest-screen",children:[c.jsx("span",{className:"wk-rest-label",children:"REST"}),X&&c.jsxs("span",{className:"wk-next-label",children:["Next: ",X.name]})]})}),c.jsx("div",{className:"wk-spotify",children:c.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),c.jsxs("div",{className:"wk-exercise-info",children:[c.jsxs("span",{className:"wk-exercise-counter",children:[W+1," / ",S.length]}),c.jsx("h2",{className:"wk-exercise-name",children:B.name}),c.jsxs("span",{className:"wk-round-label",children:["Round ",et," of ",I]})]}),c.jsx("div",{className:"wk-timer-section",children:c.jsxs("div",{className:"wk-timer-ring-wrap",children:[He(Qe,ne,ke==="work"?"wk-tick-work":"wk-tick-rest"),c.jsxs("div",{className:"wk-timer-center",children:[c.jsx("span",{className:"wk-timer-time",children:Qe}),c.jsx("span",{className:`wk-timer-phase ${ke}`,children:ke==="work"?"WORK":"REST"})]})]})}),c.jsxs("div",{className:"wk-controls",children:[c.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),c.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>de(!H),children:H?c.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):c.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[c.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),c.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),c.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{P(0)},children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[c.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),c.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),c.jsx("div",{className:"wk-progress-bar",children:c.jsx("div",{className:"wk-progress-fill",style:{width:`${zt()*100}%`}})})]})}if(g==="complete"){const B=Zo.find(X=>X.key===q),ne=S.length*I*(B.work+B.rest);return c.jsx("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":d,children:c.jsxs("div",{className:"wk-complete",children:[c.jsxs("div",{className:"wk-complete-ring",children:[c.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:no.map((X,me)=>c.jsx("line",{x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,className:"wk-tick-complete",strokeWidth:X.thick?"3.5":"2",style:{animationDelay:`${me*.02}s`}},me))}),c.jsx("div",{className:"wk-complete-center",children:c.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),c.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),c.jsxs("div",{className:"wk-complete-stats",children:[c.jsxs("div",{className:"wk-stat",children:[c.jsx("span",{className:"wk-stat-val",children:Math.ceil(ne/60)}),c.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),c.jsxs("div",{className:"wk-stat",children:[c.jsx("span",{className:"wk-stat-val",children:S.length*I}),c.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),c.jsxs("div",{className:"wk-stat",children:[c.jsx("span",{className:"wk-stat-val",children:I}),c.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),c.jsx("div",{className:"wk-complete-actions",children:c.jsx("button",{className:"wk-btn-primary",onClick:()=>{Ee(null),en(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const B=Ec.find(X=>X.key===At),ne=m1[At]||[];return c.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsx("div",{className:"header-actions",children:c.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),c.jsxs("main",{className:"wk-main",children:[c.jsxs("div",{className:"mg-sessions-header",children:[c.jsx("div",{className:"mg-sessions-icon",style:{background:rp[At]},children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:B?.icon})})}),c.jsxs("h2",{children:[B?.label," Workouts"]}),c.jsxs("p",{children:[ne.length," sessions available"]})]}),c.jsx("div",{className:"mg-sessions-list",children:ne.map((X,me)=>c.jsxs("button",{className:"mg-session-card",onClick:()=>{Ee(X),y("muscle_overview")},style:{animationDelay:`${me*.08}s`},children:[c.jsxs("div",{className:"mg-session-info",children:[c.jsx("h3",{children:X.name}),c.jsx("p",{children:X.desc}),c.jsx("div",{className:"mg-session-meta",children:X.interval?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),c.jsxs("span",{className:"mg-session-tag",children:[X.exercises.length," exercises"]}),c.jsxs("span",{className:"mg-session-tag",children:[X.rounds," rounds"]})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),c.jsxs("span",{className:"mg-session-tag",children:[X.exercises.length," exercises"]}),c.jsx("span",{className:"mg-session-tag",children:(()=>{const ve=X.exercises.map(Oe=>Oe.sets||0),Pe=Math.min(...ve),st=Math.max(...ve);return Pe===st?`${Pe} sets each`:`${Pe}-${st} sets each`})()})]})})]}),c.jsx("div",{className:"mg-session-arrow",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M9 18l6-6-6-6"})})})]},X.id))})]}),ut]})}if(g==="muscle_overview"){const B=J;if(!B)return null;const ne=Ec.find(X=>X.key===At);return c.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsx("div",{className:"header-actions",children:c.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),c.jsxs("main",{className:"wk-main mg-overview-main",children:[c.jsx("div",{className:"mg-overview-hero",style:{background:rp[At]},children:c.jsx("div",{className:"mg-overview-hero-content",children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:c.jsx("path",{d:ne?.icon})})})}),c.jsxs("div",{className:"mg-overview-header",children:[c.jsxs("div",{className:"mg-overview-title-row",children:[c.jsx("h2",{children:B.name}),B.level&&c.jsx("span",{className:"mg-overview-level",children:B.level})]}),c.jsx("p",{className:"mg-overview-desc",children:B.desc})]}),B.overview&&c.jsxs("div",{className:"mg-overview-section",children:[c.jsxs("h3",{children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),c.jsx("p",{children:B.overview})]}),B.tips&&B.tips.length>0&&c.jsxs("div",{className:"mg-overview-section",children:[c.jsxs("h3",{children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),c.jsx("ul",{className:"mg-overview-tips",children:B.tips.map((X,me)=>c.jsx("li",{children:X},me))})]}),c.jsxs("div",{className:"mg-overview-section",children:[c.jsxs("h3",{children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),c.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),c.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",B.exercises.length,")"]}),c.jsx("div",{className:"mg-overview-exercises",children:B.exercises.map((X,me)=>c.jsxs("div",{className:"mg-overview-exercise",children:[c.jsx("span",{className:"mg-overview-ex-num",children:me+1}),c.jsxs("div",{className:"mg-overview-ex-info",children:[c.jsx("span",{className:"mg-overview-ex-name",children:X.name}),B.interval?c.jsxs("span",{className:"mg-overview-ex-detail",children:[B.work,"s work / ",B.rest,"s rest"]}):c.jsxs("span",{className:"mg-overview-ex-detail",children:[X.sets," sets  ",X.reps?`${X.reps} reps`:`${X.time}s`,X.type==="weighted"&&"  weighted"]})]})]},me))})]}),c.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>On(B),children:[c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),ut]})}if(g==="muscle_workout"){const B=J;if(!B)return null;const ne=B.exercises[Ge],X=$e[Ge];if(!ne||!X)return null;const me=X.sets.length,ve=B.exercises.length,Pe=B.exercises.reduce((Dt,nn)=>Dt+(nn.sets||0),0),Oe=$e.reduce((Dt,nn)=>Dt+nn.sets.length,0)/Pe*100,wt=Ce[ne.name];ne.type==="timed"&&ae===0&&!tn&&me===Ze&&setTimeout(()=>pe(ne.time),0);const on=me+1<ne.sets?"Log Set":Ge+1<ve?"Log Set  Next Exercise":"Log Set  Complete";return c.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("div",{className:"mg-session-progress",children:c.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Oe}%`}})}),c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsxs("span",{className:"mg-header-info",children:["Exercise ",Ge+1,"/",ve]}),c.jsx("div",{style:{width:22}})]})}),c.jsxs("main",{className:"wk-main",children:[wt?c.jsxs("div",{className:"mg-video-container",onClick:Gn,children:[wt.isGif?c.jsx("img",{className:"mg-video",src:wt.url,alt:ne.name}):c.jsx("video",{ref:De,className:"mg-video",src:wt.url,loop:!0,muted:!0,playsInline:!0},ne.name),!be&&!wt.isGif&&c.jsxs("div",{className:"mg-video-overlay",children:[c.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:c.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),c.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):c.jsxs("div",{className:"mg-video-placeholder",children:[c.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[c.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),c.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),c.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),c.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),c.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),c.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),c.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),c.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),c.jsx("span",{children:"Video coming soon"})]}),c.jsx("div",{className:"wk-spotify",children:c.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),c.jsxs("div",{className:"mg-exercise-card",children:[c.jsx("h2",{className:"mg-ex-name",children:ne.name}),c.jsx("span",{className:`mg-ex-type-badge ${ne.type}`,children:ne.type==="weighted"?"Weight + Reps":ne.type==="reps"?"Reps Only":"Timed"}),c.jsxs("div",{className:"mg-ex-set-info",children:[c.jsxs("span",{className:"mg-ex-set-num",children:["Set ",me+1," of ",ne.sets]}),ne.type!=="timed"&&c.jsxs("span",{className:"mg-ex-target",children:["Target: ",ne.reps," reps"]}),ne.type==="timed"&&c.jsxs("span",{className:"mg-ex-target",children:["Target: ",ne.time,"s"]})]}),ne.type==="weighted"&&c.jsxs("div",{className:"mg-input-area",children:[c.jsxs("div",{className:"mg-input-group",children:[c.jsx("label",{children:"Weight (kg)"}),c.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:_n,onChange:Dt=>us(Dt.target.value),placeholder:"0"})]}),c.jsxs("div",{className:"mg-input-group",children:[c.jsx("label",{children:"Reps"}),c.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Ot,onChange:Dt=>gn(Dt.target.value),placeholder:"0"})]})]}),ne.type==="reps"&&c.jsx("div",{className:"mg-input-area",children:c.jsxs("div",{className:"mg-input-group mg-input-single",children:[c.jsx("label",{children:"Reps"}),c.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Ot,onChange:Dt=>gn(Dt.target.value),placeholder:"0"})]})}),ne.type==="timed"&&c.jsxs("div",{className:"mg-timer-area",children:[c.jsx("div",{className:"mg-timer-display",children:c.jsxs("span",{className:"mg-timer-value",children:[ae,"s"]})}),tn?c.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>wn(!1),children:"Stop"}):c.jsx("button",{className:"mg-timer-btn",onClick:()=>{ae===0&&pe(ne.time),wn(!0)},children:ae<ne.time&&ae>0?"Resume":"Start Timer"})]}),c.jsx("button",{className:"mg-log-set-btn",onClick:C,children:on}),X.sets.length>0&&c.jsx("div",{className:"mg-completed-sets",children:X.sets.map((Dt,nn)=>c.jsxs("div",{className:"mg-completed-set",children:[c.jsx("span",{className:"mg-completed-set-check",children:""}),c.jsxs("span",{children:["Set ",nn+1,": ",Dt.weight!=null?`${Dt.weight}kg  ${Dt.reps}`:Dt.reps!=null?`${Dt.reps} reps`:`${Dt.time}s`]})]},nn))})]})]}),ut]})}if(g==="muscle_complete"){const B=$e.reduce((me,ve)=>me+ve.sets.length,0),ne=$e.reduce((me,ve)=>me+ve.sets.reduce((Pe,st)=>Pe+(st.weight||0)*(st.reps||0),0),0),X=Ec.find(me=>me.key===At)?.label||"";return c.jsxs("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":d,children:[c.jsxs("div",{className:"wk-complete",children:[c.jsxs("div",{className:"wk-complete-ring",children:[c.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:no.map((me,ve)=>c.jsx("line",{x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,className:"wk-tick-complete",strokeWidth:me.thick?"3.5":"2",style:{animationDelay:`${ve*.02}s`}},ve))}),c.jsx("div",{className:"wk-complete-center",children:c.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),c.jsxs("h2",{className:"wk-complete-title",children:[X," Complete!"]}),c.jsx("p",{className:"mg-complete-session-name",children:J?.name}),c.jsxs("div",{className:"wk-complete-stats",children:[c.jsxs("div",{className:"wk-stat",children:[c.jsx("span",{className:"wk-stat-val",children:$e.length}),c.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),c.jsxs("div",{className:"wk-stat",children:[c.jsx("span",{className:"wk-stat-val",children:B}),c.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),ne>0&&c.jsxs("div",{className:"wk-stat",children:[c.jsx("span",{className:"wk-stat-val",children:Math.round(ne).toLocaleString()}),c.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),c.jsx("div",{className:"wk-complete-actions",children:c.jsx("button",{className:"wk-btn-primary",onClick:()=>{Ee(null),en(null),yt(null),y("menu")},children:"Done"})})]}),vt&&c.jsx("div",{className:"mg-badge-celebration",onClick:()=>yt(null),children:c.jsxs("div",{className:"mg-badge-celebration-card",children:[c.jsx("div",{className:"mg-badge-celebration-icon",children:c.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:c.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),c.jsx("h3",{className:"mg-badge-celebration-title",children:vt.badges.length===1?"Badge Earned!":`${vt.badges.length} Badges Earned!`}),c.jsx("div",{className:"mg-badge-celebration-list",children:vt.badges.map((me,ve)=>c.jsx("div",{className:"mg-badge-celebration-item",children:me.type==="pb_target"?`${me.exercise}  ${me.targetWeight}kg`:me.label},ve))}),c.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const UD=60,BD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},zD=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],g1=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function Dh(r,e,n){const i=r.baseReps?r.baseReps+(e-1)*(n.repProg||0):void 0,o=r.baseTime?r.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:r.sets,reps:i,time:o}}const FD={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function qD(){const{currentUser:r,isClient:e,clientData:n,loading:i}=Aa(),{isDark:o,toggleTheme:u,accent:d}=Al(),p=sr(),g=wr(),[y,w]=k.useState("loading"),[x,T]=k.useState(null),O=k.useRef(!1),[q,G]=k.useState(null),[z,ie]=k.useState(1),[ee,he]=k.useState(0),[_e,je]=k.useState(0),[Ne,N]=k.useState(0),[S,R]=k.useState([]),[I,D]=k.useState(""),[U,j]=k.useState(""),[et,pt]=k.useState(!1),[W,ge]=k.useState(0),ke=k.useRef(null),[Je,Qe]=k.useState({}),[P,H]=k.useState(!1),de=k.useRef(null),[ye,Ae]=k.useState(null),[xe,Fe]=k.useState([]);k.useEffect(()=>{window.scrollTo(0,0)},[y]);const[rt,it]=k.useState(null),Qt=k.useCallback((ae,pe="info")=>{it({message:ae,type:pe}),setTimeout(()=>it(null),4e3)},[]),pn=k.useRef(null),At=()=>(pn.current||(pn.current=new(window.AudioContext||window.webkitAudioContext)),pn.current),en=()=>{try{const ae=At(),pe=ae.createOscillator(),be=ae.createGain();pe.connect(be),be.connect(ae.destination),pe.frequency.value=1200,be.gain.value=.4,pe.start(ae.currentTime),pe.stop(ae.currentTime+.3)}catch{}};k.useEffect(()=>{!i&&(!r||!e)&&p("/")},[r,e,i,p]),k.useEffect(()=>{if(!n)return;(async()=>{try{const pe=Ft(gt,"clientProgrammes",n.id),be=await zn(pe);be.exists()?(G(be.data()),w("dashboard")):g.state?.templateId?w("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(pe){console.error("Error loading programme:",pe),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),k.useEffect(()=>{if(O.current||y==="loading")return;const ae=g.state?.templateId;if(!ae)return;const pe=g1.find(be=>be.id===ae);pe&&(O.current=!0,T(pe),w("overview"))},[y,g.state]),k.useEffect(()=>{if(!et||W<=0){et&&W<=0&&(pt(!1),en());return}return ke.current=setTimeout(()=>ge(ae=>ae-1),1e3),()=>clearTimeout(ke.current)},[et,W]);const J=async ae=>{if(n)try{await Lr(Ft(gt,"clientProgrammes",n.id),ae),G(ae)}catch(pe){console.error("Error saving programme:",pe),Qt("Failed to save. Check Firestore rules for clientProgrammes.","error")}},Ee=async ae=>{const pe={templateId:ae.id,startDate:ht.now(),completedSessions:{}};await J(pe),w("dashboard")},Ge=async()=>{if(n)try{await oj(Ft(gt,"clientProgrammes",n.id)),G(null),w("browse")}catch(ae){console.error("Error quitting programme:",ae)}},We=()=>q?g1.find(ae=>ae.id===q.templateId):null,Ze=()=>{if(!q)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const ae=q.completedSessions||{},pe=Object.keys(ae).length,be=We();if(!be)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const Ve=be.duration*be.daysPerWeek,Ce=Math.min(Math.floor(pe/be.daysPerWeek)+1,be.duration),Te=pe-(Ce-1)*be.daysPerWeek;for(let De=1;De<=be.duration;De++)for(let Se=0;Se<be.daysPerWeek;Se++){const Me=`w${De}d${Se}`;if(!ae[Me])return{currentWeek:De,completedThisWeek:Te,nextDay:Se,nextWeek:De,totalCompleted:pe,totalSessions:Ve}}return{currentWeek:be.duration,completedThisWeek:be.daysPerWeek,nextDay:-1,totalCompleted:pe,totalSessions:Ve,complete:!0}},qe=(ae,pe,be)=>{if(!q||ae<=1)return null;const Ve=`w${ae-1}d${pe}`,Ce=q.completedSessions?.[Ve];if(!Ce)return null;const Te=Ce.exercises?.find(De=>De.name===be);return Te?.sets?.length?Te.sets[Te.sets.length-1]:null},$e=(ae,pe)=>{const be=We();if(!be)return;ie(ae),he(pe),je(0),N(0),R([]),j(""),pt(!1),ge(0),H(!1),Qe({});const Ve=be.days[pe],Ce=Ve.exercises.map(Me=>{const at=Dh(Me,ae,be);return{name:Me.name,type:Me.type,pbKey:Me.pbKey,targetSets:at.sets,targetReps:at.reps,targetTime:at.time,sets:[]}});R(Ce);const Te=Ve.exercises[0],De=qe(ae,pe,Te.name);De?.weight&&Te.type==="weighted"?D(String(De.weight)):D(""),(async()=>{const Me={};for(const at of Ve.exercises)if(at.storagePath)try{const vt=Nc(Ic,at.storagePath),yt=await $h(vt);Me[at.name]={url:yt,isGif:/\.gif$/i.test(at.storagePath)}}catch(vt){console.warn(`Video not found for ${at.name}:`,vt)}Qe(Me)})(),w("session")},It=async()=>{We();const ae=S[_e];if(!ae)return;let pe={};if(ae.type==="weighted"){const Ce=parseFloat(I)||0,Te=parseInt(U)||0;if(Te===0){Qt("Enter your reps","error");return}pe={weight:Ce,reps:Te}}else if(ae.type==="reps"){const Ce=parseInt(U)||0;if(Ce===0){Qt("Enter your reps","error");return}pe={reps:Ce}}else if(ae.type==="timed"){const Ce=ae.targetTime-W;pe={time:Math.max(Ce,1)}}const be=[...S];be[_e]={...ae,sets:[...ae.sets,pe]},R(be),ae.type==="weighted"&&pe.weight>0&&await Ot(ae.name,pe.weight,pe.reps);const Ve=ae.sets.length+1;if(Ve<ae.targetSets)N(Ve),D(pe.weight?String(pe.weight):""),j(""),pt(!1),ge(0);else if(_e+1<S.length){const Ce=_e+1;je(Ce),N(0),H(!1);const De=We()?.days[ee]?.exercises[Ce],Se=qe(z,ee,De?.name);Se?.weight&&De?.type==="weighted"?D(String(Se.weight)):D(""),j(""),pt(!1),ge(0)}else await _n(be)},_n=async ae=>{if(!q||!n)return;const pe=`w${z}d${ee}`,be={...q.completedSessions,[pe]:{completedAt:new Date().toISOString(),exercises:ae.map(Te=>({name:Te.name,type:Te.type,sets:Te.sets}))}},Ve={...q,completedSessions:be};await J(Ve);const Ce=ae.reduce((Te,De)=>Te+De.sets.reduce((Se,Me)=>Se+(Me.weight||0)*(Me.reps||0),0),0);Ce>0&&await us(Ce);try{const Te=We();await Lp(Or(gt,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:Te?.id,programmeName:Te?.name,week:z,day:ee+1,exerciseCount:ae.length,duration:Math.round(ae.reduce((De,Se)=>De+Se.sets.length*1.5,0)),volume:Math.round(Ce),completedAt:ht.now()})}catch(Te){console.error("Error saving workout log:",Te)}xe.length>0&&(Ae({badges:[...xe]}),Fe([])),w("sessionComplete")},us=async ae=>{if(n)try{const pe=await zn(Ft(gt,"coreBuddyAchievements",n.id)),be=pe.exists()?pe.data():{clientId:n.id,badges:[],totalVolume:0},Ve=be.totalVolume||0,Ce=Ve+ae,Te=[];zD.forEach(Se=>{Ce>=Se.threshold&&Ve<Se.threshold&&(be.badges.some(at=>at.type==="volume_milestone"&&at.milestone===Se.threshold)||Te.push({type:"volume_milestone",milestone:Se.threshold,label:Se.label,achievedAt:ht.now()}))});const De=[...be.badges,...Te];await Lr(Ft(gt,"coreBuddyAchievements",n.id),{clientId:n.id,badges:De,totalVolume:Math.round(Ce),updatedAt:ht.now()}),Te.length>0&&Fe(Se=>[...Se,...Te])}catch(pe){console.error("Error updating volume:",pe)}},Ot=async(ae,pe,be)=>{if(n)try{const Ve=n.id,Ce=await zn(Ft(gt,"coreBuddyPBs",Ve)),De=(Ce.exists()?Ce.data():null)?.exercises||{},Se=De[ae];let Me=!1;if(Se?(pe>(Se.weight||0)||pe===(Se.weight||0)&&be>(Se.reps||0))&&(Me=!0):Me=!0,Me){const at={...De,[ae]:{weight:pe,reps:be,achievedAt:ht.now()}};await Lr(Ft(gt,"coreBuddyPBs",Ve),{clientId:n.id,exercises:at,updatedAt:ht.now()}),Qt(`New PB! ${pe}kg  ${be} reps`,"success"),en(),await gn(ae,pe)}}catch(Ve){console.error("Error checking PB:",Ve)}},gn=async(ae,pe)=>{if(n)try{const be=await zn(Ft(gt,"coreBuddyTargets",n.id));if(!be.exists())return;const Ce=(be.data().targets||{})[ae];if(!Ce||pe<Ce.targetWeight)return;const Te=await zn(Ft(gt,"coreBuddyAchievements",n.id)),De=Te.exists()?Te.data():{clientId:n.id,badges:[],totalVolume:0};if(De.badges.some(vt=>vt.type==="pb_target"&&vt.exercise===ae&&vt.targetWeight===Ce.targetWeight))return;const Me={type:"pb_target",exercise:ae,group:BD[ae]||"push",targetWeight:Ce.targetWeight,achievedAt:ht.now()},at=[...De.badges,Me];await Lr(Ft(gt,"coreBuddyAchievements",n.id),{...De,badges:at,updatedAt:ht.now()}),Fe(vt=>[...vt,Me])}catch(be){console.error("Error checking target badge:",be)}},tn=rt&&c.jsxs("div",{className:`toast-notification ${rt.type}`,children:[rt.type==="success"&&c.jsx("span",{children:" "}),rt.message]}),wn=(ae,pe)=>c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:pe,"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsx("div",{className:"header-actions",children:c.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(i||y==="loading")return c.jsx("div",{className:"cb-loading",children:c.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&x){const ae=x;return c.jsxs("div",{className:"pg-page","data-theme":o?"dark":"light","data-accent":d,children:[wn(ae.name,()=>p("/client/core-buddy/workouts")),c.jsxs("main",{className:"pg-main",children:[c.jsxs("div",{className:"pg-overview-hero",children:[c.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:FD[ae.focus]})}),c.jsx("h2",{className:"pg-overview-name",children:ae.name}),c.jsx("p",{className:"pg-overview-desc",children:ae.description}),c.jsxs("div",{className:"pg-overview-stats",children:[c.jsxs("div",{className:"pg-ov-stat",children:[c.jsx("span",{className:"pg-ov-stat-num",children:ae.duration}),c.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),c.jsxs("div",{className:"pg-ov-stat",children:[c.jsx("span",{className:"pg-ov-stat-num",children:ae.daysPerWeek}),c.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),c.jsxs("div",{className:"pg-ov-stat",children:[c.jsx("span",{className:"pg-ov-stat-num",children:ae.duration*ae.daysPerWeek}),c.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),c.jsx("div",{className:"pg-overview-days",children:ae.days.map((pe,be)=>c.jsxs("div",{className:"pg-day-card",children:[c.jsxs("div",{className:"pg-day-header",children:[c.jsx("span",{className:"pg-day-name",children:pe.name}),c.jsx("span",{className:"pg-day-label",children:pe.label})]}),c.jsx("div",{className:"pg-day-exercises",children:pe.exercises.map((Ve,Ce)=>{const Te=Dh(Ve,1,ae);return c.jsxs("div",{className:"pg-day-ex",children:[c.jsx("span",{className:"pg-day-ex-name",children:Ve.name}),c.jsx("span",{className:"pg-day-ex-target",children:Ve.type==="timed"?`${Te.sets}${Te.time}s`:`${Te.sets}${Te.reps}`}),c.jsx("span",{className:`pg-day-ex-badge pg-badge-${Ve.type}`,children:Ve.type==="weighted"?"WT":Ve.type==="timed"?"TMR":"BW"})]},Ce)})})]},be))}),c.jsxs("div",{className:"pg-overview-note",children:[c.jsx("strong",{children:"Progressive Overload:"})," +",ae.repProg," reps/week",ae.timeProg?`, +${ae.timeProg}s/week for timed`:""]}),c.jsx("button",{className:"pg-start-btn",onClick:()=>Ee(ae),children:"Start Programme"})]}),tn]})}if(y==="dashboard"){const ae=We();if(!ae)return w("browse"),null;const pe=Ze(),be=q?.completedSessions||{},Ve=pe.totalSessions?Math.round(pe.totalCompleted/pe.totalSessions*100):0,Ce=Math.round(pe.totalCompleted/(pe.totalSessions||1)*UD);return c.jsxs("div",{className:"pg-page","data-theme":o?"dark":"light","data-accent":d,children:[wn("Programme",()=>p("/client/core-buddy/workouts")),c.jsxs("main",{className:"pg-main",children:[c.jsxs("div",{className:"pg-dash-hero",children:[c.jsxs("div",{className:"pg-dash-ring-wrap",children:[c.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:no.map((Te,De)=>c.jsx("line",{x1:Te.x1,y1:Te.y1,x2:Te.x2,y2:Te.y2,className:De<Ce?"pg-tick-filled":"pg-tick-empty",strokeWidth:Te.thick?"3":"2"},De))}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"pg-dash-ring-logo",width:"50",height:"50"})]}),c.jsx("h2",{className:"pg-dash-name",children:ae.name}),c.jsxs("div",{className:"pg-dash-progress-text",children:[c.jsxs("span",{className:"pg-dash-pct",children:[Ve,"%"]}),c.jsxs("span",{className:"pg-dash-week",children:["Week ",pe.currentWeek," of ",ae.duration]})]})]}),c.jsx("div",{className:"pg-weeks",children:Array.from({length:ae.duration},(Te,De)=>{const Se=De+1;return c.jsxs("div",{className:`pg-week-row${Se===pe.currentWeek?" pg-week-current":""}`,children:[c.jsxs("span",{className:"pg-week-label",children:["W",Se]}),c.jsx("div",{className:"pg-week-days",children:ae.days.map((Me,at)=>{const vt=`w${Se}d${at}`,yt=!!be[vt],Jt=!pe.complete&&Se===pe.nextWeek&&at===pe.nextDay;return c.jsx("button",{className:`pg-day-dot${yt?" done":""}${Jt?" next":""}`,disabled:yt,onClick:()=>{Jt&&$e(Se,at)},children:yt?c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:c.jsx("path",{d:"M20 6L9 17l-5-5"})}):c.jsx("span",{children:Me.name.replace("Day ","")})},at)})})]},De)})}),!pe.complete&&pe.nextDay>=0&&c.jsxs("div",{className:"pg-next-session",children:[c.jsx("h3",{children:"Next Session"}),c.jsxs("p",{className:"pg-next-info",children:["Week ",pe.nextWeek,"  ",ae.days[pe.nextDay].name,": ",ae.days[pe.nextDay].label]}),c.jsx("div",{className:"pg-next-exercises",children:ae.days[pe.nextDay].exercises.map((Te,De)=>{const Se=Dh(Te,pe.nextWeek,ae);return c.jsxs("div",{className:"pg-next-ex",children:[c.jsx("span",{className:"pg-next-ex-name",children:Te.name}),c.jsx("span",{className:"pg-next-ex-target",children:Te.type==="timed"?`${Se.sets}${Se.time}s`:`${Se.sets}${Se.reps}`})]},De)})}),c.jsx("button",{className:"pg-start-btn",onClick:()=>$e(pe.nextWeek,pe.nextDay),children:"Start Session"})]}),pe.complete&&c.jsxs("div",{className:"pg-complete-msg",children:[c.jsx("h3",{children:"Programme Complete! "}),c.jsxs("p",{children:["You finished all ",pe.totalSessions," sessions."]}),c.jsx("button",{className:"pg-start-btn",onClick:Ge,children:"Choose New Programme"})]}),c.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&Ge()},children:"Quit Programme"})]}),c.jsx(Rl,{active:"workouts"}),tn]})}if(y==="session"){const ae=We();if(!ae)return null;const pe=ae.days[ee],be=pe.exercises[_e],Ve=Dh(be,z,ae),Ce=S[_e],Te=Ce?.sets?.length||0,De=pe.exercises.length,Se=(_e+Te/Ve.sets)/De,Me=Je[be.name],at=qe(z,ee,be.name);be.type==="timed"&&W===0&&!et&&Te===Ne&&setTimeout(()=>ge(Ve.time),0);const vt=()=>{Me?.isGif?H(!P):de.current&&(P?de.current.pause():de.current.play(),H(!P))};return c.jsxs("div",{className:"pg-page pg-page-session","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("div",{className:"pg-session-progress",children:c.jsx("div",{className:"pg-session-progress-fill",style:{width:`${Se*100}%`}})}),c.jsxs("div",{className:"pg-session-header",children:[c.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&w("dashboard")},children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),c.jsxs("div",{className:"pg-session-title",children:[c.jsxs("span",{className:"pg-session-counter",children:[_e+1," / ",De]}),c.jsxs("span",{className:"pg-session-week",children:["Week ",z,"  ",pe.name]})]})]}),Me&&c.jsxs("div",{className:"pg-video-container",onClick:vt,children:[Me.isGif?c.jsx("img",{className:"pg-video",src:Me.url,alt:be.name}):c.jsx("video",{ref:de,className:"pg-video",src:Me.url,loop:!0,muted:!0,playsInline:!0},be.name),!P&&c.jsxs("div",{className:"pg-video-overlay",children:[c.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:c.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),c.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),c.jsx("div",{className:"pg-spotify",children:c.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),c.jsxs("div",{className:"pg-exercise-card",children:[c.jsx("h2",{className:"pg-ex-name",children:be.name}),c.jsx("span",{className:`pg-ex-type-badge pg-badge-${be.type}`,children:be.type==="weighted"?"Weight + Reps":be.type==="timed"?"Timed":"Reps Only"}),be.type==="weighted"&&at&&c.jsxs("div",{className:"pg-last-week",children:[c.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),c.jsxs("span",{className:"pg-last-week-value",children:[at.weight,"kg x ",at.reps," reps"]})]}),c.jsxs("div",{className:"pg-ex-set-info",children:[c.jsxs("span",{className:"pg-ex-set-num",children:["Set ",Te+1," of ",Ve.sets]}),c.jsxs("span",{className:"pg-ex-target",children:["Target: ",be.type==="timed"?`${Ve.time}s hold`:`${Ve.reps} reps`]})]}),be.type==="weighted"&&c.jsxs("div",{className:"pg-input-area",children:[c.jsxs("div",{className:"pg-input-group",children:[c.jsx("label",{children:"Weight (kg)"}),c.jsx("input",{type:"number",inputMode:"decimal",value:I,onChange:yt=>D(yt.target.value),placeholder:"0",className:"pg-input"})]}),c.jsxs("div",{className:"pg-input-group",children:[c.jsx("label",{children:"Reps"}),c.jsx("input",{type:"number",inputMode:"numeric",value:U,onChange:yt=>j(yt.target.value),placeholder:String(Ve.reps),className:"pg-input"})]})]}),be.type==="reps"&&c.jsx("div",{className:"pg-input-area",children:c.jsxs("div",{className:"pg-input-group pg-input-single",children:[c.jsx("label",{children:"Reps"}),c.jsx("input",{type:"number",inputMode:"numeric",value:U,onChange:yt=>j(yt.target.value),placeholder:String(Ve.reps),className:"pg-input"})]})}),be.type==="timed"&&c.jsxs("div",{className:"pg-timer-area",children:[c.jsx("div",{className:"pg-timer-display",children:c.jsxs("span",{className:"pg-timer-value",children:[W,"s"]})}),et?c.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>pt(!1),children:"Stop"}):c.jsx("button",{className:"pg-timer-btn",onClick:()=>{W===0&&ge(Ve.time),pt(!0)},children:W<Ve.time&&W>0?"Resume":"Start Timer"})]}),c.jsx("button",{className:"pg-log-set-btn",onClick:It,disabled:be.type==="timed"&&et,children:Te+1<Ve.sets?"Log Set":_e+1<De?"Log Set  Next Exercise":"Log Set  Complete"}),Ce?.sets?.length>0&&c.jsx("div",{className:"pg-completed-sets",children:Ce.sets.map((yt,Jt)=>c.jsxs("div",{className:"pg-completed-set",children:[c.jsx("span",{className:"pg-completed-set-check",children:""}),c.jsxs("span",{children:["Set ",Jt+1,": ",yt.weight!==void 0?`${yt.weight}kg  ${yt.reps}`:yt.time!==void 0?`${yt.time}s`:`${yt.reps} reps`]})]},Jt))})]}),tn]})}if(y==="sessionComplete"){const pe=We()?.days[ee],be=S.reduce((Ce,Te)=>Ce+Te.sets.length,0),Ve=S.reduce((Ce,Te)=>Ce+Te.sets.reduce((De,Se)=>De+(Se.weight||0)*(Se.reps||0),0),0);return c.jsxs("div",{className:"pg-page pg-page-center","data-theme":o?"dark":"light","data-accent":d,children:[c.jsxs("div",{className:"pg-session-done",children:[c.jsxs("div",{className:"pg-done-ring",children:[c.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:no.map((Ce,Te)=>c.jsx("line",{x1:Ce.x1,y1:Ce.y1,x2:Ce.x2,y2:Ce.y2,className:"pg-tick-complete",strokeWidth:Ce.thick?"3.5":"2",style:{animationDelay:`${Te*.02}s`}},Te))}),c.jsx("div",{className:"pg-done-center",children:c.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:c.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),c.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),c.jsxs("p",{className:"pg-done-subtitle",children:["Week ",z,"  ",pe?.name,": ",pe?.label]}),c.jsxs("div",{className:"pg-done-stats",children:[c.jsxs("div",{className:"pg-done-stat",children:[c.jsx("span",{className:"pg-done-stat-num",children:S.length}),c.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),c.jsxs("div",{className:"pg-done-stat",children:[c.jsx("span",{className:"pg-done-stat-num",children:be}),c.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),Ve>0&&c.jsxs("div",{className:"pg-done-stat",children:[c.jsx("span",{className:"pg-done-stat-num",children:Math.round(Ve).toLocaleString()}),c.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),c.jsx("button",{className:"pg-start-btn",onClick:()=>w("dashboard"),children:"Back to Programme"})]}),ye&&c.jsx("div",{className:"pg-badge-celebration",onClick:()=>Ae(null),children:c.jsxs("div",{className:"pg-badge-celebration-card",onClick:Ce=>Ce.stopPropagation(),children:[c.jsx("div",{className:"pg-badge-celebration-icon",children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),c.jsx("h3",{className:"pg-badge-celebration-title",children:ye.badges.length===1?"Badge Earned!":`${ye.badges.length} Badges Earned!`}),c.jsx("div",{className:"pg-badge-celebration-list",children:ye.badges.map((Ce,Te)=>c.jsx("div",{className:"pg-badge-celebration-item",children:Ce.type==="pb_target"?`${Ce.exercise}  ${Ce.targetWeight}kg`:Ce.label},Te))}),c.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Ae(null),children:"Tap to dismiss"})]})}),tn]})}return null}const HD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},GD={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},op=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function WD(r){return HD[r]||"push"}function $D(r){return r>=1e6?`${(r/1e6).toFixed(1)}M`:r>=1e3?`${(r/1e3).toFixed(1)}T`:`${Math.round(r)}`}function KD(r){return r>=1e6?"million kg":r>=1e3?"tonnes":"kg"}function YD(){const{currentUser:r,isClient:e,clientData:n,loading:i}=Aa(),{isDark:o,toggleTheme:u,accent:d}=Al(),p=sr(),[g,y]=k.useState(!0),[w,x]=k.useState(null),[T,O]=k.useState({});k.useEffect(()=>{!i&&(!r||!e)&&p("/")},[r,e,i,p]),k.useEffect(()=>{if(!n)return;(async()=>{try{const[R,I]=await Promise.all([zn(Ft(gt,"coreBuddyAchievements",n.id)),zn(Ft(gt,"coreBuddyPBs",n.id))]);R.exists()&&x(R.data()),I.exists()&&O(I.data().exercises||{})}catch(R){console.error("Error loading achievements:",R)}y(!1)})()},[n]);const q=w?.badges||[],G=w?.totalVolume||0,z=q.filter(S=>S.type==="pb_target"),ie=q.filter(S=>S.type==="volume_milestone"),ee={push:[],pull:[],lower:[],core:[]};z.forEach(S=>{const R=S.group||WD(S.exercise);ee[R]&&ee[R].push(S)});const he=op.find(S=>G<S.threshold),_e=op.filter(S=>G>=S.threshold).pop()?.threshold||0,je=he?(G-_e)/(he.threshold-_e):1;if(i||g)return c.jsxs("div",{className:"ach-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsx("div",{className:"header-content",children:c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),c.jsx("div",{className:"ach-loading-inline",children:c.jsx("div",{className:"cb-loading-spinner"})})]});const Ne=q.length,N=Ne>0||G>0;return c.jsxs("div",{className:"ach-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsx("div",{className:"header-actions",children:c.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),c.jsxs("main",{className:"ach-main",children:[c.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/core-buddy"),children:" Back"}),c.jsxs("div",{className:"ach-stats-banner",children:[c.jsxs("div",{className:"ach-stat-item",children:[c.jsx("span",{className:"ach-stat-num",children:Ne}),c.jsx("span",{className:"ach-stat-label",children:Ne===1?"Badge":"Badges"})]}),c.jsx("div",{className:"ach-stat-divider"}),c.jsxs("div",{className:"ach-stat-item",children:[c.jsx("span",{className:"ach-stat-num",children:$D(G)}),c.jsxs("span",{className:"ach-stat-label",children:[KD(G)," lifted"]})]}),c.jsx("div",{className:"ach-stat-divider"}),c.jsxs("div",{className:"ach-stat-item",children:[c.jsx("span",{className:"ach-stat-num",children:Object.keys(T).length}),c.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!N&&c.jsxs("div",{className:"ach-empty",children:[c.jsx("div",{className:"ach-empty-icon",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),c.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),c.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),c.jsx("h4",{children:"No achievements yet"}),c.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),c.jsxs("div",{className:"ach-section",children:[c.jsxs("h3",{className:"ach-section-title",children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:c.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),c.jsxs("div",{className:"ach-volume-hero",children:[c.jsxs("div",{className:"ach-volume-ring",children:[c.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:no.map((S,R)=>{const I=R<Math.round(je*60);return c.jsx("line",{x1:S.x1,y1:S.y1,x2:S.x2,y2:S.y2,className:I?"ach-tick-filled":"ach-tick-empty",strokeWidth:S.thick?"3":"2"},R)})}),c.jsxs("div",{className:"ach-volume-center",children:[c.jsx("span",{className:"ach-volume-number",children:Math.round(G).toLocaleString()}),c.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),he&&c.jsxs("div",{className:"ach-volume-next",children:["Next: ",c.jsx("strong",{children:he.label})," (",(he.threshold-G).toLocaleString(),"kg to go)"]})]}),c.jsx("div",{className:"ach-milestone-shelf",children:op.map((S,R)=>{const I=G>=S.threshold,D=ie.find(U=>U.milestone===S.threshold);return c.jsxs("div",{className:`ach-milestone ${I?"unlocked":"locked"}`,children:[c.jsx("div",{className:"ach-milestone-hex",children:c.jsx("span",{className:"ach-milestone-icon",children:S.icon})}),c.jsx("span",{className:"ach-milestone-label",children:S.label}),D?.achievedAt&&c.jsx("span",{className:"ach-milestone-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},R)})})]}),c.jsxs("div",{className:"ach-section",children:[c.jsxs("h3",{className:"ach-section-title",children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),z.length===0?c.jsx("div",{className:"ach-pb-empty",children:c.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",c.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(ee).map(([S,R])=>{if(R.length===0)return null;const I=GD[S];return c.jsxs("div",{className:"ach-group",children:[c.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:I.color},children:[c.jsx("span",{className:"ach-group-label",style:{color:I.color},children:I.label}),c.jsx("span",{className:"ach-group-count",children:R.length})]}),c.jsx("div",{className:"ach-badge-grid",children:R.map((D,U)=>c.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${U*.06}s`,"--group-color":I.color},children:[c.jsx("div",{className:"ach-badge-hex",style:{borderColor:I.color,boxShadow:`0 0 12px ${I.color}33`},children:c.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:I.color,strokeWidth:"2",strokeLinecap:"round",children:c.jsx("path",{d:I.icon})})}),c.jsxs("div",{className:"ach-badge-info",children:[c.jsx("span",{className:"ach-badge-exercise",children:D.exercise}),c.jsxs("span",{className:"ach-badge-value",style:{color:I.color},children:[D.targetWeight,"kg"]}),D.achievedAt&&c.jsx("span",{className:"ach-badge-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},U))})]},S)})]})]}),c.jsx(Rl,{active:"home"})]})}const Mh=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function QD(r){const e=new Date(r),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function lp(r){return r.toISOString().split("T")[0]}function XD(r){return Array.from({length:7},(e,n)=>{const i=new Date(r);return i.setDate(r.getDate()+n),i})}function JD(){const{currentUser:r,isClient:e,clientData:n,loading:i}=Aa(),{isDark:o,toggleTheme:u,accent:d}=Al(),p=sr(),[g,y]=k.useState({}),[w,x]=k.useState(!0),[T,O]=k.useState(!1),[q,G]=k.useState(0),[z,ie]=k.useState(null),[ee,he]=k.useState(null),[_e,je]=k.useState(!1),Ne=k.useRef([]),N=k.useRef([]),S=k.useCallback((H,de="info")=>{ie({message:H,type:de}),setTimeout(()=>ie(null),3e3)},[]),R=new Date,I=lp(R),D=QD(R),U=XD(D),j=["M","T","W","T","F","S","S"];k.useEffect(()=>{!i&&(!r||!e)&&p("/")},[r,e,i,p]),k.useEffect(()=>{if(!r||!n)return;(async()=>{try{const de=Or(gt,"habitLogs"),ye=ul(de,eo("clientId","==",n.id)),Ae=await to(ye),xe={};Ae.docs.forEach(it=>{const Qt=it.data();xe[Qt.date]={...Qt,_id:it.id}}),y(xe);let Fe=0;const rt=new Date(R);for(;;){const it=lp(rt),Qt=xe[it];if(Qt)if(Object.values(Qt.habits||{}).filter(Boolean).length>=3)Fe++,rt.setDate(rt.getDate()-1);else break;else if(it===I)rt.setDate(rt.getDate()-1);else break}G(Fe)}catch(de){console.error("Error loading habit logs:",de)}finally{x(!1)}})()},[r,n]);const et=g[I]||{habits:{}},pt=async H=>{if(!r||T)return;const de=et.habits?.[H]||!1;de||(Ne.current=[...Array(10)].map((ye,Ae)=>{const xe=Ae/10*2*Math.PI,Fe=18+Math.random()*20;return{tx:Math.cos(xe)*Fe,ty:Math.sin(xe)*Fe,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),he(H),setTimeout(()=>he(null),700)),O(!0);try{const ye=et.habits||{},Ae={...ye,[H]:!ye[H]},xe=et._id||`${n.id}_${I}`;await Lr(Ft(gt,"habitLogs",xe),{clientId:n.id,date:I,habits:Ae}),y(rt=>({...rt,[I]:{clientId:n.id,date:I,habits:Ae,_id:xe}})),Object.values(Ae).filter(Boolean).length===Mh.length&&!de&&(N.current=[...Array(50)].map((rt,it)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][it%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{je(!0),setTimeout(()=>je(!1),3500)},500))}catch(ye){console.error("Error saving habit:",ye),S("Failed to save. Try again.","error")}finally{O(!1)}},W=U.map(H=>{const de=lp(H),ye=g[de],Ae=ye?Object.values(ye.habits||{}).filter(Boolean).length:0;return{date:H,dateStr:de,completed:Ae,total:Mh.length}}),ge=W.reduce((H,de)=>H+de.completed,0),ke=W.reduce((H,de)=>H+de.total,0),Je=ke>0?Math.round(ge/ke*100):0,Qe=Object.values(et.habits||{}).filter(Boolean).length,P=Math.round(Qe/Mh.length*100);return c.jsxs("div",{className:"cbc-page","data-theme":o?"dark":"light","data-accent":d,children:[c.jsx("header",{className:"client-header",children:c.jsxs("div",{className:"header-content",children:[c.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),c.jsx("div",{className:"header-actions",children:c.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||w?c.jsx("div",{className:"cbc-loading-inline",children:c.jsx("div",{className:"cbc-loading-spinner"})}):c.jsxs("main",{className:"cbc-main",children:[c.jsxs("div",{className:"cbc-ring-section",children:[c.jsxs("div",{className:"cbc-progress-ring",children:[c.jsxs("svg",{viewBox:"0 0 200 200",children:[c.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),c.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-P/100*2*Math.PI*80})]}),c.jsxs("div",{className:"cbc-ring-center",children:[c.jsxs("span",{className:"cbc-ring-pct",children:[P,"%"]}),c.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),c.jsxs("div",{className:"cbc-streak",children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:c.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),c.jsx("span",{className:"cbc-streak-count",children:q}),c.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),c.jsxs("div",{className:"cbc-section",children:[c.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),c.jsx("div",{className:"cbc-habits",children:Mh.map(H=>{const de=et.habits?.[H.key]||!1,ye=ee===H.key;return c.jsxs("button",{className:`cbc-habit-btn cbc-habit-${H.key} ${de?"cbc-habit-done":""} ${ye?"cbc-habit-just-checked":""}`,onClick:()=>pt(H.key),disabled:T,children:[c.jsx("div",{className:"cbc-habit-check",children:de?c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:c.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${ye?"cbc-check-animate":""}`})}):c.jsx("div",{className:"cbc-habit-circle"})}),ye&&c.jsx("div",{className:"cbc-particles",children:Ne.current.map((Ae,xe)=>c.jsx("span",{className:"cbc-particle",style:{"--tx":`${Ae.tx}px`,"--ty":`${Ae.ty}px`,"--size":`${Ae.size}px`,animationDuration:`${Ae.duration}s`}},xe))}),c.jsx("div",{className:`cbc-habit-icon cbc-icon-${H.key}`,children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:c.jsx("path",{d:H.icon})})}),c.jsx("span",{className:"cbc-habit-label",children:H.label})]},H.key)})})]}),c.jsxs("div",{className:"cbc-section",children:[c.jsx("h2",{className:"cbc-section-title",children:"This Week"}),c.jsx("div",{className:"cbc-week-grid",children:W.map((H,de)=>{const ye=H.dateStr===I,Ae=H.total>0?H.completed/H.total:0,xe=38,Fe=2*Math.PI*xe,rt=Fe-Ae*Fe;return c.jsxs("div",{className:`cbc-day-ring ${ye?"cbc-day-today":""} ${H.completed>0?"cbc-day-active":""}`,children:[c.jsxs("svg",{viewBox:"0 0 100 100",children:[c.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:xe}),c.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:xe,strokeDasharray:Fe,strokeDashoffset:rt})]}),c.jsx("span",{className:"cbc-day-label",children:j[de]}),c.jsxs("span",{className:"cbc-day-count",children:[H.completed,"/",H.total]})]},de)})}),c.jsxs("div",{className:"cbc-week-summary",children:[c.jsx("div",{className:"cbc-week-summary-bar",children:c.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${Je}%`}})}),c.jsxs("span",{className:"cbc-week-summary-text",children:[ge," / ",ke," habits this week (",Je,"%)"]})]})]})]}),c.jsx(Rl,{active:"home"}),_e&&c.jsxs("div",{className:"cbc-celebration",onClick:()=>je(!1),children:[c.jsx("div",{className:"cbc-confetti-container",children:N.current.map((H,de)=>c.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${H.x}%`,"--delay":`${H.delay}s`,"--color":H.color,"--drift":`${H.drift}px`,"--spin":`${H.spin}deg`,"--duration":`${H.duration}s`,width:`${H.width}px`,height:`${H.height}px`}},de))}),c.jsxs("div",{className:"cbc-celebration-card",children:[c.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[c.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),c.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),c.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),c.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),z&&c.jsx("div",{className:`toast-notification ${z.type}`,children:z.message})]})}const ZD=k.lazy(()=>Us(()=>import("./Dashboard-BdJN7bfA.js"),__vite__mapDeps([0,1]))),e3=k.lazy(()=>Us(()=>import("./AddClient-rgmfVuDl.js"),__vite__mapDeps([2,3]))),t3=k.lazy(()=>Us(()=>import("./ClientDashboard-B3SmPV61.js"),__vite__mapDeps([4,5]))),n3=k.lazy(()=>Us(()=>import("./ClientForms-CqUAgH52.js"),__vite__mapDeps([6,7,5]))),s3=k.lazy(()=>Us(()=>import("./ClientTools-KC_eW3HL.js"),__vite__mapDeps([8,9,5]))),r3=k.lazy(()=>Us(()=>import("./MacroCalculator-DH-AQO8R.js"),__vite__mapDeps([10,9,5]))),i3=k.lazy(()=>Us(()=>import("./ProteinSnacks-DcKY8_PL.js"),__vite__mapDeps([11,9,5]))),a3=k.lazy(()=>Us(()=>import("./DailyMotivation-D8tn3Ujx.js"),__vite__mapDeps([12,9,5]))),o3=k.lazy(()=>Us(()=>import("./PersonalBests-BmtuJN48.js"),__vite__mapDeps([13,14,5]))),l3=k.lazy(()=>Us(()=>import("./CircuitDashboard-CPeaB8t0.js"),__vite__mapDeps([15,16]))),c3=k.lazy(()=>Us(()=>import("./CircuitBooking-C62Tq1kI.js"),__vite__mapDeps([17,18,16]))),u3=k.lazy(()=>Us(()=>import("./Leaderboard-BywbDisI.js"),__vite__mapDeps([19,20])));function h3({children:r}){const{pathname:e}=wr();return k.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),k.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),r}function d3(){const r=sr();return k.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";r(n,{replace:!0})}},[r]),null}function f3(){return c.jsx(gD,{children:c.jsx(pD,{children:c.jsxs(LS,{basename:"/login",children:[c.jsx(d3,{}),c.jsx(h3,{children:c.jsx(k.Suspense,{fallback:null,children:c.jsxs(dS,{children:[c.jsx(Sn,{path:"/",element:c.jsx(yD,{})}),c.jsx(Sn,{path:"/dashboard",element:c.jsx(ZD,{})}),c.jsx(Sn,{path:"/add-client",element:c.jsx(e3,{})}),c.jsx(Sn,{path:"/client",element:c.jsx(t3,{})}),c.jsx(Sn,{path:"/client/forms",element:c.jsx(n3,{})}),c.jsx(Sn,{path:"/client/tools",element:c.jsx(s3,{})}),c.jsx(Sn,{path:"/client/tools/macros",element:c.jsx(r3,{})}),c.jsx(Sn,{path:"/client/tools/snacks",element:c.jsx(i3,{})}),c.jsx(Sn,{path:"/client/tools/motivation",element:c.jsx(a3,{})}),c.jsx(Sn,{path:"/client/personal-bests",element:c.jsx(o3,{})}),c.jsx(Sn,{path:"/client/circuit",element:c.jsx(l3,{})}),c.jsx(Sn,{path:"/client/circuit/booking",element:c.jsx(c3,{})}),c.jsx(Sn,{path:"/client/core-buddy",element:c.jsx(ED,{})}),c.jsx(Sn,{path:"/client/core-buddy/nutrition",element:c.jsx(AD,{})}),c.jsx(Sn,{path:"/client/core-buddy/workouts",element:c.jsx(VD,{})}),c.jsx(Sn,{path:"/client/core-buddy/programmes",element:c.jsx(qD,{})}),c.jsx(Sn,{path:"/client/core-buddy/achievements",element:c.jsx(YD,{})}),c.jsx(Sn,{path:"/client/core-buddy/consistency",element:c.jsx(JD,{})}),c.jsx(Sn,{path:"/client/leaderboard",element:c.jsx(u3,{})}),c.jsx(Sn,{path:"*",element:c.jsx(uS,{to:"/",replace:!0})})]})})})]})})})}dT.createRoot(document.getElementById("root")).render(c.jsx(k.StrictMode,{children:c.jsx(f3,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{Rl as C,ht as T,Lp as a,oj as b,Or as c,gt as d,Ft as e,p3 as f,to as g,DR as h,zn as i,c as j,Aa as k,Al as l,sr as m,vD as n,y3 as o,Lr as p,ul as q,k as r,b3 as s,m3 as t,v3 as u,_3 as v,eo as w};
