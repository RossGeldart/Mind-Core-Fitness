const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DDbJOOTs.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-B-TUbses.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-CJw9db0P.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-DutM9_uU.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-BxwYeXaY.js","assets/ProteinSnacks-B8RtHdkT.js","assets/DailyMotivation-DlEFVr67.js","assets/CircuitDashboard-DNScspJe.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-B3pcSDNp.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-D68Geb6B.js","assets/Leaderboard-lyZEtGxw.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var ip={exports:{}},Oc={};var e1;function ZT(){if(e1)return Oc;e1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:h,ref:l!==void 0?l:null,props:u}}return Oc.Fragment=e,Oc.jsx=n,Oc.jsxs=n,Oc}var t1;function ej(){return t1||(t1=1,ip.exports=ZT()),ip.exports}var a=ej(),op={exports:{}},Ot={};var n1;function tj(){if(n1)return Ot;n1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.iterator;function L(N){return N===null||typeof N!="object"?null:(N=j&&N[j]||N["@@iterator"],typeof N=="function"?N:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,V={};function ne(N,B,ie){this.props=N,this.context=B,this.refs=V,this.updater=ie||$}ne.prototype.isReactComponent={},ne.prototype.setState=function(N,B){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,B,"setState")},ne.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function X(){}X.prototype=ne.prototype;function ce(N,B,ie){this.props=N,this.context=B,this.refs=V,this.updater=ie||$}var _e=ce.prototype=new X;_e.constructor=ce,U(_e,ne.prototype),_e.isPureReactComponent=!0;var Ve=Array.isArray;function Ae(){}var M={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function A(N,B,ie){var pe=ie.ref;return{$$typeof:s,type:N,key:B,ref:pe!==void 0?pe:null,props:ie}}function P(N,B){return A(N.type,B,N.props)}function D(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function F(N){var B={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ie){return B[ie]})}var I=/\/+/g;function Fe(N,B){return typeof N=="object"&&N!==null&&N.key!=null?F(""+N.key):B.toString(36)}function bt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(Ae,Ae):(N.status="pending",N.then(function(B){N.status==="pending"&&(N.status="fulfilled",N.value=B)},function(B){N.status==="pending"&&(N.status="rejected",N.reason=B)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Y(N,B,ie,pe,Ne){var Me=typeof N;(Me==="undefined"||Me==="boolean")&&(N=null);var Ze=!1;if(N===null)Ze=!0;else switch(Me){case"bigint":case"string":case"number":Ze=!0;break;case"object":switch(N.$$typeof){case s:case e:Ze=!0;break;case x:return Ze=N._init,Y(Ze(N._payload),B,ie,pe,Ne)}}if(Ze)return Ne=Ne(N),Ze=pe===""?"."+Fe(N,0):pe,Ve(Ne)?(ie="",Ze!=null&&(ie=Ze.replace(I,"$&/")+"/"),Y(Ne,B,ie,"",function(Bt){return Bt})):Ne!=null&&(D(Ne)&&(Ne=P(Ne,ie+(Ne.key==null||N&&N.key===Ne.key?"":(""+Ne.key).replace(I,"$&/")+"/")+Ze)),B.push(Ne)),1;Ze=0;var qe=pe===""?".":pe+":";if(Ve(N))for(var rt=0;rt<N.length;rt++)pe=N[rt],Me=qe+Fe(pe,rt),Ze+=Y(pe,B,ie,Me,Ne);else if(rt=L(N),typeof rt=="function")for(N=rt.call(N),rt=0;!(pe=N.next()).done;)pe=pe.value,Me=qe+Fe(pe,rt++),Ze+=Y(pe,B,ie,Me,Ne);else if(Me==="object"){if(typeof N.then=="function")return Y(bt(N),B,ie,pe,Ne);throw B=String(N),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Ze}function ke(N,B,ie){if(N==null)return N;var pe=[],Ne=0;return Y(N,pe,"","",function(Me){return B.call(ie,Me,Ne++)}),pe}function Ie(N){if(N._status===-1){var B=N._result;B=B(),B.then(function(ie){(N._status===0||N._status===-1)&&(N._status=1,N._result=ie)},function(ie){(N._status===0||N._status===-1)&&(N._status=2,N._result=ie)}),N._status===-1&&(N._status=0,N._result=B)}if(N._status===1)return N._result.default;throw N._result}var le=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},De={map:ke,forEach:function(N,B,ie){ke(N,function(){B.apply(this,arguments)},ie)},count:function(N){var B=0;return ke(N,function(){B++}),B},toArray:function(N){return ke(N,function(B){return B})||[]},only:function(N){if(!D(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Ot.Activity=k,Ot.Children=De,Ot.Component=ne,Ot.Fragment=n,Ot.Profiler=l,Ot.PureComponent=ce,Ot.StrictMode=i,Ot.Suspense=g,Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ot.__COMPILER_RUNTIME={__proto__:null,c:function(N){return M.H.useMemoCache(N)}},Ot.cache=function(N){return function(){return N.apply(null,arguments)}},Ot.cacheSignal=function(){return null},Ot.cloneElement=function(N,B,ie){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var pe=U({},N.props),Ne=N.key;if(B!=null)for(Me in B.key!==void 0&&(Ne=""+B.key),B)!E.call(B,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&B.ref===void 0||(pe[Me]=B[Me]);var Me=arguments.length-2;if(Me===1)pe.children=ie;else if(1<Me){for(var Ze=Array(Me),qe=0;qe<Me;qe++)Ze[qe]=arguments[qe+2];pe.children=Ze}return A(N.type,Ne,pe)},Ot.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Ot.createElement=function(N,B,ie){var pe,Ne={},Me=null;if(B!=null)for(pe in B.key!==void 0&&(Me=""+B.key),B)E.call(B,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ne[pe]=B[pe]);var Ze=arguments.length-2;if(Ze===1)Ne.children=ie;else if(1<Ze){for(var qe=Array(Ze),rt=0;rt<Ze;rt++)qe[rt]=arguments[rt+2];Ne.children=qe}if(N&&N.defaultProps)for(pe in Ze=N.defaultProps,Ze)Ne[pe]===void 0&&(Ne[pe]=Ze[pe]);return A(N,Me,Ne)},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(N){return{$$typeof:p,render:N}},Ot.isValidElement=D,Ot.lazy=function(N){return{$$typeof:x,_payload:{_status:-1,_result:N},_init:Ie}},Ot.memo=function(N,B){return{$$typeof:y,type:N,compare:B===void 0?null:B}},Ot.startTransition=function(N){var B=M.T,ie={};M.T=ie;try{var pe=N(),Ne=M.S;Ne!==null&&Ne(ie,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(Ae,le)}catch(Me){le(Me)}finally{B!==null&&ie.types!==null&&(B.types=ie.types),M.T=B}},Ot.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ot.use=function(N){return M.H.use(N)},Ot.useActionState=function(N,B,ie){return M.H.useActionState(N,B,ie)},Ot.useCallback=function(N,B){return M.H.useCallback(N,B)},Ot.useContext=function(N){return M.H.useContext(N)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(N,B){return M.H.useDeferredValue(N,B)},Ot.useEffect=function(N,B){return M.H.useEffect(N,B)},Ot.useEffectEvent=function(N){return M.H.useEffectEvent(N)},Ot.useId=function(){return M.H.useId()},Ot.useImperativeHandle=function(N,B,ie){return M.H.useImperativeHandle(N,B,ie)},Ot.useInsertionEffect=function(N,B){return M.H.useInsertionEffect(N,B)},Ot.useLayoutEffect=function(N,B){return M.H.useLayoutEffect(N,B)},Ot.useMemo=function(N,B){return M.H.useMemo(N,B)},Ot.useOptimistic=function(N,B){return M.H.useOptimistic(N,B)},Ot.useReducer=function(N,B,ie){return M.H.useReducer(N,B,ie)},Ot.useRef=function(N){return M.H.useRef(N)},Ot.useState=function(N){return M.H.useState(N)},Ot.useSyncExternalStore=function(N,B,ie){return M.H.useSyncExternalStore(N,B,ie)},Ot.useTransition=function(){return M.H.useTransition()},Ot.version="19.2.4",Ot}var s1;function yg(){return s1||(s1=1,op.exports=tj()),op.exports}var _=yg(),lp={exports:{}},Vc={},cp={exports:{}},up={};var r1;function nj(){return r1||(r1=1,(function(s){function e(Y,ke){var Ie=Y.length;Y.push(ke);e:for(;0<Ie;){var le=Ie-1>>>1,De=Y[le];if(0<l(De,ke))Y[le]=ke,Y[Ie]=De,Ie=le;else break e}}function n(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ke=Y[0],Ie=Y.pop();if(Ie!==ke){Y[0]=Ie;e:for(var le=0,De=Y.length,N=De>>>1;le<N;){var B=2*(le+1)-1,ie=Y[B],pe=B+1,Ne=Y[pe];if(0>l(ie,Ie))pe<De&&0>l(Ne,ie)?(Y[le]=Ne,Y[pe]=Ie,le=pe):(Y[le]=ie,Y[B]=Ie,le=B);else if(pe<De&&0>l(Ne,Ie))Y[le]=Ne,Y[pe]=Ie,le=pe;else break e}}return ke}function l(Y,ke){var Ie=Y.sortIndex-ke.sortIndex;return Ie!==0?Ie:Y.id-ke.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],y=[],x=1,k=null,j=3,L=!1,$=!1,U=!1,V=!1,ne=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function _e(Y){for(var ke=n(y);ke!==null;){if(ke.callback===null)i(y);else if(ke.startTime<=Y)i(y),ke.sortIndex=ke.expirationTime,e(g,ke);else break;ke=n(y)}}function Ve(Y){if(U=!1,_e(Y),!$)if(n(g)!==null)$=!0,Ae||(Ae=!0,F());else{var ke=n(y);ke!==null&&bt(Ve,ke.startTime-Y)}}var Ae=!1,M=-1,E=5,A=-1;function P(){return V?!0:!(s.unstable_now()-A<E)}function D(){if(V=!1,Ae){var Y=s.unstable_now();A=Y;var ke=!0;try{e:{$=!1,U&&(U=!1,X(M),M=-1),L=!0;var Ie=j;try{t:{for(_e(Y),k=n(g);k!==null&&!(k.expirationTime>Y&&P());){var le=k.callback;if(typeof le=="function"){k.callback=null,j=k.priorityLevel;var De=le(k.expirationTime<=Y);if(Y=s.unstable_now(),typeof De=="function"){k.callback=De,_e(Y),ke=!0;break t}k===n(g)&&i(g),_e(Y)}else i(g);k=n(g)}if(k!==null)ke=!0;else{var N=n(y);N!==null&&bt(Ve,N.startTime-Y),ke=!1}}break e}finally{k=null,j=Ie,L=!1}ke=void 0}}finally{ke?F():Ae=!1}}}var F;if(typeof ce=="function")F=function(){ce(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Fe=I.port2;I.port1.onmessage=D,F=function(){Fe.postMessage(null)}}else F=function(){ne(D,0)};function bt(Y,ke){M=ne(function(){Y(s.unstable_now())},ke)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return j},s.unstable_next=function(Y){switch(j){case 1:case 2:case 3:var ke=3;break;default:ke=j}var Ie=j;j=ke;try{return Y()}finally{j=Ie}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(Y,ke){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Ie=j;j=Y;try{return ke()}finally{j=Ie}},s.unstable_scheduleCallback=function(Y,ke,Ie){var le=s.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?le+Ie:le):Ie=le,Y){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=Ie+De,Y={id:x++,callback:ke,priorityLevel:Y,startTime:Ie,expirationTime:De,sortIndex:-1},Ie>le?(Y.sortIndex=Ie,e(y,Y),n(g)===null&&Y===n(y)&&(U?(X(M),M=-1):U=!0,bt(Ve,Ie-le))):(Y.sortIndex=De,e(g,Y),$||L||($=!0,Ae||(Ae=!0,F()))),Y},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(Y){var ke=j;return function(){var Ie=j;j=ke;try{return Y.apply(this,arguments)}finally{j=Ie}}}})(up)),up}var a1;function sj(){return a1||(a1=1,cp.exports=nj()),cp.exports}var hp={exports:{}},Rs={};var i1;function rj(){if(i1)return Rs;i1=1;var s=yg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,x){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:k==null?null:""+k,children:g,containerInfo:y,implementation:x}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Rs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Rs.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,x)},Rs.flushSync=function(g){var y=h.T,x=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=x,i.d.f()}},Rs.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Rs.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Rs.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,k=p(x,y.crossOrigin),j=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:k,integrity:j,fetchPriority:L}):x==="script"&&i.d.X(g,{crossOrigin:k,integrity:j,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Rs.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Rs.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,k=p(x,y.crossOrigin);i.d.L(g,x,{crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Rs.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Rs.requestFormReset=function(g){i.d.r(g)},Rs.unstable_batchedUpdates=function(g,y){return g(y)},Rs.useFormState=function(g,y,x){return h.H.useFormState(g,y,x)},Rs.useFormStatus=function(){return h.H.useHostTransitionStatus()},Rs.version="19.2.4",Rs}var o1;function aj(){if(o1)return hp.exports;o1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),hp.exports=rj(),hp.exports}var l1;function ij(){if(l1)return Vc;l1=1;var s=sj(),e=yg(),n=aj();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var o=t,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var b=!1,S=f.child;S;){if(S===o){b=!0,o=f,c=m;break}if(S===c){b=!0,c=f,o=m;break}S=S.sibling}if(!b){for(S=m.child;S;){if(S===o){b=!0,o=m,c=f;break}if(S===c){b=!0,c=m,o=f;break}S=S.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?t:r}function x(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=x(t),r!==null)return r;t=t.sibling}return null}var k=Object.assign,j=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),Ve=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Fe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case ne:return"Profiler";case V:return"StrictMode";case Ve:return"Suspense";case Ae:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case $:return"Portal";case ce:return t.displayName||"Context";case X:return(t._context.displayName||"Context")+".Consumer";case _e:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return r=t.displayName||null,r!==null?r:Fe(t.type)||"Memo";case E:r=t._payload,t=t._init;try{return Fe(t(r))}catch{}}return null}var bt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie={pending:!1,data:null,method:null,action:null},le=[],De=-1;function N(t){return{current:t}}function B(t){0>De||(t.current=le[De],le[De]=null,De--)}function ie(t,r){De++,le[De]=t.current,t.current=r}var pe=N(null),Ne=N(null),Me=N(null),Ze=N(null);function qe(t,r){switch(ie(Me,r),ie(Ne,t),ie(pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?kb(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=kb(r),t=Tb(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}B(pe),ie(pe,t)}function rt(){B(pe),B(Ne),B(Me)}function Bt(t){t.memoizedState!==null&&ie(Ze,t);var r=pe.current,o=Tb(r,t.type);r!==o&&(ie(Ne,t),ie(pe,o))}function Jt(t){Ne.current===t&&(B(pe),B(Ne)),Ze.current===t&&(B(Ze),Ic._currentValue=Ie)}var ct,gt;function ae(t){if(ct===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);ct=r&&r[1]||"",gt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ct+t+gt}var un=!1;function It(t,r){if(!t||un)return"";un=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(de){var re=de}Reflect.construct(t,[],Ee)}else{try{Ee.call()}catch(de){re=de}t.call(Ee.prototype)}}else{try{throw Error()}catch(de){re=de}(Ee=t())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(de){if(de&&re&&typeof de.stack=="string")return[de.stack,re.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],S=m[1];if(b&&S){var z=b.split(`
`),se=S.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<se.length&&!se[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===se.length)for(c=z.length-1,f=se.length-1;1<=c&&0<=f&&z[c]!==se[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==se[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==se[f]){var be=`
`+z[c].replace(" at new "," at ");return t.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",t.displayName)),be}while(1<=c&&0<=f);break}}}finally{un=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?ae(o):""}function _t(t,r){switch(t.tag){case 26:case 27:case 5:return ae(t.type);case 16:return ae("Lazy");case 13:return t.child!==r&&r!==null?ae("Suspense Fallback"):ae("Suspense");case 19:return ae("SuspenseList");case 0:case 15:return It(t.type,!1);case 11:return It(t.type.render,!1);case 1:return It(t.type,!0);case 31:return ae("Activity");default:return""}}function Et(t){try{var r="",o=null;do r+=_t(t,o),o=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ut=Object.prototype.hasOwnProperty,Je=s.unstable_scheduleCallback,Gt=s.unstable_cancelCallback,Qn=s.unstable_shouldYield,Mt=s.unstable_requestPaint,Pt=s.unstable_now,Dn=s.unstable_getCurrentPriorityLevel,qt=s.unstable_ImmediatePriority,bn=s.unstable_UserBlockingPriority,O=s.unstable_NormalPriority,J=s.unstable_LowPriority,ye=s.unstable_IdlePriority,He=s.log,Ye=s.unstable_setDisableYieldValue,Be=null,Ke=null;function We(t){if(typeof He=="function"&&Ye(t),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Be,t)}catch{}}var Le=Math.clz32?Math.clz32:at,xe=Math.log,ze=Math.LN2;function at(t){return t>>>=0,t===0?32:31-(xe(t)/ze|0)|0}var St=256,Wt=262144,Qe=4194304;function ht(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function dt(t,r,o){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=ht(c):(b&=S,b!==0?f=ht(b):o||(o=S&~t,o!==0&&(f=ht(o))))):(S=c&~m,S!==0?f=ht(S):b!==0?f=ht(b):o||(o=c&~t,o!==0&&(f=ht(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function Rt(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Lt(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kt(){var t=Qe;return Qe<<=1,(Qe&62914560)===0&&(Qe=4194304),t}function Kt(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Ht(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function an(t,r,o,c,f,m){var b=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var S=t.entanglements,z=t.expirationTimes,se=t.hiddenUpdates;for(o=b&~o;0<o;){var be=31-Le(o),Ee=1<<be;S[be]=0,z[be]=-1;var re=se[be];if(re!==null)for(se[be]=null,be=0;be<re.length;be++){var de=re[be];de!==null&&(de.lane&=-536870913)}o&=~Ee}c!==0&&hn(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~r))}function hn(t,r,o){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-Le(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|o&261930}function fn(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-Le(o),f=1<<c;f&r|t[c]&r&&(t[c]|=r),o&=~f}}function Mn(t,r){var o=r&-r;return o=(o&42)!==0?1:H(o),(o&(t.suspendedLanes|r))!==0?0:o}function H(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ge(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ve(){var t=ke.p;return t!==0?t:(t=window.event,t===void 0?32:Gb(t.type))}function we(t,r){var o=ke.p;try{return ke.p=t,r()}finally{ke.p=o}}var me=Math.random().toString(36).slice(2),Xe="__reactFiber$"+me,yt="__reactProps$"+me,nt="__reactContainer$"+me,mt="__reactEvents$"+me,vt="__reactListeners$"+me,on="__reactHandles$"+me,Ns="__reactResources$"+me,Wn="__reactMarker$"+me;function Xn(t){delete t[Xe],delete t[yt],delete t[mt],delete t[vt],delete t[on]}function mn(t){var r=t[Xe];if(r)return r;for(var o=t.parentNode;o;){if(r=o[nt]||o[Xe]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Ab(t);t!==null;){if(o=t[Xe])return o;t=Ab(t)}return r}t=o,o=t.parentNode}return null}function q(t){if(t=t[Xe]||t[nt]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function he(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function T(t){var r=t[Ns];return r||(r=t[Ns]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function R(t){t[Wn]=!0}var K=new Set,ee={};function $e(t,r){Ue(t,r),Ue(t+"Capture",r)}function Ue(t,r){for(ee[t]=r,t=0;t<r.length;t++)K.add(r[t])}var Oe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},Tt={};function G(t){return ut.call(Tt,t)?!0:ut.call(Ut,t)?!1:Oe.test(t)?Tt[t]=!0:(Ut[t]=!0,!1)}function fe(t,r,o){if(G(r))if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+o)}}function oe(t,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+o)}}function Re(t,r,o,c){if(c===null)t.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(r,o,""+c)}}function Pe(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function it(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function At(t,r,o){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){o=""+b,m.call(this,b)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ot(t){if(!t._valueTracker){var r=it(t)?"checked":"value";t._valueTracker=At(t,r,""+t[r])}}function Zt(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=it(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function Un(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var pn=/[\n"\\]/g;function On(t){return t.replace(pn,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function qa(t,r,o,c,f,m,b,S){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Pe(r)):t.value!==""+Pe(r)&&(t.value=""+Pe(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Ha(t,b,Pe(r)):o!=null?Ha(t,b,Pe(o)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Pe(S):t.removeAttribute("name")}function Hi(t,r,o,c,f,m,b,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){ot(t);return}o=o!=null?""+Pe(o):"",r=r!=null?""+Pe(r):o,S||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=S?t.checked:!!c,t.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),ot(t)}function Ha(t,r,o){r==="number"&&Un(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function wr(t,r,o,c){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+Pe(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function dn(t,r,o){if(r!=null&&(r=""+Pe(r),r!==t.value&&(t.value=r),o==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=o!=null?""+Pe(o):""}function Gn(t,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(bt(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Pe(r),t.defaultValue=o,c=t.textContent,c===o&&c!==""&&c!==null&&(t.value=c),ot(t)}function Kn(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var _r=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kr(t,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,o):typeof o!="number"||o===0||_r.has(r)?r==="float"?t.cssFloat=o:t[r]=(""+o).trim():t[r]=o+"px"}function vs(t,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&kr(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&kr(t,m,r[m])}function Cs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $a(t){return Tr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ps(){}var Yl=null;function ir(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wa=null,$r=null;function $i(t){var r=q(t);if(r&&(t=r.stateNode)){var o=t[yt]||null;e:switch(t=r.stateNode,r.type){case"input":if(qa(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+On(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var f=c[yt]||null;if(!f)throw Error(i(90));qa(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===t.form&&Zt(c)}break e;case"textarea":dn(t,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&wr(t,!!o.multiple,r,!1)}}}var Oo=!1;function Ga(t,r,o){if(Oo)return t(r,o);Oo=!0;try{var c=t(r);return c}finally{if(Oo=!1,(Wa!==null||$r!==null)&&(Th(),Wa&&(r=Wa,t=$r,$r=Wa=null,$i(r),t)))for(r=0;r<t.length;r++)$i(t[r])}}function jr(t,r){var o=t.stateNode;if(o===null)return null;var c=o[yt]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wi=!1;if(or)try{var En={};Object.defineProperty(En,"passive",{get:function(){Wi=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{Wi=!1}var Wr=null,Ql=null,Gi=null;function Xl(){if(Gi)return Gi;var t,r=Ql,o=r.length,c,f="value"in Wr?Wr.value:Wr.textContent,m=f.length;for(t=0;t<o&&r[t]===f[t];t++);var b=o-t;for(c=1;c<=b&&r[o-c]===f[m-c];c++);return Gi=f.slice(t,1<c?1-c:void 0)}function Ki(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function fa(){return!0}function Er(){return!1}function bs(t){function r(o,c,f,m,b){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(o=t[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?fa:Er,this.isPropagationStopped=Er,this}return k(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),r}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gr=bs(ma),Ka=k({},ma,{view:0,detail:0}),Jl=bs(Ka),Ya,Vo,Kr,Bo=k({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kr&&(Kr&&t.type==="mousemove"?(Ya=t.screenX-Kr.screenX,Vo=t.screenY-Kr.screenY):Vo=Ya=0,Kr=t),Ya)},movementY:function(t){return"movementY"in t?t.movementY:Vo}}),Zl=bs(Bo),Yi=k({},Bo,{dataTransfer:0}),Mu=bs(Yi),Iu=k({},Ka,{relatedTarget:0}),Qi=bs(Iu),ec=k({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),Du=bs(ec),Uo=k({},ma,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pu=bs(Uo),Lu=k({},ma,{data:0}),Yr=bs(Lu),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Bu[t])?!!r[t]:!1}function Qa(){return Uu}var Ls=k({},Ka,{key:function(t){if(t.key){var r=Ou[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ki(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qa,charCode:function(t){return t.type==="keypress"?Ki(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ki(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zu=bs(Ls),Fu=k({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pa=bs(Fu),d=k({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qa}),v=bs(d),w=k({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=bs(w),Z=k({},Bo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=bs(Z),Ge=k({},ma,{newState:0,oldState:0}),zt=bs(Ge),ns=[9,13,27,32],xn=or&&"CompositionEvent"in window,zn=null;or&&"documentMode"in document&&(zn=document.documentMode);var lr=or&&"TextEvent"in window&&!zn,Qr=or&&(!xn||zn&&8<zn&&11>=zn),Sr=" ",Nr=!1;function Xi(t,r){switch(t){case"keyup":return ns.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fo=!1;function kk(t,r){switch(t){case"compositionend":return zo(r);case"keypress":return r.which!==32?null:(Nr=!0,Sr);case"textInput":return t=r.data,t===Sr&&Nr?null:t;default:return null}}function Tk(t,r){if(Fo)return t==="compositionend"||!xn&&Xi(t,r)?(t=Xl(),Gi=Ql=Wr=null,Fo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Qr&&r.locale!=="ko"?null:r.data;default:return null}}var jk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!jk[t.type]:r==="textarea"}function Py(t,r,o,c){Wa?$r?$r.push(c):$r=[c]:Wa=c,r=Ah(r,"onChange"),0<r.length&&(o=new Gr("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var tc=null,nc=null;function Ek(t){yb(t,0)}function qu(t){var r=he(t);if(Zt(r))return t}function Ly(t,r){if(t==="change")return r}var Oy=!1;if(or){var ff;if(or){var mf="oninput"in document;if(!mf){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),mf=typeof Vy.oninput=="function"}ff=mf}else ff=!1;Oy=ff&&(!document.documentMode||9<document.documentMode)}function By(){tc&&(tc.detachEvent("onpropertychange",Uy),nc=tc=null)}function Uy(t){if(t.propertyName==="value"&&qu(nc)){var r=[];Py(r,nc,t,ir(t)),Ga(Ek,r)}}function Sk(t,r,o){t==="focusin"?(By(),tc=r,nc=o,tc.attachEvent("onpropertychange",Uy)):t==="focusout"&&By()}function Nk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qu(nc)}function Ck(t,r){if(t==="click")return qu(r)}function Rk(t,r){if(t==="input"||t==="change")return qu(r)}function Ak(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Ys=typeof Object.is=="function"?Object.is:Ak;function sc(t,r){if(Ys(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!ut.call(r,f)||!Ys(t[f],r[f]))return!1}return!0}function zy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fy(t,r){var o=zy(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zy(o)}}function qy(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?qy(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Hy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Un(t.document);r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Un(t.document)}return r}function pf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Mk=or&&"documentMode"in document&&11>=document.documentMode,qo=null,gf=null,rc=null,yf=!1;function $y(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;yf||qo==null||qo!==Un(c)||(c=qo,"selectionStart"in c&&pf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),rc&&sc(rc,c)||(rc=c,c=Ah(gf,"onSelect"),0<c.length&&(r=new Gr("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=qo)))}function Ji(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Ho={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionrun:Ji("Transition","TransitionRun"),transitionstart:Ji("Transition","TransitionStart"),transitioncancel:Ji("Transition","TransitionCancel"),transitionend:Ji("Transition","TransitionEnd")},vf={},Wy={};or&&(Wy=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function Zi(t){if(vf[t])return vf[t];if(!Ho[t])return t;var r=Ho[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Wy)return vf[t]=r[o];return t}var Gy=Zi("animationend"),Ky=Zi("animationiteration"),Yy=Zi("animationstart"),Ik=Zi("transitionrun"),Dk=Zi("transitionstart"),Pk=Zi("transitioncancel"),Qy=Zi("transitionend"),Xy=new Map,bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bf.push("scrollEnd");function Cr(t,r){Xy.set(t,r),$e(r,[t])}var Hu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},cr=[],$o=0,xf=0;function $u(){for(var t=$o,r=xf=$o=0;r<t;){var o=cr[r];cr[r++]=null;var c=cr[r];cr[r++]=null;var f=cr[r];cr[r++]=null;var m=cr[r];if(cr[r++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}m!==0&&Jy(o,f,m)}}function Wu(t,r,o,c){cr[$o++]=t,cr[$o++]=r,cr[$o++]=o,cr[$o++]=c,xf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function wf(t,r,o,c){return Wu(t,r,o,c),Gu(t)}function eo(t,r){return Wu(t,null,null,r),Gu(t)}function Jy(t,r,o){t.lanes|=o;var c=t.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=t.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-Le(o),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function Gu(t){if(50<Ec)throw Ec=0,Rm=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Wo={};function Lk(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(t,r,o,c){return new Lk(t,r,o,c)}function _f(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ga(t,r){var o=t.alternate;return o===null?(o=Qs(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function Zy(t,r){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,r=o.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Ku(t,r,o,c,f,m){var b=0;if(c=t,typeof t=="function")_f(t)&&(b=1);else if(typeof t=="string")b=zT(t,o,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Qs(31,o,r,f),t.elementType=A,t.lanes=m,t;case U:return to(o.children,f,m,r);case V:b=8,f|=24;break;case ne:return t=Qs(12,o,r,f|2),t.elementType=ne,t.lanes=m,t;case Ve:return t=Qs(13,o,r,f),t.elementType=Ve,t.lanes=m,t;case Ae:return t=Qs(19,o,r,f),t.elementType=Ae,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ce:b=10;break e;case X:b=9;break e;case _e:b=11;break e;case M:b=14;break e;case E:b=16,c=null;break e}b=29,o=Error(i(130,t===null?"null":typeof t,"")),c=null}return r=Qs(b,o,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function to(t,r,o,c){return t=Qs(7,t,c,r),t.lanes=o,t}function kf(t,r,o){return t=Qs(6,t,null,r),t.lanes=o,t}function ev(t){var r=Qs(18,null,null,0);return r.stateNode=t,r}function Tf(t,r,o){return r=Qs(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var tv=new WeakMap;function ur(t,r){if(typeof t=="object"&&t!==null){var o=tv.get(t);return o!==void 0?o:(r={value:t,source:r,stack:Et(r)},tv.set(t,r),r)}return{value:t,source:r,stack:Et(r)}}var Go=[],Ko=0,Yu=null,ac=0,hr=[],dr=0,Xa=null,Xr=1,Jr="";function ya(t,r){Go[Ko++]=ac,Go[Ko++]=Yu,Yu=t,ac=r}function nv(t,r,o){hr[dr++]=Xr,hr[dr++]=Jr,hr[dr++]=Xa,Xa=t;var c=Xr;t=Jr;var f=32-Le(c)-1;c&=~(1<<f),o+=1;var m=32-Le(r)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,Xr=1<<32-Le(r)+f|o<<f|c,Jr=m+t}else Xr=1<<m|o<<f|c,Jr=t}function jf(t){t.return!==null&&(ya(t,1),nv(t,1,0))}function Ef(t){for(;t===Yu;)Yu=Go[--Ko],Go[Ko]=null,ac=Go[--Ko],Go[Ko]=null;for(;t===Xa;)Xa=hr[--dr],hr[dr]=null,Jr=hr[--dr],hr[dr]=null,Xr=hr[--dr],hr[dr]=null}function sv(t,r){hr[dr++]=Xr,hr[dr++]=Jr,hr[dr++]=Xa,Xr=r.id,Jr=r.overflow,Xa=t}var xs=null,Vn=null,ln=!1,Ja=null,fr=!1,Sf=Error(i(519));function Za(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ic(ur(r,t)),Sf}function rv(t){var r=t.stateNode,o=t.type,c=t.memoizedProps;switch(r[Xe]=t,r[yt]=c,o){case"dialog":Xt("cancel",r),Xt("close",r);break;case"iframe":case"object":case"embed":Xt("load",r);break;case"video":case"audio":for(o=0;o<Nc.length;o++)Xt(Nc[o],r);break;case"source":Xt("error",r);break;case"img":case"image":case"link":Xt("error",r),Xt("load",r);break;case"details":Xt("toggle",r);break;case"input":Xt("invalid",r),Hi(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Xt("invalid",r);break;case"textarea":Xt("invalid",r),Gn(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||wb(r.textContent,o)?(c.popover!=null&&(Xt("beforetoggle",r),Xt("toggle",r)),c.onScroll!=null&&Xt("scroll",r),c.onScrollEnd!=null&&Xt("scrollend",r),c.onClick!=null&&(r.onclick=Ps),r=!0):r=!1,r||Za(t,!0)}function av(t){for(xs=t.return;xs;)switch(xs.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:xs=xs.return}}function Yo(t){if(t!==xs)return!1;if(!ln)return av(t),ln=!0,!1;var r=t.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||$m(t.type,t.memoizedProps)),o=!o),o&&Vn&&Za(t),av(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Vn=Rb(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Vn=Rb(t)}else r===27?(r=Vn,fi(t.type)?(t=Qm,Qm=null,Vn=t):Vn=r):Vn=xs?pr(t.stateNode.nextSibling):null;return!0}function no(){Vn=xs=null,ln=!1}function Nf(){var t=Ja;return t!==null&&(qs===null?qs=t:qs.push.apply(qs,t),Ja=null),t}function ic(t){Ja===null?Ja=[t]:Ja.push(t)}var Cf=N(null),so=null,va=null;function ei(t,r,o){ie(Cf,r._currentValue),r._currentValue=o}function ba(t){t._currentValue=Cf.current,B(Cf)}function Rf(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Af(t,r,o,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var z=0;z<r.length;z++)if(S.context===r[z]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),Rf(m.return,o,t),c||(b=null);break e}m=S.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),Rf(b,o,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Qo(t,r,o,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var S=f.type;Ys(f.pendingProps.value,b.value)||(t!==null?t.push(S):t=[S])}}else if(f===Ze.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Ic):t=[Ic])}f=f.return}t!==null&&Af(r,t,o,c),r.flags|=262144}function Qu(t){for(t=t.firstContext;t!==null;){if(!Ys(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ro(t){so=t,va=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ws(t){return iv(so,t)}function Xu(t,r){return so===null&&ro(t),iv(t,r)}function iv(t,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},va===null){if(t===null)throw Error(i(308));va=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else va=va.next=r;return o}var Ok=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(o,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(o){return o()})}},Vk=s.unstable_scheduleCallback,Bk=s.unstable_NormalPriority,os={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new Ok,data:new Map,refCount:0}}function oc(t){t.refCount--,t.refCount===0&&Vk(Bk,function(){t.controller.abort()})}var lc=null,If=0,Xo=0,Jo=null;function Uk(t,r){if(lc===null){var o=lc=[];If=0,Xo=Lm(),Jo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return If++,r.then(ov,ov),r}function ov(){if(--If===0&&lc!==null){Jo!==null&&(Jo.status="fulfilled");var t=lc;lc=null,Xo=0,Jo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function zk(t,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var lv=Y.S;Y.S=function(t,r){$0=Pt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Uk(t,r),lv!==null&&lv(t,r)};var ao=N(null);function Df(){var t=ao.current;return t!==null?t:In.pooledCache}function Ju(t,r){r===null?ie(ao,ao.current):ie(ao,r.pool)}function cv(){var t=Df();return t===null?null:{parent:os._currentValue,pool:t}}var Zo=Error(i(460)),Pf=Error(i(474)),Zu=Error(i(542)),eh={then:function(){}};function uv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function hv(t,r,o){switch(o=t[o],o===void 0?t.push(r):o!==r&&(r.then(Ps,Ps),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,fv(t),t;default:if(typeof r.status=="string")r.then(Ps,Ps);else{if(t=In,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,fv(t),t}throw oo=r,Zo}}function io(t){try{var r=t._init;return r(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(oo=o,Zo):o}}var oo=null;function dv(){if(oo===null)throw Error(i(459));var t=oo;return oo=null,t}function fv(t){if(t===Zo||t===Zu)throw Error(i(483))}var el=null,cc=0;function th(t){var r=cc;return cc+=1,el===null&&(el=[]),hv(el,t,r)}function uc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function nh(t,r){throw r.$$typeof===j?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function mv(t){function r(Q,W){if(t){var te=Q.deletions;te===null?(Q.deletions=[W],Q.flags|=16):te.push(W)}}function o(Q,W){if(!t)return null;for(;W!==null;)r(Q,W),W=W.sibling;return null}function c(Q){for(var W=new Map;Q!==null;)Q.key!==null?W.set(Q.key,Q):W.set(Q.index,Q),Q=Q.sibling;return W}function f(Q,W){return Q=ga(Q,W),Q.index=0,Q.sibling=null,Q}function m(Q,W,te){return Q.index=te,t?(te=Q.alternate,te!==null?(te=te.index,te<W?(Q.flags|=67108866,W):te):(Q.flags|=67108866,W)):(Q.flags|=1048576,W)}function b(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function S(Q,W,te,Te){return W===null||W.tag!==6?(W=kf(te,Q.mode,Te),W.return=Q,W):(W=f(W,te),W.return=Q,W)}function z(Q,W,te,Te){var xt=te.type;return xt===U?be(Q,W,te.props.children,Te,te.key):W!==null&&(W.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===E&&io(xt)===W.type)?(W=f(W,te.props),uc(W,te),W.return=Q,W):(W=Ku(te.type,te.key,te.props,null,Q.mode,Te),uc(W,te),W.return=Q,W)}function se(Q,W,te,Te){return W===null||W.tag!==4||W.stateNode.containerInfo!==te.containerInfo||W.stateNode.implementation!==te.implementation?(W=Tf(te,Q.mode,Te),W.return=Q,W):(W=f(W,te.children||[]),W.return=Q,W)}function be(Q,W,te,Te,xt){return W===null||W.tag!==7?(W=to(te,Q.mode,Te,xt),W.return=Q,W):(W=f(W,te),W.return=Q,W)}function Ee(Q,W,te){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=kf(""+W,Q.mode,te),W.return=Q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case L:return te=Ku(W.type,W.key,W.props,null,Q.mode,te),uc(te,W),te.return=Q,te;case $:return W=Tf(W,Q.mode,te),W.return=Q,W;case E:return W=io(W),Ee(Q,W,te)}if(bt(W)||F(W))return W=to(W,Q.mode,te,null),W.return=Q,W;if(typeof W.then=="function")return Ee(Q,th(W),te);if(W.$$typeof===ce)return Ee(Q,Xu(Q,W),te);nh(Q,W)}return null}function re(Q,W,te,Te){var xt=W!==null?W.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return xt!==null?null:S(Q,W,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case L:return te.key===xt?z(Q,W,te,Te):null;case $:return te.key===xt?se(Q,W,te,Te):null;case E:return te=io(te),re(Q,W,te,Te)}if(bt(te)||F(te))return xt!==null?null:be(Q,W,te,Te,null);if(typeof te.then=="function")return re(Q,W,th(te),Te);if(te.$$typeof===ce)return re(Q,W,Xu(Q,te),Te);nh(Q,te)}return null}function de(Q,W,te,Te,xt){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Q=Q.get(te)||null,S(W,Q,""+Te,xt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case L:return Q=Q.get(Te.key===null?te:Te.key)||null,z(W,Q,Te,xt);case $:return Q=Q.get(Te.key===null?te:Te.key)||null,se(W,Q,Te,xt);case E:return Te=io(Te),de(Q,W,te,Te,xt)}if(bt(Te)||F(Te))return Q=Q.get(te)||null,be(W,Q,Te,xt,null);if(typeof Te.then=="function")return de(Q,W,te,th(Te),xt);if(Te.$$typeof===ce)return de(Q,W,te,Xu(W,Te),xt);nh(W,Te)}return null}function lt(Q,W,te,Te){for(var xt=null,gn=null,ft=W,$t=W=0,tn=null;ft!==null&&$t<te.length;$t++){ft.index>$t?(tn=ft,ft=null):tn=ft.sibling;var yn=re(Q,ft,te[$t],Te);if(yn===null){ft===null&&(ft=tn);break}t&&ft&&yn.alternate===null&&r(Q,ft),W=m(yn,W,$t),gn===null?xt=yn:gn.sibling=yn,gn=yn,ft=tn}if($t===te.length)return o(Q,ft),ln&&ya(Q,$t),xt;if(ft===null){for(;$t<te.length;$t++)ft=Ee(Q,te[$t],Te),ft!==null&&(W=m(ft,W,$t),gn===null?xt=ft:gn.sibling=ft,gn=ft);return ln&&ya(Q,$t),xt}for(ft=c(ft);$t<te.length;$t++)tn=de(ft,Q,$t,te[$t],Te),tn!==null&&(t&&tn.alternate!==null&&ft.delete(tn.key===null?$t:tn.key),W=m(tn,W,$t),gn===null?xt=tn:gn.sibling=tn,gn=tn);return t&&ft.forEach(function(vi){return r(Q,vi)}),ln&&ya(Q,$t),xt}function jt(Q,W,te,Te){if(te==null)throw Error(i(151));for(var xt=null,gn=null,ft=W,$t=W=0,tn=null,yn=te.next();ft!==null&&!yn.done;$t++,yn=te.next()){ft.index>$t?(tn=ft,ft=null):tn=ft.sibling;var vi=re(Q,ft,yn.value,Te);if(vi===null){ft===null&&(ft=tn);break}t&&ft&&vi.alternate===null&&r(Q,ft),W=m(vi,W,$t),gn===null?xt=vi:gn.sibling=vi,gn=vi,ft=tn}if(yn.done)return o(Q,ft),ln&&ya(Q,$t),xt;if(ft===null){for(;!yn.done;$t++,yn=te.next())yn=Ee(Q,yn.value,Te),yn!==null&&(W=m(yn,W,$t),gn===null?xt=yn:gn.sibling=yn,gn=yn);return ln&&ya(Q,$t),xt}for(ft=c(ft);!yn.done;$t++,yn=te.next())yn=de(ft,Q,$t,yn.value,Te),yn!==null&&(t&&yn.alternate!==null&&ft.delete(yn.key===null?$t:yn.key),W=m(yn,W,$t),gn===null?xt=yn:gn.sibling=yn,gn=yn);return t&&ft.forEach(function(JT){return r(Q,JT)}),ln&&ya(Q,$t),xt}function Cn(Q,W,te,Te){if(typeof te=="object"&&te!==null&&te.type===U&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case L:e:{for(var xt=te.key;W!==null;){if(W.key===xt){if(xt=te.type,xt===U){if(W.tag===7){o(Q,W.sibling),Te=f(W,te.props.children),Te.return=Q,Q=Te;break e}}else if(W.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===E&&io(xt)===W.type){o(Q,W.sibling),Te=f(W,te.props),uc(Te,te),Te.return=Q,Q=Te;break e}o(Q,W);break}else r(Q,W);W=W.sibling}te.type===U?(Te=to(te.props.children,Q.mode,Te,te.key),Te.return=Q,Q=Te):(Te=Ku(te.type,te.key,te.props,null,Q.mode,Te),uc(Te,te),Te.return=Q,Q=Te)}return b(Q);case $:e:{for(xt=te.key;W!==null;){if(W.key===xt)if(W.tag===4&&W.stateNode.containerInfo===te.containerInfo&&W.stateNode.implementation===te.implementation){o(Q,W.sibling),Te=f(W,te.children||[]),Te.return=Q,Q=Te;break e}else{o(Q,W);break}else r(Q,W);W=W.sibling}Te=Tf(te,Q.mode,Te),Te.return=Q,Q=Te}return b(Q);case E:return te=io(te),Cn(Q,W,te,Te)}if(bt(te))return lt(Q,W,te,Te);if(F(te)){if(xt=F(te),typeof xt!="function")throw Error(i(150));return te=xt.call(te),jt(Q,W,te,Te)}if(typeof te.then=="function")return Cn(Q,W,th(te),Te);if(te.$$typeof===ce)return Cn(Q,W,Xu(Q,te),Te);nh(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,W!==null&&W.tag===6?(o(Q,W.sibling),Te=f(W,te),Te.return=Q,Q=Te):(o(Q,W),Te=kf(te,Q.mode,Te),Te.return=Q,Q=Te),b(Q)):o(Q,W)}return function(Q,W,te,Te){try{cc=0;var xt=Cn(Q,W,te,Te);return el=null,xt}catch(ft){if(ft===Zo||ft===Zu)throw ft;var gn=Qs(29,ft,null,Q.mode);return gn.lanes=Te,gn.return=Q,gn}}}var lo=mv(!0),pv=mv(!1),ti=!1;function Lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Of(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ni(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function si(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(wn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Gu(t),Jy(t,null,o),r}return Wu(t,c,r,o),Gu(t)}function hc(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,fn(t,o)}}function Vf(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}var Bf=!1;function dc(){if(Bf){var t=Jo;if(t!==null)throw t}}function fc(t,r,o,c){Bf=!1;var f=t.updateQueue;ti=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var z=S,se=z.next;z.next=null,b===null?m=se:b.next=se,b=z;var be=t.alternate;be!==null&&(be=be.updateQueue,S=be.lastBaseUpdate,S!==b&&(S===null?be.firstBaseUpdate=se:S.next=se,be.lastBaseUpdate=z))}if(m!==null){var Ee=f.baseState;b=0,be=se=z=null,S=m;do{var re=S.lane&-536870913,de=re!==S.lane;if(de?(en&re)===re:(c&re)===re){re!==0&&re===Xo&&(Bf=!0),be!==null&&(be=be.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var lt=t,jt=S;re=r;var Cn=o;switch(jt.tag){case 1:if(lt=jt.payload,typeof lt=="function"){Ee=lt.call(Cn,Ee,re);break e}Ee=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=jt.payload,re=typeof lt=="function"?lt.call(Cn,Ee,re):lt,re==null)break e;Ee=k({},Ee,re);break e;case 2:ti=!0}}re=S.callback,re!==null&&(t.flags|=64,de&&(t.flags|=8192),de=f.callbacks,de===null?f.callbacks=[re]:de.push(re))}else de={lane:re,tag:S.tag,payload:S.payload,callback:S.callback,next:null},be===null?(se=be=de,z=Ee):be=be.next=de,b|=re;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;de=S,S=de.next,de.next=null,f.lastBaseUpdate=de,f.shared.pending=null}}while(!0);be===null&&(z=Ee),f.baseState=z,f.firstBaseUpdate=se,f.lastBaseUpdate=be,m===null&&(f.shared.lanes=0),li|=b,t.lanes=b,t.memoizedState=Ee}}function gv(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function yv(t,r){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)gv(o[t],r)}var tl=N(null),sh=N(0);function vv(t,r){t=Na,ie(sh,t),ie(tl,r),Na=t|r.baseLanes}function Uf(){ie(sh,Na),ie(tl,tl.current)}function zf(){Na=sh.current,B(tl),B(sh)}var Xs=N(null),mr=null;function ri(t){var r=t.alternate;ie(ss,ss.current&1),ie(Xs,t),mr===null&&(r===null||tl.current!==null||r.memoizedState!==null)&&(mr=t)}function Ff(t){ie(ss,ss.current),ie(Xs,t),mr===null&&(mr=t)}function bv(t){t.tag===22?(ie(ss,ss.current),ie(Xs,t),mr===null&&(mr=t)):ai()}function ai(){ie(ss,ss.current),ie(Xs,Xs.current)}function Js(t){B(Xs),mr===t&&(mr=null),B(ss)}var ss=N(0);function rh(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Km(o)||Ym(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var xa=0,Ft=null,Sn=null,ls=null,ah=!1,nl=!1,co=!1,ih=0,mc=0,sl=null,Fk=0;function Jn(){throw Error(i(321))}function qf(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Ys(t[o],r[o]))return!1;return!0}function Hf(t,r,o,c,f,m){return xa=m,Ft=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?n0:am,co=!1,m=o(c,f),co=!1,nl&&(m=wv(r,o,c,f)),xv(t),m}function xv(t){Y.H=yc;var r=Sn!==null&&Sn.next!==null;if(xa=0,ls=Sn=Ft=null,ah=!1,mc=0,sl=null,r)throw Error(i(300));t===null||cs||(t=t.dependencies,t!==null&&Qu(t)&&(cs=!0))}function wv(t,r,o,c){Ft=t;var f=0;do{if(nl&&(sl=null),mc=0,nl=!1,25<=f)throw Error(i(301));if(f+=1,ls=Sn=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=s0,m=r(o,c)}while(nl);return m}function qk(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?pc(r):r,t=t.useState()[0],(Sn!==null?Sn.memoizedState:null)!==t&&(Ft.flags|=1024),r}function $f(){var t=ih!==0;return ih=0,t}function Wf(t,r,o){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o}function Gf(t){if(ah){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}ah=!1}xa=0,ls=Sn=Ft=null,nl=!1,mc=ih=0,sl=null}function Os(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?Ft.memoizedState=ls=t:ls=ls.next=t,ls}function rs(){if(Sn===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=Sn.next;var r=ls===null?Ft.memoizedState:ls.next;if(r!==null)ls=r,Sn=t;else{if(t===null)throw Ft.alternate===null?Error(i(467)):Error(i(310));Sn=t,t={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},ls===null?Ft.memoizedState=ls=t:ls=ls.next=t}return ls}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(t){var r=mc;return mc+=1,sl===null&&(sl=[]),t=hv(sl,t,r),r=Ft,(ls===null?r.memoizedState:ls.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?n0:am),t}function lh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return pc(t);if(t.$$typeof===ce)return ws(t)}throw Error(i(438,String(t)))}function Kf(t){var r=null,o=Ft.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Ft.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=oh(),Ft.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(t),c=0;c<t;c++)o[c]=P;return r.index++,o}function wa(t,r){return typeof r=="function"?r(t):r}function ch(t){var r=rs();return Yf(r,Sn,t)}function Yf(t,r,o){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var S=b=null,z=null,se=r,be=!1;do{var Ee=se.lane&-536870913;if(Ee!==se.lane?(en&Ee)===Ee:(xa&Ee)===Ee){var re=se.revertLane;if(re===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),Ee===Xo&&(be=!0);else if((xa&re)===re){se=se.next,re===Xo&&(be=!0);continue}else Ee={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},z===null?(S=z=Ee,b=m):z=z.next=Ee,Ft.lanes|=re,li|=re;Ee=se.action,co&&o(m,Ee),m=se.hasEagerState?se.eagerState:o(m,Ee)}else re={lane:Ee,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},z===null?(S=z=re,b=m):z=z.next=re,Ft.lanes|=Ee,li|=Ee;se=se.next}while(se!==null&&se!==r);if(z===null?b=m:z.next=S,!Ys(m,t.memoizedState)&&(cs=!0,be&&(o=Jo,o!==null)))throw o;t.memoizedState=m,t.baseState=b,t.baseQueue=z,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Qf(t){var r=rs(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);Ys(m,r.memoizedState)||(cs=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function _v(t,r,o){var c=Ft,f=rs(),m=ln;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var b=!Ys((Sn||f).memoizedState,o);if(b&&(f.memoizedState=o,cs=!0),f=f.queue,Zf(jv.bind(null,c,f,t),[t]),f.getSnapshot!==r||b||ls!==null&&ls.memoizedState.tag&1){if(c.flags|=2048,rl(9,{destroy:void 0},Tv.bind(null,c,f,o,r),null),In===null)throw Error(i(349));m||(xa&127)!==0||kv(c,r,o)}return o}function kv(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Ft.updateQueue,r===null?(r=oh(),Ft.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Tv(t,r,o,c){r.value=o,r.getSnapshot=c,Ev(r)&&Sv(t)}function jv(t,r,o){return o(function(){Ev(r)&&Sv(t)})}function Ev(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Ys(t,o)}catch{return!0}}function Sv(t){var r=eo(t,2);r!==null&&Hs(r,t,2)}function Xf(t){var r=Os();if(typeof t=="function"){var o=t;if(t=o(),co){We(!0);try{o()}finally{We(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},r}function Nv(t,r,o,c){return t.baseState=o,Yf(t,Sn,typeof c=="function"?c:wa)}function Hk(t,r,o,c,f){if(dh(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};Y.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,Cv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function Cv(t,r){var o=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=Y.T,b={};Y.T=b;try{var S=o(f,c),z=Y.S;z!==null&&z(b,S),Rv(t,r,S)}catch(se){Jf(t,r,se)}finally{m!==null&&b.types!==null&&(m.types=b.types),Y.T=m}}else try{m=o(f,c),Rv(t,r,m)}catch(se){Jf(t,r,se)}}function Rv(t,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Av(t,r,c)},function(c){return Jf(t,r,c)}):Av(t,r,o)}function Av(t,r,o){r.status="fulfilled",r.value=o,Mv(r),t.state=o,r=t.pending,r!==null&&(o=r.next,o===r?t.pending=null:(o=o.next,r.next=o,Cv(t,o)))}function Jf(t,r,o){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Mv(r),r=r.next;while(r!==c)}t.action=null}function Mv(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Iv(t,r){return r}function Dv(t,r){if(ln){var o=In.formState;if(o!==null){e:{var c=Ft;if(ln){if(Vn){t:{for(var f=Vn,m=fr;f.nodeType!==8;){if(!m){f=null;break t}if(f=pr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Vn=pr(f.nextSibling),c=f.data==="F!";break e}}Za(c)}c=!1}c&&(r=o[0])}}return o=Os(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iv,lastRenderedState:r},o.queue=c,o=Zv.bind(null,Ft,c),c.dispatch=o,c=Xf(!1),m=rm.bind(null,Ft,!1,c.queue),c=Os(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,o=Hk.bind(null,Ft,f,m,o),f.dispatch=o,c.memoizedState=t,[r,o,!1]}function Pv(t){var r=rs();return Lv(r,Sn,t)}function Lv(t,r,o){if(r=Yf(t,r,Iv)[0],t=ch(wa)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=pc(r)}catch(b){throw b===Zo?Zu:b}else c=r;r=rs();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Ft.flags|=2048,rl(9,{destroy:void 0},$k.bind(null,f,o),null)),[c,m,t]}function $k(t,r){t.action=r}function Ov(t){var r=rs(),o=Sn;if(o!==null)return Lv(r,o,t);rs(),r=r.memoizedState,o=rs();var c=o.queue.dispatch;return o.memoizedState=t,[r,c,!1]}function rl(t,r,o,c){return t={tag:t,create:o,deps:c,inst:r,next:null},r=Ft.updateQueue,r===null&&(r=oh(),Ft.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t),t}function Vv(){return rs().memoizedState}function uh(t,r,o,c){var f=Os();Ft.flags|=t,f.memoizedState=rl(1|r,{destroy:void 0},o,c===void 0?null:c)}function hh(t,r,o,c){var f=rs();c=c===void 0?null:c;var m=f.memoizedState.inst;Sn!==null&&c!==null&&qf(c,Sn.memoizedState.deps)?f.memoizedState=rl(r,m,o,c):(Ft.flags|=t,f.memoizedState=rl(1|r,m,o,c))}function Bv(t,r){uh(8390656,8,t,r)}function Zf(t,r){hh(2048,8,t,r)}function Wk(t){Ft.flags|=4;var r=Ft.updateQueue;if(r===null)r=oh(),Ft.updateQueue=r,r.events=[t];else{var o=r.events;o===null?r.events=[t]:o.push(t)}}function Uv(t){var r=rs().memoizedState;return Wk({ref:r,nextImpl:t}),function(){if((wn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function zv(t,r){return hh(4,2,t,r)}function Fv(t,r){return hh(4,4,t,r)}function qv(t,r){if(typeof r=="function"){t=t();var o=r(t);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Hv(t,r,o){o=o!=null?o.concat([t]):null,hh(4,4,qv.bind(null,r,t),o)}function em(){}function $v(t,r){var o=rs();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&qf(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function Wv(t,r){var o=rs();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&qf(r,c[1]))return c[0];if(c=t(),co){We(!0);try{t()}finally{We(!1)}}return o.memoizedState=[c,r],c}function tm(t,r,o){return o===void 0||(xa&1073741824)!==0&&(en&261930)===0?t.memoizedState=r:(t.memoizedState=o,t=G0(),Ft.lanes|=t,li|=t,o)}function Gv(t,r,o,c){return Ys(o,r)?o:tl.current!==null?(t=tm(t,o,c),Ys(t,r)||(cs=!0),t):(xa&42)===0||(xa&1073741824)!==0&&(en&261930)===0?(cs=!0,t.memoizedState=o):(t=G0(),Ft.lanes|=t,li|=t,r)}function Kv(t,r,o,c,f){var m=ke.p;ke.p=m!==0&&8>m?m:8;var b=Y.T,S={};Y.T=S,rm(t,!1,r,o);try{var z=f(),se=Y.S;if(se!==null&&se(S,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var be=zk(z,c);gc(t,r,be,tr(t))}else gc(t,r,c,tr(t))}catch(Ee){gc(t,r,{then:function(){},status:"rejected",reason:Ee},tr())}finally{ke.p=m,b!==null&&S.types!==null&&(b.types=S.types),Y.T=b}}function Gk(){}function nm(t,r,o,c){if(t.tag!==5)throw Error(i(476));var f=Yv(t).queue;Kv(t,f,r,Ie,o===null?Gk:function(){return Qv(t),o(c)})}function Yv(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Ie,baseState:Ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:Ie},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:o},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Qv(t){var r=Yv(t);r.next===null&&(r=t.alternate.memoizedState),gc(t,r.next.queue,{},tr())}function sm(){return ws(Ic)}function Xv(){return rs().memoizedState}function Jv(){return rs().memoizedState}function Kk(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var o=tr();t=ni(o);var c=si(r,t,o);c!==null&&(Hs(c,r,o),hc(c,r,o)),r={cache:Mf()},t.payload=r;return}r=r.return}}function Yk(t,r,o){var c=tr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},dh(t)?e0(r,o):(o=wf(t,r,o,c),o!==null&&(Hs(o,t,c),t0(o,r,c)))}function Zv(t,r,o){var c=tr();gc(t,r,o,c)}function gc(t,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(dh(t))e0(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,S=m(b,o);if(f.hasEagerState=!0,f.eagerState=S,Ys(S,b))return Wu(t,r,f,0),In===null&&$u(),!1}catch{}if(o=wf(t,r,f,c),o!==null)return Hs(o,t,c),t0(o,r,c),!0}return!1}function rm(t,r,o,c){if(c={lane:2,revertLane:Lm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},dh(t)){if(r)throw Error(i(479))}else r=wf(t,o,c,2),r!==null&&Hs(r,t,2)}function dh(t){var r=t.alternate;return t===Ft||r!==null&&r===Ft}function e0(t,r){nl=ah=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function t0(t,r,o){if((o&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,fn(t,o)}}var yc={readContext:ws,use:lh,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useLayoutEffect:Jn,useInsertionEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useSyncExternalStore:Jn,useId:Jn,useHostTransitionStatus:Jn,useFormState:Jn,useActionState:Jn,useOptimistic:Jn,useMemoCache:Jn,useCacheRefresh:Jn};yc.useEffectEvent=Jn;var n0={readContext:ws,use:lh,useCallback:function(t,r){return Os().memoizedState=[t,r===void 0?null:r],t},useContext:ws,useEffect:Bv,useImperativeHandle:function(t,r,o){o=o!=null?o.concat([t]):null,uh(4194308,4,qv.bind(null,r,t),o)},useLayoutEffect:function(t,r){return uh(4194308,4,t,r)},useInsertionEffect:function(t,r){uh(4,2,t,r)},useMemo:function(t,r){var o=Os();r=r===void 0?null:r;var c=t();if(co){We(!0);try{t()}finally{We(!1)}}return o.memoizedState=[c,r],c},useReducer:function(t,r,o){var c=Os();if(o!==void 0){var f=o(r);if(co){We(!0);try{o(r)}finally{We(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=Yk.bind(null,Ft,t),[c.memoizedState,t]},useRef:function(t){var r=Os();return t={current:t},r.memoizedState=t},useState:function(t){t=Xf(t);var r=t.queue,o=Zv.bind(null,Ft,r);return r.dispatch=o,[t.memoizedState,o]},useDebugValue:em,useDeferredValue:function(t,r){var o=Os();return tm(o,t,r)},useTransition:function(){var t=Xf(!1);return t=Kv.bind(null,Ft,t.queue,!0,!1),Os().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,o){var c=Ft,f=Os();if(ln){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),In===null)throw Error(i(349));(en&127)!==0||kv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Bv(jv.bind(null,c,m,t),[t]),c.flags|=2048,rl(9,{destroy:void 0},Tv.bind(null,c,m,o,r),null),o},useId:function(){var t=Os(),r=In.identifierPrefix;if(ln){var o=Jr,c=Xr;o=(c&~(1<<32-Le(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=ih++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Fk++,r="_"+r+"r_"+o.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:sm,useFormState:Dv,useActionState:Dv,useOptimistic:function(t){var r=Os();r.memoizedState=r.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=rm.bind(null,Ft,!0,o),o.dispatch=r,[t,r]},useMemoCache:Kf,useCacheRefresh:function(){return Os().memoizedState=Kk.bind(null,Ft)},useEffectEvent:function(t){var r=Os(),o={impl:t};return r.memoizedState=o,function(){if((wn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},am={readContext:ws,use:lh,useCallback:$v,useContext:ws,useEffect:Zf,useImperativeHandle:Hv,useInsertionEffect:zv,useLayoutEffect:Fv,useMemo:Wv,useReducer:ch,useRef:Vv,useState:function(){return ch(wa)},useDebugValue:em,useDeferredValue:function(t,r){var o=rs();return Gv(o,Sn.memoizedState,t,r)},useTransition:function(){var t=ch(wa)[0],r=rs().memoizedState;return[typeof t=="boolean"?t:pc(t),r]},useSyncExternalStore:_v,useId:Xv,useHostTransitionStatus:sm,useFormState:Pv,useActionState:Pv,useOptimistic:function(t,r){var o=rs();return Nv(o,Sn,t,r)},useMemoCache:Kf,useCacheRefresh:Jv};am.useEffectEvent=Uv;var s0={readContext:ws,use:lh,useCallback:$v,useContext:ws,useEffect:Zf,useImperativeHandle:Hv,useInsertionEffect:zv,useLayoutEffect:Fv,useMemo:Wv,useReducer:Qf,useRef:Vv,useState:function(){return Qf(wa)},useDebugValue:em,useDeferredValue:function(t,r){var o=rs();return Sn===null?tm(o,t,r):Gv(o,Sn.memoizedState,t,r)},useTransition:function(){var t=Qf(wa)[0],r=rs().memoizedState;return[typeof t=="boolean"?t:pc(t),r]},useSyncExternalStore:_v,useId:Xv,useHostTransitionStatus:sm,useFormState:Ov,useActionState:Ov,useOptimistic:function(t,r){var o=rs();return Sn!==null?Nv(o,Sn,t,r):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:Kf,useCacheRefresh:Jv};s0.useEffectEvent=Uv;function im(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:k({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var om={enqueueSetState:function(t,r,o){t=t._reactInternals;var c=tr(),f=ni(c);f.payload=r,o!=null&&(f.callback=o),r=si(t,f,c),r!==null&&(Hs(r,t,c),hc(r,t,c))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=tr(),f=ni(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=si(t,f,c),r!==null&&(Hs(r,t,c),hc(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=tr(),c=ni(o);c.tag=2,r!=null&&(c.callback=r),r=si(t,c,o),r!==null&&(Hs(r,t,o),hc(r,t,o))}};function r0(t,r,o,c,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!sc(o,c)||!sc(f,m):!0}function a0(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&om.enqueueReplaceState(r,r.state,null)}function uo(t,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(t=t.defaultProps){o===r&&(o=k({},o));for(var f in t)o[f]===void 0&&(o[f]=t[f])}return o}function i0(t){Hu(t)}function o0(t){console.error(t)}function l0(t){Hu(t)}function fh(t,r){try{var o=t.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function c0(t,r,o){try{var c=t.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function lm(t,r,o){return o=ni(o),o.tag=3,o.payload={element:null},o.callback=function(){fh(t,r)},o}function u0(t){return t=ni(t),t.tag=3,t}function h0(t,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){c0(r,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){c0(r,o,c),typeof f!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function Qk(t,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Qo(r,o,f,!0),o=Xs.current,o!==null){switch(o.tag){case 31:case 13:return mr===null?jh():o.alternate===null&&Zn===0&&(Zn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===eh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Im(t,c,f)),!1;case 22:return o.flags|=65536,c===eh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Im(t,c,f)),!1}throw Error(i(435,o.tag))}return Im(t,c,f),jh(),!1}if(ln)return r=Xs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Sf&&(t=Error(i(422),{cause:c}),ic(ur(t,o)))):(c!==Sf&&(r=Error(i(423),{cause:c}),ic(ur(r,o))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=ur(c,o),f=lm(t.stateNode,c,f),Vf(t,f),Zn!==4&&(Zn=2)),!1;var m=Error(i(520),{cause:c});if(m=ur(m,o),jc===null?jc=[m]:jc.push(m),Zn!==4&&(Zn=2),r===null)return!0;c=ur(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,t=f&-f,o.lanes|=t,t=lm(o.stateNode,c,t),Vf(o,t),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ci===null||!ci.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=u0(f),h0(f,t,o,c),Vf(o,f),!1}o=o.return}while(o!==null);return!1}var cm=Error(i(461)),cs=!1;function _s(t,r,o,c){r.child=t===null?pv(r,null,o,c):lo(r,t.child,o,c)}function d0(t,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var b={};for(var S in c)S!=="ref"&&(b[S]=c[S])}else b=c;return ro(r),c=Hf(t,r,o,b,m,f),S=$f(),t!==null&&!cs?(Wf(t,r,f),_a(t,r,f)):(ln&&S&&jf(r),r.flags|=1,_s(t,r,c,f),r.child)}function f0(t,r,o,c,f){if(t===null){var m=o.type;return typeof m=="function"&&!_f(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,m0(t,r,m,c,f)):(t=Ku(o.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!ym(t,f)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:sc,o(b,c)&&t.ref===r.ref)return _a(t,r,f)}return r.flags|=1,t=ga(m,c),t.ref=r.ref,t.return=r,r.child=t}function m0(t,r,o,c,f){if(t!==null){var m=t.memoizedProps;if(sc(m,c)&&t.ref===r.ref)if(cs=!1,r.pendingProps=c=m,ym(t,f))(t.flags&131072)!==0&&(cs=!0);else return r.lanes=t.lanes,_a(t,r,f)}return um(t,r,o,c,f)}function p0(t,r,o,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return g0(t,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ju(r,m!==null?m.cachePool:null),m!==null?vv(r,m):Uf(),bv(r);else return c=r.lanes=536870912,g0(t,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Ju(r,m.cachePool),vv(r,m),ai(),r.memoizedState=null):(t!==null&&Ju(r,null),Uf(),ai());return _s(t,r,f,o),r.child}function vc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function g0(t,r,o,c,f){var m=Df();return m=m===null?null:{parent:os._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},t!==null&&Ju(r,null),Uf(),bv(r),t!==null&&Qo(t,r,c,!0),r.childLanes=f,null}function mh(t,r){return r=gh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function y0(t,r,o){return lo(r,t.child,null,o),t=mh(r,r.pendingProps),t.flags|=2,Js(r),r.memoizedState=null,t}function Xk(t,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(ln){if(c.mode==="hidden")return t=mh(r,c),r.lanes=536870912,vc(null,t);if(Ff(r),(t=Vn)?(t=Cb(t,fr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Xa!==null?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},o=ev(t),o.return=r,r.child=o,xs=r,Vn=null)):t=null,t===null)throw Za(r);return r.lanes=536870912,null}return mh(r,c)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(Ff(r),f)if(r.flags&256)r.flags&=-257,r=y0(t,r,o);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(cs||Qo(t,r,o,!1),f=(o&t.childLanes)!==0,cs||f){if(c=In,c!==null&&(b=Mn(c,o),b!==0&&b!==m.retryLane))throw m.retryLane=b,eo(t,b),Hs(c,t,b),cm;jh(),r=y0(t,r,o)}else t=m.treeContext,Vn=pr(b.nextSibling),xs=r,ln=!0,Ja=null,fr=!1,t!==null&&sv(r,t),r=mh(r,c),r.flags|=4096;return r}return t=ga(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function ph(t,r){var o=r.ref;if(o===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(t===null||t.ref!==o)&&(r.flags|=4194816)}}function um(t,r,o,c,f){return ro(r),o=Hf(t,r,o,c,void 0,f),c=$f(),t!==null&&!cs?(Wf(t,r,f),_a(t,r,f)):(ln&&c&&jf(r),r.flags|=1,_s(t,r,o,f),r.child)}function v0(t,r,o,c,f,m){return ro(r),r.updateQueue=null,o=wv(r,c,o,f),xv(t),c=$f(),t!==null&&!cs?(Wf(t,r,m),_a(t,r,m)):(ln&&c&&jf(r),r.flags|=1,_s(t,r,o,m),r.child)}function b0(t,r,o,c,f){if(ro(r),r.stateNode===null){var m=Wo,b=o.contextType;typeof b=="object"&&b!==null&&(m=ws(b)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=om,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Lf(r),b=o.contextType,m.context=typeof b=="object"&&b!==null?ws(b):Wo,m.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(im(r,o,b,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&om.enqueueReplaceState(m,m.state,null),fc(r,c,m,f),dc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var S=r.memoizedProps,z=uo(o,S);m.props=z;var se=m.context,be=o.contextType;b=Wo,typeof be=="object"&&be!==null&&(b=ws(be));var Ee=o.getDerivedStateFromProps;be=typeof Ee=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,be||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||se!==b)&&a0(r,m,c,b),ti=!1;var re=r.memoizedState;m.state=re,fc(r,c,m,f),dc(),se=r.memoizedState,S||re!==se||ti?(typeof Ee=="function"&&(im(r,o,Ee,c),se=r.memoizedState),(z=ti||r0(r,o,z,c,re,se,b))?(be||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=se),m.props=c,m.state=se,m.context=b,c=z):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Of(t,r),b=r.memoizedProps,be=uo(o,b),m.props=be,Ee=r.pendingProps,re=m.context,se=o.contextType,z=Wo,typeof se=="object"&&se!==null&&(z=ws(se)),S=o.getDerivedStateFromProps,(se=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==Ee||re!==z)&&a0(r,m,c,z),ti=!1,re=r.memoizedState,m.state=re,fc(r,c,m,f),dc();var de=r.memoizedState;b!==Ee||re!==de||ti||t!==null&&t.dependencies!==null&&Qu(t.dependencies)?(typeof S=="function"&&(im(r,o,S,c),de=r.memoizedState),(be=ti||r0(r,o,be,c,re,de,z)||t!==null&&t.dependencies!==null&&Qu(t.dependencies))?(se||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,de,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,de,z)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=de),m.props=c,m.state=de,m.context=z,c=be):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&re===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,ph(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=lo(r,t.child,null,f),r.child=lo(r,null,o,f)):_s(t,r,o,f),r.memoizedState=m.state,t=r.child):t=_a(t,r,f),t}function x0(t,r,o,c){return no(),r.flags|=256,_s(t,r,o,c),r.child}var hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dm(t){return{baseLanes:t,cachePool:cv()}}function fm(t,r,o){return t=t!==null?t.childLanes&~o:0,r&&(t|=er),t}function w0(t,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(ss.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(ln){if(f?ri(r):ai(),(t=Vn)?(t=Cb(t,fr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Xa!==null?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},o=ev(t),o.return=r,r.child=o,xs=r,Vn=null)):t=null,t===null)throw Za(r);return Ym(t)?r.lanes=32:r.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(ai(),f=r.mode,S=gh({mode:"hidden",children:S},f),c=to(c,f,o,null),S.return=r,c.return=r,S.sibling=c,r.child=S,c=r.child,c.memoizedState=dm(o),c.childLanes=fm(t,b,o),r.memoizedState=hm,vc(null,c)):(ri(r),mm(r,S))}var z=t.memoizedState;if(z!==null&&(S=z.dehydrated,S!==null)){if(m)r.flags&256?(ri(r),r.flags&=-257,r=pm(t,r,o)):r.memoizedState!==null?(ai(),r.child=t.child,r.flags|=128,r=null):(ai(),S=c.fallback,f=r.mode,c=gh({mode:"visible",children:c.children},f),S=to(S,f,o,null),S.flags|=2,c.return=r,S.return=r,c.sibling=S,r.child=c,lo(r,t.child,null,o),c=r.child,c.memoizedState=dm(o),c.childLanes=fm(t,b,o),r.memoizedState=hm,r=vc(null,c));else if(ri(r),Ym(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var se=b.dgst;b=se,c=Error(i(419)),c.stack="",c.digest=b,ic({value:c,source:null,stack:null}),r=pm(t,r,o)}else if(cs||Qo(t,r,o,!1),b=(o&t.childLanes)!==0,cs||b){if(b=In,b!==null&&(c=Mn(b,o),c!==0&&c!==z.retryLane))throw z.retryLane=c,eo(t,c),Hs(b,t,c),cm;Km(S)||jh(),r=pm(t,r,o)}else Km(S)?(r.flags|=192,r.child=t.child,r=null):(t=z.treeContext,Vn=pr(S.nextSibling),xs=r,ln=!0,Ja=null,fr=!1,t!==null&&sv(r,t),r=mm(r,c.children),r.flags|=4096);return r}return f?(ai(),S=c.fallback,f=r.mode,z=t.child,se=z.sibling,c=ga(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,se!==null?S=ga(se,S):(S=to(S,f,o,null),S.flags|=2),S.return=r,c.return=r,c.sibling=S,r.child=c,vc(null,c),c=r.child,S=t.child.memoizedState,S===null?S=dm(o):(f=S.cachePool,f!==null?(z=os._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=cv(),S={baseLanes:S.baseLanes|o,cachePool:f}),c.memoizedState=S,c.childLanes=fm(t,b,o),r.memoizedState=hm,vc(t.child,c)):(ri(r),o=t.child,t=o.sibling,o=ga(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=o,r.memoizedState=null,o)}function mm(t,r){return r=gh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function gh(t,r){return t=Qs(22,t,null,r),t.lanes=0,t}function pm(t,r,o){return lo(r,t.child,null,o),t=mm(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function _0(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Rf(t.return,r,o)}function gm(t,r,o,c,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=f,b.treeForkCount=m)}function k0(t,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var b=ss.current,S=(b&2)!==0;if(S?(b=b&1|2,r.flags|=128):b&=1,ie(ss,b),_s(t,r,c,o),c=ln?ac:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_0(t,o,r);else if(t.tag===19)_0(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&rh(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),gm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&rh(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}gm(r,!0,o,null,m,c);break;case"together":gm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function _a(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),li|=r.lanes,(o&r.childLanes)===0)if(t!==null){if(Qo(t,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,o=ga(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=ga(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function ym(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Qu(t)))}function Jk(t,r,o){switch(r.tag){case 3:qe(r,r.stateNode.containerInfo),ei(r,os,t.memoizedState.cache),no();break;case 27:case 5:Bt(r);break;case 4:qe(r,r.stateNode.containerInfo);break;case 10:ei(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Ff(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ri(r),r.flags|=128,null):(o&r.child.childLanes)!==0?w0(t,r,o):(ri(r),t=_a(t,r,o),t!==null?t.sibling:null);ri(r);break;case 19:var f=(t.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Qo(t,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return k0(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ie(ss,ss.current),c)break;return null;case 22:return r.lanes=0,p0(t,r,o,r.pendingProps);case 24:ei(r,os,t.memoizedState.cache)}return _a(t,r,o)}function T0(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps)cs=!0;else{if(!ym(t,o)&&(r.flags&128)===0)return cs=!1,Jk(t,r,o);cs=(t.flags&131072)!==0}else cs=!1,ln&&(r.flags&1048576)!==0&&nv(r,ac,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=io(r.elementType),r.type=t,typeof t=="function")_f(t)?(c=uo(t,c),r.tag=1,r=b0(null,r,t,c,o)):(r.tag=0,r=um(null,r,t,c,o));else{if(t!=null){var f=t.$$typeof;if(f===_e){r.tag=11,r=d0(null,r,t,c,o);break e}else if(f===M){r.tag=14,r=f0(null,r,t,c,o);break e}}throw r=Fe(t)||t,Error(i(306,r,""))}}return r;case 0:return um(t,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=uo(c,r.pendingProps),b0(t,r,c,f,o);case 3:e:{if(qe(r,r.stateNode.containerInfo),t===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Of(t,r),fc(r,c,null,o);var b=r.memoizedState;if(c=b.cache,ei(r,os,c),c!==m.cache&&Af(r,[os],o,!0),dc(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=x0(t,r,c,o);break e}else if(c!==f){f=ur(Error(i(424)),r),ic(f),r=x0(t,r,c,o);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Vn=pr(t.firstChild),xs=r,ln=!0,Ja=null,fr=!0,o=pv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(no(),c===f){r=_a(t,r,o);break e}_s(t,r,c,o)}r=r.child}return r;case 26:return ph(t,r),t===null?(o=Pb(r.type,null,r.pendingProps,null))?r.memoizedState=o:ln||(o=r.type,t=r.pendingProps,c=Mh(Me.current).createElement(o),c[Xe]=r,c[yt]=t,ks(c,o,t),R(c),r.stateNode=c):r.memoizedState=Pb(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Bt(r),t===null&&ln&&(c=r.stateNode=Mb(r.type,r.pendingProps,Me.current),xs=r,fr=!0,f=Vn,fi(r.type)?(Qm=f,Vn=pr(c.firstChild)):Vn=f),_s(t,r,r.pendingProps.children,o),ph(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&ln&&((f=c=Vn)&&(c=NT(c,r.type,r.pendingProps,fr),c!==null?(r.stateNode=c,xs=r,Vn=pr(c.firstChild),fr=!1,f=!0):f=!1),f||Za(r)),Bt(r),f=r.type,m=r.pendingProps,b=t!==null?t.memoizedProps:null,c=m.children,$m(f,m)?c=null:b!==null&&$m(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Hf(t,r,qk,null,null,o),Ic._currentValue=f),ph(t,r),_s(t,r,c,o),r.child;case 6:return t===null&&ln&&((t=o=Vn)&&(o=CT(o,r.pendingProps,fr),o!==null?(r.stateNode=o,xs=r,Vn=null,t=!0):t=!1),t||Za(r)),null;case 13:return w0(t,r,o);case 4:return qe(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=lo(r,null,c,o):_s(t,r,c,o),r.child;case 11:return d0(t,r,r.type,r.pendingProps,o);case 7:return _s(t,r,r.pendingProps,o),r.child;case 8:return _s(t,r,r.pendingProps.children,o),r.child;case 12:return _s(t,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,ei(r,r.type,c.value),_s(t,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,ro(r),f=ws(f),c=c(f),r.flags|=1,_s(t,r,c,o),r.child;case 14:return f0(t,r,r.type,r.pendingProps,o);case 15:return m0(t,r,r.type,r.pendingProps,o);case 19:return k0(t,r,o);case 31:return Xk(t,r,o);case 22:return p0(t,r,o,r.pendingProps);case 24:return ro(r),c=ws(os),t===null?(f=Df(),f===null&&(f=In,m=Mf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},Lf(r),ei(r,os,f)):((t.lanes&o)!==0&&(Of(t,r),fc(r,null,null,o),dc()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ei(r,os,c)):(c=m.cache,ei(r,os,c),c!==f.cache&&Af(r,[os],o,!0))),_s(t,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ka(t){t.flags|=4}function vm(t,r,o,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(X0())t.flags|=8192;else throw oo=eh,Pf}else t.flags&=-16777217}function j0(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ub(r))if(X0())t.flags|=8192;else throw oo=eh,Pf}function yh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?kt():536870912,t.lanes|=r,ll|=r)}function bc(t,r){if(!ln)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Bn(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function Zk(t,r,o){var c=r.pendingProps;switch(Ef(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(r),null;case 1:return Bn(r),null;case 3:return o=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ba(os),rt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Yo(r)?ka(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nf())),Bn(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(ka(r),m!==null?(Bn(r),j0(r,m)):(Bn(r),vm(r,f,null,c,o))):m?m!==t.memoizedState?(ka(r),Bn(r),j0(r,m)):(Bn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&ka(r),Bn(r),vm(r,f,t,c,o)),null;case 27:if(Jt(r),o=Me.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&ka(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Bn(r),null}t=pe.current,Yo(r)?rv(r):(t=Mb(f,c,o),r.stateNode=t,ka(r))}return Bn(r),null;case 5:if(Jt(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&ka(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Bn(r),null}if(m=pe.current,Yo(r))rv(r);else{var b=Mh(Me.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(f,{is:c.is}):b.createElement(f)}}m[Xe]=r,m[yt]=c;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(ks(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ka(r)}}return Bn(r),vm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,o),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&ka(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(t=Me.current,Yo(r)){if(t=r.stateNode,o=r.memoizedProps,c=null,f=xs,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[Xe]=r,t=!!(t.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||wb(t.nodeValue,o)),t||Za(r,!0)}else t=Mh(t).createTextNode(c),t[Xe]=r,r.stateNode=t}return Bn(r),null;case 31:if(o=r.memoizedState,t===null||t.memoizedState!==null){if(c=Yo(r),o!==null){if(t===null){if(!c)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Xe]=r}else no(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Bn(r),t=!1}else o=Nf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return r.flags&256?(Js(r),r):(Js(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Bn(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Yo(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Xe]=r}else no(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Bn(r),f=!1}else f=Nf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Js(r),r):(Js(r),null)}return Js(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,t=t!==null&&t.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==t&&o&&(r.child.flags|=8192),yh(r,r.updateQueue),Bn(r),null);case 4:return rt(),t===null&&Um(r.stateNode.containerInfo),Bn(r),null;case 10:return ba(r.type),Bn(r),null;case 19:if(B(ss),c=r.memoizedState,c===null)return Bn(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)bc(c,!1);else{if(Zn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=rh(t),m!==null){for(r.flags|=128,bc(c,!1),t=m.updateQueue,r.updateQueue=t,yh(r,t),r.subtreeFlags=0,t=o,o=r.child;o!==null;)Zy(o,t),o=o.sibling;return ie(ss,ss.current&1|2),ln&&ya(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&Pt()>_h&&(r.flags|=128,f=!0,bc(c,!1),r.lanes=4194304)}else{if(!f)if(t=rh(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,yh(r,t),bc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!ln)return Bn(r),null}else 2*Pt()-c.renderingStartTime>_h&&o!==536870912&&(r.flags|=128,f=!0,bc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Pt(),t.sibling=null,o=ss.current,ie(ss,f?o&1|2:o&1),ln&&ya(r,c.treeForkCount),t):(Bn(r),null);case 22:case 23:return Js(r),zf(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Bn(r),r.subtreeFlags&6&&(r.flags|=8192)):Bn(r),o=r.updateQueue,o!==null&&yh(r,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),t!==null&&B(ao),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),ba(os),Bn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function eT(t,r){switch(Ef(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ba(os),rt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Jt(r),null;case 31:if(r.memoizedState!==null){if(Js(r),r.alternate===null)throw Error(i(340));no()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Js(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));no()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return B(ss),null;case 4:return rt(),null;case 10:return ba(r.type),null;case 22:case 23:return Js(r),zf(),t!==null&&B(ao),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ba(os),null;case 25:return null;default:return null}}function E0(t,r){switch(Ef(r),r.tag){case 3:ba(os),rt();break;case 26:case 27:case 5:Jt(r);break;case 4:rt();break;case 31:r.memoizedState!==null&&Js(r);break;case 13:Js(r);break;case 19:B(ss);break;case 10:ba(r.type);break;case 22:case 23:Js(r),zf(),t!==null&&B(ao);break;case 24:ba(os)}}function xc(t,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&t)===t){c=void 0;var m=o.create,b=o.inst;c=m(),b.destroy=c}o=o.next}while(o!==f)}}catch(S){jn(r,r.return,S)}}function ii(t,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var b=c.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,f=r;var z=o,se=S;try{se()}catch(be){jn(f,z,be)}}}c=c.next}while(c!==m)}}catch(be){jn(r,r.return,be)}}function S0(t){var r=t.updateQueue;if(r!==null){var o=t.stateNode;try{yv(r,o)}catch(c){jn(t,t.return,c)}}}function N0(t,r,o){o.props=uo(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(c){jn(t,r,c)}}function wc(t,r){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof o=="function"?t.refCleanup=o(c):o.current=c}}catch(f){jn(t,r,f)}}function Zr(t,r){var o=t.ref,c=t.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){jn(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){jn(t,r,f)}else o.current=null}function C0(t){var r=t.type,o=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){jn(t,t.return,f)}}function bm(t,r,o){try{var c=t.stateNode;_T(c,t.type,o,r),c[yt]=r}catch(f){jn(t,t.return,f)}}function R0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&fi(t.type)||t.tag===4}function xm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&fi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wm(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(t),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ps));else if(c!==4&&(c===27&&fi(t.type)&&(o=t.stateNode,r=null),t=t.child,t!==null))for(wm(t,r,o),t=t.sibling;t!==null;)wm(t,r,o),t=t.sibling}function vh(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(c===27&&fi(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(vh(t,r,o),t=t.sibling;t!==null;)vh(t,r,o),t=t.sibling}function A0(t){var r=t.stateNode,o=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);ks(r,c,o),r[Xe]=t,r[yt]=o}catch(m){jn(t,t.return,m)}}var Ta=!1,us=!1,_m=!1,M0=typeof WeakSet=="function"?WeakSet:Set,gs=null;function tT(t,r){if(t=t.containerInfo,qm=Bh,t=Hy(t),pf(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var b=0,S=-1,z=-1,se=0,be=0,Ee=t,re=null;t:for(;;){for(var de;Ee!==o||f!==0&&Ee.nodeType!==3||(S=b+f),Ee!==m||c!==0&&Ee.nodeType!==3||(z=b+c),Ee.nodeType===3&&(b+=Ee.nodeValue.length),(de=Ee.firstChild)!==null;)re=Ee,Ee=de;for(;;){if(Ee===t)break t;if(re===o&&++se===f&&(S=b),re===m&&++be===c&&(z=b),(de=Ee.nextSibling)!==null)break;Ee=re,re=Ee.parentNode}Ee=de}o=S===-1||z===-1?null:{start:S,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(Hm={focusedElem:t,selectionRange:o},Bh=!1,gs=r;gs!==null;)if(r=gs,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,gs=t;else for(;gs!==null;){switch(r=gs,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)f=t[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var lt=uo(o.type,f);t=c.getSnapshotBeforeUpdate(lt,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(jt){jn(o,o.return,jt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,o=t.nodeType,o===9)Gm(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,gs=t;break}gs=r.return}}function I0(t,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ea(t,o),c&4&&xc(5,o);break;case 1:if(Ea(t,o),c&4)if(t=o.stateNode,r===null)try{t.componentDidMount()}catch(b){jn(o,o.return,b)}else{var f=uo(o.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){jn(o,o.return,b)}}c&64&&S0(o),c&512&&wc(o,o.return);break;case 3:if(Ea(t,o),c&64&&(t=o.updateQueue,t!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{yv(t,r)}catch(b){jn(o,o.return,b)}}break;case 27:r===null&&c&4&&A0(o);case 26:case 5:Ea(t,o),r===null&&c&4&&C0(o),c&512&&wc(o,o.return);break;case 12:Ea(t,o);break;case 31:Ea(t,o),c&4&&L0(t,o);break;case 13:Ea(t,o),c&4&&O0(t,o),c&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=uT.bind(null,o),RT(t,o))));break;case 22:if(c=o.memoizedState!==null||Ta,!c){r=r!==null&&r.memoizedState!==null||us,f=Ta;var m=us;Ta=c,(us=r)&&!m?Sa(t,o,(o.subtreeFlags&8772)!==0):Ea(t,o),Ta=f,us=m}break;case 30:break;default:Ea(t,o)}}function D0(t){var r=t.alternate;r!==null&&(t.alternate=null,D0(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Xn(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fn=null,Us=!1;function ja(t,r,o){for(o=o.child;o!==null;)P0(t,r,o),o=o.sibling}function P0(t,r,o){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Be,o)}catch{}switch(o.tag){case 26:us||Zr(o,r),ja(t,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:us||Zr(o,r);var c=Fn,f=Us;fi(o.type)&&(Fn=o.stateNode,Us=!1),ja(t,r,o),Rc(o.stateNode),Fn=c,Us=f;break;case 5:us||Zr(o,r);case 6:if(c=Fn,f=Us,Fn=null,ja(t,r,o),Fn=c,Us=f,Fn!==null)if(Us)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(o.stateNode)}catch(m){jn(o,r,m)}else try{Fn.removeChild(o.stateNode)}catch(m){jn(o,r,m)}break;case 18:Fn!==null&&(Us?(t=Fn,Sb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),gl(t)):Sb(Fn,o.stateNode));break;case 4:c=Fn,f=Us,Fn=o.stateNode.containerInfo,Us=!0,ja(t,r,o),Fn=c,Us=f;break;case 0:case 11:case 14:case 15:ii(2,o,r),us||ii(4,o,r),ja(t,r,o);break;case 1:us||(Zr(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&N0(o,r,c)),ja(t,r,o);break;case 21:ja(t,r,o);break;case 22:us=(c=us)||o.memoizedState!==null,ja(t,r,o),us=c;break;default:ja(t,r,o)}}function L0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{gl(t)}catch(o){jn(r,r.return,o)}}}function O0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{gl(t)}catch(o){jn(r,r.return,o)}}function nT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new M0),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new M0),r;default:throw Error(i(435,t.tag))}}function bh(t,r){var o=nT(t);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=hT.bind(null,t,c);c.then(f,f)}})}function zs(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=t,b=r,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(fi(S.type)){Fn=S.stateNode,Us=!1;break e}break;case 5:Fn=S.stateNode,Us=!1;break e;case 3:case 4:Fn=S.stateNode.containerInfo,Us=!0;break e}S=S.return}if(Fn===null)throw Error(i(160));P0(m,b,f),Fn=null,Us=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)V0(r,t),r=r.sibling}var Rr=null;function V0(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zs(r,t),Fs(t),c&4&&(ii(3,t,t.return),xc(3,t),ii(5,t,t.return));break;case 1:zs(r,t),Fs(t),c&512&&(us||o===null||Zr(o,o.return)),c&64&&Ta&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Rr;if(zs(r,t),Fs(t),c&512&&(us||o===null||Zr(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=t.memoizedState,o===null)if(c===null)if(t.stateNode===null){e:{c=t.type,o=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Wn]||m[Xe]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),ks(m,c,o),m[Xe]=t,R(m),c=m;break e;case"link":var b=Vb("link","href",f).get(c+(o.href||""));if(b){for(var S=0;S<b.length;S++)if(m=b[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(S,1);break t}}m=f.createElement(c),ks(m,c,o),f.head.appendChild(m);break;case"meta":if(b=Vb("meta","content",f).get(c+(o.content||""))){for(S=0;S<b.length;S++)if(m=b[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(S,1);break t}}m=f.createElement(c),ks(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[Xe]=t,R(m),c=m}t.stateNode=c}else Bb(f,t.type,t.stateNode);else t.stateNode=Ob(f,c,t.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?Bb(f,t.type,t.stateNode):Ob(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&bm(t,t.memoizedProps,o.memoizedProps)}break;case 27:zs(r,t),Fs(t),c&512&&(us||o===null||Zr(o,o.return)),o!==null&&c&4&&bm(t,t.memoizedProps,o.memoizedProps);break;case 5:if(zs(r,t),Fs(t),c&512&&(us||o===null||Zr(o,o.return)),t.flags&32){f=t.stateNode;try{Kn(f,"")}catch(lt){jn(t,t.return,lt)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,bm(t,f,o!==null?o.memoizedProps:f)),c&1024&&(_m=!0);break;case 6:if(zs(r,t),Fs(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,o=t.stateNode;try{o.nodeValue=c}catch(lt){jn(t,t.return,lt)}}break;case 3:if(Ph=null,f=Rr,Rr=Ih(r.containerInfo),zs(r,t),Rr=f,Fs(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{gl(r.containerInfo)}catch(lt){jn(t,t.return,lt)}_m&&(_m=!1,B0(t));break;case 4:c=Rr,Rr=Ih(t.stateNode.containerInfo),zs(r,t),Fs(t),Rr=c;break;case 12:zs(r,t),Fs(t);break;case 31:zs(r,t),Fs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,bh(t,c)));break;case 13:zs(r,t),Fs(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(wh=Pt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,bh(t,c)));break;case 22:f=t.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,se=Ta,be=us;if(Ta=se||f,us=be||z,zs(r,t),us=be,Ta=se,Fs(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||z||Ta||us||ho(t)),o=null,r=t;;){if(r.tag===5||r.tag===26){if(o===null){z=o=r;try{if(m=z.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=z.stateNode;var Ee=z.memoizedProps.style,re=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;S.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(lt){jn(z,z.return,lt)}}}else if(r.tag===6){if(o===null){z=r;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(lt){jn(z,z.return,lt)}}}else if(r.tag===18){if(o===null){z=r;try{var de=z.stateNode;f?Nb(de,!0):Nb(z.stateNode,!1)}catch(lt){jn(z,z.return,lt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,bh(t,o))));break;case 19:zs(r,t),Fs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,bh(t,c)));break;case 30:break;case 21:break;default:zs(r,t),Fs(t)}}function Fs(t){var r=t.flags;if(r&2){try{for(var o,c=t.return;c!==null;){if(R0(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=xm(t);vh(t,m,f);break;case 5:var b=o.stateNode;o.flags&32&&(Kn(b,""),o.flags&=-33);var S=xm(t);vh(t,S,b);break;case 3:case 4:var z=o.stateNode.containerInfo,se=xm(t);wm(t,se,z);break;default:throw Error(i(161))}}catch(be){jn(t,t.return,be)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function B0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;B0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ea(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)I0(t,r.alternate,r),r=r.sibling}function ho(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ii(4,r,r.return),ho(r);break;case 1:Zr(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&N0(r,r.return,o),ho(r);break;case 27:Rc(r.stateNode);case 26:case 5:Zr(r,r.return),ho(r);break;case 22:r.memoizedState===null&&ho(r);break;case 30:ho(r);break;default:ho(r)}t=t.sibling}}function Sa(t,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:Sa(f,m,o),xc(4,m);break;case 1:if(Sa(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(se){jn(c,c.return,se)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)gv(z[f],S)}catch(se){jn(c,c.return,se)}}o&&b&64&&S0(m),wc(m,m.return);break;case 27:A0(m);case 26:case 5:Sa(f,m,o),o&&c===null&&b&4&&C0(m),wc(m,m.return);break;case 12:Sa(f,m,o);break;case 31:Sa(f,m,o),o&&b&4&&L0(f,m);break;case 13:Sa(f,m,o),o&&b&4&&O0(f,m);break;case 22:m.memoizedState===null&&Sa(f,m,o),wc(m,m.return);break;case 30:break;default:Sa(f,m,o)}r=r.sibling}}function km(t,r){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&oc(o))}function Tm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&oc(t))}function Ar(t,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)U0(t,r,o,c),r=r.sibling}function U0(t,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Ar(t,r,o,c),f&2048&&xc(9,r);break;case 1:Ar(t,r,o,c);break;case 3:Ar(t,r,o,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&oc(t)));break;case 12:if(f&2048){Ar(t,r,o,c),t=r.stateNode;try{var m=r.memoizedProps,b=m.id,S=m.onPostCommit;typeof S=="function"&&S(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){jn(r,r.return,z)}}else Ar(t,r,o,c);break;case 31:Ar(t,r,o,c);break;case 13:Ar(t,r,o,c);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?Ar(t,r,o,c):_c(t,r):m._visibility&2?Ar(t,r,o,c):(m._visibility|=2,al(t,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&km(b,r);break;case 24:Ar(t,r,o,c),f&2048&&Tm(r.alternate,r);break;default:Ar(t,r,o,c)}}function al(t,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,b=r,S=o,z=c,se=b.flags;switch(b.tag){case 0:case 11:case 15:al(m,b,S,z,f),xc(8,b);break;case 23:break;case 22:var be=b.stateNode;b.memoizedState!==null?be._visibility&2?al(m,b,S,z,f):_c(m,b):(be._visibility|=2,al(m,b,S,z,f)),f&&se&2048&&km(b.alternate,b);break;case 24:al(m,b,S,z,f),f&&se&2048&&Tm(b.alternate,b);break;default:al(m,b,S,z,f)}r=r.sibling}}function _c(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=t,c=r,f=c.flags;switch(c.tag){case 22:_c(o,c),f&2048&&km(c.alternate,c);break;case 24:_c(o,c),f&2048&&Tm(c.alternate,c);break;default:_c(o,c)}r=r.sibling}}var kc=8192;function il(t,r,o){if(t.subtreeFlags&kc)for(t=t.child;t!==null;)z0(t,r,o),t=t.sibling}function z0(t,r,o){switch(t.tag){case 26:il(t,r,o),t.flags&kc&&t.memoizedState!==null&&FT(o,Rr,t.memoizedState,t.memoizedProps);break;case 5:il(t,r,o);break;case 3:case 4:var c=Rr;Rr=Ih(t.stateNode.containerInfo),il(t,r,o),Rr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=kc,kc=16777216,il(t,r,o),kc=c):il(t,r,o));break;default:il(t,r,o)}}function F0(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Tc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];gs=c,H0(c,t)}F0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)q0(t),t=t.sibling}function q0(t){switch(t.tag){case 0:case 11:case 15:Tc(t),t.flags&2048&&ii(9,t,t.return);break;case 3:Tc(t);break;case 12:Tc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,xh(t)):Tc(t);break;default:Tc(t)}}function xh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];gs=c,H0(c,t)}F0(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ii(8,r,r.return),xh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,xh(r));break;default:xh(r)}t=t.sibling}}function H0(t,r){for(;gs!==null;){var o=gs;switch(o.tag){case 0:case 11:case 15:ii(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:oc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,gs=c;else e:for(o=t;gs!==null;){c=gs;var f=c.sibling,m=c.return;if(D0(c),c===o){gs=null;break e}if(f!==null){f.return=m,gs=f;break e}gs=m}}}var sT={getCacheForType:function(t){var r=ws(os),o=r.data.get(t);return o===void 0&&(o=t(),r.data.set(t,o)),o},cacheSignal:function(){return ws(os).controller.signal}},rT=typeof WeakMap=="function"?WeakMap:Map,wn=0,In=null,Qt=null,en=0,Tn=0,Zs=null,oi=!1,ol=!1,jm=!1,Na=0,Zn=0,li=0,fo=0,Em=0,er=0,ll=0,jc=null,qs=null,Sm=!1,wh=0,$0=0,_h=1/0,kh=null,ci=null,ms=0,ui=null,cl=null,Ca=0,Nm=0,Cm=null,W0=null,Ec=0,Rm=null;function tr(){return(wn&2)!==0&&en!==0?en&-en:Y.T!==null?Lm():ve()}function G0(){if(er===0)if((en&536870912)===0||ln){var t=Wt;Wt<<=1,(Wt&3932160)===0&&(Wt=262144),er=t}else er=536870912;return t=Xs.current,t!==null&&(t.flags|=32),er}function Hs(t,r,o){(t===In&&(Tn===2||Tn===9)||t.cancelPendingCommit!==null)&&(ul(t,0),hi(t,en,er,!1)),Ht(t,o),((wn&2)===0||t!==In)&&(t===In&&((wn&2)===0&&(fo|=o),Zn===4&&hi(t,en,er,!1)),ea(t))}function K0(t,r,o){if((wn&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&t.expiredLanes)===0||Rt(t,r),f=c?oT(t,r):Mm(t,r,!0),m=c;do{if(f===0){ol&&!c&&hi(t,r,0,!1);break}else{if(o=t.current.alternate,m&&!aT(o)){f=Mm(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var S=t;f=jc;var z=S.current.memoizedState.isDehydrated;if(z&&(ul(S,b).flags|=256),b=Mm(S,b,!1),b!==2){if(jm&&!z){S.errorRecoveryDisabledLanes|=m,fo|=m,f=4;break e}m=qs,qs=f,m!==null&&(qs===null?qs=m:qs.push.apply(qs,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){ul(t,0),hi(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:hi(c,r,er,!oi);break e;case 2:qs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=wh+300-Pt(),10<f)){if(hi(c,r,er,!oi),dt(c,0,!0)!==0)break e;Ca=r,c.timeoutHandle=jb(Y0.bind(null,c,o,qs,kh,Sm,r,er,fo,ll,oi,m,"Throttled",-0,0),f);break e}Y0(c,o,qs,kh,Sm,r,er,fo,ll,oi,m,null,-0,0)}}break}while(!0);ea(t)}function Y0(t,r,o,c,f,m,b,S,z,se,be,Ee,re,de){if(t.timeoutHandle=-1,Ee=r.subtreeFlags,Ee&8192||(Ee&16785408)===16785408){Ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ps},z0(r,m,Ee);var lt=(m&62914560)===m?wh-Pt():(m&4194048)===m?$0-Pt():0;if(lt=qT(Ee,lt),lt!==null){Ca=m,t.cancelPendingCommit=lt(sb.bind(null,t,r,m,o,c,f,b,S,z,be,Ee,null,re,de)),hi(t,m,b,!se);return}}sb(t,r,m,o,c,f,b,S,z)}function aT(t){for(var r=t;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!Ys(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function hi(t,r,o,c){r&=~Em,r&=~fo,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-Le(f),b=1<<m;c[m]=-1,f&=~b}o!==0&&hn(t,o,r)}function Th(){return(wn&6)===0?(Sc(0),!1):!0}function Am(){if(Qt!==null){if(Tn===0)var t=Qt.return;else t=Qt,va=so=null,Gf(t),el=null,cc=0,t=Qt;for(;t!==null;)E0(t.alternate,t),t=t.return;Qt=null}}function ul(t,r){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,jT(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),Ca=0,Am(),In=t,Qt=o=ga(t.current,null),en=r,Tn=0,Zs=null,oi=!1,ol=Rt(t,r),jm=!1,ll=er=Em=fo=li=Zn=0,qs=jc=null,Sm=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-Le(c),m=1<<f;r|=t[f],c&=~m}return Na=r,$u(),o}function Q0(t,r){Ft=null,Y.H=yc,r===Zo||r===Zu?(r=dv(),Tn=3):r===Pf?(r=dv(),Tn=4):Tn=r===cm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Zs=r,Qt===null&&(Zn=1,fh(t,ur(r,t.current)))}function X0(){var t=Xs.current;return t===null?!0:(en&4194048)===en?mr===null:(en&62914560)===en||(en&536870912)!==0?t===mr:!1}function J0(){var t=Y.H;return Y.H=yc,t===null?yc:t}function Z0(){var t=Y.A;return Y.A=sT,t}function jh(){Zn=4,oi||(en&4194048)!==en&&Xs.current!==null||(ol=!0),(li&134217727)===0&&(fo&134217727)===0||In===null||hi(In,en,er,!1)}function Mm(t,r,o){var c=wn;wn|=2;var f=J0(),m=Z0();(In!==t||en!==r)&&(kh=null,ul(t,r)),r=!1;var b=Zn;e:do try{if(Tn!==0&&Qt!==null){var S=Qt,z=Zs;switch(Tn){case 8:Am(),b=6;break e;case 3:case 2:case 9:case 6:Xs.current===null&&(r=!0);var se=Tn;if(Tn=0,Zs=null,hl(t,S,z,se),o&&ol){b=0;break e}break;default:se=Tn,Tn=0,Zs=null,hl(t,S,z,se)}}iT(),b=Zn;break}catch(be){Q0(t,be)}while(!0);return r&&t.shellSuspendCounter++,va=so=null,wn=c,Y.H=f,Y.A=m,Qt===null&&(In=null,en=0,$u()),b}function iT(){for(;Qt!==null;)eb(Qt)}function oT(t,r){var o=wn;wn|=2;var c=J0(),f=Z0();In!==t||en!==r?(kh=null,_h=Pt()+500,ul(t,r)):ol=Rt(t,r);e:do try{if(Tn!==0&&Qt!==null){r=Qt;var m=Zs;t:switch(Tn){case 1:Tn=0,Zs=null,hl(t,r,m,1);break;case 2:case 9:if(uv(m)){Tn=0,Zs=null,tb(r);break}r=function(){Tn!==2&&Tn!==9||In!==t||(Tn=7),ea(t)},m.then(r,r);break e;case 3:Tn=7;break e;case 4:Tn=5;break e;case 7:uv(m)?(Tn=0,Zs=null,tb(r)):(Tn=0,Zs=null,hl(t,r,m,7));break;case 5:var b=null;switch(Qt.tag){case 26:b=Qt.memoizedState;case 5:case 27:var S=Qt;if(b?Ub(b):S.stateNode.complete){Tn=0,Zs=null;var z=S.sibling;if(z!==null)Qt=z;else{var se=S.return;se!==null?(Qt=se,Eh(se)):Qt=null}break t}}Tn=0,Zs=null,hl(t,r,m,5);break;case 6:Tn=0,Zs=null,hl(t,r,m,6);break;case 8:Am(),Zn=6;break e;default:throw Error(i(462))}}lT();break}catch(be){Q0(t,be)}while(!0);return va=so=null,Y.H=c,Y.A=f,wn=o,Qt!==null?0:(In=null,en=0,$u(),Zn)}function lT(){for(;Qt!==null&&!Qn();)eb(Qt)}function eb(t){var r=T0(t.alternate,t,Na);t.memoizedProps=t.pendingProps,r===null?Eh(t):Qt=r}function tb(t){var r=t,o=r.alternate;switch(r.tag){case 15:case 0:r=v0(o,r,r.pendingProps,r.type,void 0,en);break;case 11:r=v0(o,r,r.pendingProps,r.type.render,r.ref,en);break;case 5:Gf(r);default:E0(o,r),r=Qt=Zy(r,Na),r=T0(o,r,Na)}t.memoizedProps=t.pendingProps,r===null?Eh(t):Qt=r}function hl(t,r,o,c){va=so=null,Gf(r),el=null,cc=0;var f=r.return;try{if(Qk(t,f,r,o,en)){Zn=1,fh(t,ur(o,t.current)),Qt=null;return}}catch(m){if(f!==null)throw Qt=f,m;Zn=1,fh(t,ur(o,t.current)),Qt=null;return}r.flags&32768?(ln||c===1?t=!0:ol||(en&536870912)!==0?t=!1:(oi=t=!0,(c===2||c===9||c===3||c===6)&&(c=Xs.current,c!==null&&c.tag===13&&(c.flags|=16384))),nb(r,t)):Eh(r)}function Eh(t){var r=t;do{if((r.flags&32768)!==0){nb(r,oi);return}t=r.return;var o=Zk(r.alternate,r,Na);if(o!==null){Qt=o;return}if(r=r.sibling,r!==null){Qt=r;return}Qt=r=t}while(r!==null);Zn===0&&(Zn=5)}function nb(t,r){do{var o=eT(t.alternate,t);if(o!==null){o.flags&=32767,Qt=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(t=t.sibling,t!==null)){Qt=t;return}Qt=t=o}while(t!==null);Zn=6,Qt=null}function sb(t,r,o,c,f,m,b,S,z){t.cancelPendingCommit=null;do Sh();while(ms!==0);if((wn&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=xf,an(t,o,m,b,S,z),t===In&&(Qt=In=null,en=0),cl=r,ui=t,Ca=o,Nm=m,Cm=f,W0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,dT(O,function(){return lb(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=ke.p,ke.p=2,b=wn,wn|=4;try{tT(t,r,o)}finally{wn=b,ke.p=f,Y.T=c}}ms=1,rb(),ab(),ib()}}function rb(){if(ms===1){ms=0;var t=ui,r=cl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var c=ke.p;ke.p=2;var f=wn;wn|=4;try{V0(r,t);var m=Hm,b=Hy(t.containerInfo),S=m.focusedElem,z=m.selectionRange;if(b!==S&&S&&S.ownerDocument&&qy(S.ownerDocument.documentElement,S)){if(z!==null&&pf(S)){var se=z.start,be=z.end;if(be===void 0&&(be=se),"selectionStart"in S)S.selectionStart=se,S.selectionEnd=Math.min(be,S.value.length);else{var Ee=S.ownerDocument||document,re=Ee&&Ee.defaultView||window;if(re.getSelection){var de=re.getSelection(),lt=S.textContent.length,jt=Math.min(z.start,lt),Cn=z.end===void 0?jt:Math.min(z.end,lt);!de.extend&&jt>Cn&&(b=Cn,Cn=jt,jt=b);var Q=Fy(S,jt),W=Fy(S,Cn);if(Q&&W&&(de.rangeCount!==1||de.anchorNode!==Q.node||de.anchorOffset!==Q.offset||de.focusNode!==W.node||de.focusOffset!==W.offset)){var te=Ee.createRange();te.setStart(Q.node,Q.offset),de.removeAllRanges(),jt>Cn?(de.addRange(te),de.extend(W.node,W.offset)):(te.setEnd(W.node,W.offset),de.addRange(te))}}}}for(Ee=[],de=S;de=de.parentNode;)de.nodeType===1&&Ee.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Ee.length;S++){var Te=Ee[S];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Bh=!!qm,Hm=qm=null}finally{wn=f,ke.p=c,Y.T=o}}t.current=r,ms=2}}function ab(){if(ms===2){ms=0;var t=ui,r=cl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var c=ke.p;ke.p=2;var f=wn;wn|=4;try{I0(t,r.alternate,r)}finally{wn=f,ke.p=c,Y.T=o}}ms=3}}function ib(){if(ms===4||ms===3){ms=0,Mt();var t=ui,r=cl,o=Ca,c=W0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ms=5:(ms=0,cl=ui=null,ob(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ci=null),ge(o),r=r.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Be,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,f=ke.p,ke.p=2,Y.T=null;try{for(var m=t.onRecoverableError,b=0;b<c.length;b++){var S=c[b];m(S.value,{componentStack:S.stack})}}finally{Y.T=r,ke.p=f}}(Ca&3)!==0&&Sh(),ea(t),f=t.pendingLanes,(o&261930)!==0&&(f&42)!==0?t===Rm?Ec++:(Ec=0,Rm=t):Ec=0,Sc(0)}}function ob(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,oc(r)))}function Sh(){return rb(),ab(),ib(),lb()}function lb(){if(ms!==5)return!1;var t=ui,r=Nm;Nm=0;var o=ge(Ca),c=Y.T,f=ke.p;try{ke.p=32>o?32:o,Y.T=null,o=Cm,Cm=null;var m=ui,b=Ca;if(ms=0,cl=ui=null,Ca=0,(wn&6)!==0)throw Error(i(331));var S=wn;if(wn|=4,q0(m.current),U0(m,m.current,b,o),wn=S,Sc(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Be,m)}catch{}return!0}finally{ke.p=f,Y.T=c,ob(t,r)}}function cb(t,r,o){r=ur(o,r),r=lm(t.stateNode,r,2),t=si(t,r,2),t!==null&&(Ht(t,2),ea(t))}function jn(t,r,o){if(t.tag===3)cb(t,t,o);else for(;r!==null;){if(r.tag===3){cb(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ci===null||!ci.has(c))){t=ur(o,t),o=u0(2),c=si(r,o,2),c!==null&&(h0(o,c,r,t),Ht(c,2),ea(c));break}}r=r.return}}function Im(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new rT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(jm=!0,f.add(o),t=cT.bind(null,t,r,o),r.then(t,t))}function cT(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,In===t&&(en&o)===o&&(Zn===4||Zn===3&&(en&62914560)===en&&300>Pt()-wh?(wn&2)===0&&ul(t,0):Em|=o,ll===en&&(ll=0)),ea(t)}function ub(t,r){r===0&&(r=kt()),t=eo(t,r),t!==null&&(Ht(t,r),ea(t))}function uT(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),ub(t,o)}function hT(t,r){var o=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),ub(t,o)}function dT(t,r){return Je(t,r)}var Nh=null,dl=null,Dm=!1,Ch=!1,Pm=!1,di=0;function ea(t){t!==dl&&t.next===null&&(dl===null?Nh=dl=t:dl=dl.next=t),Ch=!0,Dm||(Dm=!0,mT())}function Sc(t,r){if(!Pm&&Ch){Pm=!0;do for(var o=!1,c=Nh;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var b=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-Le(42|t)+1)-1,m&=f&~(b&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,mb(c,m))}else m=en,m=dt(c,c===In?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Rt(c,m)||(o=!0,mb(c,m));c=c.next}while(o);Pm=!1}}function fT(){hb()}function hb(){Ch=Dm=!1;var t=0;di!==0&&TT()&&(t=di);for(var r=Pt(),o=null,c=Nh;c!==null;){var f=c.next,m=db(c,r);m===0?(c.next=null,o===null?Nh=f:o.next=f,f===null&&(dl=o)):(o=c,(t!==0||(m&3)!==0)&&(Ch=!0)),c=f}ms!==0&&ms!==5||Sc(t),di!==0&&(di=0)}function db(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Le(m),S=1<<b,z=f[b];z===-1?((S&o)===0||(S&c)!==0)&&(f[b]=Lt(S,r)):z<=r&&(t.expiredLanes|=S),m&=~S}if(r=In,o=en,o=dt(t,t===r?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,o===0||t===r&&(Tn===2||Tn===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Gt(c),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||Rt(t,o)){if(r=o&-o,r===t.callbackPriority)return r;switch(c!==null&&Gt(c),ge(o)){case 2:case 8:o=bn;break;case 32:o=O;break;case 268435456:o=ye;break;default:o=O}return c=fb.bind(null,t),o=Je(o,c),t.callbackPriority=r,t.callbackNode=o,r}return c!==null&&c!==null&&Gt(c),t.callbackPriority=2,t.callbackNode=null,2}function fb(t,r){if(ms!==0&&ms!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(Sh()&&t.callbackNode!==o)return null;var c=en;return c=dt(t,t===In?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(K0(t,c,r),db(t,Pt()),t.callbackNode!=null&&t.callbackNode===o?fb.bind(null,t):null)}function mb(t,r){if(Sh())return null;K0(t,r,!0)}function mT(){ET(function(){(wn&6)!==0?Je(qt,fT):hb()})}function Lm(){if(di===0){var t=Xo;t===0&&(t=St,St<<=1,(St&261888)===0&&(St=256)),di=t}return di}function pb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:$a(""+t)}function gb(t,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,t.id&&o.setAttribute("form",t.id),r.parentNode.insertBefore(o,r),t=new FormData(t),o.parentNode.removeChild(o),t}function pT(t,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=pb((f[yt]||null).action),b=c.submitter;b&&(r=(r=b[yt]||null)?pb(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var S=new Gr("action","action",null,c,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(di!==0){var z=b?gb(f,b):new FormData(f);nm(o,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(S.preventDefault(),z=b?gb(f,b):new FormData(f),nm(o,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var Om=0;Om<bf.length;Om++){var Vm=bf[Om],gT=Vm.toLowerCase(),yT=Vm[0].toUpperCase()+Vm.slice(1);Cr(gT,"on"+yT)}Cr(Gy,"onAnimationEnd"),Cr(Ky,"onAnimationIteration"),Cr(Yy,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(Ik,"onTransitionRun"),Cr(Dk,"onTransitionStart"),Cr(Pk,"onTransitionCancel"),Cr(Qy,"onTransitionEnd"),Ue("onMouseEnter",["mouseout","mouseover"]),Ue("onMouseLeave",["mouseout","mouseover"]),Ue("onPointerEnter",["pointerout","pointerover"]),Ue("onPointerLeave",["pointerout","pointerover"]),$e("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$e("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$e("onBeforeInput",["compositionend","keypress","textInput","paste"]),$e("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nc));function yb(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var S=c[b],z=S.instance,se=S.currentTarget;if(S=S.listener,z!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=se;try{m(f)}catch(be){Hu(be)}f.currentTarget=null,m=z}else for(b=0;b<c.length;b++){if(S=c[b],z=S.instance,se=S.currentTarget,S=S.listener,z!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=se;try{m(f)}catch(be){Hu(be)}f.currentTarget=null,m=z}}}}function Xt(t,r){var o=r[mt];o===void 0&&(o=r[mt]=new Set);var c=t+"__bubble";o.has(c)||(vb(r,t,2,!1),o.add(c))}function Bm(t,r,o){var c=0;r&&(c|=4),vb(o,t,c,r)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function Um(t){if(!t[Rh]){t[Rh]=!0,K.forEach(function(o){o!=="selectionchange"&&(vT.has(o)||Bm(o,!1,t),Bm(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Rh]||(r[Rh]=!0,Bm("selectionchange",!1,r))}}function vb(t,r,o,c){switch(Gb(r)){case 2:var f=WT;break;case 8:f=GT;break;default:f=tp}o=f.bind(null,r,o,t),f=void 0,!Wi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function zm(t,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var S=c.stateNode.containerInfo;if(S===f)break;if(b===4)for(b=c.return;b!==null;){var z=b.tag;if((z===3||z===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;S!==null;){if(b=mn(S),b===null)return;if(z=b.tag,z===5||z===6||z===26||z===27){c=m=b;continue e}S=S.parentNode}}c=c.return}Ga(function(){var se=m,be=ir(o),Ee=[];e:{var re=Xy.get(t);if(re!==void 0){var de=Gr,lt=t;switch(t){case"keypress":if(Ki(o)===0)break e;case"keydown":case"keyup":de=zu;break;case"focusin":lt="focus",de=Qi;break;case"focusout":lt="blur",de=Qi;break;case"beforeblur":case"afterblur":de=Qi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=v;break;case Gy:case Ky:case Yy:de=Du;break;case Qy:de=C;break;case"scroll":case"scrollend":de=Jl;break;case"wheel":de=ue;break;case"copy":case"cut":case"paste":de=Pu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=pa;break;case"toggle":case"beforetoggle":de=zt}var jt=(r&4)!==0,Cn=!jt&&(t==="scroll"||t==="scrollend"),Q=jt?re!==null?re+"Capture":null:re;jt=[];for(var W=se,te;W!==null;){var Te=W;if(te=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||te===null||Q===null||(Te=jr(W,Q),Te!=null&&jt.push(Cc(W,Te,te))),Cn)break;W=W.return}0<jt.length&&(re=new de(re,lt,null,o,be),Ee.push({event:re,listeners:jt}))}}if((r&7)===0){e:{if(re=t==="mouseover"||t==="pointerover",de=t==="mouseout"||t==="pointerout",re&&o!==Yl&&(lt=o.relatedTarget||o.fromElement)&&(mn(lt)||lt[nt]))break e;if((de||re)&&(re=be.window===be?be:(re=be.ownerDocument)?re.defaultView||re.parentWindow:window,de?(lt=o.relatedTarget||o.toElement,de=se,lt=lt?mn(lt):null,lt!==null&&(Cn=u(lt),jt=lt.tag,lt!==Cn||jt!==5&&jt!==27&&jt!==6)&&(lt=null)):(de=null,lt=se),de!==lt)){if(jt=Zl,Te="onMouseLeave",Q="onMouseEnter",W="mouse",(t==="pointerout"||t==="pointerover")&&(jt=pa,Te="onPointerLeave",Q="onPointerEnter",W="pointer"),Cn=de==null?re:he(de),te=lt==null?re:he(lt),re=new jt(Te,W+"leave",de,o,be),re.target=Cn,re.relatedTarget=te,Te=null,mn(be)===se&&(jt=new jt(Q,W+"enter",lt,o,be),jt.target=te,jt.relatedTarget=Cn,Te=jt),Cn=Te,de&&lt)t:{for(jt=bT,Q=de,W=lt,te=0,Te=Q;Te;Te=jt(Te))te++;Te=0;for(var xt=W;xt;xt=jt(xt))Te++;for(;0<te-Te;)Q=jt(Q),te--;for(;0<Te-te;)W=jt(W),Te--;for(;te--;){if(Q===W||W!==null&&Q===W.alternate){jt=Q;break t}Q=jt(Q),W=jt(W)}jt=null}else jt=null;de!==null&&bb(Ee,re,de,jt,!1),lt!==null&&Cn!==null&&bb(Ee,Cn,lt,jt,!0)}}e:{if(re=se?he(se):window,de=re.nodeName&&re.nodeName.toLowerCase(),de==="select"||de==="input"&&re.type==="file")var gn=Ly;else if(Dy(re))if(Oy)gn=Rk;else{gn=Nk;var ft=Sk}else de=re.nodeName,!de||de.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?se&&Cs(se.elementType)&&(gn=Ly):gn=Ck;if(gn&&(gn=gn(t,se))){Py(Ee,gn,o,be);break e}ft&&ft(t,re,se),t==="focusout"&&se&&re.type==="number"&&se.memoizedProps.value!=null&&Ha(re,"number",re.value)}switch(ft=se?he(se):window,t){case"focusin":(Dy(ft)||ft.contentEditable==="true")&&(qo=ft,gf=se,rc=null);break;case"focusout":rc=gf=qo=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,$y(Ee,o,be);break;case"selectionchange":if(Mk)break;case"keydown":case"keyup":$y(Ee,o,be)}var $t;if(xn)e:{switch(t){case"compositionstart":var tn="onCompositionStart";break e;case"compositionend":tn="onCompositionEnd";break e;case"compositionupdate":tn="onCompositionUpdate";break e}tn=void 0}else Fo?Xi(t,o)&&(tn="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(tn="onCompositionStart");tn&&(Qr&&o.locale!=="ko"&&(Fo||tn!=="onCompositionStart"?tn==="onCompositionEnd"&&Fo&&($t=Xl()):(Wr=be,Ql="value"in Wr?Wr.value:Wr.textContent,Fo=!0)),ft=Ah(se,tn),0<ft.length&&(tn=new Yr(tn,t,null,o,be),Ee.push({event:tn,listeners:ft}),$t?tn.data=$t:($t=zo(o),$t!==null&&(tn.data=$t)))),($t=lr?kk(t,o):Tk(t,o))&&(tn=Ah(se,"onBeforeInput"),0<tn.length&&(ft=new Yr("onBeforeInput","beforeinput",null,o,be),Ee.push({event:ft,listeners:tn}),ft.data=$t)),pT(Ee,t,se,o,be)}yb(Ee,r)})}function Cc(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ah(t,r){for(var o=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=jr(t,o),f!=null&&c.unshift(Cc(t,f,m)),f=jr(t,r),f!=null&&c.push(Cc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function bT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function bb(t,r,o,c,f){for(var m=r._reactName,b=[];o!==null&&o!==c;){var S=o,z=S.alternate,se=S.stateNode;if(S=S.tag,z!==null&&z===c)break;S!==5&&S!==26&&S!==27||se===null||(z=se,f?(se=jr(o,m),se!=null&&b.unshift(Cc(o,se,z))):f||(se=jr(o,m),se!=null&&b.push(Cc(o,se,z)))),o=o.return}b.length!==0&&t.push({event:r,listeners:b})}var xT=/\r\n?/g,wT=/\u0000|\uFFFD/g;function xb(t){return(typeof t=="string"?t:""+t).replace(xT,`
`).replace(wT,"")}function wb(t,r){return r=xb(r),xb(t)===r}function Nn(t,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Kn(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Kn(t,""+c);break;case"className":oe(t,"class",c);break;case"tabIndex":oe(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":oe(t,o,c);break;case"style":vs(t,c,m);break;case"data":if(r!=="object"){oe(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){t.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=$a(""+c),t.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&Nn(t,r,"name",f.name,f,null),Nn(t,r,"formEncType",f.formEncType,f,null),Nn(t,r,"formMethod",f.formMethod,f,null),Nn(t,r,"formTarget",f.formTarget,f,null)):(Nn(t,r,"encType",f.encType,f,null),Nn(t,r,"method",f.method,f,null),Nn(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=$a(""+c),t.setAttribute(o,c);break;case"onClick":c!=null&&(t.onclick=Ps);break;case"onScroll":c!=null&&Xt("scroll",t);break;case"onScrollEnd":c!=null&&Xt("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}o=$a(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""+c):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":c===!0?t.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,c):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(o,c):t.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(o):t.setAttribute(o,c);break;case"popover":Xt("beforetoggle",t),Xt("toggle",t),fe(t,"popover",c);break;case"xlinkActuate":Re(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Re(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Re(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Re(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Re(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Re(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Re(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Re(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Re(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":fe(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Hr.get(o)||o,fe(t,o,c))}}function Fm(t,r,o,c,f,m){switch(o){case"style":vs(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"children":typeof c=="string"?Kn(t,c):(typeof c=="number"||typeof c=="bigint")&&Kn(t,""+c);break;case"onScroll":c!=null&&Xt("scroll",t);break;case"onScrollEnd":c!=null&&Xt("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Ps);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ee.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=t[yt]||null,m=m!=null?m[o]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(r,c,f);break e}o in t?t[o]=c:c===!0?t.setAttribute(o,""):fe(t,o,c)}}}function ks(t,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xt("error",t),Xt("load",t);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Nn(t,r,m,b,o,null)}}f&&Nn(t,r,"srcSet",o.srcSet,o,null),c&&Nn(t,r,"src",o.src,o,null);return;case"input":Xt("invalid",t);var S=m=b=f=null,z=null,se=null;for(c in o)if(o.hasOwnProperty(c)){var be=o[c];if(be!=null)switch(c){case"name":f=be;break;case"type":b=be;break;case"checked":z=be;break;case"defaultChecked":se=be;break;case"value":m=be;break;case"defaultValue":S=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(i(137,r));break;default:Nn(t,r,c,be,o,null)}}Hi(t,m,S,z,se,b,f,!1);return;case"select":Xt("invalid",t),c=b=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":b=S;break;case"multiple":c=S;default:Nn(t,r,f,S,o,null)}r=m,o=b,t.multiple=!!c,r!=null?wr(t,!!c,r,!1):o!=null&&wr(t,!!c,o,!0);return;case"textarea":Xt("invalid",t),m=f=c=null;for(b in o)if(o.hasOwnProperty(b)&&(S=o[b],S!=null))switch(b){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:Nn(t,r,b,S,o,null)}Gn(t,c,f,m);return;case"option":for(z in o)o.hasOwnProperty(z)&&(c=o[z],c!=null)&&(z==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":Nn(t,r,z,c,o,null));return;case"dialog":Xt("beforetoggle",t),Xt("toggle",t),Xt("cancel",t),Xt("close",t);break;case"iframe":case"object":Xt("load",t);break;case"video":case"audio":for(c=0;c<Nc.length;c++)Xt(Nc[c],t);break;case"image":Xt("error",t),Xt("load",t);break;case"details":Xt("toggle",t);break;case"embed":case"source":case"link":Xt("error",t),Xt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in o)if(o.hasOwnProperty(se)&&(c=o[se],c!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Nn(t,r,se,c,o,null)}return;default:if(Cs(r)){for(be in o)o.hasOwnProperty(be)&&(c=o[be],c!==void 0&&Fm(t,r,be,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&Nn(t,r,S,c,o,null))}function _T(t,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,S=null,z=null,se=null,be=null;for(de in o){var Ee=o[de];if(o.hasOwnProperty(de)&&Ee!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":z=Ee;default:c.hasOwnProperty(de)||Nn(t,r,de,null,c,Ee)}}for(var re in c){var de=c[re];if(Ee=o[re],c.hasOwnProperty(re)&&(de!=null||Ee!=null))switch(re){case"type":m=de;break;case"name":f=de;break;case"checked":se=de;break;case"defaultChecked":be=de;break;case"value":b=de;break;case"defaultValue":S=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,r));break;default:de!==Ee&&Nn(t,r,re,de,c,Ee)}}qa(t,b,S,z,se,be,m,f);return;case"select":de=b=S=re=null;for(m in o)if(z=o[m],o.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":de=z;default:c.hasOwnProperty(m)||Nn(t,r,m,null,c,z)}for(f in c)if(m=c[f],z=o[f],c.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":re=m;break;case"defaultValue":S=m;break;case"multiple":b=m;default:m!==z&&Nn(t,r,f,m,c,z)}r=S,o=b,c=de,re!=null?wr(t,!!o,re,!1):!!c!=!!o&&(r!=null?wr(t,!!o,r,!0):wr(t,!!o,o?[]:"",!1));return;case"textarea":de=re=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Nn(t,r,S,null,c,f)}for(b in c)if(f=c[b],m=o[b],c.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":re=f;break;case"defaultValue":de=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Nn(t,r,b,f,c,m)}dn(t,re,de);return;case"option":for(var lt in o)re=o[lt],o.hasOwnProperty(lt)&&re!=null&&!c.hasOwnProperty(lt)&&(lt==="selected"?t.selected=!1:Nn(t,r,lt,null,c,re));for(z in c)re=c[z],de=o[z],c.hasOwnProperty(z)&&re!==de&&(re!=null||de!=null)&&(z==="selected"?t.selected=re&&typeof re!="function"&&typeof re!="symbol":Nn(t,r,z,re,c,de));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in o)re=o[jt],o.hasOwnProperty(jt)&&re!=null&&!c.hasOwnProperty(jt)&&Nn(t,r,jt,null,c,re);for(se in c)if(re=c[se],de=o[se],c.hasOwnProperty(se)&&re!==de&&(re!=null||de!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,r));break;default:Nn(t,r,se,re,c,de)}return;default:if(Cs(r)){for(var Cn in o)re=o[Cn],o.hasOwnProperty(Cn)&&re!==void 0&&!c.hasOwnProperty(Cn)&&Fm(t,r,Cn,void 0,c,re);for(be in c)re=c[be],de=o[be],!c.hasOwnProperty(be)||re===de||re===void 0&&de===void 0||Fm(t,r,be,re,c,de);return}}for(var Q in o)re=o[Q],o.hasOwnProperty(Q)&&re!=null&&!c.hasOwnProperty(Q)&&Nn(t,r,Q,null,c,re);for(Ee in c)re=c[Ee],de=o[Ee],!c.hasOwnProperty(Ee)||re===de||re==null&&de==null||Nn(t,r,Ee,re,c,de)}function _b(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,b=f.initiatorType,S=f.duration;if(m&&S&&_b(b)){for(b=0,S=f.responseEnd,c+=1;c<o.length;c++){var z=o[c],se=z.startTime;if(se>S)break;var be=z.transferSize,Ee=z.initiatorType;be&&_b(Ee)&&(z=z.responseEnd,b+=be*(z<S?1:(S-se)/(z-se)))}if(--c,r+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var qm=null,Hm=null;function Mh(t){return t.nodeType===9?t:t.ownerDocument}function kb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tb(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function $m(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Wm=null;function TT(){var t=window.event;return t&&t.type==="popstate"?t===Wm?!1:(Wm=t,!0):(Wm=null,!1)}var jb=typeof setTimeout=="function"?setTimeout:void 0,jT=typeof clearTimeout=="function"?clearTimeout:void 0,Eb=typeof Promise=="function"?Promise:void 0,ET=typeof queueMicrotask=="function"?queueMicrotask:typeof Eb<"u"?function(t){return Eb.resolve(null).then(t).catch(ST)}:jb;function ST(t){setTimeout(function(){throw t})}function fi(t){return t==="head"}function Sb(t,r){var o=r,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){t.removeChild(f),gl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Rc(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Rc(o);for(var m=o.firstChild;m;){var b=m.nextSibling,S=m.nodeName;m[Wn]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=b}}else o==="body"&&Rc(t.ownerDocument.body);o=f}while(o);gl(r)}function Nb(t,r){var o=t;t=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=c}while(o)}function Gm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Gm(o),Xn(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function NT(t,r,o,c){for(;t.nodeType===1;){var f=o;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Wn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=pr(t.nextSibling),t===null)break}return null}function CT(t,r,o){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=pr(t.nextSibling),t===null))return null;return t}function Cb(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=pr(t.nextSibling),t===null))return null;return t}function Km(t){return t.data==="$?"||t.data==="$~"}function Ym(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function RT(t,r){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function pr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Qm=null;function Rb(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(r===0)return pr(t.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}t=t.nextSibling}return null}function Ab(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return t;r--}else o!=="/$"&&o!=="/&"||r++}t=t.previousSibling}return null}function Mb(t,r,o){switch(r=Mh(o),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Rc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Xn(t)}var gr=new Map,Ib=new Set;function Ih(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ra=ke.d;ke.d={f:AT,r:MT,D:IT,C:DT,L:PT,m:LT,X:VT,S:OT,M:BT};function AT(){var t=Ra.f(),r=Th();return t||r}function MT(t){var r=q(t);r!==null&&r.tag===5&&r.type==="form"?Qv(r):Ra.r(t)}var fl=typeof document>"u"?null:document;function Db(t,r,o){var c=fl;if(c&&typeof r=="string"&&r){var f=On(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Ib.has(f)||(Ib.add(f),t={rel:t,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),ks(r,"link",t),R(r),c.head.appendChild(r)))}}function IT(t){Ra.D(t),Db("dns-prefetch",t,null)}function DT(t,r){Ra.C(t,r),Db("preconnect",t,r)}function PT(t,r,o){Ra.L(t,r,o);var c=fl;if(c&&t&&r){var f='link[rel="preload"][as="'+On(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+On(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+On(o.imageSizes)+'"]')):f+='[href="'+On(t)+'"]';var m=f;switch(r){case"style":m=ml(t);break;case"script":m=pl(t)}gr.has(m)||(t=k({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:t,as:r},o),gr.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(Ac(m))||r==="script"&&c.querySelector(Mc(m))||(r=c.createElement("link"),ks(r,"link",t),R(r),c.head.appendChild(r)))}}function LT(t,r){Ra.m(t,r);var o=fl;if(o&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+On(c)+'"][href="'+On(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=pl(t)}if(!gr.has(m)&&(t=k({rel:"modulepreload",href:t},r),gr.set(m,t),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Mc(m)))return}c=o.createElement("link"),ks(c,"link",t),R(c),o.head.appendChild(c)}}}function OT(t,r,o){Ra.S(t,r,o);var c=fl;if(c&&t){var f=T(c).hoistableStyles,m=ml(t);r=r||"default";var b=f.get(m);if(!b){var S={loading:0,preload:null};if(b=c.querySelector(Ac(m)))S.loading=5;else{t=k({rel:"stylesheet",href:t,"data-precedence":r},o),(o=gr.get(m))&&Xm(t,o);var z=b=c.createElement("link");R(z),ks(z,"link",t),z._p=new Promise(function(se,be){z.onload=se,z.onerror=be}),z.addEventListener("load",function(){S.loading|=1}),z.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Dh(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:S},f.set(m,b)}}}function VT(t,r){Ra.X(t,r);var o=fl;if(o&&t){var c=T(o).hoistableScripts,f=pl(t),m=c.get(f);m||(m=o.querySelector(Mc(f)),m||(t=k({src:t,async:!0},r),(r=gr.get(f))&&Jm(t,r),m=o.createElement("script"),R(m),ks(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function BT(t,r){Ra.M(t,r);var o=fl;if(o&&t){var c=T(o).hoistableScripts,f=pl(t),m=c.get(f);m||(m=o.querySelector(Mc(f)),m||(t=k({src:t,async:!0,type:"module"},r),(r=gr.get(f))&&Jm(t,r),m=o.createElement("script"),R(m),ks(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Pb(t,r,o,c){var f=(f=Me.current)?Ih(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=ml(o.href),o=T(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=ml(o.href);var m=T(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(Ac(t)))&&!m._p&&(b.instance=m,b.state.loading=5),gr.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},gr.set(t,o),m||UT(f,t,o,b.state))),r&&c===null)throw Error(i(528,""));return b}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=pl(o),o=T(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function ml(t){return'href="'+On(t)+'"'}function Ac(t){return'link[rel="stylesheet"]['+t+"]"}function Lb(t){return k({},t,{"data-precedence":t.precedence,precedence:null})}function UT(t,r,o,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),ks(r,"link",o),R(r),t.head.appendChild(r))}function pl(t){return'[src="'+On(t)+'"]'}function Mc(t){return"script[async]"+t}function Ob(t,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+On(o.href)+'"]');if(c)return r.instance=c,R(c),c;var f=k({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),R(c),ks(c,"style",f),Dh(c,o.precedence,t),r.instance=c;case"stylesheet":f=ml(o.href);var m=t.querySelector(Ac(f));if(m)return r.state.loading|=4,r.instance=m,R(m),m;c=Lb(o),(f=gr.get(f))&&Xm(c,f),m=(t.ownerDocument||t).createElement("link"),R(m);var b=m;return b._p=new Promise(function(S,z){b.onload=S,b.onerror=z}),ks(m,"link",c),r.state.loading|=4,Dh(m,o.precedence,t),r.instance=m;case"script":return m=pl(o.src),(f=t.querySelector(Mc(m)))?(r.instance=f,R(f),f):(c=o,(f=gr.get(m))&&(c=k({},o),Jm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),R(f),ks(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Dh(c,o.precedence,t));return r.instance}function Dh(t,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,b=0;b<c.length;b++){var S=c[b];if(S.dataset.precedence===r)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(t,r.firstChild))}function Xm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Jm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Ph=null;function Vb(t,r,o){if(Ph===null){var c=new Map,f=Ph=new Map;f.set(o,c)}else f=Ph,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(t))return c;for(c.set(t,null),o=o.getElementsByTagName(t),f=0;f<o.length;f++){var m=o[f];if(!(m[Wn]||m[Xe]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=t+b;var S=c.get(b);S?S.push(m):c.set(b,[m])}}return c}function Bb(t,r,o){t=t.ownerDocument||t,t.head.insertBefore(o,r==="title"?t.querySelector("head > title"):null)}function zT(t,r,o){if(o===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Ub(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function FT(t,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=ml(c.href),m=r.querySelector(Ac(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Lh.bind(t),r.then(t,t)),o.state.loading|=4,o.instance=m,R(m);return}m=r.ownerDocument||r,c=Lb(c),(f=gr.get(f))&&Xm(c,f),m=m.createElement("link"),R(m);var b=m;b._p=new Promise(function(S,z){b.onload=S,b.onerror=z}),ks(m,"link",c),o.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Lh.bind(t),r.addEventListener("load",o),r.addEventListener("error",o))}}var Zm=0;function qT(t,r){return t.stylesheets&&t.count===0&&Vh(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var c=setTimeout(function(){if(t.stylesheets&&Vh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Zm===0&&(Zm=62500*kT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Vh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Zm?50:800)+r);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Oh=null;function Vh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Oh=new Map,r.forEach(HT,t),Oh=null,Lh.call(t))}function HT(t,r){if(!(r.state.loading&4)){var o=Oh.get(t);if(o)var c=o.get(null);else{o=new Map,Oh.set(t,o);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}f=r.instance,b=f.getAttribute("data-precedence"),m=o.get(b)||c,m===c&&o.set(null,f),o.set(b,f),this.count++,c=Lh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Ic={$$typeof:ce,Provider:null,Consumer:null,_currentValue:Ie,_currentValue2:Ie,_threadCount:0};function $T(t,r,o,c,f,m,b,S,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.hiddenUpdates=Kt(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function zb(t,r,o,c,f,m,b,S,z,se,be,Ee){return t=new $T(t,r,o,b,z,se,be,Ee,S),r=1,m===!0&&(r|=24),m=Qs(3,null,null,r),t.current=m,m.stateNode=t,r=Mf(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Lf(m),t}function Fb(t){return t?(t=Wo,t):Wo}function qb(t,r,o,c,f,m){f=Fb(f),c.context===null?c.context=f:c.pendingContext=f,c=ni(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=si(t,c,r),o!==null&&(Hs(o,t,r),hc(o,t,r))}function Hb(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function ep(t,r){Hb(t,r),(t=t.alternate)&&Hb(t,r)}function $b(t){if(t.tag===13||t.tag===31){var r=eo(t,67108864);r!==null&&Hs(r,t,67108864),ep(t,67108864)}}function Wb(t){if(t.tag===13||t.tag===31){var r=tr();r=H(r);var o=eo(t,r);o!==null&&Hs(o,t,r),ep(t,r)}}var Bh=!0;function WT(t,r,o,c){var f=Y.T;Y.T=null;var m=ke.p;try{ke.p=2,tp(t,r,o,c)}finally{ke.p=m,Y.T=f}}function GT(t,r,o,c){var f=Y.T;Y.T=null;var m=ke.p;try{ke.p=8,tp(t,r,o,c)}finally{ke.p=m,Y.T=f}}function tp(t,r,o,c){if(Bh){var f=np(c);if(f===null)zm(t,r,c,Uh,o),Kb(t,c);else if(YT(f,t,r,o,c))c.stopPropagation();else if(Kb(t,c),r&4&&-1<KT.indexOf(t)){for(;f!==null;){var m=q(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=ht(m.pendingLanes);if(b!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var z=1<<31-Le(b);S.entanglements[1]|=z,b&=~z}ea(m),(wn&6)===0&&(_h=Pt()+500,Sc(0))}}break;case 31:case 13:S=eo(m,2),S!==null&&Hs(S,m,2),Th(),ep(m,2)}if(m=np(c),m===null&&zm(t,r,c,Uh,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else zm(t,r,c,null,o)}}function np(t){return t=ir(t),sp(t)}var Uh=null;function sp(t){if(Uh=null,t=mn(t),t!==null){var r=u(t);if(r===null)t=null;else{var o=r.tag;if(o===13){if(t=h(r),t!==null)return t;t=null}else if(o===31){if(t=p(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Uh=t,null}function Gb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case qt:return 2;case bn:return 8;case O:case J:return 32;case ye:return 268435456;default:return 32}default:return 32}}var rp=!1,mi=null,pi=null,gi=null,Dc=new Map,Pc=new Map,yi=[],KT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kb(t,r){switch(t){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":Dc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(r.pointerId)}}function Lc(t,r,o,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=q(r),r!==null&&$b(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function YT(t,r,o,c,f){switch(r){case"focusin":return mi=Lc(mi,t,r,o,c,f),!0;case"dragenter":return pi=Lc(pi,t,r,o,c,f),!0;case"mouseover":return gi=Lc(gi,t,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Dc.set(m,Lc(Dc.get(m)||null,t,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Pc.set(m,Lc(Pc.get(m)||null,t,r,o,c,f)),!0}return!1}function Yb(t){var r=mn(t.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=h(o),r!==null){t.blockedOn=r,we(t.priority,function(){Wb(o)});return}}else if(r===31){if(r=p(o),r!==null){t.blockedOn=r,we(t.priority,function(){Wb(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=np(t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);Yl=c,o.target.dispatchEvent(c),Yl=null}else return r=q(o),r!==null&&$b(r),t.blockedOn=o,!1;r.shift()}return!0}function Qb(t,r,o){zh(t)&&o.delete(r)}function QT(){rp=!1,mi!==null&&zh(mi)&&(mi=null),pi!==null&&zh(pi)&&(pi=null),gi!==null&&zh(gi)&&(gi=null),Dc.forEach(Qb),Pc.forEach(Qb)}function Fh(t,r){t.blockedOn===r&&(t.blockedOn=null,rp||(rp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,QT)))}var qh=null;function Xb(t){qh!==t&&(qh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){qh===t&&(qh=null);for(var r=0;r<t.length;r+=3){var o=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(sp(c||o)===null)continue;break}var m=q(o);m!==null&&(t.splice(r,3),r-=3,nm(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function gl(t){function r(z){return Fh(z,t)}mi!==null&&Fh(mi,t),pi!==null&&Fh(pi,t),gi!==null&&Fh(gi,t),Dc.forEach(r),Pc.forEach(r);for(var o=0;o<yi.length;o++){var c=yi[o];c.blockedOn===t&&(c.blockedOn=null)}for(;0<yi.length&&(o=yi[0],o.blockedOn===null);)Yb(o),o.blockedOn===null&&yi.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],b=f[yt]||null;if(typeof m=="function")b||Xb(o);else if(b){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[yt]||null)S=b.formAction;else if(sp(f)!==null)continue}else S=b.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),Xb(o)}}}function Jb(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function ap(t){this._internalRoot=t}Hh.prototype.render=ap.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=tr();qb(o,c,t,r,null,null)},Hh.prototype.unmount=ap.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;qb(t.current,2,null,t,null,null),Th(),r[nt]=null}};function Hh(t){this._internalRoot=t}Hh.prototype.unstable_scheduleHydration=function(t){if(t){var r=ve();t={blockedOn:null,target:t,priority:r};for(var o=0;o<yi.length&&r!==0&&r<yi[o].priority;o++);yi.splice(o,0,t),o===0&&Yb(t)}};var Zb=e.version;if(Zb!=="19.2.4")throw Error(i(527,Zb,"19.2.4"));ke.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var XT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{Be=$h.inject(XT),Ke=$h}catch{}}return Vc.createRoot=function(t,r){if(!l(t))throw Error(i(299));var o=!1,c="",f=i0,m=o0,b=l0;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=zb(t,1,!1,null,null,o,c,null,f,m,b,Jb),t[nt]=r.current,Um(t),new ap(r)},Vc.hydrateRoot=function(t,r,o){if(!l(t))throw Error(i(299));var c=!1,f="",m=i0,b=o0,S=l0,z=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(z=o.formState)),r=zb(t,1,!0,r,o??null,c,f,z,m,b,S,Jb),r.context=Fb(null),o=r.current,c=tr(),c=H(c),f=ni(c),f.callback=null,si(o,f,c),o=c,r.current.lanes=o,Ht(r,o),ea(r),t[nt]=r.current,Um(t),new Hh(r)},Vc.version="19.2.4",Vc}var c1;function oj(){if(c1)return lp.exports;c1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),lp.exports=ij(),lp.exports}var lj=oj();const cj="modulepreload",uj=function(s){return"/login/"+s},u1={},xr=function(e,n,i){let l=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=g(n.map(y=>{if(y=uj(y),y in u1)return;u1[y]=!0;const x=y.endsWith(".css"),k=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${k}`))return;const j=document.createElement("link");if(j.rel=x?"stylesheet":cj,x||(j.as="script"),j.crossOrigin="",j.href=y,p&&j.setAttribute("nonce",p),document.head.appendChild(j),x)return new Promise((L,$)=>{j.addEventListener("load",L),j.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var h1="popstate";function hj(s={}){function e(i,l){let{pathname:u,search:h,hash:p}=i.location;return Fp("",{pathname:u,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:su(l)}return fj(e,n,null,s)}function Hn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function br(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dj(){return Math.random().toString(36).substring(2,10)}function d1(s,e){return{usr:s.state,key:s.key,idx:e}}function Fp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ul(e):e,state:n,key:e&&e.key||i||dj()}}function su({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Ul(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function fj(s,e,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,h=l.history,p="POP",g=null,y=x();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function x(){return(h.state||{idx:null}).idx}function k(){p="POP";let V=x(),ne=V==null?null:V-y;y=V,g&&g({action:p,location:U.location,delta:ne})}function j(V,ne){p="PUSH";let X=Fp(U.location,V,ne);y=x()+1;let ce=d1(X,y),_e=U.createHref(X);try{h.pushState(ce,"",_e)}catch(Ve){if(Ve instanceof DOMException&&Ve.name==="DataCloneError")throw Ve;l.location.assign(_e)}u&&g&&g({action:p,location:U.location,delta:1})}function L(V,ne){p="REPLACE";let X=Fp(U.location,V,ne);y=x();let ce=d1(X,y),_e=U.createHref(X);h.replaceState(ce,"",_e),u&&g&&g({action:p,location:U.location,delta:0})}function $(V){return mj(V)}let U={get action(){return p},get location(){return s(l,h)},listen(V){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(h1,k),g=V,()=>{l.removeEventListener(h1,k),g=null}},createHref(V){return e(l,V)},createURL:$,encodeLocation(V){let ne=$(V);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:j,replace:L,go(V){return h.go(V)}};return U}function mj(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Hn(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:su(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function dx(s,e,n="/"){return pj(s,e,n,!1)}function pj(s,e,n,i){let l=typeof e=="string"?Ul(e):e,u=La(l.pathname||"/",n);if(u==null)return null;let h=fx(s);gj(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=Sj(u);p=jj(h[g],y,i)}return p}function fx(s,e=[],n=[],i="",l=!1){let u=(h,p,g=l,y)=>{let x={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&g)return;Hn(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let k=Ia([i,x.relativePath]),j=n.concat(x);h.children&&h.children.length>0&&(Hn(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),fx(h.children,e,j,k,g)),!(h.path==null&&!h.index)&&e.push({path:k,score:kj(k,h.index),routesMeta:j})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of mx(h.path))u(h,p,!0,g)}),e}function mx(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let h=mx(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function gj(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:Tj(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var yj=/^:[\w-]+$/,vj=3,bj=2,xj=1,wj=10,_j=-2,f1=s=>s==="*";function kj(s,e){let n=s.split("/"),i=n.length;return n.some(f1)&&(i+=_j),e&&(i+=bj),n.filter(l=>!f1(l)).reduce((l,u)=>l+(yj.test(u)?vj:u===""?xj:wj),i)}function Tj(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function jj(s,e,n=!1){let{routesMeta:i}=s,l={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,x=u==="/"?e:e.slice(u.length)||"/",k=bd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),j=g.route;if(!k&&y&&n&&!i[i.length-1].route.index&&(k=bd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!k)return null;Object.assign(l,k.params),h.push({params:l,pathname:Ia([u,k.pathname]),pathnameBase:Aj(Ia([u,k.pathnameBase])),route:j}),k.pathnameBase!=="/"&&(u=Ia([u,k.pathnameBase]))}return h}function bd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=Ej(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:x,isOptional:k},j)=>{if(x==="*"){let $=p[j]||"";h=u.slice(0,u.length-$.length).replace(/(.)\/+$/,"$1")}const L=p[j];return k&&!L?y[x]=void 0:y[x]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:s}}function Ej(s,e=!1,n=!0){br(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function Sj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return br(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function La(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var Nj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Cj(s,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof s=="string"?Ul(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=m1(n.substring(1),"/"):u=m1(n,e)):u=e,{pathname:u,search:Mj(i),hash:Ij(l)}}function m1(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function dp(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Rj(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vg(s){let e=Rj(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function bg(s,e,n,i=!1){let l;typeof s=="string"?l=Ul(s):(l={...s},Hn(!l.pathname||!l.pathname.includes("?"),dp("?","pathname","search",l)),Hn(!l.pathname||!l.pathname.includes("#"),dp("#","pathname","hash",l)),Hn(!l.search||!l.search.includes("#"),dp("#","search","hash",l)));let u=s===""||l.pathname==="",h=u?"/":l.pathname,p;if(h==null)p=n;else{let k=e.length-1;if(!i&&h.startsWith("..")){let j=h.split("/");for(;j[0]==="..";)j.shift(),k-=1;l.pathname=j.join("/")}p=k>=0?e[k]:"/"}let g=Cj(l,p),y=h&&h!=="/"&&h.endsWith("/"),x=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var Ia=s=>s.join("/").replace(/\/\/+/g,"/"),Aj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Mj=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Ij=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Dj=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Pj(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Lj(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var px=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gx(s,e){let n=s;if(typeof n!="string"||!Nj.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(px)try{let u=new URL(window.location.href),h=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=La(h.pathname,e);h.origin===u.origin&&p!=null?n=p+h.search+h.hash:l=!0}catch{br(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yx=["POST","PUT","PATCH","DELETE"];new Set(yx);var Oj=["GET",...yx];new Set(Oj);var zl=_.createContext(null);zl.displayName="DataRouter";var zd=_.createContext(null);zd.displayName="DataRouterState";var Vj=_.createContext(!1),vx=_.createContext({isTransitioning:!1});vx.displayName="ViewTransition";var Bj=_.createContext(new Map);Bj.displayName="Fetchers";var Uj=_.createContext(null);Uj.displayName="Await";var rr=_.createContext(null);rr.displayName="Navigation";var gu=_.createContext(null);gu.displayName="Location";var zr=_.createContext({outlet:null,matches:[],isDataRoute:!1});zr.displayName="Route";var xg=_.createContext(null);xg.displayName="RouteError";var bx="REACT_ROUTER_ERROR",zj="REDIRECT",Fj="ROUTE_ERROR_RESPONSE";function qj(s){if(s.startsWith(`${bx}:${zj}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Hj(s){if(s.startsWith(`${bx}:${Fj}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Dj(e.status,e.statusText,e.data)}catch{}}function $j(s,{relative:e}={}){Hn(Fl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=_.useContext(rr),{hash:l,pathname:u,search:h}=yu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Ia([n,u])),i.createHref({pathname:p,search:h,hash:l})}function Fl(){return _.useContext(gu)!=null}function Fr(){return Hn(Fl(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(gu).location}var xx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wx(s){_.useContext(rr).static||_.useLayoutEffect(s)}function Ss(){let{isDataRoute:s}=_.useContext(zr);return s?aE():Wj()}function Wj(){Hn(Fl(),"useNavigate() may be used only in the context of a <Router> component.");let s=_.useContext(zl),{basename:e,navigator:n}=_.useContext(rr),{matches:i}=_.useContext(zr),{pathname:l}=Fr(),u=JSON.stringify(vg(i)),h=_.useRef(!1);return wx(()=>{h.current=!0}),_.useCallback((g,y={})=>{if(br(h.current,xx),!h.current)return;if(typeof g=="number"){n.go(g);return}let x=bg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Ia([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,u,l,s])}_.createContext(null);function Gj(){let{matches:s}=_.useContext(zr),e=s[s.length-1];return e?e.params:{}}function yu(s,{relative:e}={}){let{matches:n}=_.useContext(zr),{pathname:i}=Fr(),l=JSON.stringify(vg(n));return _.useMemo(()=>bg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function Kj(s,e){return _x(s,e)}function _x(s,e,n,i,l){Hn(Fl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=_.useContext(rr),{matches:h}=_.useContext(zr),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",x=p?p.pathnameBase:"/",k=p&&p.route;{let X=k&&k.path||"";Tx(y,!k||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let j=Fr(),L;if(e){let X=typeof e=="string"?Ul(e):e;Hn(x==="/"||X.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${X.pathname}" was given in the \`location\` prop.`),L=X}else L=j;let $=L.pathname||"/",U=$;if(x!=="/"){let X=x.replace(/^\//,"").split("/");U="/"+$.replace(/^\//,"").split("/").slice(X.length).join("/")}let V=dx(s,{pathname:U});br(k||V!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),br(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ne=Zj(V&&V.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:Ia([x,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?x:Ia([x,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),h,n,i,l);return e&&ne?_.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},ne):ne}function Yj(){let s=rE(),e=Pj(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:l},n):null,h)}var Qj=_.createElement(Yj,null),kx=class extends _.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=Hj(s.digest);n&&(s=n)}let e=s!==void 0?_.createElement(zr.Provider,{value:this.props.routeContext},_.createElement(xg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?_.createElement(Xj,{error:s},e):e}};kx.contextType=Vj;var fp=new WeakMap;function Xj({children:s,error:e}){let{basename:n}=_.useContext(rr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=qj(e.digest);if(i){let l=fp.get(e);if(l)throw l;let u=gx(i.location,n);if(px&&!fp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw fp.set(e,h),h}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function Jj({routeContext:s,match:e,children:n}){let i=_.useContext(zl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(zr.Provider,{value:s},n)}function Zj(s,e=[],n=null,i=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,h=n?.errors;if(h!=null){let x=u.findIndex(k=>k.route.id&&h?.[k.route.id]!==void 0);Hn(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,x+1))}let p=!1,g=-1;if(n)for(let x=0;x<u.length;x++){let k=u[x];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(g=x),k.route.id){let{loaderData:j,errors:L}=n,$=k.route.loader&&!j.hasOwnProperty(k.route.id)&&(!L||L[k.route.id]===void 0);if(k.route.lazy||$){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&i?(x,k)=>{i(x,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Lj(n.matches),errorInfo:k})}:void 0;return u.reduceRight((x,k,j)=>{let L,$=!1,U=null,V=null;n&&(L=h&&k.route.id?h[k.route.id]:void 0,U=k.route.errorElement||Qj,p&&(g<0&&j===0?(Tx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),$=!0,V=null):g===j&&($=!0,V=k.route.hydrateFallbackElement||null)));let ne=e.concat(u.slice(0,j+1)),X=()=>{let ce;return L?ce=U:$?ce=V:k.route.Component?ce=_.createElement(k.route.Component,null):k.route.element?ce=k.route.element:ce=x,_.createElement(Jj,{match:k,routeContext:{outlet:x,matches:ne,isDataRoute:n!=null},children:ce})};return n&&(k.route.ErrorBoundary||k.route.errorElement||j===0)?_.createElement(kx,{location:n.location,revalidation:n.revalidation,component:U,error:L,children:X(),routeContext:{outlet:null,matches:ne,isDataRoute:!0},onError:y}):X()},null)}function wg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eE(s){let e=_.useContext(zl);return Hn(e,wg(s)),e}function tE(s){let e=_.useContext(zd);return Hn(e,wg(s)),e}function nE(s){let e=_.useContext(zr);return Hn(e,wg(s)),e}function _g(s){let e=nE(s),n=e.matches[e.matches.length-1];return Hn(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function sE(){return _g("useRouteId")}function rE(){let s=_.useContext(xg),e=tE("useRouteError"),n=_g("useRouteError");return s!==void 0?s:e.errors?.[n]}function aE(){let{router:s}=eE("useNavigate"),e=_g("useNavigate"),n=_.useRef(!1);return wx(()=>{n.current=!0}),_.useCallback(async(l,u={})=>{br(n.current,xx),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var p1={};function Tx(s,e,n){!e&&!p1[s]&&(p1[s]=!0,br(!1,n))}_.memo(iE);function iE({routes:s,future:e,state:n,onError:i}){return _x(s,void 0,n,i,e)}function oE({to:s,replace:e,state:n,relative:i}){Hn(Fl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=_.useContext(rr);br(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext(zr),{pathname:h}=Fr(),p=Ss(),g=bg(s,vg(u),h,i==="path"),y=JSON.stringify(g);return _.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function qn(s){Hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lE({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){Hn(!Fl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=_.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[p,l,u,h]);typeof n=="string"&&(n=Ul(n));let{pathname:y="/",search:x="",hash:k="",state:j=null,key:L="default"}=n,$=_.useMemo(()=>{let U=La(y,p);return U==null?null:{location:{pathname:U,search:x,hash:k,state:j,key:L},navigationType:i}},[p,y,x,k,j,L,i]);return br($!=null,`<Router basename="${p}"> is not able to match the URL "${y}${x}${k}" because it does not start with the basename, so the <Router> won't render anything.`),$==null?null:_.createElement(rr.Provider,{value:g},_.createElement(gu.Provider,{children:e,value:$}))}function cE({children:s,location:e}){return Kj(qp(s),e)}function qp(s,e=[]){let n=[];return _.Children.forEach(s,(i,l)=>{if(!_.isValidElement(i))return;let u=[...e,l];if(i.type===_.Fragment){n.push.apply(n,qp(i.props.children,u));return}Hn(i.type===qn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Hn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=qp(i.props.children,u)),n.push(h)}),n}var od="get",ld="application/x-www-form-urlencoded";function Fd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function uE(s){return Fd(s)&&s.tagName.toLowerCase()==="button"}function hE(s){return Fd(s)&&s.tagName.toLowerCase()==="form"}function dE(s){return Fd(s)&&s.tagName.toLowerCase()==="input"}function fE(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function mE(s,e){return s.button===0&&(!e||e==="_self")&&!fE(s)}function Hp(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let i=s[n];return e.concat(Array.isArray(i)?i.map(l=>[n,l]):[[n,i]])},[]))}function pE(s,e){let n=Hp(s);return e&&e.forEach((i,l)=>{n.has(l)||e.getAll(l).forEach(u=>{n.append(l,u)})}),n}var Wh=null;function gE(){if(Wh===null)try{new FormData(document.createElement("form"),0),Wh=!1}catch{Wh=!0}return Wh}var yE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mp(s){return s!=null&&!yE.has(s)?(br(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ld}"`),null):s}function vE(s,e){let n,i,l,u,h;if(hE(s)){let p=s.getAttribute("action");i=p?La(p,e):null,n=s.getAttribute("method")||od,l=mp(s.getAttribute("enctype"))||ld,u=new FormData(s)}else if(uE(s)||dE(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?La(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||od,l=mp(s.getAttribute("formenctype"))||mp(p.getAttribute("enctype"))||ld,u=new FormData(p,s),!gE()){let{name:y,type:x,value:k}=s;if(x==="image"){let j=y?`${y}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else y&&u.append(y,k)}}else{if(Fd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=od,i=null,l=ld,h=s}return u&&l==="text/plain"&&(h=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function bE(s,e,n,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&La(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function xE(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wE(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function _E(s,e,n){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await xE(u,n);return h.links?h.links():[]}return[]}));return EE(i.flat(1).filter(wE).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function g1(s,e,n,i,l,u){let h=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let x=i.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let k=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function kE(s,e,{includeHydrateFallback:n}={}){return TE(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function TE(s){return[...new Set(s)]}function jE(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function EE(s,e){let n=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(jE(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function jx(){let s=_.useContext(zl);return kg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function SE(){let s=_.useContext(zd);return kg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Tg=_.createContext(void 0);Tg.displayName="FrameworkContext";function Ex(){let s=_.useContext(Tg);return kg(s,"You must render this element inside a <HydratedRouter> element"),s}function NE(s,e){let n=_.useContext(Tg),[i,l]=_.useState(!1),[u,h]=_.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:k}=e,j=_.useRef(null);_.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let U=ne=>{ne.forEach(X=>{h(X.isIntersecting)})},V=new IntersectionObserver(U,{threshold:.5});return j.current&&V.observe(j.current),()=>{V.disconnect()}}},[s]),_.useEffect(()=>{if(i){let U=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(U)}}},[i]);let L=()=>{l(!0)},$=()=>{l(!1),h(!1)};return n?s!=="intent"?[u,j,{}]:[u,j,{onFocus:Bc(p,L),onBlur:Bc(g,$),onMouseEnter:Bc(y,L),onMouseLeave:Bc(x,$),onTouchStart:Bc(k,L)}]:[!1,j,{}]}function Bc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function CE({page:s,...e}){let{router:n}=jx(),i=_.useMemo(()=>dx(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?_.createElement(AE,{page:s,matches:i,...e}):null}function RE(s){let{manifest:e,routeModules:n}=Ex(),[i,l]=_.useState([]);return _.useEffect(()=>{let u=!1;return _E(s,e,n).then(h=>{u||l(h)}),()=>{u=!0}},[s,e,n]),i}function AE({page:s,matches:e,...n}){let i=Fr(),{future:l,manifest:u,routeModules:h}=Ex(),{basename:p}=jx(),{loaderData:g,matches:y}=SE(),x=_.useMemo(()=>g1(s,e,y,u,i,"data"),[s,e,y,u,i]),k=_.useMemo(()=>g1(s,e,y,u,i,"assets"),[s,e,y,u,i]),j=_.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let U=new Set,V=!1;if(e.forEach(X=>{let ce=u.routes[X.route.id];!ce||!ce.hasLoader||(!x.some(_e=>_e.route.id===X.route.id)&&X.route.id in g&&h[X.route.id]?.shouldRevalidate||ce.hasClientLoader?V=!0:U.add(X.route.id))}),U.size===0)return[];let ne=bE(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return V&&U.size>0&&ne.searchParams.set("_routes",e.filter(X=>U.has(X.route.id)).map(X=>X.route.id).join(",")),[ne.pathname+ne.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,x,e,s,h]),L=_.useMemo(()=>kE(k,u),[k,u]),$=RE(k);return _.createElement(_.Fragment,null,j.map(U=>_.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),L.map(U=>_.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),$.map(({key:U,link:V})=>_.createElement("link",{key:U,nonce:n.nonce,...V,crossOrigin:V.crossOrigin??n.crossOrigin})))}function ME(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var IE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IE&&(window.__reactRouterVersion="7.13.0")}catch{}function DE({basename:s,children:e,unstable_useTransitions:n,window:i}){let l=_.useRef();l.current==null&&(l.current=hj({window:i,v5Compat:!0}));let u=l.current,[h,p]=_.useState({action:u.action,location:u.location}),g=_.useCallback(y=>{n===!1?p(y):_.startTransition(()=>p(y))},[n]);return _.useLayoutEffect(()=>u.listen(g),[u,g]),_.createElement(lE,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:n})}var Sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nx=_.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:h,state:p,target:g,to:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j,...L},$){let{basename:U,unstable_useTransitions:V}=_.useContext(rr),ne=typeof y=="string"&&Sx.test(y),X=gx(y,U);y=X.to;let ce=$j(y,{relative:l}),[_e,Ve,Ae]=NE(i,L),M=VE(y,{replace:h,state:p,target:g,preventScrollReset:x,relative:l,viewTransition:k,unstable_defaultShouldRevalidate:j,unstable_useTransitions:V});function E(P){e&&e(P),P.defaultPrevented||M(P)}let A=_.createElement("a",{...L,...Ae,href:X.absoluteURL||ce,onClick:X.isExternal||u?e:E,ref:ME($,Ve),target:g,"data-discover":!ne&&n==="render"?"true":void 0});return _e&&!ne?_.createElement(_.Fragment,null,A,_.createElement(CE,{page:ce})):A});Nx.displayName="Link";var PE=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:h,viewTransition:p,children:g,...y},x){let k=yu(h,{relative:y.relative}),j=Fr(),L=_.useContext(zd),{navigator:$,basename:U}=_.useContext(rr),V=L!=null&&HE(k)&&p===!0,ne=$.encodeLocation?$.encodeLocation(k).pathname:k.pathname,X=j.pathname,ce=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;n||(X=X.toLowerCase(),ce=ce?ce.toLowerCase():null,ne=ne.toLowerCase()),ce&&U&&(ce=La(ce,U)||ce);const _e=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let Ve=X===ne||!l&&X.startsWith(ne)&&X.charAt(_e)==="/",Ae=ce!=null&&(ce===ne||!l&&ce.startsWith(ne)&&ce.charAt(ne.length)==="/"),M={isActive:Ve,isPending:Ae,isTransitioning:V},E=Ve?e:void 0,A;typeof i=="function"?A=i(M):A=[i,Ve?"active":null,Ae?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(M):u;return _.createElement(Nx,{...y,"aria-current":E,className:A,ref:x,style:P,to:h,viewTransition:p},typeof g=="function"?g(M):g)});PE.displayName="NavLink";var LE=_.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:u,method:h=od,action:p,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j,...L},$)=>{let{unstable_useTransitions:U}=_.useContext(rr),V=FE(),ne=qE(p,{relative:y}),X=h.toLowerCase()==="get"?"get":"post",ce=typeof p=="string"&&Sx.test(p),_e=Ve=>{if(g&&g(Ve),Ve.defaultPrevented)return;Ve.preventDefault();let Ae=Ve.nativeEvent.submitter,M=Ae?.getAttribute("formmethod")||h,E=()=>V(Ae||Ve.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:l,state:u,relative:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j});U&&n!==!1?_.startTransition(()=>E()):E()};return _.createElement("form",{ref:$,method:X,action:ne,onSubmit:i?g:_e,...L,"data-discover":!ce&&s==="render"?"true":void 0})});LE.displayName="Form";function OE(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cx(s){let e=_.useContext(zl);return Hn(e,OE(s)),e}function VE(s,{target:e,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Ss(),x=Fr(),k=yu(s,{relative:u});return _.useCallback(j=>{if(mE(j,e)){j.preventDefault();let L=n!==void 0?n:su(x)===su(k),$=()=>y(s,{replace:L,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?_.startTransition(()=>$()):$()}},[x,y,k,n,i,e,s,l,u,h,p,g])}function BE(s){br(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=_.useRef(Hp(s)),n=_.useRef(!1),i=Fr(),l=_.useMemo(()=>pE(i.search,n.current?null:e.current),[i.search]),u=Ss(),h=_.useCallback((p,g)=>{const y=Hp(typeof p=="function"?p(new URLSearchParams(l)):p);n.current=!0,u("?"+y,g)},[u,l]);return[l,h]}var UE=0,zE=()=>`__${String(++UE)}__`;function FE(){let{router:s}=Cx("useSubmit"),{basename:e}=_.useContext(rr),n=sE(),i=s.fetch,l=s.navigate;return _.useCallback(async(u,h={})=>{let{action:p,method:g,encType:y,formData:x,body:k}=vE(u,e);if(h.navigate===!1){let j=h.fetcherKey||zE();await i(j,n,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:x,body:k,formMethod:h.method||g,formEncType:h.encType||y,flushSync:h.flushSync})}else await l(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:x,body:k,formMethod:h.method||g,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,l,e,n])}function qE(s,{relative:e}={}){let{basename:n}=_.useContext(rr),i=_.useContext(zr);Hn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...yu(s||".",{relative:e})},h=Fr();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(k=>k).forEach(k=>p.append("index",k));let x=p.toString();u.search=x?`?${x}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Ia([n,u.pathname])),su(u)}function HE(s,{relative:e}={}){let n=_.useContext(vx);Hn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Cx("useViewTransitionState"),l=yu(s,{relative:e});if(!n.isTransitioning)return!1;let u=La(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=La(n.nextLocation.pathname,i)||n.nextLocation.pathname;return bd(l.pathname,h)!=null||bd(l.pathname,u)!=null}const $E=()=>{};var y1={};const Rx=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},WE=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],h=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],h=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Ax={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,p=h?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,x=u>>2,k=(u&3)<<4|p>>4;let j=(p&15)<<2|y>>6,L=y&63;g||(L=64,h||(j=64)),i.push(n[x],n[k],n[j],n[L])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Rx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):WE(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const k=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||k==null)throw new GE;const j=u<<2|p>>4;if(i.push(j),y!==64){const L=p<<4&240|y>>2;if(i.push(L),k!==64){const $=y<<6&192|k;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class GE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KE=function(s){const e=Rx(s);return Ax.encodeByteArray(e,!0)},xd=function(s){return KE(s).replace(/\./g,"")},Mx=function(s){try{return Ax.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function YE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const QE=()=>YE().__FIREBASE_DEFAULTS__,XE=()=>{if(typeof process>"u"||typeof y1>"u")return;const s=y1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},JE=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Mx(s[1]);return e&&JSON.parse(e)},qd=()=>{try{return $E()||QE()||XE()||JE()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Ix=s=>qd()?.emulatorHosts?.[s],Dx=s=>{const e=Ix(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Px=()=>qd()?.config,Lx=s=>qd()?.[`_${s}`];class ZE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Bi(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jg(s){return(await fetch(s,{credentials:"include"})).ok}function Ox(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[xd(JSON.stringify(n)),xd(JSON.stringify(h)),""].join(".")}const Qc={};function eS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Qc))Qc[e]?s.emulator.push(e):s.prod.push(e);return s}function tS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let v1=!1;function Eg(s,e){if(typeof window>"u"||typeof document>"u"||!Bi(window.location.host)||Qc[s]===e||Qc[s]||v1)return;Qc[s]=e;function n(j){return`__firebase__banner__${j}`}const i="__firebase__banner",u=eS().prod.length>0;function h(){const j=document.getElementById(i);j&&j.remove()}function p(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function g(j,L){j.setAttribute("width","24"),j.setAttribute("id",L),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function y(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{v1=!0,h()},j}function x(j,L){j.setAttribute("id",L),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function k(){const j=tS(i),L=n("text"),$=document.getElementById(L)||document.createElement("span"),U=n("learnmore"),V=document.getElementById(U)||document.createElement("a"),ne=n("preprendIcon"),X=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const ce=j.element;p(ce),x(V,U);const _e=y();g(X,ne),ce.append(X,$,V,_e),document.body.appendChild(ce)}u?($.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}function Ds(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ds())}function sS(){const s=qd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function iS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oS(){const s=Ds();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function lS(){return!sS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cS(){try{return typeof indexedDB=="object"}catch{return!1}}function uS(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const hS="FirebaseError";class da extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=hS,Object.setPrototypeOf(this,da.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?dS(u,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new da(l,p,i)}}function dS(s,e){return s.replace(fS,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const fS=/\{\$([^}]+)}/g;function mS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function To(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=s[l],h=e[l];if(b1(u)&&b1(h)){if(!To(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function b1(s){return s!==null&&typeof s=="object"}function bu(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Hc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function $c(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function pS(s,e){const n=new gS(s,e);return n.subscribe.bind(n)}class gS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");yS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=pp),l.error===void 0&&(l.error=pp),l.complete===void 0&&(l.complete=pp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function pp(){}function $n(s){return s&&s._delegate?s._delegate:s}class Mi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const go="[DEFAULT]";class vS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new ZE;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xS(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bS(s){return s===go?void 0:s}function xS(s){return s.instantiationMode==="EAGER"}class wS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var nn;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(nn||(nn={}));const _S={debug:nn.DEBUG,verbose:nn.VERBOSE,info:nn.INFO,warn:nn.WARN,error:nn.ERROR,silent:nn.SILENT},kS=nn.INFO,TS={[nn.DEBUG]:"log",[nn.VERBOSE]:"log",[nn.INFO]:"info",[nn.WARN]:"warn",[nn.ERROR]:"error"},jS=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=TS[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sg{constructor(e){this.name=e,this._logLevel=kS,this._logHandler=jS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_S[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nn.DEBUG,...e),this._logHandler(this,nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nn.VERBOSE,...e),this._logHandler(this,nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nn.INFO,...e),this._logHandler(this,nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nn.WARN,...e),this._logHandler(this,nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nn.ERROR,...e),this._logHandler(this,nn.ERROR,...e)}}const ES=(s,e)=>e.some(n=>s instanceof n);let x1,w1;function SS(){return x1||(x1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NS(){return w1||(w1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vx=new WeakMap,$p=new WeakMap,Bx=new WeakMap,gp=new WeakMap,Ng=new WeakMap;function CS(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Ni(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Vx.set(n,s)}).catch(()=>{}),Ng.set(e,s),e}function RS(s){if($p.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});$p.set(s,e)}let Wp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return $p.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Bx.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function AS(s){Wp=s(Wp)}function MS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(yp(this),e,...n);return Bx.set(i,e.sort?e.sort():[e]),Ni(i)}:NS().includes(s)?function(...e){return s.apply(yp(this),e),Ni(Vx.get(this))}:function(...e){return Ni(s.apply(yp(this),e))}}function IS(s){return typeof s=="function"?MS(s):(s instanceof IDBTransaction&&RS(s),ES(s,SS())?new Proxy(s,Wp):s)}function Ni(s){if(s instanceof IDBRequest)return CS(s);if(gp.has(s))return gp.get(s);const e=IS(s);return e!==s&&(gp.set(s,e),Ng.set(e,s)),e}const yp=s=>Ng.get(s);function DS(s,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(s,e),p=Ni(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Ni(h.result),g.oldVersion,g.newVersion,Ni(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const PS=["get","getKey","getAll","getAllKeys","count"],LS=["put","add","delete","clear"],vp=new Map;function _1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(vp.get(e))return vp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=LS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||PS.includes(n)))return;const u=async function(h,...p){const g=this.transaction(h,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return vp.set(e,u),u}AS(s=>({...s,get:(e,n,i)=>_1(e,n)||s.get(e,n,i),has:(e,n)=>!!_1(e,n)||s.has(e,n)}));class OS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function VS(s){return s.getComponent()?.type==="VERSION"}const Gp="@firebase/app",k1="0.14.7";const Oa=new Sg("@firebase/app"),BS="@firebase/app-compat",US="@firebase/analytics-compat",zS="@firebase/analytics",FS="@firebase/app-check-compat",qS="@firebase/app-check",HS="@firebase/auth",$S="@firebase/auth-compat",WS="@firebase/database",GS="@firebase/data-connect",KS="@firebase/database-compat",YS="@firebase/functions",QS="@firebase/functions-compat",XS="@firebase/installations",JS="@firebase/installations-compat",ZS="@firebase/messaging",eN="@firebase/messaging-compat",tN="@firebase/performance",nN="@firebase/performance-compat",sN="@firebase/remote-config",rN="@firebase/remote-config-compat",aN="@firebase/storage",iN="@firebase/storage-compat",oN="@firebase/firestore",lN="@firebase/ai",cN="@firebase/firestore-compat",uN="firebase",hN="12.8.0";const Kp="[DEFAULT]",dN={[Gp]:"fire-core",[BS]:"fire-core-compat",[zS]:"fire-analytics",[US]:"fire-analytics-compat",[qS]:"fire-app-check",[FS]:"fire-app-check-compat",[HS]:"fire-auth",[$S]:"fire-auth-compat",[WS]:"fire-rtdb",[GS]:"fire-data-connect",[KS]:"fire-rtdb-compat",[YS]:"fire-fn",[QS]:"fire-fn-compat",[XS]:"fire-iid",[JS]:"fire-iid-compat",[ZS]:"fire-fcm",[eN]:"fire-fcm-compat",[tN]:"fire-perf",[nN]:"fire-perf-compat",[sN]:"fire-rc",[rN]:"fire-rc-compat",[aN]:"fire-gcs",[iN]:"fire-gcs-compat",[oN]:"fire-fst",[cN]:"fire-fst-compat",[lN]:"fire-vertex","fire-js":"fire-js",[uN]:"fire-js-all"};const wd=new Map,fN=new Map,Yp=new Map;function T1(s,e){try{s.container.addComponent(e)}catch(n){Oa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function jo(s){const e=s.name;if(Yp.has(e))return Oa.debug(`There were multiple attempts to register component ${e}.`),!1;Yp.set(e,s);for(const n of wd.values())T1(n,s);for(const n of fN.values())T1(n,s);return!0}function Hd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function nr(s){return s==null?!1:s.settings!==void 0}const mN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new vu("app","Firebase",mN);class pN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}const Io=hN;function Cg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Kp,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Ci.create("bad-app-name",{appName:String(l)});if(n||(n=Px()),!n)throw Ci.create("no-options");const u=wd.get(l);if(u){if(To(n,u.options)&&To(i,u.config))return u;throw Ci.create("duplicate-app",{appName:l})}const h=new wS(l);for(const g of Yp.values())h.addComponent(g);const p=new pN(n,i,h);return wd.set(l,p),p}function Rg(s=Kp){const e=wd.get(s);if(!e&&s===Kp&&Px())return Cg();if(!e)throw Ci.create("no-app",{appName:s});return e}function aa(s,e,n){let i=dN[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oa.warn(h.join(" "));return}jo(new Mi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const gN="firebase-heartbeat-database",yN=1,ru="firebase-heartbeat-store";let bp=null;function Ux(){return bp||(bp=DS(gN,yN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(s=>{throw Ci.create("idb-open",{originalErrorMessage:s.message})})),bp}async function vN(s){try{const n=(await Ux()).transaction(ru),i=await n.objectStore(ru).get(zx(s));return await n.done,i}catch(e){if(e instanceof da)Oa.warn(e.message);else{const n=Ci.create("idb-get",{originalErrorMessage:e?.message});Oa.warn(n.message)}}}async function j1(s,e){try{const i=(await Ux()).transaction(ru,"readwrite");await i.objectStore(ru).put(e,zx(s)),await i.done}catch(n){if(n instanceof da)Oa.warn(n.message);else{const i=Ci.create("idb-set",{originalErrorMessage:n?.message});Oa.warn(i.message)}}}function zx(s){return`${s.name}!${s.options.appId}`}const bN=1024,xN=30;class wN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=E1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>xN){const l=TN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Oa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=E1(),{heartbeatsToSend:n,unsentEntries:i}=_N(this._heartbeatsCache.heartbeats),l=xd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Oa.warn(e),""}}}function E1(){return new Date().toISOString().substring(0,10)}function _N(s,e=bN){const n=[];let i=s.slice();for(const l of s){const u=n.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),S1(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),S1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class kN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cS()?uS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return j1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return j1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function S1(s){return xd(JSON.stringify({version:2,heartbeats:s})).length}function TN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function jN(s){jo(new Mi("platform-logger",e=>new OS(e),"PRIVATE")),jo(new Mi("heartbeat",e=>new wN(e),"PRIVATE")),aa(Gp,k1,s),aa(Gp,k1,"esm2020"),aa("fire-js","")}jN("");function Fx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EN=Fx,qx=new vu("auth","Firebase",Fx());const _d=new Sg("@firebase/auth");function SN(s,...e){_d.logLevel<=nn.WARN&&_d.warn(`Auth (${Io}): ${s}`,...e)}function cd(s,...e){_d.logLevel<=nn.ERROR&&_d.error(`Auth (${Io}): ${s}`,...e)}function Or(s,...e){throw Ag(s,...e)}function ia(s,...e){return Ag(s,...e)}function Hx(s,e,n){const i={...EN(),[e]:n};return new vu("auth","Firebase",i).create(e,{appName:s.name})}function Da(s){return Hx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ag(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return qx.create(s,...e)}function Nt(s,e,...n){if(!s)throw Ag(e,...n)}function Aa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw cd(e),new Error(e)}function Va(s,e){s||Aa(e)}function Qp(){return typeof self<"u"&&self.location?.href||""}function NN(){return N1()==="http:"||N1()==="https:"}function N1(){return typeof self<"u"&&self.location?.protocol||null}function CN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NN()||aS()||"connection"in navigator)?navigator.onLine:!0}function RN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Va(n>e,"Short delay should be less than long delay!"),this.isMobile=nS()||iS()}get(){return CN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mg(s,e){Va(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class $x{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const AN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const MN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IN=new xu(3e4,6e4);function za(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Fa(s,e,n,i,l={}){return Wx(s,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=bu({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return rS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Bi(s.emulatorConfig.host)&&(y.credentials="include"),$x.fetch()(await Gx(s,s.config.apiHost,n,p),y)})}async function Wx(s,e,n){s._canInitEmulator=!1;const i={...AN,...e};try{const l=new PN(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Gh(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gh(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Gh(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Gh(s,"user-disabled",h);const x=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Hx(s,x,y);Or(s,x)}}catch(l){if(l instanceof da)throw l;Or(s,"network-request-failed",{message:String(l)})}}async function wu(s,e,n,i,l={}){const u=await Fa(s,e,n,i,l);return"mfaPendingCredential"in u&&Or(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Gx(s,e,n,i){const l=`${e}${n}?${i}`,u=s,h=u.config.emulator?Mg(s.config,l):`${s.config.apiScheme}://${l}`;return MN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function DN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ia(this.auth,"network-request-failed")),IN.get())})}}function Gh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=ia(s,e,i);return l.customData._tokenResponse=n,l}function C1(s){return s!==void 0&&s.enterprise!==void 0}class LN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ON(s,e){return Fa(s,"GET","/v2/recaptchaConfig",za(s,e))}async function VN(s,e){return Fa(s,"POST","/v1/accounts:delete",e)}async function kd(s,e){return Fa(s,"POST","/v1/accounts:lookup",e)}function Xc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BN(s,e=!1){const n=$n(s),i=await n.getIdToken(e),l=Ig(i);Nt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:Xc(xp(l.auth_time)),issuedAtTime:Xc(xp(l.iat)),expirationTime:Xc(xp(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function xp(s){return Number(s)*1e3}function Ig(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return cd("JWT malformed, contained fewer than 3 sections"),null;try{const l=Mx(n);return l?JSON.parse(l):(cd("Failed to decode base64 JWT payload"),null)}catch(l){return cd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function R1(s){const e=Ig(s);return Nt(e,"internal-error"),Nt(typeof e.exp<"u","internal-error"),Nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function au(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof da&&UN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function UN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class zN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Xp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Td(s){const e=s.auth,n=await s.getIdToken(),i=await au(s,kd(e,{idToken:n}));Nt(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?Kx(l.providerUserInfo):[],h=qN(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!h?.length,y=p?g:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Xp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function FN(s){const e=$n(s);await Td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qN(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function Kx(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function HN(s,e){const n=await Wx(s,{},async()=>{const i=bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,h=await Gx(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&Bi(s.emulatorConfig.host)&&(g.credentials="include"),$x.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $N(s,e){return Fa(s,"POST","/v2/accounts:revokeToken",za(s,e))}class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Nt(e.idToken,"internal-error"),Nt(typeof e.idToken<"u","internal-error"),Nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Nt(e.length!==0,"internal-error");const n=R1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await HN(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,h=new El;return i&&(Nt(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(Nt(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(Nt(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return Aa("not implemented")}}function bi(s,e){Nt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Pr{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new zN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Xp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await au(this,this.stsTokenManager.getToken(this.auth,e));return Nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BN(this,e)}reload(){return FN(this)}_assign(e){this!==e&&(Nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Td(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(Da(this.auth));const e=await this.getIdToken();return await au(this,VN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:k,emailVerified:j,isAnonymous:L,providerData:$,stsTokenManager:U}=n;Nt(k&&U,e,"internal-error");const V=El.fromJSON(this.name,U);Nt(typeof k=="string",e,"internal-error"),bi(i,e.name),bi(l,e.name),Nt(typeof j=="boolean",e,"internal-error"),Nt(typeof L=="boolean",e,"internal-error"),bi(u,e.name),bi(h,e.name),bi(p,e.name),bi(g,e.name),bi(y,e.name),bi(x,e.name);const ne=new Pr({uid:k,auth:e,email:l,emailVerified:j,displayName:i,isAnonymous:L,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:V,createdAt:y,lastLoginAt:x});return $&&Array.isArray($)&&(ne.providerData=$.map(X=>({...X}))),g&&(ne._redirectEventId=g),ne}static async _fromIdTokenResponse(e,n,i=!1){const l=new El;l.updateFromServerResponse(n);const u=new Pr({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Td(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];Nt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Kx(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,p=new El;p.updateFromIdToken(i);const g=new Pr({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Xp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const A1=new Map;function Ma(s){Va(s instanceof Function,"Expected a class definition");let e=A1.get(s);return e?(Va(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,A1.set(s,e),e)}class Yx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Yx.type="NONE";const M1=Yx;function ud(s,e,n){return`firebase:${s}:${e}:${n}`}class Sl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=ud(this.userKey,l.apiKey,u),this.fullPersistenceKey=ud("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kd(this.auth,{idToken:e}).catch(()=>{});return n?Pr._fromGetAccountInfoResponse(this.auth,n,e):null}return Pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Sl(Ma(M1),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Ma(M1);const h=ud(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(h);if(x){let k;if(typeof x=="string"){const j=await kd(e,{idToken:x}).catch(()=>{});if(!j)break;k=await Pr._fromGetAccountInfoResponse(e,j,x)}else k=Pr._fromJSON(e,x);y!==u&&(p=k),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Sl(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new Sl(u,e,i))}}function I1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tw(e))return"Blackberry";if(nw(e))return"Webos";if(Xx(e))return"Safari";if((e.includes("chrome/")||Jx(e))&&!e.includes("edge/"))return"Chrome";if(ew(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Qx(s=Ds()){return/firefox\//i.test(s)}function Xx(s=Ds()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jx(s=Ds()){return/crios\//i.test(s)}function Zx(s=Ds()){return/iemobile/i.test(s)}function ew(s=Ds()){return/android/i.test(s)}function tw(s=Ds()){return/blackberry/i.test(s)}function nw(s=Ds()){return/webos/i.test(s)}function Dg(s=Ds()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function WN(s=Ds()){return Dg(s)&&!!window.navigator?.standalone}function GN(){return oS()&&document.documentMode===10}function sw(s=Ds()){return Dg(s)||ew(s)||nw(s)||tw(s)||/windows phone/i.test(s)||Zx(s)}function rw(s,e=[]){let n;switch(s){case"Browser":n=I1(Ds());break;case"Worker":n=`${I1(Ds())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Io}/${i}`}class KN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function YN(s,e={}){return Fa(s,"GET","/v2/passwordPolicy",za(s,e))}const QN=6;class XN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??QN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class JN{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D1(this),this.idTokenSubscription=new D1(this),this.beforeStateQueue=new KN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ma(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Sl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kd(this,{idToken:e}),i=await Pr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Td(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(Da(this));const n=e?$n(e):null;return n&&Nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(Da(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(Da(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ma(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YN(this),n=new XN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await $N(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ma(e)||this._popupRedirectResolver;Nt(n,this,"argument-error"),this.redirectPersistenceManager=await Sl.create(this,[Ma(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,l);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&SN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ui(s){return $n(s)}class D1{constructor(e){this.auth=e,this.observer=null,this.addObserver=pS(n=>this.observer=n)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZN(s){$d=s}function aw(s){return $d.loadJS(s)}function e4(){return $d.recaptchaEnterpriseScript}function t4(){return $d.gapiScript}function n4(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class s4{constructor(){this.enterprise=new r4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class r4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const a4="recaptcha-enterprise",iw="NO_RECAPTCHA";class i4{constructor(e){this.type=a4,this.auth=Ui(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{ON(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new LN(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,h,p){const g=window.grecaptcha;C1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(iw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new s4().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!n&&C1(window.grecaptcha))l(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=e4();g.length!==0&&(g+=p),aw(g).then(()=>{l(p,u,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function P1(s,e,n,i=!1,l=!1){const u=new i4(s);let h;if(l)h=iw;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function jd(s,e,n,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await P1(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await P1(s,e,n,n==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function o4(s,e){const n=Hd(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(To(u,e??{}))return l;Or(l,"already-initialized")}return n.initialize({options:e})}function l4(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Ma);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function c4(s,e,n){const i=Ui(s);Nt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=ow(e),{host:h,port:p}=u4(e),g=p===null?"":`:${p}`,y={url:`${u}//${h}${g}/`},x=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Nt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Nt(To(y,i.config.emulator)&&To(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,Bi(h)?(jg(`${u}//${h}${g}`),Eg("Auth",!0)):h4()}function ow(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function u4(s){const e=ow(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:L1(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:L1(h)}}}function L1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function h4(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Pg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Aa("not implemented")}_getIdTokenResponse(e){return Aa("not implemented")}_linkToIdToken(e,n){return Aa("not implemented")}_getReauthenticationResolver(e){return Aa("not implemented")}}async function d4(s,e){return Fa(s,"POST","/v1/accounts:signUp",e)}async function f4(s,e){return wu(s,"POST","/v1/accounts:signInWithPassword",za(s,e))}async function m4(s,e){return Fa(s,"POST","/v1/accounts:sendOobCode",za(s,e))}async function p4(s,e){return m4(s,e)}async function g4(s,e){return wu(s,"POST","/v1/accounts:signInWithEmailLink",za(s,e))}async function y4(s,e){return wu(s,"POST","/v1/accounts:signInWithEmailLink",za(s,e))}class iu extends Pg{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new iu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new iu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jd(e,n,"signInWithPassword",f4);case"emailLink":return g4(e,{email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jd(e,i,"signUpPassword",d4);case"emailLink":return y4(e,{idToken:n,email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Nl(s,e){return wu(s,"POST","/v1/accounts:signInWithIdp",za(s,e))}const v4="http://localhost";class Eo extends Pg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const h=new Eo(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Nl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Nl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nl(e,n)}buildRequest(){const e={requestUri:v4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bu(n)}return e}}function b4(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function x4(s){const e=Hc($c(s)).link,n=e?Hc($c(e)).deep_link_id:null,i=Hc($c(s)).deep_link_id;return(i?Hc($c(i)).link:null)||i||n||e||s}class Lg{constructor(e){const n=Hc($c(e)),i=n.apiKey??null,l=n.oobCode??null,u=b4(n.mode??null);Nt(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=x4(e);try{return new Lg(n)}catch{return null}}}class ql{constructor(){this.providerId=ql.PROVIDER_ID}static credential(e,n){return iu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Lg.parseLink(n);return Nt(i,"argument-error"),iu._fromEmailAndCode(e,i.code,i.tenantId)}}ql.PROVIDER_ID="password";ql.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ql.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class lw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _u extends lw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _i extends _u{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";class ki extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Eo._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ki.credential(n,i)}catch{return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com";ki.PROVIDER_ID="google.com";class Ti extends _u{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";class ji extends _u{constructor(){super("twitter.com")}static credential(e,n){return Eo._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ji.credential(n,i)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";async function w4(s,e){return wu(s,"POST","/v1/accounts:signUp",za(s,e))}class So{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await Pr._fromIdTokenResponse(e,i,l),h=O1(i);return new So({user:u,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=O1(i);return new So({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function O1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Ed extends da{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Ed(e,n,i,l)}}function cw(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(s,u,e,i):u})}async function _4(s,e,n=!1){const i=await au(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return So._forOperation(s,"link",i)}async function k4(s,e,n=!1){const{auth:i}=s;if(nr(i.app))return Promise.reject(Da(i));const l="reauthenticate";try{const u=await au(s,cw(i,l,e,s),n);Nt(u.idToken,i,"internal-error");const h=Ig(u.idToken);Nt(h,i,"internal-error");const{sub:p}=h;return Nt(s.uid===p,i,"user-mismatch"),So._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Or(i,"user-mismatch"),u}}async function uw(s,e,n=!1){if(nr(s.app))return Promise.reject(Da(s));const i="signIn",l=await cw(s,i,e),u=await So._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(u.user),u}async function T4(s,e){return uw(Ui(s),e)}async function hw(s){const e=Ui(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function j4(s,e,n){const i=Ui(s);await jd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",p4)}async function BD(s,e,n){if(nr(s.app))return Promise.reject(Da(s));const i=Ui(s),h=await jd(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w4).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&hw(s),g}),p=await So._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function E4(s,e,n){return nr(s.app)?Promise.reject(Da(s)):T4($n(s),ql.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&hw(s),i})}function S4(s,e){return $n(s).setPersistence(e)}function N4(s,e,n,i){return $n(s).onIdTokenChanged(e,n,i)}function C4(s,e,n){return $n(s).beforeAuthStateChanged(e,n)}function R4(s,e,n,i){return $n(s).onAuthStateChanged(e,n,i)}function A4(s){return $n(s).signOut()}const Sd="__sak";class dw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const M4=1e3,I4=10;class fw extends dw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);GN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,I4):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},M4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fw.type="LOCAL";const mw=fw;class pw extends dw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pw.type="SESSION";const Og=pw;function D4(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new Wd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,h=this.handlersMap[l];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async y=>y(n.origin,u)),g=await D4(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wd.receivers=[];function Vg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class P4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const y=Vg("",20);l.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(k){const j=k;if(j.data.eventId===y)switch(j.data.status){case"ack":clearTimeout(x),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(j.data.response);break;default:clearTimeout(x),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function oa(){return window}function L4(s){oa().location.href=s}function gw(){return typeof oa().WorkerGlobalScope<"u"&&typeof oa().importScripts=="function"}async function O4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V4(){return navigator?.serviceWorker?.controller||null}function B4(){return gw()?self:null}const yw="firebaseLocalStorageDb",U4=1,Nd="firebaseLocalStorage",vw="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gd(s,e){return s.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function z4(){const s=indexedDB.deleteDatabase(yw);return new ku(s).toPromise()}function Jp(){const s=indexedDB.open(yw,U4);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Nd,{keyPath:vw})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Nd)?e(i):(i.close(),await z4(),e(await Jp()))})})}async function V1(s,e,n){const i=Gd(s,!0).put({[vw]:e,value:n});return new ku(i).toPromise()}async function F4(s,e){const n=Gd(s,!1).get(e),i=await new ku(n).toPromise();return i===void 0?null:i.value}function B1(s,e){const n=Gd(s,!0).delete(e);return new ku(n).toPromise()}const q4=800,H4=3;class bw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>H4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wd._getInstance(B4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await O4(),!this.activeServiceWorker)return;this.sender=new P4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jp();return await V1(e,Sd,"1"),await B1(e,Sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>V1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>F4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>B1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Gd(l,!1).getAll();return new ku(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bw.type="LOCAL";const $4=bw;new xu(3e4,6e4);function W4(s,e){return e?Ma(e):(Nt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Bg extends Pg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function G4(s){return uw(s.auth,new Bg(s),s.bypassAuthState)}function K4(s){const{auth:e,user:n}=s;return Nt(n,e,"internal-error"),k4(n,new Bg(s),s.bypassAuthState)}async function Y4(s){const{auth:e,user:n}=s;return Nt(n,e,"internal-error"),_4(n,new Bg(s),s.bypassAuthState)}class xw{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G4;case"linkViaPopup":case"linkViaRedirect":return Y4;case"reauthViaPopup":case"reauthViaRedirect":return K4;default:Or(this.auth,"internal-error")}}resolve(e){Va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Q4=new xu(2e3,1e4);class jl extends xw{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,jl.currentPopupAction&&jl.currentPopupAction.cancel(),jl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Nt(e,this.auth,"internal-error"),e}async onExecution(){Va(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ia(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ia(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ia(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q4.get())};e()}}jl.currentPopupAction=null;const X4="pendingRedirect",hd=new Map;class J4 extends xw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=hd.get(this.auth._key());if(!e){try{const i=await Z4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}hd.set(this.auth._key(),e)}return this.bypassAuthState||hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z4(s,e){const n=nC(e),i=tC(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function eC(s,e){hd.set(s._key(),e)}function tC(s){return Ma(s._redirectPersistence)}function nC(s){return ud(X4,s.config.apiKey,s.name)}async function sC(s,e,n=!1){if(nr(s.app))return Promise.reject(Da(s));const i=Ui(s),l=W4(i,e),h=await new J4(i,l,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const rC=600*1e3;class aC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ww(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ia(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rC&&this.cachedEventUids.clear(),this.cachedEventUids.has(U1(e))}saveEventToCache(e){this.cachedEventUids.add(U1(e)),this.lastProcessedEventTime=Date.now()}}function U1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function ww({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function iC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ww(s);default:return!1}}async function oC(s,e={}){return Fa(s,"GET","/v1/projects",e)}const lC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cC=/^https?/;async function uC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await oC(s);for(const n of e)try{if(hC(n))return}catch{}Or(s,"unauthorized-domain")}function hC(s){const e=Qp(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!cC.test(n))return!1;if(lC.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const dC=new xu(3e4,6e4);function z1(){const s=oa().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function fC(s){return new Promise((e,n)=>{function i(){z1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z1(),n(ia(s,"network-request-failed"))},timeout:dC.get()})}if(oa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(oa().gapi?.load)i();else{const l=n4("iframefcb");return oa()[l]=()=>{gapi.load?i():n(ia(s,"network-request-failed"))},aw(`${t4()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw dd=null,e})}let dd=null;function mC(s){return dd=dd||fC(s),dd}const pC=new xu(5e3,15e3),gC="__/auth/iframe",yC="emulator/auth/iframe",vC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xC(s){const e=s.config;Nt(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Mg(e,yC):`https://${s.config.authDomain}/${gC}`,i={apiKey:e.apiKey,appName:s.name,v:Io},l=bC.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${bu(i).slice(1)}`}async function wC(s){const e=await mC(s),n=oa().gapi;return Nt(n,s,"internal-error"),e.open({where:document.body,url:xC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vC,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=ia(s,"network-request-failed"),p=oa().setTimeout(()=>{u(h)},pC.get());function g(){oa().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(h)})}))}const _C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kC=500,TC=600,jC="_blank",EC="http://localhost";class F1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SC(s,e,n,i=kC,l=TC){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={..._C,width:i.toString(),height:l.toString(),top:u,left:h},y=Ds().toLowerCase();n&&(p=Jx(y)?jC:n),Qx(y)&&(e=e||EC,g.scrollbars="yes");const x=Object.entries(g).reduce((j,[L,$])=>`${j}${L}=${$},`,"");if(WN(y)&&p!=="_self")return NC(e||"",p),new F1(null);const k=window.open(e||"",p,x);Nt(k,s,"popup-blocked");try{k.focus()}catch{}return new F1(k)}function NC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const CC="__/auth/handler",RC="emulator/auth/handler",AC=encodeURIComponent("fac");async function q1(s,e,n,i,l,u){Nt(s.config.authDomain,s,"auth-domain-config-required"),Nt(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Io,eventId:l};if(e instanceof lw){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",mS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,k]of Object.entries({}))h[x]=k}if(e instanceof _u){const x=e.getScopes().filter(k=>k!=="");x.length>0&&(h.scopes=x.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await s._getAppCheckToken(),y=g?`#${AC}=${encodeURIComponent(g)}`:"";return`${MC(s)}?${bu(p).slice(1)}${y}`}function MC({config:s}){return s.emulator?Mg(s,RC):`https://${s.authDomain}/${CC}`}const wp="webStorageSupport";class IC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Og,this._completeRedirectFn=sC,this._overrideRedirectResult=eC}async _openPopup(e,n,i,l){Va(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await q1(e,n,i,Qp(),l);return SC(e,u,Vg())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await q1(e,n,i,Qp(),l);return L4(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Va(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await wC(e),i=new aC(e);return n.register("authEvent",l=>(Nt(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wp,{type:wp},l=>{const u=l?.[0]?.[wp];u!==void 0&&n(!!u),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sw()||Xx()||Dg()}}const DC=IC;var H1="@firebase/auth",$1="1.12.0";class PC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function LC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OC(s){jo(new Mi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Nt(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rw(s)},y=new JN(i,l,u,g);return l4(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),jo(new Mi("auth-internal",e=>{const n=Ui(e.getProvider("auth").getImmediate());return(i=>new PC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(H1,$1,LC(s)),aa(H1,$1,"esm2020")}const VC=300,BC=Lx("authIdTokenMaxAge")||VC;let W1=null;const UC=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>BC)return;const l=n?.token;W1!==l&&(W1=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function _w(s=Rg()){const e=Hd(s,"auth");if(e.isInitialized())return e.getImmediate();const n=o4(s,{popupRedirectResolver:DC,persistence:[$4,mw,Og]}),i=Lx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=UC(u.toString());C4(n,h,()=>h(n.currentUser)),N4(n,p=>h(p))}}const l=Ix("auth");return l&&c4(n,`http://${l}`),n}function zC(){return document.getElementsByTagName("head")?.[0]??document}ZN({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=ia("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",zC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OC("Browser");var G1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ri,kw;(function(){var s;function e(M,E){function A(){}A.prototype=E.prototype,M.F=E.prototype,M.prototype=new A,M.prototype.constructor=M,M.D=function(P,D,F){for(var I=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)I[Fe-2]=arguments[Fe];return E.prototype[D].apply(P,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,E,A){A||(A=0);const P=Array(16);if(typeof E=="string")for(var D=0;D<16;++D)P[D]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(D=0;D<16;++D)P[D]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=M.g[0],A=M.g[1],D=M.g[2];let F=M.g[3],I;I=E+(F^A&(D^F))+P[0]+3614090360&4294967295,E=A+(I<<7&4294967295|I>>>25),I=F+(D^E&(A^D))+P[1]+3905402710&4294967295,F=E+(I<<12&4294967295|I>>>20),I=D+(A^F&(E^A))+P[2]+606105819&4294967295,D=F+(I<<17&4294967295|I>>>15),I=A+(E^D&(F^E))+P[3]+3250441966&4294967295,A=D+(I<<22&4294967295|I>>>10),I=E+(F^A&(D^F))+P[4]+4118548399&4294967295,E=A+(I<<7&4294967295|I>>>25),I=F+(D^E&(A^D))+P[5]+1200080426&4294967295,F=E+(I<<12&4294967295|I>>>20),I=D+(A^F&(E^A))+P[6]+2821735955&4294967295,D=F+(I<<17&4294967295|I>>>15),I=A+(E^D&(F^E))+P[7]+4249261313&4294967295,A=D+(I<<22&4294967295|I>>>10),I=E+(F^A&(D^F))+P[8]+1770035416&4294967295,E=A+(I<<7&4294967295|I>>>25),I=F+(D^E&(A^D))+P[9]+2336552879&4294967295,F=E+(I<<12&4294967295|I>>>20),I=D+(A^F&(E^A))+P[10]+4294925233&4294967295,D=F+(I<<17&4294967295|I>>>15),I=A+(E^D&(F^E))+P[11]+2304563134&4294967295,A=D+(I<<22&4294967295|I>>>10),I=E+(F^A&(D^F))+P[12]+1804603682&4294967295,E=A+(I<<7&4294967295|I>>>25),I=F+(D^E&(A^D))+P[13]+4254626195&4294967295,F=E+(I<<12&4294967295|I>>>20),I=D+(A^F&(E^A))+P[14]+2792965006&4294967295,D=F+(I<<17&4294967295|I>>>15),I=A+(E^D&(F^E))+P[15]+1236535329&4294967295,A=D+(I<<22&4294967295|I>>>10),I=E+(D^F&(A^D))+P[1]+4129170786&4294967295,E=A+(I<<5&4294967295|I>>>27),I=F+(A^D&(E^A))+P[6]+3225465664&4294967295,F=E+(I<<9&4294967295|I>>>23),I=D+(E^A&(F^E))+P[11]+643717713&4294967295,D=F+(I<<14&4294967295|I>>>18),I=A+(F^E&(D^F))+P[0]+3921069994&4294967295,A=D+(I<<20&4294967295|I>>>12),I=E+(D^F&(A^D))+P[5]+3593408605&4294967295,E=A+(I<<5&4294967295|I>>>27),I=F+(A^D&(E^A))+P[10]+38016083&4294967295,F=E+(I<<9&4294967295|I>>>23),I=D+(E^A&(F^E))+P[15]+3634488961&4294967295,D=F+(I<<14&4294967295|I>>>18),I=A+(F^E&(D^F))+P[4]+3889429448&4294967295,A=D+(I<<20&4294967295|I>>>12),I=E+(D^F&(A^D))+P[9]+568446438&4294967295,E=A+(I<<5&4294967295|I>>>27),I=F+(A^D&(E^A))+P[14]+3275163606&4294967295,F=E+(I<<9&4294967295|I>>>23),I=D+(E^A&(F^E))+P[3]+4107603335&4294967295,D=F+(I<<14&4294967295|I>>>18),I=A+(F^E&(D^F))+P[8]+1163531501&4294967295,A=D+(I<<20&4294967295|I>>>12),I=E+(D^F&(A^D))+P[13]+2850285829&4294967295,E=A+(I<<5&4294967295|I>>>27),I=F+(A^D&(E^A))+P[2]+4243563512&4294967295,F=E+(I<<9&4294967295|I>>>23),I=D+(E^A&(F^E))+P[7]+1735328473&4294967295,D=F+(I<<14&4294967295|I>>>18),I=A+(F^E&(D^F))+P[12]+2368359562&4294967295,A=D+(I<<20&4294967295|I>>>12),I=E+(A^D^F)+P[5]+4294588738&4294967295,E=A+(I<<4&4294967295|I>>>28),I=F+(E^A^D)+P[8]+2272392833&4294967295,F=E+(I<<11&4294967295|I>>>21),I=D+(F^E^A)+P[11]+1839030562&4294967295,D=F+(I<<16&4294967295|I>>>16),I=A+(D^F^E)+P[14]+4259657740&4294967295,A=D+(I<<23&4294967295|I>>>9),I=E+(A^D^F)+P[1]+2763975236&4294967295,E=A+(I<<4&4294967295|I>>>28),I=F+(E^A^D)+P[4]+1272893353&4294967295,F=E+(I<<11&4294967295|I>>>21),I=D+(F^E^A)+P[7]+4139469664&4294967295,D=F+(I<<16&4294967295|I>>>16),I=A+(D^F^E)+P[10]+3200236656&4294967295,A=D+(I<<23&4294967295|I>>>9),I=E+(A^D^F)+P[13]+681279174&4294967295,E=A+(I<<4&4294967295|I>>>28),I=F+(E^A^D)+P[0]+3936430074&4294967295,F=E+(I<<11&4294967295|I>>>21),I=D+(F^E^A)+P[3]+3572445317&4294967295,D=F+(I<<16&4294967295|I>>>16),I=A+(D^F^E)+P[6]+76029189&4294967295,A=D+(I<<23&4294967295|I>>>9),I=E+(A^D^F)+P[9]+3654602809&4294967295,E=A+(I<<4&4294967295|I>>>28),I=F+(E^A^D)+P[12]+3873151461&4294967295,F=E+(I<<11&4294967295|I>>>21),I=D+(F^E^A)+P[15]+530742520&4294967295,D=F+(I<<16&4294967295|I>>>16),I=A+(D^F^E)+P[2]+3299628645&4294967295,A=D+(I<<23&4294967295|I>>>9),I=E+(D^(A|~F))+P[0]+4096336452&4294967295,E=A+(I<<6&4294967295|I>>>26),I=F+(A^(E|~D))+P[7]+1126891415&4294967295,F=E+(I<<10&4294967295|I>>>22),I=D+(E^(F|~A))+P[14]+2878612391&4294967295,D=F+(I<<15&4294967295|I>>>17),I=A+(F^(D|~E))+P[5]+4237533241&4294967295,A=D+(I<<21&4294967295|I>>>11),I=E+(D^(A|~F))+P[12]+1700485571&4294967295,E=A+(I<<6&4294967295|I>>>26),I=F+(A^(E|~D))+P[3]+2399980690&4294967295,F=E+(I<<10&4294967295|I>>>22),I=D+(E^(F|~A))+P[10]+4293915773&4294967295,D=F+(I<<15&4294967295|I>>>17),I=A+(F^(D|~E))+P[1]+2240044497&4294967295,A=D+(I<<21&4294967295|I>>>11),I=E+(D^(A|~F))+P[8]+1873313359&4294967295,E=A+(I<<6&4294967295|I>>>26),I=F+(A^(E|~D))+P[15]+4264355552&4294967295,F=E+(I<<10&4294967295|I>>>22),I=D+(E^(F|~A))+P[6]+2734768916&4294967295,D=F+(I<<15&4294967295|I>>>17),I=A+(F^(D|~E))+P[13]+1309151649&4294967295,A=D+(I<<21&4294967295|I>>>11),I=E+(D^(A|~F))+P[4]+4149444226&4294967295,E=A+(I<<6&4294967295|I>>>26),I=F+(A^(E|~D))+P[11]+3174756917&4294967295,F=E+(I<<10&4294967295|I>>>22),I=D+(E^(F|~A))+P[2]+718787259&4294967295,D=F+(I<<15&4294967295|I>>>17),I=A+(F^(D|~E))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+E&4294967295,M.g[1]=M.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,M.g[2]=M.g[2]+D&4294967295,M.g[3]=M.g[3]+F&4294967295}i.prototype.v=function(M,E){E===void 0&&(E=M.length);const A=E-this.blockSize,P=this.C;let D=this.h,F=0;for(;F<E;){if(D==0)for(;F<=A;)l(this,M,F),F+=this.blockSize;if(typeof M=="string"){for(;F<E;)if(P[D++]=M.charCodeAt(F++),D==this.blockSize){l(this,P),D=0;break}}else for(;F<E;)if(P[D++]=M[F++],D==this.blockSize){l(this,P),D=0;break}}this.h=D,this.o+=E},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var E=1;E<M.length-8;++E)M[E]=0;E=this.o*8;for(var A=M.length-8;A<M.length;++A)M[A]=E&255,E/=256;for(this.v(M),M=Array(16),E=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)M[E++]=this.g[A]>>>P&255;return M};function u(M,E){var A=p;return Object.prototype.hasOwnProperty.call(A,M)?A[M]:A[M]=E(M)}function h(M,E){this.h=E;const A=[];let P=!0;for(let D=M.length-1;D>=0;D--){const F=M[D]|0;P&&F==E||(A[D]=F,P=!1)}this.g=A}var p={};function g(M){return-128<=M&&M<128?u(M,function(E){return new h([E|0],E<0?-1:0)}):new h([M|0],M<0?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return k;if(M<0)return V(y(-M));const E=[];let A=1;for(let P=0;M>=A;P++)E[P]=M/A|0,A*=4294967296;return new h(E,0)}function x(M,E){if(M.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(M.charAt(0)=="-")return V(x(M.substring(1),E));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(E,8));let P=k;for(let F=0;F<M.length;F+=8){var D=Math.min(8,M.length-F);const I=parseInt(M.substring(F,F+D),E);D<8?(D=y(Math.pow(E,D)),P=P.j(D).add(y(I))):(P=P.j(A),P=P.add(y(I)))}return P}var k=g(0),j=g(1),L=g(16777216);s=h.prototype,s.m=function(){if(U(this))return-V(this).m();let M=0,E=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);M+=(P>=0?P:4294967296+P)*E,E*=4294967296}return M},s.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if($(this))return"0";if(U(this))return"-"+V(this).toString(M);const E=y(Math.pow(M,6));var A=this;let P="";for(;;){const D=_e(A,E).g;A=ne(A,D.j(E));let F=((A.g.length>0?A.g[0]:A.h)>>>0).toString(M);if(A=D,$(A))return F+P;for(;F.length<6;)F="0"+F;P=F+P}},s.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function $(M){if(M.h!=0)return!1;for(let E=0;E<M.g.length;E++)if(M.g[E]!=0)return!1;return!0}function U(M){return M.h==-1}s.l=function(M){return M=ne(this,M),U(M)?-1:$(M)?0:1};function V(M){const E=M.g.length,A=[];for(let P=0;P<E;P++)A[P]=~M.g[P];return new h(A,~M.h).add(j)}s.abs=function(){return U(this)?V(this):this},s.add=function(M){const E=Math.max(this.g.length,M.g.length),A=[];let P=0;for(let D=0;D<=E;D++){let F=P+(this.i(D)&65535)+(M.i(D)&65535),I=(F>>>16)+(this.i(D)>>>16)+(M.i(D)>>>16);P=I>>>16,F&=65535,I&=65535,A[D]=I<<16|F}return new h(A,A[A.length-1]&-2147483648?-1:0)};function ne(M,E){return M.add(V(E))}s.j=function(M){if($(this)||$(M))return k;if(U(this))return U(M)?V(this).j(V(M)):V(V(this).j(M));if(U(M))return V(this.j(V(M)));if(this.l(L)<0&&M.l(L)<0)return y(this.m()*M.m());const E=this.g.length+M.g.length,A=[];for(var P=0;P<2*E;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<M.g.length;D++){const F=this.i(P)>>>16,I=this.i(P)&65535,Fe=M.i(D)>>>16,bt=M.i(D)&65535;A[2*P+2*D]+=I*bt,X(A,2*P+2*D),A[2*P+2*D+1]+=F*bt,X(A,2*P+2*D+1),A[2*P+2*D+1]+=I*Fe,X(A,2*P+2*D+1),A[2*P+2*D+2]+=F*Fe,X(A,2*P+2*D+2)}for(M=0;M<E;M++)A[M]=A[2*M+1]<<16|A[2*M];for(M=E;M<2*E;M++)A[M]=0;return new h(A,0)};function X(M,E){for(;(M[E]&65535)!=M[E];)M[E+1]+=M[E]>>>16,M[E]&=65535,E++}function ce(M,E){this.g=M,this.h=E}function _e(M,E){if($(E))throw Error("division by zero");if($(M))return new ce(k,k);if(U(M))return E=_e(V(M),E),new ce(V(E.g),V(E.h));if(U(E))return E=_e(M,V(E)),new ce(V(E.g),E.h);if(M.g.length>30){if(U(M)||U(E))throw Error("slowDivide_ only works with positive integers.");for(var A=j,P=E;P.l(M)<=0;)A=Ve(A),P=Ve(P);var D=Ae(A,1),F=Ae(P,1);for(P=Ae(P,2),A=Ae(A,2);!$(P);){var I=F.add(P);I.l(M)<=0&&(D=D.add(A),F=I),P=Ae(P,1),A=Ae(A,1)}return E=ne(M,D.j(E)),new ce(D,E)}for(D=k;M.l(E)>=0;){for(A=Math.max(1,Math.floor(M.m()/E.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),F=y(A),I=F.j(E);U(I)||I.l(M)>0;)A-=P,F=y(A),I=F.j(E);$(F)&&(F=j),D=D.add(F),M=ne(M,I)}return new ce(D,M)}s.B=function(M){return _e(this,M).h},s.and=function(M){const E=Math.max(this.g.length,M.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)&M.i(P);return new h(A,this.h&M.h)},s.or=function(M){const E=Math.max(this.g.length,M.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)|M.i(P);return new h(A,this.h|M.h)},s.xor=function(M){const E=Math.max(this.g.length,M.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)^M.i(P);return new h(A,this.h^M.h)};function Ve(M){const E=M.g.length+1,A=[];for(let P=0;P<E;P++)A[P]=M.i(P)<<1|M.i(P-1)>>>31;return new h(A,M.h)}function Ae(M,E){const A=E>>5;E%=32;const P=M.g.length-A,D=[];for(let F=0;F<P;F++)D[F]=E>0?M.i(F+A)>>>E|M.i(F+A+1)<<32-E:M.i(F+A);return new h(D,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,kw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=x,Ri=h}).apply(typeof G1<"u"?G1:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Tw,Wc,jw,fd,Zp,Ew,Sw,Nw;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var v=0;v<d.length;++v){var w=d[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function l(d,v){if(v)e:{var w=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var Z=d[C];if(!(Z in w))break e;w=w[Z]}d=d[d.length-1],C=w[d],v=v(C),v!=C&&v!=null&&e(w,d,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(v){var w=[],C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&w.push([C,v[C]]);return w}});var u=u||{},h=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,w){return d.call.apply(d.bind,arguments)}function y(d,v,w){return y=g,y.apply(null,arguments)}function x(d,v){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function k(d,v){function w(){}w.prototype=v.prototype,d.Z=v.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(C,Z,ue){for(var Ge=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)Ge[zt-2]=arguments[zt];return v.prototype[Z].apply(C,Ge)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function L(d){const v=d.length;if(v>0){const w=Array(v);for(let C=0;C<v;C++)w[C]=d[C];return w}return[]}function $(d,v){for(let C=1;C<arguments.length;C++){const Z=arguments[C];var w=typeof Z;if(w=w!="object"?w:Z?Array.isArray(Z)?"array":w:"null",w=="array"||w=="object"&&typeof Z.length=="number"){w=d.length||0;const ue=Z.length||0;d.length=w+ue;for(let Ge=0;Ge<ue;Ge++)d[w+Ge]=Z[Ge]}else d.push(Z)}}class U{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(d){h.setTimeout(()=>{throw d},0)}function ne(){var d=M;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class X{constructor(){this.h=this.g=null}add(v,w){const C=ce.get();C.set(v,w),this.h?this.h.next=C:this.g=C,this.h=C}}var ce=new U(()=>new _e,d=>d.reset());class _e{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,Ae=!1,M=new X,E=()=>{const d=Promise.resolve(void 0);Ve=()=>{d.then(A)}};function A(){for(var d;d=ne();){try{d.h.call(d.g)}catch(w){V(w)}var v=ce;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}Ae=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};h.addEventListener("test",w,v),h.removeEventListener("test",w,v)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function Fe(d,v){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}k(Fe,D),Fe.prototype.init=function(d,v){const w=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(w=="mouseover"?v=d.fromElement:w=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Fe.Z.h.call(this)},Fe.prototype.h=function(){Fe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var bt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ke(d,v,w,C,Z){this.listener=d,this.proxy=null,this.src=v,this.type=w,this.capture=!!C,this.ha=Z,this.key=++Y,this.da=this.fa=!1}function Ie(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function le(d,v,w){for(const C in d)v.call(w,d[C],C,d)}function De(d,v){for(const w in d)v.call(void 0,d[w],w,d)}function N(d){const v={};for(const w in d)v[w]=d[w];return v}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(d,v){let w,C;for(let Z=1;Z<arguments.length;Z++){C=arguments[Z];for(w in C)d[w]=C[w];for(let ue=0;ue<B.length;ue++)w=B[ue],Object.prototype.hasOwnProperty.call(C,w)&&(d[w]=C[w])}}function pe(d){this.src=d,this.g={},this.h=0}pe.prototype.add=function(d,v,w,C,Z){const ue=d.toString();d=this.g[ue],d||(d=this.g[ue]=[],this.h++);const Ge=Me(d,v,C,Z);return Ge>-1?(v=d[Ge],w||(v.fa=!1)):(v=new ke(v,this.src,ue,!!C,Z),v.fa=w,d.push(v)),v};function Ne(d,v){const w=v.type;if(w in d.g){var C=d.g[w],Z=Array.prototype.indexOf.call(C,v,void 0),ue;(ue=Z>=0)&&Array.prototype.splice.call(C,Z,1),ue&&(Ie(v),d.g[w].length==0&&(delete d.g[w],d.h--))}}function Me(d,v,w,C){for(let Z=0;Z<d.length;++Z){const ue=d[Z];if(!ue.da&&ue.listener==v&&ue.capture==!!w&&ue.ha==C)return Z}return-1}var Ze="closure_lm_"+(Math.random()*1e6|0),qe={};function rt(d,v,w,C,Z){if(Array.isArray(v)){for(let ue=0;ue<v.length;ue++)rt(d,v[ue],w,C,Z);return null}return w=Et(w),d&&d[bt]?d.J(v,w,p(C)?!!C.capture:!1,Z):Bt(d,v,w,!1,C,Z)}function Bt(d,v,w,C,Z,ue){if(!v)throw Error("Invalid event type");const Ge=p(Z)?!!Z.capture:!!Z;let zt=It(d);if(zt||(d[Ze]=zt=new pe(d)),w=zt.add(v,w,C,Ge,ue),w.proxy)return w;if(C=Jt(),w.proxy=C,C.src=d,C.listener=w,d.addEventListener)F||(Z=Ge),Z===void 0&&(Z=!1),d.addEventListener(v.toString(),C,Z);else if(d.attachEvent)d.attachEvent(ae(v.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Jt(){function d(w){return v.call(d.src,d.listener,w)}const v=un;return d}function ct(d,v,w,C,Z){if(Array.isArray(v))for(var ue=0;ue<v.length;ue++)ct(d,v[ue],w,C,Z);else C=p(C)?!!C.capture:!!C,w=Et(w),d&&d[bt]?(d=d.i,ue=String(v).toString(),ue in d.g&&(v=d.g[ue],w=Me(v,w,C,Z),w>-1&&(Ie(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete d.g[ue],d.h--)))):d&&(d=It(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Me(v,w,C,Z)),(w=d>-1?v[d]:null)&&gt(w))}function gt(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[bt])Ne(v.i,d);else{var w=d.type,C=d.proxy;v.removeEventListener?v.removeEventListener(w,C,d.capture):v.detachEvent?v.detachEvent(ae(w),C):v.addListener&&v.removeListener&&v.removeListener(C),(w=It(v))?(Ne(w,d),w.h==0&&(w.src=null,v[Ze]=null)):Ie(d)}}}function ae(d){return d in qe?qe[d]:qe[d]="on"+d}function un(d,v){if(d.da)d=!0;else{v=new Fe(v,this);const w=d.listener,C=d.ha||d.src;d.fa&&gt(d),d=w.call(C,v)}return d}function It(d){return d=d[Ze],d instanceof pe?d:null}var _t="__closure_events_fn_"+(Math.random()*1e9>>>0);function Et(d){return typeof d=="function"?d:(d[_t]||(d[_t]=function(v){return d.handleEvent(v)}),d[_t])}function ut(){P.call(this),this.i=new pe(this),this.M=this,this.G=null}k(ut,P),ut.prototype[bt]=!0,ut.prototype.removeEventListener=function(d,v,w,C){ct(this,d,v,w,C)};function Je(d,v){var w,C=d.G;if(C)for(w=[];C;C=C.G)w.push(C);if(d=d.M,C=v.type||v,typeof v=="string")v=new D(v,d);else if(v instanceof D)v.target=v.target||d;else{var Z=v;v=new D(C,d),ie(v,Z)}Z=!0;let ue,Ge;if(w)for(Ge=w.length-1;Ge>=0;Ge--)ue=v.g=w[Ge],Z=Gt(ue,C,!0,v)&&Z;if(ue=v.g=d,Z=Gt(ue,C,!0,v)&&Z,Z=Gt(ue,C,!1,v)&&Z,w)for(Ge=0;Ge<w.length;Ge++)ue=v.g=w[Ge],Z=Gt(ue,C,!1,v)&&Z}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const w=d.g[v];for(let C=0;C<w.length;C++)Ie(w[C]);delete d.g[v],d.h--}}this.G=null},ut.prototype.J=function(d,v,w,C){return this.i.add(String(d),v,!1,w,C)},ut.prototype.K=function(d,v,w,C){return this.i.add(String(d),v,!0,w,C)};function Gt(d,v,w,C){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let Z=!0;for(let ue=0;ue<v.length;++ue){const Ge=v[ue];if(Ge&&!Ge.da&&Ge.capture==w){const zt=Ge.listener,ns=Ge.ha||Ge.src;Ge.fa&&Ne(d.i,Ge),Z=zt.call(ns,C)!==!1&&Z}}return Z&&!C.defaultPrevented}function Qn(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(d,v||0)}function Mt(d){d.g=Qn(()=>{d.g=null,d.i&&(d.i=!1,Mt(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Pt extends P{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Mt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(d){P.call(this),this.h=d,this.g={}}k(Dn,P);var qt=[];function bn(d){le(d.g,function(v,w){this.g.hasOwnProperty(w)&&gt(v)},d),d.g={}}Dn.prototype.N=function(){Dn.Z.N.call(this),bn(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var O=h.JSON.stringify,J=h.JSON.parse,ye=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function He(){}function Ye(){}var Be={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ke(){D.call(this,"d")}k(Ke,D);function We(){D.call(this,"c")}k(We,D);var Le={},xe=null;function ze(){return xe=xe||new ut}Le.Ia="serverreachability";function at(d){D.call(this,Le.Ia,d)}k(at,D);function St(d){const v=ze();Je(v,new at(v))}Le.STAT_EVENT="statevent";function Wt(d,v){D.call(this,Le.STAT_EVENT,d),this.stat=v}k(Wt,D);function Qe(d){const v=ze();Je(v,new Wt(v,d))}Le.Ja="timingevent";function ht(d,v){D.call(this,Le.Ja,d),this.size=v}k(ht,D);function dt(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function Rt(){this.g=!0}Rt.prototype.ua=function(){this.g=!1};function Lt(d,v,w,C,Z,ue){d.info(function(){if(d.g)if(ue){var Ge="",zt=ue.split("&");for(let xn=0;xn<zt.length;xn++){var ns=zt[xn].split("=");if(ns.length>1){const zn=ns[0];ns=ns[1];const lr=zn.split("_");Ge=lr.length>=2&&lr[1]=="type"?Ge+(zn+"="+ns+"&"):Ge+(zn+"=redacted&")}}}else Ge=null;else Ge=ue;return"XMLHTTP REQ ("+C+") [attempt "+Z+"]: "+v+`
`+w+`
`+Ge})}function kt(d,v,w,C,Z,ue,Ge){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+Z+"]: "+v+`
`+w+`
`+ue+" "+Ge})}function Kt(d,v,w,C){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+an(d,w)+(C?" "+C:"")})}function Ht(d,v){d.info(function(){return"TIMEOUT: "+v})}Rt.prototype.info=function(){};function an(d,v){if(!d.g)return v;if(!v)return null;try{const ue=JSON.parse(v);if(ue){for(d=0;d<ue.length;d++)if(Array.isArray(ue[d])){var w=ue[d];if(!(w.length<2)){var C=w[1];if(Array.isArray(C)&&!(C.length<1)){var Z=C[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let Ge=1;Ge<C.length;Ge++)C[Ge]=""}}}}return O(ue)}catch{return v}}var hn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mn;function H(){}k(H,He),H.prototype.g=function(){return new XMLHttpRequest},Mn=new H;function ge(d){return encodeURIComponent(String(d))}function ve(d){var v=1;d=d.split(":");const w=[];for(;v>0&&d.length;)w.push(d.shift()),v--;return d.length&&w.push(d.join(":")),w}function we(d,v,w,C){this.j=d,this.i=v,this.l=w,this.S=C||1,this.V=new Dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new me}function me(){this.i=null,this.g="",this.h=!1}var Xe={},yt={};function nt(d,v,w){d.M=1,d.A=Zt(Re(v)),d.u=w,d.R=!0,mt(d,null)}function mt(d,v){d.F=Date.now(),Wn(d),d.B=Re(d.A);var w=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),Cs(w.i,"t",C),d.C=0,w=d.j.L,d.h=new me,d.g=Bu(d.j,w?v:null,!d.u),d.P>0&&(d.O=new Pt(y(d.Y,d,d.g),d.P)),v=d.V,w=d.g,C=d.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(qt[0]=Z.toString()),Z=qt);for(let ue=0;ue<Z.length;ue++){const Ge=rt(w,Z[ue],C||v.handleEvent,!1,v.h||v);if(!Ge)break;v.g[Ge.key]=Ge}v=d.J?N(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),St(),Lt(d.i,d.v,d.B,d.l,d.S,d.u)}we.prototype.ba=function(d){d=d.target;const v=this.O;v&&Er(d)==3?v.j():this.Y(d)},we.prototype.Y=function(d){try{if(d==this.g)e:{const zt=Er(this.g),ns=this.g.ya(),xn=this.g.ca();if(!(zt<3)&&(zt!=3||this.g&&(this.h.h||this.g.la()||bs(this.g)))){this.K||zt!=4||ns==7||(ns==8||xn<=0?St(3):St(2)),mn(this);var v=this.g.ca();this.X=v;var w=vt(this);if(this.o=v==200,kt(this.i,this.v,this.B,this.l,this.S,zt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var C,Z=this.g;if((C=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(C)){var ue=C;break t}}ue=null}if(d=ue)Kt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,T(this,d);else{this.o=!1,this.m=3,Qe(12),he(this),q(this);break e}}if(this.R){d=!0;let zn;for(;!this.K&&this.C<w.length;)if(zn=Ns(this,w),zn==yt){zt==4&&(this.m=4,Qe(14),d=!1),Kt(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==Xe){this.m=4,Qe(15),Kt(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else Kt(this.i,this.l,zn,null),T(this,zn);if(on(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||w.length!=0||this.h.h||(this.m=1,Qe(16),d=!1),this.o=this.o&&d,!d)Kt(this.i,this.l,w,"[Invalid Chunked Response]"),he(this),q(this);else if(w.length>0&&!this.W){this.W=!0;var Ge=this.j;Ge.g==this&&Ge.aa&&!Ge.P&&(Ge.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),ec(Ge),Ge.P=!0,Qe(11))}}else Kt(this.i,this.l,w,null),T(this,w);zt==4&&he(this),this.o&&!this.K&&(zt==4?Pu(this.j,this):(this.o=!1,Wn(this)))}else ma(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,Qe(12)):(this.m=0,Qe(13)),he(this),q(this)}}}catch{}};function vt(d){if(!on(d))return d.g.la();const v=bs(d.g);if(v==="")return"";let w="";const C=v.length,Z=Er(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return he(d),q(d),"";d.h.i=new h.TextDecoder}for(let ue=0;ue<C;ue++)d.h.h=!0,w+=d.h.i.decode(v[ue],{stream:!(Z&&ue==C-1)});return v.length=0,d.h.g+=w,d.C=0,d.h.g}function on(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Ns(d,v){var w=d.C,C=v.indexOf(`
`,w);return C==-1?yt:(w=Number(v.substring(w,C)),isNaN(w)?Xe:(C+=1,C+w>v.length?yt:(v=v.slice(C,C+w),d.C=C+w,v)))}we.prototype.cancel=function(){this.K=!0,he(this)};function Wn(d){d.T=Date.now()+d.H,Xn(d,d.H)}function Xn(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=dt(y(d.aa,d),v)}function mn(d){d.D&&(h.clearTimeout(d.D),d.D=null)}we.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ht(this.i,this.B),this.M!=2&&(St(),Qe(17)),he(this),this.m=2,q(this)):Xn(this,this.T-d)};function q(d){d.j.I==0||d.K||Pu(d.j,d)}function he(d){mn(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,bn(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function T(d,v){try{var w=d.j;if(w.I!=0&&(w.g==d||Ue(w.h,d))){if(!d.L&&Ue(w.h,d)&&w.I==3){try{var C=w.Ba.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var Z=C;if(Z[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)Uo(w),Ya(w);else break e;Qi(w),Qe(18)}}else w.xa=Z[1],0<w.xa-w.K&&Z[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=dt(y(w.Va,w),6e3));$e(w.h)<=1&&w.ta&&(w.ta=void 0)}else Yr(w,11)}else if((d.L||w.g==d)&&Uo(w),!I(v))for(Z=w.Ba.g.parse(v),v=0;v<Z.length;v++){let xn=Z[v];const zn=xn[0];if(!(zn<=w.K))if(w.K=zn,xn=xn[1],w.I==2)if(xn[0]=="c"){w.M=xn[1],w.ba=xn[2];const lr=xn[3];lr!=null&&(w.ka=lr,w.j.info("VER="+w.ka));const Qr=xn[4];Qr!=null&&(w.za=Qr,w.j.info("SVER="+w.za));const Sr=xn[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(C=1.5*Sr,w.O=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Nr=d.g;if(Nr){const Xi=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xi){var ue=C.h;ue.g||Xi.indexOf("spdy")==-1&&Xi.indexOf("quic")==-1&&Xi.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Oe(ue,ue.h),ue.h=null))}if(C.G){const zo=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;zo&&(C.wa=zo,ot(C.J,C.G,zo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),C=w;var Ge=d;if(C.na=Vu(C,C.L?C.ba:null,C.W),Ge.L){Ut(C.h,Ge);var zt=Ge,ns=C.O;ns&&(zt.H=ns),zt.D&&(mn(zt),Wn(zt)),C.g=Ge}else Iu(C);w.i.length>0&&Kr(w)}else xn[0]!="stop"&&xn[0]!="close"||Yr(w,7);else w.I==3&&(xn[0]=="stop"||xn[0]=="close"?xn[0]=="stop"?Yr(w,7):Jl(w):xn[0]!="noop"&&w.l&&w.l.qa(xn),w.A=0)}}St(4)}catch{}}var R=class{constructor(d,v){this.g=d,this.map=v}};function K(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ee(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function $e(d){return d.h?1:d.g?d.g.size:0}function Ue(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Oe(d,v){d.g?d.g.add(v):d.h=v}function Ut(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}K.prototype.cancel=function(){if(this.i=Tt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Tt(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const w of d.g.values())v=v.concat(w.G);return v}return L(d.i)}var G=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fe(d,v){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const C=d[w].indexOf("=");let Z,ue=null;C>=0?(Z=d[w].substring(0,C),ue=d[w].substring(C+1)):Z=d[w],v(Z,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function oe(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof oe?(this.l=d.l,Pe(this,d.j),this.o=d.o,this.g=d.g,it(this,d.u),this.h=d.h,At(this,Hr(d.i)),this.m=d.m):d&&(v=String(d).match(G))?(this.l=!1,Pe(this,v[1]||"",!0),this.o=Un(v[2]||""),this.g=Un(v[3]||"",!0),it(this,v[4]),this.h=Un(v[5]||"",!0),At(this,v[6]||"",!0),this.m=Un(v[7]||"")):(this.l=!1,this.i=new Gn(null,this.l))}oe.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(pn(v,qa,!0),":");var w=this.g;return(w||v=="file")&&(d.push("//"),(v=this.o)&&d.push(pn(v,qa,!0),"@"),d.push(ge(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(pn(w,w.charAt(0)=="/"?Ha:Hi,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",pn(w,dn)),d.join("")},oe.prototype.resolve=function(d){const v=Re(this);let w=!!d.j;w?Pe(v,d.j):w=!!d.o,w?v.o=d.o:w=!!d.g,w?v.g=d.g:w=d.u!=null;var C=d.h;if(w)it(v,d.u);else if(w=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var Z=v.h.lastIndexOf("/");Z!=-1&&(C=v.h.slice(0,Z+1)+C)}if(Z=C,Z==".."||Z==".")C="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){C=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const ue=[];for(let Ge=0;Ge<Z.length;){const zt=Z[Ge++];zt=="."?C&&Ge==Z.length&&ue.push(""):zt==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),C&&Ge==Z.length&&ue.push("")):(ue.push(zt),C=!0)}C=ue.join("/")}else C=Z}return w?v.h=C:w=d.i.toString()!=="",w?At(v,Hr(d.i)):w=!!d.m,w&&(v.m=d.m),v};function Re(d){return new oe(d)}function Pe(d,v,w){d.j=w?Un(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function it(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function At(d,v,w){v instanceof Gn?(d.i=v,$a(d.i,d.l)):(w||(v=pn(v,wr)),d.i=new Gn(v,d.l))}function ot(d,v,w){d.i.set(v,w)}function Zt(d){return ot(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Un(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function pn(d,v,w){return typeof d=="string"?(d=encodeURI(d).replace(v,On),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function On(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var qa=/[#\/\?@]/g,Hi=/[#\?:]/g,Ha=/[#\?]/g,wr=/[#\?@]/g,dn=/#/g;function Gn(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Kn(d){d.g||(d.g=new Map,d.h=0,d.i&&fe(d.i,function(v,w){d.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}s=Gn.prototype,s.add=function(d,v){Kn(this),this.i=null,d=Tr(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(v),this.h+=1,this};function _r(d,v){Kn(d),v=Tr(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function kr(d,v){return Kn(d),v=Tr(d,v),d.g.has(v)}s.forEach=function(d,v){Kn(this),this.g.forEach(function(w,C){w.forEach(function(Z){d.call(v,Z,C,this)},this)},this)};function vs(d,v){Kn(d);let w=[];if(typeof v=="string")kr(d,v)&&(w=w.concat(d.g.get(Tr(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)w=w.concat(d[v]);return w}s.set=function(d,v){return Kn(this),this.i=null,d=Tr(this,d),kr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=vs(this,d),d.length>0?String(d[0]):v):v};function Cs(d,v,w){_r(d,v),w.length>0&&(d.i=null,d.g.set(Tr(d,v),L(w)),d.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let C=0;C<v.length;C++){var w=v[C];const Z=ge(w);w=vs(this,w);for(let ue=0;ue<w.length;ue++){let Ge=Z;w[ue]!==""&&(Ge+="="+ge(w[ue])),d.push(Ge)}}return this.i=d.join("&")};function Hr(d){const v=new Gn;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Tr(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function $a(d,v){v&&!d.j&&(Kn(d),d.i=null,d.g.forEach(function(w,C){const Z=C.toLowerCase();C!=Z&&(_r(this,C),Cs(this,Z,w))},d)),d.j=v}function Ps(d,v){const w=new Rt;if(h.Image){const C=new Image;C.onload=x(ir,w,"TestLoadImage: loaded",!0,v,C),C.onerror=x(ir,w,"TestLoadImage: error",!1,v,C),C.onabort=x(ir,w,"TestLoadImage: abort",!1,v,C),C.ontimeout=x(ir,w,"TestLoadImage: timeout",!1,v,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else v(!1)}function Yl(d,v){const w=new Rt,C=new AbortController,Z=setTimeout(()=>{C.abort(),ir(w,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:C.signal}).then(ue=>{clearTimeout(Z),ue.ok?ir(w,"TestPingServer: ok",!0,v):ir(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Z),ir(w,"TestPingServer: error",!1,v)})}function ir(d,v,w,C,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),C(w)}catch{}}function Wa(){this.g=new ye}function $r(d){this.i=d.Sb||null,this.h=d.ab||!1}k($r,He),$r.prototype.g=function(){return new $i(this.i,this.h)};function $i(d,v){ut.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k($i,ut),s=$i.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,jr(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ga(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,jr(this)),this.g&&(this.readyState=3,jr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Ga(this):jr(this),this.readyState==3&&Oo(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Ga(this))},s.Na=function(d){this.g&&(this.response=d,Ga(this))},s.ga=function(){this.g&&Ga(this)};function Ga(d){d.readyState=4,d.l=null,d.j=null,d.B=null,jr(d)}s.setRequestHeader=function(d,v){this.A.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=v.next();return d.join(`\r
`)};function jr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function or(d){let v="";return le(d,function(w,C){v+=C,v+=":",v+=w,v+=`\r
`}),v}function Wi(d,v,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=or(w),typeof d=="string"?w!=null&&ge(w):ot(d,v,w))}function En(d){ut.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(En,ut);var Wr=/^https?$/i,Ql=["POST","PUT"];s=En.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,v,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mn.g(),this.g.onreadystatechange=j(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(ue){Gi(this,ue);return}if(d=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var Z in C)w.set(Z,C[Z]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ue of C.keys())w.set(ue,C.get(ue));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(ue=>ue.toLowerCase()=="content-type"),Z=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Ql,v,void 0)>=0)||C||Z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Ge]of w)this.g.setRequestHeader(ue,Ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ue){Gi(this,ue)}};function Gi(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Xl(d),fa(d)}function Xl(d){d.A||(d.A=!0,Je(d,"complete"),Je(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Je(this,"complete"),Je(this,"abort"),fa(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fa(this,!0)),En.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ki(this):this.Xa())},s.Xa=function(){Ki(this)};function Ki(d){if(d.h&&typeof u<"u"){if(d.v&&Er(d)==4)setTimeout(d.Ca.bind(d),0);else if(Je(d,"readystatechange"),Er(d)==4){d.h=!1;try{const ue=d.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var C;if(C=ue===0){let Ge=String(d.D).match(G)[1]||null;!Ge&&h.self&&h.self.location&&(Ge=h.self.location.protocol.slice(0,-1)),C=!Wr.test(Ge?Ge.toLowerCase():"")}w=C}if(w)Je(d,"complete"),Je(d,"success");else{d.o=6;try{var Z=Er(d)>2?d.g.statusText:""}catch{Z=""}d.l=Z+" ["+d.ca()+"]",Xl(d)}}finally{fa(d)}}}}function fa(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,v||Je(d,"ready");try{w.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Er(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Er(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),J(v)}};function bs(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ma(d){const v={};d=(d.g&&Er(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(I(d[C]))continue;var w=ve(d[C]);const Z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ue=v[Z]||[];v[Z]=ue,ue.push(w)}De(v,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(d,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||v}function Ka(d){this.za=0,this.i=[],this.j=new Rt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gr("baseRetryDelayMs",5e3,d),this.Za=Gr("retryDelaySeedMs",1e4,d),this.Ta=Gr("forwardChannelMaxRetries",2,d),this.va=Gr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new K(d&&d.concurrentRequestLimit),this.Ba=new Wa,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ka.prototype,s.ka=8,s.I=1,s.connect=function(d,v,w,C){Qe(0),this.W=d,this.H=v||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.J=Vu(this,null,this.W),Kr(this)};function Jl(d){if(Vo(d),d.I==3){var v=d.V++,w=Re(d.J);if(ot(w,"SID",d.M),ot(w,"RID",v),ot(w,"TYPE","terminate"),Yi(d,w),v=new we(d,d.j,v),v.M=2,v.A=Zt(Re(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&h.Image&&(new Image().src=v.A,w=!0),w||(v.g=Bu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Wn(v)}Ou(d)}function Ya(d){d.g&&(ec(d),d.g.cancel(),d.g=null)}function Vo(d){Ya(d),d.v&&(h.clearTimeout(d.v),d.v=null),Uo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Kr(d){if(!ee(d.h)&&!d.m){d.m=!0;var v=d.Ea;Ve||E(),Ae||(Ve(),Ae=!0),M.add(v,d),d.D=0}}function Bo(d,v){return $e(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=dt(y(d.Ea,d,v),Lu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const Z=new we(this,this.j,d);let ue=this.o;if(this.U&&(ue?(ue=N(ue),ie(ue,this.U)):ue=this.U),this.u!==null||this.R||(Z.J=ue,ue=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Mu(this,Z,v),w=Re(this.J),ot(w,"RID",d),ot(w,"CVER",22),this.G&&ot(w,"X-HTTP-Session-Id",this.G),Yi(this,w),ue&&(this.R?v="headers="+ge(or(ue))+"&"+v:this.u&&Wi(w,this.u,ue)),Oe(this.h,Z),this.Ra&&ot(w,"TYPE","init"),this.S?(ot(w,"$req",v),ot(w,"SID","null"),Z.U=!0,nt(Z,w,null)):nt(Z,w,v),this.I=2}}else this.I==3&&(d?Zl(this,d):this.i.length==0||ee(this.h)||Zl(this))};function Zl(d,v){var w;v?w=v.l:w=d.V++;const C=Re(d.J);ot(C,"SID",d.M),ot(C,"RID",w),ot(C,"AID",d.K),Yi(d,C),d.u&&d.o&&Wi(C,d.u,d.o),w=new we(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),v&&(d.i=v.G.concat(d.i)),v=Mu(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Oe(d.h,w),nt(w,C,v)}function Yi(d,v){d.H&&le(d.H,function(w,C){ot(v,C,w)}),d.l&&le({},function(w,C){ot(v,C,w)})}function Mu(d,v,w){w=Math.min(d.i.length,w);const C=d.l?y(d.l.Ka,d.l,d):null;e:{var Z=d.i;let zt=-1;for(;;){const ns=["count="+w];zt==-1?w>0?(zt=Z[0].g,ns.push("ofs="+zt)):zt=0:ns.push("ofs="+zt);let xn=!0;for(let zn=0;zn<w;zn++){var ue=Z[zn].g;const lr=Z[zn].map;if(ue-=zt,ue<0)zt=Math.max(0,Z[zn].g-100),xn=!1;else try{ue="req"+ue+"_"||"";try{var Ge=lr instanceof Map?lr:Object.entries(lr);for(const[Qr,Sr]of Ge){let Nr=Sr;p(Sr)&&(Nr=O(Sr)),ns.push(ue+Qr+"="+encodeURIComponent(Nr))}}catch(Qr){throw ns.push(ue+"type="+encodeURIComponent("_badmap")),Qr}}catch{C&&C(lr)}}if(xn){Ge=ns.join("&");break e}}Ge=void 0}return d=d.i.splice(0,w),v.G=d,Ge}function Iu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;Ve||E(),Ae||(Ve(),Ae=!0),M.add(v,d),d.A=0}}function Qi(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=dt(y(d.Da,d),Lu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=dt(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qe(10),Ya(this),Du(this))};function ec(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Du(d){d.g=new we(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Re(d.na);ot(v,"RID","rpc"),ot(v,"SID",d.M),ot(v,"AID",d.K),ot(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&ot(v,"TO",d.ia),ot(v,"TYPE","xmlhttp"),Yi(d,v),d.u&&d.o&&Wi(v,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Zt(Re(v)),w.u=null,w.R=!0,mt(w,d)}s.Va=function(){this.C!=null&&(this.C=null,Ya(this),Qi(this),Qe(19))};function Uo(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Pu(d,v){var w=null;if(d.g==v){Uo(d),ec(d),d.g=null;var C=2}else if(Ue(d.h,v))w=v.G,Ut(d.h,v),C=1;else return;if(d.I!=0){if(v.o)if(C==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var Z=d.D;C=ze(),Je(C,new ht(C,w)),Kr(d)}else Iu(d);else if(Z=v.m,Z==3||Z==0&&v.X>0||!(C==1&&Bo(d,v)||C==2&&Qi(d)))switch(w&&w.length>0&&(v=d.h,v.i=v.i.concat(w)),Z){case 1:Yr(d,5);break;case 4:Yr(d,10);break;case 3:Yr(d,6);break;default:Yr(d,2)}}}function Lu(d,v){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*v}function Yr(d,v){if(d.j.info("Error code "+v),v==2){var w=y(d.bb,d),C=d.Ua;const Z=!C;C=new oe(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Pe(C,"https"),Zt(C),Z?Ps(C.toString(),w):Yl(C.toString(),w)}else Qe(2);d.I=0,d.l&&d.l.pa(v),Ou(d),Vo(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Qe(2)):(this.j.info("Failed to ping google.com"),Qe(1))};function Ou(d){if(d.I=0,d.ja=[],d.l){const v=Tt(d.h);(v.length!=0||d.i.length!=0)&&($(d.ja,v),$(d.ja,d.i),d.h.i.length=0,L(d.i),d.i.length=0),d.l.oa()}}function Vu(d,v,w){var C=w instanceof oe?Re(w):new oe(w);if(C.g!="")v&&(C.g=v+"."+C.g),it(C,C.u);else{var Z=h.location;C=Z.protocol,v=v?v+"."+Z.hostname:Z.hostname,Z=+Z.port;const ue=new oe(null);C&&Pe(ue,C),v&&(ue.g=v),Z&&it(ue,Z),w&&(ue.h=w),C=ue}return w=d.G,v=d.wa,w&&v&&ot(C,w,v),ot(C,"VER",d.ka),Yi(d,C),C}function Bu(d,v,w){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new En(new $r({ab:w})):new En(d.ma),v.Fa(d.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uu(){}s=Uu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Qa(){}Qa.prototype.g=function(d,v){return new Ls(d,v)};function Ls(d,v){ut.call(this),this.g=new Ka(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!I(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new pa(this)}k(Ls,ut),Ls.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ls.prototype.close=function(){Jl(this.g)},Ls.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=O(d),d=w);v.i.push(new R(v.Ya++,d)),v.I==3&&Kr(v)},Ls.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,Ls.Z.N.call(this)};function zu(d){Ke.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const w in v){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}k(zu,Ke);function Fu(){We.call(this),this.status=1}k(Fu,We);function pa(d){this.g=d}k(pa,Uu),pa.prototype.ra=function(){Je(this.g,"a")},pa.prototype.qa=function(d){Je(this.g,new zu(d))},pa.prototype.pa=function(d){Je(this.g,new Fu)},pa.prototype.oa=function(){Je(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,Ls.prototype.send=Ls.prototype.o,Ls.prototype.open=Ls.prototype.m,Ls.prototype.close=Ls.prototype.close,Nw=function(){return new Qa},Sw=function(){return ze()},Ew=Le,Zp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hn.NO_ERROR=0,hn.TIMEOUT=8,hn.HTTP_ERROR=6,fd=hn,fn.COMPLETE="complete",jw=fn,Ye.EventType=Be,Be.OPEN="a",Be.CLOSE="b",Be.ERROR="c",Be.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Wc=Ye,En.prototype.listenOnce=En.prototype.K,En.prototype.getLastError=En.prototype.Ha,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.ca,En.prototype.getResponseJson=En.prototype.La,En.prototype.getResponseText=En.prototype.la,En.prototype.send=En.prototype.ea,En.prototype.setWithCredentials=En.prototype.Fa,Tw=En}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});class Ms{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ms.UNAUTHENTICATED=new Ms(null),Ms.GOOGLE_CREDENTIALS=new Ms("google-credentials-uid"),Ms.FIRST_PARTY=new Ms("first-party-uid"),Ms.MOCK_USER=new Ms("mock-user");let Hl="12.8.0";function FC(s){Hl=s}const No=new Sg("@firebase/firestore");function wl(){return No.logLevel}function st(s,...e){if(No.logLevel<=nn.DEBUG){const n=e.map(Ug);No.debug(`Firestore (${Hl}): ${s}`,...n)}}function Ba(s,...e){if(No.logLevel<=nn.ERROR){const n=e.map(Ug);No.error(`Firestore (${Hl}): ${s}`,...n)}}function Dl(s,...e){if(No.logLevel<=nn.WARN){const n=e.map(Ug);No.warn(`Firestore (${Hl}): ${s}`,...n)}}function Ug(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Ct(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Cw(s,i,n)}function Cw(s,e,n){let i=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ba(i),new Error(i)}function kn(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||Cw(e,l,i)}function Vt(s,e){return s}const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends da{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Rw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ms.UNAUTHENTICATED)))}shutdown(){}}class HC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $C{constructor(e){this.t=e,this.currentUser=Ms.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){kn(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new Pa;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Pa,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Pa)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(kn(typeof i.accessToken=="string",31837,{l:i}),new Rw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kn(e===null||typeof e=="string",2055,{h:e}),new Ms(e)}}class WC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ms.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class GC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new WC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ms.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class K1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){kn(this.o===void 0,3512);const i=u=>{u.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,st("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new K1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(kn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new K1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function YC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class zg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=YC(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function sn(s,e){return s<e?-1:s>e?1:0}function eg(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return _p(l)===_p(u)?sn(l,u):_p(l)?1:-1}return sn(s.length,e.length)}const QC=55296,XC=57343;function _p(s){const e=s.charCodeAt(0);return e>=QC&&e<=XC}function Pl(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}const Y1="__name__";class na{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ct(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ct(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return na.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof na?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=na.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return sn(e.length,n.length)}static compareSegments(e,n){const i=na.isNumericId(e),l=na.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?na.extractNumericId(e).compare(na.extractNumericId(n)):eg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class Pn extends na{construct(e,n,i){return new Pn(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new tt(je.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new Pn(n)}static emptyPath(){return new Pn([])}}const JC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class js extends na{construct(e,n,i){return new js(e,n,i)}static isValidIdentifier(e){return JC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),js.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Y1}static keyField(){return new js([Y1])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new tt(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new tt(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new tt(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(h=!h,l++):p!=="."||h?(i+=p,l++):(u(),l++)}if(u(),h)throw new tt(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new js(n)}static emptyPath(){return new js([])}}class wt{constructor(e){this.path=e}static fromPath(e){return new wt(Pn.fromString(e))}static fromName(e){return new wt(Pn.fromString(e).popFirst(5))}static empty(){return new wt(Pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new Pn(e.slice()))}}function Aw(s,e,n){if(!n)throw new tt(je.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function ZC(s,e,n,i){if(e===!0&&i===!0)throw new tt(je.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Q1(s){if(!wt.isDocumentKey(s))throw new tt(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function X1(s){if(wt.isDocumentKey(s))throw new tt(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Mw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Kd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ct(12329,{type:typeof s})}function Vr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new tt(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kd(s);throw new tt(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function eR(s,e){if(e<=0)throw new tt(je.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function fs(s,e){const n={typeString:s};return e&&(n.value=e),n}function Tu(s,e){if(!Mw(s))throw new tt(je.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const h=s[i];if(l&&typeof h!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new tt(je.INVALID_ARGUMENT,n);return!0}const J1=-62135596800,Z1=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Z1);return new pt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new tt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new tt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<J1)throw new tt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z1}_compareTo(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-J1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:fs("string",pt._jsonSchemaVersion),seconds:fs("number"),nanoseconds:fs("number")};class Dt{static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new pt(0,0))}static max(){return new Dt(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ou=-1;function tR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=Dt.fromTimestamp(i===1e9?new pt(n+1,0):new pt(n,i));return new Ii(l,wt.empty(),e)}function nR(s){return new Ii(s.readTime,s.key,ou)}class Ii{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ii(Dt.min(),wt.empty(),ou)}static max(){return new Ii(Dt.max(),wt.empty(),ou)}}function sR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=wt.comparator(s.documentKey,e.documentKey),n!==0?n:sn(s.largestBatchId,e.largestBatchId))}const rR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $l(s){if(s.code!==je.FAILED_PRECONDITION||s.message!==rR)throw s;st("LocalStore","Unexpectedly lost primary lease")}class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ce(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ce?n:Ce.resolve(n)}catch(n){return Ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ce.reject(n)}static resolve(e){return new Ce(((n,i)=>{n(e)}))}static reject(e){return new Ce(((n,i)=>{i(e)}))}static waitFor(e){return new Ce(((n,i)=>{let l=0,u=0,h=!1;e.forEach((p=>{++l,p.next((()=>{++u,h&&u===l&&n()}),(g=>i(g)))})),h=!0,u===l&&n()}))}static or(e){let n=Ce.resolve(!1);for(const i of e)n=n.next((l=>l?Ce.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new Ce(((i,l)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((x=>{h[y]=x,++p,p===u&&i(h)}),(x=>l(x)))}}))}static doWhile(e,n){return new Ce(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function iR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wl(s){return s.name==="IndexedDbTransactionError"}class Yd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yd.ce=-1;const Fg=-1;function Qd(s){return s==null}function Cd(s){return s===0&&1/s==-1/0}function oR(s){return typeof s=="number"&&Number.isInteger(s)&&!Cd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Iw="";function lR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=e2(e)),e=cR(s.get(n),e);return e2(e)}function cR(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case Iw:n+="";break;default:n+=u}}return n}function e2(s){return s+Iw+""}function t2(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function zi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Dw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Yn{constructor(e,n){this.comparator=e,this.root=n||Ts.EMPTY}insert(e,n){return new Yn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ts.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ts.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yh(this.root,e,this.comparator,!0)}}class Yh{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ts{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??Ts.RED,this.left=l??Ts.EMPTY,this.right=u??Ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new Ts(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Ts.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ct(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ct(27949);return e+(this.isRed()?0:1)}}Ts.EMPTY=null,Ts.RED=!0,Ts.BLACK=!1;Ts.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct(57766)}get value(){throw Ct(16141)}get color(){throw Ct(16727)}get left(){throw Ct(29726)}get right(){throw Ct(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new Ts(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ps{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new n2(this.data.getIterator())}getIteratorFrom(e){return new n2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof ps)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ps(this.comparator);return n.data=e,n}}class n2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class sr{constructor(e){this.fields=e,e.sort(js.comparator)}static empty(){return new sr([])}unionWith(e){let n=new ps(js.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class Pw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Es{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Pw("Invalid base64 string: "+u):u}})(e);return new Es(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new Es(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Es.EMPTY_BYTE_STRING=new Es("");const uR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(s){if(kn(!!s,39018),typeof s=="string"){let e=0;const n=uR.exec(s);if(kn(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:as(s.seconds),nanos:as(s.nanos)}}function as(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Pi(s){return typeof s=="string"?Es.fromBase64String(s):Es.fromUint8Array(s)}const Lw="server_timestamp",Ow="__type__",Vw="__previous_value__",Bw="__local_write_time__";function qg(s){return(s?.mapValue?.fields||{})[Ow]?.stringValue===Lw}function Xd(s){const e=s.mapValue.fields[Vw];return qg(e)?Xd(e):e}function lu(s){const e=Di(s.mapValue.fields[Bw].timestampValue);return new pt(e.seconds,e.nanos)}class hR{constructor(e,n,i,l,u,h,p,g,y,x,k){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x,this.apiKey=k}}const Rd="(default)";class cu{constructor(e,n){this.projectId=e,this.database=n||Rd}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===Rd}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}function dR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new tt(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(s.options.projectId,e)}const Uw="__type__",fR="__max__",Qh={mapValue:{}},zw="__vector__",Ad="value";function Li(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?qg(s)?4:pR(s)?9007199254740991:mR(s)?10:11:Ct(28295,{value:s})}function ha(s,e){if(s===e)return!0;const n=Li(s);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return lu(s).isEqual(lu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=Di(l.timestampValue),p=Di(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Pi(l.bytesValue).isEqual(Pi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return as(l.geoPointValue.latitude)===as(u.geoPointValue.latitude)&&as(l.geoPointValue.longitude)===as(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return as(l.integerValue)===as(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=as(l.doubleValue),p=as(u.doubleValue);return h===p?Cd(h)===Cd(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return Pl(s.arrayValue.values||[],e.arrayValue.values||[],ha);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},p=u.mapValue.fields||{};if(t2(h)!==t2(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!ha(h[g],p[g])))return!1;return!0})(s,e);default:return Ct(52216,{left:s})}}function uu(s,e){return(s.values||[]).find((n=>ha(n,e)))!==void 0}function Ll(s,e){if(s===e)return 0;const n=Li(s),i=Li(e);if(n!==i)return sn(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return sn(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=as(u.integerValue||u.doubleValue),g=as(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return s2(s.timestampValue,e.timestampValue);case 4:return s2(lu(s),lu(e));case 5:return eg(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=Pi(u),g=Pi(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const x=sn(p[y],g[y]);if(x!==0)return x}return sn(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=sn(as(u.latitude),as(h.latitude));return p!==0?p:sn(as(u.longitude),as(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return r2(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},y=p[Ad]?.arrayValue,x=g[Ad]?.arrayValue,k=sn(y?.values?.length||0,x?.values?.length||0);return k!==0?k:r2(y,x)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Qh.mapValue&&h===Qh.mapValue)return 0;if(u===Qh.mapValue)return 1;if(h===Qh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=h.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let k=0;k<g.length&&k<x.length;++k){const j=eg(g[k],x[k]);if(j!==0)return j;const L=Ll(p[g[k]],y[x[k]]);if(L!==0)return L}return sn(g.length,x.length)})(s.mapValue,e.mapValue);default:throw Ct(23264,{he:n})}}function s2(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return sn(s,e);const n=Di(s),i=Di(e),l=sn(n.seconds,i.seconds);return l!==0?l:sn(n.nanos,i.nanos)}function r2(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=Ll(n[l],i[l]);if(u)return u}return sn(n.length,i.length)}function Ol(s){return tg(s)}function tg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Di(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Pi(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return wt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=tg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const h of i)u?u=!1:l+=",",l+=`${h}:${tg(n.fields[h])}`;return l+"}"})(s.mapValue):Ct(61005,{value:s})}function md(s){switch(Li(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xd(s);return e?16+md(e):16;case 5:return 2*s.stringValue.length;case 6:return Pi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+md(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return zi(i.fields,((u,h)=>{l+=u.length+md(h)})),l})(s.mapValue);default:throw Ct(13486,{value:s})}}function a2(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function ng(s){return!!s&&"integerValue"in s}function Hg(s){return!!s&&"arrayValue"in s}function i2(s){return!!s&&"nullValue"in s}function o2(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function pd(s){return!!s&&"mapValue"in s}function mR(s){return(s?.mapValue?.fields||{})[Uw]?.stringValue===zw}function Jc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return zi(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Jc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jc(s.arrayValue.values[n]);return e}return{...s}}function pR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===fR}class Gs{constructor(e){this.value=e}static empty(){return new Gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!pd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(n)}setAll(e){let n=js.emptyPath(),i={},l=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,l),i={},l=[],n=p.popLast()}h?i[p.lastSegment()]=Jc(h):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ha(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];pd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){zi(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new Gs(Jc(this.value))}}function Fw(s){const e=[];return zi(s.fields,((n,i)=>{const l=new js([n]);if(pd(i)){const u=Fw(i.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new sr(e)}class Is{constructor(e,n,i,l,u,h,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Is(e,0,Dt.min(),Dt.min(),Dt.min(),Gs.empty(),0)}static newFoundDocument(e,n,i,l){return new Is(e,1,n,Dt.min(),i,l,0)}static newNoDocument(e,n){return new Is(e,2,n,Dt.min(),Dt.min(),Gs.empty(),0)}static newUnknownDocument(e,n){return new Is(e,3,n,Dt.min(),Dt.min(),Gs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Is&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Is(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Md{constructor(e,n){this.position=e,this.inclusive=n}}function l2(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],h=s.position[l];if(u.field.isKeyField()?i=wt.comparator(wt.fromName(h.referenceValue),n.key):i=Ll(h,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function c2(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ha(s.position[n],e.position[n]))return!1;return!0}class hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function gR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class qw{}class ds extends qw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new vR(e,n,i):n==="array-contains"?new wR(e,i):n==="in"?new _R(e,i):n==="not-in"?new kR(e,i):n==="array-contains-any"?new TR(e,i):new ds(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new bR(e,i):new xR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ll(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(Ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends qw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Br(e,n)}matches(e){return Hw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hw(s){return s.op==="and"}function $w(s){return yR(s)&&Hw(s)}function yR(s){for(const e of s.filters)if(e instanceof Br)return!1;return!0}function sg(s){if(s instanceof ds)return s.field.canonicalString()+s.op.toString()+Ol(s.value);if($w(s))return s.filters.map((e=>sg(e))).join(",");{const e=s.filters.map((n=>sg(n))).join(",");return`${s.op}(${e})`}}function Ww(s,e){return s instanceof ds?(function(i,l){return l instanceof ds&&i.op===l.op&&i.field.isEqual(l.field)&&ha(i.value,l.value)})(s,e):s instanceof Br?(function(i,l){return l instanceof Br&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,h,p)=>u&&Ww(h,l.filters[p])),!0):!1})(s,e):void Ct(19439)}function Gw(s){return s instanceof ds?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`})(s):s instanceof Br?(function(n){return n.op.toString()+" {"+n.getFilters().map(Gw).join(" ,")+"}"})(s):"Filter"}class vR extends ds{constructor(e,n,i){super(e,n,i),this.key=wt.fromName(i.referenceValue)}matches(e){const n=wt.comparator(e.key,this.key);return this.matchesComparison(n)}}class bR extends ds{constructor(e,n){super(e,"in",n),this.keys=Kw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class xR extends ds{constructor(e,n){super(e,"not-in",n),this.keys=Kw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Kw(s,e){return(e.arrayValue?.values||[]).map((n=>wt.fromName(n.referenceValue)))}class wR extends ds{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hg(n)&&uu(n.arrayValue,this.value)}}class _R extends ds{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uu(this.value.arrayValue,n)}}class kR extends ds{constructor(e,n){super(e,"not-in",n)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!uu(this.value.arrayValue,n)}}class TR extends ds{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>uu(this.value.arrayValue,i)))}}class jR{constructor(e,n=null,i=[],l=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function u2(s,e=null,n=[],i=[],l=null,u=null,h=null){return new jR(s,e,n,i,l,u,h)}function $g(s){const e=Vt(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>sg(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Qd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ol(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ol(i))).join(",")),e.Te=n}return e.Te}function Wg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!gR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Ww(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!c2(s.startAt,e.startAt)&&c2(s.endAt,e.endAt)}function rg(s){return wt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Gl{constructor(e,n=null,i=[],l=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function ER(s,e,n,i,l,u,h,p){return new Gl(s,e,n,i,l,u,h,p)}function Gg(s){return new Gl(s)}function h2(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function SR(s){return wt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Yw(s){return s.collectionGroup!==null}function Zc(s){const e=Vt(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new ps(js.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new hu(u,i))})),n.has(js.keyField().canonicalString())||e.Ie.push(new hu(js.keyField(),i))}return e.Ie}function la(s){const e=Vt(s);return e.Ee||(e.Ee=NR(e,Zc(s))),e.Ee}function NR(s,e){if(s.limitType==="F")return u2(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new hu(l.field,u)}));const n=s.endAt?new Md(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Md(s.startAt.position,s.startAt.inclusive):null;return u2(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function ag(s,e){const n=s.filters.concat([e]);return new Gl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function CR(s,e){const n=s.explicitOrderBy.concat([e]);return new Gl(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Id(s,e,n){return new Gl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Jd(s,e){return Wg(la(s),la(e))&&s.limitType===e.limitType}function Qw(s){return`${$g(la(s))}|lt:${s.limitType}`}function _l(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>Gw(l))).join(", ")}]`),Qd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Ol(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Ol(l))).join(",")),`Target(${i})`})(la(s))}; limitType=${s.limitType})`}function Zd(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):wt.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of Zc(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(h,p,g){const y=l2(h,p,g);return h.inclusive?y<=0:y<0})(i.startAt,Zc(i),l)||i.endAt&&!(function(h,p,g){const y=l2(h,p,g);return h.inclusive?y>=0:y>0})(i.endAt,Zc(i),l))})(s,e)}function RR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Xw(s){return(e,n)=>{let i=!1;for(const l of Zc(s)){const u=AR(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function AR(s,e,n){const i=s.field.isKeyField()?wt.comparator(e.key,n.key):(function(u,h,p){const g=h.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Ll(g,y):Ct(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ct(19790,{direction:s.dir})}}class Do{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return Dw(this.inner)}size(){return this.innerSize}}const MR=new Yn(wt.comparator);function Ua(){return MR}const Jw=new Yn(wt.comparator);function Gc(...s){let e=Jw;for(const n of s)e=e.insert(n.key,n);return e}function Zw(s){let e=Jw;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function yo(){return eu()}function e_(){return eu()}function eu(){return new Do((s=>s.toString()),((s,e)=>s.isEqual(e)))}const IR=new Yn(wt.comparator),DR=new ps(wt.comparator);function rn(...s){let e=DR;for(const n of s)e=e.add(n);return e}const PR=new ps(sn);function LR(){return PR}function Kg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cd(e)?"-0":e}}function t_(s){return{integerValue:""+s}}function n_(s,e){return oR(e)?t_(e):Kg(s,e)}class ef{constructor(){this._=void 0}}function OR(s,e,n){return s instanceof du?(function(l,u){const h={fields:{[Ow]:{stringValue:Lw},[Bw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&qg(u)&&(u=Xd(u)),u&&(h.fields[Vw]=u),{mapValue:h}})(n,e):s instanceof fu?r_(s,e):s instanceof mu?a_(s,e):(function(l,u){const h=s_(l,u),p=d2(h)+d2(l.Ae);return ng(h)&&ng(l.Ae)?t_(p):Kg(l.serializer,p)})(s,e)}function VR(s,e,n){return s instanceof fu?r_(s,e):s instanceof mu?a_(s,e):n}function s_(s,e){return s instanceof pu?(function(i){return ng(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class du extends ef{}class fu extends ef{constructor(e){super(),this.elements=e}}function r_(s,e){const n=i_(e);for(const i of s.elements)n.some((l=>ha(l,i)))||n.push(i);return{arrayValue:{values:n}}}class mu extends ef{constructor(e){super(),this.elements=e}}function a_(s,e){let n=i_(e);for(const i of s.elements)n=n.filter((l=>!ha(l,i)));return{arrayValue:{values:n}}}class pu extends ef{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function d2(s){return as(s.integerValue||s.doubleValue)}function i_(s){return Hg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class o_{constructor(e,n){this.field=e,this.transform=n}}function BR(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof fu&&l instanceof fu||i instanceof mu&&l instanceof mu?Pl(i.elements,l.elements,ha):i instanceof pu&&l instanceof pu?ha(i.Ae,l.Ae):i instanceof du&&l instanceof du})(s.transform,e.transform)}class UR{constructor(e,n){this.version=e,this.transformResults=n}}class vr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class tf{}function l_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Yg(s.key,vr.none()):new ju(s.key,s.data,vr.none());{const n=s.data,i=Gs.empty();let l=new ps(js.comparator);for(let u of e.fields)if(!l.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?i.delete(u):i.set(u,h),l=l.add(u)}return new Fi(s.key,i,new sr(l.toArray()),vr.none())}}function zR(s,e,n){s instanceof ju?(function(l,u,h){const p=l.value.clone(),g=m2(l.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Fi?(function(l,u,h){if(!gd(l.precondition,u))return void u.convertToUnknownDocument(h.version);const p=m2(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(c_(l)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function tu(s,e,n,i){return s instanceof ju?(function(u,h,p,g){if(!gd(u.precondition,h))return p;const y=u.value.clone(),x=p2(u.fieldTransforms,g,h);return y.setAll(x),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof Fi?(function(u,h,p,g){if(!gd(u.precondition,h))return p;const y=p2(u.fieldTransforms,g,h),x=h.data;return x.setAll(c_(u)),x.setAll(y),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((k=>k.field)))})(s,e,n,i):(function(u,h,p){return gd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,n)}function FR(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=s_(i.transform,l||null);u!=null&&(n===null&&(n=Gs.empty()),n.set(i.field,u))}return n||null}function f2(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Pl(i,l,((u,h)=>BR(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ju extends tf{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Fi extends tf{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function c_(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function m2(s,e,n){const i=new Map;kn(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],h=u.transform,p=e.data.field(u.field);i.set(u.field,VR(h,p,n[l]))}return i}function p2(s,e,n){const i=new Map;for(const l of s){const u=l.transform,h=n.data.field(l.field);i.set(l.field,OR(u,h,e))}return i}class Yg extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qR extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HR{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&zR(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=tu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=tu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=e_();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(l.key)?null:p;const g=l_(h,p);g!==null&&i.set(l.key,g),h.isValidDocument()||h.convertToNoDocument(Dt.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),rn())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((n,i)=>f2(n,i)))&&Pl(this.baseMutations,e.baseMutations,((n,i)=>f2(n,i)))}}class Qg{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){kn(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return IR})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,i[h].version);return new Qg(e,n,i,l)}}class $R{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WR{constructor(e,n){this.count=e,this.unchangedNames=n}}var hs,cn;function GR(s){switch(s){case je.OK:return Ct(64938);case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0;default:return Ct(15467,{code:s})}}function u_(s){if(s===void 0)return Ba("GRPC error has no .code"),je.UNKNOWN;switch(s){case hs.OK:return je.OK;case hs.CANCELLED:return je.CANCELLED;case hs.UNKNOWN:return je.UNKNOWN;case hs.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case hs.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case hs.INTERNAL:return je.INTERNAL;case hs.UNAVAILABLE:return je.UNAVAILABLE;case hs.UNAUTHENTICATED:return je.UNAUTHENTICATED;case hs.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case hs.NOT_FOUND:return je.NOT_FOUND;case hs.ALREADY_EXISTS:return je.ALREADY_EXISTS;case hs.PERMISSION_DENIED:return je.PERMISSION_DENIED;case hs.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case hs.ABORTED:return je.ABORTED;case hs.OUT_OF_RANGE:return je.OUT_OF_RANGE;case hs.UNIMPLEMENTED:return je.UNIMPLEMENTED;case hs.DATA_LOSS:return je.DATA_LOSS;default:return Ct(39323,{code:s})}}(cn=hs||(hs={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";function KR(){return new TextEncoder}const YR=new Ri([4294967295,4294967295],0);function g2(s){const e=KR().encode(s),n=new kw;return n.update(e),new Uint8Array(n.digest())}function y2(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ri([n,i],0),new Ri([l,u],0)]}class Xg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Kc(`Invalid padding: ${n}`);if(i<0)throw new Kc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Kc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Kc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ri.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Ri.fromNumber(i)));return l.compare(YR)===1&&(l=new Ri([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=g2(e),[i,l]=y2(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);if(!this.we(h))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Xg(u,l,n);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=g2(e),[i,l]=y2(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);this.be(h)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nf{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new nf(Dt.min(),l,new Yn(sn),Ua(),rn())}}class Eu{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Eu(i,n,rn(),rn(),rn())}}class yd{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class h_{constructor(e,n){this.targetId=e,this.Ce=n}}class d_{constructor(e,n,i=Es.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class v2{constructor(){this.ve=0,this.Fe=b2(),this.Me=Es.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rn(),n=rn(),i=rn();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:Ct(38017,{changeType:u})}})),new Eu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=b2()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,kn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class QR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ua(),this.He=Xh(),this.Je=Xh(),this.Ze=new Yn(sn)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ct(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(rg(u))if(i===0){const h=new wt(u.path);this.et(n,h,Is.newNoDocument(h,Dt.min()))}else kn(i===1,20013,{expectedCount:i});else{const h=this._t(n);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let h,p;try{h=Pi(i).toUint8Array()}catch(g){if(g instanceof Pw)return Dl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Xg(h,l,u)}catch(g){return Dl(g instanceof Kc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&rg(p.target)){const g=new wt(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Is.newNoDocument(g,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let i=rn();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new nf(e,n,this.Ze,this.je,i);return this.je=Ua(),this.He=Xh(),this.Je=Xh(),this.Ze=new Yn(sn),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new v2,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ps(sn),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ps(sn),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||st("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new v2),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xh(){return new Yn(wt.comparator)}function b2(){return new Yn(wt.comparator)}const XR={asc:"ASCENDING",desc:"DESCENDING"},JR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZR={and:"AND",or:"OR"};class eA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ig(s,e){return s.useProto3Json||Qd(e)?e:{value:e}}function Dd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function tA(s,e){return Dd(s,e.toTimestamp())}function ca(s){return kn(!!s,49232),Dt.fromTimestamp((function(n){const i=Di(n);return new pt(i.seconds,i.nanos)})(s))}function Jg(s,e){return og(s,e).canonicalString()}function og(s,e){const n=(function(l){return new Pn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function m_(s){const e=Pn.fromString(s);return kn(b_(e),10190,{key:e.toString()}),e}function lg(s,e){return Jg(s.databaseId,e.path)}function kp(s,e){const n=m_(e);if(n.get(1)!==s.databaseId.projectId)throw new tt(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new tt(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new wt(g_(n))}function p_(s,e){return Jg(s.databaseId,e)}function nA(s){const e=m_(s);return e.length===4?Pn.emptyPath():g_(e)}function cg(s){return new Pn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function g_(s){return kn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function x2(s,e,n){return{name:lg(s,e),fields:n.value.mapValue.fields}}function sA(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ct(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,x){return y.useProto3Json?(kn(x===void 0||typeof x=="string",58123),Es.fromBase64String(x||"")):(kn(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Es.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const x=y.code===void 0?je.UNKNOWN:u_(y.code);return new tt(x,y.message||"")})(h);n=new d_(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=kp(s,i.document.name),u=ca(i.document.updateTime),h=i.document.createTime?ca(i.document.createTime):Dt.min(),p=new Gs({mapValue:{fields:i.document.fields}}),g=Is.newFoundDocument(l,u,h,p),y=i.targetIds||[],x=i.removedTargetIds||[];n=new yd(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=kp(s,i.document),u=i.readTime?ca(i.readTime):Dt.min(),h=Is.newNoDocument(l,u),p=i.removedTargetIds||[];n=new yd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=kp(s,i.document),u=i.removedTargetIds||[];n=new yd([],u,l,null)}else{if(!("filter"in e))return Ct(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,h=new WR(l,u),p=i.targetId;n=new h_(p,h)}}return n}function rA(s,e){let n;if(e instanceof ju)n={update:x2(s,e.key,e.value)};else if(e instanceof Yg)n={delete:lg(s,e.key)};else if(e instanceof Fi)n={update:x2(s,e.key,e.data),updateMask:fA(e.fieldMask)};else{if(!(e instanceof qR))return Ct(16599,{dt:e.type});n={verify:lg(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof du)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof fu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof mu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof pu)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Ct(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:tA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ct(27497)})(s,e.precondition)),n}function aA(s,e){return s&&s.length>0?(kn(e!==void 0,14353),s.map((n=>(function(l,u){let h=l.updateTime?ca(l.updateTime):ca(u);return h.isEqual(Dt.min())&&(h=ca(u)),new UR(h,l.transformResults||[])})(n,e)))):[]}function iA(s,e){return{documents:[p_(s,e.path)]}}function oA(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=p_(s,l);const u=(function(y){if(y.length!==0)return v_(Br.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((x=>(function(j){return{field:kl(j.field),direction:uA(j.dir)}})(x)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=ig(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function lA(s){let e=nA(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){kn(i===1,65062);const x=n.from[0];x.allDescendants?l=x.collectionId:e=e.child(x.collectionId)}let u=[];n.where&&(u=(function(k){const j=y_(k);return j instanceof Br&&$w(j)?j.getFilters():[j]})(n.where));let h=[];n.orderBy&&(h=(function(k){return k.map((j=>(function($){return new hu(Tl($.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(j)))})(n.orderBy));let p=null;n.limit&&(p=(function(k){let j;return j=typeof k=="object"?k.value:k,Qd(j)?null:j})(n.limit));let g=null;n.startAt&&(g=(function(k){const j=!!k.before,L=k.values||[];return new Md(L,j)})(n.startAt));let y=null;return n.endAt&&(y=(function(k){const j=!k.before,L=k.values||[];return new Md(L,j)})(n.endAt)),ER(e,l,h,u,p,"F",g,y)}function cA(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function y_(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Tl(n.unaryFilter.field);return ds.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Tl(n.unaryFilter.field);return ds.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Tl(n.unaryFilter.field);return ds.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Tl(n.unaryFilter.field);return ds.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ct(61313);default:return Ct(60726)}})(s):s.fieldFilter!==void 0?(function(n){return ds.create(Tl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ct(58110);default:return Ct(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Br.create(n.compositeFilter.filters.map((i=>y_(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ct(1026)}})(n.compositeFilter.op))})(s):Ct(30097,{filter:s})}function uA(s){return XR[s]}function hA(s){return JR[s]}function dA(s){return ZR[s]}function kl(s){return{fieldPath:s.canonicalString()}}function Tl(s){return js.fromServerFormat(s.fieldPath)}function v_(s){return s instanceof ds?(function(n){if(n.op==="=="){if(o2(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NAN"}};if(i2(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(o2(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NAN"}};if(i2(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(n.field),op:hA(n.op),value:n.value}}})(s):s instanceof Br?(function(n){const i=n.getFilters().map((l=>v_(l)));return i.length===1?i[0]:{compositeFilter:{op:dA(n.op),filters:i}}})(s):Ct(54877,{filter:s})}function fA(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function b_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function x_(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Si{constructor(e,n,i,l,u=Dt.min(),h=Dt.min(),p=Es.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mA{constructor(e){this.yt=e}}function pA(s){const e=lA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Id(e,e.limit,"L"):e}class gA{constructor(){this.Sn=new yA}addToCollectionParentIndex(e,n){return this.Sn.add(n),Ce.resolve()}getCollectionParents(e,n){return Ce.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Ce.resolve()}deleteFieldIndex(e,n){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,n){return Ce.resolve()}getDocumentsMatchingTarget(e,n){return Ce.resolve(null)}getIndexType(e,n){return Ce.resolve(0)}getFieldIndexes(e,n){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,n){return Ce.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,n){return Ce.resolve(Ii.min())}updateCollectionGroup(e,n,i){return Ce.resolve()}updateIndexEntries(e,n){return Ce.resolve()}}class yA{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new ps(Pn.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new ps(Pn.comparator)).toArray()}}const w2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w_=41943040;class Ws{static withCacheSize(e){return new Ws(e,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(w_,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);class Vl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Vl(0)}static ar(){return new Vl(-1)}}const _2="LruGarbageCollector",vA=1048576;function k2([s,e],[n,i]){const l=sn(s,n);return l===0?sn(e,i):l}class bA{constructor(e){this.Pr=e,this.buffer=new ps(k2),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();k2(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xA{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){st(_2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wl(n)?st(_2,"Ignoring IndexedDB error during garbage collection: ",n):await $l(n)}await this.Ar(3e5)}))}}class wA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return Ce.resolve(Yd.ce);const i=new bA(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(w2)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),w2):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,u,h,p,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),l=this.params.maximumSequenceNumbersToCollect):l=k,h=Date.now(),this.nthSequenceNumber(e,l)))).next((k=>(i=k,p=Date.now(),this.removeTargets(e,i,n)))).next((k=>(u=k,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((k=>(y=Date.now(),wl()<=nn.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-x}ms
	Determined least recently used ${l} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${k} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:k}))))}}function _A(s,e){return new wA(s,e)}class kA{constructor(){this.changes=new Do((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Is.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Ce.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class TA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class jA{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&tu(i.mutation,l,sr.empty(),pt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,rn()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=rn()){const l=yo();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let h=Gc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const i=yo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,rn())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,i,l){let u=Ua();const h=eu(),p=(function(){return eu()})();return n.forEach(((g,y)=>{const x=i.get(y.key);l.has(y.key)&&(x===void 0||x.mutation instanceof Fi)?u=u.insert(y.key,y):x!==void 0?(h.set(y.key,x.mutation.getFieldMask()),tu(x.mutation,y,x.mutation.getFieldMask(),pt.now())):h.set(y.key,sr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,x)=>h.set(y,x))),n.forEach(((y,x)=>p.set(y,new TA(x,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=eu();let l=new Yn(((h,p)=>h-p)),u=rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let x=i.get(g)||sr.empty();x=p.applyToLocalView(y,x),i.set(g,x);const k=(l.get(p.batchId)||rn()).add(g);l=l.insert(p.batchId,k)}))})).next((()=>{const h=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,x=g.value,k=e_();x.forEach((j=>{if(!u.has(j)){const L=l_(n.get(j),i.get(j));L!==null&&k.set(j,L),u=u.add(j)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,k))}return Ce.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return SR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Yw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):Ce.resolve(yo());let p=ou,g=u;return h.next((y=>Ce.forEach(y,((x,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),u.get(x)?Ce.resolve():this.remoteDocumentCache.getEntry(e,x).next((j=>{g=g.insert(x,j)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,rn()))).next((x=>({batchId:p,changes:Zw(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new wt(n)).next((i=>{let l=Gc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let h=Gc();return this.indexManager.getCollectionParents(e,u).next((p=>Ce.forEach(p,(g=>{const y=(function(k,j){return new Gl(j,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((x=>{x.forEach(((k,j)=>{h=h.insert(k,j)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((h=>{u.forEach(((g,y)=>{const x=y.getKey();h.get(x)===null&&(h=h.insert(x,Is.newInvalidDocument(x)))}));let p=Gc();return h.forEach(((g,y)=>{const x=u.get(g);x!==void 0&&tu(x.mutation,y,sr.empty(),pt.now()),Zd(n,y)&&(p=p.insert(g,y))})),p}))}}class EA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Ce.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ca(l.createTime)}})(n)),Ce.resolve()}getNamedQuery(e,n){return Ce.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:pA(l.bundledQuery),readTime:ca(l.readTime)}})(n)),Ce.resolve()}}class SA{constructor(){this.overlays=new Yn(wt.comparator),this.Lr=new Map}getOverlay(e,n){return Ce.resolve(this.overlays.get(n))}getOverlays(e,n){const i=yo();return Ce.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.bt(e,n,u)})),Ce.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),Ce.resolve()}getOverlaysForCollection(e,n,i){const l=yo(),u=n.length+1,h=new wt(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return Ce.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new Yn(((y,x)=>y-x));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let x=u.get(y.largestBatchId);x===null&&(x=yo(),u=u.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=yo(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>p.set(y,x))),!(p.size()>=l)););return Ce.resolve(p)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new $R(n,i));let u=this.Lr.get(n);u===void 0&&(u=rn(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class NA{constructor(){this.sessionToken=Es.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ce.resolve()}}class Zg{constructor(){this.kr=new ps(ys.Kr),this.qr=new ps(ys.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new ys(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new ys(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new wt(new Pn([])),i=new ys(n,e),l=new ys(n,e+1),u=[];return this.qr.forEachInRange([i,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new wt(new Pn([])),i=new ys(n,e),l=new ys(n,e+1);let u=rn();return this.qr.forEachInRange([i,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new ys(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ys{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return wt.comparator(e.key,n.key)||sn(e.Hr,n.Hr)}static Ur(e,n){return sn(e.Hr,n.Hr)||wt.comparator(e.key,n.key)}}class CA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ps(ys.Kr)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new HR(u,n,i,l);this.mutationQueue.push(h);for(const p of l)this.Jr=this.Jr.add(new ys(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Ce.resolve(h)}lookupMutationBatch(e,n){return Ce.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),u=l<0?0:l;return Ce.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?Fg:this.Yn-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ys(n,0),l=new ys(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(h=>{const p=this.Zr(h.Hr);u.push(p)})),Ce.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ps(sn);return n.forEach((l=>{const u=new ys(l,0),h=new ys(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),Ce.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;wt.isDocumentKey(u)||(u=u.child(""));const h=new ys(new wt(u),0);let p=new ps(sn);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),h),Ce.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){kn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Ce.forEach(n.mutations,(l=>{const u=new ys(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new ys(n,0),l=this.Jr.firstAfterOrEqual(i);return Ce.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class RA{constructor(e){this.ti=e,this.docs=(function(){return new Yn(wt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,h=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Ce.resolve(i?i.document.mutableCopy():Is.newInvalidDocument(n))}getEntries(e,n){let i=Ua();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Is.newInvalidDocument(l))})),Ce.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=Ua();const h=n.path,p=new wt(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||sR(nR(x),i)<=0||(l.has(x.key)||Zd(n,x))&&(u=u.insert(x.key,x.mutableCopy()))}return Ce.resolve(u)}getAllFromCollectionGroup(e,n,i,l){Ct(9500)}ni(e,n){return Ce.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new AA(this)}getSize(e){return Ce.resolve(this.size)}}class AA extends kA{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),Ce.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class MA{constructor(e){this.persistence=e,this.ri=new Do((n=>$g(n)),Wg),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.ii=0,this.si=new Zg,this.targetCount=0,this.oi=Vl._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),Ce.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Vl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Ce.resolve()}updateTargetData(e,n){return this.lr(n),Ce.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Ce.waitFor(u).next((()=>l))}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return Ce.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),Ce.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),Ce.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Ce.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return Ce.resolve(i)}containsKey(e,n){return Ce.resolve(this.si.containsKey(n))}}class __{constructor(e,n){this._i={},this.overlays={},this.ai=new Yd(0),this.ui=!1,this.ui=!0,this.ci=new NA,this.referenceDelegate=e(this),this.li=new MA(this),this.indexManager=new gA,this.remoteDocumentCache=(function(l){return new RA(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new mA(n),this.Pi=new EA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new CA(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){st("MemoryPersistence","Starting transaction:",e);const l=new IA(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return Ce.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class IA extends aR{constructor(e){super(),this.currentSequenceNumber=e}}class ey{constructor(e){this.persistence=e,this.Ri=new Zg,this.Ai=null}static Vi(e){return new ey(e)}get di(){if(this.Ai)return this.Ai;throw Ct(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),Ce.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),Ce.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Ce.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.di,(i=>{const l=wt.fromPath(i);return this.mi(e,l).next((u=>{u||n.removeEntry(l,Dt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Pd{constructor(e,n){this.persistence=e,this.fi=new Do((i=>lR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=_A(this,n)}static Vi(e,n){return new Pd(e,n)}Ti(){}Ii(e){return Ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return Ce.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?Ce.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(h=>this.wr(e,h,n).next((p=>{p||(i++,u.removeEntry(h,Dt.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Ce.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Ce.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=md(e.data.value)),n}wr(e,n,i){return Ce.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return Ce.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ty{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=rn(),l=rn();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new ty(e,n.fromCache,i,l)}}class DA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class PA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return lS()?8:iR(Ds())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,l,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new DA;return this.ys(e,n,h).next((p=>{if(u.result=p,this.As)return this.ws(e,n,h,p.size)}))})).next((()=>u.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(wl()<=nn.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",_l(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ce.resolve()):(wl()<=nn.DEBUG&&st("QueryEngine","Query:",_l(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(wl()<=nn.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",_l(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,la(n))):Ce.resolve())}gs(e,n){if(h2(n))return Ce.resolve(null);let i=la(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Id(n,null,"F"),i=la(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=rn(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,h,g.readTime)?this.gs(e,Id(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,i,l){return h2(n)||l.isEqual(Dt.min())?Ce.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,i,l)?Ce.resolve(null):(wl()<=nn.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),_l(n)),this.Ds(e,h,n,tR(l,ou)).next((p=>p)))}))}bs(e,n){let i=new ps(Xw(e));return n.forEach(((l,u)=>{Zd(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,i){return wl()<=nn.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",_l(n)),this.fs.getDocumentsMatchingQuery(e,n,Ii.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const ny="LocalStore",LA=3e8;class OA{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new Yn(sn),this.Fs=new Do((u=>$g(u)),Wg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function VA(s,e,n,i){return new OA(s,e,n,i)}async function k_(s,e){const n=Vt(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=rn();for(const y of l){h.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of u){p.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function BA(s,e){const n=Vt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,x){const k=y.batch,j=k.keys();let L=Ce.resolve();return j.forEach(($=>{L=L.next((()=>x.getEntry(g,$))).next((U=>{const V=y.docVersions.get($);kn(V!==null,48541),U.version.compareTo(V)<0&&(k.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),x.addEntry(U)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(g,k)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=rn();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function T_(s){const e=Vt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function UA(s,e){const n=Vt(s),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((x,k)=>{const j=l.get(k);if(!j)return;p.push(n.li.removeMatchingKeys(u,x.removedDocuments,k).next((()=>n.li.addMatchingKeys(u,x.addedDocuments,k))));let L=j.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(k)!==null?L=L.withResumeToken(Es.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):x.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(x.resumeToken,i)),l=l.insert(k,L),(function(U,V,ne){return U.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=LA?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(j,L,x)&&p.push(n.li.updateTargetData(u,L))}));let g=Ua(),y=rn();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,x))})),p.push(zA(u,h,e.documentUpdates).next((x=>{g=x.Bs,y=x.Ls}))),!i.isEqual(Dt.min())){const x=n.li.getLastRemoteSnapshotVersion(u).next((k=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(x)}return Ce.waitFor(p).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=l,u)))}function zA(s,e,n){let i=rn(),l=rn();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=Ua();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Dt.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):st(ny,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function FA(s,e){const n=Vt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Fg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function qA(s,e){const n=Vt(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((u=>u?(l=u,Ce.resolve(l)):n.li.allocateTargetId(i).next((h=>(l=new Si(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function ug(s,e,n){const i=Vt(s),l=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!Wl(h))throw h;st(ny,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function T2(s,e,n){const i=Vt(s);let l=Dt.min(),u=rn();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,x){const k=Vt(g),j=k.Fs.get(x);return j!==void 0?Ce.resolve(k.vs.get(j)):k.li.getTargetData(y,x)})(i,h,la(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,n?l:Dt.min(),n?u:rn()))).next((p=>(HA(i,RR(e),p),{documents:p,ks:u})))))}function HA(s,e,n){let i=s.Ms.get(e)||Dt.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class j2{constructor(){this.activeTargetIds=LR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $A{constructor(){this.vo=new j2,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new j2,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WA{Mo(e){}shutdown(){}}const E2="ConnectivityMonitor";class S2{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){st(E2,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){st(E2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Jh=null;function hg(){return Jh===null?Jh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jh++,"0x"+Jh.toString(16)}const Tp="RestConnection",GA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class KA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Rd?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,u){const h=hg(),p=this.Qo(e,n.toUriEncodedString());st(Tp,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),x=Bi(y);return this.zo(e,p,g,i,x).then((k=>(st(Tp,`Received RPC '${e}' ${h}: `,k),k)),(k=>{throw Dl(Tp,`RPC '${e}' ${h} failed with error: `,k,"url: ",p,"request:",i),k}))}jo(e,n,i,l,u,h){return this.Wo(e,n,i,l,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const i=GA[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class YA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const As="WebChannelConnection",Uc=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Cl extends KA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Cl.c_){const e=Sw();Uc(e,Ew.STAT_EVENT,(n=>{n.stat===Zp.PROXY?st(As,"STAT_EVENT: detected buffering proxy"):n.stat===Zp.NOPROXY&&st(As,"STAT_EVENT: detected no buffering proxy")})),Cl.c_=!0}}zo(e,n,i,l,u){const h=hg();return new Promise(((p,g)=>{const y=new Tw;y.setWithCredentials(!0),y.listenOnce(jw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case fd.NO_ERROR:const k=y.getResponseJson();st(As,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(k)),p(k);break;case fd.TIMEOUT:st(As,`RPC '${e}' ${h} timed out`),g(new tt(je.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:const j=y.getStatus();if(st(As,`RPC '${e}' ${h} failed with status:`,j,"response text:",y.getResponseText()),j>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const $=L?.error;if($&&$.status&&$.message){const U=(function(ne){const X=ne.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(X)>=0?X:je.UNKNOWN})($.status);g(new tt(U,$.message))}else g(new tt(je.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new tt(je.UNAVAILABLE,"Connection failed."));break;default:Ct(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{st(As,`RPC '${e}' ${h} completed.`)}}));const x=JSON.stringify(l);st(As,`RPC '${e}' ${h} sending request:`,l),y.send(n,"POST",x,i,15)}))}T_(e,n,i){const l=hg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const y=u.join("");st(As,`Creating RPC '${e}' stream ${l}: ${y}`,p);const x=h.createWebChannel(y,p);this.I_(x);let k=!1,j=!1;const L=new YA({Ho:$=>{j?st(As,`Not sending because RPC '${e}' stream ${l} is closed:`,$):(k||(st(As,`Opening RPC '${e}' stream ${l} transport.`),x.open(),k=!0),st(As,`RPC '${e}' stream ${l} sending:`,$),x.send($))},Jo:()=>x.close()});return Uc(x,Wc.EventType.OPEN,(()=>{j||(st(As,`RPC '${e}' stream ${l} transport opened.`),L.i_())})),Uc(x,Wc.EventType.CLOSE,(()=>{j||(j=!0,st(As,`RPC '${e}' stream ${l} transport closed`),L.o_(),this.E_(x))})),Uc(x,Wc.EventType.ERROR,($=>{j||(j=!0,Dl(As,`RPC '${e}' stream ${l} transport errored. Name:`,$.name,"Message:",$.message),L.o_(new tt(je.UNAVAILABLE,"The operation could not be completed")))})),Uc(x,Wc.EventType.MESSAGE,($=>{if(!j){const U=$.data[0];kn(!!U,16349);const V=U,ne=V?.error||V[0]?.error;if(ne){st(As,`RPC '${e}' stream ${l} received error:`,ne);const X=ne.status;let ce=(function(Ae){const M=hs[Ae];if(M!==void 0)return u_(M)})(X),_e=ne.message;ce===void 0&&(ce=je.INTERNAL,_e="Unknown error status: "+X+" with message "+ne.message),j=!0,L.o_(new tt(ce,_e)),x.close()}else st(As,`RPC '${e}' stream ${l} received:`,U),L.__(U)}})),Cl.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Nw()}}function QA(s){return new Cl(s)}function jp(){return typeof document<"u"?document:null}function sf(s){return new eA(s,!0)}Cl.c_=!1;class j_{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const N2="PersistentStream";class E_{constructor(e,n,i,l,u,h,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new j_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===je.RESOURCE_EXHAUSTED?(Ba(n.toString()),Ba("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new tt(je.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return st(N2,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(st(N2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class XA extends E_{constructor(e,n,i,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sA(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Dt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Dt.min():h.readTime?ca(h.readTime):Dt.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=cg(this.serializer),n.addTarget=(function(u,h){let p;const g=h.target;if(p=rg(g)?{documents:iA(u,g)}:{query:oA(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=f_(u,h.resumeToken);const y=ig(u,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(Dt.min())>0){p.readTime=Dd(u,h.snapshotVersion.toTimestamp());const y=ig(u,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=cA(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=cg(this.serializer),n.removeTarget=e,this.K_(n)}}class JA extends E_{constructor(e,n,i,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return kn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aA(e.writeResults,e.commitTime),i=ca(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=cg(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>rA(this.serializer,i)))};this.K_(n)}}class ZA{}class eM extends ZA{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new tt(je.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,og(n,i),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new tt(je.UNKNOWN,u.toString())}))}jo(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,og(n,i),l,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new tt(je.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function tM(s,e,n,i){return new eM(s,e,n,i)}class nM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ba(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Co="RemoteStore";class sM{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{Po(this)&&(st(Co,"Restarting streams for network reachability change."),await(async function(g){const y=Vt(g);y.Ea.add(4),await Su(y),y.Va.set("Unknown"),y.Ea.delete(4),await rf(y)})(this))}))})),this.Va=new nM(i,l)}}async function rf(s){if(Po(s))for(const e of s.Ra)await e(!0)}async function Su(s){for(const e of s.Ra)await e(!1)}function S_(s,e){const n=Vt(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),iy(n)?ay(n):Kl(n).O_()&&ry(n,e))}function sy(s,e){const n=Vt(s),i=Kl(n);n.Ia.delete(e),i.O_()&&N_(n,e),n.Ia.size===0&&(i.O_()?i.L_():Po(n)&&n.Va.set("Unknown"))}function ry(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(s).Z_(e)}function N_(s,e){s.da.$e(e),Kl(s).X_(e)}function ay(s){s.da=new QR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Kl(s).start(),s.Va.ua()}function iy(s){return Po(s)&&!Kl(s).x_()&&s.Ia.size>0}function Po(s){return Vt(s).Ea.size===0}function C_(s){s.da=void 0}async function rM(s){s.Va.set("Online")}async function aM(s){s.Ia.forEach(((e,n)=>{ry(s,e)}))}async function iM(s,e){C_(s),iy(s)?(s.Va.ha(e),ay(s)):s.Va.set("Unknown")}async function oM(s,e,n){if(s.Va.set("Online"),e instanceof d_&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,h),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){st(Co,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ld(s,i)}else if(e instanceof yd?s.da.Xe(e):e instanceof h_?s.da.st(e):s.da.tt(e),!n.isEqual(Dt.min()))try{const i=await T_(s.localStore);n.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=u.Ia.get(y);x&&u.Ia.set(y,x.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const x=u.Ia.get(g);if(!x)return;u.Ia.set(g,x.withResumeToken(Es.EMPTY_BYTE_STRING,x.snapshotVersion)),N_(u,g);const k=new Si(x.target,g,y,x.sequenceNumber);ry(u,k)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){st(Co,"Failed to raise snapshot:",i),await Ld(s,i)}}async function Ld(s,e,n){if(!Wl(e))throw e;s.Ea.add(1),await Su(s),s.Va.set("Offline"),n||(n=()=>T_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{st(Co,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await rf(s)}))}function R_(s,e){return e().catch((n=>Ld(s,n,e)))}async function af(s){const e=Vt(s),n=Oi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fg;for(;lM(e);)try{const l=await FA(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,cM(e,l)}catch(l){await Ld(e,l)}A_(e)&&M_(e)}function lM(s){return Po(s)&&s.Ta.length<10}function cM(s,e){s.Ta.push(e);const n=Oi(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function A_(s){return Po(s)&&!Oi(s).x_()&&s.Ta.length>0}function M_(s){Oi(s).start()}async function uM(s){Oi(s).ra()}async function hM(s){const e=Oi(s);for(const n of s.Ta)e.ea(n.mutations)}async function dM(s,e,n){const i=s.Ta.shift(),l=Qg.from(i,e,n);await R_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await af(s)}async function fM(s,e){e&&Oi(s).Y_&&await(async function(i,l){if((function(h){return GR(h)&&h!==je.ABORTED})(l.code)){const u=i.Ta.shift();Oi(i).B_(),await R_(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await af(i)}})(s,e),A_(s)&&M_(s)}async function C2(s,e){const n=Vt(s);n.asyncQueue.verifyOperationInProgress(),st(Co,"RemoteStore received new credentials");const i=Po(n);n.Ea.add(3),await Su(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await rf(n)}async function mM(s,e){const n=Vt(s);e?(n.Ea.delete(2),await rf(n)):e||(n.Ea.add(2),await Su(n),n.Va.set("Unknown"))}function Kl(s){return s.ma||(s.ma=(function(n,i,l){const u=Vt(n);return u.sa(),new XA(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:rM.bind(null,s),Yo:aM.bind(null,s),t_:iM.bind(null,s),J_:oM.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),iy(s)?ay(s):s.Va.set("Unknown")):(await s.ma.stop(),C_(s))}))),s.ma}function Oi(s){return s.fa||(s.fa=(function(n,i,l){const u=Vt(n);return u.sa(),new JA(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:uM.bind(null,s),t_:fM.bind(null,s),ta:hM.bind(null,s),na:dM.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await af(s)):(await s.fa.stop(),s.Ta.length>0&&(st(Co,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class oy{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const h=Date.now()+i,p=new oy(e,n,h,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ly(s,e){if(Ba("AsyncQueue",`${e}: ${s}`),Wl(s))return new tt(je.UNAVAILABLE,`${e}: ${s}`);throw s}class Rl{static emptySet(e){return new Rl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||wt.comparator(n.key,i.key):(n,i)=>wt.comparator(n.key,i.key),this.keyedMap=Gc(),this.sortedSet=new Yn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Rl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class R2{constructor(){this.ga=new Yn(wt.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ct(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Bl{constructor(e,n,i,l,u,h,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,l,u){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new Bl(e,n,Rl.emptySet(n),h,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}class pM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class gM{constructor(){this.queries=A2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=Vt(n),u=l.queries;l.queries=A2(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new tt(je.ABORTED,"Firestore shutting down"))}}function A2(){return new Do((s=>Qw(s)),Jd)}async function I_(s,e){const n=Vt(s);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new pM,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(h){const p=ly(h,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&cy(n)}async function D_(s,e){const n=Vt(s),i=e.query;let l=3;const u=n.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function yM(s,e){const n=Vt(s);let i=!1;for(const l of e){const u=l.query,h=n.queries.get(u);if(h){for(const p of h.ba)p.Fa(l)&&(i=!0);h.wa=l}}i&&cy(n)}function vM(s,e,n){const i=Vt(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(n);i.queries.delete(e)}function cy(s){s.Ca.forEach((e=>{e.next()}))}var dg,M2;(M2=dg||(dg={})).Ma="default",M2.Cache="cache";class P_{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Bl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dg.Cache}}class L_{constructor(e){this.key=e}}class O_{constructor(e){this.key=e}}class bM{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=rn(),this.mutatedKeys=rn(),this.eu=Xw(e),this.tu=new Rl(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new R2,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((x,k)=>{const j=l.get(x),L=Zd(this.query,k)?k:null,$=!!j&&this.mutatedKeys.has(j.key),U=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let V=!1;j&&L?j.data.isEqual(L.data)?$!==U&&(i.track({type:3,doc:L}),V=!0):this.su(j,L)||(i.track({type:2,doc:L}),V=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(p=!0)):!j&&L?(i.track({type:0,doc:L}),V=!0):j&&!L&&(i.track({type:1,doc:j}),V=!0,(g||y)&&(p=!0)),V&&(L?(h=h.add(L),u=U?u.add(x):u.delete(x)):(h=h.delete(x),u=u.delete(x)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),u=u.delete(x.key),i.track({type:1,doc:x})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((x,k)=>(function(L,$){const U=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct(20277,{Vt:V})}};return U(L)-U($)})(x.type,k.type)||this.eu(x.doc,k.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,h.length!==0||y?{snapshot:new Bl(this.query,e.tu,u,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new R2,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=rn(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new O_(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new L_(i))})),n}cu(e){this.Za=e.ks,this.Ya=rn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const uy="SyncEngine";class xM{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class wM{constructor(e){this.key=e,this.hu=!1}}class _M{constructor(e,n,i,l,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Do((p=>Qw(p)),Jd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Yn(wt.comparator),this.Au=new Map,this.Vu=new Zg,this.du={},this.mu=new Map,this.fu=Vl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kM(s,e,n=!0){const i=q_(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await V_(i,e,n,!0),l}async function TM(s,e){const n=q_(s);await V_(n,e,!0,!1)}async function V_(s,e,n,i){const l=await qA(s.localStore,la(e)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await jM(s,e,u,h==="current",l.resumeToken)),s.isPrimaryClient&&n&&S_(s.remoteStore,l),p}async function jM(s,e,n,i,l){s.pu=(k,j,L)=>(async function(U,V,ne,X){let ce=V.view.ru(ne);ce.Ss&&(ce=await T2(U.localStore,V.query,!1).then((({documents:M})=>V.view.ru(M,ce))));const _e=X&&X.targetChanges.get(V.targetId),Ve=X&&X.targetMismatches.get(V.targetId)!=null,Ae=V.view.applyChanges(ce,U.isPrimaryClient,_e,Ve);return D2(U,V.targetId,Ae.au),Ae.snapshot})(s,k,j,L);const u=await T2(s.localStore,e,!0),h=new bM(e,u.ks),p=h.ru(u.documents),g=Eu.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),y=h.applyChanges(p,s.isPrimaryClient,g);D2(s,n,y.au);const x=new xM(e,n,h);return s.Tu.set(e,x),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function EM(s,e,n){const i=Vt(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((h=>!Jd(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await ug(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&sy(i.remoteStore,l.targetId),fg(i,l.targetId)})).catch($l)):(fg(i,l.targetId),await ug(i.localStore,l.targetId,!0))}async function SM(s,e){const n=Vt(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sy(n.remoteStore,i.targetId))}async function NM(s,e,n){const i=PM(s);try{const l=await(function(h,p){const g=Vt(h),y=pt.now(),x=p.reduce(((L,$)=>L.add($.key)),rn());let k,j;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let $=Ua(),U=rn();return g.xs.getEntries(L,x).next((V=>{$=V,$.forEach(((ne,X)=>{X.isValidDocument()||(U=U.add(ne))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,$))).next((V=>{k=V;const ne=[];for(const X of p){const ce=FR(X,k.get(X.key).overlayedDocument);ce!=null&&ne.push(new Fi(X.key,ce,Fw(ce.value.mapValue),vr.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,ne,p)})).next((V=>{j=V;const ne=V.applyToLocalDocumentSet(k,U);return g.documentOverlayCache.saveOverlays(L,V.batchId,ne)}))})).then((()=>({batchId:j.batchId,changes:Zw(k)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(h,p,g){let y=h.du[h.currentUser.toKey()];y||(y=new Yn(sn)),y=y.insert(p,g),h.du[h.currentUser.toKey()]=y})(i,l.batchId,n),await Nu(i,l.changes),await af(i.remoteStore)}catch(l){const u=ly(l,"Failed to persist write");n.reject(u)}}async function B_(s,e){const n=Vt(s);try{const i=await UA(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=n.Au.get(u);h&&(kn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?kn(h.hu,14607):l.removedDocuments.size>0&&(kn(h.hu,42227),h.hu=!1))})),await Nu(n,i,e)}catch(i){await $l(i)}}function I2(s,e,n){const i=Vt(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(h,p){const g=Vt(h);g.onlineState=p;let y=!1;g.queries.forEach(((x,k)=>{for(const j of k.ba)j.va(p)&&(y=!0)})),y&&cy(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function CM(s,e,n){const i=Vt(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let h=new Yn(wt.comparator);h=h.insert(u,Is.newNoDocument(u,Dt.min()));const p=rn().add(u),g=new nf(Dt.min(),new Map,new Yn(sn),h,p);await B_(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),hy(i)}else await ug(i.localStore,e,!1).then((()=>fg(i,e,n))).catch($l)}async function RM(s,e){const n=Vt(s),i=e.batch.batchId;try{const l=await BA(n.localStore,e);z_(n,i,null),U_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Nu(n,l)}catch(l){await $l(l)}}async function AM(s,e,n){const i=Vt(s);try{const l=await(function(h,p){const g=Vt(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,p).next((k=>(kn(k!==null,37113),x=k.keys(),g.mutationQueue.removeMutationBatch(y,k)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(i.localStore,e);z_(i,e,n),U_(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Nu(i,l)}catch(l){await $l(l)}}function U_(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function z_(s,e,n){const i=Vt(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function fg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||F_(s,i)}))}function F_(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(sy(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),hy(s))}function D2(s,e,n){for(const i of n)i instanceof L_?(s.Vu.addReference(i.key,e),MM(s,i)):i instanceof O_?(st(uy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||F_(s,i.key)):Ct(19791,{wu:i})}function MM(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(st(uy,"New document in limbo: "+n),s.Eu.add(i),hy(s))}function hy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new wt(Pn.fromString(e)),i=s.fu.next();s.Au.set(i,new wM(n)),s.Ru=s.Ru.insert(n,i),S_(s.remoteStore,new Si(la(Gg(n.path)),i,"TargetPurposeLimboResolution",Yd.ce))}}async function Nu(s,e,n){const i=Vt(s),l=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const x=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){l.push(y);const x=ty.Es(g.targetId,y);u.push(x)}})))})),await Promise.all(h),i.Pu.J_(l),await(async function(g,y){const x=Vt(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>Ce.forEach(y,(j=>Ce.forEach(j.Ts,(L=>x.persistence.referenceDelegate.addReference(k,j.targetId,L))).next((()=>Ce.forEach(j.Is,(L=>x.persistence.referenceDelegate.removeReference(k,j.targetId,L)))))))))}catch(k){if(!Wl(k))throw k;st(ny,"Failed to update sequence numbers: "+k)}for(const k of y){const j=k.targetId;if(!k.fromCache){const L=x.vs.get(j),$=L.snapshotVersion,U=L.withLastLimboFreeSnapshotVersion($);x.vs=x.vs.insert(j,U)}}})(i.localStore,u))}async function IM(s,e){const n=Vt(s);if(!n.currentUser.isEqual(e)){st(uy,"User change. New user:",e.toKey());const i=await k_(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new tt(je.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Nu(n,i.Ns)}}function DM(s,e){const n=Vt(s),i=n.Au.get(e);if(i&&i.hu)return rn().add(i.key);{let l=rn();const u=n.Iu.get(e);if(!u)return l;for(const h of u){const p=n.Tu.get(h);l=l.unionWith(p.view.nu)}return l}}function q_(s){const e=Vt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=B_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CM.bind(null,e),e.Pu.J_=yM.bind(null,e.eventManager),e.Pu.yu=vM.bind(null,e.eventManager),e}function PM(s){const e=Vt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AM.bind(null,e),e}class Od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return VA(this.persistence,new PA,e.initialUser,this.serializer)}Cu(e){return new __(ey.Vi,this.serializer)}Du(e){return new $A}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Od.provider={build:()=>new Od};class LM extends Od{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){kn(this.persistence.referenceDelegate instanceof Pd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new xA(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new __((i=>Pd.Vi(i,n)),this.serializer)}}class mg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>I2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=IM.bind(null,this.syncEngine),await mM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gM})()}createDatastore(e){const n=sf(e.databaseInfo.databaseId),i=QA(e.databaseInfo);return tM(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,h,p){return new sM(i,l,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>I2(this.syncEngine,n,0)),(function(){return S2.v()?new S2:new WA})())}createSyncEngine(e,n){return(function(l,u,h,p,g,y,x){const k=new _M(l,u,h,p,g,y);return x&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Vt(n);st(Co,"RemoteStore shutting down."),i.Ea.add(5),await Su(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}mg.provider={build:()=>new mg};class H_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ba("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Vi="FirestoreClient";class OM{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=Ms.UNAUTHENTICATED,this.clientId=zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{st(Vi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(st(Vi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ly(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ep(s,e){s.asyncQueue.verifyOperationInProgress(),st(Vi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await k_(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function P2(s,e){s.asyncQueue.verifyOperationInProgress();const n=await VM(s);st(Vi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>C2(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>C2(e.remoteStore,l))),s._onlineComponents=e}async function VM(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){st(Vi,"Using user provided OfflineComponentProvider");try{await Ep(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===je.FAILED_PRECONDITION||l.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Dl("Error using user provided cache. Falling back to memory cache: "+n),await Ep(s,new Od)}}else st(Vi,"Using default OfflineComponentProvider"),await Ep(s,new LM(void 0));return s._offlineComponents}async function $_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(st(Vi,"Using user provided OnlineComponentProvider"),await P2(s,s._uninitializedComponentsProvider._online)):(st(Vi,"Using default OnlineComponentProvider"),await P2(s,new mg))),s._onlineComponents}function BM(s){return $_(s).then((e=>e.syncEngine))}async function W_(s){const e=await $_(s),n=e.eventManager;return n.onListen=kM.bind(null,e.syncEngine),n.onUnlisten=EM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SM.bind(null,e.syncEngine),n}function UM(s,e,n={}){const i=new Pa;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const x=new H_({next:j=>{x.Nu(),h.enqueueAndForget((()=>D_(u,k)));const L=j.docs.has(p);!L&&j.fromCache?y.reject(new tt(je.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&j.fromCache&&g&&g.source==="server"?y.reject(new tt(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(j)},error:j=>y.reject(j)}),k=new P_(Gg(p.path),x,{includeMetadataChanges:!0,Ka:!0});return I_(u,k)})(await W_(s),s.asyncQueue,e,n,i))),i.promise}function zM(s,e,n={}){const i=new Pa;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const x=new H_({next:j=>{x.Nu(),h.enqueueAndForget((()=>D_(u,k))),j.fromCache&&g.source==="server"?y.reject(new tt(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(j)},error:j=>y.reject(j)}),k=new P_(p,x,{includeMetadataChanges:!0,Ka:!0});return I_(u,k)})(await W_(s),s.asyncQueue,e,n,i))),i.promise}function FM(s,e){const n=new Pa;return s.asyncQueue.enqueueAndForget((async()=>NM(await BM(s),e,n))),n.promise}function G_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const qM="ComponentProvider",L2=new Map;function HM(s,e,n,i,l){return new hR(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,G_(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const K_="firestore.googleapis.com",O2=!0;class V2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new tt(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K_,this.ssl=O2}else this.host=e.host,this.ssl=e.ssl??O2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vA)throw new tt(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new tt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new tt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new tt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class of{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tt(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new qC;switch(i.type){case"firstParty":return new GC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new tt(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=L2.get(n);i&&(st(qM,"Removing Datastore"),L2.delete(n),i.terminate())})(this),Promise.resolve()}}function $M(s,e,n,i={}){s=Vr(s,of);const l=Bi(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(jg(`https://${p}`),Eg("Firestore",!0)),u.host!==K_&&u.host!==p&&Dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!To(g,h)&&(s._setSettings(g),i.mockUserToken)){let y,x;if(typeof i.mockUserToken=="string")y=i.mockUserToken,x=Ms.MOCK_USER;else{y=Ox(i.mockUserToken,s._app?.options.projectId);const k=i.mockUserToken.sub||i.mockUserToken.user_id;if(!k)throw new tt(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Ms(k)}s._authCredentials=new HC(new Rw(y,x))}}class qi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new qi(this.firestore,e,this._query)}}class is{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new is(this.firestore,e,this._key)}toJSON(){return{type:is._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Tu(n,is._jsonSchema))return new is(e,i||null,new wt(Pn.fromString(n.referencePath)))}}is._jsonSchemaVersion="firestore/documentReference/1.0",is._jsonSchema={type:fs("string",is._jsonSchemaVersion),referencePath:fs("string")};class Ai extends qi{constructor(e,n,i){super(e,n,Gg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new is(this.firestore,null,new wt(e))}withConverter(e){return new Ai(this.firestore,e,this._path)}}function Yt(s,e,...n){if(s=$n(s),Aw("collection","path",e),s instanceof of){const i=Pn.fromString(e,...n);return X1(i),new Ai(s,null,i)}{if(!(s instanceof is||s instanceof Ai))throw new tt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Pn.fromString(e,...n));return X1(i),new Ai(s.firestore,null,i)}}function et(s,e,...n){if(s=$n(s),arguments.length===1&&(e=zg.newId()),Aw("doc","path",e),s instanceof of){const i=Pn.fromString(e,...n);return Q1(i),new is(s,null,new wt(i))}{if(!(s instanceof is||s instanceof Ai))throw new tt(je.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Pn.fromString(e,...n));return Q1(i),new is(s.firestore,s instanceof Ai?s.converter:null,new wt(i))}}const B2="AsyncQueue";class U2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new j_(this,"async_queue_retry"),this._c=()=>{const i=jp();i&&st(B2,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=jp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Pa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Wl(e))throw e;st(B2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ba("INTERNAL UNHANDLED ERROR: ",z2(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=oy.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Ct(47125,{Pc:z2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function z2(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Lo extends of{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new U2,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U2(e),this._firestoreClient=void 0,await e}}}function WM(s,e){const n=typeof s=="object"?s:Rg(),i=typeof s=="string"?s:Rd,l=Hd(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=Dx("firestore");u&&$M(l,...u)}return l}function dy(s){if(s._terminated)throw new tt(je.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||GM(s),s._firestoreClient}function GM(s){const e=s._freezeSettings(),n=HM(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new OM(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yr(Es.fromBase64String(e))}catch(n){throw new tt(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yr(Es.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,yr._jsonSchema))return yr.fromBase64String(e.bytes)}}yr._jsonSchemaVersion="firestore/bytes/1.0",yr._jsonSchema={type:fs("string",yr._jsonSchemaVersion),bytes:fs("string")};class fy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new tt(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new js(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cu{constructor(e){this._methodName=e}}class ua{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new tt(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new tt(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ua._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,ua._jsonSchema))return new ua(e.latitude,e.longitude)}}ua._jsonSchemaVersion="firestore/geoPoint/1.0",ua._jsonSchema={type:fs("string",ua._jsonSchemaVersion),latitude:fs("number"),longitude:fs("number")};class Lr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,Lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Lr(e.vectorValues);throw new tt(je.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Lr._jsonSchemaVersion="firestore/vectorValue/1.0",Lr._jsonSchema={type:fs("string",Lr._jsonSchemaVersion),vectorValues:fs("object")};const KM=/^__.*__$/;class YM{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ju(e,this.data,n,this.fieldTransforms)}}class Y_{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Q_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct(40011,{dataSource:s})}}class my{constructor(e,n,i,l,u,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new my({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Vd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Q_(this.dataSource)&&KM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class QM{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||sf(e)}createContext(e,n,i,l=!1){return new my({dataSource:e,methodName:n,targetDoc:i,path:js.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lf(s){const e=s._freezeSettings(),n=sf(s._databaseId);return new QM(s._databaseId,!!e.ignoreUndefinedProperties,n)}function X_(s,e,n,i,l,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);yy("Data must be an object, but it was:",h,i);const p=J_(i,h);let g,y;if(u.merge)g=new sr(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const x=[];for(const k of u.mergeFields){const j=Ro(e,k,n);if(!h.contains(j))throw new tt(je.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);tk(x,j)||x.push(j)}g=new sr(x),y=h.fieldTransforms.filter((k=>g.covers(k.field)))}else g=null,y=h.fieldTransforms;return new YM(new Gs(p),g,y)}class cf extends Cu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cf}}class py extends Cu{_toFieldTransform(e){return new o_(e.path,new du)}isEqual(e){return e instanceof py}}class gy extends Cu{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new pu(e.serializer,n_(e.serializer,this.Vc));return new o_(e.path,n)}isEqual(e){return e instanceof gy&&this.Vc===e.Vc}}function XM(s,e,n,i){const l=s.createContext(1,e,n);yy("Data must be an object, but it was:",l,i);const u=[],h=Gs.empty();zi(i,((g,y)=>{const x=ek(e,g,n);y=$n(y);const k=l.childContextForFieldPath(x);if(y instanceof cf)u.push(x);else{const j=Ru(y,k);j!=null&&(u.push(x),h.set(x,j))}}));const p=new sr(u);return new Y_(h,p,l.fieldTransforms)}function JM(s,e,n,i,l,u){const h=s.createContext(1,e,n),p=[Ro(e,i,n)],g=[l];if(u.length%2!=0)throw new tt(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)p.push(Ro(e,u[j])),g.push(u[j+1]);const y=[],x=Gs.empty();for(let j=p.length-1;j>=0;--j)if(!tk(y,p[j])){const L=p[j];let $=g[j];$=$n($);const U=h.childContextForFieldPath(L);if($ instanceof cf)y.push(L);else{const V=Ru($,U);V!=null&&(y.push(L),x.set(L,V))}}const k=new sr(y);return new Y_(x,k,h.fieldTransforms)}function ZM(s,e,n,i=!1){return Ru(n,s.createContext(i?4:3,e))}function Ru(s,e){if(Z_(s=$n(s)))return yy("Unsupported field value:",e,s),J_(s,e);if(s instanceof Cu)return(function(i,l){if(!Q_(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let h=0;for(const p of i){let g=Ru(p,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=$n(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return n_(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=pt.fromDate(i);return{timestampValue:Dd(l.serializer,u)}}if(i instanceof pt){const u=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dd(l.serializer,u)}}if(i instanceof ua)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof yr)return{bytesValue:f_(l.serializer,i._byteString)};if(i instanceof is){const u=l.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Jg(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof Lr)return(function(h,p){const g=h instanceof Lr?h.toArray():h;return{mapValue:{fields:{[Uw]:{stringValue:zw},[Ad]:{arrayValue:{values:g.map((x=>{if(typeof x!="number")throw p.createError("VectorValues must only contain numeric values.");return Kg(p.serializer,x)}))}}}}}})(i,l);if(x_(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Kd(i)}`)})(s,e)}function J_(s,e){const n={};return Dw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(s,((i,l)=>{const u=Ru(l,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function Z_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof pt||s instanceof ua||s instanceof yr||s instanceof is||s instanceof Cu||s instanceof Lr||x_(s))}function yy(s,e,n){if(!Z_(n)||!Mw(n)){const i=Kd(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Ro(s,e,n){if((e=$n(e))instanceof fy)return e._internalPath;if(typeof e=="string")return ek(s,e);throw Vd("Field path arguments must be of type string or ",s,!1,void 0,n)}const eI=new RegExp("[~\\*/\\[\\]]");function ek(s,e,n){if(e.search(eI)>=0)throw Vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new fy(...e.split("."))._internalPath}catch{throw Vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Vd(s,e,n,i,l){const u=i&&!i.isEmpty(),h=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${l}`),g+=")"),new tt(je.INVALID_ARGUMENT,p+s+g)}function tk(s,e){return s.some((n=>n.isEqual(e)))}class tI{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return as(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ct(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return zi(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[Ad].arrayValue?.values?.map((i=>as(i.doubleValue)));return new Lr(n)}convertGeoPoint(e){return new ua(as(e.latitude),as(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Xd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){const n=Di(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Pn.fromString(e);kn(b_(i),9688,{name:e});const l=new cu(i.get(1),i.get(3)),u=new wt(i.popFirst(5));return l.isEqual(n)||Ba(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class nk extends tI{constructor(e){super(),this.firestore=e}convertBytes(e){return new yr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new is(this.firestore,null,n)}}function sa(){return new py("serverTimestamp")}function Al(s){return new gy("increment",s)}const F2="@firebase/firestore",q2="4.10.0";class sk{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new is(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Ro("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nI extends sk{data(){return super.data()}}function sI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new tt(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vy{}class by extends vy{}function An(s,e,...n){let i=[];e instanceof vy&&i.push(e),i=i.concat(n),(function(u){const h=u.filter((g=>g instanceof xy)).length,p=u.filter((g=>g instanceof uf)).length;if(h>1||h>0&&p>0)throw new tt(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class uf extends by{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new uf(e,n,i)}_apply(e){const n=this._parse(e);return rk(e._query,n),new qi(e.firestore,e.converter,ag(e._query,n))}_parse(e){const n=lf(e.firestore);return(function(u,h,p,g,y,x,k){let j;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new tt(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){$2(k,x);const $=[];for(const U of k)$.push(H2(g,u,U));j={arrayValue:{values:$}}}else j=H2(g,u,k)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||$2(k,x),j=ZM(p,h,k,x==="in"||x==="not-in");return ds.create(y,x,j)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vn(s,e,n){const i=e,l=Ro("where",s);return uf._create(l,i,n)}class xy extends vy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xy(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let h=l;const p=u.getFlattenedFilters();for(const g of p)rk(h,g),h=ag(h,g)})(e._query,n),new qi(e.firestore,e.converter,ag(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wy extends by{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wy(e,n)}_apply(e){const n=(function(l,u,h){if(l.startAt!==null)throw new tt(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new tt(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hu(u,h)})(e._query,this._field,this._direction);return new qi(e.firestore,e.converter,CR(e._query,n))}}function Bd(s,e="asc"){const n=e,i=Ro("orderBy",s);return wy._create(i,n)}class _y extends by{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new _y(e,n,i)}_apply(e){return new qi(e.firestore,e.converter,Id(e._query,this._limit,this._limitType))}}function Ud(s){return eR("limit",s),_y._create("limit",s,"F")}function H2(s,e,n){if(typeof(n=$n(n))=="string"){if(n==="")throw new tt(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yw(e)&&n.indexOf("/")!==-1)throw new tt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Pn.fromString(n));if(!wt.isDocumentKey(i))throw new tt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return a2(s,new wt(i))}if(n instanceof is)return a2(s,n._key);throw new tt(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kd(n)}.`)}function $2(s,e){if(!Array.isArray(s)||s.length===0)throw new tt(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rk(s,e){const n=(function(l,u){for(const h of l)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new tt(je.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new tt(je.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function ak(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class Yc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wo extends sk{constructor(e,n,i,l,u,h){super(e,n,i,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Ro("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(je.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",wo._jsonSchema={type:fs("string",wo._jsonSchemaVersion),bundleSource:fs("string","DocumentSnapshot"),bundleName:fs("string"),bundle:fs("string")};class vd extends wo{data(e={}){return super.data(e)}}class Ml{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Yc(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new vd(this._firestore,this._userDataWriter,i.key,i,new Yc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new tt(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((p=>{const g=new vd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Yc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new vd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Yc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,x=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),x=h.indexOf(p.doc.key)),{type:rI(p.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(je.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ml._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function rI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct(61501,{type:s})}}Ml._jsonSchemaVersion="firestore/querySnapshot/1.0",Ml._jsonSchema={type:fs("string",Ml._jsonSchemaVersion),bundleSource:fs("string","QuerySnapshot"),bundleName:fs("string"),bundle:fs("string")};function Ln(s){s=Vr(s,is);const e=Vr(s.firestore,Lo),n=dy(e);return UM(n,s._key).then((i=>aI(e,s,i)))}function _n(s){s=Vr(s,qi);const e=Vr(s.firestore,Lo),n=dy(e),i=new nk(e);return sI(s._query),zM(n,s._query).then((l=>new Ml(e,i,s,l)))}function Rn(s,e,n){s=Vr(s,is);const i=Vr(s.firestore,Lo),l=ak(s.converter,e,n),u=lf(i);return hf(i,[X_(u,"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,vr.none())])}function _o(s,e,n,...i){s=Vr(s,is);const l=Vr(s.firestore,Lo),u=lf(l);let h;return h=typeof(e=$n(e))=="string"||e instanceof fy?JM(u,"updateDoc",s._key,e,n,i):XM(u,"updateDoc",s._key,e),hf(l,[h.toMutation(s._key,vr.exists(!0))])}function Ks(s){return hf(Vr(s.firestore,Lo),[new Yg(s._key,vr.none())])}function Ao(s,e){const n=Vr(s.firestore,Lo),i=et(s),l=ak(s.converter,e),u=lf(s.firestore);return hf(n,[X_(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,vr.exists(!1))]).then((()=>i))}function hf(s,e){const n=dy(s);return FM(n,e)}function aI(s,e,n){const i=n.docs.get(e._key),l=new nk(s);return new wo(s,l,e._key,i,new Yc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){FC(Io),jo(new Mi("firestore",((i,{instanceIdentifier:l,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new Lo(new $C(i.getProvider("auth-internal")),new KC(h,i.getProvider("app-check-internal")),dR(h,l),h);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),aa(F2,q2,e),aa(F2,q2,"esm2020")})();var iI="firebase",oI="12.8.0";aa(iI,oI,"app");const ik="firebasestorage.googleapis.com",ok="storageBucket",lI=120*1e3,cI=600*1e3;class ts extends da{constructor(e,n,i=0){super(Sp(e),`Firebase Storage: ${n} (${Sp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ts.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var es;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(es||(es={}));function Sp(s){return"storage/"+s}function ky(){const s="An unknown error occurred, please check the error payload for server response.";return new ts(es.UNKNOWN,s)}function uI(s){return new ts(es.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function hI(s){return new ts(es.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ts(es.UNAUTHENTICATED,s)}function fI(){return new ts(es.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mI(s){return new ts(es.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function pI(){return new ts(es.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gI(){return new ts(es.CANCELED,"User canceled the upload/download.")}function yI(s){return new ts(es.INVALID_URL,"Invalid URL '"+s+"'.")}function vI(s){return new ts(es.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function bI(){return new ts(es.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ok+"' property when initializing the app?")}function xI(){return new ts(es.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wI(){return new ts(es.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _I(s){return new ts(es.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pg(s){return new ts(es.INVALID_ARGUMENT,s)}function lk(){return new ts(es.APP_DELETED,"The Firebase app was deleted.")}function kI(s){return new ts(es.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nu(s,e){return new ts(es.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function zc(s){throw new ts(es.INTERNAL_ERROR,"Internal error: "+s)}class Bs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Bs.makeFromUrl(e,n)}catch{return new Bs(e,"")}if(i.path==="")return i;throw vI(e)}static makeFromUrl(e,n){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(_e){_e.path.charAt(_e.path.length-1)==="/"&&(_e.path_=_e.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+l+h,"i"),g={bucket:1,path:3};function y(_e){_e.path_=decodeURIComponent(_e.path)}const x="v[A-Za-z0-9_]+",k=n.replace(/[.]/g,"\\."),j="(/([^?#]*).*)?$",L=new RegExp(`^https?://${k}/${x}/b/${l}/o${j}`,"i"),$={bucket:1,path:3},U=n===ik?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",ne=new RegExp(`^https?://${U}/${l}/${V}`,"i"),ce=[{regex:p,indices:g,postModify:u},{regex:L,indices:$,postModify:y},{regex:ne,indices:{bucket:1,path:2},postModify:y}];for(let _e=0;_e<ce.length;_e++){const Ve=ce[_e],Ae=Ve.regex.exec(e);if(Ae){const M=Ae[Ve.indices.bucket];let E=Ae[Ve.indices.path];E||(E=""),i=new Bs(M,E),Ve.postModify(i);break}}if(i==null)throw yI(e);return i}}class TI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function jI(s,e,n){let i=1,l=null,u=null,h=!1,p=0;function g(){return p===2}let y=!1;function x(...V){y||(y=!0,e.apply(null,V))}function k(V){l=setTimeout(()=>{l=null,s(L,g())},V)}function j(){u&&clearTimeout(u)}function L(V,...ne){if(y){j();return}if(V){j(),x.call(null,V,...ne);return}if(g()||h){j(),x.call(null,V,...ne);return}i<64&&(i*=2);let ce;p===1?(p=2,ce=0):ce=(i+Math.random())*1e3,k(ce)}let $=!1;function U(V){$||($=!0,j(),!y&&(l!==null?(V||(p=2),clearTimeout(l),k(0)):V||(p=1)))}return k(0),u=setTimeout(()=>{h=!0,U(!0)},n),U}function EI(s){s(!1)}function SI(s){return s!==void 0}function NI(s){return typeof s=="object"&&!Array.isArray(s)}function Ty(s){return typeof s=="string"||s instanceof String}function W2(s){return jy()&&s instanceof Blob}function jy(){return typeof Blob<"u"}function gg(s,e,n,i){if(i<e)throw pg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw pg(`Invalid value for '${s}'. Expected ${n} or less.`)}function df(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function ck(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);n=n+l+"&"}return n=n.slice(0,-1),n}var ko;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(ko||(ko={}));function CI(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class RI{constructor(e,n,i,l,u,h,p,g,y,x,k,j=!0,L=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=k,this.retry=j,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(($,U)=>{this.resolve_=$,this.reject_=U,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new Zh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===ko.NO_ERROR,g=u.getStatus();if(!p||CI(g,this.additionalRetryCodes_)&&this.retry){const x=u.getErrorCode()===ko.ABORT;i(!1,new Zh(!1,null,x));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new Zh(y,u))})},n=(i,l)=>{const u=this.resolve_,h=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());SI(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=ky();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(l.canceled){const g=this.appDelete_?lk():gI();h(g)}else{const g=pI();h(g)}};this.canceled_?n(!1,new Zh(!1,null,!0)):this.backoffId_=jI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&EI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function AI(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function MI(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function II(s,e){e&&(s["X-Firebase-GMPID"]=e)}function DI(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function PI(s,e,n,i,l,u,h=!0,p=!1){const g=ck(s.urlParams),y=s.url+g,x=Object.assign({},s.headers);return II(x,e),AI(x,n),MI(x,u),DI(x,i),new RI(y,s.method,x,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,h,p)}function LI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function OI(...s){const e=LI();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(jy())return new Blob(s);throw new ts(es.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function VI(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function BI(s){if(typeof atob>"u")throw _I("base-64");return atob(s)}const ra={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Np{constructor(e,n){this.data=e,this.contentType=n||null}}function UI(s,e){switch(s){case ra.RAW:return new Np(uk(e));case ra.BASE64:case ra.BASE64URL:return new Np(hk(s,e));case ra.DATA_URL:return new Np(FI(e),qI(e))}throw ky()}function uk(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++n);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function zI(s){let e;try{e=decodeURIComponent(s)}catch{throw nu(ra.DATA_URL,"Malformed data URL.")}return uk(e)}function hk(s,e){switch(s){case ra.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw nu(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case ra.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw nu(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=BI(e)}catch(l){throw l.message.includes("polyfill")?l:nu(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i}class dk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nu(ra.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=HI(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function FI(s){const e=new dk(s);return e.base64?hk(ra.BASE64,e.rest):zI(e.rest)}function qI(s){return new dk(s).contentType}function HI(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Ei{constructor(e,n){let i=0,l="";W2(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(W2(this.data_)){const i=this.data_,l=VI(i,e,n);return l===null?null:new Ei(l)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ei(i,!0)}}static getBlob(...e){if(jy()){const n=e.map(i=>i instanceof Ei?i.data_:i);return new Ei(OI.apply(null,n))}else{const n=e.map(h=>Ty(h)?UI(ra.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const l=new Uint8Array(i);let u=0;return n.forEach(h=>{for(let p=0;p<h.length;p++)l[u++]=h[p]}),new Ei(l,!0)}}uploadData(){return this.data_}}function Ey(s){let e;try{e=JSON.parse(s)}catch{return null}return NI(e)?e:null}function $I(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function WI(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function fk(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function GI(s,e){return e}class Vs{constructor(e,n,i,l){this.server=e,this.local=n||e,this.writable=!!i,this.xform=l||GI}}let ed=null;function KI(s){return!Ty(s)||s.length<2?s:fk(s)}function mk(){if(ed)return ed;const s=[];s.push(new Vs("bucket")),s.push(new Vs("generation")),s.push(new Vs("metageneration")),s.push(new Vs("name","fullPath",!0));function e(u,h){return KI(h)}const n=new Vs("name");n.xform=e,s.push(n);function i(u,h){return h!==void 0?Number(h):h}const l=new Vs("size");return l.xform=i,s.push(l),s.push(new Vs("timeCreated")),s.push(new Vs("updated")),s.push(new Vs("md5Hash",null,!0)),s.push(new Vs("cacheControl",null,!0)),s.push(new Vs("contentDisposition",null,!0)),s.push(new Vs("contentEncoding",null,!0)),s.push(new Vs("contentLanguage",null,!0)),s.push(new Vs("contentType",null,!0)),s.push(new Vs("metadata","customMetadata",!0)),ed=s,ed}function YI(s,e){function n(){const i=s.bucket,l=s.fullPath,u=new Bs(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function QI(s,e,n){const i={};i.type="file";const l=n.length;for(let u=0;u<l;u++){const h=n[u];i[h.local]=h.xform(i,e[h.server])}return YI(i,s),i}function pk(s,e,n){const i=Ey(e);return i===null?null:QI(s,i,n)}function XI(s,e,n,i){const l=Ey(e);if(l===null||!Ty(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(y=>{const x=s.bucket,k=s.fullPath,j="/b/"+h(x)+"/o/"+h(k),L=df(j,n,i),$=ck({alt:"media",token:y});return L+$})[0]}function JI(s,e){const n={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}const G2="prefixes",K2="items";function ZI(s,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[G2])for(const l of n[G2]){const u=l.replace(/\/$/,""),h=s._makeStorageReference(new Bs(e,u));i.prefixes.push(h)}if(n[K2])for(const l of n[K2]){const u=s._makeStorageReference(new Bs(e,l.name));i.items.push(u)}return i}function e3(s,e,n){const i=Ey(n);return i===null?null:ZI(s,e,i)}class Sy{constructor(e,n,i,l){this.url=e,this.method=n,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ny(s){if(!s)throw ky()}function t3(s,e){function n(i,l){const u=pk(s,l,e);return Ny(u!==null),u}return n}function n3(s,e){function n(i,l){const u=e3(s,e,l);return Ny(u!==null),u}return n}function s3(s,e){function n(i,l){const u=pk(s,l,e);return Ny(u!==null),XI(u,l,s.host,s._protocol)}return n}function Cy(s){function e(n,i){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=fI():l=dI():n.getStatus()===402?l=hI(s.bucket):n.getStatus()===403?l=mI(s.path):l=i,l.status=n.getStatus(),l.serverResponse=i.serverResponse,l}return e}function r3(s){const e=Cy(s);function n(i,l){let u=e(i,l);return i.getStatus()===404&&(u=uI(s.path)),u.serverResponse=l.serverResponse,u}return n}function a3(s,e,n,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),i&&(u.pageToken=i),l&&(u.maxResults=l);const h=e.bucketOnlyServerUrl(),p=df(h,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,x=new Sy(p,g,n3(s,e.bucket),y);return x.urlParams=u,x.errorHandler=Cy(e),x}function i3(s,e,n){const i=e.fullServerUrl(),l=df(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new Sy(l,u,s3(s,n),h);return p.errorHandler=r3(e),p}function o3(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function l3(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=o3(null,e)),i}function c3(s,e,n,i,l){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let ce="";for(let _e=0;_e<2;_e++)ce=ce+Math.random().toString().slice(2);return ce}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const y=l3(e,i,l),x=JI(y,n),k="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,j=`\r
--`+g+"--",L=Ei.getBlob(k,i,j);if(L===null)throw xI();const $={name:y.fullPath},U=df(u,s.host,s._protocol),V="POST",ne=s.maxUploadRetryTime,X=new Sy(U,V,t3(s,n),ne);return X.urlParams=$,X.headers=h,X.body=L.uploadData(),X.errorHandler=Cy(e),X}class u3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ko.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ko.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ko.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,l,u){if(this.sent_)throw zc("cannot .send() more than once");if(Bi(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class h3 extends u3{initXhr(){this.xhr_.responseType="text"}}function Ry(){return new h3}class Mo{constructor(e,n){this._service=e,n instanceof Bs?this._location=n:this._location=Bs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Mo(e,n)}get root(){const e=new Bs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fk(this._location.path)}get storage(){return this._service}get parent(){const e=$I(this._location.path);if(e===null)return null;const n=new Bs(this._location.bucket,e);return new Mo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw kI(e)}}function d3(s,e,n){s._throwIfRoot("uploadBytes");const i=c3(s.storage,s._location,mk(),new Ei(e,!0),n);return s.storage.makeRequestWithTokens(i,Ry).then(l=>({metadata:l,ref:s}))}function f3(s){const e={prefixes:[],items:[]};return gk(s,e).then(()=>e)}async function gk(s,e,n){const l=await m3(s,{pageToken:n});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await gk(s,e,l.nextPageToken)}function m3(s,e){e!=null&&typeof e.maxResults=="number"&&gg("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=a3(s.storage,s._location,"/",n.pageToken,n.maxResults);return s.storage.makeRequestWithTokens(i,Ry)}function p3(s){s._throwIfRoot("getDownloadURL");const e=i3(s.storage,s._location,mk());return s.storage.makeRequestWithTokens(e,Ry).then(n=>{if(n===null)throw wI();return n})}function g3(s,e){const n=WI(s._location.path,e),i=new Bs(s._location.bucket,n);return new Mo(s.storage,i)}function y3(s){return/^[A-Za-z]+:\/\//.test(s)}function v3(s,e){return new Mo(s,e)}function yk(s,e){if(s instanceof Ay){const n=s;if(n._bucket==null)throw bI();const i=new Mo(n,n._bucket);return e!=null?yk(i,e):i}else return e!==void 0?g3(s,e):s}function b3(s,e){if(e&&y3(e)){if(s instanceof Ay)return v3(s,e);throw pg("To use ref(service, url), the first argument must be a Storage instance.")}else return yk(s,e)}function Y2(s,e){const n=e?.[ok];return n==null?null:Bs.makeFromBucketSpec(n,s)}function x3(s,e,n,i={}){s.host=`${e}:${n}`;const l=Bi(e);l&&(jg(`https://${s.host}/b`),Eg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:Ox(u,s.app.options.projectId))}class Ay{constructor(e,n,i,l,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=ik,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lI,this._maxUploadRetryTime=cI,this._requests=new Set,l!=null?this._bucket=Bs.makeFromBucketSpec(l,this._host):this._bucket=Y2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bs.makeFromBucketSpec(this._url,e):this._bucket=Y2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mo(this,e)}_makeRequest(e,n,i,l,u=!0){if(this._deleted)return new TI(lk());{const h=PI(e,this._appId,i,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,l).getPromise()}}const Q2="@firebase/storage",X2="0.14.0";const vk="storage";function bk(s,e,n){return s=$n(s),d3(s,e,n)}function J2(s){return s=$n(s),f3(s)}function Il(s){return s=$n(s),p3(s)}function vo(s,e){return s=$n(s),b3(s,e)}function w3(s=Rg(),e){s=$n(s);const i=Hd(s,vk).getImmediate({identifier:e}),l=Dx("storage");return l&&_3(i,...l),i}function _3(s,e,n,i={}){x3(s,e,n,i)}function k3(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new Ay(n,i,l,e,Io)}function T3(){jo(new Mi(vk,k3,"PUBLIC").setMultipleInstances(!0)),aa(Q2,X2,""),aa(Q2,X2,"esm2020")}T3();const xk={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},My=Cg(xk),Fc=_w(My),Se=WM(My),bo=w3(My),j3=Cg(xk,"secondary"),zD=_w(j3),E3="EYdciKDOi3UYBLk1u8hHams5tmO2",wk=_.createContext();function ar(){return _.useContext(wk)}function S3({children:s}){const[e,n]=_.useState(null),[i,l]=_.useState(!1),[u,h]=_.useState(!1),[p,g]=_.useState(null),[y,x]=_.useState(!0);_.useEffect(()=>R4(Fc,async ne=>{if(n(ne),ne)if(ne.uid===E3)l(!0),h(!1),g(null);else{l(!1);try{const X=An(Yt(Se,"clients"),vn("uid","==",ne.uid)),ce=await _n(X);if(ce.empty)h(!1),g(null);else{const _e=ce.docs[0];h(!0),g({id:_e.id,..._e.data()})}}catch(X){console.error("Error fetching client data:",X),h(!1),g(null)}}else l(!1),h(!1),g(null);x(!1)}),[]);const U={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:V=>{g(ne=>ne&&{...ne,...V})},login:async(V,ne,X=!0)=>(await S4(Fc,X?mw:Og),await E4(Fc,V,ne)),logout:()=>A4(Fc),resetPassword:V=>j4(Fc,V),loading:y};return a.jsx(wk.Provider,{value:U,children:s})}const _k=_.createContext();function qr(){return _.useContext(_k)}function N3({children:s}){const[e,n]=_.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=_.useState(()=>localStorage.getItem("accent")||"red");_.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),_.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(_k.Provider,{value:p,children:s})}function C3(){const[s,e]=_.useState(""),[n,i]=_.useState(""),[l,u]=_.useState(!0),[h,p]=_.useState(""),[g,y]=_.useState(!1),[x,k]=_.useState(!1),[j,L]=_.useState(!1),{login:$,resetPassword:U,currentUser:V,isAdmin:ne,isClient:X,clientData:ce,loading:_e}=ar(),Ve=Ss();if(_.useEffect(()=>{if(!_e&&V){if(ne)Ve("/dashboard");else if(X){const E=ce?.clientType;Ve(E==="core_buddy"?"/client/core-buddy":E==="circuit_vip"||E==="circuit_dropin"?"/client/circuit":"/client")}}},[_e,V,ne,X,ce,Ve]),_e)return null;const Ae=async E=>{E.preventDefault(),p(""),y(!0);try{await $(s,n,l)}catch(A){p(A.message||"Failed to log in"),y(!1)}},M=async E=>{if(E.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await U(s.trim()),L(!0)}catch(A){A.code==="auth/user-not-found"?p("No account found with this email"):p(A.message||"Failed to send reset email")}y(!1)};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:x?"Reset Password":"Client Portal"})]}),h&&a.jsx("div",{className:"error-message",children:h}),j?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{k(!1),L(!1),p("")},children:"Back to Log In"})]}):x?a.jsxs("form",{onSubmit:M,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:E=>e(E.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:Ae,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:E=>e(E.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:n,onChange:E=>i(E.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:E=>u(E.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!0),p("")},children:"Forgot password?"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Ur({active:s}){const e=Ss(),{clientData:n}=ar(),i=n?.clientType==="block"&&n?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"})}),a.jsx("span",{children:"Workouts"})]}),a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),i&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Au(s,e,n,i,l){const u=[];for(let h=0;h<s;h++){const p=(h*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:n+i*Math.sin(p),x2:e+l*Math.cos(p),y2:n+l*Math.sin(p),thick:h%5===0})}return u}const Iy=Au(60,100,100,85,96),xo=Au(60,100,100,78,94),R3=Au(60,100,100,82,94);Au(60,50,50,38,46);const A3=Au(60,40,40,30,37),Cp=[10,25,50,100,200,500,1e3],xi=5;function yl(s){return s.toISOString().split("T")[0]}function M3(s){let e=0;for(const n of Cp){if(s<n)return{prev:e,next:n};e=n}return{prev:Cp[Cp.length-1],next:s+100}}const I3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},D3={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},Rp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}],$s={first_workout:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 4v16"}),a.jsx("path",{d:"M18 4v16"}),a.jsx("path",{d:"M6 12h12"}),a.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),a.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]}),workouts_10:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),a.jsx("path",{d:"M12 14v4"}),a.jsx("path",{d:"M10 18h4"})]}),workouts_25:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),workouts_50:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12h4"}),a.jsx("path",{d:"M16 12h4"}),a.jsx("path",{d:"M12 4v4"}),a.jsx("path",{d:"M12 16v4"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]}),workouts_100:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),streak_2:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M9 16l2 2 4-4"})]}),streak_4:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M8 16h8"}),a.jsx("path",{d:"M12 14v4"})]}),streak_8:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),a.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]}),programme_done:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("path",{d:"M4 22h16"}),a.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),a.jsx("path",{d:"M9 12l2 2 4-4"})]}),habits_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),nutrition_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),a.jsx("path",{d:"M9 7h6"})]}),first_pb:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M12 14v8"}),a.jsx("path",{d:"M9 18l3 3 3-3"}),a.jsx("path",{d:"M10 6l2 2 2-2"})]}),pbs_5:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 20h18"}),a.jsx("path",{d:"M5 20V10l4-6"}),a.jsx("path",{d:"M9 20V4"}),a.jsx("path",{d:"M13 20V10l4-6"}),a.jsx("path",{d:"M17 20V4"}),a.jsx("path",{d:"M21 20V10"})]}),leaderboard_join:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},Z2=[{id:"first_workout",icon:$s.first_workout,name:"First Rep",desc:"Complete your first workout",category:"workouts"},{id:"workouts_10",icon:$s.workouts_10,name:"On Fire",desc:"Complete 10 workouts",category:"workouts"},{id:"workouts_25",icon:$s.workouts_25,name:"Lightning",desc:"Complete 25 workouts",category:"workouts"},{id:"workouts_50",icon:$s.workouts_50,name:"Iron Will",desc:"Complete 50 workouts",category:"workouts"},{id:"workouts_100",icon:$s.workouts_100,name:"Century Club",desc:"Complete 100 workouts",category:"workouts"},{id:"streak_2",icon:$s.streak_2,name:"2 Week Warrior",desc:"2-week workout streak",category:"streak"},{id:"streak_4",icon:$s.streak_4,name:"Month Strong",desc:"4-week workout streak",category:"streak"},{id:"streak_8",icon:$s.streak_8,name:"Unbreakable",desc:"8-week workout streak",category:"streak"},{id:"programme_done",icon:$s.programme_done,name:"Finisher",desc:"Complete a programme",category:"programme"},{id:"habits_7",icon:$s.habits_7,name:"Habit Machine",desc:"7-day perfect habit streak",category:"habits"},{id:"nutrition_7",icon:$s.nutrition_7,name:"Fuel Master",desc:"Log nutrition 7 days in a row",category:"nutrition"},{id:"first_pb",icon:$s.first_pb,name:"Record Breaker",desc:"Set your first PB",category:"pbs"},{id:"pbs_5",icon:$s.pbs_5,name:"Climbing",desc:"Set 5 personal bests",category:"pbs"},{id:"leaderboard_join",icon:$s.leaderboard_join,name:"Competitor",desc:"Join the leaderboard",category:"social"}];function P3(){const{currentUser:s,isClient:e,clientData:n,logout:i,updateClientData:l,loading:u}=ar(),{isDark:h,toggleTheme:p}=qr(),g=Ss(),[y,x]=_.useState({hours:0,minutes:0,seconds:0}),[k,j]=_.useState(0),[L,$]=_.useState(0),[U,V]=_.useState(""),[ne,X]=_.useState(0),[ce,_e]=_.useState(0),[Ve,Ae]=_.useState(!1),[M,E]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[A,P]=_.useState(null),[D,F]=_.useState(0),[I,Fe]=_.useState(null),[bt,Y]=_.useState(!1),[ke,Ie]=_.useState(!1),[le,De]=_.useState(0),[N,B]=_.useState(0),[ie,pe]=_.useState([]),[Ne,Me]=_.useState([]),[Ze,qe]=_.useState(null),[rt,Bt]=_.useState(!1),Jt=_.useRef(null),[ct,gt]=_.useState([]),[ae,un]=_.useState(null),[It,_t]=_.useState(0),[Et,ut]=_.useState(0),[Je,Gt]=_.useState(0),[Qn,Mt]=_.useState(0),[Pt,Dn]=_.useState(null),qt=_.useCallback((xe,ze="info")=>{Dn({message:xe,type:ze}),setTimeout(()=>Dn(null),4e3)},[]);_.useEffect(()=>{!u&&!s&&g("/")},[u,s,g]),_.useEffect(()=>{if(n)try{const xe=sessionStorage.getItem(`cbDash_${n.id}`);if(xe){const ze=JSON.parse(xe);$(ze.programmePct??0),V(ze.programmeName??""),X(ze.totalWorkouts??0),_e(ze.habitWeekPct??0),E(ze.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),P(ze.nutritionTargetData??null),F(ze.todayHabitsCount??0),Fe(ze.nextSession??null),Y(ze.hasProgramme??!1),Ie(ze.programmeComplete??!1),De(ze.weeklyWorkouts??0),B(ze.pbCount??0),pe(ze.topPBs??[]),Me(ze.leaderboardTop3??[]),gt(ze.unlockedBadges??[]),_t(ze.streakWeeks??0),Ae(!0)}}catch{}},[n]),_.useEffect(()=>{n?.photoURL&&qe(n.photoURL)},[n]);const bn=async xe=>{const ze=xe.target.files?.[0];if(!(!ze||!n)){if(!ze.type.startsWith("image/")){qt("Please select an image file","error");return}if(ze.size>5*1024*1024){qt("Image must be under 5MB","error");return}Bt(!0);try{const at=await new Promise(Qe=>{const ht=new Image;ht.onload=()=>{const dt=document.createElement("canvas"),Rt=400;let Lt=ht.width,kt=ht.height;Lt>kt?(kt=kt/Lt*Rt,Lt=Rt):(Lt=Lt/kt*Rt,kt=Rt),dt.width=Lt,dt.height=kt,dt.getContext("2d").drawImage(ht,0,0,Lt,kt),dt.toBlob(Kt=>Qe(Kt),"image/jpeg",.75)},ht.src=URL.createObjectURL(ze)}),St=vo(bo,`profilePhotos/${n.id}`);await bk(St,at);const Wt=await Il(St);await _o(et(Se,"clients",n.id),{photoURL:Wt}),qe(Wt),l({photoURL:Wt}),qt("Profile photo updated!","success")}catch(at){console.error("Photo upload error:",at),qt("Failed to upload photo","error")}Bt(!1),Jt.current&&(Jt.current.value="")}};_.useEffect(()=>{const xe=()=>{const at=new Date,St=new Date(at);St.setHours(23,59,59,999);const Wt=St-at,Qe=Math.floor(Wt/(1e3*60*60)),ht=Math.floor(Wt%(1e3*60*60)/(1e3*60)),dt=Math.floor(Wt%(1e3*60)/1e3);x({hours:Qe,minutes:ht,seconds:dt}),j(60-dt)};xe();const ze=setInterval(xe,1e3);return()=>clearInterval(ze)},[]),_.useEffect(()=>{const xe=setInterval(()=>{Mt(ze=>(ze+1)%Rp.length)},8e3);return()=>clearInterval(xe)},[]),_.useEffect(()=>{if(!s||!n)return;(async()=>{let ze=null,at=0,St=[],Wt=!1;try{const Qe=yl(new Date),ht=await Ln(et(Se,"clientProgrammes",n.id));if(ht.exists()){const Xe=ht.data(),yt=I3[Xe.templateId];if(Y(!0),yt){const nt=Xe.completedSessions||{},mt=Object.keys(nt).length,vt=yt.duration*yt.daysPerWeek;$(vt>0?Math.round(mt/vt*100):0);const on=Xe.templateId.replace(/_/g," ").replace(/\b\w/g,Xn=>Xn.toUpperCase());V(on);const Ns=D3[Xe.templateId];let Wn=!1;for(let Xn=1;Xn<=yt.duration&&!Wn;Xn++)for(let mn=0;mn<yt.daysPerWeek&&!Wn;mn++)nt[`w${Xn}d${mn}`]||(Fe({week:Xn,dayIdx:mn,label:Ns?.[mn]||`Day ${mn+1}`}),Wn=!0);Wn||(Ie(!0),Wt=!0)}}const dt=Yt(Se,"workoutLogs"),Rt=An(dt,vn("clientId","==",n.id));ze=await _n(Rt);const Lt=ze.docs.filter(Xe=>Xe.data().type!=="programme").length;X(Lt);const kt=new Date,Kt=kt.getDay(),Ht=Kt===0?6:Kt-1,an=new Date(kt);an.setDate(kt.getDate()-Ht),an.setHours(0,0,0,0);const hn=yl(an),fn=ze.docs.filter(Xe=>(Xe.data().date||"")>=hn).length;De(fn);const Mn=Yt(Se,"habitLogs"),H=An(Mn,vn("clientId","==",n.id),vn("date","==",Qe)),ge=await _n(H);let ve=0;if(!ge.empty){const Xe=ge.docs[0].data().habits||{};ve=Object.values(Xe).filter(Boolean).length}_e(Math.round(ve/xi*100)),F(ve);const we=await Ln(et(Se,"nutritionTargets",n.id));we.exists()&&P(we.data());const me=await Ln(et(Se,"nutritionLogs",`${n.id}_${Qe}`));if(me.exists()){const yt=(me.data().entries||[]).reduce((nt,mt)=>({protein:nt.protein+(mt.protein||0),carbs:nt.carbs+(mt.carbs||0),fats:nt.fats+(mt.fats||0),calories:nt.calories+(mt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});E(yt)}}catch(Qe){console.error("Error loading dashboard stats:",Qe)}try{let Qe=[];const ht=await Ln(et(Se,"coreBuddyPBs",n.id));if(ht.exists()){const dt=ht.data().exercises||{};B(Object.keys(dt).length),at=Object.keys(dt).length,Qe=Object.entries(dt).sort(([,Rt],[,Lt])=>(Lt.weight||0)-(Rt.weight||0)).slice(0,3).map(([Rt,Lt])=>({name:Rt,weight:Lt.weight,reps:Lt.reps}))}if(Qe.length===0){const dt={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},Rt=An(Yt(Se,"personalBests"),vn("clientId","==",n.id)),Lt=await _n(Rt);if(!Lt.empty){const kt={};Lt.docs.forEach(Ht=>{const an=Ht.data().benchmarks||{};Object.entries(an).forEach(([hn,fn])=>{if(!fn.weight||!dt[hn])return;const Mn=(fn.weight||0)*(fn.reps||1);(!kt[hn]||Mn>(kt[hn].weight||0)*(kt[hn].reps||1))&&(kt[hn]={name:dt[hn],weight:fn.weight,reps:fn.reps})})});const Kt=Object.values(kt);B(Kt.length),at=Kt.length,Qe=Kt.sort((Ht,an)=>(an.weight||0)-(Ht.weight||0)).slice(0,3)}}St=Qe,pe(Qe)}catch(Qe){console.error("PB fetch error:",Qe)}try{const Qe=Yt(Se,"clients"),ht=An(Qe,vn("leaderboardOptIn","==",!0)),Rt=(await _n(ht)).docs.map(Lt=>({id:Lt.id,name:Lt.data().name,photoURL:Lt.data().photoURL||null}));Me(Rt.slice(0,3))}catch(Qe){console.error("Leaderboard preview error:",Qe)}try{let Qe=0;if(ze){const Ht=ze.docs.map(an=>an.data().date).filter(Boolean).sort().reverse();if(Ht.length>0){const an=new Date;let hn=new Date(an);e:for(let fn=0;fn<52;fn++){const Mn=new Date(hn),H=Mn.getDay(),ge=H===0?6:H-1;Mn.setDate(Mn.getDate()-ge),Mn.setHours(0,0,0,0);const ve=new Date(Mn);ve.setDate(ve.getDate()+7);const we=yl(Mn),me=yl(ve);if(Ht.some(yt=>yt>=we&&yt<me))Qe++;else{if(fn>0)break e;break}hn.setDate(hn.getDate()-7)}}}_t(Qe);let ht=0;for(let Ht=0;Ht<30;Ht++){const an=new Date;an.setDate(an.getDate()-Ht);const hn=yl(an);try{const fn=await _n(An(Yt(Se,"habitLogs"),vn("clientId","==",n.id),vn("date","==",hn)));if(fn.empty)break;{const Mn=fn.docs[0].data().habits||{};if(Object.values(Mn).filter(Boolean).length>=xi)ht++;else break}}catch{break}}ut(ht);let dt=0;for(let Ht=0;Ht<30;Ht++){const an=new Date;an.setDate(an.getDate()-Ht);const hn=yl(an);try{const fn=await Ln(et(Se,"nutritionLogs",`${n.id}_${hn}`));if(fn.exists()&&(fn.data().entries||[]).length>0)dt++;else break}catch{break}}Gt(dt);const Rt=ze?ze.docs.length:0,Lt=[],kt=Ht=>Lt.push(Ht);Rt>=1&&kt("first_workout"),Rt>=10&&kt("workouts_10"),Rt>=25&&kt("workouts_25"),Rt>=50&&kt("workouts_50"),Rt>=100&&kt("workouts_100"),Qe>=2&&kt("streak_2"),Qe>=4&&kt("streak_4"),Qe>=8&&kt("streak_8"),Wt&&kt("programme_done"),ht>=7&&kt("habits_7"),dt>=7&&kt("nutrition_7"),(at>0||St.length>0)&&kt("first_pb"),at>=5&&kt("pbs_5"),n.leaderboardOptIn&&kt("leaderboard_join"),gt(Lt);const Kt={};Lt.forEach(Ht=>{Kt[Ht]={unlockedAt:new Date().toISOString()}}),Rn(et(Se,"achievements",n.id),{badges:Kt,updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(Qe){console.error("Achievement computation error:",Qe)}Ae(!0)})()},[s,n]),_.useEffect(()=>{if(!(!Ve||!n))try{sessionStorage.setItem(`cbDash_${n.id}`,JSON.stringify({programmePct:L,programmeName:U,totalWorkouts:ne,habitWeekPct:ce,nutritionTotals:M,nutritionTargetData:A,todayHabitsCount:D,nextSession:I,hasProgramme:bt,programmeComplete:ke,weeklyWorkouts:le,pbCount:N,topPBs:ie,leaderboardTop3:Ne,unlockedBadges:ct,streakWeeks:It}))}catch{}},[Ve,L,U,ne,ce,M,A,D,I,bt,ke,le,N,ie,Ne,ct,It,n]);const O=xe=>{const ze=xe.currentTarget,at=ze.querySelector(".ripple");at&&at.remove();const St=ze.getBoundingClientRect(),Wt=Math.max(St.width,St.height),Qe=xe.clientX-St.left-Wt/2,ht=xe.clientY-St.top-Wt/2,dt=document.createElement("span");dt.className="ripple",dt.style.cssText=`width:${Wt}px;height:${Wt}px;left:${Qe}px;top:${ht}px;`,ze.appendChild(dt),setTimeout(()=>dt.remove(),600)},J=n?.name?.split(" ")[0]||"there",{prev:ye,next:He}=M3(ne),Ye=He>ye?Math.round((ne-ye)/(He-ye)*100):100,Be=[{label:"Programme",value:`${L}%`,pct:L,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${ne}`,pct:Ye,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${ce}%`,pct:ce,color:"#38B6FF",size:"normal"}],Ke=xe=>!A||!A[xe]?0:Math.min(Math.round(M[xe]/A[xe]*100),100),We=(()=>{const xe=new Date().getHours();return Ve&&D>=xi&&M.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:xe>=5&&xe<12?{main:"Rise and grind,",sub:"let's get after it!"}:xe>=12&&xe<17?{main:"Oye",sub:"crack on and make it count!"}:xe>=17&&xe<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),Le=Ve?bt&&I&&!ke?{label:"NEXT SESSION",message:`Week ${I.week}, Day ${I.dayIdx+1}  ${I.label}`,cta:"Continue",action:()=>g("/client/core-buddy/programmes"),pct:L,ringLabel:`${L}%`}:D<xi?{label:"DAILY HABITS",message:`${D}/${xi} completed`,cta:"Open Habits",action:()=>g("/client/core-buddy/consistency"),pct:ce,ringLabel:`${D}/${xi}`}:M.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>g("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:bt?ke?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>g("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>g("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null;return a.jsxs("div",{className:"cb-dashboard","data-theme":h?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:h?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:Iy.map((xe,ze)=>{const at=ze<k;return a.jsx("line",{x1:xe.x1,y1:xe.y1,x2:xe.x2,y2:xe.y2,className:`ring-tick ${at?"elapsed":"remaining"}`,strokeWidth:xe.thick?"3":"2"},ze)})}),a.jsx("div",{className:"cb-ring-center",children:a.jsxs("div",{className:"cb-ring-logo",onClick:()=>Jt.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:Ze||"/Logo.webp",alt:Ze?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${rt?" uploading":""}`,children:rt?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:Jt,type:"file",accept:"image/*",onChange:bn,style:{display:"none"}})]})})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(y.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(y.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(y.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Rp[Qn].text," ",a.jsx("strong",{children:Rp[Qn].bold})]},Qn)]}),a.jsx("div",{className:"cb-stats-row",children:Be.map(xe=>{const ze=(xe.size==="large",38),at=2*Math.PI*ze,St=at-xe.pct/100*at;return a.jsxs("div",{className:`cb-stat-item${xe.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:"cb-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:ze}),a.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:ze,style:{stroke:xe.color},strokeDasharray:at,strokeDashoffset:St})]}),a.jsx("span",{className:"cb-stat-value",style:{color:xe.color},children:xe.value})]}),a.jsx("span",{className:"cb-stat-label",children:xe.label})]},xe.label)})}),a.jsxs("p",{className:"cb-coach-msg",children:[We.main," ",a.jsx("strong",{children:J}),"  ",We.sub]}),Le&&a.jsxs("button",{className:"cb-nudge-card",onClick:Le.action||void 0,style:Le.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-Le.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:Le.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:Le.label}),a.jsx("span",{className:"cb-nudge-title",children:Le.message}),Le.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[Le.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[a.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:xe=>{O(xe),g("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:Ke("protein"),color:"#14b8a6"},{label:"C",pct:Ke("carbs"),color:"var(--color-primary)"},{label:"F",pct:Ke("fats"),color:"#eab308"},{label:"Cal",pct:Ke("calories"),color:"#38B6FF"}].map(xe=>{const at=2*Math.PI*38,St=at-xe.pct/100*at;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:xe.color},strokeDasharray:at,strokeDashoffset:St})]}),a.jsx("span",{style:{color:xe.color},children:xe.label})]},xe.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:xe=>{O(xe),g("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[le," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[ne," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-grid-row",children:[a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:xe=>{O(xe),g("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:"cb-habit-dots",children:Array.from({length:xi},(xe,ze)=>a.jsx("span",{className:`cb-habit-dot${ze<D?" done":""}`},ze))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[D,"/",xi," today"]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:xe=>{O(xe),g("/client/personal-bests?mode=corebuddy")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"PBs"}),ie.length>0?a.jsx("div",{className:"cb-pb-preview",children:ie.slice(0,2).map(xe=>a.jsxs("div",{className:"cb-pb-entry",children:[a.jsx("span",{className:"cb-pb-name",children:xe.name}),a.jsxs("span",{className:"cb-pb-value",children:[xe.weight,"kg"]})]},xe.name))}):a.jsxs("div",{className:"cb-progress-preview",children:[a.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{children:"Start lifting!"})]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:xe=>{O(xe),g("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),Ne.length>0?a.jsx("div",{className:"cb-lb-preview",children:Ne.map((xe,ze)=>{const at=["#FFD700","#A8B4C0","#CD7F32"][ze],St=xe.name?xe.name.split(" ").map(Qe=>Qe[0]).join("").slice(0,2).toUpperCase():"?",Wt=xe.id===n?.id;return a.jsxs("div",{className:`cb-lb-entry${Wt?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:at},children:xe.photoURL?a.jsx("img",{src:xe.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:St})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:at},children:["#",ze+1]})]},xe.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:xe=>{O(xe),g("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-feed ripple-btn",onClick:xe=>{O(xe),g("/client/core-buddy/feed")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Feed"}),a.jsx("p",{children:"See what your buddies are up to and share updates"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-achievements-section",children:[a.jsx("h3",{className:"cb-achievements-title",children:"Achievements"}),a.jsx("div",{className:"cb-badges-scroll",children:Z2.map(xe=>{const ze=ct.includes(xe.id);return a.jsxs("button",{className:`cb-badge${ze?" unlocked":" locked"}`,onClick:()=>un(ae?.id===xe.id?null:xe),children:[a.jsx("span",{className:"cb-badge-icon",children:xe.icon}),a.jsx("span",{className:"cb-badge-name",children:xe.name})]},xe.id)})}),ae&&a.jsxs("div",{className:"cb-badge-detail",children:[a.jsx("span",{className:"cb-badge-detail-icon",children:ae.icon}),a.jsxs("div",{className:"cb-badge-detail-info",children:[a.jsx("strong",{children:ae.name}),a.jsx("span",{children:ae.desc}),ct.includes(ae.id)?a.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):a.jsx("span",{className:"cb-badge-status locked",children:"Locked"})]})]}),a.jsxs("p",{className:"cb-badges-count",children:[ct.length,"/",Z2.length," unlocked"]})]})]})]}),a.jsx(Ur,{active:"home"}),Pt&&a.jsxs("div",{className:`toast-notification ${Pt.type}`,children:[Pt.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Pt.message]})]})}const Ap=new Map;function wi(){return new Date().toISOString().split("T")[0]}const ex=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],L3={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function O3(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function V3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=ar(),{isDark:l,toggleTheme:u,accent:h}=qr(),p=Ss(),[g,y]=_.useState("loading"),[x,k]=_.useState(null),[j,L]=_.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[$,U]=_.useState(null),[V,ne]=_.useState(wi()),[X,ce]=_.useState({entries:[],water:0}),[_e,Ve]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[Ae,M]=_.useState(!1),[E,A]=_.useState(!1),[P,D]=_.useState(()=>{const T=new Date;return{year:T.getFullYear(),month:T.getMonth()}}),[F,I]=_.useState(O3),[Fe,bt]=_.useState(null),[Y,ke]=_.useState(null),[Ie,le]=_.useState(!1),[De,N]=_.useState(null),[B,ie]=_.useState(""),[pe,Ne]=_.useState(!1),[Me,Ze]=_.useState(""),[qe,rt]=_.useState([]),[Bt,Jt]=_.useState(!1),[ct,gt]=_.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[ae,un]=_.useState(null),[It,_t]=_.useState("100"),[Et,ut]=_.useState(0),[Je,Gt]=_.useState("weight"),[Qn,Mt]=_.useState(0),[Pt,Dn]=_.useState(null);_.useRef(null);const qt=_.useRef(!1),bn=_.useRef(null),O=_.useRef(null),J=_.useRef(null),ye=_.useCallback((T,R="info")=>{Dn({message:T,type:R}),setTimeout(()=>Dn(null),3e3)},[]);_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const R=await Ln(et(Se,"nutritionTargets",n.id));R.exists()?(k(R.data()),y("dashboard")):y("setup")}catch(R){console.error("Error loading nutrition data:",R),y("setup")}})()},[n?.id]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const R=await Ln(et(Se,"nutritionLogs",`${n.id}_${V}`));if(R.exists()){const K=R.data();ce({entries:K.entries||[],water:K.water||0})}else ce({entries:[],water:0})}catch(R){console.error("Error loading log:",R),ce({entries:[],water:0})}})()},[n?.id,V]),_.useEffect(()=>{const T=X.entries.reduce((R,K)=>({protein:R.protein+(K.protein||0),carbs:R.carbs+(K.carbs||0),fats:R.fats+(K.fats||0),calories:R.calories+(K.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Ve(T)},[X.entries]);const He=async T=>{try{await Rn(et(Se,"nutritionLogs",`${n.id}_${V}`),{clientId:n.id,date:V,entries:T.entries,water:T.water,updatedAt:pt.now()})}catch(R){console.error("Error saving nutrition log:",R)}},Ye=V===wi(),Be=(T,R)=>new Date(T,R+1,0).getDate(),Ke=(T,R)=>new Date(T,R,1).getDay(),We=["January","February","March","April","May","June","July","August","September","October","November","December"],Le=["Su","Mo","Tu","We","Th","Fr","Sa"],xe=()=>{let T=parseFloat(j.weight);j.weightUnit==="lbs"&&(T*=.453592);let R;j.heightUnit==="cm"?R=parseFloat(j.height):R=(parseFloat(j.heightFeet)||0)*30.48+(parseFloat(j.heightInches)||0)*2.54;const K=parseInt(j.age);let ee=j.gender==="male"?10*T+6.25*R-5*K+5:10*T+6.25*R-5*K-161;const Ue=ee*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[j.dailyActivity],Oe={low:100,moderate:200,high:300,daily:400},Ut=Math.round(Ue+Oe[j.trainingFrequency]);let Tt=Ut,G,fe;switch(j.goal){case"lose":Tt=Ut*(1-{light:.15,moderate:.2,harsh:.25}[j.deficitLevel]),G=2.2,fe=.3;break;case"build":Tt=Ut*1.1,G=2,fe=.22;break;default:G=1.8,fe=.25}Tt=Math.max(Tt,j.gender==="male"?1400:1100);const oe=Math.round(T*G),Re=Math.round(Tt*fe/9),Pe=Math.max(0,Math.round((Tt-oe*4-Re*9)/4));U({calories:Math.round(Tt),protein:oe,carbs:Pe,fats:Re,bmr:Math.round(ee),neat:Math.round(Ue),exerciseAdd:Oe[j.trainingFrequency],tdee:Math.round(Ut)})},ze=async()=>{if($)try{const T={clientId:n.id,calories:$.calories,protein:$.protein,carbs:$.carbs,fats:$.fats,waterGoal:8,goal:j.goal,updatedAt:pt.now()};await Rn(et(Se,"nutritionTargets",n.id),T),k(T),y("dashboard"),ye("Macro targets saved!","success")}catch(T){console.error("Error saving targets:",T),ye("Failed to save targets. Please try again.","error")}},at=()=>{const T=j.weight&&parseFloat(j.weight)>0,R=j.age&&parseInt(j.age)>0,K=j.heightUnit==="cm"?j.height&&parseFloat(j.height)>0:j.heightFeet&&parseFloat(j.heightFeet)>0||j.heightInches&&parseFloat(j.heightInches)>0;return T&&R&&K},St="nut_favourite_foods",Wt=()=>{try{return JSON.parse(localStorage.getItem(St)||"[]")}catch{return[]}},Qe=T=>Wt().some(R=>R.name.toLowerCase()===(T||"").toLowerCase()),ht=T=>{const R=Wt(),K=R.findIndex(ee=>ee.name.toLowerCase()===T.name.toLowerCase());K>=0?R.splice(K,1):R.unshift({name:T.name,protein:T.protein,carbs:T.carbs,fats:T.fats,calories:T.calories,serving:T.serving,per100g:T.per100g||null,servingUnit:T.servingUnit||"g",portion:T.portion||null}),localStorage.setItem(St,JSON.stringify(R)),Mt(ee=>ee+1)},dt=T=>{const R=[...X.entries,{...T,meal:F,id:Date.now(),addedAt:new Date().toISOString()}],K={...X,entries:R};ce(K),He(K),ke(null),un(null),_t("100"),ut(0),Gt("weight"),gt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),ye("Food added!","success")},Rt=T=>{const R=X.entries.filter(ee=>ee.id!==T),K={...X,entries:R};ce(K),He(K)},Lt=_.useRef(null),kt=async()=>{le(!0);const T=document.querySelector("#barcode-reader");if(!T){le(!1),ye("Scanner container not found.","error");return}if(!Lt.current)try{const K=await xr(()=>import("./quagga.min-BbicSfvA.js").then(ee=>ee.q),[]);Lt.current=K.default}catch(K){console.error("Failed to load barcode scanner:",K),le(!1),ye("Could not load scanner.","error");return}const R=Lt.current;R.init({inputStream:{type:"LiveStream",target:T,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},K=>{if(K){console.error("Quagga init error:",K),le(!1),ye("Could not access camera. Check permissions.","error");return}R.start(),qt.current=!0}),R.onDetected(K=>{const ee=K.codeResult.decodedCodes?.filter(Ue=>Ue.error!==void 0)?.map(Ue=>Ue.error)||[];if((ee.length>0?ee.reduce((Ue,Oe)=>Ue+Oe,0)/ee.length:1)<.15){const Ue=K.codeResult.code;R.offDetected(),N(Ue)}})},Kt=()=>{const T=Lt.current;qt.current&&T&&(T.stop(),T.offDetected(),qt.current=!1),le(!1)},Ht=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,an=T=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((T||"").replace(/\s/g,"")),hn=T=>{if(!T)return{value:100,unit:"g"};const R=T.toLowerCase().replace(/\s/g,""),K=R.match(/([\d.]+)/),ee=K?parseFloat(K[1]):100;return an(T)?/cl/.test(R)?{value:ee*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(R)&&!/ml/.test(R)?{value:ee*1e3,unit:"ml"}:{value:ee,unit:"ml"}:{value:ee,unit:"g"}},fn=T=>{if(an(T.serving_size)||an(T.quantity))return"ml";const R=T.product_name||T.product_name_en||"";return Ht.test(R)?"ml":"g"},Mn=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],H=(T,R)=>{const K=T||"",ee=K.match(/\((\d+\.?\d*)\s*g\)/i),$e=K.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(ee&&$e){const Ut=parseFloat(ee[1]);let Tt=$e[1].replace(/^\d+\s*/,"").trim();if(Tt&&Ut>0)return{label:Tt,weight:Ut}}const Ue=K.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Ue){const Ut=parseFloat(Ue[1]);let Tt=Ue[2].replace(/^\d+\s*/,"").trim();if(Tt&&Ut>0)return{label:Tt,weight:Ut}}const Oe=R||"";for(const{pattern:Ut,label:Tt,weight:G}of Mn)if(Ut.test(Oe))return{label:Tt,weight:G};return null},ge=T=>{const R=T.nutriments||{},K=fn(T),ee=hn(T.serving_size),$e=K==="ml"?ee.unit==="ml"?ee.value:100:ee.value,Ue=T.product_name||T.product_name_en||"Unknown Product",Oe=H(T.serving_size,Ue);return{name:Ue,brand:T.brands||"",image:T.image_small_url||T.image_url||null,servingSize:T.serving_size||"100g",servingValue:$e,servingUnit:K,portion:Oe,protein:Math.round(R.proteins_100g||R.proteins||0),carbs:Math.round(R.carbohydrates_100g||R.carbohydrates||0),fats:Math.round(R.fat_100g||R.fat||0),calories:Math.round(R["energy-kcal_100g"]||R["energy-kcal"]||(R.energy_100g?R.energy_100g/4.184:0)),per100g:!0}},ve=async T=>{Ne(!0);try{const R=`https://world.openfoodfacts.org/api/v2/product/${T}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,K=await fetch(R);if(!K.ok)throw new Error(`HTTP ${K.status}`);const ee=await K.json();if(ee.status==="success"||ee.status===1||ee.product){const $e=ge(ee.product);$e.calories===0&&$e.protein===0&&$e.carbs===0?ye("Product found but no nutrition data available.","error"):(un($e),$e.portion?(ut(1),_t(String($e.portion.weight)),Gt("portion")):(ut(0),_t(String($e.servingValue||100)),Gt("weight")),ie(""))}else ye("Product not found. Try search or manual entry.","error")}catch(R){console.error("Barcode lookup error:",R),ye("Failed to look up product. Check your connection.","error")}Ne(!1)},we=(T,R,K)=>{const ee=T.toLowerCase().trim(),$e=R.toLowerCase().trim(),Ue=K.toLowerCase().trim();let Oe=0;return(ee===Ue||ee===Ue+"s"||ee+"s"===Ue)&&(Oe+=100),(ee.endsWith(" "+Ue)||ee.endsWith(" "+Ue+"s"))&&(Oe+=40),(ee.startsWith(Ue+" ")||ee.startsWith(Ue+"s "))&&(Oe+=15),Ue.split(/\s+/).some(Tt=>$e===Tt||$e.startsWith(Tt))&&(Oe+=30),Oe+=Math.max(0,30-ee.length),Oe},me=async()=>{if(!Me.trim())return;bn.current&&bn.current.abort();const T=new AbortController;bn.current=T;const R=Me.trim().toLowerCase(),K=R.split(/\s+/).filter(Boolean);if(Ap.has(R)){rt(Ap.get(R));return}Jt(!0);try{const $e=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Me.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Ue=await fetch($e,{signal:T.signal});if(!Ue.ok)throw new Error(`HTTP ${Ue.status}`);const Ut=((await Ue.json()).products||[]).map(Tt=>ge(Tt)).filter(Tt=>Tt.name!=="Unknown Product"&&(Tt.calories>0||Tt.protein>0)).filter(Tt=>{const G=(Tt.name+" "+Tt.brand).toLowerCase();return K.every(fe=>G.includes(fe))}).sort((Tt,G)=>we(G.name,G.brand,R)-we(Tt.name,Tt.brand,R)).slice(0,10);Ap.set(R,Ut),rt(Ut),Ut.length===0&&ye("No results found. Try a different search.","info")}catch(ee){if(ee.name==="AbortError")return;console.error("Search error:",ee),ye("Search failed. Check your connection.","error")}Jt(!1)};_.useEffect(()=>{if(O.current&&clearTimeout(O.current),!(!Me.trim()||Y!=="search"||ae))return O.current=setTimeout(()=>{me()},700),()=>clearTimeout(O.current)},[Me]);const Xe=()=>{const T={...X,water:X.water+1};ce(T),He(T)},yt=()=>{if(X.water<=0)return;const T={...X,water:X.water-1};ce(T),He(T)},nt={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},mt=80,vt=2*Math.PI*mt,on=(T,R,K,ee,$e)=>{const Ue=ee>0?Math.min(100,Math.round(K/ee*100)):0,Oe=vt-Ue/100*vt,Ut=nt[$e]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:mt}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:mt,style:{stroke:Ut},strokeDasharray:vt,strokeDashoffset:Oe})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:Ut},children:Math.round(K)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",ee,T==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:Ut},children:R})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:Ut},children:[Ue,"%"]})]})};if(_.useEffect(()=>{if(!De)return;const T=setTimeout(()=>{const R=De;Kt(),N(null),ve(R)},1500);return()=>clearTimeout(T)},[De]),_.useEffect(()=>()=>{const T=Lt.current;if(qt.current&&T){try{T.stop(),T.offDetected()}catch{}qt.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:j.gender==="male"?"active":"",onClick:()=>{L(T=>({...T,gender:"male"})),U(null)},children:"Male"}),a.jsx("button",{className:j.gender==="female"?"active":"",onClick:()=>{L(T=>({...T,gender:"female"})),U(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:j.age,onChange:T=>{L(R=>({...R,age:T.target.value})),U(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:j.weight,onChange:T=>{L(R=>({...R,weight:T.target.value})),U(null)},placeholder:j.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:j.weightUnit==="kg"?"active":"",onClick:()=>{L(T=>({...T,weightUnit:"kg"})),U(null)},children:"kg"}),a.jsx("button",{className:j.weightUnit==="lbs"?"active":"",onClick:()=>{L(T=>({...T,weightUnit:"lbs"})),U(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[j.heightUnit==="cm"?a.jsx("input",{type:"number",value:j.height,onChange:T=>{L(R=>({...R,height:T.target.value})),U(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:j.heightFeet,onChange:T=>{L(R=>({...R,heightFeet:T.target.value})),U(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:j.heightInches,onChange:T=>{L(R=>({...R,heightInches:T.target.value})),U(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:j.heightUnit==="cm"?"active":"",onClick:()=>{L(T=>({...T,heightUnit:"cm"})),U(null)},children:"cm"}),a.jsx("button",{className:j.heightUnit==="ft"?"active":"",onClick:()=>{L(T=>({...T,heightUnit:"ft"})),U(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:j.dailyActivity,onChange:T=>{L(R=>({...R,dailyActivity:T.target.value})),U(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:j.trainingFrequency,onChange:T=>{L(R=>({...R,trainingFrequency:T.target.value})),U(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:j.goal==="lose"?"active":"",onClick:()=>{L(T=>({...T,goal:"lose"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:j.goal==="maintain"?"active":"",onClick:()=>{L(T=>({...T,goal:"maintain"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:j.goal==="build"?"active":"",onClick:()=>{L(T=>({...T,goal:"build"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),j.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:j.deficitLevel==="light"?"active":"",onClick:()=>{L(T=>({...T,deficitLevel:"light"})),U(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:j.deficitLevel==="moderate"?"active":"",onClick:()=>{L(T=>({...T,deficitLevel:"moderate"})),U(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:j.deficitLevel==="harsh"?"active":"",onClick:()=>{L(T=>({...T,deficitLevel:"harsh"})),U(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:xe,disabled:!at(),children:"Calculate Macros"})]}),$&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[on("Protein","Protein",$.protein,$.protein,"ring-protein"),on("Carbs","Carbs",$.carbs,$.carbs,"ring-carbs"),on("Fats","Fats",$.fats,$.fats,"ring-fats"),on("Calories","Calories",$.calories,$.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[$.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[$.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",$.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[$.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:ze,children:"Set as My Daily Targets"})]})]}),Pt&&a.jsx("div",{className:`toast-notification ${Pt.type}`,children:Pt.message})]});const Ns=T=>{const R=new Date(T+"T12:00:00"),K=R.getDay(),ee=new Date(R);ee.setDate(R.getDate()-(K+6)%7);const $e=[];for(let Ue=0;Ue<7;Ue++){const Oe=new Date(ee);Oe.setDate(ee.getDate()+Ue),$e.push(Oe.toISOString().split("T")[0])}return $e},Wn=["M","T","W","T","F","S","S"],Xn=(T,R="search")=>{I(T),R==="scan"?(ke("scan"),un(null)):R==="manual"?(ke("manual"),gt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):R==="favourites"?ke("favourites"):(ke("search"),rt([]),Ze(""))},mn=Ns(V),q=new Date(V+"T12:00:00"),he=`${We[q.getMonth()]} ${q.getFullYear()}`;return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),U(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const T=new Date(V+"T12:00:00");T.setDate(T.getDate()-7);const R=T.toISOString().split("T")[0];ne(R)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{M(!Ae),D({year:q.getFullYear(),month:q.getMonth()})},children:he}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const T=new Date(V+"T12:00:00");T.setDate(T.getDate()+7);const R=T.toISOString().split("T")[0];R<=wi()&&ne(R)},"aria-label":"Next week",disabled:mn[6]>=wi(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:mn.map((T,R)=>{const K=new Date(T+"T12:00:00").getDate(),ee=T===V,$e=T>wi(),Ue=T===wi();return a.jsxs("button",{className:`nut-week-day${ee?" selected":""}${Ue?" today":""}${$e?" future":""}`,disabled:$e,onClick:()=>ne(T),children:[a.jsx("span",{className:"nut-week-day-letter",children:Wn[R]}),a.jsx("span",{className:"nut-week-day-num",children:K})]},T)})})]}),Ae&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>D(T=>{let R=T.month-1,K=T.year;return R<0&&(R=11,K--),{year:K,month:R}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[We[P.month]," ",P.year]}),a.jsx("button",{onClick:()=>D(T=>{let R=T.month+1,K=T.year;return R>11&&(R=0,K++),{year:K,month:R}}),disabled:P.year===new Date().getFullYear()&&P.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Le.map(T=>a.jsx("span",{children:T},T))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Ke(P.year,P.month))].map((T,R)=>a.jsx("span",{},`e${R}`)),[...Array(Be(P.year,P.month))].map((T,R)=>{const K=R+1,ee=`${P.year}-${String(P.month+1).padStart(2,"0")}-${String(K).padStart(2,"0")}`,$e=ee>wi(),Ue=ee===V,Oe=ee===wi();return a.jsx("button",{className:`nut-cal-day${Ue?" selected":""}${Oe?" today":""}${$e?" future":""}`,disabled:$e,onClick:()=>{ne(ee),M(!1)},children:K},K)})]})]}),a.jsxs("div",{className:"nut-rings-row",children:[on("Protein","Protein",_e.protein,x.protein,"ring-protein"),on("Carbs","Carbs",_e.carbs,x.carbs,"ring-carbs"),on("Fats","Fats",_e.fats,x.fats,"ring-fats"),on("Calories","kCal",_e.calories,x.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone",children:a.jsxs("div",{className:"nut-light-content",children:[Ye&&a.jsxs("button",{className:"nut-water-quick",onClick:()=>A(!0),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsxs("span",{className:"nut-water-quick-count",children:[X.water," / ",x?.waterGoal||8]}),a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:ex.map(T=>{const R=X.entries.filter(ee=>(ee.meal||"snacks")===T.key),K=R.reduce((ee,$e)=>({protein:ee.protein+($e.protein||0),carbs:ee.carbs+($e.carbs||0),fats:ee.fats+($e.fats||0),calories:ee.calories+($e.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${T.key}`,children:L3[T.key]}),a.jsx("span",{className:"nut-meal-card-title",children:T.label}),R.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[K.calories," cal"]}),Ye&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>bt(Fe===T.key?null:T.key),"aria-label":`Add to ${T.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),R.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,x.protein>0?K.protein/x.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[K.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,x.carbs>0?K.carbs/x.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[K.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,x.fats>0?K.fats/x.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[K.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,x.calories>0?K.calories/x.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:K.calories})]})]}),R.length>0&&a.jsx("div",{className:"nut-log-list",children:R.map(ee=>a.jsxs("div",{className:"nut-log-item",children:[a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:ee.name}),ee.serving&&a.jsx("span",{className:"nut-log-item-serving",children:ee.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ee.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[ee.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[ee.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:ee.calories})]}),Ye&&a.jsx("button",{className:"nut-log-delete",onClick:()=>Rt(ee.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ee.id))}),R.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:Ye?"Tap + to add food":"No entries"})})]},T.key)})})})]})}),Fe&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>bt(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",ex.find(T=>T.key===Fe)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const T=Fe;bt(null),Xn(T,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const T=Fe;bt(null),Xn(T,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const T=Fe;bt(null),Xn(T,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const T=Fe;bt(null),Xn(T,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),E&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>A(!1),children:a.jsxs("div",{className:"nut-water-popup",onClick:T=>T.stopPropagation(),children:[a.jsxs("div",{className:"nut-water-popup-header",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsx("span",{children:"Water Intake"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>A(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsxs("div",{className:"nut-water-popup-body",children:[a.jsx("div",{className:"nut-water-glasses",children:[...Array(x?.waterGoal||8)].map((T,R)=>a.jsx("div",{className:`nut-water-glass ${R<X.water?"filled":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:R<X.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},R))}),a.jsxs("div",{className:"nut-water-popup-count",children:[X.water," / ",x?.waterGoal||8," glasses"]}),a.jsxs("div",{className:"nut-water-btns",children:[a.jsx("button",{onClick:yt,disabled:X.water<=0,children:"-"}),a.jsx("button",{onClick:Xe,children:"+"})]})]})]})}),Y&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{Kt(),N(null),ke(null),un(null)},children:a.jsxs("div",{className:"nut-modal",onClick:T=>T.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:Y==="scan"?"Scan Barcode":Y==="search"?"Search Food":Y==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{Kt(),N(null),ke(null),un(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Y==="scan"&&!ae&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),Ie&&!De&&a.jsx("div",{className:"nut-scan-line"}),De&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:De})]})]}),!Ie&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:kt,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),Ie&&!De&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:B,onChange:T=>ie(T.target.value),onKeyDown:T=>T.key==="Enter"&&B.trim()&&ve(B.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>B.trim()&&ve(B.trim()),disabled:!B.trim()||pe,children:pe?"...":"Look Up"})]})]}),Y==="scan"&&ae&&(()=>{const T=ae.servingUnit||"g",R=ae.portion,K=Je==="portion"&&R?Et*R.weight:parseFloat(It)||0,ee=K/100,$e=T==="ml"?[100,200,250,500]:[50,100,150,200],Ue=Je==="portion"&&R?`${Et} ${R.label}${Et!==1?"s":""} (${Math.round(K)}${T})`:`${Math.round(K)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[ae.image&&a.jsx("img",{src:ae.image,alt:ae.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:ae.name}),a.jsx("button",{className:`nut-fav-star confirm${Qe(ae.name)?" active":""}`,onClick:()=>ht({name:ae.name,protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories,serving:ae.servingSize,per100g:{protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories},servingUnit:ae.servingUnit||"g",portion:ae.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Qe(ae.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ae.brand&&a.jsx("p",{className:"nut-product-brand",children:ae.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ae.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[ae.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[ae.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[ae.calories," cal"]})]}),R&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Je==="portion"?"active":"",onClick:()=>{Gt("portion"),Et<1&&ut(1)},children:"Portions"}),a.jsxs("button",{className:Je==="weight"?"active":"",onClick:()=>{Gt("weight"),_t(String(Math.round(K)||100))},children:["Custom (",T,")"]})]}),Je==="portion"&&R?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ut(Math.max(1,Et-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Et}),a.jsxs("span",{className:"nut-stepper-label",children:[R.label,Et!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(K),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ut(Et+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:It,onChange:Oe=>_t(Oe.target.value),onFocus:Oe=>Oe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:$e.map(Oe=>a.jsxs("button",{className:`nut-quick-btn${It===String(Oe)?" active":""}`,onClick:()=>_t(String(Oe)),children:[Oe,T]},Oe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(ae.protein*ee),"p / ",Math.round(ae.carbs*ee),"c / ",Math.round(ae.fats*ee),"f / ",Math.round(ae.calories*ee)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{un(null),ke("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>dt({name:ae.name,protein:Math.round(ae.protein*ee),carbs:Math.round(ae.carbs*ee),fats:Math.round(ae.fats*ee),calories:Math.round(ae.calories*ee),serving:Ue}),children:"Add"})]})]})})(),Y==="search"&&!ae&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:J,value:Me,onChange:T=>Ze(T.target.value),onKeyDown:T=>{T.key==="Enter"&&(clearTimeout(O.current),me())},onFocus:()=>setTimeout(()=>J.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:me,disabled:Bt,children:Bt?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[qe.map((T,R)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{un(T),T.portion?(ut(1),_t(String(T.portion.weight)),Gt("portion")):(ut(0),_t(String(T.servingValue||100)),Gt("weight"))},children:[T.image&&a.jsx("img",{src:T.image,alt:T.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:T.name}),T.brand&&a.jsx("span",{className:"nut-search-item-brand",children:T.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[T.calories," cal  ",T.protein,"p  ",T.carbs,"c  ",T.fats,"f per 100",T.servingUnit||"g"]})]})]},R)),qe.length===0&&Me&&!Bt&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),Y==="search"&&ae&&(()=>{const T=ae.servingUnit||"g",R=ae.portion,K=Je==="portion"&&R?Et*R.weight:parseFloat(It)||0,ee=K/100,$e=T==="ml"?[100,200,250,500]:[50,100,150,200],Ue=Je==="portion"&&R?`${Et} ${R.label}${Et!==1?"s":""} (${Math.round(K)}${T})`:`${Math.round(K)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[ae.image&&a.jsx("img",{src:ae.image,alt:ae.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:ae.name}),a.jsx("button",{className:`nut-fav-star confirm${Qe(ae.name)?" active":""}`,onClick:()=>ht({name:ae.name,protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories,serving:ae.servingSize,per100g:{protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories},servingUnit:ae.servingUnit||"g",portion:ae.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Qe(ae.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ae.brand&&a.jsx("p",{className:"nut-product-brand",children:ae.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ae.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[ae.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[ae.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[ae.calories," cal"]})]}),R&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Je==="portion"?"active":"",onClick:()=>{Gt("portion"),Et<1&&ut(1)},children:"Portions"}),a.jsxs("button",{className:Je==="weight"?"active":"",onClick:()=>{Gt("weight"),_t(String(Math.round(K)||100))},children:["Custom (",T,")"]})]}),Je==="portion"&&R?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ut(Math.max(1,Et-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Et}),a.jsxs("span",{className:"nut-stepper-label",children:[R.label,Et!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(K),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ut(Et+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:It,onChange:Oe=>_t(Oe.target.value),onFocus:Oe=>Oe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:$e.map(Oe=>a.jsxs("button",{className:`nut-quick-btn${It===String(Oe)?" active":""}`,onClick:()=>_t(String(Oe)),children:[Oe,T]},Oe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(ae.protein*ee),"p / ",Math.round(ae.carbs*ee),"c / ",Math.round(ae.fats*ee),"f / ",Math.round(ae.calories*ee)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>un(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>dt({name:ae.name,protein:Math.round(ae.protein*ee),carbs:Math.round(ae.carbs*ee),fats:Math.round(ae.fats*ee),calories:Math.round(ae.calories*ee),serving:Ue}),children:"Add"})]})]})})(),Y==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:ct.name,onChange:T=>gt(R=>({...R,name:T.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:ct.serving,onChange:T=>gt(R=>({...R,serving:T.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:ct.protein,onChange:T=>gt(R=>({...R,protein:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:ct.carbs,onChange:T=>gt(R=>({...R,carbs:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:ct.fats,onChange:T=>gt(R=>({...R,fats:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:ct.calories,onChange:T=>gt(R=>({...R,calories:T.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!ct.name.trim(),onClick:()=>dt({name:ct.name,protein:parseFloat(ct.protein)||0,carbs:parseFloat(ct.carbs)||0,fats:parseFloat(ct.fats)||0,calories:parseFloat(ct.calories)||0,serving:ct.serving||""}),children:"Add Food"})]}),Y==="favourites"&&!ae&&(()=>{const T=Wt(),R=K=>{if(K.per100g){const ee=K.per100g;un({name:K.name,brand:"",image:null,servingSize:K.serving||"100g",servingValue:100,servingUnit:K.servingUnit||"g",portion:K.portion||null,protein:ee.protein,carbs:ee.carbs,fats:ee.fats,calories:ee.calories,per100g:!0}),K.portion?(ut(1),_t(String(K.portion.weight)),Gt("portion")):(ut(0),_t("100"),Gt("weight"))}else dt({name:K.name,protein:K.protein,carbs:K.carbs,fats:K.fats,calories:K.calories,serving:K.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:T.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:T.map((K,ee)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:$e=>{$e.stopPropagation(),ht(K)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>R(K),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:K.name}),a.jsx("span",{className:"nut-recent-item-serving",children:K.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[K.calories," cal"]})]})]},ee))})})})(),Y==="favourites"&&ae&&(()=>{const T=ae.servingUnit||"g",R=ae.portion,K=Je==="portion"&&R?Et*R.weight:parseFloat(It)||0,ee=K/100,$e=T==="ml"?[100,200,250,500]:[50,100,150,200],Ue=Je==="portion"&&R?`${Et} ${R.label}${Et!==1?"s":""} (${Math.round(K)}${T})`:`${Math.round(K)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:ae.name}),a.jsx("button",{className:`nut-fav-star confirm${Qe(ae.name)?" active":""}`,onClick:()=>ht({name:ae.name,protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories,serving:ae.servingSize,per100g:{protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories},servingUnit:ae.servingUnit||"g",portion:ae.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Qe(ae.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ae.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[ae.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[ae.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[ae.calories," cal"]})]}),R&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Je==="portion"?"active":"",onClick:()=>{Gt("portion"),Et<1&&ut(1)},children:"Portions"}),a.jsxs("button",{className:Je==="weight"?"active":"",onClick:()=>{Gt("weight"),_t(String(Math.round(K)||100))},children:["Custom (",T,")"]})]}),Je==="portion"&&R?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ut(Math.max(1,Et-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Et}),a.jsxs("span",{className:"nut-stepper-label",children:[R.label,Et!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(K),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ut(Et+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:It,onChange:Oe=>_t(Oe.target.value),onFocus:Oe=>Oe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:$e.map(Oe=>a.jsxs("button",{className:`nut-quick-btn${It===String(Oe)?" active":""}`,onClick:()=>_t(String(Oe)),children:[Oe,T]},Oe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(ae.protein*ee),"p / ",Math.round(ae.carbs*ee),"c / ",Math.round(ae.fats*ee),"f / ",Math.round(ae.calories*ee)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>un(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>dt({name:ae.name,protein:Math.round(ae.protein*ee),carbs:Math.round(ae.carbs*ee),fats:Math.round(ae.fats*ee),calories:Math.round(ae.calories*ee),serving:Ue}),children:"Add"})]})]})})()]})}),a.jsx(Ur,{active:"nutrition"}),Pt&&a.jsx("div",{className:`toast-notification ${Pt.type}`,children:Pt.message})]})}const tx="/login/assets/randomiser-glq9YJkL.jpg",B3="/login/assets/programme-card-workout-CnNzTYkz.webp",U3="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",z3="/login/assets/mg-arms-BeOQU3wx.jpg",nx=60,Mp=5,F3=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],q3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},H3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},$3={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},Ip={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Dp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:U3},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],qc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:z3},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],sx={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},rx=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Pp=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],vl=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],W3=[5,10,15,20,30];function G3(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function K3(s){const e=[...s];for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[e[n],e[i]]=[e[i],e[n]]}return e}function Y3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=ar(),{isDark:l,toggleTheme:u,accent:h}=qr(),p=Ss(),[g,y]=_.useState("menu"),[x,k]=_.useState(["bodyweight"]),[j,L]=_.useState("core"),[$,U]=_.useState("intermediate"),[V,ne]=_.useState(15),[X,ce]=_.useState([]),[_e,Ve]=_.useState(!1),Ae=_.useRef(!1),M=_.useRef([]),[E,A]=_.useState([]),[P,D]=_.useState(2),[F,I]=_.useState(vl[1]),[Fe,bt]=_.useState(1),[Y,ke]=_.useState(0),[Ie,le]=_.useState("work"),[De,N]=_.useState(0),[B,ie]=_.useState(!1),[pe,Ne]=_.useState(0),[Me,Ze]=_.useState(null),qe=_.useRef(null);_.useRef(null),_.useRef(null);const[rt,Bt]=_.useState(null),Jt=_.useCallback((G,fe="info")=>{Bt({message:G,type:fe}),setTimeout(()=>Bt(null),3e3)},[]),[ct,gt]=_.useState(null),[ae,un]=_.useState(null),[It,_t]=_.useState(0),[Et,ut]=_.useState(0),[Je,Gt]=_.useState([]),[Qn,Mt]=_.useState(""),[Pt,Dn]=_.useState(""),[qt,bn]=_.useState(!1),[O,J]=_.useState(0),[ye,He]=_.useState(!1),[Ye,Be]=_.useState({}),Ke=_.useRef(null),We=_.useRef(null),[Le,xe]=_.useState([]),[ze,at]=_.useState(null),[St,Wt]=_.useState(0),[Qe,ht]=_.useState(0),[dt,Rt]=_.useState(0),[Lt,kt]=_.useState(0),[Kt,Ht]=_.useState(0),[an,hn]=_.useState(0),[fn,Mn]=_.useState({beginner:0,intermediate:0,advanced:0}),[H,ge]=_.useState(null),[ve,we]=_.useState(""),[me,Xe]=_.useState(!1);_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const fe=Yt(Se,"workoutLogs"),oe=An(fe,vn("clientId","==",n.id)),Pe=(await _n(oe)).docs.map(dn=>dn.data()),it=Pe.filter(dn=>dn.type!=="programme");kt(it.length);const At=it.reduce((dn,Gn)=>dn+(Gn.duration||0),0);Ht(At);const ot={beginner:0,intermediate:0,advanced:0};it.forEach(dn=>{dn.level&&ot[dn.level]!==void 0&&ot[dn.level]++}),Mn(ot);const Zt=new Date,Un=Zt.getDay(),pn=Un===0?-6:1-Un,On=new Date(Zt);On.setDate(Zt.getDate()+pn),On.setHours(0,0,0,0);const qa=On.getTime(),Hi=Pe.filter(dn=>{const Gn=dn.completedAt;return Gn?(Gn.toDate?Gn.toDate().getTime():new Date(Gn).getTime())>=qa:!1});Wt(Hi.filter(dn=>dn.type!=="programme").length);let Ha=0;if(n)try{const dn=await Ln(et(Se,"clientProgrammes",n.id));if(dn.exists()){const Gn=dn.data(),Kn=Gn.templateId;Ha=Hi.filter(vs=>vs.type==="programme"&&vs.programmeId===Kn).length,ge(Kn);const _r=Dp.find(vs=>vs.id===Kn);_r&&we(_r.name);const kr=H3[Kn];if(kr){const vs=Object.keys(Gn.completedSessions||{}).length,Cs=kr.duration*kr.daysPerWeek;Rt(Cs>0?Math.round(vs/Cs*100):0)}}else ge(null),we(""),Rt(0)}catch{}ht(Ha);const wr=it.map(dn=>dn.completedAt).filter(Boolean).map(dn=>dn.toDate?dn.toDate().getTime():new Date(dn).getTime()).sort((dn,Gn)=>Gn-dn);if(wr.length===0)hn(0);else{const dn=new Set;wr.forEach(Cs=>{const Hr=new Date(Cs),Tr=Hr.getDay(),$a=Tr===0?-6:1-Tr,Ps=new Date(Hr);Ps.setDate(Hr.getDate()+$a),Ps.setHours(0,0,0,0),dn.add(Ps.getTime())});const Gn=[...dn].sort((Cs,Hr)=>Hr-Cs);let Kn=0;const _r=new Date(Zt),kr=Zt.getDay()===0?-6:1-Zt.getDay();_r.setDate(Zt.getDate()+kr),_r.setHours(0,0,0,0);let vs=_r.getTime();Gn.includes(vs)||(vs-=10080*60*1e3);for(let Cs=0;Cs<200&&Gn.includes(vs);Cs++)Kn++,vs-=10080*60*1e3;hn(Kn)}}catch(fe){console.error("Error loading workout stats:",fe)}finally{Xe(!0)}})()},[s,n,g]);const yt=()=>{const G=[];let fe;j==="mix"?fe=["core","upper","lower"]:j==="fullbody"?fe=["upper","lower"]:fe=[j];for(const oe of x)for(const Re of fe)G.push(`exercises/${oe}/${Re}`);return G},nt=async()=>{if(Ae.current){for(;Ae.current;)await new Promise(G=>setTimeout(G,200));return M.current}Ae.current=!0,Ve(!0);try{const G=yt(),fe=[];for(const it of G)try{const At=vo(bo,it),ot=await J2(At);fe.push(...ot.items)}catch{console.warn(`Folder ${it} not found, skipping.`)}if(fe.length===0&&x.includes("bodyweight")&&j==="core")try{const it=vo(bo,"core"),At=await J2(it);fe.push(...At.items)}catch{console.warn("Legacy core/ folder not found either.")}if(fe.length===0){const it=x.map(ot=>rx.find(Zt=>Zt.key===ot)?.label).join(" + "),At=Pp.find(ot=>ot.key===j)?.label;return Jt(`No exercises found for ${it} / ${At}. Upload videos to Firebase Storage.`,"error"),Ae.current=!1,Ve(!1),[]}const oe=new Set,Re=fe.filter(it=>{const At=it.name.replace(/\.(mp4|gif)$/i,"");return oe.has(At)?!1:(oe.add(At),!0)}),Pe=await Promise.all(Re.map(async it=>{const At=await Il(it),ot=G3(it.name.replace(/\.(mp4|gif)$/i,"")),Zt=/\.gif$/i.test(it.name);return{name:ot,videoUrl:At,isGif:Zt}}));return M.current=Pe,ce(Pe),Ae.current=!1,Ve(!1),Pe}catch(G){console.error("Error loading exercises:",G);const fe=G.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${G.message||G.code||"Unknown error"}`;return Jt(fe,"error"),Ae.current=!1,Ve(!1),[]}},mt=async()=>{y("spinning"),M.current=[];const G=await nt();if(G.length===0){y("setup");return}const fe=vl.find(Un=>Un.key===$);I(fe);const oe=fe.work+fe.rest,Re=V*60,Pe=Math.floor(Re/oe);let it,At;Pe<=6?(it=Math.max(3,Math.floor(Pe/2)),At=Math.floor(Pe/it)):Pe<=12?(it=Math.min(6,Math.floor(Pe/2)),At=Math.floor(Pe/it)):(it=Math.min(10,Math.floor(Pe/2)),At=Math.floor(Pe/it)),At=Math.max(2,At);const ot=K3(G),Zt=ot.slice(0,Math.min(it,ot.length));A(Zt),D(At),setTimeout(()=>y("preview"),2e3)},vt=()=>{y("countdown"),Ne(3)};_.useEffect(()=>{if(g!=="countdown")return;if(pe<=0){y("workout"),bt(1),ke(0),le("work"),N(F.work),ie(!1),Ue();return}$e();const G=setTimeout(()=>Ne(fe=>fe-1),1e3);return()=>clearTimeout(G)},[pe,g]),_.useEffect(()=>{if(g!=="workout"||B)return;if(De<=0){on();return}De<=3&&$e();const G=setTimeout(()=>N(fe=>fe-1),1e3);return()=>clearTimeout(G)},[De,g,B]);const on=()=>{if(Ie==="work")le("rest"),N(F.rest);else{const G=Y+1;if(G>=E.length){const fe=Fe+1;if(fe>P){y("complete"),Ns();return}bt(fe),ke(0)}else ke(G);le("work"),N(F.work),Ue()}},Ns=async()=>{if(s)try{await Ao(Yt(Se,"workoutLogs"),{clientId:n.id,level:$,duration:V,equipment:x,focus:j,exerciseCount:E.length,rounds:P,exercises:E.map(G=>G.name),completedAt:pt.now()}),Wt(G=>G+1),kt(G=>G+1),Ht(G=>G+V),Mn(G=>({...G,[$]:(G[$]||0)+1}))}catch(G){console.error("Error saving workout log:",G)}},Wn=async(G,fe,oe)=>{if(!(!n||!fe))try{const Re=n.id,Pe=await Ln(et(Se,"coreBuddyPBs",Re)),At=(Pe.exists()?Pe.data():null)?.exercises||{},ot=At[G];let Zt=!1;if(ot?(fe>(ot.weight||0)||fe===(ot.weight||0)&&oe>(ot.reps||0))&&(Zt=!0):Zt=!0,Zt){const Un={...At,[G]:{weight:fe,reps:oe,achievedAt:pt.now()}};await Rn(et(Se,"coreBuddyPBs",Re),{clientId:n.id,exercises:Un,updatedAt:pt.now()}),Jt(`New PB! ${fe}kg  ${oe} reps`,"success"),$e(),await Xn(G,fe)}}catch(Re){console.error("Error checking PB:",Re)}},Xn=async(G,fe)=>{if(n)try{const oe=await Ln(et(Se,"coreBuddyTargets",n.id));if(!oe.exists())return;const Pe=(oe.data().targets||{})[G];if(!Pe||fe<Pe.targetWeight)return;const it=await Ln(et(Se,"coreBuddyAchievements",n.id)),At=it.exists()?it.data():{clientId:n.id,badges:[],totalVolume:0};if(At.badges.some(pn=>pn.type==="pb_target"&&pn.exercise===G&&pn.targetWeight===Pe.targetWeight))return;const Zt={type:"pb_target",exercise:G,group:q3[G]||"push",targetWeight:Pe.targetWeight,achievedAt:pt.now()},Un=[...At.badges,Zt];await Rn(et(Se,"coreBuddyAchievements",n.id),{...At,badges:Un,updatedAt:pt.now()}),xe(pn=>[...pn,Zt])}catch(oe){console.error("Error checking target badge:",oe)}},mn=async G=>{if(!(!n||G<=0))try{const fe=await Ln(et(Se,"coreBuddyAchievements",n.id)),oe=fe.exists()?fe.data():{clientId:n.id,badges:[],totalVolume:0},Re=oe.totalVolume||0,Pe=Re+G,it=[];F3.forEach(ot=>{Pe>=ot.threshold&&Re<ot.threshold&&(oe.badges.some(Un=>Un.type==="volume_milestone"&&Un.milestone===ot.threshold)||it.push({type:"volume_milestone",milestone:ot.threshold,label:ot.label,achievedAt:pt.now()}))});const At=[...oe.badges,...it];await Rn(et(Se,"coreBuddyAchievements",n.id),{clientId:n.id,badges:At,totalVolume:Math.round(Pe),updatedAt:pt.now()}),it.length>0&&xe(ot=>[...ot,...it])}catch(fe){console.error("Error updating volume:",fe)}},q=async G=>{if(un(G),G.interval){const Re=[];for(const Pe of G.exercises){let it=null,At=!1;if(Pe.storagePath)try{const ot=vo(bo,Pe.storagePath);it=await Il(ot),At=/\.gif$/i.test(Pe.storagePath)}catch{}Re.push({name:Pe.name,videoUrl:it,isGif:At})}A(Re),D(G.rounds),I({work:G.work,rest:G.rest}),y("preview");return}const fe={};for(const Re of G.exercises)if(Re.storagePath)try{const Pe=vo(bo,Re.storagePath);fe[Re.name]={url:await Il(Pe),isGif:/\.gif$/i.test(Re.storagePath)}}catch{}Be(fe);const oe=G.exercises.map(Re=>({name:Re.name,type:Re.type,targetSets:Re.sets,targetReps:Re.reps||0,targetTime:Re.time||0,sets:[]}));Gt(oe),_t(0),ut(0),Mt(""),Dn(""),He(!1),bn(!1),J(0),xe([]),at(null),y("muscle_workout")},he=()=>{const G=Ke.current;G&&(G.paused?(G.play(),He(!0)):(G.pause(),He(!1)))};_.useEffect(()=>{if(g!=="muscle_workout"||!qt||O<=0){g==="muscle_workout"&&qt&&O<=0&&(bn(!1),$e());return}return We.current=setTimeout(()=>J(G=>G-1),1e3),()=>clearTimeout(We.current)},[g,qt,O]);const T=async()=>{const G=Je[It];let fe={};if(G.type==="weighted"){const Pe=parseFloat(Qn)||0,it=parseInt(Pt)||0;if(it===0){Jt("Enter your reps","error");return}fe={weight:Pe,reps:it}}else if(G.type==="reps"){const Pe=parseInt(Pt)||0;if(Pe===0){Jt("Enter your reps","error");return}fe={reps:Pe}}else if(G.type==="timed"){const Pe=G.targetTime-O;fe={time:Math.max(Pe,1)}}const oe=[...Je];oe[It]={...G,sets:[...G.sets,fe]},Gt(oe),G.type==="weighted"&&fe.weight>0&&await Wn(G.name,fe.weight,fe.reps);const Re=G.sets.length+1;if(Re<G.targetSets)ut(Re),Dn(""),bn(!1),J(0);else if(It+1<Je.length){const Pe=It+1;_t(Pe),ut(0),Mt(""),Dn(""),He(!1),bn(!1),J(0)}else await R(oe),y("muscle_complete")},R=async G=>{if(!(!s||!n))try{const fe=G.reduce((Re,Pe)=>Re+Pe.sets.reduce((it,At)=>it+(At.weight||0)*(At.reps||0),0),0),oe=G.reduce((Re,Pe)=>Re+Pe.sets.length,0);await Ao(Yt(Se,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:ct,sessionId:ae?.id,sessionName:ae?.name,exerciseCount:G.length,totalSets:oe,duration:Math.round(oe*1.5),volume:Math.round(fe),exercises:G.map(Re=>({name:Re.name,type:Re.type,sets:Re.sets})),completedAt:pt.now()}),fe>0&&await mn(fe),Le.length>0&&at({badges:[...Le]})}catch(fe){console.error("Error saving muscle group workout log:",fe)}},K=_.useRef(null),ee=()=>(K.current||(K.current=new(window.AudioContext||window.webkitAudioContext)),K.current),$e=()=>{try{const G=ee(),fe=G.createOscillator(),oe=G.createGain();fe.connect(oe),oe.connect(G.destination),fe.frequency.value=880,oe.gain.value=.3,fe.start(G.currentTime),fe.stop(G.currentTime+.15)}catch{}},Ue=()=>{try{const G=ee(),fe=G.createOscillator(),oe=G.createGain();fe.connect(oe),oe.connect(G.destination),fe.frequency.value=1200,oe.gain.value=.4,fe.start(G.currentTime),fe.stop(G.currentTime+.3)}catch{}};_.useEffect(()=>{if(g!=="workout"||Ie!=="work"||!E[Y]?.isGif)return;const fe=setInterval(()=>{const oe=qe.current;if(!oe)return;const Re=oe.getAttribute("src");oe.removeAttribute("src"),setTimeout(()=>{qe.current&&qe.current.setAttribute("src",Re)},0)},4e3);return()=>clearInterval(fe)},[g,Ie,Y,Fe,E]);const Oe=(G,fe,oe)=>{const Re=Math.round(G/fe*nx);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:R3.map((Pe,it)=>a.jsx("line",{x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,className:it<Re?`wk-tick-filled ${oe}`:"wk-tick-empty",strokeWidth:Pe.thick?"3":"2"},it))})},Ut=()=>{const G=E.length*P;return((Fe-1)*E.length+Y+(Ie==="rest"?.5:0))/G},Tt=rt&&a.jsx("div",{className:`toast-notification ${rt.type}`,children:rt.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:a.jsx("img",{src:tx,alt:"Randomise Workout",className:"wk-hero-bg"})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[Dp.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:Dp.map((G,fe)=>G.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:G.id}}),style:{animationDelay:`${fe*.06}s`},children:[a.jsx("img",{src:G.image,alt:G.name,className:"wk-prog-img"}),fe===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},G.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:G.id}}),style:{animationDelay:`${fe*.06}s`},children:[a.jsx("img",{src:B3,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:$3[G.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[G.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:G.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:G.name.toUpperCase()}),a.jsxs("p",{children:[G.daysPerWeek,"x per week  ",G.focus==="fullbody"?"Full Body":G.focus.charAt(0).toUpperCase()+G.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),fe===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},G.id))})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[qc.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:qc.map((G,fe)=>a.jsx("button",{className:`wk-muscle-hero-card${G.image?" wk-muscle-thumb":""}`,onClick:()=>{gt(G.key),y("muscle_sessions")},style:{animationDelay:`${fe*.05}s`},children:G.image?a.jsx("img",{src:G.image,alt:G.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:tx,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:Ip[G.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:G.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:G.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[sx[G.key]?.length||0," sessions"]})]})]})]})},G.key))})]}),a.jsx(Ur,{active:"workouts"}),Tt]});if(g==="setup"){const G=Pp.find(oe=>oe.key===j)?.label||j,fe=vl.find(oe=>oe.key===$)?.label||$;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsxs("div",{className:"wk-stats-strip",children:[a.jsxs("div",{className:"wk-stats-strip-ring",children:[a.jsx("svg",{viewBox:"0 0 200 200",children:xo.map((oe,Re)=>{const Pe=Math.round(Math.min(St,Mp)/Mp*nx);return a.jsx("line",{x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,className:Re<Pe?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:oe.thick?"3":"2"},Re)})}),a.jsxs("span",{className:"wk-stats-strip-ring-num",children:[St,a.jsxs("small",{children:["/",Mp]})]})]}),a.jsxs("div",{className:"wk-stats-strip-items",children:[a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:Lt}),a.jsx("span",{className:"wk-stats-strip-label",children:"Workouts"})]}),a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:Kt}),a.jsx("span",{className:"wk-stats-strip-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:an}),a.jsx("span",{className:"wk-stats-strip-label",children:"Wk Streak"})]})]})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:Pp.map(oe=>a.jsxs("button",{className:`wk-equip-btn${j===oe.key?" active":""}${oe.key==="mix"?" wk-mix-btn":""}`,onClick:()=>L(oe.key),children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:oe.icon})}),a.jsx("span",{children:oe.label})]},oe.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:vl.map(oe=>a.jsxs("button",{className:`wk-level-card wk-level-${oe.key}${$===oe.key?" active":""}`,onClick:()=>U(oe.key),children:[a.jsx("span",{className:"wk-level-name",children:oe.label}),a.jsx("span",{className:"wk-level-desc",children:oe.desc})]},oe.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:W3.map(oe=>a.jsxs("button",{className:`wk-time-btn${V===oe?" active":""}`,onClick:()=>ne(oe),children:[a.jsx("span",{className:"wk-time-num",children:oe}),a.jsx("span",{className:"wk-time-unit",children:"min"})]},oe))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:rx.map(oe=>{const Re=x.includes(oe.key);return a.jsxs("button",{className:`wk-equip-btn${Re?" active":""}`,onClick:()=>{k(Pe=>Re&&Pe.length===1?Pe:Re?Pe.filter(it=>it!==oe.key):[...Pe,oe.key])},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:oe.icon})}),a.jsx("span",{children:oe.label})]},oe.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[G,"  ",fe,"  ",V," min"]})})]}),a.jsx("div",{className:"wk-go-sticky",children:a.jsx("button",{className:"wk-randomise-btn",onClick:mt,disabled:_e,children:_e?"Loading exercises...":"Randomise Workout"})}),Tt]})}if(g==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:xo.map((G,fe)=>a.jsx("line",{x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,className:"wk-spin-tick",strokeWidth:G.thick?"3.5":"2",style:{animationDelay:`${fe*.03}s`}},fe))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),Tt]});if(g==="preview"){const G=ae?.interval?{work:ae.work,rest:ae.rest}:vl.find(oe=>oe.key===$),fe=E.length*P*(G.work+G.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y(ae?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[ae?.interval&&a.jsx("h2",{className:"mg-preview-title",children:ae.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:E.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:P}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(fe/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[G.work,"/",G.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:E.map((oe,Re)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${Re*.06}s`},onClick:()=>Ze(oe),children:[a.jsx("span",{className:"wk-preview-num",children:Re+1}),a.jsx("div",{className:"wk-preview-thumb",children:oe.isGif?a.jsx("img",{src:oe.videoUrl,alt:oe.name,loading:"lazy"}):a.jsx("video",{src:`${oe.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:oe.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},Re))}),Me&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>Ze(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:oe=>oe.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>Ze(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Me.isGif?a.jsx("img",{src:Me.videoUrl,alt:Me.name}):a.jsx("video",{src:Me.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Me.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!ae?.interval&&a.jsxs("button",{className:"wk-btn-secondary",onClick:()=>mt(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),a.jsx("button",{className:"wk-btn-primary",onClick:vt,children:"Start Workout"})]})]})]})}if(g==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:pe}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const G=E[Y],fe=Ie==="work"?F.work:F.rest,oe=Ie==="rest"?Y+1<E.length?E[Y+1]:Fe<P?E[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"wk-video-container",children:Ie==="work"?G.isGif?a.jsx("img",{ref:qe,className:"wk-video",src:G.videoUrl,alt:G.name},G.videoUrl):a.jsx("video",{className:"wk-video",src:G.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},G.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),oe&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",oe.name]})]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[Y+1," / ",E.length]}),a.jsx("h2",{className:"wk-exercise-name",children:G.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",Fe," of ",P]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[Oe(De,fe,Ie==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:De}),a.jsx("span",{className:`wk-timer-phase ${Ie}`,children:Ie==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>ie(!B),children:B?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{N(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${Ut()*100}%`}})})]})}if(g==="complete"){const G=vl.find(oe=>oe.key===$),fe=E.length*P*(G.work+G.rest);return a.jsx("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:xo.map((oe,Re)=>a.jsx("line",{x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,className:"wk-tick-complete",strokeWidth:oe.thick?"3.5":"2",style:{animationDelay:`${Re*.02}s`}},Re))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(fe/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:E.length*P}),a.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:P}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{un(null),gt(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const G=qc.find(oe=>oe.key===ct),fe=sx[ct]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:Ip[ct]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:G?.icon})})}),a.jsxs("h2",{children:[G?.label," Workouts"]}),a.jsxs("p",{children:[fe.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:fe.map((oe,Re)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{un(oe),y("muscle_overview")},style:{animationDelay:`${Re*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:oe.name}),a.jsx("p",{children:oe.desc}),a.jsx("div",{className:"mg-session-meta",children:oe.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[oe.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[oe.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[oe.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const Pe=oe.exercises.map(ot=>ot.sets||0),it=Math.min(...Pe),At=Math.max(...Pe);return it===At?`${it} sets each`:`${it}-${At} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},oe.id))})]}),Tt]})}if(g==="muscle_overview"){const G=ae;if(!G)return null;const fe=qc.find(oe=>oe.key===ct);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:{background:Ip[ct]},children:a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:fe?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:G.name}),G.level&&a.jsx("span",{className:"mg-overview-level",children:G.level})]}),a.jsx("p",{className:"mg-overview-desc",children:G.desc})]}),G.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:G.overview})]}),G.tips&&G.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:G.tips.map((oe,Re)=>a.jsx("li",{children:oe},Re))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",G.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:G.exercises.map((oe,Re)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:Re+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:oe.name}),G.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[G.work,"s work / ",G.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[oe.sets," sets  ",oe.reps?`${oe.reps} reps`:`${oe.time}s`,oe.type==="weighted"&&"  weighted"]})]})]},Re))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>q(G),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),Tt]})}if(g==="muscle_workout"){const G=ae;if(!G)return null;const fe=G.exercises[It],oe=Je[It];if(!fe||!oe)return null;const Re=oe.sets.length,Pe=G.exercises.length,it=G.exercises.reduce((pn,On)=>pn+(On.sets||0),0),ot=Je.reduce((pn,On)=>pn+On.sets.length,0)/it*100,Zt=Ye[fe.name];fe.type==="timed"&&O===0&&!qt&&Re===Et&&setTimeout(()=>J(fe.time),0);const Un=Re+1<fe.sets?"Log Set":It+1<Pe?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${ot}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",It+1,"/",Pe]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[Zt?a.jsxs("div",{className:"mg-video-container",onClick:he,children:[Zt.isGif?a.jsx("img",{className:"mg-video",src:Zt.url,alt:fe.name}):a.jsx("video",{ref:Ke,className:"mg-video",src:Zt.url,loop:!0,muted:!0,playsInline:!0},fe.name),!ye&&!Zt.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:fe.name}),a.jsx("span",{className:`mg-ex-type-badge ${fe.type}`,children:fe.type==="weighted"?"Weight + Reps":fe.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",Re+1," of ",fe.sets]}),fe.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",fe.reps," reps"]}),fe.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",fe.time,"s"]})]}),fe.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:Qn,onChange:pn=>Mt(pn.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Pt,onChange:pn=>Dn(pn.target.value),placeholder:"0"})]})]}),fe.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Pt,onChange:pn=>Dn(pn.target.value),placeholder:"0"})]})}),fe.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[O,"s"]})}),qt?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>bn(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{O===0&&J(fe.time),bn(!0)},children:O<fe.time&&O>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:T,children:Un}),oe.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:oe.sets.map((pn,On)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",On+1,": ",pn.weight!=null?`${pn.weight}kg  ${pn.reps}`:pn.reps!=null?`${pn.reps} reps`:`${pn.time}s`]})]},On))})]})]}),Tt]})}if(g==="muscle_complete"){const G=Je.reduce((Re,Pe)=>Re+Pe.sets.length,0),fe=Je.reduce((Re,Pe)=>Re+Pe.sets.reduce((it,At)=>it+(At.weight||0)*(At.reps||0),0),0),oe=qc.find(Re=>Re.key===ct)?.label||"";return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:xo.map((Re,Pe)=>a.jsx("line",{x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,className:"wk-tick-complete",strokeWidth:Re.thick?"3.5":"2",style:{animationDelay:`${Pe*.02}s`}},Pe))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsxs("h2",{className:"wk-complete-title",children:[oe," Complete!"]}),a.jsx("p",{className:"mg-complete-session-name",children:ae?.name}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Je.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:G}),a.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),fe>0&&a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.round(fe).toLocaleString()}),a.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{un(null),gt(null),at(null),y("menu")},children:"Done"})})]}),ze&&a.jsx("div",{className:"mg-badge-celebration",onClick:()=>at(null),children:a.jsxs("div",{className:"mg-badge-celebration-card",children:[a.jsx("div",{className:"mg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:a.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),a.jsx("h3",{className:"mg-badge-celebration-title",children:ze.badges.length===1?"Badge Earned!":`${ze.badges.length} Badges Earned!`}),a.jsx("div",{className:"mg-badge-celebration-list",children:ze.badges.map((Re,Pe)=>a.jsx("div",{className:"mg-badge-celebration-item",children:Re.type==="pb_target"?`${Re.exercise}  ${Re.targetWeight}kg`:Re.label},Pe))}),a.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const Q3=60,X3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},J3=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],ax=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function td(s,e,n){const i=s.baseReps?s.baseReps+(e-1)*(n.repProg||0):void 0,l=s.baseTime?s.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:s.sets,reps:i,time:l}}const Z3={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function eD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=ar(),{isDark:l,toggleTheme:u,accent:h}=qr(),p=Ss(),g=Fr(),[y,x]=_.useState("loading"),[k,j]=_.useState(null),L=_.useRef(!1),[$,U]=_.useState(null),[V,ne]=_.useState(1),[X,ce]=_.useState(0),[_e,Ve]=_.useState(0),[Ae,M]=_.useState(0),[E,A]=_.useState([]),[P,D]=_.useState(""),[F,I]=_.useState(""),[Fe,bt]=_.useState(!1),[Y,ke]=_.useState(0),Ie=_.useRef(null),[le,De]=_.useState({}),[N,B]=_.useState(!1),ie=_.useRef(null),[pe,Ne]=_.useState(null),[Me,Ze]=_.useState([]);_.useEffect(()=>{window.scrollTo(0,0)},[y]);const[qe,rt]=_.useState(null),Bt=_.useCallback((O,J="info")=>{rt({message:O,type:J}),setTimeout(()=>rt(null),4e3)},[]),Jt=_.useRef(null),ct=()=>(Jt.current||(Jt.current=new(window.AudioContext||window.webkitAudioContext)),Jt.current),gt=()=>{try{const O=ct(),J=O.createOscillator(),ye=O.createGain();J.connect(ye),ye.connect(O.destination),J.frequency.value=1200,ye.gain.value=.4,J.start(O.currentTime),J.stop(O.currentTime+.3)}catch{}};_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const J=et(Se,"clientProgrammes",n.id),ye=await Ln(J);ye.exists()?(U(ye.data()),x("dashboard")):g.state?.templateId?x("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(J){console.error("Error loading programme:",J),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),_.useEffect(()=>{if(L.current||y==="loading")return;const O=g.state?.templateId;if(!O)return;const J=ax.find(ye=>ye.id===O);J&&(L.current=!0,j(J),x("overview"))},[y,g.state]),_.useEffect(()=>{if(!Fe||Y<=0){Fe&&Y<=0&&(bt(!1),gt());return}return Ie.current=setTimeout(()=>ke(O=>O-1),1e3),()=>clearTimeout(Ie.current)},[Fe,Y]);const ae=async O=>{if(n)try{await Rn(et(Se,"clientProgrammes",n.id),O),U(O)}catch(J){console.error("Error saving programme:",J),Bt("Failed to save. Check Firestore rules for clientProgrammes.","error")}},un=async O=>{const J={templateId:O.id,startDate:pt.now(),completedSessions:{}};await ae(J),x("dashboard")},It=async()=>{if(n)try{await Ks(et(Se,"clientProgrammes",n.id)),U(null),x("browse")}catch(O){console.error("Error quitting programme:",O)}},_t=()=>$?ax.find(O=>O.id===$.templateId):null,Et=()=>{if(!$)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const O=$.completedSessions||{},J=Object.keys(O).length,ye=_t();if(!ye)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const He=ye.duration*ye.daysPerWeek,Ye=Math.min(Math.floor(J/ye.daysPerWeek)+1,ye.duration),Be=J-(Ye-1)*ye.daysPerWeek;for(let Ke=1;Ke<=ye.duration;Ke++)for(let We=0;We<ye.daysPerWeek;We++){const Le=`w${Ke}d${We}`;if(!O[Le])return{currentWeek:Ke,completedThisWeek:Be,nextDay:We,nextWeek:Ke,totalCompleted:J,totalSessions:He}}return{currentWeek:ye.duration,completedThisWeek:ye.daysPerWeek,nextDay:-1,totalCompleted:J,totalSessions:He,complete:!0}},ut=(O,J,ye)=>{if(!$||O<=1)return null;const He=`w${O-1}d${J}`,Ye=$.completedSessions?.[He];if(!Ye)return null;const Be=Ye.exercises?.find(Ke=>Ke.name===ye);return Be?.sets?.length?Be.sets[Be.sets.length-1]:null},Je=(O,J)=>{const ye=_t();if(!ye)return;ne(O),ce(J),Ve(0),M(0),A([]),I(""),bt(!1),ke(0),B(!1),De({});const He=ye.days[J],Ye=He.exercises.map(Le=>{const xe=td(Le,O,ye);return{name:Le.name,type:Le.type,pbKey:Le.pbKey,targetSets:xe.sets,targetReps:xe.reps,targetTime:xe.time,sets:[]}});A(Ye);const Be=He.exercises[0],Ke=ut(O,J,Be.name);Ke?.weight&&Be.type==="weighted"?D(String(Ke.weight)):D(""),(async()=>{const Le={};for(const xe of He.exercises)if(xe.storagePath)try{const ze=vo(bo,xe.storagePath),at=await Il(ze);Le[xe.name]={url:at,isGif:/\.gif$/i.test(xe.storagePath)}}catch(ze){console.warn(`Video not found for ${xe.name}:`,ze)}De(Le)})(),x("session")},Gt=async()=>{_t();const O=E[_e];if(!O)return;let J={};if(O.type==="weighted"){const Ye=parseFloat(P)||0,Be=parseInt(F)||0;if(Be===0){Bt("Enter your reps","error");return}J={weight:Ye,reps:Be}}else if(O.type==="reps"){const Ye=parseInt(F)||0;if(Ye===0){Bt("Enter your reps","error");return}J={reps:Ye}}else if(O.type==="timed"){const Ye=O.targetTime-Y;J={time:Math.max(Ye,1)}}const ye=[...E];ye[_e]={...O,sets:[...O.sets,J]},A(ye),O.type==="weighted"&&J.weight>0&&await Pt(O.name,J.weight,J.reps);const He=O.sets.length+1;if(He<O.targetSets)M(He),D(J.weight?String(J.weight):""),I(""),bt(!1),ke(0);else if(_e+1<E.length){const Ye=_e+1;Ve(Ye),M(0),B(!1);const Ke=_t()?.days[X]?.exercises[Ye],We=ut(V,X,Ke?.name);We?.weight&&Ke?.type==="weighted"?D(String(We.weight)):D(""),I(""),bt(!1),ke(0)}else await Qn(ye)},Qn=async O=>{if(!$||!n)return;const J=`w${V}d${X}`,ye={...$.completedSessions,[J]:{completedAt:new Date().toISOString(),exercises:O.map(Be=>({name:Be.name,type:Be.type,sets:Be.sets}))}},He={...$,completedSessions:ye};await ae(He);const Ye=O.reduce((Be,Ke)=>Be+Ke.sets.reduce((We,Le)=>We+(Le.weight||0)*(Le.reps||0),0),0);Ye>0&&await Mt(Ye);try{const Be=_t();await Ao(Yt(Se,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:Be?.id,programmeName:Be?.name,week:V,day:X+1,exerciseCount:O.length,duration:Math.round(O.reduce((Ke,We)=>Ke+We.sets.length*1.5,0)),volume:Math.round(Ye),completedAt:pt.now()})}catch(Be){console.error("Error saving workout log:",Be)}Me.length>0&&(Ne({badges:[...Me]}),Ze([])),x("sessionComplete")},Mt=async O=>{if(n)try{const J=await Ln(et(Se,"coreBuddyAchievements",n.id)),ye=J.exists()?J.data():{clientId:n.id,badges:[],totalVolume:0},He=ye.totalVolume||0,Ye=He+O,Be=[];J3.forEach(We=>{Ye>=We.threshold&&He<We.threshold&&(ye.badges.some(xe=>xe.type==="volume_milestone"&&xe.milestone===We.threshold)||Be.push({type:"volume_milestone",milestone:We.threshold,label:We.label,achievedAt:pt.now()}))});const Ke=[...ye.badges,...Be];await Rn(et(Se,"coreBuddyAchievements",n.id),{clientId:n.id,badges:Ke,totalVolume:Math.round(Ye),updatedAt:pt.now()}),Be.length>0&&Ze(We=>[...We,...Be])}catch(J){console.error("Error updating volume:",J)}},Pt=async(O,J,ye)=>{if(n)try{const He=n.id,Ye=await Ln(et(Se,"coreBuddyPBs",He)),Ke=(Ye.exists()?Ye.data():null)?.exercises||{},We=Ke[O];let Le=!1;if(We?(J>(We.weight||0)||J===(We.weight||0)&&ye>(We.reps||0))&&(Le=!0):Le=!0,Le){const xe={...Ke,[O]:{weight:J,reps:ye,achievedAt:pt.now()}};await Rn(et(Se,"coreBuddyPBs",He),{clientId:n.id,exercises:xe,updatedAt:pt.now()}),Bt(`New PB! ${J}kg  ${ye} reps`,"success"),gt(),await Dn(O,J)}}catch(He){console.error("Error checking PB:",He)}},Dn=async(O,J)=>{if(n)try{const ye=await Ln(et(Se,"coreBuddyTargets",n.id));if(!ye.exists())return;const Ye=(ye.data().targets||{})[O];if(!Ye||J<Ye.targetWeight)return;const Be=await Ln(et(Se,"coreBuddyAchievements",n.id)),Ke=Be.exists()?Be.data():{clientId:n.id,badges:[],totalVolume:0};if(Ke.badges.some(ze=>ze.type==="pb_target"&&ze.exercise===O&&ze.targetWeight===Ye.targetWeight))return;const Le={type:"pb_target",exercise:O,group:X3[O]||"push",targetWeight:Ye.targetWeight,achievedAt:pt.now()},xe=[...Ke.badges,Le];await Rn(et(Se,"coreBuddyAchievements",n.id),{...Ke,badges:xe,updatedAt:pt.now()}),Ze(ze=>[...ze,Le])}catch(ye){console.error("Error checking target badge:",ye)}},qt=qe&&a.jsxs("div",{className:`toast-notification ${qe.type}`,children:[qe.type==="success"&&a.jsx("span",{children:" "}),qe.message]}),bn=(O,J)=>a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:J,"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(i||y==="loading")return a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&k){const O=k;return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[bn(O.name,()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-overview-hero",children:[a.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:Z3[O.focus]})}),a.jsx("h2",{className:"pg-overview-name",children:O.name}),a.jsx("p",{className:"pg-overview-desc",children:O.description}),a.jsxs("div",{className:"pg-overview-stats",children:[a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:O.duration}),a.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:O.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:O.duration*O.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),a.jsx("div",{className:"pg-overview-days",children:O.days.map((J,ye)=>a.jsxs("div",{className:"pg-day-card",children:[a.jsxs("div",{className:"pg-day-header",children:[a.jsx("span",{className:"pg-day-name",children:J.name}),a.jsx("span",{className:"pg-day-label",children:J.label})]}),a.jsx("div",{className:"pg-day-exercises",children:J.exercises.map((He,Ye)=>{const Be=td(He,1,O);return a.jsxs("div",{className:"pg-day-ex",children:[a.jsx("span",{className:"pg-day-ex-name",children:He.name}),a.jsx("span",{className:"pg-day-ex-target",children:He.type==="timed"?`${Be.sets}${Be.time}s`:`${Be.sets}${Be.reps}`}),a.jsx("span",{className:`pg-day-ex-badge pg-badge-${He.type}`,children:He.type==="weighted"?"WT":He.type==="timed"?"TMR":"BW"})]},Ye)})})]},ye))}),a.jsxs("div",{className:"pg-overview-note",children:[a.jsx("strong",{children:"Progressive Overload:"})," +",O.repProg," reps/week",O.timeProg?`, +${O.timeProg}s/week for timed`:""]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>un(O),children:"Start Programme"})]}),qt]})}if(y==="dashboard"){const O=_t();if(!O)return x("browse"),null;const J=Et(),ye=$?.completedSessions||{},He=J.totalSessions?Math.round(J.totalCompleted/J.totalSessions*100):0,Ye=Math.round(J.totalCompleted/(J.totalSessions||1)*Q3);return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[bn("Programme",()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-dash-hero",children:[a.jsxs("div",{className:"pg-dash-ring-wrap",children:[a.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:xo.map((Be,Ke)=>a.jsx("line",{x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,className:Ke<Ye?"pg-tick-filled":"pg-tick-empty",strokeWidth:Be.thick?"3":"2"},Ke))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"pg-dash-ring-logo",width:"50",height:"50"})]}),a.jsx("h2",{className:"pg-dash-name",children:O.name}),a.jsxs("div",{className:"pg-dash-progress-text",children:[a.jsxs("span",{className:"pg-dash-pct",children:[He,"%"]}),a.jsxs("span",{className:"pg-dash-week",children:["Week ",J.currentWeek," of ",O.duration]})]})]}),a.jsx("div",{className:"pg-weeks",children:Array.from({length:O.duration},(Be,Ke)=>{const We=Ke+1;return a.jsxs("div",{className:`pg-week-row${We===J.currentWeek?" pg-week-current":""}`,children:[a.jsxs("span",{className:"pg-week-label",children:["W",We]}),a.jsx("div",{className:"pg-week-days",children:O.days.map((Le,xe)=>{const ze=`w${We}d${xe}`,at=!!ye[ze],St=!J.complete&&We===J.nextWeek&&xe===J.nextDay;return a.jsx("button",{className:`pg-day-dot${at?" done":""}${St?" next":""}`,disabled:at,onClick:()=>{St&&Je(We,xe)},children:at?a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}):a.jsx("span",{children:Le.name.replace("Day ","")})},xe)})})]},Ke)})}),!J.complete&&J.nextDay>=0&&a.jsxs("div",{className:"pg-next-session",children:[a.jsx("h3",{children:"Next Session"}),a.jsxs("p",{className:"pg-next-info",children:["Week ",J.nextWeek,"  ",O.days[J.nextDay].name,": ",O.days[J.nextDay].label]}),a.jsx("div",{className:"pg-next-exercises",children:O.days[J.nextDay].exercises.map((Be,Ke)=>{const We=td(Be,J.nextWeek,O);return a.jsxs("div",{className:"pg-next-ex",children:[a.jsx("span",{className:"pg-next-ex-name",children:Be.name}),a.jsx("span",{className:"pg-next-ex-target",children:Be.type==="timed"?`${We.sets}${We.time}s`:`${We.sets}${We.reps}`})]},Ke)})}),a.jsx("button",{className:"pg-start-btn",onClick:()=>Je(J.nextWeek,J.nextDay),children:"Start Session"})]}),J.complete&&a.jsxs("div",{className:"pg-complete-msg",children:[a.jsx("h3",{children:"Programme Complete! "}),a.jsxs("p",{children:["You finished all ",J.totalSessions," sessions."]}),a.jsx("button",{className:"pg-start-btn",onClick:It,children:"Choose New Programme"})]}),a.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&It()},children:"Quit Programme"})]}),a.jsx(Ur,{active:"workouts"}),qt]})}if(y==="session"){const O=_t();if(!O)return null;const J=O.days[X],ye=J.exercises[_e],He=td(ye,V,O),Ye=E[_e],Be=Ye?.sets?.length||0,Ke=J.exercises.length,We=(_e+Be/He.sets)/Ke,Le=le[ye.name],xe=ut(V,X,ye.name);ye.type==="timed"&&Y===0&&!Fe&&Be===Ae&&setTimeout(()=>ke(He.time),0);const ze=()=>{Le?.isGif?B(!N):ie.current&&(N?ie.current.pause():ie.current.play(),B(!N))};return a.jsxs("div",{className:"pg-page pg-page-session","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"pg-session-progress",children:a.jsx("div",{className:"pg-session-progress-fill",style:{width:`${We*100}%`}})}),a.jsxs("div",{className:"pg-session-header",children:[a.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&x("dashboard")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),a.jsxs("div",{className:"pg-session-title",children:[a.jsxs("span",{className:"pg-session-counter",children:[_e+1," / ",Ke]}),a.jsxs("span",{className:"pg-session-week",children:["Week ",V,"  ",J.name]})]})]}),Le&&a.jsxs("div",{className:"pg-video-container",onClick:ze,children:[Le.isGif?a.jsx("img",{className:"pg-video",src:Le.url,alt:ye.name}):a.jsx("video",{ref:ie,className:"pg-video",src:Le.url,loop:!0,muted:!0,playsInline:!0},ye.name),!N&&a.jsxs("div",{className:"pg-video-overlay",children:[a.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),a.jsx("div",{className:"pg-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"pg-exercise-card",children:[a.jsx("h2",{className:"pg-ex-name",children:ye.name}),a.jsx("span",{className:`pg-ex-type-badge pg-badge-${ye.type}`,children:ye.type==="weighted"?"Weight + Reps":ye.type==="timed"?"Timed":"Reps Only"}),ye.type==="weighted"&&xe&&a.jsxs("div",{className:"pg-last-week",children:[a.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),a.jsxs("span",{className:"pg-last-week-value",children:[xe.weight,"kg x ",xe.reps," reps"]})]}),a.jsxs("div",{className:"pg-ex-set-info",children:[a.jsxs("span",{className:"pg-ex-set-num",children:["Set ",Be+1," of ",He.sets]}),a.jsxs("span",{className:"pg-ex-target",children:["Target: ",ye.type==="timed"?`${He.time}s hold`:`${He.reps} reps`]})]}),ye.type==="weighted"&&a.jsxs("div",{className:"pg-input-area",children:[a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",value:P,onChange:at=>D(at.target.value),placeholder:"0",className:"pg-input"})]}),a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:F,onChange:at=>I(at.target.value),placeholder:String(He.reps),className:"pg-input"})]})]}),ye.type==="reps"&&a.jsx("div",{className:"pg-input-area",children:a.jsxs("div",{className:"pg-input-group pg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:F,onChange:at=>I(at.target.value),placeholder:String(He.reps),className:"pg-input"})]})}),ye.type==="timed"&&a.jsxs("div",{className:"pg-timer-area",children:[a.jsx("div",{className:"pg-timer-display",children:a.jsxs("span",{className:"pg-timer-value",children:[Y,"s"]})}),Fe?a.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>bt(!1),children:"Stop"}):a.jsx("button",{className:"pg-timer-btn",onClick:()=>{Y===0&&ke(He.time),bt(!0)},children:Y<He.time&&Y>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"pg-log-set-btn",onClick:Gt,disabled:ye.type==="timed"&&Fe,children:Be+1<He.sets?"Log Set":_e+1<Ke?"Log Set  Next Exercise":"Log Set  Complete"}),Ye?.sets?.length>0&&a.jsx("div",{className:"pg-completed-sets",children:Ye.sets.map((at,St)=>a.jsxs("div",{className:"pg-completed-set",children:[a.jsx("span",{className:"pg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",St+1,": ",at.weight!==void 0?`${at.weight}kg  ${at.reps}`:at.time!==void 0?`${at.time}s`:`${at.reps} reps`]})]},St))})]}),qt]})}if(y==="sessionComplete"){const J=_t()?.days[X],ye=E.reduce((Ye,Be)=>Ye+Be.sets.length,0),He=E.reduce((Ye,Be)=>Ye+Be.sets.reduce((Ke,We)=>Ke+(We.weight||0)*(We.reps||0),0),0);return a.jsxs("div",{className:"pg-page pg-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"pg-session-done",children:[a.jsxs("div",{className:"pg-done-ring",children:[a.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:xo.map((Ye,Be)=>a.jsx("line",{x1:Ye.x1,y1:Ye.y1,x2:Ye.x2,y2:Ye.y2,className:"pg-tick-complete",strokeWidth:Ye.thick?"3.5":"2",style:{animationDelay:`${Be*.02}s`}},Be))}),a.jsx("div",{className:"pg-done-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),a.jsxs("p",{className:"pg-done-subtitle",children:["Week ",V,"  ",J?.name,": ",J?.label]}),a.jsxs("div",{className:"pg-done-stats",children:[a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:E.length}),a.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:ye}),a.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),He>0&&a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Math.round(He).toLocaleString()}),a.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>x("dashboard"),children:"Back to Programme"})]}),pe&&a.jsx("div",{className:"pg-badge-celebration",onClick:()=>Ne(null),children:a.jsxs("div",{className:"pg-badge-celebration-card",onClick:Ye=>Ye.stopPropagation(),children:[a.jsx("div",{className:"pg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pg-badge-celebration-title",children:pe.badges.length===1?"Badge Earned!":`${pe.badges.length} Badges Earned!`}),a.jsx("div",{className:"pg-badge-celebration-list",children:pe.badges.map((Ye,Be)=>a.jsx("div",{className:"pg-badge-celebration-item",children:Ye.type==="pb_target"?`${Ye.exercise}  ${Ye.targetWeight}kg`:Ye.label},Be))}),a.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Ne(null),children:"Tap to dismiss"})]})}),qt]})}return null}const tD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},nD={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},Lp=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function sD(s){return tD[s]||"push"}function rD(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function aD(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function iD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=ar(),{isDark:l,toggleTheme:u,accent:h}=qr(),p=Ss(),[g,y]=_.useState(!0),[x,k]=_.useState(null),[j,L]=_.useState({});_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const[A,P]=await Promise.all([Ln(et(Se,"coreBuddyAchievements",n.id)),Ln(et(Se,"coreBuddyPBs",n.id))]);A.exists()&&k(A.data()),P.exists()&&L(P.data().exercises||{})}catch(A){console.error("Error loading achievements:",A)}y(!1)})()},[n]);const $=x?.badges||[],U=x?.totalVolume||0,V=$.filter(E=>E.type==="pb_target"),ne=$.filter(E=>E.type==="volume_milestone"),X={push:[],pull:[],lower:[],core:[]};V.forEach(E=>{const A=E.group||sD(E.exercise);X[A]&&X[A].push(E)});const ce=Lp.find(E=>U<E.threshold),_e=Lp.filter(E=>U>=E.threshold).pop()?.threshold||0,Ve=ce?(U-_e)/(ce.threshold-_e):1;if(i||g)return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsx("div",{className:"ach-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});const Ae=$.length,M=Ae>0||U>0;return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ach-main",children:[a.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/core-buddy"),children:" Back"}),a.jsxs("div",{className:"ach-stats-banner",children:[a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Ae}),a.jsx("span",{className:"ach-stat-label",children:Ae===1?"Badge":"Badges"})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:rD(U)}),a.jsxs("span",{className:"ach-stat-label",children:[aD(U)," lifted"]})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Object.keys(j).length}),a.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!M&&a.jsxs("div",{className:"ach-empty",children:[a.jsx("div",{className:"ach-empty-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),a.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),a.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),a.jsx("h4",{children:"No achievements yet"}),a.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),a.jsxs("div",{className:"ach-volume-hero",children:[a.jsxs("div",{className:"ach-volume-ring",children:[a.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:xo.map((E,A)=>{const P=A<Math.round(Ve*60);return a.jsx("line",{x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,className:P?"ach-tick-filled":"ach-tick-empty",strokeWidth:E.thick?"3":"2"},A)})}),a.jsxs("div",{className:"ach-volume-center",children:[a.jsx("span",{className:"ach-volume-number",children:Math.round(U).toLocaleString()}),a.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),ce&&a.jsxs("div",{className:"ach-volume-next",children:["Next: ",a.jsx("strong",{children:ce.label})," (",(ce.threshold-U).toLocaleString(),"kg to go)"]})]}),a.jsx("div",{className:"ach-milestone-shelf",children:Lp.map((E,A)=>{const P=U>=E.threshold,D=ne.find(F=>F.milestone===E.threshold);return a.jsxs("div",{className:`ach-milestone ${P?"unlocked":"locked"}`,children:[a.jsx("div",{className:"ach-milestone-hex",children:a.jsx("span",{className:"ach-milestone-icon",children:E.icon})}),a.jsx("span",{className:"ach-milestone-label",children:E.label}),D?.achievedAt&&a.jsx("span",{className:"ach-milestone-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},A)})})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),V.length===0?a.jsx("div",{className:"ach-pb-empty",children:a.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",a.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(X).map(([E,A])=>{if(A.length===0)return null;const P=nD[E];return a.jsxs("div",{className:"ach-group",children:[a.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:P.color},children:[a.jsx("span",{className:"ach-group-label",style:{color:P.color},children:P.label}),a.jsx("span",{className:"ach-group-count",children:A.length})]}),a.jsx("div",{className:"ach-badge-grid",children:A.map((D,F)=>a.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${F*.06}s`,"--group-color":P.color},children:[a.jsx("div",{className:"ach-badge-hex",style:{borderColor:P.color,boxShadow:`0 0 12px ${P.color}33`},children:a.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:P.color,strokeWidth:"2",strokeLinecap:"round",children:a.jsx("path",{d:P.icon})})}),a.jsxs("div",{className:"ach-badge-info",children:[a.jsx("span",{className:"ach-badge-exercise",children:D.exercise}),a.jsxs("span",{className:"ach-badge-value",style:{color:P.color},children:[D.targetWeight,"kg"]}),D.achievedAt&&a.jsx("span",{className:"ach-badge-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},F))})]},E)})]})]}),a.jsx(Ur,{active:"home"})]})}const nd=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function oD(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Op(s){return s.toISOString().split("T")[0]}function lD(s){return Array.from({length:7},(e,n)=>{const i=new Date(s);return i.setDate(s.getDate()+n),i})}function cD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=ar(),{isDark:l,toggleTheme:u,accent:h}=qr(),p=Ss(),[g,y]=_.useState({}),[x,k]=_.useState(!0),[j,L]=_.useState(!1),[$,U]=_.useState(0),[V,ne]=_.useState(null),[X,ce]=_.useState(null),[_e,Ve]=_.useState(!1),Ae=_.useRef([]),M=_.useRef([]),E=_.useCallback((B,ie="info")=>{ne({message:B,type:ie}),setTimeout(()=>ne(null),3e3)},[]),A=new Date,P=Op(A),D=oD(A),F=lD(D),I=["M","T","W","T","F","S","S"];_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const ie=Yt(Se,"habitLogs"),pe=An(ie,vn("clientId","==",n.id)),Ne=await _n(pe),Me={};Ne.docs.forEach(rt=>{const Bt=rt.data();Me[Bt.date]={...Bt,_id:rt.id}}),y(Me);let Ze=0;const qe=new Date(A);for(;;){const rt=Op(qe),Bt=Me[rt];if(Bt)if(Object.values(Bt.habits||{}).filter(Boolean).length>=3)Ze++,qe.setDate(qe.getDate()-1);else break;else if(rt===P)qe.setDate(qe.getDate()-1);else break}U(Ze)}catch(ie){console.error("Error loading habit logs:",ie)}finally{k(!1)}})()},[s,n]);const Fe=g[P]||{habits:{}},bt=async B=>{if(!s||j)return;const ie=Fe.habits?.[B]||!1;ie||(Ae.current=[...Array(10)].map((pe,Ne)=>{const Me=Ne/10*2*Math.PI,Ze=18+Math.random()*20;return{tx:Math.cos(Me)*Ze,ty:Math.sin(Me)*Ze,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),ce(B),setTimeout(()=>ce(null),700)),L(!0);try{const pe=Fe.habits||{},Ne={...pe,[B]:!pe[B]},Me=Fe._id||`${n.id}_${P}`;await Rn(et(Se,"habitLogs",Me),{clientId:n.id,date:P,habits:Ne}),y(qe=>({...qe,[P]:{clientId:n.id,date:P,habits:Ne,_id:Me}})),Object.values(Ne).filter(Boolean).length===nd.length&&!ie&&(M.current=[...Array(50)].map((qe,rt)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][rt%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{Ve(!0),setTimeout(()=>Ve(!1),3500)},500))}catch(pe){console.error("Error saving habit:",pe),E("Failed to save. Try again.","error")}finally{L(!1)}},Y=F.map(B=>{const ie=Op(B),pe=g[ie],Ne=pe?Object.values(pe.habits||{}).filter(Boolean).length:0;return{date:B,dateStr:ie,completed:Ne,total:nd.length}}),ke=Y.reduce((B,ie)=>B+ie.completed,0),Ie=Y.reduce((B,ie)=>B+ie.total,0),le=Ie>0?Math.round(ke/Ie*100):0,De=Object.values(Fe.habits||{}).filter(Boolean).length,N=Math.round(De/nd.length*100);return a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||x?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-ring-section",children:[a.jsxs("div",{className:"cbc-progress-ring",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-N/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-pct",children:[N,"%"]}),a.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),a.jsxs("div",{className:"cbc-streak",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{className:"cbc-streak-count",children:$}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsx("div",{className:"cbc-habits",children:nd.map(B=>{const ie=Fe.habits?.[B.key]||!1,pe=X===B.key;return a.jsxs("button",{className:`cbc-habit-btn cbc-habit-${B.key} ${ie?"cbc-habit-done":""} ${pe?"cbc-habit-just-checked":""}`,onClick:()=>bt(B.key),disabled:j,children:[a.jsx("div",{className:"cbc-habit-check",children:ie?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${pe?"cbc-check-animate":""}`})}):a.jsx("div",{className:"cbc-habit-circle"})}),pe&&a.jsx("div",{className:"cbc-particles",children:Ae.current.map((Ne,Me)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${Ne.tx}px`,"--ty":`${Ne.ty}px`,"--size":`${Ne.size}px`,animationDuration:`${Ne.duration}s`}},Me))}),a.jsx("div",{className:`cbc-habit-icon cbc-icon-${B.key}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:B.icon})})}),a.jsx("span",{className:"cbc-habit-label",children:B.label})]},B.key)})})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsx("div",{className:"cbc-week-grid",children:Y.map((B,ie)=>{const pe=B.dateStr===P,Ne=B.total>0?B.completed/B.total:0,Me=38,Ze=2*Math.PI*Me,qe=Ze-Ne*Ze;return a.jsxs("div",{className:`cbc-day-ring ${pe?"cbc-day-today":""} ${B.completed>0?"cbc-day-active":""}`,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:Me}),a.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:Me,strokeDasharray:Ze,strokeDashoffset:qe})]}),a.jsx("span",{className:"cbc-day-label",children:I[ie]}),a.jsxs("span",{className:"cbc-day-count",children:[B.completed,"/",B.total]})]},ie)})}),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${le}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[ke," / ",Ie," habits this week (",le,"%)"]})]})]})]}),a.jsx(Ur,{active:"home"}),_e&&a.jsxs("div",{className:"cbc-celebration",onClick:()=>Ve(!1),children:[a.jsx("div",{className:"cbc-confetti-container",children:M.current.map((B,ie)=>a.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${B.x}%`,"--delay":`${B.delay}s`,"--color":B.color,"--drift":`${B.drift}px`,"--spin":`${B.spin}deg`,"--duration":`${B.duration}s`,width:`${B.width}px`,height:`${B.height}px`}},ie))}),a.jsxs("div",{className:"cbc-celebration-card",children:[a.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),a.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),a.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),V&&a.jsx("div",{className:`toast-notification ${V.type}`,children:V.message})]})}function sd(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function ix(s,e){return[s,e].sort().join("_")}function uD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=ar(),{isDark:l,toggleTheme:u}=qr(),h=Ss(),[p,g]=_.useState("buddies"),[y,x]=_.useState([]),[k,j]=_.useState([]),[L,$]=_.useState([]),[U,V]=_.useState(""),[ne,X]=_.useState([]),[ce,_e]=_.useState([]),[Ve,Ae]=_.useState(!0),[M,E]=_.useState(null),[A,P]=_.useState(null),D=_.useCallback((le,De="info")=>{P({message:le,type:De}),setTimeout(()=>P(null),3500)},[]);_.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const F=_.useCallback(async()=>{if(n){Ae(!0);try{const le=n.id,N=(await _n(Yt(Se,"clients"))).docs.map(qe=>({id:qe.id,...qe.data()}));_e(N);const B=Object.fromEntries(N.map(qe=>[qe.id,qe])),ie=await _n(An(Yt(Se,"buddies"),vn("user1","==",le))),pe=await _n(An(Yt(Se,"buddies"),vn("user2","==",le))),Ne=new Set;[...ie.docs,...pe.docs].forEach(qe=>{const rt=qe.data(),Bt=rt.user1===le?rt.user2:rt.user1;Ne.add(Bt)}),x(Array.from(Ne).map(qe=>B[qe]).filter(Boolean));const Me=await _n(An(Yt(Se,"buddyRequests"),vn("toId","==",le),vn("status","==","pending")));j(Me.docs.map(qe=>({reqId:qe.id,...qe.data(),fromClient:B[qe.data().fromId]})).filter(qe=>qe.fromClient));const Ze=await _n(An(Yt(Se,"buddyRequests"),vn("fromId","==",le),vn("status","==","pending")));$(Ze.docs.map(qe=>({reqId:qe.id,...qe.data(),toClient:B[qe.data().toId]})).filter(qe=>qe.toClient))}catch(le){console.error("Error fetching buddy data:",le),D("Failed to load buddies","error")}finally{Ae(!1)}}},[n,D]);_.useEffect(()=>{F()},[F]),_.useEffect(()=>{if(!U.trim()||!n){X([]);return}const le=U.toLowerCase(),De=n.id,N=new Set(y.map(Ne=>Ne.id)),B=new Set(L.map(Ne=>Ne.toId)),ie=new Set(k.map(Ne=>Ne.fromId)),pe=ce.filter(Ne=>Ne.id===De||!Ne.name||!Ne.coreBuddyAccess?!1:Ne.name.toLowerCase().includes(le)).map(Ne=>({...Ne,isBuddy:N.has(Ne.id),isPendingOut:B.has(Ne.id),isPendingIn:ie.has(Ne.id)})).slice(0,20);X(pe)},[U,ce,y,L,k,n]);const I=async le=>{E(le);try{const De=`${n.id}_${le}`;await Rn(et(Se,"buddyRequests",De),{fromId:n.id,toId:le,status:"pending",createdAt:sa()}),D("Buddy request sent!","success"),await F()}catch(De){console.error("Error sending request:",De),D("Failed to send request","error")}finally{E(null)}},Fe=async le=>{E(le.reqId);try{const De=ix(le.fromId,n.id);await Rn(et(Se,"buddies",De),{user1:[le.fromId,n.id].sort()[0],user2:[le.fromId,n.id].sort()[1],connectedAt:sa()}),await Ks(et(Se,"buddyRequests",le.reqId)),D("Buddy added!","success"),await F()}catch(De){console.error("Error accepting request:",De),D("Failed to accept","error")}finally{E(null)}},bt=async le=>{E(le.reqId);try{await Ks(et(Se,"buddyRequests",le.reqId)),D("Request declined","info"),await F()}catch(De){console.error("Error declining:",De),D("Failed to decline","error")}finally{E(null)}},Y=async le=>{E(le.reqId);try{await Ks(et(Se,"buddyRequests",le.reqId)),D("Request cancelled","info"),await F()}catch(De){console.error("Error cancelling:",De),D("Failed to cancel","error")}finally{E(null)}},ke=async le=>{E(le);try{const De=ix(n.id,le);await Ks(et(Se,"buddies",De)),D("Buddy removed","info"),await F()}catch(De){console.error("Error removing buddy:",De),D("Failed to remove buddy","error")}finally{E(null)}},Ie=k.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!n?null:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),Ie>0&&a.jsx("span",{className:"bdy-tab-badge",children:Ie})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Ve?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(le=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${le.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:le.photoURL?a.jsx("img",{src:le.photoURL,alt:le.name}):a.jsx("span",{children:sd(le.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:le.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:De=>{De.stopPropagation(),ke(le.id)},disabled:M===le.id,"aria-label":"Remove buddy",children:M===le.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},le.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[k.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:k.map(le=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:le.fromClient.photoURL?a.jsx("img",{src:le.fromClient.photoURL,alt:le.fromClient.name}):a.jsx("span",{children:sd(le.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:le.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>Fe(le),disabled:M===le.reqId,children:M===le.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>bt(le),disabled:M===le.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},le.reqId))})]}),L.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:L.map(le=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:le.toClient?.photoURL?a.jsx("img",{src:le.toClient.photoURL,alt:le.toClient.name}):a.jsx("span",{children:sd(le.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:le.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>Y(le),disabled:M===le.reqId,children:M===le.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},le.reqId))})]}),k.length===0&&L.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:U,onChange:le=>V(le.target.value),autoFocus:!0}),U&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>V(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),U.trim()&&ne.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',U,'"']})}),ne.length>0&&a.jsx("div",{className:"bdy-list",children:ne.map(le=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${le.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:le.photoURL?a.jsx("img",{src:le.photoURL,alt:le.name}):a.jsx("span",{children:sd(le.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:le.name}),le.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),le.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):le.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):le.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:De=>{De.stopPropagation();const N=k.find(B=>B.fromId===le.id);N&&Fe(N)},disabled:!!M,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:De=>{De.stopPropagation(),I(le.id)},disabled:M===le.id,children:M===le.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},le.id))})]})]})]}),a.jsx(Ur,{}),A&&a.jsxs("div",{className:`toast-notification ${A.type}`,children:[a.jsx("span",{className:"toast-icon",children:A.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):A.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:A.message})]})]})}function rd(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Vp(s,e){return[s,e].sort().join("_")}function hD(s){if(s<60)return`${s}m`;const e=Math.floor(s/60),n=s%60;return n>0?`${e}h ${n}m`:`${e}h`}function dD(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function ox(s){return s.toISOString().split("T")[0]}function fD(s){if(s.size===0)return 0;const n=dD(new Date);let i=0,l=new Date(n);const u=new Date(l);u.setDate(u.getDate()+6);let h=!1;s.forEach(p=>{const g=new Date(p);g>=l&&g<=u&&(h=!0)}),h||l.setDate(l.getDate()-7);for(let p=0;p<52;p++){const g=new Date(l),y=new Date(l);y.setDate(y.getDate()+6);let x=!1;if(s.forEach(k=>{const j=new Date(k);j>=g&&j<=y&&(x=!0)}),x)i++,l.setDate(l.getDate()-7);else break}return i}function lx(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function mD(s,e=800){return new Promise(n=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,h=i.height;u>h?u>e&&(h=Math.round(h*e/u),u=e):h>e&&(u=Math.round(u*e/h),h=e),l.width=u,l.height=h,l.getContext("2d").drawImage(i,0,0,u,h),l.toBlob(p=>n(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}const cx=[{id:"first_workout",name:"First Rep",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 4v16"}),a.jsx("path",{d:"M18 4v16"}),a.jsx("path",{d:"M6 12h12"}),a.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),a.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]})},{id:"workouts_10",name:"On Fire",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),a.jsx("path",{d:"M12 14v4"}),a.jsx("path",{d:"M10 18h4"})]})},{id:"workouts_25",name:"Lightning",icon:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})},{id:"workouts_50",name:"Iron Will",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12h4"}),a.jsx("path",{d:"M16 12h4"}),a.jsx("path",{d:"M12 4v4"}),a.jsx("path",{d:"M12 16v4"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]})},{id:"workouts_100",name:"Century",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]})},{id:"streak_2",name:"2 Wk",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M9 16l2 2 4-4"})]})},{id:"streak_4",name:"4 Wk",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M8 16h8"}),a.jsx("path",{d:"M12 14v4"})]})},{id:"streak_8",name:"8 Wk",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),a.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]})},{id:"programme_done",name:"Finisher",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("path",{d:"M4 22h16"}),a.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),a.jsx("path",{d:"M9 12l2 2 4-4"})]})},{id:"habits_7",name:"Habits",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})},{id:"nutrition_7",name:"Fuel",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),a.jsx("path",{d:"M9 7h6"})]})},{id:"first_pb",name:"PB",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M12 14v8"}),a.jsx("path",{d:"M9 18l3 3 3-3"}),a.jsx("path",{d:"M10 6l2 2 2-2"})]})},{id:"pbs_5",name:"Climb",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 20h18"}),a.jsx("path",{d:"M5 20V10l4-6"}),a.jsx("path",{d:"M9 20V4"}),a.jsx("path",{d:"M13 20V10l4-6"}),a.jsx("path",{d:"M17 20V4"}),a.jsx("path",{d:"M21 20V10"})]})},{id:"leaderboard_join",name:"Social",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}];function pD(){const{userId:s}=Gj(),{currentUser:e,isClient:n,clientData:i,loading:l}=ar(),{isDark:u,toggleTheme:h}=qr(),p=Ss(),[g,y]=_.useState(null),[x,k]=_.useState({workouts:0,minutes:0,streak:0}),[j,L]=_.useState([]),[$,U]=_.useState("none"),[V,ne]=_.useState(null),[X,ce]=_.useState(!0),[_e,Ve]=_.useState(!1),[Ae,M]=_.useState(null),[E,A]=_.useState([]),[P,D]=_.useState(!1),[F,I]=_.useState(""),[Fe,bt]=_.useState(null),[Y,ke]=_.useState(null),[Ie,le]=_.useState(!1),[De,N]=_.useState(new Set),[B,ie]=_.useState(new Set),[pe,Ne]=_.useState({}),[Me,Ze]=_.useState({}),[qe,rt]=_.useState({}),Bt=_.useRef(null),Jt=_.useRef(null),ct=_.useCallback((O,J="info")=>{M({message:O,type:J}),setTimeout(()=>M(null),3500)},[]);_.useEffect(()=>{!l&&(!e||!n)&&p("/")},[e,n,l,p]);const gt=i?.id===s;_.useEffect(()=>{if(!i||!s)return;let O=!1;return(async()=>{ce(!0);try{const He=(await _n(Yt(Se,"clients"))).docs.map(ht=>({id:ht.id,...ht.data()})).find(ht=>ht.id===s);if(!He){O||ce(!1);return}O||y(He);const Ye=new Date,Be=new Date(Ye);Be.setDate(Be.getDate()-365),Be.setHours(0,0,0,0);let Ke=0,We=0;const Le=new Set;(await _n(An(Yt(Se,"workoutLogs"),vn("clientId","==",s)))).docs.forEach(ht=>{const dt=ht.data();Ke++,We+=dt.duration||0,dt.completedAt&&Le.add(ox(dt.completedAt.toDate()))}),(await _n(Yt(Se,"circuitSessions"))).docs.forEach(ht=>{const dt=ht.data();(dt.slots||[]).forEach(Rt=>{Rt.attended&&Rt.memberId===s&&(Ke++,We+=45,Le.add(dt.date))})});const at=ox(new Date);(await _n(An(Yt(Se,"sessions"),vn("clientId","==",s)))).docs.forEach(ht=>{const dt=ht.data();dt.date<=at&&(Ke++,We+=dt.duration||45,Le.add(dt.date))});const Wt=fD(Le);O||k({workouts:Ke,minutes:We,streak:Wt});const Qe=await Ln(et(Se,"coreBuddyAchievements",s));if(O||L(Qe.exists()?Qe.data().unlocked||[]:[]),!gt){const ht=i.id,dt=Vp(ht,s);if((await Ln(et(Se,"buddies",dt))).exists())O||U("buddy");else{const Lt=`${ht}_${s}`,kt=await Ln(et(Se,"buddyRequests",Lt));if(kt.exists()&&kt.data().status==="pending")O||(U("pending_out"),ne(Lt));else{const Kt=`${s}_${ht}`,Ht=await Ln(et(Se,"buddyRequests",Kt));Ht.exists()&&Ht.data().status==="pending"?O||(U("pending_in"),ne(Kt)):O||U("none")}}}}catch(J){console.error("Error loading profile:",J)}finally{O||ce(!1)}})(),()=>{O=!0}},[i,s,gt]);const ae=async()=>{Ve(!0);try{const O=`${i.id}_${s}`;await Rn(et(Se,"buddyRequests",O),{fromId:i.id,toId:s,status:"pending",createdAt:sa()}),U("pending_out"),ne(O),ct("Buddy request sent!","success")}catch(O){console.error(O),ct("Failed to send request","error")}finally{Ve(!1)}},un=async()=>{if(V){Ve(!0);try{const O=Vp(i.id,s);await Rn(et(Se,"buddies",O),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:sa()}),await Ks(et(Se,"buddyRequests",V)),U("buddy"),ct("Buddy added!","success")}catch(O){console.error(O),ct("Failed to accept","error")}finally{Ve(!1)}}},It=async()=>{if(V){Ve(!0);try{await Ks(et(Se,"buddyRequests",V)),U("none"),ct($==="pending_out"?"Request cancelled":"Request declined","info")}catch(O){console.error(O),ct("Failed","error")}finally{Ve(!1)}}},_t=async()=>{Ve(!0);try{const O=Vp(i.id,s);await Ks(et(Se,"buddies",O)),U("none"),ct("Buddy removed","info")}catch(O){console.error(O),ct("Failed to remove","error")}finally{Ve(!1)}},Et=_.useCallback(async()=>{if(s){D(!0);try{const O=await _n(An(Yt(Se,"posts"),vn("authorId","==",s),Bd("createdAt","desc"),Ud(30)));if(A(O.docs.map(J=>({id:J.id,...J.data()}))),i){const J=await _n(An(Yt(Se,"postLikes"),vn("userId","==",i.id)));N(new Set(J.docs.map(ye=>ye.data().postId)))}}catch(O){console.error("Error loading journey:",O)}finally{D(!1)}}},[s,i]);_.useEffect(()=>{!X&&g&&Et()},[X,g,Et]);const ut=O=>{const J=O.target.files?.[0];if(J){if(!J.type.startsWith("image/")){ct("Please select an image file","error");return}if(J.size>10*1024*1024){ct("Image must be under 10MB","error");return}bt(J),ke(URL.createObjectURL(J))}},Je=()=>{bt(null),Y&&URL.revokeObjectURL(Y),ke(null),Jt.current&&(Jt.current.value="")},Gt=async()=>{if(!(!F.trim()&&!Fe||Ie||!i)){le(!0);try{let O=null;if(Fe){const J=await mD(Fe),ye=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,He=vo(bo,`postImages/${i.id}/${ye}`);await bk(He,J),O=await Il(He)}await Ao(Yt(Se,"posts"),{authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:F.trim(),type:O?"image":"text",imageURL:O||null,createdAt:sa(),likeCount:0,commentCount:0}),I(""),Je(),Bt.current&&(Bt.current.style.height="auto"),await Et(),ct("Posted!","success")}catch(O){console.error("Error posting:",O),ct("Failed to post","error")}finally{le(!1)}}},Qn=async O=>{if(window.confirm("Delete this post?"))try{await Ks(et(Se,"posts",O)),A(J=>J.filter(ye=>ye.id!==O)),ct("Post deleted","info")}catch(J){console.error("Delete error:",J),ct("Failed to delete","error")}},Mt=async O=>{if(!i)return;const J=i.id,ye=`${O}_${J}`,He=De.has(O),Ye=new Set(De);He?Ye.delete(O):Ye.add(O),N(Ye),A(Be=>Be.map(Ke=>Ke.id===O?{...Ke,likeCount:Math.max(0,(Ke.likeCount||0)+(He?-1:1))}:Ke));try{He?(await Ks(et(Se,"postLikes",ye)),await _o(et(Se,"posts",O),{likeCount:Al(-1)})):(await Rn(et(Se,"postLikes",ye),{postId:O,userId:J,createdAt:sa()}),await _o(et(Se,"posts",O),{likeCount:Al(1)}))}catch(Be){console.error("Like error:",Be),Et()}},Pt=async O=>{try{const J=await _n(An(Yt(Se,"postComments"),vn("postId","==",O),Bd("createdAt","asc"),Ud(50)));Ne(ye=>({...ye,[O]:J.docs.map(He=>({id:He.id,...He.data()}))}))}catch(J){console.error("Error loading comments:",J)}},Dn=O=>{const J=new Set(B);J.has(O)?J.delete(O):(J.add(O),pe[O]||Pt(O)),ie(J)},qt=async O=>{const J=(Me[O]||"").trim();if(!(!J||!i)){rt(ye=>({...ye,[O]:!0}));try{await Ao(Yt(Se,"postComments"),{postId:O,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:J,createdAt:sa()}),await _o(et(Se,"posts",O),{commentCount:Al(1)}),Ze(ye=>({...ye,[O]:""})),A(ye=>ye.map(He=>He.id===O?{...He,commentCount:(He.commentCount||0)+1}:He)),await Pt(O)}catch(ye){console.error("Comment error:",ye),ct("Failed to comment","error")}finally{rt(ye=>({...ye,[O]:!1}))}}},bn=O=>{I(O.target.value),O.target.style.height="auto",O.target.style.height=Math.min(O.target.scrollHeight,120)+"px"};return l||X||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!n?null:g?a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:h,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:rd(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),gt&&a.jsx("span",{className:"prf-you-label",children:"You"}),!gt&&a.jsxs("div",{className:"prf-buddy-action",children:[$==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:ae,disabled:_e,children:_e?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),$==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:It,disabled:_e,children:_e?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),$==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:un,disabled:_e,children:_e?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:It,disabled:_e,children:"Decline"})]}),$==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:_t,disabled:_e,children:_e?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),a.jsxs("div",{className:"prf-stats",children:[a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:x.workouts}),a.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:hD(x.minutes)}),a.jsx("span",{className:"prf-stat-label",children:"Active Time"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[x.streak,a.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),a.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:"Achievements"}),a.jsx("div",{className:"prf-badges",children:cx.map(O=>{const J=j.includes(O.id);return a.jsxs("div",{className:`prf-badge${J?" unlocked":" locked"}`,title:O.name,children:[a.jsx("span",{className:"prf-badge-icon",children:O.icon}),a.jsx("span",{className:"prf-badge-name",children:O.name})]},O.id)})}),a.jsxs("p",{className:"prf-badges-count",children:[j.length,"/",cx.length," unlocked"]})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:gt?"My Journey":`${g.name?.split(" ")[0]}'s Journey`}),gt&&a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:i.photoURL?a.jsx("img",{src:i.photoURL,alt:""}):a.jsx("span",{children:rd(i.name)})}),a.jsxs("div",{className:"journey-compose-body",children:[a.jsx("textarea",{ref:Bt,placeholder:"Share your progress...",value:F,onChange:bn,rows:1,maxLength:500}),Y&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:Y,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:Je,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>Jt.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:Jt,type:"file",accept:"image/*",onChange:ut,hidden:!0}),(F.trim()||Fe)&&a.jsx("button",{className:"journey-post-btn",onClick:Gt,disabled:Ie,children:Ie?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),P?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):E.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:gt?"Start sharing your fitness journey!":"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:E.map(O=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:O.authorPhotoURL?a.jsx("img",{src:O.authorPhotoURL,alt:""}):a.jsx("span",{children:rd(O.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:O.authorName}),a.jsx("span",{className:"journey-post-time",children:lx(O.createdAt)})]}),O.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>Qn(O.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),O.content&&a.jsx("p",{className:"journey-post-content",children:O.content}),O.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:O.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${De.has(O.id)?" liked":""}`,onClick:()=>Mt(O.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:De.has(O.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:O.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${B.has(O.id)?" active":""}`,onClick:()=>Dn(O.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:O.commentCount||0})]})]}),B.has(O.id)&&a.jsxs("div",{className:"journey-comments",children:[pe[O.id]?.length>0?pe[O.id].map(J=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${J.authorId}`),children:J.authorPhotoURL?a.jsx("img",{src:J.authorPhotoURL,alt:""}):a.jsx("span",{children:rd(J.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:J.authorName}),a.jsx("span",{className:"journey-comment-text",children:J.content})]}),a.jsx("span",{className:"journey-comment-time",children:lx(J.createdAt)})]})]},J.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:Me[O.id]||"",onChange:J=>Ze(ye=>({...ye,[O.id]:J.target.value})),onKeyDown:J=>{J.key==="Enter"&&qt(O.id)},maxLength:300}),a.jsx("button",{onClick:()=>qt(O.id),disabled:!(Me[O.id]||"").trim()||qe[O.id],children:qe[O.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},O.id))})]})]}),a.jsx(Ur,{}),Ae&&a.jsxs("div",{className:`toast-notification ${Ae.type}`,children:[a.jsx("span",{className:"toast-icon",children:Ae.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):Ae.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:Ae.message})]})]}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(Ur,{})]})}function Bp(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function ux(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function gD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=ar(),{isDark:l,toggleTheme:u}=qr(),h=Ss(),[p,g]=_.useState([]),[y,x]=_.useState(!0),[k,j]=_.useState(""),[L,$]=_.useState(!1),[U,V]=_.useState(new Set),[ne,X]=_.useState(new Set),[ce,_e]=_.useState({}),[Ve,Ae]=_.useState({}),[M,E]=_.useState({}),[A,P]=_.useState(null),D=_.useRef(null),F=_.useCallback((N,B="info")=>{P({message:N,type:B}),setTimeout(()=>P(null),3500)},[]);_.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const I=_.useCallback(async()=>{if(n){x(!0);try{const N=n.id,B=await _n(An(Yt(Se,"buddies"),vn("user1","==",N))),ie=await _n(An(Yt(Se,"buddies"),vn("user2","==",N))),pe=new Set;[...B.docs,...ie.docs].forEach(qe=>{const rt=qe.data();pe.add(rt.user1===N?rt.user2:rt.user1)});const Ne=[N,...Array.from(pe)].slice(0,30);let Me=[];Ne.length>0&&(Me=(await _n(An(Yt(Se,"posts"),vn("authorId","in",Ne),Bd("createdAt","desc"),Ud(50)))).docs.map(rt=>({id:rt.id,...rt.data()}))),g(Me);const Ze=await _n(An(Yt(Se,"postLikes"),vn("userId","==",N)));V(new Set(Ze.docs.map(qe=>qe.data().postId)))}catch(N){console.error("Error loading feed:",N),F("Failed to load feed","error")}finally{x(!1)}}},[n,F]);_.useEffect(()=>{I()},[I]);const Fe=async()=>{if(!(!k.trim()||L||!n)){$(!0);try{await Ao(Yt(Se,"posts"),{authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:k.trim(),type:"text",createdAt:sa(),likeCount:0,commentCount:0}),j(""),D.current&&(D.current.style.height="auto"),await I(),F("Posted!","success")}catch(N){console.error("Error posting:",N),F("Failed to post","error")}finally{$(!1)}}},bt=async N=>{if(window.confirm("Delete this post?"))try{await Ks(et(Se,"posts",N)),g(B=>B.filter(ie=>ie.id!==N)),F("Post deleted","info")}catch(B){console.error("Delete error:",B),F("Failed to delete","error")}},Y=async N=>{if(!n)return;const B=n.id,ie=`${N}_${B}`,pe=U.has(N),Ne=new Set(U);pe?Ne.delete(N):Ne.add(N),V(Ne),g(Me=>Me.map(Ze=>Ze.id===N?{...Ze,likeCount:Math.max(0,(Ze.likeCount||0)+(pe?-1:1))}:Ze));try{pe?(await Ks(et(Se,"postLikes",ie)),await _o(et(Se,"posts",N),{likeCount:Al(-1)})):(await Rn(et(Se,"postLikes",ie),{postId:N,userId:B,createdAt:sa()}),await _o(et(Se,"posts",N),{likeCount:Al(1)}))}catch(Me){console.error("Like error:",Me),I()}},ke=async N=>{try{const B=await _n(An(Yt(Se,"postComments"),vn("postId","==",N),Bd("createdAt","asc"),Ud(50)));_e(ie=>({...ie,[N]:B.docs.map(pe=>({id:pe.id,...pe.data()}))}))}catch(B){console.error("Error loading comments:",B)}},Ie=N=>{const B=new Set(ne);B.has(N)?B.delete(N):(B.add(N),ce[N]||ke(N)),X(B)},le=async N=>{const B=(Ve[N]||"").trim();if(!(!B||!n)){E(ie=>({...ie,[N]:!0}));try{await Ao(Yt(Se,"postComments"),{postId:N,authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:B,createdAt:sa()}),await _o(et(Se,"posts",N),{commentCount:Al(1)}),Ae(ie=>({...ie,[N]:""})),g(ie=>ie.map(pe=>pe.id===N?{...pe,commentCount:(pe.commentCount||0)+1}:pe)),await ke(N)}catch(ie){console.error("Comment error:",ie),F("Failed to comment","error")}finally{E(ie=>({...ie,[N]:!1}))}}},De=N=>{j(N.target.value),N.target.style.height="auto",N.target.style.height=Math.min(N.target.scrollHeight,120)+"px"};return i?a.jsx("div",{className:"feed-loading","data-theme":l?"dark":"light",children:a.jsx("div",{className:"feed-spinner"})}):!s||!e||!n?null:a.jsxs("div",{className:"feed-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"feed-main",children:[a.jsx("h1",{className:"feed-title",children:"Feed"}),a.jsxs("div",{className:"feed-compose",children:[a.jsx("div",{className:"feed-compose-avatar",children:n.photoURL?a.jsx("img",{src:n.photoURL,alt:""}):a.jsx("span",{children:Bp(n.name)})}),a.jsxs("div",{className:"feed-compose-body",children:[a.jsx("textarea",{ref:D,placeholder:"Share an update with your buddies...",value:k,onChange:De,rows:1,maxLength:500}),k.trim()&&a.jsx("button",{className:"feed-post-btn",onClick:Fe,disabled:L,children:L?a.jsx("div",{className:"feed-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]}),y?a.jsx("div",{className:"feed-content-loading",children:a.jsx("div",{className:"feed-spinner"})}):p.length===0?a.jsxs("div",{className:"feed-empty",children:[a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("h3",{children:"No posts yet"}),a.jsx("p",{children:"Share an update or add buddies to see their posts here!"})]}):a.jsx("div",{className:"feed-list",children:p.map(N=>a.jsxs("div",{className:"feed-post",children:[a.jsxs("div",{className:"feed-post-header",children:[a.jsx("div",{className:"feed-post-avatar",onClick:()=>h(`/client/core-buddy/profile/${N.authorId}`),children:N.authorPhotoURL?a.jsx("img",{src:N.authorPhotoURL,alt:""}):a.jsx("span",{children:Bp(N.authorName)})}),a.jsxs("div",{className:"feed-post-meta",onClick:()=>h(`/client/core-buddy/profile/${N.authorId}`),children:[a.jsx("span",{className:"feed-post-name",children:N.authorName}),a.jsx("span",{className:"feed-post-time",children:ux(N.createdAt)})]}),N.authorId===n.id&&a.jsx("button",{className:"feed-delete-btn",onClick:()=>bt(N.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),N.content&&a.jsx("p",{className:"feed-post-content",children:N.content}),N.imageURL&&a.jsx("div",{className:"feed-post-image",children:a.jsx("img",{src:N.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"feed-post-actions",children:[a.jsxs("button",{className:`feed-action-btn${U.has(N.id)?" liked":""}`,onClick:()=>Y(N.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:U.has(N.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:N.likeCount||0})]}),a.jsxs("button",{className:`feed-action-btn${ne.has(N.id)?" active":""}`,onClick:()=>Ie(N.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:N.commentCount||0})]})]}),ne.has(N.id)&&a.jsxs("div",{className:"feed-comments",children:[ce[N.id]?.length>0?ce[N.id].map(B=>a.jsxs("div",{className:"feed-comment",children:[a.jsx("div",{className:"feed-comment-avatar",onClick:()=>h(`/client/core-buddy/profile/${B.authorId}`),children:B.authorPhotoURL?a.jsx("img",{src:B.authorPhotoURL,alt:""}):a.jsx("span",{children:Bp(B.authorName)})}),a.jsxs("div",{className:"feed-comment-body",children:[a.jsxs("div",{className:"feed-comment-bubble",children:[a.jsx("span",{className:"feed-comment-name",children:B.authorName}),a.jsx("span",{className:"feed-comment-text",children:B.content})]}),a.jsx("span",{className:"feed-comment-time",children:ux(B.createdAt)})]})]},B.id)):a.jsx("p",{className:"feed-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"feed-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:Ve[N.id]||"",onChange:B=>Ae(ie=>({...ie,[N.id]:B.target.value})),onKeyDown:B=>{B.key==="Enter"&&le(N.id)},maxLength:300}),a.jsx("button",{onClick:()=>le(N.id),disabled:!(Ve[N.id]||"").trim()||M[N.id],children:M[N.id]?a.jsx("div",{className:"feed-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},N.id))})]}),a.jsx(Ur,{}),A&&a.jsxs("div",{className:`toast-notification ${A.type}`,children:[a.jsx("span",{className:"toast-icon",children:A.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):A.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:A.message})]})]})}const Mr=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],mo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function yD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Ir(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function vD(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function bD(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function ad(s,e){if(!e)return"-";switch(s.unit){case"weight":return bD(e.weight,e.reps);case"time":return vD(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function bl(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function Up(s,e){return!e||e===0?null:(s-e)/e*100}function xD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(U=>{const V=U.benchmarks?.[e];if(!V)return 0;switch(n){case"weight":return(V.weight||0)*(V.reps||0);case"time":return V.time||0;case"reps":return V.reps||0;case"distance":return V.distance||0;default:return 0}}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,x=p-y*2,k=g-y*2,j=i.map((U,V)=>{const ne=y+V/(i.length-1)*x,X=y+k-(U-u)/h*k;return{x:ne,y:X,value:U}}),L=j.map((U,V)=>`${V===0?"M":"L"} ${U.x} ${U.y}`).join(" "),$=L+` L ${j[j.length-1].x} ${y+k} L ${j[0].x} ${y+k} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:$,fill:"url(#trendGradientJr)"}),a.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((U,V)=>a.jsx("circle",{cx:U.x,cy:U.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},V))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((U,V)=>a.jsxs("span",{className:"pb-trend-label",children:[U.month.split("-")[1],"/",U.month.split("-")[0].slice(2)]},V))})]})}function wD(){const[s,e]=_.useState("bests"),[n,i]=_.useState([]),[l,u]=_.useState(!0),[h,p]=_.useState(!1),[g,y]=_.useState(0),[x,k]=_.useState(!1),[j,L]=_.useState(!1),[$,U]=_.useState(!1),[V,ne]=_.useState({}),[X,ce]=_.useState({}),[_e,Ve]=_.useState({}),[Ae,M]=_.useState({}),[E,A]=_.useState({}),[P,D]=_.useState(!1),[F,I]=_.useState({}),[Fe,bt]=_.useState([]),[Y,ke]=_.useState(null),[Ie,le]=_.useState(null),[De,N]=_.useState(!1),[B,ie]=_.useState(""),[pe,Ne]=_.useState(""),Me=_.useRef(null),Ze=_.useRef(0),qe=_.useRef(0),rt=_.useRef("right"),Bt=_.useCallback(H=>{y(ge=>{const ve=Math.max(0,Math.min(Mr.length-1,H));return ve===ge?ge:(rt.current=ve>ge?"right":"left",ve)})},[]),{currentUser:Jt,isClient:ct,clientData:gt,loading:ae}=ar(),{isDark:un}=qr(),It=Ss(),_t=_.useCallback((H,ge="info")=>{le({message:H,type:ge}),setTimeout(()=>le(null),4e3)},[]);_.useEffect(()=>{!ae&&(!Jt||!ct)&&It("/")},[Jt,ct,ae,It]),_.useEffect(()=>{gt&&Et()},[gt]);const Et=async()=>{try{const H=An(Yt(Se,"juniorPBs"),vn("clientId","==",gt.id)),ve=(await _n(H)).docs.map(nt=>({id:nt.id,...nt.data()}));ve.sort((nt,mt)=>nt.month.localeCompare(mt.month)),i(ve);const we=An(Yt(Se,"juniorPBTargets"),vn("clientId","==",gt.id)),me=await _n(we);if(!me.empty){const nt=me.docs[0].data();Ve(nt.targets||{}),M(nt.metricTargets||{}),A(nt.targets||{}),I(nt.metricTargets||{})}const Xe=An(Yt(Se,"juniorAchievements"),vn("clientId","==",gt.id)),yt=await _n(Xe);yt.empty||bt(yt.docs[0].data().badges||[])}catch(H){console.error("Error fetching junior personal bests:",H)}u(!1)},ut=yD(),Je=n.find(H=>H.month===ut),Gt=n.filter(H=>H.month<ut),Qn=Gt.length>0?Gt[Gt.length-1]:null;_.useEffect(()=>{Je?(ne(Je.benchmarks||{}),ce(Je.bodyMetrics||{})):(ne({}),ce({}))},[Je?.id]);const Mt=async(H,ge)=>{const ve=[];if(H==="strength"?Mr.forEach(we=>{const me=_e[we.key];if(!me)return;const Xe=ge[we.key];if(!Xe)return;let yt;if(me.targetType==="time"){if(!me.targetValue)return;const nt=me.startValue||0,mt=Xe.time||0,vt=me.targetValue-nt;yt=vt===0?mt>=me.targetValue?1:0:Math.max(0,(mt-nt)/vt)}else if(me.targetType==="reps"){if(!me.targetReps)return;const nt=me.startReps||0,mt=Xe.reps||0,vt=me.targetReps-nt;yt=vt===0?mt>=me.targetReps?1:0:Math.max(0,(mt-nt)/vt)}else if(me.targetType==="distance"){if(!me.targetDistance)return;const nt=me.startDistance||0,mt=Xe.distance||0,vt=me.targetDistance-nt;yt=vt===0?mt>=me.targetDistance?1:0:Math.max(0,(mt-nt)/vt)}else{if(!me.targetWeight&&!me.targetReps)return;const nt=(me.startWeight||0)*(me.startReps||0),mt=(me.targetWeight||0)*(me.targetReps||0),vt=(Xe.weight||0)*(Xe.reps||0),on=mt-nt;yt=on===0?vt>=mt?1:0:Math.max(0,(vt-nt)/on)}if(yt>=1){let nt,mt;me.targetType==="time"?(nt=Fe.some(vt=>vt.type==="strength"&&vt.key===we.key&&vt.targetValue===me.targetValue),mt=`${we.name} ${me.targetValue}s`):me.targetType==="reps"?(nt=Fe.some(vt=>vt.type==="strength"&&vt.key===we.key&&vt.targetReps===me.targetReps),mt=`${we.name} ${me.targetReps} reps`):me.targetType==="distance"?(nt=Fe.some(vt=>vt.type==="strength"&&vt.key===we.key&&vt.targetDistance===me.targetDistance),mt=`${we.name} ${me.targetDistance}cm`):(nt=Fe.some(vt=>vt.type==="strength"&&vt.key===we.key&&vt.targetWeight===me.targetWeight&&vt.targetReps===me.targetReps),mt=`${we.name} ${me.targetWeight}kg  ${me.targetReps}`),nt||ve.push({type:"strength",key:we.key,...me.targetType==="time"?{targetType:"time",targetValue:me.targetValue}:me.targetType==="reps"?{targetType:"reps",targetReps:me.targetReps}:me.targetType==="distance"?{targetType:"distance",targetDistance:me.targetDistance}:{targetWeight:me.targetWeight,targetReps:me.targetReps},achievedMonth:ut,label:mt})}}):mo.forEach(we=>{const me=Ae[we.key];if(!me||!me.targetValue)return;const Xe=ge[we.key];if(Xe==null)return;const yt=me.startValue||0,nt=me.targetValue,mt=nt-yt;(mt===0?Xe===nt?1:0:Math.max(0,(Xe-yt)/mt))>=1&&(Fe.some(Ns=>Ns.type==="metric"&&Ns.key===we.key&&Ns.targetValue===nt)||ve.push({type:"metric",key:we.key,targetValue:nt,achievedMonth:ut,label:`${we.name} ${nt}${we.suffix}`}))}),ve.length>0){const we=[...Fe,...ve];await Rn(et(Se,"juniorAchievements",gt.id),{clientId:gt.id,badges:we,updatedAt:pt.now()}),bt(we),ke(ve),setTimeout(()=>ke(null),5e3)}},Pt=(H,ge)=>{if(H==="strength"){const ve=_e[ge];if(!ve)return!1;switch(Mr.find(me=>me.key===ge)?.unit){case"time":return Fe.some(me=>me.type==="strength"&&me.key===ge&&me.targetValue===ve.targetValue);case"reps":return Fe.some(me=>me.type==="strength"&&me.key===ge&&me.targetReps===ve.targetReps);case"distance":return Fe.some(me=>me.type==="strength"&&me.key===ge&&me.targetDistance===ve.targetDistance);default:return!ve.targetWeight&&!ve.targetReps?!1:Fe.some(me=>me.type==="strength"&&me.key===ge&&me.targetWeight===ve.targetWeight&&me.targetReps===ve.targetReps)}}else{const ve=Ae[ge];return!ve||!ve.targetValue?!1:Fe.some(we=>we.type==="metric"&&we.key===ge&&we.targetValue===ve.targetValue)}},Dn=async()=>{p(!0);try{const H=`${gt.id}_${ut}`,ge=Je||{};await Rn(et(Se,"juniorPBs",H),{clientId:gt.id,month:ut,benchmarks:V,bodyMetrics:ge.bodyMetrics||X||{},createdAt:ge.createdAt||pt.now(),updatedAt:pt.now()}),await Mt("strength",V),_t("Benchmarks saved!","success"),k(!1),await Et()}catch(H){console.error("Error saving benchmarks:",H),_t("Failed to save. Please try again.","error")}p(!1)},qt=async()=>{p(!0);try{const H=`${gt.id}_${ut}`,ge=Je||{};await Rn(et(Se,"juniorPBs",H),{clientId:gt.id,month:ut,benchmarks:ge.benchmarks||V||{},bodyMetrics:X,createdAt:ge.createdAt||pt.now(),updatedAt:pt.now()}),await Mt("metric",X),_t("Body metrics saved!","success"),L(!1),await Et()}catch(H){console.error("Error saving metrics:",H),_t("Failed to save. Please try again.","error")}p(!1)},bn=(H,ge,ve)=>{ne(we=>({...we,[H]:{...we[H],[ge]:ve===""?"":parseFloat(ve)}}))},O=(H,ge)=>{ce(ve=>({...ve,[H]:ge===""?"":parseFloat(ge)}))},J=(H,ge,ve)=>{A(we=>({...we,[H]:{...we[H],[ge]:ve===""?"":parseFloat(ve)}}))},ye=async()=>{p(!0);try{const H=`targets_${gt.id}`,ge=Je?.benchmarks||{},ve={};Mr.forEach(we=>{const me=ge[we.key];switch(we.unit){case"time":E[we.key]?.targetValue&&(ve[we.key]={targetType:"time",targetValue:E[we.key].targetValue,startValue:me?.time||0});break;case"reps":E[we.key]?.targetReps&&(ve[we.key]={targetType:"reps",targetReps:E[we.key].targetReps,startReps:me?.reps||0});break;case"distance":E[we.key]?.targetDistance&&(ve[we.key]={targetType:"distance",targetDistance:E[we.key].targetDistance,startDistance:me?.distance||0});break;default:(E[we.key]?.targetWeight||E[we.key]?.targetReps)&&(ve[we.key]={targetWeight:E[we.key].targetWeight||0,targetReps:E[we.key].targetReps||0,startWeight:me?.weight||0,startReps:me?.reps||0})}}),await Rn(et(Se,"juniorPBTargets",H),{clientId:gt.id,targets:ve,metricTargets:Ae,updatedAt:pt.now()}),Ve(ve),A(ve),_t("Targets saved!","success"),U(!1)}catch(H){console.error("Error saving targets:",H),_t("Failed to save targets.","error")}p(!1)},He=(H,ge)=>{I(ve=>({...ve,[H]:{...ve[H],targetValue:ge===""?"":parseFloat(ge)}}))},Ye=async()=>{p(!0);try{const H=`targets_${gt.id}`,ge={};mo.forEach(ve=>{if(F[ve.key]?.targetValue){const we=Je?.bodyMetrics?.[ve.key]||0;ge[ve.key]={targetValue:F[ve.key].targetValue,startValue:we}}}),await Rn(et(Se,"juniorPBTargets",H),{clientId:gt.id,targets:_e,metricTargets:ge,updatedAt:pt.now()}),M(ge),I(ge),_t("Metric targets saved!","success"),D(!1)}catch(H){console.error("Error saving metric targets:",H),_t("Failed to save targets.","error")}p(!1)},Be=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const H=et(Se,"juniorPBTargets",`targets_${gt.id}`);await Ks(H),Ve({}),M({}),A({}),I({}),_t("All goals have been reset","success")}catch(H){console.error("Error resetting targets:",H),_t("Failed to reset goals","error")}p(!1)}},Ke=(H,ge)=>{const ve=_e[H];if(!ve||!ge)return null;if(ve.targetType==="time"){if(!ve.targetValue)return null;const nt=ve.startValue||0,mt=ve.targetValue,vt=ge.time||0,on=mt-nt;return on<=0?vt>=mt?1:0:Math.max(0,Math.min((vt-nt)/on,1))}if(ve.targetType==="reps"){if(!ve.targetReps)return null;const nt=ve.startReps||0,mt=ve.targetReps,vt=ge.reps||0,on=mt-nt;return on<=0?vt>=mt?1:0:Math.max(0,Math.min((vt-nt)/on,1))}if(ve.targetType==="distance"){if(!ve.targetDistance)return null;const nt=ve.startDistance||0,mt=ve.targetDistance,vt=ge.distance||0,on=mt-nt;return on<=0?vt>=mt?1:0:Math.max(0,Math.min((vt-nt)/on,1))}if(!ve.targetWeight&&!ve.targetReps)return null;const we=(ve.startWeight||0)*(ve.startReps||0),me=(ve.targetWeight||0)*(ve.targetReps||0),Xe=(ge.weight||0)*(ge.reps||0),yt=me-we;return yt<=0?Xe>=me?1:0:Math.max(0,Math.min((Xe-we)/yt,1))},We=H=>{const ge=Ae[H];if(!ge||!ge.targetValue)return null;const ve=Je?.bodyMetrics?.[H];if(ve==null)return null;const we=ge.startValue||0,me=ge.targetValue,Xe=me-we;return Xe===0?ve===me?1:0:Math.max(0,Math.min((ve-we)/Xe,1))},Le=H=>{Ze.current=H.touches[0].clientX,qe.current=0},xe=H=>{qe.current=H.touches[0].clientX-Ze.current},ze=()=>{qe.current<-50?Bt(g+1):qe.current>50&&Bt(g-1),qe.current=0},at=H=>{const ge=Je?.bodyMetrics?.[H],ve=Qn?.bodyMetrics?.[H];return ge==null||ve==null?null:parseFloat((ge-ve).toFixed(2))},St=n.find(H=>H.month===B),Wt=n.find(H=>H.month===pe);if(ae||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Jt||!ct||!gt)return null;const Qe=Mr[g],ht=Je?.benchmarks?.[Qe.key],dt=Qn?.benchmarks?.[Qe.key],Rt=bl(Qe,ht),Lt=bl(Qe,dt),kt=Up(Rt,Lt),Kt=Ke(Qe.key,ht),Ht=Kt!==null,an=Kt!==null&&Kt>=1,hn=Ht?Math.round(Kt*60):Rt>0?15:0,fn=_e[Qe.key],Mn=H=>H?H.targetType==="time"?`${H.startValue||0}s  ${H.targetValue}s`:H.targetType==="reps"?`${H.startReps||0}  ${H.targetReps} reps`:H.targetType==="distance"?`${H.startDistance||0}  ${H.targetDistance}cm`:`${H.startWeight||0}kg${H.startReps||0}  ${H.targetWeight}kg${H.targetReps}`:null;return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>It("/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Junior Strength Tests"}),a.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!x&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:Me,onTouchStart:Le,onTouchMove:xe,onTouchEnd:ze,children:[a.jsx("div",{className:`pb-ring-container slide-from-${rt.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Iy.map((H,ge)=>{const ve=ge<Math.round(hn);return a.jsx("line",{x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,className:`pb-ring-tick ${ve?an?"hit":"filled":"empty"}`,strokeWidth:H.thick?"3":"2"},ge)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:Qe.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[Qe.name,Pt("strength",Qe.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:ht?ad(Qe,ht):"-"}),kt!==null&&a.jsxs("div",{className:`pb-ring-change ${kt>=0?"positive":"negative"}`,children:[kt>=0?"+":"",kt.toFixed(1),"%"]}),kt===null&&ht&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),fn&&a.jsx("div",{className:`pb-ring-target ${an?"hit":""}`,children:an?"Target hit!":Mn(fn)}),!fn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:Mr.map((H,ge)=>a.jsx("button",{className:`pb-dot ${ge===g?"active":""}`,onClick:()=>Bt(ge)},ge))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Bt(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Bt(g+1),disabled:g===Mr.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(xD,{data:n,exerciseKey:Qe.key,unit:Qe.unit})]})]}),!x&&!$&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:Je?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>U(!0),children:Object.keys(_e).length>0?"Edit Targets":"Set Targets"}),(Object.keys(_e).length>0||Object.keys(Ae).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Be,disabled:h,children:"Reset All Goals"})]}),x&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Ir(ut)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),ne(Je?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:Mr.map(H=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),H.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:V[H.key]?.weight??"",onChange:ge=>bn(H.key,"weight",ge.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:V[H.key]?.reps??"",onChange:ge=>bn(H.key,"reps",ge.target.value),placeholder:"0"})]})]}):H.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Reps (max in 1 min)"}),a.jsx("input",{type:"number",value:V[H.key]?.reps??"",onChange:ge=>bn(H.key,"reps",ge.target.value),placeholder:"0"})]})}):H.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:V[H.key]?.distance??"",onChange:ge=>bn(H.key,"distance",ge.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:V[H.key]?.time??"",onChange:ge=>bn(H.key,"time",ge.target.value),placeholder:"0"})]})})]},H.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),ne(Je?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Dn,disabled:h,children:h?"Saving...":"Save"})]})]}),$&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{U(!1),A(_e)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Mr.map(H=>{const ge=Je?.benchmarks?.[H.key];let ve="-";if(ge)switch(H.unit){case"weight":(ge.weight||ge.reps)&&(ve=`${ge.weight||0}kg  ${ge.reps||0}`);break;case"time":ge.time&&(ve=`${ge.time}s`);break;case"reps":ge.reps&&(ve=`${ge.reps} reps`);break;case"distance":ge.distance&&(ve=`${ge.distance} cm`);break}return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ve]})]}),H.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:E[H.key]?.targetWeight??"",onChange:we=>J(H.key,"targetWeight",we.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:E[H.key]?.targetReps??"",onChange:we=>J(H.key,"targetReps",we.target.value),placeholder:"0"})]})]}):H.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Reps (in 1 min)"}),a.jsx("input",{type:"number",value:E[H.key]?.targetReps??"",onChange:we=>J(H.key,"targetReps",we.target.value),placeholder:"0"})]})}):H.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:E[H.key]?.targetDistance??"",onChange:we=>J(H.key,"targetDistance",we.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:E[H.key]?.targetValue??"",onChange:we=>J(H.key,"targetValue",we.target.value),placeholder:"0"})]})})]},H.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{U(!1),A(_e)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:ye,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!j&&!P&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Ir(ut)}),a.jsx("div",{className:"pb-metrics-list",children:mo.map(H=>{const ge=Je?.bodyMetrics?.[H.key],ve=at(H.key),we=Ae[H.key],me=We(H.key),Xe=me!==null&&me>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[H.name,Pt("metric",H.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),we&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",we.targetValue," ",H.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ge!=null?`${ge} ${H.suffix}`:"-"}),ve!==null&&a.jsxs("span",{className:`pb-metric-change ${ve>0?"up":ve<0?"down":"same"}`,children:[ve>0?"+":"",ve," ",H.suffix]})]})]}),me!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${Xe?"hit":""}`,style:{width:`${Math.round(me*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${Xe?"hit":""}`,children:Xe?"Hit!":`${Math.round(me*100)}%`})]})]},H.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:Je?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(_e).length>0||Object.keys(Ae).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Be,disabled:h,children:"Reset All Goals"})]})]}),j&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Ir(ut)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),ce(Je?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:mo.map(H=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[H.name," (",H.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:X[H.key]??"",onChange:ge=>O(H.key,ge.target.value),placeholder:"0"})]})},H.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),ce(Je?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:qt,disabled:h,children:h?"Saving...":"Save"})]})]}),P&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),I(Ae)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),mo.map(H=>{const ge=Je?.bodyMetrics?.[H.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ge!=null?`${ge} ${H.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",H.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:F[H.key]?.targetValue??"",onChange:ve=>He(H.key,ve.target.value),placeholder:"0"})]})})]},H.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),I(Ae)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ye,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[Fe.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...Fe].reverse().map((H,ge)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ge*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:H.label}),a.jsx("span",{className:"pb-achievement-date",children:Ir(H.achievedMonth)})]})]},ge))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${De?"active":""}`,onClick:()=>{N(!De),!De&&n.length>=2&&(ie(n[0].month),Ne(n[n.length-1].month))},children:De?"Back to Timeline":"Compare Months"})}),De?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:B,onChange:H=>ie(H.target.value),children:n.map(H=>a.jsx("option",{value:H.month,children:Ir(H.month)},H.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:pe,onChange:H=>Ne(H.target.value),children:n.map(H=>a.jsx("option",{value:H.month,children:Ir(H.month)},H.month))})]})]}),St&&Wt&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Tests"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Ir(B).split(" ")[0]}),a.jsx("span",{children:Ir(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),Mr.map(H=>{const ge=St.benchmarks?.[H.key],ve=Wt.benchmarks?.[H.key],we=bl(H,ge),me=bl(H,ve),Xe=Up(me,we);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:H.name}),a.jsx("span",{className:"pb-compare-val",children:ge?ad(H,ge):"-"}),a.jsx("span",{className:"pb-compare-val",children:ve?ad(H,ve):"-"}),a.jsx("span",{className:`pb-compare-change ${Xe!==null?Xe>=0?"positive":"negative":""}`,children:Xe!==null?`${Xe>=0?"+":""}${Xe.toFixed(1)}%`:"-"})]},H.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Ir(B).split(" ")[0]}),a.jsx("span",{children:Ir(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),mo.map(H=>{const ge=St.bodyMetrics?.[H.key],ve=Wt.bodyMetrics?.[H.key],we=ge!=null&&ve!=null?parseFloat((ve-ge).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:H.name}),a.jsx("span",{className:"pb-compare-val",children:ge!=null?`${ge}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:ve!=null?`${ve}`:"-"}),a.jsx("span",{className:`pb-compare-change ${we!==null?we>0?"positive":we<0?"negative":"neutral":""}`,children:we!==null?`${we>0?"+":""}${we} ${H.suffix}`:"-"})]},H.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((H,ge)=>{const ve=n.filter(we=>we.month<H.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ge*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Ir(H.month)}),H.benchmarks&&Object.keys(H.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Tests"}),Mr.map(we=>{const me=H.benchmarks[we.key];if(!me)return null;const Xe=ve?.benchmarks?.[we.key],yt=bl(we,me),nt=bl(we,Xe),mt=Up(yt,nt);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:we.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:ad(we,me)}),mt!==null&&a.jsxs("span",{className:`pb-timeline-change ${mt>=0?"positive":"negative"}`,children:[mt>=0?"+":"",mt.toFixed(1),"%"]})]})]},we.key)})]}),H.bodyMetrics&&Object.keys(H.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),mo.map(we=>{const me=H.bodyMetrics[we.key];if(me==null)return null;const Xe=ve?.bodyMetrics?.[we.key],yt=Xe!=null?parseFloat((me-Xe).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:we.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[me," ",we.suffix]}),yt!==null&&a.jsxs("span",{className:`pb-timeline-change ${yt>0?"positive":yt<0?"negative":"neutral"}`,children:[yt>0?"+":"",yt," ",we.suffix]})]})]},we.key)})]})]})]},H.id)})})]})})]}),Y&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>ke(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:Y.map((H,ge)=>a.jsx("div",{className:"pb-celebration-badge",children:H.label},ge))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Ie&&a.jsxs("div",{className:`toast-notification ${Ie.type}`,children:[a.jsx("span",{className:"toast-icon",children:Ie.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Ie.message}),a.jsx("button",{className:"toast-close",onClick:()=>le(null),children:""})]}),a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>It("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>It("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>It("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),gt?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>It("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]})]})}const ta=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],po=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function _D(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Dr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function id(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function hx(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function xl(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function zp(s,e){return!e||e===0?null:(s-e)/e*100}function kD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(U=>{const V=U.benchmarks?.[e];return V?n==="time"?V.time||0:(V.weight||0)*(V.reps||0):0}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,x=p-y*2,k=g-y*2,j=i.map((U,V)=>{const ne=y+V/(i.length-1)*x,X=y+k-(U-u)/h*k;return{x:ne,y:X,value:U}}),L=j.map((U,V)=>`${V===0?"M":"L"} ${U.x} ${U.y}`).join(" "),$=L+` L ${j[j.length-1].x} ${y+k} L ${j[0].x} ${y+k} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:$,fill:"url(#trendGradient)"}),a.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((U,V)=>a.jsx("circle",{cx:U.x,cy:U.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},V))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((U,V)=>a.jsxs("span",{className:"pb-trend-label",children:[U.month.split("-")[1],"/",U.month.split("-")[0].slice(2)]},V))})]})}function TD(){const[s,e]=_.useState("bests"),[n,i]=_.useState([]),[l,u]=_.useState(!0),[h,p]=_.useState(!1),[g,y]=_.useState(0),[x,k]=_.useState(!1),[j,L]=_.useState(!1),[$,U]=_.useState(!1),[V,ne]=_.useState({}),[X,ce]=_.useState({}),[_e,Ve]=_.useState({}),[Ae,M]=_.useState({}),[E,A]=_.useState({}),[P,D]=_.useState(!1),[F,I]=_.useState({}),[Fe,bt]=_.useState([]),[Y,ke]=_.useState(null),[Ie,le]=_.useState(null),[De,N]=_.useState(!1),[B,ie]=_.useState(""),[pe,Ne]=_.useState(""),[Me,Ze]=_.useState({}),[qe,rt]=_.useState({}),[Bt,Jt]=_.useState(null),[ct,gt]=_.useState(null),[ae,un]=_.useState(""),It=_.useRef(null),_t=_.useRef(0),Et=_.useRef(0),ut=_.useRef("right"),Je=_.useCallback(q=>{y(he=>{const T=Math.max(0,Math.min(ta.length-1,q));return T===he?he:(ut.current=T>he?"right":"left",T)})},[]),{currentUser:Gt,isClient:Qn,clientData:Mt,loading:Pt}=ar(),{isDark:Dn}=qr(),qt=Ss(),[bn]=BE(),O=bn.get("mode")==="corebuddy",J=!O&&(!Mt?.clientType||Mt.clientType==="block"),ye=_.useCallback((q,he="info")=>{le({message:q,type:he}),setTimeout(()=>le(null),4e3)},[]);_.useEffect(()=>{!Pt&&(!Gt||!Qn)&&qt("/")},[Gt,Qn,Pt,qt]),_.useEffect(()=>{Mt&&(J?He():(async()=>{try{const[he,T,R]=await Promise.all([Ln(et(Se,"coreBuddyPBs",Mt.id)),Ln(et(Se,"coreBuddyTargets",Mt.id)),Ln(et(Se,"coreBuddyAchievements",Mt.id))]);he.exists()&&Ze(he.data().exercises||{}),T.exists()&&rt(T.data().targets||{}),R.exists()&&Jt(R.data())}catch(he){console.error("Error loading Core Buddy PBs:",he)}u(!1)})())},[Mt]);const He=async()=>{try{const q=An(Yt(Se,"personalBests"),vn("clientId","==",Mt.id)),T=(await _n(q)).docs.map(Ue=>({id:Ue.id,...Ue.data()}));T.sort((Ue,Oe)=>Ue.month.localeCompare(Oe.month)),i(T);const R=An(Yt(Se,"personalBestTargets"),vn("clientId","==",Mt.id)),K=await _n(R);if(!K.empty){const Ue=K.docs[0].data();Ve(Ue.targets||{}),M(Ue.metricTargets||{}),A(Ue.targets||{}),I(Ue.metricTargets||{})}const ee=An(Yt(Se,"achievements"),vn("clientId","==",Mt.id)),$e=await _n(ee);$e.empty||bt($e.docs[0].data().badges||[])}catch(q){console.error("Error fetching personal bests:",q)}u(!1)},Ye=async()=>{if(!ct||!ae||!Mt)return;const q=parseFloat(ae),he=Me[ct];if(!he||q<=he.weight){ye("Target must be higher than current PB","error");return}p(!0);try{const T={...qe,[ct]:{targetWeight:q,setAt:pt.now(),currentPBWhenSet:he.weight}};await Rn(et(Se,"coreBuddyTargets",Mt.id),{clientId:Mt.id,targets:T,updatedAt:pt.now()}),rt(T),gt(null),un(""),ye("Target set!","success")}catch(T){console.error("Error saving target:",T),ye("Failed to save target","error")}p(!1)},Be=q=>{if(!Bt?.badges)return!1;const he=qe[q];return he?Bt.badges.some(T=>T.type==="pb_target"&&T.exercise===q&&T.targetWeight===he.targetWeight):!1},Ke=q=>{const he=qe[q];if(!he)return null;const T=Me[q];if(!T)return 0;const R=he.currentPBWhenSet||0,K=he.targetWeight,ee=K-R;return ee<=0?T.weight>=K?1:0:Math.max(0,Math.min((T.weight-R)/ee,1))},We=_D(),Le=n.find(q=>q.month===We),xe=n.filter(q=>q.month<We),ze=xe.length>0?xe[xe.length-1]:null;_.useEffect(()=>{Le?(ne(Le.benchmarks||{}),ce(Le.bodyMetrics||{})):(ne({}),ce({}))},[Le?.id]);const at=async(q,he)=>{const T=[];if(q==="strength"?ta.forEach(R=>{const K=_e[R.key];if(!K)return;const ee=he[R.key];if(!ee)return;let $e;if(K.targetType==="time"){if(!K.targetValue)return;const Ue=K.startValue||0,Oe=ee.time||0,Ut=K.targetValue-Ue;$e=Ut===0?Oe>=K.targetValue?1:0:Math.max(0,(Oe-Ue)/Ut)}else{if(!K.targetWeight&&!K.targetReps)return;const Ue=(K.startWeight||0)*(K.startReps||0),Oe=(K.targetWeight||0)*(K.targetReps||0),Ut=(ee.weight||0)*(ee.reps||0),Tt=Oe-Ue;$e=Tt===0?Ut>=Oe?1:0:Math.max(0,(Ut-Ue)/Tt)}if($e>=1&&!(K.targetType==="time"?Fe.some(Oe=>Oe.type==="strength"&&Oe.key===R.key&&Oe.targetValue===K.targetValue):Fe.some(Oe=>Oe.type==="strength"&&Oe.key===R.key&&Oe.targetWeight===K.targetWeight&&Oe.targetReps===K.targetReps))){const Oe=K.targetType==="time"?`${R.name} ${K.targetValue}s`:`${R.name} ${K.targetWeight}kg  ${K.targetReps}`;T.push({type:"strength",key:R.key,...K.targetType==="time"?{targetType:"time",targetValue:K.targetValue}:{targetWeight:K.targetWeight,targetReps:K.targetReps},achievedMonth:We,label:Oe})}}):po.forEach(R=>{const K=Ae[R.key];if(!K||!K.targetValue)return;const ee=he[R.key];if(ee==null)return;const $e=K.startValue||0,Ue=K.targetValue,Oe=Ue-$e;(Oe===0?ee===Ue?1:0:Math.max(0,(ee-$e)/Oe))>=1&&(Fe.some(G=>G.type==="metric"&&G.key===R.key&&G.targetValue===Ue)||T.push({type:"metric",key:R.key,targetValue:Ue,achievedMonth:We,label:`${R.name} ${Ue}${R.suffix}`}))}),T.length>0){const R=[...Fe,...T];await Rn(et(Se,"achievements",Mt.id),{clientId:Mt.id,badges:R,updatedAt:pt.now()}),bt(R),ke(T),setTimeout(()=>ke(null),5e3)}},St=(q,he)=>{if(q==="strength"){const T=_e[he];return T?T.targetType==="time"?Fe.some(R=>R.type==="strength"&&R.key===he&&R.targetValue===T.targetValue):!T.targetWeight&&!T.targetReps?!1:Fe.some(R=>R.type==="strength"&&R.key===he&&R.targetWeight===T.targetWeight&&R.targetReps===T.targetReps):!1}else{const T=Ae[he];return!T||!T.targetValue?!1:Fe.some(R=>R.type==="metric"&&R.key===he&&R.targetValue===T.targetValue)}},Wt=async()=>{p(!0);try{const q=`${Mt.id}_${We}`,he=Le||{};await Rn(et(Se,"personalBests",q),{clientId:Mt.id,month:We,benchmarks:V,bodyMetrics:he.bodyMetrics||X||{},createdAt:he.createdAt||pt.now(),updatedAt:pt.now()}),await at("strength",V),ye("Benchmarks saved!","success"),k(!1),await He()}catch(q){console.error("Error saving benchmarks:",q),ye("Failed to save. Please try again.","error")}p(!1)},Qe=async()=>{p(!0);try{const q=`${Mt.id}_${We}`,he=Le||{};await Rn(et(Se,"personalBests",q),{clientId:Mt.id,month:We,benchmarks:he.benchmarks||V||{},bodyMetrics:X,createdAt:he.createdAt||pt.now(),updatedAt:pt.now()}),await at("metric",X),ye("Body metrics saved!","success"),L(!1),await He()}catch(q){console.error("Error saving metrics:",q),ye("Failed to save. Please try again.","error")}p(!1)},ht=(q,he,T)=>{ne(R=>({...R,[q]:{...R[q],[he]:T===""?"":parseFloat(T)}}))},dt=(q,he)=>{ce(T=>({...T,[q]:he===""?"":parseFloat(he)}))},Rt=(q,he,T)=>{A(R=>({...R,[q]:{...R[q],[he]:T===""?"":parseFloat(T)}}))},Lt=async()=>{p(!0);try{const q=`targets_${Mt.id}`,he=Le?.benchmarks||{},T={};ta.forEach(R=>{const K=he[R.key];R.unit==="time"?E[R.key]?.targetValue&&(T[R.key]={targetType:"time",targetValue:E[R.key].targetValue,startValue:K?.time||0}):(E[R.key]?.targetWeight||E[R.key]?.targetReps)&&(T[R.key]={targetWeight:E[R.key].targetWeight||0,targetReps:E[R.key].targetReps||0,startWeight:K?.weight||0,startReps:K?.reps||0})}),await Rn(et(Se,"personalBestTargets",q),{clientId:Mt.id,targets:T,metricTargets:Ae,updatedAt:pt.now()}),Ve(T),A(T),ye("Targets saved!","success"),U(!1)}catch(q){console.error("Error saving targets:",q),ye("Failed to save targets.","error")}p(!1)},kt=(q,he)=>{I(T=>({...T,[q]:{...T[q],targetValue:he===""?"":parseFloat(he)}}))},Kt=async()=>{p(!0);try{const q=`targets_${Mt.id}`,he={};po.forEach(T=>{if(F[T.key]?.targetValue){const R=Le?.bodyMetrics?.[T.key]||0;he[T.key]={targetValue:F[T.key].targetValue,startValue:R}}}),await Rn(et(Se,"personalBestTargets",q),{clientId:Mt.id,targets:_e,metricTargets:he,updatedAt:pt.now()}),M(he),I(he),ye("Metric targets saved!","success"),D(!1)}catch(q){console.error("Error saving metric targets:",q),ye("Failed to save targets.","error")}p(!1)},Ht=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const q=et(Se,"personalBestTargets",`targets_${Mt.id}`);await Ks(q),Ve({}),M({}),A({}),I({}),ye("All goals have been reset","success")}catch(q){console.error("Error resetting targets:",q),ye("Failed to reset goals","error")}p(!1)}},an=(q,he)=>{const T=_e[q];if(!T||!he)return null;if(T.targetType==="time"){if(!T.targetValue)return null;const Ue=T.startValue||0,Oe=T.targetValue,Ut=he.time||0,Tt=Oe-Ue;return Tt<=0?Ut>=Oe?1:0:Math.max(0,Math.min((Ut-Ue)/Tt,1))}if(!T.targetWeight&&!T.targetReps)return null;const R=(T.startWeight||0)*(T.startReps||0),K=(T.targetWeight||0)*(T.targetReps||0),ee=(he.weight||0)*(he.reps||0),$e=K-R;return $e<=0?ee>=K?1:0:Math.max(0,Math.min((ee-R)/$e,1))},hn=q=>{const he=Ae[q];if(!he||!he.targetValue)return null;const T=Le?.bodyMetrics?.[q];if(T==null)return null;const R=he.startValue||0,K=he.targetValue,ee=K-R;return ee===0?T===K?1:0:Math.max(0,Math.min((T-R)/ee,1))},fn=q=>{_t.current=q.touches[0].clientX,Et.current=0},Mn=q=>{Et.current=q.touches[0].clientX-_t.current},H=()=>{Et.current<-50?Je(g+1):Et.current>50&&Je(g-1),Et.current=0},ge=q=>{const he=Le?.bodyMetrics?.[q],T=ze?.bodyMetrics?.[q];return he==null||T==null?null:parseFloat((he-T).toFixed(2))},ve=n.find(q=>q.month===B),we=n.find(q=>q.month===pe);if(Pt||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Gt||!Qn||!Mt)return null;if(J&&Mt?.isJunior)return a.jsx(wD,{});const me=ta[g],Xe=Le?.benchmarks?.[me.key],yt=ze?.benchmarks?.[me.key],nt=xl(me,Xe),mt=xl(me,yt),vt=zp(nt,mt),on=an(me.key,Xe),Ns=on!==null,Wn=on!==null&&on>=1,Xn=Ns?Math.round(on*60):nt>0?15:0,mn=_e[me.key];return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>qt(O?"/client/core-buddy":"/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Personal Bests"}),a.jsx("p",{children:J?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!J&&a.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Me).length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("div",{className:"pb-cb-empty-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),a.jsx("h4",{children:"No personal bests yet"}),a.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):a.jsx("div",{className:"pb-cb-grid",children:Object.entries(Me).sort(([q],[he])=>q.localeCompare(he)).map(([q,he],T)=>{const R=qe[q],K=Ke(q),ee=K!==null&&K>=1,$e=Be(q),Ue=K!==null?Math.round(K*60):60;return a.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${T*.05}s`},children:[a.jsxs("div",{className:"pb-cb-card-ring",children:[a.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:A3.map((Oe,Ut)=>{const Tt=Ut<Ue;return a.jsx("line",{x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,className:`pb-ring-tick ${Tt?ee?"hit":"filled":"empty"}`,strokeWidth:Oe.thick?"2":"1.5"},Ut)})}),a.jsx("div",{className:"pb-cb-ring-icon",children:$e?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),a.jsxs("div",{className:"pb-cb-card-info",children:[a.jsx("h4",{className:"pb-cb-card-name",children:q}),a.jsxs("div",{className:"pb-cb-card-value",children:[he.weight,"kg  ",he.reps]}),he.achievedAt&&a.jsx("div",{className:"pb-cb-card-date",children:(he.achievedAt.toDate?he.achievedAt.toDate():new Date(he.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),R&&!ee&&a.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",R.targetWeight,"kg (",Math.round((K||0)*100),"%)"]}),R&&ee&&!$e&&a.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),$e&&a.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),a.jsx("div",{className:"pb-cb-card-action",children:R?ee&&$e?a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{gt(q),un("")},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{gt(q),un("")},children:a.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},q)})}),Object.keys(Me).length>0&&a.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>qt("/client/core-buddy/achievements"),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),ct&&a.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>gt(null),children:a.jsxs("div",{className:"pb-cb-target-modal",onClick:q=>q.stopPropagation(),children:[a.jsx("h3",{children:"Set Target"}),a.jsx("p",{className:"pb-cb-target-exercise-name",children:ct}),a.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",a.jsxs("strong",{children:[Me[ct]?.weight,"kg"]})]}),a.jsxs("div",{className:"pb-cb-target-input-wrap",children:[a.jsx("label",{children:"Your target (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:ae,onChange:q=>un(q.target.value),placeholder:String((Me[ct]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),a.jsxs("div",{className:"pb-cb-target-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>gt(null),children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ye,disabled:h,children:h?"Saving...":"Set Target"})]})]})})]}),J&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!x&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:It,onTouchStart:fn,onTouchMove:Mn,onTouchEnd:H,children:[a.jsx("div",{className:`pb-ring-container slide-from-${ut.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Iy.map((q,he)=>{const T=he<Math.round(Xn);return a.jsx("line",{x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,className:`pb-ring-tick ${T?Wn?"hit":"filled":"empty"}`,strokeWidth:q.thick?"3":"2"},he)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:me.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[me.name,St("strength",me.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:Xe?me.unit==="time"?id(Xe.time):hx(Xe.weight,Xe.reps):"-"}),vt!==null&&a.jsxs("div",{className:`pb-ring-change ${vt>=0?"positive":"negative"}`,children:[vt>=0?"+":"",vt.toFixed(1),"%"]}),vt===null&&Xe&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),mn&&a.jsx("div",{className:`pb-ring-target ${Wn?"hit":""}`,children:Wn?"Target hit!":mn.targetType==="time"?`${mn.startValue||0}s  ${mn.targetValue}s`:`${mn.startWeight||0}kg${mn.startReps||0}  ${mn.targetWeight}kg${mn.targetReps}`}),!mn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:ta.map((q,he)=>a.jsx("button",{className:`pb-dot ${he===g?"active":""}`,onClick:()=>Je(he)},he))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Je(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Je(g+1),disabled:g===ta.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(kD,{data:n,exerciseKey:me.key,unit:me.unit})]})]}),!x&&!$&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:Le?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>U(!0),children:Object.keys(_e).length>0?"Edit Targets":"Set Targets"}),(Object.keys(_e).length>0||Object.keys(Ae).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ht,disabled:h,children:"Reset All Goals"})]}),x&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Dr(We)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),ne(Le?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:ta.map(q=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),q.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:V[q.key]?.weight??"",onChange:he=>ht(q.key,"weight",he.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:V[q.key]?.reps??"",onChange:he=>ht(q.key,"reps",he.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:V[q.key]?.time??"",onChange:he=>ht(q.key,"time",he.target.value),placeholder:"0"})]})})]},q.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),ne(Le?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Wt,disabled:h,children:h?"Saving...":"Save"})]})]}),$&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{U(!1),A(_e)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),ta.map(q=>{const he=Le?.benchmarks?.[q.key];let T="-";return he&&(q.unit==="time"&&he.time?T=`${he.time}s`:(he.weight||he.reps)&&(T=`${he.weight||0}kg  ${he.reps||0}`)),a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",T]})]}),q.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:E[q.key]?.targetWeight??"",onChange:R=>Rt(q.key,"targetWeight",R.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:E[q.key]?.targetReps??"",onChange:R=>Rt(q.key,"targetReps",R.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:E[q.key]?.targetValue??"",onChange:R=>Rt(q.key,"targetValue",R.target.value),placeholder:"0"})]})})]},q.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{U(!1),A(_e)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Lt,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!j&&!P&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Dr(We)}),a.jsx("div",{className:"pb-metrics-list",children:po.map(q=>{const he=Le?.bodyMetrics?.[q.key],T=ge(q.key),R=Ae[q.key],K=hn(q.key),ee=K!==null&&K>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[q.name,St("metric",q.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),R&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",R.targetValue," ",q.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:he!=null?`${he} ${q.suffix}`:"-"}),T!==null&&a.jsxs("span",{className:`pb-metric-change ${T>0?"up":T<0?"down":"same"}`,children:[T>0?"+":"",T," ",q.suffix]})]})]}),K!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${ee?"hit":""}`,style:{width:`${Math.round(K*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${ee?"hit":""}`,children:ee?"Hit!":`${Math.round(K*100)}%`})]})]},q.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:Le?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(_e).length>0||Object.keys(Ae).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ht,disabled:h,children:"Reset All Goals"})]})]}),j&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Dr(We)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),ce(Le?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:po.map(q=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[q.name," (",q.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:X[q.key]??"",onChange:he=>dt(q.key,he.target.value),placeholder:"0"})]})},q.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),ce(Le?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Qe,disabled:h,children:h?"Saving...":"Save"})]})]}),P&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),I(Ae)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),po.map(q=>{const he=Le?.bodyMetrics?.[q.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",he!=null?`${he} ${q.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",q.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:F[q.key]?.targetValue??"",onChange:T=>kt(q.key,T.target.value),placeholder:"0"})]})})]},q.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),I(Ae)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Kt,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[Fe.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...Fe].reverse().map((q,he)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${he*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:q.label}),a.jsx("span",{className:"pb-achievement-date",children:Dr(q.achievedMonth)})]})]},he))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${De?"active":""}`,onClick:()=>{N(!De),!De&&n.length>=2&&(ie(n[0].month),Ne(n[n.length-1].month))},children:De?"Back to Timeline":"Compare Months"})}),De?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:B,onChange:q=>ie(q.target.value),children:n.map(q=>a.jsx("option",{value:q.month,children:Dr(q.month)},q.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:pe,onChange:q=>Ne(q.target.value),children:n.map(q=>a.jsx("option",{value:q.month,children:Dr(q.month)},q.month))})]})]}),ve&&we&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Benchmarks"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Dr(B).split(" ")[0]}),a.jsx("span",{children:Dr(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),ta.map(q=>{const he=ve.benchmarks?.[q.key],T=we.benchmarks?.[q.key],R=xl(q,he),K=xl(q,T),ee=zp(K,R);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:q.name}),a.jsx("span",{className:"pb-compare-val",children:he?q.unit==="time"?id(he.time):`${he.weight}x${he.reps}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:T?q.unit==="time"?id(T.time):`${T.weight}x${T.reps}`:"-"}),a.jsx("span",{className:`pb-compare-change ${ee!==null?ee>=0?"positive":"negative":""}`,children:ee!==null?`${ee>=0?"+":""}${ee.toFixed(1)}%`:"-"})]},q.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Dr(B).split(" ")[0]}),a.jsx("span",{children:Dr(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),po.map(q=>{const he=ve.bodyMetrics?.[q.key],T=we.bodyMetrics?.[q.key],R=he!=null&&T!=null?parseFloat((T-he).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:q.name}),a.jsx("span",{className:"pb-compare-val",children:he!=null?`${he}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:T!=null?`${T}`:"-"}),a.jsx("span",{className:`pb-compare-change ${R!==null?R>0?"positive":R<0?"negative":"neutral":""}`,children:R!==null?`${R>0?"+":""}${R} ${q.suffix}`:"-"})]},q.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((q,he)=>{const T=n.find(R=>R.month<q.month&&n.indexOf(R)===n.indexOf(q)-1)||n.filter(R=>R.month<q.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${he*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Dr(q.month)}),q.benchmarks&&Object.keys(q.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Benchmarks"}),ta.map(R=>{const K=q.benchmarks[R.key];if(!K)return null;const ee=T?.benchmarks?.[R.key],$e=xl(R,K),Ue=xl(R,ee),Oe=zp($e,Ue);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:R.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:R.unit==="time"?id(K.time):hx(K.weight,K.reps)}),Oe!==null&&a.jsxs("span",{className:`pb-timeline-change ${Oe>=0?"positive":"negative"}`,children:[Oe>=0?"+":"",Oe.toFixed(1),"%"]})]})]},R.key)})]}),q.bodyMetrics&&Object.keys(q.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),po.map(R=>{const K=q.bodyMetrics[R.key];if(K==null)return null;const ee=T?.bodyMetrics?.[R.key],$e=ee!=null?parseFloat((K-ee).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:R.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[K," ",R.suffix]}),$e!==null&&a.jsxs("span",{className:`pb-timeline-change ${$e>0?"positive":$e<0?"negative":"neutral"}`,children:[$e>0?"+":"",$e," ",R.suffix]})]})]},R.key)})]})]})]},q.id)})})]})})]})]}),Y&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>ke(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:Y.map((q,he)=>a.jsx("div",{className:"pb-celebration-badge",children:q.label},he))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Ie&&a.jsxs("div",{className:`toast-notification ${Ie.type}`,children:[a.jsx("span",{className:"toast-icon",children:Ie.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Ie.message}),a.jsx("button",{className:"toast-close",onClick:()=>le(null),children:""})]}),J&&a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>qt("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>qt("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>qt("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),Mt?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>qt("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]}),O&&a.jsx(Ur,{active:"progress"})]})}const jD=_.lazy(()=>xr(()=>import("./Dashboard-DDbJOOTs.js"),__vite__mapDeps([0,1]))),ED=_.lazy(()=>xr(()=>import("./AddClient-B-TUbses.js"),__vite__mapDeps([2,3]))),SD=_.lazy(()=>xr(()=>import("./ClientDashboard-CCcvYQjo.js"),[])),ND=_.lazy(()=>xr(()=>import("./ClientForms-CJw9db0P.js"),__vite__mapDeps([4,5]))),CD=_.lazy(()=>xr(()=>import("./ClientTools-DutM9_uU.js"),__vite__mapDeps([6,7]))),RD=_.lazy(()=>xr(()=>import("./MacroCalculator-BxwYeXaY.js"),__vite__mapDeps([8,7]))),AD=_.lazy(()=>xr(()=>import("./ProteinSnacks-B8RtHdkT.js"),__vite__mapDeps([9,7]))),MD=_.lazy(()=>xr(()=>import("./DailyMotivation-DlEFVr67.js"),__vite__mapDeps([10,7]))),ID=_.lazy(()=>xr(()=>import("./CircuitDashboard-DNScspJe.js"),__vite__mapDeps([11,12]))),DD=_.lazy(()=>xr(()=>import("./CircuitBooking-B3pcSDNp.js"),__vite__mapDeps([13,14,12]))),PD=_.lazy(()=>xr(()=>import("./Leaderboard-D68Geb6B.js"),__vite__mapDeps([15,16])));function LD({children:s}){const{pathname:e}=Fr();return _.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),_.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function OD(){const s=Ss();return _.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function VD(){return a.jsx(N3,{children:a.jsx(S3,{children:a.jsxs(DE,{basename:"/login",children:[a.jsx(OD,{}),a.jsx(LD,{children:a.jsx(_.Suspense,{fallback:null,children:a.jsxs(cE,{children:[a.jsx(qn,{path:"/",element:a.jsx(C3,{})}),a.jsx(qn,{path:"/dashboard",element:a.jsx(jD,{})}),a.jsx(qn,{path:"/add-client",element:a.jsx(ED,{})}),a.jsx(qn,{path:"/client",element:a.jsx(SD,{})}),a.jsx(qn,{path:"/client/forms",element:a.jsx(ND,{})}),a.jsx(qn,{path:"/client/tools",element:a.jsx(CD,{})}),a.jsx(qn,{path:"/client/tools/macros",element:a.jsx(RD,{})}),a.jsx(qn,{path:"/client/tools/snacks",element:a.jsx(AD,{})}),a.jsx(qn,{path:"/client/tools/motivation",element:a.jsx(MD,{})}),a.jsx(qn,{path:"/client/personal-bests",element:a.jsx(TD,{})}),a.jsx(qn,{path:"/client/circuit",element:a.jsx(ID,{})}),a.jsx(qn,{path:"/client/circuit/booking",element:a.jsx(DD,{})}),a.jsx(qn,{path:"/client/core-buddy",element:a.jsx(P3,{})}),a.jsx(qn,{path:"/client/core-buddy/nutrition",element:a.jsx(V3,{})}),a.jsx(qn,{path:"/client/core-buddy/workouts",element:a.jsx(Y3,{})}),a.jsx(qn,{path:"/client/core-buddy/programmes",element:a.jsx(eD,{})}),a.jsx(qn,{path:"/client/core-buddy/achievements",element:a.jsx(iD,{})}),a.jsx(qn,{path:"/client/core-buddy/consistency",element:a.jsx(cD,{})}),a.jsx(qn,{path:"/client/core-buddy/buddies",element:a.jsx(uD,{})}),a.jsx(qn,{path:"/client/core-buddy/profile/:userId",element:a.jsx(pD,{})}),a.jsx(qn,{path:"/client/core-buddy/feed",element:a.jsx(gD,{})}),a.jsx(qn,{path:"/client/leaderboard",element:a.jsx(PD,{})}),a.jsx(qn,{path:"*",element:a.jsx(oE,{to:"/",replace:!0})})]})})})]})})})}lj.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(VD,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{Ur as C,pt as T,Ao as a,Ks as b,Yt as c,Se as d,et as e,BD as f,_n as g,A4 as h,Ln as i,a as j,ar as k,qr as l,Ss as m,Iy as n,Bd as o,Rn as p,An as q,_ as r,zD as s,_o as u,vn as w};
