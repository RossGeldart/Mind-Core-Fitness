(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();function VT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Qp={exports:{}},rd={};var X1;function UT(){if(X1)return rd;X1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,i,c){var u=null;if(c!==void 0&&(u=""+c),i.key!==void 0&&(u=""+i.key),"key"in i){c={};for(var f in i)f!=="key"&&(c[f]=i[f])}else c=i;return i=c.ref,{$$typeof:s,type:a,key:u,ref:i!==void 0?i:null,props:c}}return rd.Fragment=e,rd.jsx=t,rd.jsxs=t,rd}var J1;function BT(){return J1||(J1=1,Qp.exports=UT()),Qp.exports}var o=BT(),Xp={exports:{}},Gt={};var Z1;function zT(){if(Z1)return Gt;Z1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),C=Symbol.iterator;function L(Q){return Q===null||typeof Q!="object"?null:(Q=C&&Q[C]||Q["@@iterator"],typeof Q=="function"?Q:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,F={};function Y(Q,de,ze){this.props=Q,this.context=de,this.refs=F,this.updater=ze||P}Y.prototype.isReactComponent={},Y.prototype.setState=function(Q,de){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,de,"setState")},Y.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function W(){}W.prototype=Y.prototype;function se(Q,de,ze){this.props=Q,this.context=de,this.refs=F,this.updater=ze||P}var K=se.prototype=new W;K.constructor=se,V(K,Y.prototype),K.isPureReactComponent=!0;var fe=Array.isArray;function ke(){}var q={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function H(Q,de,ze){var Pe=ze.ref;return{$$typeof:s,type:Q,key:de,ref:Pe!==void 0?Pe:null,props:ze}}function J(Q,de){return H(Q.type,de,Q.props)}function $(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===s}function Z(Q){var de={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(ze){return de[ze]})}var O=/\/+/g;function Ce(Q,de){return typeof Q=="object"&&Q!==null&&Q.key!=null?Z(""+Q.key):de.toString(36)}function Oe(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(ke,ke):(Q.status="pending",Q.then(function(de){Q.status==="pending"&&(Q.status="fulfilled",Q.value=de)},function(de){Q.status==="pending"&&(Q.status="rejected",Q.reason=de)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function ee(Q,de,ze,Pe,he){var Fe=typeof Q;(Fe==="undefined"||Fe==="boolean")&&(Q=null);var ue=!1;if(Q===null)ue=!0;else switch(Fe){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(Q.$$typeof){case s:case e:ue=!0;break;case T:return ue=Q._init,ee(ue(Q._payload),de,ze,Pe,he)}}if(ue)return he=he(Q),ue=Pe===""?"."+Ce(Q,0):Pe,fe(he)?(ze="",ue!=null&&(ze=ue.replace(O,"$&/")+"/"),ee(he,de,ze,"",function(et){return et})):he!=null&&($(he)&&(he=J(he,ze+(he.key==null||Q&&Q.key===he.key?"":(""+he.key).replace(O,"$&/")+"/")+ue)),de.push(he)),1;ue=0;var ye=Pe===""?".":Pe+":";if(fe(Q))for(var Se=0;Se<Q.length;Se++)Pe=Q[Se],Fe=ye+Ce(Pe,Se),ue+=ee(Pe,de,ze,Fe,he);else if(Se=L(Q),typeof Se=="function")for(Q=Se.call(Q),Se=0;!(Pe=Q.next()).done;)Pe=Pe.value,Fe=ye+Ce(Pe,Se++),ue+=ee(Pe,de,ze,Fe,he);else if(Fe==="object"){if(typeof Q.then=="function")return ee(Oe(Q),de,ze,Pe,he);throw de=String(Q),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return ue}function _e(Q,de,ze){if(Q==null)return Q;var Pe=[],he=0;return ee(Q,Pe,"","",function(Fe){return de.call(ze,Fe,he++)}),Pe}function Be(Q){if(Q._status===-1){var de=Q._result;de=de(),de.then(function(ze){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=ze)},function(ze){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=ze)}),Q._status===-1&&(Q._status=0,Q._result=de)}if(Q._status===1)return Q._result.default;throw Q._result}var De=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},Xe={map:_e,forEach:function(Q,de,ze){_e(Q,function(){de.apply(this,arguments)},ze)},count:function(Q){var de=0;return _e(Q,function(){de++}),de},toArray:function(Q){return _e(Q,function(de){return de})||[]},only:function(Q){if(!$(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return Gt.Activity=E,Gt.Children=Xe,Gt.Component=Y,Gt.Fragment=t,Gt.Profiler=i,Gt.PureComponent=se,Gt.StrictMode=a,Gt.Suspense=m,Gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Gt.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return q.H.useMemoCache(Q)}},Gt.cache=function(Q){return function(){return Q.apply(null,arguments)}},Gt.cacheSignal=function(){return null},Gt.cloneElement=function(Q,de,ze){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var Pe=V({},Q.props),he=Q.key;if(de!=null)for(Fe in de.key!==void 0&&(he=""+de.key),de)!B.call(de,Fe)||Fe==="key"||Fe==="__self"||Fe==="__source"||Fe==="ref"&&de.ref===void 0||(Pe[Fe]=de[Fe]);var Fe=arguments.length-2;if(Fe===1)Pe.children=ze;else if(1<Fe){for(var ue=Array(Fe),ye=0;ye<Fe;ye++)ue[ye]=arguments[ye+2];Pe.children=ue}return H(Q.type,he,Pe)},Gt.createContext=function(Q){return Q={$$typeof:u,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:c,_context:Q},Q},Gt.createElement=function(Q,de,ze){var Pe,he={},Fe=null;if(de!=null)for(Pe in de.key!==void 0&&(Fe=""+de.key),de)B.call(de,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(he[Pe]=de[Pe]);var ue=arguments.length-2;if(ue===1)he.children=ze;else if(1<ue){for(var ye=Array(ue),Se=0;Se<ue;Se++)ye[Se]=arguments[Se+2];he.children=ye}if(Q&&Q.defaultProps)for(Pe in ue=Q.defaultProps,ue)he[Pe]===void 0&&(he[Pe]=ue[Pe]);return H(Q,Fe,he)},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(Q){return{$$typeof:f,render:Q}},Gt.isValidElement=$,Gt.lazy=function(Q){return{$$typeof:T,_payload:{_status:-1,_result:Q},_init:Be}},Gt.memo=function(Q,de){return{$$typeof:b,type:Q,compare:de===void 0?null:de}},Gt.startTransition=function(Q){var de=q.T,ze={};q.T=ze;try{var Pe=Q(),he=q.S;he!==null&&he(ze,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(ke,De)}catch(Fe){De(Fe)}finally{de!==null&&ze.types!==null&&(de.types=ze.types),q.T=de}},Gt.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Gt.use=function(Q){return q.H.use(Q)},Gt.useActionState=function(Q,de,ze){return q.H.useActionState(Q,de,ze)},Gt.useCallback=function(Q,de){return q.H.useCallback(Q,de)},Gt.useContext=function(Q){return q.H.useContext(Q)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(Q,de){return q.H.useDeferredValue(Q,de)},Gt.useEffect=function(Q,de){return q.H.useEffect(Q,de)},Gt.useEffectEvent=function(Q){return q.H.useEffectEvent(Q)},Gt.useId=function(){return q.H.useId()},Gt.useImperativeHandle=function(Q,de,ze){return q.H.useImperativeHandle(Q,de,ze)},Gt.useInsertionEffect=function(Q,de){return q.H.useInsertionEffect(Q,de)},Gt.useLayoutEffect=function(Q,de){return q.H.useLayoutEffect(Q,de)},Gt.useMemo=function(Q,de){return q.H.useMemo(Q,de)},Gt.useOptimistic=function(Q,de){return q.H.useOptimistic(Q,de)},Gt.useReducer=function(Q,de,ze){return q.H.useReducer(Q,de,ze)},Gt.useRef=function(Q){return q.H.useRef(Q)},Gt.useState=function(Q){return q.H.useState(Q)},Gt.useSyncExternalStore=function(Q,de,ze){return q.H.useSyncExternalStore(Q,de,ze)},Gt.useTransition=function(){return q.H.useTransition()},Gt.version="19.2.4",Gt}var eb;function ly(){return eb||(eb=1,Xp.exports=zT()),Xp.exports}var I=ly(),Jp={exports:{}},ad={},Zp={exports:{}},eg={};var tb;function FT(){return tb||(tb=1,(function(s){function e(ee,_e){var Be=ee.length;ee.push(_e);e:for(;0<Be;){var De=Be-1>>>1,Xe=ee[De];if(0<i(Xe,_e))ee[De]=_e,ee[Be]=Xe,Be=De;else break e}}function t(ee){return ee.length===0?null:ee[0]}function a(ee){if(ee.length===0)return null;var _e=ee[0],Be=ee.pop();if(Be!==_e){ee[0]=Be;e:for(var De=0,Xe=ee.length,Q=Xe>>>1;De<Q;){var de=2*(De+1)-1,ze=ee[de],Pe=de+1,he=ee[Pe];if(0>i(ze,Be))Pe<Xe&&0>i(he,ze)?(ee[De]=he,ee[Pe]=Be,De=Pe):(ee[De]=ze,ee[de]=Be,De=de);else if(Pe<Xe&&0>i(he,Be))ee[De]=he,ee[Pe]=Be,De=Pe;else break e}}return _e}function i(ee,_e){var Be=ee.sortIndex-_e.sortIndex;return Be!==0?Be:ee.id-_e.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();s.unstable_now=function(){return u.now()-f}}var m=[],b=[],T=1,E=null,C=3,L=!1,P=!1,V=!1,F=!1,Y=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function K(ee){for(var _e=t(b);_e!==null;){if(_e.callback===null)a(b);else if(_e.startTime<=ee)a(b),_e.sortIndex=_e.expirationTime,e(m,_e);else break;_e=t(b)}}function fe(ee){if(V=!1,K(ee),!P)if(t(m)!==null)P=!0,ke||(ke=!0,Z());else{var _e=t(b);_e!==null&&Oe(fe,_e.startTime-ee)}}var ke=!1,q=-1,B=5,H=-1;function J(){return F?!0:!(s.unstable_now()-H<B)}function $(){if(F=!1,ke){var ee=s.unstable_now();H=ee;var _e=!0;try{e:{P=!1,V&&(V=!1,W(q),q=-1),L=!0;var Be=C;try{t:{for(K(ee),E=t(m);E!==null&&!(E.expirationTime>ee&&J());){var De=E.callback;if(typeof De=="function"){E.callback=null,C=E.priorityLevel;var Xe=De(E.expirationTime<=ee);if(ee=s.unstable_now(),typeof Xe=="function"){E.callback=Xe,K(ee),_e=!0;break t}E===t(m)&&a(m),K(ee)}else a(m);E=t(m)}if(E!==null)_e=!0;else{var Q=t(b);Q!==null&&Oe(fe,Q.startTime-ee),_e=!1}}break e}finally{E=null,C=Be,L=!1}_e=void 0}}finally{_e?Z():ke=!1}}}var Z;if(typeof se=="function")Z=function(){se($)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ce=O.port2;O.port1.onmessage=$,Z=function(){Ce.postMessage(null)}}else Z=function(){Y($,0)};function Oe(ee,_e){q=Y(function(){ee(s.unstable_now())},_e)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function(ee){switch(C){case 1:case 2:case 3:var _e=3;break;default:_e=C}var Be=C;C=_e;try{return ee()}finally{C=Be}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(ee,_e){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Be=C;C=ee;try{return _e()}finally{C=Be}},s.unstable_scheduleCallback=function(ee,_e,Be){var De=s.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?De+Be:De):Be=De,ee){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Be+Xe,ee={id:T++,callback:_e,priorityLevel:ee,startTime:Be,expirationTime:Xe,sortIndex:-1},Be>De?(ee.sortIndex=Be,e(b,ee),t(m)===null&&ee===t(b)&&(V?(W(q),q=-1):V=!0,Oe(fe,Be-De))):(ee.sortIndex=Xe,e(m,ee),P||L||(P=!0,ke||(ke=!0,Z()))),ee},s.unstable_shouldYield=J,s.unstable_wrapCallback=function(ee){var _e=C;return function(){var Be=C;C=_e;try{return ee.apply(this,arguments)}finally{C=Be}}}})(eg)),eg}var nb;function qT(){return nb||(nb=1,Zp.exports=FT()),Zp.exports}var tg={exports:{}},nr={};var sb;function HT(){if(sb)return nr;sb=1;var s=ly();function e(m){var b="https://react.dev/errors/"+m;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)b+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+m+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(m,b,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:E==null?null:""+E,children:m,containerInfo:b,implementation:T}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,b){if(m==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return nr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,nr.createPortal=function(m,b){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return c(m,b,null,T)},nr.flushSync=function(m){var b=u.T,T=a.p;try{if(u.T=null,a.p=2,m)return m()}finally{u.T=b,a.p=T,a.d.f()}},nr.preconnect=function(m,b){typeof m=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,a.d.C(m,b))},nr.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},nr.preinit=function(m,b){if(typeof m=="string"&&b&&typeof b.as=="string"){var T=b.as,E=f(T,b.crossOrigin),C=typeof b.integrity=="string"?b.integrity:void 0,L=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;T==="style"?a.d.S(m,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:E,integrity:C,fetchPriority:L}):T==="script"&&a.d.X(m,{crossOrigin:E,integrity:C,fetchPriority:L,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},nr.preinitModule=function(m,b){if(typeof m=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var T=f(b.as,b.crossOrigin);a.d.M(m,{crossOrigin:T,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&a.d.M(m)},nr.preload=function(m,b){if(typeof m=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var T=b.as,E=f(T,b.crossOrigin);a.d.L(m,T,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},nr.preloadModule=function(m,b){if(typeof m=="string")if(b){var T=f(b.as,b.crossOrigin);a.d.m(m,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:T,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else a.d.m(m)},nr.requestFormReset=function(m){a.d.r(m)},nr.unstable_batchedUpdates=function(m,b){return m(b)},nr.useFormState=function(m,b,T){return u.H.useFormState(m,b,T)},nr.useFormStatus=function(){return u.H.useHostTransitionStatus()},nr.version="19.2.4",nr}var rb;function $T(){if(rb)return tg.exports;rb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),tg.exports=HT(),tg.exports}var ab;function GT(){if(ab)return ad;ab=1;var s=qT(),e=ly(),t=$T();function a(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function u(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function f(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(a(188))}function b(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(a(188));return r!==n?null:n}for(var l=n,d=r;;){var v=l.return;if(v===null)break;var w=v.alternate;if(w===null){if(d=v.return,d!==null){l=d;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===l)return m(v),n;if(w===d)return m(v),r;w=w.sibling}throw Error(a(188))}if(l.return!==d.return)l=v,d=w;else{for(var k=!1,U=v.child;U;){if(U===l){k=!0,l=v,d=w;break}if(U===d){k=!0,d=v,l=w;break}U=U.sibling}if(!k){for(U=w.child;U;){if(U===l){k=!0,l=w,d=v;break}if(U===d){k=!0,d=w,l=v;break}U=U.sibling}if(!k)throw Error(a(189))}}if(l.alternate!==d)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:r}function T(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=T(n),r!==null)return r;n=n.sibling}return null}var E=Object.assign,C=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),se=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=$&&n[$]||n["@@iterator"],typeof n=="function"?n:null)}var O=Symbol.for("react.client.reference");function Ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===O?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case Y:return"Profiler";case F:return"StrictMode";case fe:return"Suspense";case ke:return"SuspenseList";case H:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case P:return"Portal";case se:return n.displayName||"Context";case W:return(n._context.displayName||"Context")+".Consumer";case K:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case q:return r=n.displayName||null,r!==null?r:Ce(n.type)||"Memo";case B:r=n._payload,n=n._init;try{return Ce(n(r))}catch{}}return null}var Oe=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be={pending:!1,data:null,method:null,action:null},De=[],Xe=-1;function Q(n){return{current:n}}function de(n){0>Xe||(n.current=De[Xe],De[Xe]=null,Xe--)}function ze(n,r){Xe++,De[Xe]=n.current,n.current=r}var Pe=Q(null),he=Q(null),Fe=Q(null),ue=Q(null);function ye(n,r){switch(ze(Fe,r),ze(he,n),ze(Pe,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?x1(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=x1(r),n=_1(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}de(Pe),ze(Pe,n)}function Se(){de(Pe),de(he),de(Fe)}function et(n){n.memoizedState!==null&&ze(ue,n);var r=Pe.current,l=_1(r,n.type);r!==l&&(ze(he,n),ze(Pe,l))}function Me(n){he.current===n&&(de(Pe),de(he)),ue.current===n&&(de(ue),ed._currentValue=Be)}var mt,dt;function At(n){if(mt===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);mt=r&&r[1]||"",dt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mt+n+dt}var Rt=!1;function jt(n,r){if(!n||Rt)return"";Rt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var Ke=function(){throw Error()};if(Object.defineProperty(Ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ke,[])}catch(Ie){var je=Ie}Reflect.construct(n,[],Ke)}else{try{Ke.call()}catch(Ie){je=Ie}n.call(Ke.prototype)}}else{try{throw Error()}catch(Ie){je=Ie}(Ke=n())&&typeof Ke.catch=="function"&&Ke.catch(function(){})}}catch(Ie){if(Ie&&je&&typeof Ie.stack=="string")return[Ie.stack,je.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),k=w[0],U=w[1];if(k&&U){var te=k.split(`
`),Ee=U.split(`
`);for(v=d=0;d<te.length&&!te[d].includes("DetermineComponentFrameRoot");)d++;for(;v<Ee.length&&!Ee[v].includes("DetermineComponentFrameRoot");)v++;if(d===te.length||v===Ee.length)for(d=te.length-1,v=Ee.length-1;1<=d&&0<=v&&te[d]!==Ee[v];)v--;for(;1<=d&&0<=v;d--,v--)if(te[d]!==Ee[v]){if(d!==1||v!==1)do if(d--,v--,0>v||te[d]!==Ee[v]){var He=`
`+te[d].replace(" at new "," at ");return n.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",n.displayName)),He}while(1<=d&&0<=v);break}}}finally{Rt=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?At(l):""}function ae(n,r){switch(n.tag){case 26:case 27:case 5:return At(n.type);case 16:return At("Lazy");case 13:return n.child!==r&&r!==null?At("Suspense Fallback"):At("Suspense");case 19:return At("SuspenseList");case 0:case 15:return jt(n.type,!1);case 11:return jt(n.type.render,!1);case 1:return jt(n.type,!0);case 31:return At("Activity");default:return""}}function Je(n){try{var r="",l=null;do r+=ae(n,l),l=n,n=n.return;while(n);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var ge=Object.prototype.hasOwnProperty,be=s.unstable_scheduleCallback,xe=s.unstable_cancelCallback,nt=s.unstable_shouldYield,ct=s.unstable_requestPaint,We=s.unstable_now,_t=s.unstable_getCurrentPriorityLevel,wt=s.unstable_ImmediatePriority,Vt=s.unstable_UserBlockingPriority,Lt=s.unstable_NormalPriority,nn=s.unstable_LowPriority,Kt=s.unstable_IdlePriority,rn=s.log,Ys=s.unstable_setDisableYieldValue,Fn=null,Le=null;function tt(n){if(typeof rn=="function"&&Ys(n),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(Fn,n)}catch{}}var it=Math.clz32?Math.clz32:ne,Ut=Math.log,Et=Math.LN2;function ne(n){return n>>>=0,n===0?32:31-(Ut(n)/Et|0)|0}var ve=256,st=262144,ot=4194304;function xt(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function sn(n,r,l){var d=n.pendingLanes;if(d===0)return 0;var v=0,w=n.suspendedLanes,k=n.pingedLanes;n=n.warmLanes;var U=d&134217727;return U!==0?(d=U&~w,d!==0?v=xt(d):(k&=U,k!==0?v=xt(k):l||(l=U&~n,l!==0&&(v=xt(l))))):(U=d&~w,U!==0?v=xt(U):k!==0?v=xt(k):l||(l=d&~n,l!==0&&(v=xt(l)))),v===0?0:r!==0&&r!==v&&(r&w)===0&&(w=v&-v,l=r&-r,w>=l||w===32&&(l&4194048)!==0)?r:v}function yn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Is(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wn(){var n=ot;return ot<<=1,(ot&62914560)===0&&(ot=4194304),n}function xn(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function Un(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Yt(n,r,l,d,v,w){var k=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var U=n.entanglements,te=n.expirationTimes,Ee=n.hiddenUpdates;for(l=k&~l;0<l;){var He=31-it(l),Ke=1<<He;U[He]=0,te[He]=-1;var je=Ee[He];if(je!==null)for(Ee[He]=null,He=0;He<je.length;He++){var Ie=je[He];Ie!==null&&(Ie.lane&=-536870913)}l&=~Ke}d!==0&&Tn(n,d,0),w!==0&&v===0&&n.tag!==0&&(n.suspendedLanes|=w&~(k&~r))}function Tn(n,r,l){n.pendingLanes|=r,n.suspendedLanes&=~r;var d=31-it(r);n.entangledLanes|=r,n.entanglements[d]=n.entanglements[d]|1073741824|l&261930}function qn(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var d=31-it(l),v=1<<d;v&r|n[d]&r&&(n[d]|=r),l&=~v}}function os(n,r){var l=r&-r;return l=(l&42)!==0?1:me(l),(l&(n.suspendedLanes|r))!==0?0:l}function me(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ve(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ze(){var n=_e.p;return n!==0?n:(n=window.event,n===void 0?32:H1(n.type))}function Ye(n,r){var l=_e.p;try{return _e.p=n,r()}finally{_e.p=l}}var ut=Math.random().toString(36).slice(2),ft="__reactFiber$"+ut,Tt="__reactProps$"+ut,ie="__reactContainer$"+ut,at="__reactEvents$"+ut,It="__reactListeners$"+ut,Ft="__reactHandles$"+ut,_n="__reactResources$"+ut,mn="__reactMarker$"+ut;function Bn(n){delete n[ft],delete n[Tt],delete n[at],delete n[It],delete n[Ft]}function ls(n){var r=n[ft];if(r)return r;for(var l=n.parentNode;l;){if(r=l[ie]||l[ft]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=k1(n);n!==null;){if(l=n[ft])return l;n=k1(n)}return r}n=l,l=n.parentNode}return null}function gs(n){if(n=n[ft]||n[ie]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function ts(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(a(33))}function Os(n){var r=n[_n];return r||(r=n[_n]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Hn(n){n[mn]=!0}var Ha=new Set,Ei={};function cr(n,r){Dt(n,r),Dt(n+"Capture",r)}function Dt(n,r){for(Ei[n]=r,n=0;n<r.length;n++)Ha.add(r[n])}var Sr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ur={},Br={};function Ni(n){return ge.call(Br,n)?!0:ge.call(ur,n)?!1:Sr.test(n)?Br[n]=!0:(ur[n]=!0,!1)}function $a(n,r,l){if(Ni(r))if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+l)}}function Qs(n,r,l){if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+l)}}function ns(n,r,l,d){if(d===null)n.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(r,l,""+d)}}function ss(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ga(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function bl(n,r,l){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,w=d.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return v.call(this)},set:function(k){l=""+k,w.call(this,k)}}),Object.defineProperty(n,r,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(k){l=""+k},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function En(n){if(!n._valueTracker){var r=Ga(n)?"checked":"value";n._valueTracker=bl(n,r,""+n[r])}}function ji(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return n&&(d=Ga(n)?n.checked?"true":"false":n.value),n=d,n!==l?(r.setValue(n),!0):!1}function sa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ki=/[\n"\\]/g;function Xs(n){return n.replace(ki,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function yo(n,r,l,d,v,w,k,U){n.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.type=k:n.removeAttribute("type"),r!=null?k==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+ss(r)):n.value!==""+ss(r)&&(n.value=""+ss(r)):k!=="submit"&&k!=="reset"||n.removeAttribute("value"),r!=null?xl(n,k,ss(r)):l!=null?xl(n,k,ss(l)):d!=null&&n.removeAttribute("value"),v==null&&w!=null&&(n.defaultChecked=!!w),v!=null&&(n.checked=v&&typeof v!="function"&&typeof v!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?n.name=""+ss(U):n.removeAttribute("name")}function lc(n,r,l,d,v,w,k,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),r!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||r!=null)){En(n);return}l=l!=null?""+ss(l):"",r=r!=null?""+ss(r):l,U||r===n.value||(n.value=r),n.defaultValue=r}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=U?n.checked:!!d,n.defaultChecked=!!d,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(n.name=k),En(n)}function xl(n,r,l){r==="number"&&sa(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Wa(n,r,l,d){if(n=n.options,r){r={};for(var v=0;v<l.length;v++)r["$"+l[v]]=!0;for(l=0;l<n.length;l++)v=r.hasOwnProperty("$"+n[l].value),n[l].selected!==v&&(n[l].selected=v),v&&d&&(n[l].defaultSelected=!0)}else{for(l=""+ss(l),r=null,v=0;v<n.length;v++){if(n[v].value===l){n[v].selected=!0,d&&(n[v].defaultSelected=!0);return}r!==null||n[v].disabled||(r=n[v])}r!==null&&(r.selected=!0)}}function cc(n,r,l){if(r!=null&&(r=""+ss(r),r!==n.value&&(n.value=r),l==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=l!=null?""+ss(l):""}function Ka(n,r,l,d){if(r==null){if(d!=null){if(l!=null)throw Error(a(92));if(Oe(d)){if(1<d.length)throw Error(a(93));d=d[0]}l=d}l==null&&(l=""),r=l}l=ss(r),n.defaultValue=l,d=n.textContent,d===l&&d!==""&&d!==null&&(n.value=d),En(n)}function Js(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var uc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _l(n,r,l){var d=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":d?n.setProperty(r,l):typeof l!="number"||l===0||uc.has(r)?r==="float"?n.cssFloat=l:n[r]=(""+l).trim():n[r]=l+"px"}function wl(n,r,l){if(r!=null&&typeof r!="object")throw Error(a(62));if(n=n.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var v in r)d=r[v],r.hasOwnProperty(v)&&l[v]!==d&&_l(n,v,d)}else for(var w in r)r.hasOwnProperty(w)&&_l(n,w,r[w])}function vo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ya=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bo(n){return Ya.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function zr(){}var Sl=null;function Tr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Qa=null,Fs=null;function Ci(n){var r=gs(n);if(r&&(n=r.stateNode)){var l=n[Tt]||null;e:switch(n=r.stateNode,r.type){case"input":if(yo(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Xs(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==n&&d.form===n.form){var v=d[Tt]||null;if(!v)throw Error(a(90));yo(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<l.length;r++)d=l[r],d.form===n.form&&ji(d)}break e;case"textarea":cc(n,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Wa(n,!!l.multiple,r,!1)}}}var Xa=!1;function Ja(n,r,l){if(Xa)return n(r,l);Xa=!0;try{var d=n(r);return d}finally{if(Xa=!1,(Qa!==null||Fs!==null)&&(Vh(),Qa&&(r=Qa,n=Fs,Fs=Qa=null,Ci(r),n)))for(r=0;r<n.length;r++)Ci(n[r])}}function Fr(n,r){var l=n.stateNode;if(l===null)return null;var d=l[Tt]||null;if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,r,typeof l));return l}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ai=!1;if(Zs)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){Ai=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{Ai=!1}var ra=null,Tl=null,aa=null;function xo(){if(aa)return aa;var n,r=Tl,l=r.length,d,v="value"in ra?ra.value:ra.textContent,w=v.length;for(n=0;n<l&&r[n]===v[n];n++);var k=l-n;for(d=1;d<=k&&r[l-d]===v[w-d];d++);return aa=v.slice(n,1<d?1-d:void 0)}function Za(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Sa(){return!0}function dr(){return!1}function An(n){function r(l,d,v,w,k){this._reactName=l,this._targetInst=v,this.type=d,this.nativeEvent=w,this.target=k,this.currentTarget=null;for(var U in n)n.hasOwnProperty(U)&&(l=n[U],this[U]=l?l(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Sa:dr,this.isPropagationStopped=dr,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),r}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ys=An(Ta),ei=E({},Ta,{view:0,detail:0}),Yn=An(ei),ia,_o,In,wo=E({},ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ea,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==In&&(In&&n.type==="mousemove"?(ia=n.screenX-In.screenX,_o=n.screenY-In.screenY):_o=ia=0,In=n),ia)},movementY:function(n){return"movementY"in n?n.movementY:_o}}),Qt=An(wo),Ri=E({},wo,{dataTransfer:0}),cs=An(Ri),El=E({},ei,{relatedTarget:0}),ti=An(El),hr=E({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),hc=An(hr),Di=E({},Ta,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),fc=An(Di),Nl=E({},Ta,{data:0}),oa=An(Nl),jl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},So={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function To(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=So[n])?!!r[n]:!1}function Ea(){return To}var Ps=E({},ei,{key:function(n){if(n.key){var r=jl[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Za(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ea,charCode:function(n){return n.type==="keypress"?Za(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Za(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),pc=An(Ps),kl=E({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Na=An(kl),p=E({},ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ea}),j=An(p),R=E({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),G=An(R),we=E({},wo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ae=An(we),lt=E({},Ta,{newState:0,oldState:0}),$t=An(lt),Jn=[9,13,27,32],vn=Zs&&"CompositionEvent"in window,$n=null;Zs&&"documentMode"in document&&($n=document.documentMode);var Er=Zs&&"TextEvent"in window&&!$n,la=Zs&&(!vn||$n&&8<$n&&11>=$n),Nr=" ",qr=!1;function ja(n,r){switch(n){case"keyup":return Jn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mi(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ii=!1;function eh(n,r){switch(n){case"compositionend":return Mi(r);case"keypress":return r.which!==32?null:(qr=!0,Nr);case"textInput":return n=r.data,n===Nr&&qr?null:n;default:return null}}function pu(n,r){if(Ii)return n==="compositionend"||!vn&&ja(n,r)?(n=xo(),aa=Tl=ra=null,Ii=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return la&&r.locale!=="ko"?null:r.data;default:return null}}var Nm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function th(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Nm[n.type]:r==="textarea"}function gu(n,r,l,d){Qa?Fs?Fs.push(d):Fs=[d]:Qa=d,r=$h(r,"onChange"),0<r.length&&(l=new ys("onChange","change",null,l,d),n.push({event:l,listeners:r}))}var Cl=null,Eo=null;function nh(n){m1(n,0)}function Hr(n){var r=ts(n);if(ji(r))return n}function sh(n,r){if(n==="change")return r}var yu=!1;if(Zs){var vu;if(Zs){var bu="oninput"in document;if(!bu){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),bu=typeof xu.oninput=="function"}vu=bu}else vu=!1;yu=vu&&(!document.documentMode||9<document.documentMode)}function rh(){Cl&&(Cl.detachEvent("onpropertychange",_u),Eo=Cl=null)}function _u(n){if(n.propertyName==="value"&&Hr(Eo)){var r=[];gu(r,Eo,n,Tr(n)),Ja(nh,r)}}function jm(n,r,l){n==="focusin"?(rh(),Cl=r,Eo=l,Cl.attachEvent("onpropertychange",_u)):n==="focusout"&&rh()}function ah(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hr(Eo)}function Al(n,r){if(n==="click")return Hr(r)}function ih(n,r){if(n==="input"||n==="change")return Hr(r)}function km(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var er=typeof Object.is=="function"?Object.is:km;function No(n,r){if(er(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var v=l[d];if(!ge.call(r,v)||!er(n[v],r[v]))return!1}return!0}function gc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function wu(n,r){var l=gc(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=r&&d>=r)return{node:l,offset:r-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=gc(l)}}function oh(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?oh(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Su(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=sa(n.document);r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=sa(n.document)}return r}function yc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Cm=Zs&&"documentMode"in document&&11>=document.documentMode,Oi=null,jo=null,ni=null,ko=!1;function lh(n,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ko||Oi==null||Oi!==sa(d)||(d=Oi,"selectionStart"in d&&yc(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ni&&No(ni,d)||(ni=d,d=$h(jo,"onSelect"),0<d.length&&(r=new ys("onSelect","select",null,r,l),n.push({event:r,listeners:d}),r.target=Oi)))}function si(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var ca={animationend:si("Animation","AnimationEnd"),animationiteration:si("Animation","AnimationIteration"),animationstart:si("Animation","AnimationStart"),transitionrun:si("Transition","TransitionRun"),transitionstart:si("Transition","TransitionStart"),transitioncancel:si("Transition","TransitionCancel"),transitionend:si("Transition","TransitionEnd")},Rl={},ri={};Zs&&(ri=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function Pi(n){if(Rl[n])return Rl[n];if(!ca[n])return n;var r=ca[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in ri)return Rl[n]=r[l];return n}var ch=Pi("animationend"),uh=Pi("animationiteration"),dh=Pi("animationstart"),Am=Pi("transitionrun"),Rm=Pi("transitionstart"),Tu=Pi("transitioncancel"),Eu=Pi("transitionend"),hh=new Map,vc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vc.push("scrollEnd");function js(n,r){hh.set(n,r),cr(r,[n])}var bc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},fr=[],Li=0,Nu=0;function Dl(){for(var n=Li,r=Nu=Li=0;r<n;){var l=fr[r];fr[r++]=null;var d=fr[r];fr[r++]=null;var v=fr[r];fr[r++]=null;var w=fr[r];if(fr[r++]=null,d!==null&&v!==null){var k=d.pending;k===null?v.next=v:(v.next=k.next,k.next=v),d.pending=v}w!==0&&ku(l,v,w)}}function xc(n,r,l,d){fr[Li++]=n,fr[Li++]=r,fr[Li++]=l,fr[Li++]=d,Nu|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function ju(n,r,l,d){return xc(n,r,l,d),_c(n)}function ai(n,r){return xc(n,null,null,r),_c(n)}function ku(n,r,l){n.lanes|=l;var d=n.alternate;d!==null&&(d.lanes|=l);for(var v=!1,w=n.return;w!==null;)w.childLanes|=l,d=w.alternate,d!==null&&(d.childLanes|=l),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(v=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,v&&r!==null&&(v=31-it(l),n=w.hiddenUpdates,d=n[v],d===null?n[v]=[r]:d.push(r),r.lane=l|536870912),w):null}function _c(n){if(50<Wu)throw Wu=0,xp=null,Error(a(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Vi={};function wc(n,r,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(n,r,l,d){return new wc(n,r,l,d)}function Co(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ua(n,r){var l=n.alternate;return l===null?(l=ks(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function fh(n,r){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,r=l.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Ml(n,r,l,d,v,w){var k=0;if(d=n,typeof n=="function")Co(n)&&(k=1);else if(typeof n=="string")k=NT(n,l,Pe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case H:return n=ks(31,l,r,v),n.elementType=H,n.lanes=w,n;case V:return ii(l.children,v,w,r);case F:k=8,v|=24;break;case Y:return n=ks(12,l,r,v|2),n.elementType=Y,n.lanes=w,n;case fe:return n=ks(13,l,r,v),n.elementType=fe,n.lanes=w,n;case ke:return n=ks(19,l,r,v),n.elementType=ke,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case se:k=10;break e;case W:k=9;break e;case K:k=11;break e;case q:k=14;break e;case B:k=16,d=null;break e}k=29,l=Error(a(130,n===null?"null":typeof n,"")),d=null}return r=ks(k,l,r,v),r.elementType=n,r.type=d,r.lanes=w,r}function ii(n,r,l,d){return n=ks(7,n,d,r),n.lanes=l,n}function Cu(n,r,l){return n=ks(6,n,null,r),n.lanes=l,n}function Il(n){var r=ks(18,null,null,0);return r.stateNode=n,r}function Sc(n,r,l){return r=ks(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var mh=new WeakMap;function jr(n,r){if(typeof n=="object"&&n!==null){var l=mh.get(n);return l!==void 0?l:(r={value:n,source:r,stack:Je(r)},mh.set(n,r),r)}return{value:n,source:r,stack:Je(r)}}var Ao=[],Ro=0,Tc=null,Ol=0,mr=[],kr=0,oi=null,$r=1,da="";function Cr(n,r){Ao[Ro++]=Ol,Ao[Ro++]=Tc,Tc=n,Ol=r}function qs(n,r,l){mr[kr++]=$r,mr[kr++]=da,mr[kr++]=oi,oi=n;var d=$r;n=da;var v=32-it(d)-1;d&=~(1<<v),l+=1;var w=32-it(r)+v;if(30<w){var k=v-v%5;w=(d&(1<<k)-1).toString(32),d>>=k,v-=k,$r=1<<32-it(r)+v|l<<v|d,da=w+n}else $r=1<<w|l<<v|d,da=n}function Au(n){n.return!==null&&(Cr(n,1),qs(n,1,0))}function ka(n){for(;n===Tc;)Tc=Ao[--Ro],Ao[Ro]=null,Ol=Ao[--Ro],Ao[Ro]=null;for(;n===oi;)oi=mr[--kr],mr[kr]=null,da=mr[--kr],mr[kr]=null,$r=mr[--kr],mr[kr]=null}function ha(n,r){mr[kr++]=$r,mr[kr++]=da,mr[kr++]=oi,$r=r.id,da=r.overflow,oi=n}var us=null,ln=null,en=!1,pr=null,Nn=!1,fa=Error(a(519));function Cs(n){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gr(jr(r,n)),fa}function As(n){var r=n.stateNode,l=n.type,d=n.memoizedProps;switch(r[ft]=n,r[Tt]=d,l){case"dialog":on("cancel",r),on("close",r);break;case"iframe":case"object":case"embed":on("load",r);break;case"video":case"audio":for(l=0;l<Yu.length;l++)on(Yu[l],r);break;case"source":on("error",r);break;case"img":case"image":case"link":on("error",r),on("load",r);break;case"details":on("toggle",r);break;case"input":on("invalid",r),lc(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":on("invalid",r);break;case"textarea":on("invalid",r),Ka(r,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||d.suppressHydrationWarning===!0||v1(r.textContent,l)?(d.popover!=null&&(on("beforetoggle",r),on("toggle",r)),d.onScroll!=null&&on("scroll",r),d.onScrollEnd!=null&&on("scrollend",r),d.onClick!=null&&(r.onclick=zr),r=!0):r=!1,r||Cs(n,!0)}function Do(n){for(us=n.return;us;)switch(us.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:us=us.return}}function Ui(n){if(n!==us)return!1;if(!en)return Do(n),en=!0,!1;var r=n.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Op(n.type,n.memoizedProps)),l=!l),l&&ln&&Cs(n),Do(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));ln=j1(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));ln=j1(n)}else r===27?(r=ln,$o(n.type)?(n=Bp,Bp=null,ln=n):ln=r):ln=us?ya(n.stateNode.nextSibling):null;return!0}function Bi(){ln=us=null,en=!1}function li(){var n=pr;return n!==null&&(Or===null?Or=n:Or.push.apply(Or,n),pr=null),n}function Gr(n){pr===null?pr=[n]:pr.push(n)}var Ru=Q(null),zi=null,Ca=null;function ci(n,r,l){ze(Ru,r._currentValue),r._currentValue=l}function Aa(n){n._currentValue=Ru.current,de(Ru)}function Du(n,r,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===l)break;n=n.return}}function Mu(n,r,l,d){var v=n.child;for(v!==null&&(v.return=n);v!==null;){var w=v.dependencies;if(w!==null){var k=v.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=v;for(var te=0;te<r.length;te++)if(U.context===r[te]){w.lanes|=l,U=w.alternate,U!==null&&(U.lanes|=l),Du(w.return,l,n),d||(k=null);break e}w=U.next}}else if(v.tag===18){if(k=v.return,k===null)throw Error(a(341));k.lanes|=l,w=k.alternate,w!==null&&(w.lanes|=l),Du(k,l,n),k=null}else k=v.child;if(k!==null)k.return=v;else for(k=v;k!==null;){if(k===n){k=null;break}if(v=k.sibling,v!==null){v.return=k.return,k=v;break}k=k.return}v=k}}function Mo(n,r,l,d){n=null;for(var v=r,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var k=v.alternate;if(k===null)throw Error(a(387));if(k=k.memoizedProps,k!==null){var U=v.type;er(v.pendingProps.value,k.value)||(n!==null?n.push(U):n=[U])}}else if(v===ue.current){if(k=v.alternate,k===null)throw Error(a(387));k.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(n!==null?n.push(ed):n=[ed])}v=v.return}n!==null&&Mu(r,n,l,d),r.flags|=262144}function Pl(n){for(n=n.firstContext;n!==null;){if(!er(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Fi(n){zi=n,Ca=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function vs(n){return ph(zi,n)}function Ll(n,r){return zi===null&&Fi(n),ph(n,r)}function ph(n,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Ca===null){if(n===null)throw Error(a(308));Ca=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Ca=Ca.next=r;return l}var gh=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(l,d){n.push(d)}};this.abort=function(){r.aborted=!0,n.forEach(function(l){return l()})}},Ec=s.unstable_scheduleCallback,ma=s.unstable_NormalPriority,rs={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Iu(){return{controller:new gh,data:new Map,refCount:0}}function Vl(n){n.refCount--,n.refCount===0&&Ec(ma,function(){n.controller.abort()})}var Io=null,Nc=0,Oo=0,qi=null;function ui(n,r){if(Io===null){var l=Io=[];Nc=0,Oo=Np(),qi={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Nc++,r.then(Po,Po),r}function Po(){if(--Nc===0&&Io!==null){qi!==null&&(qi.status="fulfilled");var n=Io;Io=null,Oo=0,qi=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function yh(n,r){var l=[],d={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return n.then(function(){d.status="fulfilled",d.value=r;for(var v=0;v<l.length;v++)(0,l[v])(r)},function(v){for(d.status="rejected",d.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),d}var g=ee.S;ee.S=function(n,r){F0=We(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&ui(n,r),g!==null&&g(n,r)};var x=Q(null);function h(){var n=x.current;return n!==null?n:zn.pooledCache}function y(n,r){r===null?ze(x,x.current):ze(x,r.pool)}function _(){var n=h();return n===null?null:{parent:rs._currentValue,pool:n}}var S=Error(a(460)),N=Error(a(474)),A=Error(a(542)),D={then:function(){}};function M(n){return n=n.status,n==="fulfilled"||n==="rejected"}function z(n,r,l){switch(l=n[l],l===void 0?n.push(r):l!==r&&(r.then(zr,zr),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Re(n),n;default:if(typeof r.status=="string")r.then(zr,zr);else{if(n=zn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=r,n.status="pending",n.then(function(d){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=d}},function(d){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Re(n),n}throw re=r,S}}function X(n){try{var r=n._init;return r(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(re=l,S):l}}var re=null;function ce(){if(re===null)throw Error(a(459));var n=re;return re=null,n}function Re(n){if(n===S||n===A)throw Error(a(483))}var oe=null,Ne=0;function Ue(n){var r=Ne;return Ne+=1,oe===null&&(oe=[]),z(oe,n,r)}function qe(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function gt(n,r){throw r.$$typeof===C?Error(a(525)):(n=Object.prototype.toString.call(r),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function ht(n){function r(pe,le){if(n){var Te=pe.deletions;Te===null?(pe.deletions=[le],pe.flags|=16):Te.push(le)}}function l(pe,le){if(!n)return null;for(;le!==null;)r(pe,le),le=le.sibling;return null}function d(pe){for(var le=new Map;pe!==null;)pe.key!==null?le.set(pe.key,pe):le.set(pe.index,pe),pe=pe.sibling;return le}function v(pe,le){return pe=ua(pe,le),pe.index=0,pe.sibling=null,pe}function w(pe,le,Te){return pe.index=Te,n?(Te=pe.alternate,Te!==null?(Te=Te.index,Te<le?(pe.flags|=67108866,le):Te):(pe.flags|=67108866,le)):(pe.flags|=1048576,le)}function k(pe){return n&&pe.alternate===null&&(pe.flags|=67108866),pe}function U(pe,le,Te,$e){return le===null||le.tag!==6?(le=Cu(Te,pe.mode,$e),le.return=pe,le):(le=v(le,Te),le.return=pe,le)}function te(pe,le,Te,$e){var kt=Te.type;return kt===V?He(pe,le,Te.props.children,$e,Te.key):le!==null&&(le.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===B&&X(kt)===le.type)?(le=v(le,Te.props),qe(le,Te),le.return=pe,le):(le=Ml(Te.type,Te.key,Te.props,null,pe.mode,$e),qe(le,Te),le.return=pe,le)}function Ee(pe,le,Te,$e){return le===null||le.tag!==4||le.stateNode.containerInfo!==Te.containerInfo||le.stateNode.implementation!==Te.implementation?(le=Sc(Te,pe.mode,$e),le.return=pe,le):(le=v(le,Te.children||[]),le.return=pe,le)}function He(pe,le,Te,$e,kt){return le===null||le.tag!==7?(le=ii(Te,pe.mode,$e,kt),le.return=pe,le):(le=v(le,Te),le.return=pe,le)}function Ke(pe,le,Te){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=Cu(""+le,pe.mode,Te),le.return=pe,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case L:return Te=Ml(le.type,le.key,le.props,null,pe.mode,Te),qe(Te,le),Te.return=pe,Te;case P:return le=Sc(le,pe.mode,Te),le.return=pe,le;case B:return le=X(le),Ke(pe,le,Te)}if(Oe(le)||Z(le))return le=ii(le,pe.mode,Te,null),le.return=pe,le;if(typeof le.then=="function")return Ke(pe,Ue(le),Te);if(le.$$typeof===se)return Ke(pe,Ll(pe,le),Te);gt(pe,le)}return null}function je(pe,le,Te,$e){var kt=le!==null?le.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return kt!==null?null:U(pe,le,""+Te,$e);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case L:return Te.key===kt?te(pe,le,Te,$e):null;case P:return Te.key===kt?Ee(pe,le,Te,$e):null;case B:return Te=X(Te),je(pe,le,Te,$e)}if(Oe(Te)||Z(Te))return kt!==null?null:He(pe,le,Te,$e,null);if(typeof Te.then=="function")return je(pe,le,Ue(Te),$e);if(Te.$$typeof===se)return je(pe,le,Ll(pe,Te),$e);gt(pe,Te)}return null}function Ie(pe,le,Te,$e,kt){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return pe=pe.get(Te)||null,U(le,pe,""+$e,kt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case L:return pe=pe.get($e.key===null?Te:$e.key)||null,te(le,pe,$e,kt);case P:return pe=pe.get($e.key===null?Te:$e.key)||null,Ee(le,pe,$e,kt);case B:return $e=X($e),Ie(pe,le,Te,$e,kt)}if(Oe($e)||Z($e))return pe=pe.get(Te)||null,He(le,pe,$e,kt,null);if(typeof $e.then=="function")return Ie(pe,le,Te,Ue($e),kt);if($e.$$typeof===se)return Ie(pe,le,Te,Ll(le,$e),kt);gt(le,$e)}return null}function bt(pe,le,Te,$e){for(var kt=null,wn=null,St=le,Zt=le=0,un=null;St!==null&&Zt<Te.length;Zt++){St.index>Zt?(un=St,St=null):un=St.sibling;var Sn=je(pe,St,Te[Zt],$e);if(Sn===null){St===null&&(St=un);break}n&&St&&Sn.alternate===null&&r(pe,St),le=w(Sn,le,Zt),wn===null?kt=Sn:wn.sibling=Sn,wn=Sn,St=un}if(Zt===Te.length)return l(pe,St),en&&Cr(pe,Zt),kt;if(St===null){for(;Zt<Te.length;Zt++)St=Ke(pe,Te[Zt],$e),St!==null&&(le=w(St,le,Zt),wn===null?kt=St:wn.sibling=St,wn=St);return en&&Cr(pe,Zt),kt}for(St=d(St);Zt<Te.length;Zt++)un=Ie(St,pe,Zt,Te[Zt],$e),un!==null&&(n&&un.alternate!==null&&St.delete(un.key===null?Zt:un.key),le=w(un,le,Zt),wn===null?kt=un:wn.sibling=un,wn=un);return n&&St.forEach(function(Qo){return r(pe,Qo)}),en&&Cr(pe,Zt),kt}function Pt(pe,le,Te,$e){if(Te==null)throw Error(a(151));for(var kt=null,wn=null,St=le,Zt=le=0,un=null,Sn=Te.next();St!==null&&!Sn.done;Zt++,Sn=Te.next()){St.index>Zt?(un=St,St=null):un=St.sibling;var Qo=je(pe,St,Sn.value,$e);if(Qo===null){St===null&&(St=un);break}n&&St&&Qo.alternate===null&&r(pe,St),le=w(Qo,le,Zt),wn===null?kt=Qo:wn.sibling=Qo,wn=Qo,St=un}if(Sn.done)return l(pe,St),en&&Cr(pe,Zt),kt;if(St===null){for(;!Sn.done;Zt++,Sn=Te.next())Sn=Ke(pe,Sn.value,$e),Sn!==null&&(le=w(Sn,le,Zt),wn===null?kt=Sn:wn.sibling=Sn,wn=Sn);return en&&Cr(pe,Zt),kt}for(St=d(St);!Sn.done;Zt++,Sn=Te.next())Sn=Ie(St,pe,Zt,Sn.value,$e),Sn!==null&&(n&&Sn.alternate!==null&&St.delete(Sn.key===null?Zt:Sn.key),le=w(Sn,le,Zt),wn===null?kt=Sn:wn.sibling=Sn,wn=Sn);return n&&St.forEach(function(LT){return r(pe,LT)}),en&&Cr(pe,Zt),kt}function Vn(pe,le,Te,$e){if(typeof Te=="object"&&Te!==null&&Te.type===V&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case L:e:{for(var kt=Te.key;le!==null;){if(le.key===kt){if(kt=Te.type,kt===V){if(le.tag===7){l(pe,le.sibling),$e=v(le,Te.props.children),$e.return=pe,pe=$e;break e}}else if(le.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===B&&X(kt)===le.type){l(pe,le.sibling),$e=v(le,Te.props),qe($e,Te),$e.return=pe,pe=$e;break e}l(pe,le);break}else r(pe,le);le=le.sibling}Te.type===V?($e=ii(Te.props.children,pe.mode,$e,Te.key),$e.return=pe,pe=$e):($e=Ml(Te.type,Te.key,Te.props,null,pe.mode,$e),qe($e,Te),$e.return=pe,pe=$e)}return k(pe);case P:e:{for(kt=Te.key;le!==null;){if(le.key===kt)if(le.tag===4&&le.stateNode.containerInfo===Te.containerInfo&&le.stateNode.implementation===Te.implementation){l(pe,le.sibling),$e=v(le,Te.children||[]),$e.return=pe,pe=$e;break e}else{l(pe,le);break}else r(pe,le);le=le.sibling}$e=Sc(Te,pe.mode,$e),$e.return=pe,pe=$e}return k(pe);case B:return Te=X(Te),Vn(pe,le,Te,$e)}if(Oe(Te))return bt(pe,le,Te,$e);if(Z(Te)){if(kt=Z(Te),typeof kt!="function")throw Error(a(150));return Te=kt.call(Te),Pt(pe,le,Te,$e)}if(typeof Te.then=="function")return Vn(pe,le,Ue(Te),$e);if(Te.$$typeof===se)return Vn(pe,le,Ll(pe,Te),$e);gt(pe,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint"?(Te=""+Te,le!==null&&le.tag===6?(l(pe,le.sibling),$e=v(le,Te),$e.return=pe,pe=$e):(l(pe,le),$e=Cu(Te,pe.mode,$e),$e.return=pe,pe=$e),k(pe)):l(pe,le)}return function(pe,le,Te,$e){try{Ne=0;var kt=Vn(pe,le,Te,$e);return oe=null,kt}catch(St){if(St===S||St===A)throw St;var wn=ks(29,St,null,pe.mode);return wn.lanes=$e,wn.return=pe,wn}}}var Nt=ht(!0),Xt=ht(!1),Ot=!1;function tn(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tr(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function bs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function On(n,r,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(jn&2)!==0){var v=d.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),d.pending=r,r=_c(n),ku(n,null,l),r}return xc(n,d,r,l),_c(n)}function Ra(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var d=r.lanes;d&=n.pendingLanes,l|=d,r.lanes=l,qn(n,l)}}function Wr(n,r){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var v=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var k={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?v=w=k:w=w.next=k,l=l.next}while(l!==null);w===null?v=w=r:w=w.next=r}else v=w=r;l={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}var pa=!1;function Ar(){if(pa){var n=qi;if(n!==null)throw n}}function gr(n,r,l,d){pa=!1;var v=n.updateQueue;Ot=!1;var w=v.firstBaseUpdate,k=v.lastBaseUpdate,U=v.shared.pending;if(U!==null){v.shared.pending=null;var te=U,Ee=te.next;te.next=null,k===null?w=Ee:k.next=Ee,k=te;var He=n.alternate;He!==null&&(He=He.updateQueue,U=He.lastBaseUpdate,U!==k&&(U===null?He.firstBaseUpdate=Ee:U.next=Ee,He.lastBaseUpdate=te))}if(w!==null){var Ke=v.baseState;k=0,He=Ee=te=null,U=w;do{var je=U.lane&-536870913,Ie=je!==U.lane;if(Ie?(cn&je)===je:(d&je)===je){je!==0&&je===Oo&&(pa=!0),He!==null&&(He=He.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var bt=n,Pt=U;je=r;var Vn=l;switch(Pt.tag){case 1:if(bt=Pt.payload,typeof bt=="function"){Ke=bt.call(Vn,Ke,je);break e}Ke=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Pt.payload,je=typeof bt=="function"?bt.call(Vn,Ke,je):bt,je==null)break e;Ke=E({},Ke,je);break e;case 2:Ot=!0}}je=U.callback,je!==null&&(n.flags|=64,Ie&&(n.flags|=8192),Ie=v.callbacks,Ie===null?v.callbacks=[je]:Ie.push(je))}else Ie={lane:je,tag:U.tag,payload:U.payload,callback:U.callback,next:null},He===null?(Ee=He=Ie,te=Ke):He=He.next=Ie,k|=je;if(U=U.next,U===null){if(U=v.shared.pending,U===null)break;Ie=U,U=Ie.next,Ie.next=null,v.lastBaseUpdate=Ie,v.shared.pending=null}}while(!0);He===null&&(te=Ke),v.baseState=te,v.firstBaseUpdate=Ee,v.lastBaseUpdate=He,w===null&&(v.shared.lanes=0),Bo|=k,n.lanes=k,n.memoizedState=Ke}}function Rn(n,r){if(typeof n!="function")throw Error(a(191,n));n.call(r)}function Rr(n,r){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Rn(l[n],r)}var ga=Q(null),Kr=Q(0);function Yr(n,r){n=Ji,ze(Kr,n),ze(ga,r),Ji=n|r.baseLanes}function pn(){ze(Kr,Ji),ze(ga,ga.current)}function ds(){Ji=Kr.current,de(ga),de(Kr)}var yr=Q(null),vr=null;function Da(n){var r=n.alternate;ze(hs,hs.current&1),ze(yr,n),vr===null&&(r===null||ga.current!==null||r.memoizedState!==null)&&(vr=n)}function Dm(n){ze(hs,hs.current),ze(yr,n),vr===null&&(vr=n)}function gv(n){n.tag===22?(ze(hs,hs.current),ze(yr,n),vr===null&&(vr=n)):Lo()}function Lo(){ze(hs,hs.current),ze(yr,yr.current)}function Qr(n){de(yr),vr===n&&(vr=null),de(hs)}var hs=Q(0);function vh(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Vp(l)||Up(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Hi=0,Jt=null,Pn=null,xs=null,bh=!1,jc=!1,Ul=!1,xh=0,Ou=0,kc=null,jS=0;function as(){throw Error(a(321))}function Mm(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!er(n[l],r[l]))return!1;return!0}function Im(n,r,l,d,v,w){return Hi=w,Jt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=n===null||n.memoizedState===null?Zv:Ym,Ul=!1,w=l(d,v),Ul=!1,jc&&(w=vv(r,l,d,v)),yv(n),w}function yv(n){ee.H=Vu;var r=Pn!==null&&Pn.next!==null;if(Hi=0,xs=Pn=Jt=null,bh=!1,Ou=0,kc=null,r)throw Error(a(300));n===null||_s||(n=n.dependencies,n!==null&&Pl(n)&&(_s=!0))}function vv(n,r,l,d){Jt=n;var v=0;do{if(jc&&(kc=null),Ou=0,jc=!1,25<=v)throw Error(a(301));if(v+=1,xs=Pn=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ee.H=e0,w=r(l,d)}while(jc);return w}function kS(){var n=ee.H,r=n.useState()[0];return r=typeof r.then=="function"?Pu(r):r,n=n.useState()[0],(Pn!==null?Pn.memoizedState:null)!==n&&(Jt.flags|=1024),r}function Om(){var n=xh!==0;return xh=0,n}function Pm(n,r,l){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~l}function Lm(n){if(bh){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}bh=!1}Hi=0,xs=Pn=Jt=null,jc=!1,Ou=xh=0,kc=null}function br(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xs===null?Jt.memoizedState=xs=n:xs=xs.next=n,xs}function fs(){if(Pn===null){var n=Jt.alternate;n=n!==null?n.memoizedState:null}else n=Pn.next;var r=xs===null?Jt.memoizedState:xs.next;if(r!==null)xs=r,Pn=n;else{if(n===null)throw Jt.alternate===null?Error(a(467)):Error(a(310));Pn=n,n={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},xs===null?Jt.memoizedState=xs=n:xs=xs.next=n}return xs}function _h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pu(n){var r=Ou;return Ou+=1,kc===null&&(kc=[]),n=z(kc,n,r),r=Jt,(xs===null?r.memoizedState:xs.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?Zv:Ym),n}function wh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Pu(n);if(n.$$typeof===se)return vs(n)}throw Error(a(438,String(n)))}function Vm(n){var r=null,l=Jt.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var d=Jt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=_h(),Jt.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(n),d=0;d<n;d++)l[d]=J;return r.index++,l}function $i(n,r){return typeof r=="function"?r(n):r}function Sh(n){var r=fs();return Um(r,Pn,n)}function Um(n,r,l){var d=n.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=l;var v=n.baseQueue,w=d.pending;if(w!==null){if(v!==null){var k=v.next;v.next=w.next,w.next=k}r.baseQueue=v=w,d.pending=null}if(w=n.baseState,v===null)n.memoizedState=w;else{r=v.next;var U=k=null,te=null,Ee=r,He=!1;do{var Ke=Ee.lane&-536870913;if(Ke!==Ee.lane?(cn&Ke)===Ke:(Hi&Ke)===Ke){var je=Ee.revertLane;if(je===0)te!==null&&(te=te.next={lane:0,revertLane:0,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),Ke===Oo&&(He=!0);else if((Hi&je)===je){Ee=Ee.next,je===Oo&&(He=!0);continue}else Ke={lane:0,revertLane:Ee.revertLane,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},te===null?(U=te=Ke,k=w):te=te.next=Ke,Jt.lanes|=je,Bo|=je;Ke=Ee.action,Ul&&l(w,Ke),w=Ee.hasEagerState?Ee.eagerState:l(w,Ke)}else je={lane:Ke,revertLane:Ee.revertLane,gesture:Ee.gesture,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},te===null?(U=te=je,k=w):te=te.next=je,Jt.lanes|=Ke,Bo|=Ke;Ee=Ee.next}while(Ee!==null&&Ee!==r);if(te===null?k=w:te.next=U,!er(w,n.memoizedState)&&(_s=!0,He&&(l=qi,l!==null)))throw l;n.memoizedState=w,n.baseState=k,n.baseQueue=te,d.lastRenderedState=w}return v===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function Bm(n){var r=fs(),l=r.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var d=l.dispatch,v=l.pending,w=r.memoizedState;if(v!==null){l.pending=null;var k=v=v.next;do w=n(w,k.action),k=k.next;while(k!==v);er(w,r.memoizedState)||(_s=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),l.lastRenderedState=w}return[w,d]}function bv(n,r,l){var d=Jt,v=fs(),w=en;if(w){if(l===void 0)throw Error(a(407));l=l()}else l=r();var k=!er((Pn||v).memoizedState,l);if(k&&(v.memoizedState=l,_s=!0),v=v.queue,qm(wv.bind(null,d,v,n),[n]),v.getSnapshot!==r||k||xs!==null&&xs.memoizedState.tag&1){if(d.flags|=2048,Cc(9,{destroy:void 0},_v.bind(null,d,v,l,r),null),zn===null)throw Error(a(349));w||(Hi&127)!==0||xv(d,r,l)}return l}function xv(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=Jt.updateQueue,r===null?(r=_h(),Jt.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function _v(n,r,l,d){r.value=l,r.getSnapshot=d,Sv(r)&&Tv(n)}function wv(n,r,l){return l(function(){Sv(r)&&Tv(n)})}function Sv(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!er(n,l)}catch{return!0}}function Tv(n){var r=ai(n,2);r!==null&&Pr(r,n,2)}function zm(n){var r=br();if(typeof n=="function"){var l=n;if(n=l(),Ul){tt(!0);try{l()}finally{tt(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:n},r}function Ev(n,r,l,d){return n.baseState=l,Um(n,Pn,typeof d=="function"?d:$i)}function CS(n,r,l,d,v){if(Nh(n))throw Error(a(485));if(n=r.action,n!==null){var w={payload:v,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){w.listeners.push(k)}};ee.T!==null?l(!0):w.isTransition=!1,d(w),l=r.pending,l===null?(w.next=r.pending=w,Nv(r,w)):(w.next=l.next,r.pending=l.next=w)}}function Nv(n,r){var l=r.action,d=r.payload,v=n.state;if(r.isTransition){var w=ee.T,k={};ee.T=k;try{var U=l(v,d),te=ee.S;te!==null&&te(k,U),jv(n,r,U)}catch(Ee){Fm(n,r,Ee)}finally{w!==null&&k.types!==null&&(w.types=k.types),ee.T=w}}else try{w=l(v,d),jv(n,r,w)}catch(Ee){Fm(n,r,Ee)}}function jv(n,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){kv(n,r,d)},function(d){return Fm(n,r,d)}):kv(n,r,l)}function kv(n,r,l){r.status="fulfilled",r.value=l,Cv(r),n.state=l,r=n.pending,r!==null&&(l=r.next,l===r?n.pending=null:(l=l.next,r.next=l,Nv(n,l)))}function Fm(n,r,l){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=l,Cv(r),r=r.next;while(r!==d)}n.action=null}function Cv(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Av(n,r){return r}function Rv(n,r){if(en){var l=zn.formState;if(l!==null){e:{var d=Jt;if(en){if(ln){t:{for(var v=ln,w=Nn;v.nodeType!==8;){if(!w){v=null;break t}if(v=ya(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){ln=ya(v.nextSibling),d=v.data==="F!";break e}}Cs(d)}d=!1}d&&(r=l[0])}}return l=br(),l.memoizedState=l.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Av,lastRenderedState:r},l.queue=d,l=Qv.bind(null,Jt,d),d.dispatch=l,d=zm(!1),w=Km.bind(null,Jt,!1,d.queue),d=br(),v={state:r,dispatch:null,action:n,pending:null},d.queue=v,l=CS.bind(null,Jt,v,w,l),v.dispatch=l,d.memoizedState=n,[r,l,!1]}function Dv(n){var r=fs();return Mv(r,Pn,n)}function Mv(n,r,l){if(r=Um(n,r,Av)[0],n=Sh($i)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Pu(r)}catch(k){throw k===S?A:k}else d=r;r=fs();var v=r.queue,w=v.dispatch;return l!==r.memoizedState&&(Jt.flags|=2048,Cc(9,{destroy:void 0},AS.bind(null,v,l),null)),[d,w,n]}function AS(n,r){n.action=r}function Iv(n){var r=fs(),l=Pn;if(l!==null)return Mv(r,l,n);fs(),r=r.memoizedState,l=fs();var d=l.queue.dispatch;return l.memoizedState=n,[r,d,!1]}function Cc(n,r,l,d){return n={tag:n,create:l,deps:d,inst:r,next:null},r=Jt.updateQueue,r===null&&(r=_h(),Jt.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,r.lastEffect=n),n}function Ov(){return fs().memoizedState}function Th(n,r,l,d){var v=br();Jt.flags|=n,v.memoizedState=Cc(1|r,{destroy:void 0},l,d===void 0?null:d)}function Eh(n,r,l,d){var v=fs();d=d===void 0?null:d;var w=v.memoizedState.inst;Pn!==null&&d!==null&&Mm(d,Pn.memoizedState.deps)?v.memoizedState=Cc(r,w,l,d):(Jt.flags|=n,v.memoizedState=Cc(1|r,w,l,d))}function Pv(n,r){Th(8390656,8,n,r)}function qm(n,r){Eh(2048,8,n,r)}function RS(n){Jt.flags|=4;var r=Jt.updateQueue;if(r===null)r=_h(),Jt.updateQueue=r,r.events=[n];else{var l=r.events;l===null?r.events=[n]:l.push(n)}}function Lv(n){var r=fs().memoizedState;return RS({ref:r,nextImpl:n}),function(){if((jn&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function Vv(n,r){return Eh(4,2,n,r)}function Uv(n,r){return Eh(4,4,n,r)}function Bv(n,r){if(typeof r=="function"){n=n();var l=r(n);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function zv(n,r,l){l=l!=null?l.concat([n]):null,Eh(4,4,Bv.bind(null,r,n),l)}function Hm(){}function Fv(n,r){var l=fs();r=r===void 0?null:r;var d=l.memoizedState;return r!==null&&Mm(r,d[1])?d[0]:(l.memoizedState=[n,r],n)}function qv(n,r){var l=fs();r=r===void 0?null:r;var d=l.memoizedState;if(r!==null&&Mm(r,d[1]))return d[0];if(d=n(),Ul){tt(!0);try{n()}finally{tt(!1)}}return l.memoizedState=[d,r],d}function $m(n,r,l){return l===void 0||(Hi&1073741824)!==0&&(cn&261930)===0?n.memoizedState=r:(n.memoizedState=l,n=H0(),Jt.lanes|=n,Bo|=n,l)}function Hv(n,r,l,d){return er(l,r)?l:ga.current!==null?(n=$m(n,l,d),er(n,r)||(_s=!0),n):(Hi&42)===0||(Hi&1073741824)!==0&&(cn&261930)===0?(_s=!0,n.memoizedState=l):(n=H0(),Jt.lanes|=n,Bo|=n,r)}function $v(n,r,l,d,v){var w=_e.p;_e.p=w!==0&&8>w?w:8;var k=ee.T,U={};ee.T=U,Km(n,!1,r,l);try{var te=v(),Ee=ee.S;if(Ee!==null&&Ee(U,te),te!==null&&typeof te=="object"&&typeof te.then=="function"){var He=yh(te,d);Lu(n,r,He,Zr(n))}else Lu(n,r,d,Zr(n))}catch(Ke){Lu(n,r,{then:function(){},status:"rejected",reason:Ke},Zr())}finally{_e.p=w,k!==null&&U.types!==null&&(k.types=U.types),ee.T=k}}function DS(){}function Gm(n,r,l,d){if(n.tag!==5)throw Error(a(476));var v=Gv(n).queue;$v(n,v,r,Be,l===null?DS:function(){return Wv(n),l(d)})}function Gv(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Be,baseState:Be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:Be},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:l},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Wv(n){var r=Gv(n);r.next===null&&(r=n.alternate.memoizedState),Lu(n,r.next.queue,{},Zr())}function Wm(){return vs(ed)}function Kv(){return fs().memoizedState}function Yv(){return fs().memoizedState}function MS(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var l=Zr();n=bs(l);var d=On(r,n,l);d!==null&&(Pr(d,r,l),Ra(d,r,l)),r={cache:Iu()},n.payload=r;return}r=r.return}}function IS(n,r,l){var d=Zr();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Nh(n)?Xv(r,l):(l=ju(n,r,l,d),l!==null&&(Pr(l,n,d),Jv(l,r,d)))}function Qv(n,r,l){var d=Zr();Lu(n,r,l,d)}function Lu(n,r,l,d){var v={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Nh(n))Xv(r,v);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var k=r.lastRenderedState,U=w(k,l);if(v.hasEagerState=!0,v.eagerState=U,er(U,k))return xc(n,r,v,0),zn===null&&Dl(),!1}catch{}if(l=ju(n,r,v,d),l!==null)return Pr(l,n,d),Jv(l,r,d),!0}return!1}function Km(n,r,l,d){if(d={lane:2,revertLane:Np(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Nh(n)){if(r)throw Error(a(479))}else r=ju(n,l,d,2),r!==null&&Pr(r,n,2)}function Nh(n){var r=n.alternate;return n===Jt||r!==null&&r===Jt}function Xv(n,r){jc=bh=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function Jv(n,r,l){if((l&4194048)!==0){var d=r.lanes;d&=n.pendingLanes,l|=d,r.lanes=l,qn(n,l)}}var Vu={readContext:vs,use:wh,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useLayoutEffect:as,useInsertionEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useSyncExternalStore:as,useId:as,useHostTransitionStatus:as,useFormState:as,useActionState:as,useOptimistic:as,useMemoCache:as,useCacheRefresh:as};Vu.useEffectEvent=as;var Zv={readContext:vs,use:wh,useCallback:function(n,r){return br().memoizedState=[n,r===void 0?null:r],n},useContext:vs,useEffect:Pv,useImperativeHandle:function(n,r,l){l=l!=null?l.concat([n]):null,Th(4194308,4,Bv.bind(null,r,n),l)},useLayoutEffect:function(n,r){return Th(4194308,4,n,r)},useInsertionEffect:function(n,r){Th(4,2,n,r)},useMemo:function(n,r){var l=br();r=r===void 0?null:r;var d=n();if(Ul){tt(!0);try{n()}finally{tt(!1)}}return l.memoizedState=[d,r],d},useReducer:function(n,r,l){var d=br();if(l!==void 0){var v=l(r);if(Ul){tt(!0);try{l(r)}finally{tt(!1)}}}else v=r;return d.memoizedState=d.baseState=v,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:v},d.queue=n,n=n.dispatch=IS.bind(null,Jt,n),[d.memoizedState,n]},useRef:function(n){var r=br();return n={current:n},r.memoizedState=n},useState:function(n){n=zm(n);var r=n.queue,l=Qv.bind(null,Jt,r);return r.dispatch=l,[n.memoizedState,l]},useDebugValue:Hm,useDeferredValue:function(n,r){var l=br();return $m(l,n,r)},useTransition:function(){var n=zm(!1);return n=$v.bind(null,Jt,n.queue,!0,!1),br().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,l){var d=Jt,v=br();if(en){if(l===void 0)throw Error(a(407));l=l()}else{if(l=r(),zn===null)throw Error(a(349));(cn&127)!==0||xv(d,r,l)}v.memoizedState=l;var w={value:l,getSnapshot:r};return v.queue=w,Pv(wv.bind(null,d,w,n),[n]),d.flags|=2048,Cc(9,{destroy:void 0},_v.bind(null,d,w,l,r),null),l},useId:function(){var n=br(),r=zn.identifierPrefix;if(en){var l=da,d=$r;l=(d&~(1<<32-it(d)-1)).toString(32)+l,r="_"+r+"R_"+l,l=xh++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=jS++,r="_"+r+"r_"+l.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Wm,useFormState:Rv,useActionState:Rv,useOptimistic:function(n){var r=br();r.memoizedState=r.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Km.bind(null,Jt,!0,l),l.dispatch=r,[n,r]},useMemoCache:Vm,useCacheRefresh:function(){return br().memoizedState=MS.bind(null,Jt)},useEffectEvent:function(n){var r=br(),l={impl:n};return r.memoizedState=l,function(){if((jn&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Ym={readContext:vs,use:wh,useCallback:Fv,useContext:vs,useEffect:qm,useImperativeHandle:zv,useInsertionEffect:Vv,useLayoutEffect:Uv,useMemo:qv,useReducer:Sh,useRef:Ov,useState:function(){return Sh($i)},useDebugValue:Hm,useDeferredValue:function(n,r){var l=fs();return Hv(l,Pn.memoizedState,n,r)},useTransition:function(){var n=Sh($i)[0],r=fs().memoizedState;return[typeof n=="boolean"?n:Pu(n),r]},useSyncExternalStore:bv,useId:Kv,useHostTransitionStatus:Wm,useFormState:Dv,useActionState:Dv,useOptimistic:function(n,r){var l=fs();return Ev(l,Pn,n,r)},useMemoCache:Vm,useCacheRefresh:Yv};Ym.useEffectEvent=Lv;var e0={readContext:vs,use:wh,useCallback:Fv,useContext:vs,useEffect:qm,useImperativeHandle:zv,useInsertionEffect:Vv,useLayoutEffect:Uv,useMemo:qv,useReducer:Bm,useRef:Ov,useState:function(){return Bm($i)},useDebugValue:Hm,useDeferredValue:function(n,r){var l=fs();return Pn===null?$m(l,n,r):Hv(l,Pn.memoizedState,n,r)},useTransition:function(){var n=Bm($i)[0],r=fs().memoizedState;return[typeof n=="boolean"?n:Pu(n),r]},useSyncExternalStore:bv,useId:Kv,useHostTransitionStatus:Wm,useFormState:Iv,useActionState:Iv,useOptimistic:function(n,r){var l=fs();return Pn!==null?Ev(l,Pn,n,r):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:Vm,useCacheRefresh:Yv};e0.useEffectEvent=Lv;function Qm(n,r,l,d){r=n.memoizedState,l=l(d,r),l=l==null?r:E({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Xm={enqueueSetState:function(n,r,l){n=n._reactInternals;var d=Zr(),v=bs(d);v.payload=r,l!=null&&(v.callback=l),r=On(n,v,d),r!==null&&(Pr(r,n,d),Ra(r,n,d))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var d=Zr(),v=bs(d);v.tag=1,v.payload=r,l!=null&&(v.callback=l),r=On(n,v,d),r!==null&&(Pr(r,n,d),Ra(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=Zr(),d=bs(l);d.tag=2,r!=null&&(d.callback=r),r=On(n,d,l),r!==null&&(Pr(r,n,l),Ra(r,n,l))}};function t0(n,r,l,d,v,w,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,w,k):r.prototype&&r.prototype.isPureReactComponent?!No(l,d)||!No(v,w):!0}function n0(n,r,l,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==n&&Xm.enqueueReplaceState(r,r.state,null)}function Bl(n,r){var l=r;if("ref"in r){l={};for(var d in r)d!=="ref"&&(l[d]=r[d])}if(n=n.defaultProps){l===r&&(l=E({},l));for(var v in n)l[v]===void 0&&(l[v]=n[v])}return l}function s0(n){bc(n)}function r0(n){console.error(n)}function a0(n){bc(n)}function jh(n,r){try{var l=n.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function i0(n,r,l){try{var d=n.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Jm(n,r,l){return l=bs(l),l.tag=3,l.payload={element:null},l.callback=function(){jh(n,r)},l}function o0(n){return n=bs(n),n.tag=3,n}function l0(n,r,l,d){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var w=d.value;n.payload=function(){return v(w)},n.callback=function(){i0(r,l,d)}}var k=l.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(n.callback=function(){i0(r,l,d),typeof v!="function"&&(zo===null?zo=new Set([this]):zo.add(this));var U=d.stack;this.componentDidCatch(d.value,{componentStack:U!==null?U:""})})}function OS(n,r,l,d,v){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=l.alternate,r!==null&&Mo(r,l,v,!0),l=yr.current,l!==null){switch(l.tag){case 31:case 13:return vr===null?Uh():l.alternate===null&&is===0&&(is=3),l.flags&=-257,l.flags|=65536,l.lanes=v,d===D?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([d]):r.add(d),Sp(n,d,v)),!1;case 22:return l.flags|=65536,d===D?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([d]):l.add(d)),Sp(n,d,v)),!1}throw Error(a(435,l.tag))}return Sp(n,d,v),Uh(),!1}if(en)return r=yr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,d!==fa&&(n=Error(a(422),{cause:d}),Gr(jr(n,l)))):(d!==fa&&(r=Error(a(423),{cause:d}),Gr(jr(r,l))),n=n.current.alternate,n.flags|=65536,v&=-v,n.lanes|=v,d=jr(d,l),v=Jm(n.stateNode,d,v),Wr(n,v),is!==4&&(is=2)),!1;var w=Error(a(520),{cause:d});if(w=jr(w,l),Gu===null?Gu=[w]:Gu.push(w),is!==4&&(is=2),r===null)return!0;d=jr(d,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,n=v&-v,l.lanes|=n,n=Jm(l.stateNode,d,n),Wr(l,n),!1;case 1:if(r=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(zo===null||!zo.has(w))))return l.flags|=65536,v&=-v,l.lanes|=v,v=o0(v),l0(v,n,l,d),Wr(l,v),!1}l=l.return}while(l!==null);return!1}var Zm=Error(a(461)),_s=!1;function Hs(n,r,l,d){r.child=n===null?Xt(r,null,l,d):Nt(r,n.child,l,d)}function c0(n,r,l,d,v){l=l.render;var w=r.ref;if("ref"in d){var k={};for(var U in d)U!=="ref"&&(k[U]=d[U])}else k=d;return Fi(r),d=Im(n,r,l,k,w,v),U=Om(),n!==null&&!_s?(Pm(n,r,v),Gi(n,r,v)):(en&&U&&Au(r),r.flags|=1,Hs(n,r,d,v),r.child)}function u0(n,r,l,d,v){if(n===null){var w=l.type;return typeof w=="function"&&!Co(w)&&w.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=w,d0(n,r,w,d,v)):(n=Ml(l.type,null,d,r,r.mode,v),n.ref=r.ref,n.return=r,r.child=n)}if(w=n.child,!op(n,v)){var k=w.memoizedProps;if(l=l.compare,l=l!==null?l:No,l(k,d)&&n.ref===r.ref)return Gi(n,r,v)}return r.flags|=1,n=ua(w,d),n.ref=r.ref,n.return=r,r.child=n}function d0(n,r,l,d,v){if(n!==null){var w=n.memoizedProps;if(No(w,d)&&n.ref===r.ref)if(_s=!1,r.pendingProps=d=w,op(n,v))(n.flags&131072)!==0&&(_s=!0);else return r.lanes=n.lanes,Gi(n,r,v)}return ep(n,r,l,d,v)}function h0(n,r,l,d){var v=d.children,w=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(w=w!==null?w.baseLanes|l:l,n!==null){for(d=r.child=n.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~w}else d=0,r.child=null;return f0(n,r,w,l,d)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&y(r,w!==null?w.cachePool:null),w!==null?Yr(r,w):pn(),gv(r);else return d=r.lanes=536870912,f0(n,r,w!==null?w.baseLanes|l:l,l,d)}else w!==null?(y(r,w.cachePool),Yr(r,w),Lo(),r.memoizedState=null):(n!==null&&y(r,null),pn(),Lo());return Hs(n,r,v,l),r.child}function Uu(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function f0(n,r,l,d,v){var w=h();return w=w===null?null:{parent:rs._currentValue,pool:w},r.memoizedState={baseLanes:l,cachePool:w},n!==null&&y(r,null),pn(),gv(r),n!==null&&Mo(n,r,d,!0),r.childLanes=v,null}function kh(n,r){return r=Ah({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function m0(n,r,l){return Nt(r,n.child,null,l),n=kh(r,r.pendingProps),n.flags|=2,Qr(r),r.memoizedState=null,n}function PS(n,r,l){var d=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(en){if(d.mode==="hidden")return n=kh(r,d),r.lanes=536870912,Uu(null,n);if(Dm(r),(n=ln)?(n=N1(n,Nn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:oi!==null?{id:$r,overflow:da}:null,retryLane:536870912,hydrationErrors:null},l=Il(n),l.return=r,r.child=l,us=r,ln=null)):n=null,n===null)throw Cs(r);return r.lanes=536870912,null}return kh(r,d)}var w=n.memoizedState;if(w!==null){var k=w.dehydrated;if(Dm(r),v)if(r.flags&256)r.flags&=-257,r=m0(n,r,l);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(a(558));else if(_s||Mo(n,r,l,!1),v=(l&n.childLanes)!==0,_s||v){if(d=zn,d!==null&&(k=os(d,l),k!==0&&k!==w.retryLane))throw w.retryLane=k,ai(n,k),Pr(d,n,k),Zm;Uh(),r=m0(n,r,l)}else n=w.treeContext,ln=ya(k.nextSibling),us=r,en=!0,pr=null,Nn=!1,n!==null&&ha(r,n),r=kh(r,d),r.flags|=4096;return r}return n=ua(n.child,{mode:d.mode,children:d.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Ch(n,r){var l=r.ref;if(l===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(r.flags|=4194816)}}function ep(n,r,l,d,v){return Fi(r),l=Im(n,r,l,d,void 0,v),d=Om(),n!==null&&!_s?(Pm(n,r,v),Gi(n,r,v)):(en&&d&&Au(r),r.flags|=1,Hs(n,r,l,v),r.child)}function p0(n,r,l,d,v,w){return Fi(r),r.updateQueue=null,l=vv(r,d,l,v),yv(n),d=Om(),n!==null&&!_s?(Pm(n,r,w),Gi(n,r,w)):(en&&d&&Au(r),r.flags|=1,Hs(n,r,l,w),r.child)}function g0(n,r,l,d,v){if(Fi(r),r.stateNode===null){var w=Vi,k=l.contextType;typeof k=="object"&&k!==null&&(w=vs(k)),w=new l(d,w),r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Xm,r.stateNode=w,w._reactInternals=r,w=r.stateNode,w.props=d,w.state=r.memoizedState,w.refs={},tn(r),k=l.contextType,w.context=typeof k=="object"&&k!==null?vs(k):Vi,w.state=r.memoizedState,k=l.getDerivedStateFromProps,typeof k=="function"&&(Qm(r,l,k,d),w.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(k=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),k!==w.state&&Xm.enqueueReplaceState(w,w.state,null),gr(r,d,w,v),Ar(),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(n===null){w=r.stateNode;var U=r.memoizedProps,te=Bl(l,U);w.props=te;var Ee=w.context,He=l.contextType;k=Vi,typeof He=="object"&&He!==null&&(k=vs(He));var Ke=l.getDerivedStateFromProps;He=typeof Ke=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=r.pendingProps!==U,He||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||Ee!==k)&&n0(r,w,d,k),Ot=!1;var je=r.memoizedState;w.state=je,gr(r,d,w,v),Ar(),Ee=r.memoizedState,U||je!==Ee||Ot?(typeof Ke=="function"&&(Qm(r,l,Ke,d),Ee=r.memoizedState),(te=Ot||t0(r,l,te,d,je,Ee,k))?(He||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=Ee),w.props=d,w.state=Ee,w.context=k,d=te):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{w=r.stateNode,tr(n,r),k=r.memoizedProps,He=Bl(l,k),w.props=He,Ke=r.pendingProps,je=w.context,Ee=l.contextType,te=Vi,typeof Ee=="object"&&Ee!==null&&(te=vs(Ee)),U=l.getDerivedStateFromProps,(Ee=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==Ke||je!==te)&&n0(r,w,d,te),Ot=!1,je=r.memoizedState,w.state=je,gr(r,d,w,v),Ar();var Ie=r.memoizedState;k!==Ke||je!==Ie||Ot||n!==null&&n.dependencies!==null&&Pl(n.dependencies)?(typeof U=="function"&&(Qm(r,l,U,d),Ie=r.memoizedState),(He=Ot||t0(r,l,He,d,je,Ie,te)||n!==null&&n.dependencies!==null&&Pl(n.dependencies))?(Ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Ie,te),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Ie,te)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===n.memoizedProps&&je===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&je===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=Ie),w.props=d,w.state=Ie,w.context=te,d=He):(typeof w.componentDidUpdate!="function"||k===n.memoizedProps&&je===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&je===n.memoizedState||(r.flags|=1024),d=!1)}return w=d,Ch(n,r),d=(r.flags&128)!==0,w||d?(w=r.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:w.render(),r.flags|=1,n!==null&&d?(r.child=Nt(r,n.child,null,v),r.child=Nt(r,null,l,v)):Hs(n,r,l,v),r.memoizedState=w.state,n=r.child):n=Gi(n,r,v),n}function y0(n,r,l,d){return Bi(),r.flags|=256,Hs(n,r,l,d),r.child}var tp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function np(n){return{baseLanes:n,cachePool:_()}}function sp(n,r,l){return n=n!==null?n.childLanes&~l:0,r&&(n|=Jr),n}function v0(n,r,l){var d=r.pendingProps,v=!1,w=(r.flags&128)!==0,k;if((k=w)||(k=n!==null&&n.memoizedState===null?!1:(hs.current&2)!==0),k&&(v=!0,r.flags&=-129),k=(r.flags&32)!==0,r.flags&=-33,n===null){if(en){if(v?Da(r):Lo(),(n=ln)?(n=N1(n,Nn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:oi!==null?{id:$r,overflow:da}:null,retryLane:536870912,hydrationErrors:null},l=Il(n),l.return=r,r.child=l,us=r,ln=null)):n=null,n===null)throw Cs(r);return Up(n)?r.lanes=32:r.lanes=536870912,null}var U=d.children;return d=d.fallback,v?(Lo(),v=r.mode,U=Ah({mode:"hidden",children:U},v),d=ii(d,v,l,null),U.return=r,d.return=r,U.sibling=d,r.child=U,d=r.child,d.memoizedState=np(l),d.childLanes=sp(n,k,l),r.memoizedState=tp,Uu(null,d)):(Da(r),rp(r,U))}var te=n.memoizedState;if(te!==null&&(U=te.dehydrated,U!==null)){if(w)r.flags&256?(Da(r),r.flags&=-257,r=ap(n,r,l)):r.memoizedState!==null?(Lo(),r.child=n.child,r.flags|=128,r=null):(Lo(),U=d.fallback,v=r.mode,d=Ah({mode:"visible",children:d.children},v),U=ii(U,v,l,null),U.flags|=2,d.return=r,U.return=r,d.sibling=U,r.child=d,Nt(r,n.child,null,l),d=r.child,d.memoizedState=np(l),d.childLanes=sp(n,k,l),r.memoizedState=tp,r=Uu(null,d));else if(Da(r),Up(U)){if(k=U.nextSibling&&U.nextSibling.dataset,k)var Ee=k.dgst;k=Ee,d=Error(a(419)),d.stack="",d.digest=k,Gr({value:d,source:null,stack:null}),r=ap(n,r,l)}else if(_s||Mo(n,r,l,!1),k=(l&n.childLanes)!==0,_s||k){if(k=zn,k!==null&&(d=os(k,l),d!==0&&d!==te.retryLane))throw te.retryLane=d,ai(n,d),Pr(k,n,d),Zm;Vp(U)||Uh(),r=ap(n,r,l)}else Vp(U)?(r.flags|=192,r.child=n.child,r=null):(n=te.treeContext,ln=ya(U.nextSibling),us=r,en=!0,pr=null,Nn=!1,n!==null&&ha(r,n),r=rp(r,d.children),r.flags|=4096);return r}return v?(Lo(),U=d.fallback,v=r.mode,te=n.child,Ee=te.sibling,d=ua(te,{mode:"hidden",children:d.children}),d.subtreeFlags=te.subtreeFlags&65011712,Ee!==null?U=ua(Ee,U):(U=ii(U,v,l,null),U.flags|=2),U.return=r,d.return=r,d.sibling=U,r.child=d,Uu(null,d),d=r.child,U=n.child.memoizedState,U===null?U=np(l):(v=U.cachePool,v!==null?(te=rs._currentValue,v=v.parent!==te?{parent:te,pool:te}:v):v=_(),U={baseLanes:U.baseLanes|l,cachePool:v}),d.memoizedState=U,d.childLanes=sp(n,k,l),r.memoizedState=tp,Uu(n.child,d)):(Da(r),l=n.child,n=l.sibling,l=ua(l,{mode:"visible",children:d.children}),l.return=r,l.sibling=null,n!==null&&(k=r.deletions,k===null?(r.deletions=[n],r.flags|=16):k.push(n)),r.child=l,r.memoizedState=null,l)}function rp(n,r){return r=Ah({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Ah(n,r){return n=ks(22,n,null,r),n.lanes=0,n}function ap(n,r,l){return Nt(r,n.child,null,l),n=rp(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function b0(n,r,l){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),Du(n.return,r,l)}function ip(n,r,l,d,v,w){var k=n.memoizedState;k===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:v,treeForkCount:w}:(k.isBackwards=r,k.rendering=null,k.renderingStartTime=0,k.last=d,k.tail=l,k.tailMode=v,k.treeForkCount=w)}function x0(n,r,l){var d=r.pendingProps,v=d.revealOrder,w=d.tail;d=d.children;var k=hs.current,U=(k&2)!==0;if(U?(k=k&1|2,r.flags|=128):k&=1,ze(hs,k),Hs(n,r,d,l),d=en?Ol:0,!U&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&b0(n,l,r);else if(n.tag===19)b0(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(v){case"forwards":for(l=r.child,v=null;l!==null;)n=l.alternate,n!==null&&vh(n)===null&&(v=l),l=l.sibling;l=v,l===null?(v=r.child,r.child=null):(v=l.sibling,l.sibling=null),ip(r,!1,v,l,w,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=r.child,r.child=null;v!==null;){if(n=v.alternate,n!==null&&vh(n)===null){r.child=v;break}n=v.sibling,v.sibling=l,l=v,v=n}ip(r,!0,l,null,w,d);break;case"together":ip(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Gi(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),Bo|=r.lanes,(l&r.childLanes)===0)if(n!==null){if(Mo(n,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(a(153));if(r.child!==null){for(n=r.child,l=ua(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=ua(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function op(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Pl(n)))}function LS(n,r,l){switch(r.tag){case 3:ye(r,r.stateNode.containerInfo),ci(r,rs,n.memoizedState.cache),Bi();break;case 27:case 5:et(r);break;case 4:ye(r,r.stateNode.containerInfo);break;case 10:ci(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Dm(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Da(r),r.flags|=128,null):(l&r.child.childLanes)!==0?v0(n,r,l):(Da(r),n=Gi(n,r,l),n!==null?n.sibling:null);Da(r);break;case 19:var v=(n.flags&128)!==0;if(d=(l&r.childLanes)!==0,d||(Mo(n,r,l,!1),d=(l&r.childLanes)!==0),v){if(d)return x0(n,r,l);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ze(hs,hs.current),d)break;return null;case 22:return r.lanes=0,h0(n,r,l,r.pendingProps);case 24:ci(r,rs,n.memoizedState.cache)}return Gi(n,r,l)}function _0(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps)_s=!0;else{if(!op(n,l)&&(r.flags&128)===0)return _s=!1,LS(n,r,l);_s=(n.flags&131072)!==0}else _s=!1,en&&(r.flags&1048576)!==0&&qs(r,Ol,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(n=X(r.elementType),r.type=n,typeof n=="function")Co(n)?(d=Bl(n,d),r.tag=1,r=g0(null,r,n,d,l)):(r.tag=0,r=ep(null,r,n,d,l));else{if(n!=null){var v=n.$$typeof;if(v===K){r.tag=11,r=c0(null,r,n,d,l);break e}else if(v===q){r.tag=14,r=u0(null,r,n,d,l);break e}}throw r=Ce(n)||n,Error(a(306,r,""))}}return r;case 0:return ep(n,r,r.type,r.pendingProps,l);case 1:return d=r.type,v=Bl(d,r.pendingProps),g0(n,r,d,v,l);case 3:e:{if(ye(r,r.stateNode.containerInfo),n===null)throw Error(a(387));d=r.pendingProps;var w=r.memoizedState;v=w.element,tr(n,r),gr(r,d,null,l);var k=r.memoizedState;if(d=k.cache,ci(r,rs,d),d!==w.cache&&Mu(r,[rs],l,!0),Ar(),d=k.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:k.cache},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){r=y0(n,r,d,l);break e}else if(d!==v){v=jr(Error(a(424)),r),Gr(v),r=y0(n,r,d,l);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ln=ya(n.firstChild),us=r,en=!0,pr=null,Nn=!0,l=Xt(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Bi(),d===v){r=Gi(n,r,l);break e}Hs(n,r,d,l)}r=r.child}return r;case 26:return Ch(n,r),n===null?(l=D1(r.type,null,r.pendingProps,null))?r.memoizedState=l:en||(l=r.type,n=r.pendingProps,d=Gh(Fe.current).createElement(l),d[ft]=r,d[Tt]=n,$s(d,l,n),Hn(d),r.stateNode=d):r.memoizedState=D1(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return et(r),n===null&&en&&(d=r.stateNode=C1(r.type,r.pendingProps,Fe.current),us=r,Nn=!0,v=ln,$o(r.type)?(Bp=v,ln=ya(d.firstChild)):ln=v),Hs(n,r,r.pendingProps.children,l),Ch(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&en&&((v=d=ln)&&(d=fT(d,r.type,r.pendingProps,Nn),d!==null?(r.stateNode=d,us=r,ln=ya(d.firstChild),Nn=!1,v=!0):v=!1),v||Cs(r)),et(r),v=r.type,w=r.pendingProps,k=n!==null?n.memoizedProps:null,d=w.children,Op(v,w)?d=null:k!==null&&Op(v,k)&&(r.flags|=32),r.memoizedState!==null&&(v=Im(n,r,kS,null,null,l),ed._currentValue=v),Ch(n,r),Hs(n,r,d,l),r.child;case 6:return n===null&&en&&((n=l=ln)&&(l=mT(l,r.pendingProps,Nn),l!==null?(r.stateNode=l,us=r,ln=null,n=!0):n=!1),n||Cs(r)),null;case 13:return v0(n,r,l);case 4:return ye(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=Nt(r,null,d,l):Hs(n,r,d,l),r.child;case 11:return c0(n,r,r.type,r.pendingProps,l);case 7:return Hs(n,r,r.pendingProps,l),r.child;case 8:return Hs(n,r,r.pendingProps.children,l),r.child;case 12:return Hs(n,r,r.pendingProps.children,l),r.child;case 10:return d=r.pendingProps,ci(r,r.type,d.value),Hs(n,r,d.children,l),r.child;case 9:return v=r.type._context,d=r.pendingProps.children,Fi(r),v=vs(v),d=d(v),r.flags|=1,Hs(n,r,d,l),r.child;case 14:return u0(n,r,r.type,r.pendingProps,l);case 15:return d0(n,r,r.type,r.pendingProps,l);case 19:return x0(n,r,l);case 31:return PS(n,r,l);case 22:return h0(n,r,l,r.pendingProps);case 24:return Fi(r),d=vs(rs),n===null?(v=h(),v===null&&(v=zn,w=Iu(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=l),v=w),r.memoizedState={parent:d,cache:v},tn(r),ci(r,rs,v)):((n.lanes&l)!==0&&(tr(n,r),gr(r,null,null,l),Ar()),v=n.memoizedState,w=r.memoizedState,v.parent!==d?(v={parent:d,cache:d},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),ci(r,rs,d)):(d=w.cache,ci(r,rs,d),d!==v.cache&&Mu(r,[rs],l,!0))),Hs(n,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function Wi(n){n.flags|=4}function lp(n,r,l,d,v){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(v&335544128)===v)if(n.stateNode.complete)n.flags|=8192;else if(K0())n.flags|=8192;else throw re=D,N}else n.flags&=-16777217}function w0(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!L1(r))if(K0())n.flags|=8192;else throw re=D,N}function Rh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Wn():536870912,n.lanes|=r,Mc|=r)}function Bu(n,r){if(!en)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Kn(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(r)for(var v=n.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=n,v=v.sibling;else for(v=n.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=n,v=v.sibling;return n.subtreeFlags|=d,n.childLanes=l,r}function VS(n,r,l){var d=r.pendingProps;switch(ka(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(r),null;case 1:return Kn(r),null;case 3:return l=r.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Aa(rs),Se(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Ui(r)?Wi(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,li())),Kn(r),null;case 26:var v=r.type,w=r.memoizedState;return n===null?(Wi(r),w!==null?(Kn(r),w0(r,w)):(Kn(r),lp(r,v,null,d,l))):w?w!==n.memoizedState?(Wi(r),Kn(r),w0(r,w)):(Kn(r),r.flags&=-16777217):(n=n.memoizedProps,n!==d&&Wi(r),Kn(r),lp(r,v,n,d,l)),null;case 27:if(Me(r),l=Fe.current,v=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&Wi(r);else{if(!d){if(r.stateNode===null)throw Error(a(166));return Kn(r),null}n=Pe.current,Ui(r)?As(r):(n=C1(v,d,l),r.stateNode=n,Wi(r))}return Kn(r),null;case 5:if(Me(r),v=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&Wi(r);else{if(!d){if(r.stateNode===null)throw Error(a(166));return Kn(r),null}if(w=Pe.current,Ui(r))As(r);else{var k=Gh(Fe.current);switch(w){case 1:w=k.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=k.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=k.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=k.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=k.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?k.createElement("select",{is:d.is}):k.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?k.createElement(v,{is:d.is}):k.createElement(v)}}w[ft]=r,w[Tt]=d;e:for(k=r.child;k!==null;){if(k.tag===5||k.tag===6)w.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===r)break e;for(;k.sibling===null;){if(k.return===null||k.return===r)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}r.stateNode=w;e:switch($s(w,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Wi(r)}}return Kn(r),lp(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,l),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==d&&Wi(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(a(166));if(n=Fe.current,Ui(r)){if(n=r.stateNode,l=r.memoizedProps,d=null,v=us,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}n[ft]=r,n=!!(n.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||v1(n.nodeValue,l)),n||Cs(r,!0)}else n=Gh(n).createTextNode(d),n[ft]=r,r.stateNode=n}return Kn(r),null;case 31:if(l=r.memoizedState,n===null||n.memoizedState!==null){if(d=Ui(r),l!==null){if(n===null){if(!d)throw Error(a(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[ft]=r}else Bi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Kn(r),n=!1}else l=li(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return r.flags&256?(Qr(r),r):(Qr(r),null);if((r.flags&128)!==0)throw Error(a(558))}return Kn(r),null;case 13:if(d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(v=Ui(r),d!==null&&d.dehydrated!==null){if(n===null){if(!v)throw Error(a(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(a(317));v[ft]=r}else Bi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Kn(r),v=!1}else v=li(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Qr(r),r):(Qr(r),null)}return Qr(r),(r.flags&128)!==0?(r.lanes=l,r):(l=d!==null,n=n!==null&&n.memoizedState!==null,l&&(d=r.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==v&&(d.flags|=2048)),l!==n&&l&&(r.child.flags|=8192),Rh(r,r.updateQueue),Kn(r),null);case 4:return Se(),n===null&&Ap(r.stateNode.containerInfo),Kn(r),null;case 10:return Aa(r.type),Kn(r),null;case 19:if(de(hs),d=r.memoizedState,d===null)return Kn(r),null;if(v=(r.flags&128)!==0,w=d.rendering,w===null)if(v)Bu(d,!1);else{if(is!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(w=vh(n),w!==null){for(r.flags|=128,Bu(d,!1),n=w.updateQueue,r.updateQueue=n,Rh(r,n),r.subtreeFlags=0,n=l,l=r.child;l!==null;)fh(l,n),l=l.sibling;return ze(hs,hs.current&1|2),en&&Cr(r,d.treeForkCount),r.child}n=n.sibling}d.tail!==null&&We()>Ph&&(r.flags|=128,v=!0,Bu(d,!1),r.lanes=4194304)}else{if(!v)if(n=vh(w),n!==null){if(r.flags|=128,v=!0,n=n.updateQueue,r.updateQueue=n,Rh(r,n),Bu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!en)return Kn(r),null}else 2*We()-d.renderingStartTime>Ph&&l!==536870912&&(r.flags|=128,v=!0,Bu(d,!1),r.lanes=4194304);d.isBackwards?(w.sibling=r.child,r.child=w):(n=d.last,n!==null?n.sibling=w:r.child=w,d.last=w)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=We(),n.sibling=null,l=hs.current,ze(hs,v?l&1|2:l&1),en&&Cr(r,d.treeForkCount),n):(Kn(r),null);case 22:case 23:return Qr(r),ds(),d=r.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(l&536870912)!==0&&(r.flags&128)===0&&(Kn(r),r.subtreeFlags&6&&(r.flags|=8192)):Kn(r),l=r.updateQueue,l!==null&&Rh(r,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==l&&(r.flags|=2048),n!==null&&de(x),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Aa(rs),Kn(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function US(n,r){switch(ka(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Aa(rs),Se(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Me(r),null;case 31:if(r.memoizedState!==null){if(Qr(r),r.alternate===null)throw Error(a(340));Bi()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Qr(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Bi()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return de(hs),null;case 4:return Se(),null;case 10:return Aa(r.type),null;case 22:case 23:return Qr(r),ds(),n!==null&&de(x),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Aa(rs),null;case 25:return null;default:return null}}function S0(n,r){switch(ka(r),r.tag){case 3:Aa(rs),Se();break;case 26:case 27:case 5:Me(r);break;case 4:Se();break;case 31:r.memoizedState!==null&&Qr(r);break;case 13:Qr(r);break;case 19:de(hs);break;case 10:Aa(r.type);break;case 22:case 23:Qr(r),ds(),n!==null&&de(x);break;case 24:Aa(rs)}}function zu(n,r){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var v=d.next;l=v;do{if((l.tag&n)===n){d=void 0;var w=l.create,k=l.inst;d=w(),k.destroy=d}l=l.next}while(l!==v)}}catch(U){Mn(r,r.return,U)}}function Vo(n,r,l){try{var d=r.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var w=v.next;d=w;do{if((d.tag&n)===n){var k=d.inst,U=k.destroy;if(U!==void 0){k.destroy=void 0,v=r;var te=l,Ee=U;try{Ee()}catch(He){Mn(v,te,He)}}}d=d.next}while(d!==w)}}catch(He){Mn(r,r.return,He)}}function T0(n){var r=n.updateQueue;if(r!==null){var l=n.stateNode;try{Rr(r,l)}catch(d){Mn(n,n.return,d)}}}function E0(n,r,l){l.props=Bl(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(d){Mn(n,r,d)}}function Fu(n,r){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof l=="function"?n.refCleanup=l(d):l.current=d}}catch(v){Mn(n,r,v)}}function di(n,r){var l=n.ref,d=n.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(v){Mn(n,r,v)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){Mn(n,r,v)}else l.current=null}function N0(n){var r=n.type,l=n.memoizedProps,d=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(v){Mn(n,n.return,v)}}function cp(n,r,l){try{var d=n.stateNode;oT(d,n.type,l,r),d[Tt]=r}catch(v){Mn(n,n.return,v)}}function j0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&$o(n.type)||n.tag===4}function up(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||j0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&$o(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dp(n,r,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(n),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=zr));else if(d!==4&&(d===27&&$o(n.type)&&(l=n.stateNode,r=null),n=n.child,n!==null))for(dp(n,r,l),n=n.sibling;n!==null;)dp(n,r,l),n=n.sibling}function Dh(n,r,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(d!==4&&(d===27&&$o(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Dh(n,r,l),n=n.sibling;n!==null;)Dh(n,r,l),n=n.sibling}function k0(n){var r=n.stateNode,l=n.memoizedProps;try{for(var d=n.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);$s(r,d,l),r[ft]=n,r[Tt]=l}catch(w){Mn(n,n.return,w)}}var Ki=!1,ws=!1,hp=!1,C0=typeof WeakSet=="function"?WeakSet:Set,Ls=null;function BS(n,r){if(n=n.containerInfo,Mp=Zh,n=Su(n),yc(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var v=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var k=0,U=-1,te=-1,Ee=0,He=0,Ke=n,je=null;t:for(;;){for(var Ie;Ke!==l||v!==0&&Ke.nodeType!==3||(U=k+v),Ke!==w||d!==0&&Ke.nodeType!==3||(te=k+d),Ke.nodeType===3&&(k+=Ke.nodeValue.length),(Ie=Ke.firstChild)!==null;)je=Ke,Ke=Ie;for(;;){if(Ke===n)break t;if(je===l&&++Ee===v&&(U=k),je===w&&++He===d&&(te=k),(Ie=Ke.nextSibling)!==null)break;Ke=je,je=Ke.parentNode}Ke=Ie}l=U===-1||te===-1?null:{start:U,end:te}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ip={focusedElem:n,selectionRange:l},Zh=!1,Ls=r;Ls!==null;)if(r=Ls,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Ls=n;else for(;Ls!==null;){switch(r=Ls,w=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)v=n[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,l=r,v=w.memoizedProps,w=w.memoizedState,d=l.stateNode;try{var bt=Bl(l.type,v);n=d.getSnapshotBeforeUpdate(bt,w),d.__reactInternalSnapshotBeforeUpdate=n}catch(Pt){Mn(l,l.return,Pt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,l=n.nodeType,l===9)Lp(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Lp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=r.sibling,n!==null){n.return=r.return,Ls=n;break}Ls=r.return}}function A0(n,r,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Qi(n,l),d&4&&zu(5,l);break;case 1:if(Qi(n,l),d&4)if(n=l.stateNode,r===null)try{n.componentDidMount()}catch(k){Mn(l,l.return,k)}else{var v=Bl(l.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(v,r,n.__reactInternalSnapshotBeforeUpdate)}catch(k){Mn(l,l.return,k)}}d&64&&T0(l),d&512&&Fu(l,l.return);break;case 3:if(Qi(n,l),d&64&&(n=l.updateQueue,n!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Rr(n,r)}catch(k){Mn(l,l.return,k)}}break;case 27:r===null&&d&4&&k0(l);case 26:case 5:Qi(n,l),r===null&&d&4&&N0(l),d&512&&Fu(l,l.return);break;case 12:Qi(n,l);break;case 31:Qi(n,l),d&4&&M0(n,l);break;case 13:Qi(n,l),d&4&&I0(n,l),d&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=YS.bind(null,l),pT(n,l))));break;case 22:if(d=l.memoizedState!==null||Ki,!d){r=r!==null&&r.memoizedState!==null||ws,v=Ki;var w=ws;Ki=d,(ws=r)&&!w?Xi(n,l,(l.subtreeFlags&8772)!==0):Qi(n,l),Ki=v,ws=w}break;case 30:break;default:Qi(n,l)}}function R0(n){var r=n.alternate;r!==null&&(n.alternate=null,R0(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Bn(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Qn=null,Dr=!1;function Yi(n,r,l){for(l=l.child;l!==null;)D0(n,r,l),l=l.sibling}function D0(n,r,l){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(Fn,l)}catch{}switch(l.tag){case 26:ws||di(l,r),Yi(n,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ws||di(l,r);var d=Qn,v=Dr;$o(l.type)&&(Qn=l.stateNode,Dr=!1),Yi(n,r,l),Xu(l.stateNode),Qn=d,Dr=v;break;case 5:ws||di(l,r);case 6:if(d=Qn,v=Dr,Qn=null,Yi(n,r,l),Qn=d,Dr=v,Qn!==null)if(Dr)try{(Qn.nodeType===9?Qn.body:Qn.nodeName==="HTML"?Qn.ownerDocument.body:Qn).removeChild(l.stateNode)}catch(w){Mn(l,r,w)}else try{Qn.removeChild(l.stateNode)}catch(w){Mn(l,r,w)}break;case 18:Qn!==null&&(Dr?(n=Qn,T1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),zc(n)):T1(Qn,l.stateNode));break;case 4:d=Qn,v=Dr,Qn=l.stateNode.containerInfo,Dr=!0,Yi(n,r,l),Qn=d,Dr=v;break;case 0:case 11:case 14:case 15:Vo(2,l,r),ws||Vo(4,l,r),Yi(n,r,l);break;case 1:ws||(di(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"&&E0(l,r,d)),Yi(n,r,l);break;case 21:Yi(n,r,l);break;case 22:ws=(d=ws)||l.memoizedState!==null,Yi(n,r,l),ws=d;break;default:Yi(n,r,l)}}function M0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{zc(n)}catch(l){Mn(r,r.return,l)}}}function I0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{zc(n)}catch(l){Mn(r,r.return,l)}}function zS(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new C0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new C0),r;default:throw Error(a(435,n.tag))}}function Mh(n,r){var l=zS(n);r.forEach(function(d){if(!l.has(d)){l.add(d);var v=QS.bind(null,n,d);d.then(v,v)}})}function Mr(n,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var v=l[d],w=n,k=r,U=k;e:for(;U!==null;){switch(U.tag){case 27:if($o(U.type)){Qn=U.stateNode,Dr=!1;break e}break;case 5:Qn=U.stateNode,Dr=!1;break e;case 3:case 4:Qn=U.stateNode.containerInfo,Dr=!0;break e}U=U.return}if(Qn===null)throw Error(a(160));D0(w,k,v),Qn=null,Dr=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)O0(r,n),r=r.sibling}var Ma=null;function O0(n,r){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Mr(r,n),Ir(n),d&4&&(Vo(3,n,n.return),zu(3,n),Vo(5,n,n.return));break;case 1:Mr(r,n),Ir(n),d&512&&(ws||l===null||di(l,l.return)),d&64&&Ki&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var v=Ma;if(Mr(r,n),Ir(n),d&512&&(ws||l===null||di(l,l.return)),d&4){var w=l!==null?l.memoizedState:null;if(d=n.memoizedState,l===null)if(d===null)if(n.stateNode===null){e:{d=n.type,l=n.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":w=v.getElementsByTagName("title")[0],(!w||w[mn]||w[ft]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(d),v.head.insertBefore(w,v.querySelector("head > title"))),$s(w,d,l),w[ft]=n,Hn(w),d=w;break e;case"link":var k=O1("link","href",v).get(d+(l.href||""));if(k){for(var U=0;U<k.length;U++)if(w=k[U],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){k.splice(U,1);break t}}w=v.createElement(d),$s(w,d,l),v.head.appendChild(w);break;case"meta":if(k=O1("meta","content",v).get(d+(l.content||""))){for(U=0;U<k.length;U++)if(w=k[U],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){k.splice(U,1);break t}}w=v.createElement(d),$s(w,d,l),v.head.appendChild(w);break;default:throw Error(a(468,d))}w[ft]=n,Hn(w),d=w}n.stateNode=d}else P1(v,n.type,n.stateNode);else n.stateNode=I1(v,d,n.memoizedProps);else w!==d?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,d===null?P1(v,n.type,n.stateNode):I1(v,d,n.memoizedProps)):d===null&&n.stateNode!==null&&cp(n,n.memoizedProps,l.memoizedProps)}break;case 27:Mr(r,n),Ir(n),d&512&&(ws||l===null||di(l,l.return)),l!==null&&d&4&&cp(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Mr(r,n),Ir(n),d&512&&(ws||l===null||di(l,l.return)),n.flags&32){v=n.stateNode;try{Js(v,"")}catch(bt){Mn(n,n.return,bt)}}d&4&&n.stateNode!=null&&(v=n.memoizedProps,cp(n,v,l!==null?l.memoizedProps:v)),d&1024&&(hp=!0);break;case 6:if(Mr(r,n),Ir(n),d&4){if(n.stateNode===null)throw Error(a(162));d=n.memoizedProps,l=n.stateNode;try{l.nodeValue=d}catch(bt){Mn(n,n.return,bt)}}break;case 3:if(Yh=null,v=Ma,Ma=Wh(r.containerInfo),Mr(r,n),Ma=v,Ir(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{zc(r.containerInfo)}catch(bt){Mn(n,n.return,bt)}hp&&(hp=!1,P0(n));break;case 4:d=Ma,Ma=Wh(n.stateNode.containerInfo),Mr(r,n),Ir(n),Ma=d;break;case 12:Mr(r,n),Ir(n);break;case 31:Mr(r,n),Ir(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Mh(n,d)));break;case 13:Mr(r,n),Ir(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Oh=We()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Mh(n,d)));break;case 22:v=n.memoizedState!==null;var te=l!==null&&l.memoizedState!==null,Ee=Ki,He=ws;if(Ki=Ee||v,ws=He||te,Mr(r,n),ws=He,Ki=Ee,Ir(n),d&8192)e:for(r=n.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(l===null||te||Ki||ws||zl(n)),l=null,r=n;;){if(r.tag===5||r.tag===26){if(l===null){te=l=r;try{if(w=te.stateNode,v)k=w.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{U=te.stateNode;var Ke=te.memoizedProps.style,je=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null;U.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(bt){Mn(te,te.return,bt)}}}else if(r.tag===6){if(l===null){te=r;try{te.stateNode.nodeValue=v?"":te.memoizedProps}catch(bt){Mn(te,te.return,bt)}}}else if(r.tag===18){if(l===null){te=r;try{var Ie=te.stateNode;v?E1(Ie,!0):E1(te.stateNode,!1)}catch(bt){Mn(te,te.return,bt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=n.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Mh(n,l))));break;case 19:Mr(r,n),Ir(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Mh(n,d)));break;case 30:break;case 21:break;default:Mr(r,n),Ir(n)}}function Ir(n){var r=n.flags;if(r&2){try{for(var l,d=n.return;d!==null;){if(j0(d)){l=d;break}d=d.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var v=l.stateNode,w=up(n);Dh(n,w,v);break;case 5:var k=l.stateNode;l.flags&32&&(Js(k,""),l.flags&=-33);var U=up(n);Dh(n,U,k);break;case 3:case 4:var te=l.stateNode.containerInfo,Ee=up(n);dp(n,Ee,te);break;default:throw Error(a(161))}}catch(He){Mn(n,n.return,He)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function P0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;P0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Qi(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)A0(n,r.alternate,r),r=r.sibling}function zl(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Vo(4,r,r.return),zl(r);break;case 1:di(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&E0(r,r.return,l),zl(r);break;case 27:Xu(r.stateNode);case 26:case 5:di(r,r.return),zl(r);break;case 22:r.memoizedState===null&&zl(r);break;case 30:zl(r);break;default:zl(r)}n=n.sibling}}function Xi(n,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,v=n,w=r,k=w.flags;switch(w.tag){case 0:case 11:case 15:Xi(v,w,l),zu(4,w);break;case 1:if(Xi(v,w,l),d=w,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Ee){Mn(d,d.return,Ee)}if(d=w,v=d.updateQueue,v!==null){var U=d.stateNode;try{var te=v.shared.hiddenCallbacks;if(te!==null)for(v.shared.hiddenCallbacks=null,v=0;v<te.length;v++)Rn(te[v],U)}catch(Ee){Mn(d,d.return,Ee)}}l&&k&64&&T0(w),Fu(w,w.return);break;case 27:k0(w);case 26:case 5:Xi(v,w,l),l&&d===null&&k&4&&N0(w),Fu(w,w.return);break;case 12:Xi(v,w,l);break;case 31:Xi(v,w,l),l&&k&4&&M0(v,w);break;case 13:Xi(v,w,l),l&&k&4&&I0(v,w);break;case 22:w.memoizedState===null&&Xi(v,w,l),Fu(w,w.return);break;case 30:break;default:Xi(v,w,l)}r=r.sibling}}function fp(n,r){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Vl(l))}function mp(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Vl(n))}function Ia(n,r,l,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)L0(n,r,l,d),r=r.sibling}function L0(n,r,l,d){var v=r.flags;switch(r.tag){case 0:case 11:case 15:Ia(n,r,l,d),v&2048&&zu(9,r);break;case 1:Ia(n,r,l,d);break;case 3:Ia(n,r,l,d),v&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Vl(n)));break;case 12:if(v&2048){Ia(n,r,l,d),n=r.stateNode;try{var w=r.memoizedProps,k=w.id,U=w.onPostCommit;typeof U=="function"&&U(k,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(te){Mn(r,r.return,te)}}else Ia(n,r,l,d);break;case 31:Ia(n,r,l,d);break;case 13:Ia(n,r,l,d);break;case 23:break;case 22:w=r.stateNode,k=r.alternate,r.memoizedState!==null?w._visibility&2?Ia(n,r,l,d):qu(n,r):w._visibility&2?Ia(n,r,l,d):(w._visibility|=2,Ac(n,r,l,d,(r.subtreeFlags&10256)!==0||!1)),v&2048&&fp(k,r);break;case 24:Ia(n,r,l,d),v&2048&&mp(r.alternate,r);break;default:Ia(n,r,l,d)}}function Ac(n,r,l,d,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var w=n,k=r,U=l,te=d,Ee=k.flags;switch(k.tag){case 0:case 11:case 15:Ac(w,k,U,te,v),zu(8,k);break;case 23:break;case 22:var He=k.stateNode;k.memoizedState!==null?He._visibility&2?Ac(w,k,U,te,v):qu(w,k):(He._visibility|=2,Ac(w,k,U,te,v)),v&&Ee&2048&&fp(k.alternate,k);break;case 24:Ac(w,k,U,te,v),v&&Ee&2048&&mp(k.alternate,k);break;default:Ac(w,k,U,te,v)}r=r.sibling}}function qu(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=n,d=r,v=d.flags;switch(d.tag){case 22:qu(l,d),v&2048&&fp(d.alternate,d);break;case 24:qu(l,d),v&2048&&mp(d.alternate,d);break;default:qu(l,d)}r=r.sibling}}var Hu=8192;function Rc(n,r,l){if(n.subtreeFlags&Hu)for(n=n.child;n!==null;)V0(n,r,l),n=n.sibling}function V0(n,r,l){switch(n.tag){case 26:Rc(n,r,l),n.flags&Hu&&n.memoizedState!==null&&jT(l,Ma,n.memoizedState,n.memoizedProps);break;case 5:Rc(n,r,l);break;case 3:case 4:var d=Ma;Ma=Wh(n.stateNode.containerInfo),Rc(n,r,l),Ma=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=Hu,Hu=16777216,Rc(n,r,l),Hu=d):Rc(n,r,l));break;default:Rc(n,r,l)}}function U0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function $u(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];Ls=d,z0(d,n)}U0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)B0(n),n=n.sibling}function B0(n){switch(n.tag){case 0:case 11:case 15:$u(n),n.flags&2048&&Vo(9,n,n.return);break;case 3:$u(n);break;case 12:$u(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Ih(n)):$u(n);break;default:$u(n)}}function Ih(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];Ls=d,z0(d,n)}U0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Vo(8,r,r.return),Ih(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Ih(r));break;default:Ih(r)}n=n.sibling}}function z0(n,r){for(;Ls!==null;){var l=Ls;switch(l.tag){case 0:case 11:case 15:Vo(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Vl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Ls=d;else e:for(l=n;Ls!==null;){d=Ls;var v=d.sibling,w=d.return;if(R0(d),d===l){Ls=null;break e}if(v!==null){v.return=w,Ls=v;break e}Ls=w}}}var FS={getCacheForType:function(n){var r=vs(rs),l=r.data.get(n);return l===void 0&&(l=n(),r.data.set(n,l)),l},cacheSignal:function(){return vs(rs).controller.signal}},qS=typeof WeakMap=="function"?WeakMap:Map,jn=0,zn=null,an=null,cn=0,Dn=0,Xr=null,Uo=!1,Dc=!1,pp=!1,Ji=0,is=0,Bo=0,Fl=0,gp=0,Jr=0,Mc=0,Gu=null,Or=null,yp=!1,Oh=0,F0=0,Ph=1/0,Lh=null,zo=null,Rs=0,Fo=null,Ic=null,Zi=0,vp=0,bp=null,q0=null,Wu=0,xp=null;function Zr(){return(jn&2)!==0&&cn!==0?cn&-cn:ee.T!==null?Np():Ze()}function H0(){if(Jr===0)if((cn&536870912)===0||en){var n=st;st<<=1,(st&3932160)===0&&(st=262144),Jr=n}else Jr=536870912;return n=yr.current,n!==null&&(n.flags|=32),Jr}function Pr(n,r,l){(n===zn&&(Dn===2||Dn===9)||n.cancelPendingCommit!==null)&&(Oc(n,0),qo(n,cn,Jr,!1)),Un(n,l),((jn&2)===0||n!==zn)&&(n===zn&&((jn&2)===0&&(Fl|=l),is===4&&qo(n,cn,Jr,!1)),hi(n))}function $0(n,r,l){if((jn&6)!==0)throw Error(a(327));var d=!l&&(r&127)===0&&(r&n.expiredLanes)===0||yn(n,r),v=d?GS(n,r):wp(n,r,!0),w=d;do{if(v===0){Dc&&!d&&qo(n,r,0,!1);break}else{if(l=n.current.alternate,w&&!HS(l)){v=wp(n,r,!1),w=!1;continue}if(v===2){if(w=r,n.errorRecoveryDisabledLanes&w)var k=0;else k=n.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){r=k;e:{var U=n;v=Gu;var te=U.current.memoizedState.isDehydrated;if(te&&(Oc(U,k).flags|=256),k=wp(U,k,!1),k!==2){if(pp&&!te){U.errorRecoveryDisabledLanes|=w,Fl|=w,v=4;break e}w=Or,Or=v,w!==null&&(Or===null?Or=w:Or.push.apply(Or,w))}v=k}if(w=!1,v!==2)continue}}if(v===1){Oc(n,0),qo(n,r,0,!0);break}e:{switch(d=n,w=v,w){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:qo(d,r,Jr,!Uo);break e;case 2:Or=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(v=Oh+300-We(),10<v)){if(qo(d,r,Jr,!Uo),sn(d,0,!0)!==0)break e;Zi=r,d.timeoutHandle=w1(G0.bind(null,d,l,Or,Lh,yp,r,Jr,Fl,Mc,Uo,w,"Throttled",-0,0),v);break e}G0(d,l,Or,Lh,yp,r,Jr,Fl,Mc,Uo,w,null,-0,0)}}break}while(!0);hi(n)}function G0(n,r,l,d,v,w,k,U,te,Ee,He,Ke,je,Ie){if(n.timeoutHandle=-1,Ke=r.subtreeFlags,Ke&8192||(Ke&16785408)===16785408){Ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zr},V0(r,w,Ke);var bt=(w&62914560)===w?Oh-We():(w&4194048)===w?F0-We():0;if(bt=kT(Ke,bt),bt!==null){Zi=w,n.cancelPendingCommit=bt(e1.bind(null,n,r,w,l,d,v,k,U,te,He,Ke,null,je,Ie)),qo(n,w,k,!Ee);return}}e1(n,r,w,l,d,v,k,U,te)}function HS(n){for(var r=n;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var v=l[d],w=v.getSnapshot;v=v.value;try{if(!er(w(),v))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qo(n,r,l,d){r&=~gp,r&=~Fl,n.suspendedLanes|=r,n.pingedLanes&=~r,d&&(n.warmLanes|=r),d=n.expirationTimes;for(var v=r;0<v;){var w=31-it(v),k=1<<w;d[w]=-1,v&=~k}l!==0&&Tn(n,l,r)}function Vh(){return(jn&6)===0?(Ku(0),!1):!0}function _p(){if(an!==null){if(Dn===0)var n=an.return;else n=an,Ca=zi=null,Lm(n),oe=null,Ne=0,n=an;for(;n!==null;)S0(n.alternate,n),n=n.return;an=null}}function Oc(n,r){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,uT(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Zi=0,_p(),zn=n,an=l=ua(n.current,null),cn=r,Dn=0,Xr=null,Uo=!1,Dc=yn(n,r),pp=!1,Mc=Jr=gp=Fl=Bo=is=0,Or=Gu=null,yp=!1,(r&8)!==0&&(r|=r&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=r;0<d;){var v=31-it(d),w=1<<v;r|=n[v],d&=~w}return Ji=r,Dl(),l}function W0(n,r){Jt=null,ee.H=Vu,r===S||r===A?(r=ce(),Dn=3):r===N?(r=ce(),Dn=4):Dn=r===Zm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Xr=r,an===null&&(is=1,jh(n,jr(r,n.current)))}function K0(){var n=yr.current;return n===null?!0:(cn&4194048)===cn?vr===null:(cn&62914560)===cn||(cn&536870912)!==0?n===vr:!1}function Y0(){var n=ee.H;return ee.H=Vu,n===null?Vu:n}function Q0(){var n=ee.A;return ee.A=FS,n}function Uh(){is=4,Uo||(cn&4194048)!==cn&&yr.current!==null||(Dc=!0),(Bo&134217727)===0&&(Fl&134217727)===0||zn===null||qo(zn,cn,Jr,!1)}function wp(n,r,l){var d=jn;jn|=2;var v=Y0(),w=Q0();(zn!==n||cn!==r)&&(Lh=null,Oc(n,r)),r=!1;var k=is;e:do try{if(Dn!==0&&an!==null){var U=an,te=Xr;switch(Dn){case 8:_p(),k=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(r=!0);var Ee=Dn;if(Dn=0,Xr=null,Pc(n,U,te,Ee),l&&Dc){k=0;break e}break;default:Ee=Dn,Dn=0,Xr=null,Pc(n,U,te,Ee)}}$S(),k=is;break}catch(He){W0(n,He)}while(!0);return r&&n.shellSuspendCounter++,Ca=zi=null,jn=d,ee.H=v,ee.A=w,an===null&&(zn=null,cn=0,Dl()),k}function $S(){for(;an!==null;)X0(an)}function GS(n,r){var l=jn;jn|=2;var d=Y0(),v=Q0();zn!==n||cn!==r?(Lh=null,Ph=We()+500,Oc(n,r)):Dc=yn(n,r);e:do try{if(Dn!==0&&an!==null){r=an;var w=Xr;t:switch(Dn){case 1:Dn=0,Xr=null,Pc(n,r,w,1);break;case 2:case 9:if(M(w)){Dn=0,Xr=null,J0(r);break}r=function(){Dn!==2&&Dn!==9||zn!==n||(Dn=7),hi(n)},w.then(r,r);break e;case 3:Dn=7;break e;case 4:Dn=5;break e;case 7:M(w)?(Dn=0,Xr=null,J0(r)):(Dn=0,Xr=null,Pc(n,r,w,7));break;case 5:var k=null;switch(an.tag){case 26:k=an.memoizedState;case 5:case 27:var U=an;if(k?L1(k):U.stateNode.complete){Dn=0,Xr=null;var te=U.sibling;if(te!==null)an=te;else{var Ee=U.return;Ee!==null?(an=Ee,Bh(Ee)):an=null}break t}}Dn=0,Xr=null,Pc(n,r,w,5);break;case 6:Dn=0,Xr=null,Pc(n,r,w,6);break;case 8:_p(),is=6;break e;default:throw Error(a(462))}}WS();break}catch(He){W0(n,He)}while(!0);return Ca=zi=null,ee.H=d,ee.A=v,jn=l,an!==null?0:(zn=null,cn=0,Dl(),is)}function WS(){for(;an!==null&&!nt();)X0(an)}function X0(n){var r=_0(n.alternate,n,Ji);n.memoizedProps=n.pendingProps,r===null?Bh(n):an=r}function J0(n){var r=n,l=r.alternate;switch(r.tag){case 15:case 0:r=p0(l,r,r.pendingProps,r.type,void 0,cn);break;case 11:r=p0(l,r,r.pendingProps,r.type.render,r.ref,cn);break;case 5:Lm(r);default:S0(l,r),r=an=fh(r,Ji),r=_0(l,r,Ji)}n.memoizedProps=n.pendingProps,r===null?Bh(n):an=r}function Pc(n,r,l,d){Ca=zi=null,Lm(r),oe=null,Ne=0;var v=r.return;try{if(OS(n,v,r,l,cn)){is=1,jh(n,jr(l,n.current)),an=null;return}}catch(w){if(v!==null)throw an=v,w;is=1,jh(n,jr(l,n.current)),an=null;return}r.flags&32768?(en||d===1?n=!0:Dc||(cn&536870912)!==0?n=!1:(Uo=n=!0,(d===2||d===9||d===3||d===6)&&(d=yr.current,d!==null&&d.tag===13&&(d.flags|=16384))),Z0(r,n)):Bh(r)}function Bh(n){var r=n;do{if((r.flags&32768)!==0){Z0(r,Uo);return}n=r.return;var l=VS(r.alternate,r,Ji);if(l!==null){an=l;return}if(r=r.sibling,r!==null){an=r;return}an=r=n}while(r!==null);is===0&&(is=5)}function Z0(n,r){do{var l=US(n.alternate,n);if(l!==null){l.flags&=32767,an=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(n=n.sibling,n!==null)){an=n;return}an=n=l}while(n!==null);is=6,an=null}function e1(n,r,l,d,v,w,k,U,te){n.cancelPendingCommit=null;do zh();while(Rs!==0);if((jn&6)!==0)throw Error(a(327));if(r!==null){if(r===n.current)throw Error(a(177));if(w=r.lanes|r.childLanes,w|=Nu,Yt(n,l,w,k,U,te),n===zn&&(an=zn=null,cn=0),Ic=r,Fo=n,Zi=l,vp=w,bp=v,q0=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,XS(Lt,function(){return a1(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=ee.T,ee.T=null,v=_e.p,_e.p=2,k=jn,jn|=4;try{BS(n,r,l)}finally{jn=k,_e.p=v,ee.T=d}}Rs=1,t1(),n1(),s1()}}function t1(){if(Rs===1){Rs=0;var n=Fo,r=Ic,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null;var d=_e.p;_e.p=2;var v=jn;jn|=4;try{O0(r,n);var w=Ip,k=Su(n.containerInfo),U=w.focusedElem,te=w.selectionRange;if(k!==U&&U&&U.ownerDocument&&oh(U.ownerDocument.documentElement,U)){if(te!==null&&yc(U)){var Ee=te.start,He=te.end;if(He===void 0&&(He=Ee),"selectionStart"in U)U.selectionStart=Ee,U.selectionEnd=Math.min(He,U.value.length);else{var Ke=U.ownerDocument||document,je=Ke&&Ke.defaultView||window;if(je.getSelection){var Ie=je.getSelection(),bt=U.textContent.length,Pt=Math.min(te.start,bt),Vn=te.end===void 0?Pt:Math.min(te.end,bt);!Ie.extend&&Pt>Vn&&(k=Vn,Vn=Pt,Pt=k);var pe=wu(U,Pt),le=wu(U,Vn);if(pe&&le&&(Ie.rangeCount!==1||Ie.anchorNode!==pe.node||Ie.anchorOffset!==pe.offset||Ie.focusNode!==le.node||Ie.focusOffset!==le.offset)){var Te=Ke.createRange();Te.setStart(pe.node,pe.offset),Ie.removeAllRanges(),Pt>Vn?(Ie.addRange(Te),Ie.extend(le.node,le.offset)):(Te.setEnd(le.node,le.offset),Ie.addRange(Te))}}}}for(Ke=[],Ie=U;Ie=Ie.parentNode;)Ie.nodeType===1&&Ke.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Ke.length;U++){var $e=Ke[U];$e.element.scrollLeft=$e.left,$e.element.scrollTop=$e.top}}Zh=!!Mp,Ip=Mp=null}finally{jn=v,_e.p=d,ee.T=l}}n.current=r,Rs=2}}function n1(){if(Rs===2){Rs=0;var n=Fo,r=Ic,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=ee.T,ee.T=null;var d=_e.p;_e.p=2;var v=jn;jn|=4;try{A0(n,r.alternate,r)}finally{jn=v,_e.p=d,ee.T=l}}Rs=3}}function s1(){if(Rs===4||Rs===3){Rs=0,ct();var n=Fo,r=Ic,l=Zi,d=q0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Rs=5:(Rs=0,Ic=Fo=null,r1(n,n.pendingLanes));var v=n.pendingLanes;if(v===0&&(zo=null),Ve(l),r=r.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(Fn,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=ee.T,v=_e.p,_e.p=2,ee.T=null;try{for(var w=n.onRecoverableError,k=0;k<d.length;k++){var U=d[k];w(U.value,{componentStack:U.stack})}}finally{ee.T=r,_e.p=v}}(Zi&3)!==0&&zh(),hi(n),v=n.pendingLanes,(l&261930)!==0&&(v&42)!==0?n===xp?Wu++:(Wu=0,xp=n):Wu=0,Ku(0)}}function r1(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Vl(r)))}function zh(){return t1(),n1(),s1(),a1()}function a1(){if(Rs!==5)return!1;var n=Fo,r=vp;vp=0;var l=Ve(Zi),d=ee.T,v=_e.p;try{_e.p=32>l?32:l,ee.T=null,l=bp,bp=null;var w=Fo,k=Zi;if(Rs=0,Ic=Fo=null,Zi=0,(jn&6)!==0)throw Error(a(331));var U=jn;if(jn|=4,B0(w.current),L0(w,w.current,k,l),jn=U,Ku(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(Fn,w)}catch{}return!0}finally{_e.p=v,ee.T=d,r1(n,r)}}function i1(n,r,l){r=jr(l,r),r=Jm(n.stateNode,r,2),n=On(n,r,2),n!==null&&(Un(n,2),hi(n))}function Mn(n,r,l){if(n.tag===3)i1(n,n,l);else for(;r!==null;){if(r.tag===3){i1(r,n,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(zo===null||!zo.has(d))){n=jr(l,n),l=o0(2),d=On(r,l,2),d!==null&&(l0(l,d,r,n),Un(d,2),hi(d));break}}r=r.return}}function Sp(n,r,l){var d=n.pingCache;if(d===null){d=n.pingCache=new qS;var v=new Set;d.set(r,v)}else v=d.get(r),v===void 0&&(v=new Set,d.set(r,v));v.has(l)||(pp=!0,v.add(l),n=KS.bind(null,n,r,l),r.then(n,n))}function KS(n,r,l){var d=n.pingCache;d!==null&&d.delete(r),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,zn===n&&(cn&l)===l&&(is===4||is===3&&(cn&62914560)===cn&&300>We()-Oh?(jn&2)===0&&Oc(n,0):gp|=l,Mc===cn&&(Mc=0)),hi(n)}function o1(n,r){r===0&&(r=Wn()),n=ai(n,r),n!==null&&(Un(n,r),hi(n))}function YS(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),o1(n,l)}function QS(n,r){var l=0;switch(n.tag){case 31:case 13:var d=n.stateNode,v=n.memoizedState;v!==null&&(l=v.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(a(314))}d!==null&&d.delete(r),o1(n,l)}function XS(n,r){return be(n,r)}var Fh=null,Lc=null,Tp=!1,qh=!1,Ep=!1,Ho=0;function hi(n){n!==Lc&&n.next===null&&(Lc===null?Fh=Lc=n:Lc=Lc.next=n),qh=!0,Tp||(Tp=!0,ZS())}function Ku(n,r){if(!Ep&&qh){Ep=!0;do for(var l=!1,d=Fh;d!==null;){if(n!==0){var v=d.pendingLanes;if(v===0)var w=0;else{var k=d.suspendedLanes,U=d.pingedLanes;w=(1<<31-it(42|n)+1)-1,w&=v&~(k&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,d1(d,w))}else w=cn,w=sn(d,d===zn?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||yn(d,w)||(l=!0,d1(d,w));d=d.next}while(l);Ep=!1}}function JS(){l1()}function l1(){qh=Tp=!1;var n=0;Ho!==0&&cT()&&(n=Ho);for(var r=We(),l=null,d=Fh;d!==null;){var v=d.next,w=c1(d,r);w===0?(d.next=null,l===null?Fh=v:l.next=v,v===null&&(Lc=l)):(l=d,(n!==0||(w&3)!==0)&&(qh=!0)),d=v}Rs!==0&&Rs!==5||Ku(n),Ho!==0&&(Ho=0)}function c1(n,r){for(var l=n.suspendedLanes,d=n.pingedLanes,v=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var k=31-it(w),U=1<<k,te=v[k];te===-1?((U&l)===0||(U&d)!==0)&&(v[k]=Is(U,r)):te<=r&&(n.expiredLanes|=U),w&=~U}if(r=zn,l=cn,l=sn(n,n===r?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,l===0||n===r&&(Dn===2||Dn===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&xe(d),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||yn(n,l)){if(r=l&-l,r===n.callbackPriority)return r;switch(d!==null&&xe(d),Ve(l)){case 2:case 8:l=Vt;break;case 32:l=Lt;break;case 268435456:l=Kt;break;default:l=Lt}return d=u1.bind(null,n),l=be(l,d),n.callbackPriority=r,n.callbackNode=l,r}return d!==null&&d!==null&&xe(d),n.callbackPriority=2,n.callbackNode=null,2}function u1(n,r){if(Rs!==0&&Rs!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(zh()&&n.callbackNode!==l)return null;var d=cn;return d=sn(n,n===zn?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:($0(n,d,r),c1(n,We()),n.callbackNode!=null&&n.callbackNode===l?u1.bind(null,n):null)}function d1(n,r){if(zh())return null;$0(n,r,!0)}function ZS(){dT(function(){(jn&6)!==0?be(wt,JS):l1()})}function Np(){if(Ho===0){var n=Oo;n===0&&(n=ve,ve<<=1,(ve&261888)===0&&(ve=256)),Ho=n}return Ho}function h1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:bo(""+n)}function f1(n,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,n.id&&l.setAttribute("form",n.id),r.parentNode.insertBefore(l,r),n=new FormData(n),l.parentNode.removeChild(l),n}function eT(n,r,l,d,v){if(r==="submit"&&l&&l.stateNode===v){var w=h1((v[Tt]||null).action),k=d.submitter;k&&(r=(r=k[Tt]||null)?h1(r.formAction):k.getAttribute("formAction"),r!==null&&(w=r,k=null));var U=new ys("action","action",null,d,v);n.push({event:U,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ho!==0){var te=k?f1(v,k):new FormData(v);Gm(l,{pending:!0,data:te,method:v.method,action:w},null,te)}}else typeof w=="function"&&(U.preventDefault(),te=k?f1(v,k):new FormData(v),Gm(l,{pending:!0,data:te,method:v.method,action:w},w,te))},currentTarget:v}]})}}for(var jp=0;jp<vc.length;jp++){var kp=vc[jp],tT=kp.toLowerCase(),nT=kp[0].toUpperCase()+kp.slice(1);js(tT,"on"+nT)}js(ch,"onAnimationEnd"),js(uh,"onAnimationIteration"),js(dh,"onAnimationStart"),js("dblclick","onDoubleClick"),js("focusin","onFocus"),js("focusout","onBlur"),js(Am,"onTransitionRun"),js(Rm,"onTransitionStart"),js(Tu,"onTransitionCancel"),js(Eu,"onTransitionEnd"),Dt("onMouseEnter",["mouseout","mouseover"]),Dt("onMouseLeave",["mouseout","mouseover"]),Dt("onPointerEnter",["pointerout","pointerover"]),Dt("onPointerLeave",["pointerout","pointerover"]),cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yu));function m1(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],v=d.event;d=d.listeners;e:{var w=void 0;if(r)for(var k=d.length-1;0<=k;k--){var U=d[k],te=U.instance,Ee=U.currentTarget;if(U=U.listener,te!==w&&v.isPropagationStopped())break e;w=U,v.currentTarget=Ee;try{w(v)}catch(He){bc(He)}v.currentTarget=null,w=te}else for(k=0;k<d.length;k++){if(U=d[k],te=U.instance,Ee=U.currentTarget,U=U.listener,te!==w&&v.isPropagationStopped())break e;w=U,v.currentTarget=Ee;try{w(v)}catch(He){bc(He)}v.currentTarget=null,w=te}}}}function on(n,r){var l=r[at];l===void 0&&(l=r[at]=new Set);var d=n+"__bubble";l.has(d)||(p1(r,n,2,!1),l.add(d))}function Cp(n,r,l){var d=0;r&&(d|=4),p1(l,n,d,r)}var Hh="_reactListening"+Math.random().toString(36).slice(2);function Ap(n){if(!n[Hh]){n[Hh]=!0,Ha.forEach(function(l){l!=="selectionchange"&&(sT.has(l)||Cp(l,!1,n),Cp(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Hh]||(r[Hh]=!0,Cp("selectionchange",!1,r))}}function p1(n,r,l,d){switch(H1(r)){case 2:var v=RT;break;case 8:v=DT;break;default:v=$p}l=v.bind(null,r,l,n),v=void 0,!Ai||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),d?v!==void 0?n.addEventListener(r,l,{capture:!0,passive:v}):n.addEventListener(r,l,!0):v!==void 0?n.addEventListener(r,l,{passive:v}):n.addEventListener(r,l,!1)}function Rp(n,r,l,d,v){var w=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var k=d.tag;if(k===3||k===4){var U=d.stateNode.containerInfo;if(U===v)break;if(k===4)for(k=d.return;k!==null;){var te=k.tag;if((te===3||te===4)&&k.stateNode.containerInfo===v)return;k=k.return}for(;U!==null;){if(k=ls(U),k===null)return;if(te=k.tag,te===5||te===6||te===26||te===27){d=w=k;continue e}U=U.parentNode}}d=d.return}Ja(function(){var Ee=w,He=Tr(l),Ke=[];e:{var je=hh.get(n);if(je!==void 0){var Ie=ys,bt=n;switch(n){case"keypress":if(Za(l)===0)break e;case"keydown":case"keyup":Ie=pc;break;case"focusin":bt="focus",Ie=ti;break;case"focusout":bt="blur",Ie=ti;break;case"beforeblur":case"afterblur":Ie=ti;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=Qt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=cs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=j;break;case ch:case uh:case dh:Ie=hc;break;case Eu:Ie=G;break;case"scroll":case"scrollend":Ie=Yn;break;case"wheel":Ie=Ae;break;case"copy":case"cut":case"paste":Ie=fc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Na;break;case"toggle":case"beforetoggle":Ie=$t}var Pt=(r&4)!==0,Vn=!Pt&&(n==="scroll"||n==="scrollend"),pe=Pt?je!==null?je+"Capture":null:je;Pt=[];for(var le=Ee,Te;le!==null;){var $e=le;if(Te=$e.stateNode,$e=$e.tag,$e!==5&&$e!==26&&$e!==27||Te===null||pe===null||($e=Fr(le,pe),$e!=null&&Pt.push(Qu(le,$e,Te))),Vn)break;le=le.return}0<Pt.length&&(je=new Ie(je,bt,null,l,He),Ke.push({event:je,listeners:Pt}))}}if((r&7)===0){e:{if(je=n==="mouseover"||n==="pointerover",Ie=n==="mouseout"||n==="pointerout",je&&l!==Sl&&(bt=l.relatedTarget||l.fromElement)&&(ls(bt)||bt[ie]))break e;if((Ie||je)&&(je=He.window===He?He:(je=He.ownerDocument)?je.defaultView||je.parentWindow:window,Ie?(bt=l.relatedTarget||l.toElement,Ie=Ee,bt=bt?ls(bt):null,bt!==null&&(Vn=c(bt),Pt=bt.tag,bt!==Vn||Pt!==5&&Pt!==27&&Pt!==6)&&(bt=null)):(Ie=null,bt=Ee),Ie!==bt)){if(Pt=Qt,$e="onMouseLeave",pe="onMouseEnter",le="mouse",(n==="pointerout"||n==="pointerover")&&(Pt=Na,$e="onPointerLeave",pe="onPointerEnter",le="pointer"),Vn=Ie==null?je:ts(Ie),Te=bt==null?je:ts(bt),je=new Pt($e,le+"leave",Ie,l,He),je.target=Vn,je.relatedTarget=Te,$e=null,ls(He)===Ee&&(Pt=new Pt(pe,le+"enter",bt,l,He),Pt.target=Te,Pt.relatedTarget=Vn,$e=Pt),Vn=$e,Ie&&bt)t:{for(Pt=rT,pe=Ie,le=bt,Te=0,$e=pe;$e;$e=Pt($e))Te++;$e=0;for(var kt=le;kt;kt=Pt(kt))$e++;for(;0<Te-$e;)pe=Pt(pe),Te--;for(;0<$e-Te;)le=Pt(le),$e--;for(;Te--;){if(pe===le||le!==null&&pe===le.alternate){Pt=pe;break t}pe=Pt(pe),le=Pt(le)}Pt=null}else Pt=null;Ie!==null&&g1(Ke,je,Ie,Pt,!1),bt!==null&&Vn!==null&&g1(Ke,Vn,bt,Pt,!0)}}e:{if(je=Ee?ts(Ee):window,Ie=je.nodeName&&je.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&je.type==="file")var wn=sh;else if(th(je))if(yu)wn=ih;else{wn=ah;var St=jm}else Ie=je.nodeName,!Ie||Ie.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?Ee&&vo(Ee.elementType)&&(wn=sh):wn=Al;if(wn&&(wn=wn(n,Ee))){gu(Ke,wn,l,He);break e}St&&St(n,je,Ee),n==="focusout"&&Ee&&je.type==="number"&&Ee.memoizedProps.value!=null&&xl(je,"number",je.value)}switch(St=Ee?ts(Ee):window,n){case"focusin":(th(St)||St.contentEditable==="true")&&(Oi=St,jo=Ee,ni=null);break;case"focusout":ni=jo=Oi=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,lh(Ke,l,He);break;case"selectionchange":if(Cm)break;case"keydown":case"keyup":lh(Ke,l,He)}var Zt;if(vn)e:{switch(n){case"compositionstart":var un="onCompositionStart";break e;case"compositionend":un="onCompositionEnd";break e;case"compositionupdate":un="onCompositionUpdate";break e}un=void 0}else Ii?ja(n,l)&&(un="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(un="onCompositionStart");un&&(la&&l.locale!=="ko"&&(Ii||un!=="onCompositionStart"?un==="onCompositionEnd"&&Ii&&(Zt=xo()):(ra=He,Tl="value"in ra?ra.value:ra.textContent,Ii=!0)),St=$h(Ee,un),0<St.length&&(un=new oa(un,n,null,l,He),Ke.push({event:un,listeners:St}),Zt?un.data=Zt:(Zt=Mi(l),Zt!==null&&(un.data=Zt)))),(Zt=Er?eh(n,l):pu(n,l))&&(un=$h(Ee,"onBeforeInput"),0<un.length&&(St=new oa("onBeforeInput","beforeinput",null,l,He),Ke.push({event:St,listeners:un}),St.data=Zt)),eT(Ke,n,Ee,l,He)}m1(Ke,r)})}function Qu(n,r,l){return{instance:n,listener:r,currentTarget:l}}function $h(n,r){for(var l=r+"Capture",d=[];n!==null;){var v=n,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Fr(n,l),v!=null&&d.unshift(Qu(n,v,w)),v=Fr(n,r),v!=null&&d.push(Qu(n,v,w))),n.tag===3)return d;n=n.return}return[]}function rT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function g1(n,r,l,d,v){for(var w=r._reactName,k=[];l!==null&&l!==d;){var U=l,te=U.alternate,Ee=U.stateNode;if(U=U.tag,te!==null&&te===d)break;U!==5&&U!==26&&U!==27||Ee===null||(te=Ee,v?(Ee=Fr(l,w),Ee!=null&&k.unshift(Qu(l,Ee,te))):v||(Ee=Fr(l,w),Ee!=null&&k.push(Qu(l,Ee,te)))),l=l.return}k.length!==0&&n.push({event:r,listeners:k})}var aT=/\r\n?/g,iT=/\u0000|\uFFFD/g;function y1(n){return(typeof n=="string"?n:""+n).replace(aT,`
`).replace(iT,"")}function v1(n,r){return r=y1(r),y1(n)===r}function Ln(n,r,l,d,v,w){switch(l){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Js(n,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Js(n,""+d);break;case"className":Qs(n,"class",d);break;case"tabIndex":Qs(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Qs(n,l,d);break;case"style":wl(n,d,w);break;case"data":if(r!=="object"){Qs(n,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||l!=="href")){n.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=bo(""+d),n.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(r!=="input"&&Ln(n,r,"name",v.name,v,null),Ln(n,r,"formEncType",v.formEncType,v,null),Ln(n,r,"formMethod",v.formMethod,v,null),Ln(n,r,"formTarget",v.formTarget,v,null)):(Ln(n,r,"encType",v.encType,v,null),Ln(n,r,"method",v.method,v,null),Ln(n,r,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=bo(""+d),n.setAttribute(l,d);break;case"onClick":d!=null&&(n.onclick=zr);break;case"onScroll":d!=null&&on("scroll",n);break;case"onScrollEnd":d!=null&&on("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}l=bo(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""+d):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":d===!0?n.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,d):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(l,d):n.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(l):n.setAttribute(l,d);break;case"popover":on("beforetoggle",n),on("toggle",n),$a(n,"popover",d);break;case"xlinkActuate":ns(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ns(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ns(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ns(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ns(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ns(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ns(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ns(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ns(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":$a(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=dc.get(l)||l,$a(n,l,d))}}function Dp(n,r,l,d,v,w){switch(l){case"style":wl(n,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof d=="string"?Js(n,d):(typeof d=="number"||typeof d=="bigint")&&Js(n,""+d);break;case"onScroll":d!=null&&on("scroll",n);break;case"onScrollEnd":d!=null&&on("scrollend",n);break;case"onClick":d!=null&&(n.onclick=zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ei.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),r=l.slice(2,v?l.length-7:void 0),w=n[Tt]||null,w=w!=null?w[l]:null,typeof w=="function"&&n.removeEventListener(r,w,v),typeof d=="function")){typeof w!="function"&&w!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(r,d,v);break e}l in n?n[l]=d:d===!0?n.setAttribute(l,""):$a(n,l,d)}}}function $s(n,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":on("error",n),on("load",n);var d=!1,v=!1,w;for(w in l)if(l.hasOwnProperty(w)){var k=l[w];if(k!=null)switch(w){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Ln(n,r,w,k,l,null)}}v&&Ln(n,r,"srcSet",l.srcSet,l,null),d&&Ln(n,r,"src",l.src,l,null);return;case"input":on("invalid",n);var U=w=k=v=null,te=null,Ee=null;for(d in l)if(l.hasOwnProperty(d)){var He=l[d];if(He!=null)switch(d){case"name":v=He;break;case"type":k=He;break;case"checked":te=He;break;case"defaultChecked":Ee=He;break;case"value":w=He;break;case"defaultValue":U=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(a(137,r));break;default:Ln(n,r,d,He,l,null)}}lc(n,w,U,te,Ee,k,v,!1);return;case"select":on("invalid",n),d=k=w=null;for(v in l)if(l.hasOwnProperty(v)&&(U=l[v],U!=null))switch(v){case"value":w=U;break;case"defaultValue":k=U;break;case"multiple":d=U;default:Ln(n,r,v,U,l,null)}r=w,l=k,n.multiple=!!d,r!=null?Wa(n,!!d,r,!1):l!=null&&Wa(n,!!d,l,!0);return;case"textarea":on("invalid",n),w=v=d=null;for(k in l)if(l.hasOwnProperty(k)&&(U=l[k],U!=null))switch(k){case"value":d=U;break;case"defaultValue":v=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(a(91));break;default:Ln(n,r,k,U,l,null)}Ka(n,d,v,w);return;case"option":for(te in l)l.hasOwnProperty(te)&&(d=l[te],d!=null)&&(te==="selected"?n.selected=d&&typeof d!="function"&&typeof d!="symbol":Ln(n,r,te,d,l,null));return;case"dialog":on("beforetoggle",n),on("toggle",n),on("cancel",n),on("close",n);break;case"iframe":case"object":on("load",n);break;case"video":case"audio":for(d=0;d<Yu.length;d++)on(Yu[d],n);break;case"image":on("error",n),on("load",n);break;case"details":on("toggle",n);break;case"embed":case"source":case"link":on("error",n),on("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in l)if(l.hasOwnProperty(Ee)&&(d=l[Ee],d!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Ln(n,r,Ee,d,l,null)}return;default:if(vo(r)){for(He in l)l.hasOwnProperty(He)&&(d=l[He],d!==void 0&&Dp(n,r,He,d,l,void 0));return}}for(U in l)l.hasOwnProperty(U)&&(d=l[U],d!=null&&Ln(n,r,U,d,l,null))}function oT(n,r,l,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,k=null,U=null,te=null,Ee=null,He=null;for(Ie in l){var Ke=l[Ie];if(l.hasOwnProperty(Ie)&&Ke!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":te=Ke;default:d.hasOwnProperty(Ie)||Ln(n,r,Ie,null,d,Ke)}}for(var je in d){var Ie=d[je];if(Ke=l[je],d.hasOwnProperty(je)&&(Ie!=null||Ke!=null))switch(je){case"type":w=Ie;break;case"name":v=Ie;break;case"checked":Ee=Ie;break;case"defaultChecked":He=Ie;break;case"value":k=Ie;break;case"defaultValue":U=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(a(137,r));break;default:Ie!==Ke&&Ln(n,r,je,Ie,d,Ke)}}yo(n,k,U,te,Ee,He,w,v);return;case"select":Ie=k=U=je=null;for(w in l)if(te=l[w],l.hasOwnProperty(w)&&te!=null)switch(w){case"value":break;case"multiple":Ie=te;default:d.hasOwnProperty(w)||Ln(n,r,w,null,d,te)}for(v in d)if(w=d[v],te=l[v],d.hasOwnProperty(v)&&(w!=null||te!=null))switch(v){case"value":je=w;break;case"defaultValue":U=w;break;case"multiple":k=w;default:w!==te&&Ln(n,r,v,w,d,te)}r=U,l=k,d=Ie,je!=null?Wa(n,!!l,je,!1):!!d!=!!l&&(r!=null?Wa(n,!!l,r,!0):Wa(n,!!l,l?[]:"",!1));return;case"textarea":Ie=je=null;for(U in l)if(v=l[U],l.hasOwnProperty(U)&&v!=null&&!d.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Ln(n,r,U,null,d,v)}for(k in d)if(v=d[k],w=l[k],d.hasOwnProperty(k)&&(v!=null||w!=null))switch(k){case"value":je=v;break;case"defaultValue":Ie=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(a(91));break;default:v!==w&&Ln(n,r,k,v,d,w)}cc(n,je,Ie);return;case"option":for(var bt in l)je=l[bt],l.hasOwnProperty(bt)&&je!=null&&!d.hasOwnProperty(bt)&&(bt==="selected"?n.selected=!1:Ln(n,r,bt,null,d,je));for(te in d)je=d[te],Ie=l[te],d.hasOwnProperty(te)&&je!==Ie&&(je!=null||Ie!=null)&&(te==="selected"?n.selected=je&&typeof je!="function"&&typeof je!="symbol":Ln(n,r,te,je,d,Ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pt in l)je=l[Pt],l.hasOwnProperty(Pt)&&je!=null&&!d.hasOwnProperty(Pt)&&Ln(n,r,Pt,null,d,je);for(Ee in d)if(je=d[Ee],Ie=l[Ee],d.hasOwnProperty(Ee)&&je!==Ie&&(je!=null||Ie!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(a(137,r));break;default:Ln(n,r,Ee,je,d,Ie)}return;default:if(vo(r)){for(var Vn in l)je=l[Vn],l.hasOwnProperty(Vn)&&je!==void 0&&!d.hasOwnProperty(Vn)&&Dp(n,r,Vn,void 0,d,je);for(He in d)je=d[He],Ie=l[He],!d.hasOwnProperty(He)||je===Ie||je===void 0&&Ie===void 0||Dp(n,r,He,je,d,Ie);return}}for(var pe in l)je=l[pe],l.hasOwnProperty(pe)&&je!=null&&!d.hasOwnProperty(pe)&&Ln(n,r,pe,null,d,je);for(Ke in d)je=d[Ke],Ie=l[Ke],!d.hasOwnProperty(Ke)||je===Ie||je==null&&Ie==null||Ln(n,r,Ke,je,d,Ie)}function b1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var v=l[d],w=v.transferSize,k=v.initiatorType,U=v.duration;if(w&&U&&b1(k)){for(k=0,U=v.responseEnd,d+=1;d<l.length;d++){var te=l[d],Ee=te.startTime;if(Ee>U)break;var He=te.transferSize,Ke=te.initiatorType;He&&b1(Ke)&&(te=te.responseEnd,k+=He*(te<U?1:(U-Ee)/(te-Ee)))}if(--d,r+=8*(w+k)/(v.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Mp=null,Ip=null;function Gh(n){return n.nodeType===9?n:n.ownerDocument}function x1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _1(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Op(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pp=null;function cT(){var n=window.event;return n&&n.type==="popstate"?n===Pp?!1:(Pp=n,!0):(Pp=null,!1)}var w1=typeof setTimeout=="function"?setTimeout:void 0,uT=typeof clearTimeout=="function"?clearTimeout:void 0,S1=typeof Promise=="function"?Promise:void 0,dT=typeof queueMicrotask=="function"?queueMicrotask:typeof S1<"u"?function(n){return S1.resolve(null).then(n).catch(hT)}:w1;function hT(n){setTimeout(function(){throw n})}function $o(n){return n==="head"}function T1(n,r){var l=r,d=0;do{var v=l.nextSibling;if(n.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(d===0){n.removeChild(v),zc(r);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Xu(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Xu(l);for(var w=l.firstChild;w;){var k=w.nextSibling,U=w.nodeName;w[mn]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=k}}else l==="body"&&Xu(n.ownerDocument.body);l=v}while(l);zc(r)}function E1(n,r){var l=n;n=0;do{var d=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=d}while(l)}function Lp(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Lp(l),Bn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function fT(n,r,l,d){for(;n.nodeType===1;){var v=l;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[mn])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==v.rel||n.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||n.getAttribute("title")!==(v.title==null?null:v.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(v.src==null?null:v.src)||n.getAttribute("type")!==(v.type==null?null:v.type)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=ya(n.nextSibling),n===null)break}return null}function mT(n,r,l){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=ya(n.nextSibling),n===null))return null;return n}function N1(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=ya(n.nextSibling),n===null))return null;return n}function Vp(n){return n.data==="$?"||n.data==="$~"}function Up(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function pT(n,r){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||l.readyState!=="loading")r();else{var d=function(){r(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function ya(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Bp=null;function j1(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(r===0)return ya(n.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}n=n.nextSibling}return null}function k1(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return n;r--}else l!=="/$"&&l!=="/&"||r++}n=n.previousSibling}return null}function C1(n,r,l){switch(r=Gh(l),n){case"html":if(n=r.documentElement,!n)throw Error(a(452));return n;case"head":if(n=r.head,!n)throw Error(a(453));return n;case"body":if(n=r.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Xu(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Bn(n)}var va=new Map,A1=new Set;function Wh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var eo=_e.d;_e.d={f:gT,r:yT,D:vT,C:bT,L:xT,m:_T,X:ST,S:wT,M:TT};function gT(){var n=eo.f(),r=Vh();return n||r}function yT(n){var r=gs(n);r!==null&&r.tag===5&&r.type==="form"?Wv(r):eo.r(n)}var Vc=typeof document>"u"?null:document;function R1(n,r,l){var d=Vc;if(d&&typeof r=="string"&&r){var v=Xs(r);v='link[rel="'+n+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),A1.has(v)||(A1.add(v),n={rel:n,crossOrigin:l,href:r},d.querySelector(v)===null&&(r=d.createElement("link"),$s(r,"link",n),Hn(r),d.head.appendChild(r)))}}function vT(n){eo.D(n),R1("dns-prefetch",n,null)}function bT(n,r){eo.C(n,r),R1("preconnect",n,r)}function xT(n,r,l){eo.L(n,r,l);var d=Vc;if(d&&n&&r){var v='link[rel="preload"][as="'+Xs(r)+'"]';r==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Xs(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Xs(l.imageSizes)+'"]')):v+='[href="'+Xs(n)+'"]';var w=v;switch(r){case"style":w=Uc(n);break;case"script":w=Bc(n)}va.has(w)||(n=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:n,as:r},l),va.set(w,n),d.querySelector(v)!==null||r==="style"&&d.querySelector(Ju(w))||r==="script"&&d.querySelector(Zu(w))||(r=d.createElement("link"),$s(r,"link",n),Hn(r),d.head.appendChild(r)))}}function _T(n,r){eo.m(n,r);var l=Vc;if(l&&n){var d=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+Xs(d)+'"][href="'+Xs(n)+'"]',w=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Bc(n)}if(!va.has(w)&&(n=E({rel:"modulepreload",href:n},r),va.set(w,n),l.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Zu(w)))return}d=l.createElement("link"),$s(d,"link",n),Hn(d),l.head.appendChild(d)}}}function wT(n,r,l){eo.S(n,r,l);var d=Vc;if(d&&n){var v=Os(d).hoistableStyles,w=Uc(n);r=r||"default";var k=v.get(w);if(!k){var U={loading:0,preload:null};if(k=d.querySelector(Ju(w)))U.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":r},l),(l=va.get(w))&&zp(n,l);var te=k=d.createElement("link");Hn(te),$s(te,"link",n),te._p=new Promise(function(Ee,He){te.onload=Ee,te.onerror=He}),te.addEventListener("load",function(){U.loading|=1}),te.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Kh(k,r,d)}k={type:"stylesheet",instance:k,count:1,state:U},v.set(w,k)}}}function ST(n,r){eo.X(n,r);var l=Vc;if(l&&n){var d=Os(l).hoistableScripts,v=Bc(n),w=d.get(v);w||(w=l.querySelector(Zu(v)),w||(n=E({src:n,async:!0},r),(r=va.get(v))&&Fp(n,r),w=l.createElement("script"),Hn(w),$s(w,"link",n),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function TT(n,r){eo.M(n,r);var l=Vc;if(l&&n){var d=Os(l).hoistableScripts,v=Bc(n),w=d.get(v);w||(w=l.querySelector(Zu(v)),w||(n=E({src:n,async:!0,type:"module"},r),(r=va.get(v))&&Fp(n,r),w=l.createElement("script"),Hn(w),$s(w,"link",n),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function D1(n,r,l,d){var v=(v=Fe.current)?Wh(v):null;if(!v)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Uc(l.href),l=Os(v).hoistableStyles,d=l.get(r),d||(d={type:"style",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Uc(l.href);var w=Os(v).hoistableStyles,k=w.get(n);if(k||(v=v.ownerDocument||v,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,k),(w=v.querySelector(Ju(n)))&&!w._p&&(k.instance=w,k.state.loading=5),va.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},va.set(n,l),w||ET(v,n,l,k.state))),r&&d===null)throw Error(a(528,""));return k}if(r&&d!==null)throw Error(a(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Bc(l),l=Os(v).hoistableScripts,d=l.get(r),d||(d={type:"script",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Uc(n){return'href="'+Xs(n)+'"'}function Ju(n){return'link[rel="stylesheet"]['+n+"]"}function M1(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function ET(n,r,l,d){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=n.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),$s(r,"link",l),Hn(r),n.head.appendChild(r))}function Bc(n){return'[src="'+Xs(n)+'"]'}function Zu(n){return"script[async]"+n}function I1(n,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var d=n.querySelector('style[data-href~="'+Xs(l.href)+'"]');if(d)return r.instance=d,Hn(d),d;var v=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),Hn(d),$s(d,"style",v),Kh(d,l.precedence,n),r.instance=d;case"stylesheet":v=Uc(l.href);var w=n.querySelector(Ju(v));if(w)return r.state.loading|=4,r.instance=w,Hn(w),w;d=M1(l),(v=va.get(v))&&zp(d,v),w=(n.ownerDocument||n).createElement("link"),Hn(w);var k=w;return k._p=new Promise(function(U,te){k.onload=U,k.onerror=te}),$s(w,"link",d),r.state.loading|=4,Kh(w,l.precedence,n),r.instance=w;case"script":return w=Bc(l.src),(v=n.querySelector(Zu(w)))?(r.instance=v,Hn(v),v):(d=l,(v=va.get(w))&&(d=E({},l),Fp(d,v)),n=n.ownerDocument||n,v=n.createElement("script"),Hn(v),$s(v,"link",d),n.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Kh(d,l.precedence,n));return r.instance}function Kh(n,r,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,w=v,k=0;k<d.length;k++){var U=d[k];if(U.dataset.precedence===r)w=U;else if(w!==v)break}w?w.parentNode.insertBefore(n,w.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(n,r.firstChild))}function zp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Fp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Yh=null;function O1(n,r,l){if(Yh===null){var d=new Map,v=Yh=new Map;v.set(l,d)}else v=Yh,d=v.get(l),d||(d=new Map,v.set(l,d));if(d.has(n))return d;for(d.set(n,null),l=l.getElementsByTagName(n),v=0;v<l.length;v++){var w=l[v];if(!(w[mn]||w[ft]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var k=w.getAttribute(r)||"";k=n+k;var U=d.get(k);U?U.push(w):d.set(k,[w])}}return d}function P1(n,r,l){n=n.ownerDocument||n,n.head.insertBefore(l,r==="title"?n.querySelector("head > title"):null)}function NT(n,r,l){if(l===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function L1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function jT(n,r,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Uc(d.href),w=r.querySelector(Ju(v));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Qh.bind(n),r.then(n,n)),l.state.loading|=4,l.instance=w,Hn(w);return}w=r.ownerDocument||r,d=M1(d),(v=va.get(v))&&zp(d,v),w=w.createElement("link"),Hn(w);var k=w;k._p=new Promise(function(U,te){k.onload=U,k.onerror=te}),$s(w,"link",d),l.instance=w}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=Qh.bind(n),r.addEventListener("load",l),r.addEventListener("error",l))}}var qp=0;function kT(n,r){return n.stylesheets&&n.count===0&&Jh(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var d=setTimeout(function(){if(n.stylesheets&&Jh(n,n.stylesheets),n.unsuspend){var w=n.unsuspend;n.unsuspend=null,w()}},6e4+r);0<n.imgBytes&&qp===0&&(qp=62500*lT());var v=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Jh(n,n.stylesheets),n.unsuspend)){var w=n.unsuspend;n.unsuspend=null,w()}},(n.imgBytes>qp?50:800)+r);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function Qh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Xh=null;function Jh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Xh=new Map,r.forEach(CT,n),Xh=null,Qh.call(n))}function CT(n,r){if(!(r.state.loading&4)){var l=Xh.get(n);if(l)var d=l.get(null);else{l=new Map,Xh.set(n,l);for(var v=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var k=v[w];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(l.set(k.dataset.precedence,k),d=k)}d&&l.set(null,d)}v=r.instance,k=v.getAttribute("data-precedence"),w=l.get(k)||d,w===d&&l.set(null,v),l.set(k,v),this.count++,d=Qh.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),w?w.parentNode.insertBefore(v,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(v,n.firstChild)),r.state.loading|=4}}var ed={$$typeof:se,Provider:null,Consumer:null,_currentValue:Be,_currentValue2:Be,_threadCount:0};function AT(n,r,l,d,v,w,k,U,te){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xn(0),this.hiddenUpdates=xn(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=te,this.incompleteTransitions=new Map}function V1(n,r,l,d,v,w,k,U,te,Ee,He,Ke){return n=new AT(n,r,l,k,te,Ee,He,Ke,U),r=1,w===!0&&(r|=24),w=ks(3,null,null,r),n.current=w,w.stateNode=n,r=Iu(),r.refCount++,n.pooledCache=r,r.refCount++,w.memoizedState={element:d,isDehydrated:l,cache:r},tn(w),n}function U1(n){return n?(n=Vi,n):Vi}function B1(n,r,l,d,v,w){v=U1(v),d.context===null?d.context=v:d.pendingContext=v,d=bs(r),d.payload={element:l},w=w===void 0?null:w,w!==null&&(d.callback=w),l=On(n,d,r),l!==null&&(Pr(l,n,r),Ra(l,n,r))}function z1(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function Hp(n,r){z1(n,r),(n=n.alternate)&&z1(n,r)}function F1(n){if(n.tag===13||n.tag===31){var r=ai(n,67108864);r!==null&&Pr(r,n,67108864),Hp(n,67108864)}}function q1(n){if(n.tag===13||n.tag===31){var r=Zr();r=me(r);var l=ai(n,r);l!==null&&Pr(l,n,r),Hp(n,r)}}var Zh=!0;function RT(n,r,l,d){var v=ee.T;ee.T=null;var w=_e.p;try{_e.p=2,$p(n,r,l,d)}finally{_e.p=w,ee.T=v}}function DT(n,r,l,d){var v=ee.T;ee.T=null;var w=_e.p;try{_e.p=8,$p(n,r,l,d)}finally{_e.p=w,ee.T=v}}function $p(n,r,l,d){if(Zh){var v=Gp(d);if(v===null)Rp(n,r,d,ef,l),$1(n,d);else if(IT(v,n,r,l,d))d.stopPropagation();else if($1(n,d),r&4&&-1<MT.indexOf(n)){for(;v!==null;){var w=gs(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var k=xt(w.pendingLanes);if(k!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;k;){var te=1<<31-it(k);U.entanglements[1]|=te,k&=~te}hi(w),(jn&6)===0&&(Ph=We()+500,Ku(0))}}break;case 31:case 13:U=ai(w,2),U!==null&&Pr(U,w,2),Vh(),Hp(w,2)}if(w=Gp(d),w===null&&Rp(n,r,d,ef,l),w===v)break;v=w}v!==null&&d.stopPropagation()}else Rp(n,r,d,null,l)}}function Gp(n){return n=Tr(n),Wp(n)}var ef=null;function Wp(n){if(ef=null,n=ls(n),n!==null){var r=c(n);if(r===null)n=null;else{var l=r.tag;if(l===13){if(n=u(r),n!==null)return n;n=null}else if(l===31){if(n=f(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return ef=n,null}function H1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_t()){case wt:return 2;case Vt:return 8;case Lt:case nn:return 32;case Kt:return 268435456;default:return 32}default:return 32}}var Kp=!1,Go=null,Wo=null,Ko=null,td=new Map,nd=new Map,Yo=[],MT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $1(n,r){switch(n){case"focusin":case"focusout":Go=null;break;case"dragenter":case"dragleave":Wo=null;break;case"mouseover":case"mouseout":Ko=null;break;case"pointerover":case"pointerout":td.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":nd.delete(r.pointerId)}}function sd(n,r,l,d,v,w){return n===null||n.nativeEvent!==w?(n={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:w,targetContainers:[v]},r!==null&&(r=gs(r),r!==null&&F1(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),n)}function IT(n,r,l,d,v){switch(r){case"focusin":return Go=sd(Go,n,r,l,d,v),!0;case"dragenter":return Wo=sd(Wo,n,r,l,d,v),!0;case"mouseover":return Ko=sd(Ko,n,r,l,d,v),!0;case"pointerover":var w=v.pointerId;return td.set(w,sd(td.get(w)||null,n,r,l,d,v)),!0;case"gotpointercapture":return w=v.pointerId,nd.set(w,sd(nd.get(w)||null,n,r,l,d,v)),!0}return!1}function G1(n){var r=ls(n.target);if(r!==null){var l=c(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){n.blockedOn=r,Ye(n.priority,function(){q1(l)});return}}else if(r===31){if(r=f(l),r!==null){n.blockedOn=r,Ye(n.priority,function(){q1(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function tf(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=Gp(n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);Sl=d,l.target.dispatchEvent(d),Sl=null}else return r=gs(l),r!==null&&F1(r),n.blockedOn=l,!1;r.shift()}return!0}function W1(n,r,l){tf(n)&&l.delete(r)}function OT(){Kp=!1,Go!==null&&tf(Go)&&(Go=null),Wo!==null&&tf(Wo)&&(Wo=null),Ko!==null&&tf(Ko)&&(Ko=null),td.forEach(W1),nd.forEach(W1)}function nf(n,r){n.blockedOn===r&&(n.blockedOn=null,Kp||(Kp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,OT)))}var sf=null;function K1(n){sf!==n&&(sf=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){sf===n&&(sf=null);for(var r=0;r<n.length;r+=3){var l=n[r],d=n[r+1],v=n[r+2];if(typeof d!="function"){if(Wp(d||l)===null)continue;break}var w=gs(l);w!==null&&(n.splice(r,3),r-=3,Gm(w,{pending:!0,data:v,method:l.method,action:d},d,v))}}))}function zc(n){function r(te){return nf(te,n)}Go!==null&&nf(Go,n),Wo!==null&&nf(Wo,n),Ko!==null&&nf(Ko,n),td.forEach(r),nd.forEach(r);for(var l=0;l<Yo.length;l++){var d=Yo[l];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Yo.length&&(l=Yo[0],l.blockedOn===null);)G1(l),l.blockedOn===null&&Yo.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var v=l[d],w=l[d+1],k=v[Tt]||null;if(typeof w=="function")k||K1(l);else if(k){var U=null;if(w&&w.hasAttribute("formAction")){if(v=w,k=w[Tt]||null)U=k.formAction;else if(Wp(v)!==null)continue}else U=k.action;typeof U=="function"?l[d+1]=U:(l.splice(d,3),d-=3),K1(l)}}}function Y1(){function n(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(k){return v=k})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function Yp(n){this._internalRoot=n}rf.prototype.render=Yp.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(a(409));var l=r.current,d=Zr();B1(l,d,n,r,null,null)},rf.prototype.unmount=Yp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;B1(n.current,2,null,n,null,null),Vh(),r[ie]=null}};function rf(n){this._internalRoot=n}rf.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ze();n={blockedOn:null,target:n,priority:r};for(var l=0;l<Yo.length&&r!==0&&r<Yo[l].priority;l++);Yo.splice(l,0,n),l===0&&G1(n)}};var Q1=e.version;if(Q1!=="19.2.4")throw Error(a(527,Q1,"19.2.4"));_e.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=b(r),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var PT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{Fn=af.inject(PT),Le=af}catch{}}return ad.createRoot=function(n,r){if(!i(n))throw Error(a(299));var l=!1,d="",v=s0,w=r0,k=a0;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(k=r.onRecoverableError)),r=V1(n,1,!1,null,null,l,d,null,v,w,k,Y1),n[ie]=r.current,Ap(n),new Yp(r)},ad.hydrateRoot=function(n,r,l){if(!i(n))throw Error(a(299));var d=!1,v="",w=s0,k=r0,U=a0,te=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(k=l.onCaughtError),l.onRecoverableError!==void 0&&(U=l.onRecoverableError),l.formState!==void 0&&(te=l.formState)),r=V1(n,1,!0,r,l??null,d,v,te,w,k,U,Y1),r.context=U1(null),l=r.current,d=Zr(),d=me(d),v=bs(d),v.callback=null,On(l,v,d),l=d,r.current.lanes=l,Un(r,l),hi(r),n[ie]=r.current,Ap(n),new rf(r)},ad.version="19.2.4",ad}var ib;function WT(){if(ib)return Jp.exports;ib=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Jp.exports=GT(),Jp.exports}var KT=WT();var ob="popstate";function YT(s={}){function e(a,i){let{pathname:c,search:u,hash:f}=a.location;return Ng("",{pathname:c,search:u,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(a,i){return typeof i=="string"?i:kd(i)}return XT(e,t,null,s)}function Xn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ba(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QT(){return Math.random().toString(36).substring(2,10)}function lb(s,e){return{usr:s.state,key:s.key,idx:e}}function Ng(s,e,t=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?iu(e):e,state:t,key:e&&e.key||a||QT()}}function kd({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function iu(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function XT(s,e,t,a={}){let{window:i=document.defaultView,v5Compat:c=!1}=a,u=i.history,f="POP",m=null,b=T();b==null&&(b=0,u.replaceState({...u.state,idx:b},""));function T(){return(u.state||{idx:null}).idx}function E(){f="POP";let F=T(),Y=F==null?null:F-b;b=F,m&&m({action:f,location:V.location,delta:Y})}function C(F,Y){f="PUSH";let W=Ng(V.location,F,Y);b=T()+1;let se=lb(W,b),K=V.createHref(W);try{u.pushState(se,"",K)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;i.location.assign(K)}c&&m&&m({action:f,location:V.location,delta:1})}function L(F,Y){f="REPLACE";let W=Ng(V.location,F,Y);b=T();let se=lb(W,b),K=V.createHref(W);u.replaceState(se,"",K),c&&m&&m({action:f,location:V.location,delta:0})}function P(F){return JT(F)}let V={get action(){return f},get location(){return s(i,u)},listen(F){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(ob,E),m=F,()=>{i.removeEventListener(ob,E),m=null}},createHref(F){return e(i,F)},createURL:P,encodeLocation(F){let Y=P(F);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:C,replace:L,go(F){return u.go(F)}};return V}function JT(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Xn(t,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:kd(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function d_(s,e,t="/"){return ZT(s,e,t,!1)}function ZT(s,e,t,a){let i=typeof e=="string"?iu(e):e,c=oo(i.pathname||"/",t);if(c==null)return null;let u=h_(s);eE(u);let f=null;for(let m=0;f==null&&m<u.length;++m){let b=dE(c);f=cE(u[m],b,a)}return f}function h_(s,e=[],t=[],a="",i=!1){let c=(u,f,m=i,b)=>{let T={relativePath:b===void 0?u.path||"":b,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(T.relativePath.startsWith("/")){if(!T.relativePath.startsWith(a)&&m)return;Xn(T.relativePath.startsWith(a),`Absolute route path "${T.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),T.relativePath=T.relativePath.slice(a.length)}let E=ro([a,T.relativePath]),C=t.concat(T);u.children&&u.children.length>0&&(Xn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),h_(u.children,e,C,E,m)),!(u.path==null&&!u.index)&&e.push({path:E,score:oE(E,u.index),routesMeta:C})};return s.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))c(u,f);else for(let m of f_(u.path))c(u,f,!0,m)}),e}function f_(s){let e=s.split("/");if(e.length===0)return[];let[t,...a]=e,i=t.endsWith("?"),c=t.replace(/\?$/,"");if(a.length===0)return i?[c,""]:[c];let u=f_(a.join("/")),f=[];return f.push(...u.map(m=>m===""?c:[c,m].join("/"))),i&&f.push(...u),f.map(m=>s.startsWith("/")&&m===""?"/":m)}function eE(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:lE(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var tE=/^:[\w-]+$/,nE=3,sE=2,rE=1,aE=10,iE=-2,cb=s=>s==="*";function oE(s,e){let t=s.split("/"),a=t.length;return t.some(cb)&&(a+=iE),e&&(a+=sE),t.filter(i=>!cb(i)).reduce((i,c)=>i+(tE.test(c)?nE:c===""?rE:aE),a)}function lE(s,e){return s.length===e.length&&s.slice(0,-1).every((a,i)=>a===e[i])?s[s.length-1]-e[e.length-1]:0}function cE(s,e,t=!1){let{routesMeta:a}=s,i={},c="/",u=[];for(let f=0;f<a.length;++f){let m=a[f],b=f===a.length-1,T=c==="/"?e:e.slice(c.length)||"/",E=If({path:m.relativePath,caseSensitive:m.caseSensitive,end:b},T),C=m.route;if(!E&&b&&t&&!a[a.length-1].route.index&&(E=If({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},T)),!E)return null;Object.assign(i,E.params),u.push({params:i,pathname:ro([c,E.pathname]),pathnameBase:pE(ro([c,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(c=ro([c,E.pathnameBase]))}return u}function If(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,a]=uE(s.path,s.caseSensitive,s.end),i=e.match(t);if(!i)return null;let c=i[0],u=c.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:a.reduce((b,{paramName:T,isOptional:E},C)=>{if(T==="*"){let P=f[C]||"";u=c.slice(0,c.length-P.length).replace(/(.)\/+$/,"$1")}const L=f[C];return E&&!L?b[T]=void 0:b[T]=(L||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:u,pattern:s}}function uE(s,e=!1,t=!0){Ba(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,m)=>(a.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function dE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ba(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function oo(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=s.charAt(t);return a&&a!=="/"?null:s.slice(t)||"/"}var hE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function fE(s,e="/"){let{pathname:t,search:a="",hash:i=""}=typeof s=="string"?iu(s):s,c;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?c=ub(t.substring(1),"/"):c=ub(t,e)):c=e,{pathname:c,search:gE(a),hash:yE(i)}}function ub(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ng(s,e,t,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mE(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cy(s){let e=mE(s);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function uy(s,e,t,a=!1){let i;typeof s=="string"?i=iu(s):(i={...s},Xn(!i.pathname||!i.pathname.includes("?"),ng("?","pathname","search",i)),Xn(!i.pathname||!i.pathname.includes("#"),ng("#","pathname","hash",i)),Xn(!i.search||!i.search.includes("#"),ng("#","search","hash",i)));let c=s===""||i.pathname==="",u=c?"/":i.pathname,f;if(u==null)f=t;else{let E=e.length-1;if(!a&&u.startsWith("..")){let C=u.split("/");for(;C[0]==="..";)C.shift(),E-=1;i.pathname=C.join("/")}f=E>=0?e[E]:"/"}let m=fE(i,f),b=u&&u!=="/"&&u.endsWith("/"),T=(c||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(b||T)&&(m.pathname+="/"),m}var ro=s=>s.join("/").replace(/\/\/+/g,"/"),pE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),gE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,yE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,vE=class{constructor(s,e,t,a=!1){this.status=s,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function bE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function xE(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var m_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function p_(s,e){let t=s;if(typeof t!="string"||!hE.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,i=!1;if(m_)try{let c=new URL(window.location.href),u=t.startsWith("//")?new URL(c.protocol+t):new URL(t),f=oo(u.pathname,e);u.origin===c.origin&&f!=null?t=f+u.search+u.hash:i=!0}catch{Ba(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var g_=["POST","PUT","PATCH","DELETE"];new Set(g_);var _E=["GET",...g_];new Set(_E);var ou=I.createContext(null);ou.displayName="DataRouter";var nm=I.createContext(null);nm.displayName="DataRouterState";var wE=I.createContext(!1),y_=I.createContext({isTransitioning:!1});y_.displayName="ViewTransition";var SE=I.createContext(new Map);SE.displayName="Fetchers";var TE=I.createContext(null);TE.displayName="Await";var na=I.createContext(null);na.displayName="Navigation";var Bd=I.createContext(null);Bd.displayName="Location";var Si=I.createContext({outlet:null,matches:[],isDataRoute:!1});Si.displayName="Route";var dy=I.createContext(null);dy.displayName="RouteError";var v_="REACT_ROUTER_ERROR",EE="REDIRECT",NE="ROUTE_ERROR_RESPONSE";function jE(s){if(s.startsWith(`${v_}:${EE}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function kE(s){if(s.startsWith(`${v_}:${NE}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new vE(e.status,e.statusText,e.data)}catch{}}function CE(s,{relative:e}={}){Xn(lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=I.useContext(na),{hash:i,pathname:c,search:u}=zd(s,{relative:e}),f=c;return t!=="/"&&(f=c==="/"?t:ro([t,c])),a.createHref({pathname:f,search:u,hash:i})}function lu(){return I.useContext(Bd)!=null}function fo(){return Xn(lu(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Bd).location}var b_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function x_(s){I.useContext(na).static||I.useLayoutEffect(s)}function Ms(){let{isDataRoute:s}=I.useContext(Si);return s?FE():AE()}function AE(){Xn(lu(),"useNavigate() may be used only in the context of a <Router> component.");let s=I.useContext(ou),{basename:e,navigator:t}=I.useContext(na),{matches:a}=I.useContext(Si),{pathname:i}=fo(),c=JSON.stringify(cy(a)),u=I.useRef(!1);return x_(()=>{u.current=!0}),I.useCallback((m,b={})=>{if(Ba(u.current,b_),!u.current)return;if(typeof m=="number"){t.go(m);return}let T=uy(m,JSON.parse(c),i,b.relative==="path");s==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:ro([e,T.pathname])),(b.replace?t.replace:t.push)(T,b.state,b)},[e,t,c,i,s])}I.createContext(null);function zd(s,{relative:e}={}){let{matches:t}=I.useContext(Si),{pathname:a}=fo(),i=JSON.stringify(cy(t));return I.useMemo(()=>uy(s,JSON.parse(i),a,e==="path"),[s,i,a,e])}function RE(s,e){return __(s,e)}function __(s,e,t,a,i){Xn(lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=I.useContext(na),{matches:u}=I.useContext(Si),f=u[u.length-1],m=f?f.params:{},b=f?f.pathname:"/",T=f?f.pathnameBase:"/",E=f&&f.route;{let W=E&&E.path||"";S_(b,!E||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let C=fo(),L;if(e){let W=typeof e=="string"?iu(e):e;Xn(T==="/"||W.pathname?.startsWith(T),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${W.pathname}" was given in the \`location\` prop.`),L=W}else L=C;let P=L.pathname||"/",V=P;if(T!=="/"){let W=T.replace(/^\//,"").split("/");V="/"+P.replace(/^\//,"").split("/").slice(W.length).join("/")}let F=d_(s,{pathname:V});Ba(E||F!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),Ba(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=PE(F&&F.map(W=>Object.assign({},W,{params:Object.assign({},m,W.params),pathname:ro([T,c.encodeLocation?c.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?T:ro([T,c.encodeLocation?c.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),u,t,a,i);return e&&Y?I.createElement(Bd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},Y):Y}function DE(){let s=zE(),e=bE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:c},"ErrorBoundary")," or"," ",I.createElement("code",{style:c},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:i},t):null,u)}var ME=I.createElement(DE,null),w_=class extends I.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=kE(s.digest);t&&(s=t)}let e=s!==void 0?I.createElement(Si.Provider,{value:this.props.routeContext},I.createElement(dy.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?I.createElement(IE,{error:s},e):e}};w_.contextType=wE;var sg=new WeakMap;function IE({children:s,error:e}){let{basename:t}=I.useContext(na);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=jE(e.digest);if(a){let i=sg.get(e);if(i)throw i;let c=p_(a.location,t);if(m_&&!sg.get(e))if(c.isExternal||a.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:a.replace}));throw sg.set(e,u),u}return I.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return s}function OE({routeContext:s,match:e,children:t}){let a=I.useContext(ou);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Si.Provider,{value:s},t)}function PE(s,e=[],t=null,a=null,i=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let c=s,u=t?.errors;if(u!=null){let T=c.findIndex(E=>E.route.id&&u?.[E.route.id]!==void 0);Xn(T>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,T+1))}let f=!1,m=-1;if(t)for(let T=0;T<c.length;T++){let E=c[T];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=T),E.route.id){let{loaderData:C,errors:L}=t,P=E.route.loader&&!C.hasOwnProperty(E.route.id)&&(!L||L[E.route.id]===void 0);if(E.route.lazy||P){f=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}let b=t&&a?(T,E)=>{a(T,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:xE(t.matches),errorInfo:E})}:void 0;return c.reduceRight((T,E,C)=>{let L,P=!1,V=null,F=null;t&&(L=u&&E.route.id?u[E.route.id]:void 0,V=E.route.errorElement||ME,f&&(m<0&&C===0?(S_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,F=null):m===C&&(P=!0,F=E.route.hydrateFallbackElement||null)));let Y=e.concat(c.slice(0,C+1)),W=()=>{let se;return L?se=V:P?se=F:E.route.Component?se=I.createElement(E.route.Component,null):E.route.element?se=E.route.element:se=T,I.createElement(OE,{match:E,routeContext:{outlet:T,matches:Y,isDataRoute:t!=null},children:se})};return t&&(E.route.ErrorBoundary||E.route.errorElement||C===0)?I.createElement(w_,{location:t.location,revalidation:t.revalidation,component:V,error:L,children:W(),routeContext:{outlet:null,matches:Y,isDataRoute:!0},onError:b}):W()},null)}function hy(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LE(s){let e=I.useContext(ou);return Xn(e,hy(s)),e}function VE(s){let e=I.useContext(nm);return Xn(e,hy(s)),e}function UE(s){let e=I.useContext(Si);return Xn(e,hy(s)),e}function fy(s){let e=UE(s),t=e.matches[e.matches.length-1];return Xn(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function BE(){return fy("useRouteId")}function zE(){let s=I.useContext(dy),e=VE("useRouteError"),t=fy("useRouteError");return s!==void 0?s:e.errors?.[t]}function FE(){let{router:s}=LE("useNavigate"),e=fy("useNavigate"),t=I.useRef(!1);return x_(()=>{t.current=!0}),I.useCallback(async(i,c={})=>{Ba(t.current,b_),t.current&&(typeof i=="number"?await s.navigate(i):await s.navigate(i,{fromRouteId:e,...c}))},[s,e])}var db={};function S_(s,e,t){!e&&!db[s]&&(db[s]=!0,Ba(!1,t))}I.memo(qE);function qE({routes:s,future:e,state:t,onError:a}){return __(s,void 0,t,a,e)}function HE({to:s,replace:e,state:t,relative:a}){Xn(lu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=I.useContext(na);Ba(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=I.useContext(Si),{pathname:u}=fo(),f=Ms(),m=uy(s,cy(c),u,a==="path"),b=JSON.stringify(m);return I.useEffect(()=>{f(JSON.parse(b),{replace:e,state:t,relative:a})},[f,b,a,e,t]),null}function Vs(s){Xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $E({basename:s="/",children:e=null,location:t,navigationType:a="POP",navigator:i,static:c=!1,unstable_useTransitions:u}){Xn(!lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=s.replace(/^\/*/,"/"),m=I.useMemo(()=>({basename:f,navigator:i,static:c,unstable_useTransitions:u,future:{}}),[f,i,c,u]);typeof t=="string"&&(t=iu(t));let{pathname:b="/",search:T="",hash:E="",state:C=null,key:L="default"}=t,P=I.useMemo(()=>{let V=oo(b,f);return V==null?null:{location:{pathname:V,search:T,hash:E,state:C,key:L},navigationType:a}},[f,b,T,E,C,L,a]);return Ba(P!=null,`<Router basename="${f}"> is not able to match the URL "${b}${T}${E}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:I.createElement(na.Provider,{value:m},I.createElement(Bd.Provider,{children:e,value:P}))}function GE({children:s,location:e}){return RE(jg(s),e)}function jg(s,e=[]){let t=[];return I.Children.forEach(s,(a,i)=>{if(!I.isValidElement(a))return;let c=[...e,i];if(a.type===I.Fragment){t.push.apply(t,jg(a.props.children,c));return}Xn(a.type===Vs,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xn(!a.props.index||!a.props.children,"An index route cannot have child routes.");let u={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(u.children=jg(a.props.children,c)),t.push(u)}),t}var bf="get",xf="application/x-www-form-urlencoded";function sm(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function WE(s){return sm(s)&&s.tagName.toLowerCase()==="button"}function KE(s){return sm(s)&&s.tagName.toLowerCase()==="form"}function YE(s){return sm(s)&&s.tagName.toLowerCase()==="input"}function QE(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function XE(s,e){return s.button===0&&(!e||e==="_self")&&!QE(s)}var of=null;function JE(){if(of===null)try{new FormData(document.createElement("form"),0),of=!1}catch{of=!0}return of}var ZE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rg(s){return s!=null&&!ZE.has(s)?(Ba(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xf}"`),null):s}function eN(s,e){let t,a,i,c,u;if(KE(s)){let f=s.getAttribute("action");a=f?oo(f,e):null,t=s.getAttribute("method")||bf,i=rg(s.getAttribute("enctype"))||xf,c=new FormData(s)}else if(WE(s)||YE(s)&&(s.type==="submit"||s.type==="image")){let f=s.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||f.getAttribute("action");if(a=m?oo(m,e):null,t=s.getAttribute("formmethod")||f.getAttribute("method")||bf,i=rg(s.getAttribute("formenctype"))||rg(f.getAttribute("enctype"))||xf,c=new FormData(f,s),!JE()){let{name:b,type:T,value:E}=s;if(T==="image"){let C=b?`${b}.`:"";c.append(`${C}x`,"0"),c.append(`${C}y`,"0")}else b&&c.append(b,E)}}else{if(sm(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bf,a=null,i=xf,u=s}return c&&i==="text/plain"&&(u=c,c=void 0),{action:a,method:t.toLowerCase(),encType:i,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function my(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function tN(s,e,t,a){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${a}`:i.pathname=`${i.pathname}.${a}`:i.pathname==="/"?i.pathname=`_root.${a}`:e&&oo(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${a}`,i}async function nN(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sN(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function rN(s,e,t){let a=await Promise.all(s.map(async i=>{let c=e.routes[i.route.id];if(c){let u=await nN(c,t);return u.links?u.links():[]}return[]}));return lN(a.flat(1).filter(sN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function hb(s,e,t,a,i,c){let u=(m,b)=>t[b]?m.route.id!==t[b].route.id:!0,f=(m,b)=>t[b].pathname!==m.pathname||t[b].route.path?.endsWith("*")&&t[b].params["*"]!==m.params["*"];return c==="assets"?e.filter((m,b)=>u(m,b)||f(m,b)):c==="data"?e.filter((m,b)=>{let T=a.routes[m.route.id];if(!T||!T.hasLoader)return!1;if(u(m,b)||f(m,b))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function aN(s,e,{includeHydrateFallback:t}={}){return iN(s.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let c=[i.module];return i.clientActionModule&&(c=c.concat(i.clientActionModule)),i.clientLoaderModule&&(c=c.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(c=c.concat(i.hydrateFallbackModule)),i.imports&&(c=c.concat(i.imports)),c}).flat(1))}function iN(s){return[...new Set(s)]}function oN(s){let e={},t=Object.keys(s).sort();for(let a of t)e[a]=s[a];return e}function lN(s,e){let t=new Set;return new Set(e),s.reduce((a,i)=>{let c=JSON.stringify(oN(i));return t.has(c)||(t.add(c),a.push({key:c,link:i})),a},[])}function T_(){let s=I.useContext(ou);return my(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function cN(){let s=I.useContext(nm);return my(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var py=I.createContext(void 0);py.displayName="FrameworkContext";function E_(){let s=I.useContext(py);return my(s,"You must render this element inside a <HydratedRouter> element"),s}function uN(s,e){let t=I.useContext(py),[a,i]=I.useState(!1),[c,u]=I.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:b,onMouseLeave:T,onTouchStart:E}=e,C=I.useRef(null);I.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let V=Y=>{Y.forEach(W=>{u(W.isIntersecting)})},F=new IntersectionObserver(V,{threshold:.5});return C.current&&F.observe(C.current),()=>{F.disconnect()}}},[s]),I.useEffect(()=>{if(a){let V=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(V)}}},[a]);let L=()=>{i(!0)},P=()=>{i(!1),u(!1)};return t?s!=="intent"?[c,C,{}]:[c,C,{onFocus:id(f,L),onBlur:id(m,P),onMouseEnter:id(b,L),onMouseLeave:id(T,P),onTouchStart:id(E,L)}]:[!1,C,{}]}function id(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function dN({page:s,...e}){let{router:t}=T_(),a=I.useMemo(()=>d_(t.routes,s,t.basename),[t.routes,s,t.basename]);return a?I.createElement(fN,{page:s,matches:a,...e}):null}function hN(s){let{manifest:e,routeModules:t}=E_(),[a,i]=I.useState([]);return I.useEffect(()=>{let c=!1;return rN(s,e,t).then(u=>{c||i(u)}),()=>{c=!0}},[s,e,t]),a}function fN({page:s,matches:e,...t}){let a=fo(),{future:i,manifest:c,routeModules:u}=E_(),{basename:f}=T_(),{loaderData:m,matches:b}=cN(),T=I.useMemo(()=>hb(s,e,b,c,a,"data"),[s,e,b,c,a]),E=I.useMemo(()=>hb(s,e,b,c,a,"assets"),[s,e,b,c,a]),C=I.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let V=new Set,F=!1;if(e.forEach(W=>{let se=c.routes[W.route.id];!se||!se.hasLoader||(!T.some(K=>K.route.id===W.route.id)&&W.route.id in m&&u[W.route.id]?.shouldRevalidate||se.hasClientLoader?F=!0:V.add(W.route.id))}),V.size===0)return[];let Y=tN(s,f,i.unstable_trailingSlashAwareDataRequests,"data");return F&&V.size>0&&Y.searchParams.set("_routes",e.filter(W=>V.has(W.route.id)).map(W=>W.route.id).join(",")),[Y.pathname+Y.search]},[f,i.unstable_trailingSlashAwareDataRequests,m,a,c,T,e,s,u]),L=I.useMemo(()=>aN(E,c),[E,c]),P=hN(E);return I.createElement(I.Fragment,null,C.map(V=>I.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),L.map(V=>I.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),P.map(({key:V,link:F})=>I.createElement("link",{key:V,nonce:t.nonce,...F,crossOrigin:F.crossOrigin??t.crossOrigin})))}function mN(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var pN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pN&&(window.__reactRouterVersion="7.13.0")}catch{}function gN({basename:s,children:e,unstable_useTransitions:t,window:a}){let i=I.useRef();i.current==null&&(i.current=YT({window:a,v5Compat:!0}));let c=i.current,[u,f]=I.useState({action:c.action,location:c.location}),m=I.useCallback(b=>{t===!1?f(b):I.startTransition(()=>f(b))},[t]);return I.useLayoutEffect(()=>c.listen(m),[c,m]),I.createElement($E,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:c,unstable_useTransitions:t})}var N_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j_=I.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:i,reloadDocument:c,replace:u,state:f,target:m,to:b,preventScrollReset:T,viewTransition:E,unstable_defaultShouldRevalidate:C,...L},P){let{basename:V,unstable_useTransitions:F}=I.useContext(na),Y=typeof b=="string"&&N_.test(b),W=p_(b,V);b=W.to;let se=CE(b,{relative:i}),[K,fe,ke]=uN(a,L),q=xN(b,{replace:u,state:f,target:m,preventScrollReset:T,relative:i,viewTransition:E,unstable_defaultShouldRevalidate:C,unstable_useTransitions:F});function B(J){e&&e(J),J.defaultPrevented||q(J)}let H=I.createElement("a",{...L,...ke,href:W.absoluteURL||se,onClick:W.isExternal||c?e:B,ref:mN(P,fe),target:m,"data-discover":!Y&&t==="render"?"true":void 0});return K&&!Y?I.createElement(I.Fragment,null,H,I.createElement(dN,{page:se})):H});j_.displayName="Link";var yN=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:i=!1,style:c,to:u,viewTransition:f,children:m,...b},T){let E=zd(u,{relative:b.relative}),C=fo(),L=I.useContext(nm),{navigator:P,basename:V}=I.useContext(na),F=L!=null&&EN(E)&&f===!0,Y=P.encodeLocation?P.encodeLocation(E).pathname:E.pathname,W=C.pathname,se=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;t||(W=W.toLowerCase(),se=se?se.toLowerCase():null,Y=Y.toLowerCase()),se&&V&&(se=oo(se,V)||se);const K=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let fe=W===Y||!i&&W.startsWith(Y)&&W.charAt(K)==="/",ke=se!=null&&(se===Y||!i&&se.startsWith(Y)&&se.charAt(Y.length)==="/"),q={isActive:fe,isPending:ke,isTransitioning:F},B=fe?e:void 0,H;typeof a=="function"?H=a(q):H=[a,fe?"active":null,ke?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let J=typeof c=="function"?c(q):c;return I.createElement(j_,{...b,"aria-current":B,className:H,ref:T,style:J,to:u,viewTransition:f},typeof m=="function"?m(q):m)});yN.displayName="NavLink";var vN=I.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:i,state:c,method:u=bf,action:f,onSubmit:m,relative:b,preventScrollReset:T,viewTransition:E,unstable_defaultShouldRevalidate:C,...L},P)=>{let{unstable_useTransitions:V}=I.useContext(na),F=SN(),Y=TN(f,{relative:b}),W=u.toLowerCase()==="get"?"get":"post",se=typeof f=="string"&&N_.test(f),K=fe=>{if(m&&m(fe),fe.defaultPrevented)return;fe.preventDefault();let ke=fe.nativeEvent.submitter,q=ke?.getAttribute("formmethod")||u,B=()=>F(ke||fe.currentTarget,{fetcherKey:e,method:q,navigate:t,replace:i,state:c,relative:b,preventScrollReset:T,viewTransition:E,unstable_defaultShouldRevalidate:C});V&&t!==!1?I.startTransition(()=>B()):B()};return I.createElement("form",{ref:P,method:W,action:Y,onSubmit:a?m:K,...L,"data-discover":!se&&s==="render"?"true":void 0})});vN.displayName="Form";function bN(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function k_(s){let e=I.useContext(ou);return Xn(e,bN(s)),e}function xN(s,{target:e,replace:t,state:a,preventScrollReset:i,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let b=Ms(),T=fo(),E=zd(s,{relative:c});return I.useCallback(C=>{if(XE(C,e)){C.preventDefault();let L=t!==void 0?t:kd(T)===kd(E),P=()=>b(s,{replace:L,state:a,preventScrollReset:i,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:f});m?I.startTransition(()=>P()):P()}},[T,b,E,t,a,e,s,i,c,u,f,m])}var _N=0,wN=()=>`__${String(++_N)}__`;function SN(){let{router:s}=k_("useSubmit"),{basename:e}=I.useContext(na),t=BE(),a=s.fetch,i=s.navigate;return I.useCallback(async(c,u={})=>{let{action:f,method:m,encType:b,formData:T,body:E}=eN(c,e);if(u.navigate===!1){let C=u.fetcherKey||wN();await a(C,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:T,body:E,formMethod:u.method||m,formEncType:u.encType||b,flushSync:u.flushSync})}else await i(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:T,body:E,formMethod:u.method||m,formEncType:u.encType||b,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[a,i,e,t])}function TN(s,{relative:e}={}){let{basename:t}=I.useContext(na),a=I.useContext(Si);Xn(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),c={...zd(s||".",{relative:e})},u=fo();if(s==null){c.search=u.search;let f=new URLSearchParams(c.search),m=f.getAll("index");if(m.some(T=>T==="")){f.delete("index"),m.filter(E=>E).forEach(E=>f.append("index",E));let T=f.toString();c.search=T?`?${T}`:""}}return(!s||s===".")&&i.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:ro([t,c.pathname])),kd(c)}function EN(s,{relative:e}={}){let t=I.useContext(y_);Xn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=k_("useViewTransitionState"),i=zd(s,{relative:e});if(!t.isTransitioning)return!1;let c=oo(t.currentLocation.pathname,a)||t.currentLocation.pathname,u=oo(t.nextLocation.pathname,a)||t.nextLocation.pathname;return If(i.pathname,u)!=null||If(i.pathname,c)!=null}const NN=()=>{};var fb={};const C_=function(s){const e=[];let t=0;for(let a=0;a<s.length;a++){let i=s.charCodeAt(a);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++a)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},jN=function(s){const e=[];let t=0,a=0;for(;t<s.length;){const i=s[t++];if(i<128)e[a++]=String.fromCharCode(i);else if(i>191&&i<224){const c=s[t++];e[a++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=s[t++],u=s[t++],f=s[t++],m=((i&7)<<18|(c&63)<<12|(u&63)<<6|f&63)-65536;e[a++]=String.fromCharCode(55296+(m>>10)),e[a++]=String.fromCharCode(56320+(m&1023))}else{const c=s[t++],u=s[t++];e[a++]=String.fromCharCode((i&15)<<12|(c&63)<<6|u&63)}}return e.join("")},A_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<s.length;i+=3){const c=s[i],u=i+1<s.length,f=u?s[i+1]:0,m=i+2<s.length,b=m?s[i+2]:0,T=c>>2,E=(c&3)<<4|f>>4;let C=(f&15)<<2|b>>6,L=b&63;m||(L=64,u||(C=64)),a.push(t[T],t[E],t[C],t[L])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(C_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):jN(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<s.length;){const c=t[s.charAt(i++)],f=i<s.length?t[s.charAt(i)]:0;++i;const b=i<s.length?t[s.charAt(i)]:64;++i;const E=i<s.length?t[s.charAt(i)]:64;if(++i,c==null||f==null||b==null||E==null)throw new kN;const C=c<<2|f>>4;if(a.push(C),b!==64){const L=f<<4&240|b>>2;if(a.push(L),E!==64){const P=b<<6&192|E;a.push(P)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class kN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CN=function(s){const e=C_(s);return A_.encodeByteArray(e,!0)},Of=function(s){return CN(s).replace(/\./g,"")},R_=function(s){try{return A_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function AN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const RN=()=>AN().__FIREBASE_DEFAULTS__,DN=()=>{if(typeof process>"u"||typeof fb>"u")return;const s=fb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},MN=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&R_(s[1]);return e&&JSON.parse(e)},rm=()=>{try{return NN()||RN()||DN()||MN()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},D_=s=>rm()?.emulatorHosts?.[s],M_=s=>{const e=D_(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},I_=()=>rm()?.config,O_=s=>rm()?.[`_${s}`];class IN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}function pl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gy(s){return(await fetch(s,{credentials:"include"})).ok}function P_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",i=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Of(JSON.stringify(t)),Of(JSON.stringify(u)),""].join(".")}const bd={};function ON(){const s={prod:[],emulator:[]};for(const e of Object.keys(bd))bd[e]?s.emulator.push(e):s.prod.push(e);return s}function PN(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let mb=!1;function yy(s,e){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||bd[s]===e||bd[s]||mb)return;bd[s]=e;function t(C){return`__firebase__banner__${C}`}const a="__firebase__banner",c=ON().prod.length>0;function u(){const C=document.getElementById(a);C&&C.remove()}function f(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function m(C,L){C.setAttribute("width","24"),C.setAttribute("id",L),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function b(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{mb=!0,u()},C}function T(C,L){C.setAttribute("id",L),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=PN(a),L=t("text"),P=document.getElementById(L)||document.createElement("span"),V=t("learnmore"),F=document.getElementById(V)||document.createElement("a"),Y=t("preprendIcon"),W=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const se=C.element;f(se),T(F,V);const K=b();m(W,Y),se.append(W,P,F,K),document.body.appendChild(se)}c?(P.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(or())}function VN(){const s=rm()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BN(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function zN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FN(){const s=or();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function qN(){return!VN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HN(){try{return typeof indexedDB=="object"}catch{return!1}}function $N(){return new Promise((s,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(a),s(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const GN="FirebaseError";class Ti extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=GN,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fd.prototype.create)}}class Fd{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},i=`${this.service}/${e}`,c=this.errors[e],u=c?WN(c,a):"Error",f=`${this.serviceName}: ${u} (${i}).`;return new Ti(i,f,a)}}function WN(s,e){return s.replace(KN,(t,a)=>{const i=e[a];return i!=null?String(i):`<${a}?>`})}const KN=/\{\$([^}]+)}/g;function YN(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Yl(s,e){if(s===e)return!0;const t=Object.keys(s),a=Object.keys(e);for(const i of t){if(!a.includes(i))return!1;const c=s[i],u=e[i];if(pb(c)&&pb(u)){if(!Yl(c,u))return!1}else if(c!==u)return!1}for(const i of a)if(!t.includes(i))return!1;return!0}function pb(s){return s!==null&&typeof s=="object"}function qd(s){const e=[];for(const[t,a]of Object.entries(s))Array.isArray(a)?a.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function fd(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,c]=a.split("=");e[decodeURIComponent(i)]=decodeURIComponent(c)}}),e}function md(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function QN(s,e){const t=new XN(s,e);return t.subscribe.bind(t)}class XN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let i;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");JN(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:a},i.next===void 0&&(i.next=ag),i.error===void 0&&(i.error=ag),i.complete===void 0&&(i.complete=ag);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JN(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function ag(){}function Zn(s){return s&&s._delegate?s._delegate:s}class ll{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $l="[DEFAULT]";class ZN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new IN;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tj(e))try{this.getOrInitializeService({instanceIdentifier:$l})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:i});a.resolve(c)}catch{}}}}clearInstance(e=$l){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$l){return this.instances.has(e)}getOptions(e=$l){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[c,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);a===f&&u.resolve(i)}return i}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(a)??new Set;i.add(e),this.onInitCallbacks.set(a,i);const c=this.instances.get(a);return c&&e(c,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const i of a)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:ej(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=$l){return this.component?this.component.multipleInstances?e:$l:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ej(s){return s===$l?void 0:s}function tj(s){return s.instantiationMode==="EAGER"}class nj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var dn;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(dn||(dn={}));const sj={debug:dn.DEBUG,verbose:dn.VERBOSE,info:dn.INFO,warn:dn.WARN,error:dn.ERROR,silent:dn.SILENT},rj=dn.INFO,aj={[dn.DEBUG]:"log",[dn.VERBOSE]:"log",[dn.INFO]:"info",[dn.WARN]:"warn",[dn.ERROR]:"error"},ij=(s,e,...t)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),i=aj[e];if(i)console[i](`[${a}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vy{constructor(e){this.name=e,this._logLevel=rj,this._logHandler=ij,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dn.DEBUG,...e),this._logHandler(this,dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dn.VERBOSE,...e),this._logHandler(this,dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dn.INFO,...e),this._logHandler(this,dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dn.WARN,...e),this._logHandler(this,dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dn.ERROR,...e),this._logHandler(this,dn.ERROR,...e)}}const oj=(s,e)=>e.some(t=>s instanceof t);let gb,yb;function lj(){return gb||(gb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cj(){return yb||(yb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L_=new WeakMap,kg=new WeakMap,V_=new WeakMap,ig=new WeakMap,by=new WeakMap;function uj(s){const e=new Promise((t,a)=>{const i=()=>{s.removeEventListener("success",c),s.removeEventListener("error",u)},c=()=>{t(rl(s.result)),i()},u=()=>{a(s.error),i()};s.addEventListener("success",c),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&L_.set(t,s)}).catch(()=>{}),by.set(e,s),e}function dj(s){if(kg.has(s))return;const e=new Promise((t,a)=>{const i=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",u),s.removeEventListener("abort",u)},c=()=>{t(),i()},u=()=>{a(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",c),s.addEventListener("error",u),s.addEventListener("abort",u)});kg.set(s,e)}let Cg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return kg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||V_.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rl(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function hj(s){Cg=s(Cg)}function fj(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=s.call(og(this),e,...t);return V_.set(a,e.sort?e.sort():[e]),rl(a)}:cj().includes(s)?function(...e){return s.apply(og(this),e),rl(L_.get(this))}:function(...e){return rl(s.apply(og(this),e))}}function mj(s){return typeof s=="function"?fj(s):(s instanceof IDBTransaction&&dj(s),oj(s,lj())?new Proxy(s,Cg):s)}function rl(s){if(s instanceof IDBRequest)return uj(s);if(ig.has(s))return ig.get(s);const e=mj(s);return e!==s&&(ig.set(s,e),by.set(e,s)),e}const og=s=>by.get(s);function pj(s,e,{blocked:t,upgrade:a,blocking:i,terminated:c}={}){const u=indexedDB.open(s,e),f=rl(u);return a&&u.addEventListener("upgradeneeded",m=>{a(rl(u.result),m.oldVersion,m.newVersion,rl(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{c&&m.addEventListener("close",()=>c()),i&&m.addEventListener("versionchange",b=>i(b.oldVersion,b.newVersion,b))}).catch(()=>{}),f}const gj=["get","getKey","getAll","getAllKeys","count"],yj=["put","add","delete","clear"],lg=new Map;function vb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,i=yj.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(i||gj.includes(t)))return;const c=async function(u,...f){const m=this.transaction(u,i?"readwrite":"readonly");let b=m.store;return a&&(b=b.index(f.shift())),(await Promise.all([b[t](...f),i&&m.done]))[0]};return lg.set(e,c),c}hj(s=>({...s,get:(e,t,a)=>vb(e,t)||s.get(e,t,a),has:(e,t)=>!!vb(e,t)||s.has(e,t)}));class vj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bj(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function bj(s){return s.getComponent()?.type==="VERSION"}const Ag="@firebase/app",bb="0.14.7";const lo=new vy("@firebase/app"),xj="@firebase/app-compat",_j="@firebase/analytics-compat",wj="@firebase/analytics",Sj="@firebase/app-check-compat",Tj="@firebase/app-check",Ej="@firebase/auth",Nj="@firebase/auth-compat",jj="@firebase/database",kj="@firebase/data-connect",Cj="@firebase/database-compat",Aj="@firebase/functions",Rj="@firebase/functions-compat",Dj="@firebase/installations",Mj="@firebase/installations-compat",Ij="@firebase/messaging",Oj="@firebase/messaging-compat",Pj="@firebase/performance",Lj="@firebase/performance-compat",Vj="@firebase/remote-config",Uj="@firebase/remote-config-compat",Bj="@firebase/storage",zj="@firebase/storage-compat",Fj="@firebase/firestore",qj="@firebase/ai",Hj="@firebase/firestore-compat",$j="firebase",Gj="12.8.0";const Rg="[DEFAULT]",Wj={[Ag]:"fire-core",[xj]:"fire-core-compat",[wj]:"fire-analytics",[_j]:"fire-analytics-compat",[Tj]:"fire-app-check",[Sj]:"fire-app-check-compat",[Ej]:"fire-auth",[Nj]:"fire-auth-compat",[jj]:"fire-rtdb",[kj]:"fire-data-connect",[Cj]:"fire-rtdb-compat",[Aj]:"fire-fn",[Rj]:"fire-fn-compat",[Dj]:"fire-iid",[Mj]:"fire-iid-compat",[Ij]:"fire-fcm",[Oj]:"fire-fcm-compat",[Pj]:"fire-perf",[Lj]:"fire-perf-compat",[Vj]:"fire-rc",[Uj]:"fire-rc-compat",[Bj]:"fire-gcs",[zj]:"fire-gcs-compat",[Fj]:"fire-fst",[Hj]:"fire-fst-compat",[qj]:"fire-vertex","fire-js":"fire-js",[$j]:"fire-js-all"};const Pf=new Map,Kj=new Map,Dg=new Map;function xb(s,e){try{s.container.addComponent(e)}catch(t){lo.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ql(s){const e=s.name;if(Dg.has(e))return lo.debug(`There were multiple attempts to register component ${e}.`),!1;Dg.set(e,s);for(const t of Pf.values())xb(t,s);for(const t of Kj.values())xb(t,s);return!0}function am(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ea(s){return s==null?!1:s.settings!==void 0}const Yj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},al=new Fd("app","Firebase",Yj);class Qj{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw al.create("app-deleted",{appName:this._name})}}const sc=Gj;function xy(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const a={name:Rg,automaticDataCollectionEnabled:!0,...e},i=a.name;if(typeof i!="string"||!i)throw al.create("bad-app-name",{appName:String(i)});if(t||(t=I_()),!t)throw al.create("no-options");const c=Pf.get(i);if(c){if(Yl(t,c.options)&&Yl(a,c.config))return c;throw al.create("duplicate-app",{appName:i})}const u=new nj(i);for(const m of Dg.values())u.addComponent(m);const f=new Qj(t,a,u);return Pf.set(i,f),f}function _y(s=Rg){const e=Pf.get(s);if(!e&&s===Rg&&I_())return xy();if(!e)throw al.create("no-app",{appName:s});return e}function gi(s,e,t){let a=Wj[s]??s;t&&(a+=`-${t}`);const i=a.match(/\s|\//),c=e.match(/\s|\//);if(i||c){const u=[`Unable to register library "${a}" with version "${e}":`];i&&u.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lo.warn(u.join(" "));return}Ql(new ll(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const Xj="firebase-heartbeat-database",Jj=1,Cd="firebase-heartbeat-store";let cg=null;function U_(){return cg||(cg=pj(Xj,Jj,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Cd)}catch(t){console.warn(t)}}}}).catch(s=>{throw al.create("idb-open",{originalErrorMessage:s.message})})),cg}async function Zj(s){try{const t=(await U_()).transaction(Cd),a=await t.objectStore(Cd).get(B_(s));return await t.done,a}catch(e){if(e instanceof Ti)lo.warn(e.message);else{const t=al.create("idb-get",{originalErrorMessage:e?.message});lo.warn(t.message)}}}async function _b(s,e){try{const a=(await U_()).transaction(Cd,"readwrite");await a.objectStore(Cd).put(e,B_(s)),await a.done}catch(t){if(t instanceof Ti)lo.warn(t.message);else{const a=al.create("idb-set",{originalErrorMessage:t?.message});lo.warn(a.message)}}}function B_(s){return`${s.name}!${s.options.appId}`}const ek=1024,tk=30;class nk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rk(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=wb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:t}),this._heartbeatsCache.heartbeats.length>tk){const i=ak(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){lo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=wb(),{heartbeatsToSend:t,unsentEntries:a}=sk(this._heartbeatsCache.heartbeats),i=Of(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return lo.warn(e),""}}}function wb(){return new Date().toISOString().substring(0,10)}function sk(s,e=ek){const t=[];let a=s.slice();for(const i of s){const c=t.find(u=>u.agent===i.agent);if(c){if(c.dates.push(i.date),Sb(t)>e){c.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Sb(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class rk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HN()?$N().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Zj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return _b(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return _b(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Sb(s){return Of(JSON.stringify({version:2,heartbeats:s})).length}function ak(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let a=1;a<s.length;a++)s[a].date<t&&(t=s[a].date,e=a);return e}function ik(s){Ql(new ll("platform-logger",e=>new vj(e),"PRIVATE")),Ql(new ll("heartbeat",e=>new nk(e),"PRIVATE")),gi(Ag,bb,s),gi(Ag,bb,"esm2020"),gi("fire-js","")}ik("");function z_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ok=z_,F_=new Fd("auth","Firebase",z_());const Lf=new vy("@firebase/auth");function lk(s,...e){Lf.logLevel<=dn.WARN&&Lf.warn(`Auth (${sc}): ${s}`,...e)}function _f(s,...e){Lf.logLevel<=dn.ERROR&&Lf.error(`Auth (${sc}): ${s}`,...e)}function za(s,...e){throw wy(s,...e)}function yi(s,...e){return wy(s,...e)}function q_(s,e,t){const a={...ok(),[e]:t};return new Fd("auth","Firebase",a).create(e,{appName:s.name})}function ao(s){return q_(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wy(s,...e){if(typeof s!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(t,...a)}return F_.create(s,...e)}function Bt(s,e,...t){if(!s)throw wy(e,...t)}function no(s){const e="INTERNAL ASSERTION FAILED: "+s;throw _f(e),new Error(e)}function co(s,e){s||no(e)}function Mg(){return typeof self<"u"&&self.location?.href||""}function ck(){return Tb()==="http:"||Tb()==="https:"}function Tb(){return typeof self<"u"&&self.location?.protocol||null}function uk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ck()||BN()||"connection"in navigator)?navigator.onLine:!0}function dk(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Hd{constructor(e,t){this.shortDelay=e,this.longDelay=t,co(t>e,"Short delay should be less than long delay!"),this.isMobile=LN()||zN()}get(){return uk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sy(s,e){co(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class H_{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;no("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;no("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;no("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const fk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mk=new Hd(3e4,6e4);function mo(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function po(s,e,t,a,i={}){return $_(s,i,async()=>{let c={},u={};a&&(e==="GET"?u=a:c={body:JSON.stringify(a)});const f=qd({key:s.config.apiKey,...u}).slice(1),m=await s._getAdditionalHeaders();m["Content-Type"]="application/json",s.languageCode&&(m["X-Firebase-Locale"]=s.languageCode);const b={method:e,headers:m,...c};return UN()||(b.referrerPolicy="no-referrer"),s.emulatorConfig&&pl(s.emulatorConfig.host)&&(b.credentials="include"),H_.fetch()(await G_(s,s.config.apiHost,t,f),b)})}async function $_(s,e,t){s._canInitEmulator=!1;const a={...hk,...e};try{const i=new gk(s),c=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw lf(s,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const f=c.ok?u.errorMessage:u.error.message,[m,b]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(s,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw lf(s,"email-already-in-use",u);if(m==="USER_DISABLED")throw lf(s,"user-disabled",u);const T=a[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw q_(s,T,b);za(s,T)}}catch(i){if(i instanceof Ti)throw i;za(s,"network-request-failed",{message:String(i)})}}async function $d(s,e,t,a,i={}){const c=await po(s,e,t,a,i);return"mfaPendingCredential"in c&&za(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function G_(s,e,t,a){const i=`${e}${t}?${a}`,c=s,u=c.config.emulator?Sy(s.config,i):`${s.config.apiScheme}://${i}`;return fk.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function pk(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(yi(this.auth,"network-request-failed")),mk.get())})}}function lf(s,e,t){const a={appName:s.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const i=yi(s,e,a);return i.customData._tokenResponse=t,i}function Eb(s){return s!==void 0&&s.enterprise!==void 0}class yk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vk(s,e){return po(s,"GET","/v2/recaptchaConfig",mo(s,e))}async function bk(s,e){return po(s,"POST","/v1/accounts:delete",e)}async function Vf(s,e){return po(s,"POST","/v1/accounts:lookup",e)}function xd(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xk(s,e=!1){const t=Zn(s),a=await t.getIdToken(e),i=Ty(a);Bt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const c=typeof i.firebase=="object"?i.firebase:void 0,u=c?.sign_in_provider;return{claims:i,token:a,authTime:xd(ug(i.auth_time)),issuedAtTime:xd(ug(i.iat)),expirationTime:xd(ug(i.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function ug(s){return Number(s)*1e3}function Ty(s){const[e,t,a]=s.split(".");if(e===void 0||t===void 0||a===void 0)return _f("JWT malformed, contained fewer than 3 sections"),null;try{const i=R_(t);return i?JSON.parse(i):(_f("Failed to decode base64 JWT payload"),null)}catch(i){return _f("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Nb(s){const e=Ty(s);return Bt(e,"internal-error"),Bt(typeof e.exp<"u","internal-error"),Bt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ad(s,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Ti&&_k(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function _k({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class wk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ig{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xd(this.lastLoginAt),this.creationTime=xd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Uf(s){const e=s.auth,t=await s.getIdToken(),a=await Ad(s,Vf(e,{idToken:t}));Bt(a?.users.length,e,"internal-error");const i=a.users[0];s._notifyReloadListener(i);const c=i.providerUserInfo?.length?W_(i.providerUserInfo):[],u=Tk(s.providerData,c),f=s.isAnonymous,m=!(s.email&&i.passwordHash)&&!u?.length,b=f?m:!1,T={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Ig(i.createdAt,i.lastLoginAt),isAnonymous:b};Object.assign(s,T)}async function Sk(s){const e=Zn(s);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tk(s,e){return[...s.filter(a=>!e.some(i=>i.providerId===a.providerId)),...e]}function W_(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Ek(s,e){const t=await $_(s,{},async()=>{const a=qd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:c}=s.config,u=await G_(s,i,"/v1/token",`key=${c}`),f=await s._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:a};return s.emulatorConfig&&pl(s.emulatorConfig.host)&&(m.credentials="include"),H_.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Nk(s,e){return po(s,"POST","/v2/accounts:revokeToken",mo(s,e))}class Kc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Bt(e.idToken,"internal-error"),Bt(typeof e.idToken<"u","internal-error"),Bt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Bt(e.length!==0,"internal-error");const t=Nb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:i,expiresIn:c}=await Ek(e,t);this.updateTokensAndExpiration(a,i,Number(c))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:i,expirationTime:c}=t,u=new Kc;return a&&(Bt(typeof a=="string","internal-error",{appName:e}),u.refreshToken=a),i&&(Bt(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),c&&(Bt(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kc,this.toJSON())}_performRefresh(){return no("not implemented")}}function Xo(s,e){Bt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Va{constructor({uid:e,auth:t,stsTokenManager:a,...i}){this.providerId="firebase",this.proactiveRefresh=new wk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ig(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ad(this,this.stsTokenManager.getToken(this.auth,e));return Bt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xk(this,e)}reload(){return Sk(this)}_assign(e){this!==e&&(Bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Va({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await Uf(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ea(this.auth.app))return Promise.reject(ao(this.auth));const e=await this.getIdToken();return await Ad(this,bk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,i=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,b=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:E,emailVerified:C,isAnonymous:L,providerData:P,stsTokenManager:V}=t;Bt(E&&V,e,"internal-error");const F=Kc.fromJSON(this.name,V);Bt(typeof E=="string",e,"internal-error"),Xo(a,e.name),Xo(i,e.name),Bt(typeof C=="boolean",e,"internal-error"),Bt(typeof L=="boolean",e,"internal-error"),Xo(c,e.name),Xo(u,e.name),Xo(f,e.name),Xo(m,e.name),Xo(b,e.name),Xo(T,e.name);const Y=new Va({uid:E,auth:e,email:i,emailVerified:C,displayName:a,isAnonymous:L,photoURL:u,phoneNumber:c,tenantId:f,stsTokenManager:F,createdAt:b,lastLoginAt:T});return P&&Array.isArray(P)&&(Y.providerData=P.map(W=>({...W}))),m&&(Y._redirectEventId=m),Y}static async _fromIdTokenResponse(e,t,a=!1){const i=new Kc;i.updateFromServerResponse(t);const c=new Va({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:a});return await Uf(c),c}static async _fromGetAccountInfoResponse(e,t,a){const i=t.users[0];Bt(i.localId!==void 0,"internal-error");const c=i.providerUserInfo!==void 0?W_(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!c?.length,f=new Kc;f.updateFromIdToken(a);const m=new Va({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:u}),b={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Ig(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!c?.length};return Object.assign(m,b),m}}const jb=new Map;function so(s){co(s instanceof Function,"Expected a class definition");let e=jb.get(s);return e?(co(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,jb.set(s,e),e)}class K_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}K_.type="NONE";const kb=K_;function wf(s,e,t){return`firebase:${s}:${e}:${t}`}class Yc{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:i,name:c}=this.auth;this.fullUserKey=wf(this.userKey,i.apiKey,c),this.fullPersistenceKey=wf("persistence",i.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vf(this.auth,{idToken:e}).catch(()=>{});return t?Va._fromGetAccountInfoResponse(this.auth,t,e):null}return Va._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Yc(so(kb),e,a);const i=(await Promise.all(t.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let c=i[0]||so(kb);const u=wf(a,e.config.apiKey,e.name);let f=null;for(const b of t)try{const T=await b._get(u);if(T){let E;if(typeof T=="string"){const C=await Vf(e,{idToken:T}).catch(()=>{});if(!C)break;E=await Va._fromGetAccountInfoResponse(e,C,T)}else E=Va._fromJSON(e,T);b!==c&&(f=E),c=b;break}}catch{}const m=i.filter(b=>b._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new Yc(c,e,a):(c=m[0],f&&await c._set(u,f.toJSON()),await Promise.all(t.map(async b=>{if(b!==c)try{await b._remove(u)}catch{}})),new Yc(c,e,a))}}function Cb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(J_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ew(e))return"Blackberry";if(tw(e))return"Webos";if(Q_(e))return"Safari";if((e.includes("chrome/")||X_(e))&&!e.includes("edge/"))return"Chrome";if(Z_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(t);if(a?.length===2)return a[1]}return"Other"}function Y_(s=or()){return/firefox\//i.test(s)}function Q_(s=or()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function X_(s=or()){return/crios\//i.test(s)}function J_(s=or()){return/iemobile/i.test(s)}function Z_(s=or()){return/android/i.test(s)}function ew(s=or()){return/blackberry/i.test(s)}function tw(s=or()){return/webos/i.test(s)}function Ey(s=or()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function jk(s=or()){return Ey(s)&&!!window.navigator?.standalone}function kk(){return FN()&&document.documentMode===10}function nw(s=or()){return Ey(s)||Z_(s)||tw(s)||ew(s)||/windows phone/i.test(s)||J_(s)}function sw(s,e=[]){let t;switch(s){case"Browser":t=Cb(or());break;case"Worker":t=`${Cb(or())}-${s}`;break;default:t=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sc}/${a}`}class Ck{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=c=>new Promise((u,f)=>{try{const m=e(c);u(m)}catch(m){f(m)}});a.onAbort=t,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function Ak(s,e={}){return po(s,"GET","/v2/passwordPolicy",mo(s,e))}const Rk=6;class Dk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Rk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let i=0;i<e.length;i++)a=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,i,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class Mk{constructor(e,t,a,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ab(this),this.idTokenSubscription=new Ab(this),this.beforeStateQueue=new Ck(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=so(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Yc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vf(this,{idToken:e}),a=await Va._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ea(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=a?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&f?.user&&(a=f.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ea(this.app))return Promise.reject(ao(this));const t=e?Zn(e):null;return t&&Bt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ea(this.app)?Promise.reject(ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ea(this.app)?Promise.reject(ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(so(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ak(this),t=new Dk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fd("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await Nk(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&so(e)||this._popupRedirectResolver;Bt(t,this,"argument-error"),this.redirectPersistenceManager=await Yc.create(this,[so(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,i){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bt(f,this,"internal-error"),f.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,a,i);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(ea(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function gl(s){return Zn(s)}class Ab{constructor(e){this.auth=e,this.observer=null,this.addObserver=QN(t=>this.observer=t)}get next(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ik(s){im=s}function rw(s){return im.loadJS(s)}function Ok(){return im.recaptchaEnterpriseScript}function Pk(){return im.gapiScript}function Lk(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Vk{constructor(){this.enterprise=new Uk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Uk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Bk="recaptcha-enterprise",aw="NO_RECAPTCHA";class zk{constructor(e){this.type=Bk,this.auth=gl(e)}async verify(e="verify",t=!1){async function a(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,f)=>{vk(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const b=new yk(m);return c.tenantId==null?c._agentRecaptchaConfig=b:c._tenantRecaptchaConfigs[c.tenantId]=b,u(b.siteKey)}}).catch(m=>{f(m)})})}function i(c,u,f){const m=window.grecaptcha;Eb(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:e}).then(b=>{u(b)}).catch(()=>{u(aw)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Vk().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{a(this.auth).then(f=>{if(!t&&Eb(window.grecaptcha))i(f,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Ok();m.length!==0&&(m+=f),rw(m).then(()=>{i(f,c,u)}).catch(b=>{u(b)})}}).catch(f=>{u(f)})})}}async function Rb(s,e,t,a=!1,i=!1){const c=new zk(s);let u;if(i)u=aw;else try{u=await c.verify(t)}catch{u=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,b=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:b,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return a?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Bf(s,e,t,a,i){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Rb(s,e,t,t==="getOobCode");return a(s,c)}else return a(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Rb(s,e,t,t==="getOobCode");return a(s,u)}else return Promise.reject(c)})}function Fk(s,e){const t=am(s,"auth");if(t.isInitialized()){const i=t.getImmediate(),c=t.getOptions();if(Yl(c,e??{}))return i;za(i,"already-initialized")}return t.initialize({options:e})}function qk(s,e){const t=e?.persistence||[],a=(Array.isArray(t)?t:[t]).map(so);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function Hk(s,e,t){const a=gl(s);Bt(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const i=!1,c=iw(e),{host:u,port:f}=$k(e),m=f===null?"":`:${f}`,b={url:`${c}//${u}${m}/`},T=Object.freeze({host:u,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){Bt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Bt(Yl(b,a.config.emulator)&&Yl(T,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=b,a.emulatorConfig=T,a.settings.appVerificationDisabledForTesting=!0,pl(u)?(gy(`${c}//${u}${m}`),yy("Auth",!0)):Gk()}function iw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function $k(s){const e=iw(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const c=i[1];return{host:c,port:Db(a.substr(c.length+1))}}else{const[c,u]=a.split(":");return{host:c,port:Db(u)}}}function Db(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Gk(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Ny{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return no("not implemented")}_getIdTokenResponse(e){return no("not implemented")}_linkToIdToken(e,t){return no("not implemented")}_getReauthenticationResolver(e){return no("not implemented")}}async function Wk(s,e){return po(s,"POST","/v1/accounts:signUp",e)}async function Kk(s,e){return $d(s,"POST","/v1/accounts:signInWithPassword",mo(s,e))}async function Yk(s,e){return po(s,"POST","/v1/accounts:sendOobCode",mo(s,e))}async function Qk(s,e){return Yk(s,e)}async function Xk(s,e){return $d(s,"POST","/v1/accounts:signInWithEmailLink",mo(s,e))}async function Jk(s,e){return $d(s,"POST","/v1/accounts:signInWithEmailLink",mo(s,e))}class Rd extends Ny{constructor(e,t,a,i=null){super("password",a),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Rd(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new Rd(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bf(e,t,"signInWithPassword",Kk);case"emailLink":return Xk(e,{email:this._email,oobCode:this._password});default:za(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bf(e,a,"signUpPassword",Wk);case"emailLink":return Jk(e,{idToken:t,email:this._email,oobCode:this._password});default:za(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qc(s,e){return $d(s,"POST","/v1/accounts:signInWithIdp",mo(s,e))}const Zk="http://localhost";class Xl extends Ny{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):za("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:i,...c}=t;if(!a||!i)return null;const u=new Xl(a,i);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Qc(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Qc(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qc(e,t)}buildRequest(){const e={requestUri:Zk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qd(t)}return e}}function eC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tC(s){const e=fd(md(s)).link,t=e?fd(md(e)).deep_link_id:null,a=fd(md(s)).deep_link_id;return(a?fd(md(a)).link:null)||a||t||e||s}class jy{constructor(e){const t=fd(md(e)),a=t.apiKey??null,i=t.oobCode??null,c=eC(t.mode??null);Bt(a&&i&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=tC(e);try{return new jy(t)}catch{return null}}}class cu{constructor(){this.providerId=cu.PROVIDER_ID}static credential(e,t){return Rd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=jy.parseLink(t);return Bt(a,"argument-error"),Rd._fromEmailAndCode(e,a.code,a.tenantId)}}cu.PROVIDER_ID="password";cu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ow{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Gd extends ow{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zo extends Gd{constructor(){super("facebook.com")}static credential(e){return Xl._fromParams({providerId:Zo.PROVIDER_ID,signInMethod:Zo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zo.credentialFromTaggedObject(e)}static credentialFromError(e){return Zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zo.credential(e.oauthAccessToken)}catch{return null}}}Zo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zo.PROVIDER_ID="facebook.com";class el extends Gd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xl._fromParams({providerId:el.PROVIDER_ID,signInMethod:el.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return el.credentialFromTaggedObject(e)}static credentialFromError(e){return el.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return el.credential(t,a)}catch{return null}}}el.GOOGLE_SIGN_IN_METHOD="google.com";el.PROVIDER_ID="google.com";class tl extends Gd{constructor(){super("github.com")}static credential(e){return Xl._fromParams({providerId:tl.PROVIDER_ID,signInMethod:tl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tl.credentialFromTaggedObject(e)}static credentialFromError(e){return tl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tl.credential(e.oauthAccessToken)}catch{return null}}}tl.GITHUB_SIGN_IN_METHOD="github.com";tl.PROVIDER_ID="github.com";class nl extends Gd{constructor(){super("twitter.com")}static credential(e,t){return Xl._fromParams({providerId:nl.PROVIDER_ID,signInMethod:nl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nl.credentialFromTaggedObject(e)}static credentialFromError(e){return nl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return nl.credential(t,a)}catch{return null}}}nl.TWITTER_SIGN_IN_METHOD="twitter.com";nl.PROVIDER_ID="twitter.com";async function nC(s,e){return $d(s,"POST","/v1/accounts:signUp",mo(s,e))}class Jl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,i=!1){const c=await Va._fromIdTokenResponse(e,a,i),u=Mb(a);return new Jl({user:c,providerId:u,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const i=Mb(a);return new Jl({user:e,providerId:i,_tokenResponse:a,operationType:t})}}function Mb(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class zf extends Ti{constructor(e,t,a,i){super(t.code,t.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,zf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,i){return new zf(e,t,a,i)}}function lw(s,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?zf._fromErrorAndOperation(s,c,e,a):c})}async function sC(s,e,t=!1){const a=await Ad(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Jl._forOperation(s,"link",a)}async function rC(s,e,t=!1){const{auth:a}=s;if(ea(a.app))return Promise.reject(ao(a));const i="reauthenticate";try{const c=await Ad(s,lw(a,i,e,s),t);Bt(c.idToken,a,"internal-error");const u=Ty(c.idToken);Bt(u,a,"internal-error");const{sub:f}=u;return Bt(s.uid===f,a,"user-mismatch"),Jl._forOperation(s,i,c)}catch(c){throw c?.code==="auth/user-not-found"&&za(a,"user-mismatch"),c}}async function cw(s,e,t=!1){if(ea(s.app))return Promise.reject(ao(s));const a="signIn",i=await lw(s,a,e),c=await Jl._fromIdTokenResponse(s,a,i);return t||await s._updateCurrentUser(c.user),c}async function aC(s,e){return cw(gl(s),e)}async function uw(s){const e=gl(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iC(s,e,t){const a=gl(s);await Bf(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Qk)}async function dw(s,e,t){if(ea(s.app))return Promise.reject(ao(s));const a=gl(s),u=await Bf(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nC).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&uw(s),m}),f=await Jl._fromIdTokenResponse(a,"signIn",u);return await a._updateCurrentUser(f.user),f}function oC(s,e,t){return ea(s.app)?Promise.reject(ao(s)):aC(Zn(s),cu.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&uw(s),a})}function lC(s,e){return Zn(s).setPersistence(e)}function cC(s,e,t,a){return Zn(s).onIdTokenChanged(e,t,a)}function uC(s,e,t){return Zn(s).beforeAuthStateChanged(e,t)}function dC(s,e,t,a){return Zn(s).onAuthStateChanged(e,t,a)}function ky(s){return Zn(s).signOut()}const Ff="__sak";class hw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hC=1e3,fC=10;class fw extends hw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),i=this.localCache[t];a!==i&&e(t,i,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const a=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(a);!t&&this.localCache[a]===u||this.notifyListeners(a,u)},c=this.storage.getItem(a);kk()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fC):i()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const i of Array.from(a))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},hC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fw.type="LOCAL";const mw=fw;class pw extends hw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pw.type="SESSION";const Cy=pw;function mC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class om{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const a=new om(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:i,data:c}=t.data,u=this.handlersMap[i];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const f=Array.from(u).map(async b=>b(t.origin,c)),m=await mC(f);t.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}om.receivers=[];function Ay(s="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return s+t}class pC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let c,u;return new Promise((f,m)=>{const b=Ay("",20);i.port1.start();const T=setTimeout(()=>{m(new Error("unsupported_event"))},a);u={messageChannel:i,onMessage(E){const C=E;if(C.data.eventId===b)switch(C.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(C.data.response);break;default:clearTimeout(T),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:b,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function vi(){return window}function gC(s){vi().location.href=s}function gw(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function yC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vC(){return navigator?.serviceWorker?.controller||null}function bC(){return gw()?self:null}const yw="firebaseLocalStorageDb",xC=1,qf="firebaseLocalStorage",vw="fbase_key";class Wd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lm(s,e){return s.transaction([qf],e?"readwrite":"readonly").objectStore(qf)}function _C(){const s=indexedDB.deleteDatabase(yw);return new Wd(s).toPromise()}function Og(){const s=indexedDB.open(yw,xC);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(qf,{keyPath:vw})}catch(i){t(i)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(qf)?e(a):(a.close(),await _C(),e(await Og()))})})}async function Ib(s,e,t){const a=lm(s,!0).put({[vw]:e,value:t});return new Wd(a).toPromise()}async function wC(s,e){const t=lm(s,!1).get(e),a=await new Wd(t).toPromise();return a===void 0?null:a.value}function Ob(s,e){const t=lm(s,!0).delete(e);return new Wd(t).toPromise()}const SC=800,TC=3;class bw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Og(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>TC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=om._getInstance(bC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yC(),!this.activeServiceWorker)return;this.sender=new pC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Og();return await Ib(e,Ff,"1"),await Ob(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>Ib(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>wC(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ob(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const c=lm(i,!1).getAll();return new Wd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:i,value:c}of e)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(c)&&(this.notifyListeners(i,c),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const i of Array.from(a))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bw.type="LOCAL";const EC=bw;new Hd(3e4,6e4);function NC(s,e){return e?so(e):(Bt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Ry extends Ny{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jC(s){return cw(s.auth,new Ry(s),s.bypassAuthState)}function kC(s){const{auth:e,user:t}=s;return Bt(t,e,"internal-error"),rC(t,new Ry(s),s.bypassAuthState)}async function CC(s){const{auth:e,user:t}=s;return Bt(t,e,"internal-error"),sC(t,new Ry(s),s.bypassAuthState)}class xw{constructor(e,t,a,i,c=!1){this.auth=e,this.resolver=a,this.user=i,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:i,tenantId:c,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:a,tenantId:c||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jC;case"linkViaPopup":case"linkViaRedirect":return CC;case"reauthViaPopup":case"reauthViaRedirect":return kC;default:za(this.auth,"internal-error")}}resolve(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AC=new Hd(2e3,1e4);class Wc extends xw{constructor(e,t,a,i,c){super(e,t,i,c),this.provider=a,this.authWindow=null,this.pollId=null,Wc.currentPopupAction&&Wc.currentPopupAction.cancel(),Wc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Bt(e,this.auth,"internal-error"),e}async onExecution(){co(this.filter.length===1,"Popup operations only handle one event");const e=Ay();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AC.get())};e()}}Wc.currentPopupAction=null;const RC="pendingRedirect",Sf=new Map;class DC extends xw{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const a=await MC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MC(s,e){const t=PC(e),a=OC(s);if(!await a._isAvailable())return!1;const i=await a._get(t)==="true";return await a._remove(t),i}function IC(s,e){Sf.set(s._key(),e)}function OC(s){return so(s._redirectPersistence)}function PC(s){return wf(RC,s.config.apiKey,s.name)}async function LC(s,e,t=!1){if(ea(s.app))return Promise.reject(ao(s));const a=gl(s),i=NC(a,e),u=await new DC(a,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await a._persistUserIfCurrent(u.user),await a._setRedirectUser(null,e)),u}const VC=600*1e3;class UC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!_w(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pb(e))}saveEventToCache(e){this.cachedEventUids.add(Pb(e)),this.lastProcessedEventTime=Date.now()}}function Pb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function _w({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function BC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _w(s);default:return!1}}async function zC(s,e={}){return po(s,"GET","/v1/projects",e)}const FC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qC=/^https?/;async function HC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await zC(s);for(const t of e)try{if($C(t))return}catch{}za(s,"unauthorized-domain")}function $C(s){const e=Mg(),{protocol:t,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&a===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===a}if(!qC.test(t))return!1;if(FC.test(s))return a===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}const GC=new Hd(3e4,6e4);function Lb(){const s=vi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function WC(s){return new Promise((e,t)=>{function a(){Lb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lb(),t(yi(s,"network-request-failed"))},timeout:GC.get()})}if(vi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vi().gapi?.load)a();else{const i=Lk("iframefcb");return vi()[i]=()=>{gapi.load?a():t(yi(s,"network-request-failed"))},rw(`${Pk()}?onload=${i}`).catch(c=>t(c))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function KC(s){return Tf=Tf||WC(s),Tf}const YC=new Hd(5e3,15e3),QC="__/auth/iframe",XC="emulator/auth/iframe",JC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eA(s){const e=s.config;Bt(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Sy(e,XC):`https://${s.config.authDomain}/${QC}`,a={apiKey:e.apiKey,appName:s.name,v:sc},i=ZC.get(s.config.apiHost);i&&(a.eid=i);const c=s._getFrameworks();return c.length&&(a.fw=c.join(",")),`${t}?${qd(a).slice(1)}`}async function tA(s){const e=await KC(s),t=vi().gapi;return Bt(t,s,"internal-error"),e.open({where:document.body,url:eA(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JC,dontclear:!0},a=>new Promise(async(i,c)=>{await a.restyle({setHideOnLeave:!1});const u=yi(s,"network-request-failed"),f=vi().setTimeout(()=>{c(u)},YC.get());function m(){vi().clearTimeout(f),i(a)}a.ping(m).then(m,()=>{c(u)})}))}const nA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sA=500,rA=600,aA="_blank",iA="http://localhost";class Vb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oA(s,e,t,a=sA,i=rA){const c=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-a)/2,0).toString();let f="";const m={...nA,width:a.toString(),height:i.toString(),top:c,left:u},b=or().toLowerCase();t&&(f=X_(b)?aA:t),Y_(b)&&(e=e||iA,m.scrollbars="yes");const T=Object.entries(m).reduce((C,[L,P])=>`${C}${L}=${P},`,"");if(jk(b)&&f!=="_self")return lA(e||"",f),new Vb(null);const E=window.open(e||"",f,T);Bt(E,s,"popup-blocked");try{E.focus()}catch{}return new Vb(E)}function lA(s,e){const t=document.createElement("a");t.href=s,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}const cA="__/auth/handler",uA="emulator/auth/handler",dA=encodeURIComponent("fac");async function Ub(s,e,t,a,i,c){Bt(s.config.authDomain,s,"auth-domain-config-required"),Bt(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:a,v:sc,eventId:i};if(e instanceof ow){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",YN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,E]of Object.entries({}))u[T]=E}if(e instanceof Gd){const T=e.getScopes().filter(E=>E!=="");T.length>0&&(u.scopes=T.join(","))}s.tenantId&&(u.tid=s.tenantId);const f=u;for(const T of Object.keys(f))f[T]===void 0&&delete f[T];const m=await s._getAppCheckToken(),b=m?`#${dA}=${encodeURIComponent(m)}`:"";return`${hA(s)}?${qd(f).slice(1)}${b}`}function hA({config:s}){return s.emulator?Sy(s,uA):`https://${s.authDomain}/${cA}`}const dg="webStorageSupport";class fA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cy,this._completeRedirectFn=LC,this._overrideRedirectResult=IC}async _openPopup(e,t,a,i){co(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Ub(e,t,a,Mg(),i);return oA(e,c,Ay())}async _openRedirect(e,t,a,i){await this._originValidation(e);const c=await Ub(e,t,a,Mg(),i);return gC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:c}=this.eventManagers[t];return i?Promise.resolve(i):(co(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await tA(e),a=new UC(e);return t.register("authEvent",i=>(Bt(i?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dg,{type:dg},i=>{const c=i?.[0]?.[dg];c!==void 0&&t(!!c),za(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=HC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nw()||Q_()||Ey()}}const mA=fA;var Bb="@firebase/auth",zb="1.12.0";class pA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gA(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yA(s){Ql(new ll("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=a.options;Bt(u&&!u.includes(":"),"invalid-api-key",{appName:a.name});const m={apiKey:u,authDomain:f,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sw(s)},b=new Mk(a,i,c,m);return qk(b,t),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Ql(new ll("auth-internal",e=>{const t=gl(e.getProvider("auth").getImmediate());return(a=>new pA(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(Bb,zb,gA(s)),gi(Bb,zb,"esm2020")}const vA=300,bA=O_("authIdTokenMaxAge")||vA;let Fb=null;const xA=s=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>bA)return;const i=t?.token;Fb!==i&&(Fb=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ww(s=_y()){const e=am(s,"auth");if(e.isInitialized())return e.getImmediate();const t=Fk(s,{popupRedirectResolver:mA,persistence:[EC,mw,Cy]}),a=O_("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const u=xA(c.toString());uC(t,u,()=>u(t.currentUser)),cC(t,f=>u(f))}}const i=D_("auth");return i&&Hk(t,`http://${i}`),t}function _A(){return document.getElementsByTagName("head")?.[0]??document}Ik({loadJS(s){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=i=>{const c=yi("internal-error");c.customData=i,t(c)},a.type="text/javascript",a.charset="UTF-8",_A().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yA("Browser");var qb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var il,Sw;(function(){var s;function e(q,B){function H(){}H.prototype=B.prototype,q.F=B.prototype,q.prototype=new H,q.prototype.constructor=q,q.D=function(J,$,Z){for(var O=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)O[Ce-2]=arguments[Ce];return B.prototype[$].apply(J,O)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(q,B,H){H||(H=0);const J=Array(16);if(typeof B=="string")for(var $=0;$<16;++$)J[$]=B.charCodeAt(H++)|B.charCodeAt(H++)<<8|B.charCodeAt(H++)<<16|B.charCodeAt(H++)<<24;else for($=0;$<16;++$)J[$]=B[H++]|B[H++]<<8|B[H++]<<16|B[H++]<<24;B=q.g[0],H=q.g[1],$=q.g[2];let Z=q.g[3],O;O=B+(Z^H&($^Z))+J[0]+3614090360&4294967295,B=H+(O<<7&4294967295|O>>>25),O=Z+($^B&(H^$))+J[1]+3905402710&4294967295,Z=B+(O<<12&4294967295|O>>>20),O=$+(H^Z&(B^H))+J[2]+606105819&4294967295,$=Z+(O<<17&4294967295|O>>>15),O=H+(B^$&(Z^B))+J[3]+3250441966&4294967295,H=$+(O<<22&4294967295|O>>>10),O=B+(Z^H&($^Z))+J[4]+4118548399&4294967295,B=H+(O<<7&4294967295|O>>>25),O=Z+($^B&(H^$))+J[5]+1200080426&4294967295,Z=B+(O<<12&4294967295|O>>>20),O=$+(H^Z&(B^H))+J[6]+2821735955&4294967295,$=Z+(O<<17&4294967295|O>>>15),O=H+(B^$&(Z^B))+J[7]+4249261313&4294967295,H=$+(O<<22&4294967295|O>>>10),O=B+(Z^H&($^Z))+J[8]+1770035416&4294967295,B=H+(O<<7&4294967295|O>>>25),O=Z+($^B&(H^$))+J[9]+2336552879&4294967295,Z=B+(O<<12&4294967295|O>>>20),O=$+(H^Z&(B^H))+J[10]+4294925233&4294967295,$=Z+(O<<17&4294967295|O>>>15),O=H+(B^$&(Z^B))+J[11]+2304563134&4294967295,H=$+(O<<22&4294967295|O>>>10),O=B+(Z^H&($^Z))+J[12]+1804603682&4294967295,B=H+(O<<7&4294967295|O>>>25),O=Z+($^B&(H^$))+J[13]+4254626195&4294967295,Z=B+(O<<12&4294967295|O>>>20),O=$+(H^Z&(B^H))+J[14]+2792965006&4294967295,$=Z+(O<<17&4294967295|O>>>15),O=H+(B^$&(Z^B))+J[15]+1236535329&4294967295,H=$+(O<<22&4294967295|O>>>10),O=B+($^Z&(H^$))+J[1]+4129170786&4294967295,B=H+(O<<5&4294967295|O>>>27),O=Z+(H^$&(B^H))+J[6]+3225465664&4294967295,Z=B+(O<<9&4294967295|O>>>23),O=$+(B^H&(Z^B))+J[11]+643717713&4294967295,$=Z+(O<<14&4294967295|O>>>18),O=H+(Z^B&($^Z))+J[0]+3921069994&4294967295,H=$+(O<<20&4294967295|O>>>12),O=B+($^Z&(H^$))+J[5]+3593408605&4294967295,B=H+(O<<5&4294967295|O>>>27),O=Z+(H^$&(B^H))+J[10]+38016083&4294967295,Z=B+(O<<9&4294967295|O>>>23),O=$+(B^H&(Z^B))+J[15]+3634488961&4294967295,$=Z+(O<<14&4294967295|O>>>18),O=H+(Z^B&($^Z))+J[4]+3889429448&4294967295,H=$+(O<<20&4294967295|O>>>12),O=B+($^Z&(H^$))+J[9]+568446438&4294967295,B=H+(O<<5&4294967295|O>>>27),O=Z+(H^$&(B^H))+J[14]+3275163606&4294967295,Z=B+(O<<9&4294967295|O>>>23),O=$+(B^H&(Z^B))+J[3]+4107603335&4294967295,$=Z+(O<<14&4294967295|O>>>18),O=H+(Z^B&($^Z))+J[8]+1163531501&4294967295,H=$+(O<<20&4294967295|O>>>12),O=B+($^Z&(H^$))+J[13]+2850285829&4294967295,B=H+(O<<5&4294967295|O>>>27),O=Z+(H^$&(B^H))+J[2]+4243563512&4294967295,Z=B+(O<<9&4294967295|O>>>23),O=$+(B^H&(Z^B))+J[7]+1735328473&4294967295,$=Z+(O<<14&4294967295|O>>>18),O=H+(Z^B&($^Z))+J[12]+2368359562&4294967295,H=$+(O<<20&4294967295|O>>>12),O=B+(H^$^Z)+J[5]+4294588738&4294967295,B=H+(O<<4&4294967295|O>>>28),O=Z+(B^H^$)+J[8]+2272392833&4294967295,Z=B+(O<<11&4294967295|O>>>21),O=$+(Z^B^H)+J[11]+1839030562&4294967295,$=Z+(O<<16&4294967295|O>>>16),O=H+($^Z^B)+J[14]+4259657740&4294967295,H=$+(O<<23&4294967295|O>>>9),O=B+(H^$^Z)+J[1]+2763975236&4294967295,B=H+(O<<4&4294967295|O>>>28),O=Z+(B^H^$)+J[4]+1272893353&4294967295,Z=B+(O<<11&4294967295|O>>>21),O=$+(Z^B^H)+J[7]+4139469664&4294967295,$=Z+(O<<16&4294967295|O>>>16),O=H+($^Z^B)+J[10]+3200236656&4294967295,H=$+(O<<23&4294967295|O>>>9),O=B+(H^$^Z)+J[13]+681279174&4294967295,B=H+(O<<4&4294967295|O>>>28),O=Z+(B^H^$)+J[0]+3936430074&4294967295,Z=B+(O<<11&4294967295|O>>>21),O=$+(Z^B^H)+J[3]+3572445317&4294967295,$=Z+(O<<16&4294967295|O>>>16),O=H+($^Z^B)+J[6]+76029189&4294967295,H=$+(O<<23&4294967295|O>>>9),O=B+(H^$^Z)+J[9]+3654602809&4294967295,B=H+(O<<4&4294967295|O>>>28),O=Z+(B^H^$)+J[12]+3873151461&4294967295,Z=B+(O<<11&4294967295|O>>>21),O=$+(Z^B^H)+J[15]+530742520&4294967295,$=Z+(O<<16&4294967295|O>>>16),O=H+($^Z^B)+J[2]+3299628645&4294967295,H=$+(O<<23&4294967295|O>>>9),O=B+($^(H|~Z))+J[0]+4096336452&4294967295,B=H+(O<<6&4294967295|O>>>26),O=Z+(H^(B|~$))+J[7]+1126891415&4294967295,Z=B+(O<<10&4294967295|O>>>22),O=$+(B^(Z|~H))+J[14]+2878612391&4294967295,$=Z+(O<<15&4294967295|O>>>17),O=H+(Z^($|~B))+J[5]+4237533241&4294967295,H=$+(O<<21&4294967295|O>>>11),O=B+($^(H|~Z))+J[12]+1700485571&4294967295,B=H+(O<<6&4294967295|O>>>26),O=Z+(H^(B|~$))+J[3]+2399980690&4294967295,Z=B+(O<<10&4294967295|O>>>22),O=$+(B^(Z|~H))+J[10]+4293915773&4294967295,$=Z+(O<<15&4294967295|O>>>17),O=H+(Z^($|~B))+J[1]+2240044497&4294967295,H=$+(O<<21&4294967295|O>>>11),O=B+($^(H|~Z))+J[8]+1873313359&4294967295,B=H+(O<<6&4294967295|O>>>26),O=Z+(H^(B|~$))+J[15]+4264355552&4294967295,Z=B+(O<<10&4294967295|O>>>22),O=$+(B^(Z|~H))+J[6]+2734768916&4294967295,$=Z+(O<<15&4294967295|O>>>17),O=H+(Z^($|~B))+J[13]+1309151649&4294967295,H=$+(O<<21&4294967295|O>>>11),O=B+($^(H|~Z))+J[4]+4149444226&4294967295,B=H+(O<<6&4294967295|O>>>26),O=Z+(H^(B|~$))+J[11]+3174756917&4294967295,Z=B+(O<<10&4294967295|O>>>22),O=$+(B^(Z|~H))+J[2]+718787259&4294967295,$=Z+(O<<15&4294967295|O>>>17),O=H+(Z^($|~B))+J[9]+3951481745&4294967295,q.g[0]=q.g[0]+B&4294967295,q.g[1]=q.g[1]+($+(O<<21&4294967295|O>>>11))&4294967295,q.g[2]=q.g[2]+$&4294967295,q.g[3]=q.g[3]+Z&4294967295}a.prototype.v=function(q,B){B===void 0&&(B=q.length);const H=B-this.blockSize,J=this.C;let $=this.h,Z=0;for(;Z<B;){if($==0)for(;Z<=H;)i(this,q,Z),Z+=this.blockSize;if(typeof q=="string"){for(;Z<B;)if(J[$++]=q.charCodeAt(Z++),$==this.blockSize){i(this,J),$=0;break}}else for(;Z<B;)if(J[$++]=q[Z++],$==this.blockSize){i(this,J),$=0;break}}this.h=$,this.o+=B},a.prototype.A=function(){var q=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);q[0]=128;for(var B=1;B<q.length-8;++B)q[B]=0;B=this.o*8;for(var H=q.length-8;H<q.length;++H)q[H]=B&255,B/=256;for(this.v(q),q=Array(16),B=0,H=0;H<4;++H)for(let J=0;J<32;J+=8)q[B++]=this.g[H]>>>J&255;return q};function c(q,B){var H=f;return Object.prototype.hasOwnProperty.call(H,q)?H[q]:H[q]=B(q)}function u(q,B){this.h=B;const H=[];let J=!0;for(let $=q.length-1;$>=0;$--){const Z=q[$]|0;J&&Z==B||(H[$]=Z,J=!1)}this.g=H}var f={};function m(q){return-128<=q&&q<128?c(q,function(B){return new u([B|0],B<0?-1:0)}):new u([q|0],q<0?-1:0)}function b(q){if(isNaN(q)||!isFinite(q))return E;if(q<0)return F(b(-q));const B=[];let H=1;for(let J=0;q>=H;J++)B[J]=q/H|0,H*=4294967296;return new u(B,0)}function T(q,B){if(q.length==0)throw Error("number format error: empty string");if(B=B||10,B<2||36<B)throw Error("radix out of range: "+B);if(q.charAt(0)=="-")return F(T(q.substring(1),B));if(q.indexOf("-")>=0)throw Error('number format error: interior "-" character');const H=b(Math.pow(B,8));let J=E;for(let Z=0;Z<q.length;Z+=8){var $=Math.min(8,q.length-Z);const O=parseInt(q.substring(Z,Z+$),B);$<8?($=b(Math.pow(B,$)),J=J.j($).add(b(O))):(J=J.j(H),J=J.add(b(O)))}return J}var E=m(0),C=m(1),L=m(16777216);s=u.prototype,s.m=function(){if(V(this))return-F(this).m();let q=0,B=1;for(let H=0;H<this.g.length;H++){const J=this.i(H);q+=(J>=0?J:4294967296+J)*B,B*=4294967296}return q},s.toString=function(q){if(q=q||10,q<2||36<q)throw Error("radix out of range: "+q);if(P(this))return"0";if(V(this))return"-"+F(this).toString(q);const B=b(Math.pow(q,6));var H=this;let J="";for(;;){const $=K(H,B).g;H=Y(H,$.j(B));let Z=((H.g.length>0?H.g[0]:H.h)>>>0).toString(q);if(H=$,P(H))return Z+J;for(;Z.length<6;)Z="0"+Z;J=Z+J}},s.i=function(q){return q<0?0:q<this.g.length?this.g[q]:this.h};function P(q){if(q.h!=0)return!1;for(let B=0;B<q.g.length;B++)if(q.g[B]!=0)return!1;return!0}function V(q){return q.h==-1}s.l=function(q){return q=Y(this,q),V(q)?-1:P(q)?0:1};function F(q){const B=q.g.length,H=[];for(let J=0;J<B;J++)H[J]=~q.g[J];return new u(H,~q.h).add(C)}s.abs=function(){return V(this)?F(this):this},s.add=function(q){const B=Math.max(this.g.length,q.g.length),H=[];let J=0;for(let $=0;$<=B;$++){let Z=J+(this.i($)&65535)+(q.i($)&65535),O=(Z>>>16)+(this.i($)>>>16)+(q.i($)>>>16);J=O>>>16,Z&=65535,O&=65535,H[$]=O<<16|Z}return new u(H,H[H.length-1]&-2147483648?-1:0)};function Y(q,B){return q.add(F(B))}s.j=function(q){if(P(this)||P(q))return E;if(V(this))return V(q)?F(this).j(F(q)):F(F(this).j(q));if(V(q))return F(this.j(F(q)));if(this.l(L)<0&&q.l(L)<0)return b(this.m()*q.m());const B=this.g.length+q.g.length,H=[];for(var J=0;J<2*B;J++)H[J]=0;for(J=0;J<this.g.length;J++)for(let $=0;$<q.g.length;$++){const Z=this.i(J)>>>16,O=this.i(J)&65535,Ce=q.i($)>>>16,Oe=q.i($)&65535;H[2*J+2*$]+=O*Oe,W(H,2*J+2*$),H[2*J+2*$+1]+=Z*Oe,W(H,2*J+2*$+1),H[2*J+2*$+1]+=O*Ce,W(H,2*J+2*$+1),H[2*J+2*$+2]+=Z*Ce,W(H,2*J+2*$+2)}for(q=0;q<B;q++)H[q]=H[2*q+1]<<16|H[2*q];for(q=B;q<2*B;q++)H[q]=0;return new u(H,0)};function W(q,B){for(;(q[B]&65535)!=q[B];)q[B+1]+=q[B]>>>16,q[B]&=65535,B++}function se(q,B){this.g=q,this.h=B}function K(q,B){if(P(B))throw Error("division by zero");if(P(q))return new se(E,E);if(V(q))return B=K(F(q),B),new se(F(B.g),F(B.h));if(V(B))return B=K(q,F(B)),new se(F(B.g),B.h);if(q.g.length>30){if(V(q)||V(B))throw Error("slowDivide_ only works with positive integers.");for(var H=C,J=B;J.l(q)<=0;)H=fe(H),J=fe(J);var $=ke(H,1),Z=ke(J,1);for(J=ke(J,2),H=ke(H,2);!P(J);){var O=Z.add(J);O.l(q)<=0&&($=$.add(H),Z=O),J=ke(J,1),H=ke(H,1)}return B=Y(q,$.j(B)),new se($,B)}for($=E;q.l(B)>=0;){for(H=Math.max(1,Math.floor(q.m()/B.m())),J=Math.ceil(Math.log(H)/Math.LN2),J=J<=48?1:Math.pow(2,J-48),Z=b(H),O=Z.j(B);V(O)||O.l(q)>0;)H-=J,Z=b(H),O=Z.j(B);P(Z)&&(Z=C),$=$.add(Z),q=Y(q,O)}return new se($,q)}s.B=function(q){return K(this,q).h},s.and=function(q){const B=Math.max(this.g.length,q.g.length),H=[];for(let J=0;J<B;J++)H[J]=this.i(J)&q.i(J);return new u(H,this.h&q.h)},s.or=function(q){const B=Math.max(this.g.length,q.g.length),H=[];for(let J=0;J<B;J++)H[J]=this.i(J)|q.i(J);return new u(H,this.h|q.h)},s.xor=function(q){const B=Math.max(this.g.length,q.g.length),H=[];for(let J=0;J<B;J++)H[J]=this.i(J)^q.i(J);return new u(H,this.h^q.h)};function fe(q){const B=q.g.length+1,H=[];for(let J=0;J<B;J++)H[J]=q.i(J)<<1|q.i(J-1)>>>31;return new u(H,q.h)}function ke(q,B){const H=B>>5;B%=32;const J=q.g.length-H,$=[];for(let Z=0;Z<J;Z++)$[Z]=B>0?q.i(Z+H)>>>B|q.i(Z+H+1)<<32-B:q.i(Z+H);return new u($,q.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,Sw=a,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=b,u.fromString=T,il=u}).apply(typeof qb<"u"?qb:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Tw,pd,Ew,Ef,Pg,Nw,jw,kw;(function(){var s,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var j=0;j<p.length;++j){var R=p[j];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var a=t(this);function i(p,j){if(j)e:{var R=a;p=p.split(".");for(var G=0;G<p.length-1;G++){var we=p[G];if(!(we in R))break e;R=R[we]}p=p[p.length-1],G=R[p],j=j(G),j!=G&&j!=null&&e(R,p,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(j){var R=[],G;for(G in j)Object.prototype.hasOwnProperty.call(j,G)&&R.push([G,j[G]]);return R}});var c=c||{},u=this||self;function f(p){var j=typeof p;return j=="object"&&p!=null||j=="function"}function m(p,j,R){return p.call.apply(p.bind,arguments)}function b(p,j,R){return b=m,b.apply(null,arguments)}function T(p,j){var R=Array.prototype.slice.call(arguments,1);return function(){var G=R.slice();return G.push.apply(G,arguments),p.apply(this,G)}}function E(p,j){function R(){}R.prototype=j.prototype,p.Z=j.prototype,p.prototype=new R,p.prototype.constructor=p,p.Ob=function(G,we,Ae){for(var lt=Array(arguments.length-2),$t=2;$t<arguments.length;$t++)lt[$t-2]=arguments[$t];return j.prototype[we].apply(G,lt)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function L(p){const j=p.length;if(j>0){const R=Array(j);for(let G=0;G<j;G++)R[G]=p[G];return R}return[]}function P(p,j){for(let G=1;G<arguments.length;G++){const we=arguments[G];var R=typeof we;if(R=R!="object"?R:we?Array.isArray(we)?"array":R:"null",R=="array"||R=="object"&&typeof we.length=="number"){R=p.length||0;const Ae=we.length||0;p.length=R+Ae;for(let lt=0;lt<Ae;lt++)p[R+lt]=we[lt]}else p.push(we)}}class V{constructor(j,R){this.i=j,this.j=R,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function F(p){u.setTimeout(()=>{throw p},0)}function Y(){var p=q;let j=null;return p.g&&(j=p.g,p.g=p.g.next,p.g||(p.h=null),j.next=null),j}class W{constructor(){this.h=this.g=null}add(j,R){const G=se.get();G.set(j,R),this.h?this.h.next=G:this.g=G,this.h=G}}var se=new V(()=>new K,p=>p.reset());class K{constructor(){this.next=this.g=this.h=null}set(j,R){this.h=j,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ke=!1,q=new W,B=()=>{const p=Promise.resolve(void 0);fe=()=>{p.then(H)}};function H(){for(var p;p=Y();){try{p.h.call(p.g)}catch(R){F(R)}var j=se;j.j(p),j.h<100&&(j.h++,p.next=j.g,j.g=p)}ke=!1}function J(){this.u=this.u,this.C=this.C}J.prototype.u=!1,J.prototype.dispose=function(){this.u||(this.u=!0,this.N())},J.prototype[Symbol.dispose]=function(){this.dispose()},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(p,j){this.type=p,this.g=this.target=j,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var Z=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,j=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const R=()=>{};u.addEventListener("test",R,j),u.removeEventListener("test",R,j)}catch{}return p})();function O(p){return/^[\s\xa0]*$/.test(p)}function Ce(p,j){$.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,j)}E(Ce,$),Ce.prototype.init=function(p,j){const R=this.type=p.type,G=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=j,j=p.relatedTarget,j||(R=="mouseover"?j=p.fromElement:R=="mouseout"&&(j=p.toElement)),this.relatedTarget=j,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),ee=0;function _e(p,j,R,G,we){this.listener=p,this.proxy=null,this.src=j,this.type=R,this.capture=!!G,this.ha=we,this.key=++ee,this.da=this.fa=!1}function Be(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function De(p,j,R){for(const G in p)j.call(R,p[G],G,p)}function Xe(p,j){for(const R in p)j.call(void 0,p[R],R,p)}function Q(p){const j={};for(const R in p)j[R]=p[R];return j}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ze(p,j){let R,G;for(let we=1;we<arguments.length;we++){G=arguments[we];for(R in G)p[R]=G[R];for(let Ae=0;Ae<de.length;Ae++)R=de[Ae],Object.prototype.hasOwnProperty.call(G,R)&&(p[R]=G[R])}}function Pe(p){this.src=p,this.g={},this.h=0}Pe.prototype.add=function(p,j,R,G,we){const Ae=p.toString();p=this.g[Ae],p||(p=this.g[Ae]=[],this.h++);const lt=Fe(p,j,G,we);return lt>-1?(j=p[lt],R||(j.fa=!1)):(j=new _e(j,this.src,Ae,!!G,we),j.fa=R,p.push(j)),j};function he(p,j){const R=j.type;if(R in p.g){var G=p.g[R],we=Array.prototype.indexOf.call(G,j,void 0),Ae;(Ae=we>=0)&&Array.prototype.splice.call(G,we,1),Ae&&(Be(j),p.g[R].length==0&&(delete p.g[R],p.h--))}}function Fe(p,j,R,G){for(let we=0;we<p.length;++we){const Ae=p[we];if(!Ae.da&&Ae.listener==j&&Ae.capture==!!R&&Ae.ha==G)return we}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),ye={};function Se(p,j,R,G,we){if(Array.isArray(j)){for(let Ae=0;Ae<j.length;Ae++)Se(p,j[Ae],R,G,we);return null}return R=Je(R),p&&p[Oe]?p.J(j,R,f(G)?!!G.capture:!1,we):et(p,j,R,!1,G,we)}function et(p,j,R,G,we,Ae){if(!j)throw Error("Invalid event type");const lt=f(we)?!!we.capture:!!we;let $t=jt(p);if($t||(p[ue]=$t=new Pe(p)),R=$t.add(j,R,G,lt,Ae),R.proxy)return R;if(G=Me(),R.proxy=G,G.src=p,G.listener=R,p.addEventListener)Z||(we=lt),we===void 0&&(we=!1),p.addEventListener(j.toString(),G,we);else if(p.attachEvent)p.attachEvent(At(j.toString()),G);else if(p.addListener&&p.removeListener)p.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Me(){function p(R){return j.call(p.src,p.listener,R)}const j=Rt;return p}function mt(p,j,R,G,we){if(Array.isArray(j))for(var Ae=0;Ae<j.length;Ae++)mt(p,j[Ae],R,G,we);else G=f(G)?!!G.capture:!!G,R=Je(R),p&&p[Oe]?(p=p.i,Ae=String(j).toString(),Ae in p.g&&(j=p.g[Ae],R=Fe(j,R,G,we),R>-1&&(Be(j[R]),Array.prototype.splice.call(j,R,1),j.length==0&&(delete p.g[Ae],p.h--)))):p&&(p=jt(p))&&(j=p.g[j.toString()],p=-1,j&&(p=Fe(j,R,G,we)),(R=p>-1?j[p]:null)&&dt(R))}function dt(p){if(typeof p!="number"&&p&&!p.da){var j=p.src;if(j&&j[Oe])he(j.i,p);else{var R=p.type,G=p.proxy;j.removeEventListener?j.removeEventListener(R,G,p.capture):j.detachEvent?j.detachEvent(At(R),G):j.addListener&&j.removeListener&&j.removeListener(G),(R=jt(j))?(he(R,p),R.h==0&&(R.src=null,j[ue]=null)):Be(p)}}}function At(p){return p in ye?ye[p]:ye[p]="on"+p}function Rt(p,j){if(p.da)p=!0;else{j=new Ce(j,this);const R=p.listener,G=p.ha||p.src;p.fa&&dt(p),p=R.call(G,j)}return p}function jt(p){return p=p[ue],p instanceof Pe?p:null}var ae="__closure_events_fn_"+(Math.random()*1e9>>>0);function Je(p){return typeof p=="function"?p:(p[ae]||(p[ae]=function(j){return p.handleEvent(j)}),p[ae])}function ge(){J.call(this),this.i=new Pe(this),this.M=this,this.G=null}E(ge,J),ge.prototype[Oe]=!0,ge.prototype.removeEventListener=function(p,j,R,G){mt(this,p,j,R,G)};function be(p,j){var R,G=p.G;if(G)for(R=[];G;G=G.G)R.push(G);if(p=p.M,G=j.type||j,typeof j=="string")j=new $(j,p);else if(j instanceof $)j.target=j.target||p;else{var we=j;j=new $(G,p),ze(j,we)}we=!0;let Ae,lt;if(R)for(lt=R.length-1;lt>=0;lt--)Ae=j.g=R[lt],we=xe(Ae,G,!0,j)&&we;if(Ae=j.g=p,we=xe(Ae,G,!0,j)&&we,we=xe(Ae,G,!1,j)&&we,R)for(lt=0;lt<R.length;lt++)Ae=j.g=R[lt],we=xe(Ae,G,!1,j)&&we}ge.prototype.N=function(){if(ge.Z.N.call(this),this.i){var p=this.i;for(const j in p.g){const R=p.g[j];for(let G=0;G<R.length;G++)Be(R[G]);delete p.g[j],p.h--}}this.G=null},ge.prototype.J=function(p,j,R,G){return this.i.add(String(p),j,!1,R,G)},ge.prototype.K=function(p,j,R,G){return this.i.add(String(p),j,!0,R,G)};function xe(p,j,R,G){if(j=p.i.g[String(j)],!j)return!0;j=j.concat();let we=!0;for(let Ae=0;Ae<j.length;++Ae){const lt=j[Ae];if(lt&&!lt.da&&lt.capture==R){const $t=lt.listener,Jn=lt.ha||lt.src;lt.fa&&he(p.i,lt),we=$t.call(Jn,G)!==!1&&we}}return we&&!G.defaultPrevented}function nt(p,j){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=b(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:u.setTimeout(p,j||0)}function ct(p){p.g=nt(()=>{p.g=null,p.i&&(p.i=!1,ct(p))},p.l);const j=p.h;p.h=null,p.m.apply(null,j)}class We extends J{constructor(j,R){super(),this.m=j,this.l=R,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:ct(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _t(p){J.call(this),this.h=p,this.g={}}E(_t,J);var wt=[];function Vt(p){De(p.g,function(j,R){this.g.hasOwnProperty(R)&&dt(j)},p),p.g={}}_t.prototype.N=function(){_t.Z.N.call(this),Vt(this)},_t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lt=u.JSON.stringify,nn=u.JSON.parse,Kt=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function rn(){}function Ys(){}var Fn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Le(){$.call(this,"d")}E(Le,$);function tt(){$.call(this,"c")}E(tt,$);var it={},Ut=null;function Et(){return Ut=Ut||new ge}it.Ia="serverreachability";function ne(p){$.call(this,it.Ia,p)}E(ne,$);function ve(p){const j=Et();be(j,new ne(j))}it.STAT_EVENT="statevent";function st(p,j){$.call(this,it.STAT_EVENT,p),this.stat=j}E(st,$);function ot(p){const j=Et();be(j,new st(j,p))}it.Ja="timingevent";function xt(p,j){$.call(this,it.Ja,p),this.size=j}E(xt,$);function sn(p,j){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},j)}function yn(){this.g=!0}yn.prototype.ua=function(){this.g=!1};function Is(p,j,R,G,we,Ae){p.info(function(){if(p.g)if(Ae){var lt="",$t=Ae.split("&");for(let vn=0;vn<$t.length;vn++){var Jn=$t[vn].split("=");if(Jn.length>1){const $n=Jn[0];Jn=Jn[1];const Er=$n.split("_");lt=Er.length>=2&&Er[1]=="type"?lt+($n+"="+Jn+"&"):lt+($n+"=redacted&")}}}else lt=null;else lt=Ae;return"XMLHTTP REQ ("+G+") [attempt "+we+"]: "+j+`
`+R+`
`+lt})}function Wn(p,j,R,G,we,Ae,lt){p.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+we+"]: "+j+`
`+R+`
`+Ae+" "+lt})}function xn(p,j,R,G){p.info(function(){return"XMLHTTP TEXT ("+j+"): "+Yt(p,R)+(G?" "+G:"")})}function Un(p,j){p.info(function(){return"TIMEOUT: "+j})}yn.prototype.info=function(){};function Yt(p,j){if(!p.g)return j;if(!j)return null;try{const Ae=JSON.parse(j);if(Ae){for(p=0;p<Ae.length;p++)if(Array.isArray(Ae[p])){var R=Ae[p];if(!(R.length<2)){var G=R[1];if(Array.isArray(G)&&!(G.length<1)){var we=G[0];if(we!="noop"&&we!="stop"&&we!="close")for(let lt=1;lt<G.length;lt++)G[lt]=""}}}}return Lt(Ae)}catch{return j}}var Tn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},os;function me(){}E(me,rn),me.prototype.g=function(){return new XMLHttpRequest},os=new me;function Ve(p){return encodeURIComponent(String(p))}function Ze(p){var j=1;p=p.split(":");const R=[];for(;j>0&&p.length;)R.push(p.shift()),j--;return p.length&&R.push(p.join(":")),R}function Ye(p,j,R,G){this.j=p,this.i=j,this.l=R,this.S=G||1,this.V=new _t(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ut}function ut(){this.i=null,this.g="",this.h=!1}var ft={},Tt={};function ie(p,j,R){p.M=1,p.A=ji(ns(j)),p.u=R,p.R=!0,at(p,null)}function at(p,j){p.F=Date.now(),mn(p),p.B=ns(p.A);var R=p.B,G=p.S;Array.isArray(G)||(G=[String(G)]),vo(R.i,"t",G),p.C=0,R=p.j.L,p.h=new ut,p.g=So(p.j,R?j:null,!p.u),p.P>0&&(p.O=new We(b(p.Y,p,p.g),p.P)),j=p.V,R=p.g,G=p.ba;var we="readystatechange";Array.isArray(we)||(we&&(wt[0]=we.toString()),we=wt);for(let Ae=0;Ae<we.length;Ae++){const lt=Se(R,we[Ae],G||j.handleEvent,!1,j.h||j);if(!lt)break;j.g[lt.key]=lt}j=p.J?Q(p.J):{},p.u?(p.v||(p.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,j)):(p.v="GET",p.g.ea(p.B,p.v,null,j)),ve(),Is(p.i,p.v,p.B,p.l,p.S,p.u)}Ye.prototype.ba=function(p){p=p.target;const j=this.O;j&&dr(p)==3?j.j():this.Y(p)},Ye.prototype.Y=function(p){try{if(p==this.g)e:{const $t=dr(this.g),Jn=this.g.ya(),vn=this.g.ca();if(!($t<3)&&($t!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||$t!=4||Jn==7||(Jn==8||vn<=0?ve(3):ve(2)),ls(this);var j=this.g.ca();this.X=j;var R=It(this);if(this.o=j==200,Wn(this.i,this.v,this.B,this.l,this.S,$t,j),this.o){if(this.U&&!this.L){t:{if(this.g){var G,we=this.g;if((G=we.g?we.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(G)){var Ae=G;break t}}Ae=null}if(p=Ae)xn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Os(this,p);else{this.o=!1,this.m=3,ot(12),ts(this),gs(this);break e}}if(this.R){p=!0;let $n;for(;!this.K&&this.C<R.length;)if($n=_n(this,R),$n==Tt){$t==4&&(this.m=4,ot(14),p=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if($n==ft){this.m=4,ot(15),xn(this.i,this.l,R,"[Invalid Chunk]"),p=!1;break}else xn(this.i,this.l,$n,null),Os(this,$n);if(Ft(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||R.length!=0||this.h.h||(this.m=1,ot(16),p=!1),this.o=this.o&&p,!p)xn(this.i,this.l,R,"[Invalid Chunked Response]"),ts(this),gs(this);else if(R.length>0&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.aa&&!lt.P&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),hr(lt),lt.P=!0,ot(11))}}else xn(this.i,this.l,R,null),Os(this,R);$t==4&&ts(this),this.o&&!this.K&&($t==4?fc(this.j,this):(this.o=!1,mn(this)))}else Ta(this.g),j==400&&R.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),ts(this),gs(this)}}}catch{}};function It(p){if(!Ft(p))return p.g.la();const j=An(p.g);if(j==="")return"";let R="";const G=j.length,we=dr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return ts(p),gs(p),"";p.h.i=new u.TextDecoder}for(let Ae=0;Ae<G;Ae++)p.h.h=!0,R+=p.h.i.decode(j[Ae],{stream:!(we&&Ae==G-1)});return j.length=0,p.h.g+=R,p.C=0,p.h.g}function Ft(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function _n(p,j){var R=p.C,G=j.indexOf(`
`,R);return G==-1?Tt:(R=Number(j.substring(R,G)),isNaN(R)?ft:(G+=1,G+R>j.length?Tt:(j=j.slice(G,G+R),p.C=G+R,j)))}Ye.prototype.cancel=function(){this.K=!0,ts(this)};function mn(p){p.T=Date.now()+p.H,Bn(p,p.H)}function Bn(p,j){if(p.D!=null)throw Error("WatchDog timer not null");p.D=sn(b(p.aa,p),j)}function ls(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Ye.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Un(this.i,this.B),this.M!=2&&(ve(),ot(17)),ts(this),this.m=2,gs(this)):Bn(this,this.T-p)};function gs(p){p.j.I==0||p.K||fc(p.j,p)}function ts(p){ls(p);var j=p.O;j&&typeof j.dispose=="function"&&j.dispose(),p.O=null,Vt(p.V),p.g&&(j=p.g,p.g=null,j.abort(),j.dispose())}function Os(p,j){try{var R=p.j;if(R.I!=0&&(R.g==p||Dt(R.h,p))){if(!p.L&&Dt(R.h,p)&&R.I==3){try{var G=R.Ba.g.parse(j)}catch{G=null}if(Array.isArray(G)&&G.length==3){var we=G;if(we[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<p.F)Di(R),ia(R);else break e;ti(R),ot(18)}}else R.xa=we[1],0<R.xa-R.K&&we[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=sn(b(R.Va,R),6e3));cr(R.h)<=1&&R.ta&&(R.ta=void 0)}else oa(R,11)}else if((p.L||R.g==p)&&Di(R),!O(j))for(we=R.Ba.g.parse(j),j=0;j<we.length;j++){let vn=we[j];const $n=vn[0];if(!($n<=R.K))if(R.K=$n,vn=vn[1],R.I==2)if(vn[0]=="c"){R.M=vn[1],R.ba=vn[2];const Er=vn[3];Er!=null&&(R.ka=Er,R.j.info("VER="+R.ka));const la=vn[4];la!=null&&(R.za=la,R.j.info("SVER="+R.za));const Nr=vn[5];Nr!=null&&typeof Nr=="number"&&Nr>0&&(G=1.5*Nr,R.O=G,R.j.info("backChannelRequestTimeoutMs_="+G)),G=R;const qr=p.g;if(qr){const ja=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var Ae=G.h;Ae.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(Sr(Ae,Ae.h),Ae.h=null))}if(G.G){const Mi=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;Mi&&(G.wa=Mi,En(G.J,G.G,Mi))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-p.F,R.j.info("Handshake RTT: "+R.T+"ms")),G=R;var lt=p;if(G.na=mc(G,G.L?G.ba:null,G.W),lt.L){ur(G.h,lt);var $t=lt,Jn=G.O;Jn&&($t.H=Jn),$t.D&&(ls($t),mn($t)),G.g=lt}else El(G);R.i.length>0&&In(R)}else vn[0]!="stop"&&vn[0]!="close"||oa(R,7);else R.I==3&&(vn[0]=="stop"||vn[0]=="close"?vn[0]=="stop"?oa(R,7):Yn(R):vn[0]!="noop"&&R.l&&R.l.qa(vn),R.A=0)}}ve(4)}catch{}}var Hn=class{constructor(p,j){this.g=p,this.map=j}};function Ha(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ei(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function cr(p){return p.h?1:p.g?p.g.size:0}function Dt(p,j){return p.h?p.h==j:p.g?p.g.has(j):!1}function Sr(p,j){p.g?p.g.add(j):p.h=j}function ur(p,j){p.h&&p.h==j?p.h=null:p.g&&p.g.has(j)&&p.g.delete(j)}Ha.prototype.cancel=function(){if(this.i=Br(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Br(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let j=p.i;for(const R of p.g.values())j=j.concat(R.G);return j}return L(p.i)}var Ni=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $a(p,j){if(p){p=p.split("&");for(let R=0;R<p.length;R++){const G=p[R].indexOf("=");let we,Ae=null;G>=0?(we=p[R].substring(0,G),Ae=p[R].substring(G+1)):we=p[R],j(we,Ae?decodeURIComponent(Ae.replace(/\+/g," ")):"")}}}function Qs(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;p instanceof Qs?(this.l=p.l,ss(this,p.j),this.o=p.o,this.g=p.g,Ga(this,p.u),this.h=p.h,bl(this,dc(p.i)),this.m=p.m):p&&(j=String(p).match(Ni))?(this.l=!1,ss(this,j[1]||"",!0),this.o=sa(j[2]||""),this.g=sa(j[3]||"",!0),Ga(this,j[4]),this.h=sa(j[5]||"",!0),bl(this,j[6]||"",!0),this.m=sa(j[7]||"")):(this.l=!1,this.i=new Ka(null,this.l))}Qs.prototype.toString=function(){const p=[];var j=this.j;j&&p.push(ki(j,yo,!0),":");var R=this.g;return(R||j=="file")&&(p.push("//"),(j=this.o)&&p.push(ki(j,yo,!0),"@"),p.push(Ve(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&p.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&p.push("/"),p.push(ki(R,R.charAt(0)=="/"?xl:lc,!0))),(R=this.i.toString())&&p.push("?",R),(R=this.m)&&p.push("#",ki(R,cc)),p.join("")},Qs.prototype.resolve=function(p){const j=ns(this);let R=!!p.j;R?ss(j,p.j):R=!!p.o,R?j.o=p.o:R=!!p.g,R?j.g=p.g:R=p.u!=null;var G=p.h;if(R)Ga(j,p.u);else if(R=!!p.h){if(G.charAt(0)!="/")if(this.g&&!this.h)G="/"+G;else{var we=j.h.lastIndexOf("/");we!=-1&&(G=j.h.slice(0,we+1)+G)}if(we=G,we==".."||we==".")G="";else if(we.indexOf("./")!=-1||we.indexOf("/.")!=-1){G=we.lastIndexOf("/",0)==0,we=we.split("/");const Ae=[];for(let lt=0;lt<we.length;){const $t=we[lt++];$t=="."?G&&lt==we.length&&Ae.push(""):$t==".."?((Ae.length>1||Ae.length==1&&Ae[0]!="")&&Ae.pop(),G&&lt==we.length&&Ae.push("")):(Ae.push($t),G=!0)}G=Ae.join("/")}else G=we}return R?j.h=G:R=p.i.toString()!=="",R?bl(j,dc(p.i)):R=!!p.m,R&&(j.m=p.m),j};function ns(p){return new Qs(p)}function ss(p,j,R){p.j=R?sa(j,!0):j,p.j&&(p.j=p.j.replace(/:$/,""))}function Ga(p,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);p.u=j}else p.u=null}function bl(p,j,R){j instanceof Ka?(p.i=j,bo(p.i,p.l)):(R||(j=ki(j,Wa)),p.i=new Ka(j,p.l))}function En(p,j,R){p.i.set(j,R)}function ji(p){return En(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function sa(p,j){return p?j?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ki(p,j,R){return typeof p=="string"?(p=encodeURI(p).replace(j,Xs),R&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Xs(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var yo=/[#\/\?@]/g,lc=/[#\?:]/g,xl=/[#\?]/g,Wa=/[#\?@]/g,cc=/#/g;function Ka(p,j){this.h=this.g=null,this.i=p||null,this.j=!!j}function Js(p){p.g||(p.g=new Map,p.h=0,p.i&&$a(p.i,function(j,R){p.add(decodeURIComponent(j.replace(/\+/g," ")),R)}))}s=Ka.prototype,s.add=function(p,j){Js(this),this.i=null,p=Ya(this,p);let R=this.g.get(p);return R||this.g.set(p,R=[]),R.push(j),this.h+=1,this};function uc(p,j){Js(p),j=Ya(p,j),p.g.has(j)&&(p.i=null,p.h-=p.g.get(j).length,p.g.delete(j))}function _l(p,j){return Js(p),j=Ya(p,j),p.g.has(j)}s.forEach=function(p,j){Js(this),this.g.forEach(function(R,G){R.forEach(function(we){p.call(j,we,G,this)},this)},this)};function wl(p,j){Js(p);let R=[];if(typeof j=="string")_l(p,j)&&(R=R.concat(p.g.get(Ya(p,j))));else for(p=Array.from(p.g.values()),j=0;j<p.length;j++)R=R.concat(p[j]);return R}s.set=function(p,j){return Js(this),this.i=null,p=Ya(this,p),_l(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[j]),this.h+=1,this},s.get=function(p,j){return p?(p=wl(this,p),p.length>0?String(p[0]):j):j};function vo(p,j,R){uc(p,j),R.length>0&&(p.i=null,p.g.set(Ya(p,j),L(R)),p.h+=R.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],j=Array.from(this.g.keys());for(let G=0;G<j.length;G++){var R=j[G];const we=Ve(R);R=wl(this,R);for(let Ae=0;Ae<R.length;Ae++){let lt=we;R[Ae]!==""&&(lt+="="+Ve(R[Ae])),p.push(lt)}}return this.i=p.join("&")};function dc(p){const j=new Ka;return j.i=p.i,p.g&&(j.g=new Map(p.g),j.h=p.h),j}function Ya(p,j){return j=String(j),p.j&&(j=j.toLowerCase()),j}function bo(p,j){j&&!p.j&&(Js(p),p.i=null,p.g.forEach(function(R,G){const we=G.toLowerCase();G!=we&&(uc(this,G),vo(this,we,R))},p)),p.j=j}function zr(p,j){const R=new yn;if(u.Image){const G=new Image;G.onload=T(Tr,R,"TestLoadImage: loaded",!0,j,G),G.onerror=T(Tr,R,"TestLoadImage: error",!1,j,G),G.onabort=T(Tr,R,"TestLoadImage: abort",!1,j,G),G.ontimeout=T(Tr,R,"TestLoadImage: timeout",!1,j,G),u.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=p}else j(!1)}function Sl(p,j){const R=new yn,G=new AbortController,we=setTimeout(()=>{G.abort(),Tr(R,"TestPingServer: timeout",!1,j)},1e4);fetch(p,{signal:G.signal}).then(Ae=>{clearTimeout(we),Ae.ok?Tr(R,"TestPingServer: ok",!0,j):Tr(R,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(we),Tr(R,"TestPingServer: error",!1,j)})}function Tr(p,j,R,G,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),G(R)}catch{}}function Qa(){this.g=new Kt}function Fs(p){this.i=p.Sb||null,this.h=p.ab||!1}E(Fs,rn),Fs.prototype.g=function(){return new Ci(this.i,this.h)};function Ci(p,j){ge.call(this),this.H=p,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ci,ge),s=Ci.prototype,s.open=function(p,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=j,this.readyState=1,Fr(this)},s.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(j.body=p),(this.H||u).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ja(this)),this.readyState=0},s.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xa(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xa(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}s.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var j=p.value?p.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!p.done}))&&(this.response=this.responseText+=j)}p.done?Ja(this):Fr(this),this.readyState==3&&Xa(this)}},s.Oa=function(p){this.g&&(this.response=this.responseText=p,Ja(this))},s.Na=function(p){this.g&&(this.response=p,Ja(this))},s.ga=function(){this.g&&Ja(this)};function Ja(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Fr(p)}s.setRequestHeader=function(p,j){this.A.append(p,j)},s.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],j=this.h.entries();for(var R=j.next();!R.done;)R=R.value,p.push(R[0]+": "+R[1]),R=j.next();return p.join(`\r
`)};function Fr(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ci.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Zs(p){let j="";return De(p,function(R,G){j+=G,j+=":",j+=R,j+=`\r
`}),j}function Ai(p,j,R){e:{for(G in R){var G=!1;break e}G=!0}G||(R=Zs(R),typeof p=="string"?R!=null&&Ve(R):En(p,j,R))}function kn(p){ge.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(kn,ge);var ra=/^https?$/i,Tl=["POST","PUT"];s=kn.prototype,s.Fa=function(p){this.H=p},s.ea=function(p,j,R,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);j=j?j.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():os.g(),this.g.onreadystatechange=C(b(this.Ca,this));try{this.B=!0,this.g.open(j,String(p),!0),this.B=!1}catch(Ae){aa(this,Ae);return}if(p=R||"",R=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var we in G)R.set(we,G[we]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const Ae of G.keys())R.set(Ae,G.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(R.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),we=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(Tl,j,void 0)>=0)||G||we||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,lt]of R)this.g.setRequestHeader(Ae,lt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(Ae){aa(this,Ae)}};function aa(p,j){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=j,p.o=5,xo(p),Sa(p)}function xo(p){p.A||(p.A=!0,be(p,"complete"),be(p,"error"))}s.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,be(this,"complete"),be(this,"abort"),Sa(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sa(this,!0)),kn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Za(this):this.Xa())},s.Xa=function(){Za(this)};function Za(p){if(p.h&&typeof c<"u"){if(p.v&&dr(p)==4)setTimeout(p.Ca.bind(p),0);else if(be(p,"readystatechange"),dr(p)==4){p.h=!1;try{const Ae=p.ca();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var R;if(!(R=j)){var G;if(G=Ae===0){let lt=String(p.D).match(Ni)[1]||null;!lt&&u.self&&u.self.location&&(lt=u.self.location.protocol.slice(0,-1)),G=!ra.test(lt?lt.toLowerCase():"")}R=G}if(R)be(p,"complete"),be(p,"success");else{p.o=6;try{var we=dr(p)>2?p.g.statusText:""}catch{we=""}p.l=we+" ["+p.ca()+"]",xo(p)}}finally{Sa(p)}}}}function Sa(p,j){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const R=p.g;p.g=null,j||be(p,"ready");try{R.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function dr(p){return p.g?p.g.readyState:0}s.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(p){if(this.g){var j=this.g.responseText;return p&&j.indexOf(p)==0&&(j=j.substring(p.length)),nn(j)}};function An(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ta(p){const j={};p=(p.g&&dr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<p.length;G++){if(O(p[G]))continue;var R=Ze(p[G]);const we=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const Ae=j[we]||[];j[we]=Ae,Ae.push(R)}Xe(j,function(G){return G.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ys(p,j,R){return R&&R.internalChannelParams&&R.internalChannelParams[p]||j}function ei(p){this.za=0,this.i=[],this.j=new yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ys("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ys("baseRetryDelayMs",5e3,p),this.Za=ys("retryDelaySeedMs",1e4,p),this.Ta=ys("forwardChannelMaxRetries",2,p),this.va=ys("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ha(p&&p.concurrentRequestLimit),this.Ba=new Qa,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ei.prototype,s.ka=8,s.I=1,s.connect=function(p,j,R,G){ot(0),this.W=p,this.H=j||{},R&&G!==void 0&&(this.H.OSID=R,this.H.OAID=G),this.F=this.X,this.J=mc(this,null,this.W),In(this)};function Yn(p){if(_o(p),p.I==3){var j=p.V++,R=ns(p.J);if(En(R,"SID",p.M),En(R,"RID",j),En(R,"TYPE","terminate"),Ri(p,R),j=new Ye(p,p.j,j),j.M=2,j.A=ji(ns(R)),R=!1,u.navigator&&u.navigator.sendBeacon)try{R=u.navigator.sendBeacon(j.A.toString(),"")}catch{}!R&&u.Image&&(new Image().src=j.A,R=!0),R||(j.g=So(j.j,null),j.g.ea(j.A)),j.F=Date.now(),mn(j)}jl(p)}function ia(p){p.g&&(hr(p),p.g.cancel(),p.g=null)}function _o(p){ia(p),p.v&&(u.clearTimeout(p.v),p.v=null),Di(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function In(p){if(!Ei(p.h)&&!p.m){p.m=!0;var j=p.Ea;fe||B(),ke||(fe(),ke=!0),q.add(j,p),p.D=0}}function wo(p,j){return cr(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=j.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=sn(b(p.Ea,p,j),Nl(p,p.D)),p.D++,!0)}s.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const we=new Ye(this,this.j,p);let Ae=this.o;if(this.U&&(Ae?(Ae=Q(Ae),ze(Ae,this.U)):Ae=this.U),this.u!==null||this.R||(we.J=Ae,Ae=null),this.S)e:{for(var j=0,R=0;R<this.i.length;R++){t:{var G=this.i[R];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(j+=G,j>4096){j=R;break e}if(j===4096||R===this.i.length-1){j=R+1;break e}}j=1e3}else j=1e3;j=cs(this,we,j),R=ns(this.J),En(R,"RID",p),En(R,"CVER",22),this.G&&En(R,"X-HTTP-Session-Id",this.G),Ri(this,R),Ae&&(this.R?j="headers="+Ve(Zs(Ae))+"&"+j:this.u&&Ai(R,this.u,Ae)),Sr(this.h,we),this.Ra&&En(R,"TYPE","init"),this.S?(En(R,"$req",j),En(R,"SID","null"),we.U=!0,ie(we,R,null)):ie(we,R,j),this.I=2}}else this.I==3&&(p?Qt(this,p):this.i.length==0||Ei(this.h)||Qt(this))};function Qt(p,j){var R;j?R=j.l:R=p.V++;const G=ns(p.J);En(G,"SID",p.M),En(G,"RID",R),En(G,"AID",p.K),Ri(p,G),p.u&&p.o&&Ai(G,p.u,p.o),R=new Ye(p,p.j,R,p.D+1),p.u===null&&(R.J=p.o),j&&(p.i=j.G.concat(p.i)),j=cs(p,R,1e3),R.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Sr(p.h,R),ie(R,G,j)}function Ri(p,j){p.H&&De(p.H,function(R,G){En(j,G,R)}),p.l&&De({},function(R,G){En(j,G,R)})}function cs(p,j,R){R=Math.min(p.i.length,R);const G=p.l?b(p.l.Ka,p.l,p):null;e:{var we=p.i;let $t=-1;for(;;){const Jn=["count="+R];$t==-1?R>0?($t=we[0].g,Jn.push("ofs="+$t)):$t=0:Jn.push("ofs="+$t);let vn=!0;for(let $n=0;$n<R;$n++){var Ae=we[$n].g;const Er=we[$n].map;if(Ae-=$t,Ae<0)$t=Math.max(0,we[$n].g-100),vn=!1;else try{Ae="req"+Ae+"_"||"";try{var lt=Er instanceof Map?Er:Object.entries(Er);for(const[la,Nr]of lt){let qr=Nr;f(Nr)&&(qr=Lt(Nr)),Jn.push(Ae+la+"="+encodeURIComponent(qr))}}catch(la){throw Jn.push(Ae+"type="+encodeURIComponent("_badmap")),la}}catch{G&&G(Er)}}if(vn){lt=Jn.join("&");break e}}lt=void 0}return p=p.i.splice(0,R),j.G=p,lt}function El(p){if(!p.g&&!p.v){p.Y=1;var j=p.Da;fe||B(),ke||(fe(),ke=!0),q.add(j,p),p.A=0}}function ti(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=sn(b(p.Da,p),Nl(p,p.A)),p.A++,!0)}s.Da=function(){if(this.v=null,hc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=sn(b(this.Wa,this),p)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),ia(this),hc(this))};function hr(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function hc(p){p.g=new Ye(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var j=ns(p.na);En(j,"RID","rpc"),En(j,"SID",p.M),En(j,"AID",p.K),En(j,"CI",p.F?"0":"1"),!p.F&&p.ia&&En(j,"TO",p.ia),En(j,"TYPE","xmlhttp"),Ri(p,j),p.u&&p.o&&Ai(j,p.u,p.o),p.O&&(p.g.H=p.O);var R=p.g;p=p.ba,R.M=1,R.A=ji(ns(j)),R.u=null,R.R=!0,at(R,p)}s.Va=function(){this.C!=null&&(this.C=null,ia(this),ti(this),ot(19))};function Di(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function fc(p,j){var R=null;if(p.g==j){Di(p),hr(p),p.g=null;var G=2}else if(Dt(p.h,j))R=j.G,ur(p.h,j),G=1;else return;if(p.I!=0){if(j.o)if(G==1){R=j.u?j.u.length:0,j=Date.now()-j.F;var we=p.D;G=Et(),be(G,new xt(G,R)),In(p)}else El(p);else if(we=j.m,we==3||we==0&&j.X>0||!(G==1&&wo(p,j)||G==2&&ti(p)))switch(R&&R.length>0&&(j=p.h,j.i=j.i.concat(R)),we){case 1:oa(p,5);break;case 4:oa(p,10);break;case 3:oa(p,6);break;default:oa(p,2)}}}function Nl(p,j){let R=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(R*=2),R*j}function oa(p,j){if(p.j.info("Error code "+j),j==2){var R=b(p.bb,p),G=p.Ua;const we=!G;G=new Qs(G||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ss(G,"https"),ji(G),we?zr(G.toString(),R):Sl(G.toString(),R)}else ot(2);p.I=0,p.l&&p.l.pa(j),jl(p),_o(p)}s.bb=function(p){p?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function jl(p){if(p.I=0,p.ja=[],p.l){const j=Br(p.h);(j.length!=0||p.i.length!=0)&&(P(p.ja,j),P(p.ja,p.i),p.h.i.length=0,L(p.i),p.i.length=0),p.l.oa()}}function mc(p,j,R){var G=R instanceof Qs?ns(R):new Qs(R);if(G.g!="")j&&(G.g=j+"."+G.g),Ga(G,G.u);else{var we=u.location;G=we.protocol,j=j?j+"."+we.hostname:we.hostname,we=+we.port;const Ae=new Qs(null);G&&ss(Ae,G),j&&(Ae.g=j),we&&Ga(Ae,we),R&&(Ae.h=R),G=Ae}return R=p.G,j=p.wa,R&&j&&En(G,R,j),En(G,"VER",p.ka),Ri(p,G),G}function So(p,j,R){if(j&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=p.Aa&&!p.ma?new kn(new Fs({ab:R})):new kn(p.ma),j.Fa(p.L),j}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function To(){}s=To.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ea(){}Ea.prototype.g=function(p,j){return new Ps(p,j)};function Ps(p,j){ge.call(this),this.g=new ei(j),this.l=p,this.h=j&&j.messageUrlParams||null,p=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(p?p["X-WebChannel-Content-Type"]=j.messageContentType:p={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(p?p["X-WebChannel-Client-Profile"]=j.sa:p={"X-WebChannel-Client-Profile":j.sa}),this.g.U=p,(p=j&&j.Qb)&&!O(p)&&(this.g.u=p),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!O(j)&&(this.g.G=j,p=this.h,p!==null&&j in p&&(p=this.h,j in p&&delete p[j])),this.j=new Na(this)}E(Ps,ge),Ps.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ps.prototype.close=function(){Yn(this.g)},Ps.prototype.o=function(p){var j=this.g;if(typeof p=="string"){var R={};R.__data__=p,p=R}else this.v&&(R={},R.__data__=Lt(p),p=R);j.i.push(new Hn(j.Ya++,p)),j.I==3&&In(j)},Ps.prototype.N=function(){this.g.l=null,delete this.j,Yn(this.g),delete this.g,Ps.Z.N.call(this)};function pc(p){Le.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var j=p.__sm__;if(j){e:{for(const R in j){p=R;break e}p=void 0}(this.i=p)&&(p=this.i,j=j!==null&&p in j?j[p]:void 0),this.data=j}else this.data=p}E(pc,Le);function kl(){tt.call(this),this.status=1}E(kl,tt);function Na(p){this.g=p}E(Na,To),Na.prototype.ra=function(){be(this.g,"a")},Na.prototype.qa=function(p){be(this.g,new pc(p))},Na.prototype.pa=function(p){be(this.g,new kl)},Na.prototype.oa=function(){be(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,Ps.prototype.send=Ps.prototype.o,Ps.prototype.open=Ps.prototype.m,Ps.prototype.close=Ps.prototype.close,kw=function(){return new Ea},jw=function(){return Et()},Nw=it,Pg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tn.NO_ERROR=0,Tn.TIMEOUT=8,Tn.HTTP_ERROR=6,Ef=Tn,qn.COMPLETE="complete",Ew=qn,Ys.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",ge.prototype.listen=ge.prototype.J,pd=Ys,kn.prototype.listenOnce=kn.prototype.K,kn.prototype.getLastError=kn.prototype.Ha,kn.prototype.getLastErrorCode=kn.prototype.ya,kn.prototype.getStatus=kn.prototype.ca,kn.prototype.getResponseJson=kn.prototype.La,kn.prototype.getResponseText=kn.prototype.la,kn.prototype.send=kn.prototype.ea,kn.prototype.setWithCredentials=kn.prototype.Fa,Tw=kn}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});class rr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");let uu="12.8.0";function wA(s){uu=s}const Zl=new vy("@firebase/firestore");function qc(){return Zl.logLevel}function yt(s,...e){if(Zl.logLevel<=dn.DEBUG){const t=e.map(Dy);Zl.debug(`Firestore (${uu}): ${s}`,...t)}}function uo(s,...e){if(Zl.logLevel<=dn.ERROR){const t=e.map(Dy);Zl.error(`Firestore (${uu}): ${s}`,...t)}}function eu(s,...e){if(Zl.logLevel<=dn.WARN){const t=e.map(Dy);Zl.warn(`Firestore (${uu}): ${s}`,...t)}}function Dy(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function zt(s,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,Cw(s,a,t)}function Cw(s,e,t){let a=`FIRESTORE (${uu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw uo(a),new Error(a)}function Cn(s,e,t,a){let i="Unexpected state";typeof t=="string"?i=t:a=t,s||Cw(e,i,a)}function Wt(s,e){return s}const Ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends Ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class io{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Aw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rr.UNAUTHENTICATED)))}shutdown(){}}class TA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class EA{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Cn(this.o===void 0,42304);let a=this.i;const i=m=>this.i!==a?(a=this.i,t(m)):Promise.resolve();let c=new io;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new io,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const m=c;e.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},f=m=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new io)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Cn(typeof a.accessToken=="string",31837,{l:a}),new Aw(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Cn(e===null||typeof e=="string",2055,{h:e}),new rr(e)}}class NA{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class jA{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new NA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ea(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Cn(this.o===void 0,3512);const a=c=>{c.error!=null&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,yt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const i=c=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>i(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?i(c):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Cn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Hb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function CA(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}class My{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=CA(40);for(let c=0;c<i.length;++c)a.length<20&&i[c]<t&&(a+=e.charAt(i[c]%62))}return a}}function hn(s,e){return s<e?-1:s>e?1:0}function Lg(s,e){const t=Math.min(s.length,e.length);for(let a=0;a<t;a++){const i=s.charAt(a),c=e.charAt(a);if(i!==c)return hg(i)===hg(c)?hn(i,c):hg(i)?1:-1}return hn(s.length,e.length)}const AA=55296,RA=57343;function hg(s){const e=s.charCodeAt(0);return e>=AA&&e<=RA}function tu(s,e,t){return s.length===e.length&&s.every(((a,i)=>t(a,e[i])))}const $b="__name__";class mi{constructor(e,t,a){t===void 0?t=0:t>e.length&&zt(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&zt(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return mi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let i=0;i<a;i++){const c=mi.compareSegments(e.get(i),t.get(i));if(c!==0)return c}return hn(e.length,t.length)}static compareSegments(e,t){const a=mi.isNumericId(e),i=mi.isNumericId(t);return a&&!i?-1:!a&&i?1:a&&i?mi.extractNumericId(e).compare(mi.extractNumericId(t)):Lg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return il.fromString(e.substring(4,e.length-2))}}class Gn extends mi{construct(e,t,a){return new Gn(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new pt(Ge.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((i=>i.length>0)))}return new Gn(t)}static emptyPath(){return new Gn([])}}const DA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ws extends mi{construct(e,t,a){return new Ws(e,t,a)}static isValidIdentifier(e){return DA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ws.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$b}static keyField(){return new Ws([$b])}static fromServerFormat(e){const t=[];let a="",i=0;const c=()=>{if(a.length===0)throw new pt(Ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let u=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new pt(Ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pt(Ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=m,i+=2}else f==="`"?(u=!u,i++):f!=="."||u?(a+=f,i++):(c(),i++)}if(c(),u)throw new pt(Ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ws(t)}static emptyPath(){return new Ws([])}}class Ct{constructor(e){this.path=e}static fromPath(e){return new Ct(Gn.fromString(e))}static fromName(e){return new Ct(Gn.fromString(e).popFirst(5))}static empty(){return new Ct(Gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ct(new Gn(e.slice()))}}function Rw(s,e,t){if(!t)throw new pt(Ge.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function MA(s,e,t,a){if(e===!0&&a===!0)throw new pt(Ge.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Gb(s){if(!Ct.isDocumentKey(s))throw new pt(Ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Wb(s){if(Ct.isDocumentKey(s))throw new pt(Ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Dw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function cm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":zt(12329,{type:typeof s})}function Fa(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pt(Ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cm(s);throw new pt(Ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Ns(s,e){const t={typeString:s};return e&&(t.value=e),t}function Kd(s,e){if(!Dw(s))throw new pt(Ge.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const i=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){t=`JSON missing required field: '${a}'`;break}const u=s[a];if(i&&typeof u!==i){t=`JSON field '${a}' must be a ${i}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${a}' field to equal '${c.value}'`;break}}if(t)throw new pt(Ge.INVALID_ARGUMENT,t);return!0}const Kb=-62135596800,Yb=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*Yb);return new vt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Kb)throw new pt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yb}_compareTo(e){return this.seconds===e.seconds?hn(this.nanoseconds,e.nanoseconds):hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kd(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:Ns("string",vt._jsonSchemaVersion),seconds:Ns("number"),nanoseconds:Ns("number")};class qt{static fromTimestamp(e){return new qt(e)}static min(){return new qt(new vt(0,0))}static max(){return new qt(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Dd=-1;function IA(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,i=qt.fromTimestamp(a===1e9?new vt(t+1,0):new vt(t,a));return new cl(i,Ct.empty(),e)}function OA(s){return new cl(s.readTime,s.key,Dd)}class cl{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new cl(qt.min(),Ct.empty(),Dd)}static max(){return new cl(qt.max(),Ct.empty(),Dd)}}function PA(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ct.comparator(s.documentKey,e.documentKey),t!==0?t:hn(s.largestBatchId,e.largestBatchId))}const LA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function du(s){if(s.code!==Ge.FAILED_PRECONDITION||s.message!==LA)throw s;yt("LocalStore","Unexpectedly lost primary lease")}class Qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Qe(((a,i)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,i)},this.catchCallback=c=>{this.wrapFailure(t,c).next(a,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Qe?t:Qe.resolve(t)}catch(t){return Qe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Qe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Qe.reject(t)}static resolve(e){return new Qe(((t,a)=>{t(e)}))}static reject(e){return new Qe(((t,a)=>{a(e)}))}static waitFor(e){return new Qe(((t,a)=>{let i=0,c=0,u=!1;e.forEach((f=>{++i,f.next((()=>{++c,u&&c===i&&t()}),(m=>a(m)))})),u=!0,c===i&&t()}))}static or(e){let t=Qe.resolve(!1);for(const a of e)t=t.next((i=>i?Qe.resolve(i):a()));return t}static forEach(e,t){const a=[];return e.forEach(((i,c)=>{a.push(t.call(this,i,c))})),this.waitFor(a)}static mapArray(e,t){return new Qe(((a,i)=>{const c=e.length,u=new Array(c);let f=0;for(let m=0;m<c;m++){const b=m;t(e[b]).next((T=>{u[b]=T,++f,f===c&&a(u)}),(T=>i(T)))}}))}static doWhile(e,t){return new Qe(((a,i)=>{const c=()=>{e()===!0?t().next((()=>{c()}),i):a()};c()}))}}function UA(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hu(s){return s.name==="IndexedDbTransactionError"}class um{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}um.ce=-1;const Iy=-1;function dm(s){return s==null}function Hf(s){return s===0&&1/s==-1/0}function BA(s){return typeof s=="number"&&Number.isInteger(s)&&!Hf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Mw="";function zA(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Qb(e)),e=FA(s.get(t),e);return Qb(e)}function FA(s,e){let t=e;const a=s.length;for(let i=0;i<a;i++){const c=s.charAt(i);switch(c){case"\0":t+="";break;case Mw:t+="";break;default:t+=c}}return t}function Qb(s){return s+Mw+""}function Xb(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function yl(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Iw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class es{constructor(e,t){this.comparator=e,this.root=t||Gs.EMPTY}insert(e,t){return new es(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gs.BLACK,null,null))}remove(e){return new es(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(e,a.key);if(i===0)return t+a.left.size;i<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uf(this.root,e,this.comparator,!0)}}class uf{constructor(e,t,a,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?a(e.key,t):1,t&&i&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gs{constructor(e,t,a,i,c){this.key=e,this.value=t,this.color=a??Gs.RED,this.left=i??Gs.EMPTY,this.right=c??Gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,i,c){return new Gs(e??this.key,t??this.value,a??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let i=this;const c=a(e,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(e,t,a),null):c===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Gs.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw zt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw zt(27949);return e+(this.isRed()?0:1)}}Gs.EMPTY=null,Gs.RED=!0,Gs.BLACK=!1;Gs.EMPTY=new class{constructor(){this.size=0}get key(){throw zt(57766)}get value(){throw zt(16141)}get color(){throw zt(16727)}get left(){throw zt(29726)}get right(){throw zt(36894)}copy(e,t,a,i,c){return this}insert(e,t,a){return new Gs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ds{constructor(e){this.comparator=e,this.data=new es(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jb(this.data.getIterator())}getIteratorFrom(e){return new Jb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof Ds)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=a.getNext().key;if(this.comparator(i,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ds(this.comparator);return t.data=e,t}}class Jb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ta{constructor(e){this.fields=e,e.sort(Ws.comparator)}static empty(){return new ta([])}unionWith(e){let t=new Ds(Ws.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new ta(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}class Ow extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ks{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ow("Invalid base64 string: "+c):c}})(e);return new Ks(t)}static fromUint8Array(e){const t=(function(i){let c="";for(let u=0;u<i.length;++u)c+=String.fromCharCode(i[u]);return c})(e);return new Ks(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ks.EMPTY_BYTE_STRING=new Ks("");const qA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ul(s){if(Cn(!!s,39018),typeof s=="string"){let e=0;const t=qA.exec(s);if(Cn(!!t,46558,{timestamp:s}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:ms(s.seconds),nanos:ms(s.nanos)}}function ms(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function dl(s){return typeof s=="string"?Ks.fromBase64String(s):Ks.fromUint8Array(s)}const Pw="server_timestamp",Lw="__type__",Vw="__previous_value__",Uw="__local_write_time__";function Oy(s){return(s?.mapValue?.fields||{})[Lw]?.stringValue===Pw}function hm(s){const e=s.mapValue.fields[Vw];return Oy(e)?hm(e):e}function Md(s){const e=ul(s.mapValue.fields[Uw].timestampValue);return new vt(e.seconds,e.nanos)}class HA{constructor(e,t,a,i,c,u,f,m,b,T,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=i,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=b,this.isUsingEmulator=T,this.apiKey=E}}const $f="(default)";class Id{constructor(e,t){this.projectId=e,this.database=t||$f}static empty(){return new Id("","")}get isDefaultDatabase(){return this.database===$f}isEqual(e){return e instanceof Id&&e.projectId===this.projectId&&e.database===this.database}}function $A(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new pt(Ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(s.options.projectId,e)}const Bw="__type__",GA="__max__",df={mapValue:{}},zw="__vector__",Gf="value";function hl(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Oy(s)?4:KA(s)?9007199254740991:WA(s)?10:11:zt(28295,{value:s})}function wi(s,e){if(s===e)return!0;const t=hl(s);if(t!==hl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Md(s).isEqual(Md(e));case 3:return(function(i,c){if(typeof i.timestampValue=="string"&&typeof c.timestampValue=="string"&&i.timestampValue.length===c.timestampValue.length)return i.timestampValue===c.timestampValue;const u=ul(i.timestampValue),f=ul(c.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(i,c){return dl(i.bytesValue).isEqual(dl(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(i,c){return ms(i.geoPointValue.latitude)===ms(c.geoPointValue.latitude)&&ms(i.geoPointValue.longitude)===ms(c.geoPointValue.longitude)})(s,e);case 2:return(function(i,c){if("integerValue"in i&&"integerValue"in c)return ms(i.integerValue)===ms(c.integerValue);if("doubleValue"in i&&"doubleValue"in c){const u=ms(i.doubleValue),f=ms(c.doubleValue);return u===f?Hf(u)===Hf(f):isNaN(u)&&isNaN(f)}return!1})(s,e);case 9:return tu(s.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return(function(i,c){const u=i.mapValue.fields||{},f=c.mapValue.fields||{};if(Xb(u)!==Xb(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!wi(u[m],f[m])))return!1;return!0})(s,e);default:return zt(52216,{left:s})}}function Od(s,e){return(s.values||[]).find((t=>wi(t,e)))!==void 0}function nu(s,e){if(s===e)return 0;const t=hl(s),a=hl(e);if(t!==a)return hn(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return hn(s.booleanValue,e.booleanValue);case 2:return(function(c,u){const f=ms(c.integerValue||c.doubleValue),m=ms(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(s,e);case 3:return Zb(s.timestampValue,e.timestampValue);case 4:return Zb(Md(s),Md(e));case 5:return Lg(s.stringValue,e.stringValue);case 6:return(function(c,u){const f=dl(c),m=dl(u);return f.compareTo(m)})(s.bytesValue,e.bytesValue);case 7:return(function(c,u){const f=c.split("/"),m=u.split("/");for(let b=0;b<f.length&&b<m.length;b++){const T=hn(f[b],m[b]);if(T!==0)return T}return hn(f.length,m.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,u){const f=hn(ms(c.latitude),ms(u.latitude));return f!==0?f:hn(ms(c.longitude),ms(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return ex(s.arrayValue,e.arrayValue);case 10:return(function(c,u){const f=c.fields||{},m=u.fields||{},b=f[Gf]?.arrayValue,T=m[Gf]?.arrayValue,E=hn(b?.values?.length||0,T?.values?.length||0);return E!==0?E:ex(b,T)})(s.mapValue,e.mapValue);case 11:return(function(c,u){if(c===df.mapValue&&u===df.mapValue)return 0;if(c===df.mapValue)return 1;if(u===df.mapValue)return-1;const f=c.fields||{},m=Object.keys(f),b=u.fields||{},T=Object.keys(b);m.sort(),T.sort();for(let E=0;E<m.length&&E<T.length;++E){const C=Lg(m[E],T[E]);if(C!==0)return C;const L=nu(f[m[E]],b[T[E]]);if(L!==0)return L}return hn(m.length,T.length)})(s.mapValue,e.mapValue);default:throw zt(23264,{he:t})}}function Zb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return hn(s,e);const t=ul(s),a=ul(e),i=hn(t.seconds,a.seconds);return i!==0?i:hn(t.nanos,a.nanos)}function ex(s,e){const t=s.values||[],a=e.values||[];for(let i=0;i<t.length&&i<a.length;++i){const c=nu(t[i],a[i]);if(c)return c}return hn(t.length,a.length)}function su(s){return Vg(s)}function Vg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const a=ul(t);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return dl(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ct.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let a="[",i=!0;for(const c of t.values||[])i?i=!1:a+=",",a+=Vg(c);return a+"]"})(s.arrayValue):"mapValue"in s?(function(t){const a=Object.keys(t.fields||{}).sort();let i="{",c=!0;for(const u of a)c?c=!1:i+=",",i+=`${u}:${Vg(t.fields[u])}`;return i+"}"})(s.mapValue):zt(61005,{value:s})}function Nf(s){switch(hl(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hm(s);return e?16+Nf(e):16;case 5:return 2*s.stringValue.length;case 6:return dl(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((i,c)=>i+Nf(c)),0)})(s.arrayValue);case 10:case 11:return(function(a){let i=0;return yl(a.fields,((c,u)=>{i+=c.length+Nf(u)})),i})(s.mapValue);default:throw zt(13486,{value:s})}}function tx(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ug(s){return!!s&&"integerValue"in s}function Py(s){return!!s&&"arrayValue"in s}function nx(s){return!!s&&"nullValue"in s}function sx(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function jf(s){return!!s&&"mapValue"in s}function WA(s){return(s?.mapValue?.fields||{})[Bw]?.stringValue===zw}function _d(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return yl(s.mapValue.fields,((t,a)=>e.mapValue.fields[t]=_d(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_d(s.arrayValue.values[t]);return e}return{...s}}function KA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===GA}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_d(t)}setAll(e){let t=Ws.emptyPath(),a={},i=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,a,i),a={},i=[],t=f.popLast()}u?a[f.lastSegment()]=_d(u):i.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,a,i)}delete(e){const t=this.field(e.popLast());jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let i=t.mapValue.fields[e.get(a)];jf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,a){yl(t,((i,c)=>e[i]=c));for(const i of a)delete e[i]}clone(){return new Ur(_d(this.value))}}function Fw(s){const e=[];return yl(s.fields,((t,a)=>{const i=new Ws([t]);if(jf(a)){const c=Fw(a.mapValue).fields;if(c.length===0)e.push(i);else for(const u of c)e.push(i.child(u))}else e.push(i)})),new ta(e)}class ar{constructor(e,t,a,i,c,u,f){this.key=e,this.documentType=t,this.version=a,this.readTime=i,this.createTime=c,this.data=u,this.documentState=f}static newInvalidDocument(e){return new ar(e,0,qt.min(),qt.min(),qt.min(),Ur.empty(),0)}static newFoundDocument(e,t,a,i){return new ar(e,1,t,qt.min(),a,i,0)}static newNoDocument(e,t){return new ar(e,2,t,qt.min(),qt.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new ar(e,3,t,qt.min(),qt.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wf{constructor(e,t){this.position=e,this.inclusive=t}}function rx(s,e,t){let a=0;for(let i=0;i<s.position.length;i++){const c=e[i],u=s.position[i];if(c.field.isKeyField()?a=Ct.comparator(Ct.fromName(u.referenceValue),t.key):a=nu(u,t.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function ax(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!wi(s.position[t],e.position[t]))return!1;return!0}class Pd{constructor(e,t="asc"){this.field=e,this.dir=t}}function YA(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class qw{}class Es extends qw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new XA(e,t,a):t==="array-contains"?new eR(e,a):t==="in"?new tR(e,a):t==="not-in"?new nR(e,a):t==="array-contains-any"?new sR(e,a):new Es(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new JA(e,a):new ZA(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(nu(t,this.value)):t!==null&&hl(this.value)===hl(t)&&this.matchesComparison(nu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return zt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qa extends qw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new qa(e,t)}matches(e){return Hw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hw(s){return s.op==="and"}function $w(s){return QA(s)&&Hw(s)}function QA(s){for(const e of s.filters)if(e instanceof qa)return!1;return!0}function Bg(s){if(s instanceof Es)return s.field.canonicalString()+s.op.toString()+su(s.value);if($w(s))return s.filters.map((e=>Bg(e))).join(",");{const e=s.filters.map((t=>Bg(t))).join(",");return`${s.op}(${e})`}}function Gw(s,e){return s instanceof Es?(function(a,i){return i instanceof Es&&a.op===i.op&&a.field.isEqual(i.field)&&wi(a.value,i.value)})(s,e):s instanceof qa?(function(a,i){return i instanceof qa&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce(((c,u,f)=>c&&Gw(u,i.filters[f])),!0):!1})(s,e):void zt(19439)}function Ww(s){return s instanceof Es?(function(t){return`${t.field.canonicalString()} ${t.op} ${su(t.value)}`})(s):s instanceof qa?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ww).join(" ,")+"}"})(s):"Filter"}class XA extends Es{constructor(e,t,a){super(e,t,a),this.key=Ct.fromName(a.referenceValue)}matches(e){const t=Ct.comparator(e.key,this.key);return this.matchesComparison(t)}}class JA extends Es{constructor(e,t){super(e,"in",t),this.keys=Kw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ZA extends Es{constructor(e,t){super(e,"not-in",t),this.keys=Kw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Kw(s,e){return(e.arrayValue?.values||[]).map((t=>Ct.fromName(t.referenceValue)))}class eR extends Es{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Py(t)&&Od(t.arrayValue,this.value)}}class tR extends Es{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Od(this.value.arrayValue,t)}}class nR extends Es{constructor(e,t){super(e,"not-in",t)}matches(e){if(Od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Od(this.value.arrayValue,t)}}class sR extends Es{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Py(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>Od(this.value.arrayValue,a)))}}class rR{constructor(e,t=null,a=[],i=[],c=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=i,this.limit=c,this.startAt=u,this.endAt=f,this.Te=null}}function ix(s,e=null,t=[],a=[],i=null,c=null,u=null){return new rR(s,e,t,a,i,c,u)}function Ly(s){const e=Wt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Bg(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),dm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>su(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>su(a))).join(",")),e.Te=t}return e.Te}function Vy(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!YA(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Gw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!ax(s.startAt,e.startAt)&&ax(s.endAt,e.endAt)}function zg(s){return Ct.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class fu{constructor(e,t=null,a=[],i=[],c=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=i,this.limit=c,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function aR(s,e,t,a,i,c,u,f){return new fu(s,e,t,a,i,c,u,f)}function Uy(s){return new fu(s)}function ox(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function iR(s){return Ct.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Yw(s){return s.collectionGroup!==null}function wd(s){const e=Wt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Ds(Ws.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((b=>{b.isInequality()&&(f=f.add(b.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Pd(c,a))})),t.has(Ws.keyField().canonicalString())||e.Ie.push(new Pd(Ws.keyField(),a))}return e.Ie}function bi(s){const e=Wt(s);return e.Ee||(e.Ee=oR(e,wd(s))),e.Ee}function oR(s,e){if(s.limitType==="F")return ix(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((i=>{const c=i.dir==="desc"?"asc":"desc";return new Pd(i.field,c)}));const t=s.endAt?new Wf(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Wf(s.startAt.position,s.startAt.inclusive):null;return ix(s.path,s.collectionGroup,e,s.filters,s.limit,t,a)}}function Fg(s,e){const t=s.filters.concat([e]);return new fu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function lR(s,e){const t=s.explicitOrderBy.concat([e]);return new fu(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function qg(s,e,t){return new fu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function fm(s,e){return Vy(bi(s),bi(e))&&s.limitType===e.limitType}function Qw(s){return`${Ly(bi(s))}|lt:${s.limitType}`}function Hc(s){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((i=>Ww(i))).join(", ")}]`),dm(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((i=>su(i))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((i=>su(i))).join(",")),`Target(${a})`})(bi(s))}; limitType=${s.limitType})`}function mm(s,e){return e.isFoundDocument()&&(function(a,i){const c=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Ct.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(s,e)&&(function(a,i){for(const c of wd(a))if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(a,i){for(const c of a.filters)if(!c.matches(i))return!1;return!0})(s,e)&&(function(a,i){return!(a.startAt&&!(function(u,f,m){const b=rx(u,f,m);return u.inclusive?b<=0:b<0})(a.startAt,wd(a),i)||a.endAt&&!(function(u,f,m){const b=rx(u,f,m);return u.inclusive?b>=0:b>0})(a.endAt,wd(a),i))})(s,e)}function cR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Xw(s){return(e,t)=>{let a=!1;for(const i of wd(s)){const c=uR(i,e,t);if(c!==0)return c;a=a||i.field.isKeyField()}return 0}}function uR(s,e,t){const a=s.field.isKeyField()?Ct.comparator(e.key,t.key):(function(c,u,f){const m=u.data.field(c),b=f.data.field(c);return m!==null&&b!==null?nu(m,b):zt(42886)})(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return zt(19790,{direction:s.dir})}}class rc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[i,c]of a)if(this.equalsFn(i,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),i=this.inner[a];if(i===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],e))return void(i[c]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return a.length===1?delete this.inner[t]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yl(this.inner,((t,a)=>{for(const[i,c]of a)e(i,c)}))}isEmpty(){return Iw(this.inner)}size(){return this.innerSize}}const dR=new es(Ct.comparator);function ho(){return dR}const Jw=new es(Ct.comparator);function gd(...s){let e=Jw;for(const t of s)e=e.insert(t.key,t);return e}function Zw(s){let e=Jw;return s.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Gl(){return Sd()}function e2(){return Sd()}function Sd(){return new rc((s=>s.toString()),((s,e)=>s.isEqual(e)))}const hR=new es(Ct.comparator),fR=new Ds(Ct.comparator);function fn(...s){let e=fR;for(const t of s)e=e.add(t);return e}const mR=new Ds(hn);function pR(){return mR}function By(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hf(e)?"-0":e}}function t2(s){return{integerValue:""+s}}function gR(s,e){return BA(e)?t2(e):By(s,e)}class pm{constructor(){this._=void 0}}function yR(s,e,t){return s instanceof Kf?(function(i,c){const u={fields:{[Lw]:{stringValue:Pw},[Uw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return c&&Oy(c)&&(c=hm(c)),c&&(u.fields[Vw]=c),{mapValue:u}})(t,e):s instanceof Ld?s2(s,e):s instanceof Vd?r2(s,e):(function(i,c){const u=n2(i,c),f=lx(u)+lx(i.Ae);return Ug(u)&&Ug(i.Ae)?t2(f):By(i.serializer,f)})(s,e)}function vR(s,e,t){return s instanceof Ld?s2(s,e):s instanceof Vd?r2(s,e):t}function n2(s,e){return s instanceof Yf?(function(a){return Ug(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(e)?e:{integerValue:0}:null}class Kf extends pm{}class Ld extends pm{constructor(e){super(),this.elements=e}}function s2(s,e){const t=a2(e);for(const a of s.elements)t.some((i=>wi(i,a)))||t.push(a);return{arrayValue:{values:t}}}class Vd extends pm{constructor(e){super(),this.elements=e}}function r2(s,e){let t=a2(e);for(const a of s.elements)t=t.filter((i=>!wi(i,a)));return{arrayValue:{values:t}}}class Yf extends pm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lx(s){return ms(s.integerValue||s.doubleValue)}function a2(s){return Py(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function bR(s,e){return s.field.isEqual(e.field)&&(function(a,i){return a instanceof Ld&&i instanceof Ld||a instanceof Vd&&i instanceof Vd?tu(a.elements,i.elements,wi):a instanceof Yf&&i instanceof Yf?wi(a.Ae,i.Ae):a instanceof Kf&&i instanceof Kf})(s.transform,e.transform)}class xR{constructor(e,t){this.version=e,this.transformResults=t}}class _a{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _a}static exists(e){return new _a(void 0,e)}static updateTime(e){return new _a(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class gm{}function i2(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new zy(s.key,_a.none()):new Yd(s.key,s.data,_a.none());{const t=s.data,a=Ur.empty();let i=new Ds(Ws.comparator);for(let c of e.fields)if(!i.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?a.delete(c):a.set(c,u),i=i.add(c)}return new vl(s.key,a,new ta(i.toArray()),_a.none())}}function _R(s,e,t){s instanceof Yd?(function(i,c,u){const f=i.value.clone(),m=ux(i.fieldTransforms,c,u.transformResults);f.setAll(m),c.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(s,e,t):s instanceof vl?(function(i,c,u){if(!kf(i.precondition,c))return void c.convertToUnknownDocument(u.version);const f=ux(i.fieldTransforms,c,u.transformResults),m=c.data;m.setAll(o2(i)),m.setAll(f),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(s,e,t):(function(i,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Td(s,e,t,a){return s instanceof Yd?(function(c,u,f,m){if(!kf(c.precondition,u))return f;const b=c.value.clone(),T=dx(c.fieldTransforms,m,u);return b.setAll(T),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null})(s,e,t,a):s instanceof vl?(function(c,u,f,m){if(!kf(c.precondition,u))return f;const b=dx(c.fieldTransforms,m,u),T=u.data;return T.setAll(o2(c)),T.setAll(b),u.convertToFoundDocument(u.version,T).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(s,e,t,a):(function(c,u,f){return kf(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(s,e,t)}function wR(s,e){let t=null;for(const a of s.fieldTransforms){const i=e.data.field(a.field),c=n2(a.transform,i||null);c!=null&&(t===null&&(t=Ur.empty()),t.set(a.field,c))}return t||null}function cx(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&tu(a,i,((c,u)=>bR(c,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Yd extends gm{constructor(e,t,a,i=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vl extends gm{constructor(e,t,a,i,c=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function o2(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}})),e}function ux(s,e,t){const a=new Map;Cn(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let i=0;i<t.length;i++){const c=s[i],u=c.transform,f=e.data.field(c.field);a.set(c.field,vR(u,f,t[i]))}return a}function dx(s,e,t){const a=new Map;for(const i of s){const c=i.transform,u=t.data.field(i.field);a.set(i.field,yR(c,u,e))}return a}class zy extends gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SR extends gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class TR{constructor(e,t,a,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(e.key)&&_R(c,e,a[i])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Td(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Td(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=e2();return this.mutations.forEach((i=>{const c=e.get(i.key),u=c.overlayedDocument;let f=this.applyToLocalView(u,c.mutatedFields);f=t.has(i.key)?null:f;const m=i2(u,f);m!==null&&a.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(qt.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),fn())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,((t,a)=>cx(t,a)))&&tu(this.baseMutations,e.baseMutations,((t,a)=>cx(t,a)))}}class Fy{constructor(e,t,a,i){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=i}static from(e,t,a){Cn(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let i=(function(){return hR})();const c=e.mutations;for(let u=0;u<c.length;u++)i=i.insert(c[u].key,a[u].version);return new Fy(e,t,a,i)}}class ER{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class NR{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ss,bn;function jR(s){switch(s){case Ge.OK:return zt(64938);case Ge.CANCELLED:case Ge.UNKNOWN:case Ge.DEADLINE_EXCEEDED:case Ge.RESOURCE_EXHAUSTED:case Ge.INTERNAL:case Ge.UNAVAILABLE:case Ge.UNAUTHENTICATED:return!1;case Ge.INVALID_ARGUMENT:case Ge.NOT_FOUND:case Ge.ALREADY_EXISTS:case Ge.PERMISSION_DENIED:case Ge.FAILED_PRECONDITION:case Ge.ABORTED:case Ge.OUT_OF_RANGE:case Ge.UNIMPLEMENTED:case Ge.DATA_LOSS:return!0;default:return zt(15467,{code:s})}}function l2(s){if(s===void 0)return uo("GRPC error has no .code"),Ge.UNKNOWN;switch(s){case Ss.OK:return Ge.OK;case Ss.CANCELLED:return Ge.CANCELLED;case Ss.UNKNOWN:return Ge.UNKNOWN;case Ss.DEADLINE_EXCEEDED:return Ge.DEADLINE_EXCEEDED;case Ss.RESOURCE_EXHAUSTED:return Ge.RESOURCE_EXHAUSTED;case Ss.INTERNAL:return Ge.INTERNAL;case Ss.UNAVAILABLE:return Ge.UNAVAILABLE;case Ss.UNAUTHENTICATED:return Ge.UNAUTHENTICATED;case Ss.INVALID_ARGUMENT:return Ge.INVALID_ARGUMENT;case Ss.NOT_FOUND:return Ge.NOT_FOUND;case Ss.ALREADY_EXISTS:return Ge.ALREADY_EXISTS;case Ss.PERMISSION_DENIED:return Ge.PERMISSION_DENIED;case Ss.FAILED_PRECONDITION:return Ge.FAILED_PRECONDITION;case Ss.ABORTED:return Ge.ABORTED;case Ss.OUT_OF_RANGE:return Ge.OUT_OF_RANGE;case Ss.UNIMPLEMENTED:return Ge.UNIMPLEMENTED;case Ss.DATA_LOSS:return Ge.DATA_LOSS;default:return zt(39323,{code:s})}}(bn=Ss||(Ss={}))[bn.OK=0]="OK",bn[bn.CANCELLED=1]="CANCELLED",bn[bn.UNKNOWN=2]="UNKNOWN",bn[bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bn[bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bn[bn.NOT_FOUND=5]="NOT_FOUND",bn[bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",bn[bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",bn[bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",bn[bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bn[bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bn[bn.ABORTED=10]="ABORTED",bn[bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",bn[bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",bn[bn.INTERNAL=13]="INTERNAL",bn[bn.UNAVAILABLE=14]="UNAVAILABLE",bn[bn.DATA_LOSS=15]="DATA_LOSS";function kR(){return new TextEncoder}const CR=new il([4294967295,4294967295],0);function hx(s){const e=kR().encode(s),t=new Sw;return t.update(e),new Uint8Array(t.digest())}function fx(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),i=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new il([t,a],0),new il([i,c],0)]}class qy{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new yd(`Invalid padding: ${t}`);if(a<0)throw new yd(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new yd(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new yd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=il.fromNumber(this.ge)}ye(e,t,a){let i=e.add(t.multiply(il.fromNumber(a)));return i.compare(CR)===1&&(i=new il([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=hx(e),[a,i]=fx(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(a,i,c);if(!this.we(u))return!1}return!0}static create(e,t,a){const i=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new qy(c,i,t);return a.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=hx(e),[a,i]=fx(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(a,i,c);this.be(u)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class yd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ym{constructor(e,t,a,i,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const i=new Map;return i.set(e,Qd.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new ym(qt.min(),i,new es(hn),ho(),fn())}}class Qd{constructor(e,t,a,i,c){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Qd(a,t,fn(),fn(),fn())}}class Cf{constructor(e,t,a,i){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=i}}class c2{constructor(e,t){this.targetId=e,this.Ce=t}}class u2{constructor(e,t,a=Ks.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=i}}class mx{constructor(){this.ve=0,this.Fe=px(),this.Me=Ks.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=fn(),t=fn(),a=fn();return this.Fe.forEach(((i,c)=>{switch(c){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:a=a.add(i);break;default:zt(38017,{changeType:c})}})),new Qd(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=px()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Cn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class AR{constructor(e){this.Ge=e,this.ze=new Map,this.je=ho(),this.He=hf(),this.Je=hf(),this.Ze=new es(hn)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:zt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,a=e.Ce.count,i=this.ot(t);if(i){const c=i.target;if(zg(c))if(a===0){const u=new Ct(c.path);this.et(t,u,ar.newNoDocument(u,qt.min()))}else Cn(a===1,20013,{expectedCount:a});else{const u=this._t(t);if(u!==a){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const b=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,b)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:c=0}=t;let u,f;try{u=dl(a).toUint8Array()}catch(m){if(m instanceof Ow)return eu("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new qy(u,i,c)}catch(m){return eu(m instanceof yd?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let i=0;return a.forEach((c=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const f=this.ot(u);if(f){if(c.current&&zg(f.target)){const m=new Ct(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,ar.newNoDocument(m,e))}c.Be&&(t.set(u,c.ke()),c.Ke())}}));let a=fn();this.Je.forEach(((c,u)=>{let f=!0;u.forEachWhile((m=>{const b=this.ot(m);return!b||b.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(a=a.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const i=new ym(e,t,this.Ze,this.je,a);return this.je=ho(),this.He=hf(),this.Je=hf(),this.Ze=new es(hn),i}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new mx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ds(hn),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ds(hn),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||yt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hf(){return new es(Ct.comparator)}function px(){return new es(Ct.comparator)}const RR={asc:"ASCENDING",desc:"DESCENDING"},DR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MR={and:"AND",or:"OR"};class IR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hg(s,e){return s.useProto3Json||dm(e)?e:{value:e}}function Qf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d2(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function OR(s,e){return Qf(s,e.toTimestamp())}function xi(s){return Cn(!!s,49232),qt.fromTimestamp((function(t){const a=ul(t);return new vt(a.seconds,a.nanos)})(s))}function Hy(s,e){return $g(s,e).canonicalString()}function $g(s,e){const t=(function(i){return new Gn(["projects",i.projectId,"databases",i.database])})(s).child("documents");return e===void 0?t:t.child(e)}function h2(s){const e=Gn.fromString(s);return Cn(y2(e),10190,{key:e.toString()}),e}function Gg(s,e){return Hy(s.databaseId,e.path)}function fg(s,e){const t=h2(e);if(t.get(1)!==s.databaseId.projectId)throw new pt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new pt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ct(m2(t))}function f2(s,e){return Hy(s.databaseId,e)}function PR(s){const e=h2(s);return e.length===4?Gn.emptyPath():m2(e)}function Wg(s){return new Gn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function m2(s){return Cn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function gx(s,e,t){return{name:Gg(s,e),fields:t.value.mapValue.fields}}function LR(s,e){let t;if("targetChange"in e){e.targetChange;const a=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:zt(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],c=(function(b,T){return b.useProto3Json?(Cn(T===void 0||typeof T=="string",58123),Ks.fromBase64String(T||"")):(Cn(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ks.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(b){const T=b.code===void 0?Ge.UNKNOWN:l2(b.code);return new pt(T,b.message||"")})(u);t=new u2(a,i,c,f||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const i=fg(s,a.document.name),c=xi(a.document.updateTime),u=a.document.createTime?xi(a.document.createTime):qt.min(),f=new Ur({mapValue:{fields:a.document.fields}}),m=ar.newFoundDocument(i,c,u,f),b=a.targetIds||[],T=a.removedTargetIds||[];t=new Cf(b,T,m.key,m)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const i=fg(s,a.document),c=a.readTime?xi(a.readTime):qt.min(),u=ar.newNoDocument(i,c),f=a.removedTargetIds||[];t=new Cf([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const i=fg(s,a.document),c=a.removedTargetIds||[];t=new Cf([],c,i,null)}else{if(!("filter"in e))return zt(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:i=0,unchangedNames:c}=a,u=new NR(i,c),f=a.targetId;t=new c2(f,u)}}return t}function VR(s,e){let t;if(e instanceof Yd)t={update:gx(s,e.key,e.value)};else if(e instanceof zy)t={delete:Gg(s,e.key)};else if(e instanceof vl)t={update:gx(s,e.key,e.data),updateMask:WR(e.fieldMask)};else{if(!(e instanceof SR))return zt(16599,{dt:e.type});t={verify:Gg(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(c,u){const f=u.transform;if(f instanceof Kf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ld)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Vd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Yf)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw zt(20930,{transform:u.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(i,c){return c.updateTime!==void 0?{updateTime:OR(i,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:zt(27497)})(s,e.precondition)),t}function UR(s,e){return s&&s.length>0?(Cn(e!==void 0,14353),s.map((t=>(function(i,c){let u=i.updateTime?xi(i.updateTime):xi(c);return u.isEqual(qt.min())&&(u=xi(c)),new xR(u,i.transformResults||[])})(t,e)))):[]}function BR(s,e){return{documents:[f2(s,e.path)]}}function zR(s,e){const t={structuredQuery:{}},a=e.path;let i;e.collectionGroup!==null?(i=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=f2(s,i);const c=(function(b){if(b.length!==0)return g2(qa.create(b,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(b){if(b.length!==0)return b.map((T=>(function(C){return{field:$c(C.field),direction:HR(C.dir)}})(T)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Hg(s,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:t,parent:i}}function FR(s){let e=PR(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let i=null;if(a>0){Cn(a===1,65062);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let c=[];t.where&&(c=(function(E){const C=p2(E);return C instanceof qa&&$w(C)?C.getFilters():[C]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((C=>(function(P){return new Pd(Gc(P.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(C)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let C;return C=typeof E=="object"?E.value:E,dm(C)?null:C})(t.limit));let m=null;t.startAt&&(m=(function(E){const C=!!E.before,L=E.values||[];return new Wf(L,C)})(t.startAt));let b=null;return t.endAt&&(b=(function(E){const C=!E.before,L=E.values||[];return new Wf(L,C)})(t.endAt)),aR(e,i,u,c,f,"F",m,b)}function qR(s,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function p2(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Gc(t.unaryFilter.field);return Es.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=Gc(t.unaryFilter.field);return Es.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Gc(t.unaryFilter.field);return Es.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Gc(t.unaryFilter.field);return Es.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return zt(61313);default:return zt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Es.create(Gc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return zt(58110);default:return zt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return qa.create(t.compositeFilter.filters.map((a=>p2(a))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return zt(1026)}})(t.compositeFilter.op))})(s):zt(30097,{filter:s})}function HR(s){return RR[s]}function $R(s){return DR[s]}function GR(s){return MR[s]}function $c(s){return{fieldPath:s.canonicalString()}}function Gc(s){return Ws.fromServerFormat(s.fieldPath)}function g2(s){return s instanceof Es?(function(t){if(t.op==="=="){if(sx(t.value))return{unaryFilter:{field:$c(t.field),op:"IS_NAN"}};if(nx(t.value))return{unaryFilter:{field:$c(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sx(t.value))return{unaryFilter:{field:$c(t.field),op:"IS_NOT_NAN"}};if(nx(t.value))return{unaryFilter:{field:$c(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$c(t.field),op:$R(t.op),value:t.value}}})(s):s instanceof qa?(function(t){const a=t.getFilters().map((i=>g2(i)));return a.length===1?a[0]:{compositeFilter:{op:GR(t.op),filters:a}}})(s):zt(54877,{filter:s})}function WR(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function y2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function v2(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class sl{constructor(e,t,a,i,c=qt.min(),u=qt.min(),f=Ks.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class KR{constructor(e){this.yt=e}}function YR(s){const e=FR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?qg(e,e.limit,"L"):e}class QR{constructor(){this.Sn=new XR}addToCollectionParentIndex(e,t){return this.Sn.add(t),Qe.resolve()}getCollectionParents(e,t){return Qe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Qe.resolve()}deleteFieldIndex(e,t){return Qe.resolve()}deleteAllFieldIndexes(e){return Qe.resolve()}createTargetIndexes(e,t){return Qe.resolve()}getDocumentsMatchingTarget(e,t){return Qe.resolve(null)}getIndexType(e,t){return Qe.resolve(0)}getFieldIndexes(e,t){return Qe.resolve([])}getNextCollectionGroupToUpdate(e){return Qe.resolve(null)}getMinOffset(e,t){return Qe.resolve(cl.min())}getMinOffsetFromCollectionGroup(e,t){return Qe.resolve(cl.min())}updateCollectionGroup(e,t,a){return Qe.resolve()}updateIndexEntries(e,t){return Qe.resolve()}}class XR{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),i=this.index[t]||new Ds(Gn.comparator),c=!i.has(a);return this.index[t]=i.add(a),c}has(e){const t=e.lastSegment(),a=e.popLast(),i=this.index[t];return i&&i.has(a)}getEntries(e){return(this.index[e]||new Ds(Gn.comparator)).toArray()}}const yx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},b2=41943040;class Vr{static withCacheSize(e){return new Vr(e,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}Vr.DEFAULT_COLLECTION_PERCENTILE=10,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vr.DEFAULT=new Vr(b2,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vr.DISABLED=new Vr(-1,0,0);class ru{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ru(0)}static ar(){return new ru(-1)}}const vx="LruGarbageCollector",JR=1048576;function bx([s,e],[t,a]){const i=hn(s,t);return i===0?hn(e,a):i}class ZR{constructor(e){this.Pr=e,this.buffer=new Ds(bx),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();bx(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class e4{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){yt(vx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hu(t)?yt(vx,"Ignoring IndexedDB error during garbage collection: ",t):await du(t)}await this.Ar(3e5)}))}}class t4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return Qe.resolve(um.ce);const a=new ZR(t);return this.Vr.forEachTarget(e,(i=>a.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>a.Er(i))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),Qe.resolve(yx)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yx):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,i,c,u,f,m,b;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,u=Date.now(),this.nthSequenceNumber(e,i)))).next((E=>(a=E,f=Date.now(),this.removeTargets(e,a,t)))).next((E=>(c=E,m=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(b=Date.now(),qc()<=dn.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-T}ms
	Determined least recently used ${i} in `+(f-u)+`ms
	Removed ${c} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(b-m)+`ms
Total Duration: ${b-T}ms`),Qe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:E}))))}}function n4(s,e){return new t4(s,e)}class s4{constructor(){this.changes=new rc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?Qe.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class r4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class a4{constructor(e,t,a,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=i}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(a=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(a!==null&&Td(a.mutation,i,ta.empty(),vt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,fn()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=fn()){const i=Gl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,a).next((c=>{let u=gd();return c.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const a=Gl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,fn())))}populateOverlays(e,t,a){const i=[];return a.forEach((c=>{t.has(c)||i.push(c)})),this.documentOverlayCache.getOverlays(e,i).next((c=>{c.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,a,i){let c=ho();const u=Sd(),f=(function(){return Sd()})();return t.forEach(((m,b)=>{const T=a.get(b.key);i.has(b.key)&&(T===void 0||T.mutation instanceof vl)?c=c.insert(b.key,b):T!==void 0?(u.set(b.key,T.mutation.getFieldMask()),Td(T.mutation,b,T.mutation.getFieldMask(),vt.now())):u.set(b.key,ta.empty())})),this.recalculateAndSaveOverlays(e,c).next((m=>(m.forEach(((b,T)=>u.set(b,T))),t.forEach(((b,T)=>f.set(b,new r4(T,u.get(b)??null)))),f)))}recalculateAndSaveOverlays(e,t){const a=Sd();let i=new es(((u,f)=>u-f)),c=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const b=t.get(m);if(b===null)return;let T=a.get(m)||ta.empty();T=f.applyToLocalView(b,T),a.set(m,T);const E=(i.get(f.batchId)||fn()).add(m);i=i.insert(f.batchId,E)}))})).next((()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),b=m.key,T=m.value,E=e2();T.forEach((C=>{if(!c.has(C)){const L=i2(t.get(C),a.get(C));L!==null&&E.set(C,L),c=c.add(C)}})),u.push(this.documentOverlayCache.saveOverlays(e,b,E))}return Qe.waitFor(u)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,i){return iR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,i):this.getDocumentsMatchingCollectionQuery(e,t,a,i)}getNextDocuments(e,t,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,i).next((c=>{const u=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,i-c.size):Qe.resolve(Gl());let f=Dd,m=c;return u.next((b=>Qe.forEach(b,((T,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),c.get(T)?Qe.resolve():this.remoteDocumentCache.getEntry(e,T).next((C=>{m=m.insert(T,C)}))))).next((()=>this.populateOverlays(e,b,c))).next((()=>this.computeViews(e,m,b,fn()))).next((T=>({batchId:f,changes:Zw(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ct(t)).next((a=>{let i=gd();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,i){const c=t.collectionGroup;let u=gd();return this.indexManager.getCollectionParents(e,c).next((f=>Qe.forEach(f,(m=>{const b=(function(E,C){return new fu(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(c));return this.getDocumentsMatchingCollectionQuery(e,b,a,i).next((T=>{T.forEach(((E,C)=>{u=u.insert(E,C)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,a,i){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,c,i)))).next((u=>{c.forEach(((m,b)=>{const T=b.getKey();u.get(T)===null&&(u=u.insert(T,ar.newInvalidDocument(T)))}));let f=gd();return u.forEach(((m,b)=>{const T=c.get(m);T!==void 0&&Td(T.mutation,b,ta.empty(),vt.now()),mm(t,b)&&(f=f.insert(m,b))})),f}))}}class i4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Qe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:xi(i.createTime)}})(t)),Qe.resolve()}getNamedQuery(e,t){return Qe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:YR(i.bundledQuery),readTime:xi(i.readTime)}})(t)),Qe.resolve()}}class o4{constructor(){this.overlays=new es(Ct.comparator),this.Lr=new Map}getOverlay(e,t){return Qe.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Gl();return Qe.forEach(t,(i=>this.getOverlay(e,i).next((c=>{c!==null&&a.set(i,c)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((i,c)=>{this.bt(e,t,c)})),Qe.resolve()}removeOverlaysForBatchId(e,t,a){const i=this.Lr.get(a);return i!==void 0&&(i.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(a)),Qe.resolve()}getOverlaysForCollection(e,t,a){const i=Gl(),c=t.length+1,u=new Ct(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,b=m.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===c&&m.largestBatchId>a&&i.set(m.getKey(),m)}return Qe.resolve(i)}getOverlaysForCollectionGroup(e,t,a,i){let c=new es(((b,T)=>b-T));const u=this.overlays.getIterator();for(;u.hasNext();){const b=u.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>a){let T=c.get(b.largestBatchId);T===null&&(T=Gl(),c=c.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const f=Gl(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((b,T)=>f.set(b,T))),!(f.size()>=i)););return Qe.resolve(f)}bt(e,t,a){const i=this.overlays.get(a.key);if(i!==null){const u=this.Lr.get(i.largestBatchId).delete(a.key);this.Lr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(a.key,new ER(t,a));let c=this.Lr.get(t);c===void 0&&(c=fn(),this.Lr.set(t,c)),this.Lr.set(t,c.add(a.key))}}class l4{constructor(){this.sessionToken=Ks.EMPTY_BYTE_STRING}getSessionToken(e){return Qe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Qe.resolve()}}class $y{constructor(){this.kr=new Ds(Us.Kr),this.qr=new Ds(Us.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new Us(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new Us(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new Ct(new Gn([])),a=new Us(t,e),i=new Us(t,e+1),c=[];return this.qr.forEachInRange([a,i],(u=>{this.Wr(u),c.push(u.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ct(new Gn([])),a=new Us(t,e),i=new Us(t,e+1);let c=fn();return this.qr.forEachInRange([a,i],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new Us(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Us{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ct.comparator(e.key,t.key)||hn(e.Hr,t.Hr)}static Ur(e,t){return hn(e.Hr,t.Hr)||Ct.comparator(e.key,t.key)}}class c4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ds(Us.Kr)}checkEmpty(e){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,i){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new TR(c,t,a,i);this.mutationQueue.push(u);for(const f of i)this.Jr=this.Jr.add(new Us(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Qe.resolve(u)}lookupMutationBatch(e,t){return Qe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,i=this.Xr(a),c=i<0?0:i;return Qe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?Iy:this.Yn-1)}getAllMutationBatches(e){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Us(t,0),i=new Us(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([a,i],(u=>{const f=this.Zr(u.Hr);c.push(f)})),Qe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Ds(hn);return t.forEach((i=>{const c=new Us(i,0),u=new Us(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,u],(f=>{a=a.add(f.Hr)}))})),Qe.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,i=a.length+1;let c=a;Ct.isDocumentKey(c)||(c=c.child(""));const u=new Us(new Ct(c),0);let f=new Ds(hn);return this.Jr.forEachWhile((m=>{const b=m.key.path;return!!a.isPrefixOf(b)&&(b.length===i&&(f=f.add(m.Hr)),!0)}),u),Qe.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((a=>{const i=this.Zr(a);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Cn(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return Qe.forEach(t.mutations,(i=>{const c=new Us(i.key,t.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new Us(t,0),i=this.Jr.firstAfterOrEqual(a);return Qe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Qe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class u4{constructor(e){this.ti=e,this.docs=(function(){return new es(Ct.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,i=this.docs.get(a),c=i?i.size:0,u=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return Qe.resolve(a?a.document.mutableCopy():ar.newInvalidDocument(t))}getEntries(e,t){let a=ho();return t.forEach((i=>{const c=this.docs.get(i);a=a.insert(i,c?c.document.mutableCopy():ar.newInvalidDocument(i))})),Qe.resolve(a)}getDocumentsMatchingQuery(e,t,a,i){let c=ho();const u=t.path,f=new Ct(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:b,value:{document:T}}=m.getNext();if(!u.isPrefixOf(b.path))break;b.path.length>u.length+1||PA(OA(T),a)<=0||(i.has(T.key)||mm(t,T))&&(c=c.insert(T.key,T.mutableCopy()))}return Qe.resolve(c)}getAllFromCollectionGroup(e,t,a,i){zt(9500)}ni(e,t){return Qe.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new d4(this)}getSize(e){return Qe.resolve(this.size)}}class d4 extends s4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(a)})),Qe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class h4{constructor(e){this.persistence=e,this.ri=new rc((t=>Ly(t)),Vy),this.lastRemoteSnapshotVersion=qt.min(),this.highestTargetId=0,this.ii=0,this.si=new $y,this.targetCount=0,this.oi=ru._r()}forEachTarget(e,t){return this.ri.forEach(((a,i)=>t(i))),Qe.resolve()}getLastRemoteSnapshotVersion(e){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),Qe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ru(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Qe.resolve()}updateTargetData(e,t){return this.lr(t),Qe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(e,t,a){let i=0;const c=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&a.get(f.targetId)===null&&(this.ri.delete(u),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)})),Qe.waitFor(c).next((()=>i))}getTargetCount(e){return Qe.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return Qe.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),Qe.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const i=this.persistence.referenceDelegate,c=[];return i&&t.forEach((u=>{c.push(i.markPotentiallyOrphaned(e,u))})),Qe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Qe.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return Qe.resolve(a)}containsKey(e,t){return Qe.resolve(this.si.containsKey(t))}}class x2{constructor(e,t){this._i={},this.overlays={},this.ai=new um(0),this.ui=!1,this.ui=!0,this.ci=new l4,this.referenceDelegate=e(this),this.li=new h4(this),this.indexManager=new QR,this.remoteDocumentCache=(function(i){return new u4(i)})((a=>this.referenceDelegate.hi(a))),this.serializer=new KR(t),this.Pi=new i4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new o4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new c4(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){yt("MemoryPersistence","Starting transaction:",e);const i=new f4(this.ai.next());return this.referenceDelegate.Ti(),a(i).next((c=>this.referenceDelegate.Ii(i).next((()=>c)))).toPromise().then((c=>(i.raiseOnCommittedEvent(),c)))}Ei(e,t){return Qe.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class f4 extends VA{constructor(e){super(),this.currentSequenceNumber=e}}class Gy{constructor(e){this.persistence=e,this.Ri=new $y,this.Ai=null}static Vi(e){return new Gy(e)}get di(){if(this.Ai)return this.Ai;throw zt(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),Qe.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),Qe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Qe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((i=>this.di.add(i.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((c=>this.di.add(c.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.di,(a=>{const i=Ct.fromPath(a);return this.mi(e,i).next((c=>{c||t.removeEntry(i,qt.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Qe.or([()=>Qe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Xf{constructor(e,t){this.persistence=e,this.fi=new rc((a=>zA(a.path)),((a,i)=>a.isEqual(i))),this.garbageCollector=n4(this,t)}static Vi(e,t){return new Xf(e,t)}Ti(){}Ii(e){return Qe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((i=>a+i))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return Qe.forEach(this.fi,((a,i)=>this.wr(e,a,i).next((c=>c?Qe.resolve():t(i)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const i=this.persistence.getRemoteDocumentCache(),c=i.newChangeBuffer();return i.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(a++,c.removeEntry(u,qt.min()))})))).next((()=>c.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Qe.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),Qe.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),Qe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Qe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}wr(e,t,a){return Qe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.fi.get(t);return Qe.resolve(i!==void 0&&i>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Wy{constructor(e,t,a,i){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=i}static Es(e,t){let a=fn(),i=fn();for(const c of t.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new Wy(e,t.fromCache,a,i)}}class m4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class p4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return qN()?8:UA(or())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,i){const c={result:null};return this.gs(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ps(e,t,i,a).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new m4;return this.ys(e,t,u).next((f=>{if(c.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>c.result))}ws(e,t,a,i){return a.documentReadCount<this.Vs?(qc()<=dn.DEBUG&&yt("QueryEngine","SDK will not create cache indexes for query:",Hc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Qe.resolve()):(qc()<=dn.DEBUG&&yt("QueryEngine","Query:",Hc(t),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ds*i?(qc()<=dn.DEBUG&&yt("QueryEngine","The SDK decides to create cache indexes for query:",Hc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(t))):Qe.resolve())}gs(e,t){if(ox(t))return Qe.resolve(null);let a=bi(t);return this.indexManager.getIndexType(e,a).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=qg(t,null,"F"),a=bi(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((c=>{const u=fn(...c);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,a).next((m=>{const b=this.bs(t,f);return this.Ss(t,b,u,m.readTime)?this.gs(e,qg(t,null,"F")):this.Ds(e,b,t,m)}))))})))))}ps(e,t,a,i){return ox(t)||i.isEqual(qt.min())?Qe.resolve(null):this.fs.getDocuments(e,a).next((c=>{const u=this.bs(t,c);return this.Ss(t,u,a,i)?Qe.resolve(null):(qc()<=dn.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hc(t)),this.Ds(e,u,t,IA(i,Dd)).next((f=>f)))}))}bs(e,t){let a=new Ds(Xw(e));return t.forEach(((i,c)=>{mm(e,c)&&(a=a.add(c))})),a}Ss(e,t,a,i){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}ys(e,t,a){return qc()<=dn.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",Hc(t)),this.fs.getDocumentsMatchingQuery(e,t,cl.min(),a)}Ds(e,t,a,i){return this.fs.getDocumentsMatchingQuery(e,a,i).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Ky="LocalStore",g4=3e8;class y4{constructor(e,t,a,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new es(hn),this.Fs=new rc((c=>Ly(c)),Vy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function v4(s,e,t,a){return new y4(s,e,t,a)}async function _2(s,e){const t=Wt(s);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let i;return t.mutationQueue.getAllMutationBatches(a).next((c=>(i=c,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((c=>{const u=[],f=[];let m=fn();for(const b of i){u.push(b.batchId);for(const T of b.mutations)m=m.add(T.key)}for(const b of c){f.push(b.batchId);for(const T of b.mutations)m=m.add(T.key)}return t.localDocuments.getDocuments(a,m).next((b=>({Ns:b,removedBatchIds:u,addedBatchIds:f})))}))}))}function b4(s,e){const t=Wt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const i=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,b,T){const E=b.batch,C=E.keys();let L=Qe.resolve();return C.forEach((P=>{L=L.next((()=>T.getEntry(m,P))).next((V=>{const F=b.docVersions.get(P);Cn(F!==null,48541),V.version.compareTo(F)<0&&(E.applyToRemoteDocument(V,b),V.isValidDocument()&&(V.setReadTime(b.commitVersion),T.addEntry(V)))}))})),L.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,a,e,c).next((()=>c.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(f){let m=fn();for(let b=0;b<f.mutationResults.length;++b)f.mutationResults[b].transformResults.length>0&&(m=m.add(f.batch.mutations[b].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(a,i)))}))}function w2(s){const e=Wt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function x4(s,e){const t=Wt(s),a=e.snapshotVersion;let i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;const f=[];e.targetChanges.forEach(((T,E)=>{const C=i.get(E);if(!C)return;f.push(t.li.removeMatchingKeys(c,T.removedDocuments,E).next((()=>t.li.addMatchingKeys(c,T.addedDocuments,E))));let L=C.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(Ks.EMPTY_BYTE_STRING,qt.min()).withLastLimboFreeSnapshotVersion(qt.min()):T.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(T.resumeToken,a)),i=i.insert(E,L),(function(V,F,Y){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=g4?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(C,L,T)&&f.push(t.li.updateTargetData(c,L))}));let m=ho(),b=fn();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,T))})),f.push(_4(c,u,e.documentUpdates).next((T=>{m=T.Bs,b=T.Ls}))),!a.isEqual(qt.min())){const T=t.li.getLastRemoteSnapshotVersion(c).next((E=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,a)));f.push(T)}return Qe.waitFor(f).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,m,b))).next((()=>m))})).then((c=>(t.vs=i,c)))}function _4(s,e,t){let a=fn(),i=fn();return t.forEach((c=>a=a.add(c))),e.getEntries(s,a).next((c=>{let u=ho();return t.forEach(((f,m)=>{const b=c.get(f);m.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(qt.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!b.isValidDocument()||m.version.compareTo(b.version)>0||m.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):yt(Ky,"Ignoring outdated watch update for ",f,". Current version:",b.version," Watch version:",m.version)})),{Bs:u,Ls:i}}))}function w4(s,e){const t=Wt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Iy),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function S4(s,e){const t=Wt(s);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let i;return t.li.getTargetData(a,e).next((c=>c?(i=c,Qe.resolve(i)):t.li.allocateTargetId(a).next((u=>(i=new sl(e,u,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,i).next((()=>i)))))))})).then((a=>{const i=t.vs.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function Kg(s,e,t){const a=Wt(s),i=a.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",c,(u=>a.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!hu(u))throw u;yt(Ky,`Failed to update sequence numbers for target ${e}: ${u}`)}a.vs=a.vs.remove(e),a.Fs.delete(i.target)}function xx(s,e,t){const a=Wt(s);let i=qt.min(),c=fn();return a.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,b,T){const E=Wt(m),C=E.Fs.get(T);return C!==void 0?Qe.resolve(E.vs.get(C)):E.li.getTargetData(b,T)})(a,u,bi(e)).next((f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(u,f.targetId).next((m=>{c=m}))})).next((()=>a.Cs.getDocumentsMatchingQuery(u,e,t?i:qt.min(),t?c:fn()))).next((f=>(T4(a,cR(e),f),{documents:f,ks:c})))))}function T4(s,e,t){let a=s.Ms.get(e)||qt.min();t.forEach(((i,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),s.Ms.set(e,a)}class _x{constructor(){this.activeTargetIds=pR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class E4{constructor(){this.vo=new _x,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new _x,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class N4{Mo(e){}shutdown(){}}const wx="ConnectivityMonitor";class Sx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){yt(wx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){yt(wx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ff=null;function Yg(){return ff===null?ff=(function(){return 268435456+Math.round(2147483648*Math.random())})():ff++,"0x"+ff.toString(16)}const mg="RestConnection",j4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class k4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${i}`,this.$o=this.databaseId.database===$f?`project_id=${a}`:`project_id=${a}&database_id=${i}`}Wo(e,t,a,i,c){const u=Yg(),f=this.Qo(e,t.toUriEncodedString());yt(mg,`Sending RPC '${e}' ${u}:`,f,a);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,i,c);const{host:b}=new URL(f),T=pl(b);return this.zo(e,f,m,a,T).then((E=>(yt(mg,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw eu(mg,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",a),E}))}jo(e,t,a,i,c,u){return this.Wo(e,t,a,i,c)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,c)=>e[c]=i)),a&&a.headers.forEach(((i,c)=>e[c]=i))}Qo(e,t){const a=j4[e];let i=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class C4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const sr="WebChannelConnection",od=(s,e,t)=>{s.listen(e,(a=>{try{t(a)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Xc extends k4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Xc.c_){const e=jw();od(e,Nw.STAT_EVENT,(t=>{t.stat===Pg.PROXY?yt(sr,"STAT_EVENT: detected buffering proxy"):t.stat===Pg.NOPROXY&&yt(sr,"STAT_EVENT: detected no buffering proxy")})),Xc.c_=!0}}zo(e,t,a,i,c){const u=Yg();return new Promise(((f,m)=>{const b=new Tw;b.setWithCredentials(!0),b.listenOnce(Ew.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Ef.NO_ERROR:const E=b.getResponseJson();yt(sr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case Ef.TIMEOUT:yt(sr,`RPC '${e}' ${u} timed out`),m(new pt(Ge.DEADLINE_EXCEEDED,"Request time out"));break;case Ef.HTTP_ERROR:const C=b.getStatus();if(yt(sr,`RPC '${e}' ${u} failed with status:`,C,"response text:",b.getResponseText()),C>0){let L=b.getResponseJson();Array.isArray(L)&&(L=L[0]);const P=L?.error;if(P&&P.status&&P.message){const V=(function(Y){const W=Y.toLowerCase().replace(/_/g,"-");return Object.values(Ge).indexOf(W)>=0?W:Ge.UNKNOWN})(P.status);m(new pt(V,P.message))}else m(new pt(Ge.UNKNOWN,"Server responded with status "+b.getStatus()))}else m(new pt(Ge.UNAVAILABLE,"Connection failed."));break;default:zt(9055,{l_:e,streamId:u,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{yt(sr,`RPC '${e}' ${u} completed.`)}}));const T=JSON.stringify(i);yt(sr,`RPC '${e}' ${u} sending request:`,i),b.send(t,"POST",T,a,15)}))}T_(e,t,a){const i=Yg(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,a),f.encodeInitMessageHeaders=!0;const b=c.join("");yt(sr,`Creating RPC '${e}' stream ${i}: ${b}`,f);const T=u.createWebChannel(b,f);this.I_(T);let E=!1,C=!1;const L=new C4({Ho:P=>{C?yt(sr,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(E||(yt(sr,`Opening RPC '${e}' stream ${i} transport.`),T.open(),E=!0),yt(sr,`RPC '${e}' stream ${i} sending:`,P),T.send(P))},Jo:()=>T.close()});return od(T,pd.EventType.OPEN,(()=>{C||(yt(sr,`RPC '${e}' stream ${i} transport opened.`),L.i_())})),od(T,pd.EventType.CLOSE,(()=>{C||(C=!0,yt(sr,`RPC '${e}' stream ${i} transport closed`),L.o_(),this.E_(T))})),od(T,pd.EventType.ERROR,(P=>{C||(C=!0,eu(sr,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),L.o_(new pt(Ge.UNAVAILABLE,"The operation could not be completed")))})),od(T,pd.EventType.MESSAGE,(P=>{if(!C){const V=P.data[0];Cn(!!V,16349);const F=V,Y=F?.error||F[0]?.error;if(Y){yt(sr,`RPC '${e}' stream ${i} received error:`,Y);const W=Y.status;let se=(function(ke){const q=Ss[ke];if(q!==void 0)return l2(q)})(W),K=Y.message;se===void 0&&(se=Ge.INTERNAL,K="Unknown error status: "+W+" with message "+Y.message),C=!0,L.o_(new pt(se,K)),T.close()}else yt(sr,`RPC '${e}' stream ${i} received:`,V),L.__(V)}})),Xc.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return kw()}}function A4(s){return new Xc(s)}function pg(){return typeof document<"u"?document:null}function vm(s){return new IR(s,!0)}Xc.c_=!1;class S2{constructor(e,t,a=1e3,i=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=i,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-a);i>0&&yt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Tx="PersistentStream";class T2{constructor(e,t,a,i,c,u,f,m){this.Ci=e,this.b_=a,this.S_=i,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new S2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ge.RESOURCE_EXHAUSTED?(uo(t.toString()),uo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,i])=>{this.D_===t&&this.G_(a,i)}),(a=>{e((()=>{const i=new pt(Ge.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(i)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{a((()=>this.z_(i)))})),this.stream.onMessage((i=>{a((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return yt(Tx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(yt(Tx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class R4 extends T2{constructor(e,t,a,i,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,i,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=LR(this.serializer,e),a=(function(c){if(!("targetChange"in c))return qt.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?qt.min():u.readTime?xi(u.readTime):qt.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=Wg(this.serializer),t.addTarget=(function(c,u){let f;const m=u.target;if(f=zg(m)?{documents:BR(c,m)}:{query:zR(c,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=d2(c,u.resumeToken);const b=Hg(c,u.expectedCount);b!==null&&(f.expectedCount=b)}else if(u.snapshotVersion.compareTo(qt.min())>0){f.readTime=Qf(c,u.snapshotVersion.toTimestamp());const b=Hg(c,u.expectedCount);b!==null&&(f.expectedCount=b)}return f})(this.serializer,e);const a=qR(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.K_(t)}}class D4 extends T2{constructor(e,t,a,i,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,i,u),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Cn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Cn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Cn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=UR(e.writeResults,e.commitTime),a=xi(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Wg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>VR(this.serializer,a)))};this.K_(t)}}class M4{}class I4 extends M4{constructor(e,t,a,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pt(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Wo(e,$g(t,a),i,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pt(Ge.UNKNOWN,c.toString())}))}jo(e,t,a,i,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,$g(t,a),i,u,f,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pt(Ge.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function O4(s,e,t,a){return new I4(s,e,t,a)}class P4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(uo(t),this.aa=!1):yt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ec="RemoteStore";class L4{constructor(e,t,a,i,c){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((u=>{a.enqueueAndForget((async()=>{ac(this)&&(yt(ec,"Restarting streams for network reachability change."),await(async function(m){const b=Wt(m);b.Ea.add(4),await Xd(b),b.Va.set("Unknown"),b.Ea.delete(4),await bm(b)})(this))}))})),this.Va=new P4(a,i)}}async function bm(s){if(ac(s))for(const e of s.Ra)await e(!0)}async function Xd(s){for(const e of s.Ra)await e(!1)}function E2(s,e){const t=Wt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Jy(t)?Xy(t):mu(t).O_()&&Qy(t,e))}function Yy(s,e){const t=Wt(s),a=mu(t);t.Ia.delete(e),a.O_()&&N2(t,e),t.Ia.size===0&&(a.O_()?a.L_():ac(t)&&t.Va.set("Unknown"))}function Qy(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qt.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mu(s).Z_(e)}function N2(s,e){s.da.$e(e),mu(s).X_(e)}function Xy(s){s.da=new AR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),mu(s).start(),s.Va.ua()}function Jy(s){return ac(s)&&!mu(s).x_()&&s.Ia.size>0}function ac(s){return Wt(s).Ea.size===0}function j2(s){s.da=void 0}async function V4(s){s.Va.set("Online")}async function U4(s){s.Ia.forEach(((e,t)=>{Qy(s,e)}))}async function B4(s,e){j2(s),Jy(s)?(s.Va.ha(e),Xy(s)):s.Va.set("Unknown")}async function z4(s,e,t){if(s.Va.set("Online"),e instanceof u2&&e.state===2&&e.cause)try{await(async function(i,c){const u=c.cause;for(const f of c.targetIds)i.Ia.has(f)&&(await i.remoteSyncer.rejectListen(f,u),i.Ia.delete(f),i.da.removeTarget(f))})(s,e)}catch(a){yt(ec,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Jf(s,a)}else if(e instanceof Cf?s.da.Xe(e):e instanceof c2?s.da.st(e):s.da.tt(e),!t.isEqual(qt.min()))try{const a=await w2(s.localStore);t.compareTo(a)>=0&&await(function(c,u){const f=c.da.Tt(u);return f.targetChanges.forEach(((m,b)=>{if(m.resumeToken.approximateByteSize()>0){const T=c.Ia.get(b);T&&c.Ia.set(b,T.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,b)=>{const T=c.Ia.get(m);if(!T)return;c.Ia.set(m,T.withResumeToken(Ks.EMPTY_BYTE_STRING,T.snapshotVersion)),N2(c,m);const E=new sl(T.target,m,b,T.sequenceNumber);Qy(c,E)})),c.remoteSyncer.applyRemoteEvent(f)})(s,t)}catch(a){yt(ec,"Failed to raise snapshot:",a),await Jf(s,a)}}async function Jf(s,e,t){if(!hu(e))throw e;s.Ea.add(1),await Xd(s),s.Va.set("Offline"),t||(t=()=>w2(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{yt(ec,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await bm(s)}))}function k2(s,e){return e().catch((t=>Jf(s,t,e)))}async function xm(s){const e=Wt(s),t=fl(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Iy;for(;F4(e);)try{const i=await w4(e.localStore,a);if(i===null){e.Ta.length===0&&t.L_();break}a=i.batchId,q4(e,i)}catch(i){await Jf(e,i)}C2(e)&&A2(e)}function F4(s){return ac(s)&&s.Ta.length<10}function q4(s,e){s.Ta.push(e);const t=fl(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function C2(s){return ac(s)&&!fl(s).x_()&&s.Ta.length>0}function A2(s){fl(s).start()}async function H4(s){fl(s).ra()}async function $4(s){const e=fl(s);for(const t of s.Ta)e.ea(t.mutations)}async function G4(s,e,t){const a=s.Ta.shift(),i=Fy.from(a,e,t);await k2(s,(()=>s.remoteSyncer.applySuccessfulWrite(i))),await xm(s)}async function W4(s,e){e&&fl(s).Y_&&await(async function(a,i){if((function(u){return jR(u)&&u!==Ge.ABORTED})(i.code)){const c=a.Ta.shift();fl(a).B_(),await k2(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,i))),await xm(a)}})(s,e),C2(s)&&A2(s)}async function Ex(s,e){const t=Wt(s);t.asyncQueue.verifyOperationInProgress(),yt(ec,"RemoteStore received new credentials");const a=ac(t);t.Ea.add(3),await Xd(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await bm(t)}async function K4(s,e){const t=Wt(s);e?(t.Ea.delete(2),await bm(t)):e||(t.Ea.add(2),await Xd(t),t.Va.set("Unknown"))}function mu(s){return s.ma||(s.ma=(function(t,a,i){const c=Wt(t);return c.sa(),new R4(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(s.datastore,s.asyncQueue,{Zo:V4.bind(null,s),Yo:U4.bind(null,s),t_:B4.bind(null,s),J_:z4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Jy(s)?Xy(s):s.Va.set("Unknown")):(await s.ma.stop(),j2(s))}))),s.ma}function fl(s){return s.fa||(s.fa=(function(t,a,i){const c=Wt(t);return c.sa(),new D4(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:H4.bind(null,s),t_:W4.bind(null,s),ta:$4.bind(null,s),na:G4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await xm(s)):(await s.fa.stop(),s.Ta.length>0&&(yt(ec,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Zy{constructor(e,t,a,i,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=i,this.removalCallback=c,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,i,c){const u=Date.now()+a,f=new Zy(e,t,u,i,c);return f.start(a),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(Ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ev(s,e){if(uo("AsyncQueue",`${e}: ${s}`),hu(s))return new pt(Ge.UNAVAILABLE,`${e}: ${s}`);throw s}class Jc{static emptySet(e){return new Jc(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Ct.comparator(t.key,a.key):(t,a)=>Ct.comparator(t.key,a.key),this.keyedMap=gd(),this.sortedSet=new es(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=a.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Jc;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class Nx{constructor(){this.ga=new es(Ct.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):zt(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class au{constructor(e,t,a,i,c,u,f,m,b){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=b}static fromInitialDocuments(e,t,a,i,c){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new au(e,t,Jc.emptySet(t),u,a,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==a[i].type||!t[i].doc.isEqual(a[i].doc))return!1;return!0}}class Y4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Q4{constructor(){this.queries=jx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const i=Wt(t),c=i.queries;i.queries=jx(),c.forEach(((u,f)=>{for(const m of f.ba)m.onError(a)}))})(this,new pt(Ge.ABORTED,"Firestore shutting down"))}}function jx(){return new rc((s=>Qw(s)),fm)}async function R2(s,e){const t=Wt(s);let a=3;const i=e.query;let c=t.queries.get(i);c?!c.Sa()&&e.Da()&&(a=2):(c=new Y4,a=e.Da()?0:1);try{switch(a){case 0:c.wa=await t.onListen(i,!0);break;case 1:c.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const f=ev(u,`Initialization of query '${Hc(e.query)}' failed`);return void e.onError(f)}t.queries.set(i,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&tv(t)}async function D2(s,e){const t=Wt(s),a=e.query;let i=3;const c=t.queries.get(a);if(c){const u=c.ba.indexOf(e);u>=0&&(c.ba.splice(u,1),c.ba.length===0?i=e.Da()?0:1:!c.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function X4(s,e){const t=Wt(s);let a=!1;for(const i of e){const c=i.query,u=t.queries.get(c);if(u){for(const f of u.ba)f.Fa(i)&&(a=!0);u.wa=i}}a&&tv(t)}function J4(s,e,t){const a=Wt(s),i=a.queries.get(e);if(i)for(const c of i.ba)c.onError(t);a.queries.delete(e)}function tv(s){s.Ca.forEach((e=>{e.next()}))}var Qg,kx;(kx=Qg||(Qg={})).Ma="default",kx.Cache="cache";class M2{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const i of e.docChanges)i.type!==3&&a.push(i);e=new au(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=au.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qg.Cache}}class I2{constructor(e){this.key=e}}class O2{constructor(e){this.key=e}}class Z4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=fn(),this.mutatedKeys=fn(),this.eu=Xw(e),this.tu=new Jc(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new Nx,i=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,b=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((T,E)=>{const C=i.get(T),L=mm(this.query,E)?E:null,P=!!C&&this.mutatedKeys.has(C.key),V=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let F=!1;C&&L?C.data.isEqual(L.data)?P!==V&&(a.track({type:3,doc:L}),F=!0):this.su(C,L)||(a.track({type:2,doc:L}),F=!0,(m&&this.eu(L,m)>0||b&&this.eu(L,b)<0)&&(f=!0)):!C&&L?(a.track({type:0,doc:L}),F=!0):C&&!L&&(a.track({type:1,doc:C}),F=!0,(m||b)&&(f=!0)),F&&(L?(u=u.add(L),c=V?c.add(T):c.delete(T)):(u=u.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const T=this.query.limitType==="F"?u.last():u.first();u=u.delete(T.key),c=c.delete(T.key),a.track({type:1,doc:T})}return{tu:u,iu:a,Ss:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,i){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((T,E)=>(function(L,P){const V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zt(20277,{Vt:F})}};return V(L)-V(P)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(a),i=i??!1;const f=t&&!i?this._u():[],m=this.Ya.size===0&&this.current&&!i?1:0,b=m!==this.Xa;return this.Xa=m,u.length!==0||b?{snapshot:new au(this.query,e.tu,c,u,e.mutatedKeys,m===0,b,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Nx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=fn(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new O2(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new I2(a))})),t}cu(e){this.Za=e.ks,this.Ya=fn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return au.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const nv="SyncEngine";class eD{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class tD{constructor(e){this.key=e,this.hu=!1}}class nD{constructor(e,t,a,i,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new rc((f=>Qw(f)),fm),this.Iu=new Map,this.Eu=new Set,this.Ru=new es(Ct.comparator),this.Au=new Map,this.Vu=new $y,this.du={},this.mu=new Map,this.fu=ru.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sD(s,e,t=!0){const a=z2(s);let i;const c=a.Tu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),i=c.view.lu()):i=await P2(a,e,t,!0),i}async function rD(s,e){const t=z2(s);await P2(t,e,!0,!1)}async function P2(s,e,t,a){const i=await S4(s.localStore,bi(e)),c=i.targetId,u=s.sharedClientState.addLocalQueryTarget(c,t);let f;return a&&(f=await aD(s,e,c,u==="current",i.resumeToken)),s.isPrimaryClient&&t&&E2(s.remoteStore,i),f}async function aD(s,e,t,a,i){s.pu=(E,C,L)=>(async function(V,F,Y,W){let se=F.view.ru(Y);se.Ss&&(se=await xx(V.localStore,F.query,!1).then((({documents:q})=>F.view.ru(q,se))));const K=W&&W.targetChanges.get(F.targetId),fe=W&&W.targetMismatches.get(F.targetId)!=null,ke=F.view.applyChanges(se,V.isPrimaryClient,K,fe);return Ax(V,F.targetId,ke.au),ke.snapshot})(s,E,C,L);const c=await xx(s.localStore,e,!0),u=new Z4(e,c.ks),f=u.ru(c.documents),m=Qd.createSynthesizedTargetChangeForCurrentChange(t,a&&s.onlineState!=="Offline",i),b=u.applyChanges(f,s.isPrimaryClient,m);Ax(s,t,b.au);const T=new eD(e,t,u);return s.Tu.set(e,T),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),b.snapshot}async function iD(s,e,t){const a=Wt(s),i=a.Tu.get(e),c=a.Iu.get(i.targetId);if(c.length>1)return a.Iu.set(i.targetId,c.filter((u=>!fm(u,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await Kg(a.localStore,i.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(i.targetId),t&&Yy(a.remoteStore,i.targetId),Xg(a,i.targetId)})).catch(du)):(Xg(a,i.targetId),await Kg(a.localStore,i.targetId,!0))}async function oD(s,e){const t=Wt(s),a=t.Tu.get(e),i=t.Iu.get(a.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Yy(t.remoteStore,a.targetId))}async function lD(s,e,t){const a=pD(s);try{const i=await(function(u,f){const m=Wt(u),b=vt.now(),T=f.reduce(((L,P)=>L.add(P.key)),fn());let E,C;return m.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let P=ho(),V=fn();return m.xs.getEntries(L,T).next((F=>{P=F,P.forEach(((Y,W)=>{W.isValidDocument()||(V=V.add(Y))}))})).next((()=>m.localDocuments.getOverlayedDocuments(L,P))).next((F=>{E=F;const Y=[];for(const W of f){const se=wR(W,E.get(W.key).overlayedDocument);se!=null&&Y.push(new vl(W.key,se,Fw(se.value.mapValue),_a.exists(!0)))}return m.mutationQueue.addMutationBatch(L,b,Y,f)})).next((F=>{C=F;const Y=F.applyToLocalDocumentSet(E,V);return m.documentOverlayCache.saveOverlays(L,F.batchId,Y)}))})).then((()=>({batchId:C.batchId,changes:Zw(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(i.batchId),(function(u,f,m){let b=u.du[u.currentUser.toKey()];b||(b=new es(hn)),b=b.insert(f,m),u.du[u.currentUser.toKey()]=b})(a,i.batchId,t),await Jd(a,i.changes),await xm(a.remoteStore)}catch(i){const c=ev(i,"Failed to persist write");t.reject(c)}}async function L2(s,e){const t=Wt(s);try{const a=await x4(t.localStore,e);e.targetChanges.forEach(((i,c)=>{const u=t.Au.get(c);u&&(Cn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?Cn(u.hu,14607):i.removedDocuments.size>0&&(Cn(u.hu,42227),u.hu=!1))})),await Jd(t,a,e)}catch(a){await du(a)}}function Cx(s,e,t){const a=Wt(s);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const i=[];a.Tu.forEach(((c,u)=>{const f=u.view.va(e);f.snapshot&&i.push(f.snapshot)})),(function(u,f){const m=Wt(u);m.onlineState=f;let b=!1;m.queries.forEach(((T,E)=>{for(const C of E.ba)C.va(f)&&(b=!0)})),b&&tv(m)})(a.eventManager,e),i.length&&a.Pu.J_(i),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function cD(s,e,t){const a=Wt(s);a.sharedClientState.updateQueryState(e,"rejected",t);const i=a.Au.get(e),c=i&&i.key;if(c){let u=new es(Ct.comparator);u=u.insert(c,ar.newNoDocument(c,qt.min()));const f=fn().add(c),m=new ym(qt.min(),new Map,new es(hn),u,f);await L2(a,m),a.Ru=a.Ru.remove(c),a.Au.delete(e),sv(a)}else await Kg(a.localStore,e,!1).then((()=>Xg(a,e,t))).catch(du)}async function uD(s,e){const t=Wt(s),a=e.batch.batchId;try{const i=await b4(t.localStore,e);U2(t,a,null),V2(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Jd(t,i)}catch(i){await du(i)}}async function dD(s,e,t){const a=Wt(s);try{const i=await(function(u,f){const m=Wt(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let T;return m.mutationQueue.lookupMutationBatch(b,f).next((E=>(Cn(E!==null,37113),T=E.keys(),m.mutationQueue.removeMutationBatch(b,E)))).next((()=>m.mutationQueue.performConsistencyCheck(b))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(b,T,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,T))).next((()=>m.localDocuments.getDocuments(b,T)))}))})(a.localStore,e);U2(a,e,t),V2(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Jd(a,i)}catch(i){await du(i)}}function V2(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function U2(s,e,t){const a=Wt(s);let i=a.du[a.currentUser.toKey()];if(i){const c=i.get(e);c&&(t?c.reject(t):c.resolve(),i=i.remove(e)),a.du[a.currentUser.toKey()]=i}}function Xg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),t&&s.Pu.yu(a,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||B2(s,a)}))}function B2(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(Yy(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),sv(s))}function Ax(s,e,t){for(const a of t)a instanceof I2?(s.Vu.addReference(a.key,e),hD(s,a)):a instanceof O2?(yt(nv,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||B2(s,a.key)):zt(19791,{wu:a})}function hD(s,e){const t=e.key,a=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(a)||(yt(nv,"New document in limbo: "+t),s.Eu.add(a),sv(s))}function sv(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ct(Gn.fromString(e)),a=s.fu.next();s.Au.set(a,new tD(t)),s.Ru=s.Ru.insert(t,a),E2(s.remoteStore,new sl(bi(Uy(t.path)),a,"TargetPurposeLimboResolution",um.ce))}}async function Jd(s,e,t){const a=Wt(s),i=[],c=[],u=[];a.Tu.isEmpty()||(a.Tu.forEach(((f,m)=>{u.push(a.pu(m,e,t).then((b=>{if((b||t)&&a.isPrimaryClient){const T=b?!b.fromCache:t?.targetChanges.get(m.targetId)?.current;a.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(b){i.push(b);const T=Wy.Es(m.targetId,b);c.push(T)}})))})),await Promise.all(u),a.Pu.J_(i),await(async function(m,b){const T=Wt(m);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>Qe.forEach(b,(C=>Qe.forEach(C.Ts,(L=>T.persistence.referenceDelegate.addReference(E,C.targetId,L))).next((()=>Qe.forEach(C.Is,(L=>T.persistence.referenceDelegate.removeReference(E,C.targetId,L)))))))))}catch(E){if(!hu(E))throw E;yt(Ky,"Failed to update sequence numbers: "+E)}for(const E of b){const C=E.targetId;if(!E.fromCache){const L=T.vs.get(C),P=L.snapshotVersion,V=L.withLastLimboFreeSnapshotVersion(P);T.vs=T.vs.insert(C,V)}}})(a.localStore,c))}async function fD(s,e){const t=Wt(s);if(!t.currentUser.isEqual(e)){yt(nv,"User change. New user:",e.toKey());const a=await _2(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((f=>{f.forEach((m=>{m.reject(new pt(Ge.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Jd(t,a.Ns)}}function mD(s,e){const t=Wt(s),a=t.Au.get(e);if(a&&a.hu)return fn().add(a.key);{let i=fn();const c=t.Iu.get(e);if(!c)return i;for(const u of c){const f=t.Tu.get(u);i=i.unionWith(f.view.nu)}return i}}function z2(s){const e=Wt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=L2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cD.bind(null,e),e.Pu.J_=X4.bind(null,e.eventManager),e.Pu.yu=J4.bind(null,e.eventManager),e}function pD(s){const e=Wt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dD.bind(null,e),e}class Zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return v4(this.persistence,new p4,e.initialUser,this.serializer)}Cu(e){return new x2(Gy.Vi,this.serializer)}Du(e){return new E4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zf.provider={build:()=>new Zf};class gD extends Zf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Cn(this.persistence.referenceDelegate instanceof Xf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new e4(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Vr.withCacheSize(this.cacheSizeBytes):Vr.DEFAULT;return new x2((a=>Xf.Vi(a,t)),this.serializer)}}class Jg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Cx(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=fD.bind(null,this.syncEngine),await K4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Q4})()}createDatastore(e){const t=vm(e.databaseInfo.databaseId),a=A4(e.databaseInfo);return O4(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,i,c,u,f){return new L4(a,i,c,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Cx(this.syncEngine,t,0)),(function(){return Sx.v()?new Sx:new N4})())}createSyncEngine(e,t){return(function(i,c,u,f,m,b,T){const E=new nD(i,c,u,f,m,b);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const a=Wt(t);yt(ec,"RemoteStore shutting down."),a.Ea.add(5),await Xd(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Jg.provider={build:()=>new Jg};class F2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):uo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ml="FirestoreClient";class yD{constructor(e,t,a,i,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=i,this.user=rr.UNAUTHENTICATED,this.clientId=My.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async u=>{yt(ml,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(a,(u=>(yt(ml,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=ev(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function gg(s,e){s.asyncQueue.verifyOperationInProgress(),yt(ml,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener((async i=>{a.isEqual(i)||(await _2(e.localStore,i),a=i)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Rx(s,e){s.asyncQueue.verifyOperationInProgress();const t=await vD(s);yt(ml,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((a=>Ex(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,i)=>Ex(e.remoteStore,i))),s._onlineComponents=e}async function vD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){yt(ml,"Using user provided OfflineComponentProvider");try{await gg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ge.FAILED_PRECONDITION||i.code===Ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;eu("Error using user provided cache. Falling back to memory cache: "+t),await gg(s,new Zf)}}else yt(ml,"Using default OfflineComponentProvider"),await gg(s,new gD(void 0));return s._offlineComponents}async function q2(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(yt(ml,"Using user provided OnlineComponentProvider"),await Rx(s,s._uninitializedComponentsProvider._online)):(yt(ml,"Using default OnlineComponentProvider"),await Rx(s,new Jg))),s._onlineComponents}function bD(s){return q2(s).then((e=>e.syncEngine))}async function H2(s){const e=await q2(s),t=e.eventManager;return t.onListen=sD.bind(null,e.syncEngine),t.onUnlisten=iD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oD.bind(null,e.syncEngine),t}function xD(s,e,t={}){const a=new io;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,m,b){const T=new F2({next:C=>{T.Nu(),u.enqueueAndForget((()=>D2(c,E)));const L=C.docs.has(f);!L&&C.fromCache?b.reject(new pt(Ge.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&C.fromCache&&m&&m.source==="server"?b.reject(new pt(Ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(C)},error:C=>b.reject(C)}),E=new M2(Uy(f.path),T,{includeMetadataChanges:!0,Ka:!0});return R2(c,E)})(await H2(s),s.asyncQueue,e,t,a))),a.promise}function _D(s,e,t={}){const a=new io;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,m,b){const T=new F2({next:C=>{T.Nu(),u.enqueueAndForget((()=>D2(c,E))),C.fromCache&&m.source==="server"?b.reject(new pt(Ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(C)},error:C=>b.reject(C)}),E=new M2(f,T,{includeMetadataChanges:!0,Ka:!0});return R2(c,E)})(await H2(s),s.asyncQueue,e,t,a))),a.promise}function wD(s,e){const t=new io;return s.asyncQueue.enqueueAndForget((async()=>lD(await bD(s),e,t))),t.promise}function $2(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const SD="ComponentProvider",Dx=new Map;function TD(s,e,t,a,i){return new HA(s,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,$2(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,a)}const G2="firestore.googleapis.com",Mx=!0;class Ix{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pt(Ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=G2,this.ssl=Mx}else this.host=e.host,this.ssl=e.ssl??Mx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=b2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JR)throw new pt(Ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$2(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new pt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new pt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new pt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,i){return a.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _m{constructor(e,t,a,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ix({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(Ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pt(Ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ix(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new SA;switch(a.type){case"firstParty":return new jA(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new pt(Ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=Dx.get(t);a&&(yt(SD,"Removing Datastore"),Dx.delete(t),a.terminate())})(this),Promise.resolve()}}function ED(s,e,t,a={}){s=Fa(s,_m);const i=pl(e),c=s._getSettings(),u={...c,emulatorOptions:s._getEmulatorOptions()},f=`${e}:${t}`;i&&(gy(`https://${f}`),yy("Firestore",!0)),c.host!==G2&&c.host!==f&&eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...c,host:f,ssl:i,emulatorOptions:a};if(!Yl(m,u)&&(s._setSettings(m),a.mockUserToken)){let b,T;if(typeof a.mockUserToken=="string")b=a.mockUserToken,T=rr.MOCK_USER;else{b=P_(a.mockUserToken,s._app?.options.projectId);const E=a.mockUserToken.sub||a.mockUserToken.user_id;if(!E)throw new pt(Ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new rr(E)}s._authCredentials=new TA(new Aw(b,T))}}class ic{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ic(this.firestore,e,this._query)}}class ps{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ps(this.firestore,e,this._key)}toJSON(){return{type:ps._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Kd(t,ps._jsonSchema))return new ps(e,a||null,new Ct(Gn.fromString(t.referencePath)))}}ps._jsonSchemaVersion="firestore/documentReference/1.0",ps._jsonSchema={type:Ns("string",ps._jsonSchemaVersion),referencePath:Ns("string")};class ol extends ic{constructor(e,t,a){super(e,t,Uy(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ps(this.firestore,null,new Ct(e))}withConverter(e){return new ol(this.firestore,e,this._path)}}function Ht(s,e,...t){if(s=Zn(s),Rw("collection","path",e),s instanceof _m){const a=Gn.fromString(e,...t);return Wb(a),new ol(s,null,a)}{if(!(s instanceof ps||s instanceof ol))throw new pt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Gn.fromString(e,...t));return Wb(a),new ol(s.firestore,null,a)}}function Mt(s,e,...t){if(s=Zn(s),arguments.length===1&&(e=My.newId()),Rw("doc","path",e),s instanceof _m){const a=Gn.fromString(e,...t);return Gb(a),new ps(s,null,new Ct(a))}{if(!(s instanceof ps||s instanceof ol))throw new pt(Ge.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Gn.fromString(e,...t));return Gb(a),new ps(s.firestore,s instanceof ol?s.converter:null,new Ct(a))}}const Ox="AsyncQueue";class Px{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new S2(this,"async_queue_retry"),this._c=()=>{const a=pg();a&&yt(Ox,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=pg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new io;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!hu(e))throw e;yt(Ox,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,uo("INTERNAL UNHANDLED ERROR: ",Lx(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Zy.createAndSchedule(this,e,t,a,(c=>this.hc(c)));return this.tc.push(i),i}uc(){this.nc&&zt(47125,{Pc:Lx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Lx(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class oc extends _m{constructor(e,t,a,i){super(e,t,a,i),this.type="firestore",this._queue=new Px,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Px(e),this._firestoreClient=void 0,await e}}}function ND(s,e){const t=typeof s=="object"?s:_y(),a=typeof s=="string"?s:$f,i=am(t,"firestore").getImmediate({identifier:a});if(!i._initialized){const c=M_("firestore");c&&ED(i,...c)}return i}function rv(s){if(s._terminated)throw new pt(Ge.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||jD(s),s._firestoreClient}function jD(s){const e=s._freezeSettings(),t=TD(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new yD(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(i){const c=i?._online.build();return{_offline:i?._offline.build(c),_online:c}})(s._componentsProvider))}class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(Ks.fromBase64String(e))}catch(t){throw new pt(Ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ba(Ks.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ba._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kd(e,ba._jsonSchema))return ba.fromBase64String(e.bytes)}}ba._jsonSchemaVersion="firestore/bytes/1.0",ba._jsonSchema={type:Ns("string",ba._jsonSchemaVersion),bytes:Ns("string")};class av{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pt(Ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ws(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iv{constructor(e){this._methodName=e}}class _i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pt(Ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pt(Ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return hn(this._lat,e._lat)||hn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(e){if(Kd(e,_i._jsonSchema))return new _i(e.latitude,e.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:Ns("string",_i._jsonSchemaVersion),latitude:Ns("number"),longitude:Ns("number")};class Ua{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,i){if(a.length!==i.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==i[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ua._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kd(e,Ua._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ua(e.vectorValues);throw new pt(Ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ua._jsonSchemaVersion="firestore/vectorValue/1.0",Ua._jsonSchema={type:Ns("string",Ua._jsonSchemaVersion),vectorValues:Ns("object")};const kD=/^__.*__$/;class CD{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new vl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yd(e,this.data,t,this.fieldTransforms)}}class W2{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new vl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function K2(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zt(40011,{dataSource:s})}}class ov{constructor(e,t,a,i,c,u){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=i,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ov({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const t=this.path?.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return em(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(K2(this.dataSource)&&kD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class AD{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||vm(e)}createContext(e,t,a,i=!1){return new ov({dataSource:e,methodName:t,targetDoc:a,path:Ws.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wm(s){const e=s._freezeSettings(),t=vm(s._databaseId);return new AD(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Y2(s,e,t,a,i,c={}){const u=s.createContext(c.merge||c.mergeFields?2:0,e,t,i);lv("Data must be an object, but it was:",u,a);const f=Q2(a,u);let m,b;if(c.merge)m=new ta(u.fieldMask),b=u.fieldTransforms;else if(c.mergeFields){const T=[];for(const E of c.mergeFields){const C=tc(e,E,t);if(!u.contains(C))throw new pt(Ge.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);Z2(T,C)||T.push(C)}m=new ta(T),b=u.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,b=u.fieldTransforms;return new CD(new Ur(f),m,b)}class Sm extends iv{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sm}}function RD(s,e,t,a){const i=s.createContext(1,e,t);lv("Data must be an object, but it was:",i,a);const c=[],u=Ur.empty();yl(a,((m,b)=>{const T=J2(e,m,t);b=Zn(b);const E=i.childContextForFieldPath(T);if(b instanceof Sm)c.push(T);else{const C=Zd(b,E);C!=null&&(c.push(T),u.set(T,C))}}));const f=new ta(c);return new W2(u,f,i.fieldTransforms)}function DD(s,e,t,a,i,c){const u=s.createContext(1,e,t),f=[tc(e,a,t)],m=[i];if(c.length%2!=0)throw new pt(Ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<c.length;C+=2)f.push(tc(e,c[C])),m.push(c[C+1]);const b=[],T=Ur.empty();for(let C=f.length-1;C>=0;--C)if(!Z2(b,f[C])){const L=f[C];let P=m[C];P=Zn(P);const V=u.childContextForFieldPath(L);if(P instanceof Sm)b.push(L);else{const F=Zd(P,V);F!=null&&(b.push(L),T.set(L,F))}}const E=new ta(b);return new W2(T,E,u.fieldTransforms)}function MD(s,e,t,a=!1){return Zd(t,s.createContext(a?4:3,e))}function Zd(s,e){if(X2(s=Zn(s)))return lv("Unsupported field value:",e,s),Q2(s,e);if(s instanceof iv)return(function(a,i){if(!K2(i.dataSource))throw i.createError(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(i);c&&i.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,i){const c=[];let u=0;for(const f of a){let m=Zd(f,i.childContextForArray(u));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),u++}return{arrayValue:{values:c}}})(s,e)}return(function(a,i){if((a=Zn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return gR(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=vt.fromDate(a);return{timestampValue:Qf(i.serializer,c)}}if(a instanceof vt){const c=new vt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Qf(i.serializer,c)}}if(a instanceof _i)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ba)return{bytesValue:d2(i.serializer,a._byteString)};if(a instanceof ps){const c=i.databaseId,u=a.firestore._databaseId;if(!u.isEqual(c))throw i.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Hy(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof Ua)return(function(u,f){const m=u instanceof Ua?u.toArray():u;return{mapValue:{fields:{[Bw]:{stringValue:zw},[Gf]:{arrayValue:{values:m.map((T=>{if(typeof T!="number")throw f.createError("VectorValues must only contain numeric values.");return By(f.serializer,T)}))}}}}}})(a,i);if(v2(a))return a._toProto(i.serializer);throw i.createError(`Unsupported field value: ${cm(a)}`)})(s,e)}function Q2(s,e){const t={};return Iw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yl(s,((a,i)=>{const c=Zd(i,e.childContextForField(a));c!=null&&(t[a]=c)})),{mapValue:{fields:t}}}function X2(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof vt||s instanceof _i||s instanceof ba||s instanceof ps||s instanceof iv||s instanceof Ua||v2(s))}function lv(s,e,t){if(!X2(t)||!Dw(t)){const a=cm(t);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function tc(s,e,t){if((e=Zn(e))instanceof av)return e._internalPath;if(typeof e=="string")return J2(s,e);throw em("Field path arguments must be of type string or ",s,!1,void 0,t)}const ID=new RegExp("[~\\*/\\[\\]]");function J2(s,e,t){if(e.search(ID)>=0)throw em(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new av(...e.split("."))._internalPath}catch{throw em(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function em(s,e,t,a,i){const c=a&&!a.isEmpty(),u=i!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(c||u)&&(m+=" (found",c&&(m+=` in field ${a}`),u&&(m+=` in document ${i}`),m+=")"),new pt(Ge.INVALID_ARGUMENT,f+s+m)}function Z2(s,e){return s.some((t=>t.isEqual(e)))}class OD{convertValue(e,t="none"){switch(hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ms(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw zt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return yl(e,((i,c)=>{a[i]=this.convertValue(c,t)})),a}convertVectorValue(e){const t=e.fields?.[Gf].arrayValue?.values?.map((a=>ms(a.doubleValue)));return new Ua(t)}convertGeoPoint(e){return new _i(ms(e.latitude),ms(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=hm(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Md(e));default:return null}}convertTimestamp(e){const t=ul(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Gn.fromString(e);Cn(y2(a),9688,{name:e});const i=new Id(a.get(1),a.get(3)),c=new Ct(a.popFirst(5));return i.isEqual(t)||uo(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}class eS extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ps(this.firestore,null,t)}}const Vx="@firebase/firestore",Ux="4.10.0";class tS{constructor(e,t,a,i,c){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ps(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(tc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class PD extends tS{data(){return super.data()}}function LD(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pt(Ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cv{}class nS extends cv{}function _r(s,e,...t){let a=[];e instanceof cv&&a.push(e),a=a.concat(t),(function(c){const u=c.filter((m=>m instanceof uv)).length,f=c.filter((m=>m instanceof Tm)).length;if(u>1||u>0&&f>0)throw new pt(Ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const i of a)s=i._apply(s);return s}class Tm extends nS{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Tm(e,t,a)}_apply(e){const t=this._parse(e);return sS(e._query,t),new ic(e.firestore,e.converter,Fg(e._query,t))}_parse(e){const t=wm(e.firestore);return(function(c,u,f,m,b,T,E){let C;if(b.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new pt(Ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){zx(E,T);const P=[];for(const V of E)P.push(Bx(m,c,V));C={arrayValue:{values:P}}}else C=Bx(m,c,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||zx(E,T),C=MD(f,u,E,T==="in"||T==="not-in");return Es.create(b,T,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ir(s,e,t){const a=e,i=tc("where",s);return Tm._create(i,a,t)}class uv extends cv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uv(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:qa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,c){let u=i;const f=c.getFlattenedFilters();for(const m of f)sS(u,m),u=Fg(u,m)})(e._query,t),new ic(e.firestore,e.converter,Fg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dv extends nS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dv(e,t)}_apply(e){const t=(function(i,c,u){if(i.startAt!==null)throw new pt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new pt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pd(c,u)})(e._query,this._field,this._direction);return new ic(e.firestore,e.converter,lR(e._query,t))}}function VD(s,e="asc"){const t=e,a=tc("orderBy",s);return dv._create(a,t)}function Bx(s,e,t){if(typeof(t=Zn(t))=="string"){if(t==="")throw new pt(Ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yw(e)&&t.indexOf("/")!==-1)throw new pt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Gn.fromString(t));if(!Ct.isDocumentKey(a))throw new pt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return tx(s,new Ct(a))}if(t instanceof ps)return tx(s,t._key);throw new pt(Ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cm(t)}.`)}function zx(s,e){if(!Array.isArray(s)||s.length===0)throw new pt(Ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sS(s,e){const t=(function(i,c){for(const u of i)for(const f of u.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(s.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pt(Ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pt(Ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function rS(s,e,t){let a;return a=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,a}class vd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wl extends tS{constructor(e,t,a,i,c,u){super(e,t,a,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(tc("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pt(Ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wl._jsonSchema={type:Ns("string",Wl._jsonSchemaVersion),bundleSource:Ns("string","DocumentSnapshot"),bundleName:Ns("string"),bundle:Ns("string")};class Af extends Wl{data(e={}){return super.data(e)}}class Zc{constructor(e,t,a,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vd(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Af(this._firestore,this._userDataWriter,a.key,a,new vd(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pt(Ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,c){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((f=>{const m=new Af(i._firestore,i._userDataWriter,f.doc.key,f.doc,new vd(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const m=new Af(i._firestore,i._userDataWriter,f.doc.key,f.doc,new vd(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let b=-1,T=-1;return f.type!==0&&(b=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),T=u.indexOf(f.doc.key)),{type:UD(f.type),doc:m,oldIndex:b,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pt(Ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=My.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],i=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),i.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function UD(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zt(61501,{type:s})}}Zc._jsonSchemaVersion="firestore/querySnapshot/1.0",Zc._jsonSchema={type:Ns("string",Zc._jsonSchemaVersion),bundleSource:Ns("string","QuerySnapshot"),bundleName:Ns("string"),bundle:Ns("string")};function wa(s){s=Fa(s,ps);const e=Fa(s.firestore,oc),t=rv(e);return xD(t,s._key).then((a=>BD(e,s,a)))}function gn(s){s=Fa(s,ic);const e=Fa(s.firestore,oc),t=rv(e),a=new eS(e);return LD(s._query),_D(t,s._query).then((i=>new Zc(e,a,s,i)))}function La(s,e,t){s=Fa(s,ps);const a=Fa(s.firestore,oc),i=rS(s.converter,e,t),c=wm(a);return Em(a,[Y2(c,"setDoc",s._key,i,s.converter!==null,t).toMutation(s._key,_a.none())])}function Ts(s,e,t,...a){s=Fa(s,ps);const i=Fa(s.firestore,oc),c=wm(i);let u;return u=typeof(e=Zn(e))=="string"||e instanceof av?DD(c,"updateDoc",s._key,e,t,a):RD(c,"updateDoc",s._key,e),Em(i,[u.toMutation(s._key,_a.exists(!0))])}function xa(s){return Em(Fa(s.firestore,oc),[new zy(s._key,_a.none())])}function pi(s,e){const t=Fa(s.firestore,oc),a=Mt(s),i=rS(s.converter,e),c=wm(s.firestore);return Em(t,[Y2(c,"addDoc",a._key,i,s.converter!==null,{}).toMutation(a._key,_a.exists(!1))]).then((()=>a))}function Em(s,e){const t=rv(s);return wD(t,e)}function BD(s,e,t){const a=t.docs.get(e._key),i=new eS(s);return new Wl(s,i,e._key,a,new vd(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){wA(sc),Ql(new ll("firestore",((a,{instanceIdentifier:i,options:c})=>{const u=a.getProvider("app").getImmediate(),f=new oc(new EA(a.getProvider("auth-internal")),new kA(u,a.getProvider("app-check-internal")),$A(u,i),u);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),gi(Vx,Ux,e),gi(Vx,Ux,"esm2020")})();var zD="firebase",FD="12.8.0";gi(zD,FD,"app");const aS="firebasestorage.googleapis.com",iS="storageBucket",qD=120*1e3,HD=600*1e3;class zs extends Ti{constructor(e,t,a=0){super(yg(e),`Firebase Storage: ${t} (${yg(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bs;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bs||(Bs={}));function yg(s){return"storage/"+s}function oS(){const s="An unknown error occurred, please check the error payload for server response.";return new zs(Bs.UNKNOWN,s)}function $D(s){return new zs(Bs.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function GD(s){return new zs(Bs.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function WD(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zs(Bs.UNAUTHENTICATED,s)}function KD(){return new zs(Bs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function YD(s){return new zs(Bs.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function QD(){return new zs(Bs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XD(){return new zs(Bs.CANCELED,"User canceled the upload/download.")}function JD(s){return new zs(Bs.INVALID_URL,"Invalid URL '"+s+"'.")}function ZD(s){return new zs(Bs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function e3(){return new zs(Bs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iS+"' property when initializing the app?")}function t3(){return new zs(Bs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Zg(s){return new zs(Bs.INVALID_ARGUMENT,s)}function lS(){return new zs(Bs.APP_DELETED,"The Firebase app was deleted.")}function n3(s){return new zs(Bs.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ld(s){throw new zs(Bs.INTERNAL_ERROR,"Internal error: "+s)}class wr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=wr.makeFromUrl(e,t)}catch{return new wr(e,"")}if(a.path==="")return a;throw ZD(e)}static makeFromUrl(e,t){let a=null;const i="([A-Za-z0-9.\\-_]+)";function c(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+i+u,"i"),m={bucket:1,path:3};function b(K){K.path_=decodeURIComponent(K.path)}const T="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),C="(/([^?#]*).*)?$",L=new RegExp(`^https?://${E}/${T}/b/${i}/o${C}`,"i"),P={bucket:1,path:3},V=t===aS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,F="([^?#]*)",Y=new RegExp(`^https?://${V}/${i}/${F}`,"i"),se=[{regex:f,indices:m,postModify:c},{regex:L,indices:P,postModify:b},{regex:Y,indices:{bucket:1,path:2},postModify:b}];for(let K=0;K<se.length;K++){const fe=se[K],ke=fe.regex.exec(e);if(ke){const q=ke[fe.indices.bucket];let B=ke[fe.indices.path];B||(B=""),a=new wr(q,B),fe.postModify(a);break}}if(a==null)throw JD(e);return a}}class s3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function r3(s,e,t){let a=1,i=null,c=null,u=!1,f=0;function m(){return f===2}let b=!1;function T(...F){b||(b=!0,e.apply(null,F))}function E(F){i=setTimeout(()=>{i=null,s(L,m())},F)}function C(){c&&clearTimeout(c)}function L(F,...Y){if(b){C();return}if(F){C(),T.call(null,F,...Y);return}if(m()||u){C(),T.call(null,F,...Y);return}a<64&&(a*=2);let se;f===1?(f=2,se=0):se=(a+Math.random())*1e3,E(se)}let P=!1;function V(F){P||(P=!0,C(),!b&&(i!==null?(F||(f=2),clearTimeout(i),E(0)):F||(f=1)))}return E(0),c=setTimeout(()=>{u=!0,V(!0)},t),V}function a3(s){s(!1)}function i3(s){return s!==void 0}function o3(s){return typeof s=="object"&&!Array.isArray(s)}function cS(s){return typeof s=="string"||s instanceof String}function ey(s,e,t,a){if(a<e)throw Zg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>t)throw Zg(`Invalid value for '${s}'. Expected ${t} or less.`)}function hv(s,e,t){let a=e;return t==null&&(a=`https://${e}`),`${t}://${a}/v0${s}`}function uS(s){const e=encodeURIComponent;let t="?";for(const a in s)if(s.hasOwnProperty(a)){const i=e(a)+"="+e(s[a]);t=t+i+"&"}return t=t.slice(0,-1),t}var Kl;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Kl||(Kl={}));function l3(s,e){const t=s>=500&&s<600,i=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return t||i||c}class c3{constructor(e,t,a,i,c,u,f,m,b,T,E,C=!0,L=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=i,this.successCodes_=c,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=T,this.connectionFactory_=E,this.retry=C,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,V)=>{this.resolve_=P,this.reject_=V,this.start_()})}start_(){const e=(a,i)=>{if(i){a(!1,new mf(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const u=f=>{const m=f.loaded,b=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,b)};this.progressCallback_!==null&&c.addUploadProgressListener(u),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(u),this.pendingConnection_=null;const f=c.getErrorCode()===Kl.NO_ERROR,m=c.getStatus();if(!f||l3(m,this.additionalRetryCodes_)&&this.retry){const T=c.getErrorCode()===Kl.ABORT;a(!1,new mf(!1,null,T));return}const b=this.successCodes_.indexOf(m)!==-1;a(!0,new mf(b,c))})},t=(a,i)=>{const c=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());i3(m)?c(m):c()}catch(m){u(m)}else if(f!==null){const m=oS();m.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,m)):u(m)}else if(i.canceled){const m=this.appDelete_?lS():XD();u(m)}else{const m=QD();u(m)}};this.canceled_?t(!1,new mf(!1,null,!0)):this.backoffId_=r3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&a3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mf{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function u3(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function d3(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function h3(s,e){e&&(s["X-Firebase-GMPID"]=e)}function f3(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function m3(s,e,t,a,i,c,u=!0,f=!1){const m=uS(s.urlParams),b=s.url+m,T=Object.assign({},s.headers);return h3(T,e),u3(T,t),d3(T,c),f3(T,a),new c3(b,s.method,T,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,i,u,f)}function fv(s){let e;try{e=JSON.parse(s)}catch{return null}return o3(e)?e:null}function p3(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function g3(s,e){const t=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?t:s+"/"+t}function dS(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function y3(s,e){return e}class xr{constructor(e,t,a,i){this.server=e,this.local=t||e,this.writable=!!a,this.xform=i||y3}}let pf=null;function v3(s){return!cS(s)||s.length<2?s:dS(s)}function b3(){if(pf)return pf;const s=[];s.push(new xr("bucket")),s.push(new xr("generation")),s.push(new xr("metageneration")),s.push(new xr("name","fullPath",!0));function e(c,u){return v3(u)}const t=new xr("name");t.xform=e,s.push(t);function a(c,u){return u!==void 0?Number(u):u}const i=new xr("size");return i.xform=a,s.push(i),s.push(new xr("timeCreated")),s.push(new xr("updated")),s.push(new xr("md5Hash",null,!0)),s.push(new xr("cacheControl",null,!0)),s.push(new xr("contentDisposition",null,!0)),s.push(new xr("contentEncoding",null,!0)),s.push(new xr("contentLanguage",null,!0)),s.push(new xr("contentType",null,!0)),s.push(new xr("metadata","customMetadata",!0)),pf=s,pf}function x3(s,e){function t(){const a=s.bucket,i=s.fullPath,c=new wr(a,i);return e._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:t})}function _3(s,e,t){const a={};a.type="file";const i=t.length;for(let c=0;c<i;c++){const u=t[c];a[u.local]=u.xform(a,e[u.server])}return x3(a,s),a}function w3(s,e,t){const a=fv(e);return a===null?null:_3(s,a,t)}function S3(s,e,t,a){const i=fv(e);if(i===null||!cS(i.downloadTokens))return null;const c=i.downloadTokens;if(c.length===0)return null;const u=encodeURIComponent;return c.split(",").map(b=>{const T=s.bucket,E=s.fullPath,C="/b/"+u(T)+"/o/"+u(E),L=hv(C,t,a),P=uS({alt:"media",token:b});return L+P})[0]}const Fx="prefixes",qx="items";function T3(s,e,t){const a={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Fx])for(const i of t[Fx]){const c=i.replace(/\/$/,""),u=s._makeStorageReference(new wr(e,c));a.prefixes.push(u)}if(t[qx])for(const i of t[qx]){const c=s._makeStorageReference(new wr(e,i.name));a.items.push(c)}return a}function E3(s,e,t){const a=fv(t);return a===null?null:T3(s,e,a)}class hS{constructor(e,t,a,i){this.url=e,this.method=t,this.handler=a,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function fS(s){if(!s)throw oS()}function N3(s,e){function t(a,i){const c=E3(s,e,i);return fS(c!==null),c}return t}function j3(s,e){function t(a,i){const c=w3(s,i,e);return fS(c!==null),S3(c,i,s.host,s._protocol)}return t}function mS(s){function e(t,a){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=KD():i=WD():t.getStatus()===402?i=GD(s.bucket):t.getStatus()===403?i=YD(s.path):i=a,i.status=t.getStatus(),i.serverResponse=a.serverResponse,i}return e}function k3(s){const e=mS(s);function t(a,i){let c=e(a,i);return a.getStatus()===404&&(c=$D(s.path)),c.serverResponse=i.serverResponse,c}return t}function C3(s,e,t,a,i){const c={};e.isRoot?c.prefix="":c.prefix=e.path+"/",t.length>0&&(c.delimiter=t),a&&(c.pageToken=a),i&&(c.maxResults=i);const u=e.bucketOnlyServerUrl(),f=hv(u,s.host,s._protocol),m="GET",b=s.maxOperationRetryTime,T=new hS(f,m,N3(s,e.bucket),b);return T.urlParams=c,T.errorHandler=mS(e),T}function A3(s,e,t){const a=e.fullServerUrl(),i=hv(a,s.host,s._protocol),c="GET",u=s.maxOperationRetryTime,f=new hS(i,c,j3(s,t),u);return f.errorHandler=k3(e),f}class R3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,a,i,c){if(this.sent_)throw ld("cannot .send() more than once");if(pl(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const u in c)c.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,c[u].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ld("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ld("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ld("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ld("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class D3 extends R3{initXhr(){this.xhr_.responseType="text"}}function pS(){return new D3}class nc{constructor(e,t){this._service=e,t instanceof wr?this._location=t:this._location=wr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new nc(e,t)}get root(){const e=new wr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dS(this._location.path)}get storage(){return this._service}get parent(){const e=p3(this._location.path);if(e===null)return null;const t=new wr(this._location.bucket,e);return new nc(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw n3(e)}}function M3(s){const e={prefixes:[],items:[]};return gS(s,e).then(()=>e)}async function gS(s,e,t){const i=await I3(s,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await gS(s,e,i.nextPageToken)}function I3(s,e){e!=null&&typeof e.maxResults=="number"&&ey("options.maxResults",1,1e3,e.maxResults);const t=e||{},a=C3(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(a,pS)}function O3(s){s._throwIfRoot("getDownloadURL");const e=A3(s.storage,s._location,b3());return s.storage.makeRequestWithTokens(e,pS).then(t=>{if(t===null)throw t3();return t})}function P3(s,e){const t=g3(s._location.path,e),a=new wr(s._location.bucket,t);return new nc(s.storage,a)}function L3(s){return/^[A-Za-z]+:\/\//.test(s)}function V3(s,e){return new nc(s,e)}function yS(s,e){if(s instanceof mv){const t=s;if(t._bucket==null)throw e3();const a=new nc(t,t._bucket);return e!=null?yS(a,e):a}else return e!==void 0?P3(s,e):s}function U3(s,e){if(e&&L3(e)){if(s instanceof mv)return V3(s,e);throw Zg("To use ref(service, url), the first argument must be a Storage instance.")}else return yS(s,e)}function Hx(s,e){const t=e?.[iS];return t==null?null:wr.makeFromBucketSpec(t,s)}function B3(s,e,t,a={}){s.host=`${e}:${t}`;const i=pl(e);i&&(gy(`https://${s.host}/b`),yy("Storage",!0)),s._isUsingEmulator=!0,s._protocol=i?"https":"http";const{mockUserToken:c}=a;c&&(s._overrideAuthToken=typeof c=="string"?c:P_(c,s.app.options.projectId))}class mv{constructor(e,t,a,i,c,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=i,this._firebaseVersion=c,this._isUsingEmulator=u,this._bucket=null,this._host=aS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qD,this._maxUploadRetryTime=HD,this._requests=new Set,i!=null?this._bucket=wr.makeFromBucketSpec(i,this._host):this._bucket=Hx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wr.makeFromBucketSpec(this._url,e):this._bucket=Hx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ey("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ey("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ea(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nc(this,e)}_makeRequest(e,t,a,i,c=!0){if(this._deleted)return new s3(lS());{const u=m3(e,this._appId,a,i,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,i).getPromise()}}const $x="@firebase/storage",Gx="0.14.0";const vS="storage";function Wx(s){return s=Zn(s),M3(s)}function bS(s){return s=Zn(s),O3(s)}function ty(s,e){return s=Zn(s),U3(s,e)}function z3(s=_y(),e){s=Zn(s);const a=am(s,vS).getImmediate({identifier:e}),i=M_("storage");return i&&F3(a,...i),a}function F3(s,e,t,a={}){B3(s,e,t,a)}function q3(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),i=s.getProvider("app-check-internal");return new mv(t,a,i,e,sc)}function H3(){Ql(new ll(vS,q3,"PUBLIC").setMultipleInstances(!0)),gi($x,Gx,""),gi($x,Gx,"esm2020")}H3();const xS={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},pv=xy(xS),cd=ww(pv),rt=ND(pv),ny=z3(pv),$3=xy(xS,"secondary"),tm=ww($3),G3="EYdciKDOi3UYBLk1u8hHams5tmO2",_S=I.createContext();function lr(){return I.useContext(_S)}function W3({children:s}){const[e,t]=I.useState(null),[a,i]=I.useState(!1),[c,u]=I.useState(!1),[f,m]=I.useState(null),[b,T]=I.useState(!0);I.useEffect(()=>dC(cd,async F=>{if(t(F),F)if(F.uid===G3)i(!0),u(!1),m(null);else{i(!1);try{const Y=_r(Ht(rt,"clients"),ir("uid","==",F.uid)),W=await gn(Y);if(W.empty)u(!1),m(null);else{const se=W.docs[0];u(!0),m({id:se.id,...se.data()})}}catch(Y){console.error("Error fetching client data:",Y),u(!1),m(null)}}else i(!1),u(!1),m(null);T(!1)}),[]);const P={currentUser:e,isAdmin:a,isClient:c,clientData:f,login:async(V,F,Y=!0)=>(await lC(cd,Y?mw:Cy),await oC(cd,V,F)),logout:()=>ky(cd),resetPassword:V=>iC(cd,V),loading:b};return o.jsx(_S.Provider,{value:P,children:s})}const wS=I.createContext();function go(){return I.useContext(wS)}function K3({children:s}){const[e,t]=I.useState(()=>{const c=localStorage.getItem("theme");return c?c==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});I.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]);const i={isDark:e,toggleTheme:()=>t(!e)};return o.jsx(wS.Provider,{value:i,children:s})}function Y3(){const[s,e]=I.useState(""),[t,a]=I.useState(""),[i,c]=I.useState(!0),[u,f]=I.useState(""),[m,b]=I.useState(!1),[T,E]=I.useState(!1),[C,L]=I.useState(!1),{login:P,resetPassword:V,currentUser:F,isAdmin:Y,isClient:W,clientData:se,loading:K}=lr(),fe=Ms();if(I.useEffect(()=>{if(!K&&F){if(Y)fe("/dashboard");else if(W){const B=se?.clientType;fe(B==="core_buddy"?"/client/core-buddy":B==="circuit_vip"||B==="circuit_dropin"?"/client/circuit":"/client")}}},[K,F,Y,W,se,fe]),K)return o.jsx("div",{className:"login-container",children:o.jsx("div",{className:"login-loading",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"loading-logo"})})});const ke=async B=>{B.preventDefault(),f(""),b(!0);try{await P(s,t,i)}catch(H){f(H.message||"Failed to log in"),b(!1)}},q=async B=>{if(B.preventDefault(),f(""),!s.trim()){f("Please enter your email address");return}b(!0);try{await V(s.trim()),L(!0)}catch(H){H.code==="auth/user-not-found"?f("No account found with this email"):f(H.message||"Failed to send reset email")}b(!1)};return o.jsx("div",{className:"login-container",children:o.jsxs("div",{className:"login-card",children:[o.jsxs("div",{className:"login-header",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"login-logo"}),o.jsx("p",{children:T?"Reset Password":"Client Portal"})]}),u&&o.jsx("div",{className:"error-message",children:u}),C?o.jsxs("div",{className:"reset-sent",children:[o.jsx("div",{className:"reset-sent-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsx("p",{children:"Reset email sent!"}),o.jsx("span",{children:"Check your inbox for a password reset link"}),o.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{E(!1),L(!1),f("")},children:"Back to Log In"})]}):T?o.jsxs("form",{onSubmit:q,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",id:"email",value:s,onChange:B=>e(B.target.value),placeholder:"Enter your email",required:!0})]}),o.jsx("button",{type:"submit",className:"login-btn",disabled:m,children:m?"Sending...":"Send Reset Link"}),o.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!1),f("")},children:"Back to Log In"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("form",{onSubmit:ke,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",id:"email",value:s,onChange:B=>e(B.target.value),required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Password"}),o.jsx("input",{type:"password",id:"password",value:t,onChange:B=>a(B.target.value),required:!0})]}),o.jsx("div",{className:"remember-me",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:i,onChange:B=>c(B.target.checked)}),o.jsx("span",{children:"Remember me"})]})}),o.jsx("button",{type:"submit",className:"login-btn",disabled:m,children:m?"Logging in...":"Log In"})]}),o.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!0),f("")},children:"Forgot password?"})]}),o.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Q3(){const[s,e]=I.useState([]),[t,a]=I.useState([]),[i,c]=I.useState(!0),[u,f]=I.useState(null),[m,b]=I.useState({}),[T,E]=I.useState(null),[C,L]=I.useState(""),[P,V]=I.useState("all"),[F,Y]=I.useState(null),[W,se]=I.useState({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""}),[K,fe]=I.useState([]),[ke,q]=I.useState(!1),[B,H]=I.useState(!1),[J,$]=I.useState("list");I.useEffect(()=>{Z()},[]);const Z=async()=>{try{const[ae,Je]=await Promise.all([gn(_r(Ht(rt,"clients"),VD("createdAt","desc"))),gn(Ht(rt,"sessions"))]),ge=ae.docs.map(xe=>({id:xe.id,...xe.data()})),be=Je.docs.map(xe=>({id:xe.id,...xe.data()}));e(ge),a(be)}catch(ae){console.error("Error fetching data:",ae)}c(!1)},O=ae=>{const Je=new Date,ge=Je.getFullYear(),be=(Je.getMonth()+1).toString().padStart(2,"0"),xe=Je.getDate().toString().padStart(2,"0"),nt=`${ge}-${be}-${xe}`,ct=`${Je.getHours().toString().padStart(2,"0")}:${Je.getMinutes().toString().padStart(2,"0")}`;return t.filter(We=>We.clientId!==ae?!1:We.date<nt||We.date===nt&&We.time<ct).length},Ce=ae=>{const Je=O(ae.id);return(ae.totalSessions||0)-Je},Oe=ae=>{const Je=new Date,ge=Je.getFullYear(),be=(Je.getMonth()+1).toString().padStart(2,"0"),xe=Je.getDate().toString().padStart(2,"0"),nt=`${ge}-${be}-${xe}`,ct=`${Je.getHours().toString().padStart(2,"0")}:${Je.getMinutes().toString().padStart(2,"0")}`;return t.filter(We=>We.clientId!==ae?!1:We.date>nt||We.date===nt&&We.time>=ct).length},ee=ae=>ae?(ae.toDate?ae.toDate():new Date(ae)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",_e=async(ae,Je)=>{if(window.confirm(`Are you sure you want to delete ${Je}? This will also delete all their booked sessions.`))try{const be=t.filter(xe=>xe.clientId===ae).map(xe=>xa(Mt(rt,"sessions",xe.id)));await Promise.all(be),await xa(Mt(rt,"clients",ae)),e(s.filter(xe=>xe.id!==ae)),a(t.filter(xe=>xe.clientId!==ae))}catch(ge){console.error("Error deleting client:",ge),alert("Failed to delete client")}},Be=ae=>{if(!ae)return"";const Je=ae.toDate?ae.toDate():new Date(ae),ge=Je.getFullYear(),be=(Je.getMonth()+1).toString().padStart(2,"0"),xe=Je.getDate().toString().padStart(2,"0");return`${ge}-${be}-${xe}`},De=ae=>{f(ae.id),b({name:ae.name,email:ae.email,password:"",clientType:ae.clientType||"block",weeksInBlock:ae.weeksInBlock||"",totalSessions:ae.totalSessions||"",sessionsRemaining:ae.sessionsRemaining,sessionDuration:ae.sessionDuration||45,startDate:Be(ae.startDate),endDate:Be(ae.endDate),status:ae.status,hasPortalAccess:!!ae.uid,circuitAccess:!!ae.circuitAccess,coreBuddyAccess:!!ae.coreBuddyAccess})},Xe=ae=>{const{name:Je,value:ge}=ae.target;if(b(be=>({...be,[Je]:ge})),Je==="startDate"||Je==="weeksInBlock"){const be=Je==="startDate"?ge:m.startDate,xe=parseInt(Je==="weeksInBlock"?ge:m.weeksInBlock);if(be&&xe>0){const nt=new Date(be),ct=new Date(nt);ct.setDate(ct.getDate()+xe*7);const We=ct.getFullYear(),_t=(ct.getMonth()+1).toString().padStart(2,"0"),wt=ct.getDate().toString().padStart(2,"0");b(Vt=>({...Vt,[Je]:ge,endDate:`${We}-${_t}-${wt}`}))}}},Q=async ae=>{try{const Je=s.find(nt=>nt.id===ae);let ge=Je?.uid;if(m.password&&m.password.length>=6&&!Je?.uid)try{const nt=await dw(tm,m.email.trim().toLowerCase(),m.password);await ky(tm),ge=nt.user.uid}catch(nt){if(console.error("Error creating auth account:",nt),nt.code==="auth/email-already-in-use")alert("This email already has a portal account. Password not changed.");else if(nt.code==="auth/weak-password"){alert("Password must be at least 6 characters.");return}else{alert("Failed to create portal account: "+nt.message);return}}const be=m.clientType==="block",xe={name:m.name.trim(),email:m.email.trim().toLowerCase(),clientType:m.clientType,status:m.status,coreBuddyAccess:m.coreBuddyAccess};if(be)xe.weeksInBlock=parseInt(m.weeksInBlock)||0,xe.totalSessions=parseInt(m.totalSessions)||0,xe.sessionDuration=parseInt(m.sessionDuration),xe.circuitAccess=m.circuitAccess,m.startDate&&(xe.startDate=vt.fromDate(new Date(m.startDate))),m.endDate&&(xe.endDate=vt.fromDate(new Date(m.endDate)));else{const nt=s.find(ct=>ct.id===ae);nt?.circuitStrikes===void 0&&(xe.circuitStrikes=0),nt?.circuitBanUntil===void 0&&(xe.circuitBanUntil=null)}ge&&!Je?.uid&&(xe.uid=ge),await Ts(Mt(rt,"clients",ae),xe),e(s.map(nt=>nt.id===ae?{...nt,...m,uid:ge||nt.uid,weeksInBlock:parseInt(m.weeksInBlock),totalSessions:parseInt(m.totalSessions),sessionDuration:parseInt(m.sessionDuration),startDate:vt.fromDate(new Date(m.startDate)),endDate:vt.fromDate(new Date(m.endDate))}:nt)),f(null),ge&&!Je?.uid&&alert("Portal access created! Client can now log in.")}catch(Je){console.error("Error updating client:",Je),alert("Failed to update client")}},de=async ae=>{try{const Je=s.find(ge=>ge.id===ae)?.status==="archived"?"active":"archived";await Ts(Mt(rt,"clients",ae),{status:Je}),e(s.map(ge=>ge.id===ae?{...ge,status:Je}:ge))}catch(Je){console.error("Error archiving client:",Je),alert("Failed to update client status")}},ze=async ae=>{Y({clientId:ae.id,clientName:ae.name}),$("list"),se({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""}),q(!0);try{const Je=_r(Ht(rt,"sessionNotes"),ir("clientId","==",ae.id)),be=(await gn(Je)).docs.map(xe=>({id:xe.id,...xe.data()}));be.sort((xe,nt)=>{const ct=xe.createdAt?.toMillis?.()||0;return(nt.createdAt?.toMillis?.()||0)-ct}),fe(be)}catch(Je){console.error("Error fetching notes:",Je),fe([])}q(!1)},Pe=()=>{Y(null),fe([]),$("list")},he=async()=>{if(!F)return;const{sessionNotes:ae,whatWentWell:Je,whatWentWrong:ge,whatsNext:be}=W;if(!(!ae.trim()&&!Je.trim()&&!ge.trim()&&!be.trim())){H(!0);try{const nt=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});await pi(Ht(rt,"sessionNotes"),{clientId:F.clientId,date:nt,sessionNotes:ae.trim(),whatWentWell:Je.trim(),whatWentWrong:ge.trim(),whatsNext:be.trim(),createdAt:vt.now()}),se({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""});const ct=_r(Ht(rt,"sessionNotes"),ir("clientId","==",F.clientId)),_t=(await gn(ct)).docs.map(wt=>({id:wt.id,...wt.data()}));_t.sort((wt,Vt)=>{const Lt=wt.createdAt?.toMillis?.()||0;return(Vt.createdAt?.toMillis?.()||0)-Lt}),fe(_t),$("list")}catch(xe){console.error("Error saving note:",xe),alert("Failed to save note. Check Firestore rules for sessionNotes collection.")}H(!1)}},Fe=async ae=>{if(window.confirm("Delete this session note?"))try{await xa(Mt(rt,"sessionNotes",ae)),fe(K.filter(Je=>Je.id!==ae))}catch(Je){console.error("Error deleting note:",Je)}};if(i)return o.jsx("div",{className:"client-list-loading",children:"Loading clients..."});if(s.length===0)return o.jsxs("div",{className:"client-list-empty",children:[o.jsx("p",{children:"No clients yet"}),o.jsx("span",{children:"Add your first client to get started"})]});const ue=ae=>ae.clientType==="circuit_vip"?"VIP":ae.clientType==="circuit_dropin"?"Drop-in":ae.clientType==="core_buddy"?"Core Buddy":"Block",ye=s.filter(ae=>ae.name?.toLowerCase().includes(C.toLowerCase())||ae.email?.toLowerCase().includes(C.toLowerCase())),Se=ae=>ae.clientType==="circuit_vip"||ae.clientType==="circuit_dropin",et=ae=>ae.clientType==="core_buddy",Me=ye.filter(ae=>!Se(ae)&&!et(ae)),mt=ye.filter(ae=>Se(ae)),dt=ye.filter(ae=>et(ae)),At=P==="block"?Me:P==="circuit"?mt:P==="core_buddy"?dt:ye,Rt=ae=>{u||E(Je=>Je===ae?null:ae)},jt=ae=>{const Je=T===ae.id,ge=u===ae.id,be=!ae.clientType||ae.clientType==="block";return o.jsxs("div",{className:`client-card ${ae.status==="archived"?"archived":""} ${Je||ge?"expanded":"collapsed"}`,children:[o.jsxs("div",{className:"client-name-row",onClick:()=>Rt(ae.id),children:[o.jsxs("div",{className:"client-name-row-left",children:[o.jsx("span",{className:"client-name-initial",children:ae.name?.charAt(0)?.toUpperCase()}),o.jsxs("div",{className:"client-name-text",children:[o.jsx("h3",{children:ae.name}),o.jsx("span",{className:"client-name-sub",children:be?`${Ce(ae)}/${ae.totalSessions||0} sessions`:ue(ae)})]})]}),o.jsxs("div",{className:"client-name-row-right",children:[(ae.clientType==="circuit_vip"||ae.clientType==="circuit_dropin"||ae.clientType==="core_buddy")&&o.jsx("span",{className:`client-type-badge ${ae.clientType==="circuit_vip"?"vip":ae.clientType==="core_buddy"?"core-buddy":"dropin"}`,children:ue(ae)}),o.jsx("span",{className:`status-dot ${ae.status}`}),o.jsx("svg",{className:`client-chevron ${Je||ge?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M6 9l6 6 6-6"})})]})]}),(Je||ge)&&o.jsx("div",{className:"client-expand-panel",children:ge?o.jsxs("div",{className:"edit-form",children:[o.jsx("div",{className:"edit-type-toggle",children:[{value:"block",label:"Block"},{value:"circuit_vip",label:"VIP"},{value:"circuit_dropin",label:"Drop-in"},{value:"core_buddy",label:"Core Buddy"}].map(xe=>o.jsx("button",{type:"button",className:`edit-type-btn ${m.clientType===xe.value?"active":""}`,onClick:()=>b(nt=>({...nt,clientType:xe.value})),children:xe.label},xe.value))}),o.jsxs("div",{className:"edit-row",children:[o.jsx("input",{type:"text",name:"name",value:m.name,onChange:Xe,placeholder:"Name"}),o.jsx("input",{type:"email",name:"email",value:m.email,onChange:Xe,placeholder:"Email"})]}),m.clientType==="block"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"edit-row",children:[o.jsx("input",{type:"number",name:"weeksInBlock",value:m.weeksInBlock,onChange:Xe,placeholder:"Weeks",min:"1"}),o.jsx("input",{type:"number",name:"totalSessions",value:m.totalSessions,onChange:Xe,placeholder:"Total Sessions",min:"1"}),o.jsxs("select",{name:"sessionDuration",value:m.sessionDuration,onChange:Xe,children:[o.jsx("option",{value:"30",children:"30 min"}),o.jsx("option",{value:"45",children:"45 min"})]})]}),o.jsxs("div",{className:"edit-row",children:[o.jsx("input",{type:"date",name:"startDate",value:m.startDate,onChange:Xe}),o.jsx("input",{type:"date",name:"endDate",value:m.endDate,onChange:Xe})]})]}),o.jsx("div",{className:"edit-row password-row",children:m.hasPortalAccess?o.jsx("div",{className:"portal-status has-access",children:"Has portal access"}):o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"text",name:"password",value:m.password,onChange:Xe,placeholder:"Set portal password (min 6 chars)"}),o.jsx("span",{className:"password-hint",children:"Set password to enable client portal"})]})}),m.clientType==="block"&&o.jsx("div",{className:"edit-row circuit-row",children:o.jsxs("label",{className:"circuit-access-toggle",children:[o.jsx("input",{type:"checkbox",checked:m.circuitAccess,onChange:xe=>b(nt=>({...nt,circuitAccess:xe.target.checked}))}),o.jsx("span",{children:"Circuit Class Access"})]})}),m.clientType!=="core_buddy"&&o.jsx("div",{className:"edit-row circuit-row",children:o.jsxs("label",{className:"circuit-access-toggle",children:[o.jsx("input",{type:"checkbox",checked:m.coreBuddyAccess,onChange:xe=>b(nt=>({...nt,coreBuddyAccess:xe.target.checked}))}),o.jsx("span",{children:"Core Buddy Access"})]})}),o.jsxs("div",{className:"edit-actions",children:[o.jsx("button",{className:"save-edit-btn",onClick:()=>Q(ae.id),children:"Save"}),o.jsx("button",{className:"cancel-edit-btn",onClick:()=>{f(null)},children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"client-expand-info",children:[o.jsx("span",{className:"client-email",children:ae.email}),o.jsx("span",{className:`status-badge ${ae.status}`,children:ae.status})]}),be?o.jsxs("div",{className:"client-details",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Block"}),o.jsxs("span",{className:"detail-value",children:[ae.weeksInBlock," weeks"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Sessions"}),o.jsxs("span",{className:"detail-value",children:[Ce(ae)," / ",ae.totalSessions," remaining"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Booked"}),o.jsxs("span",{className:"detail-value",children:[Oe(ae.id)," sessions"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Duration"}),o.jsxs("span",{className:"detail-value",children:[ae.sessionDuration||45," min"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Start"}),o.jsx("span",{className:"detail-value",children:ee(ae.startDate)})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"End"}),o.jsx("span",{className:"detail-value",children:ee(ae.endDate)})]})]}):o.jsxs("div",{className:"client-details circuit-details",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Type"}),o.jsx("span",{className:"detail-value",children:ae.clientType==="circuit_vip"?"Monthly VIP":"Drop-in"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Strikes"}),o.jsxs("span",{className:"detail-value",children:[ae.circuitStrikes||0,"/3"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Joined"}),o.jsx("span",{className:"detail-value",children:ee(ae.createdAt)})]})]}),o.jsxs("div",{className:"client-actions",children:[be&&o.jsxs("button",{className:"action-btn notes",onClick:xe=>{xe.stopPropagation(),ze(ae)},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[o.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Notes"]}),o.jsx("button",{className:"action-btn edit",onClick:xe=>{xe.stopPropagation(),De(ae)},children:"Edit"}),o.jsx("button",{className:"action-btn archive",onClick:xe=>{xe.stopPropagation(),de(ae.id)},children:ae.status==="archived"?"Reactivate":"Archive"}),o.jsx("button",{className:"action-btn delete",onClick:xe=>{xe.stopPropagation(),_e(ae.id,ae.name)},children:"Delete"})]})]})})]},ae.id)};return o.jsxs("div",{className:"client-list",children:[o.jsxs("div",{className:"client-search",children:[o.jsxs("svg",{className:"client-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("path",{d:"M21 21l-4.35-4.35"})]}),o.jsx("input",{type:"text",placeholder:"Search clients...",value:C,onChange:ae=>L(ae.target.value),className:"client-search-input"}),C&&o.jsx("button",{className:"client-search-clear",onClick:()=>L(""),children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),o.jsx("div",{className:"client-type-filter",children:[{value:"all",label:"All",count:ye.length},{value:"block",label:"Block",count:Me.length},{value:"circuit",label:"Circuit",count:mt.length},{value:"core_buddy",label:"Core Buddy",count:dt.length}].map(ae=>o.jsxs("button",{className:`client-filter-btn ${P===ae.value?"active":""}`,onClick:()=>V(ae.value),children:[ae.label,o.jsx("span",{className:"client-filter-count",children:ae.count})]},ae.value))}),P==="all"?o.jsxs(o.Fragment,{children:[Me.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"client-section-header",children:["Block Members ",o.jsx("span",{children:Me.length})]}),Me.map(jt)]}),mt.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"client-section-header",children:["Circuit Members ",o.jsx("span",{children:mt.length})]}),mt.map(jt)]})]}):o.jsxs(o.Fragment,{children:[At.length===0&&o.jsxs("div",{className:"client-section-empty",children:["No ",P," clients found"]}),At.map(jt)]}),F&&o.jsx("div",{className:"notes-modal-overlay",onClick:Pe,children:o.jsxs("div",{className:"notes-modal",onClick:ae=>ae.stopPropagation(),children:[o.jsxs("div",{className:"notes-modal-header",children:[o.jsxs("h3",{children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",children:[o.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),F.clientName]}),o.jsx("button",{className:"notes-modal-close",onClick:Pe,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),J==="list"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"notes-modal-body",children:ke?o.jsx("div",{className:"notes-loading",children:"Loading notes..."}):K.length===0?o.jsxs("div",{className:"notes-empty",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",width:"40",height:"40",children:[o.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"})]}),o.jsx("p",{children:"No session notes yet"}),o.jsx("span",{children:"Add notes after each session"})]}):o.jsx("div",{className:"notes-list",children:K.map(ae=>o.jsxs("div",{className:"note-card",children:[o.jsxs("div",{className:"note-card-header",children:[o.jsx("span",{className:"note-date",children:ae.date}),o.jsx("button",{className:"note-delete-btn",onClick:()=>Fe(ae.id),children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[o.jsx("polyline",{points:"3 6 5 6 21 6"}),o.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]})})]}),ae.sessionNotes&&o.jsxs("div",{className:"note-section",children:[o.jsx("span",{className:"note-section-label",children:"Session Notes"}),o.jsx("p",{children:ae.sessionNotes})]}),ae.whatWentWell&&o.jsxs("div",{className:"note-section went-well",children:[o.jsx("span",{className:"note-section-label",children:"What Went Well"}),o.jsx("p",{children:ae.whatWentWell})]}),ae.whatWentWrong&&o.jsxs("div",{className:"note-section went-wrong",children:[o.jsx("span",{className:"note-section-label",children:"What Went Wrong"}),o.jsx("p",{children:ae.whatWentWrong})]}),ae.whatsNext&&o.jsxs("div",{className:"note-section whats-next",children:[o.jsx("span",{className:"note-section-label",children:"What's Next"}),o.jsx("p",{children:ae.whatsNext})]})]},ae.id))})}),o.jsx("div",{className:"notes-modal-footer",children:o.jsxs("button",{className:"notes-add-btn",onClick:()=>$("add"),children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Session Notes"]})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"notes-modal-body",children:o.jsxs("div",{className:"notes-form",children:[o.jsxs("div",{className:"notes-form-group",children:[o.jsx("label",{children:"Session Notes"}),o.jsx("textarea",{value:W.sessionNotes,onChange:ae=>se(Je=>({...Je,sessionNotes:ae.target.value})),placeholder:"Overview of the session...",rows:"3"})]}),o.jsxs("div",{className:"notes-form-group went-well",children:[o.jsxs("label",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"What Went Well"]}),o.jsx("textarea",{value:W.whatWentWell,onChange:ae=>se(Je=>({...Je,whatWentWell:ae.target.value})),placeholder:"Positives from the session...",rows:"2"})]}),o.jsxs("div",{className:"notes-form-group went-wrong",children:[o.jsxs("label",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),"What Went Wrong"]}),o.jsx("textarea",{value:W.whatWentWrong,onChange:ae=>se(Je=>({...Je,whatWentWrong:ae.target.value})),placeholder:"Areas to improve...",rows:"2"})]}),o.jsxs("div",{className:"notes-form-group whats-next",children:[o.jsxs("label",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})}),"What's Next"]}),o.jsx("textarea",{value:W.whatsNext,onChange:ae=>se(Je=>({...Je,whatsNext:ae.target.value})),placeholder:"Goals for next session...",rows:"2"})]})]})}),o.jsxs("div",{className:"notes-modal-footer",children:[o.jsx("button",{className:"notes-cancel-btn",onClick:()=>$("list"),children:"Back"}),o.jsx("button",{className:"notes-save-btn",onClick:he,disabled:B,children:B?"Saving...":"Save Notes"})]})]})]})})]})}const sy={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"12:00",end:"17:00"},defaultBlocked:!0}},Rf=["monday","tuesday","wednesday","thursday","friday"],X3=["Monday","Tuesday","Wednesday","Thursday","Friday"],J3=["Mon","Tue","Wed","Thu","Fri"],Kx=s=>{const[e,t]=s.split(":"),a=parseInt(e),i=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${t}${i}`},Z3=s=>{const e=new Date(s),t=e.getDay(),a=e.getDate()-t+(t===0?-6:1);return e.setDate(a),Rf.map((i,c)=>{const u=new Date(e);return u.setDate(e.getDate()+c),u})},Lr=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${a}`},ry=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},Ed=(s,e)=>{const t=ry(s)+e,a=Math.floor(t/60),i=t%60;return`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},eM=s=>{const e=sy[s];if(!e)return[];const t=[];if(e.morning){let a=e.morning.start;for(;a<e.morning.end;)t.push({time:a,period:"morning"}),a=Ed(a,15)}if(e.afternoon){let a=e.afternoon.start;for(;a<e.afternoon.end;)t.push({time:a,period:"afternoon"}),a=Ed(a,15)}return t};function tM(){const[s,e]=I.useState(new Date),[t,a]=I.useState([]),[i,c]=I.useState([]),[u,f]=I.useState([]),[m,b]=I.useState([]),[T,E]=I.useState([]),[C,L]=I.useState([]),[P,V]=I.useState(null),[F,Y]=I.useState(null),[W,se]=I.useState(!1),[K,fe]=I.useState(!0);I.useEffect(()=>{a(Z3(s))},[s]),I.useEffect(()=>{J()},[]);const ke=ue=>{if(V(ue),se(!1),ue.startDate){const ye=ue.startDate.toDate?ue.startDate.toDate():new Date(ue.startDate);e(ye)}Y(null)},q=ue=>{const ye=new Date,Se=Lr(ye),et=`${ye.getHours().toString().padStart(2,"0")}:${ye.getMinutes().toString().padStart(2,"0")}`;return u.filter(Me=>Me.clientId!==ue?!1:Me.date<Se||Me.date===Se&&Me.time<et).length},B=ue=>{const ye=q(ue.id);return(ue.totalSessions||0)-ye},H=ue=>{const ye=new Date,Se=ye.getFullYear(),et=(ye.getMonth()+1).toString().padStart(2,"0"),Me=ye.getDate().toString().padStart(2,"0"),mt=`${Se}-${et}-${Me}`,dt=`${ye.getHours().toString().padStart(2,"0")}:${ye.getMinutes().toString().padStart(2,"0")}`;return u.filter(At=>At.clientId!==ue?!1:At.date>mt||At.date===mt&&At.time>=dt).length},J=async()=>{try{const ye=(await gn(Ht(rt,"clients"))).docs.map(ae=>({id:ae.id,...ae.data()})).filter(ae=>ae.status==="active");c(ye);const et=(await gn(Ht(rt,"sessions"))).docs.map(ae=>({id:ae.id,...ae.data()}));f(et);const mt=(await gn(Ht(rt,"holidays"))).docs.map(ae=>({id:ae.id,...ae.data()}));b(mt);const At=(await gn(Ht(rt,"blockedTimes"))).docs.map(ae=>({id:ae.id,...ae.data()}));E(At);const jt=(await gn(Ht(rt,"openedSlots"))).docs.map(ae=>({id:ae.id,...ae.data()}));L(jt)}catch(ue){console.error("Error fetching data:",ue)}fe(!1)},$=ue=>{const ye=new Date(s);ye.setDate(ye.getDate()+ue*7),e(ye),Y(null)},Z=()=>{e(new Date),Y(null)},O=ue=>{const ye=Lr(ue);return m.some(Se=>Se.date===ye)},Ce=(ue,ye)=>{const Se=Lr(ue);return T.some(et=>et.date===Se&&et.time===ye)},Oe=(ue,ye)=>{const Se=Lr(ue);return C.some(et=>et.date===Se&&et.time===ye)},ee=ue=>{const ye=Rf[ue.getDay()-1];return ye&&sy[ye]?.defaultBlocked},_e=async(ue,ye)=>{const Se=Lr(ue);if(ee(ue)){const Me=C.find(mt=>mt.date===Se&&mt.time===ye);try{if(Me)await xa(Mt(rt,"openedSlots",Me.id)),L(C.filter(mt=>mt.id!==Me.id));else{const mt=await pi(Ht(rt,"openedSlots"),{date:Se,time:ye,createdAt:vt.now()});L([...C,{id:mt.id,date:Se,time:ye}])}}catch(mt){console.error("Error toggling opened slot:",mt),alert("Failed to update time slot")}return}const et=T.find(Me=>Me.date===Se&&Me.time===ye);try{if(et)await xa(Mt(rt,"blockedTimes",et.id)),E(T.filter(Me=>Me.id!==et.id));else{const Me=await pi(Ht(rt,"blockedTimes"),{date:Se,time:ye,createdAt:vt.now()});E([...T,{id:Me.id,date:Se,time:ye}])}}catch(Me){console.error("Error toggling blocked time:",Me),alert("Failed to update time slot")}},Be=ue=>{const ye=Lr(ue);return u.filter(Se=>Se.date===ye)},De=(ue,ye)=>{const Se=Lr(ue);return u.find(et=>et.date===Se&&et.time===ye)},Xe=(ue,ye,Se)=>{const et=Rf[ue.getDay()-1];if(!et||O(ue))return!1;const Me=sy[et],mt=Math.ceil(Se/15);if(Me.defaultBlocked)for(let be=0;be<mt;be++){const xe=Ed(ye,be*15);if(!Oe(ue,xe))return!1}else for(let be=0;be<mt;be++){const xe=Ed(ye,be*15);if(Ce(ue,xe))return!1}const dt=Lr(ue);if(u.find(be=>be.date===dt&&be.time===ye))return!1;const Rt=Ed(ye,Se),jt=Me.morning&&Rt<=Me.morning.end,ae=Me.afternoon&&Rt<=Me.afternoon.end,Je=Me.morning&&ye>=Me.morning.start&&ye<Me.morning.end,ge=Me.afternoon&&ye>=Me.afternoon.start&&ye<Me.afternoon.end;if(Je&&!jt||ge&&!ae)return!1;for(const be of u){if(be.date!==dt)continue;const xe=ry(be.time),nt=xe+(be.duration||45),ct=ry(ye),We=ct+Se;if(ct<nt&&We>xe)return!1}return!0},Q=async(ue,ye)=>{const Se=De(ue,ye);if(Se){if(window.confirm(`Cancel ${Se.clientName}'s session at ${Kx(ye)}?`))try{await xa(Mt(rt,"sessions",Se.id)),f(u.filter(Me=>Me.id!==Se.id))}catch(Me){console.error("Error cancelling session:",Me),alert("Failed to cancel session")}return}if(!P){alert("Please select a client first");return}if(!Xe(ue,ye,P.sessionDuration||45)){alert("This slot is not available for this client's session duration");return}if(u.filter(Me=>Me.clientId===P.id).length>=P.totalSessions){alert(`${P.name} has already booked all ${P.totalSessions} sessions`);return}try{const Me=Lr(ue),mt={clientId:P.id,clientName:P.name,date:Me,time:ye,duration:P.sessionDuration||45,createdAt:vt.now()},dt=await pi(Ht(rt,"sessions"),mt);f([...u,{id:dt.id,...mt}])}catch(Me){console.error("Error booking session:",Me),alert("Failed to book session")}},de=async()=>{if(!P)return;const ue=P.startDate?.toDate?P.startDate.toDate():new Date(P.startDate),ye=P.endDate?.toDate?P.endDate.toDate():new Date(P.endDate),Se=u.filter(Rt=>Rt.clientId!==P.id?!1:t.some(jt=>Lr(jt)===Rt.date));if(Se.length===0){alert("No sessions in current week to repeat. Book some sessions first, then use this button.");return}const et=P.weeksInBlock||Math.ceil((ye-ue)/(10080*60*1e3)),Me=Se.map(Rt=>({dayOfWeek:new Date(Rt.date).getDay(),time:Rt.time}));let mt=[];const dt=u.filter(Rt=>Rt.clientId===P.id).length;for(let Rt=0;Rt<et;Rt++){const jt=new Date(ue);jt.setDate(jt.getDate()+Rt*7);const ae=new Date(jt),Je=ae.getDay(),ge=ae.getDate()-Je+(Je===0?-6:1);ae.setDate(ge);for(const be of Me){const xe=new Date(ae),nt=be.dayOfWeek===0?6:be.dayOfWeek-1;xe.setDate(ae.getDate()+nt);const ct=Lr(xe);u.some(We=>We.clientId===P.id&&We.date===ct&&We.time===be.time)||xe<ue||xe>ye||m.some(We=>We.date===ct)||mt.push({dateKey:ct,time:be.time,sessionDate:xe})}}const At=dt+mt.length;if(At>P.totalSessions){alert(`This would create ${mt.length} new sessions (${At} total), but client only has ${P.totalSessions} sessions in their package.

You can still book ${P.totalSessions-dt} more sessions.`);return}if(mt.length===0){alert("All weeks already have sessions booked for this pattern.");return}if(window.confirm(`This will create ${mt.length} new sessions across the block.

(${dt} existing + ${mt.length} new = ${At} total)

Continue?`))try{const Rt=[];for(const jt of mt){const ae={clientId:P.id,clientName:P.name,date:jt.dateKey,time:jt.time,duration:P.sessionDuration||45,createdAt:vt.now()},Je=await pi(Ht(rt,"sessions"),ae);Rt.push({id:Je.id,...ae})}f([...u,...Rt]),alert(`Created ${Rt.length} new sessions!`)}catch(Rt){console.error("Error repeating weekly:",Rt),alert("Failed to repeat sessions")}},ze=async ue=>{const ye=Lr(ue),Se=m.find(et=>et.date===ye);try{if(Se)await xa(Mt(rt,"holidays",Se.id)),b(m.filter(et=>et.id!==Se.id));else{const et=await pi(Ht(rt,"holidays"),{date:ye,createdAt:vt.now()});b([...m,{id:et.id,date:ye}])}}catch(et){console.error("Error toggling day availability:",et),alert("Failed to update day availability")}};if(K)return o.jsx("div",{className:"calendar-loading",children:"Loading calendar..."});const Pe=t[0],he=t[4],Fe=Pe&&he?`${Pe.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${he.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return o.jsxs("div",{className:"calendar",children:[o.jsxs("div",{className:"calendar-header",children:[o.jsxs("div",{className:"calendar-nav",children:[o.jsx("button",{onClick:()=>$(-1),children:""}),o.jsx("button",{onClick:Z,children:"Today"}),o.jsx("button",{onClick:()=>$(1),children:""})]}),o.jsx("h3",{children:Fe})]}),o.jsxs("div",{className:"client-selector",children:[o.jsx("span",{className:"selector-label",children:"Booking for:"}),P?o.jsxs("div",{className:"selected-client",children:[o.jsxs("div",{className:"selected-info",children:[o.jsx("strong",{children:P.name}),o.jsxs("span",{children:[P.sessionDuration||45,"min  ",B(P),"/",P.totalSessions," remaining"]}),o.jsxs("span",{className:"booked-info",children:[H(P.id)," booked"]})]}),o.jsx("button",{onClick:()=>V(null),children:"Change"})]}):o.jsx("button",{className:"select-client-btn",onClick:()=>se(!0),children:"Select Client"})]}),P&&o.jsxs("div",{className:"repeat-weekly-section",children:[o.jsx("button",{className:"repeat-weekly-btn",onClick:de,children:"Repeat This Week's Schedule For All Weeks"}),o.jsx("span",{className:"repeat-hint",children:"Copies current week's sessions to all weeks in block"})]}),o.jsx("div",{className:"day-cards",children:t.map((ue,ye)=>{const Se=Be(ue),et=Lr(ue)===Lr(new Date),Me=O(ue);return o.jsxs("div",{className:`day-card ${F===ye?"selected":""} ${et?"today":""} ${Me?"holiday":""}`,onClick:()=>Y(F===ye?null:ye),children:[o.jsxs("div",{className:"day-card-header",children:[o.jsx("span",{className:"day-name",children:J3[ye]}),o.jsx("span",{className:"day-date",children:ue.getDate()})]}),Me?o.jsx("div",{className:"day-card-status holiday",children:"Unavailable"}):o.jsxs("div",{className:"day-card-status",children:[Se.length," session",Se.length!==1?"s":""]})]},ye)})}),F!==null&&t[F]&&o.jsxs("div",{className:"time-panel",children:[o.jsxs("div",{className:"time-panel-header",children:[o.jsxs("h4",{children:[X3[F]," ",t[F].getDate()]}),o.jsx("button",{className:"close-panel",onClick:()=>Y(null),children:""})]}),o.jsx("div",{className:"availability-toggle",children:o.jsx("button",{className:`toggle-availability-btn ${O(t[F])?"unavailable":"available"}`,onClick:()=>ze(t[F]),children:O(t[F])?"Mark Day Available":"Mark Day Unavailable"})}),O(t[F])?o.jsxs("div",{className:"day-unavailable-message",children:[o.jsx("p",{children:"This day is marked as unavailable"}),o.jsx("span",{children:"Tap the button above to make it available again"})]}):o.jsxs("div",{className:"time-slots",children:[ee(t[F])&&o.jsx("div",{className:"default-blocked-notice",children:"Flex day  slots are closed by default. Tap the toggle to open slots."}),eM(Rf[F]).map(({time:ue,period:ye},Se,et)=>{const Me=De(t[F],ue),mt=ee(t[F]),dt=mt?!Oe(t[F],ue):Ce(t[F],ue),At=mt&&Oe(t[F],ue),Rt=P&&Xe(t[F],ue,P.sessionDuration||45),jt=Se===0||et[Se-1]?.period!==ye;return o.jsxs("div",{children:[jt&&o.jsx("div",{className:"period-label",children:ye==="morning"?"Morning":"Afternoon"}),o.jsxs("div",{className:"time-slot-row",children:[o.jsxs("button",{className:`time-slot ${Me?"booked":""} ${dt&&!Me?"blocked":""} ${At&&!Me?"opened":""} ${Rt?"available":""} ${!Me&&!dt&&!Rt&&P?"unavailable":""}`,onClick:()=>(!dt||Me)&&Q(t[F],ue),disabled:dt&&!Me,children:[o.jsx("span",{className:"slot-time",children:Kx(ue)}),Me?o.jsxs("span",{className:"slot-client",children:[Me.clientName," (",Me.duration,"m)"]}):dt?o.jsx("span",{className:"slot-blocked",children:mt?"Closed":"Blocked"}):Rt?o.jsx("span",{className:"slot-available",children:"Available"}):P?o.jsx("span",{className:"slot-unavailable",children:"Unavailable"}):At?o.jsx("span",{className:"slot-available",children:"Open"}):o.jsx("span",{className:"slot-empty",children:"Select client to book"})]}),o.jsx("button",{className:`block-toggle-btn ${mt?At?"is-opened":"":dt?"is-blocked":""}`,onClick:()=>_e(t[F],ue),disabled:!!Me,title:mt?At?"Close this slot":"Open this slot":dt?"Unblock this time":"Block this time",children:mt?At?"":"+":dt?"":""})]})]},ue)})]})]}),W&&o.jsx("div",{className:"modal-overlay",onClick:()=>se(!1),children:o.jsxs("div",{className:"modal-content",onClick:ue=>ue.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:"Select Client"}),o.jsx("button",{className:"close-btn",onClick:()=>se(!1),children:""})]}),o.jsx("div",{className:"client-list-picker",children:i.length===0?o.jsx("p",{className:"no-items",children:"No active clients"}):i.map(ue=>{const ye=ue.startDate?.toDate?ue.startDate.toDate():new Date(ue.startDate),Se=ue.endDate?.toDate?ue.endDate.toDate():new Date(ue.endDate),et=B(ue),Me=H(ue.id);return o.jsxs("button",{className:"client-option",onClick:()=>ke(ue),children:[o.jsx("strong",{children:ue.name}),o.jsxs("span",{children:[ue.sessionDuration||45,"min  ",et,"/",ue.totalSessions," remaining  ",Me," booked"]}),o.jsxs("span",{className:"client-dates",children:[ye.toLocaleDateString("en-GB",{day:"numeric",month:"short"})," - ",Se.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]},ue.id)})})]})})]})}const Yx=s=>{const[e,t]=s.split(":"),a=parseInt(e),i=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${t}${i}`},Ud=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${a}`},SS=s=>s===Ud(new Date),nM=s=>{const e=new Date;return e.setDate(e.getDate()+1),s===Ud(e)},Qx=s=>SS(s)?"Today":nM(s)?"Tomorrow":new Date(s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"}),Xx=s=>{const e=new Date,t=Ud(e),a=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;if(s.date<t)return!0;if(s.date===t){const i=Jx(s.time)+(s.duration||45);return Jx(a)>=i}return!1},Jx=s=>{const[e,t]=s.split(":").map(Number);return e*60+t};function sM(){const[s,e]=I.useState([]),[t,a]=I.useState(!0),[i,c]=I.useState(new Date);I.useEffect(()=>{u();const P=setInterval(()=>{c(new Date)},6e4);return()=>clearInterval(P)},[]);const u=async()=>{try{const V=(await gn(Ht(rt,"sessions"))).docs.map(W=>({id:W.id,...W.data()})),F=Ud(new Date),Y=V.filter(W=>W.date>=F).sort((W,se)=>W.date!==se.date?W.date.localeCompare(se.date):W.time.localeCompare(se.time));e(Y)}catch(P){console.error("Error fetching sessions:",P)}a(!1)},f=async P=>{if(window.confirm(`Cancel ${P.clientName}'s session at ${Yx(P.time)} on ${Qx(P.date)}?`))try{await xa(Mt(rt,"sessions",P.id)),e(s.filter(V=>V.id!==P.id))}catch(V){console.error("Error cancelling session:",V),alert("Failed to cancel session")}};if(t)return o.jsx("div",{className:"schedule-loading",children:"Loading schedule..."});const m=s.reduce((P,V)=>{const F=V.date;return P[F]||(P[F]=[]),P[F].push(V),P},{}),b=Object.keys(m).sort(),T=Ud(new Date),E=m[T]||[],C=E.filter(P=>Xx(P)).length,L=E.length-C;return o.jsxs("div",{className:"schedule",children:[o.jsxs("div",{className:"today-summary",children:[o.jsx("h3",{children:"Today's Sessions"}),o.jsx("div",{className:"today-count",children:E.length===0?o.jsx("span",{className:"no-sessions",children:"No sessions today"}):o.jsxs("div",{className:"today-stats",children:[o.jsxs("span",{className:"completed-count",children:[C," completed"]}),o.jsxs("span",{className:"remaining-count",children:[L," remaining"]})]})})]}),b.length===0?o.jsx("div",{className:"no-upcoming",children:o.jsx("p",{children:"No upcoming sessions booked"})}):o.jsx("div",{className:"sessions-list",children:b.map(P=>o.jsxs("div",{className:`date-group ${SS(P)?"today":""}`,children:[o.jsxs("div",{className:"date-header",children:[o.jsx("span",{className:"date-label",children:Qx(P)}),o.jsxs("span",{className:"date-count",children:[m[P].length," session",m[P].length!==1?"s":""]})]}),o.jsx("div",{className:"date-sessions",children:m[P].map(V=>{const F=Xx(V);return o.jsxs("div",{className:`session-card ${F?"completed":""}`,children:[o.jsx("div",{className:"session-time",children:Yx(V.time)}),o.jsxs("div",{className:"session-details",children:[o.jsx("strong",{children:V.clientName}),o.jsxs("span",{children:[V.duration,"min session"]})]}),F?o.jsx("div",{className:"completed-badge",children:""}):o.jsx("button",{className:"cancel-session-btn",onClick:()=>f(V),children:"Cancel"})]},V.id)})})]},P))})]})}const TS={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"12:00",end:"17:00"},defaultBlocked:!0}},ay=["monday","tuesday","wednesday","thursday","friday"],rM=["Monday","Tuesday","Wednesday","Thursday","Friday"],aM=s=>{const[e,t]=s.split(":"),a=parseInt(e),i=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${t}${i}`},ud=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${a}`},iM=s=>{const e=new Date(s),t=e.getDay(),a=e.getDate()-t+(t===0?-6:1);return e.setDate(a),ay.map((i,c)=>{const u=new Date(e);return u.setDate(e.getDate()+c),u})},iy=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},Nd=(s,e)=>{const t=iy(s)+e,a=Math.floor(t/60),i=t%60;return`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},oM=s=>{const e=TS[s];if(!e)return[];const t=[];if(e.morning){let a=e.morning.start;for(;a<e.morning.end;)t.push({time:a,period:"morning"}),a=Nd(a,15)}if(e.afternoon){let a=e.afternoon.start;for(;a<e.afternoon.end;)t.push({time:a,period:"afternoon"}),a=Nd(a,15)}return t};function lM(){const[s,e]=I.useState(new Date),[t,a]=I.useState([]),[i,c]=I.useState([]),[u,f]=I.useState([]),[m,b]=I.useState([]),[T,E]=I.useState([]),[C,L]=I.useState(!0),[P,V]=I.useState(45);I.useEffect(()=>{a(iM(s))},[s]),I.useEffect(()=>{F()},[]);const F=async()=>{try{const J=(await gn(Ht(rt,"sessions"))).docs.map(Oe=>({id:Oe.id,...Oe.data()}));c(J);const Z=(await gn(Ht(rt,"holidays"))).docs.map(Oe=>({id:Oe.id,...Oe.data()}));f(Z);const O=await gn(Ht(rt,"blockedTimes"));b(O.docs.map(Oe=>({id:Oe.id,...Oe.data()})));const Ce=await gn(Ht(rt,"openedSlots"));E(Ce.docs.map(Oe=>({id:Oe.id,...Oe.data()})))}catch(H){console.error("Error fetching data:",H)}L(!1)},Y=H=>{const J=new Date(s);J.setDate(J.getDate()+H*7),e(J)},W=()=>{e(new Date)},se=H=>{const J=ud(H);return u.some($=>$.date===J)},K=(H,J)=>{const $=ay[H.getDay()-1];if(!$||se(H))return!1;const Z=ud(H),O=TS[$],Ce=Math.ceil(P/15);if(O.defaultBlocked)for(let de=0;de<Ce;de++){const ze=Nd(J,de*15);if(!T.some(Pe=>Pe.date===Z&&Pe.time===ze))return!1}else for(let de=0;de<Ce;de++){const ze=Nd(J,de*15);if(m.some(Pe=>Pe.date===Z&&Pe.time===ze))return!1}const Oe=new Date,ee=ud(Oe);if(Z<ee)return!1;if(Z===ee){const de=`${Oe.getHours().toString().padStart(2,"0")}:${Oe.getMinutes().toString().padStart(2,"0")}`;if(J<de)return!1}const _e=Nd(J,P),Be=O.morning&&J>=O.morning.start&&J<O.morning.end,De=O.afternoon&&J>=O.afternoon.start&&J<O.afternoon.end,Xe=O.morning&&_e<=O.morning.end,Q=O.afternoon&&_e<=O.afternoon.end;if(Be&&!Xe||De&&!Q)return!1;for(const de of i){if(de.date!==Z)continue;const ze=iy(de.time),Pe=ze+(de.duration||45),he=iy(J),Fe=he+P;if(he<Pe&&Fe>ze)return!1}return!0},fe=(H,J)=>{const $=ay[J];return oM($).filter(O=>K(H,O.time))};if(C)return o.jsx("div",{className:"availability-loading",children:"Loading availability..."});const ke=t[0],q=t[4],B=ke&&q?`${ke.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${q.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return o.jsxs("div",{className:"availability",children:[o.jsxs("div",{className:"availability-header",children:[o.jsxs("div",{className:"availability-nav",children:[o.jsx("button",{onClick:()=>Y(-1),children:""}),o.jsx("button",{onClick:W,children:"Today"}),o.jsx("button",{onClick:()=>Y(1),children:""})]}),o.jsx("h3",{children:B}),o.jsxs("div",{className:"duration-selector",children:[o.jsx("label",{children:"Session:"}),o.jsxs("select",{value:P,onChange:H=>V(Number(H.target.value)),children:[o.jsx("option",{value:30,children:"30 min"}),o.jsx("option",{value:45,children:"45 min"}),o.jsx("option",{value:60,children:"60 min"})]})]})]}),o.jsx("div",{className:"availability-grid",children:t.map((H,J)=>{const $=se(H),Z=$?[]:fe(H,J),O=ud(H)===ud(new Date),Ce=H<new Date&&!O;return o.jsxs("div",{className:`day-column ${O?"today":""} ${Ce?"past":""}`,children:[o.jsxs("div",{className:"day-header",children:[o.jsx("span",{className:"day-name",children:rM[J]}),o.jsxs("span",{className:"day-date",children:[H.getDate(),"/",H.getMonth()+1]}),$&&o.jsx("span",{className:"holiday-badge",children:"Holiday"})]}),o.jsx("div",{className:"slots-container",children:$?o.jsx("div",{className:"no-slots",children:"Unavailable"}):Z.length===0?o.jsx("div",{className:"no-slots",children:"Fully booked"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"slots-count",children:[Z.length," slots"]}),o.jsx("div",{className:"slots-list",children:Z.map(Oe=>o.jsx("div",{className:`slot ${Oe.period}`,children:aM(Oe.time)},Oe.time))})]})})]},J)})})]})}const vg=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,Zx=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),e_=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const i=new Date(s);i.setHours(9,45,0,0),s>i&&(t=7)}const a=new Date(s);return a.setDate(s.getDate()+t),a},Df=s=>s==="circuit_vip"?"VIP":s==="circuit_dropin"?"Drop-in":"Block",Mf=s=>s==="circuit_vip"?"vip":s==="circuit_dropin"?"dropin":"block";function cM(){const[s,e]=I.useState(!0),[t,a]=I.useState([]),[i,c]=I.useState([]),[u,f]=I.useState(null),[m,b]=I.useState("upcoming"),[T,E]=I.useState(!1),[C,L]=I.useState(null),[P,V]=I.useState(!1),[F,Y]=I.useState(!1),W=I.useCallback((he,Fe="info")=>{L({message:he,type:Fe}),setTimeout(()=>L(null),4e3)},[]);I.useEffect(()=>{se()},[]);const se=async()=>{try{const Fe=(await gn(Ht(rt,"circuitSessions"))).docs.map(Me=>({id:Me.id,...Me.data()}));Fe.sort((Me,mt)=>mt.date.localeCompare(Me.date)),a(Fe);const ye=(await gn(Ht(rt,"clients"))).docs.map(Me=>({id:Me.id,...Me.data()})).filter(Me=>Me.clientType==="circuit_vip"||Me.clientType==="circuit_dropin"||Me.circuitAccess===!0);c(ye);const Se=vg(e_()),et=Fe.find(Me=>Me.date===Se);et?f(et):Fe.length>0&&f(Fe[0])}catch(he){console.error("Error loading circuit data:",he),W("Failed to load circuit data","error")}e(!1)},K=async he=>{if(!(!u||T)&&window.confirm("Remove this member from the slot?")){E(!0);try{const Fe=[...u.slots],ue=Fe.findIndex(et=>et.slotNumber===he);if(ue===-1){E(!1);return}let ye=[...u.waitlist||[]];if(ye.length>0){const et=ye.shift();Fe[ue]={slotNumber:he,memberId:et.memberId,memberName:et.memberName,memberType:et.memberType,status:"confirmed",bookedAt:vt.now()},W(`Slot given to ${et.memberName} from waitlist`,"success")}else Fe[ue]={slotNumber:he,memberId:null,memberName:null,memberType:null,status:"available"},W("Member removed from slot","success");await Ts(Mt(rt,"circuitSessions",u.id),{slots:Fe,waitlist:ye});const Se={...u,slots:Fe,waitlist:ye};f(Se),a(et=>et.map(Me=>Me.id===Se.id?Se:Me))}catch(Fe){console.error("Error removing from slot:",Fe),W("Failed to remove member","error")}E(!1)}},fe=async(he,Fe)=>{if(!(!u||T)){E(!0);try{const ue=[...u.slots],ye=ue.findIndex(Me=>Me.slotNumber===he&&Me.status==="available");if(ye===-1){W("Slot is not available","error"),E(!1);return}if(ue.some(Me=>Me.memberId===Fe.id)){W(`${Fe.name} already has a slot`,"error"),E(!1);return}ue[ye]={slotNumber:he,memberId:Fe.id,memberName:Fe.name,memberType:Fe.clientType||"block",status:"confirmed",bookedAt:vt.now()};const Se=(u.waitlist||[]).filter(Me=>Me.memberId!==Fe.id);await Ts(Mt(rt,"circuitSessions",u.id),{slots:ue,waitlist:Se});const et={...u,slots:ue,waitlist:Se};f(et),a(Me=>Me.map(mt=>mt.id===et.id?et:mt)),W(`${Fe.name} added to slot ${he}`,"success")}catch(ue){console.error("Error adding to slot:",ue),W("Failed to add member","error")}E(!1)}},ke=async he=>{if(!(!u||T)){E(!0);try{const Fe=(u.waitlist||[]).filter(ye=>ye.memberId!==he);await Ts(Mt(rt,"circuitSessions",u.id),{waitlist:Fe});const ue={...u,waitlist:Fe};f(ue),a(ye=>ye.map(Se=>Se.id===ue.id?ue:Se)),W("Removed from waitlist","success")}catch(Fe){console.error("Error removing from waitlist:",Fe),W("Failed to remove from waitlist","error")}E(!1)}},q=async(he,Fe)=>{if(!(!u||T)){E(!0);try{const ue=[...u.slots],ye=ue.findIndex(et=>et.slotNumber===he);if(ye===-1){E(!1);return}if(ue[ye]={...ue[ye],attended:Fe},await Ts(Mt(rt,"circuitSessions",u.id),{slots:ue}),Fe===!1){const et=ue[ye].memberId;if(et){const Me=Mt(rt,"clients",et),mt=await wa(Me);if(mt.exists()){const At=(mt.data().circuitStrikes||0)+1,Rt={circuitStrikes:At};if(At>=3){const jt=new Date;jt.setMonth(jt.getMonth()+1),Rt.circuitBanUntil=vt.fromDate(jt),Rt.circuitStrikes=0,W(`${ue[ye].memberName} banned for 1 month (3 strikes)`,"error")}else W(`No-show recorded - ${ue[ye].memberName} (${At}/3 strikes)`,"error");await Ts(Me,Rt)}}}else W(`${ue[ye].memberName} marked as attended`,"success");const Se={...u,slots:ue};f(Se),a(et=>et.map(Me=>Me.id===Se.id?Se:Me))}catch(ue){console.error("Error marking attendance:",ue),W("Failed to update attendance","error")}E(!1)}},B=async(he,Fe)=>{if(!T&&window.confirm(`Reset strikes for ${Fe}?`)){E(!0);try{await Ts(Mt(rt,"clients",he),{circuitStrikes:0,circuitBanUntil:null}),c(ue=>ue.map(ye=>ye.id===he?{...ye,circuitStrikes:0,circuitBanUntil:null}:ye)),W(`Strikes reset for ${Fe}`,"success")}catch(ue){console.error("Error resetting strikes:",ue),W("Failed to reset strikes","error")}E(!1)}},H=async(he,Fe)=>{if(!T&&window.confirm(`Lift ban for ${Fe}?`)){E(!0);try{await Ts(Mt(rt,"clients",he),{circuitBanUntil:null,circuitStrikes:0}),c(ue=>ue.map(ye=>ye.id===he?{...ye,circuitBanUntil:null,circuitStrikes:0}:ye)),W(`Ban lifted for ${Fe}`,"success")}catch(ue){console.error("Error lifting ban:",ue),W("Failed to lift ban","error")}E(!1)}};if(s)return o.jsxs("div",{className:"cm-loading",children:[o.jsx("div",{className:"cm-loading-spinner"}),o.jsx("span",{children:"Loading circuit data..."})]});const J=vg(new Date),$=vg(e_()),Z=t.filter(he=>he.date>=J),O=t.filter(he=>he.date<J),Ce=m==="upcoming"?Z:O,Oe=u?u.slots.filter(he=>he.status!=="available").length:0,ee=u?u.slots.filter(he=>he.status==="available").length:0,_e=u?u.date>=J:!1,Be=u?u.slots.filter(he=>he.memberId).map(he=>he.memberId):[],De=u?(u.waitlist||[]).map(he=>he.memberId):[],Xe=i.filter(he=>!Be.includes(he.id)&&!De.includes(he.id)),Q=i.filter(he=>he.clientType==="circuit_vip").length,de=i.filter(he=>he.clientType==="circuit_dropin").length,ze=i.filter(he=>he.circuitAccess&&he.clientType!=="circuit_vip"&&he.clientType!=="circuit_dropin").length,Pe=i.filter(he=>he.circuitBanUntil?(he.circuitBanUntil.toDate?he.circuitBanUntil.toDate():new Date(he.circuitBanUntil))>new Date:!1);return o.jsxs("div",{className:"cm-container",children:[o.jsxs("div",{className:"cm-stats-row",children:[o.jsxs("div",{className:"cm-stat-pill",children:[o.jsx("span",{className:"cm-stat-num",children:Q}),o.jsx("span",{className:"cm-stat-label",children:"VIP"})]}),o.jsxs("div",{className:"cm-stat-pill",children:[o.jsx("span",{className:"cm-stat-num",children:de}),o.jsx("span",{className:"cm-stat-label",children:"Drop-in"})]}),o.jsxs("div",{className:"cm-stat-pill",children:[o.jsx("span",{className:"cm-stat-num",children:ze}),o.jsx("span",{className:"cm-stat-label",children:"Block"})]}),o.jsxs("div",{className:"cm-stat-pill",children:[o.jsx("span",{className:"cm-stat-num",children:t.length}),o.jsx("span",{className:"cm-stat-label",children:"Sessions"})]})]}),o.jsxs("div",{className:"cm-view-toggle",children:[o.jsx("button",{className:`cm-toggle-btn ${P?"":"active"}`,onClick:()=>V(!1),children:"Sessions"}),o.jsx("button",{className:`cm-toggle-btn ${P?"active":""}`,onClick:()=>V(!0),children:"Members"})]}),!P&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"cm-tabs",children:[o.jsxs("button",{className:`cm-tab ${m==="upcoming"?"active":""}`,onClick:()=>b("upcoming"),children:["Upcoming (",Z.length,")"]}),o.jsxs("button",{className:`cm-tab ${m==="past"?"active":""}`,onClick:()=>b("past"),children:["Past (",O.length,")"]})]}),o.jsx("div",{className:"cm-sessions-list",children:Ce.length===0?o.jsx("div",{className:"cm-empty",children:o.jsxs("p",{children:["No ",m," sessions"]})}):Ce.map(he=>{const Fe=he.slots.filter(Se=>Se.status!=="available").length,ue=u?.id===he.id,ye=he.date===$;return o.jsxs("button",{className:`cm-session-btn ${ue?"selected":""} ${ye?"next":""}`,onClick:()=>{f(he),Y(!1)},children:[o.jsxs("div",{className:"cm-session-btn-left",children:[o.jsx("span",{className:"cm-session-date",children:Zx(he.date)}),ye&&o.jsx("span",{className:"cm-next-badge",children:"Next"})]}),o.jsxs("div",{className:"cm-session-btn-right",children:[o.jsxs("span",{className:"cm-session-fill",children:[Fe,"/8"]}),(he.waitlist?.length||0)>0&&o.jsxs("span",{className:"cm-waitlist-count",children:["+",he.waitlist.length," wl"]})]})]},he.id)})}),u&&o.jsxs("div",{className:"cm-detail",children:[o.jsxs("div",{className:"cm-detail-header",children:[o.jsxs("div",{children:[o.jsx("h3",{children:Zx(u.date)}),o.jsxs("p",{children:[u.time," - ",u.endTime,"  ",Oe,"/8 booked  ",ee," available"]})]}),!_e&&o.jsx("button",{className:`cm-attendance-btn ${F?"active":""}`,onClick:()=>Y(!F),children:F?"Done":"Attendance"})]}),o.jsx("div",{className:"cm-slots",children:u.slots.map(he=>{const Fe=he.status==="available";return o.jsxs("div",{className:`cm-slot ${Fe?"empty":"filled"} ${he.attended===!0?"attended":""} ${he.attended===!1?"no-show":""}`,children:[o.jsx("span",{className:"cm-slot-num",children:he.slotNumber}),Fe?o.jsxs("div",{className:"cm-slot-empty",children:[o.jsx("span",{children:"Available"}),_e&&o.jsx(uM,{members:Xe,onSelect:ue=>fe(he.slotNumber,ue),disabled:T})]}):o.jsxs("div",{className:"cm-slot-filled",children:[o.jsxs("div",{className:"cm-slot-info",children:[o.jsx("span",{className:"cm-slot-name",children:he.memberName}),o.jsx("span",{className:`cm-type-badge ${Mf(he.memberType)}`,children:Df(he.memberType)})]}),o.jsxs("div",{className:"cm-slot-actions",children:[F&&he.attended===void 0&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"cm-attend-yes",onClick:()=>q(he.slotNumber,!0),disabled:T,title:"Attended",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:o.jsx("path",{d:"M5 13l4 4L19 7"})})}),o.jsx("button",{className:"cm-attend-no",onClick:()=>q(he.slotNumber,!1),disabled:T,title:"No-show",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:o.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),he.attended===!0&&o.jsx("span",{className:"cm-attended-label",children:"Attended"}),he.attended===!1&&o.jsx("span",{className:"cm-noshow-label",children:"No-show"}),_e&&o.jsx("button",{className:"cm-remove-btn",onClick:()=>K(he.slotNumber),disabled:T,title:"Remove from slot",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]})]},he.slotNumber)})}),(u.waitlist?.length||0)>0&&o.jsxs("div",{className:"cm-waitlist",children:[o.jsxs("h4",{children:["Waitlist (",u.waitlist.length,")"]}),u.waitlist.map((he,Fe)=>o.jsxs("div",{className:"cm-waitlist-row",children:[o.jsxs("span",{className:"cm-wl-pos",children:["#",Fe+1]}),o.jsx("span",{className:"cm-wl-name",children:he.memberName}),o.jsx("span",{className:`cm-type-badge ${Mf(he.memberType)}`,children:Df(he.memberType)}),_e&&o.jsx("button",{className:"cm-wl-remove",onClick:()=>ke(he.memberId),disabled:T,children:"Remove"})]},he.memberId))]})]})]}),P&&o.jsxs("div",{className:"cm-members",children:[Pe.length>0&&o.jsxs("div",{className:"cm-ban-alert",children:[o.jsxs("h4",{children:["Currently Banned (",Pe.length,")"]}),Pe.map(he=>{const Fe=he.circuitBanUntil?.toDate?he.circuitBanUntil.toDate():new Date(he.circuitBanUntil);return o.jsxs("div",{className:"cm-ban-row",children:[o.jsxs("div",{className:"cm-ban-info",children:[o.jsx("span",{className:"cm-ban-name",children:he.name}),o.jsxs("span",{className:"cm-ban-until",children:["Until ",Fe.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),o.jsx("button",{className:"cm-lift-ban-btn",onClick:()=>H(he.id,he.name),disabled:T,children:"Lift Ban"})]},he.id)})]}),o.jsx("div",{className:"cm-members-list",children:i.length===0?o.jsxs("div",{className:"cm-empty",children:[o.jsx("p",{children:"No circuit members yet"}),o.jsx("span",{children:"Add members via the Clients page"})]}):i.map(he=>{const Fe=he.circuitStrikes||0,ue=Pe.some(ye=>ye.id===he.id);return o.jsxs("div",{className:`cm-member-card ${ue?"banned":""}`,children:[o.jsxs("div",{className:"cm-member-top",children:[o.jsx("span",{className:"cm-member-name",children:he.name}),o.jsx("span",{className:`cm-type-badge ${Mf(he.clientType)}`,children:Df(he.clientType)})]}),o.jsxs("div",{className:"cm-member-bottom",children:[o.jsxs("div",{className:"cm-strikes",children:[[0,1,2].map(ye=>o.jsx("span",{className:`cm-strike-dot ${ye<Fe?"active":""}`},ye)),o.jsxs("span",{className:"cm-strike-text",children:[Fe,"/3 strikes"]})]}),o.jsxs("div",{className:"cm-member-actions",children:[ue&&o.jsx("button",{className:"cm-small-btn ban",onClick:()=>H(he.id,he.name),disabled:T,children:"Lift Ban"}),Fe>0&&!ue&&o.jsx("button",{className:"cm-small-btn reset",onClick:()=>B(he.id,he.name),disabled:T,children:"Reset"})]})]})]},he.id)})})]}),C&&o.jsx("div",{className:`cm-toast ${C.type}`,children:o.jsx("span",{children:C.message})})]})}function uM({members:s,onSelect:e,disabled:t}){const[a,i]=I.useState(!1),[c,u]=I.useState(""),f=s.filter(m=>m.name.toLowerCase().includes(c.toLowerCase()));return s.length===0?null:o.jsxs("div",{className:"cm-add-dropdown",children:[o.jsx("button",{className:"cm-add-trigger",onClick:()=>i(!a),disabled:t,children:"+ Add"}),a&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"cm-dropdown-backdrop",onClick:()=>{i(!1),u("")}}),o.jsxs("div",{className:"cm-dropdown-menu",children:[s.length>4&&o.jsx("input",{type:"text",className:"cm-dropdown-search",placeholder:"Search...",value:c,onChange:m=>u(m.target.value),autoFocus:!0}),o.jsxs("div",{className:"cm-dropdown-list",children:[f.map(m=>o.jsxs("button",{className:"cm-dropdown-item",onClick:()=>{e(m),i(!1),u("")},children:[o.jsx("span",{children:m.name}),o.jsx("span",{className:`cm-type-badge sm ${Mf(m.clientType)}`,children:Df(m.clientType)})]},m.id)),f.length===0&&o.jsx("div",{className:"cm-dropdown-empty",children:"No members found"})]})]})]})]})}function dM(){const[s,e]=I.useState(()=>localStorage.getItem("adminActiveView")||"schedule"),t=ee=>{e(ee),localStorage.setItem("adminActiveView",ee)},[a,i]=I.useState(0),[c,u]=I.useState(!1),[f,m]=I.useState([]),[b,T]=I.useState(null),[E,C]=I.useState(null),{currentUser:L,logout:P,isAdmin:V,loading:F}=lr(),{isDark:Y,toggleTheme:W}=go(),se=Ms(),K=I.useRef(0),fe=I.useRef(!1);I.useRef(null);const ke=I.useCallback((ee,_e="info")=>{C({message:ee,type:_e}),setTimeout(()=>C(null),4e3)},[]);I.useEffect(()=>{!F&&(!L||!V)&&se("/")},[L,V,F,se]),I.useEffect(()=>{L&&V&&q()},[L,V]);const q=async()=>{try{const ee=_r(Ht(rt,"rescheduleRequests"),ir("status","==","pending")),Be=(await gn(ee)).docs.map(De=>({id:De.id,...De.data()}));Be.sort((De,Xe)=>{const Q=De.createdAt?.toDate?De.createdAt.toDate():new Date(0);return(Xe.createdAt?.toDate?Xe.createdAt.toDate():new Date(0))-Q}),m(Be)}catch(ee){console.error("Error fetching reschedule requests:",ee)}};I.useEffect(()=>{(async()=>{if(!(!L||!V))try{const[_e,Be]=await Promise.all([gn(Ht(rt,"clients")),gn(Ht(rt,"sessions"))]),De=new Set(_e.docs.map(Q=>Q.id)),Xe=Be.docs.filter(Q=>!De.has(Q.data().clientId));if(Xe.length>0){console.log(`Cleaning up ${Xe.length} orphaned sessions...`);const Q=Xe.map(de=>xa(Mt(rt,"sessions",de.id)));await Promise.all(Q),console.log("Orphaned sessions cleaned up successfully")}}catch(_e){console.error("Error cleaning up orphaned sessions:",_e)}})()},[L,V]),I.useEffect(()=>{const ee=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,_e=Xe=>{ee()<=0&&(K.current=Xe.touches[0].clientY,fe.current=!1)},Be=Xe=>{const Q=ee(),ze=Xe.touches[0].clientY-K.current;if(Q>5||ze<=0){fe.current=!1,i(0);return}ze>20&&Q<=0&&(fe.current=!0,i(Math.min((ze-20)*.4,80)))},De=()=>{fe.current&&a>60?(u(!0),setTimeout(()=>{window.location.reload()},300)):i(0),fe.current=!1};return document.addEventListener("touchstart",_e,{passive:!0}),document.addEventListener("touchmove",Be,{passive:!0}),document.addEventListener("touchend",De),()=>{document.removeEventListener("touchstart",_e),document.removeEventListener("touchmove",Be),document.removeEventListener("touchend",De)}},[a]);const B=()=>{u(!0),setTimeout(()=>{window.location.reload()},300)},H=async()=>{try{await P(),se("/")}catch(ee){console.error("Failed to log out:",ee)}},J=()=>{se("/add-client")},$=ee=>new Date(ee).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),Z=ee=>{const[_e,Be]=ee.split(":"),De=parseInt(_e),Xe=De>=12?"pm":"am";return`${De>12?De-12:De===0?12:De}:${Be}${Xe}`},O=async ee=>{if(window.confirm(`Approve reschedule for ${ee.clientName}?

From: ${$(ee.originalDate)} at ${Z(ee.originalTime)}
To: ${$(ee.requestedDate)} at ${Z(ee.requestedTime)}`)){T(ee.id);try{await Ts(Mt(rt,"sessions",ee.sessionId),{date:ee.requestedDate,time:ee.requestedTime}),await Ts(Mt(rt,"rescheduleRequests",ee.id),{status:"approved",respondedAt:vt.now()}),m(f.filter(_e=>_e.id!==ee.id)),ke(`Approved reschedule for ${ee.clientName}`,"success")}catch(_e){console.error("Error approving request:",_e),ke("Failed to approve request","error")}T(null)}},Ce=async ee=>{if(window.confirm(`Reject reschedule request from ${ee.clientName}?`)){T(ee.id);try{await Ts(Mt(rt,"rescheduleRequests",ee.id),{status:"rejected",respondedAt:vt.now()}),m(f.filter(_e=>_e.id!==ee.id)),ke(`Request from ${ee.clientName} rejected`,"info")}catch(_e){console.error("Error rejecting request:",_e),ke("Failed to reject request","error")}T(null)}};if(F)return o.jsx("div",{className:"loading",children:"Loading..."});if(!L||!V)return null;const Oe=f.length;return o.jsxs("div",{className:"dashboard",children:[a>0&&o.jsxs("div",{className:"pull-indicator",style:{height:a},children:[o.jsx("div",{className:`pull-spinner ${c?"spinning":""}`,children:c?"":""}),o.jsx("span",{children:c?"Refreshing...":a>60?"Release to refresh":"Pull to refresh"})]}),o.jsxs("header",{className:"dashboard-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"admin-header-logo"}),o.jsx("span",{className:"admin-badge",children:"Admin"})]}),o.jsxs("nav",{className:"header-nav",children:[o.jsx("button",{className:`nav-btn ${s==="schedule"?"active":""}`,onClick:()=>t("schedule"),children:"Today"}),o.jsx("button",{className:`nav-btn ${s==="clients"?"active":""}`,onClick:()=>t("clients"),children:"Clients"}),o.jsx("button",{className:`nav-btn ${s==="calendar"?"active":""}`,onClick:()=>t("calendar"),children:"Calendar"}),o.jsxs("button",{className:`nav-btn ${s==="requests"?"active":""} ${Oe>0?"has-badge":""}`,onClick:()=>t("requests"),children:["Requests",Oe>0&&o.jsx("span",{className:"nav-badge",children:Oe})]}),o.jsx("button",{className:`nav-btn ${s==="availability"?"active":""}`,onClick:()=>t("availability"),children:"Slots"}),o.jsx("button",{className:`nav-btn ${s==="circuits"?"active":""}`,onClick:()=>t("circuits"),children:"Circuits"})]}),o.jsxs("div",{className:"header-actions",children:[o.jsx("button",{className:"theme-toggle-btn",onClick:W,"aria-label":Y?"Switch to light mode":"Switch to dark mode",children:Y?o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),o.jsx("button",{className:"refresh-btn",onClick:B,disabled:c,children:c?"":""}),o.jsx("button",{className:"logout-btn",onClick:H,children:"Log Out"})]})]}),E&&o.jsx("div",{className:"toast-container",children:o.jsxs("div",{className:`toast ${E.type}`,children:[o.jsxs("span",{className:"toast-icon",children:[E.type==="success"&&o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),E.type==="error"&&o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),E.type==="info"&&o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})]}),o.jsx("span",{className:"toast-message",children:E.message})]})}),o.jsxs("main",{className:"dashboard-main",children:[s==="schedule"&&o.jsxs("div",{className:"schedule-view",children:[o.jsx("div",{className:"view-header",children:o.jsx("h2",{children:"Schedule"})}),o.jsx(sM,{})]}),s==="clients"&&o.jsxs("div",{className:"clients-view",children:[o.jsxs("div",{className:"view-header",children:[o.jsx("h2",{children:"Clients"}),o.jsx("button",{className:"add-btn",onClick:J,children:"+ Add Client"})]}),o.jsx(Q3,{})]}),s==="calendar"&&o.jsxs("div",{className:"calendar-view",children:[o.jsx("div",{className:"view-header",children:o.jsx("h2",{children:"Calendar"})}),o.jsx(tM,{})]}),s==="requests"&&o.jsxs("div",{className:"requests-view",children:[o.jsx("div",{className:"view-header",children:o.jsx("h2",{children:"Reschedule Requests"})}),f.length===0?o.jsxs("div",{className:"no-requests",children:[o.jsx("div",{className:"empty-icon",children:o.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"20",y:"25",width:"60",height:"50",rx:"4"}),o.jsx("path",{d:"M20 35 L50 55 L80 35"}),o.jsx("circle",{cx:"50",cy:"70",r:"3",fill:"currentColor"})]})}),o.jsx("p",{children:"No pending requests"}),o.jsx("span",{children:"When clients request to reschedule, they will appear here"})]}):o.jsx("div",{className:"requests-list",children:f.map(ee=>o.jsxs("div",{className:"request-card",children:[o.jsxs("div",{className:"request-header",children:[o.jsx("span",{className:"client-name",children:ee.clientName}),o.jsx("span",{className:"request-time",children:ee.createdAt?.toDate?ee.createdAt.toDate().toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""})]}),o.jsx("div",{className:"request-details",children:o.jsxs("div",{className:"request-change",children:[o.jsxs("div",{className:"from-session",children:[o.jsx("span",{className:"label",children:"From:"}),o.jsxs("span",{className:"value",children:[$(ee.originalDate)," at ",Z(ee.originalTime)]})]}),o.jsx("div",{className:"arrow",children:""}),o.jsxs("div",{className:"to-session",children:[o.jsx("span",{className:"label",children:"To:"}),o.jsxs("span",{className:"value",children:[$(ee.requestedDate)," at ",Z(ee.requestedTime)]})]})]})}),o.jsxs("div",{className:"request-actions",children:[o.jsx("button",{className:"approve-btn",onClick:()=>O(ee),disabled:b===ee.id,children:b===ee.id?"Processing...":"Approve"}),o.jsx("button",{className:"reject-btn",onClick:()=>Ce(ee),disabled:b===ee.id,children:"Reject"})]})]},ee.id))})]}),s==="availability"&&o.jsxs("div",{className:"availability-view",children:[o.jsx("div",{className:"view-header",children:o.jsx("h2",{children:"Available Slots"})}),o.jsx(lM,{})]}),s==="circuits"&&o.jsxs("div",{className:"circuits-view",children:[o.jsx("div",{className:"view-header",children:o.jsx("h2",{children:"Circuit Management"})}),o.jsx(cM,{})]})]})]})}const hM=[{value:"block",label:"Block (1-2-1)"},{value:"circuit_vip",label:"Circuit VIP"},{value:"circuit_dropin",label:"Circuit Drop-in"},{value:"core_buddy",label:"Core Buddy"}];function fM(){const[s,e]=I.useState({name:"",email:"",password:"",clientType:"block",circuitAccess:!1,weeksInBlock:"",numberOfSessions:"",sessionDuration:"45",startDate:"",endDate:""}),[t,a]=I.useState(!1),[i,c]=I.useState(""),{currentUser:u,isAdmin:f,loading:m}=lr(),b=Ms();I.useEffect(()=>{!m&&(!u||!f)&&b("/")},[u,f,m,b]),I.useEffect(()=>{if(s.startDate&&s.weeksInBlock){const P=new Date(s.startDate),V=parseInt(s.weeksInBlock);if(!isNaN(V)&&V>0){const F=new Date(P);F.setDate(F.getDate()+V*7);const Y=F.getFullYear(),W=(F.getMonth()+1).toString().padStart(2,"0"),se=F.getDate().toString().padStart(2,"0");e(K=>({...K,endDate:`${Y}-${W}-${se}`}))}}},[s.startDate,s.weeksInBlock]);const T=P=>{const{name:V,value:F,type:Y,checked:W}=P.target;e(se=>({...se,[V]:Y==="checkbox"?W:F}))},E=async P=>{P.preventDefault(),c(""),a(!0);try{const V=await dw(tm,s.email.trim().toLowerCase(),s.password);await ky(tm);const F=s.clientType==="block",Y={uid:V.user.uid,name:s.name.trim(),email:s.email.trim().toLowerCase(),clientType:s.clientType,status:"active",createdAt:vt.now()};F?(Y.circuitAccess=s.circuitAccess,Y.weeksInBlock=parseInt(s.weeksInBlock),Y.totalSessions=parseInt(s.numberOfSessions),Y.sessionsRemaining=parseInt(s.numberOfSessions),Y.sessionDuration=parseInt(s.sessionDuration),Y.startDate=vt.fromDate(new Date(s.startDate)),Y.endDate=vt.fromDate(new Date(s.endDate))):(Y.circuitStrikes=0,Y.circuitBanUntil=null),await pi(Ht(rt,"clients"),Y),b("/dashboard")}catch(V){console.error("Error adding client:",V),V.code==="auth/email-already-in-use"?c("This email is already registered."):V.code==="auth/weak-password"?c("Password should be at least 6 characters."):c("Failed to add client. Please try again."),a(!1)}},C=()=>{b("/dashboard")};if(m)return o.jsx("div",{className:"loading",children:"Loading..."});if(!u||!f)return null;const L=s.clientType==="block";return o.jsxs("div",{className:"add-client-page",children:[o.jsxs("header",{className:"page-header",children:[o.jsx("button",{className:"back-btn",onClick:C,children:" Back"}),o.jsx("h1",{children:"Add New Client"})]}),o.jsxs("main",{className:"page-content",children:[i&&o.jsx("div",{className:"form-error",children:i}),o.jsxs("form",{onSubmit:E,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Client Type"}),o.jsx("div",{className:"client-type-toggle",children:hM.map(P=>o.jsx("button",{type:"button",className:`type-btn ${s.clientType===P.value?"active":""}`,onClick:()=>e(V=>({...V,clientType:P.value})),children:P.label},P.value))})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"name",children:"Client Name"}),o.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:T,placeholder:"John Smith",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Client Email"}),o.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:T,placeholder:"john@example.com",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Client Portal Password"}),o.jsx("input",{type:"text",id:"password",name:"password",value:s.password,onChange:T,placeholder:"Set a password for client login",minLength:"6",required:!0}),o.jsx("span",{className:"helper-text",children:"Minimum 6 characters. Share this with your client."})]}),L&&o.jsx("div",{className:"form-group",children:o.jsxs("label",{className:"circuit-toggle-label",children:[o.jsx("input",{type:"checkbox",name:"circuitAccess",checked:s.circuitAccess,onChange:T}),o.jsx("span",{children:"Also allow Circuit Class access"})]})}),L&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"weeksInBlock",children:"Weeks in Block"}),o.jsx("input",{type:"number",id:"weeksInBlock",name:"weeksInBlock",value:s.weeksInBlock,onChange:T,placeholder:"8",min:"1",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"numberOfSessions",children:"Number of Sessions"}),o.jsx("input",{type:"number",id:"numberOfSessions",name:"numberOfSessions",value:s.numberOfSessions,onChange:T,placeholder:"16",min:"1",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"sessionDuration",children:"Session Duration"}),o.jsxs("select",{id:"sessionDuration",name:"sessionDuration",value:s.sessionDuration,onChange:T,required:!0,children:[o.jsx("option",{value:"30",children:"30 minutes"}),o.jsx("option",{value:"45",children:"45 minutes"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"startDate",children:"Start Date"}),o.jsx("input",{type:"date",id:"startDate",name:"startDate",value:s.startDate,onChange:T,required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"endDate",children:"End Date (auto-calculated)"}),o.jsx("input",{type:"date",id:"endDate",name:"endDate",value:s.endDate,onChange:T,required:!0}),o.jsx("span",{className:"helper-text",children:"Calculated from start date + weeks"})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"cancel-btn",onClick:C,children:"Cancel"}),o.jsx("button",{type:"submit",className:"submit-btn",disabled:t,children:t?"Saving...":"Save Client"})]})]})]})]})}const ES={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"12:00",end:"17:00"},defaultBlocked:!0}},mM=["monday","tuesday","wednesday","thursday","friday"],to=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${a}`},oy=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},jd=(s,e)=>{const t=oy(s)+e,a=Math.floor(t/60),i=t%60;return`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},pM=s=>{const e=ES[s];if(!e)return[];const t=[];if(e.morning){let a=e.morning.start;for(;a<e.morning.end;)t.push({time:a,period:"morning"}),a=jd(a,15)}if(e.afternoon){let a=e.afternoon.start;for(;a<e.afternoon.end;)t.push({time:a,period:"afternoon"}),a=jd(a,15)}return t},gM=s=>{const e=s.getDay();return e>=1&&e<=5},NS=s=>{const e=s.getDay();return e===0||e===6?null:mM[e-1]},yM=(s,e,t,a,i,c=null,u=[],f=[])=>{const m=NS(s);if(!m)return!1;const b=to(s),T=ES[m];if(i.some(W=>W.date===b))return!1;if(T.defaultBlocked){const W=Math.ceil(t/15);for(let se=0;se<W;se++){const K=jd(e,se*15);if(!f.some(fe=>fe.date===b&&fe.time===K))return!1}}else{const W=Math.ceil(t/15);for(let se=0;se<W;se++){const K=jd(e,se*15);if(u.some(fe=>fe.date===b&&fe.time===K))return!1}}const E=new Date,C=to(E);if(b<C)return!1;if(b===C){const W=`${E.getHours().toString().padStart(2,"0")}:${E.getMinutes().toString().padStart(2,"0")}`;if(e<W)return!1}const L=jd(e,t),P=T.morning&&e>=T.morning.start&&e<T.morning.end,V=T.afternoon&&e>=T.afternoon.start&&e<T.afternoon.end,F=T.morning&&L<=T.morning.end,Y=T.afternoon&&L<=T.afternoon.end;if(P&&!F||V&&!Y||!P&&!V)return!1;for(const W of a){if(c&&W.id===c||W.date!==b)continue;const se=oy(W.time),K=se+(W.duration||45),fe=oy(e),ke=fe+t;if(fe<K&&ke>se)return!1}return!0},vM=(s,e,t,a,i=null,c=[],u=[])=>{const f=NS(s);return f?pM(f).filter(b=>yM(s,b.time,e,t,a,i,c,u)):[]};function bM(){const[s,e]=I.useState([]),[t,a]=I.useState([]),[i,c]=I.useState([]),[u,f]=I.useState([]),[m,b]=I.useState([]),[T,E]=I.useState([]),[C,L]=I.useState(!0),[P,V]=I.useState(null),[F,Y]=I.useState(!1),[W,se]=I.useState(null),[K,fe]=I.useState(null),[ke,q]=I.useState(null),[B,H]=I.useState([]),[J,$]=I.useState(!1),[Z,O]=I.useState([]),[Ce,Oe]=I.useState(null),[ee,_e]=I.useState(!1),[Be,De]=I.useState(0),Xe=I.useRef(null),Q=I.useRef(0),de=I.useRef(!1),[ze,Pe]=I.useState(null),[he,Fe]=I.useState(null),[ue,ye]=I.useState(!1),[Se,et]=I.useState([]),[Me,mt]=I.useState(!1),[dt,At]=I.useState(null),[Rt,jt]=I.useState(null),[ae,Je]=I.useState([]),[ge,be]=I.useState(null),xe=I.useRef(null),{currentUser:nt,isClient:ct,clientData:We,logout:_t,loading:wt}=lr(),{isDark:Vt,toggleTheme:Lt}=go(),nn=Ms(),Kt=I.useCallback((ie,at="info")=>{Oe({message:ie,type:at}),setTimeout(()=>Oe(null),4e3)},[]),rn=ie=>{const at=ie.currentTarget,It=at.querySelector(".ripple");It&&It.remove();const Ft=document.createElement("span"),_n=Math.max(at.clientWidth,at.clientHeight),mn=_n/2,Bn=at.getBoundingClientRect();Ft.style.width=Ft.style.height=`${_n}px`,Ft.style.left=`${ie.clientX-Bn.left-mn}px`,Ft.style.top=`${ie.clientY-Bn.top-mn}px`,Ft.classList.add("ripple"),at.appendChild(Ft),setTimeout(()=>Ft.remove(),600)},Ys=ie=>{Xe.current&&Xe.current.scrollTop===0&&(Q.current=ie.touches[0].clientY,de.current=!0)},Fn=ie=>{if(!de.current||!Xe.current)return;const It=ie.touches[0].clientY-Q.current;It>20&&Xe.current.scrollTop===0&&(ie.preventDefault(),De(Math.min((It-20)*.35,80)))},Le=async()=>{Be>55&&!ee&&(_e(!0),await Ut(),Kt("Refreshed!","success"),_e(!1)),De(0),de.current=!1},tt=(ie,at)=>{const It=ie.touches[0];ie.currentTarget.dataset.startX=It.clientX,ie.currentTarget.dataset.startY=It.clientY},it=(ie,at)=>{const It=ie.touches[0],Ft=parseFloat(ie.currentTarget.dataset.startX),_n=parseFloat(ie.currentTarget.dataset.startY),mn=It.clientX-Ft,Bn=It.clientY-_n;Math.abs(mn)>Math.abs(Bn)&&Math.abs(mn)>10&&(ie.preventDefault(),mn<-50?Pe(at):mn>50&&Pe(null))};I.useEffect(()=>{!wt&&(!nt||!ct)&&nn("/")},[nt,ct,wt,nn]),I.useEffect(()=>{We&&Ut()},[We]),I.useEffect(()=>{if(!C&&We){const ie=setTimeout(()=>mt(!0),300);return()=>clearTimeout(ie)}},[C,We]),I.useEffect(()=>{const ie=()=>{const It=sn();if(It.length===0){At(null);return}const Ft=It[0],_n=new Date,Bn=new Date(Ft.date+"T"+Ft.time)-_n;if(Bn<=0){At(null);return}const ls=Math.floor(Bn/(1e3*60*60*24)),gs=Math.floor(Bn%(1e3*60*60*24)/(1e3*60*60)),ts=Math.floor(Bn%(1e3*60*60)/(1e3*60)),Os=Math.floor(Bn%(1e3*60)/1e3);At({days:ls,hours:gs,minutes:ts,seconds:Os,session:Ft})};ie();const at=setInterval(ie,1e3);return()=>clearInterval(at)},[s,C]);const Ut=async()=>{try{const ie=_r(Ht(rt,"sessions"),ir("clientId","==",We.id)),It=(await gn(ie)).docs.map(Dt=>({id:Dt.id,...Dt.data()}));It.sort((Dt,Sr)=>Dt.date!==Sr.date?Dt.date.localeCompare(Sr.date):Dt.time.localeCompare(Sr.time)),e(It);const Ft=await gn(Ht(rt,"sessions"));a(Ft.docs.map(Dt=>({id:Dt.id,...Dt.data()})));const _n=await gn(Ht(rt,"holidays"));c(_n.docs.map(Dt=>({id:Dt.id,...Dt.data()})));const mn=await gn(Ht(rt,"blockedTimes"));f(mn.docs.map(Dt=>({id:Dt.id,...Dt.data()})));const Bn=await gn(Ht(rt,"openedSlots"));b(Bn.docs.map(Dt=>({id:Dt.id,...Dt.data()})));const ls=_r(Ht(rt,"rescheduleRequests"),ir("clientId","==",We.id)),ts=(await gn(ls)).docs.map(Dt=>({id:Dt.id,...Dt.data()}));O(ts.filter(Dt=>Dt.status==="pending"));const Os=ts.filter(Dt=>{if(Dt.status==="pending"||!Dt.respondedAt)return!1;const Sr=Dt.respondedAt.toDate?Dt.respondedAt.toDate():new Date(Dt.respondedAt),ur=new Date;return ur.setDate(ur.getDate()-7),Sr>ur&&!Dt.dismissed});E(Os);const Hn=_r(Ht(rt,"achievements"),ir("clientId","==",We.id)),Ha=await gn(Hn);if(!Ha.empty){const Dt=Ha.docs[0].data().badges||[];et(Dt)}const Ei=new Date().toISOString().split("T")[0],cr=await wa(Mt(rt,"clients",We.id));if(cr.exists()){const Dt=cr.data();Dt.dailyQuote&&Dt.dailyQuote.date===Ei?jt(Dt.dailyQuote):jt(null)}try{const Dt=_r(Ht(rt,"sessionNotes"),ir("clientId","==",We.id)),ur=(await gn(Dt)).docs.map(Br=>({id:Br.id,...Br.data()}));ur.sort((Br,Ni)=>{const $a=Br.createdAt?.toMillis?.()||0;return(Ni.createdAt?.toMillis?.()||0)-$a}),Je(ur)}catch(Dt){console.error("Error fetching session notes:",Dt)}}catch(ie){console.error("Error fetching data:",ie)}L(!1)},Et=ie=>new Date(ie).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),ne=ie=>{const[at,It]=ie.split(":"),Ft=parseInt(at),_n=Ft>=12?"pm":"am";return`${Ft>12?Ft-12:Ft===0?12:Ft}:${It}${_n}`},ve=ie=>ie?(ie.toDate?ie.toDate():new Date(ie)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",st=ie=>{const at=new Date,It=to(at),Ft=`${at.getHours().toString().padStart(2,"0")}:${at.getMinutes().toString().padStart(2,"0")}`;return ie.date<It||ie.date===It&&ie.time<Ft},ot=ie=>{const It=to(new Date);return ie.date===It&&!st(ie)},xt=()=>s.filter(ie=>st(ie)).length,sn=()=>s.filter(ie=>!st(ie)),yn=ie=>{Fe({title:"Cancel Session?",message:`Cancel your session on ${Et(ie.date)} at ${ne(ie.time)}? This cannot be undone.`,onConfirm:async()=>{Fe(null),V(ie.id),Pe(null);try{await xa(Mt(rt,"sessions",ie.id)),e(s.filter(at=>at.id!==ie.id)),Kt("Session cancelled","success")}catch(at){console.error("Error cancelling session:",at),Kt("Failed to cancel session. Please try again.","error")}V(null)},onCancel:()=>Fe(null)})},Is=async()=>{try{await _t(),nn("/")}catch(ie){console.error("Failed to log out:",ie)}},Wn=ie=>Z.some(at=>at.sessionId===ie),xn=ie=>{se(ie),fe(null),q(null),H([]),Y(!0)},Un=()=>{Y(!1),se(null),fe(null),q(null),H([])},Yt=()=>We.endDate?We.endDate.toDate?We.endDate.toDate():new Date(We.endDate):new Date,Tn=()=>{const ie=[],at=new Date,It=Yt(),Ft=new Date(at);for(Ft.setDate(Ft.getDate()+1);Ft<=It;){if(gM(Ft)){const _n=to(Ft);i.some(Bn=>Bn.date===_n)||ie.push(new Date(Ft))}Ft.setDate(Ft.getDate()+1)}return ie},qn=ie=>{fe(ie),q(null);const at=W?.duration||We.sessionDuration||45;let It=vM(ie,at,t,i,W?.id,u,m);W&&to(ie)===W.date&&(It=It.filter(Ft=>Ft.time!==W.time)),H(It)},os=async()=>{if(!(!K||!ke||!W)){$(!0);try{await pi(Ht(rt,"rescheduleRequests"),{sessionId:W.id,clientId:We.id,clientName:We.name,originalDate:W.date,originalTime:W.time,requestedDate:to(K),requestedTime:ke,duration:W.duration,status:"pending",createdAt:vt.now(),respondedAt:null,dismissed:!1}),Un(),Kt("Reschedule request submitted! You'll be notified when your trainer responds.","success"),Ut()}catch(ie){console.error("Error submitting reschedule request:",ie),Kt("Failed to submit request. Please try again.","error")}$(!1)}},me=async ie=>{try{await Ts(Mt(rt,"rescheduleRequests",ie),{dismissed:!0}),E(T.filter(at=>at.id!==ie))}catch(at){console.error("Error dismissing notification:",at)}},Ve=()=>{const ie=sn();if(ie.length===0)return null;const at=ie[0],It=new Date,_n=new Date(at.date+"T"+at.time)-It;if(_n<=0)return null;const mn=Math.floor(_n/(1e3*60*60*24)),Bn=Math.floor(_n%(1e3*60*60*24)/(1e3*60*60)),ls=Math.floor(_n%(1e3*60*60)/(1e3*60));return{days:mn,hours:Bn,minutes:ls,session:at}};if(wt||C)return o.jsxs("div",{className:"client-dashboard",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("div",{className:"skeleton skeleton-logo"})})}),o.jsxs("main",{className:"client-main",children:[o.jsxs("div",{className:"skeleton-welcome",children:[o.jsx("div",{className:"skeleton skeleton-title"}),o.jsx("div",{className:"skeleton skeleton-btn-small"})]}),o.jsxs("div",{className:"skeleton-actions",children:[o.jsx("div",{className:"skeleton skeleton-btn"}),o.jsx("div",{className:"skeleton skeleton-btn"})]}),o.jsx("div",{className:"skeleton skeleton-card-large"}),o.jsx("div",{className:"skeleton skeleton-card-medium"}),o.jsx("div",{className:"skeleton skeleton-card-medium"})]})]});if(!nt||!ct||!We)return null;const Ze=xt(),Ye=We.totalSessions-Ze,ut=sn(),ft=F?Tn():[];Ve();const Tt=We.totalSessions>0?Ze/We.totalSessions*100:0;return o.jsxs("div",{className:"client-dashboard",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("div",{className:`pull-refresh-indicator ${Be>0?"visible":""} ${ee?"refreshing":""}`,style:{height:Be},children:[o.jsx("div",{className:`refresh-spinner ${ee?"spinning":""}`,children:o.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:o.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),o.jsx("span",{className:"refresh-text",children:ee?"Refreshing...":"Pull to refresh"})]}),o.jsxs("main",{className:"client-main page-transition-enter",ref:Xe,onTouchStart:Ys,onTouchMove:Fn,onTouchEnd:Le,children:[o.jsxs("div",{className:"welcome-section",children:[o.jsxs("h2",{children:["Welcome, ",We.name.split(" ")[0]]}),o.jsxs("div",{className:"welcome-actions",children:[o.jsx("button",{className:"theme-toggle",onClick:Lt,"aria-label":Vt?"Switch to light mode":"Switch to dark mode",children:Vt?o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),o.jsx("button",{className:"logout-btn",onClick:Is,children:"Log Out"})]})]}),T.length>0&&o.jsx("div",{className:"notifications-section",children:T.map(ie=>o.jsxs("div",{className:`notification ${ie.status}`,children:[o.jsxs("div",{className:"notification-content",children:[o.jsx("span",{className:"notification-icon",children:ie.status==="approved"?"":""}),o.jsxs("div",{className:"notification-text",children:[o.jsx("strong",{children:ie.status==="approved"?"Reschedule Approved!":"Reschedule Declined"}),o.jsx("p",{children:ie.status==="approved"?`Your session has been moved to ${Et(ie.requestedDate)} at ${ne(ie.requestedTime)}`:`Your request to reschedule from ${Et(ie.originalDate)} was declined. Please contact your trainer.`})]})]}),o.jsx("button",{className:"dismiss-btn",onClick:()=>me(ie.id),children:""})]},ie.id))}),dt&&o.jsxs("div",{className:"ring-timer-container",children:[o.jsxs("div",{className:"ring-timer",children:[o.jsx("svg",{className:"ring-timer-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((ie,at)=>{const It=(at*6-90)*(Math.PI/180),Ft=85,_n=96,mn=100+Ft*Math.cos(It),Bn=100+Ft*Math.sin(It),ls=100+_n*Math.cos(It),gs=100+_n*Math.sin(It),Os=60-dt.seconds,Hn=at<Os;return o.jsx("line",{x1:mn,y1:Bn,x2:ls,y2:gs,className:`ring-tick ${Hn?"elapsed":"remaining"}`,strokeWidth:at%5===0?"3":"2"},at)})}),o.jsxs("div",{className:"ring-timer-center",children:[o.jsx("div",{className:"ring-timer-logo",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),o.jsxs("div",{className:"ring-timer-countdown",children:[dt.days>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"timer-digit",children:String(dt.days).padStart(2,"0")}),o.jsx("span",{className:"timer-colon",children:":"})]}),o.jsx("span",{className:"timer-digit",children:String(dt.hours).padStart(2,"0")}),o.jsx("span",{className:"timer-colon",children:":"}),o.jsx("span",{className:"timer-digit",children:String(dt.minutes).padStart(2,"0")}),o.jsx("span",{className:"timer-colon",children:":"}),o.jsx("span",{className:"timer-digit timer-seconds",children:String(dt.seconds).padStart(2,"0")})]}),o.jsx("div",{className:"ring-timer-label",children:"until next session"})]})]}),o.jsxs("div",{className:"ring-timer-session-info",children:[Et(dt.session.date)," at ",ne(dt.session.time)]})]}),o.jsxs("div",{className:"block-info-card",children:[o.jsx("div",{className:"block-header-row",children:o.jsx("h3",{children:"Your Training Block"})}),o.jsxs("div",{className:"progress-section",children:[o.jsxs("div",{className:"progress-ring-container",children:[o.jsxs("svg",{className:"progress-ring",viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"progress-ring-bg",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8"}),o.jsx("circle",{className:`progress-ring-fill ${Me?"animate":""}`,cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:Me?`${2*Math.PI*42*(1-Tt/100)}`:`${2*Math.PI*42}`,strokeLinecap:"round"})]}),o.jsxs("div",{className:"progress-ring-text",children:[o.jsxs("span",{className:"progress-percent",children:[Math.round(Tt),"%"]}),o.jsx("span",{className:"progress-label",children:"complete"})]})]}),o.jsxs("div",{className:"progress-stats",children:[o.jsxs("div",{className:"progress-stat",children:[o.jsx("span",{className:"progress-stat-value",children:Ze}),o.jsx("span",{className:"progress-stat-label",children:"Completed"})]}),o.jsxs("div",{className:"progress-stat",children:[o.jsx("span",{className:"progress-stat-value",children:Ye}),o.jsx("span",{className:"progress-stat-label",children:"Remaining"})]}),o.jsxs("div",{className:"progress-stat",children:[o.jsx("span",{className:"progress-stat-value",children:We.totalSessions}),o.jsx("span",{className:"progress-stat-label",children:"Total"})]})]})]}),o.jsxs("div",{className:"block-dates",children:[o.jsxs("div",{className:"date-item",children:[o.jsx("span",{className:"date-label",children:"Start Date"}),o.jsx("span",{className:"date-value",children:ve(We.startDate)})]}),o.jsxs("div",{className:"date-item",children:[o.jsx("span",{className:"date-label",children:"End Date"}),o.jsx("span",{className:"date-value",children:ve(We.endDate)})]}),o.jsxs("div",{className:"date-item",children:[o.jsx("span",{className:"date-label",children:"Session Duration"}),o.jsxs("span",{className:"date-value",children:[We.sessionDuration," minutes"]})]})]})]}),ae.length>0&&o.jsxs("div",{className:"session-notes-card",ref:xe,children:[o.jsxs("div",{className:"session-notes-header",children:[o.jsxs("div",{className:"session-notes-title",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",children:[o.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),o.jsx("span",{children:"Session Notes"})]}),o.jsx("span",{className:"session-notes-count",children:ae.length})]}),o.jsx("div",{className:"session-notes-list",children:ae.slice(0,ge==="show-all"?void 0:3).map((ie,at)=>o.jsxs("div",{className:`session-note-item ${ge===ie.id?"expanded":""}`,onClick:()=>be(ge===ie.id?null:ie.id),children:[o.jsxs("div",{className:"session-note-top",children:[o.jsx("span",{className:"session-note-date",children:ie.date}),o.jsx("svg",{className:`session-note-chevron ${ge===ie.id?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:o.jsx("path",{d:"M6 9l6 6 6-6"})})]}),ie.sessionNotes&&o.jsx("p",{className:"session-note-preview",children:ge===ie.id?ie.sessionNotes:ie.sessionNotes.length>80?ie.sessionNotes.slice(0,80)+"...":ie.sessionNotes}),ge===ie.id&&o.jsxs("div",{className:"session-note-details",children:[ie.whatWentWell&&o.jsxs("div",{className:"session-note-section went-well",children:[o.jsx("span",{className:"session-note-label",children:"What Went Well"}),o.jsx("p",{children:ie.whatWentWell})]}),ie.whatWentWrong&&o.jsxs("div",{className:"session-note-section went-wrong",children:[o.jsx("span",{className:"session-note-label",children:"What Went Wrong"}),o.jsx("p",{children:ie.whatWentWrong})]}),ie.whatsNext&&o.jsxs("div",{className:"session-note-section whats-next",children:[o.jsx("span",{className:"session-note-label",children:"What's Next"}),o.jsx("p",{children:ie.whatsNext})]})]})]},ie.id))}),ae.length>3&&ge===null&&o.jsxs("button",{className:"session-notes-viewall",onClick:()=>be("show-all"),children:["View all ",ae.length," notes",o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),ge==="show-all"&&ae.length>3&&o.jsxs("button",{className:"session-notes-viewall",onClick:()=>be(null),children:["Show less",o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",style:{transform:"rotate(180deg)"},children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),o.jsxs("div",{className:"quick-actions",children:[o.jsx("button",{className:"forms-btn ripple-btn",onClick:ie=>{rn(ie),nn("/client/forms")},children:"Forms & Questionnaires"}),o.jsx("button",{className:"tools-btn ripple-btn",onClick:ie=>{rn(ie),nn("/client/tools")},children:"Tools & Calculators"})]}),o.jsx("div",{className:"quick-actions",style:{marginTop:"-8px"},children:o.jsx("button",{className:"forms-btn ripple-btn",onClick:ie=>{rn(ie),nn("/client/personal-bests")},style:{flex:"1 1 100%"},children:"Personal Bests & Progress"})}),Se.length>0&&o.jsxs("div",{className:"achievements-card",children:[o.jsxs("div",{className:"achievements-card-header",children:[o.jsxs("div",{className:"achievements-card-title",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),o.jsx("span",{children:"Targets Achieved"})]}),o.jsx("span",{className:"achievements-card-count",children:Se.length})]}),o.jsx("div",{className:"achievements-card-list",children:[...Se].reverse().slice(0,3).map((ie,at)=>o.jsxs("div",{className:"achievements-card-item",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),o.jsx("span",{className:"achievements-card-label",children:ie.label}),o.jsx("span",{className:"achievements-card-date",children:ie.achievedMonth})]},at))}),Se.length>3&&o.jsxs("button",{className:"achievements-card-viewall",onClick:()=>nn("/client/personal-bests"),children:["View all ",Se.length," achievements",o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),Rt?o.jsxs("div",{className:"daily-quote-card",children:[o.jsx("div",{className:"daily-quote-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),o.jsxs("div",{className:"daily-quote-content",children:[o.jsx("div",{className:"daily-quote-text",children:Rt.text}),o.jsxs("div",{className:"daily-quote-author",children:[" ",Rt.author]})]})]}):o.jsxs("div",{className:"daily-quote-cta",onClick:()=>nn("/client/tools/motivation"),children:[o.jsx("div",{className:"daily-quote-cta-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),o.jsxs("div",{className:"daily-quote-cta-text",children:[o.jsx("span",{className:"daily-quote-cta-title",children:"Get More Inspiration"}),o.jsx("span",{className:"daily-quote-cta-sub",children:"Tap to get today's motivation"})]}),o.jsx("svg",{className:"daily-quote-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),o.jsxs("div",{className:"sessions-section",children:[o.jsxs("h3",{children:["Upcoming Sessions (",ut.length,")"]}),ut.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:o.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),o.jsx("line",{x1:"20",y1:"35",x2:"80",y2:"35"}),o.jsx("line",{x1:"35",y1:"15",x2:"35",y2:"35"}),o.jsx("line",{x1:"65",y1:"15",x2:"65",y2:"35"}),o.jsx("circle",{cx:"40",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),o.jsx("circle",{cx:"60",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),o.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"}),o.jsx("circle",{cx:"60",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"})]})}),o.jsx("h4",{children:"No upcoming sessions"}),o.jsx("p",{children:"Contact your trainer to book sessions"})]}):o.jsx("div",{className:"sessions-list",children:ut.map(ie=>o.jsxs("div",{className:`session-card-wrapper ${ze===ie.id?"swiped":""}`,onTouchStart:at=>tt(at,ie.id),onTouchMove:at=>it(at,ie.id),children:[o.jsxs("div",{className:"session-card-swipe-actions",children:[o.jsx("button",{className:"swipe-action-btn reschedule ripple-btn",onClick:at=>{rn(at),Pe(null),xn(ie)},disabled:Wn(ie.id),children:"Reschedule"}),o.jsx("button",{className:"swipe-action-btn cancel ripple-btn",onClick:at=>{rn(at),yn(ie)},disabled:P===ie.id,children:"Cancel"})]}),o.jsxs("div",{className:`session-card ${ot(ie)?"today-session":""}`,onClick:()=>ze===ie.id&&Pe(null),children:[o.jsxs("div",{className:"session-info",children:[o.jsxs("div",{className:"session-date",children:[ot(ie)&&o.jsx("span",{className:"today-label",children:"Today - "}),Et(ie.date)]}),o.jsxs("div",{className:"session-time",children:[ne(ie.time)," (",ie.duration," min)"]}),Wn(ie.id)&&o.jsx("div",{className:"pending-badge",children:"Reschedule pending"})]}),o.jsxs("div",{className:"session-actions",children:[o.jsx("button",{className:"reschedule-btn ripple-btn",onClick:at=>{at.stopPropagation(),rn(at),xn(ie)},disabled:Wn(ie.id),children:"Reschedule"}),o.jsx("button",{className:"cancel-btn ripple-btn",onClick:at=>{at.stopPropagation(),rn(at),yn(ie)},disabled:P===ie.id,children:P===ie.id?"Cancelling...":"Cancel"})]}),o.jsxs("div",{className:"swipe-hint",children:[o.jsx("span",{className:"swipe-hint-text",children:"Swipe"}),o.jsxs("span",{className:"swipe-hint-chevrons",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})]})]})]})]},ie.id))})]}),o.jsxs("div",{className:"completed-section",children:[o.jsxs("h3",{children:["Completed Sessions (",Ze,")"]}),Ze===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:o.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"50",cy:"50",r:"35"}),o.jsx("path",{d:"M35 50 L45 60 L65 40",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),o.jsx("path",{d:"M50 25 L50 50 L65 55",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsx("h4",{children:"No completed sessions yet"}),o.jsx("p",{children:"Your completed sessions will appear here"})]}):o.jsxs("div",{className:"sessions-list completed",children:[s.filter(ie=>st(ie)).slice(-5).reverse().map(ie=>o.jsxs("div",{className:"session-card completed",children:[o.jsxs("div",{className:"session-info",children:[o.jsx("div",{className:"session-date",children:Et(ie.date)}),o.jsx("div",{className:"session-time",children:ne(ie.time)})]}),o.jsx("span",{className:"completed-badge",children:"Completed"})]},ie.id)),Ze>5&&o.jsxs("div",{className:"more-sessions",children:["And ",Ze-5," more completed sessions"]})]})]})]}),F&&W&&o.jsx("div",{className:"modal-overlay",onClick:Un,children:o.jsxs("div",{className:"reschedule-modal",onClick:ie=>ie.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:"Reschedule Session"}),o.jsx("button",{className:"close-modal-btn",onClick:Un,children:""})]}),o.jsxs("div",{className:"modal-body",children:[o.jsx("div",{className:"current-session-info",children:o.jsxs("p",{children:["Current: ",o.jsx("strong",{children:Et(W.date)})," at ",o.jsx("strong",{children:ne(W.time)})]})}),o.jsxs("div",{className:"date-selection",children:[o.jsx("h4",{children:"Select New Date"}),ft.length===0?o.jsx("p",{className:"no-dates",children:"No available dates within your training block"}):o.jsx("div",{className:"dates-grid",children:ft.map((ie,at)=>o.jsxs("button",{className:`date-btn ${K&&to(K)===to(ie)?"selected":""}`,onClick:()=>qn(ie),children:[o.jsx("span",{className:"date-day",children:ie.toLocaleDateString("en-GB",{weekday:"short"})}),o.jsx("span",{className:"date-num",children:ie.getDate()}),o.jsx("span",{className:"date-month",children:ie.toLocaleDateString("en-GB",{month:"short"})})]},at))})]}),K&&o.jsxs("div",{className:"time-selection",children:[o.jsx("h4",{children:"Select Time"}),B.length===0?o.jsx("p",{className:"no-slots",children:"No available slots on this date"}):o.jsx("div",{className:"times-grid",children:B.map((ie,at)=>o.jsx("button",{className:`time-btn ${ke===ie.time?"selected":""} ${ie.period}`,onClick:()=>q(ie.time),children:ne(ie.time)},at))})]})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"cancel-modal-btn",onClick:Un,children:"Cancel"}),o.jsx("button",{className:"submit-reschedule-btn",onClick:os,disabled:!K||!ke||J,children:J?"Submitting...":"Request Reschedule"})]})]})}),Ce&&o.jsxs("div",{className:`toast-notification ${Ce.type}`,children:[o.jsx("span",{className:"toast-icon",children:Ce.type==="success"?o.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):Ce.type==="error"?o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),o.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),o.jsx("span",{className:"toast-message",children:Ce.message}),o.jsx("button",{className:"toast-close",onClick:()=>Oe(null),children:""})]}),he&&o.jsx("div",{className:"confirm-modal-overlay",onClick:he.onCancel,children:o.jsxs("div",{className:"confirm-modal",onClick:ie=>ie.stopPropagation(),children:[o.jsx("h3",{children:he.title}),o.jsx("p",{children:he.message}),o.jsxs("div",{className:"confirm-modal-actions",children:[o.jsx("button",{className:"confirm-cancel-btn ripple-btn",onClick:ie=>{rn(ie),he.onCancel()},children:"Keep Session"}),o.jsx("button",{className:"confirm-btn ripple-btn",onClick:ie=>{rn(ie),he.onConfirm()},children:"Yes, Cancel"})]})]})}),ue&&o.jsx("div",{className:"fab-backdrop",onClick:()=>ye(!1)}),o.jsxs("div",{className:`fab-container ${ue?"open":""}`,children:[o.jsx("button",{className:`fab-main ripple-btn ${ue?"open":""}`,onClick:ie=>{rn(ie),ye(!ue)},"aria-label":"Quick actions",children:o.jsx("span",{className:"fab-icon",children:"+"})}),o.jsxs("div",{className:"fab-actions",children:[o.jsxs("button",{className:"fab-action ripple-btn",onClick:ie=>{rn(ie),ye(!1),nn("/client/tools")},children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"Tools & Calculators"]}),o.jsxs("button",{className:"fab-action ripple-btn",onClick:ie=>{rn(ie),ye(!1),nn("/client/forms")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),o.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Forms & Questionnaires"]}),o.jsxs("button",{className:"fab-action ripple-btn",onClick:ie=>{rn(ie),ye(!1),nn("/client/personal-bests")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M12 20V10"}),o.jsx("path",{d:"M18 20V4"}),o.jsx("path",{d:"M6 20v-4"})]}),"Personal Bests"]}),ae.length>0&&o.jsxs("button",{className:"fab-action ripple-btn",onClick:ie=>{rn(ie),ye(!1),xe.current?.scrollIntoView({behavior:"smooth",block:"start"})},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Session Notes"]}),We?.circuitAccess&&o.jsxs("button",{className:"fab-action ripple-btn",onClick:ie=>{rn(ie),ye(!1),nn("/client/circuit")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 6v6l4 2"})]}),"Circuit Classes"]}),We?.coreBuddyAccess&&o.jsxs("button",{className:"fab-action ripple-btn",onClick:ie=>{rn(ie),ye(!1),nn("/client/core-buddy")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),o.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),o.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),o.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),o.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),"Core Buddy"]})]})]})]})}function xM(){const[s,e]=I.useState(null),[t,a]=I.useState(!1),{currentUser:i,isClient:c,clientData:u,logout:f,loading:m}=lr(),b=Ms(),[T,E]=I.useState({fitnessGoals:"",currentActivityLevel:"",exerciseHistory:"",injuries:"",medicalConditions:"",sleepHours:"",stressLevel:"",dietaryInfo:"",availability:"",additionalInfo:""}),[C,L]=I.useState({q1HeartCondition:!1,q2ChestPain:!1,q3ChestPainLastMonth:!1,q4Balance:!1,q5BoneJoint:!1,q6BloodPressure:!1,q7OtherReason:!1,additionalDetails:"",declaration:!1});I.useEffect(()=>{!m&&(!i||!c)&&b("/")},[i,c,m,b]),I.useEffect(()=>{u?.welcomeForm&&E(u.welcomeForm),u?.parqForm&&L(u.parqForm)},[u]);const P=K=>{const{name:fe,value:ke}=K.target;E(q=>({...q,[fe]:ke}))},V=K=>{const{name:fe,type:ke,checked:q,value:B}=K.target;L(H=>({...H,[fe]:ke==="checkbox"?q:B}))},F=async()=>{a(!0);try{await Ts(Mt(rt,"clients",u.id),{welcomeForm:{...T,completedAt:vt.now()}}),alert("Welcome form saved successfully!"),e(null)}catch(K){console.error("Error saving welcome form:",K),alert("Failed to save form. Please try again.")}a(!1)},Y=async()=>{if(!C.declaration){alert("Please confirm the declaration to submit the form.");return}a(!0);try{await Ts(Mt(rt,"clients",u.id),{parqForm:{...C,completedAt:vt.now()}}),alert("PAR-Q form saved successfully!"),e(null)}catch(K){console.error("Error saving PAR-Q form:",K),alert("Failed to save form. Please try again.")}a(!1)};if(m)return o.jsx("div",{className:"client-loading",children:"Loading..."});if(!i||!c||!u)return null;const W=!!u?.welcomeForm?.completedAt,se=!!u?.parqForm?.completedAt;return o.jsxs("div",{className:"client-forms-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"forms-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>b("/client"),children:" Back"}),s?s==="welcome"?o.jsxs("div",{className:"form-container",children:[o.jsxs("div",{className:"form-header",children:[o.jsx("h2",{children:"Welcome Questionnaire"}),o.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),o.jsxs("div",{className:"form-body",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"What are your main fitness goals?"}),o.jsx("textarea",{name:"fitnessGoals",value:T.fitnessGoals,onChange:P,placeholder:"e.g., Lose weight, build muscle, improve endurance, increase flexibility...",rows:"3"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"How would you describe your current activity level?"}),o.jsxs("select",{name:"currentActivityLevel",value:T.currentActivityLevel,onChange:P,children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),o.jsx("option",{value:"light",children:"Lightly Active (1-2 days/week)"}),o.jsx("option",{value:"moderate",children:"Moderately Active (3-4 days/week)"}),o.jsx("option",{value:"active",children:"Very Active (5+ days/week)"}),o.jsx("option",{value:"athlete",children:"Athlete/Highly Active"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"What is your exercise history?"}),o.jsx("textarea",{name:"exerciseHistory",value:T.exerciseHistory,onChange:P,placeholder:"Describe your previous experience with exercise, sports, or training...",rows:"3"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Do you have any current or past injuries?"}),o.jsx("textarea",{name:"injuries",value:T.injuries,onChange:P,placeholder:"List any injuries that may affect your training...",rows:"2"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Do you have any medical conditions we should know about?"}),o.jsx("textarea",{name:"medicalConditions",value:T.medicalConditions,onChange:P,placeholder:"e.g., Diabetes, asthma, heart conditions...",rows:"2"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"How many hours of sleep do you typically get?"}),o.jsxs("select",{name:"sleepHours",value:T.sleepHours,onChange:P,children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"less-5",children:"Less than 5 hours"}),o.jsx("option",{value:"5-6",children:"5-6 hours"}),o.jsx("option",{value:"7-8",children:"7-8 hours"}),o.jsx("option",{value:"more-8",children:"More than 8 hours"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"How would you rate your current stress level?"}),o.jsxs("select",{name:"stressLevel",value:T.stressLevel,onChange:P,children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"low",children:"Low"}),o.jsx("option",{value:"moderate",children:"Moderate"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"very-high",children:"Very High"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Tell us about your diet/nutrition"}),o.jsx("textarea",{name:"dietaryInfo",value:T.dietaryInfo,onChange:P,placeholder:"Any dietary restrictions, typical eating habits, nutrition goals...",rows:"3"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"What is your preferred training schedule/availability?"}),o.jsx("textarea",{name:"availability",value:T.availability,onChange:P,placeholder:"Days and times that work best for you...",rows:"2"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Anything else you'd like us to know?"}),o.jsx("textarea",{name:"additionalInfo",value:T.additionalInfo,onChange:P,placeholder:"Any other information that might be helpful...",rows:"3"})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),o.jsx("button",{className:"save-btn",onClick:F,disabled:t,children:t?"Saving...":"Save"})]})]})]}):o.jsxs("div",{className:"form-container",children:[o.jsxs("div",{className:"form-header",children:[o.jsx("h2",{children:"PAR-Q Health Screening"}),o.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),o.jsxs("div",{className:"form-body",children:[o.jsx("div",{className:"parq-intro",children:o.jsx("p",{children:"The Physical Activity Readiness Questionnaire (PAR-Q) is designed to identify those who should check with a doctor before starting an exercise program."})}),o.jsxs("div",{className:"parq-questions",children:[o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q1HeartCondition",checked:C.q1HeartCondition,onChange:V}),o.jsx("span",{children:"Has your doctor ever said that you have a heart condition and that you should only do physical activity recommended by a doctor?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q2ChestPain",checked:C.q2ChestPain,onChange:V}),o.jsx("span",{children:"Do you feel pain in your chest when you do physical activity?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q3ChestPainLastMonth",checked:C.q3ChestPainLastMonth,onChange:V}),o.jsx("span",{children:"In the past month, have you had chest pain when you were not doing physical activity?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q4Balance",checked:C.q4Balance,onChange:V}),o.jsx("span",{children:"Do you lose your balance because of dizziness or do you ever lose consciousness?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q5BoneJoint",checked:C.q5BoneJoint,onChange:V}),o.jsx("span",{children:"Do you have a bone or joint problem that could be made worse by a change in your physical activity?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q6BloodPressure",checked:C.q6BloodPressure,onChange:V}),o.jsx("span",{children:"Is your doctor currently prescribing drugs for your blood pressure or heart condition?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q7OtherReason",checked:C.q7OtherReason,onChange:V}),o.jsx("span",{children:"Do you know of any other reason why you should not do physical activity?"})]})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"If you answered YES to any questions, please provide details:"}),o.jsx("textarea",{name:"additionalDetails",value:C.additionalDetails,onChange:V,placeholder:"Please explain any conditions or concerns...",rows:"4"})]}),o.jsx("div",{className:"parq-declaration",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"declaration",checked:C.declaration,onChange:V}),o.jsx("span",{children:"I have read, understood and completed this questionnaire. Any questions I had were answered to my full satisfaction. I confirm that the information provided is accurate to the best of my knowledge."})]})}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),o.jsx("button",{className:"save-btn",onClick:Y,disabled:t,children:t?"Saving...":"Submit"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"forms-intro",children:[o.jsx("h2",{children:"Forms"}),o.jsx("p",{children:"Please complete these forms to help us better understand your fitness journey and ensure your safety."})]}),o.jsxs("div",{className:"forms-list",children:[o.jsxs("div",{className:`form-card ${W?"completed":""}`,children:[o.jsxs("div",{className:"form-card-info",children:[o.jsx("h3",{children:"Welcome Questionnaire"}),o.jsx("p",{children:"Tell us about your fitness goals, experience, and lifestyle."}),W&&o.jsx("span",{className:"completed-badge",children:"Completed"})]}),o.jsx("button",{onClick:()=>e("welcome"),children:W?"View / Edit":"Start"})]}),o.jsxs("div",{className:`form-card ${se?"completed":""}`,children:[o.jsxs("div",{className:"form-card-info",children:[o.jsx("h3",{children:"PAR-Q Health Screening"}),o.jsx("p",{children:"Physical Activity Readiness Questionnaire for your safety."}),se&&o.jsx("span",{className:"completed-badge",children:"Completed"})]}),o.jsx("button",{onClick:()=>e("parq"),children:se?"View / Edit":"Start"})]})]})]})]})]})}function _M(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),i=Ms();return I.useEffect(()=>{!a&&(!s||!e)&&i("/")},[s,e,a,i]),a?o.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:o.jsxs("div",{className:"client-tools-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"tools-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>i("/client"),children:" Back"}),o.jsxs("div",{className:"tools-intro",children:[o.jsx("h2",{children:"Tools"}),o.jsx("p",{children:"Use these tools to help plan your nutrition and stay motivated."})]}),o.jsxs("div",{className:"tools-grid",children:[o.jsxs("div",{className:"tool-select-card",onClick:()=>i("/client/tools/macros"),children:[o.jsx("div",{className:"tool-select-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[o.jsx("path",{d:"M4 6h16M4 12h16M4 18h7"}),o.jsx("circle",{cx:"17",cy:"18",r:"3"}),o.jsx("path",{d:"M17 15v6M14 18h6"})]})}),o.jsxs("div",{className:"tool-select-info",children:[o.jsx("h3",{children:"Macro Calculator"}),o.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),o.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),o.jsxs("div",{className:"tool-select-card",onClick:()=>i("/client/tools/snacks"),children:[o.jsx("div",{className:"tool-select-icon snack-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[o.jsx("path",{d:"M18 8h1a4 4 0 010 8h-1"}),o.jsx("path",{d:"M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"}),o.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),o.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),o.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),o.jsxs("div",{className:"tool-select-info",children:[o.jsx("h3",{children:"Protein Snack Generator"}),o.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),o.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),o.jsxs("div",{className:"tool-select-card",onClick:()=>i("/client/tools/motivation"),children:[o.jsx("div",{className:"tool-select-icon quote-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),o.jsxs("div",{className:"tool-select-info",children:[o.jsx("h3",{children:"Daily Motivation"}),o.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),o.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]})]})]})}function wM(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),i=Ms(),[c,u]=I.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",activityLevel:"moderate",goal:"maintain",deficitLevel:"moderate"}),[f,m]=I.useState(null),[b,T]=I.useState(!1);I.useEffect(()=>{!a&&(!s||!e)&&i("/")},[s,e,a,i]);const E=V=>{const{name:F,value:Y}=V.target;u(W=>({...W,[F]:Y})),T(!1)},C=()=>{let V=parseFloat(c.weight);c.weightUnit==="lbs"&&(V=V*.453592);let F;if(c.heightUnit==="cm")F=parseFloat(c.height);else{const Oe=parseFloat(c.heightFeet)||0,ee=parseFloat(c.heightInches)||0;F=Oe*30.48+ee*2.54}const Y=parseInt(c.age);let W;c.gender==="male"?W=10*V+6.25*F-5*Y+5:W=10*V+6.25*F-5*Y-161;const K=W*{sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[c.activityLevel];let fe=K,ke,q;switch(c.goal){case"lose":fe=K-{light:250,moderate:500,harsh:750}[c.deficitLevel],ke=2.2,q=.3;break;case"build":fe=K+300,ke=2,q=.22;break;default:ke=1.8,q=.25;break}const B=c.gender==="male"?1500:1200;fe=Math.max(fe,B);const H=Math.round(V*ke),J=H*4,$=fe*q,Z=Math.round($/9),O=fe-J-$,Ce=Math.max(0,Math.round(O/4));m({bmr:Math.round(W),tdee:Math.round(K),targetCalories:Math.round(fe),protein:H,carbs:Ce,fats:Z,proteinCalories:Math.round(J),carbCalories:Math.round(O),fatCalories:Math.round($)}),T(!0)},L=()=>{const V=c.weight&&parseFloat(c.weight)>0,F=c.age&&parseInt(c.age)>0;let Y;return c.heightUnit==="cm"?Y=c.height&&parseFloat(c.height)>0:Y=c.heightFeet&&parseFloat(c.heightFeet)>0||c.heightInches&&parseFloat(c.heightInches)>0,V&&F&&Y},P=()=>{switch(c.goal){case"lose":return"Weight Loss";case"build":return"Muscle Building";default:return"Maintenance"}};return a?o.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:o.jsxs("div",{className:"client-tools-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"tools-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>i("/client/tools"),children:" Back to Tools"}),o.jsxs("div",{className:"tool-card",children:[o.jsxs("div",{className:"tool-header",children:[o.jsx("h3",{children:"Macro Calculator"}),o.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),o.jsxs("div",{className:"calculator-form",children:[o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Gender"}),o.jsxs("div",{className:"toggle-group",children:[o.jsx("button",{type:"button",className:c.gender==="male"?"active":"",onClick:()=>{u(V=>({...V,gender:"male"})),T(!1)},children:"Male"}),o.jsx("button",{type:"button",className:c.gender==="female"?"active":"",onClick:()=>{u(V=>({...V,gender:"female"})),T(!1)},children:"Female"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Age"}),o.jsx("input",{type:"number",name:"age",value:c.age,onChange:E,placeholder:"Years",min:"15",max:"100"})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Weight"}),o.jsxs("div",{className:"input-with-unit",children:[o.jsx("input",{type:"number",name:"weight",value:c.weight,onChange:E,placeholder:c.weightUnit==="kg"?"kg":"lbs",min:"30",max:"300"}),o.jsxs("div",{className:"unit-toggle",children:[o.jsx("button",{type:"button",className:c.weightUnit==="kg"?"active":"",onClick:()=>{u(V=>({...V,weightUnit:"kg"})),T(!1)},children:"kg"}),o.jsx("button",{type:"button",className:c.weightUnit==="lbs"?"active":"",onClick:()=>{u(V=>({...V,weightUnit:"lbs"})),T(!1)},children:"lbs"})]})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Height"}),o.jsxs("div",{className:"input-with-unit",children:[c.heightUnit==="cm"?o.jsx("input",{type:"number",name:"height",value:c.height,onChange:E,placeholder:"cm",min:"100",max:"250"}):o.jsxs("div",{className:"height-imperial",children:[o.jsx("input",{type:"number",name:"heightFeet",value:c.heightFeet,onChange:E,placeholder:"ft",min:"4",max:"7"}),o.jsx("input",{type:"number",name:"heightInches",value:c.heightInches,onChange:E,placeholder:"in",min:"0",max:"11"})]}),o.jsxs("div",{className:"unit-toggle",children:[o.jsx("button",{type:"button",className:c.heightUnit==="cm"?"active":"",onClick:()=>{u(V=>({...V,heightUnit:"cm"})),T(!1)},children:"cm"}),o.jsx("button",{type:"button",className:c.heightUnit==="ft"?"active":"",onClick:()=>{u(V=>({...V,heightUnit:"ft"})),T(!1)},children:"ft/in"})]})]})]})]}),o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{children:"Activity Level"}),o.jsxs("select",{name:"activityLevel",value:c.activityLevel,onChange:E,children:[o.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),o.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),o.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),o.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"}),o.jsx("option",{value:"veryActive",children:"Extra Active (athlete/physical job)"})]})]}),o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{children:"Fitness Goal"}),o.jsxs("div",{className:"goal-options",children:[o.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="lose"?"active":""}`,onClick:()=>{u(V=>({...V,goal:"lose"})),T(!1)},children:[o.jsx("span",{className:"goal-icon",children:"-"}),o.jsx("span",{children:"Lose Weight"})]}),o.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="maintain"?"active":""}`,onClick:()=>{u(V=>({...V,goal:"maintain"})),T(!1)},children:[o.jsx("span",{className:"goal-icon",children:"="}),o.jsx("span",{children:"Maintain"})]}),o.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="build"?"active":""}`,onClick:()=>{u(V=>({...V,goal:"build"})),T(!1)},children:[o.jsx("span",{className:"goal-icon",children:"+"}),o.jsx("span",{children:"Build Muscle"})]})]})]}),c.goal==="lose"&&o.jsxs("div",{className:"form-group full-width deficit-section",children:[o.jsx("label",{children:"Calorie Deficit Level"}),o.jsxs("div",{className:"deficit-options",children:[o.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="light"?"active":""}`,onClick:()=>{u(V=>({...V,deficitLevel:"light"})),T(!1)},children:[o.jsx("span",{className:"deficit-name",children:"Light"}),o.jsx("span",{className:"deficit-desc",children:"-250 cal/day"}),o.jsx("span",{className:"deficit-rate",children:"~0.5 lb/week"})]}),o.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="moderate"?"active":""}`,onClick:()=>{u(V=>({...V,deficitLevel:"moderate"})),T(!1)},children:[o.jsx("span",{className:"deficit-name",children:"Moderate"}),o.jsx("span",{className:"deficit-desc",children:"-500 cal/day"}),o.jsx("span",{className:"deficit-rate",children:"~1 lb/week"})]}),o.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="harsh"?"active":""}`,onClick:()=>{u(V=>({...V,deficitLevel:"harsh"})),T(!1)},children:[o.jsx("span",{className:"deficit-name",children:"Aggressive"}),o.jsx("span",{className:"deficit-desc",children:"-750 cal/day"}),o.jsx("span",{className:"deficit-rate",children:"~1.5 lb/week"})]})]})]}),o.jsx("button",{className:"calculate-btn",onClick:C,disabled:!L(),children:"Calculate Macros"})]}),b&&f&&(()=>{const V=f.proteinCalories+f.carbCalories+f.fatCalories,F=Math.round(f.proteinCalories/V*100),Y=Math.round(f.carbCalories/V*100),W=100-F-Y;return o.jsxs("div",{className:"results-section",children:[o.jsxs("div",{className:"results-header",children:[o.jsx("h4",{children:"Your Daily Targets"}),o.jsx("span",{className:"goal-badge",children:P()})]}),o.jsxs("div",{className:"calories-display",children:[o.jsx("span",{className:"calories-value",children:f.targetCalories}),o.jsx("span",{className:"calories-label",children:"calories/day"})]}),o.jsxs("div",{className:"macro-percentage-bar",children:[o.jsxs("div",{className:"macro-bar-track",children:[o.jsx("div",{className:"macro-bar-segment protein",style:{width:`${F}%`},children:F>=12&&o.jsxs("span",{children:[F,"%"]})}),o.jsx("div",{className:"macro-bar-segment carbs",style:{width:`${Y}%`},children:Y>=12&&o.jsxs("span",{children:[Y,"%"]})}),o.jsx("div",{className:"macro-bar-segment fats",style:{width:`${W}%`},children:W>=12&&o.jsxs("span",{children:[W,"%"]})})]}),o.jsxs("div",{className:"macro-bar-legend",children:[o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-dot protein"}),"Protein ",F,"%"]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-dot carbs"}),"Carbs ",Y,"%"]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-dot fats"}),"Fats ",W,"%"]})]})]}),o.jsxs("div",{className:"macros-grid",children:[o.jsxs("div",{className:"macro-card protein",style:{animationDelay:"0.1s"},children:[o.jsxs("div",{className:"macro-value",children:[f.protein,"g"]}),o.jsx("div",{className:"macro-label",children:"Protein"}),o.jsxs("div",{className:"macro-calories",children:[f.proteinCalories," cal"]})]}),o.jsxs("div",{className:"macro-card carbs",style:{animationDelay:"0.2s"},children:[o.jsxs("div",{className:"macro-value",children:[f.carbs,"g"]}),o.jsx("div",{className:"macro-label",children:"Carbs"}),o.jsxs("div",{className:"macro-calories",children:[f.carbCalories," cal"]})]}),o.jsxs("div",{className:"macro-card fats",style:{animationDelay:"0.3s"},children:[o.jsxs("div",{className:"macro-value",children:[f.fats,"g"]}),o.jsx("div",{className:"macro-label",children:"Fats"}),o.jsxs("div",{className:"macro-calories",children:[f.fatCalories," cal"]})]})]}),o.jsxs("div",{className:"results-info",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("span",{children:"Basal Metabolic Rate (BMR)"}),o.jsxs("span",{className:"info-value",children:[f.bmr," cal"]})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{children:"Total Daily Energy Expenditure (TDEE)"}),o.jsxs("span",{className:"info-value",children:[f.tdee," cal"]})]})]}),o.jsx("div",{className:"results-note",children:o.jsx("p",{children:"These are estimated values. Individual results may vary based on metabolism, body composition, and other factors. Consult with your trainer for personalized guidance."})})]})})()]})]})]})}const t_=[{name:"Greek Yoghurt & Honey",protein:20,calories:180,prep:0,category:"no-prep",instructions:"Grab a pot of Greek yoghurt, drizzle with honey. Done. Go for full-fat or 0% depending on your macros."},{name:"Protein Bar",protein:20,calories:220,prep:0,category:"no-prep",instructions:"Unwrap and eat. Keep one in your bag for emergencies. Look for bars with 20g+ protein and under 5g sugar."},{name:"Beef Jerky",protein:15,calories:120,prep:0,category:"no-prep",instructions:"Open the pack and snack. Great for on the go. Check the label  some brands are loaded with sugar."},{name:"Handful of Almonds",protein:7,calories:170,prep:0,category:"no-prep",instructions:"Grab about 30g (roughly 23 almonds). Good fats and protein. Keep a bag at your desk or in your car."},{name:"Boiled Eggs (x2)",protein:12,calories:140,prep:0,category:"no-prep",instructions:"Batch boil at the start of the week  10 mins in boiling water, cool in ice water, peel and store in the fridge. Grab 2 when you need them."},{name:"String Cheese (x2)",protein:14,calories:160,prep:0,category:"no-prep",instructions:"Peel and eat. Keep a few in the fridge for quick grabs. Pair with some fruit if you want extra carbs."},{name:"Cottage Cheese Pot",protein:14,calories:110,prep:0,category:"no-prep",instructions:"Eat straight from the pot. Add a pinch of salt and pepper, or keep it sweet with a drizzle of honey."},{name:"Edamame Beans",protein:11,calories:120,prep:0,category:"no-prep",instructions:"Buy pre-cooked and shelled from the supermarket. Sprinkle with sea salt or chilli flakes. Eat cold or warm in the microwave for 1 min."},{name:"Turkey Slices (50g)",protein:12,calories:60,prep:0,category:"no-prep",instructions:"Straight from the pack. Roll up a few slices on their own or wrap around some cheese for extra protein."},{name:"Roasted Chickpeas",protein:10,calories:160,prep:0,category:"no-prep",instructions:"Buy a bag of roasted chickpeas or make a batch: drain tinned chickpeas, toss in oil and spices, roast at 200C for 25 mins. Store in a jar."},{name:"Protein Shake & Banana",protein:30,calories:280,prep:1,category:"quick",instructions:"Add one scoop of protein powder to 300ml water or milk in a shaker. Shake for 10 seconds. Eat a banana on the side."},{name:"Peanut Butter on Rice Cakes",protein:14,calories:260,prep:1,category:"quick",instructions:"Spread 1-2 tablespoons of peanut butter across 2 rice cakes. Top with sliced banana or a drizzle of honey if you want."},{name:"Greek Yoghurt & Granola",protein:22,calories:300,prep:1,category:"quick",instructions:"Scoop Greek yoghurt into a bowl. Top with a handful of granola and some berries. Use high-protein granola if you can find it."},{name:"Turkey & Cream Cheese Roll-Ups",protein:18,calories:180,prep:2,category:"quick",instructions:"Lay out 3-4 turkey slices. Spread a thin layer of cream cheese on each. Roll them up. Add cucumber or spinach inside for crunch."},{name:"Cottage Cheese & Pineapple",protein:15,calories:160,prep:1,category:"quick",instructions:"Scoop cottage cheese into a bowl, top with tinned or fresh pineapple chunks. The sweet and savoury combo works surprisingly well."},{name:"Ham & Cheese Wrap",protein:22,calories:320,prep:2,category:"quick",instructions:"Lay a tortilla flat. Add 2-3 ham slices and a slice of cheese. Add lettuce or spinach if you have it. Roll up tight and eat."},{name:"Tuna & Crackers",protein:20,calories:220,prep:2,category:"quick",instructions:"Drain a small tin of tuna, mix with a squeeze of lemon and black pepper. Spoon onto 4-5 crackers. Add hot sauce if you like it."},{name:"Protein Yoghurt Bowl",protein:25,calories:250,prep:1,category:"quick",instructions:"Mix a scoop of protein powder into Greek yoghurt until smooth. Top with berries, nuts, or a drizzle of honey."},{name:"Hummus & Veggie Sticks",protein:8,calories:180,prep:1,category:"quick",instructions:"Grab a pot of hummus and chop up carrots, cucumber, and peppers into sticks. Dip and eat. Simple."},{name:"Chocolate Milk (500ml)",protein:17,calories:340,prep:1,category:"quick",instructions:"Pour 500ml milk, stir in 2 tablespoons of chocolate protein powder or cocoa. Great post-workout  the carbs help recovery."},{name:"Peanut Butter & Apple Slices",protein:10,calories:250,prep:1,category:"quick",instructions:"Slice an apple into wedges. Dip into 1-2 tablespoons of peanut butter. Sweet, crunchy, and filling."},{name:"Overnight Oats (pre-made)",protein:18,calories:310,prep:1,category:"quick",instructions:"Prep the night before: mix 50g oats, 1 scoop protein powder, 150ml milk, and a handful of berries in a jar. Refrigerate overnight. Grab and eat cold."},{name:"Smoked Salmon on Crackers",protein:16,calories:200,prep:2,category:"quick",instructions:"Lay out 4-5 crackers. Top each with a slice of smoked salmon and a small squeeze of lemon. Add cream cheese if you want extra."},{name:"Protein Smoothie Bowl",protein:28,calories:350,prep:2,category:"quick",instructions:"Blend 1 scoop protein powder, 1 frozen banana, and a splash of milk until thick. Pour into a bowl. Top with granola, berries, and seeds."},{name:"Almond Butter & Banana Toast",protein:12,calories:280,prep:2,category:"quick",instructions:"Toast a slice of wholemeal bread. Spread with almond butter. Slice half a banana on top. Sprinkle with cinnamon."},{name:"Scrambled Eggs on Toast",protein:22,calories:320,prep:4,category:"cook",instructions:"Crack 3 eggs into a pan on medium-low heat. Stir continuously with a spatula until just set  keep them soft. Season with salt and pepper, serve on wholemeal toast."},{name:"Protein Pancake Mug Cake",protein:25,calories:280,prep:3,category:"cook",instructions:"Mix 1 scoop protein powder, 1 egg, and 2 tablespoons of oats in a mug. Microwave for 90 seconds. Top with peanut butter or berries."},{name:"Tuna Mayo on Toast",protein:24,calories:340,prep:3,category:"cook",instructions:"Drain a tin of tuna, mix with 1 tablespoon of light mayo, salt, pepper, and a squeeze of lemon. Toast 2 slices of bread. Pile the tuna on top."},{name:"Egg & Cheese Muffin",protein:18,calories:300,prep:4,category:"cook",instructions:"Fry or microwave an egg. Toast an English muffin. Layer the egg with a slice of cheese and optionally a slice of ham. Press together."},{name:"Chicken Quesadilla",protein:26,calories:380,prep:5,category:"cook",instructions:"Use leftover chicken or pre-cooked slices. Lay a tortilla in a dry pan on medium heat. Add chicken and grated cheese on one half. Fold over, cook 2 mins each side until golden and melted."},{name:"Beans on Toast",protein:16,calories:340,prep:3,category:"cook",instructions:"Heat a tin of baked beans in the microwave for 2 mins, stirring halfway. Toast 2 slices of wholemeal bread. Pour beans on top. Add grated cheese for extra protein."},{name:"Omelette (2 eggs)",protein:14,calories:180,prep:4,category:"cook",instructions:"Beat 2 eggs with salt and pepper. Pour into a hot, lightly oiled pan. Swirl to cover the base. Add fillings (cheese, ham, peppers) when the edges set. Fold in half and serve."},{name:"Protein Porridge",protein:28,calories:380,prep:4,category:"cook",instructions:"Cook 50g oats with 250ml milk in a pan or microwave (3 mins). Stir in 1 scoop of protein powder once it cools slightly. Top with banana and a drizzle of honey."},{name:"Cheese Toastie",protein:16,calories:350,prep:3,category:"cook",instructions:"Butter the outside of 2 slices of bread. Place cheese (and ham if you have it) between the unbuttered sides. Cook in a dry pan on medium heat, 2 mins each side until golden."},{name:"Egg Fried Rice (leftover rice)",protein:16,calories:360,prep:5,category:"cook",instructions:"Heat a splash of oil in a pan on high heat. Add leftover cold rice and stir-fry for 2 mins. Push to one side, crack in 2 eggs and scramble. Mix together, add soy sauce to taste."}];function SM(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),i=Ms(),[c,u]=I.useState(null),[f,m]=I.useState("all"),[b,T]=I.useState(!1),E=I.useRef([]);I.useEffect(()=>{!a&&(!s||!e)&&i("/")},[s,e,a,i]);const C=F=>{const Y=[...F];for(let W=Y.length-1;W>0;W--){const se=Math.floor(Math.random()*(W+1));[Y[W],Y[se]]=[Y[se],Y[W]]}return Y},L=()=>{const F=f==="all"?t_:t_.filter(Y=>Y.category===f);E.current.length===0&&(E.current=C(F)),T(!0),setTimeout(()=>{const Y=E.current.pop();u(Y),T(!1)},300)},P=F=>F===0?"No prep":`${F} min`,V=F=>{switch(F){case"no-prep":return"Grab & Go";case"quick":return"Quick Prep";case"cook":return"Light Cook";default:return F}};return a?o.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:o.jsxs("div",{className:"client-tools-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"tools-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>i("/client/tools"),children:" Back to Tools"}),o.jsxs("div",{className:"tool-card",children:[o.jsxs("div",{className:"tool-header",children:[o.jsx("h3",{children:"Protein Snack Generator"}),o.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),o.jsxs("div",{className:"snack-generator",children:[o.jsx("div",{className:"snack-filters",children:[{value:"all",label:"All"},{value:"no-prep",label:"Grab & Go"},{value:"quick",label:"Quick Prep"},{value:"cook",label:"Light Cook"}].map(F=>o.jsx("button",{className:`snack-filter-btn ${f===F.value?"active":""}`,onClick:()=>{m(F.value),u(null),E.current=[]},children:F.label},F.value))}),c&&!b&&o.jsxs("div",{className:"snack-result",children:[o.jsx("div",{className:"snack-name",children:c.name}),o.jsxs("div",{className:"snack-details",children:[o.jsxs("div",{className:"snack-detail",children:[o.jsxs("span",{className:"snack-detail-value",children:[c.protein,"g"]}),o.jsx("span",{className:"snack-detail-label",children:"Protein"})]}),o.jsxs("div",{className:"snack-detail",children:[o.jsx("span",{className:"snack-detail-value",children:c.calories}),o.jsx("span",{className:"snack-detail-label",children:"Calories"})]}),o.jsxs("div",{className:"snack-detail",children:[o.jsx("span",{className:"snack-detail-value",children:P(c.prep)}),o.jsx("span",{className:"snack-detail-label",children:"Prep Time"})]})]}),o.jsxs("div",{className:"snack-prep-indicator",children:[o.jsx("div",{className:`prep-dot ${c.category==="no-prep"||c.category==="quick"||c.category==="cook"?"active":""}`}),o.jsx("div",{className:`prep-dot ${c.category==="quick"||c.category==="cook"?"active":""}`}),o.jsx("div",{className:`prep-dot ${c.category==="cook"?"active":""}`}),o.jsx("span",{className:"prep-indicator-label",children:V(c.category)})]}),o.jsxs("div",{className:"snack-instructions",children:[o.jsx("div",{className:"snack-instructions-label",children:"How to make it"}),o.jsx("p",{children:c.instructions})]})]}),b&&o.jsx("div",{className:"snack-result shuffling",children:o.jsx("div",{className:"snack-shuffle-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"})})})}),o.jsx("button",{className:"snack-generate-btn",onClick:L,children:c?"Give Me Another":"Give Me a Snack"})]})]})]})]})}const bg=[{text:"The only bad workout is the one that didn't happen.",author:"Unknown"},{text:"Your body can stand almost anything. It's your mind that you have to convince.",author:"Unknown"},{text:"Discipline is choosing between what you want now and what you want most.",author:"Abraham Lincoln"},{text:"The pain you feel today will be the strength you feel tomorrow.",author:"Unknown"},{text:"Don't wish for it. Work for it.",author:"Unknown"},{text:"Success isn't always about greatness. It's about consistency.",author:"Dwayne Johnson"},{text:"The harder you work, the luckier you get.",author:"Gary Player"},{text:"Fall seven times, stand up eight.",author:"Japanese Proverb"},{text:"What seems impossible today will one day become your warm-up.",author:"Unknown"},{text:"You don't have to be extreme, just consistent.",author:"Unknown"},{text:"Strength does not come from the body. It comes from the will.",author:"Unknown"},{text:"The only way to define your limits is by going beyond them.",author:"Arthur C. Clarke"},{text:"Motivation gets you started. Habit keeps you going.",author:"Jim Ryun"},{text:"If it doesn't challenge you, it doesn't change you.",author:"Fred DeVito"},{text:"Progress, not perfection.",author:"Unknown"},{text:"The best project you'll ever work on is you.",author:"Unknown"},{text:"A year from now you'll wish you had started today.",author:"Karen Lamb"},{text:"You are one workout away from a good mood.",author:"Unknown"},{text:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{text:"The body achieves what the mind believes.",author:"Unknown"},{text:"Small daily improvements are the key to staggering long-term results.",author:"Unknown"},{text:"It's not about having time. It's about making time.",author:"Unknown"},{text:"Sore today, strong tomorrow.",author:"Unknown"},{text:"Champions keep playing until they get it right.",author:"Billie Jean King"},{text:"Be stronger than your excuses.",author:"Unknown"},{text:"When you feel like quitting, think about why you started.",author:"Unknown"},{text:"The difference between try and triumph is a little umph.",author:"Marvin Phillips"},{text:"Your only limit is you.",author:"Unknown"},{text:"Believe you can and you're halfway there.",author:"Theodore Roosevelt"},{text:"Making excuses burns zero calories per hour.",author:"Unknown"},{text:"Results happen over time, not overnight. Work hard, stay consistent, and be patient.",author:"Unknown"},{text:"You don't find willpower, you create it.",author:"Unknown"},{text:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{text:"Sweat is just fat crying.",author:"Unknown"},{text:"Today I will do what others won't, so tomorrow I can do what others can't.",author:"Jerry Rice"},{text:"The only person you are destined to become is the person you decide to be.",author:"Ralph Waldo Emerson"},{text:"Don't count the days, make the days count.",author:"Muhammad Ali"},{text:"It never gets easier, you just get stronger.",author:"Unknown"},{text:"Suffer the pain of discipline or suffer the pain of regret.",author:"Jim Rohn"},{text:"Strive for progress, not perfection.",author:"Unknown"},{text:"Your health is an investment, not an expense.",author:"Unknown"},{text:"Action is the foundational key to all success.",author:"Pablo Picasso"},{text:"Good things come to those who sweat.",author:"Unknown"},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"No matter how slow you go, you're still lapping everyone on the couch.",author:"Unknown"},{text:"Train insane or remain the same.",author:"Unknown"},{text:"The hardest step is the first one out the door.",author:"Unknown"},{text:"Work hard in silence, let your results be the noise.",author:"Frank Ocean"},{text:"Every champion was once a contender who refused to give up.",author:"Rocky Balboa"},{text:"Take care of your body. It's the only place you have to live.",author:"Jim Rohn"},{text:"Energy and persistence conquer all things.",author:"Benjamin Franklin"},{text:"The mind is the most important muscle.",author:"Unknown"},{text:"You are stronger than you think.",author:"Unknown"},{text:"Obsessed is a word the lazy use to describe the dedicated.",author:"Unknown"},{text:"The only weight you need to lose is the weight of your doubts.",author:"Unknown"}];function TM(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),i=Ms(),[c,u]=I.useState(null),[f,m]=I.useState(!0),[b,T]=I.useState(!1);I.useEffect(()=>{!a&&(!s||!e)&&i("/")},[s,e,a,i]),I.useEffect(()=>{t&&E()},[t]);const E=async()=>{try{const L=new Date().toISOString().split("T")[0],P=Mt(rt,"clients",t.id),V=await wa(P);if(V.exists()){const F=V.data();F.dailyQuote&&F.dailyQuote.date===L&&u(F.dailyQuote)}}catch(L){console.error("Error loading daily quote:",L)}m(!1)},C=async()=>{if(c)return;T(!0);const L=new Date().toISOString().split("T")[0];let P=[];try{const K=await wa(Mt(rt,"clients",t.id));K.exists()&&(P=K.data().quoteUsedIndices||[])}catch{}P.length>=bg.length&&(P=[]);const V=bg.map((K,fe)=>fe).filter(K=>!P.includes(K)),F=Math.floor(Math.random()*V.length),Y=V[F],W=bg[Y],se={text:W.text,author:W.author,date:L};try{await La(Mt(rt,"clients",t.id),{dailyQuote:se,quoteUsedIndices:[...P,Y]},{merge:!0}),setTimeout(()=>{u(se),T(!1)},300)}catch(K){console.error("Error saving daily quote:",K),T(!1)}};return a?o.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:o.jsxs("div",{className:"client-tools-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"tools-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>i("/client/tools"),children:" Back to Tools"}),o.jsxs("div",{className:"tool-card",children:[o.jsxs("div",{className:"tool-header",children:[o.jsx("h3",{children:"Daily Motivation"}),o.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),o.jsxs("div",{className:"quote-generator",children:[f?o.jsxs("div",{className:"quote-skeleton",children:[o.jsx("div",{className:"skeleton-icon"}),o.jsx("div",{className:"skeleton-line long"}),o.jsx("div",{className:"skeleton-line medium"}),o.jsx("div",{className:"skeleton-line short"})]}):c?o.jsxs("div",{className:"quote-result",children:[o.jsx("div",{className:"quote-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),o.jsx("div",{className:"quote-text",children:c.text}),o.jsxs("div",{className:"quote-author",children:[" ",c.author]}),o.jsx("div",{className:"quote-date-note",children:"Your inspiration for today"})]}):b?o.jsx("div",{className:"quote-result shuffling",children:o.jsx("div",{className:"quote-shuffle-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 6v6l4 2"})]})})}):o.jsxs("div",{className:"quote-empty",children:[o.jsx("div",{className:"quote-empty-graphic",children:o.jsxs("svg",{viewBox:"0 0 80 80",fill:"none",children:[o.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"var(--border-color)",strokeWidth:"2",strokeDasharray:"4 4"}),o.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",fill:"var(--color-primary)",opacity:"0.2"}),o.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",stroke:"var(--color-primary)",strokeWidth:"1.5"})]})}),o.jsx("h4",{className:"quote-empty-title",children:"Your Daily Inspiration"}),o.jsx("p",{children:"Tap below to reveal today's motivational quote  a new one every day to keep you going."})]}),!c&&!f&&o.jsx("button",{className:"quote-generate-btn",onClick:C,disabled:b,children:b?"Finding your quote...":"Get Inspired"})]})]})]})]})}const Oa=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],ql=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function EM(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Pa(s){const[e,t]=s.split("-");return new Date(parseInt(e),parseInt(t)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function gf(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),t=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(t).toFixed(0)}s`:`${parseFloat(t).toFixed(2)}s`}function n_(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function Fc(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function xg(s,e){return!e||e===0?null:(s-e)/e*100}function NM({data:s,exerciseKey:e,unit:t}){if(!s||s.length<2)return o.jsx("div",{className:"pb-trend-empty",children:o.jsx("p",{children:"Not enough data for trend line yet"})});const a=s.map(V=>{const F=V.benchmarks?.[e];return F?t==="time"?F.time||0:(F.weight||0)*(F.reps||0):0}),i=Math.max(...a),c=Math.min(...a),u=i-c||1,f=300,m=100,b=20,T=f-b*2,E=m-b*2,C=a.map((V,F)=>{const Y=b+F/(a.length-1)*T,W=b+E-(V-c)/u*E;return{x:Y,y:W,value:V}}),L=C.map((V,F)=>`${F===0?"M":"L"} ${V.x} ${V.y}`).join(" "),P=L+` L ${C[C.length-1].x} ${b+E} L ${C[0].x} ${b+E} Z`;return o.jsxs("div",{className:"pb-trend-chart",children:[o.jsxs("svg",{viewBox:`0 0 ${f} ${m}`,preserveAspectRatio:"xMidYMid meet",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),o.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),o.jsx("path",{d:P,fill:"url(#trendGradient)"}),o.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),C.map((V,F)=>o.jsx("circle",{cx:V.x,cy:V.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},F))]}),o.jsx("div",{className:"pb-trend-labels",children:s.map((V,F)=>o.jsxs("span",{className:"pb-trend-label",children:[V.month.split("-")[1],"/",V.month.split("-")[0].slice(2)]},F))})]})}function jM(){const[s,e]=I.useState("bests"),[t,a]=I.useState([]),[i,c]=I.useState(!0),[u,f]=I.useState(!1),[m,b]=I.useState(0),[T,E]=I.useState(!1),[C,L]=I.useState(!1),[P,V]=I.useState(!1),[F,Y]=I.useState({}),[W,se]=I.useState({}),[K,fe]=I.useState({}),[ke,q]=I.useState({}),[B,H]=I.useState({}),[J,$]=I.useState(!1),[Z,O]=I.useState({}),[Ce,Oe]=I.useState([]),[ee,_e]=I.useState(null),[Be,De]=I.useState(null),[Xe,Q]=I.useState(!1),[de,ze]=I.useState(""),[Pe,he]=I.useState(""),[Fe,ue]=I.useState({}),ye=I.useRef(null),Se=I.useRef(0),et=I.useRef(0),{currentUser:Me,isClient:mt,clientData:dt,loading:At}=lr(),{isDark:Rt}=go(),jt=Ms(),ae=!dt?.clientType||dt.clientType==="block",Je=I.useCallback((me,Ve="info")=>{De({message:me,type:Ve}),setTimeout(()=>De(null),4e3)},[]);I.useEffect(()=>{!At&&(!Me||!mt)&&jt("/")},[Me,mt,At,jt]),I.useEffect(()=>{dt&&(ae?ge():(async()=>{try{const Ve=await wa(Mt(rt,"coreBuddyPBs",dt.id));Ve.exists()&&ue(Ve.data().exercises||{})}catch(Ve){console.error("Error loading Core Buddy PBs:",Ve)}c(!1)})())},[dt]);const ge=async()=>{try{const me=_r(Ht(rt,"personalBests"),ir("clientId","==",dt.id)),Ze=(await gn(me)).docs.map(ie=>({id:ie.id,...ie.data()}));Ze.sort((ie,at)=>ie.month.localeCompare(at.month)),a(Ze);const Ye=_r(Ht(rt,"personalBestTargets"),ir("clientId","==",dt.id)),ut=await gn(Ye);if(!ut.empty){const ie=ut.docs[0].data();fe(ie.targets||{}),q(ie.metricTargets||{}),H(ie.targets||{}),O(ie.metricTargets||{})}const ft=_r(Ht(rt,"achievements"),ir("clientId","==",dt.id)),Tt=await gn(ft);Tt.empty||Oe(Tt.docs[0].data().badges||[])}catch(me){console.error("Error fetching personal bests:",me)}c(!1)},be=EM(),xe=t.find(me=>me.month===be),nt=t.filter(me=>me.month<be),ct=nt.length>0?nt[nt.length-1]:null;I.useEffect(()=>{xe?(Y(xe.benchmarks||{}),se(xe.bodyMetrics||{})):(Y({}),se({}))},[xe?.id]);const We=async(me,Ve)=>{const Ze=[];if(me==="strength"?Oa.forEach(Ye=>{const ut=K[Ye.key];if(!ut||!ut.targetValue)return;const ft=Ve[Ye.key];if(!ft)return;let Tt=0;ut.targetType==="weight"?Tt=ft.weight||0:ut.targetType==="reps"?Tt=ft.reps||0:ut.targetType==="time"&&(Tt=ft.time||0);const ie=ut.startValue||0,at=ut.targetValue,It=at-ie;if((It===0?Tt>=at?1:0:Math.max(0,(Tt-ie)/It))>=1&&!Ce.some(mn=>mn.type==="strength"&&mn.key===Ye.key&&mn.targetValue===at)){const mn=ut.targetType==="weight"?"kg":ut.targetType==="reps"?" reps":"s";Ze.push({type:"strength",key:Ye.key,targetType:ut.targetType,targetValue:at,achievedMonth:be,label:`${Ye.name} ${at}${mn}`})}}):ql.forEach(Ye=>{const ut=ke[Ye.key];if(!ut||!ut.targetValue)return;const ft=Ve[Ye.key];if(ft==null)return;const Tt=ut.startValue||0,ie=ut.targetValue,at=ie-Tt;(at===0?ft===ie?1:0:Math.max(0,(ft-Tt)/at))>=1&&(Ce.some(_n=>_n.type==="metric"&&_n.key===Ye.key&&_n.targetValue===ie)||Ze.push({type:"metric",key:Ye.key,targetValue:ie,achievedMonth:be,label:`${Ye.name} ${ie}${Ye.suffix}`}))}),Ze.length>0){const Ye=[...Ce,...Ze];await La(Mt(rt,"achievements",dt.id),{clientId:dt.id,badges:Ye,updatedAt:vt.now()}),Oe(Ye),_e(Ze),setTimeout(()=>_e(null),5e3)}},_t=(me,Ve)=>{if(me==="strength"){const Ze=K[Ve];return!Ze||!Ze.targetValue?!1:Ce.some(Ye=>Ye.type==="strength"&&Ye.key===Ve&&Ye.targetValue===Ze.targetValue)}else{const Ze=ke[Ve];return!Ze||!Ze.targetValue?!1:Ce.some(Ye=>Ye.type==="metric"&&Ye.key===Ve&&Ye.targetValue===Ze.targetValue)}},wt=async()=>{f(!0);try{const me=`${dt.id}_${be}`,Ve=xe||{};await La(Mt(rt,"personalBests",me),{clientId:dt.id,month:be,benchmarks:F,bodyMetrics:Ve.bodyMetrics||W||{},createdAt:Ve.createdAt||vt.now(),updatedAt:vt.now()}),await We("strength",F),Je("Benchmarks saved!","success"),E(!1),await ge()}catch(me){console.error("Error saving benchmarks:",me),Je("Failed to save. Please try again.","error")}f(!1)},Vt=async()=>{f(!0);try{const me=`${dt.id}_${be}`,Ve=xe||{};await La(Mt(rt,"personalBests",me),{clientId:dt.id,month:be,benchmarks:Ve.benchmarks||F||{},bodyMetrics:W,createdAt:Ve.createdAt||vt.now(),updatedAt:vt.now()}),await We("metric",W),Je("Body metrics saved!","success"),L(!1),await ge()}catch(me){console.error("Error saving metrics:",me),Je("Failed to save. Please try again.","error")}f(!1)},Lt=(me,Ve,Ze)=>{Y(Ye=>({...Ye,[me]:{...Ye[me],[Ve]:Ze===""?"":parseFloat(Ze)}}))},nn=(me,Ve)=>{se(Ze=>({...Ze,[me]:Ve===""?"":parseFloat(Ve)}))},Kt=(me,Ve,Ze)=>{H(Ye=>({...Ye,[me]:{...Ye[me],[Ve]:Ve==="targetType"?Ze:Ze===""?"":parseFloat(Ze)}}))},rn=async()=>{f(!0);try{const me=`targets_${dt.id}`,Ve=xe?.benchmarks||{},Ze={};Oa.forEach(Ye=>{if(B[Ye.key]?.targetValue){const ut=B[Ye.key].targetType||(Ye.unit==="time"?"time":"weight");let ft=0;const Tt=Ve[Ye.key];Tt&&(ut==="weight"?ft=Tt.weight||0:ut==="reps"?ft=Tt.reps||0:ut==="time"&&(ft=Tt.time||0)),Ze[Ye.key]={targetType:ut,targetValue:B[Ye.key].targetValue,startValue:ft}}}),await La(Mt(rt,"personalBestTargets",me),{clientId:dt.id,targets:Ze,metricTargets:ke,updatedAt:vt.now()}),fe(Ze),H(Ze),Je("Targets saved!","success"),V(!1)}catch(me){console.error("Error saving targets:",me),Je("Failed to save targets.","error")}f(!1)},Ys=(me,Ve)=>{O(Ze=>({...Ze,[me]:{...Ze[me],targetValue:Ve===""?"":parseFloat(Ve)}}))},Fn=async()=>{f(!0);try{const me=`targets_${dt.id}`,Ve={};ql.forEach(Ze=>{if(Z[Ze.key]?.targetValue){const Ye=xe?.bodyMetrics?.[Ze.key]||0;Ve[Ze.key]={targetValue:Z[Ze.key].targetValue,startValue:Ye}}}),await La(Mt(rt,"personalBestTargets",me),{clientId:dt.id,targets:K,metricTargets:Ve,updatedAt:vt.now()}),q(Ve),O(Ve),Je("Metric targets saved!","success"),$(!1)}catch(me){console.error("Error saving metric targets:",me),Je("Failed to save targets.","error")}f(!1)},Le=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){f(!0);try{const me=Mt(rt,"personalBestTargets",`targets_${dt.id}`);await xa(me),fe({}),q({}),H({}),O({}),Je("All goals have been reset","success")}catch(me){console.error("Error resetting targets:",me),Je("Failed to reset goals","error")}f(!1)}},tt=(me,Ve)=>{const Ze=K[me];if(!Ze||!Ze.targetValue||!Ve)return null;const Ye=Ze.startValue||0,ut=Ze.targetValue;let ft=0;Ze.targetType==="weight"?ft=Ve.weight||0:Ze.targetType==="reps"?ft=Ve.reps||0:Ze.targetType==="time"&&(ft=Ve.time||0);const Tt=ut-Ye;return Tt<=0?ft>=ut?1:0:Math.max(0,Math.min((ft-Ye)/Tt,1))},it=me=>{const Ve=ke[me];if(!Ve||!Ve.targetValue)return null;const Ze=xe?.bodyMetrics?.[me];if(Ze==null)return null;const Ye=Ve.startValue||0,ut=Ve.targetValue,ft=ut-Ye;return ft===0?Ze===ut?1:0:Math.max(0,Math.min((Ze-Ye)/ft,1))},Ut=me=>{Se.current=me.touches[0].clientX,et.current=0},Et=me=>{et.current=me.touches[0].clientX-Se.current},ne=()=>{et.current<-50&&m<Oa.length-1?b(me=>me+1):et.current>50&&m>0&&b(me=>me-1),et.current=0},ve=me=>{const Ve=xe?.bodyMetrics?.[me],Ze=ct?.bodyMetrics?.[me];return Ve==null||Ze==null?null:parseFloat((Ve-Ze).toFixed(2))},st=t.find(me=>me.month===de),ot=t.find(me=>me.month===Pe);if(At||i)return o.jsxs("div",{className:"pb-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"pb-main",children:[o.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),o.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Me||!mt||!dt)return null;const xt=Oa[m],sn=xe?.benchmarks?.[xt.key],yn=ct?.benchmarks?.[xt.key],Is=Fc(xt,sn),Wn=Fc(xt,yn),xn=xg(Is,Wn),Un=tt(xt.key,sn),Yt=Un!==null,Tn=Un!==null&&Un>=1,qn=Yt?Math.round(Un*60):Is>0?15:0,os=K[xt.key];return o.jsxs("div",{className:"pb-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"pb-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>jt(-1),children:" Back"}),o.jsxs("div",{className:"pb-intro",children:[o.jsx("h2",{children:"Personal Bests"}),o.jsx("p",{children:ae?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!ae&&o.jsx("div",{className:"pb-cb-section",children:Object.keys(Fe).length===0?o.jsxs("div",{className:"pb-empty",children:[o.jsx("div",{className:"pb-cb-empty-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),o.jsx("h4",{children:"No personal bests yet"}),o.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):o.jsx("div",{className:"pb-cb-grid",children:Object.entries(Fe).sort(([me],[Ve])=>me.localeCompare(Ve)).map(([me,Ve],Ze)=>o.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${Ze*.05}s`},children:[o.jsxs("div",{className:"pb-cb-card-ring",children:[o.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:[...Array(60)].map((Ye,ut)=>{const ft=(ut*6-90)*(Math.PI/180),Tt=40+30*Math.cos(ft),ie=40+30*Math.sin(ft),at=40+37*Math.cos(ft),It=40+37*Math.sin(ft);return o.jsx("line",{x1:Tt,y1:ie,x2:at,y2:It,className:"pb-ring-tick filled",strokeWidth:ut%5===0?"2":"1.5"},ut)})}),o.jsx("div",{className:"pb-cb-ring-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),o.jsxs("div",{className:"pb-cb-card-info",children:[o.jsx("h4",{className:"pb-cb-card-name",children:me}),o.jsxs("div",{className:"pb-cb-card-value",children:[Ve.weight,"kg  ",Ve.reps]}),Ve.achievedAt&&o.jsx("div",{className:"pb-cb-card-date",children:(Ve.achievedAt.toDate?Ve.achievedAt.toDate():new Date(Ve.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},me))})}),ae&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"pb-tabs",children:[o.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),o.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),o.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&o.jsxs("div",{className:"pb-strength-section",children:[!T&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"pb-carousel",ref:ye,onTouchStart:Ut,onTouchMove:Et,onTouchEnd:ne,children:[o.jsx("div",{className:"pb-ring-container",children:o.jsxs("div",{className:"pb-ring",children:[o.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((me,Ve)=>{const Ze=(Ve*6-90)*(Math.PI/180),Ye=85,ut=96,ft=100+Ye*Math.cos(Ze),Tt=100+Ye*Math.sin(Ze),ie=100+ut*Math.cos(Ze),at=100+ut*Math.sin(Ze),It=Ve<Math.round(qn);return o.jsx("line",{x1:ft,y1:Tt,x2:ie,y2:at,className:`pb-ring-tick ${It?Tn?"hit":"filled":"empty"}`,strokeWidth:Ve%5===0?"3":"2"},Ve)})}),o.jsxs("div",{className:"pb-ring-center",children:[o.jsx("div",{className:"pb-ring-category",children:xt.category}),o.jsxs("div",{className:"pb-ring-exercise",children:[xt.name,_t("strength",xt.key)&&o.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),o.jsx("div",{className:"pb-ring-value",children:sn?xt.unit==="time"?gf(sn.time):n_(sn.weight,sn.reps):"-"}),xn!==null&&o.jsxs("div",{className:`pb-ring-change ${xn>=0?"positive":"negative"}`,children:[xn>=0?"+":"",xn.toFixed(1),"%"]}),xn===null&&sn&&o.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),os&&o.jsxs("div",{className:`pb-ring-target ${Tn?"hit":""}`,children:[Tn?"Target hit!":`${os.startValue||0}  ${os.targetValue}`," ",os.targetType==="weight"?"kg":os.targetType==="reps"?"reps":os.targetType==="time"?"s":"kg"]}),!os&&o.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})}),o.jsx("div",{className:"pb-carousel-dots",children:Oa.map((me,Ve)=>o.jsx("button",{className:`pb-dot ${Ve===m?"active":""}`,onClick:()=>b(Ve)},Ve))}),o.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>b(me=>Math.max(0,me-1)),disabled:m===0,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),o.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>b(me=>Math.min(Oa.length-1,me+1)),disabled:m===Oa.length-1,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),o.jsxs("div",{className:"pb-trend-section",children:[o.jsx("h4",{children:"Trend"}),o.jsx(NM,{data:t,exerciseKey:xt.key,unit:xt.unit})]})]}),!T&&!P&&o.jsxs("div",{className:"pb-action-buttons",children:[o.jsx("button",{className:"pb-edit-btn",onClick:()=>E(!0),children:xe?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),o.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>V(!0),children:Object.keys(K).length>0?"Edit Targets":"Set Targets"}),(Object.keys(K).length>0||Object.keys(ke).length>0)&&o.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Le,disabled:u,children:"Reset All Goals"})]}),T&&o.jsxs("div",{className:"pb-edit-card",children:[o.jsxs("div",{className:"pb-edit-header",children:[o.jsxs("h3",{children:["Benchmarks - ",Pa(be)]}),o.jsx("button",{className:"pb-edit-close",onClick:()=>{E(!1),Y(xe?.benchmarks||{})},children:""})]}),o.jsx("div",{className:"pb-edit-body",children:Oa.map(me=>o.jsxs("div",{className:"pb-edit-exercise",children:[o.jsx("div",{className:"pb-edit-exercise-name",children:me.name}),me.unit==="weight"?o.jsxs("div",{className:"pb-edit-row",children:[o.jsxs("div",{className:"pb-edit-field",children:[o.jsx("label",{children:"Weight (kg)"}),o.jsx("input",{type:"number",step:"0.5",value:F[me.key]?.weight??"",onChange:Ve=>Lt(me.key,"weight",Ve.target.value),placeholder:"0"})]}),o.jsxs("div",{className:"pb-edit-field",children:[o.jsx("label",{children:"Reps"}),o.jsx("input",{type:"number",value:F[me.key]?.reps??"",onChange:Ve=>Lt(me.key,"reps",Ve.target.value),placeholder:"0"})]})]}):o.jsx("div",{className:"pb-edit-row",children:o.jsxs("div",{className:"pb-edit-field full",children:[o.jsx("label",{children:"Time (seconds)"}),o.jsx("input",{type:"number",step:"0.01",value:F[me.key]?.time??"",onChange:Ve=>Lt(me.key,"time",Ve.target.value),placeholder:"0"})]})})]},me.key))}),o.jsxs("div",{className:"pb-edit-actions",children:[o.jsx("button",{className:"pb-cancel-btn",onClick:()=>{E(!1),Y(xe?.benchmarks||{})},children:"Cancel"}),o.jsx("button",{className:"pb-save-btn",onClick:wt,disabled:u,children:u?"Saving...":"Save"})]})]}),P&&o.jsxs("div",{className:"pb-edit-card",children:[o.jsxs("div",{className:"pb-edit-header",children:[o.jsx("h3",{children:"Set Your Targets"}),o.jsx("button",{className:"pb-edit-close",onClick:()=>{V(!1),H(K)},children:""})]}),o.jsxs("div",{className:"pb-edit-body",children:[o.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Oa.map(me=>{const Ve=B[me.key]?.targetType||(me.unit==="time"?"time":"weight"),Ze=Ve==="weight"?"kg":Ve==="reps"?"reps":"seconds",Ye=xe?.benchmarks?.[me.key];let ut="-";return Ye&&(Ve==="weight"&&Ye.weight?ut=`${Ye.weight}kg`:Ve==="reps"&&Ye.reps?ut=`${Ye.reps} reps`:Ve==="time"&&Ye.time&&(ut=`${Ye.time}s`)),o.jsxs("div",{className:"pb-edit-exercise",children:[o.jsxs("div",{className:"pb-edit-exercise-header",children:[o.jsx("div",{className:"pb-edit-exercise-name",children:me.name}),o.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ut]})]}),me.unit==="weight"&&o.jsxs("div",{className:"pb-target-type-toggle",children:[o.jsx("button",{type:"button",className:Ve==="weight"?"active":"",onClick:()=>Kt(me.key,"targetType","weight"),children:"Weight"}),o.jsx("button",{type:"button",className:Ve==="reps"?"active":"",onClick:()=>Kt(me.key,"targetType","reps"),children:"Reps"})]}),o.jsx("div",{className:"pb-edit-row",children:o.jsxs("div",{className:"pb-edit-field full",children:[o.jsxs("label",{children:["Target (",Ze,")"]}),o.jsx("input",{type:"number",step:Ve==="weight"?"0.5":"1",value:B[me.key]?.targetValue??"",onChange:ft=>Kt(me.key,"targetValue",ft.target.value),placeholder:"0"})]})})]},me.key)})]}),o.jsxs("div",{className:"pb-edit-actions",children:[o.jsx("button",{className:"pb-cancel-btn",onClick:()=>{V(!1),H(K)},children:"Cancel"}),o.jsx("button",{className:"pb-save-btn",onClick:rn,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&o.jsxs("div",{className:"pb-metrics-section",children:[!C&&!J&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"pb-metrics-card",children:[o.jsx("h3",{children:"Body Measurements"}),o.jsx("p",{className:"pb-metrics-month",children:Pa(be)}),o.jsx("div",{className:"pb-metrics-list",children:ql.map(me=>{const Ve=xe?.bodyMetrics?.[me.key],Ze=ve(me.key),Ye=ke[me.key],ut=it(me.key),ft=ut!==null&&ut>=1;return o.jsxs("div",{className:"pb-metric-row",children:[o.jsxs("div",{className:"pb-metric-top",children:[o.jsxs("div",{className:"pb-metric-left",children:[o.jsxs("span",{className:"pb-metric-name",children:[me.name,_t("metric",me.key)&&o.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),Ye&&o.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",Ye.targetValue," ",me.suffix]})]}),o.jsxs("div",{className:"pb-metric-values",children:[o.jsx("span",{className:"pb-metric-current",children:Ve!=null?`${Ve} ${me.suffix}`:"-"}),Ze!==null&&o.jsxs("span",{className:`pb-metric-change ${Ze>0?"up":Ze<0?"down":"same"}`,children:[Ze>0?"+":"",Ze," ",me.suffix]})]})]}),ut!==null&&o.jsxs("div",{className:"pb-metric-progress",children:[o.jsx("div",{className:"pb-metric-bar",children:o.jsx("div",{className:`pb-metric-bar-fill ${ft?"hit":""}`,style:{width:`${Math.round(ut*100)}%`}})}),o.jsx("span",{className:`pb-metric-percent ${ft?"hit":""}`,children:ft?"Hit!":`${Math.round(ut*100)}%`})]})]},me.key)})})]}),o.jsxs("div",{className:"pb-action-buttons",children:[o.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:xe?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),o.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>$(!0),children:Object.keys(ke).length>0?"Edit Targets":"Set Targets"}),(Object.keys(K).length>0||Object.keys(ke).length>0)&&o.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Le,disabled:u,children:"Reset All Goals"})]})]}),C&&o.jsxs("div",{className:"pb-edit-card",children:[o.jsxs("div",{className:"pb-edit-header",children:[o.jsxs("h3",{children:["Measurements - ",Pa(be)]}),o.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),se(xe?.bodyMetrics||{})},children:""})]}),o.jsx("div",{className:"pb-edit-body",children:ql.map(me=>o.jsx("div",{className:"pb-edit-metric",children:o.jsxs("div",{className:"pb-edit-field full",children:[o.jsxs("label",{children:[me.name," (",me.suffix,")"]}),o.jsx("input",{type:"number",step:"0.1",value:W[me.key]??"",onChange:Ve=>nn(me.key,Ve.target.value),placeholder:"0"})]})},me.key))}),o.jsxs("div",{className:"pb-edit-actions",children:[o.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),se(xe?.bodyMetrics||{})},children:"Cancel"}),o.jsx("button",{className:"pb-save-btn",onClick:Vt,disabled:u,children:u?"Saving...":"Save"})]})]}),J&&o.jsxs("div",{className:"pb-edit-card",children:[o.jsxs("div",{className:"pb-edit-header",children:[o.jsx("h3",{children:"Body Metric Targets"}),o.jsx("button",{className:"pb-edit-close",onClick:()=>{$(!1),O(ke)},children:""})]}),o.jsxs("div",{className:"pb-edit-body",children:[o.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),ql.map(me=>{const Ve=xe?.bodyMetrics?.[me.key];return o.jsxs("div",{className:"pb-edit-exercise",children:[o.jsxs("div",{className:"pb-edit-exercise-header",children:[o.jsx("div",{className:"pb-edit-exercise-name",children:me.name}),o.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",Ve!=null?`${Ve} ${me.suffix}`:"-"]})]}),o.jsx("div",{className:"pb-edit-row",children:o.jsxs("div",{className:"pb-edit-field full",children:[o.jsxs("label",{children:["Target (",me.suffix,")"]}),o.jsx("input",{type:"number",step:"0.1",value:Z[me.key]?.targetValue??"",onChange:Ze=>Ys(me.key,Ze.target.value),placeholder:"0"})]})})]},me.key)})]}),o.jsxs("div",{className:"pb-edit-actions",children:[o.jsx("button",{className:"pb-cancel-btn",onClick:()=>{$(!1),O(ke)},children:"Cancel"}),o.jsx("button",{className:"pb-save-btn",onClick:Fn,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),s==="history"&&o.jsx("div",{className:"pb-history-section",children:t.length===0?o.jsxs("div",{className:"pb-empty",children:[o.jsx("h4",{children:"No records yet"}),o.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):o.jsxs(o.Fragment,{children:[Ce.length>0&&o.jsxs("div",{className:"pb-achievements-wall",children:[o.jsxs("h4",{className:"pb-achievements-wall-title",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),o.jsx("div",{className:"pb-achievements-list",children:[...Ce].reverse().map((me,Ve)=>o.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${Ve*.05}s`},children:[o.jsx("div",{className:"pb-achievement-star",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),o.jsxs("div",{className:"pb-achievement-info",children:[o.jsx("span",{className:"pb-achievement-label",children:me.label}),o.jsx("span",{className:"pb-achievement-date",children:Pa(me.achievedMonth)})]})]},Ve))})]}),o.jsx("div",{className:"pb-history-controls",children:o.jsx("button",{className:`pb-compare-toggle ${Xe?"active":""}`,onClick:()=>{Q(!Xe),!Xe&&t.length>=2&&(ze(t[0].month),he(t[t.length-1].month))},children:Xe?"Back to Timeline":"Compare Months"})}),Xe?o.jsxs("div",{className:"pb-compare",children:[o.jsxs("div",{className:"pb-compare-selectors",children:[o.jsxs("div",{className:"pb-compare-select",children:[o.jsx("label",{children:"From"}),o.jsx("select",{value:de,onChange:me=>ze(me.target.value),children:t.map(me=>o.jsx("option",{value:me.month,children:Pa(me.month)},me.month))})]}),o.jsx("div",{className:"pb-compare-vs",children:"vs"}),o.jsxs("div",{className:"pb-compare-select",children:[o.jsx("label",{children:"To"}),o.jsx("select",{value:Pe,onChange:me=>he(me.target.value),children:t.map(me=>o.jsx("option",{value:me.month,children:Pa(me.month)},me.month))})]})]}),st&&ot&&o.jsxs("div",{className:"pb-compare-results",children:[o.jsxs("div",{className:"pb-compare-group",children:[o.jsx("h4",{children:"Strength Benchmarks"}),o.jsxs("div",{className:"pb-compare-table",children:[o.jsxs("div",{className:"pb-compare-header-row",children:[o.jsx("span",{children:"Exercise"}),o.jsx("span",{children:Pa(de).split(" ")[0]}),o.jsx("span",{children:Pa(Pe).split(" ")[0]}),o.jsx("span",{children:"Change"})]}),Oa.map(me=>{const Ve=st.benchmarks?.[me.key],Ze=ot.benchmarks?.[me.key],Ye=Fc(me,Ve),ut=Fc(me,Ze),ft=xg(ut,Ye);return o.jsxs("div",{className:"pb-compare-row",children:[o.jsx("span",{className:"pb-compare-name",children:me.name}),o.jsx("span",{className:"pb-compare-val",children:Ve?me.unit==="time"?gf(Ve.time):`${Ve.weight}x${Ve.reps}`:"-"}),o.jsx("span",{className:"pb-compare-val",children:Ze?me.unit==="time"?gf(Ze.time):`${Ze.weight}x${Ze.reps}`:"-"}),o.jsx("span",{className:`pb-compare-change ${ft!==null?ft>=0?"positive":"negative":""}`,children:ft!==null?`${ft>=0?"+":""}${ft.toFixed(1)}%`:"-"})]},me.key)})]})]}),o.jsxs("div",{className:"pb-compare-group",children:[o.jsx("h4",{children:"Body Measurements"}),o.jsxs("div",{className:"pb-compare-table",children:[o.jsxs("div",{className:"pb-compare-header-row",children:[o.jsx("span",{children:"Measurement"}),o.jsx("span",{children:Pa(de).split(" ")[0]}),o.jsx("span",{children:Pa(Pe).split(" ")[0]}),o.jsx("span",{children:"Change"})]}),ql.map(me=>{const Ve=st.bodyMetrics?.[me.key],Ze=ot.bodyMetrics?.[me.key],Ye=Ve!=null&&Ze!=null?parseFloat((Ze-Ve).toFixed(2)):null;return o.jsxs("div",{className:"pb-compare-row",children:[o.jsx("span",{className:"pb-compare-name",children:me.name}),o.jsx("span",{className:"pb-compare-val",children:Ve!=null?`${Ve}`:"-"}),o.jsx("span",{className:"pb-compare-val",children:Ze!=null?`${Ze}`:"-"}),o.jsx("span",{className:`pb-compare-change ${Ye!==null?Ye>0?"positive":Ye<0?"negative":"neutral":""}`,children:Ye!==null?`${Ye>0?"+":""}${Ye} ${me.suffix}`:"-"})]},me.key)})]})]})]})]}):o.jsx("div",{className:"pb-timeline",children:[...t].reverse().map((me,Ve)=>{const Ze=t.find(Ye=>Ye.month<me.month&&t.indexOf(Ye)===t.indexOf(me)-1)||t.filter(Ye=>Ye.month<me.month).pop();return o.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${Ve*.05}s`},children:[o.jsx("div",{className:"pb-timeline-dot"}),o.jsxs("div",{className:"pb-timeline-card",children:[o.jsx("h4",{children:Pa(me.month)}),me.benchmarks&&Object.keys(me.benchmarks).length>0&&o.jsxs("div",{className:"pb-timeline-group",children:[o.jsx("h5",{children:"Strength Benchmarks"}),Oa.map(Ye=>{const ut=me.benchmarks[Ye.key];if(!ut)return null;const ft=Ze?.benchmarks?.[Ye.key],Tt=Fc(Ye,ut),ie=Fc(Ye,ft),at=xg(Tt,ie);return o.jsxs("div",{className:"pb-timeline-row",children:[o.jsx("span",{className:"pb-timeline-label",children:Ye.name}),o.jsxs("div",{className:"pb-timeline-values",children:[o.jsx("span",{className:"pb-timeline-value",children:Ye.unit==="time"?gf(ut.time):n_(ut.weight,ut.reps)}),at!==null&&o.jsxs("span",{className:`pb-timeline-change ${at>=0?"positive":"negative"}`,children:[at>=0?"+":"",at.toFixed(1),"%"]})]})]},Ye.key)})]}),me.bodyMetrics&&Object.keys(me.bodyMetrics).length>0&&o.jsxs("div",{className:"pb-timeline-group",children:[o.jsx("h5",{children:"Body Measurements"}),ql.map(Ye=>{const ut=me.bodyMetrics[Ye.key];if(ut==null)return null;const ft=Ze?.bodyMetrics?.[Ye.key],Tt=ft!=null?parseFloat((ut-ft).toFixed(2)):null;return o.jsxs("div",{className:"pb-timeline-row",children:[o.jsx("span",{className:"pb-timeline-label",children:Ye.name}),o.jsxs("div",{className:"pb-timeline-values",children:[o.jsxs("span",{className:"pb-timeline-value",children:[ut," ",Ye.suffix]}),Tt!==null&&o.jsxs("span",{className:`pb-timeline-change ${Tt>0?"positive":Tt<0?"negative":"neutral"}`,children:[Tt>0?"+":"",Tt," ",Ye.suffix]})]})]},Ye.key)})]})]})]},me.id)})})]})})]})]}),ee&&o.jsx("div",{className:"pb-celebration-overlay",onClick:()=>_e(null),children:o.jsxs("div",{className:"pb-celebration-card",children:[o.jsx("div",{className:"pb-celebration-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),o.jsx("h3",{className:"pb-celebration-title",children:ee.length===1?"Target Achieved!":`${ee.length} Targets Achieved!`}),o.jsx("div",{className:"pb-celebration-badges",children:ee.map((me,Ve)=>o.jsx("div",{className:"pb-celebration-badge",children:me.label},Ve))}),o.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Be&&o.jsxs("div",{className:`toast-notification ${Be.type}`,children:[o.jsx("span",{className:"toast-icon",children:Be.type==="success"?o.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),o.jsx("span",{className:"toast-message",children:Be.message}),o.jsx("button",{className:"toast-close",onClick:()=>De(null),children:""})]})]})}const _g=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const i=new Date(s);i.setHours(9,45,0,0),s>i&&(t=7)}const a=new Date(s);return a.setDate(s.getDate()+t),a},wg=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,kM=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"});function CM(){const[s,e]=I.useState(!0),[t,a]=I.useState(null),[i,c]=I.useState(null),[u,f]=I.useState({attended:0,streak:0,strikes:0}),[m,b]=I.useState(null),{currentUser:T,isClient:E,clientData:C,logout:L,loading:P}=lr(),{isDark:V,toggleTheme:F}=go(),Y=Ms();I.useCallback((q,B="info")=>{b({message:q,type:B}),setTimeout(()=>b(null),4e3)},[]),I.useEffect(()=>{!P&&(!T||!E)&&Y("/")},[T,E,P,Y]),I.useEffect(()=>{const q=()=>{const H=new Date,J=_g();J.setHours(9,0,0,0);const $=J-H;if($<=0){a({days:0,hours:0,minutes:0,seconds:0});return}a({days:Math.floor($/864e5),hours:Math.floor($%864e5/36e5),minutes:Math.floor($%36e5/6e4),seconds:Math.floor($%6e4/1e3)})};q();const B=setInterval(q,1e3);return()=>clearInterval(B)},[]),I.useEffect(()=>{C&&W()},[C]);const W=async()=>{try{const q=wg(_g()),B=Mt(rt,"circuitSessions",q),H=await wa(B);if(H.exists()){const Xe=H.data().slots?.find(Q=>Q.memberId===C.id);c(Xe||null)}else c(null);const $=(await gn(Ht(rt,"circuitSessions"))).docs.map(De=>({id:De.id,...De.data()})),Z=new Date;Z.setHours(0,0,0,0);let O=0;const Ce=[];$.forEach(De=>{new Date(De.date+"T09:00:00")<Z&&De.slots?.some(de=>de.memberId===C.id&&(de.status==="confirmed"||de.status==="attended"))&&(O++,Ce.push(De.date))}),Ce.sort((De,Xe)=>Xe.localeCompare(De));let Oe=0,ee=new Date(Z);const _e=ee.getDay(),Be=_e>=6?_e-6:_e+1;ee.setDate(ee.getDate()-Be);for(const De of Ce)if(De===wg(ee))Oe++,ee.setDate(ee.getDate()-7);else break;f({attended:O,streak:Oe,strikes:C.circuitStrikes||0,banUntil:C.circuitBanUntil||null})}catch(q){console.error("Error fetching circuit data:",q)}e(!1)};if(P||s)return o.jsx("div",{className:"circuit-page",children:o.jsx("div",{className:"circuit-loading",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"circuit-loading-logo"})})});const se=wg(_g()),K=C?.clientType||"block",fe=K==="circuit_vip"||K==="circuit_dropin",ke=K==="circuit_vip"?"VIP":K==="circuit_dropin"?"Drop-in":"Block";return o.jsxs("div",{className:`circuit-page ${V?"dark":""}`,children:[o.jsxs("header",{className:"circuit-header",children:[o.jsxs("div",{className:"circuit-header-left",children:[!fe&&o.jsx("button",{className:"circuit-back-btn",onClick:()=>Y("/client"),children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),o.jsx("img",{src:"/Logo.PNG",alt:"MCF",className:"circuit-header-logo"})]}),o.jsxs("div",{className:"circuit-header-right",children:[o.jsx("button",{className:"circuit-icon-btn",onClick:F,children:V?"":""}),fe&&o.jsx("button",{className:"circuit-icon-btn logout",onClick:L,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"})})})]})]}),o.jsxs("main",{className:"circuit-main",children:[o.jsxs("div",{className:"circuit-intro",children:[o.jsx("h2",{children:"Circuit Class"}),o.jsxs("p",{children:["Hey ",C?.name?.split(" ")[0],"! Your Saturday session awaits."]})]}),t&&o.jsxs("div",{className:"circuit-countdown",children:[o.jsxs("div",{className:"circuit-ring",children:[o.jsx("svg",{className:"circuit-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((q,B)=>{const H=(B*6-90)*(Math.PI/180),J=85,$=96,Z=100+J*Math.cos(H),O=100+J*Math.sin(H),Ce=100+$*Math.cos(H),Oe=100+$*Math.sin(H),ee=60-t.seconds,_e=B<ee;return o.jsx("line",{x1:Z,y1:O,x2:Ce,y2:Oe,className:`circuit-tick ${_e?"elapsed":"remaining"}`,strokeWidth:B%5===0?"3":"2"},B)})}),o.jsxs("div",{className:"circuit-ring-center",children:[o.jsx("div",{className:"circuit-ring-logo",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),o.jsx("div",{className:"circuit-ring-label",children:"Next Class"}),o.jsxs("div",{className:"circuit-ring-countdown",children:[t.days>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"circuit-digit",children:String(t.days).padStart(2,"0")}),o.jsx("span",{className:"circuit-colon",children:":"})]}),o.jsx("span",{className:"circuit-digit",children:String(t.hours).padStart(2,"0")}),o.jsx("span",{className:"circuit-colon",children:":"}),o.jsx("span",{className:"circuit-digit",children:String(t.minutes).padStart(2,"0")}),o.jsx("span",{className:"circuit-colon",children:":"}),o.jsx("span",{className:"circuit-digit circuit-seconds",children:String(t.seconds).padStart(2,"0")})]}),o.jsx("div",{className:"circuit-ring-sub",children:"Saturday 9:00am"})]})]}),o.jsx("p",{className:"circuit-date-full",children:kM(se)})]}),o.jsx("div",{className:`circuit-status-card ${i?"booked":"not-booked"}`,children:i?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"circuit-status-check",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M5 13l4 4L19 7"})})}),o.jsxs("div",{className:"circuit-status-info",children:[o.jsx("h3",{children:"You're Locked In"}),o.jsxs("p",{children:["Slot #",i.slotNumber,"  ",ke]})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"circuit-status-alert",children:"!"}),o.jsxs("div",{className:"circuit-status-info",children:[o.jsx("h3",{children:"Not Booked Yet"}),o.jsx("p",{children:"Tap below to view and book your slot"})]}),o.jsx("button",{className:"circuit-book-now-btn",onClick:()=>Y("/client/circuit/booking"),children:"Book Now"})]})}),o.jsxs("div",{className:"circuit-stats-card",children:[o.jsx("h3",{children:"Your Stats"}),o.jsxs("div",{className:"circuit-stats-grid",children:[o.jsxs("div",{className:"circuit-stat",children:[o.jsx("span",{className:"circuit-stat-value",children:u.attended}),o.jsx("span",{className:"circuit-stat-label",children:"Classes"})]}),o.jsxs("div",{className:"circuit-stat",children:[o.jsx("span",{className:"circuit-stat-value",children:u.streak}),o.jsx("span",{className:"circuit-stat-label",children:"Week Streak"})]}),o.jsxs("div",{className:"circuit-stat",children:[o.jsxs("span",{className:`circuit-stat-value ${u.strikes>=2?"warning":""}`,children:[u.strikes,"/3"]}),o.jsx("span",{className:"circuit-stat-label",children:"Strikes"})]})]}),u.banUntil&&(()=>{const q=u.banUntil.toDate?u.banUntil.toDate():new Date(u.banUntil.seconds*1e3);return q>new Date?o.jsxs("div",{className:"circuit-ban-notice",children:["Booking suspended until ",q.toLocaleDateString("en-GB",{day:"numeric",month:"long"})]}):null})()]}),o.jsxs("div",{className:"circuit-rules",children:[o.jsx("h4",{children:"Class Rules"}),o.jsxs("ul",{children:[o.jsxs("li",{children:["Lock in your slot by ",o.jsx("strong",{children:"Wednesday"})]}),o.jsxs("li",{children:["Cancel at least ",o.jsx("strong",{children:"24 hours"})," before class"]}),o.jsx("li",{children:"3 no-show strikes = 1 month booking ban"})]})]}),K!=="circuit_vip"&&o.jsxs("div",{className:"circuit-vip-promo",children:[o.jsx("div",{className:"vip-promo-badge",children:"VIP"}),o.jsx("h3",{children:"Become a VIP Member"}),o.jsxs("p",{className:"vip-promo-price",children:["Just ",o.jsx("strong",{children:"25"}),"/month"]}),o.jsx("p",{className:"vip-promo-desc",children:"Full access with a priority spot every week  your slot is automatically locked in before anyone else can book."}),o.jsxs("ul",{className:"vip-promo-perks",children:[o.jsx("li",{children:"Guaranteed slot every Saturday"}),o.jsx("li",{children:"Auto-booked  no need to race for a spot"}),o.jsx("li",{children:"Cancel anytime for the week, reinstated the next"})]}),o.jsxs("a",{href:"https://wa.me/447449782055?text=Hi%20Ross%2C%20I%27d%20like%20to%20become%20a%20VIP%20circuit%20member!",target:"_blank",rel:"noopener noreferrer",className:"vip-promo-wa-btn",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Message on WhatsApp"]})]})]}),o.jsx("button",{className:"circuit-fab",onClick:()=>Y("/client/circuit/booking"),children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),o.jsx("path",{d:"M3 9h18M9 21V9"})]})}),m&&o.jsx("div",{className:`toast-notification ${m.type}`,children:o.jsx("span",{children:m.message})})]})}const yf=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const i=new Date(s);i.setHours(9,45,0,0),s>i&&(t=7)}const a=new Date(s);return a.setDate(s.getDate()+t),a},AM=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,RM=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),s_=s=>s==="circuit_vip"?"VIP":s==="circuit_dropin"?"Drop-in":"Block",r_=s=>s==="circuit_vip"?"vip":s==="circuit_dropin"?"dropin":"block";function DM(){const[s,e]=I.useState(!0),[t,a]=I.useState(!1),[i,c]=I.useState(null),[u,f]=I.useState(null),{currentUser:m,isClient:b,clientData:T,loading:E}=lr(),{isDark:C}=go(),L=Ms(),P=I.useCallback((O,Ce="info")=>{f({message:O,type:Ce}),setTimeout(()=>f(null),4e3)},[]);I.useEffect(()=>{!E&&(!m||!b)&&L("/")},[m,b,E,L]),I.useEffect(()=>{T&&V()},[T]);const V=async()=>{try{const O=AM(yf()),Ce=Mt(rt,"circuitSessions",O),Oe=await wa(Ce);if(Oe.exists()){const ee={id:Oe.id,...Oe.data()},_e=_r(Ht(rt,"clients"),ir("clientType","==","circuit_vip"),ir("status","==","active")),De=(await gn(_e)).docs.map(de=>({id:de.id,...de.data()})),Xe=ee.slots.filter(de=>de.memberId).map(de=>de.memberId),Q=De.filter(de=>!Xe.includes(de.id));if(Q.length>0){const de=[...ee.slots];let ze=!1;for(const Pe of Q){const he=de.findIndex(Fe=>Fe.status==="available");if(he===-1)break;de[he]={slotNumber:de[he].slotNumber,memberId:Pe.id,memberName:Pe.name,memberType:"circuit_vip",status:"confirmed",bookedAt:vt.now()},ze=!0}ze&&(await Ts(Ce,{slots:de}),ee.slots=de)}c(ee)}else{const ee=_r(Ht(rt,"clients"),ir("clientType","==","circuit_vip"),ir("status","==","active")),Be=(await gn(ee)).docs.map(Q=>({id:Q.id,...Q.data()})),De=[];for(let Q=0;Q<8;Q++)Q<Be.length?De.push({slotNumber:Q+1,memberId:Be[Q].id,memberName:Be[Q].name,memberType:"circuit_vip",status:"confirmed",bookedAt:vt.now()}):De.push({slotNumber:Q+1,memberId:null,memberName:null,memberType:null,status:"available"});const Xe={date:O,time:"09:00",endTime:"09:45",maxCapacity:8,slots:De,waitlist:[],createdAt:vt.now()};await La(Ce,Xe),c({id:O,...Xe})}}catch(O){console.error("Error loading session:",O),P("Failed to load session","error")}e(!1)},F=async O=>{if(!t){a(!0);try{if(T.circuitBanUntil&&(T.circuitBanUntil.toDate?T.circuitBanUntil.toDate():new Date(T.circuitBanUntil))>new Date){P("You are currently suspended from booking","error"),a(!1);return}const Ce=yf(),Oe=new Date(Ce);if(Oe.setDate(Oe.getDate()-3),Oe.setHours(23,59,59,999),new Date>Oe){P("Booking deadline has passed (Wednesday)","error"),a(!1);return}if(i.slots.some(De=>De.memberId===T.id)){P("You already have a slot booked","error"),a(!1);return}const ee=[...i.slots],_e=ee.findIndex(De=>De.slotNumber===O&&De.status==="available");if(_e===-1){P("Slot is no longer available","error"),a(!1);return}ee[_e]={slotNumber:O,memberId:T.id,memberName:T.name,memberType:T.clientType||"block",status:"confirmed",bookedAt:vt.now()};const Be=(i.waitlist||[]).filter(De=>De.memberId!==T.id);await Ts(Mt(rt,"circuitSessions",i.id),{slots:ee,waitlist:Be}),c(De=>({...De,slots:ee,waitlist:Be})),P("Slot booked!","success")}catch(Ce){console.error("Error booking slot:",Ce),P("Failed to book slot","error")}a(!1)}},Y=async()=>{if(!t){a(!0);try{const O=yf();O.setHours(9,0,0,0);const Ce=new Date(O.getTime()-1440*60*1e3);if(new Date>Ce){P("Cancellation deadline passed (24hrs before class)","error"),a(!1);return}const Oe=[...i.slots],ee=Oe.findIndex(De=>De.memberId===T.id);if(ee===-1){a(!1);return}const _e=Oe[ee].slotNumber;let Be=[...i.waitlist||[]];if(Be.length>0){const De=Be.shift();Oe[ee]={slotNumber:_e,memberId:De.memberId,memberName:De.memberName,memberType:De.memberType,status:"confirmed",bookedAt:vt.now()}}else Oe[ee]={slotNumber:_e,memberId:null,memberName:null,memberType:null,status:"available"};await Ts(Mt(rt,"circuitSessions",i.id),{slots:Oe,waitlist:Be}),c(De=>({...De,slots:Oe,waitlist:Be})),P("Slot released","success")}catch(O){console.error("Error releasing slot:",O),P("Failed to release slot","error")}a(!1)}},W=async()=>{if(!t){a(!0);try{if(i.waitlist?.some(Ce=>Ce.memberId===T.id)){P("Already on the waitlist","error"),a(!1);return}if(i.slots.some(Ce=>Ce.memberId===T.id)){P("You already have a slot","error"),a(!1);return}const O=[...i.waitlist||[],{memberId:T.id,memberName:T.name,memberType:T.clientType||"block",addedAt:vt.now()}];await Ts(Mt(rt,"circuitSessions",i.id),{waitlist:O}),c(Ce=>({...Ce,waitlist:O})),P("Added to waitlist!","success")}catch(O){console.error("Error joining waitlist:",O),P("Failed to join waitlist","error")}a(!1)}},se=async()=>{if(!t){a(!0);try{const O=(i.waitlist||[]).filter(Ce=>Ce.memberId!==T.id);await Ts(Mt(rt,"circuitSessions",i.id),{waitlist:O}),c(Ce=>({...Ce,waitlist:O})),P("Removed from waitlist","success")}catch(O){console.error("Error leaving waitlist:",O),P("Failed to leave waitlist","error")}a(!1)}};if(E||s)return o.jsx("div",{className:"cb-page",children:o.jsx("div",{className:"cb-loading",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-loading-logo"})})});if(!i)return null;const K=i.slots.find(O=>O.memberId===T.id),fe=i.waitlist?.some(O=>O.memberId===T.id),ke=i.slots.filter(O=>O.status==="available").length,q=ke===0,B=yf(),H=new Date(B);H.setDate(H.getDate()-3),H.setHours(23,59,59,999);const J=new Date>H,$=new Date(B);$.setHours(9,0,0,0),$.setTime($.getTime()-1440*60*1e3);const Z=new Date>$;return o.jsxs("div",{className:`cb-page ${C?"dark":""}`,children:[o.jsxs("header",{className:"cb-header",children:[o.jsx("button",{className:"cb-back-btn",onClick:()=>L("/client/circuit"),children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),o.jsx("h1",{children:"Class Booking"}),o.jsx("div",{className:"cb-header-spacer"})]}),o.jsxs("main",{className:"cb-main",children:[o.jsxs("div",{className:"cb-class-info",children:[o.jsx("h2",{children:RM(i.date)}),o.jsxs("p",{children:[i.time," - ",i.endTime,"  ",ke," slot",ke!==1?"s":""," available"]})]}),J&&!K&&o.jsx("div",{className:"cb-deadline-notice",children:"Booking deadline has passed for this week"}),o.jsx("div",{className:"cb-slots-grid",children:i.slots.map(O=>{const Ce=O.memberId===T.id,Oe=O.status==="available";return O.memberType,o.jsxs("div",{className:`cb-slot ${Ce?"mine":""} ${Oe?"available":"filled"}`,children:[o.jsx("div",{className:"cb-slot-number",children:O.slotNumber}),o.jsx("div",{className:"cb-slot-body",children:Oe?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"cb-slot-available",children:"Available"}),!K&&!J&&o.jsx("button",{className:"cb-slot-book-btn",onClick:()=>F(O.slotNumber),disabled:t,children:"Book"})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"cb-slot-name",children:O.memberName}),o.jsx("span",{className:`cb-slot-badge ${r_(O.memberType)}`,children:s_(O.memberType)})]})}),Ce&&o.jsx("button",{className:"cb-slot-release-btn",onClick:Y,disabled:t||Z,title:Z?"Cancellation deadline passed":"Cancel this slot",children:Z?"Locked":"Cancel"})]},O.slotNumber)})}),!K&&q&&o.jsx("div",{className:"cb-waitlist-section",children:fe?o.jsxs("div",{className:"cb-waitlist-status",children:[o.jsxs("p",{children:["You're on the waitlist (position #",(i.waitlist?.findIndex(O=>O.memberId===T.id)||0)+1,")"]}),o.jsx("button",{className:"cb-waitlist-leave-btn",onClick:se,disabled:t,children:"Leave Waitlist"})]}):o.jsx("button",{className:"cb-waitlist-join-btn",onClick:W,disabled:t,children:"Class Full - Join Waitlist"})}),i.waitlist?.length>0&&o.jsxs("div",{className:"cb-waitlist-preview",children:[o.jsxs("h4",{children:["Waitlist (",i.waitlist.length,")"]}),i.waitlist.map((O,Ce)=>o.jsxs("div",{className:"cb-waitlist-item",children:[o.jsxs("span",{className:"cb-waitlist-pos",children:["#",Ce+1]}),o.jsx("span",{className:"cb-waitlist-name",children:O.memberName}),o.jsx("span",{className:`cb-slot-badge ${r_(O.memberType)}`,children:s_(O.memberType)})]},O.memberId))]}),o.jsx("div",{className:"cb-rules",children:o.jsxs("p",{children:[o.jsx("strong",{children:"Book by Wednesday"}),"  ",o.jsx("strong",{children:"Cancel 24hrs before"}),"  ",o.jsx("strong",{children:"3 no-shows = 1 month ban"})]})})]}),u&&o.jsx("div",{className:`toast-notification ${u.type}`,children:o.jsx("span",{children:u.message})})]})}function MM(){const{currentUser:s,isClient:e,clientData:t,logout:a,loading:i}=lr(),{isDark:c,toggleTheme:u}=go(),f=Ms(),[m,b]=I.useState({hours:0,minutes:0,seconds:0}),[T,E]=I.useState(0),[C,L]=I.useState(null),P=I.useCallback((Y,W="info")=>{L({message:Y,type:W}),setTimeout(()=>L(null),4e3)},[]);I.useEffect(()=>{!i&&!s&&f("/")},[i,s,f]),I.useEffect(()=>{const Y=()=>{const se=new Date,K=new Date(se);K.setHours(23,59,59,999);const fe=K-se,ke=Math.floor(fe/(1e3*60*60)),q=Math.floor(fe%(1e3*60*60)/(1e3*60)),B=Math.floor(fe%(1e3*60)/1e3);b({hours:ke,minutes:q,seconds:B}),E(60-B)};Y();const W=setInterval(Y,1e3);return()=>clearInterval(W)},[]);const V=Y=>{const W=Y.currentTarget,se=W.querySelector(".ripple");se&&se.remove();const K=W.getBoundingClientRect(),fe=Math.max(K.width,K.height),ke=Y.clientX-K.left-fe/2,q=Y.clientY-K.top-fe/2,B=document.createElement("span");B.className="ripple",B.style.cssText=`width:${fe}px;height:${fe}px;left:${ke}px;top:${q}px;`,W.appendChild(B),setTimeout(()=>B.remove(),600)},F=t?.name?.split(" ")[0]||"there";return i?o.jsx("div",{className:"cb-loading",children:o.jsx("div",{className:"cb-loading-spinner"})}):o.jsxs("div",{className:"cb-dashboard","data-theme":c?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Core Buddy"})]}),o.jsxs("div",{className:"cb-header-right",children:[o.jsx("button",{className:"cb-theme-toggle",onClick:u,"aria-label":"Toggle theme",children:c?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),o.jsx("button",{className:"cb-logout",onClick:a,"aria-label":"Log out",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),o.jsx("polyline",{points:"16 17 21 12 16 7"}),o.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]}),o.jsxs("main",{className:"cb-main",children:[o.jsx("div",{className:"cb-greeting",children:o.jsxs("h2",{children:["Hey ",F]})}),o.jsxs("div",{className:"cb-ring-container",children:[o.jsxs("div",{className:"cb-ring",children:[o.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((Y,W)=>{const se=(W*6-90)*(Math.PI/180),K=85,fe=96,ke=100+K*Math.cos(se),q=100+K*Math.sin(se),B=100+fe*Math.cos(se),H=100+fe*Math.sin(se),J=W<T;return o.jsx("line",{x1:ke,y1:q,x2:B,y2:H,className:`ring-tick ${J?"elapsed":"remaining"}`,strokeWidth:W%5===0?"3":"2"},W)})}),o.jsxs("div",{className:"cb-ring-center",children:[o.jsx("div",{className:"cb-ring-logo",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),o.jsxs("div",{className:"cb-ring-countdown",children:[o.jsx("span",{className:"cb-timer-digit",children:String(m.hours).padStart(2,"0")}),o.jsx("span",{className:"cb-timer-colon",children:":"}),o.jsx("span",{className:"cb-timer-digit",children:String(m.minutes).padStart(2,"0")}),o.jsx("span",{className:"cb-timer-colon",children:":"}),o.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(m.seconds).padStart(2,"0")})]}),o.jsx("div",{className:"cb-ring-label",children:"remaining today"})]})]}),o.jsxs("p",{className:"cb-ring-tagline",children:["You have 24 hours a day... ",o.jsx("strong",{children:"make it count"})," with Core Buddy"]})]}),o.jsxs("div",{className:"cb-features",children:[o.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:Y=>{V(Y),f("/client/core-buddy/nutrition")},children:[o.jsxs("div",{className:"cb-card-top-row",children:[o.jsx("div",{className:"cb-card-icon cb-icon-nutrition",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),o.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),o.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),o.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),o.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),o.jsx("div",{className:"cb-card-content",children:o.jsx("h3",{children:"Today's Nutrition"})}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsx("div",{className:"cb-card-preview-row",children:o.jsx("div",{className:"cb-mini-rings",children:[{cls:"cb-ring-protein",label:"P",filled:15},{cls:"cb-ring-carbs",label:"C",filled:28},{cls:"cb-ring-fats",label:"F",filled:38},{cls:"cb-ring-cals",label:"Cal",filled:22}].map(Y=>o.jsxs("div",{className:`cb-mini-ring ${Y.cls}`,children:[o.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(60)].map((W,se)=>{const K=(se*6-90)*(Math.PI/180),fe=50+38*Math.cos(K),ke=50+38*Math.sin(K),q=50+46*Math.cos(K),B=50+46*Math.sin(K);return o.jsx("line",{x1:fe,y1:ke,x2:q,y2:B,className:se<Y.filled?"cb-tick-filled":"cb-tick-empty",strokeWidth:se%5===0?"3":"2"},se)})}),o.jsx("span",{children:Y.label})]},Y.cls))})}),o.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),o.jsxs("button",{className:"cb-feature-card cb-card-workouts ripple-btn",onClick:Y=>{V(Y),f("/client/core-buddy/workouts")},children:[o.jsx("div",{className:"cb-card-icon cb-icon-workouts",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M6.5 6.5L17.5 17.5"}),o.jsx("path",{d:"M3 10V7a1 1 0 0 1 1-1h3"}),o.jsx("path",{d:"M14 3h3a1 1 0 0 1 1 1v3"}),o.jsx("path",{d:"M21 14v3a1 1 0 0 1-1 1h-3"}),o.jsx("path",{d:"M10 21H7a1 1 0 0 1-1-1v-3"})]})}),o.jsxs("div",{className:"cb-card-content",children:[o.jsx("h3",{children:"Workouts"}),o.jsx("p",{children:"Randomise or build your own session"})]}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsxs("button",{className:"cb-feature-card cb-card-progress ripple-btn",onClick:Y=>{V(Y),f("/client/personal-bests")},children:[o.jsx("div",{className:"cb-card-icon cb-icon-progress",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})})}),o.jsxs("div",{className:"cb-card-content",children:[o.jsx("h3",{children:"My Progress"}),o.jsx("p",{children:"Track personal bests and body metrics"})]}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsxs("button",{className:"cb-feature-card cb-card-consistency cb-card-has-preview ripple-btn",onClick:Y=>{V(Y),P("Consistency tracking coming soon!","info")},children:[o.jsxs("div",{className:"cb-card-top-row",children:[o.jsx("div",{className:"cb-card-icon cb-icon-consistency",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})})}),o.jsx("div",{className:"cb-card-content",children:o.jsx("h3",{children:"Consistency"})}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsx("div",{className:"cb-card-preview-row",children:o.jsx("div",{className:"cb-week-rings",children:["M","T","W","T","F","S","S"].map((Y,W)=>{const se=W<3?[55,42,30][W]:0;return o.jsxs("div",{className:`cb-week-ring ${W<3?"cb-week-ring-active":""}`,children:[o.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(60)].map((K,fe)=>{const ke=(fe*6-90)*(Math.PI/180),q=50+38*Math.cos(ke),B=50+38*Math.sin(ke),H=50+46*Math.cos(ke),J=50+46*Math.sin(ke);return o.jsx("line",{x1:q,y1:B,x2:H,y2:J,className:fe<se?"cb-week-tick-filled":"cb-week-tick-empty",strokeWidth:fe%5===0?"3":"2"},fe)})}),o.jsx("span",{children:Y})]},W)})})}),o.jsx("p",{className:"cb-card-desc",children:"Weekly streaks and habit tracking"})]}),o.jsxs("button",{className:"cb-feature-card cb-card-leaderboard cb-card-locked ripple-btn",onClick:Y=>{V(Y),P("Leaderboard coming soon!","info")},children:[o.jsx("div",{className:"cb-card-icon cb-icon-leaderboard",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M8 21h8"}),o.jsx("path",{d:"M12 17v4"}),o.jsx("path",{d:"M7 4h10l-1 9H8L7 4z"}),o.jsx("path",{d:"M17 4c0 0 2 0 2 2s-2 4-2 4"}),o.jsx("path",{d:"M7 4c0 0-2 0-2 2s2 4 2 4"})]})}),o.jsxs("div",{className:"cb-card-content",children:[o.jsx("h3",{children:"Leaderboard"}),o.jsx("p",{children:"Compete with your Core Buddies"})]}),o.jsx("span",{className:"cb-coming-soon",children:"Coming Soon"}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]})]})]}),C&&o.jsxs("div",{className:`toast-notification ${C.type}`,children:[C.type==="info"&&o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),C.message]})]})}var Sg={exports:{}},a_;function IM(){return a_||(a_=1,(function(s,e){(function(t,a){s.exports=a()})(window,(function(){return(function(t){var a={};function i(c){if(a[c])return a[c].exports;var u=a[c]={i:c,l:!1,exports:{}};return t[c].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=t,i.c=a,i.d=function(c,u,f){i.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:f})},i.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},i.t=function(c,u){if(1&u&&(c=i(c)),8&u||4&u&&typeof c=="object"&&c&&c.__esModule)return c;var f=Object.create(null);if(i.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:c}),2&u&&typeof c!="string")for(var m in c)i.d(f,m,(function(b){return c[b]}).bind(null,m));return f},i.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return i.d(u,"a",u),u},i.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},i.p="/",i(i.s=90)})([function(t,a,i){var c=i(68);t.exports=function(u,f,m){return(f=c(f))in u?Object.defineProperty(u,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):u[f]=m,u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){function i(c){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},t.exports.__esModule=!0,t.exports.default=t.exports,i(c)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(68);function u(f,m){for(var b=0;b<m.length;b++){var T=m[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(f,c(T.key),T)}}t.exports=function(f,m,b){return m&&u(f.prototype,m),b&&u(f,b),Object.defineProperty(f,"prototype",{writable:!1}),f},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(9).default,u=i(150);t.exports=function(f,m){if(m&&(c(m)=="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(f)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(38);t.exports=function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),f&&c(u,f)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(146)();t.exports=c;try{regeneratorRuntime=c}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=c:Function("r","regeneratorRuntime = r")(c)}},function(t,a){function i(c,u,f,m,b,T,E){try{var C=c[T](E),L=C.value}catch(P){return void f(P)}C.done?u(L):Promise.resolve(L).then(m,b)}t.exports=function(c){return function(){var u=this,f=arguments;return new Promise((function(m,b){var T=c.apply(u,f);function E(L){i(T,m,b,E,C,"next",L)}function C(L){i(T,m,b,E,C,"throw",L)}E(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(46),u=typeof self=="object"&&self&&self.Object===Object&&self,f=c||u||Function("return this")();t.exports=f},function(t,a){function i(c){return t.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t.exports.__esModule=!0,t.exports.default=t.exports,i(c)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i){var c=typeof i;return i!=null&&(c=="object"||c=="function")}},function(t,a){t.exports=function(i){return i!=null&&typeof i=="object"}},function(t,a){var i=Array.isArray;t.exports=i},function(t,a,i){var c=i(151);function u(){return t.exports=u=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(f,m,b){var T=c(f,m);if(T){var E=Object.getOwnPropertyDescriptor(T,m);return E.get?E.get.call(arguments.length<3?f:b):E.value}},t.exports.__esModule=!0,t.exports.default=t.exports,u.apply(null,arguments)}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(102),u=i(108);t.exports=function(f,m){var b=u(f,m);return c(b)?b:void 0}},function(t,a,i){var c=i(91),u=i(134)((function(f,m,b){c(f,m,b)}));t.exports=u},function(t,a,i){var c=i(152),u=i(153),f=i(66),m=i(154);t.exports=function(b){return c(b)||u(b)||f(b)||m()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(19),u=i(104),f=i(105),m=c?c.toStringTag:void 0;t.exports=function(b){return b==null?b===void 0?"[object Undefined]":"[object Null]":m&&m in Object(b)?u(b):f(b)}},function(t,a,i){var c=i(60),u=i(29);t.exports=function(f,m,b,T){var E=!b;b||(b={});for(var C=-1,L=m.length;++C<L;){var P=m[C],V=T?T(b[P],f[P],P,b,f):void 0;V===void 0&&(V=f[P]),E?u(b,P,V):c(b,P,V)}return b}},function(t,a,i){var c=i(8).Symbol;t.exports=c},function(t,a,i){var c=i(61),u=i(132),f=i(26);t.exports=function(m){return f(m)?c(m,!0):u(m)}},function(t,a,i){var c=i(92),u=i(93),f=i(94),m=i(95),b=i(96);function T(E){var C=-1,L=E==null?0:E.length;for(this.clear();++C<L;){var P=E[C];this.set(P[0],P[1])}}T.prototype.clear=c,T.prototype.delete=u,T.prototype.get=f,T.prototype.has=m,T.prototype.set=b,t.exports=T},function(t,a,i){var c=i(23);t.exports=function(u,f){for(var m=u.length;m--;)if(c(u[m][0],f))return m;return-1}},function(t,a){t.exports=function(i,c){return i===c||i!=i&&c!=c}},function(t,a,i){var c=i(14)(Object,"create");t.exports=c},function(t,a,i){var c=i(117);t.exports=function(u,f){var m=u.__data__;return c(f)?m[typeof f=="string"?"string":"hash"]:m.map}},function(t,a,i){var c=i(28),u=i(56);t.exports=function(f){return f!=null&&u(f.length)&&!c(f)}},function(t,a,i){var c=i(14)(i(8),"Map");t.exports=c},function(t,a,i){var c=i(17),u=i(10);t.exports=function(f){if(!u(f))return!1;var m=c(f);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}},function(t,a,i){var c=i(50);t.exports=function(u,f,m){f=="__proto__"&&c?c(u,f,{configurable:!0,enumerable:!0,value:m,writable:!0}):u[f]=m}},function(t,a){t.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}},function(t,a,i){var c=i(124);t.exports=function(u){var f=new u.constructor(u.byteLength);return new c(f).set(new c(u)),f}},function(t,a,i){var c=i(55)(Object.getPrototypeOf,Object);t.exports=c},function(t,a){var i=Object.prototype;t.exports=function(c){var u=c&&c.constructor;return c===(typeof u=="function"&&u.prototype||i)}},function(t,a,i){var c=i(126),u=i(11),f=Object.prototype,m=f.hasOwnProperty,b=f.propertyIsEnumerable,T=c((function(){return arguments})())?c:function(E){return u(E)&&m.call(E,"callee")&&!b.call(E,"callee")};t.exports=T},function(t,a,i){(function(c){var u=i(8),f=i(128),m=a&&!a.nodeType&&a,b=m&&typeof c=="object"&&c&&!c.nodeType&&c,T=b&&b.exports===m?u.Buffer:void 0,E=(T?T.isBuffer:void 0)||f;c.exports=E}).call(this,i(30)(t))},function(t,a){t.exports=function(i){return function(c){return i(c)}}},function(t,a,i){(function(c){var u=i(46),f=a&&!a.nodeType&&a,m=f&&typeof c=="object"&&c&&!c.nodeType&&c,b=m&&m.exports===f&&u.process,T=(function(){try{var E=m&&m.require&&m.require("util").types;return E||b&&b.binding&&b.binding("util")}catch{}})();c.exports=T}).call(this,i(30)(t))},function(t,a){function i(c,u){return t.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,m){return f.__proto__=m,f},t.exports.__esModule=!0,t.exports.default=t.exports,i(c,u)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(61),u=i(159),f=i(26);t.exports=function(m){return f(m)?c(m):u(m)}},function(t,a,i){var c=i(163),u=i(75),f=Object.prototype.propertyIsEnumerable,m=Object.getOwnPropertySymbols,b=m?function(T){return T==null?[]:(T=Object(T),c(m(T),(function(E){return f.call(T,E)})))}:u;t.exports=b},function(t,a){t.exports=function(i,c){for(var u=-1,f=c.length,m=i.length;++u<f;)i[m+u]=c[u];return i}},function(t,a,i){var c=i(166),u=i(27),f=i(167),m=i(168),b=i(169),T=i(17),E=i(47),C=E(c),L=E(u),P=E(f),V=E(m),F=E(b),Y=T;(c&&Y(new c(new ArrayBuffer(1)))!="[object DataView]"||u&&Y(new u)!="[object Map]"||f&&Y(f.resolve())!="[object Promise]"||m&&Y(new m)!="[object Set]"||b&&Y(new b)!="[object WeakMap]")&&(Y=function(W){var se=T(W),K=se=="[object Object]"?W.constructor:void 0,fe=K?E(K):"";if(fe)switch(fe){case C:return"[object DataView]";case L:return"[object Map]";case P:return"[object Promise]";case V:return"[object Set]";case F:return"[object WeakMap]"}return se}),t.exports=Y},function(t,a,i){var c=i(12),u=i(180),f=i(181),m=i(184);t.exports=function(b,T){return c(b)?b:u(b,T)?[b]:f(m(b))}},function(t,a,i){var c=i(17),u=i(11);t.exports=function(f){return typeof f=="symbol"||u(f)&&c(f)=="[object Symbol]"}},function(t,a,i){var c=i(21),u=i(97),f=i(98),m=i(99),b=i(100),T=i(101);function E(C){var L=this.__data__=new c(C);this.size=L.size}E.prototype.clear=u,E.prototype.delete=f,E.prototype.get=m,E.prototype.has=b,E.prototype.set=T,t.exports=E},function(t,a,i){(function(c){var u=typeof c=="object"&&c&&c.Object===Object&&c;t.exports=u}).call(this,i(103))},function(t,a){var i=Function.prototype.toString;t.exports=function(c){if(c!=null){try{return i.call(c)}catch{}try{return c+""}catch{}}return""}},function(t,a,i){var c=i(109),u=i(116),f=i(118),m=i(119),b=i(120);function T(E){var C=-1,L=E==null?0:E.length;for(this.clear();++C<L;){var P=E[C];this.set(P[0],P[1])}}T.prototype.clear=c,T.prototype.delete=u,T.prototype.get=f,T.prototype.has=m,T.prototype.set=b,t.exports=T},function(t,a,i){var c=i(29),u=i(23);t.exports=function(f,m,b){(b!==void 0&&!u(f[m],b)||b===void 0&&!(m in f))&&c(f,m,b)}},function(t,a,i){var c=i(14),u=(function(){try{var f=c(Object,"defineProperty");return f({},"",{}),f}catch{}})();t.exports=u},function(t,a,i){(function(c){var u=i(8),f=a&&!a.nodeType&&a,m=f&&typeof c=="object"&&c&&!c.nodeType&&c,b=m&&m.exports===f?u.Buffer:void 0,T=b?b.allocUnsafe:void 0;c.exports=function(E,C){if(C)return E.slice();var L=E.length,P=T?T(L):new E.constructor(L);return E.copy(P),P}}).call(this,i(30)(t))},function(t,a,i){var c=i(31);t.exports=function(u,f){var m=f?c(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.length)}},function(t,a){t.exports=function(i,c){var u=-1,f=i.length;for(c||(c=Array(f));++u<f;)c[u]=i[u];return c}},function(t,a,i){var c=i(125),u=i(32),f=i(33);t.exports=function(m){return typeof m.constructor!="function"||f(m)?{}:c(u(m))}},function(t,a){t.exports=function(i,c){return function(u){return i(c(u))}}},function(t,a){t.exports=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991}},function(t,a,i){var c=i(17),u=i(32),f=i(11),m=Function.prototype,b=Object.prototype,T=m.toString,E=b.hasOwnProperty,C=T.call(Object);t.exports=function(L){if(!f(L)||c(L)!="[object Object]")return!1;var P=u(L);if(P===null)return!0;var V=E.call(P,"constructor")&&P.constructor;return typeof V=="function"&&V instanceof V&&T.call(V)==C}},function(t,a,i){var c=i(129),u=i(36),f=i(37),m=f&&f.isTypedArray,b=m?u(m):c;t.exports=b},function(t,a){t.exports=function(i,c){if((c!=="constructor"||typeof i[c]!="function")&&c!="__proto__")return i[c]}},function(t,a,i){var c=i(29),u=i(23),f=Object.prototype.hasOwnProperty;t.exports=function(m,b,T){var E=m[b];f.call(m,b)&&u(E,T)&&(T!==void 0||b in m)||c(m,b,T)}},function(t,a,i){var c=i(131),u=i(34),f=i(12),m=i(35),b=i(62),T=i(58),E=Object.prototype.hasOwnProperty;t.exports=function(C,L){var P=f(C),V=!P&&u(C),F=!P&&!V&&m(C),Y=!P&&!V&&!F&&T(C),W=P||V||F||Y,se=W?c(C.length,String):[],K=se.length;for(var fe in C)!L&&!E.call(C,fe)||W&&(fe=="length"||F&&(fe=="offset"||fe=="parent")||Y&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||b(fe,K))||se.push(fe);return se}},function(t,a){var i=/^(?:0|[1-9]\d*)$/;t.exports=function(c,u){var f=typeof c;return!!(u=u??9007199254740991)&&(f=="number"||f!="symbol"&&i.test(c))&&c>-1&&c%1==0&&c<u}},function(t,a){t.exports=function(i){return i}},function(t,a,i){var c=i(136),u=Math.max;t.exports=function(f,m,b){return m=u(m===void 0?f.length-1:m,0),function(){for(var T=arguments,E=-1,C=u(T.length-m,0),L=Array(C);++E<C;)L[E]=T[m+E];E=-1;for(var P=Array(m+1);++E<m;)P[E]=T[E];return P[m]=b(L),c(f,this,P)}}},function(t,a,i){var c=i(137),u=i(139)(c);t.exports=u},function(t,a,i){var c=i(67);t.exports=function(u,f){if(u){if(typeof u=="string")return c(u,f);var m={}.toString.call(u).slice(8,-1);return m==="Object"&&u.constructor&&(m=u.constructor.name),m==="Map"||m==="Set"?Array.from(u):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?c(u,f):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){(c==null||c>i.length)&&(c=i.length);for(var u=0,f=Array(c);u<c;u++)f[u]=i[u];return f},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(9).default,u=i(145);t.exports=function(f){var m=u(f,"string");return c(m)=="symbol"?m:m+""},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){this.v=i,this.k=c},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(71);function u(){var f,m,b=typeof Symbol=="function"?Symbol:{},T=b.iterator||"@@iterator",E=b.toStringTag||"@@toStringTag";function C(K,fe,ke,q){var B=fe&&fe.prototype instanceof P?fe:P,H=Object.create(B.prototype);return c(H,"_invoke",(function(J,$,Z){var O,Ce,Oe,ee=0,_e=Z||[],Be=!1,De={p:0,n:0,v:f,a:Xe,f:Xe.bind(f,4),d:function(Q,de){return O=Q,Ce=0,Oe=f,De.n=de,L}};function Xe(Q,de){for(Ce=Q,Oe=de,m=0;!Be&&ee&&!ze&&m<_e.length;m++){var ze,Pe=_e[m],he=De.p,Fe=Pe[2];Q>3?(ze=Fe===de)&&(Oe=Pe[(Ce=Pe[4])?5:(Ce=3,3)],Pe[4]=Pe[5]=f):Pe[0]<=he&&((ze=Q<2&&he<Pe[1])?(Ce=0,De.v=de,De.n=Pe[1]):he<Fe&&(ze=Q<3||Pe[0]>de||de>Fe)&&(Pe[4]=Q,Pe[5]=de,De.n=Fe,Ce=0))}if(ze||Q>1)return L;throw Be=!0,de}return function(Q,de,ze){if(ee>1)throw TypeError("Generator is already running");for(Be&&de===1&&Xe(de,ze),Ce=de,Oe=ze;(m=Ce<2?f:Oe)||!Be;){O||(Ce?Ce<3?(Ce>1&&(De.n=-1),Xe(Ce,Oe)):De.n=Oe:De.v=Oe);try{if(ee=2,O){if(Ce||(Q="next"),m=O[Q]){if(!(m=m.call(O,Oe)))throw TypeError("iterator result is not an object");if(!m.done)return m;Oe=m.value,Ce<2&&(Ce=0)}else Ce===1&&(m=O.return)&&m.call(O),Ce<2&&(Oe=TypeError("The iterator does not provide a '"+Q+"' method"),Ce=1);O=f}else if((m=(Be=De.n<0)?Oe:J.call($,De))!==L)break}catch(Pe){O=f,Ce=1,Oe=Pe}finally{ee=1}}return{value:m,done:Be}}})(K,ke,q),!0),H}var L={};function P(){}function V(){}function F(){}m=Object.getPrototypeOf;var Y=[][T]?m(m([][T]())):(c(m={},T,(function(){return this})),m),W=F.prototype=P.prototype=Object.create(Y);function se(K){return Object.setPrototypeOf?Object.setPrototypeOf(K,F):(K.__proto__=F,c(K,E,"GeneratorFunction")),K.prototype=Object.create(W),K}return V.prototype=F,c(W,"constructor",F),c(F,"constructor",V),V.displayName="GeneratorFunction",c(F,E,"GeneratorFunction"),c(W),c(W,E,"Generator"),c(W,T,(function(){return this})),c(W,"toString",(function(){return"[object Generator]"})),(t.exports=u=function(){return{w:C,m:se}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){function i(c,u,f,m){var b=Object.defineProperty;try{b({},"",{})}catch{b=0}t.exports=i=function(T,E,C,L){function P(V,F){i(T,V,(function(Y){return this._invoke(V,F,Y)}))}E?b?b(T,E,{value:C,enumerable:!L,configurable:!L,writable:!L}):T[E]=C:(P("next",0),P("throw",1),P("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,i(c,u,f,m)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(70),u=i(73);t.exports=function(f,m,b,T,E){return new u(c().w(f,m,b,T),E||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(69),u=i(71);t.exports=function f(m,b){function T(C,L,P,V){try{var F=m[C](L),Y=F.value;return Y instanceof c?b.resolve(Y.v).then((function(W){T("next",W,P,V)}),(function(W){T("throw",W,P,V)})):b.resolve(Y).then((function(W){F.value=W,P(F)}),(function(W){return T("throw",W,P,V)}))}catch(W){V(W)}}var E;this.next||(u(f.prototype),u(f.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),u(this,"_invoke",(function(C,L,P){function V(){return new b((function(F,Y){T(C,P,F,Y)}))}return E=E?E.then(V,V):V()}),!0)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){for(var u=-1,f=i==null?0:i.length,m=Array(f);++u<f;)m[u]=c(i[u],u,i);return m}},function(t,a){t.exports=function(){return[]}},function(t,a,i){var c=i(41),u=i(32),f=i(40),m=i(75),b=Object.getOwnPropertySymbols?function(T){for(var E=[];T;)c(E,f(T)),T=u(T);return E}:m;t.exports=b},function(t,a,i){var c=i(41),u=i(12);t.exports=function(f,m,b){var T=m(f);return u(f)?T:c(T,b(f))}},function(t,a,i){var c=i(77),u=i(76),f=i(20);t.exports=function(m){return c(m,f,u)}},function(t,a,i){var c=i(44);t.exports=function(u){if(typeof u=="string"||c(u))return u;var f=u+"";return f=="0"&&1/u==-1/0?"-0":f}},function(t,a,i){var c=i(142),u=i(143),f=i(66),m=i(144);t.exports=function(b,T){return c(b)||u(b,T)||f(b,T)||m()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(155);t.exports=function(u,f){if(u==null)return{};var m,b,T=c(u,f);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(u);for(b=0;b<E.length;b++)m=E[b],f.indexOf(m)===-1&&{}.propertyIsEnumerable.call(u,m)&&(T[m]=u[m])}return T},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(74),u=i(156),f=i(179),m=i(43),b=i(18),T=i(190),E=i(191),C=i(78),L=E((function(P,V){var F={};if(P==null)return F;var Y=!1;V=c(V,(function(se){return se=m(se,P),Y||(Y=se.length>1),se})),b(P,C(P),F),Y&&(F=u(F,7,T));for(var W=V.length;W--;)f(F,V[W]);return F}));t.exports=L},function(t,a,i){var c=i(1),u=i(38),f=i(195),m=i(196);function b(T){var E=typeof Map=="function"?new Map:void 0;return t.exports=b=function(C){if(C===null||!f(C))return C;if(typeof C!="function")throw new TypeError("Super expression must either be null or a function");if(E!==void 0){if(E.has(C))return E.get(C);E.set(C,L)}function L(){return m(C,arguments,c(this).constructor)}return L.prototype=Object.create(C.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),u(L,C)},t.exports.__esModule=!0,t.exports.default=t.exports,b(T)}t.exports=b,t.exports.__esModule=!0,t.exports.default=t.exports},,,,,,,function(t,a,i){t.exports=i(198)},function(t,a,i){var c=i(45),u=i(49),f=i(121),m=i(123),b=i(10),T=i(20),E=i(59);t.exports=function C(L,P,V,F,Y){L!==P&&f(P,(function(W,se){if(Y||(Y=new c),b(W))m(L,P,se,V,C,F,Y);else{var K=F?F(E(L,se),W,se+"",L,P,Y):void 0;K===void 0&&(K=W),u(L,se,K)}}),T)}},function(t,a){t.exports=function(){this.__data__=[],this.size=0}},function(t,a,i){var c=i(22),u=Array.prototype.splice;t.exports=function(f){var m=this.__data__,b=c(m,f);return!(b<0)&&(b==m.length-1?m.pop():u.call(m,b,1),--this.size,!0)}},function(t,a,i){var c=i(22);t.exports=function(u){var f=this.__data__,m=c(f,u);return m<0?void 0:f[m][1]}},function(t,a,i){var c=i(22);t.exports=function(u){return c(this.__data__,u)>-1}},function(t,a,i){var c=i(22);t.exports=function(u,f){var m=this.__data__,b=c(m,u);return b<0?(++this.size,m.push([u,f])):m[b][1]=f,this}},function(t,a,i){var c=i(21);t.exports=function(){this.__data__=new c,this.size=0}},function(t,a){t.exports=function(i){var c=this.__data__,u=c.delete(i);return this.size=c.size,u}},function(t,a){t.exports=function(i){return this.__data__.get(i)}},function(t,a){t.exports=function(i){return this.__data__.has(i)}},function(t,a,i){var c=i(21),u=i(27),f=i(48);t.exports=function(m,b){var T=this.__data__;if(T instanceof c){var E=T.__data__;if(!u||E.length<199)return E.push([m,b]),this.size=++T.size,this;T=this.__data__=new f(E)}return T.set(m,b),this.size=T.size,this}},function(t,a,i){var c=i(28),u=i(106),f=i(10),m=i(47),b=/^\[object .+?Constructor\]$/,T=Function.prototype,E=Object.prototype,C=T.toString,L=E.hasOwnProperty,P=RegExp("^"+C.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(V){return!(!f(V)||u(V))&&(c(V)?P:b).test(m(V))}},function(t,a){var i;i=(function(){return this})();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}t.exports=i},function(t,a,i){var c=i(19),u=Object.prototype,f=u.hasOwnProperty,m=u.toString,b=c?c.toStringTag:void 0;t.exports=function(T){var E=f.call(T,b),C=T[b];try{T[b]=void 0;var L=!0}catch{}var P=m.call(T);return L&&(E?T[b]=C:delete T[b]),P}},function(t,a){var i=Object.prototype.toString;t.exports=function(c){return i.call(c)}},function(t,a,i){var c,u=i(107),f=(c=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";t.exports=function(m){return!!f&&f in m}},function(t,a,i){var c=i(8)["__core-js_shared__"];t.exports=c},function(t,a){t.exports=function(i,c){return i?.[c]}},function(t,a,i){var c=i(110),u=i(21),f=i(27);t.exports=function(){this.size=0,this.__data__={hash:new c,map:new(f||u),string:new c}}},function(t,a,i){var c=i(111),u=i(112),f=i(113),m=i(114),b=i(115);function T(E){var C=-1,L=E==null?0:E.length;for(this.clear();++C<L;){var P=E[C];this.set(P[0],P[1])}}T.prototype.clear=c,T.prototype.delete=u,T.prototype.get=f,T.prototype.has=m,T.prototype.set=b,t.exports=T},function(t,a,i){var c=i(24);t.exports=function(){this.__data__=c?c(null):{},this.size=0}},function(t,a){t.exports=function(i){var c=this.has(i)&&delete this.__data__[i];return this.size-=c?1:0,c}},function(t,a,i){var c=i(24),u=Object.prototype.hasOwnProperty;t.exports=function(f){var m=this.__data__;if(c){var b=m[f];return b==="__lodash_hash_undefined__"?void 0:b}return u.call(m,f)?m[f]:void 0}},function(t,a,i){var c=i(24),u=Object.prototype.hasOwnProperty;t.exports=function(f){var m=this.__data__;return c?m[f]!==void 0:u.call(m,f)}},function(t,a,i){var c=i(24);t.exports=function(u,f){var m=this.__data__;return this.size+=this.has(u)?0:1,m[u]=c&&f===void 0?"__lodash_hash_undefined__":f,this}},function(t,a,i){var c=i(25);t.exports=function(u){var f=c(this,u).delete(u);return this.size-=f?1:0,f}},function(t,a){t.exports=function(i){var c=typeof i;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?i!=="__proto__":i===null}},function(t,a,i){var c=i(25);t.exports=function(u){return c(this,u).get(u)}},function(t,a,i){var c=i(25);t.exports=function(u){return c(this,u).has(u)}},function(t,a,i){var c=i(25);t.exports=function(u,f){var m=c(this,u),b=m.size;return m.set(u,f),this.size+=m.size==b?0:1,this}},function(t,a,i){var c=i(122)();t.exports=c},function(t,a){t.exports=function(i){return function(c,u,f){for(var m=-1,b=Object(c),T=f(c),E=T.length;E--;){var C=T[i?E:++m];if(u(b[C],C,b)===!1)break}return c}}},function(t,a,i){var c=i(49),u=i(51),f=i(52),m=i(53),b=i(54),T=i(34),E=i(12),C=i(127),L=i(35),P=i(28),V=i(10),F=i(57),Y=i(58),W=i(59),se=i(130);t.exports=function(K,fe,ke,q,B,H,J){var $=W(K,ke),Z=W(fe,ke),O=J.get(Z);if(O)c(K,ke,O);else{var Ce=H?H($,Z,ke+"",K,fe,J):void 0,Oe=Ce===void 0;if(Oe){var ee=E(Z),_e=!ee&&L(Z),Be=!ee&&!_e&&Y(Z);Ce=Z,ee||_e||Be?E($)?Ce=$:C($)?Ce=m($):_e?(Oe=!1,Ce=u(Z,!0)):Be?(Oe=!1,Ce=f(Z,!0)):Ce=[]:F(Z)||T(Z)?(Ce=$,T($)?Ce=se($):V($)&&!P($)||(Ce=b(Z))):Oe=!1}Oe&&(J.set(Z,Ce),B(Ce,Z,q,H,J),J.delete(Z)),c(K,ke,Ce)}}},function(t,a,i){var c=i(8).Uint8Array;t.exports=c},function(t,a,i){var c=i(10),u=Object.create,f=(function(){function m(){}return function(b){if(!c(b))return{};if(u)return u(b);m.prototype=b;var T=new m;return m.prototype=void 0,T}})();t.exports=f},function(t,a,i){var c=i(17),u=i(11);t.exports=function(f){return u(f)&&c(f)=="[object Arguments]"}},function(t,a,i){var c=i(26),u=i(11);t.exports=function(f){return u(f)&&c(f)}},function(t,a){t.exports=function(){return!1}},function(t,a,i){var c=i(17),u=i(56),f=i(11),m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m["[object Arguments]"]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m["[object Function]"]=m["[object Map]"]=m["[object Number]"]=m["[object Object]"]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1,t.exports=function(b){return f(b)&&u(b.length)&&!!m[c(b)]}},function(t,a,i){var c=i(18),u=i(20);t.exports=function(f){return c(f,u(f))}},function(t,a){t.exports=function(i,c){for(var u=-1,f=Array(i);++u<i;)f[u]=c(u);return f}},function(t,a,i){var c=i(10),u=i(33),f=i(133),m=Object.prototype.hasOwnProperty;t.exports=function(b){if(!c(b))return f(b);var T=u(b),E=[];for(var C in b)(C!="constructor"||!T&&m.call(b,C))&&E.push(C);return E}},function(t,a){t.exports=function(i){var c=[];if(i!=null)for(var u in Object(i))c.push(u);return c}},function(t,a,i){var c=i(135),u=i(140);t.exports=function(f){return c((function(m,b){var T=-1,E=b.length,C=E>1?b[E-1]:void 0,L=E>2?b[2]:void 0;for(C=f.length>3&&typeof C=="function"?(E--,C):void 0,L&&u(b[0],b[1],L)&&(C=E<3?void 0:C,E=1),m=Object(m);++T<E;){var P=b[T];P&&f(m,P,T,C)}return m}))}},function(t,a,i){var c=i(63),u=i(64),f=i(65);t.exports=function(m,b){return f(u(m,b,c),m+"")}},function(t,a){t.exports=function(i,c,u){switch(u.length){case 0:return i.call(c);case 1:return i.call(c,u[0]);case 2:return i.call(c,u[0],u[1]);case 3:return i.call(c,u[0],u[1],u[2])}return i.apply(c,u)}},function(t,a,i){var c=i(138),u=i(50),f=i(63),m=u?function(b,T){return u(b,"toString",{configurable:!0,enumerable:!1,value:c(T),writable:!0})}:f;t.exports=m},function(t,a){t.exports=function(i){return function(){return i}}},function(t,a){var i=Date.now;t.exports=function(c){var u=0,f=0;return function(){var m=i(),b=16-(m-f);if(f=m,b>0){if(++u>=800)return arguments[0]}else u=0;return c.apply(void 0,arguments)}}},function(t,a,i){var c=i(23),u=i(26),f=i(62),m=i(10);t.exports=function(b,T,E){if(!m(E))return!1;var C=typeof T;return!!(C=="number"?u(E)&&f(T,E.length):C=="string"&&T in E)&&c(E[T],b)}},function(t,a){typeof window<"u"&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)})),typeof Math.imul!="function"&&(Math.imul=function(i,c){var u=65535&i,f=65535&c;return u*f+((i>>>16&65535)*f+u*(c>>>16&65535)<<16>>>0)|0}),typeof Object.assign!="function"&&(Object.assign=function(i){if(i===null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(i),u=1;u<arguments.length;u++){var f=arguments[u];if(f!==null)for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(c[m]=f[m])}return c})},function(t,a){t.exports=function(i){if(Array.isArray(i))return i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){var u=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(u!=null){var f,m,b,T,E=[],C=!0,L=!1;try{if(b=(u=u.call(i)).next,c===0){if(Object(u)!==u)return;C=!1}else for(;!(C=(f=b.call(u)).done)&&(E.push(f.value),E.length!==c);C=!0);}catch(P){L=!0,m=P}finally{try{if(!C&&u.return!=null&&(T=u.return(),Object(T)!==T))return}finally{if(L)throw m}}return E}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(9).default;t.exports=function(u,f){if(c(u)!="object"||!u)return u;var m=u[Symbol.toPrimitive];if(m!==void 0){var b=m.call(u,f||"default");if(c(b)!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(u)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(69),u=i(70),f=i(147),m=i(72),b=i(73),T=i(148),E=i(149);function C(){var L=u(),P=L.m(C),V=(Object.getPrototypeOf?Object.getPrototypeOf(P):P.__proto__).constructor;function F(se){var K=typeof se=="function"&&se.constructor;return!!K&&(K===V||(K.displayName||K.name)==="GeneratorFunction")}var Y={throw:1,return:2,break:3,continue:3};function W(se){var K,fe;return function(ke){K||(K={stop:function(){return fe(ke.a,2)},catch:function(){return ke.v},abrupt:function(q,B){return fe(ke.a,Y[q],B)},delegateYield:function(q,B,H){return K.resultName=B,fe(ke.d,E(q),H)},finish:function(q){return fe(ke.f,q)}},fe=function(q,B,H){ke.p=K.prev,ke.n=K.next;try{return q(B,H)}finally{K.next=ke.n}}),K.resultName&&(K[K.resultName]=ke.v,K.resultName=void 0),K.sent=ke.v,K.next=ke.n;try{return se.call(this,K)}finally{ke.p=K.prev,ke.n=K.next}}}return(t.exports=C=function(){return{wrap:function(se,K,fe,ke){return L.w(W(se),K,fe,ke&&ke.reverse())},isGeneratorFunction:F,mark:L.m,awrap:function(se,K){return new c(se,K)},AsyncIterator:b,async:function(se,K,fe,ke,q){return(F(K)?m:f)(W(se),K,fe,ke,q)},keys:T,values:E}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=C,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(72);t.exports=function(u,f,m,b,T){var E=c(u,f,m,b,T);return E.next().then((function(C){return C.done?C.value:E.next()}))},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i){var c=Object(i),u=[];for(var f in c)u.unshift(f);return function m(){for(;u.length;)if((f=u.pop())in c)return m.value=f,m.done=!1,m;return m.done=!0,m}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(9).default;t.exports=function(u){if(u!=null){var f=u[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],m=0;if(f)return f.call(u);if(typeof u.next=="function")return u;if(!isNaN(u.length))return{next:function(){return u&&m>=u.length&&(u=void 0),{value:u&&u[m++],done:!u}}}}throw new TypeError(c(u)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(1);t.exports=function(u,f){for(;!{}.hasOwnProperty.call(u,f)&&(u=c(u))!==null;);return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(67);t.exports=function(u){if(Array.isArray(u))return c(u)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){if(i==null)return{};var u={};for(var f in i)if({}.hasOwnProperty.call(i,f)){if(c.indexOf(f)!==-1)continue;u[f]=i[f]}return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(45),u=i(157),f=i(60),m=i(158),b=i(161),T=i(51),E=i(53),C=i(162),L=i(164),P=i(165),V=i(78),F=i(42),Y=i(170),W=i(171),se=i(54),K=i(12),fe=i(35),ke=i(175),q=i(10),B=i(177),H=i(39),J=i(20),$={};$["[object Arguments]"]=$["[object Array]"]=$["[object ArrayBuffer]"]=$["[object DataView]"]=$["[object Boolean]"]=$["[object Date]"]=$["[object Float32Array]"]=$["[object Float64Array]"]=$["[object Int8Array]"]=$["[object Int16Array]"]=$["[object Int32Array]"]=$["[object Map]"]=$["[object Number]"]=$["[object Object]"]=$["[object RegExp]"]=$["[object Set]"]=$["[object String]"]=$["[object Symbol]"]=$["[object Uint8Array]"]=$["[object Uint8ClampedArray]"]=$["[object Uint16Array]"]=$["[object Uint32Array]"]=!0,$["[object Error]"]=$["[object Function]"]=$["[object WeakMap]"]=!1,t.exports=function Z(O,Ce,Oe,ee,_e,Be){var De,Xe=1&Ce,Q=2&Ce,de=4&Ce;if(Oe&&(De=_e?Oe(O,ee,_e,Be):Oe(O)),De!==void 0)return De;if(!q(O))return O;var ze=K(O);if(ze){if(De=Y(O),!Xe)return E(O,De)}else{var Pe=F(O),he=Pe=="[object Function]"||Pe=="[object GeneratorFunction]";if(fe(O))return T(O,Xe);if(Pe=="[object Object]"||Pe=="[object Arguments]"||he&&!_e){if(De=Q||he?{}:se(O),!Xe)return Q?L(O,b(De,O)):C(O,m(De,O))}else{if(!$[Pe])return _e?O:{};De=W(O,Pe,Xe)}}Be||(Be=new c);var Fe=Be.get(O);if(Fe)return Fe;Be.set(O,De),B(O)?O.forEach((function(ye){De.add(Z(ye,Ce,Oe,ye,O,Be))})):ke(O)&&O.forEach((function(ye,Se){De.set(Se,Z(ye,Ce,Oe,Se,O,Be))}));var ue=ze?void 0:(de?Q?V:P:Q?J:H)(O);return u(ue||O,(function(ye,Se){ue&&(ye=O[Se=ye]),f(De,Se,Z(ye,Ce,Oe,Se,O,Be))})),De}},function(t,a){t.exports=function(i,c){for(var u=-1,f=i==null?0:i.length;++u<f&&c(i[u],u,i)!==!1;);return i}},function(t,a,i){var c=i(18),u=i(39);t.exports=function(f,m){return f&&c(m,u(m),f)}},function(t,a,i){var c=i(33),u=i(160),f=Object.prototype.hasOwnProperty;t.exports=function(m){if(!c(m))return u(m);var b=[];for(var T in Object(m))f.call(m,T)&&T!="constructor"&&b.push(T);return b}},function(t,a,i){var c=i(55)(Object.keys,Object);t.exports=c},function(t,a,i){var c=i(18),u=i(20);t.exports=function(f,m){return f&&c(m,u(m),f)}},function(t,a,i){var c=i(18),u=i(40);t.exports=function(f,m){return c(f,u(f),m)}},function(t,a){t.exports=function(i,c){for(var u=-1,f=i==null?0:i.length,m=0,b=[];++u<f;){var T=i[u];c(T,u,i)&&(b[m++]=T)}return b}},function(t,a,i){var c=i(18),u=i(76);t.exports=function(f,m){return c(f,u(f),m)}},function(t,a,i){var c=i(77),u=i(40),f=i(39);t.exports=function(m){return c(m,f,u)}},function(t,a,i){var c=i(14)(i(8),"DataView");t.exports=c},function(t,a,i){var c=i(14)(i(8),"Promise");t.exports=c},function(t,a,i){var c=i(14)(i(8),"Set");t.exports=c},function(t,a,i){var c=i(14)(i(8),"WeakMap");t.exports=c},function(t,a){var i=Object.prototype.hasOwnProperty;t.exports=function(c){var u=c.length,f=new c.constructor(u);return u&&typeof c[0]=="string"&&i.call(c,"index")&&(f.index=c.index,f.input=c.input),f}},function(t,a,i){var c=i(31),u=i(172),f=i(173),m=i(174),b=i(52);t.exports=function(T,E,C){var L=T.constructor;switch(E){case"[object ArrayBuffer]":return c(T);case"[object Boolean]":case"[object Date]":return new L(+T);case"[object DataView]":return u(T,C);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return b(T,C);case"[object Map]":return new L;case"[object Number]":case"[object String]":return new L(T);case"[object RegExp]":return f(T);case"[object Set]":return new L;case"[object Symbol]":return m(T)}}},function(t,a,i){var c=i(31);t.exports=function(u,f){var m=f?c(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.byteLength)}},function(t,a){var i=/\w*$/;t.exports=function(c){var u=new c.constructor(c.source,i.exec(c));return u.lastIndex=c.lastIndex,u}},function(t,a,i){var c=i(19),u=c?c.prototype:void 0,f=u?u.valueOf:void 0;t.exports=function(m){return f?Object(f.call(m)):{}}},function(t,a,i){var c=i(176),u=i(36),f=i(37),m=f&&f.isMap,b=m?u(m):c;t.exports=b},function(t,a,i){var c=i(42),u=i(11);t.exports=function(f){return u(f)&&c(f)=="[object Map]"}},function(t,a,i){var c=i(178),u=i(36),f=i(37),m=f&&f.isSet,b=m?u(m):c;t.exports=b},function(t,a,i){var c=i(42),u=i(11);t.exports=function(f){return u(f)&&c(f)=="[object Set]"}},function(t,a,i){var c=i(43),u=i(186),f=i(187),m=i(79);t.exports=function(b,T){return T=c(T,b),(b=f(b,T))==null||delete b[m(u(T))]}},function(t,a,i){var c=i(12),u=i(44),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;t.exports=function(b,T){if(c(b))return!1;var E=typeof b;return!(E!="number"&&E!="symbol"&&E!="boolean"&&b!=null&&!u(b))||m.test(b)||!f.test(b)||T!=null&&b in Object(T)}},function(t,a,i){var c=i(182),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,m=c((function(b){var T=[];return b.charCodeAt(0)===46&&T.push(""),b.replace(u,(function(E,C,L,P){T.push(L?P.replace(f,"$1"):C||E)})),T}));t.exports=m},function(t,a,i){var c=i(183);t.exports=function(u){var f=c(u,(function(b){return m.size===500&&m.clear(),b})),m=f.cache;return f}},function(t,a,i){var c=i(48);function u(f,m){if(typeof f!="function"||m!=null&&typeof m!="function")throw new TypeError("Expected a function");var b=function(){var T=arguments,E=m?m.apply(this,T):T[0],C=b.cache;if(C.has(E))return C.get(E);var L=f.apply(this,T);return b.cache=C.set(E,L)||C,L};return b.cache=new(u.Cache||c),b}u.Cache=c,t.exports=u},function(t,a,i){var c=i(185);t.exports=function(u){return u==null?"":c(u)}},function(t,a,i){var c=i(19),u=i(74),f=i(12),m=i(44),b=c?c.prototype:void 0,T=b?b.toString:void 0;t.exports=function E(C){if(typeof C=="string")return C;if(f(C))return u(C,E)+"";if(m(C))return T?T.call(C):"";var L=C+"";return L=="0"&&1/C==-1/0?"-0":L}},function(t,a){t.exports=function(i){var c=i==null?0:i.length;return c?i[c-1]:void 0}},function(t,a,i){var c=i(188),u=i(189);t.exports=function(f,m){return m.length<2?f:c(f,u(m,0,-1))}},function(t,a,i){var c=i(43),u=i(79);t.exports=function(f,m){for(var b=0,T=(m=c(m,f)).length;f!=null&&b<T;)f=f[u(m[b++])];return b&&b==T?f:void 0}},function(t,a){t.exports=function(i,c,u){var f=-1,m=i.length;c<0&&(c=-c>m?0:m+c),(u=u>m?m:u)<0&&(u+=m),m=c>u?0:u-c>>>0,c>>>=0;for(var b=Array(m);++f<m;)b[f]=i[f+c];return b}},function(t,a,i){var c=i(57);t.exports=function(u){return c(u)?void 0:u}},function(t,a,i){var c=i(192),u=i(64),f=i(65);t.exports=function(m){return f(u(m,void 0,c),m+"")}},function(t,a,i){var c=i(193);t.exports=function(u){return u!=null&&u.length?c(u,1):[]}},function(t,a,i){var c=i(41),u=i(194);t.exports=function f(m,b,T,E,C){var L=-1,P=m.length;for(T||(T=u),C||(C=[]);++L<P;){var V=m[L];b>0&&T(V)?b>1?f(V,b-1,T,E,C):c(C,V):E||(C[C.length]=V)}return C}},function(t,a,i){var c=i(19),u=i(34),f=i(12),m=c?c.isConcatSpreadable:void 0;t.exports=function(b){return f(b)||u(b)||!!(m&&b&&b[m])}},function(t,a){t.exports=function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(197),u=i(38);t.exports=function(f,m,b){if(c())return Reflect.construct.apply(null,arguments);var T=[null];T.push.apply(T,m);var E=new(f.bind.apply(f,T));return b&&u(E,b.prototype),E},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){function i(){try{var c=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(t.exports=i=function(){return!!c},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){i.r(a),i.d(a,"BarcodeDecoder",(function(){return Rl})),i.d(a,"Readers",(function(){return m})),i.d(a,"CameraAccess",(function(){return Co})),i.d(a,"ImageDebug",(function(){return ia})),i.d(a,"ImageWrapper",(function(){return An})),i.d(a,"ResultCollector",(function(){return ua}));var c={};i.r(c),i.d(c,"create",(function(){return B})),i.d(c,"clone",(function(){return H})),i.d(c,"copy",(function(){return J})),i.d(c,"identity",(function(){return $})),i.d(c,"fromValues",(function(){return Z})),i.d(c,"set",(function(){return O})),i.d(c,"transpose",(function(){return Ce})),i.d(c,"invert",(function(){return Oe})),i.d(c,"adjoint",(function(){return ee})),i.d(c,"determinant",(function(){return _e})),i.d(c,"multiply",(function(){return Be})),i.d(c,"rotate",(function(){return De})),i.d(c,"scale",(function(){return Xe})),i.d(c,"fromRotation",(function(){return Q})),i.d(c,"fromScaling",(function(){return de})),i.d(c,"str",(function(){return ze})),i.d(c,"frob",(function(){return Pe})),i.d(c,"LDU",(function(){return he})),i.d(c,"add",(function(){return Fe})),i.d(c,"subtract",(function(){return ue})),i.d(c,"exactEquals",(function(){return ye})),i.d(c,"equals",(function(){return Se})),i.d(c,"multiplyScalar",(function(){return et})),i.d(c,"multiplyScalarAndAdd",(function(){return Me})),i.d(c,"mul",(function(){return mt})),i.d(c,"sub",(function(){return dt}));var u={};i.r(u),i.d(u,"create",(function(){return At})),i.d(u,"clone",(function(){return Rt})),i.d(u,"fromValues",(function(){return jt})),i.d(u,"copy",(function(){return ae})),i.d(u,"set",(function(){return Je})),i.d(u,"add",(function(){return ge})),i.d(u,"subtract",(function(){return be})),i.d(u,"multiply",(function(){return xe})),i.d(u,"divide",(function(){return nt})),i.d(u,"ceil",(function(){return ct})),i.d(u,"floor",(function(){return We})),i.d(u,"min",(function(){return _t})),i.d(u,"max",(function(){return wt})),i.d(u,"round",(function(){return Vt})),i.d(u,"scale",(function(){return Lt})),i.d(u,"scaleAndAdd",(function(){return nn})),i.d(u,"distance",(function(){return Kt})),i.d(u,"squaredDistance",(function(){return rn})),i.d(u,"length",(function(){return Ys})),i.d(u,"squaredLength",(function(){return Fn})),i.d(u,"negate",(function(){return Le})),i.d(u,"inverse",(function(){return tt})),i.d(u,"normalize",(function(){return it})),i.d(u,"dot",(function(){return Ut})),i.d(u,"cross",(function(){return Et})),i.d(u,"lerp",(function(){return ne})),i.d(u,"random",(function(){return ve})),i.d(u,"transformMat2",(function(){return st})),i.d(u,"transformMat2d",(function(){return ot})),i.d(u,"transformMat3",(function(){return xt})),i.d(u,"transformMat4",(function(){return sn})),i.d(u,"rotate",(function(){return yn})),i.d(u,"angle",(function(){return Is})),i.d(u,"signedAngle",(function(){return Wn})),i.d(u,"zero",(function(){return xn})),i.d(u,"str",(function(){return Un})),i.d(u,"exactEquals",(function(){return Yt})),i.d(u,"equals",(function(){return Tn})),i.d(u,"len",(function(){return os})),i.d(u,"sub",(function(){return me})),i.d(u,"mul",(function(){return Ve})),i.d(u,"div",(function(){return Ze})),i.d(u,"dist",(function(){return Ye})),i.d(u,"sqrDist",(function(){return ut})),i.d(u,"sqrLen",(function(){return ft})),i.d(u,"forEach",(function(){return Tt}));var f={};i.r(f),i.d(f,"create",(function(){return ie})),i.d(f,"clone",(function(){return at})),i.d(f,"length",(function(){return It})),i.d(f,"fromValues",(function(){return Ft})),i.d(f,"copy",(function(){return _n})),i.d(f,"set",(function(){return mn})),i.d(f,"add",(function(){return Bn})),i.d(f,"subtract",(function(){return ls})),i.d(f,"multiply",(function(){return gs})),i.d(f,"divide",(function(){return ts})),i.d(f,"ceil",(function(){return Os})),i.d(f,"floor",(function(){return Hn})),i.d(f,"min",(function(){return Ha})),i.d(f,"max",(function(){return Ei})),i.d(f,"round",(function(){return cr})),i.d(f,"scale",(function(){return Dt})),i.d(f,"scaleAndAdd",(function(){return Sr})),i.d(f,"distance",(function(){return ur})),i.d(f,"squaredDistance",(function(){return Br})),i.d(f,"squaredLength",(function(){return Ni})),i.d(f,"negate",(function(){return $a})),i.d(f,"inverse",(function(){return Qs})),i.d(f,"normalize",(function(){return ns})),i.d(f,"dot",(function(){return ss})),i.d(f,"cross",(function(){return Ga})),i.d(f,"lerp",(function(){return bl})),i.d(f,"slerp",(function(){return En})),i.d(f,"hermite",(function(){return ji})),i.d(f,"bezier",(function(){return sa})),i.d(f,"random",(function(){return ki})),i.d(f,"transformMat4",(function(){return Xs})),i.d(f,"transformMat3",(function(){return yo})),i.d(f,"transformQuat",(function(){return lc})),i.d(f,"rotateX",(function(){return xl})),i.d(f,"rotateY",(function(){return Wa})),i.d(f,"rotateZ",(function(){return cc})),i.d(f,"angle",(function(){return Ka})),i.d(f,"zero",(function(){return Js})),i.d(f,"str",(function(){return uc})),i.d(f,"exactEquals",(function(){return _l})),i.d(f,"equals",(function(){return wl})),i.d(f,"sub",(function(){return vo})),i.d(f,"mul",(function(){return dc})),i.d(f,"div",(function(){return Ya})),i.d(f,"dist",(function(){return bo})),i.d(f,"sqrDist",(function(){return zr})),i.d(f,"len",(function(){return Sl})),i.d(f,"sqrLen",(function(){return Tr})),i.d(f,"forEach",(function(){return Qa}));var m={};i.r(m),i.d(m,"BarcodeReader",(function(){return hr})),i.d(m,"TwoOfFiveReader",(function(){return jl})),i.d(m,"NewCodabarReader",(function(){return Ps})),i.d(m,"Code128Reader",(function(){return kl})),i.d(m,"Code32Reader",(function(){return vn})),i.d(m,"Code39Reader",(function(){return lt})),i.d(m,"Code39VINReader",(function(){return Nr})),i.d(m,"Code93Reader",(function(){return Ii})),i.d(m,"EAN2Reader",(function(){return yu})),i.d(m,"EAN5Reader",(function(){return xu})),i.d(m,"EAN8Reader",(function(){return _u})),i.d(m,"EANReader",(function(){return Hr})),i.d(m,"I2of5Reader",(function(){return ah})),i.d(m,"PharmacodeReader",(function(){return gc})),i.d(m,"UPCEReader",(function(){return yc})),i.d(m,"UPCReader",(function(){return Oi}));var b=i(9),T=i.n(b),E=i(15),C=i.n(E),L=(i(141),i(80)),P=i.n(L),V=i(2),F=i.n(V),Y=i(3),W=i.n(Y),se=i(0),K=i.n(se),fe=typeof Float32Array<"u"?Float32Array:Array,ke=Math.random;function q(g){return g>=0?Math.round(g):g%.5==0?Math.floor(g):Math.round(g)}function B(){var g=new fe(4);return fe!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}function H(g){var x=new fe(4);return x[0]=g[0],x[1]=g[1],x[2]=g[2],x[3]=g[3],x}function J(g,x){return g[0]=x[0],g[1]=x[1],g[2]=x[2],g[3]=x[3],g}function $(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=1,g}function Z(g,x,h,y){var _=new fe(4);return _[0]=g,_[1]=x,_[2]=h,_[3]=y,_}function O(g,x,h,y,_){return g[0]=x,g[1]=h,g[2]=y,g[3]=_,g}function Ce(g,x){if(g===x){var h=x[1];g[1]=x[2],g[2]=h}else g[0]=x[0],g[1]=x[2],g[2]=x[1],g[3]=x[3];return g}function Oe(g,x){var h=x[0],y=x[1],_=x[2],S=x[3],N=h*S-_*y;return N?(N=1/N,g[0]=S*N,g[1]=-y*N,g[2]=-_*N,g[3]=h*N,g):null}function ee(g,x){var h=x[0];return g[0]=x[3],g[1]=-x[1],g[2]=-x[2],g[3]=h,g}function _e(g){return g[0]*g[3]-g[2]*g[1]}function Be(g,x,h){var y=x[0],_=x[1],S=x[2],N=x[3],A=h[0],D=h[1],M=h[2],z=h[3];return g[0]=y*A+S*D,g[1]=_*A+N*D,g[2]=y*M+S*z,g[3]=_*M+N*z,g}function De(g,x,h){var y=x[0],_=x[1],S=x[2],N=x[3],A=Math.sin(h),D=Math.cos(h);return g[0]=y*D+S*A,g[1]=_*D+N*A,g[2]=y*-A+S*D,g[3]=_*-A+N*D,g}function Xe(g,x,h){var y=x[0],_=x[1],S=x[2],N=x[3],A=h[0],D=h[1];return g[0]=y*A,g[1]=_*A,g[2]=S*D,g[3]=N*D,g}function Q(g,x){var h=Math.sin(x),y=Math.cos(x);return g[0]=y,g[1]=h,g[2]=-h,g[3]=y,g}function de(g,x){return g[0]=x[0],g[1]=0,g[2]=0,g[3]=x[1],g}function ze(g){return"mat2("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+")"}function Pe(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]+g[3]*g[3])}function he(g,x,h,y){return g[2]=y[2]/y[0],h[0]=y[0],h[1]=y[1],h[3]=y[3]-g[2]*h[1],[g,x,h]}function Fe(g,x,h){return g[0]=x[0]+h[0],g[1]=x[1]+h[1],g[2]=x[2]+h[2],g[3]=x[3]+h[3],g}function ue(g,x,h){return g[0]=x[0]-h[0],g[1]=x[1]-h[1],g[2]=x[2]-h[2],g[3]=x[3]-h[3],g}function ye(g,x){return g[0]===x[0]&&g[1]===x[1]&&g[2]===x[2]&&g[3]===x[3]}function Se(g,x){var h=g[0],y=g[1],_=g[2],S=g[3],N=x[0],A=x[1],D=x[2],M=x[3];return Math.abs(h-N)<=1e-6*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(y-A)<=1e-6*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(_-D)<=1e-6*Math.max(1,Math.abs(_),Math.abs(D))&&Math.abs(S-M)<=1e-6*Math.max(1,Math.abs(S),Math.abs(M))}function et(g,x,h){return g[0]=x[0]*h,g[1]=x[1]*h,g[2]=x[2]*h,g[3]=x[3]*h,g}function Me(g,x,h,y){return g[0]=x[0]+h[0]*y,g[1]=x[1]+h[1]*y,g[2]=x[2]+h[2]*y,g[3]=x[3]+h[3]*y,g}var mt=Be,dt=ue;function At(){var g=new fe(2);return fe!=Float32Array&&(g[0]=0,g[1]=0),g}function Rt(g){var x=new fe(2);return x[0]=g[0],x[1]=g[1],x}function jt(g,x){var h=new fe(2);return h[0]=g,h[1]=x,h}function ae(g,x){return g[0]=x[0],g[1]=x[1],g}function Je(g,x,h){return g[0]=x,g[1]=h,g}function ge(g,x,h){return g[0]=x[0]+h[0],g[1]=x[1]+h[1],g}function be(g,x,h){return g[0]=x[0]-h[0],g[1]=x[1]-h[1],g}function xe(g,x,h){return g[0]=x[0]*h[0],g[1]=x[1]*h[1],g}function nt(g,x,h){return g[0]=x[0]/h[0],g[1]=x[1]/h[1],g}function ct(g,x){return g[0]=Math.ceil(x[0]),g[1]=Math.ceil(x[1]),g}function We(g,x){return g[0]=Math.floor(x[0]),g[1]=Math.floor(x[1]),g}function _t(g,x,h){return g[0]=Math.min(x[0],h[0]),g[1]=Math.min(x[1],h[1]),g}function wt(g,x,h){return g[0]=Math.max(x[0],h[0]),g[1]=Math.max(x[1],h[1]),g}function Vt(g,x){return g[0]=q(x[0]),g[1]=q(x[1]),g}function Lt(g,x,h){return g[0]=x[0]*h,g[1]=x[1]*h,g}function nn(g,x,h,y){return g[0]=x[0]+h[0]*y,g[1]=x[1]+h[1]*y,g}function Kt(g,x){var h=x[0]-g[0],y=x[1]-g[1];return Math.sqrt(h*h+y*y)}function rn(g,x){var h=x[0]-g[0],y=x[1]-g[1];return h*h+y*y}function Ys(g){var x=g[0],h=g[1];return Math.sqrt(x*x+h*h)}function Fn(g){var x=g[0],h=g[1];return x*x+h*h}function Le(g,x){return g[0]=-x[0],g[1]=-x[1],g}function tt(g,x){return g[0]=1/x[0],g[1]=1/x[1],g}function it(g,x){var h=x[0],y=x[1],_=h*h+y*y;return _>0&&(_=1/Math.sqrt(_)),g[0]=x[0]*_,g[1]=x[1]*_,g}function Ut(g,x){return g[0]*x[0]+g[1]*x[1]}function Et(g,x,h){var y=x[0]*h[1]-x[1]*h[0];return g[0]=g[1]=0,g[2]=y,g}function ne(g,x,h,y){var _=x[0],S=x[1];return g[0]=_+y*(h[0]-_),g[1]=S+y*(h[1]-S),g}function ve(g,x){x=x===void 0?1:x;var h=2*ke()*Math.PI;return g[0]=Math.cos(h)*x,g[1]=Math.sin(h)*x,g}function st(g,x,h){var y=x[0],_=x[1];return g[0]=h[0]*y+h[2]*_,g[1]=h[1]*y+h[3]*_,g}function ot(g,x,h){var y=x[0],_=x[1];return g[0]=h[0]*y+h[2]*_+h[4],g[1]=h[1]*y+h[3]*_+h[5],g}function xt(g,x,h){var y=x[0],_=x[1];return g[0]=h[0]*y+h[3]*_+h[6],g[1]=h[1]*y+h[4]*_+h[7],g}function sn(g,x,h){var y=x[0],_=x[1];return g[0]=h[0]*y+h[4]*_+h[12],g[1]=h[1]*y+h[5]*_+h[13],g}function yn(g,x,h,y){var _=x[0]-h[0],S=x[1]-h[1],N=Math.sin(y),A=Math.cos(y);return g[0]=_*A-S*N+h[0],g[1]=_*N+S*A+h[1],g}function Is(g,x){var h=g[0],y=g[1],_=x[0],S=x[1];return Math.abs(Math.atan2(y*_-h*S,h*_+y*S))}function Wn(g,x){var h=g[0],y=g[1],_=x[0],S=x[1];return Math.atan2(h*S-y*_,h*_+y*S)}function xn(g){return g[0]=0,g[1]=0,g}function Un(g){return"vec2("+g[0]+", "+g[1]+")"}function Yt(g,x){return g[0]===x[0]&&g[1]===x[1]}function Tn(g,x){var h=g[0],y=g[1],_=x[0],S=x[1];return Math.abs(h-_)<=1e-6*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(y-S)<=1e-6*Math.max(1,Math.abs(y),Math.abs(S))}var qn,os=Ys,me=be,Ve=xe,Ze=nt,Ye=Kt,ut=rn,ft=Fn,Tt=(qn=At(),function(g,x,h,y,_,S){var N,A;for(x||(x=2),h||(h=0),A=y?Math.min(y*x+h,g.length):g.length,N=h;N<A;N+=x)qn[0]=g[N],qn[1]=g[N+1],_(qn,qn,S),g[N]=qn[0],g[N+1]=qn[1];return g});function ie(){var g=new fe(3);return fe!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g}function at(g){var x=new fe(3);return x[0]=g[0],x[1]=g[1],x[2]=g[2],x}function It(g){var x=g[0],h=g[1],y=g[2];return Math.sqrt(x*x+h*h+y*y)}function Ft(g,x,h){var y=new fe(3);return y[0]=g,y[1]=x,y[2]=h,y}function _n(g,x){return g[0]=x[0],g[1]=x[1],g[2]=x[2],g}function mn(g,x,h,y){return g[0]=x,g[1]=h,g[2]=y,g}function Bn(g,x,h){return g[0]=x[0]+h[0],g[1]=x[1]+h[1],g[2]=x[2]+h[2],g}function ls(g,x,h){return g[0]=x[0]-h[0],g[1]=x[1]-h[1],g[2]=x[2]-h[2],g}function gs(g,x,h){return g[0]=x[0]*h[0],g[1]=x[1]*h[1],g[2]=x[2]*h[2],g}function ts(g,x,h){return g[0]=x[0]/h[0],g[1]=x[1]/h[1],g[2]=x[2]/h[2],g}function Os(g,x){return g[0]=Math.ceil(x[0]),g[1]=Math.ceil(x[1]),g[2]=Math.ceil(x[2]),g}function Hn(g,x){return g[0]=Math.floor(x[0]),g[1]=Math.floor(x[1]),g[2]=Math.floor(x[2]),g}function Ha(g,x,h){return g[0]=Math.min(x[0],h[0]),g[1]=Math.min(x[1],h[1]),g[2]=Math.min(x[2],h[2]),g}function Ei(g,x,h){return g[0]=Math.max(x[0],h[0]),g[1]=Math.max(x[1],h[1]),g[2]=Math.max(x[2],h[2]),g}function cr(g,x){return g[0]=q(x[0]),g[1]=q(x[1]),g[2]=q(x[2]),g}function Dt(g,x,h){return g[0]=x[0]*h,g[1]=x[1]*h,g[2]=x[2]*h,g}function Sr(g,x,h,y){return g[0]=x[0]+h[0]*y,g[1]=x[1]+h[1]*y,g[2]=x[2]+h[2]*y,g}function ur(g,x){var h=x[0]-g[0],y=x[1]-g[1],_=x[2]-g[2];return Math.sqrt(h*h+y*y+_*_)}function Br(g,x){var h=x[0]-g[0],y=x[1]-g[1],_=x[2]-g[2];return h*h+y*y+_*_}function Ni(g){var x=g[0],h=g[1],y=g[2];return x*x+h*h+y*y}function $a(g,x){return g[0]=-x[0],g[1]=-x[1],g[2]=-x[2],g}function Qs(g,x){return g[0]=1/x[0],g[1]=1/x[1],g[2]=1/x[2],g}function ns(g,x){var h=x[0],y=x[1],_=x[2],S=h*h+y*y+_*_;return S>0&&(S=1/Math.sqrt(S)),g[0]=x[0]*S,g[1]=x[1]*S,g[2]=x[2]*S,g}function ss(g,x){return g[0]*x[0]+g[1]*x[1]+g[2]*x[2]}function Ga(g,x,h){var y=x[0],_=x[1],S=x[2],N=h[0],A=h[1],D=h[2];return g[0]=_*D-S*A,g[1]=S*N-y*D,g[2]=y*A-_*N,g}function bl(g,x,h,y){var _=x[0],S=x[1],N=x[2];return g[0]=_+y*(h[0]-_),g[1]=S+y*(h[1]-S),g[2]=N+y*(h[2]-N),g}function En(g,x,h,y){var _=Math.acos(Math.min(Math.max(ss(x,h),-1),1)),S=Math.sin(_),N=Math.sin((1-y)*_)/S,A=Math.sin(y*_)/S;return g[0]=N*x[0]+A*h[0],g[1]=N*x[1]+A*h[1],g[2]=N*x[2]+A*h[2],g}function ji(g,x,h,y,_,S){var N=S*S,A=N*(2*S-3)+1,D=N*(S-2)+S,M=N*(S-1),z=N*(3-2*S);return g[0]=x[0]*A+h[0]*D+y[0]*M+_[0]*z,g[1]=x[1]*A+h[1]*D+y[1]*M+_[1]*z,g[2]=x[2]*A+h[2]*D+y[2]*M+_[2]*z,g}function sa(g,x,h,y,_,S){var N=1-S,A=N*N,D=S*S,M=A*N,z=3*S*A,X=3*D*N,re=D*S;return g[0]=x[0]*M+h[0]*z+y[0]*X+_[0]*re,g[1]=x[1]*M+h[1]*z+y[1]*X+_[1]*re,g[2]=x[2]*M+h[2]*z+y[2]*X+_[2]*re,g}function ki(g,x){x=x===void 0?1:x;var h=2*ke()*Math.PI,y=2*ke()-1,_=Math.sqrt(1-y*y)*x;return g[0]=Math.cos(h)*_,g[1]=Math.sin(h)*_,g[2]=y*x,g}function Xs(g,x,h){var y=x[0],_=x[1],S=x[2],N=h[3]*y+h[7]*_+h[11]*S+h[15];return N=N||1,g[0]=(h[0]*y+h[4]*_+h[8]*S+h[12])/N,g[1]=(h[1]*y+h[5]*_+h[9]*S+h[13])/N,g[2]=(h[2]*y+h[6]*_+h[10]*S+h[14])/N,g}function yo(g,x,h){var y=x[0],_=x[1],S=x[2];return g[0]=y*h[0]+_*h[3]+S*h[6],g[1]=y*h[1]+_*h[4]+S*h[7],g[2]=y*h[2]+_*h[5]+S*h[8],g}function lc(g,x,h){var y=h[0],_=h[1],S=h[2],N=h[3],A=x[0],D=x[1],M=x[2],z=_*M-S*D,X=S*A-y*M,re=y*D-_*A;return z+=z,X+=X,re+=re,g[0]=A+N*z+_*re-S*X,g[1]=D+N*X+S*z-y*re,g[2]=M+N*re+y*X-_*z,g}function xl(g,x,h,y){var _=[],S=[];return _[0]=x[0]-h[0],_[1]=x[1]-h[1],_[2]=x[2]-h[2],S[0]=_[0],S[1]=_[1]*Math.cos(y)-_[2]*Math.sin(y),S[2]=_[1]*Math.sin(y)+_[2]*Math.cos(y),g[0]=S[0]+h[0],g[1]=S[1]+h[1],g[2]=S[2]+h[2],g}function Wa(g,x,h,y){var _=[],S=[];return _[0]=x[0]-h[0],_[1]=x[1]-h[1],_[2]=x[2]-h[2],S[0]=_[2]*Math.sin(y)+_[0]*Math.cos(y),S[1]=_[1],S[2]=_[2]*Math.cos(y)-_[0]*Math.sin(y),g[0]=S[0]+h[0],g[1]=S[1]+h[1],g[2]=S[2]+h[2],g}function cc(g,x,h,y){var _=[],S=[];return _[0]=x[0]-h[0],_[1]=x[1]-h[1],_[2]=x[2]-h[2],S[0]=_[0]*Math.cos(y)-_[1]*Math.sin(y),S[1]=_[0]*Math.sin(y)+_[1]*Math.cos(y),S[2]=_[2],g[0]=S[0]+h[0],g[1]=S[1]+h[1],g[2]=S[2]+h[2],g}function Ka(g,x){var h=g[0],y=g[1],_=g[2],S=x[0],N=x[1],A=x[2],D=Math.sqrt((h*h+y*y+_*_)*(S*S+N*N+A*A)),M=D&&ss(g,x)/D;return Math.acos(Math.min(Math.max(M,-1),1))}function Js(g){return g[0]=0,g[1]=0,g[2]=0,g}function uc(g){return"vec3("+g[0]+", "+g[1]+", "+g[2]+")"}function _l(g,x){return g[0]===x[0]&&g[1]===x[1]&&g[2]===x[2]}function wl(g,x){var h=g[0],y=g[1],_=g[2],S=x[0],N=x[1],A=x[2];return Math.abs(h-S)<=1e-6*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(y-N)<=1e-6*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(_-A)<=1e-6*Math.max(1,Math.abs(_),Math.abs(A))}var vo=ls,dc=gs,Ya=ts,bo=ur,zr=Br,Sl=It,Tr=Ni,Qa=(function(){var g=ie();return function(x,h,y,_,S,N){var A,D;for(h||(h=3),y||(y=0),D=_?Math.min(_*h+y,x.length):x.length,A=y;A<D;A+=h)g[0]=x[A],g[1]=x[A+1],g[2]=x[A+2],S(g,g,N),x[A]=g[0],x[A+1]=g[1],x[A+2]=g[2];return x}})(),Fs=function(g,x){g.fill(x)},Ci=function(g){for(var x=0,h=0;h<g.length;h++)g[h]>g[x]&&(x=h);return x},Xa=function(g){for(var x=g.length,h=0;x--;)h+=g[x];return h},Ja=function(g,x){var h=[],y={rad:0,vec:u.clone([0,0])},_={};function S(A){_[A.id]=A,h.push(A)}function N(){var A,D=0;for(A=0;A<h.length;A++)D+=h[A].rad;y.rad=D/h.length,y.vec=u.clone([Math.cos(y.rad),Math.sin(y.rad)])}return S(g),N(),{add:function(A){_[A.id]||(S(A),N())},fits:function(A){return Math.abs(u.dot(A.point.vec,y.vec))>x},getPoints:function(){return h},getCenter:function(){return y}}},Fr=function(g,x,h){return{rad:g[h],point:g,id:x}};function Zs(g,x){return{x:g,y:x,toVec2:function(){return u.clone([this.x,this.y])},toVec3:function(){return f.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function Ai(g,x){x||(x=8);for(var h=g.data,y=h.length,_=8-x,S=new Int32Array(1<<x);y--;)S[h[y]>>_]++;return S}function kn(g,x){var h=(function(y){var _,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,N=8-S;function A(X,re){for(var ce=0,Re=X;Re<=re;Re++)ce+=_[Re];return ce}function D(X,re){for(var ce=0,Re=X;Re<=re;Re++)ce+=Re*_[Re];return ce}function M(){var X,re,ce,Re,oe=[0],Ne=(1<<S)-1;_=Ai(y,S);for(var Ue=1;Ue<Ne;Ue++)(ce=(X=A(0,Ue))*(re=A(Ue+1,Ne)))===0&&(ce=1),Re=D(0,Ue)*re-D(Ue+1,Ne)*X,oe[Ue]=Re*Re/ce;return Ci(oe)}var z=M();return z<<N})(g);return(function(y,_,S){S||(S=y);for(var N=y.data,A=N.length,D=S.data;A--;)D[A]=N[A]<_?1:0})(g,h,x),h}function ra(g,x,h){var y=g.length/4|0;if(h&&h.singleChannel===!0)for(var _=0;_<y;_++){var S=g[4*_+3];x[_]=S===0?255:g[4*_+0]}else for(var N=0;N<y;N++){var A=g[4*N+3];x[N]=A===0?255:.299*g[4*N+0]+.587*g[4*N+1]+.114*g[4*N+2]}}function Tl(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],h=g[0],y=g[1],_=g[2],S=_*y,N=S*(1-Math.abs(h/60%2-1)),A=_-S,D=0,M=0,z=0;return h<60?(D=S,M=N):h<120?(D=N,M=S):h<180?(M=S,z=N):h<240?(M=N,z=S):h<300?(D=N,z=S):h<360&&(D=S,z=N),x[0]=255*(D+A)|0,x[1]=255*(M+A)|0,x[2]=255*(z+A)|0,x}function aa(g){if(!Number.isFinite(g)||g<1)return[];for(var x=[],h=[],y=Math.sqrt(g),_=1;_<=y;_++)g%_==0&&(h.push(_),_!==g/_&&x.unshift(Math.floor(g/_)));return h.concat(x)}function xo(g,x){var h,y=aa(x.x),_=aa(x.y),S=Math.max(x.x,x.y),N=(function(ce,Re){for(var oe=0,Ne=0,Ue=[];oe<ce.length&&Ne<Re.length;)ce[oe]===Re[Ne]?(Ue.push(ce[oe]),oe++,Ne++):ce[oe]>Re[Ne]?Ne++:oe++;return Ue})(y,_),A=[8,10,15,20,32,60,80],D={"x-small":5,small:4,medium:3,large:2,"x-large":1},M=D[g]||D.medium,z=A[M],X=Math.floor(S/z);function re(ce){for(var Re=0,oe=ce[Math.floor(ce.length/2)];Re<ce.length-1&&ce[Re]<X;)Re++;return Re>0&&(oe=Math.abs(ce[Re]-X)>Math.abs(ce[Re-1]-X)?ce[Re-1]:ce[Re]),X/oe<A[M+1]/A[M]&&X/oe>A[M-1]/A[M]?{x:oe,y:oe}:null}return(h=re(N))||(h=re(aa(S)))||(h=re(aa(X*z))),h||(h={x:Math.max(1,x.x),y:Math.max(1,x.y)}),h}var Za={top:function(g,x){return g.unit==="%"?Math.floor(x.height*(g.value/100)):null},right:function(g,x){return g.unit==="%"?Math.floor(x.width-x.width*(g.value/100)):null},bottom:function(g,x){return g.unit==="%"?Math.floor(x.height-x.height*(g.value/100)):null},left:function(g,x){return g.unit==="%"?Math.floor(x.width*(g.value/100)):null}};function Sa(g,x,h){var y={width:g,height:x},_=Object.keys(h).reduce((function(S,N){if(!Za[N])return S;var A=(function(M){return{value:parseFloat(M),unit:(M.indexOf("%"),M.length,"%")}})(h[N]),D=Za[N](A,y);return S[N]=D,S}),{});return{sx:_.left,sy:_.top,sw:_.right-_.left,sh:_.bottom-_.top}}function dr(g){if(g<0)throw new Error("expected positive number, received ".concat(g))}var An=(function(){return W()((function g(x,h){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uint8Array,_=arguments.length>3?arguments[3]:void 0;F()(this,g),K()(this,"data",void 0),K()(this,"size",void 0),K()(this,"indexMapping",void 0),h?this.data=h:(this.data=new y(x.x*x.y),_&&Fs(this.data,0)),this.size=x}),[{key:"inImageWithBorder",value:function(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return dr(x),g.x>=0&&g.y>=0&&g.x<this.size.x+2*x&&g.y<this.size.y+2*x}},{key:"subImageAsCopy",value:function(g,x){dr(x.x),dr(x.y);for(var h=g.size,y=h.x,_=h.y,S=0;S<y;S++)for(var N=0;N<_;N++)g.data[N*y+S]=this.data[(x.y+N)*this.size.x+x.x+S];return g}},{key:"get",value:function(g,x){return this.data[x*this.size.x+g]}},{key:"getSafe",value:function(g,x){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var h=0;h<this.size.x;h++)this.indexMapping.x[h]=h,this.indexMapping.x[h+this.size.x]=h;for(var y=0;y<this.size.y;y++)this.indexMapping.y[y]=y,this.indexMapping.y[y+this.size.y]=y}return this.data[this.indexMapping.y[x+this.size.y]*this.size.x+this.indexMapping.x[g+this.size.x]]}},{key:"set",value:function(g,x,h){return this.data[x*this.size.x+g]=h,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var g=this.size,x=g.x,h=g.y,y=0;y<x;y++)this.data[y]=this.data[(h-1)*x+y]=0;for(var _=1;_<h-1;_++)this.data[_*x]=this.data[_*x+(x-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(g){var x,h,y,_,S,N,A,D,M,z,X=this.data,re=this.size.y,ce=this.size.x,Re=[],oe=[],Ne=Math.PI,Ue=Ne/4;if(g<=0)return oe;for(S=0;S<g;S++)Re[S]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(h=0;h<re;h++)for(_=h*h,x=0;x<ce;x++)(y=X[h*ce+x])>0&&((N=Re[y-1]).m00+=1,N.m01+=h,N.m10+=x,N.m11+=x*h,N.m02+=_,N.m20+=x*x);for(S=0;S<g;S++)N=Re[S],isNaN(N.m00)||N.m00===0||(D=N.m10/N.m00,M=N.m01/N.m00,A=N.m11/N.m00-D*M,z=(N.m02/N.m00-M*M-(N.m20/N.m00-D*D))/(2*A),z=.5*Math.atan(z)+(A>=0?Ue:-Ue)+Ne,N.theta=(180*z/Ne+90)%180-90,N.theta<0&&(N.theta+=180),N.rad=z>Ne?z-Ne:z,N.vec=u.clone([Math.cos(z),Math.sin(z)]),oe.push(N));return oe}},{key:"getAsRGBA",value:function(){for(var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,x=new Uint8ClampedArray(4*this.size.x*this.size.y),h=0;h<this.size.y;h++)for(var y=0;y<this.size.x;y++){var _=h*this.size.x+y,S=this.get(y,h)*g;x[4*_+0]=S,x[4*_+1]=S,x[4*_+2]=S,x[4*_+3]=255}return x}},{key:"show",value:function(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var h=g.getContext("2d");if(!h)throw new Error("Unable to get canvas context");var y=h.getImageData(0,0,g.width,g.height),_=this.getAsRGBA(x);g.width=this.size.x,g.height=this.size.y;var S=new ImageData(_,y.width,y.height);h.putImageData(S,0,0)}},{key:"overlay",value:function(g,x,h){var y=x<0||x>360?360:x,_=[0,1,1],S=[0,0,0],N=[255,255,255],A=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var D=g.getContext("2d");if(!D)throw new Error("Unable to get canvas context");for(var M=D.getImageData(h.x,h.y,this.size.x,this.size.y),z=M.data,X=this.data.length;X--;){_[0]=this.data[X]*y;var re=4*X,ce=_[0]<=0?N:_[0]>=360?A:Tl(_,S),Re=P()(ce,3);z[re]=Re[0],z[re+1]=Re[1],z[re+2]=Re[2],z[re+3]=255}D.putImageData(M,h.x,h.y)}}])})(),Ta=i(7),ys=i.n(Ta),ei=i(6),Yn=i.n(ei),ia={drawRect:function(g,x,h,y){h.strokeStyle=y.color,h.fillStyle=y.color,h.lineWidth=y.lineWidth||1,h.beginPath(),h.strokeRect(g.x,g.y,x.x,x.y)},drawPath:function(g,x,h,y){h.strokeStyle=y.color,h.fillStyle=y.color,h.lineWidth=y.lineWidth,h.beginPath(),h.moveTo(g[0][x.x],g[0][x.y]);for(var _=1;_<g.length;_++)h.lineTo(g[_][x.x],g[_][x.y]);h.closePath(),h.stroke()},drawImage:function(g,x,h){var y=h.getImageData(0,0,x.x,x.y),_=y.data,S=_.length,N=g.length;if(S/N!=4)return!1;for(;N--;){var A=g[N];_[--S]=255,_[--S]=A,_[--S]=A,_[--S]=A}return h.putImageData(y,0,0),!0}},_o=i(4),In=i.n(_o),wo=i(1),Qt=i.n(wo),Ri=i(5),cs=i.n(Ri),El=(function(g){return g[g.Forward=1]="Forward",g[g.Reverse=-1]="Reverse",g})({}),ti=(function(){return W()((function g(x,h){F()(this,g),K()(this,"_row",[]),K()(this,"config",{}),K()(this,"supplements",[]),K()(this,"SINGLE_CODE_ERROR",0),K()(this,"FORMAT","unknown"),K()(this,"CONFIG_KEYS",{}),this._row=[],this.config=x||{},h&&(this.supplements=h)}),[{key:"_nextUnset",value:function(g){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=x;h<g.length;h++)if(!g[h])return h;return g.length}},{key:"_matchPattern",value:function(g,x){for(var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.SINGLE_CODE_ERROR||1,y=0,_=0,S=0,N=0,A=0,D=0,M=0,z=0;z<g.length;z++)S+=g[z],N+=x[z];if(S<N)return Number.MAX_VALUE;h*=A=S/N;for(var X=0;X<g.length;X++){if(D=g[X],M=x[X]*A,(_=Math.abs(D-M)/M)>h)return Number.MAX_VALUE;y+=_}return y/N}},{key:"_nextSet",value:function(g){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=x;h<g.length;h++)if(g[h])return h;return g.length}},{key:"_correctBars",value:function(g,x,h){for(var y=h.length,_=0;y--;)(_=g[h[y]]*(1-(1-x)/2))>1&&(g[h[y]]=_)}},{key:"decodePattern",value:function(g){this._row=g;var x=this.decode();return x===null?(this._row.reverse(),(x=this.decode())&&(x.direction=El.Reverse,x.start=this._row.length-x.start,x.end=this._row.length-x.end)):x.direction=El.Forward,x&&(x.format=this.FORMAT),x}},{key:"_matchRange",value:function(g,x,h){var y;for(y=g=g<0?0:g;y<x;y++)if(this._row[y]!==h)return!1;return!0}},{key:"_fillCounters",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._nextUnset(this._row),x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._row.length,h=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=[],_=0;y[_]=0;for(var S=g;S<x;S++)this._row[S]^(h?1:0)?y[_]++:(y[++_]=1,h=!h);return y}},{key:"_toCounters",value:function(g,x){var h=x.length,y=this._row.length,_=!this._row[g],S=0;Fs(x,0);for(var N=g;N<y;N++)if(this._row[N]^(_?1:0))x[S]++;else{if(++S===h)break;x[S]=1,_=!_}return x}},{key:"decodeImage",value:function(g){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}])})();K()(ti,"adjacentLineValidationMatches",0);var hr=ti;function hc(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var Di=[3,1,3,1,1,1],fc=[3,1,1,1,3],Nl=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],oa=Di.reduce((function(g,x){return g+x}),0),jl=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=hc(this,x,[].concat(_)),K()(h,"barSpaceRatio",[1,1]),K()(h,"FORMAT","2of5"),K()(h,"SINGLE_CODE_ERROR",.78),K()(h,"AVG_CODE_ERROR",.3),h}return cs()(x,g),W()(x,[{key:"_findPattern",value:function(h,y){var _=arguments.length>2&&arguments[2]!==void 0&&arguments[2],S=arguments.length>3&&arguments[3]!==void 0&&arguments[3],N=[],A=0,D={error:Number.MAX_VALUE,code:-1,start:0,end:0},M=0,z=0,X=this.AVG_CODE_ERROR;y||(y=this._nextSet(this._row));for(var re=0;re<h.length;re++)N[re]=0;for(var ce=y;ce<this._row.length;ce++)if(this._row[ce]^(_?1:0))N[A]++;else{if(A===N.length-1){M=0;for(var Re=0;Re<N.length;Re++)M+=N[Re];if((z=this._matchPattern(N,h))<X)return D.error=z,D.start=ce-M,D.end=ce,D;if(!S)return null;for(var oe=0;oe<N.length-2;oe++)N[oe]=N[oe+2];N[N.length-2]=0,N[N.length-1]=0,A--}else A++;N[A]=1,_=!_}return null}},{key:"_findStart",value:function(){for(var h=null,y=this._nextSet(this._row),_=1,S=0;!h;){if(!(h=this._findPattern(Di,y,!1,!0)))return null;if(_=Math.floor((h.end-h.start)/oa),(S=h.start-5*_)>=0&&this._matchRange(S,h.start,0))return h;y=h.end,h=null}return h}},{key:"_verifyTrailingWhitespace",value:function(h){var y=h.end+(h.end-h.start)/2;return y<this._row.length&&this._matchRange(h.end,y,0)?h:null}},{key:"_findEnd",value:function(){this._row.reverse();var h=this._nextSet(this._row),y=this._findPattern(fc,h,!1,!0);if(this._row.reverse(),y===null)return null;var _=y.start;return y.start=this._row.length-y.end,y.end=this._row.length-_,y!==null?this._verifyTrailingWhitespace(y):null}},{key:"_verifyCounterLength",value:function(h){return h.length%10==0}},{key:"_decodeCode",value:function(h){for(var y=this.AVG_CODE_ERROR,_={error:Number.MAX_VALUE,code:-1,start:0,end:0},S=0;S<Nl.length;S++){var N=this._matchPattern(h,Nl[S]);N<_.error&&(_.code=S,_.error=N)}return _.error<y?_:null}},{key:"_decodePayload",value:function(h,y,_){for(var S=0,N=h.length,A=[0,0,0,0,0],D=null;S<N;){for(var M=0;M<5;M++)A[M]=h[S]*this.barSpaceRatio[0],S+=2;if(!(D=this._decodeCode(A)))return null;y.push("".concat(D.code)),_.push(D)}return D}},{key:"decode",value:function(h,y){var _=this._findStart();if(!_)return null;var S=this._findEnd();if(!S)return null;var N=this._fillCounters(_.end,S.start,!1);if(!this._verifyCounterLength(N))return null;var A=[];A.push(_);var D=[];return this._decodePayload(N,D,A)?D.length<5?null:(A.push(S),{code:D.join(""),start:_.start,end:S.end,startInfo:_,decodedCodes:A,format:this.FORMAT}):null}}])})(hr);function mc(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var So=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],To=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],Ea=[26,41,11,14],Ps=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=mc(this,x,[].concat(_)),K()(h,"_counters",[]),K()(h,"FORMAT","codabar"),h}return cs()(x,g),W()(x,[{key:"_computeAlternatingThreshold",value:function(h,y){for(var _=Number.MAX_VALUE,S=0,N=0,A=h;A<y;A+=2)(N=this._counters[A])>S&&(S=N),N<_&&(_=N);return(_+S)/2|0}},{key:"_toPattern",value:function(h){var y=h+7;if(y>this._counters.length)return-1;for(var _=this._computeAlternatingThreshold(h,y),S=this._computeAlternatingThreshold(h+1,y),N=64,A=0,D=0,M=0;M<7;M++)A=(1&M)==0?_:S,this._counters[h+M]>A&&(D|=N),N>>=1;return D}},{key:"_isStartEnd",value:function(h){for(var y=0;y<Ea.length;y++)if(Ea[y]===h)return!0;return!1}},{key:"_sumCounters",value:function(h,y){for(var _=0,S=h;S<y;S++)_+=this._counters[S];return _}},{key:"_findStart",value:function(){for(var h=this._nextUnset(this._row),y=1;y<this._counters.length;y++){var _=this._toPattern(y);if(_!==-1&&this._isStartEnd(_))return{start:h+=this._sumCounters(0,y),end:h+this._sumCounters(y,y+8),startCounter:y,endCounter:y+8}}return null}},{key:"_patternToChar",value:function(h){for(var y=0;y<To.length;y++)if(To[y]===h)return String.fromCharCode(So[y]);return null}},{key:"_calculatePatternLength",value:function(h){for(var y=0,_=h;_<h+7;_++)y+=this._counters[_];return y}},{key:"_verifyWhitespace",value:function(h,y){return(h-1<=0||this._counters[h-1]>=this._calculatePatternLength(h)/2)&&(y+8>=this._counters.length||this._counters[y+7]>=this._calculatePatternLength(y)/2)}},{key:"_charToPattern",value:function(h){for(var y=h.charCodeAt(0),_=0;_<So.length;_++)if(So[_]===y)return To[_];return 0}},{key:"_thresholdResultPattern",value:function(h,y){for(var _,S={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},N=y,A=0;A<h.length;A++){_=this._charToPattern(h[A]);for(var D=6;D>=0;D--){var M=(1&D)==2?S.bar:S.space,z=(1&_)==1?M.wide:M.narrow;z.size+=this._counters[N+D],z.counts++,_>>=1}N+=8}return["space","bar"].forEach((function(X){var re=S[X];re.wide.min=Math.floor((re.narrow.size/re.narrow.counts+re.wide.size/re.wide.counts)/2),re.narrow.max=Math.ceil(re.wide.min),re.wide.max=Math.ceil((2*re.wide.size+1.5)/re.wide.counts)})),S}},{key:"_validateResult",value:function(h,y){for(var _,S=this._thresholdResultPattern(h,y),N=y,A=0;A<h.length;A++){_=this._charToPattern(h[A]);for(var D=6;D>=0;D--){var M=(1&D)==0?S.bar:S.space,z=(1&_)==1?M.wide:M.narrow,X=this._counters[N+D];if(X<z.min||X>z.max)return!1;_>>=1}N+=8}return!0}},{key:"decode",value:function(h,y){if(this._counters=this._fillCounters(),!(y=this._findStart()))return null;var _,S=y.startCounter,N=[];do{if((_=this._toPattern(S))<0)return null;var A=this._patternToChar(_);if(A===null)return null;if(N.push(A),S+=8,N.length>1&&this._isStartEnd(_))break}while(S<this._counters.length);if(N.length-2<4||!this._isStartEnd(_)||!this._verifyWhitespace(y.startCounter,S-8)||!this._validateResult(N,y.startCounter))return null;S=S>this._counters.length?this._counters.length:S;var D=y.start+this._sumCounters(y.startCounter,S-8);return{code:N.join(""),start:y.start,end:D,startInfo:y,decodedCodes:N,format:this.FORMAT}}}])})(hr);function pc(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var kl=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=pc(this,x,[].concat(_)),K()(h,"CODE_SHIFT",98),K()(h,"CODE_C",99),K()(h,"CODE_B",100),K()(h,"CODE_A",101),K()(h,"FNC1",102),K()(h,"START_CODE_A",103),K()(h,"START_CODE_B",104),K()(h,"START_CODE_C",105),K()(h,"STOP_CODE",106),K()(h,"FNC1_CHAR",""),K()(h,"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),K()(h,"SINGLE_CODE_ERROR",.64),K()(h,"AVG_CODE_ERROR",.3),K()(h,"FORMAT","code_128"),K()(h,"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),h}return cs()(x,g),W()(x,[{key:"_decodeCode",value:function(h,y){for(var _={error:Number.MAX_VALUE,code:-1,start:h,end:h,correction:{bar:1,space:1}},S=[0,0,0,0,0,0],N=h,A=!this._row[N],D=0,M=N;M<this._row.length;M++)if(this._row[M]^(A?1:0))S[D]++;else{if(D===S.length-1){y&&this._correct(S,y);for(var z=0;z<this.CODE_PATTERN.length;z++){var X=this._matchPattern(S,this.CODE_PATTERN[z]);X<_.error&&(_.code=z,_.error=X)}return _.end=M,_.code===-1||_.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[_.code]&&(_.correction.bar=this.calculateCorrection(this.CODE_PATTERN[_.code],S,this.MODULE_INDICES.bar),_.correction.space=this.calculateCorrection(this.CODE_PATTERN[_.code],S,this.MODULE_INDICES.space)),_)}S[++D]=1,A=!A}return null}},{key:"_correct",value:function(h,y){this._correctBars(h,y.bar,this.MODULE_INDICES.bar),this._correctBars(h,y.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var h=[0,0,0,0,0,0],y=this._nextSet(this._row),_={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},S=!1,N=0,A=y;A<this._row.length;A++)if(this._row[A]^(S?1:0))h[N]++;else{if(N===h.length-1){for(var D=h.reduce((function(re,ce){return re+ce}),0),M=this.START_CODE_A;M<=this.START_CODE_C;M++){var z=this._matchPattern(h,this.CODE_PATTERN[M]);z<_.error&&(_.code=M,_.error=z)}if(_.error<this.AVG_CODE_ERROR)return _.start=A-D,_.end=A,_.correction.bar=this.calculateCorrection(this.CODE_PATTERN[_.code],h,this.MODULE_INDICES.bar),_.correction.space=this.calculateCorrection(this.CODE_PATTERN[_.code],h,this.MODULE_INDICES.space),_;for(var X=0;X<4;X++)h[X]=h[X+2];h[4]=0,h[5]=0,N--}else N++;h[N]=1,S=!S}return null}},{key:"decode",value:function(h,y){var _=this,S=this._findStart();if(S===null)return null;var N={code:S.code,start:S.start,end:S.end,correction:{bar:S.correction.bar,space:S.correction.space}},A=[];A.push(N);for(var D=N.code,M=(function(Ue){switch(Ue){case _.START_CODE_A:return _.CODE_A;case _.START_CODE_B:return _.CODE_B;case _.START_CODE_C:return _.CODE_C;default:return null}})(N.code),z=!1,X=!1,re=X,ce=!0,Re=0,oe=[],Ne=[];!z;){if(re=X,X=!1,(N=this._decodeCode(N.end,N.correction))!==null)switch(N.code!==this.STOP_CODE&&(ce=!0),N.code!==this.STOP_CODE&&(oe.push(N.code),D+=++Re*N.code),A.push(N),M){case this.CODE_A:if(N.code<64)Ne.push(String.fromCharCode(32+N.code));else if(N.code<96)Ne.push(String.fromCharCode(N.code-64));else switch(N.code!==this.STOP_CODE&&(ce=!1),N.code){case this.CODE_SHIFT:X=!0,M=this.CODE_B;break;case this.CODE_B:M=this.CODE_B;break;case this.CODE_C:M=this.CODE_C;break;case this.FNC1:Ne.push(this.FNC1_CHAR);break;case this.STOP_CODE:z=!0}break;case this.CODE_B:if(N.code<96)Ne.push(String.fromCharCode(32+N.code));else switch(N.code!==this.STOP_CODE&&(ce=!1),N.code){case this.CODE_SHIFT:X=!0,M=this.CODE_A;break;case this.CODE_A:M=this.CODE_A;break;case this.CODE_C:M=this.CODE_C;break;case this.FNC1:Ne.push(this.FNC1_CHAR);break;case this.STOP_CODE:z=!0}break;case this.CODE_C:if(N.code<100)Ne.push(N.code<10?"0"+N.code:N.code);else switch(N.code!==this.STOP_CODE&&(ce=!1),N.code){case this.CODE_A:M=this.CODE_A;break;case this.CODE_B:M=this.CODE_B;break;case this.FNC1:Ne.push(this.FNC1_CHAR);break;case this.STOP_CODE:z=!0}}else z=!0;re&&(M=M===this.CODE_A?this.CODE_B:this.CODE_A)}return N===null?null:(N.end=this._nextUnset(this._row,N.end),this._verifyTrailingWhitespace(N)?(D-=Re*oe[oe.length-1])%103!==oe[oe.length-1]?null:Ne.length?(ce&&Ne.splice(Ne.length-1,1),{code:Ne.join(""),start:S.start,end:N.end,codeset:M,startInfo:S,decodedCodes:A,endInfo:N,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(h){var y;return(y=h.end+(h.end-h.start)/2)<this._row.length&&this._matchRange(h.end,y,0)?h:null}},{key:"calculateCorrection",value:function(h,y,_){for(var S=_.length,N=0,A=0;S--;)A+=h[_[S]],N+=y[_[S]];return A/N}}])})(hr),Na=i(13),p=i.n(Na),j=i(16),R=i.n(j);function G(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var we=new Uint16Array(R()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map((function(g){return g.charCodeAt(0)}))),Ae=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),lt=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=G(this,x,[].concat(_)),K()(h,"FORMAT","code_39"),h}return cs()(x,g),W()(x,[{key:"_findStart",value:function(){for(var h=this._nextSet(this._row),y=h,_=new Uint16Array([0,0,0,0,0,0,0,0,0]),S=0,N=!1,A=h;A<this._row.length;A++)if(this._row[A]^(N?1:0))_[S]++;else{if(S===_.length-1){if(this._toPattern(_)===148){var D=Math.floor(Math.max(0,y-(A-y)/4));if(this._matchRange(D,y,0))return{start:y,end:A}}y+=_[0]+_[1];for(var M=0;M<7;M++)_[M]=_[M+2];_[7]=0,_[8]=0,S--}else S++;_[S]=1,N=!N}return null}},{key:"_toPattern",value:function(h){for(var y=h.length,_=0,S=y,N=0;S>3;){_=this._findNextWidth(h,_),S=0;for(var A=0,D=0;D<y;D++)h[D]>_&&(A|=1<<y-1-D,S++,N+=h[D]);if(S===3){for(var M=0;M<y&&S>0;M++)if(h[M]>_&&(S--,2*h[M]>=N))return-1;return A}}return-1}},{key:"_findNextWidth",value:function(h,y){for(var _=Number.MAX_VALUE,S=0;S<h.length;S++)h[S]<_&&h[S]>y&&(_=h[S]);return _}},{key:"_patternToChar",value:function(h){for(var y=0;y<Ae.length;y++)if(Ae[y]===h)return String.fromCharCode(we[y]);return null}},{key:"_verifyTrailingWhitespace",value:function(h,y,_){var S=Xa(_);return 3*(y-h-S)>=S}},{key:"decode",value:function(){var h=new Uint16Array([0,0,0,0,0,0,0,0,0]),y=[],_=this._findStart();if(!_)return null;var S,N,A=this._nextSet(this._row,_.end);do{h=this._toCounters(A,h);var D=this._toPattern(h);if(D<0||(S=this._patternToChar(D))===null)return null;y.push(S),N=A,A+=Xa(h),A=this._nextSet(this._row,A)}while(S!=="*");return y.pop(),y.length&&this._verifyTrailingWhitespace(N,A,h)?{code:y.join(""),start:_.start,end:A,startInfo:_,decodedCodes:y,format:this.FORMAT}:null}}])})(hr);function $t(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var Jn=/[AEIO]/g,vn=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=$t(this,x,[].concat(_)),K()(h,"FORMAT","code_32_reader"),h}return cs()(x,g),W()(x,[{key:"_decodeCode32",value:function(h){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(h))return null;for(var y=0,_=0;_<h.length;_++)y=32*y+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(h[_]);var S="".concat(y);return S.length<9&&(S=("000000000"+S).slice(-9)),"A"+S}},{key:"_checkChecksum",value:function(h){return!!h}},{key:"decode",value:function(){var h,y,_,S,N,A=(h=x,y="decode",_=this,S=3,N=p()(Qt()(1&S?h.prototype:h),y,_),2&S&&typeof N=="function"?function(z){return N.apply(_,z)}:N)([]);if(!A)return null;var D=A.code;if(!D||(D=D.replace(Jn,""),!this._checkChecksum(D)))return null;var M=this._decodeCode32(D);return M?(A.code=M,A):null}}])})(lt);function $n(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var Er=/[IOQ]/g,la=/[A-Z0-9]{17}/,Nr=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=$n(this,x,[].concat(_)),K()(h,"FORMAT","code_39_vin"),h}return cs()(x,g),W()(x,[{key:"_checkChecksum",value:function(h){return!!h}},{key:"decode",value:function(){var h,y,_,S,N,A=(h=x,y="decode",_=this,S=3,N=p()(Qt()(1&S?h.prototype:h),y,_),2&S&&typeof N=="function"?function(M){return N.apply(_,M)}:N)([]);if(!A)return null;var D=A.code;return D&&(D=D.replace(Er,"")).match(la)&&this._checkChecksum(D)?(A.code=D,A):null}}])})(lt);function qr(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var ja=new Uint16Array(R()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map((function(g){return g.charCodeAt(0)}))),Mi=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),Ii=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=qr(this,x,[].concat(_)),K()(h,"FORMAT","code_93"),h}return cs()(x,g),W()(x,[{key:"_patternToChar",value:function(h){for(var y=0;y<Mi.length;y++)if(Mi[y]===h)return String.fromCharCode(ja[y]);return null}},{key:"_toPattern",value:function(h){for(var y=h.length,_=h.reduce((function(M,z){return M+z}),0),S=0,N=0;N<y;N++){var A=Math.round(9*h[N]/_);if(A<1||A>4)return-1;if((1&N)==0)for(var D=0;D<A;D++)S=S<<1|1;else S<<=A}return S}},{key:"_findStart",value:function(){for(var h=this._nextSet(this._row),y=h,_=new Uint16Array([0,0,0,0,0,0]),S=0,N=!1,A=h;A<this._row.length;A++)if(this._row[A]^(N?1:0))_[S]++;else{if(S===_.length-1){if(this._toPattern(_)===350){var D=Math.floor(Math.max(0,y-(A-y)/4));if(this._matchRange(D,y,0))return{start:y,end:A}}y+=_[0]+_[1];for(var M=0;M<4;M++)_[M]=_[M+2];_[4]=0,_[5]=0,S--}else S++;_[S]=1,N=!N}return null}},{key:"_verifyEnd",value:function(h,y){return!(h===y||!this._row[y])}},{key:"_decodeExtended",value:function(h){for(var y=h.length,_=[],S=0;S<y;S++){var N=h[S];if(N>="a"&&N<="d"){if(S>y-2)return null;var A=h[++S],D=A.charCodeAt(0),M=void 0;switch(N){case"a":if(!(A>="A"&&A<="Z"))return null;M=String.fromCharCode(D-64);break;case"b":if(A>="A"&&A<="E")M=String.fromCharCode(D-38);else if(A>="F"&&A<="J")M=String.fromCharCode(D-11);else if(A>="K"&&A<="O")M=String.fromCharCode(D+16);else if(A>="P"&&A<="S")M=String.fromCharCode(D+43);else{if(!(A>="T"&&A<="Z"))return null;M=""}break;case"c":if(A>="A"&&A<="O")M=String.fromCharCode(D-32);else{if(A!=="Z")return null;M=":"}break;case"d":if(!(A>="A"&&A<="Z"))return null;M=String.fromCharCode(D+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",M),null}_.push(M)}else _.push(N)}return _}},{key:"_matchCheckChar",value:function(h,y,_){var S=h.slice(0,y),N=S.length,A=S.reduce((function(D,M,z){return D+((-1*z+(N-1))%_+1)*ja.indexOf(M.charCodeAt(0))}),0);return ja[A%47]===h[y].charCodeAt(0)}},{key:"_verifyChecksums",value:function(h){return this._matchCheckChar(h,h.length-2,20)&&this._matchCheckChar(h,h.length-1,15)}},{key:"decode",value:function(h,y){if(!(y=this._findStart()))return null;var _,S,N=new Uint16Array([0,0,0,0,0,0]),A=[],D=this._nextSet(this._row,y.end);do{N=this._toCounters(D,N);var M=this._toPattern(N);if(M<0||(S=this._patternToChar(M))===null)return null;A.push(S),_=D,D+=Xa(N),D=this._nextSet(this._row,D)}while(S!=="*");return A.pop(),A.length&&this._verifyEnd(_,D)&&this._verifyChecksums(A)?(A=A.slice(0,A.length-2),(A=this._decodeExtended(A))===null?null:{code:A.join(""),start:y.start,end:D,startInfo:y,decodedCodes:A,format:this.FORMAT}):null}}])})(hr);function eh(g,x){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);x&&(y=y.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),h.push.apply(h,y)}return h}function pu(g){for(var x=1;x<arguments.length;x++){var h=arguments[x]!=null?arguments[x]:{};x%2?eh(Object(h),!0).forEach((function(y){K()(g,y,h[y])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(h)):eh(Object(h)).forEach((function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(h,y))}))}return g}function Nm(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var th=[1,1,1],gu=[1,1,1,1,1],Cl=[1,1,2],Eo=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],nh=[0,11,13,14,19,25,28,21,22,26],Hr=(function(g){function x(h,y){var _;return F()(this,x),_=Nm(this,x,[C()({supplements:[]},h),y]),K()(_,"FORMAT","ean_13"),K()(_,"SINGLE_CODE_ERROR",.7),K()(_,"STOP_PATTERN",[1,1,1]),_}return cs()(x,g),W()(x,[{key:"_findPattern",value:function(h,y,_,S){var N=new Array(h.length).fill(0),A={error:Number.MAX_VALUE,start:0,end:0},D=0;y||(y=this._nextSet(this._row));for(var M=!1,z=y;z<this._row.length;z++)if(this._row[z]^(_?1:0))N[D]+=1;else{if(D===N.length-1){var X=this._matchPattern(N,h);if(X<.48&&A.error&&X<A.error)return M=!0,A.error=X,A.start=z-N.reduce((function(ce,Re){return ce+Re}),0),A.end=z,A;if(S){for(var re=0;re<N.length-2;re++)N[re]=N[re+2];N[N.length-2]=0,N[N.length-1]=0,D--}}else D++;N[D]=1,_=!_}return M?A:null}},{key:"_decodeCode",value:function(h,y){var _=[0,0,0,0],S=h,N={error:Number.MAX_VALUE,code:-1,start:h,end:h},A=!this._row[S],D=0;y||(y=Eo.length);for(var M=S;M<this._row.length;M++)if(this._row[M]^(A?1:0))_[D]++;else{if(D===_.length-1){for(var z=0;z<y;z++){var X=this._matchPattern(_,Eo[z]);N.end=M,X<N.error&&(N.code=z,N.error=X)}return N.error>.48?null:N}_[++D]=1,A=!A}return null}},{key:"_findStart",value:function(){for(var h=this._nextSet(this._row),y=null;!y;){if(!(y=this._findPattern(th,h,!1,!0)))return null;var _=y.start-(y.end-y.start);if(_>=0&&this._matchRange(_,y.start,0))return y;h=y.end,y=null}return null}},{key:"_calculateFirstDigit",value:function(h){for(var y=0;y<nh.length;y++)if(h===nh[y])return y;return null}},{key:"_decodePayload",value:function(h,y,_){for(var S=pu({},h),N=0,A=0;A<6;A++){if(!(S=this._decodeCode(S.end)))return null;S.code>=10?(S.code-=10,N|=1<<5-A):N|=0<<5-A,y.push(S.code),_.push(S)}var D=this._calculateFirstDigit(N);if(D===null)return null;y.unshift(D);var M=this._findPattern(gu,S.end,!0,!1);if(M===null||!M.end)return null;_.push(M);for(var z=0;z<6;z++){if(!(M=this._decodeCode(M.end,10)))return null;_.push(M),y.push(M.code)}return M}},{key:"_verifyTrailingWhitespace",value:function(h){var y=h.end+(h.end-h.start);return y<this._row.length&&this._matchRange(h.end,y,0)?h:null}},{key:"_findEnd",value:function(h,y){var _=this._findPattern(this.STOP_PATTERN,h,y,!1);return _!==null?this._verifyTrailingWhitespace(_):null}},{key:"_checksum",value:function(h){for(var y=0,_=h.length-2;_>=0;_-=2)y+=h[_];y*=3;for(var S=h.length-1;S>=0;S-=2)y+=h[S];return y%10==0}},{key:"_decodeExtensions",value:function(h){var y=this._nextSet(this._row,h),_=this._findPattern(Cl,y,!1,!1);if(_===null)return null;for(var S=0;S<this.supplements.length;S++)try{var N=this.supplements[S].decode(this._row,_.end);if(N!==null)return{code:N.code,start:y,startInfo:_,end:N.end,decodedCodes:N.decodedCodes,format:this.supplements[S].FORMAT}}catch(A){console.error("* decodeExtensions error in ",this.supplements[S],": ",A)}return null}},{key:"decode",value:function(h,y){var _=new Array,S=new Array,N={},A=this._findStart();if(!A)return null;var D={start:A.start,end:A.end};if(S.push(D),!(D=this._decodePayload(D,_,S))||!(D=this._findEnd(D.end,!1))||(S.push(D),!this._checksum(_)))return null;if(this.supplements.length>0){var M=this._decodeExtensions(D.end);if(!M||!M.decodedCodes)return null;var z=M.decodedCodes[M.decodedCodes.length-1],X={start:z.start+((z.end-z.start)/2|0),end:z.end};if(!this._verifyTrailingWhitespace(X))return null;N={supplement:M,code:_.join("")+M.code}}return pu(pu({code:_.join(""),start:A.start,end:D.end,startInfo:A,decodedCodes:S},N),{},{format:this.FORMAT})}}])})(hr);function sh(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var yu=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=sh(this,x,[].concat(_)),K()(h,"FORMAT","ean_2"),h}return cs()(x,g),W()(x,[{key:"decode",value:function(h,y){h&&(this._row=h);var _=0,S=y,N=this._row.length,A=[],D=[],M=null;if(S===void 0)return null;for(var z=0;z<2&&S<N;z++){if(!(M=this._decodeCode(S)))return null;D.push(M),A.push(M.code%10),M.code>=10&&(_|=1<<1-z),z!==1&&(S=this._nextSet(this._row,M.end),S=this._nextUnset(this._row,S))}if(A.length!==2||parseInt(A.join(""))%4!==_)return null;var X=this._findStart();return{code:A.join(""),decodedCodes:D,end:M.end,format:this.FORMAT,startInfo:X,start:X.start}}}])})(Hr);function vu(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var bu=[24,20,18,17,12,6,3,10,9,5],xu=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=vu(this,x,[].concat(_)),K()(h,"FORMAT","ean_5"),h}return cs()(x,g),W()(x,[{key:"decode",value:function(h,y){if(y===void 0)return null;h&&(this._row=h);for(var _=0,S=y,N=this._row.length,A=null,D=[],M=[],z=0;z<5&&S<N;z++){if(!(A=this._decodeCode(S)))return null;M.push(A),D.push(A.code%10),A.code>=10&&(_|=1<<4-z),z!==4&&(S=this._nextSet(this._row,A.end),S=this._nextUnset(this._row,S))}if(D.length!==5||(function(re){for(var ce=re.length,Re=0,oe=ce-2;oe>=0;oe-=2)Re+=re[oe];Re*=3;for(var Ne=ce-1;Ne>=0;Ne-=2)Re+=re[Ne];return(Re*=3)%10})(D)!==(function(re){for(var ce=0;ce<10;ce++)if(re===bu[ce])return ce;return null})(_))return null;var X=this._findStart();return{code:D.join(""),decodedCodes:M,end:A.end,format:this.FORMAT,startInfo:X,start:X.start}}}])})(Hr);function rh(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var _u=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=rh(this,x,[].concat(_)),K()(h,"FORMAT","ean_8"),h}return cs()(x,g),W()(x,[{key:"_decodePayload",value:function(h,y,_){for(var S=h,N=0;N<4;N++){if(!(S=this._decodeCode(S.end,10)))return null;y.push(S.code),_.push(S)}if((S=this._findPattern(gu,S.end,!0,!1))===null)return null;_.push(S);for(var A=0;A<4;A++){if(!(S=this._decodeCode(S.end,10)))return null;_.push(S),y.push(S.code)}return S}}])})(Hr);function jm(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var ah=(function(g){function x(h){var y;return F()(this,x),y=jm(this,x,[C()({normalizeBarSpaceWidth:!1},h)]),K()(y,"barSpaceRatio",[1,1]),K()(y,"SINGLE_CODE_ERROR",.78),K()(y,"AVG_CODE_ERROR",.38),K()(y,"START_PATTERN",[1,1,1,1]),K()(y,"STOP_PATTERN",[1,1,3]),K()(y,"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),K()(y,"MAX_CORRECTION_FACTOR",5),K()(y,"FORMAT","i2of5"),h.normalizeBarSpaceWidth&&(y.SINGLE_CODE_ERROR=.38,y.AVG_CODE_ERROR=.09),y.config=h,In()(y,y)}return cs()(x,g),W()(x,[{key:"_matchPattern",value:function(h,y){if(this.config.normalizeBarSpaceWidth){for(var _=[0,0],S=[0,0],N=[0,0],A=this.MAX_CORRECTION_FACTOR,D=1/A,M=0;M<h.length;M++)_[M%2]+=h[M],S[M%2]+=y[M];N[0]=S[0]/_[0],N[1]=S[1]/_[1],N[0]=Math.max(Math.min(N[0],A),D),N[1]=Math.max(Math.min(N[1],A),D),this.barSpaceRatio=N;for(var z=0;z<h.length;z++)h[z]*=this.barSpaceRatio[z%2]}return(X=x,re="_matchPattern",ce=this,Re=3,oe=p()(Qt()(1&Re?X.prototype:X),re,ce),2&Re&&typeof oe=="function"?function(Ne){return oe.apply(ce,Ne)}:oe)([h,y]);var X,re,ce,Re,oe}},{key:"_findPattern",value:function(h,y){var _=arguments.length>2&&arguments[2]!==void 0&&arguments[2],S=arguments.length>3&&arguments[3]!==void 0&&arguments[3],N=new Array(h.length).fill(0),A=0,D={error:Number.MAX_VALUE,start:0,end:0},M=this.AVG_CODE_ERROR;_=_||!1,S=S||!1,y||(y=this._nextSet(this._row));for(var z=y;z<this._row.length;z++)if(this._row[z]^(_?1:0))N[A]++;else{if(A===N.length-1){var X=N.reduce((function(Re,oe){return Re+oe}),0),re=this._matchPattern(N,h);if(re<M)return D.error=re,D.start=z-X,D.end=z,D;if(!S)return null;for(var ce=0;ce<N.length-2;ce++)N[ce]=N[ce+2];N[N.length-2]=0,N[N.length-1]=0,A--}else A++;N[A]=1,_=!_}return null}},{key:"_findStart",value:function(){for(var h=0,y=this._nextSet(this._row),_=null,S=1;!_;){if(!(_=this._findPattern(this.START_PATTERN,y,!1,!0)))return null;if(S=Math.floor((_.end-_.start)/4),(h=_.start-10*S)>=0&&this._matchRange(h,_.start,0))return _;y=_.end,_=null}return null}},{key:"_verifyTrailingWhitespace",value:function(h){var y=h.end+(h.end-h.start)/2;return y<this._row.length&&this._matchRange(h.end,y,0)?h:null}},{key:"_findEnd",value:function(){this._row.reverse();var h=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),h===null)return null;var y=h.start;return h.start=this._row.length-h.end,h.end=this._row.length-y,h!==null?this._verifyTrailingWhitespace(h):null}},{key:"_decodePair",value:function(h){for(var y=[],_=0;_<h.length;_++){var S=this._decodeCode(h[_]);if(!S)return null;y.push(S)}return y}},{key:"_decodeCode",value:function(h){for(var y=this.AVG_CODE_ERROR,_={error:Number.MAX_VALUE,code:-1,start:0,end:0},S=0;S<this.CODE_PATTERN.length;S++){var N=this._matchPattern(h,this.CODE_PATTERN[S]);N<_.error&&(_.code=S,_.error=N)}return _.error<y?_:null}},{key:"_decodePayload",value:function(h,y,_){for(var S=0,N=h.length,A=[[0,0,0,0,0],[0,0,0,0,0]],D=null;S<N;){for(var M=0;M<5;M++)A[0][M]=h[S]*this.barSpaceRatio[0],A[1][M]=h[S+1]*this.barSpaceRatio[1],S+=2;if(!(D=this._decodePair(A)))return null;for(var z=0;z<D.length;z++)y.push(D[z].code+""),_.push(D[z])}return D}},{key:"_verifyCounterLength",value:function(h){return h.length%10==0}},{key:"decode",value:function(h,y){var _=new Array,S=new Array,N=this._findStart();if(!N)return null;S.push(N);var A=this._findEnd();if(!A)return null;var D=this._fillCounters(N.end,A.start,!1);return this._verifyCounterLength(D)&&this._decodePayload(D,_,S)?_.length%2!=0||_.length<6?null:(S.push(A),{code:_.join(""),start:N.start,end:A.end,startInfo:N,decodedCodes:S,format:this.FORMAT}):null}}])})(hr);function Al(g,x){var h=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!h){if(Array.isArray(g)||(h=(function(D,M){if(D){if(typeof D=="string")return ih(D,M);var z={}.toString.call(D).slice(8,-1);return z==="Object"&&D.constructor&&(z=D.constructor.name),z==="Map"||z==="Set"?Array.from(D):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?ih(D,M):void 0}})(g))||x){h&&(g=h);var y=0,_=function(){};return{s:_,n:function(){return y>=g.length?{done:!0}:{done:!1,value:g[y++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,N=!0,A=!1;return{s:function(){h=h.call(g)},n:function(){var D=h.next();return N=D.done,D},e:function(D){A=!0,S=D},f:function(){try{N||h.return==null||h.return()}finally{if(A)throw S}}}}function ih(g,x){(x==null||x>g.length)&&(x=g.length);for(var h=0,y=Array(x);h<x;h++)y[h]=g[h];return y}function km(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var er=[2,2.5,3],No=(function(g){function x(){var h,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return F()(this,x),h=km(this,x,[y]),K()(h,"FORMAT","pharmacode"),K()(h,"SINGLE_CODE_ERROR",.7),K()(h,"AVG_CODE_ERROR",.48),h}return cs()(x,g),W()(x,[{key:"_findStart",value:function(){for(var h=0;h<this._row.length;){var y=this._nextSet(this._row,h);if(y>=this._row.length)return null;for(var _=y;_<this._row.length&&this._row[_];)_++;var S=_-y;if(S<5)h=_+1;else{var N=y-Math.max(2*S,20);if(N<0)h=_+1;else if(this._matchRange(N,y,0)){var A=Math.max(10*S,50),D=this._nextSet(this._row,_);if(D>=this._row.length)h=_+1;else{if(!(D-_>A))return{start:y,end:_};h=_+1}}else h=_+1}}return null}},{key:"_smoothBarWidths",value:function(h){if(h.length<=2)return h;for(var y=h.slice(),_=1;_<y.length-1;_++){var S=y[_-1],N=y[_],A=[S,N,y[_+1]].sort((function(M,z){return M-z}))[1],D=Math.abs(N-A);D>0&&D<=3&&(y[_]=A)}return y}},{key:"_extractBarsAndSpaces",value:function(h){for(var y=[],_=[],S=h,N=0,A=!1;S<this._row.length&&this._row[S];)N++,S++;if(N===0)return null;for(y.push(N),N=0;S<this._row.length&&!this._row[S];)N++,S++;if(N===0||S>=this._row.length)return null;_.push(N);for(var D=6*(y[0]<_[0]?y[0]:.8*_[0]),M=2.5*_[0];S<this._row.length&&y.length<16;){for(N=0;S<this._row.length&&this._row[S];)N++,S++;if(N===0)break;y.push(N),N=0;for(var z=S;S<this._row.length&&!this._row[S];)N++,S++;if(N===0)break;if(N>=D){A=!0,S=z;break}if(y.length>=2&&N>=M){A=!0,S=z;break}if(S>=this._row.length){A=!0,S=z;break}_.push(N),_.length>=2&&(M=2*(_.reduce((function(X,re){return X+re}),0)/_.length))}return A?y.length<2||y.length>16||_.length!==y.length-1?null:this._validateSpaces(_)&&this._validateBarSizeCount(y)?{bars:this._smoothBarWidths(y),spaces:_,end:S}:null:null}},{key:"_validateBarSizeCount",value:function(h){if(h.length===0)return!1;var y,_=[],S=Al(h);try{for(S.s();!(y=S.n()).done;){var N,A=y.value,D=!1,M=Al(_);try{for(M.s();!(N=M.n()).done;){var z=N.value,X=z.reduce((function(re,ce){return re+ce}),0)/z.length;if(Math.abs(A-X)<=.35*X){z.push(A),D=!0;break}}}catch(re){M.e(re)}finally{M.f()}D||_.push([A])}}catch(re){S.e(re)}finally{S.f()}return!(_.length>2)}},{key:"_validateSpaces",value:function(h){if(h.length===0)return!0;var y=h.reduce((function(S,N){return S+N}),0)/h.length;if(y===0)return!1;var _=h.reduce((function(S,N){return S+Math.pow(N-y,2)}),0)/h.length;return Math.sqrt(_)/y<=.35}},{key:"_validateBarRatios",value:function(h,y){var _=h.reduce((function(pn,ds){return pn+ds}),0)/h.length,S=h.reduce((function(pn,ds){return pn+Math.abs(ds-_)}),0)/h.length;if((_===0?0:S/_)<=.1){var N=y.length>0?y.reduce((function(pn,ds){return pn+ds}),0)/y.length:0;return N>0&&N/_<.7?{narrowWidth:_/2.5,wideRatio:2.5}:{narrowWidth:_,wideRatio:2}}var A=Array.from(new Set(h.slice().sort((function(pn,ds){return pn-ds}))));if(A.length<2)return{narrowWidth:h.reduce((function(pn,ds){return pn+ds}),0)/h.length,wideRatio:2};for(var D=[],M=0;M<A.length-1;M++){var z,X=(A[M]+A[M+1])/2,re=[],ce=[],Re=Al(h);try{for(Re.s();!(z=Re.n()).done;){var oe=z.value;oe<X?re.push(oe):ce.push(oe)}}catch(pn){Re.e(pn)}finally{Re.f()}if(re.length!==0&&ce.length!==0){for(var Ne=re.reduce((function(pn,ds){return pn+ds}),0)/re.length,Ue=ce.reduce((function(pn,ds){return pn+ds}),0)/ce.length,qe=Ue/Ne,gt=er[0],ht=Math.abs(qe-gt),Nt=0,Xt=er;Nt<Xt.length;Nt++){var Ot=Xt[Nt],tn=Math.abs(qe-Ot);tn<ht&&(ht=tn,gt=Ot)}D.push({threshold:X,narrowBars:re,wideBars:ce,avgN:Ne,avgW:Ue,ratio:qe,ratioDiff:ht,matchedRatio:gt})}}D.sort((function(pn,ds){return pn.ratioDiff-ds.ratioDiff}));for(var tr=0,bs=D;tr<bs.length;tr++){var On=bs[tr],Ra=.05*On.matchedRatio;if(!(Math.abs(On.ratio-On.matchedRatio)>Ra)){var Wr,pa=.15*On.avgN,Ar=.15*On.avgW,gr=!0,Rn=Al(On.narrowBars);try{for(Rn.s();!(Wr=Rn.n()).done;){var Rr=Wr.value;if(Math.abs(Rr-On.avgN)>pa){gr=!1;break}}}catch(pn){Rn.e(pn)}finally{Rn.f()}if(gr){var ga,Kr=Al(On.wideBars);try{for(Kr.s();!(ga=Kr.n()).done;){var Yr=ga.value;if(Math.abs(Yr-On.avgW)>Ar){gr=!1;break}}}catch(pn){Kr.e(pn)}finally{Kr.f()}if(gr)return{narrowWidth:On.avgN,wideRatio:On.matchedRatio}}}}return null}},{key:"_validatePeriodicity",value:function(h,y){if(h.length>0){var _=h.reduce((function(z,X){return z+X}),0)/h.length,S=h.reduce((function(z,X){return z+Math.pow(X-_,2)}),0)/h.length,N=Math.sqrt(S);if((_!==0?N/_:0)>.65)return!1}if(y.length>0){var A=y.reduce((function(z,X){return z+X}),0)/y.length,D=y.reduce((function(z,X){return z+Math.pow(X-A,2)}),0)/y.length,M=Math.sqrt(D);if((A!==0?M/A:0)>.55)return!1}return!0}},{key:"_validateQuietZones",value:function(h,y,_){var S=1*y;if(h.start>=2&&h.start<S)return!1;var N=this._row.length-_;return N<6||!(N<S)}},{key:"_decodeBars",value:function(h,y){for(var _=1.6*(y??Math.min.apply(Math,R()(h))),S=0,N=h.slice().reverse(),A=0;A<N.length;A++)S+=N[A]>_?Math.pow(2,A+1):Math.pow(2,A);for(var D="",M=N.length-1;M>=0;M--)D+=N[M]>_?"W":"N";return{value:S,pattern:D}}},{key:"_verifyTrailingWhitespace",value:function(h,y){var _=Math.min(h+2*y,this._row.length);return this._matchRange(h,_,0)}},{key:"_validatePatternConsistency",value:function(h,y){for(var _=h.start,S=0,N=0,A=0,D=[-2,-1,1,2];A<D.length;A++){var M=_+D[A];if(!(M<0||M>=this._row.length)){N++;var z=this._extractBarsAndSpaces(M);if(z&&z.bars.length===y.length){for(var X=!0,re=0;re<y.length;re++)if(Math.abs(z.bars[re]-y[re])/Math.max(y[re],1)>.25){X=!1;break}X&&S++}}}return N>0&&S>=.5*N}},{key:"decode",value:function(h,y){var _=this._findStart();if(!_||_.start>.5*this._row.length)return null;var S=this._extractBarsAndSpaces(_.start);if(!S)return null;var N=S.bars,A=S.spaces,D=S.end;if(N.reduce((function(Re,oe){return Re+oe}),0)+A.reduce((function(Re,oe){return Re+oe}),0)<20||this._row.length-D<0||!this._validateSpaces(A)||!this._validatePeriodicity(N,A)||!this._validatePatternConsistency(_,N))return null;var M=this._validateBarRatios(N,A);if(!M||!this._validateQuietZones(_,M.narrowWidth,D))return null;var z=this._decodeBars(N,M.narrowWidth);if(!z)return null;var X=z.value;if(X<3||X>131070)return null;var re=N.reduce((function(Re,oe){return Re+oe}),0)/N.length;this._verifyTrailingWhitespace(D,re);var ce=N.map((function(Re,oe){return{code:Re>1.6*Math.min.apply(Math,R()(N))?1:0,start:0,end:0,error:0}}));return{code:X.toString(),start:_.start,end:D,startInfo:_,decodedCodes:ce,pattern:z.pattern,format:this.FORMAT}}}])})(hr);K()(No,"adjacentLineValidationMatches",1);var gc=No;function wu(g,x){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);x&&(y=y.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),h.push.apply(h,y)}return h}function oh(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}function Su(g,x,h,y){var _=p()(Qt()(g.prototype),x,h);return 2&y&&typeof _=="function"?function(S){return _.apply(h,S)}:_}var yc=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=oh(this,x,[].concat(_)),K()(h,"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),K()(h,"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),K()(h,"FORMAT","upc_e"),h}return cs()(x,g),W()(x,[{key:"_decodePayload",value:function(h,y,_){for(var S=(function(D){for(var M=1;M<arguments.length;M++){var z=arguments[M]!=null?arguments[M]:{};M%2?wu(Object(z),!0).forEach((function(X){K()(D,X,z[X])})):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(z)):wu(Object(z)).forEach((function(X){Object.defineProperty(D,X,Object.getOwnPropertyDescriptor(z,X))}))}return D})({},h),N=0,A=0;A<6;A++){if(!(S=this._decodeCode(S.end)))return null;S.code>=10&&(S.code=S.code-10,N|=1<<5-A),y.push(S.code),_.push(S)}return this._determineParity(N,y)?S:null}},{key:"_determineParity",value:function(h,y){for(var _=0;_<this.CODE_FREQUENCY.length;_++)for(var S=0;S<this.CODE_FREQUENCY[_].length;S++)if(h===this.CODE_FREQUENCY[_][S])return y.unshift(_),y.push(S),!0;return!1}},{key:"_convertToUPCA",value:function(h){var y=[h[0]],_=h[h.length-2];return(y=_<=2?y.concat(h.slice(1,3)).concat([_,0,0,0,0]).concat(h.slice(3,6)):_===3?y.concat(h.slice(1,4)).concat([0,0,0,0,0]).concat(h.slice(4,6)):_===4?y.concat(h.slice(1,5)).concat([0,0,0,0,0,h[5]]):y.concat(h.slice(1,6)).concat([0,0,0,0,_])).push(h[h.length-1]),y}},{key:"_checksum",value:function(h){return Su(x,"_checksum",this,3)([this._convertToUPCA(h)])}},{key:"_findEnd",value:function(h,y){return Su(x,"_findEnd",this,3)([h,!0])}},{key:"_verifyTrailingWhitespace",value:function(h){var y=h.end+(h.end-h.start)/2;return y<this._row.length&&this._matchRange(h.end,y,0)?h:null}}])})(Hr);function Cm(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var Oi=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=Cm(this,x,[].concat(_)),K()(h,"FORMAT","upc_a"),h}return cs()(x,g),W()(x,[{key:"decode",value:function(h,y){var _=Hr.prototype.decode.call(this);return _&&_.code&&_.code.length===13&&_.code.charAt(0)==="0"?(_.code=_.code.substring(1),_):null}}])})(Hr),jo={},ni={UP:1,DOWN:-1};jo.getBarcodeLine=function(g,x,h){var y,_,S,N,A,D=0|x.x,M=0|x.y,z=0|h.x,X=0|h.y,re=Math.abs(X-M)>Math.abs(z-D),ce=[],Re=g.data,oe=g.size.x,Ne=255,Ue=0;function qe(Xt,Ot){A=Re[Ot*oe+Xt],Ne=A<Ne?A:Ne,Ue=A>Ue?A:Ue,ce.push(A)}re&&(S=D,D=M,M=S,S=z,z=X,X=S),D>z&&(S=D,D=z,z=S,S=M,M=X,X=S);var gt=z-D,ht=Math.abs(X-M);y=gt/2|0,_=M;var Nt=M<X?1:-1;for(N=D;N<z;N++)re?qe(_,N):qe(N,_),(y-=ht)<0&&(_+=Nt,y+=gt);return{line:ce,min:Ne,max:Ue}},jo.toBinaryLine=function(g){var x,h,y,_,S,N,A=g.min,D=g.max,M=g.line,z=A+(D-A)/2,X=[],re=(D-A)/12,ce=-re;for(y=M[0]>z?ni.UP:ni.DOWN,X.push({pos:0,val:M[0]}),S=0;S<M.length-2;S++)y!==(_=(x=M[S+1]-M[S])+(h=M[S+2]-M[S+1])<ce&&M[S+1]<1.5*z?ni.DOWN:x+h>re&&M[S+1]>.5*z?ni.UP:y)&&(X.push({pos:S,val:M[S]}),y=_);for(X.push({pos:M.length,val:M[M.length-1]}),N=X[0].pos;N<X[1].pos;N++)M[N]=M[N]>z?0:1;for(S=1;S<X.length-1;S++)for(re=X[S+1].val>X[S].val?X[S].val+(X[S+1].val-X[S].val)/3*2|0:X[S+1].val+(X[S].val-X[S+1].val)/3|0,N=X[S].pos;N<X[S+1].pos;N++)M[N]=M[N]>re?0:1;return{line:M,threshold:re}},jo.debug={printFrequency:function(g,x){var h,y=x.getContext("2d");for(x.width=g.length,x.height=256,y.beginPath(),y.strokeStyle="blue",h=0;h<g.length;h++)y.moveTo(h,255),y.lineTo(h,255-g[h]);y.stroke(),y.closePath()},printPattern:function(g,x){var h,y=x.getContext("2d");for(x.width=g.length,y.fillColor="black",h=0;h<g.length;h++)g[h]===1&&y.fillRect(h,0,1,100)}};var ko=jo;function lh(g,x){var h=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!h){if(Array.isArray(g)||(h=(function(D,M){if(D){if(typeof D=="string")return si(D,M);var z={}.toString.call(D).slice(8,-1);return z==="Object"&&D.constructor&&(z=D.constructor.name),z==="Map"||z==="Set"?Array.from(D):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?si(D,M):void 0}})(g))||x){h&&(g=h);var y=0,_=function(){};return{s:_,n:function(){return y>=g.length?{done:!0}:{done:!1,value:g[y++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,N=!0,A=!1;return{s:function(){h=h.call(g)},n:function(){var D=h.next();return N=D.done,D},e:function(D){A=!0,S=D},f:function(){try{N||h.return==null||h.return()}finally{if(A)throw S}}}}function si(g,x){(x==null||x>g.length)&&(x=g.length);for(var h=0,y=Array(x);h<x;h++)y[h]=g[h];return y}var ca={code_128_reader:kl,ean_reader:Hr,ean_5_reader:xu,ean_2_reader:yu,ean_8_reader:_u,code_39_reader:lt,code_39_vin_reader:Nr,codabar_reader:Ps,upc_reader:Oi,upc_e_reader:yc,i2of5_reader:ah,"2of5_reader":jl,code_93_reader:Ii,code_32_reader:vn,pharmacode_reader:gc},Rl={registerReader:function(g,x){ca[g]=x},create:function(g,x){var h=[];function y(){g.readers.forEach((function(D){var M,z={},X=[];T()(D)==="object"?(M=D.format,z=D.config):typeof D=="string"&&(M=D),z.supplements&&(X=z.supplements.map((function(ce){return new ca[ce]})));try{var re=new ca[M](z,X);h.push(re)}catch(ce){throw console.error("* Error constructing reader ",M,ce),ce}}))}function _(D){var M,z=null,X=ko.getBarcodeLine(x,D[0],D[1]);ko.toBinaryLine(X);var re=-1;for(M=0;M<h.length&&z===null;M++)typeof h[M].setImageWrapper=="function"&&h[M].setImageWrapper(x),(z=h[M].decodePattern(X.line))!==null&&(re=M);return z===null||re>=0&&h[re]instanceof gc&&!(function(ce,Re,oe,Ne){var Ue=Math.round(ce[1].y),qe=Re.start,gt=oe.constructor,ht=gt&&gt.adjacentLineValidationMatches||0;if(ht<=0)return!0;for(var Nt=0,Xt=!1,Ot=0,tn=[1,2,3];Ot<tn.length;Ot++){var tr=tn[Ot];if(Xt)break;for(var bs=0,On=[-1,1];bs<On.length;bs++){var Ra=On[bs];if(Xt)break;var Wr=Ue+tr*Ra;if(!(Wr<0||Wr>=Ne.size.y)){var pa={x:ce[0].x,y:Wr},Ar={x:ce[1].x,y:Wr};try{var gr=ko.getBarcodeLine(Ne,pa,Ar);ko.toBinaryLine(gr),oe._row=gr.line;var Rn=oe._findStart();if(Rn!==null&&Rn.start===qe&&++Nt>=ht){Xt=!0;break}}catch{}}}}return Nt>=ht})(D,z,h[re],x)?null:{codeResult:z,barcodeLine:X}}function S(D){return N.apply(this,arguments)}function N(){return(N=ys()(Yn.a.mark((function D(M){var z,X,re,ce,Re;return Yn.a.wrap((function(oe){for(;;)switch(oe.prev=oe.next){case 0:z=null,X=lh(h),oe.prev=1,X.s();case 2:if((re=X.n()).done){oe.next=5;break}if(!(ce=re.value).decodeImage){oe.next=4;break}return oe.next=3,ce.decodeImage(M);case 3:if(!(z=oe.sent)){oe.next=4;break}return oe.abrupt("continue",5);case 4:oe.next=2;break;case 5:oe.next=7;break;case 6:oe.prev=6,Re=oe.catch(1),X.e(Re);case 7:return oe.prev=7,X.f(),oe.finish(7);case 8:return oe.abrupt("return",z);case 9:case"end":return oe.stop()}}),D,null,[[1,6,7,8]])})))).apply(this,arguments)}function A(D){var M,z,X=(function(ce){return Math.sqrt(Math.pow(Math.abs(ce[1].y-ce[0].y),2)+Math.pow(Math.abs(ce[1].x-ce[0].x),2))})(M=(function(ce){return[{x:(ce[1][0]-ce[0][0])/2+ce[0][0],y:(ce[1][1]-ce[0][1])/2+ce[0][1]},{x:(ce[3][0]-ce[2][0])/2+ce[2][0],y:(ce[3][1]-ce[2][1])/2+ce[2][1]}]})(D)),re=Math.atan2(M[1].y-M[0].y,M[1].x-M[0].x);return(M=(function(ce,Re,oe){function Ne(Ue){var qe=Ue*Math.sin(Re),gt=Ue*Math.cos(Re);ce[0].y-=qe,ce[0].x-=gt,ce[1].y+=qe,ce[1].x+=gt}for(Ne(oe);oe>1&&(!x.inImageWithBorder(ce[0])||!x.inImageWithBorder(ce[1]));)Ne(-(oe-=Math.ceil(oe/2)));return ce})(M,re,Math.floor(.1*X)))===null?null:((z=_(M))===null&&(z=(function(ce,Re,oe){var Ne,Ue,qe,gt=Math.sqrt(Math.pow(ce[1][0]-ce[0][0],2)+Math.pow(ce[1][1]-ce[0][1],2)),ht=null,Nt=Math.sin(oe),Xt=Math.cos(oe);for(Ne=1;Ne<16&&ht===null;Ne++)qe={y:(Ue=gt/16*Ne*(Ne%2==0?-1:1))*Nt,x:Ue*Xt},Re[0].y+=qe.x,Re[0].x-=qe.y,Re[1].y+=qe.x,Re[1].x-=qe.y,ht=_(Re);return ht})(D,M,re)),z===null?null:{codeResult:z.codeResult,line:M,angle:re,pattern:z.barcodeLine.line,threshold:z.barcodeLine.threshold})}return y(),{decodeFromBoundingBox:function(D){return A(D)},decodeFromBoundingBoxes:function(D){var M,z,X=[],re=g.multiple;for(M=0;M<D.length;M++){var ce=D[M];if((z=A(ce)||{}).box=ce,re)X.push(z);else if(z.codeResult)return z}return{barcodes:X}},decodeFromImage:function(D){return ys()(Yn.a.mark((function M(){var z;return Yn.a.wrap((function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=1,S(D);case 1:return z=X.sent,X.abrupt("return",z);case 2:case"end":return X.stop()}}),M)})))()},registerReader:function(D,M){if(ca[D])throw new Error("cannot register existing reader",D);ca[D]=M},setReaders:function(D){g.readers=D,h.length=0,y()}}}},ri=(function(){var g={};function x(_){return g[_]||(g[_]={subscribers:[]}),g[_]}function h(_,S){_.async?setTimeout((function(){_.callback(S)}),4):_.callback(S)}function y(_,S,N){var A;if(typeof S=="function")A={callback:S,async:N};else if(!(A=S).callback)throw new Error("Callback was not specified on options");x(_).subscribers.push(A)}return{subscribe:function(_,S,N){return y(_,S,N)},publish:function(_,S){var N=x(_),A=N.subscribers;A.filter((function(D){return!!D.once})).forEach((function(D){h(D,S)})),N.subscribers=A.filter((function(D){return!D.once})),N.subscribers.forEach((function(D){h(D,S)}))},once:function(_,S){var N=arguments.length>2&&arguments[2]!==void 0&&arguments[2];y(_,{callback:S,async:N,once:!0})},unsubscribe:function(_,S){if(_){var N=x(_);N.subscribers=N&&S?N.subscribers.filter((function(A){return A.callback!==S})):[]}else g={}}}})(),Pi=i(81),ch=i.n(Pi),uh=i(82),dh=i.n(uh),Am=i(83);function Rm(g,x,h){return x=Qt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Qt()(g).constructor):x.apply(g,h))}var Tu=(function(g){function x(h,y){var _;return F()(this,x),_=Rm(this,x,[h]),K()(_,"code",void 0),_.code=y,Object.setPrototypeOf(_,x.prototype),_}return cs()(x,g),W()(x,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,code:this.code}}}])})(i.n(Am)()(Error)),Eu="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function hh(){try{return navigator.mediaDevices.enumerateDevices()}catch{var g=new Tu("enumerateDevices is not defined. ".concat(Eu),-1);return Promise.reject(g)}}function vc(g){try{return navigator.mediaDevices.getUserMedia(g)}catch{var x=new Tu("getUserMedia is not defined. ".concat(Eu),-1);return Promise.reject(x)}}var js,bc=["deviceId"];function fr(g,x){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);x&&(y=y.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),h.push.apply(h,y)}return h}function Li(g){for(var x=1;x<arguments.length;x++){var h=arguments[x]!=null?arguments[x]:{};x%2?fr(Object(h),!0).forEach((function(y){K()(g,y,h[y])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(h)):fr(Object(h)).forEach((function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(h,y))}))}return g}function Nu(g,x){var h=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!h){if(Array.isArray(g)||(h=(function(D,M){if(D){if(typeof D=="string")return Dl(D,M);var z={}.toString.call(D).slice(8,-1);return z==="Object"&&D.constructor&&(z=D.constructor.name),z==="Map"||z==="Set"?Array.from(D):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?Dl(D,M):void 0}})(g))||x){h&&(g=h);var y=0,_=function(){};return{s:_,n:function(){return y>=g.length?{done:!0}:{done:!1,value:g[y++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,N=!0,A=!1;return{s:function(){h=h.call(g)},n:function(){var D=h.next();return N=D.done,D},e:function(D){A=!0,S=D},f:function(){try{N||h.return==null||h.return()}finally{if(A)throw S}}}}function Dl(g,x){(x==null||x>g.length)&&(x=g.length);for(var h=0,y=Array(x);h<x;h++)y[h]=g[h];return y}function xc(g){return new Promise((function(x,h){var y=10;(function _(){y>0?g.videoWidth>10&&g.videoHeight>10?x():window.setTimeout(_,500):h(new Tu("Unable to play video stream. Is webcam working?",-1)),y--})()}))}function ju(g,x){return ai.apply(this,arguments)}function ai(){return(ai=ys()(Yn.a.mark((function g(x,h){var y;return Yn.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=1,vc(h);case 1:if(y=_.sent,js=y,!x){_.next=2;break}return x.setAttribute("autoplay","true"),x.setAttribute("muted","true"),x.setAttribute("playsinline","true"),x.srcObject=y,x.addEventListener("loadedmetadata",(function(){x.play().catch((function(S){console.warn("* Error while trying to play video stream:",S)}))})),_.abrupt("return",xc(x));case 2:return _.abrupt("return",Promise.resolve());case 3:case"end":return _.stop()}}),g)})))).apply(this,arguments)}function ku(g){var x=dh()(g,["facing","minAspectRatio","maxAspectRatio"]);return g.minAspectRatio!==void 0&&g.minAspectRatio>0&&(x.aspectRatio=g.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),g.facing!==void 0&&(x.facingMode=g.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),x}function _c(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=ku(g);return x&&x.deviceId&&x.facingMode&&delete x.facingMode,Promise.resolve({audio:!1,video:x})}function Vi(){return(Vi=ys()(Yn.a.mark((function g(x){var h,y,_,S,N,A,D,M,z,X;return Yn.a.wrap((function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=1,hh();case 1:if(h=re.sent,y=h.filter((function(ce){return ce.kind==="videoinput"})),x){re.next=2;break}return re.abrupt("return",y);case 2:_=[],S=ku(x),S.deviceId,N=ch()(S,bc),A=Nu(y),re.prev=3,A.s();case 4:if((D=A.n()).done){re.next=9;break}return M=D.value,re.prev=5,z={audio:!1,video:Li(Li({},N),{},{deviceId:{exact:M.deviceId}})},re.next=6,vc(z);case 6:re.sent.getTracks().forEach((function(ce){return ce.stop()})),_.push(M),re.next=8;break;case 7:re.prev=7,re.catch(5);case 8:re.next=4;break;case 9:re.next=11;break;case 10:re.prev=10,X=re.catch(3),A.e(X);case 11:return re.prev=11,A.f(),re.finish(11);case 12:return re.abrupt("return",_);case 13:case"end":return re.stop()}}),g,null,[[3,10,11,12],[5,7]])})))).apply(this,arguments)}function wc(){if(!js)return null;var g=js.getVideoTracks();return g&&g!=null&&g.length?g[0]:null}var ks={requestedVideoElement:null,request:function(g,x){return ys()(Yn.a.mark((function h(){var y;return Yn.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return ks.requestedVideoElement=g,_.next=1,_c(x);case 1:return y=_.sent,_.abrupt("return",ju(g,y));case 2:case"end":return _.stop()}}),h)})))()},release:function(){var g=js&&js.getVideoTracks();return ks.requestedVideoElement!==null&&ks.requestedVideoElement.pause(),new Promise((function(x){setTimeout((function(){g&&g.length&&g.forEach((function(h){return h.stop()})),js=null,ks.requestedVideoElement=null,x()}),0)}))},enumerateVideoDevices:function(g){return Vi.apply(this,arguments)},getActiveStream:function(){var g;return(g=js)!==null&&g!==void 0?g:null},getActiveStreamLabel:function(){var g=wc();return g?g.label:""},getActiveTrack:wc,disableTorch:function(){return ys()(Yn.a.mark((function g(){var x,h;return Yn.a.wrap((function(y){for(;;)switch(y.prev=y.next){case 0:if(!(x=wc())){y.next=4;break}return y.prev=1,y.next=2,x.applyConstraints({advanced:[{torch:!1}]});case 2:y.next=4;break;case 3:throw y.prev=3,(h=y.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),h;case 4:case"end":return y.stop()}}),g,null,[[1,3]])})))()},enableTorch:function(){return ys()(Yn.a.mark((function g(){var x,h;return Yn.a.wrap((function(y){for(;;)switch(y.prev=y.next){case 0:if(!(x=wc())){y.next=4;break}return y.prev=1,y.next=2,x.applyConstraints({advanced:[{torch:!0}]});case 2:y.next=4;break;case 3:throw y.prev=3,(h=y.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),h;case 4:case"end":return y.stop()}}),g,null,[[1,3]])})))()}},Co=ks,ua={create:function(g){var x,h=document.createElement("canvas"),y=h.getContext("2d",{willReadFrequently:!!g.willReadFrequently}),_=[],S=(x=g.capacity)!==null&&x!==void 0?x:20,N=g.capture===!0;function A(D){return!!S&&D&&!(function(M,z){return z&&z.some((function(X){return Object.keys(X).every((function(re){return X[re]===M[re]}))}))})(D,g.blacklist)&&(function(M,z){return typeof z!="function"||z(M)})(D,g.filter)}return{addResult:function(D,M,z){var X={};A(z)&&(S--,X.codeResult=z,N&&(h.width=M.x,h.height=M.y,ia.drawImage(D,M,y),X.frame=h.toDataURL()),_.push(X))},getResults:function(){return _}}}},fh={inputStream:{type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,canvas:{createOverlay:!0},decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},Ml=Math.PI/180,ii={};ii.create=function(g,x){var h,y={},_=g.getConfig(),S=Zs(g.getRealWidth(),g.getRealHeight()),N=g.getCanvasSize(),A=Zs(g.getWidth(),g.getHeight()),D=g.getTopRight(),M=D.x,z=D.y,X=null,re=null,ce=_.willReadFrequently;function Re(oe,Ne,Ue,qe,gt){var ht=Math.floor(qe),Nt=Math.floor(gt),Xt=Math.min(ht+1,Ne-1),Ot=Math.min(Nt+1,Ue-1),tn=qe-ht,tr=gt-Nt;return(oe[Nt*Ne+ht]*(1-tn)+oe[Nt*Ne+Xt]*tn)*(1-tr)+(oe[Ot*Ne+ht]*(1-tn)+oe[Ot*Ne+Xt]*tn)*tr}return(h=x||document.createElement("canvas")).width=N.x,h.height=N.y,X=h.getContext("2d",{willReadFrequently:!!ce}),re=new Uint8Array(A.x*A.y),y.attachData=function(oe){re=oe},y.getData=function(){return re},y.grab=function(){var oe=_.halfSample,Ne=g.getFrame(),Ue=Ne,qe=0;if(Ue){if((function(Rn,Rr,ga){Rn.width!==Rr.x&&(Rn.width=Rr.x),Rn.height!==Rr.y&&(Rn.height=Rr.y)})(h,N,_.debug),_.type==="ImageStream"&&(Ue=Ne.img,Ne.tags&&Ne.tags.orientation))switch(Ne.tags.orientation){case 6:qe=90*Ml;break;case 8:qe=-90*Ml}if(qe!==0?(X.translate(N.x/2,N.y/2),X.rotate(qe),X.drawImage(Ue,-N.y/2,-N.x/2,N.y,N.x),X.rotate(-qe),X.translate(-N.x/2,-N.y/2)):X.drawImage(Ue,0,0,N.x,N.y),oe)(function(Rn,Rr,ga){for(var Kr,Yr=0,pn=Rr.x,ds=Math.floor(Rn.length/4),yr=Rr.x/2,vr=0,Da=Rr.x;pn<ds;){for(Kr=0;Kr<yr;Kr++)ga[vr]=(.299*Rn[4*Yr+0]+.587*Rn[4*Yr+1]+.114*Rn[4*Yr+2]+(.299*Rn[4*(Yr+1)+0]+.587*Rn[4*(Yr+1)+1]+.114*Rn[4*(Yr+1)+2])+(.299*Rn[4*pn+0]+.587*Rn[4*pn+1]+.114*Rn[4*pn+2])+(.299*Rn[4*(pn+1)+0]+.587*Rn[4*(pn+1)+1]+.114*Rn[4*(pn+1)+2]))/4,vr++,Yr+=2,pn+=2;Yr+=Da,pn+=Da}})(X.getImageData(M,z,A.x,A.y).data,A,re);else{var gt=document.createElement("canvas");gt.width=S.x,gt.height=S.y;var ht=gt.getContext("2d");qe!==0?(ht.translate(S.x/2,S.y/2),ht.rotate(qe),ht.drawImage(Ue,-S.y/2,-S.x/2,S.y,S.x)):ht.drawImage(Ue,0,0,S.x,S.y);var Nt=ht.getImageData(0,0,S.x,S.y).data,Xt=new Uint8Array(S.x*S.y);ra(Nt,Xt,_);for(var Ot=new Uint8Array(N.x*N.y),tn=S.x/N.x,tr=S.y/N.y,bs=0;bs<N.y;bs++)for(var On=0;On<N.x;On++){var Ra=On*tn,Wr=bs*tr;Ot[bs*N.x+On]=0|Re(Xt,S.x,S.y,Ra,Wr)}for(var pa=0;pa<A.y;pa++)for(var Ar=0;Ar<A.x;Ar++){var gr=(pa+z)*N.x+(Ar+M);re[pa*A.x+Ar]=Ot[gr]}}return!0}return!1},y.getSize=function(){return A},y};var Cu=ii,Il={274:"orientation"},Sc=Object.keys(Il).map((function(g){return Il[g]}));function mh(g){return new Promise((function(x){var h=new FileReader;h.onload=function(y){return x(y.target.result)},h.readAsArrayBuffer(g)}))}function jr(g){return new Promise((function(x,h){var y=new XMLHttpRequest;y.open("GET",g,!0),y.responseType="blob",y.onreadystatechange=function(){y.readyState!==XMLHttpRequest.DONE||y.status!==200&&y.status!==0||x(this.response)},y.onerror=h,y.send()}))}function Ao(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sc,h=new DataView(g),y=g.byteLength,_=x.reduce((function(N,A){var D=Object.keys(Il).filter((function(M){return Il[M]===A}))[0];return D&&(N[D]=A),N}),{}),S=2;if(h.getUint8(0)!==255||h.getUint8(1)!==216)return!1;for(;S<y;){if(h.getUint8(S)!==255)return!1;if(h.getUint8(S+1)===225)return Ro(h,S+4,_);S+=2+h.getUint16(S+2)}return!1}function Ro(g,x,h){if((function(N,A,D){for(var M="",z=A;z<A+D;z++)M+=String.fromCharCode(N.getUint8(z));return M})(g,x,4)!=="Exif")return!1;var y,_=x+6;if(g.getUint16(_)===18761)y=!1;else{if(g.getUint16(_)!==19789)return!1;y=!0}if(g.getUint16(_+2,!y)!==42)return!1;var S=g.getUint32(_+4,!y);return!(S<8)&&(function(N,A,D,M,z){for(var X=N.getUint16(D,!z),re={},ce=0;ce<X;ce++){var Re=D+12*ce+2,oe=M[N.getUint16(Re,!z)];oe&&(re[oe]=Tc(N,Re,A,D,z))}return re})(g,_,_+S,h,y)}function Tc(g,x,h,y,_){var S=g.getUint16(x+2,!_),N=g.getUint32(x+4,!_);switch(S){case 3:if(N===1)return g.getUint16(x+8,!_)}return null}function Ol(g,x){return"".concat(g,"image-").concat(x.toString().padStart(3,"0"),".jpg")}var mr={};function kr(g,x){g.onload=function(){x.loaded(this)},g.onerror=function(){x.loaded(this)}}mr.load=function(g,x,h,y,_,S){var N,A,D,M=new Array(y),z=new Array(M.length);if(_===!1)M[0]=g;else for(N=0;N<M.length;N++)D=h+N,M[N]=Ol(g,D);for(z.notLoaded=[],z.addImage=function(X){z.notLoaded.push(X)},z.loaded=function(X){for(var re=z.notLoaded,ce=0;ce<re.length;ce++)if(re[ce]===X){re.splice(ce,1);for(var Re=0;Re<M.length;Re++){var oe=encodeURI(M[Re].substr(M[Re].lastIndexOf("/")));if(X.src.lastIndexOf(oe)!==-1){z[Re]={img:X};break}}break}re.length===0&&(_===!1?(function(Ne){var Ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sc;return/^blob:/i.test(Ne)?jr(Ne).then(mh).then((function(qe){return Ao(qe,Ue)})):Promise.resolve(null)})(g,["orientation"]).then((function(Ne){z[0].tags=Ne,x(z)})).catch((function(Ne){console.log(Ne),x(z)})):x(z))},N=0;N<M.length;N++)A=new Image,z.addImage(A),kr(A,z),A.src=M[N]};var oi=mr,$r={createVideoStream:function(g){console.warn("**** InputStreamBrowser createVideoStream");var x,h,y=null,_=["canrecord","ended"],S={},N={x:0,y:0,type:"Point"},A={x:0,y:0,type:"XYSize"},D={getRealWidth:function(){return g.videoWidth},getRealHeight:function(){return g.videoHeight},getWidth:function(){return x},getHeight:function(){return h},setWidth:function(M){x=M},setHeight:function(M){h=M},setInputStream:function(M){y=M,this.setAttribute("src",M.src!==void 0?M.src:"")},ended:function(){return g.ended},getConfig:function(){return y},setAttribute:function(M,z){g&&g.setAttribute(M,z)},pause:function(){g.pause()},play:function(){g.play()},setCurrentTime:function(M){var z;((z=y)===null||z===void 0?void 0:z.type)!=="LiveStream"&&this.setAttribute("currentTime",M.toString())},addEventListener:function(M,z,X){_.indexOf(M)!==-1?(S[M]||(S[M]=[]),S[M].push(z)):g.addEventListener(M,z,X)},clearEventHandlers:function(){_.forEach((function(M){var z=S[M];z&&z.length>0&&z.forEach((function(X){g.removeEventListener(M,X)}))}))},trigger:function(M,z){var X,re,ce,Re,oe,Ne=S[M];if(M==="canrecord"&&(Re=g.videoWidth,oe=g.videoHeight,x=(re=y)!==null&&re!==void 0&&re.size?Re/oe>1?y.size:Math.floor(Re/oe*y.size):Re,h=(ce=y)!==null&&ce!==void 0&&ce.size?Re/oe>1?Math.floor(oe/Re*y.size):y.size:oe,A.x=x,A.y=h),Ne&&Ne.length>0)for(X=0;X<Ne.length;X++)Ne[X].apply(D,z)},setTopRight:function(M){N.x=M.x,N.y=M.y},getTopRight:function(){return N},setCanvasSize:function(M){A.x=M.x,A.y=M.y},getCanvasSize:function(){return A},getFrame:function(){return g}};return D},createLiveStream:function(g){console.warn("**** InputStreamBrowser createLiveStream"),g&&g.setAttribute("autoplay","true");var x=$r.createVideoStream(g);return x.ended=function(){return!1},x},createImageStream:function(){var g,x,h=null,y=0,_=0,S=0,N=!0,A=!1,D=null,M=0,z=null,X=!1,re=["canrecord","ended"],ce={},Re={x:0,y:0,type:"Point"},oe={x:0,y:0,type:"XYSize"};function Ne(qe,gt){var ht,Nt=ce[qe];if(Nt&&Nt.length>0)for(ht=0;ht<Nt.length;ht++)Nt[ht].apply(Ue,gt)}var Ue={trigger:Ne,getWidth:function(){return g},getHeight:function(){return x},setWidth:function(qe){g=qe},setHeight:function(qe){x=qe},getRealWidth:function(){return y},getRealHeight:function(){return _},setInputStream:function(qe){var gt;h=qe,qe.sequence===!1?(z=qe.src,M=1):(z=qe.src,M=qe.length),A=!1,oi.load(z,(function(ht){var Nt,Xt;if(D=ht,ht[0].tags&&ht[0].tags.orientation)switch(ht[0].tags.orientation){case 6:case 8:y=ht[0].img.height,_=ht[0].img.width;break;default:y=ht[0].img.width,_=ht[0].img.height}else y=ht[0].img.width,_=ht[0].img.height;g=(Nt=h)!==null&&Nt!==void 0&&Nt.size?y/_>1?h.size:Math.floor(y/_*h.size):y,x=(Xt=h)!==null&&Xt!==void 0&&Xt.size?y/_>1?Math.floor(_/y*h.size):h.size:_,oe.x=g,oe.y=x,A=!0,S=0,setTimeout((function(){Ne("canrecord",[])}),0)}),1,M,(gt=h)===null||gt===void 0?void 0:gt.sequence,h)},ended:function(){return X},setAttribute:function(){},getConfig:function(){return h},pause:function(){N=!0},play:function(){N=!1},setCurrentTime:function(qe){S=qe},addEventListener:function(qe,gt){re.indexOf(qe)!==-1&&(ce[qe]||(ce[qe]=[]),ce[qe].push(gt))},clearEventHandlers:function(){Object.keys(ce).forEach((function(qe){return delete ce[qe]}))},setTopRight:function(qe){Re.x=qe.x,Re.y=qe.y},getTopRight:function(){return Re},setCanvasSize:function(qe){oe.x=qe.x,oe.y=qe.y},getCanvasSize:function(){return oe},getFrame:function(){var qe,gt;return A?(N||(qe=(gt=D)===null||gt===void 0?void 0:gt[S],S<M-1?S++:setTimeout((function(){X=!0,Ne("ended",[])}),0)),qe):null}};return Ue}},da=$r,Cr={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(g,x){var h,y=g.data,_=x.data,S=this.searchDirections,N=g.size.x;function A(M,z,X,re){var ce,Re,oe;for(ce=0;ce<S.length;ce++){if(Re=M.cy+S[M.dir][0],oe=M.cx+S[M.dir][1],y[h=Re*N+oe]===z&&(_[h]===0||_[h]===X))return _[h]=X,M.cy=Re,M.cx=oe,!0;_[h]===0&&(_[h]=re),M.dir=(M.dir+1)%8}return!1}function D(M,z,X){return{dir:X,x:M,y:z,next:null,prev:null}}return{trace:function(M,z,X,re){return A(M,z,X,re)},contourTracing:function(M,z,X,re,ce){return(function(Re,oe,Ne,Ue,qe){var gt,ht,Nt,Xt=null,Ot={cx:oe,cy:Re,dir:0};if(A(Ot,Ue,Ne,qe)){gt=Xt=D(oe,Re,Ot.dir),Nt=Ot.dir,(ht=D(Ot.cx,Ot.cy,0)).prev=gt,gt.next=ht,ht.next=null,gt=ht;var tn=g.size.x*g.size.y,tr=0;do Ot.dir=(Ot.dir+6)%8,A(Ot,Ue,Ne,qe),Nt!==Ot.dir?(gt.dir=Ot.dir,(ht=D(Ot.cx,Ot.cy,0)).prev=gt,gt.next=ht,ht.next=null,gt=ht):(gt.dir=Nt,gt.x=Ot.cx,gt.y=Ot.cy),Nt=Ot.dir;while((Ot.cx!==oe||Ot.cy!==Re)&&++tr<tn);Xt.prev=gt.prev,gt.prev.next=Xt}return Xt})(M,z,X,re,ce)}}}},qs={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(g,x){var h=g.data,y=x.data,_=g.size.x,S=g.size.y,N=Cr.create(g,x);return{rasterize:function(A){var D,M,z,X,re,ce,Re,oe,Ne,Ue,qe,gt,ht=[],Nt=0;for(gt=0;gt<400;gt++)ht[gt]=0;for(ht[0]=h[0],Ne=null,ce=1;ce<S-1;ce++)for(X=0,M=ht[0],re=1;re<_-1;re++)if(y[qe=ce*_+re]===0)if((D=h[qe])!==M){if(X===0)ht[z=Nt+1]=D,M=D,(Re=N.contourTracing(ce,re,z,D,qs.DIR.OUTSIDE_EDGE))!==null&&(Nt++,X=z,(oe=qs.createContour2D()).dir=qs.CONTOUR_DIR.CW_DIR,oe.index=X,oe.firstVertex=Re,oe.nextpeer=Ne,oe.insideContours=null,Ne!==null&&(Ne.prevpeer=oe),Ne=oe);else if((Re=N.contourTracing(ce,re,qs.DIR.INSIDE_EDGE,D,X))!==null){for((oe=qs.createContour2D()).firstVertex=Re,oe.insideContours=null,oe.dir=A===0?qs.CONTOUR_DIR.CCW_DIR:qs.CONTOUR_DIR.CW_DIR,oe.index=A,Ue=Ne;Ue!==null&&Ue.index!==X;)Ue=Ue.nextpeer;Ue!==null&&(oe.nextpeer=Ue.insideContours,Ue.insideContours!==null&&(Ue.insideContours.prevpeer=oe),Ue.insideContours=oe)}}else y[qe]=X;else y[qe]===qs.DIR.OUTSIDE_EDGE||y[qe]===qs.DIR.INSIDE_EDGE?(X=0,M=y[qe]===qs.DIR.INSIDE_EDGE?h[qe]:ht[0]):M=ht[X=y[qe]];for(Ue=Ne;Ue!==null;)Ue.index=A,Ue=Ue.nextpeer;return{cc:Ne,count:Nt}},debug:{drawContour:function(A,D){var M,z,X,re=A.getContext("2d"),ce=D;for(re.strokeStyle="red",re.fillStyle="red",re.lineWidth=1,M=ce!==null?ce.insideContours:null;ce!==null;){switch(M!==null?(z=M,M=M.nextpeer):(z=ce,M=(ce=ce.nextpeer)!==null?ce.insideContours:null),z.dir){case qs.CONTOUR_DIR.CW_DIR:re.strokeStyle="red";break;case qs.CONTOUR_DIR.CCW_DIR:re.strokeStyle="blue";break;case qs.CONTOUR_DIR.UNKNOWN_DIR:re.strokeStyle="green"}X=z.firstVertex,re.beginPath(),re.moveTo(X.x,X.y);do X=X.next,re.lineTo(X.x,X.y);while(X!==z.firstVertex);re.stroke()}}}}}},Au=qs;var ka,ha,us,ln,en,pr,Nn,fa,Cs,As,Do,Ui,Bi=function(g,x,h){var y=new g.Uint8Array(h),_=x.size|0,S=g.Math.imul;function N(oe,Ne){oe=oe|0,Ne=Ne|0;var Ue=0,qe=0,gt=0,ht=0,Nt=0,Xt=0,Ot=0,tn=0;for(Ue=1;(Ue|0)<(_-1|0);Ue=Ue+1|0)for(tn=tn+_|0,qe=1;(qe|0)<(_-1|0);qe=qe+1|0)ht=tn-_|0,Nt=tn+_|0,Xt=qe-1|0,Ot=qe+1|0,gt=(y[oe+ht+Xt|0]|0)+(y[oe+ht+Ot|0]|0)+(y[oe+tn+qe|0]|0)+(y[oe+Nt+Xt|0]|0)+(y[oe+Nt+Ot|0]|0)|0,(gt|0)==5?y[Ne+tn+qe|0]=1:y[Ne+tn+qe|0]=0}function A(oe,Ne,Ue){oe=oe|0,Ne=Ne|0,Ue=Ue|0;var qe=0;for(qe=S(_,_)|0;(qe|0)>0;)qe=qe-1|0,y[Ue+qe|0]=(y[oe+qe|0]|0)-(y[Ne+qe|0]|0)|0}function D(oe,Ne,Ue){oe=oe|0,Ne=Ne|0,Ue=Ue|0;var qe=0;for(qe=S(_,_)|0;(qe|0)>0;)qe=qe-1|0,y[Ue+qe|0]=y[oe+qe|0]|0|(y[Ne+qe|0]|0)|0}function M(oe){oe=oe|0;var Ne=0,Ue=0;for(Ue=S(_,_)|0;(Ue|0)>0;)Ue=Ue-1|0,Ne=(Ne|0)+(y[oe+Ue|0]|0)|0;return Ne|0}function z(oe,Ne){oe=oe|0,Ne=Ne|0;var Ue=0;for(Ue=S(_,_)|0;(Ue|0)>0;)Ue=Ue-1|0,y[oe+Ue|0]=Ne}function X(oe,Ne){oe=oe|0,Ne=Ne|0;var Ue=0,qe=0,gt=0,ht=0,Nt=0,Xt=0,Ot=0,tn=0;for(Ue=1;(Ue|0)<(_-1|0);Ue=Ue+1|0)for(tn=tn+_|0,qe=1;(qe|0)<(_-1|0);qe=qe+1|0)ht=tn-_|0,Nt=tn+_|0,Xt=qe-1|0,Ot=qe+1|0,gt=(y[oe+ht+Xt|0]|0)+(y[oe+ht+Ot|0]|0)+(y[oe+tn+qe|0]|0)+(y[oe+Nt+Xt|0]|0)+(y[oe+Nt+Ot|0]|0)|0,(gt|0)>0?y[Ne+tn+qe|0]=1:y[Ne+tn+qe|0]=0}function re(oe,Ne){oe=oe|0,Ne=Ne|0;var Ue=0;for(Ue=S(_,_)|0;(Ue|0)>0;)Ue=Ue-1|0,y[Ne+Ue|0]=y[oe+Ue|0]|0}function ce(oe){oe=oe|0;var Ne=0,Ue=0;for(Ne=0;(Ne|0)<(_-1|0);Ne=Ne+1|0)y[oe+Ne|0]=0,y[oe+Ue|0]=0,Ue=Ue+_-1|0,y[oe+Ue|0]=0,Ue=Ue+1|0;for(Ne=0;(Ne|0)<(_|0);Ne=Ne+1|0)y[oe+Ue|0]=0,Ue=Ue+1|0}function Re(){var oe=0,Ne=0,Ue=0,qe=0,gt=0,ht=0;Ne=S(_,_)|0,Ue=Ne+Ne|0,qe=Ue+Ne|0,z(qe,0),ce(oe);do N(oe,Ne),X(Ne,Ue),A(oe,Ue,Ue),D(qe,Ue,qe),re(Ne,oe),gt=M(oe)|0,ht=(gt|0)==0|0;while(!ht)}return{skeletonize:Re}},li={ctx:{binary:null},dom:{binary:null}},Gr={x:0,y:0};function Ru(g){var x,h,y,_,S,N,A,D=Cs.size.x,M=Cs.size.y,z=-Cs.size.x,X=-Cs.size.y;for(x=0,h=0;h<g.length;h++)x+=(_=g[h]).rad;for((x=(180*(x/=g.length)/Math.PI+90)%180-90)<0&&(x+=180),x=(180-x)*Math.PI/180,S=c.copy(c.create(),[Math.cos(x),Math.sin(x),-Math.sin(x),Math.cos(x)]),h=0;h<g.length;h++)for(_=g[h],y=0;y<4;y++)u.transformMat2(_.box[y],_.box[y],S);for(h=0;h<g.length;h++)for(_=g[h],y=0;y<4;y++)_.box[y][0]<D&&(D=_.box[y][0]),_.box[y][0]>z&&(z=_.box[y][0]),_.box[y][1]<M&&(M=_.box[y][1]),_.box[y][1]>X&&(X=_.box[y][1]);for(N=[[D,M],[z,M],[z,X],[D,X]],A=ka.halfSample?2:1,S=c.invert(S,S),y=0;y<4;y++)u.transformMat2(N[y],N[y],S);for(y=0;y<4;y++)u.scale(N[y],N[y],A);return N}function zi(g){var x=(function(S,N,A){var D,M,z,X,re=0,ce=0,Re=[];for(D=0;D<N;D++)Re[D]={score:0,item:null};for(D=0;D<S.length;D++)if((M=A.apply(this,[S[D]]))>ce)for((z=Re[re]).score=M,z.item=S[D],ce=Number.MAX_VALUE,X=0;X<N;X++)Re[X].score<ce&&(ce=Re[X].score,re=X);return Re})((function(S,N,A){var D,M,z,X,re=[];function ce(Re){var oe=!1;for(M=0;M<re.length;M++)(z=re[M]).fits(Re)&&(z.add(Re),oe=!0);return oe}for(A||(A="rad"),D=0;D<S.length;D++)ce(X=Fr(S[D],D,A))||re.push(Ja(X,N));return re})(g,.9),1,(function(S){return S.getPoints().length})),h=[],y=[];if(x.length===1){h=x[0].item.getPoints();for(var _=0;_<h.length;_++)y.push(h[_].point)}return y}function Ca(g,x){Cs.subImageAsCopy(ln,Zs(g,x)),Ui.skeletonize()}function ci(g,x,h,y){var _,S,N,A,D=[],M=[],z=Math.ceil(As.x/3);if(g.length>=2){for(_=0;_<g.length;_++)g[_].m00>z&&D.push(g[_]);if(D.length>=2){for(N=zi(D),S=0,_=0;_<N.length;_++){var X,re;S+=(X=(re=N[_])===null||re===void 0?void 0:re.rad)!==null&&X!==void 0?X:0}N.length>1&&N.length>=D.length/4*3&&N.length>g.length/4&&(S/=N.length,A={index:x[1]*Gr.x+x[0],pos:{x:h,y},box:[u.clone([h,y]),u.clone([h+ln.size.x,y]),u.clone([h+ln.size.x,y+ln.size.y]),u.clone([h,y+ln.size.y])],moments:N,rad:S,vec:u.clone([Math.cos(S),Math.sin(S)])},M.push(A))}}return M}var Aa=function(g,x){ka=x,Do=g,(function(){ha=ka.halfSample?new An({x:Do.size.x/2|0,y:Do.size.y/2|0}):Do,As=xo(ka.patchSize,ha.size),Gr.x=ha.size.x/As.x|0,Gr.y=ha.size.y/As.y|0,Cs=new An(ha.size,void 0,Uint8Array,!1),en=new An(As,void 0,Array,!0);var h=As.x*As.y*4,y=Math.max(65536,Math.pow(2,Math.ceil(Math.log2(h)))),_=new ArrayBuffer(y);ln=new An(As,new Uint8Array(_,0,As.x*As.y)),us=new An(As,new Uint8Array(_,As.x*As.y*3,As.x*As.y),void 0,!0),Ui=Bi({Math,Uint8Array},{size:As.x},_),fa=new An({x:ha.size.x/ln.size.x|0,y:ha.size.y/ln.size.y|0},void 0,Array,!0),pr=new An(fa.size,void 0,void 0,!0),Nn=new An(fa.size,void 0,Int32Array,!0)})(),(function(){if(!ka.useWorker&&typeof document<"u"){li.dom.binary=document.createElement("canvas"),li.dom.binary.className="binaryBuffer";var h=!!ka.willReadFrequently;li.ctx.binary=li.dom.binary.getContext("2d",{willReadFrequently:h}),li.dom.binary.width=Cs.size.x,li.dom.binary.height=Cs.size.y}})()},Du=function(){ka.halfSample&&(function(y,_){for(var S=y.data,N=y.size.x,A=_.data,D=0,M=N,z=S.length,X=N/2,re=0;M<z;){for(var ce=0;ce<X;ce++)A[re]=Math.floor((S[D]+S[D+1]+S[M]+S[M+1])/4),re++,D+=2,M+=2;D+=N,M+=N}})(Do,ha),kn(ha,Cs),Cs.zeroBorder();var g=(function(){var y,_,S,N,A,D,M=[];for(y=0;y<Gr.x;y++)for(_=0;_<Gr.y;_++)Ca(S=ln.size.x*y,N=ln.size.y*_),us.zeroBorder(),Fs(en.data,0),D=Au.create(us,en).rasterize(0),A=en.moments(D.count),M=M.concat(ci(A,[y,_],S,N));return M})();if(g.length<Gr.x*Gr.y*.05)return null;var x=(function(y){var _,S,N=0,A=0;function D(){var z;for(z=0;z<Nn.data.length;z++)if(Nn.data[z]===0&&pr.data[z]===1)return z;return Nn.data.length}function M(z){var X,re,ce,Re,oe,Ne=z%Nn.size.x,Ue=z/Nn.size.x|0;if(z<Nn.data.length)for(ce=fa.data[z],Nn.data[z]=N,oe=0;oe<Cr.searchDirections.length;oe++)re=Ue+Cr.searchDirections[oe][0],X=Ne+Cr.searchDirections[oe][1],Re=re*Nn.size.x+X,pr.data[Re]!==0?Nn.data[Re]===0&&Math.abs(u.dot(fa.data[Re].vec,ce.vec))>.95&&M(Re):Nn.data[Re]=Number.MAX_VALUE}for(Fs(pr.data,0),Fs(Nn.data,0),Fs(fa.data,null),_=0;_<y.length;_++)S=y[_],fa.data[S.index]=S,pr.data[S.index]=1;for(pr.zeroBorder();(A=D())<Nn.data.length;)N++,M(A);return N})(g);if(x<1)return null;var h=(function(y){var _,S,N=[];for(_=0;_<y;_++)N.push(0);for(S=Nn.data.length;S--;)Nn.data[S]>0&&N[Nn.data[S]-1]++;return(N=N.map((function(A,D){return{val:A,label:D+1}}))).sort((function(A,D){return D.val-A.val})),N.filter((function(A){return A.val>=5}))})(x);return h.length===0?null:(function(y,_){var S,N,A,D,M=[],z=[];for(S=0;S<y.length;S++){for(N=Nn.data.length,M.length=0;N--;)Nn.data[N]===y[S].label&&(A=fa.data[N],M.push(A));(D=Ru(M))&&z.push(D)}return z})(h)},Mu=function(g,x){var h,y,_=g.getWidth(),S=g.getHeight(),N=x.halfSample?.5:1;g.getConfig().area&&(y=Sa(_,S,g.getConfig().area),g.setTopRight({x:y.sx,y:y.sy}),g.setCanvasSize({x:_,y:S}),_=y.sw,S=y.sh);var A={x:Math.floor(_*N),y:Math.floor(S*N)};if(h=xo(x.patchSize,A),g.setWidth(Math.max(Math.floor(Math.floor(A.x/h.x)*(1/N)*h.x),h.x)),g.setHeight(Math.max(Math.floor(Math.floor(A.y/h.y)*(1/N)*h.y),h.y)),g.getWidth()%h.x==0&&g.getHeight()%h.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(_," )and height (").concat(S,") must a multiple of ").concat(h.x))},Mo=W()((function g(){F()(this,g),K()(this,"config",void 0),K()(this,"inputStream",void 0),K()(this,"framegrabber",void 0),K()(this,"inputImageWrapper",void 0),K()(this,"stopped",!1),K()(this,"initAborted",!1),K()(this,"boxSize",void 0),K()(this,"resultCollector",void 0),K()(this,"decoder",void 0),K()(this,"workerPool",[]),K()(this,"onUIThread",!0),K()(this,"canvasContainer",new Fi)})),Pl=W()((function g(){F()(this,g),K()(this,"image",void 0),K()(this,"overlay",void 0)})),Fi=W()((function g(){F()(this,g),K()(this,"ctx",void 0),K()(this,"dom",void 0),this.ctx=new Pl,this.dom=new Pl}));function vs(g){if(typeof document>"u")return null;if(g instanceof HTMLElement&&g.nodeName&&g.nodeType===1)return g;var x=typeof g=="string"?g:"#interactive.viewport";return document.querySelector(x)}function Ll(g,x,h){var y=(function(S,N){var A=document.querySelector(S);return A||((A=document.createElement("canvas")).className=N),A})(g,x),_=y.getContext("2d",{willReadFrequently:h.willReadFrequently});return{canvas:y,context:_}}function ph(g){var x,h,y,_,S,N,A,D,M,z,X=vs(g==null||(x=g.config)===null||x===void 0||(h=x.inputStream)===null||h===void 0?void 0:h.target),re=g==null||(y=g.config)===null||y===void 0||(_=y.inputStream)===null||_===void 0?void 0:_.type;if(!re)return null;var ce=(g==null||(S=g.config)===null||S===void 0||(N=S.canvas)===null||N===void 0?void 0:N.createOverlay)!==!1,Re=(function(Ne,Ue){var qe=Ue.willReadFrequently,gt=Ue.createOverlay;if(typeof document<"u"){var ht=Ll("canvas.imgBuffer","imgBuffer",{willReadFrequently:qe});ht.canvas.width=Ne.x,ht.canvas.height=Ne.y;var Nt={canvas:null,context:null};if(gt){var Xt=Ll("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:qe});Xt.canvas.width=Ne.x,Xt.canvas.height=Ne.y,Nt=Xt}return{dom:{image:ht.canvas,overlay:Nt.canvas},ctx:{image:ht.context,overlay:Nt.context}}}return null})(g.inputStream.getCanvasSize(),{willReadFrequently:!(g==null||(A=g.config)===null||A===void 0||(D=A.inputStream)===null||D===void 0||!D.willReadFrequently),createOverlay:ce,debug:g==null||(M=g.config)===null||M===void 0||(z=M.locator)===null||z===void 0?void 0:z.debug});if(!Re)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var oe=Re.dom;return typeof document<"u"&&X&&(re!=="ImageStream"||X.contains(oe.image)||X.appendChild(oe.image),oe.overlay&&!X.contains(oe.overlay)&&X.appendChild(oe.overlay)),Re}function gh(g,x){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);x&&(y=y.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),h.push.apply(h,y)}return h}function Ec(g){for(var x=1;x<arguments.length;x++){var h=arguments[x]!=null?arguments[x]:{};x%2?gh(Object(h),!0).forEach((function(y){K()(g,y,h[y])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(h)):gh(Object(h)).forEach((function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(h,y))}))}return g}var ma=[];function rs(g){return Ec(Ec({},g),{},{inputStream:Ec(Ec({},g.inputStream),{},{target:null})})}function Iu(g){if(g){var x=g().default;if(!x)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var h;function y(S){self.postMessage({event:"processed",imageData:h.data,result:S},[h.data.buffer])}function _(){self.postMessage({event:"initialized",imageData:h.data},[h.data.buffer])}self.onmessage=function(S){if(S.data.cmd==="init"){var N=S.data.config;N.numOfWorkers=0,h=new x.ImageWrapper({x:S.data.size.x,y:S.data.size.y},new Uint8Array(S.data.imageData)),x.init(N,_,h),x.onProcessed(y)}else S.data.cmd==="process"?(h.data=new Uint8Array(S.data.imageData),x.start()):S.data.cmd==="setReaders"?x.setReaders(S.data.readers):S.data.cmd==="registerReader"&&x.registerReader(S.data.name,S.data.reader)}}function Vl(g,x,h){var y,_,S=(typeof __factorySource__<"u"&&(_=__factorySource__),y=new Blob(["("+Iu.toString()+")("+_+");"],{type:"text/javascript"}),window.URL.createObjectURL(y)),N={worker:new Worker(S),imageData:new Uint8Array(x.getWidth()*x.getHeight()),busy:!0};N.worker.onmessage=function(A){A.data.event==="initialized"?(URL.revokeObjectURL(S),N.busy=!1,N.imageData=new Uint8Array(A.data.imageData),h(N)):A.data.event==="processed"?(N.imageData=new Uint8Array(A.data.imageData),N.busy=!1,typeof publishResult<"u"&&publishResult(A.data.result,N.imageData)):A.data.event},N.worker.postMessage({cmd:"init",size:{x:x.getWidth(),y:x.getHeight()},imageData:N.imageData,config:rs(g)},[N.imageData.buffer])}function Io(g,x,h,y){var _=g-ma.length;if(_===0&&y)y();else if(_<0)ma.slice(_).forEach((function(A){A.worker.terminate()})),ma=ma.slice(0,_),y&&y();else{var S=function(A){ma.push(A),ma.length>=g&&y&&y()};if(x)for(var N=0;N<_;N++)Vl(x,h,S)}}function Nc(g,x,h){for(var y=g.length;y--;)g[y][0]+=x,g[y][1]+=h}function Oo(g,x,h){g[0].x+=x,g[0].y+=h,g[1].x+=x,g[1].y+=h}var qi=(function(){return W()((function h(){var y=this;F()(this,h),K()(this,"context",new Mo),K()(this,"canRecord",(function(_){var S;y.context.initAborted?_(new Error("Initialization was aborted")):y.context.config?y.context.inputStream?(Mu(y.context.inputStream,(S=y.context.config)===null||S===void 0?void 0:S.locator),y.initCanvas(),y.context.framegrabber=Cu.create(y.context.inputStream,y.context.canvasContainer.dom.image),y.context.config.numOfWorkers===void 0&&(y.context.config.numOfWorkers=0),Io(y.context.config.numOfWorkers,y.context.config,y.context.inputStream,(function(){var N;((N=y.context.config)===null||N===void 0?void 0:N.numOfWorkers)===0&&y.initializeData(),y.ready(_)}))):_(new Error("Input stream not initialized")):_(new Error("Configuration not initialized"))})),K()(this,"update",(function(){if(y.context.onUIThread){var _,S=(A=y.context.framegrabber,ma.length?!!(D=ma.filter((function(M){return!M.busy}))[0])&&(A.attachData(D.imageData),A.grab()&&(D.busy=!0,D.worker.postMessage({cmd:"process",imageData:D.imageData},[D.imageData.buffer])),!0):null);S||(y.context.framegrabber.attachData((_=y.context.inputImageWrapper)===null||_===void 0?void 0:_.data),y.context.framegrabber.grab()&&(S||y.locateAndDecode()))}else{var N;y.context.framegrabber.attachData((N=y.context.inputImageWrapper)===null||N===void 0?void 0:N.data),y.context.framegrabber.grab(),y.locateAndDecode()}var A,D})),K()(this,"_cachedStyleValues",void 0),K()(this,"_resolvedStyle",void 0)}),[{key:"initBuffers",value:function(h){if(this.context.config){var y=(function(N,A,D){var M=A||new An({x:N.getWidth(),y:N.getHeight(),type:"XYSize"}),z=[u.clone([0,0]),u.clone([0,M.size.y]),u.clone([M.size.x,M.size.y]),u.clone([M.size.x,0])];return Aa(M,D),{inputImageWrapper:M,boxSize:z}})(this.context.inputStream,h,this.context.config.locator),_=y.inputImageWrapper,S=y.boxSize;this.context.inputImageWrapper=_,this.context.boxSize=S}}},{key:"initializeData",value:function(h){this.context.config&&(this.initBuffers(h),this.context.decoder=Rl.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?vs(this.context.config.inputStream.target):null}},{key:"ready",value:function(h){this.context.inputStream.play(),h()}},{key:"initCanvas",value:function(){var h=ph(this.context);if(h){var y=h.ctx,_=h.dom;this.context.canvasContainer.dom.image=_.image,this.context.canvasContainer.dom.overlay=_.overlay,this.context.canvasContainer.ctx.image=y.image,this.context.canvasContainer.ctx.overlay=y.overlay}}},{key:"initInputStream",value:function(h){if(this.context.config&&this.context.config.inputStream){var y=this.context.config.inputStream,_=y.type,S=y.constraints,N=(function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"LiveStream",z=arguments.length>1?arguments[1]:void 0,X=arguments.length>2?arguments[2]:void 0;switch(M){case"VideoStream":var re=document.createElement("video");return{video:re,inputStream:X.createVideoStream(re)};case"ImageStream":return{inputStream:X.createImageStream()};case"LiveStream":var ce=null;return z&&((ce=z.querySelector("video"))||(ce=document.createElement("video"),z.appendChild(ce))),{video:ce,inputStream:X.createLiveStream(ce)};default:return console.error("* setupInputStream invalid type ".concat(M)),{video:null,inputStream:null}}})(_,this.getViewPort(),da),A=N.video,D=N.inputStream;_==="LiveStream"&&A&&Co.request(A,S).then((function(){return D.trigger("canrecord")})).catch((function(M){return h(M)})),D&&(D.setAttribute("preload","auto"),D.setInputStream(this.context.config.inputStream),D.addEventListener("canrecord",this.canRecord.bind(void 0,h))),this.context.inputStream=D}}},{key:"getBoundingBoxes",value:function(){var h;return(h=this.context.config)!==null&&h!==void 0&&h.locate?Du():[[u.clone(this.context.boxSize[0]),u.clone(this.context.boxSize[1]),u.clone(this.context.boxSize[2]),u.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(h){var y=this,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set,S=this.context.inputStream.getTopRight(),N=S.x,A=S.y;if((N!==0||A!==0)&&(h.barcodes&&h.barcodes.forEach((function(M){return y.transformResult(M,_)})),h.line&&h.line.length===2&&Oo(h.line,N,A),h.box&&!_.has(h.box)&&(Nc(h.box,N,A),_.add(h.box)),h.boxes&&h.boxes.length>0))for(var D=0;D<h.boxes.length;D++)_.has(h.boxes[D])||(Nc(h.boxes[D],N,A),_.add(h.boxes[D]))}},{key:"addResult",value:function(h,y){var _=this;y&&this.context.resultCollector&&(h.barcodes?h.barcodes.filter((function(S){return S.codeResult})).forEach((function(S){return _.addResult(S,y)})):h.codeResult&&this.context.resultCollector.addResult(y,this.context.inputStream.getCanvasSize(),h.codeResult))}},{key:"hasCodeResult",value:function(h){return!(!h||!(h.barcodes?h.barcodes.some((function(y){return y.codeResult})):h.codeResult))}},{key:"publishResult",value:function(){var h,y,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,S=arguments.length>1?arguments[1]:void 0,N=_;_&&this.context.onUIThread&&(this.transformResult(_),this.addResult(_,S),N=(_==null||(y=_.barcodes)===null||y===void 0?void 0:y.length)>0?_.barcodes:_),ri.publish("processed",N),this.hasCodeResult(_)&&ri.publish("detected",N);var A=this.context.config;A&&A.locate===!1&&(h=A.inputStream)!==null&&h!==void 0&&h.area&&this.drawScannerArea()}},{key:"locateAndDecode",value:(x=ys()(Yn.a.mark((function h(){var y,_,S,N,A,D;return Yn.a.wrap((function(M){for(;;)switch(M.prev=M.next){case 0:if(!(y=this.getBoundingBoxes())){M.next=3;break}return M.next=1,this.context.decoder.decodeFromBoundingBoxes(y);case 1:if(D=M.sent){M.next=2;break}D={};case 2:(S=D).boxes=y,this.publishResult(S,(_=this.context.inputImageWrapper)===null||_===void 0?void 0:_.data),M.next=5;break;case 3:return M.next=4,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 4:(N=M.sent)?this.publishResult(N,(A=this.context.inputImageWrapper)===null||A===void 0?void 0:A.data):this.publishResult();case 5:case"end":return M.stop()}}),h,this)}))),function(){return x.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var h,y=this,_=null,S=1e3/(((h=this.context.config)===null||h===void 0?void 0:h.frequency)||60);this.context.stopped=!1;var N=this.context,A=function(D){_=_||D,N.stopped||(D>=_&&(_+=S,y.update()),window.requestAnimationFrame(A))};A(performance.now())}},{key:"start",value:function(){var h,y;this.context.onUIThread&&((h=this.context.config)===null||h===void 0||(y=h.inputStream)===null||y===void 0?void 0:y.type)==="LiveStream"?this.startContinuousUpdate():this.update()}},{key:"stop",value:(g=ys()(Yn.a.mark((function h(){var y,_;return Yn.a.wrap((function(S){for(;;)switch(S.prev=S.next){case 0:if(this.context.stopped=!0,this.context.framegrabber||(this.context.initAborted=!0),Io(0),(y=this.context.config)===null||y===void 0||!y.inputStream||this.context.config.inputStream.type!=="LiveStream"){S.next=2;break}return S.next=1,Co.release();case 1:(_=this.context.inputStream)===null||_===void 0||_.clearEventHandlers();case 2:case"end":return S.stop()}}),h,this)}))),function(){return g.apply(this,arguments)})},{key:"setReaders",value:function(h){this.context.decoder&&this.context.decoder.setReaders(h),(function(y){ma.forEach((function(_){return _.worker.postMessage({cmd:"setReaders",readers:y})}))})(h)}},{key:"registerReader",value:function(h,y){Rl.registerReader(h,y),this.context.decoder&&this.context.decoder.registerReader(h,y),(function(_,S){ma.forEach((function(N){return N.worker.postMessage({cmd:"registerReader",name:_,reader:S})}))})(h,y)}},{key:"drawScannerArea",value:function(){var h,y,_,S=(h=this.context.config)===null||h===void 0||(y=h.inputStream)===null||y===void 0?void 0:y.area;if(S){var N=this.context.canvasContainer.ctx.overlay;if(N&&((_=this.context.config)===null||_===void 0?void 0:_.locate)===!1&&(S.borderColor!==void 0&&S.borderColor!==""||S.borderWidth!==void 0&&S.borderWidth>0||S.backgroundColor!==void 0&&S.backgroundColor!=="")&&this.context.boxSize){var A=this.context.inputStream.getTopRight(),D=A.x,M=A.y,z=this.context.boxSize,X=z[0],re=z[1],ce=z[3],Re=X[0]+D,oe=X[1]+M,Ne=ce[0]-X[0],Ue=re[1]-X[1];if(!this._cachedStyleValues||this._cachedStyleValues.borderColor!==S.borderColor||this._cachedStyleValues.borderWidth!==S.borderWidth||this._cachedStyleValues.backgroundColor!==S.backgroundColor){var qe,gt;this._cachedStyleValues={borderColor:S.borderColor,borderWidth:S.borderWidth,backgroundColor:S.backgroundColor};var ht=S.borderColor!==void 0||S.borderWidth!==void 0,Nt=(qe=S.borderColor)!==null&&qe!==void 0?qe:"rgba(0, 255, 0, 0.5)",Xt=ht?(gt=S.borderWidth)!==null&&gt!==void 0?gt:2:0,Ot=S.backgroundColor;this._resolvedStyle={color:Nt,width:Xt,bg:Ot}}var tn=this._resolvedStyle;tn.bg&&(N.fillStyle=tn.bg,N.fillRect(Re,oe,Ne,Ue)),tn.width>0&&(N.strokeStyle=tn.color,N.lineWidth=tn.width,N.strokeRect(Re,oe,Ne,Ue))}}}}]);var g,x})(),ui=new qi,Po=ui.context,yh={init:function(g,x,h){var y,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ui;return x||(y=new Promise((function(S,N){x=function(A){A?N(A):S()}}))),_.context.initAborted=!1,_.context.config=C()({},fh,g),_.context.config.numOfWorkers>0&&(_.context.config.numOfWorkers=0),h?(_.context.onUIThread=!1,_.initializeData(h),x&&x()):_.initInputStream(x),y},start:function(g,x){var h;if(g)return x||(h=new Promise((function(y,_){x=function(S){S?_(S):y()}}))),this.init(g,(function(y){if(y)x(y);else try{ui.start(),x()}catch(_){x(_)}})),h;if(!Po.framegrabber)throw new Error("start() was called before init() completed. Call init() first, or call start(config) to combine init and start.");return ui.start()},stop:function(){return ui.stop()},pause:function(){Po.stopped=!0},onDetected:function(g){g&&(typeof g=="function"||T()(g)==="object"&&g.callback)?ri.subscribe("detected",g):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(g){ri.unsubscribe("detected",g)},onProcessed:function(g){g&&(typeof g=="function"||T()(g)==="object"&&g.callback)?ri.subscribe("processed",g):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(g){ri.unsubscribe("processed",g)},setReaders:function(g){g?ui.setReaders(g):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(g,x){g?x?ui.registerReader(g,x):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(g){g&&typeof g.addResult=="function"&&(Po.resultCollector=g)},get canvas(){return Po.canvasContainer},drawScannerArea:function(){return ui.drawScannerArea()},decodeSingle:function(g,x){var h=this,y=new qi;return(g=C()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:g.src},numOfWorkers:1,locator:{halfSample:!1}},g)).numOfWorkers>0&&(g.numOfWorkers=0),g.numOfWorkers>0&&(typeof Blob>"u"||typeof Worker>"u")&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),g.numOfWorkers=0),new Promise((function(_,S){try{h.init(g,(function(){Po.canvasContainer=y.context.canvasContainer,ri.once("processed",(function(N){y.stop(),x&&x.call(null,N),_(N)}),!0),y.start()}),null,y)}catch(N){S(N)}}))},get default(){return yh},Readers:m,CameraAccess:Co,ImageDebug:ia,ImageWrapper:An,ResultCollector:ua};a.default=yh}]).default}))})(Sg)),Sg.exports}var OM=IM();const Jo=VT(OM),Tg=60;function Hl(){return new Date().toISOString().split("T")[0]}const i_=[{key:"breakfast",label:"Breakfast",icon:""},{key:"lunch",label:"Lunch",icon:""},{key:"dinner",label:"Dinner",icon:""},{key:"snacks",label:"Snacks",icon:""}];function PM(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function LM(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),{isDark:i,toggleTheme:c}=go(),u=Ms(),[f,m]=I.useState("loading"),[b,T]=I.useState(null),[E,C]=I.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",activityLevel:"moderate",goal:"maintain",deficitLevel:"moderate"}),[L,P]=I.useState(null),[V,F]=I.useState(Hl()),[Y,W]=I.useState({entries:[],water:0}),[se,K]=I.useState({protein:0,carbs:0,fats:0,calories:0}),[fe,ke]=I.useState(!1),[q,B]=I.useState(()=>{const ne=new Date;return{year:ne.getFullYear(),month:ne.getMonth()}}),[H,J]=I.useState(PM),[$,Z]=I.useState(null),[O,Ce]=I.useState(!1),[Oe,ee]=I.useState(null),[_e,Be]=I.useState(""),[De,Xe]=I.useState(!1),[Q,de]=I.useState(""),[ze,Pe]=I.useState([]),[he,Fe]=I.useState(!1),[ue,ye]=I.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[Se,et]=I.useState(null),[Me,mt]=I.useState(1),[dt,At]=I.useState(null);I.useRef(null);const Rt=I.useRef(!1),jt=I.useCallback((ne,ve="info")=>{At({message:ne,type:ve}),setTimeout(()=>At(null),3e3)},[]);I.useEffect(()=>{!a&&(!s||!e)&&u("/")},[s,e,a,u]),I.useEffect(()=>{if(!t?.id)return;(async()=>{try{const ve=await wa(Mt(rt,"nutritionTargets",t.id));ve.exists()?(T(ve.data()),m("dashboard")):m("setup")}catch(ve){console.error("Error loading nutrition data:",ve),m("setup")}})()},[t?.id]),I.useEffect(()=>{if(!t?.id)return;(async()=>{try{const ve=await wa(Mt(rt,"nutritionLogs",`${t.id}_${V}`));if(ve.exists()){const st=ve.data();W({entries:st.entries||[],water:st.water||0})}else W({entries:[],water:0})}catch(ve){console.error("Error loading log:",ve),W({entries:[],water:0})}})()},[t?.id,V]),I.useEffect(()=>{const ne=Y.entries.reduce((ve,st)=>({protein:ve.protein+(st.protein||0),carbs:ve.carbs+(st.carbs||0),fats:ve.fats+(st.fats||0),calories:ve.calories+(st.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});K(ne)},[Y.entries]);const ae=async ne=>{try{await La(Mt(rt,"nutritionLogs",`${t.id}_${V}`),{clientId:t.id,date:V,entries:ne.entries,water:ne.water,updatedAt:vt.now()})}catch(ve){console.error("Error saving nutrition log:",ve)}},Je=V===Hl(),ge=(ne,ve)=>new Date(ne,ve+1,0).getDate(),be=(ne,ve)=>new Date(ne,ve,1).getDay(),xe=ne=>{if(ne===Hl())return"Today";const ve=new Date(ne+"T12:00:00"),st=new Date;return st.setDate(st.getDate()-1),ne===st.toISOString().split("T")[0]?"Yesterday":ve.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})},nt=ne=>{const ve=new Date(V+"T12:00:00");ve.setDate(ve.getDate()+ne);const st=ve.toISOString().split("T")[0];st>Hl()||F(st)},ct=["January","February","March","April","May","June","July","August","September","October","November","December"],We=["Su","Mo","Tu","We","Th","Fr","Sa"],_t=()=>{let ne=parseFloat(E.weight);E.weightUnit==="lbs"&&(ne*=.453592);let ve;E.heightUnit==="cm"?ve=parseFloat(E.height):ve=(parseFloat(E.heightFeet)||0)*30.48+(parseFloat(E.heightInches)||0)*2.54;const st=parseInt(E.age);let ot=E.gender==="male"?10*ne+6.25*ve-5*st+5:10*ne+6.25*ve-5*st-161;const sn=ot*{sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[E.activityLevel];let yn=sn,Is,Wn;switch(E.goal){case"lose":yn=sn-{light:250,moderate:500,harsh:750}[E.deficitLevel],Is=2.2,Wn=.3;break;case"build":yn=sn+300,Is=2,Wn=.22;break;default:Is=1.8,Wn=.25}yn=Math.max(yn,E.gender==="male"?1500:1200);const xn=Math.round(ne*Is),Un=Math.round(yn*Wn/9),Yt=Math.max(0,Math.round((yn-xn*4-Un*9)/4));P({calories:Math.round(yn),protein:xn,carbs:Yt,fats:Un,bmr:Math.round(ot),tdee:Math.round(sn)})},wt=async()=>{if(L)try{const ne={clientId:t.id,calories:L.calories,protein:L.protein,carbs:L.carbs,fats:L.fats,waterGoal:8,goal:E.goal,updatedAt:vt.now()};await La(Mt(rt,"nutritionTargets",t.id),ne),T(ne),m("dashboard"),jt("Macro targets saved!","success")}catch(ne){console.error("Error saving targets:",ne),jt("Failed to save targets. Please try again.","error")}},Vt=()=>{const ne=E.weight&&parseFloat(E.weight)>0,ve=E.age&&parseInt(E.age)>0,st=E.heightUnit==="cm"?E.height&&parseFloat(E.height)>0:E.heightFeet&&parseFloat(E.heightFeet)>0||E.heightInches&&parseFloat(E.heightInches)>0;return ne&&ve&&st},Lt=ne=>{const ve=[...Y.entries,{...ne,meal:H,id:Date.now(),addedAt:new Date().toISOString()}],st={...Y,entries:ve};W(st),ae(st),Z(null),et(null),mt(1),ye({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),jt("Food added!","success")},nn=ne=>{const ve=Y.entries.filter(ot=>ot.id!==ne),st={...Y,entries:ve};W(st),ae(st)},Kt=()=>{Ce(!0);const ne=document.querySelector("#barcode-reader");if(!ne){Ce(!1),jt("Scanner container not found.","error");return}Jo.init({inputStream:{type:"LiveStream",target:ne,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},ve=>{if(ve){console.error("Quagga init error:",ve),Ce(!1),jt("Could not access camera. Check permissions.","error");return}Jo.start(),Rt.current=!0}),Jo.onDetected(ve=>{const st=ve.codeResult.decodedCodes?.filter(xt=>xt.error!==void 0)?.map(xt=>xt.error)||[];if((st.length>0?st.reduce((xt,sn)=>xt+sn,0)/st.length:1)<.15){const xt=ve.codeResult.code;Jo.offDetected(),ee(xt)}})},rn=()=>{Rt.current&&(Jo.stop(),Jo.offDetected(),Rt.current=!1),Ce(!1)},Ys=ne=>{const ve=ne.nutriments||{};return{name:ne.product_name||ne.product_name_en||"Unknown Product",brand:ne.brands||"",image:ne.image_small_url||ne.image_url||null,servingSize:ne.serving_size||"100g",protein:Math.round(ve.proteins_100g||ve.proteins||0),carbs:Math.round(ve.carbohydrates_100g||ve.carbohydrates||0),fats:Math.round(ve.fat_100g||ve.fat||0),calories:Math.round(ve["energy-kcal_100g"]||ve["energy-kcal"]||(ve.energy_100g?ve.energy_100g/4.184:0)),per100g:!0}},Fn=async ne=>{Xe(!0);try{const ve=`https://world.openfoodfacts.net/api/v2/product/${ne}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,nutriments`,st=await fetch(ve);if(!st.ok)throw new Error(`HTTP ${st.status}`);const ot=await st.json();if(ot.status==="success"||ot.status===1||ot.product){const xt=Ys(ot.product);xt.calories===0&&xt.protein===0&&xt.carbs===0?jt("Product found but no nutrition data available.","error"):(et(xt),mt(1),Be(""))}else jt("Product not found. Try search or manual entry.","error")}catch(ve){console.error("Barcode lookup error:",ve),jt("Failed to look up product. Check your connection.","error")}Xe(!1)},Le=async()=>{if(Q.trim()){Fe(!0);try{const ne=`https://world.openfoodfacts.net/api/v2/search?search_terms=${encodeURIComponent(Q)}&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,nutriments&page_size=10`,ve=await fetch(ne);if(!ve.ok)throw new Error(`HTTP ${ve.status}`);const ot=((await ve.json()).products||[]).map(xt=>Ys(xt)).filter(xt=>xt.name!=="Unknown Product"&&(xt.calories>0||xt.protein>0));Pe(ot),ot.length===0&&jt("No results found. Try a different search.","info")}catch(ne){console.error("Search error:",ne),jt("Search failed. Check your connection.","error")}Fe(!1)}},tt=()=>{const ne={...Y,water:Y.water+1};W(ne),ae(ne)},it=()=>{if(Y.water<=0)return;const ne={...Y,water:Y.water-1};W(ne),ae(ne)},Ut=(ne,ve)=>!ve||ve<=0?0:Math.min(Tg,Math.round(ne/ve*Tg)),Et=(ne,ve,st,ot,xt)=>{const sn=Ut(st,ot),yn=ot>0?Math.min(100,Math.round(st/ot*100)):0;return o.jsxs("div",{className:`nut-ring-wrap ${xt}`,children:[o.jsx("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[...Array(Tg)].map((Is,Wn)=>{const xn=(Wn*6-90)*(Math.PI/180),Un=100+82*Math.cos(xn),Yt=100+82*Math.sin(xn),Tn=100+94*Math.cos(xn),qn=100+94*Math.sin(xn);return o.jsx("line",{x1:Un,y1:Yt,x2:Tn,y2:qn,className:Wn<sn?"nut-tick-filled":"nut-tick-empty",strokeWidth:Wn%5===0?"3":"2"},Wn)})}),o.jsxs("div",{className:"nut-ring-center",children:[o.jsx("span",{className:"nut-ring-value",children:Math.round(st)}),o.jsxs("span",{className:"nut-ring-target",children:["/ ",ot,ne==="Calories"?"":"g"]}),o.jsx("span",{className:"nut-ring-label",children:ve})]}),o.jsxs("span",{className:"nut-ring-pct",children:[yn,"%"]})]})};return I.useEffect(()=>{if(!Oe)return;const ne=setTimeout(()=>{const ve=Oe;rn(),ee(null),Fn(ve)},1500);return()=>clearTimeout(ne)},[Oe]),I.useEffect(()=>()=>{if(Rt.current){try{Jo.stop(),Jo.offDetected()}catch{}Rt.current=!1}},[]),a||f==="loading"?o.jsx("div",{className:"cb-loading",children:o.jsx("div",{className:"cb-loading-spinner"})}):f==="setup"?o.jsxs("div",{className:"nut-page","data-theme":i?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Nutrition Setup"})]}),o.jsx("div",{className:"cb-header-right",children:o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]}),o.jsxs("main",{className:"nut-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>u(-1),children:" Back"}),o.jsxs("div",{className:"nut-setup-intro",children:[o.jsx("h2",{children:"Set Your Daily Targets"}),o.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),o.jsxs("div",{className:"nut-calc-form",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Gender"}),o.jsxs("div",{className:"nut-toggle-group",children:[o.jsx("button",{className:E.gender==="male"?"active":"",onClick:()=>{C(ne=>({...ne,gender:"male"})),P(null)},children:"Male"}),o.jsx("button",{className:E.gender==="female"?"active":"",onClick:()=>{C(ne=>({...ne,gender:"female"})),P(null)},children:"Female"})]})]}),o.jsxs("div",{className:"nut-form-row",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Age"}),o.jsx("input",{type:"number",value:E.age,onChange:ne=>{C(ve=>({...ve,age:ne.target.value})),P(null)},placeholder:"Years",min:"15",max:"100"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Weight"}),o.jsxs("div",{className:"nut-input-unit",children:[o.jsx("input",{type:"number",value:E.weight,onChange:ne=>{C(ve=>({...ve,weight:ne.target.value})),P(null)},placeholder:E.weightUnit,min:"30",max:"300"}),o.jsxs("div",{className:"nut-unit-toggle",children:[o.jsx("button",{className:E.weightUnit==="kg"?"active":"",onClick:()=>{C(ne=>({...ne,weightUnit:"kg"})),P(null)},children:"kg"}),o.jsx("button",{className:E.weightUnit==="lbs"?"active":"",onClick:()=>{C(ne=>({...ne,weightUnit:"lbs"})),P(null)},children:"lbs"})]})]})]})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Height"}),o.jsxs("div",{className:"nut-input-unit",children:[E.heightUnit==="cm"?o.jsx("input",{type:"number",value:E.height,onChange:ne=>{C(ve=>({...ve,height:ne.target.value})),P(null)},placeholder:"cm",min:"100",max:"250"}):o.jsxs("div",{className:"nut-height-imperial",children:[o.jsx("input",{type:"number",value:E.heightFeet,onChange:ne=>{C(ve=>({...ve,heightFeet:ne.target.value})),P(null)},placeholder:"ft",min:"4",max:"7"}),o.jsx("input",{type:"number",value:E.heightInches,onChange:ne=>{C(ve=>({...ve,heightInches:ne.target.value})),P(null)},placeholder:"in",min:"0",max:"11"})]}),o.jsxs("div",{className:"nut-unit-toggle",children:[o.jsx("button",{className:E.heightUnit==="cm"?"active":"",onClick:()=>{C(ne=>({...ne,heightUnit:"cm"})),P(null)},children:"cm"}),o.jsx("button",{className:E.heightUnit==="ft"?"active":"",onClick:()=>{C(ne=>({...ne,heightUnit:"ft"})),P(null)},children:"ft/in"})]})]})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Activity Level"}),o.jsxs("select",{value:E.activityLevel,onChange:ne=>{C(ve=>({...ve,activityLevel:ne.target.value})),P(null)},children:[o.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),o.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),o.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),o.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"}),o.jsx("option",{value:"veryActive",children:"Extra Active (athlete/physical job)"})]})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Fitness Goal"}),o.jsxs("div",{className:"nut-goal-options",children:[o.jsxs("button",{className:E.goal==="lose"?"active":"",onClick:()=>{C(ne=>({...ne,goal:"lose"})),P(null)},children:[o.jsx("span",{className:"nut-goal-icon",children:"-"}),o.jsx("span",{children:"Lose Weight"})]}),o.jsxs("button",{className:E.goal==="maintain"?"active":"",onClick:()=>{C(ne=>({...ne,goal:"maintain"})),P(null)},children:[o.jsx("span",{className:"nut-goal-icon",children:"="}),o.jsx("span",{children:"Maintain"})]}),o.jsxs("button",{className:E.goal==="build"?"active":"",onClick:()=>{C(ne=>({...ne,goal:"build"})),P(null)},children:[o.jsx("span",{className:"nut-goal-icon",children:"+"}),o.jsx("span",{children:"Build Muscle"})]})]})]}),E.goal==="lose"&&o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Deficit Level"}),o.jsxs("div",{className:"nut-deficit-options",children:[o.jsxs("button",{className:E.deficitLevel==="light"?"active":"",onClick:()=>{C(ne=>({...ne,deficitLevel:"light"})),P(null)},children:[o.jsx("strong",{children:"Light"}),o.jsx("span",{children:"-250 cal/day"})]}),o.jsxs("button",{className:E.deficitLevel==="moderate"?"active":"",onClick:()=>{C(ne=>({...ne,deficitLevel:"moderate"})),P(null)},children:[o.jsx("strong",{children:"Moderate"}),o.jsx("span",{children:"-500 cal/day"})]}),o.jsxs("button",{className:E.deficitLevel==="harsh"?"active":"",onClick:()=>{C(ne=>({...ne,deficitLevel:"harsh"})),P(null)},children:[o.jsx("strong",{children:"Aggressive"}),o.jsx("span",{children:"-750 cal/day"})]})]})]}),o.jsx("button",{className:"nut-calc-btn",onClick:_t,disabled:!Vt(),children:"Calculate Macros"})]}),L&&o.jsxs("div",{className:"nut-calc-results",children:[o.jsx("h3",{children:"Your Daily Targets"}),o.jsxs("div",{className:"nut-calc-rings",children:[Et("Protein","Protein",L.protein,L.protein,"ring-protein"),Et("Carbs","Carbs",L.carbs,L.carbs,"ring-carbs"),Et("Fats","Fats",L.fats,L.fats,"ring-fats"),Et("Calories","Calories",L.calories,L.calories,"ring-cals")]}),o.jsxs("div",{className:"nut-calc-info",children:[o.jsxs("div",{className:"nut-calc-info-row",children:[o.jsx("span",{children:"BMR"}),o.jsxs("span",{children:[L.bmr," cal"]})]}),o.jsxs("div",{className:"nut-calc-info-row",children:[o.jsx("span",{children:"TDEE"}),o.jsxs("span",{children:[L.tdee," cal"]})]})]}),o.jsx("button",{className:"nut-save-targets-btn",onClick:wt,children:"Set as My Daily Targets"})]})]}),dt&&o.jsx("div",{className:`toast-notification ${dt.type}`,children:dt.message})]}):o.jsxs("div",{className:"nut-page","data-theme":i?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Nutrition"})]}),o.jsxs("div",{className:"cb-header-right",children:[o.jsx("button",{className:"nut-settings-btn",onClick:()=>{m("setup"),P(null)},"aria-label":"Recalculate macros",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]}),o.jsxs("main",{className:"nut-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>u(-1),children:" Back"}),o.jsxs("div",{className:"nut-rings-grid",children:[Et("Protein","Protein",se.protein,b.protein,"ring-protein"),Et("Carbs","Carbs",se.carbs,b.carbs,"ring-carbs"),Et("Fats","Fats",se.fats,b.fats,"ring-fats"),Et("Calories","Calories",se.calories,b.calories,"ring-cals")]}),Je&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"nut-meal-selector",children:i_.map(ne=>o.jsxs("button",{className:`nut-meal-pill${H===ne.key?" active":""}`,onClick:()=>J(ne.key),children:[o.jsx("span",{className:"nut-meal-icon",children:ne.icon}),o.jsx("span",{children:ne.label})]},ne.key))}),o.jsxs("div",{className:"nut-add-buttons",children:[o.jsxs("button",{className:"nut-add-btn nut-add-scan",onClick:()=>{Z("scan"),et(null)},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),o.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),o.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),o.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),o.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),o.jsx("span",{children:"Scan"})]}),o.jsxs("button",{className:"nut-add-btn nut-add-search",onClick:()=>{Z("search"),Pe([]),de("")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),o.jsx("span",{children:"Search"})]}),o.jsxs("button",{className:"nut-add-btn nut-add-manual",onClick:()=>{Z("manual"),ye({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),o.jsx("span",{children:"Manual"})]})]})]}),Je&&o.jsxs("div",{className:"nut-water-section",children:[o.jsxs("div",{className:"nut-water-header",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),o.jsx("span",{children:"Water"}),o.jsxs("span",{className:"nut-water-count",children:[Y.water," / ",b?.waterGoal||8," glasses"]})]}),o.jsx("div",{className:"nut-water-glasses",children:[...Array(b?.waterGoal||8)].map((ne,ve)=>o.jsx("div",{className:`nut-water-glass ${ve<Y.water?"filled":""}`,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:ve<Y.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},ve))}),o.jsxs("div",{className:"nut-water-btns",children:[o.jsx("button",{onClick:it,disabled:Y.water<=0,children:"-"}),o.jsx("button",{onClick:tt,children:"+"})]})]}),o.jsxs("div",{className:"nut-date-nav",children:[o.jsx("button",{className:"nut-date-arrow",onClick:()=>nt(-1),"aria-label":"Previous day",children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"15 18 9 12 15 6"})})}),o.jsxs("button",{className:"nut-date-label",onClick:()=>{ke(!fe),B({year:new Date(V+"T12:00:00").getFullYear(),month:new Date(V+"T12:00:00").getMonth()})},children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),o.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),o.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),o.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),o.jsx("span",{children:xe(V)})]}),o.jsx("button",{className:"nut-date-arrow",onClick:()=>nt(1),disabled:V>=Hl(),"aria-label":"Next day",children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),fe&&o.jsxs("div",{className:"nut-calendar",children:[o.jsxs("div",{className:"nut-cal-header",children:[o.jsx("button",{onClick:()=>B(ne=>{let ve=ne.month-1,st=ne.year;return ve<0&&(ve=11,st--),{year:st,month:ve}}),children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"15 18 9 12 15 6"})})}),o.jsxs("span",{children:[ct[q.month]," ",q.year]}),o.jsx("button",{onClick:()=>B(ne=>{let ve=ne.month+1,st=ne.year;return ve>11&&(ve=0,st++),{year:st,month:ve}}),disabled:q.year===new Date().getFullYear()&&q.month>=new Date().getMonth(),children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),o.jsx("div",{className:"nut-cal-days-header",children:We.map(ne=>o.jsx("span",{children:ne},ne))}),o.jsxs("div",{className:"nut-cal-grid",children:[[...Array(be(q.year,q.month))].map((ne,ve)=>o.jsx("span",{},`e${ve}`)),[...Array(ge(q.year,q.month))].map((ne,ve)=>{const st=ve+1,ot=`${q.year}-${String(q.month+1).padStart(2,"0")}-${String(st).padStart(2,"0")}`,xt=ot>Hl(),sn=ot===V,yn=ot===Hl();return o.jsx("button",{className:`nut-cal-day${sn?" selected":""}${yn?" today":""}${xt?" future":""}`,disabled:xt,onClick:()=>{F(ot),ke(!1)},children:st},st)})]})]}),o.jsx("div",{className:"nut-log-section",children:Y.entries.length===0?o.jsx("div",{className:"nut-log-empty",children:o.jsx("p",{children:Je?"No food logged yet today. Add your first meal above!":"No food logged on this day."})}):o.jsx("div",{className:"nut-meals-list",children:i_.map(ne=>{const ve=Y.entries.filter(ot=>(ot.meal||"snacks")===ne.key);if(ve.length===0)return null;const st=ve.reduce((ot,xt)=>({protein:ot.protein+(xt.protein||0),carbs:ot.carbs+(xt.carbs||0),fats:ot.fats+(xt.fats||0),calories:ot.calories+(xt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return o.jsxs("div",{className:"nut-meal-card",children:[o.jsxs("div",{className:"nut-meal-card-header",children:[o.jsx("span",{className:"nut-meal-card-icon",children:ne.icon}),o.jsx("span",{className:"nut-meal-card-title",children:ne.label}),o.jsxs("span",{className:"nut-meal-card-cal",children:[st.calories," cal"]})]}),o.jsx("div",{className:"nut-log-list",children:ve.map(ot=>o.jsxs("div",{className:"nut-log-item",children:[o.jsxs("div",{className:"nut-log-item-info",children:[o.jsx("span",{className:"nut-log-item-name",children:ot.name}),ot.serving&&o.jsx("span",{className:"nut-log-item-serving",children:ot.serving})]}),o.jsxs("div",{className:"nut-log-item-macros",children:[o.jsxs("span",{className:"nut-macro-p",children:[ot.protein,"p"]}),o.jsxs("span",{className:"nut-macro-c",children:[ot.carbs,"c"]}),o.jsxs("span",{className:"nut-macro-f",children:[ot.fats,"f"]}),o.jsx("span",{className:"nut-macro-cal",children:ot.calories})]}),Je&&o.jsx("button",{className:"nut-log-delete",onClick:()=>nn(ot.id),"aria-label":"Remove",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ot.id))}),o.jsxs("div",{className:"nut-meal-card-totals",children:[o.jsxs("span",{className:"nut-macro-p",children:[st.protein,"g P"]}),o.jsxs("span",{className:"nut-macro-c",children:[st.carbs,"g C"]}),o.jsxs("span",{className:"nut-macro-f",children:[st.fats,"g F"]})]})]},ne.key)})})})]}),$&&o.jsx("div",{className:"nut-modal-overlay",onClick:()=>{rn(),ee(null),Z(null),et(null)},children:o.jsxs("div",{className:"nut-modal",onClick:ne=>ne.stopPropagation(),children:[o.jsxs("div",{className:"nut-modal-header",children:[o.jsx("h3",{children:$==="scan"?"Scan Barcode":$==="search"?"Search Food":"Manual Entry"}),o.jsx("button",{className:"nut-modal-close",onClick:()=>{rn(),ee(null),Z(null),et(null)},children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),$==="scan"&&!Se&&o.jsxs("div",{className:"nut-scan-area",children:[o.jsxs("div",{className:"nut-scanner-wrapper",children:[o.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),O&&!Oe&&o.jsx("div",{className:"nut-scan-line"}),Oe&&o.jsxs("div",{className:"nut-scan-detected-overlay",children:[o.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M20 6L9 17l-5-5"})}),o.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),o.jsx("p",{className:"nut-scan-detected-code",children:Oe})]})]}),!O&&o.jsxs("button",{className:"nut-scan-start-btn",onClick:Kt,children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),o.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),o.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),o.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),o.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),O&&!Oe&&o.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),o.jsx("div",{className:"nut-barcode-divider",children:o.jsx("span",{children:"or enter barcode manually"})}),o.jsxs("div",{className:"nut-barcode-manual",children:[o.jsx("input",{type:"text",inputMode:"numeric",value:_e,onChange:ne=>Be(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&_e.trim()&&Fn(_e.trim()),placeholder:"Enter barcode number"}),o.jsx("button",{onClick:()=>_e.trim()&&Fn(_e.trim()),disabled:!_e.trim()||De,children:De?"...":"Look Up"})]})]}),$==="scan"&&Se&&o.jsxs("div",{className:"nut-product-result",children:[Se.image&&o.jsx("img",{src:Se.image,alt:"",className:"nut-product-img"}),o.jsx("h4",{children:Se.name}),Se.brand&&o.jsx("p",{className:"nut-product-brand",children:Se.brand}),o.jsx("p",{className:"nut-product-per",children:"Per 100g:"}),o.jsxs("div",{className:"nut-product-macros",children:[o.jsxs("span",{className:"nut-macro-p",children:[Se.protein,"g P"]}),o.jsxs("span",{className:"nut-macro-c",children:[Se.carbs,"g C"]}),o.jsxs("span",{className:"nut-macro-f",children:[Se.fats,"g F"]}),o.jsxs("span",{className:"nut-macro-cal",children:[Se.calories," cal"]})]}),o.jsxs("div",{className:"nut-serving-adjust",children:[o.jsx("label",{children:"Serving (g)"}),o.jsx("input",{type:"number",value:Math.round(Me*100),onChange:ne=>mt(Math.max(0,parseFloat(ne.target.value)||0)/100),min:"1"})]}),o.jsx("div",{className:"nut-product-total",children:o.jsxs("span",{children:["Total: ",Math.round(Se.protein*Me),"p / ",Math.round(Se.carbs*Me),"c / ",Math.round(Se.fats*Me),"f / ",Math.round(Se.calories*Me)," cal"]})}),o.jsxs("div",{className:"nut-product-actions",children:[o.jsx("button",{className:"nut-btn-secondary",onClick:()=>{et(null),Z("scan")},children:"Scan Again"}),o.jsx("button",{className:"nut-btn-primary",onClick:()=>Lt({name:Se.name,protein:Math.round(Se.protein*Me),carbs:Math.round(Se.carbs*Me),fats:Math.round(Se.fats*Me),calories:Math.round(Se.calories*Me),serving:`${Math.round(Me*100)}g`}),children:"Add"})]})]}),$==="search"&&!Se&&o.jsxs("div",{className:"nut-search-area",children:[o.jsxs("div",{className:"nut-search-bar",children:[o.jsx("input",{type:"text",value:Q,onChange:ne=>de(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&Le(),placeholder:"Search food or product...",autoFocus:!0}),o.jsx("button",{onClick:Le,disabled:he,children:he?"...":"Search"})]}),o.jsxs("div",{className:"nut-search-results",children:[ze.map((ne,ve)=>o.jsxs("button",{className:"nut-search-item",onClick:()=>{et(ne),mt(1)},children:[ne.image&&o.jsx("img",{src:ne.image,alt:""}),o.jsxs("div",{className:"nut-search-item-info",children:[o.jsx("span",{className:"nut-search-item-name",children:ne.name}),ne.brand&&o.jsx("span",{className:"nut-search-item-brand",children:ne.brand}),o.jsxs("span",{className:"nut-search-item-macros",children:[ne.calories," cal  ",ne.protein,"p  ",ne.carbs,"c  ",ne.fats,"f per 100g"]})]})]},ve)),ze.length===0&&Q&&!he&&o.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),$==="search"&&Se&&o.jsxs("div",{className:"nut-product-result",children:[Se.image&&o.jsx("img",{src:Se.image,alt:"",className:"nut-product-img"}),o.jsx("h4",{children:Se.name}),Se.brand&&o.jsx("p",{className:"nut-product-brand",children:Se.brand}),o.jsx("p",{className:"nut-product-per",children:"Per 100g:"}),o.jsxs("div",{className:"nut-product-macros",children:[o.jsxs("span",{className:"nut-macro-p",children:[Se.protein,"g P"]}),o.jsxs("span",{className:"nut-macro-c",children:[Se.carbs,"g C"]}),o.jsxs("span",{className:"nut-macro-f",children:[Se.fats,"g F"]}),o.jsxs("span",{className:"nut-macro-cal",children:[Se.calories," cal"]})]}),o.jsxs("div",{className:"nut-serving-adjust",children:[o.jsx("label",{children:"Serving (g)"}),o.jsx("input",{type:"number",value:Math.round(Me*100),onChange:ne=>mt(Math.max(0,parseFloat(ne.target.value)||0)/100),min:"1"})]}),o.jsx("div",{className:"nut-product-total",children:o.jsxs("span",{children:["Total: ",Math.round(Se.protein*Me),"p / ",Math.round(Se.carbs*Me),"c / ",Math.round(Se.fats*Me),"f / ",Math.round(Se.calories*Me)," cal"]})}),o.jsxs("div",{className:"nut-product-actions",children:[o.jsx("button",{className:"nut-btn-secondary",onClick:()=>et(null),children:"Back to Search"}),o.jsx("button",{className:"nut-btn-primary",onClick:()=>Lt({name:Se.name,protein:Math.round(Se.protein*Me),carbs:Math.round(Se.carbs*Me),fats:Math.round(Se.fats*Me),calories:Math.round(Se.calories*Me),serving:`${Math.round(Me*100)}g`}),children:"Add"})]})]}),$==="manual"&&o.jsxs("div",{className:"nut-manual-form",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Food Name"}),o.jsx("input",{type:"text",value:ue.name,onChange:ne=>ye(ve=>({...ve,name:ne.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Serving Size (optional)"}),o.jsx("input",{type:"text",value:ue.serving,onChange:ne=>ye(ve=>({...ve,serving:ne.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),o.jsxs("div",{className:"nut-manual-macros",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Protein (g)"}),o.jsx("input",{type:"number",value:ue.protein,onChange:ne=>ye(ve=>({...ve,protein:ne.target.value})),min:"0"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Carbs (g)"}),o.jsx("input",{type:"number",value:ue.carbs,onChange:ne=>ye(ve=>({...ve,carbs:ne.target.value})),min:"0"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Fats (g)"}),o.jsx("input",{type:"number",value:ue.fats,onChange:ne=>ye(ve=>({...ve,fats:ne.target.value})),min:"0"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Calories"}),o.jsx("input",{type:"number",value:ue.calories,onChange:ne=>ye(ve=>({...ve,calories:ne.target.value})),min:"0"})]})]}),o.jsx("button",{className:"nut-btn-primary",disabled:!ue.name.trim(),onClick:()=>Lt({name:ue.name,protein:parseFloat(ue.protein)||0,carbs:parseFloat(ue.carbs)||0,fats:parseFloat(ue.fats)||0,calories:parseFloat(ue.calories)||0,serving:ue.serving||""}),children:"Add Food"})]})]})}),dt&&o.jsx("div",{className:`toast-notification ${dt.type}`,children:dt.message})]})}const fi=60,dd=5,o_=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],l_=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],hd=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],VM=[5,10,15,20,30];function UM(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function BM(s){const e=[...s];for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e}function zM(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),{isDark:i,toggleTheme:c}=go(),u=Ms(),[f,m]=I.useState("menu"),[b,T]=I.useState(["bodyweight"]),[E,C]=I.useState("core"),[L,P]=I.useState("intermediate"),[V,F]=I.useState(15),[Y,W]=I.useState([]),[se,K]=I.useState(!1),fe=I.useRef(!1),ke=I.useRef([]),[q,B]=I.useState([]),[H,J]=I.useState(2),[$,Z]=I.useState(hd[1]),[O,Ce]=I.useState(1),[Oe,ee]=I.useState(0),[_e,Be]=I.useState("work"),[De,Xe]=I.useState(0),[Q,de]=I.useState(!1),[ze,Pe]=I.useState(0),he=I.useRef(null);I.useRef(null),I.useRef(null);const[Fe,ue]=I.useState(null),ye=I.useCallback((Le,tt="info")=>{ue({message:Le,type:tt}),setTimeout(()=>ue(null),3e3)},[]),[Se,et]=I.useState(0),[Me,mt]=I.useState(0),[dt,At]=I.useState(0),[Rt,jt]=I.useState(0),[ae,Je]=I.useState(0),[ge,be]=I.useState({beginner:0,intermediate:0,advanced:0});I.useEffect(()=>{!a&&(!s||!e)&&u("/")},[s,e,a,u]),I.useEffect(()=>{if(!s)return;(async()=>{try{const tt=Ht(rt,"workoutLogs"),it=_r(tt,ir("clientId","==",s.uid)),Et=(await gn(it)).docs.map(Yt=>Yt.data()),ne=Et.filter(Yt=>Yt.type!=="programme");At(ne.length);const ve=ne.reduce((Yt,Tn)=>Yt+(Tn.duration||0),0);jt(ve);const st={beginner:0,intermediate:0,advanced:0};ne.forEach(Yt=>{Yt.level&&st[Yt.level]!==void 0&&st[Yt.level]++}),be(st);const ot=new Date,xt=ot.getDay(),sn=xt===0?-6:1-xt,yn=new Date(ot);yn.setDate(ot.getDate()+sn),yn.setHours(0,0,0,0);const Is=yn.getTime(),Wn=Et.filter(Yt=>{const Tn=Yt.completedAt;return Tn?(Tn.toDate?Tn.toDate().getTime():new Date(Tn).getTime())>=Is:!1});et(Wn.filter(Yt=>Yt.type!=="programme").length);let xn=0;if(t)try{const Yt=await wa(Mt(rt,"clientProgrammes",t.id));if(Yt.exists()){const Tn=Yt.data().templateId;xn=Wn.filter(qn=>qn.type==="programme"&&qn.programmeId===Tn).length}}catch{}mt(xn);const Un=ne.map(Yt=>Yt.completedAt).filter(Boolean).map(Yt=>Yt.toDate?Yt.toDate().getTime():new Date(Yt).getTime()).sort((Yt,Tn)=>Tn-Yt);if(Un.length===0)Je(0);else{const Yt=new Set;Un.forEach(Ze=>{const Ye=new Date(Ze),ut=Ye.getDay(),ft=ut===0?-6:1-ut,Tt=new Date(Ye);Tt.setDate(Ye.getDate()+ft),Tt.setHours(0,0,0,0),Yt.add(Tt.getTime())});const Tn=[...Yt].sort((Ze,Ye)=>Ye-Ze);let qn=0;const os=new Date(ot),me=ot.getDay()===0?-6:1-ot.getDay();os.setDate(ot.getDate()+me),os.setHours(0,0,0,0);let Ve=os.getTime();Tn.includes(Ve)||(Ve-=10080*60*1e3);for(let Ze=0;Ze<200&&Tn.includes(Ve);Ze++)qn++,Ve-=10080*60*1e3;Je(qn)}}catch(tt){console.error("Error loading workout stats:",tt)}})()},[s,t,f]);const xe=()=>{const Le=[];let tt;E==="mix"?tt=["core","upper","lower"]:E==="fullbody"?tt=["upper","lower"]:tt=[E];for(const it of b)for(const Ut of tt)Le.push(`exercises/${it}/${Ut}`);return Le},nt=async()=>{if(fe.current){for(;fe.current;)await new Promise(Le=>setTimeout(Le,200));return ke.current}fe.current=!0,K(!0);try{const Le=xe(),tt=[];for(const ne of Le)try{const ve=ty(ny,ne),st=await Wx(ve);tt.push(...st.items)}catch{console.warn(`Folder ${ne} not found, skipping.`)}if(tt.length===0&&b.includes("bodyweight")&&E==="core")try{const ne=ty(ny,"core"),ve=await Wx(ne);tt.push(...ve.items)}catch{console.warn("Legacy core/ folder not found either.")}if(tt.length===0){const ne=b.map(st=>o_.find(ot=>ot.key===st)?.label).join(" + "),ve=l_.find(st=>st.key===E)?.label;return ye(`No exercises found for ${ne} / ${ve}. Upload videos to Firebase Storage.`,"error"),fe.current=!1,K(!1),[]}const it=new Set,Ut=tt.filter(ne=>{const ve=ne.name.replace(/\.(mp4|gif)$/i,"");return it.has(ve)?!1:(it.add(ve),!0)}),Et=await Promise.all(Ut.map(async ne=>{const ve=await bS(ne),st=UM(ne.name.replace(/\.(mp4|gif)$/i,"")),ot=/\.gif$/i.test(ne.name);return{name:st,videoUrl:ve,isGif:ot}}));return ke.current=Et,W(Et),fe.current=!1,K(!1),Et}catch(Le){console.error("Error loading exercises:",Le);const tt=Le.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${Le.message||Le.code||"Unknown error"}`;return ye(tt,"error"),fe.current=!1,K(!1),[]}},ct=async()=>{m("spinning"),ke.current=[];const Le=await nt();if(Le.length===0){m("setup");return}const tt=hd.find(xt=>xt.key===L);Z(tt);const it=tt.work+tt.rest,Ut=V*60,Et=Math.floor(Ut/it);let ne,ve;Et<=6?(ne=Math.max(3,Math.floor(Et/2)),ve=Math.floor(Et/ne)):Et<=12?(ne=Math.min(6,Math.floor(Et/2)),ve=Math.floor(Et/ne)):(ne=Math.min(10,Math.floor(Et/2)),ve=Math.floor(Et/ne)),ve=Math.max(2,ve);const st=BM(Le),ot=st.slice(0,Math.min(ne,st.length));B(ot),J(ve),setTimeout(()=>m("preview"),2e3)},We=()=>{m("countdown"),Pe(3)};I.useEffect(()=>{if(f!=="countdown")return;if(ze<=0){m("workout"),Ce(1),ee(0),Be("work"),Xe($.work),de(!1),Kt();return}nn();const Le=setTimeout(()=>Pe(tt=>tt-1),1e3);return()=>clearTimeout(Le)},[ze,f]),I.useEffect(()=>{if(f!=="workout"||Q)return;if(De<=0){_t();return}De<=3&&nn();const Le=setTimeout(()=>Xe(tt=>tt-1),1e3);return()=>clearTimeout(Le)},[De,f,Q]);const _t=()=>{if(_e==="work")Be("rest"),Xe($.rest);else{const Le=Oe+1;if(Le>=q.length){const tt=O+1;if(tt>H){m("complete"),wt();return}Ce(tt),ee(0)}else ee(Le);Be("work"),Xe($.work),Kt()}},wt=async()=>{if(s)try{await pi(Ht(rt,"workoutLogs"),{clientId:s.uid,level:L,duration:V,equipment:b,focus:E,exerciseCount:q.length,rounds:H,exercises:q.map(Le=>Le.name),completedAt:vt.now()}),et(Le=>Le+1),At(Le=>Le+1),jt(Le=>Le+V),be(Le=>({...Le,[L]:(Le[L]||0)+1}))}catch(Le){console.error("Error saving workout log:",Le)}},Vt=I.useRef(null),Lt=()=>(Vt.current||(Vt.current=new(window.AudioContext||window.webkitAudioContext)),Vt.current),nn=()=>{try{const Le=Lt(),tt=Le.createOscillator(),it=Le.createGain();tt.connect(it),it.connect(Le.destination),tt.frequency.value=880,it.gain.value=.3,tt.start(Le.currentTime),tt.stop(Le.currentTime+.15)}catch{}},Kt=()=>{try{const Le=Lt(),tt=Le.createOscillator(),it=Le.createGain();tt.connect(it),it.connect(Le.destination),tt.frequency.value=1200,it.gain.value=.4,tt.start(Le.currentTime),tt.stop(Le.currentTime+.3)}catch{}};I.useEffect(()=>{if(f!=="workout"||_e!=="work"||!q[Oe]?.isGif)return;const tt=setInterval(()=>{const it=he.current;if(!it)return;const Ut=it.getAttribute("src");it.removeAttribute("src"),setTimeout(()=>{he.current&&he.current.setAttribute("src",Ut)},0)},4e3);return()=>clearInterval(tt)},[f,_e,Oe,O,q]);const rn=(Le,tt,it)=>{const Ut=Math.round(Le/tt*fi);return o.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:[...Array(fi)].map((Et,ne)=>{const ve=(ne*6-90)*(Math.PI/180),st=100+82*Math.cos(ve),ot=100+82*Math.sin(ve),xt=100+94*Math.cos(ve),sn=100+94*Math.sin(ve);return o.jsx("line",{x1:st,y1:ot,x2:xt,y2:sn,className:ne<Ut?`wk-tick-filled ${it}`:"wk-tick-empty",strokeWidth:ne%5===0?"3":"2"},ne)})})},Ys=()=>{const Le=q.length*H;return((O-1)*q.length+Oe+(_e==="rest"?.5:0))/Le},Fn=Fe&&o.jsx("div",{className:`toast-notification ${Fe.type}`,children:Fe.message});if(a)return o.jsx("div",{className:"cb-loading",children:o.jsx("div",{className:"cb-loading-spinner"})});if(f==="menu")return o.jsxs("div",{className:"wk-page","data-theme":i?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Workouts"})]}),o.jsx("div",{className:"cb-header-right",children:o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]}),o.jsxs("main",{className:"wk-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>u("/client/core-buddy"),children:" Back"}),o.jsxs("div",{className:"wk-menu-cards",children:[o.jsxs("button",{className:"wk-menu-card",onClick:()=>m("setup"),children:[o.jsxs("div",{className:"wk-menu-ring-wrap",children:[o.jsx("svg",{className:"wk-menu-ring-svg",viewBox:"0 0 200 200",children:[...Array(fi)].map((Le,tt)=>{const it=(tt*6-90)*(Math.PI/180),Ut=100+78*Math.cos(it),Et=100+78*Math.sin(it),ne=100+94*Math.cos(it),ve=100+94*Math.sin(it),st=Math.round(Math.min(Se,dd)/dd*fi);return o.jsx("line",{x1:Ut,y1:Et,x2:ne,y2:ve,className:tt<st?"wk-menu-tick-filled":"wk-menu-tick-empty",strokeWidth:tt%5===0?"3":"2"},tt)})}),o.jsx("img",{src:"/Logo.PNG",alt:"",className:"wk-menu-ring-logo"})]}),o.jsxs("div",{className:"wk-menu-card-stats",children:[o.jsx("span",{className:"wk-menu-stat-big",children:Se}),o.jsx("span",{className:"wk-menu-stat-label",children:"this week"})]}),o.jsx("h3",{children:"Random Workout"}),o.jsx("p",{children:"Interval-based HIIT from your exercise library"})]}),o.jsxs("button",{className:"wk-menu-card",onClick:()=>u("/client/core-buddy/programmes"),children:[o.jsxs("div",{className:"wk-menu-ring-wrap",children:[o.jsx("svg",{className:"wk-menu-ring-svg",viewBox:"0 0 200 200",children:[...Array(fi)].map((Le,tt)=>{const it=(tt*6-90)*(Math.PI/180),Ut=100+78*Math.cos(it),Et=100+78*Math.sin(it),ne=100+94*Math.cos(it),ve=100+94*Math.sin(it),st=Math.round(Math.min(Me,3)/3*fi);return o.jsx("line",{x1:Ut,y1:Et,x2:ne,y2:ve,className:tt<st?"wk-menu-tick-filled":"wk-menu-tick-empty",strokeWidth:tt%5===0?"3":"2"},tt)})}),o.jsx("img",{src:"/Logo.PNG",alt:"",className:"wk-menu-ring-logo"})]}),Me>0&&o.jsxs("div",{className:"wk-menu-card-stats",children:[o.jsx("span",{className:"wk-menu-stat-big",children:Me}),o.jsx("span",{className:"wk-menu-stat-label",children:"this week"})]}),o.jsx("h3",{children:"Build a Programme"}),o.jsx("p",{children:"Structured set & rep programmes with progressive overload"})]})]})]}),Fn]});if(f==="setup")return o.jsxs("div",{className:"wk-page","data-theme":i?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Setup"})]}),o.jsx("div",{className:"cb-header-right",children:o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]}),o.jsxs("main",{className:"wk-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>m("menu"),children:" Back"}),o.jsxs("div",{className:"wk-stats-hero",children:[o.jsxs("div",{className:"wk-stats-ring-wrap",children:[o.jsx("svg",{className:"wk-stats-ring-svg",viewBox:"0 0 200 200",children:[...Array(fi)].map((Le,tt)=>{const it=(tt*6-90)*(Math.PI/180),Ut=100+78*Math.cos(it),Et=100+78*Math.sin(it),ne=100+94*Math.cos(it),ve=100+94*Math.sin(it),st=Math.round(Math.min(Se,dd)/dd*fi);return o.jsx("line",{x1:Ut,y1:Et,x2:ne,y2:ve,className:tt<st?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:tt%5===0?"3":"2"},tt)})}),o.jsx("img",{src:"/Logo.PNG",alt:"",className:"wk-stats-ring-logo"})]}),o.jsxs("div",{className:"wk-stats-ring-label",children:[o.jsx("span",{className:"wk-stats-ring-count",children:Se}),o.jsx("span",{className:"wk-stats-ring-sep",children:"/"}),o.jsx("span",{className:"wk-stats-ring-target",children:dd}),o.jsx("span",{className:"wk-stats-ring-text",children:"THIS WEEK"})]}),o.jsxs("div",{className:"wk-stats-cards",children:[o.jsxs("div",{className:"wk-stats-card",children:[o.jsx("span",{className:"wk-stats-card-num",children:dt}),o.jsx("span",{className:"wk-stats-card-label",children:"Workouts"})]}),o.jsxs("div",{className:"wk-stats-card",children:[o.jsx("span",{className:"wk-stats-card-num",children:Rt}),o.jsx("span",{className:"wk-stats-card-label",children:"Minutes"})]}),o.jsxs("div",{className:"wk-stats-card",children:[o.jsx("span",{className:"wk-stats-card-num",children:ae}),o.jsx("span",{className:"wk-stats-card-label",children:"Weeks"})]})]}),dt>0&&(()=>{const Le=ge.beginner+ge.intermediate+ge.advanced;if(Le===0)return null;const tt=Math.round(ge.beginner/Le*100),it=Math.round(ge.intermediate/Le*100),Ut=100-tt-it;return o.jsxs("div",{className:"wk-stats-level-bar",children:[tt>0&&o.jsx("div",{className:"wk-stats-level-seg wk-seg-beginner",style:{width:`${tt}%`},children:tt>=15&&o.jsxs("span",{children:["B ",tt,"%"]})}),it>0&&o.jsx("div",{className:"wk-stats-level-seg wk-seg-intermediate",style:{width:`${it}%`},children:it>=15&&o.jsxs("span",{children:["I ",it,"%"]})}),Ut>0&&o.jsx("div",{className:"wk-stats-level-seg wk-seg-advanced",style:{width:`${Ut}%`},children:Ut>=15&&o.jsxs("span",{children:["A ",Ut,"%"]})})]})})()]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Equipment"}),o.jsx("div",{className:"wk-equip-options",children:o_.map(Le=>{const tt=b.includes(Le.key);return o.jsxs("button",{className:`wk-equip-btn${tt?" active":""}`,onClick:()=>{T(it=>tt&&it.length===1?it:tt?it.filter(Ut=>Ut!==Le.key):[...it,Le.key])},children:[o.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:Le.icon})}),o.jsx("span",{children:Le.label})]},Le.key)})})]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Focus Area"}),o.jsx("div",{className:"wk-focus-grid",children:l_.map(Le=>o.jsxs("button",{className:`wk-equip-btn${E===Le.key?" active":""}${Le.key==="mix"?" wk-mix-btn":""}`,onClick:()=>C(Le.key),children:[o.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:Le.icon})}),o.jsx("span",{children:Le.label})]},Le.key))})]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Level"}),o.jsx("div",{className:"wk-level-cards",children:hd.map(Le=>o.jsxs("button",{className:`wk-level-card${L===Le.key?" active":""}`,onClick:()=>P(Le.key),children:[o.jsx("span",{className:"wk-level-name",children:Le.label}),o.jsx("span",{className:"wk-level-desc",children:Le.desc})]},Le.key))})]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Time"}),o.jsx("div",{className:"wk-time-options",children:VM.map(Le=>o.jsxs("button",{className:`wk-time-btn${V===Le?" active":""}`,onClick:()=>F(Le),children:[o.jsx("span",{className:"wk-time-num",children:Le}),o.jsx("span",{className:"wk-time-unit",children:"min"})]},Le))})]}),o.jsx("button",{className:"wk-randomise-btn",onClick:ct,disabled:se,children:se?"Loading exercises...":"Randomise Workout"})]}),Fn]});if(f==="spinning")return o.jsxs("div",{className:"wk-page wk-page-center","data-theme":i?"dark":"light",children:[o.jsxs("div",{className:"wk-spin-container",children:[o.jsxs("div",{className:"wk-spin-ring",children:[o.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:[...Array(fi)].map((Le,tt)=>{const it=(tt*6-90)*(Math.PI/180),Ut=100+78*Math.cos(it),Et=100+78*Math.sin(it),ne=100+94*Math.cos(it),ve=100+94*Math.sin(it);return o.jsx("line",{x1:Ut,y1:Et,x2:ne,y2:ve,className:"wk-spin-tick",strokeWidth:tt%5===0?"3.5":"2",style:{animationDelay:`${tt*.03}s`}},tt)})}),o.jsx("img",{src:"/Logo.PNG",alt:"",className:"wk-spin-logo"})]}),o.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),Fn]});if(f==="preview"){const Le=hd.find(it=>it.key===L),tt=q.length*H*(Le.work+Le.rest);return o.jsxs("div",{className:"wk-page","data-theme":i?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Your Workout"})]}),o.jsx("div",{className:"cb-header-right",children:o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]}),o.jsxs("main",{className:"wk-main",children:[o.jsxs("div",{className:"wk-preview-stats",children:[o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:q.length}),o.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:H}),o.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:Math.ceil(tt/60)}),o.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsxs("span",{className:"wk-stat-val",children:[Le.work,"/",Le.rest]}),o.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),o.jsx("div",{className:"wk-preview-list",children:q.map((it,Ut)=>o.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${Ut*.06}s`},children:[o.jsx("span",{className:"wk-preview-num",children:Ut+1}),o.jsx("span",{className:"wk-preview-name",children:it.name})]},Ut))}),o.jsxs("div",{className:"wk-preview-actions",children:[o.jsxs("button",{className:"wk-btn-secondary",onClick:()=>ct(),children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("polyline",{points:"1 4 1 10 7 10"}),o.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),o.jsx("button",{className:"wk-btn-primary",onClick:We,children:"Start Workout"})]})]})]})}if(f==="countdown")return o.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":i?"dark":"light",children:o.jsxs("div",{className:"wk-countdown-big",children:[o.jsx("span",{className:"wk-countdown-num",children:ze}),o.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(f==="workout"){const Le=q[Oe],tt=_e==="work"?$.work:$.rest,it=_e==="rest"?Oe+1<q.length?q[Oe+1]:O<H?q[0]:null:null;return o.jsxs("div",{className:"wk-page wk-page-workout","data-theme":i?"dark":"light",children:[o.jsx("div",{className:"wk-video-container",children:_e==="work"?Le.isGif?o.jsx("img",{ref:he,className:"wk-video",src:Le.videoUrl,alt:Le.name},Le.videoUrl):o.jsx("video",{className:"wk-video",src:Le.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},Le.videoUrl):o.jsxs("div",{className:"wk-rest-screen",children:[o.jsx("span",{className:"wk-rest-label",children:"REST"}),it&&o.jsxs("span",{className:"wk-next-label",children:["Next: ",it.name]})]})}),o.jsx("div",{className:"wk-spotify",children:o.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),o.jsxs("div",{className:"wk-exercise-info",children:[o.jsxs("span",{className:"wk-exercise-counter",children:[Oe+1," / ",q.length]}),o.jsx("h2",{className:"wk-exercise-name",children:Le.name}),o.jsxs("span",{className:"wk-round-label",children:["Round ",O," of ",H]})]}),o.jsx("div",{className:"wk-timer-section",children:o.jsxs("div",{className:"wk-timer-ring-wrap",children:[rn(De,tt,_e==="work"?"wk-tick-work":"wk-tick-rest"),o.jsxs("div",{className:"wk-timer-center",children:[o.jsx("span",{className:"wk-timer-time",children:De}),o.jsx("span",{className:`wk-timer-phase ${_e}`,children:_e==="work"?"WORK":"REST"})]})]})}),o.jsxs("div",{className:"wk-controls",children:[o.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&m("menu")},children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),o.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>de(!Q),children:Q?o.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):o.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),o.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),o.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{Xe(0)},children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),o.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),o.jsx("div",{className:"wk-progress-bar",children:o.jsx("div",{className:"wk-progress-fill",style:{width:`${Ys()*100}%`}})})]})}if(f==="complete"){const Le=hd.find(it=>it.key===L),tt=q.length*H*(Le.work+Le.rest);return o.jsx("div",{className:"wk-page wk-page-center","data-theme":i?"dark":"light",children:o.jsxs("div",{className:"wk-complete",children:[o.jsxs("div",{className:"wk-complete-ring",children:[o.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:[...Array(fi)].map((it,Ut)=>{const Et=(Ut*6-90)*(Math.PI/180),ne=100+78*Math.cos(Et),ve=100+78*Math.sin(Et),st=100+94*Math.cos(Et),ot=100+94*Math.sin(Et);return o.jsx("line",{x1:ne,y1:ve,x2:st,y2:ot,className:"wk-tick-complete",strokeWidth:Ut%5===0?"3.5":"2",style:{animationDelay:`${Ut*.02}s`}},Ut)})}),o.jsx("div",{className:"wk-complete-center",children:o.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),o.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),o.jsxs("div",{className:"wk-complete-stats",children:[o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:Math.ceil(tt/60)}),o.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:q.length*H}),o.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:H}),o.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),o.jsx("div",{className:"wk-complete-actions",children:o.jsx("button",{className:"wk-btn-primary",onClick:()=>m("menu"),children:"Done"})})]})})}return null}const Eg=60,c_=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function vf(s,e,t){const a=s.baseReps?s.baseReps+(e-1)*(t.repProg||0):void 0,i=s.baseTime?s.baseTime+(e-1)*(t.timeProg||0):void 0;return{sets:s.sets,reps:a,time:i}}const u_={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function FM(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),{isDark:i,toggleTheme:c}=go(),u=Ms(),[f,m]=I.useState("loading"),[b,T]=I.useState(null),[E,C]=I.useState(null),[L,P]=I.useState(1),[V,F]=I.useState(0),[Y,W]=I.useState(0),[se,K]=I.useState(0),[fe,ke]=I.useState([]),[q,B]=I.useState(""),[H,J]=I.useState(""),[$,Z]=I.useState(!1),[O,Ce]=I.useState(0),Oe=I.useRef(null),[ee,_e]=I.useState({}),[Be,De]=I.useState(!1),Xe=I.useRef(null);I.useEffect(()=>{window.scrollTo(0,0)},[f]);const[Q,de]=I.useState(null),ze=I.useCallback((ge,be="info")=>{de({message:ge,type:be}),setTimeout(()=>de(null),4e3)},[]),Pe=I.useRef(null),he=()=>(Pe.current||(Pe.current=new(window.AudioContext||window.webkitAudioContext)),Pe.current),Fe=()=>{try{const ge=he(),be=ge.createOscillator(),xe=ge.createGain();be.connect(xe),xe.connect(ge.destination),be.frequency.value=1200,xe.gain.value=.4,be.start(ge.currentTime),be.stop(ge.currentTime+.3)}catch{}};I.useEffect(()=>{!a&&(!s||!e)&&u("/")},[s,e,a,u]),I.useEffect(()=>{if(!t)return;(async()=>{try{const be=Mt(rt,"clientProgrammes",t.id),xe=await wa(be);xe.exists()?(C(xe.data()),m("dashboard")):m("browse")}catch(be){console.error("Error loading programme:",be),m("browse")}})()},[t]),I.useEffect(()=>{if(!$||O<=0){$&&O<=0&&(Z(!1),Fe());return}return Oe.current=setTimeout(()=>Ce(ge=>ge-1),1e3),()=>clearTimeout(Oe.current)},[$,O]);const ue=async ge=>{if(t)try{await La(Mt(rt,"clientProgrammes",t.id),ge),C(ge)}catch(be){console.error("Error saving programme:",be),ze("Failed to save. Check Firestore rules for clientProgrammes.","error")}},ye=async ge=>{const be={templateId:ge.id,startDate:vt.now(),completedSessions:{}};await ue(be),m("dashboard")},Se=async()=>{if(t)try{await xa(Mt(rt,"clientProgrammes",t.id)),C(null),m("browse")}catch(ge){console.error("Error quitting programme:",ge)}},et=()=>E?c_.find(ge=>ge.id===E.templateId):null,Me=()=>{if(!E)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const ge=E.completedSessions||{},be=Object.keys(ge).length,xe=et();if(!xe)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const nt=xe.duration*xe.daysPerWeek,ct=Math.min(Math.floor(be/xe.daysPerWeek)+1,xe.duration),We=be-(ct-1)*xe.daysPerWeek;for(let _t=1;_t<=xe.duration;_t++)for(let wt=0;wt<xe.daysPerWeek;wt++){const Vt=`w${_t}d${wt}`;if(!ge[Vt])return{currentWeek:_t,completedThisWeek:We,nextDay:wt,nextWeek:_t,totalCompleted:be,totalSessions:nt}}return{currentWeek:xe.duration,completedThisWeek:xe.daysPerWeek,nextDay:-1,totalCompleted:be,totalSessions:nt,complete:!0}},mt=(ge,be,xe)=>{if(!E||ge<=1)return null;const nt=`w${ge-1}d${be}`,ct=E.completedSessions?.[nt];if(!ct)return null;const We=ct.exercises?.find(_t=>_t.name===xe);return We?.sets?.length?We.sets[We.sets.length-1]:null},dt=(ge,be)=>{const xe=et();if(!xe)return;P(ge),F(be),W(0),K(0),ke([]),J(""),Z(!1),Ce(0),De(!1),_e({});const nt=xe.days[be],ct=nt.exercises.map(Vt=>{const Lt=vf(Vt,ge,xe);return{name:Vt.name,type:Vt.type,pbKey:Vt.pbKey,targetSets:Lt.sets,targetReps:Lt.reps,targetTime:Lt.time,sets:[]}});ke(ct);const We=nt.exercises[0],_t=mt(ge,be,We.name);_t?.weight&&We.type==="weighted"?B(String(_t.weight)):B(""),(async()=>{const Vt={};for(const Lt of nt.exercises)if(Lt.storagePath)try{const nn=ty(ny,Lt.storagePath),Kt=await bS(nn);Vt[Lt.name]={url:Kt,isGif:/\.gif$/i.test(Lt.storagePath)}}catch(nn){console.warn(`Video not found for ${Lt.name}:`,nn)}_e(Vt)})(),m("session")},At=async()=>{et();const ge=fe[Y];if(!ge)return;let be={};if(ge.type==="weighted"){const ct=parseFloat(q)||0,We=parseInt(H)||0;if(We===0){ze("Enter your reps","error");return}be={weight:ct,reps:We}}else if(ge.type==="reps"){const ct=parseInt(H)||0;if(ct===0){ze("Enter your reps","error");return}be={reps:ct}}else if(ge.type==="timed"){const ct=ge.targetTime-O;be={time:Math.max(ct,1)}}const xe=[...fe];xe[Y]={...ge,sets:[...ge.sets,be]},ke(xe),ge.type==="weighted"&&be.weight>0&&await jt(ge.name,be.weight,be.reps);const nt=ge.sets.length+1;if(nt<ge.targetSets)K(nt),B(be.weight?String(be.weight):""),J(""),Z(!1),Ce(0);else if(Y+1<fe.length){const ct=Y+1;W(ct),K(0),De(!1);const _t=et()?.days[V]?.exercises[ct],wt=mt(L,V,_t?.name);wt?.weight&&_t?.type==="weighted"?B(String(wt.weight)):B(""),J(""),Z(!1),Ce(0)}else await Rt(xe)},Rt=async ge=>{if(!E||!t)return;const be=`w${L}d${V}`,xe={...E.completedSessions,[be]:{completedAt:new Date().toISOString(),exercises:ge.map(ct=>({name:ct.name,type:ct.type,sets:ct.sets}))}},nt={...E,completedSessions:xe};await ue(nt);try{const ct=et();await pi(Ht(rt,"workoutLogs"),{clientId:s.uid,type:"programme",programmeId:ct?.id,programmeName:ct?.name,week:L,day:V+1,exerciseCount:ge.length,duration:Math.round(ge.reduce((We,_t)=>We+_t.sets.length*1.5,0)),completedAt:vt.now()})}catch(ct){console.error("Error saving workout log:",ct)}m("sessionComplete")},jt=async(ge,be,xe)=>{if(t)try{const nt=t.id,ct=await wa(Mt(rt,"coreBuddyPBs",nt)),_t=(ct.exists()?ct.data():null)?.exercises||{},wt=_t[ge];let Vt=!1;if(wt?(be>(wt.weight||0)||be===(wt.weight||0)&&xe>(wt.reps||0))&&(Vt=!0):Vt=!0,Vt){const Lt={..._t,[ge]:{weight:be,reps:xe,achievedAt:vt.now()}};await La(Mt(rt,"coreBuddyPBs",nt),{clientId:t.id,exercises:Lt,updatedAt:vt.now()}),ze(`New PB! ${be}kg  ${xe} reps`,"success"),Fe()}}catch(nt){console.error("Error checking PB:",nt)}},ae=Q&&o.jsxs("div",{className:`toast-notification ${Q.type}`,children:[Q.type==="success"&&o.jsx("span",{children:" "}),Q.message]}),Je=ge=>o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:ge})]}),o.jsx("div",{className:"cb-header-right",children:o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]});if(a||f==="loading")return o.jsx("div",{className:"cb-loading",children:o.jsx("div",{className:"cb-loading-spinner"})});if(f==="browse")return o.jsxs("div",{className:"pg-page","data-theme":i?"dark":"light",children:[Je("Programmes"),o.jsxs("main",{className:"pg-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>u("/client/core-buddy/workouts"),children:" Back"}),o.jsx("p",{className:"pg-browse-intro",children:"Choose a programme and start your journey"}),o.jsx("div",{className:"pg-browse-grid",children:c_.map((ge,be)=>o.jsxs("button",{className:"pg-browse-card",onClick:()=>{T(ge),m("overview")},style:{animationDelay:`${be*.06}s`},children:[o.jsxs("div",{className:"pg-browse-card-top",children:[o.jsx("svg",{className:"pg-browse-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:u_[ge.focus]})}),o.jsxs("span",{className:"pg-browse-duration",children:[ge.duration," WK"]})]}),o.jsx("h3",{className:"pg-browse-name",children:ge.name}),o.jsx("span",{className:"pg-browse-level",children:ge.level}),o.jsx("p",{className:"pg-browse-desc",children:ge.description}),o.jsxs("div",{className:"pg-browse-meta",children:[o.jsxs("span",{children:[ge.daysPerWeek," per week"]}),o.jsxs("span",{children:[ge.days[0].exercises.length," exercises"]})]})]},ge.id))})]}),ae]});if(f==="overview"&&b){const ge=b;return o.jsxs("div",{className:"pg-page","data-theme":i?"dark":"light",children:[Je(ge.name),o.jsxs("main",{className:"pg-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>m("browse"),children:" Back"}),o.jsxs("div",{className:"pg-overview-hero",children:[o.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:u_[ge.focus]})}),o.jsx("h2",{className:"pg-overview-name",children:ge.name}),o.jsx("p",{className:"pg-overview-desc",children:ge.description}),o.jsxs("div",{className:"pg-overview-stats",children:[o.jsxs("div",{className:"pg-ov-stat",children:[o.jsx("span",{className:"pg-ov-stat-num",children:ge.duration}),o.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),o.jsxs("div",{className:"pg-ov-stat",children:[o.jsx("span",{className:"pg-ov-stat-num",children:ge.daysPerWeek}),o.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),o.jsxs("div",{className:"pg-ov-stat",children:[o.jsx("span",{className:"pg-ov-stat-num",children:ge.duration*ge.daysPerWeek}),o.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),o.jsx("div",{className:"pg-overview-days",children:ge.days.map((be,xe)=>o.jsxs("div",{className:"pg-day-card",children:[o.jsxs("div",{className:"pg-day-header",children:[o.jsx("span",{className:"pg-day-name",children:be.name}),o.jsx("span",{className:"pg-day-label",children:be.label})]}),o.jsx("div",{className:"pg-day-exercises",children:be.exercises.map((nt,ct)=>{const We=vf(nt,1,ge);return o.jsxs("div",{className:"pg-day-ex",children:[o.jsx("span",{className:"pg-day-ex-name",children:nt.name}),o.jsx("span",{className:"pg-day-ex-target",children:nt.type==="timed"?`${We.sets}${We.time}s`:`${We.sets}${We.reps}`}),o.jsx("span",{className:`pg-day-ex-badge pg-badge-${nt.type}`,children:nt.type==="weighted"?"WT":nt.type==="timed"?"TMR":"BW"})]},ct)})})]},xe))}),o.jsxs("div",{className:"pg-overview-note",children:[o.jsx("strong",{children:"Progressive Overload:"})," +",ge.repProg," reps/week",ge.timeProg?`, +${ge.timeProg}s/week for timed`:""]}),o.jsx("button",{className:"pg-start-btn",onClick:()=>ye(ge),children:"Start Programme"})]}),ae]})}if(f==="dashboard"){const ge=et();if(!ge)return m("browse"),null;const be=Me(),xe=E?.completedSessions||{},nt=be.totalSessions?Math.round(be.totalCompleted/be.totalSessions*100):0,ct=Math.round(be.totalCompleted/(be.totalSessions||1)*Eg);return o.jsxs("div",{className:"pg-page","data-theme":i?"dark":"light",children:[Je("Programme"),o.jsxs("main",{className:"pg-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>u("/client/core-buddy/workouts"),children:" Back"}),o.jsxs("div",{className:"pg-dash-hero",children:[o.jsxs("div",{className:"pg-dash-ring-wrap",children:[o.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:[...Array(Eg)].map((We,_t)=>{const wt=(_t*6-90)*(Math.PI/180),Vt=100+78*Math.cos(wt),Lt=100+78*Math.sin(wt),nn=100+94*Math.cos(wt),Kt=100+94*Math.sin(wt);return o.jsx("line",{x1:Vt,y1:Lt,x2:nn,y2:Kt,className:_t<ct?"pg-tick-filled":"pg-tick-empty",strokeWidth:_t%5===0?"3":"2"},_t)})}),o.jsx("img",{src:"/Logo.PNG",alt:"",className:"pg-dash-ring-logo"})]}),o.jsx("h2",{className:"pg-dash-name",children:ge.name}),o.jsxs("div",{className:"pg-dash-progress-text",children:[o.jsxs("span",{className:"pg-dash-pct",children:[nt,"%"]}),o.jsxs("span",{className:"pg-dash-week",children:["Week ",be.currentWeek," of ",ge.duration]})]})]}),o.jsx("div",{className:"pg-weeks",children:Array.from({length:ge.duration},(We,_t)=>{const wt=_t+1;return o.jsxs("div",{className:`pg-week-row${wt===be.currentWeek?" pg-week-current":""}`,children:[o.jsxs("span",{className:"pg-week-label",children:["W",wt]}),o.jsx("div",{className:"pg-week-days",children:ge.days.map((Vt,Lt)=>{const nn=`w${wt}d${Lt}`,Kt=!!xe[nn],rn=!be.complete&&wt===be.nextWeek&&Lt===be.nextDay;return o.jsx("button",{className:`pg-day-dot${Kt?" done":""}${rn?" next":""}`,disabled:Kt,onClick:()=>{rn&&dt(wt,Lt)},children:Kt?o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:o.jsx("path",{d:"M20 6L9 17l-5-5"})}):o.jsx("span",{children:Vt.name.replace("Day ","")})},Lt)})})]},_t)})}),!be.complete&&be.nextDay>=0&&o.jsxs("div",{className:"pg-next-session",children:[o.jsx("h3",{children:"Next Session"}),o.jsxs("p",{className:"pg-next-info",children:["Week ",be.nextWeek,"  ",ge.days[be.nextDay].name,": ",ge.days[be.nextDay].label]}),o.jsx("div",{className:"pg-next-exercises",children:ge.days[be.nextDay].exercises.map((We,_t)=>{const wt=vf(We,be.nextWeek,ge);return o.jsxs("div",{className:"pg-next-ex",children:[o.jsx("span",{className:"pg-next-ex-name",children:We.name}),o.jsx("span",{className:"pg-next-ex-target",children:We.type==="timed"?`${wt.sets}${wt.time}s`:`${wt.sets}${wt.reps}`})]},_t)})}),o.jsx("button",{className:"pg-start-btn",onClick:()=>dt(be.nextWeek,be.nextDay),children:"Start Session"})]}),be.complete&&o.jsxs("div",{className:"pg-complete-msg",children:[o.jsx("h3",{children:"Programme Complete! "}),o.jsxs("p",{children:["You finished all ",be.totalSessions," sessions."]}),o.jsx("button",{className:"pg-start-btn",onClick:Se,children:"Choose New Programme"})]}),o.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&Se()},children:"Quit Programme"})]}),ae]})}if(f==="session"){const ge=et();if(!ge)return null;const be=ge.days[V],xe=be.exercises[Y],nt=vf(xe,L,ge),ct=fe[Y],We=ct?.sets?.length||0,_t=be.exercises.length,wt=(Y+We/nt.sets)/_t,Vt=ee[xe.name],Lt=mt(L,V,xe.name);xe.type==="timed"&&O===0&&!$&&We===se&&setTimeout(()=>Ce(nt.time),0);const nn=()=>{Vt?.isGif?De(!Be):Xe.current&&(Be?Xe.current.pause():Xe.current.play(),De(!Be))};return o.jsxs("div",{className:"pg-page pg-page-session","data-theme":i?"dark":"light",children:[o.jsx("div",{className:"pg-session-progress",children:o.jsx("div",{className:"pg-session-progress-fill",style:{width:`${wt*100}%`}})}),o.jsxs("div",{className:"pg-session-header",children:[o.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&m("dashboard")},children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),o.jsxs("div",{className:"pg-session-title",children:[o.jsxs("span",{className:"pg-session-counter",children:[Y+1," / ",_t]}),o.jsxs("span",{className:"pg-session-week",children:["Week ",L,"  ",be.name]})]})]}),Vt&&o.jsxs("div",{className:"pg-video-container",onClick:nn,children:[Vt.isGif?o.jsx("img",{className:"pg-video",src:Vt.url,alt:xe.name}):o.jsx("video",{ref:Xe,className:"pg-video",src:Vt.url,loop:!0,muted:!0,playsInline:!0},xe.name),!Be&&o.jsxs("div",{className:"pg-video-overlay",children:[o.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:o.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),o.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),o.jsx("div",{className:"pg-spotify",children:o.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),o.jsxs("div",{className:"pg-exercise-card",children:[o.jsx("h2",{className:"pg-ex-name",children:xe.name}),o.jsx("span",{className:`pg-ex-type-badge pg-badge-${xe.type}`,children:xe.type==="weighted"?"Weight + Reps":xe.type==="timed"?"Timed":"Reps Only"}),xe.type==="weighted"&&Lt&&o.jsxs("div",{className:"pg-last-week",children:[o.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),o.jsxs("span",{className:"pg-last-week-value",children:[Lt.weight,"kg x ",Lt.reps," reps"]})]}),o.jsxs("div",{className:"pg-ex-set-info",children:[o.jsxs("span",{className:"pg-ex-set-num",children:["Set ",We+1," of ",nt.sets]}),o.jsxs("span",{className:"pg-ex-target",children:["Target: ",xe.type==="timed"?`${nt.time}s hold`:`${nt.reps} reps`]})]}),xe.type==="weighted"&&o.jsxs("div",{className:"pg-input-area",children:[o.jsxs("div",{className:"pg-input-group",children:[o.jsx("label",{children:"Weight (kg)"}),o.jsx("input",{type:"number",inputMode:"decimal",value:q,onChange:Kt=>B(Kt.target.value),placeholder:"0",className:"pg-input"})]}),o.jsxs("div",{className:"pg-input-group",children:[o.jsx("label",{children:"Reps"}),o.jsx("input",{type:"number",inputMode:"numeric",value:H,onChange:Kt=>J(Kt.target.value),placeholder:String(nt.reps),className:"pg-input"})]})]}),xe.type==="reps"&&o.jsx("div",{className:"pg-input-area",children:o.jsxs("div",{className:"pg-input-group pg-input-single",children:[o.jsx("label",{children:"Reps"}),o.jsx("input",{type:"number",inputMode:"numeric",value:H,onChange:Kt=>J(Kt.target.value),placeholder:String(nt.reps),className:"pg-input"})]})}),xe.type==="timed"&&o.jsxs("div",{className:"pg-timer-area",children:[o.jsx("div",{className:"pg-timer-display",children:o.jsxs("span",{className:"pg-timer-value",children:[O,"s"]})}),$?o.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>Z(!1),children:"Stop"}):o.jsx("button",{className:"pg-timer-btn",onClick:()=>{O===0&&Ce(nt.time),Z(!0)},children:O<nt.time&&O>0?"Resume":"Start Timer"})]}),o.jsx("button",{className:"pg-log-set-btn",onClick:At,disabled:xe.type==="timed"&&$,children:We+1<nt.sets?"Log Set":Y+1<_t?"Log Set  Next Exercise":"Log Set  Complete"}),ct?.sets?.length>0&&o.jsx("div",{className:"pg-completed-sets",children:ct.sets.map((Kt,rn)=>o.jsxs("div",{className:"pg-completed-set",children:[o.jsx("span",{className:"pg-completed-set-check",children:""}),o.jsxs("span",{children:["Set ",rn+1,": ",Kt.weight!==void 0?`${Kt.weight}kg  ${Kt.reps}`:Kt.time!==void 0?`${Kt.time}s`:`${Kt.reps} reps`]})]},rn))})]}),ae]})}if(f==="sessionComplete"){const be=et()?.days[V],xe=fe.reduce((ct,We)=>ct+We.sets.length,0),nt=fe.reduce((ct,We)=>ct+We.sets.reduce((_t,wt)=>_t+(wt.weight||0)*(wt.reps||0),0),0);return o.jsxs("div",{className:"pg-page pg-page-center","data-theme":i?"dark":"light",children:[o.jsxs("div",{className:"pg-session-done",children:[o.jsxs("div",{className:"pg-done-ring",children:[o.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:[...Array(Eg)].map((ct,We)=>{const _t=(We*6-90)*(Math.PI/180),wt=100+78*Math.cos(_t),Vt=100+78*Math.sin(_t),Lt=100+94*Math.cos(_t),nn=100+94*Math.sin(_t);return o.jsx("line",{x1:wt,y1:Vt,x2:Lt,y2:nn,className:"pg-tick-complete",strokeWidth:We%5===0?"3.5":"2",style:{animationDelay:`${We*.02}s`}},We)})}),o.jsx("div",{className:"pg-done-center",children:o.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:o.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),o.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),o.jsxs("p",{className:"pg-done-subtitle",children:["Week ",L,"  ",be?.name,": ",be?.label]}),o.jsxs("div",{className:"pg-done-stats",children:[o.jsxs("div",{className:"pg-done-stat",children:[o.jsx("span",{className:"pg-done-stat-num",children:fe.length}),o.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),o.jsxs("div",{className:"pg-done-stat",children:[o.jsx("span",{className:"pg-done-stat-num",children:xe}),o.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),nt>0&&o.jsxs("div",{className:"pg-done-stat",children:[o.jsx("span",{className:"pg-done-stat-num",children:Math.round(nt)}),o.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),o.jsx("button",{className:"pg-start-btn",onClick:()=>m("dashboard"),children:"Back to Programme"})]}),ae]})}return null}function qM(){const{pathname:s}=fo();return I.useEffect(()=>{window.scrollTo(0,0)},[s]),null}function HM(){const s=Ms();return I.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function $M(){return o.jsx(K3,{children:o.jsx(W3,{children:o.jsxs(gN,{basename:"/login",children:[o.jsx(qM,{}),o.jsx(HM,{}),o.jsxs(GE,{children:[o.jsx(Vs,{path:"/",element:o.jsx(Y3,{})}),o.jsx(Vs,{path:"/dashboard",element:o.jsx(dM,{})}),o.jsx(Vs,{path:"/add-client",element:o.jsx(fM,{})}),o.jsx(Vs,{path:"/client",element:o.jsx(bM,{})}),o.jsx(Vs,{path:"/client/forms",element:o.jsx(xM,{})}),o.jsx(Vs,{path:"/client/tools",element:o.jsx(_M,{})}),o.jsx(Vs,{path:"/client/tools/macros",element:o.jsx(wM,{})}),o.jsx(Vs,{path:"/client/tools/snacks",element:o.jsx(SM,{})}),o.jsx(Vs,{path:"/client/tools/motivation",element:o.jsx(TM,{})}),o.jsx(Vs,{path:"/client/personal-bests",element:o.jsx(jM,{})}),o.jsx(Vs,{path:"/client/circuit",element:o.jsx(CM,{})}),o.jsx(Vs,{path:"/client/circuit/booking",element:o.jsx(DM,{})}),o.jsx(Vs,{path:"/client/core-buddy",element:o.jsx(MM,{})}),o.jsx(Vs,{path:"/client/core-buddy/nutrition",element:o.jsx(LM,{})}),o.jsx(Vs,{path:"/client/core-buddy/workouts",element:o.jsx(zM,{})}),o.jsx(Vs,{path:"/client/core-buddy/programmes",element:o.jsx(FM,{})}),o.jsx(Vs,{path:"*",element:o.jsx(HE,{to:"/",replace:!0})})]})]})})})}KT.createRoot(document.getElementById("root")).render(o.jsx(I.StrictMode,{children:o.jsx($M,{})}));
