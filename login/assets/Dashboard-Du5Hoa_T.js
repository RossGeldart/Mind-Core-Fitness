import{r as j,g as ie,q as Ce,c as G,d as $,o as Ue,j as e,a as ke,T as ae,w as Ee,b as ye,e as K,f as ze,s as Ie,h as Ve,u as he,i as Ye,k as Ge,l as Ke,m as Je,n as Qe}from"./index-DFq_nEne.js";import{f as ne,D as Xe,g as Ze,a as Pe,b as Te,S as Re,t as De,c as Ae}from"./scheduleUtils-BAUZ6756.js";function es(){const[m,B]=j.useState([]),[g,A]=j.useState([]),[R,V]=j.useState(!0),[u,P]=j.useState(null),[d,H]=j.useState({}),[M,L]=j.useState(null),[Q,X]=j.useState(""),[h,se]=j.useState("all"),[T,U]=j.useState(null),[E,N]=j.useState({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""}),[F,O]=j.useState([]),[le,r]=j.useState(!1),[z,I]=j.useState(!1),[J,re]=j.useState("list");j.useEffect(()=>{ce()},[]);const ce=async()=>{try{const[s,c]=await Promise.all([ie(Ce(G($,"clients"),Ue("name","asc"))),ie(G($,"sessions"))]),v=s.docs.map(i=>({id:i.id,...i.data()})),C=c.docs.map(i=>({id:i.id,...i.data()}));B(v),A(C)}catch(s){console.error("Error fetching data:",s)}V(!1)},ve=s=>{const c=new Date,v=c.getFullYear(),C=(c.getMonth()+1).toString().padStart(2,"0"),i=c.getDate().toString().padStart(2,"0"),k=`${v}-${C}-${i}`,Y=`${c.getHours().toString().padStart(2,"0")}:${c.getMinutes().toString().padStart(2,"0")}`;return g.filter(W=>W.clientId!==s?!1:W.date<k||W.date===k&&W.time<Y).length},oe=s=>{const c=ve(s.id);return(s.totalSessions||0)-c},ue=s=>{const c=new Date,v=c.getFullYear(),C=(c.getMonth()+1).toString().padStart(2,"0"),i=c.getDate().toString().padStart(2,"0"),k=`${v}-${C}-${i}`,Y=`${c.getHours().toString().padStart(2,"0")}:${c.getMinutes().toString().padStart(2,"0")}`;return g.filter(W=>W.clientId!==s?!1:W.date>k||W.date===k&&W.time>=Y).length},pe=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",xe=async(s,c)=>{if(window.confirm(`Are you sure you want to delete ${c}? This will also delete all their booked sessions.`))try{const C=g.filter(i=>i.clientId===s).map(i=>ye(K($,"sessions",i.id)));await Promise.all(C),await ye(K($,"clients",s)),B(m.filter(i=>i.id!==s)),A(g.filter(i=>i.clientId!==s))}catch(v){console.error("Error deleting client:",v),alert("Failed to delete client")}},de=s=>{if(!s)return"";const c=s.toDate?s.toDate():new Date(s),v=c.getFullYear(),C=(c.getMonth()+1).toString().padStart(2,"0"),i=c.getDate().toString().padStart(2,"0");return`${v}-${C}-${i}`},Z=s=>{P(s.id),H({name:s.name,email:s.email,password:"",clientType:s.clientType||"block",weeksInBlock:s.weeksInBlock||"",totalSessions:s.totalSessions||"",sessionsRemaining:s.sessionsRemaining,sessionDuration:s.sessionDuration||45,startDate:de(s.startDate),endDate:de(s.endDate),status:s.status,hasPortalAccess:!!s.uid,circuitAccess:!!s.circuitAccess,coreBuddyAccess:!!s.coreBuddyAccess,buddyEnabled:!!s.buddyEnabled,coreBuddyPlan:s.coreBuddyPlan||"free",isJunior:!!s.isJunior})},ee=s=>{const{name:c,value:v}=s.target;if(H(C=>({...C,[c]:v})),c==="startDate"||c==="weeksInBlock"){const C=c==="startDate"?v:d.startDate,i=parseInt(c==="weeksInBlock"?v:d.weeksInBlock);if(C&&i>0){const k=new Date(C),Y=new Date(k);Y.setDate(Y.getDate()+i*7);const W=Y.getFullYear(),te=(Y.getMonth()+1).toString().padStart(2,"0"),je=Y.getDate().toString().padStart(2,"0");H(fe=>({...fe,[c]:v,endDate:`${W}-${te}-${je}`}))}}},ge=async s=>{try{const c=m.find(k=>k.id===s);let v=c?.uid;if(d.password&&d.password.length>=6&&!c?.uid)try{const k=await ze(Ie,d.email.trim().toLowerCase(),d.password);await Ve(Ie),v=k.user.uid}catch(k){if(console.error("Error creating auth account:",k),k.code==="auth/email-already-in-use")alert("This email already has a portal account. Password not changed.");else if(k.code==="auth/weak-password"){alert("Password must be at least 6 characters.");return}else{alert("Failed to create portal account: "+k.message);return}}const C=d.clientType==="block",i={name:d.name.trim(),email:d.email.trim().toLowerCase(),clientType:d.clientType,status:d.status,coreBuddyAccess:d.coreBuddyAccess,buddyEnabled:d.buddyEnabled,isJunior:d.isJunior};if(C)i.weeksInBlock=parseInt(d.weeksInBlock)||0,i.totalSessions=parseInt(d.totalSessions)||0,i.sessionDuration=parseInt(d.sessionDuration),i.circuitAccess=d.circuitAccess,d.startDate&&(i.startDate=ae.fromDate(new Date(d.startDate))),d.endDate&&(i.endDate=ae.fromDate(new Date(d.endDate)));else if(d.clientType==="core_buddy")i.coreBuddyPlan=d.coreBuddyPlan||"free",i.coreBuddyAccess=!0;else{const k=m.find(Y=>Y.id===s);k?.circuitStrikes===void 0&&(i.circuitStrikes=0),k?.circuitBanUntil===void 0&&(i.circuitBanUntil=null)}v&&!c?.uid&&(i.uid=v),await he(K($,"clients",s),i),B(m.map(k=>k.id===s?{...k,...d,uid:v||k.uid,weeksInBlock:parseInt(d.weeksInBlock),totalSessions:parseInt(d.totalSessions),sessionDuration:parseInt(d.sessionDuration),startDate:ae.fromDate(new Date(d.startDate)),endDate:ae.fromDate(new Date(d.endDate))}:k)),P(null),v&&!c?.uid&&alert("Portal access created! Client can now log in.")}catch(c){console.error("Error updating client:",c),alert("Failed to update client")}},we=async s=>{try{const c=m.find(v=>v.id===s)?.status==="archived"?"active":"archived";await he(K($,"clients",s),{status:c}),B(m.map(v=>v.id===s?{...v,status:c}:v))}catch(c){console.error("Error archiving client:",c),alert("Failed to update client status")}},be=async s=>{U({clientId:s.id,clientName:s.name}),re("list"),N({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""}),r(!0);try{const c=Ce(G($,"sessionNotes"),Ee("clientId","==",s.id)),C=(await ie(c)).docs.map(i=>({id:i.id,...i.data()}));C.sort((i,k)=>{const Y=i.createdAt?.toMillis?.()||0;return(k.createdAt?.toMillis?.()||0)-Y}),O(C)}catch(c){console.error("Error fetching notes:",c),O([])}r(!1)},me=()=>{U(null),O([]),re("list")},n=async()=>{if(!T)return;const{sessionNotes:s,whatWentWell:c,whatWentWrong:v,whatsNext:C}=E;if(!(!s.trim()&&!c.trim()&&!v.trim()&&!C.trim())){I(!0);try{const k=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});await ke(G($,"sessionNotes"),{clientId:T.clientId,date:k,sessionNotes:s.trim(),whatWentWell:c.trim(),whatWentWrong:v.trim(),whatsNext:C.trim(),createdAt:ae.now()}),N({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""});const Y=Ce(G($,"sessionNotes"),Ee("clientId","==",T.clientId)),te=(await ie(Y)).docs.map(je=>({id:je.id,...je.data()}));te.sort((je,fe)=>{const Ne=je.createdAt?.toMillis?.()||0;return(fe.createdAt?.toMillis?.()||0)-Ne}),O(te),re("list")}catch(i){console.error("Error saving note:",i),alert("Failed to save note. Check Firestore rules for sessionNotes collection.")}I(!1)}},f=async s=>{if(window.confirm("Delete this session note?"))try{await ye(K($,"sessionNotes",s)),O(F.filter(c=>c.id!==s))}catch(c){console.error("Error deleting note:",c)}};if(R)return e.jsx("div",{className:"client-list-loading",children:"Loading clients..."});if(m.length===0)return e.jsxs("div",{className:"client-list-empty",children:[e.jsx("p",{children:"No clients yet"}),e.jsx("span",{children:"Add your first client to get started"})]});const b=s=>s.clientType==="circuit_vip"?"VIP":s.clientType==="circuit_dropin"?"Drop-in":s.clientType==="core_buddy"?"Core Buddy":"Block",D=m.filter(s=>s.name?.toLowerCase().includes(Q.toLowerCase())||s.email?.toLowerCase().includes(Q.toLowerCase())).sort((s,c)=>(s.name||"").localeCompare(c.name||"")),_=s=>s.clientType==="circuit_vip"||s.clientType==="circuit_dropin",q=s=>s.clientType==="core_buddy",a=s=>s.status==="archived",p=D.filter(s=>!a(s)),S=p.filter(s=>!_(s)&&!q(s)),t=p.filter(s=>_(s)),l=p.filter(s=>q(s)),o=D.filter(s=>a(s)),y=h==="block"?S:h==="circuit"?t:h==="core_buddy"?l:h==="archived"?o:p,x=s=>{u||L(c=>c===s?null:s)},w=s=>{const c=M===s.id,v=u===s.id,C=!s.clientType||s.clientType==="block";return e.jsxs("div",{className:`client-card ${s.status==="archived"?"archived":""} ${c||v?"expanded":"collapsed"}`,children:[e.jsxs("div",{className:"client-name-row",onClick:()=>x(s.id),children:[e.jsxs("div",{className:"client-name-row-left",children:[e.jsx("span",{className:"client-name-initial",children:s.name?.charAt(0)?.toUpperCase()}),e.jsxs("div",{className:"client-name-text",children:[e.jsx("h3",{children:s.name}),e.jsx("span",{className:"client-name-sub",children:C?`${oe(s)}/${s.totalSessions||0} sessions`:b(s)})]})]}),e.jsxs("div",{className:"client-name-row-right",children:[(s.clientType==="circuit_vip"||s.clientType==="circuit_dropin"||s.clientType==="core_buddy")&&e.jsx("span",{className:`client-type-badge ${s.clientType==="circuit_vip"?"vip":s.clientType==="core_buddy"?"core-buddy":"dropin"}`,children:b(s)}),e.jsx("span",{className:`status-dot ${s.status}`}),e.jsx("svg",{className:`client-chevron ${c||v?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]})]}),(c||v)&&e.jsx("div",{className:"client-expand-panel",children:v?e.jsxs("div",{className:"edit-form",children:[e.jsx("div",{className:"edit-type-toggle",children:[{value:"block",label:"Block"},{value:"circuit_vip",label:"VIP"},{value:"circuit_dropin",label:"Drop-in"},{value:"core_buddy",label:"Core Buddy"}].map(i=>e.jsx("button",{type:"button",className:`edit-type-btn ${d.clientType===i.value?"active":""}`,onClick:()=>H(k=>({...k,clientType:i.value})),children:i.label},i.value))}),e.jsxs("div",{className:"edit-row",children:[e.jsx("input",{type:"text",name:"name",value:d.name,onChange:ee,placeholder:"Name"}),e.jsx("input",{type:"email",name:"email",value:d.email,onChange:ee,placeholder:"Email"})]}),d.clientType==="block"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"edit-row",children:[e.jsx("input",{type:"number",name:"weeksInBlock",value:d.weeksInBlock,onChange:ee,placeholder:"Weeks",min:"1"}),e.jsx("input",{type:"number",name:"totalSessions",value:d.totalSessions,onChange:ee,placeholder:"Total Sessions",min:"1"}),e.jsxs("select",{name:"sessionDuration",value:d.sessionDuration,onChange:ee,children:[e.jsx("option",{value:"30",children:"30 min"}),e.jsx("option",{value:"45",children:"45 min"})]})]}),e.jsxs("div",{className:"edit-row",children:[e.jsx("input",{type:"date",name:"startDate",value:d.startDate,onChange:ee}),e.jsx("input",{type:"date",name:"endDate",value:d.endDate,onChange:ee})]})]}),d.clientType==="core_buddy"&&e.jsx("div",{className:"edit-row",children:e.jsxs("select",{name:"coreBuddyPlan",value:d.coreBuddyPlan,onChange:ee,children:[e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"premium",children:"Premium"})]})}),e.jsx("div",{className:"edit-row password-row",children:d.hasPortalAccess?e.jsx("div",{className:"portal-status has-access",children:"Has portal access"}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"password",value:d.password,onChange:ee,placeholder:"Set portal password (min 6 chars)"}),e.jsx("span",{className:"password-hint",children:"Set password to enable client portal"})]})}),d.clientType==="block"&&e.jsx("div",{className:"edit-row circuit-row",children:e.jsxs("label",{className:"circuit-access-toggle",children:[e.jsx("input",{type:"checkbox",checked:d.circuitAccess,onChange:i=>H(k=>({...k,circuitAccess:i.target.checked}))}),e.jsx("span",{children:"Circuit Class Access"})]})}),d.clientType!=="core_buddy"&&e.jsx("div",{className:"edit-row circuit-row",children:e.jsxs("label",{className:"circuit-access-toggle",children:[e.jsx("input",{type:"checkbox",checked:d.coreBuddyAccess,onChange:i=>H(k=>({...k,coreBuddyAccess:i.target.checked}))}),e.jsx("span",{children:"Core Buddy Access"})]})}),e.jsx("div",{className:"edit-row circuit-row",children:e.jsxs("label",{className:"circuit-access-toggle",children:[e.jsx("input",{type:"checkbox",checked:d.buddyEnabled,onChange:i=>H(k=>({...k,buddyEnabled:i.target.checked}))}),e.jsx("span",{children:"AI Buddy"})]})}),d.clientType==="block"&&e.jsx("div",{className:"edit-row circuit-row",children:e.jsxs("label",{className:"circuit-access-toggle",children:[e.jsx("input",{type:"checkbox",checked:d.isJunior,onChange:i=>H(k=>({...k,isJunior:i.target.checked}))}),e.jsx("span",{children:"Junior Client (Kids)"})]})}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{className:"save-edit-btn",onClick:()=>ge(s.id),children:"Save"}),e.jsx("button",{className:"cancel-edit-btn",onClick:()=>{P(null)},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"client-expand-info",children:[e.jsx("span",{className:"client-email",children:s.email}),e.jsx("span",{className:`status-badge ${s.status}`,children:s.status})]}),C?e.jsxs("div",{className:"client-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Block"}),e.jsxs("span",{className:"detail-value",children:[s.weeksInBlock," weeks"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Sessions"}),e.jsxs("span",{className:"detail-value",children:[oe(s)," / ",s.totalSessions," remaining"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Booked"}),e.jsxs("span",{className:"detail-value",children:[ue(s.id)," sessions"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Duration"}),e.jsxs("span",{className:"detail-value",children:[s.sessionDuration||45," min"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Start"}),e.jsx("span",{className:"detail-value",children:pe(s.startDate)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"End"}),e.jsx("span",{className:"detail-value",children:pe(s.endDate)})]})]}):s.clientType==="core_buddy"?e.jsxs("div",{className:"client-details circuit-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Plan"}),e.jsx("span",{className:"detail-value",children:s.coreBuddyPlan==="premium"?"Premium":"Free"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Joined"}),e.jsx("span",{className:"detail-value",children:pe(s.createdAt)})]})]}):e.jsxs("div",{className:"client-details circuit-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Type"}),e.jsx("span",{className:"detail-value",children:s.clientType==="circuit_vip"?"Monthly VIP":"Drop-in"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Strikes"}),e.jsxs("span",{className:"detail-value",children:[s.circuitStrikes||0,"/3"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Joined"}),e.jsx("span",{className:"detail-value",children:pe(s.createdAt)})]})]}),e.jsxs("div",{className:"client-actions",children:[C&&e.jsxs("button",{className:"action-btn notes",onClick:i=>{i.stopPropagation(),be(s)},children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Notes"]}),e.jsx("button",{className:"action-btn edit",onClick:i=>{i.stopPropagation(),Z(s)},children:"Edit"}),e.jsx("button",{className:"action-btn archive",onClick:i=>{i.stopPropagation(),we(s.id)},children:s.status==="archived"?"Reactivate":"Archive"}),e.jsx("button",{className:"action-btn delete",onClick:i=>{i.stopPropagation(),xe(s.id,s.name)},children:"Delete"})]})]})})]},s.id)};return e.jsxs("div",{className:"client-list",children:[e.jsxs("div",{className:"client-search",children:[e.jsxs("svg",{className:"client-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsx("input",{type:"text",placeholder:"Search clients...",value:Q,onChange:s=>X(s.target.value),className:"client-search-input"}),Q&&e.jsx("button",{className:"client-search-clear",onClick:()=>X(""),children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),e.jsx("div",{className:"client-type-filter",children:[{value:"all",label:"All",count:p.length},{value:"block",label:"Block",count:S.length},{value:"circuit",label:"Circuit",count:t.length},{value:"core_buddy",label:"Core Buddy",count:l.length},{value:"archived",label:"Archived",count:o.length}].map(s=>e.jsxs("button",{className:`client-filter-btn ${h===s.value?"active":""}`,onClick:()=>se(s.value),children:[s.label,e.jsx("span",{className:"client-filter-count",children:s.count})]},s.value))}),h==="all"?e.jsxs(e.Fragment,{children:[S.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"client-section-header",children:["Block Members ",e.jsx("span",{children:S.length})]}),S.map(w)]}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"client-section-header",children:["Circuit Members ",e.jsx("span",{children:t.length})]}),t.map(w)]}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"client-section-header",children:["Core Buddy Members ",e.jsx("span",{children:l.length})]}),l.map(w)]})]}):h==="archived"?e.jsx(e.Fragment,{children:o.length===0?e.jsx("div",{className:"client-section-empty",children:"No archived clients"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"client-section-header",children:["Archived Clients ",e.jsx("span",{children:o.length})]}),o.map(w)]})}):e.jsxs(e.Fragment,{children:[y.length===0&&e.jsxs("div",{className:"client-section-empty",children:["No ",h," clients found"]}),y.map(w)]}),T&&e.jsx("div",{className:"notes-modal-overlay",onClick:me,children:e.jsxs("div",{className:"notes-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"notes-modal-header",children:[e.jsxs("h3",{children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),T.clientName]}),e.jsx("button",{className:"notes-modal-close",onClick:me,children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),J==="list"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"notes-modal-body",children:le?e.jsx("div",{className:"notes-loading",children:"Loading notes..."}):F.length===0?e.jsxs("div",{className:"notes-empty",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",width:"40",height:"40",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]}),e.jsx("p",{children:"No session notes yet"}),e.jsx("span",{children:"Add notes after each session"})]}):e.jsx("div",{className:"notes-list",children:F.map(s=>e.jsxs("div",{className:"note-card",children:[e.jsxs("div",{className:"note-card-header",children:[e.jsx("span",{className:"note-date",children:s.date}),e.jsx("button",{className:"note-delete-btn",onClick:()=>f(s.id),children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]})})]}),s.sessionNotes&&e.jsxs("div",{className:"note-section",children:[e.jsx("span",{className:"note-section-label",children:"Session Notes"}),e.jsx("p",{children:s.sessionNotes})]}),s.whatWentWell&&e.jsxs("div",{className:"note-section went-well",children:[e.jsx("span",{className:"note-section-label",children:"What Went Well"}),e.jsx("p",{children:s.whatWentWell})]}),s.whatWentWrong&&e.jsxs("div",{className:"note-section went-wrong",children:[e.jsx("span",{className:"note-section-label",children:"What Went Wrong"}),e.jsx("p",{children:s.whatWentWrong})]}),s.whatsNext&&e.jsxs("div",{className:"note-section whats-next",children:[e.jsx("span",{className:"note-section-label",children:"What's Next"}),e.jsx("p",{children:s.whatsNext})]})]},s.id))})}),e.jsx("div",{className:"notes-modal-footer",children:e.jsxs("button",{className:"notes-add-btn",onClick:()=>re("add"),children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Session Notes"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"notes-modal-body",children:e.jsxs("div",{className:"notes-form",children:[e.jsxs("div",{className:"notes-form-group",children:[e.jsx("label",{children:"Session Notes"}),e.jsx("textarea",{value:E.sessionNotes,onChange:s=>N(c=>({...c,sessionNotes:s.target.value})),placeholder:"Overview of the session...",rows:"3"})]}),e.jsxs("div",{className:"notes-form-group went-well",children:[e.jsxs("label",{children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"What Went Well"]}),e.jsx("textarea",{value:E.whatWentWell,onChange:s=>N(c=>({...c,whatWentWell:s.target.value})),placeholder:"Positives from the session...",rows:"2"})]}),e.jsxs("div",{className:"notes-form-group went-wrong",children:[e.jsxs("label",{children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),"What Went Wrong"]}),e.jsx("textarea",{value:E.whatWentWrong,onChange:s=>N(c=>({...c,whatWentWrong:s.target.value})),placeholder:"Areas to improve...",rows:"2"})]}),e.jsxs("div",{className:"notes-form-group whats-next",children:[e.jsxs("label",{children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})}),"What's Next"]}),e.jsx("textarea",{value:E.whatsNext,onChange:s=>N(c=>({...c,whatsNext:s.target.value})),placeholder:"Goals for next session...",rows:"2"})]})]})}),e.jsxs("div",{className:"notes-modal-footer",children:[e.jsx("button",{className:"notes-cancel-btn",onClick:()=>re("list"),children:"Back"}),e.jsx("button",{className:"notes-save-btn",onClick:n,disabled:z,children:z?"Saving...":"Save Notes"})]})]})]})})]})}const ss=["Mon","Tue","Wed","Thu","Fri"],ts=m=>{const B=new Date(m),g=B.getDay(),A=B.getDate()-g+(g===0?-6:1);return B.setDate(A),Te.map((R,V)=>{const u=new Date(B);return u.setDate(B.getDate()+V),u})};function as(){const[m,B]=j.useState(new Date),[g,A]=j.useState([]),[R,V]=j.useState([]),[u,P]=j.useState([]),[d,H]=j.useState([]),[M,L]=j.useState([]),[Q,X]=j.useState([]),[h,se]=j.useState(null),[T,U]=j.useState(null),[E,N]=j.useState(!1),[F,O]=j.useState(!0),[le,r]=j.useState("");j.useEffect(()=>{A(ts(m))},[m]),j.useEffect(()=>{pe()},[]);const z=t=>{se(t),N(!1),U(null)},I=()=>{if(!h)return null;const t=h.startDate?.toDate?h.startDate.toDate():new Date(h.startDate),l=h.endDate?.toDate?h.endDate.toDate():new Date(h.endDate),o=g[0];if(!o)return null;const y=10080*60*1e3,x=Math.floor((o-t)/y)+1,w=h.weeksInBlock||Math.ceil((l-t)/y),s=o>=t&&o<=l;return{startDate:t,endDate:l,weekNumber:x,totalWeeks:w,isWithinBlock:s}},J=()=>{if(h?.startDate){const t=h.startDate.toDate?h.startDate.toDate():new Date(h.startDate);B(t),U(null)}},re=()=>{if(h?.endDate){const t=h.endDate.toDate?h.endDate.toDate():new Date(h.endDate);B(t),U(null)}},ce=t=>{const l=new Date,o=ne(l),y=`${l.getHours().toString().padStart(2,"0")}:${l.getMinutes().toString().padStart(2,"0")}`;return u.filter(x=>x.clientId!==t?!1:x.date<o||x.date===o&&x.time<y).length},ve=t=>{const l=ce(t.id);return(t.totalSessions||0)-l},oe=t=>{const l=new Date,o=l.getFullYear(),y=(l.getMonth()+1).toString().padStart(2,"0"),x=l.getDate().toString().padStart(2,"0"),w=`${o}-${y}-${x}`,s=`${l.getHours().toString().padStart(2,"0")}:${l.getMinutes().toString().padStart(2,"0")}`;return u.filter(c=>c.clientId!==t?!1:c.date>w||c.date===w&&c.time>=s).length},ue=t=>{const l=new Date,o=ne(l),y=`${l.getHours().toString().padStart(2,"0")}:${l.getMinutes().toString().padStart(2,"0")}`;return t.date<o||t.date===o&&t.time<y},pe=async()=>{try{const l=(await ie(G($,"clients"))).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.status==="active").sort((i,k)=>i.name.localeCompare(k.name));V(l);const y=(await ie(G($,"sessions"))).docs.map(i=>({id:i.id,...i.data()}));P(y);const w=(await ie(G($,"holidays"))).docs.map(i=>({id:i.id,...i.data()}));H(w);const c=(await ie(G($,"blockedTimes"))).docs.map(i=>({id:i.id,...i.data()}));L(c);const C=(await ie(G($,"openedSlots"))).docs.map(i=>({id:i.id,...i.data()}));X(C)}catch(t){console.error("Error fetching data:",t)}O(!1)},xe=t=>{const l=new Date(m);l.setDate(l.getDate()+t*7),B(l),U(null)},de=()=>{B(new Date),U(null)},Z=t=>{const l=ne(t);return d.some(o=>o.date===l)},ee=(t,l)=>{const o=ne(t);return M.some(y=>y.date===o&&y.time===l)},ge=(t,l)=>{const o=ne(t);return Q.some(y=>y.date===o&&y.time===l)},we=t=>{const l=Te[t.getDay()-1];return l&&Re[l]?.defaultBlocked},be=async(t,l)=>{const o=ne(t);if(we(t)){const x=Q.find(w=>w.date===o&&w.time===l);try{if(x)await ye(K($,"openedSlots",x.id)),X(Q.filter(w=>w.id!==x.id));else{const w=await ke(G($,"openedSlots"),{date:o,time:l,createdAt:ae.now()});X([...Q,{id:w.id,date:o,time:l}])}}catch(w){console.error("Error toggling opened slot:",w),alert("Failed to update time slot")}return}const y=M.find(x=>x.date===o&&x.time===l);try{if(y)await ye(K($,"blockedTimes",y.id)),L(M.filter(x=>x.id!==y.id));else{const x=await ke(G($,"blockedTimes"),{date:o,time:l,createdAt:ae.now()});L([...M,{id:x.id,date:o,time:l}])}}catch(x){console.error("Error toggling blocked time:",x),alert("Failed to update time slot")}},me=t=>{const l=ne(t);return u.filter(o=>o.date===l)},n=(t,l)=>{const o=ne(t);return u.find(y=>y.date===o&&y.time===l)},f=(t,l)=>{const o=ne(t),y=De(l);return u.find(x=>{if(x.date!==o)return!1;const w=De(x.time),s=w+(x.duration||45);return y>=w&&y<s})},b=(t,l,o)=>{const y=Te[t.getDay()-1];if(!y||Z(t))return!1;const x=Re[y],w=Math.ceil(o/15);if(x.defaultBlocked)for(let W=0;W<w;W++){const te=Ae(l,W*15);if(!ge(t,te))return!1}else for(let W=0;W<w;W++){const te=Ae(l,W*15);if(ee(t,te))return!1}const s=ne(t);if(u.find(W=>W.date===s&&W.time===l))return!1;const v=Ae(l,o),C=x.morning&&v<=x.morning.end,i=x.afternoon&&v<=x.afternoon.end,k=x.morning&&l>=x.morning.start&&l<x.morning.end,Y=x.afternoon&&l>=x.afternoon.start&&l<x.afternoon.end;if(k&&!C||Y&&!i)return!1;for(const W of u){if(W.date!==s)continue;const te=De(W.time),je=te+(W.duration||45),fe=De(l),Ne=fe+o;if(fe<je&&Ne>te)return!1}return!0},D=async(t,l)=>{const o=f(t,l);if(o){if(ue(o))return;if(window.confirm(`Cancel ${o.clientName}'s session at ${Pe(o.time)}?`))try{await ye(K($,"sessions",o.id)),P(u.filter(w=>w.id!==o.id))}catch(w){console.error("Error cancelling session:",w),alert("Failed to cancel session")}return}if(!h){alert("Please select a client first");return}if(!b(t,l,h.sessionDuration||45)){alert("This slot is not available for this client's session duration");return}const y=oe(h.id);if(ce(h.id)+y>=h.totalSessions){alert(`${h.name} has used all ${h.totalSessions} sessions in their package`);return}try{const w=ne(t),s={clientId:h.id,clientName:h.name,date:w,time:l,duration:h.sessionDuration||45,createdAt:ae.now()},c=await ke(G($,"sessions"),s);P([...u,{id:c.id,...s}])}catch(w){console.error("Error booking session:",w),alert("Failed to book session")}},_=async()=>{if(!h)return;const t=h.startDate?.toDate?h.startDate.toDate():new Date(h.startDate),l=h.endDate?.toDate?h.endDate.toDate():new Date(h.endDate),o=u.filter(v=>v.clientId!==h.id?!1:g.some(C=>ne(C)===v.date));if(o.length===0){alert("No sessions in current week to repeat. Book some sessions first, then use this button.");return}const y=h.weeksInBlock||Math.ceil((l-t)/(10080*60*1e3)),x=o.map(v=>({dayOfWeek:new Date(v.date).getDay(),time:v.time}));let w=[];const s=oe(h.id)+ce(h.id);for(let v=0;v<y;v++){const C=new Date(t);C.setDate(C.getDate()+v*7);const i=new Date(C),k=i.getDay(),Y=i.getDate()-k+(k===0?-6:1);i.setDate(Y);for(const W of x){const te=new Date(i),je=W.dayOfWeek===0?6:W.dayOfWeek-1;te.setDate(i.getDate()+je);const fe=ne(te);u.some(Ne=>Ne.clientId===h.id&&Ne.date===fe&&Ne.time===W.time)||te<t||te>l||d.some(Ne=>Ne.date===fe)||w.push({dateKey:fe,time:W.time,sessionDate:te})}}const c=s+w.length;if(c>h.totalSessions){alert(`This would create ${w.length} new sessions (${c} total), but client only has ${h.totalSessions} sessions in their package.

You can still book ${h.totalSessions-s} more sessions.`);return}if(w.length===0){alert("All weeks already have sessions booked for this pattern.");return}if(window.confirm(`This will create ${w.length} new sessions across the block.

(${s} existing + ${w.length} new = ${c} total)

Continue?`))try{const v=[];for(const C of w){const i={clientId:h.id,clientName:h.name,date:C.dateKey,time:C.time,duration:h.sessionDuration||45,createdAt:ae.now()},k=await ke(G($,"sessions"),i);v.push({id:k.id,...i})}P([...u,...v]),alert(`Created ${v.length} new sessions!`)}catch(v){console.error("Error repeating weekly:",v),alert("Failed to repeat sessions")}},q=async t=>{const l=ne(t),o=d.find(y=>y.date===l);try{if(o)await ye(K($,"holidays",o.id)),H(d.filter(y=>y.id!==o.id));else{const y=await ke(G($,"holidays"),{date:l,createdAt:ae.now()});H([...d,{id:y.id,date:l}])}}catch(y){console.error("Error toggling day availability:",y),alert("Failed to update day availability")}};if(F)return e.jsx("div",{className:"calendar-loading",children:"Loading calendar..."});const a=g[0],p=g[4],S=a&&p?`${a.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${p.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return e.jsxs("div",{className:"calendar",children:[e.jsxs("div",{className:"calendar-header",children:[e.jsxs("div",{className:"calendar-nav",children:[e.jsx("button",{onClick:()=>xe(-1),children:"←"}),e.jsx("button",{onClick:de,children:"Today"}),e.jsx("button",{onClick:()=>xe(1),children:"→"})]}),e.jsx("h3",{children:S})]}),e.jsxs("div",{className:"client-selector",children:[e.jsx("span",{className:"selector-label",children:"Booking for:"}),h?e.jsxs("div",{className:"selected-client",children:[e.jsxs("div",{className:"selected-info",children:[e.jsx("strong",{children:h.name}),e.jsxs("span",{children:[h.sessionDuration||45,"min • ",ve(h),"/",h.totalSessions," remaining"]}),e.jsxs("span",{className:"booked-info",children:[oe(h.id)," booked"]})]}),e.jsx("button",{onClick:()=>se(null),children:"Change"})]}):e.jsx("button",{className:"select-client-btn",onClick:()=>N(!0),children:"Select Client"})]}),h&&h.startDate&&h.endDate&&(()=>{const t=I();return t?e.jsxs("div",{className:"block-nav",children:[e.jsx("button",{onClick:J,children:"← Block Start"}),e.jsx("span",{className:"block-range",children:t.isWithinBlock?`Week ${t.weekNumber} of ${t.totalWeeks}`:g[0]<t.startDate?"Before block":"After block"}),e.jsx("button",{onClick:re,children:"Block End →"})]}):null})(),h&&e.jsxs("div",{className:"repeat-weekly-section",children:[e.jsx("button",{className:"repeat-weekly-btn",onClick:_,children:"Repeat This Week's Schedule For All Weeks"}),e.jsx("span",{className:"repeat-hint",children:"Copies current week's sessions to all weeks in block"})]}),e.jsx("div",{className:"day-cards",children:g.map((t,l)=>{const o=me(t),y=ne(t)===ne(new Date),x=Z(t);return e.jsxs("div",{className:`day-card ${T===l?"selected":""} ${y?"today":""} ${x?"holiday":""}`,onClick:()=>U(T===l?null:l),children:[e.jsxs("div",{className:"day-card-header",children:[e.jsx("span",{className:"day-name",children:ss[l]}),e.jsx("span",{className:"day-date",children:t.getDate()})]}),x?e.jsx("div",{className:"day-card-status holiday",children:"Unavailable"}):e.jsxs("div",{className:"day-card-status",children:[o.length," session",o.length!==1?"s":""]})]},l)})}),T!==null&&g[T]&&e.jsxs("div",{className:"time-panel",children:[e.jsxs("div",{className:"time-panel-header",children:[e.jsxs("h4",{children:[Xe[T]," ",g[T].getDate()]}),e.jsx("button",{className:"close-panel",onClick:()=>U(null),children:"×"})]}),e.jsx("div",{className:"availability-toggle",children:e.jsx("button",{className:`toggle-availability-btn ${Z(g[T])?"unavailable":"available"}`,onClick:()=>q(g[T]),children:Z(g[T])?"Mark Day Available":"Mark Day Unavailable"})}),Z(g[T])?e.jsxs("div",{className:"day-unavailable-message",children:[e.jsx("p",{children:"This day is marked as unavailable"}),e.jsx("span",{children:"Tap the button above to make it available again"})]}):e.jsxs("div",{className:"time-slots",children:[we(g[T])&&e.jsx("div",{className:"default-blocked-notice",children:"Flex day — slots are closed by default. Tap the toggle to open slots."}),Ze(Te[T]).map(({time:t,period:l},o,y)=>{const x=n(g[T],t),w=f(g[T],t),s=!!w,c=!x&&!!w,v=w?ue(w):!1,C=we(g[T]),i=C?!ge(g[T],t):ee(g[T],t),k=C&&ge(g[T],t),Y=h&&!s&&b(g[T],t,h.sessionDuration||45),W=o===0||y[o-1]?.period!==l;return e.jsxs("div",{children:[W&&e.jsx("div",{className:"period-label",children:l==="morning"?"Morning":"Afternoon"}),e.jsxs("div",{className:"time-slot-row",children:[e.jsxs("button",{className:`time-slot ${s&&v?"completed":""} ${s&&!v?"booked":""} ${c?"booked-continuation":""} ${i&&!s?"blocked":""} ${k&&!s?"opened":""} ${Y?"available":""} ${!s&&!i&&!Y&&h?"unavailable":""}`,onClick:()=>!v&&(!i||s)&&D(g[T],t),disabled:v||i&&!s,children:[e.jsx("span",{className:"slot-time",children:Pe(t)}),x&&v?e.jsxs("span",{className:"slot-done",children:[x.clientName," ✓"]}):x?e.jsxs("span",{className:"slot-client",children:[x.clientName," (",x.duration,"m)"]}):c&&v?e.jsxs("span",{className:"slot-done",children:[w.clientName," ↑"]}):c?e.jsxs("span",{className:"slot-client",children:[w.clientName," ↑"]}):i?e.jsx("span",{className:"slot-blocked",children:C?"Closed":"Blocked"}):Y?e.jsx("span",{className:"slot-available",children:"Available"}):h?e.jsx("span",{className:"slot-unavailable",children:"Unavailable"}):k?e.jsx("span",{className:"slot-available",children:"Open"}):e.jsx("span",{className:"slot-empty",children:"Select client to book"})]}),e.jsx("button",{className:`block-toggle-btn ${C?k?"is-opened":"":i?"is-blocked":""}`,onClick:()=>be(g[T],t),disabled:v||!!s,title:C?k?"Close this slot":"Open this slot":i?"Unblock this time":"Block this time",children:C?k?"✓":"+":i?"✓":"✕"})]})]},t)})]})]}),E&&e.jsx("div",{className:"modal-overlay",onClick:()=>{N(!1),r("")},children:e.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Select Client"}),e.jsx("button",{className:"close-btn",onClick:()=>{N(!1),r("")},children:"×"})]}),e.jsx("div",{className:"client-search-wrapper",children:e.jsx("input",{className:"client-search-input",type:"text",placeholder:"Search by name...",value:le,onChange:t=>r(t.target.value),autoFocus:!0})}),e.jsx("div",{className:"client-list-picker",children:R.length===0?e.jsx("p",{className:"no-items",children:"No active clients"}):(()=>{const t={block:"Block",core_buddy:"Core Buddy",circuit_vip:"Circuit VIP",circuit_dropin:"Circuit Drop-in"},l=R.filter(o=>o.name.toLowerCase().includes(le.toLowerCase()));return l.length===0?e.jsxs("p",{className:"no-items",children:['No clients match "',le,'"']}):l.map(o=>{const y=o.startDate&&o.endDate,x=y?o.startDate?.toDate?o.startDate.toDate():new Date(o.startDate):null,w=y?o.endDate?.toDate?o.endDate.toDate():new Date(o.endDate):null,s=ve(o),c=oe(o.id);return e.jsxs("button",{className:"client-option",onClick:()=>{z(o),r("")},children:[e.jsxs("div",{className:"client-option-header",children:[e.jsx("strong",{children:o.name}),o.clientType&&e.jsx("span",{className:"client-type-badge",children:t[o.clientType]||o.clientType})]}),e.jsxs("span",{children:[o.sessionDuration||45,"min • ",s,"/",o.totalSessions," remaining • ",c," booked"]}),x&&w&&e.jsxs("span",{className:"client-dates",children:[x.toLocaleDateString("en-GB",{day:"numeric",month:"short"})," – ",w.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]},o.id)})})()})]})})]})}const Me=m=>{const[B,g]=m.split(":"),A=parseInt(B),R=A>=12?"pm":"am";return`${A>12?A-12:A===0?12:A}:${g}${R}`},Se=m=>{const B=m.getFullYear(),g=(m.getMonth()+1).toString().padStart(2,"0"),A=m.getDate().toString().padStart(2,"0");return`${B}-${g}-${A}`},Oe=m=>m===Se(new Date),ns=m=>{const B=new Date;return B.setDate(B.getDate()+1),m===Se(B)},Le=m=>Oe(m)?"Today":ns(m)?"Tomorrow":new Date(m).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"}),Fe=m=>{const B=new Date,g=Se(B),A=`${B.getHours().toString().padStart(2,"0")}:${B.getMinutes().toString().padStart(2,"0")}`;if(m.date<g)return!0;if(m.date===g){const R=_e(m.time)+(m.duration||45);return _e(A)>=R}return!1},_e=m=>{const[B,g]=m.split(":").map(Number);return B*60+g};function is(){const[m,B]=j.useState([]),[g,A]=j.useState(!0),[R,V]=j.useState(new Date),[u,P]=j.useState("");j.useEffect(()=>{d();const N=setInterval(()=>{V(new Date)},6e4);return()=>clearInterval(N)},[]);const d=async()=>{try{const F=(await ie(G($,"sessions"))).docs.map(r=>({id:r.id,...r.data()})),O=Se(new Date),le=F.filter(r=>r.date>=O).sort((r,z)=>r.date!==z.date?r.date.localeCompare(z.date):r.time.localeCompare(z.time));B(le)}catch(N){console.error("Error fetching sessions:",N)}A(!1)},H=async N=>{if(window.confirm(`Cancel ${N.clientName}'s session at ${Me(N.time)} on ${Le(N.date)}?`))try{await ye(K($,"sessions",N.id)),B(m.filter(F=>F.id!==N.id))}catch(F){console.error("Error cancelling session:",F),alert("Failed to cancel session")}};if(g)return e.jsx("div",{className:"schedule-loading",children:"Loading schedule..."});const M=m.reduce((N,F)=>{const O=F.date;return N[O]||(N[O]=[]),N[O].push(F),N},{}),L=Object.keys(M).sort(),Q=Se(new Date),X=M[Q]||[],h=X.filter(N=>Fe(N)).length,se=X.length-h,T=m.find(N=>!Fe(N)),E=(()=>{if(!T)return null;const N=new Date,F=Se(N);if(T.date!==F)return null;const[O,le]=T.time.split(":").map(Number),r=O*60+le,z=N.getHours()*60+N.getMinutes(),I=r-z;return I<=0||I>180?null:I<60?`${I}m`:`${Math.floor(I/60)}h ${I%60}m`})();return e.jsxs("div",{className:"schedule",children:[e.jsxs("div",{className:"today-summary",children:[e.jsx("h3",{children:"Today's Sessions"}),e.jsx("div",{className:"today-count",children:X.length===0?e.jsx("span",{className:"no-sessions",children:"No sessions today"}):e.jsxs("div",{className:"today-stats",children:[e.jsxs("span",{className:"completed-count",children:[h," completed"]}),e.jsxs("span",{className:"remaining-count",children:[se," remaining"]})]})})]}),T&&E&&e.jsxs("div",{className:"next-session-banner",children:[e.jsx("div",{className:"next-session-label",children:"Up next"}),e.jsxs("div",{className:"next-session-info",children:[e.jsx("span",{className:"next-session-name",children:T.clientName}),e.jsx("span",{className:"next-session-time",children:Me(T.time)})]}),e.jsx("div",{className:"next-session-countdown",children:E})]}),L.length===0?e.jsx("div",{className:"no-upcoming",children:e.jsx("p",{children:"No upcoming sessions booked"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"schedule-nav",children:e.jsxs("select",{className:"date-jump-select",value:u,onChange:N=>{const F=N.target.value;P(F),F&&(document.getElementById(`date-${F}`)?.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>P(""),600))},children:[e.jsx("option",{value:"",children:"Jump to date..."}),L.map(N=>e.jsxs("option",{value:N,children:[Le(N)," (",M[N].length,")"]},N))]})}),e.jsx("div",{className:"sessions-list",children:L.map(N=>e.jsxs("div",{id:`date-${N}`,className:`date-group ${Oe(N)?"today":""}`,children:[e.jsxs("div",{className:"date-header",children:[e.jsx("span",{className:"date-label",children:Le(N)}),e.jsxs("span",{className:"date-count",children:[M[N].length," session",M[N].length!==1?"s":""]})]}),e.jsx("div",{className:"date-sessions",children:M[N].map(F=>{const O=Fe(F);return e.jsxs("div",{className:`session-card ${O?"completed":""}`,children:[e.jsx("div",{className:"session-time",children:Me(F.time)}),e.jsxs("div",{className:"session-details",children:[e.jsx("strong",{children:F.clientName}),e.jsxs("span",{children:[F.duration,"min session"]})]}),O?e.jsx("div",{className:"completed-badge",children:"✓"}):e.jsx("button",{className:"cancel-session-btn",onClick:()=>H(F),children:"Cancel"})]},F.id)})})]},N))})]})]})}const ls={sedentary:"Sedentary (little to no exercise)",light:"Lightly Active (1-2 days/week)",moderate:"Moderately Active (3-4 days/week)",active:"Very Active (5+ days/week)",athlete:"Athlete/Highly Active"},rs={"less-5":"Less than 5 hours","5-6":"5-6 hours","7-8":"7-8 hours","more-8":"More than 8 hours"},os={low:"Low",moderate:"Moderate",high:"High","very-high":"Very High"},cs=[{key:"q1HeartCondition",text:"Has your doctor ever said that you have a heart condition and that you should only do physical activity recommended by a doctor?"},{key:"q2ChestPain",text:"Do you feel pain in your chest when you do physical activity?"},{key:"q3ChestPainLastMonth",text:"In the past month, have you had chest pain when you were not doing physical activity?"},{key:"q4Balance",text:"Do you lose your balance because of dizziness or do you ever lose consciousness?"},{key:"q5BoneJoint",text:"Do you have a bone or joint problem that could be made worse by a change in your physical activity?"},{key:"q6BloodPressure",text:"Is your doctor currently prescribing drugs for your blood pressure or heart condition?"},{key:"q7OtherReason",text:"Do you know of any other reason why you should not do physical activity?"}];function ds(){const[m,B]=j.useState([]),[g,A]=j.useState(!0),[R,V]=j.useState(null),[u,P]=j.useState(null),[d,H]=j.useState("all"),[M,L]=j.useState("");j.useEffect(()=>{Q()},[]);const Q=async()=>{try{const z=(await ie(G($,"clients"))).docs.map(I=>({id:I.id,...I.data()}));z.sort((I,J)=>(I.name||"").localeCompare(J.name||"")),B(z)}catch(r){console.error("Error fetching clients:",r)}A(!1)},X=r=>!!r.welcomeForm?.completedAt,h=r=>!!r.parqForm?.completedAt,se=r=>X(r)||h(r),T=r=>X(r)&&h(r),U=r=>r?(r.toDate?r.toDate():new Date(r)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",E=m.filter(r=>!M||r.name?.toLowerCase().includes(M.toLowerCase())?d==="all"?!0:d==="completed"?T(r):d==="partial"?se(r)&&!T(r):d==="pending"?!se(r):!0:!1),N=m.filter(T).length,F=m.filter(r=>se(r)&&!T(r)).length,O=m.filter(r=>!se(r)).length,le=r=>{R===r?(V(null),P(null)):(V(r),P(null))};return g?e.jsx("div",{className:"forms-loading",children:"Loading form submissions..."}):e.jsxs("div",{className:"form-submissions",children:[e.jsxs("div",{className:"forms-stats",children:[e.jsxs("div",{className:"forms-stat",children:[e.jsx("span",{className:"stat-number",children:N}),e.jsx("span",{className:"stat-label",children:"Complete"})]}),e.jsxs("div",{className:"forms-stat partial",children:[e.jsx("span",{className:"stat-number",children:F}),e.jsx("span",{className:"stat-label",children:"Partial"})]}),e.jsxs("div",{className:"forms-stat pending",children:[e.jsx("span",{className:"stat-number",children:O}),e.jsx("span",{className:"stat-label",children:"Pending"})]})]}),e.jsxs("div",{className:"forms-search",children:[e.jsxs("svg",{className:"forms-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]}),e.jsx("input",{type:"text",className:"forms-search-input",placeholder:"Search clients...",value:M,onChange:r=>L(r.target.value)}),M&&e.jsx("button",{className:"forms-search-clear",onClick:()=>L(""),children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),e.jsxs("div",{className:"forms-filter",children:[e.jsxs("button",{className:`forms-filter-btn ${d==="all"?"active":""}`,onClick:()=>H("all"),children:["All ",e.jsx("span",{className:"forms-filter-count",children:m.length})]}),e.jsxs("button",{className:`forms-filter-btn ${d==="completed"?"active":""}`,onClick:()=>H("completed"),children:["Complete ",e.jsx("span",{className:"forms-filter-count",children:N})]}),e.jsxs("button",{className:`forms-filter-btn ${d==="partial"?"active":""}`,onClick:()=>H("partial"),children:["Partial ",e.jsx("span",{className:"forms-filter-count",children:F})]}),e.jsxs("button",{className:`forms-filter-btn ${d==="pending"?"active":""}`,onClick:()=>H("pending"),children:["Pending ",e.jsx("span",{className:"forms-filter-count",children:O})]})]}),E.length===0?e.jsxs("div",{className:"forms-empty",children:[e.jsx("div",{className:"forms-empty-icon",children:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),e.jsx("path",{d:"M35 35h30M35 50h30M35 65h20"}),e.jsx("circle",{cx:"70",cy:"70",r:"18",fill:"var(--bg-card)",strokeWidth:"3"}),e.jsx("path",{d:"M63 70h14M70 63v14",strokeWidth:"3",strokeLinecap:"round"})]})}),e.jsx("p",{children:"No clients match this filter"}),e.jsx("span",{children:"Try adjusting your search or filter"})]}):e.jsx("div",{className:"forms-client-list",children:E.map(r=>{const z=R===r.id,I=X(r),J=h(r);return e.jsxs("div",{className:`forms-client-card ${z?"expanded":""}`,children:[e.jsxs("div",{className:"forms-client-row",onClick:()=>le(r.id),children:[e.jsxs("div",{className:"forms-client-left",children:[e.jsx("div",{className:"forms-client-initial",children:(r.name||"?")[0].toUpperCase()}),e.jsxs("div",{className:"forms-client-info",children:[e.jsx("h3",{children:r.name||"Unknown"}),e.jsxs("div",{className:"forms-badges",children:[e.jsxs("span",{className:`form-badge ${I?"done":"not-done"}`,children:[I?"✓":"○"," Welcome"]}),e.jsxs("span",{className:`form-badge ${J?"done":"not-done"}`,children:[J?"✓":"○"," PAR-Q"]})]})]})]}),e.jsx("svg",{className:`forms-chevron ${z?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})]}),z&&e.jsx("div",{className:"forms-expand-panel",children:!I&&!J?e.jsxs("div",{className:"forms-no-data",children:[e.jsx("p",{children:"No forms submitted yet"}),e.jsx("span",{children:"This client hasn't completed any forms"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"forms-toggle",children:[I&&e.jsx("button",{className:`forms-toggle-btn ${u==="welcome"||!u&&I?"active":""}`,onClick:()=>P("welcome"),children:"Welcome Questionnaire"}),J&&e.jsx("button",{className:`forms-toggle-btn ${u==="parq"||!u&&!I&&J?"active":""}`,onClick:()=>P("parq"),children:"PAR-Q Health Screening"})]}),(u==="welcome"||!u&&I)&&I&&e.jsxs("div",{className:"form-data",children:[e.jsxs("div",{className:"form-data-header",children:[e.jsx("span",{className:"form-data-title",children:"Welcome Questionnaire"}),e.jsxs("span",{className:"form-data-date",children:["Submitted ",U(r.welcomeForm.completedAt)]})]}),r.welcomeForm.fitnessGoals&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Fitness Goals"}),e.jsx("p",{children:r.welcomeForm.fitnessGoals})]}),r.welcomeForm.currentActivityLevel&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Activity Level"}),e.jsx("p",{children:ls[r.welcomeForm.currentActivityLevel]||r.welcomeForm.currentActivityLevel})]}),r.welcomeForm.exerciseHistory&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Exercise History"}),e.jsx("p",{children:r.welcomeForm.exerciseHistory})]}),r.welcomeForm.injuries&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Injuries"}),e.jsx("p",{children:r.welcomeForm.injuries})]}),r.welcomeForm.medicalConditions&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Medical Conditions"}),e.jsx("p",{children:r.welcomeForm.medicalConditions})]}),r.welcomeForm.sleepHours&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Sleep"}),e.jsx("p",{children:rs[r.welcomeForm.sleepHours]||r.welcomeForm.sleepHours})]}),r.welcomeForm.stressLevel&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Stress Level"}),e.jsx("p",{children:os[r.welcomeForm.stressLevel]||r.welcomeForm.stressLevel})]}),r.welcomeForm.dietaryInfo&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Diet / Nutrition"}),e.jsx("p",{children:r.welcomeForm.dietaryInfo})]}),r.welcomeForm.availability&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Availability"}),e.jsx("p",{children:r.welcomeForm.availability})]}),r.welcomeForm.additionalInfo&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Additional Info"}),e.jsx("p",{children:r.welcomeForm.additionalInfo})]})]}),u==="parq"&&J&&e.jsxs("div",{className:"form-data",children:[e.jsxs("div",{className:"form-data-header",children:[e.jsx("span",{className:"form-data-title",children:"PAR-Q Health Screening"}),e.jsxs("span",{className:"form-data-date",children:["Submitted ",U(r.parqForm.completedAt)]})]}),e.jsx("div",{className:"parq-results",children:cs.map(re=>{const ce=r.parqForm[re.key];return e.jsxs("div",{className:`parq-result-item ${ce?"flagged":""}`,children:[e.jsx("span",{className:`parq-answer ${ce?"yes":"no"}`,children:ce?"YES":"NO"}),e.jsx("span",{className:"parq-question-text",children:re.text})]},re.key)})}),r.parqForm.additionalDetails&&e.jsxs("div",{className:"form-data-field",children:[e.jsx("label",{children:"Additional Details"}),e.jsx("p",{children:r.parqForm.additionalDetails})]}),e.jsx("div",{className:"parq-declaration-status",children:e.jsx("span",{className:r.parqForm.declaration?"declared":"not-declared",children:r.parqForm.declaration?"✓ Declaration signed":"✗ Declaration not signed"})})]})]})})]},r.id)})})]})}const We=m=>`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`,qe=m=>new Date(m+"T09:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),He=()=>{const m=new Date;let g=(6-m.getDay()+7)%7;if(g===0){const R=new Date(m);R.setHours(9,45,0,0),m>R&&(g=7)}const A=new Date(m);return A.setDate(m.getDate()+g),A},$e=m=>m==="circuit_vip"?"VIP":m==="circuit_dropin"?"Drop-in":"Block",Be=m=>m==="circuit_vip"?"vip":m==="circuit_dropin"?"dropin":"block";function ms(){const[m,B]=j.useState(!0),[g,A]=j.useState([]),[R,V]=j.useState([]),[u,P]=j.useState(null),[d,H]=j.useState("upcoming"),[M,L]=j.useState(!1),[Q,X]=j.useState(null),[h,se]=j.useState(!1),[T,U]=j.useState(!1),E=j.useCallback((n,f="info")=>{X({message:n,type:f}),setTimeout(()=>X(null),4e3)},[]);j.useEffect(()=>{N()},[]);const N=async()=>{try{const f=(await ie(G($,"circuitSessions"))).docs.map(a=>({id:a.id,...a.data()}));f.sort((a,p)=>p.date.localeCompare(a.date)),A(f);const D=(await ie(G($,"clients"))).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.clientType==="circuit_vip"||a.clientType==="circuit_dropin"||a.circuitAccess===!0);V(D);const _=We(He());let q=f.find(a=>a.date===_);if(!q){const a=D.filter(t=>t.clientType==="circuit_vip"&&t.status==="active"),p=[];for(let t=0;t<8;t++)t<a.length?p.push({slotNumber:t+1,memberId:a[t].id,memberName:a[t].name,memberType:"circuit_vip",status:"confirmed",bookedAt:ae.now()}):p.push({slotNumber:t+1,memberId:null,memberName:null,memberType:null,status:"available"});const S={date:_,time:"09:00",endTime:"09:45",maxCapacity:8,slots:p,waitlist:[],createdAt:ae.now()};await Ye(K($,"circuitSessions",_),S),q={id:_,...S},f.unshift(q),A([...f])}q?P(q):f.length>0&&P(f[0])}catch(n){console.error("Error loading circuit data:",n),E("Failed to load circuit data","error")}B(!1)},F=async n=>{if(!(!u||M)&&window.confirm("Remove this member from the slot?")){L(!0);try{const f=[...u.slots],b=f.findIndex(S=>S.slotNumber===n);if(b===-1){L(!1);return}const D=f[b],_=D.memberType==="circuit_vip";let q=[...u.waitlist||[]];if(q.length>0){const S=q.shift();f[b]={slotNumber:n,memberId:S.memberId,memberName:S.memberName,memberType:S.memberType,status:"confirmed",bookedAt:ae.now()},E(`Slot given to ${S.memberName} from waitlist`,"success")}else f[b]={slotNumber:n,memberId:null,memberName:null,memberType:null,status:"available"},E("Member removed from slot","success");const a={slots:f,waitlist:q};if(_&&D.memberId){const S=u.vipOptOuts||[];S.includes(D.memberId)||(a.vipOptOuts=[...S,D.memberId])}await he(K($,"circuitSessions",u.id),a);const p={...u,...a};P(p),A(S=>S.map(t=>t.id===p.id?p:t))}catch(f){console.error("Error removing from slot:",f),E("Failed to remove member","error")}L(!1)}},O=async(n,f)=>{if(!(!u||M)){L(!0);try{const b=[...u.slots],D=b.findIndex(p=>p.slotNumber===n&&p.status==="available");if(D===-1){E("Slot is not available","error"),L(!1);return}if(b.some(p=>p.memberId===f.id)){E(`${f.name} already has a slot`,"error"),L(!1);return}b[D]={slotNumber:n,memberId:f.id,memberName:f.name,memberType:f.clientType||"block",status:"confirmed",bookedAt:ae.now()};const _=(u.waitlist||[]).filter(p=>p.memberId!==f.id),q={slots:b,waitlist:_};if(f.clientType==="circuit_vip"){const p=u.vipOptOuts||[];p.includes(f.id)&&(q.vipOptOuts=p.filter(S=>S!==f.id))}await he(K($,"circuitSessions",u.id),q);const a={...u,...q};P(a),A(p=>p.map(S=>S.id===a.id?a:S)),E(`${f.name} added to slot ${n}`,"success")}catch(b){console.error("Error adding to slot:",b),E("Failed to add member","error")}L(!1)}},le=async n=>{if(!(!u||M)){L(!0);try{const f=(u.waitlist||[]).filter(D=>D.memberId!==n);await he(K($,"circuitSessions",u.id),{waitlist:f});const b={...u,waitlist:f};P(b),A(D=>D.map(_=>_.id===b.id?b:_)),E("Removed from waitlist","success")}catch(f){console.error("Error removing from waitlist:",f),E("Failed to remove from waitlist","error")}L(!1)}},r=async(n,f)=>{if(!(!u||M)){L(!0);try{const b=[...u.slots],D=b.findIndex(q=>q.slotNumber===n);if(D===-1){L(!1);return}if(b[D]={...b[D],attended:f},await he(K($,"circuitSessions",u.id),{slots:b}),f===!1){const q=b[D].memberId;if(q){const a=K($,"clients",q),p=await Ge(a);if(p.exists()){const t=(p.data().circuitStrikes||0)+1,l={circuitStrikes:t};if(t>=3){const o=new Date;o.setMonth(o.getMonth()+1),l.circuitBanUntil=ae.fromDate(o),l.circuitStrikes=0,E(`${b[D].memberName} banned for 1 month (3 strikes)`,"error")}else E(`No-show recorded - ${b[D].memberName} (${t}/3 strikes)`,"error");await he(a,l)}}}else E(`${b[D].memberName} marked as attended`,"success");const _={...u,slots:b};P(_),A(q=>q.map(a=>a.id===_.id?_:a))}catch(b){console.error("Error marking attendance:",b),E("Failed to update attendance","error")}L(!1)}},z=async(n,f)=>{if(!M&&window.confirm(`Reset strikes for ${f}?`)){L(!0);try{await he(K($,"clients",n),{circuitStrikes:0,circuitBanUntil:null}),V(b=>b.map(D=>D.id===n?{...D,circuitStrikes:0,circuitBanUntil:null}:D)),E(`Strikes reset for ${f}`,"success")}catch(b){console.error("Error resetting strikes:",b),E("Failed to reset strikes","error")}L(!1)}},I=async(n,f)=>{if(!M&&window.confirm(`Lift ban for ${f}?`)){L(!0);try{await he(K($,"clients",n),{circuitBanUntil:null,circuitStrikes:0}),V(b=>b.map(D=>D.id===n?{...D,circuitBanUntil:null,circuitStrikes:0}:D)),E(`Ban lifted for ${f}`,"success")}catch(b){console.error("Error lifting ban:",b),E("Failed to lift ban","error")}L(!1)}};if(m)return e.jsxs("div",{className:"cm-loading",children:[e.jsx("div",{className:"cm-loading-spinner"}),e.jsx("span",{children:"Loading circuit data..."})]});const J=We(new Date),re=We(He()),ce=g.filter(n=>n.date>=J),ve=g.filter(n=>n.date<J),oe=d==="upcoming"?ce:ve,ue=u?u.slots.filter(n=>n.status!=="available").length:0,pe=u?u.slots.filter(n=>n.status==="available").length:0,xe=u?u.date>=J:!1,de=u?u.slots.filter(n=>n.memberId).map(n=>n.memberId):[],Z=u?(u.waitlist||[]).map(n=>n.memberId):[],ee=R.filter(n=>!de.includes(n.id)&&!Z.includes(n.id)),ge=R.filter(n=>n.clientType==="circuit_vip").length,we=R.filter(n=>n.clientType==="circuit_dropin").length,be=R.filter(n=>n.circuitAccess&&n.clientType!=="circuit_vip"&&n.clientType!=="circuit_dropin").length,me=R.filter(n=>n.circuitBanUntil?(n.circuitBanUntil.toDate?n.circuitBanUntil.toDate():new Date(n.circuitBanUntil))>new Date:!1);return e.jsxs("div",{className:"cm-container",children:[e.jsxs("div",{className:"cm-stats-row",children:[e.jsxs("div",{className:"cm-stat-pill",children:[e.jsx("span",{className:"cm-stat-num",children:ge}),e.jsx("span",{className:"cm-stat-label",children:"VIP"})]}),e.jsxs("div",{className:"cm-stat-pill",children:[e.jsx("span",{className:"cm-stat-num",children:we}),e.jsx("span",{className:"cm-stat-label",children:"Drop-in"})]}),e.jsxs("div",{className:"cm-stat-pill",children:[e.jsx("span",{className:"cm-stat-num",children:be}),e.jsx("span",{className:"cm-stat-label",children:"Block"})]}),e.jsxs("div",{className:"cm-stat-pill",children:[e.jsx("span",{className:"cm-stat-num",children:g.length}),e.jsx("span",{className:"cm-stat-label",children:"Sessions"})]})]}),e.jsxs("div",{className:"cm-view-toggle",children:[e.jsx("button",{className:`cm-toggle-btn ${h?"":"active"}`,onClick:()=>se(!1),children:"Sessions"}),e.jsx("button",{className:`cm-toggle-btn ${h?"active":""}`,onClick:()=>se(!0),children:"Members"})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"cm-tabs",children:[e.jsxs("button",{className:`cm-tab ${d==="upcoming"?"active":""}`,onClick:()=>H("upcoming"),children:["Upcoming (",ce.length,")"]}),e.jsxs("button",{className:`cm-tab ${d==="past"?"active":""}`,onClick:()=>H("past"),children:["Past (",ve.length,")"]})]}),e.jsx("div",{className:"cm-sessions-list",children:oe.length===0?e.jsx("div",{className:"cm-empty",children:e.jsxs("p",{children:["No ",d," sessions"]})}):oe.map(n=>{const f=n.slots.filter(_=>_.status!=="available").length,b=u?.id===n.id,D=n.date===re;return e.jsxs("button",{className:`cm-session-btn ${b?"selected":""} ${D?"next":""}`,onClick:()=>{P(n),U(!1)},children:[e.jsxs("div",{className:"cm-session-btn-left",children:[e.jsx("span",{className:"cm-session-date",children:qe(n.date)}),D&&e.jsx("span",{className:"cm-next-badge",children:"Next"})]}),e.jsxs("div",{className:"cm-session-btn-right",children:[e.jsxs("span",{className:"cm-session-fill",children:[f,"/8"]}),(n.waitlist?.length||0)>0&&e.jsxs("span",{className:"cm-waitlist-count",children:["+",n.waitlist.length," wl"]})]})]},n.id)})}),u&&e.jsxs("div",{className:"cm-detail",children:[e.jsxs("div",{className:"cm-detail-header",children:[e.jsxs("div",{children:[e.jsx("h3",{children:qe(u.date)}),e.jsxs("p",{children:[u.time," - ",u.endTime," • ",ue,"/8 booked • ",pe," available"]})]}),!xe&&e.jsx("button",{className:`cm-attendance-btn ${T?"active":""}`,onClick:()=>U(!T),children:T?"Done":"Attendance"})]}),e.jsx("div",{className:"cm-slots",children:u.slots.map(n=>{const f=n.status==="available";return e.jsxs("div",{className:`cm-slot ${f?"empty":"filled"} ${n.attended===!0?"attended":""} ${n.attended===!1?"no-show":""}`,children:[e.jsx("span",{className:"cm-slot-num",children:n.slotNumber}),f?e.jsxs("div",{className:"cm-slot-empty",children:[e.jsx("span",{children:"Available"}),xe&&e.jsx(hs,{members:ee,onSelect:b=>O(n.slotNumber,b),disabled:M})]}):e.jsxs("div",{className:"cm-slot-filled",children:[e.jsxs("div",{className:"cm-slot-info",children:[e.jsx("span",{className:"cm-slot-name",children:n.memberName}),e.jsx("span",{className:`cm-type-badge ${Be(n.memberType)}`,children:$e(n.memberType)})]}),e.jsxs("div",{className:"cm-slot-actions",children:[T&&n.attended===void 0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"cm-attend-yes",onClick:()=>r(n.slotNumber,!0),disabled:M,title:"Attended",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("path",{d:"M5 13l4 4L19 7"})})}),e.jsx("button",{className:"cm-attend-no",onClick:()=>r(n.slotNumber,!1),disabled:M,title:"No-show",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),n.attended===!0&&e.jsx("span",{className:"cm-attended-label",children:"Attended"}),n.attended===!1&&e.jsx("span",{className:"cm-noshow-label",children:"No-show"}),xe&&e.jsx("button",{className:"cm-remove-btn",onClick:()=>F(n.slotNumber),disabled:M,title:"Remove from slot",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]})]},n.slotNumber)})}),(u.waitlist?.length||0)>0&&e.jsxs("div",{className:"cm-waitlist",children:[e.jsxs("h4",{children:["Waitlist (",u.waitlist.length,")"]}),u.waitlist.map((n,f)=>e.jsxs("div",{className:"cm-waitlist-row",children:[e.jsxs("span",{className:"cm-wl-pos",children:["#",f+1]}),e.jsx("span",{className:"cm-wl-name",children:n.memberName}),e.jsx("span",{className:`cm-type-badge ${Be(n.memberType)}`,children:$e(n.memberType)}),xe&&e.jsx("button",{className:"cm-wl-remove",onClick:()=>le(n.memberId),disabled:M,children:"Remove"})]},n.memberId))]})]})]}),h&&e.jsxs("div",{className:"cm-members",children:[me.length>0&&e.jsxs("div",{className:"cm-ban-alert",children:[e.jsxs("h4",{children:["Currently Banned (",me.length,")"]}),me.map(n=>{const f=n.circuitBanUntil?.toDate?n.circuitBanUntil.toDate():new Date(n.circuitBanUntil);return e.jsxs("div",{className:"cm-ban-row",children:[e.jsxs("div",{className:"cm-ban-info",children:[e.jsx("span",{className:"cm-ban-name",children:n.name}),e.jsxs("span",{className:"cm-ban-until",children:["Until ",f.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),e.jsx("button",{className:"cm-lift-ban-btn",onClick:()=>I(n.id,n.name),disabled:M,children:"Lift Ban"})]},n.id)})]}),e.jsx("div",{className:"cm-members-list",children:R.length===0?e.jsxs("div",{className:"cm-empty",children:[e.jsx("p",{children:"No circuit members yet"}),e.jsx("span",{children:"Add members via the Clients page"})]}):R.map(n=>{const f=n.circuitStrikes||0,b=me.some(D=>D.id===n.id);return e.jsxs("div",{className:`cm-member-card ${b?"banned":""}`,children:[e.jsxs("div",{className:"cm-member-top",children:[e.jsx("span",{className:"cm-member-name",children:n.name}),e.jsx("span",{className:`cm-type-badge ${Be(n.clientType)}`,children:$e(n.clientType)})]}),e.jsxs("div",{className:"cm-member-bottom",children:[e.jsxs("div",{className:"cm-strikes",children:[[0,1,2].map(D=>e.jsx("span",{className:`cm-strike-dot ${D<f?"active":""}`},D)),e.jsxs("span",{className:"cm-strike-text",children:[f,"/3 strikes"]})]}),e.jsxs("div",{className:"cm-member-actions",children:[b&&e.jsx("button",{className:"cm-small-btn ban",onClick:()=>I(n.id,n.name),disabled:M,children:"Lift Ban"}),f>0&&!b&&e.jsx("button",{className:"cm-small-btn reset",onClick:()=>z(n.id,n.name),disabled:M,children:"Reset"})]})]})]},n.id)})})]}),Q&&e.jsx("div",{className:`cm-toast ${Q.type}`,children:e.jsx("span",{children:Q.message})})]})}function hs({members:m,onSelect:B,disabled:g}){const[A,R]=j.useState(!1),[V,u]=j.useState(""),P=m.filter(d=>d.name.toLowerCase().includes(V.toLowerCase()));return m.length===0?null:e.jsxs("div",{className:"cm-add-dropdown",children:[e.jsx("button",{className:"cm-add-trigger",onClick:()=>R(!A),disabled:g,children:"+ Add"}),A&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cm-dropdown-backdrop",onClick:()=>{R(!1),u("")}}),e.jsxs("div",{className:"cm-dropdown-menu",children:[m.length>4&&e.jsx("input",{type:"text",className:"cm-dropdown-search",placeholder:"Search...",value:V,onChange:d=>u(d.target.value),autoFocus:!0}),e.jsxs("div",{className:"cm-dropdown-list",children:[P.map(d=>e.jsxs("button",{className:"cm-dropdown-item",onClick:()=>{B(d),R(!1),u("")},children:[e.jsx("span",{children:d.name}),e.jsx("span",{className:`cm-type-badge sm ${Be(d.clientType)}`,children:$e(d.clientType)})]},d.id)),P.length===0&&e.jsx("div",{className:"cm-dropdown-empty",children:"No members found"})]})]})]})]})}function js(){const[m,B]=j.useState(()=>localStorage.getItem("adminActiveView")||"schedule"),g=a=>{B(a),localStorage.setItem("adminActiveView",a)},[A,R]=j.useState(0),[V,u]=j.useState(!1),[P,d]=j.useState([]),[H,M]=j.useState(null),[L,Q]=j.useState(null),[X,h]=j.useState([]),[se,T]=j.useState([]),{currentUser:U,logout:E,isAdmin:N,loading:F}=Ke(),{isDark:O,toggleTheme:le}=Je(),r=Qe(),z=j.useRef(0),I=j.useRef(!1);j.useRef(null);const J=j.useCallback((a,p="info")=>{Q({message:a,type:p}),setTimeout(()=>Q(null),4e3)},[]);j.useEffect(()=>{!F&&(!U||!N)&&r("/")},[U,N,F,r]),j.useEffect(()=>{U&&N&&re()},[U,N]);const re=async()=>{try{const a=Ce(G($,"rescheduleRequests"),Ee("status","==","pending")),S=(await ie(a)).docs.map(t=>({id:t.id,...t.data()}));S.sort((t,l)=>{const o=t.createdAt?.toDate?t.createdAt.toDate():new Date(0);return(l.createdAt?.toDate?l.createdAt.toDate():new Date(0))-o}),d(S)}catch(a){console.error("Error fetching reschedule requests:",a)}};j.useEffect(()=>{(async()=>{if(!(!U||!N))try{const[p,S]=await Promise.all([ie(G($,"clients")),ie(G($,"sessions"))]),t=p.docs.map(x=>({id:x.id,...x.data()})),l=S.docs.map(x=>({id:x.id,...x.data()}));h(t);const o=new Set(t.map(x=>x.id)),y=S.docs.filter(x=>!o.has(x.data().clientId));if(y.length>0){const x=y.map(w=>ye(K($,"sessions",w.id)));await Promise.all(x)}T(l.filter(x=>o.has(x.clientId)))}catch(p){console.error("Error fetching dashboard data:",p)}})()},[U,N]),j.useEffect(()=>{const a=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,p=l=>{a()<=0&&(z.current=l.touches[0].clientY,I.current=!1)},S=l=>{const o=a(),x=l.touches[0].clientY-z.current;if(o>5||x<=0){I.current=!1,R(0);return}x>20&&o<=0&&(I.current=!0,R(Math.min((x-20)*.4,80)))},t=()=>{I.current&&A>60?(u(!0),setTimeout(()=>{window.location.reload()},300)):R(0),I.current=!1};return document.addEventListener("touchstart",p,{passive:!0}),document.addEventListener("touchmove",S,{passive:!0}),document.addEventListener("touchend",t),()=>{document.removeEventListener("touchstart",p),document.removeEventListener("touchmove",S),document.removeEventListener("touchend",t)}},[A]);const ce=async()=>{try{await E(),r("/")}catch(a){console.error("Failed to log out:",a)}},ve=()=>{r("/add-client")},oe=a=>new Date(a).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),ue=a=>{const[p,S]=a.split(":"),t=parseInt(p),l=t>=12?"pm":"am";return`${t>12?t-12:t===0?12:t}:${S}${l}`},pe=async a=>{if(window.confirm(`Approve reschedule for ${a.clientName}?

From: ${oe(a.originalDate)} at ${ue(a.originalTime)}
To: ${oe(a.requestedDate)} at ${ue(a.requestedTime)}`)){M(a.id);try{await he(K($,"sessions",a.sessionId),{date:a.requestedDate,time:a.requestedTime}),await he(K($,"rescheduleRequests",a.id),{status:"approved",respondedAt:ae.now()}),d(P.filter(p=>p.id!==a.id)),J(`Approved reschedule for ${a.clientName}`,"success")}catch(p){console.error("Error approving request:",p),J("Failed to approve request","error")}M(null)}},xe=async a=>{if(window.confirm(`Reject reschedule request from ${a.clientName}?`)){M(a.id);try{await he(K($,"rescheduleRequests",a.id),{status:"rejected",respondedAt:ae.now()}),d(P.filter(p=>p.id!==a.id)),J(`Request from ${a.clientName} rejected`,"info")}catch(p){console.error("Error rejecting request:",p),J("Failed to reject request","error")}M(null)}};if(F)return e.jsx("div",{className:"loading",children:"Loading..."});if(!U||!N)return null;const de=P.length,Z=new Date,ee=`${Z.getFullYear()}-${(Z.getMonth()+1).toString().padStart(2,"0")}-${Z.getDate().toString().padStart(2,"0")}`,ge=`${Z.getHours().toString().padStart(2,"0")}:${Z.getMinutes().toString().padStart(2,"0")}`,be=se.filter(a=>a.date===ee).length,me=a=>se.filter(p=>p.clientId!==a?!1:p.date<ee||p.date===ee&&p.time<ge).length,n=X.filter(a=>a.status!=="archived"&&(!a.clientType||a.clientType==="block")),f=new Date(Z);f.setDate(f.getDate()+7);const b=n.filter(a=>{if(!a.endDate)return!1;const p=a.endDate.toDate?a.endDate.toDate():new Date(a.endDate);return p>=Z&&p<=f}),D=n.filter(a=>(a.totalSessions||0)-me(a.id)<=2),_=new Map;b.forEach(a=>{const p=a.endDate.toDate?a.endDate.toDate():new Date(a.endDate),S=Math.ceil((p-Z)/(1e3*60*60*24));_.set(a.id,{client:a,reasons:[`Block ends in ${S} day${S!==1?"s":""}`]})}),D.forEach(a=>{const p=(a.totalSessions||0)-me(a.id),S=p<=0?"No sessions left":`${p} session${p!==1?"s":""} left`;_.has(a.id)?_.get(a.id).reasons.push(S):_.set(a.id,{client:a,reasons:[S]})});const q=Array.from(_.values());return e.jsxs("div",{className:"dashboard",children:[A>0&&e.jsxs("div",{className:"pull-indicator",style:{height:A},children:[e.jsx("div",{className:`pull-spinner ${V?"spinning":""}`,children:V?"↻":"↓"}),e.jsx("span",{children:V?"Refreshing...":A>60?"Release to refresh":"Pull to refresh"})]}),e.jsxs("header",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"admin-header-logo",width:"50",height:"50"}),e.jsx("span",{className:"admin-badge",children:"Admin"})]}),e.jsxs("nav",{className:"header-nav",children:[e.jsxs("button",{className:`nav-btn ${m==="requests"?"active":""} ${de>0?"has-badge":""}`,onClick:()=>g("requests"),children:["Requests",de>0&&e.jsx("span",{className:"nav-badge",children:de})]}),e.jsx("button",{className:`nav-btn ${m==="forms"?"active":""}`,onClick:()=>g("forms"),children:"Forms"}),e.jsx("button",{className:`nav-btn ${m==="circuits"?"active":""}`,onClick:()=>g("circuits"),children:"Circuits"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"theme-toggle-btn",onClick:le,"aria-label":O?"Switch to light mode":"Switch to dark mode",children:O?e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),e.jsx("button",{className:"logout-btn",onClick:ce,children:"Log Out"})]})]}),L&&e.jsx("div",{className:"toast-container",children:e.jsxs("div",{className:`toast ${L.type}`,children:[e.jsxs("span",{className:"toast-icon",children:[L.type==="success"&&e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),L.type==="error"&&e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),L.type==="info"&&e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})]}),e.jsx("span",{className:"toast-message",children:L.message})]})}),e.jsxs("main",{className:"dashboard-main",children:[m==="schedule"&&e.jsxs("div",{className:"schedule-view",children:[e.jsx("div",{className:"view-header",children:e.jsx("h2",{children:"Schedule"})}),e.jsxs("div",{className:"summary-cards",children:[e.jsxs("div",{className:"summary-card",onClick:()=>{},children:[e.jsx("div",{className:"summary-icon sessions-icon",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),e.jsxs("div",{className:"summary-info",children:[e.jsx("span",{className:"summary-number",children:be}),e.jsx("span",{className:"summary-label",children:"Today"})]})]}),e.jsxs("div",{className:"summary-card",onClick:()=>de>0&&g("requests"),children:[e.jsx("div",{className:`summary-icon requests-icon ${de>0?"has-items":""}`,children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})})}),e.jsxs("div",{className:"summary-info",children:[e.jsx("span",{className:"summary-number",children:de}),e.jsx("span",{className:"summary-label",children:"Requests"})]})]}),e.jsxs("div",{className:"summary-card",onClick:()=>g("clients"),children:[e.jsx("div",{className:`summary-icon expiring-icon ${b.length>0?"has-items":""}`,children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),e.jsxs("div",{className:"summary-info",children:[e.jsx("span",{className:"summary-number",children:b.length}),e.jsx("span",{className:"summary-label",children:"Expiring"})]})]}),e.jsxs("div",{className:"summary-card",onClick:()=>g("clients"),children:[e.jsx("div",{className:`summary-icon low-icon ${D.length>0?"has-items":""}`,children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),e.jsxs("div",{className:"summary-info",children:[e.jsx("span",{className:"summary-number",children:D.length}),e.jsx("span",{className:"summary-label",children:"Low Sessions"})]})]})]}),q.length>0&&e.jsxs("div",{className:"attention-section",children:[e.jsxs("div",{className:"attention-header",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsx("span",{children:"Needs Attention"})]}),q.map(({client:a,reasons:p})=>e.jsxs("div",{className:"attention-item",children:[e.jsx("span",{className:"attention-name",children:a.name}),e.jsx("div",{className:"attention-reasons",children:p.map((S,t)=>e.jsx("span",{className:`attention-tag ${S.includes("No sessions")?"urgent":S.includes("ends")?"warning":"low"}`,children:S},t))})]},a.id))]}),e.jsx(is,{})]}),m==="clients"&&e.jsxs("div",{className:"clients-view",children:[e.jsxs("div",{className:"view-header",children:[e.jsx("h2",{children:"Clients"}),e.jsx("button",{className:"add-btn",onClick:ve,children:"+ Add Client"})]}),e.jsx(es,{})]}),m==="calendar"&&e.jsxs("div",{className:"calendar-view",children:[e.jsx("div",{className:"view-header",children:e.jsx("h2",{children:"Calendar"})}),e.jsx(as,{})]}),m==="requests"&&e.jsxs("div",{className:"requests-view",children:[e.jsx("div",{className:"view-header",children:e.jsx("h2",{children:"Reschedule Requests"})}),P.length===0?e.jsxs("div",{className:"no-requests",children:[e.jsx("div",{className:"empty-icon",children:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"20",y:"25",width:"60",height:"50",rx:"4"}),e.jsx("path",{d:"M20 35 L50 55 L80 35"}),e.jsx("circle",{cx:"50",cy:"70",r:"3",fill:"currentColor"})]})}),e.jsx("p",{children:"No pending requests"}),e.jsx("span",{children:"When clients request to reschedule, they will appear here"})]}):e.jsx("div",{className:"requests-list",children:P.map(a=>e.jsxs("div",{className:"request-card",children:[e.jsxs("div",{className:"request-header",children:[e.jsx("span",{className:"client-name",children:a.clientName}),e.jsx("span",{className:"request-time",children:a.createdAt?.toDate?a.createdAt.toDate().toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""})]}),e.jsx("div",{className:"request-details",children:e.jsxs("div",{className:"request-change",children:[e.jsxs("div",{className:"from-session",children:[e.jsx("span",{className:"label",children:"From:"}),e.jsxs("span",{className:"value",children:[oe(a.originalDate)," at ",ue(a.originalTime)]})]}),e.jsx("div",{className:"arrow",children:"→"}),e.jsxs("div",{className:"to-session",children:[e.jsx("span",{className:"label",children:"To:"}),e.jsxs("span",{className:"value",children:[oe(a.requestedDate)," at ",ue(a.requestedTime)]})]})]})}),e.jsxs("div",{className:"request-actions",children:[e.jsx("button",{className:"approve-btn",onClick:()=>pe(a),disabled:H===a.id,children:H===a.id?"Processing...":"Approve"}),e.jsx("button",{className:"reject-btn",onClick:()=>xe(a),disabled:H===a.id,children:"Reject"})]})]},a.id))})]}),m==="forms"&&e.jsxs("div",{className:"forms-view",children:[e.jsx("div",{className:"view-header",children:e.jsx("h2",{children:"Client Forms"})}),e.jsx(ds,{})]}),m==="circuits"&&e.jsxs("div",{className:"circuits-view",children:[e.jsx("div",{className:"view-header",children:e.jsx("h2",{children:"Circuit Management"})}),e.jsx(ms,{})]})]}),e.jsxs("nav",{className:"admin-bottom-nav",children:[e.jsxs("button",{className:`admin-nav-tab ${m==="schedule"?"active":""}`,onClick:()=>g("schedule"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),e.jsx("span",{children:"Today"})]}),e.jsxs("button",{className:`admin-nav-tab ${m==="clients"?"active":""}`,onClick:()=>g("clients"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),e.jsx("span",{children:"Clients"})]}),e.jsxs("button",{className:`admin-nav-tab ${m==="calendar"?"active":""}`,onClick:()=>g("calendar"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),e.jsx("path",{d:"M8 14h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M16 14h.01"}),e.jsx("path",{d:"M8 18h.01"}),e.jsx("path",{d:"M12 18h.01"})]}),e.jsx("span",{children:"Calendar"})]})]})]})}export{js as default};
