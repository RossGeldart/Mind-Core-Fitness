const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-Gr0N1dy3.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-lS5j4egw.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-BuwxoDt2.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-nuxrzAHN.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-D-PlcP1v.js","assets/ProteinSnacks-Bh1HDmhM.js","assets/DailyMotivation-DYuOxsa2.js","assets/CircuitDashboard-C0ayXKnT.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-D6xIeqnK.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-DVgYxA3t.js","assets/Leaderboard-lyZEtGxw.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var ap={exports:{}},Bc={};var t1;function ZT(){if(t1)return Bc;t1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:h,ref:l!==void 0?l:null,props:u}}return Bc.Fragment=e,Bc.jsx=n,Bc.jsxs=n,Bc}var n1;function ej(){return n1||(n1=1,ap.exports=ZT()),ap.exports}var a=ej(),ip={exports:{}},It={};var s1;function tj(){if(s1)return It;s1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function O(C){return C===null||typeof C!="object"?null:(C=S&&C[S]||C["@@iterator"],typeof C=="function"?C:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,V={};function Z(C,B,oe){this.props=C,this.context=B,this.refs=V,this.updater=oe||G}Z.prototype.isReactComponent={},Z.prototype.setState=function(C,B){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,B,"setState")},Z.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function X(){}X.prototype=Z.prototype;function ce(C,B,oe){this.props=C,this.context=B,this.refs=V,this.updater=oe||G}var Se=ce.prototype=new X;Se.constructor=ce,U(Se,Z.prototype),Se.isPureReactComponent=!0;var Be=Array.isArray;function Oe(){}var I={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function A(C,B,oe){var pe=oe.ref;return{$$typeof:s,type:C,key:B,ref:pe!==void 0?pe:null,props:oe}}function P(C,B){return A(C.type,B,C.props)}function D(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function q(C){var B={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(oe){return B[oe]})}var M=/\/+/g;function ze(C,B){return typeof C=="object"&&C!==null&&C.key!=null?q(""+C.key):B.toString(36)}function gt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Oe,Oe):(C.status="pending",C.then(function(B){C.status==="pending"&&(C.status="fulfilled",C.value=B)},function(B){C.status==="pending"&&(C.status="rejected",C.reason=B)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Y(C,B,oe,pe,Ae){var Le=typeof C;(Le==="undefined"||Le==="boolean")&&(C=null);var Qe=!1;if(C===null)Qe=!0;else switch(Le){case"bigint":case"string":case"number":Qe=!0;break;case"object":switch(C.$$typeof){case s:case e:Qe=!0;break;case w:return Qe=C._init,Y(Qe(C._payload),B,oe,pe,Ae)}}if(Qe)return Ae=Ae(C),Qe=pe===""?"."+ze(C,0):pe,Be(Ae)?(oe="",Qe!=null&&(oe=Qe.replace(M,"$&/")+"/"),Y(Ae,B,oe,"",function(We){return We})):Ae!=null&&(D(Ae)&&(Ae=P(Ae,oe+(Ae.key==null||C&&C.key===Ae.key?"":(""+Ae.key).replace(M,"$&/")+"/")+Qe)),B.push(Ae)),1;Qe=0;var Fe=pe===""?".":pe+":";if(Be(C))for(var ae=0;ae<C.length;ae++)pe=C[ae],Le=Fe+ze(pe,ae),Qe+=Y(pe,B,oe,Le,Ae);else if(ae=O(C),typeof ae=="function")for(C=ae.call(C),ae=0;!(pe=C.next()).done;)pe=pe.value,Le=Fe+ze(pe,ae++),Qe+=Y(pe,B,oe,Le,Ae);else if(Le==="object"){if(typeof C.then=="function")return Y(gt(C),B,oe,pe,Ae);throw B=String(C),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Qe}function _e(C,B,oe){if(C==null)return C;var pe=[],Ae=0;return Y(C,pe,"","",function(Le){return B.call(oe,Le,Ae++)}),pe}function De(C){if(C._status===-1){var B=C._result;B=B(),B.then(function(oe){(C._status===0||C._status===-1)&&(C._status=1,C._result=oe)},function(oe){(C._status===0||C._status===-1)&&(C._status=2,C._result=oe)}),C._status===-1&&(C._status=0,C._result=B)}if(C._status===1)return C._result.default;throw C._result}var le=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Ve={map:_e,forEach:function(C,B,oe){_e(C,function(){B.apply(this,arguments)},oe)},count:function(C){var B=0;return _e(C,function(){B++}),B},toArray:function(C){return _e(C,function(B){return B})||[]},only:function(C){if(!D(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return It.Activity=T,It.Children=Ve,It.Component=Z,It.Fragment=n,It.Profiler=l,It.PureComponent=ce,It.StrictMode=i,It.Suspense=g,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,It.__COMPILER_RUNTIME={__proto__:null,c:function(C){return I.H.useMemoCache(C)}},It.cache=function(C){return function(){return C.apply(null,arguments)}},It.cacheSignal=function(){return null},It.cloneElement=function(C,B,oe){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var pe=U({},C.props),Ae=C.key;if(B!=null)for(Le in B.key!==void 0&&(Ae=""+B.key),B)!E.call(B,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&B.ref===void 0||(pe[Le]=B[Le]);var Le=arguments.length-2;if(Le===1)pe.children=oe;else if(1<Le){for(var Qe=Array(Le),Fe=0;Fe<Le;Fe++)Qe[Fe]=arguments[Fe+2];pe.children=Qe}return A(C.type,Ae,pe)},It.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},It.createElement=function(C,B,oe){var pe,Ae={},Le=null;if(B!=null)for(pe in B.key!==void 0&&(Le=""+B.key),B)E.call(B,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ae[pe]=B[pe]);var Qe=arguments.length-2;if(Qe===1)Ae.children=oe;else if(1<Qe){for(var Fe=Array(Qe),ae=0;ae<Qe;ae++)Fe[ae]=arguments[ae+2];Ae.children=Fe}if(C&&C.defaultProps)for(pe in Qe=C.defaultProps,Qe)Ae[pe]===void 0&&(Ae[pe]=Qe[pe]);return A(C,Le,Ae)},It.createRef=function(){return{current:null}},It.forwardRef=function(C){return{$$typeof:p,render:C}},It.isValidElement=D,It.lazy=function(C){return{$$typeof:w,_payload:{_status:-1,_result:C},_init:De}},It.memo=function(C,B){return{$$typeof:y,type:C,compare:B===void 0?null:B}},It.startTransition=function(C){var B=I.T,oe={};I.T=oe;try{var pe=C(),Ae=I.S;Ae!==null&&Ae(oe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(Oe,le)}catch(Le){le(Le)}finally{B!==null&&oe.types!==null&&(B.types=oe.types),I.T=B}},It.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},It.use=function(C){return I.H.use(C)},It.useActionState=function(C,B,oe){return I.H.useActionState(C,B,oe)},It.useCallback=function(C,B){return I.H.useCallback(C,B)},It.useContext=function(C){return I.H.useContext(C)},It.useDebugValue=function(){},It.useDeferredValue=function(C,B){return I.H.useDeferredValue(C,B)},It.useEffect=function(C,B){return I.H.useEffect(C,B)},It.useEffectEvent=function(C){return I.H.useEffectEvent(C)},It.useId=function(){return I.H.useId()},It.useImperativeHandle=function(C,B,oe){return I.H.useImperativeHandle(C,B,oe)},It.useInsertionEffect=function(C,B){return I.H.useInsertionEffect(C,B)},It.useLayoutEffect=function(C,B){return I.H.useLayoutEffect(C,B)},It.useMemo=function(C,B){return I.H.useMemo(C,B)},It.useOptimistic=function(C,B){return I.H.useOptimistic(C,B)},It.useReducer=function(C,B,oe){return I.H.useReducer(C,B,oe)},It.useRef=function(C){return I.H.useRef(C)},It.useState=function(C){return I.H.useState(C)},It.useSyncExternalStore=function(C,B,oe){return I.H.useSyncExternalStore(C,B,oe)},It.useTransition=function(){return I.H.useTransition()},It.version="19.2.4",It}var r1;function vg(){return r1||(r1=1,ip.exports=tj()),ip.exports}var _=vg(),op={exports:{}},Uc={},lp={exports:{}},cp={};var a1;function nj(){return a1||(a1=1,(function(s){function e(Y,_e){var De=Y.length;Y.push(_e);e:for(;0<De;){var le=De-1>>>1,Ve=Y[le];if(0<l(Ve,_e))Y[le]=_e,Y[De]=Ve,De=le;else break e}}function n(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var _e=Y[0],De=Y.pop();if(De!==_e){Y[0]=De;e:for(var le=0,Ve=Y.length,C=Ve>>>1;le<C;){var B=2*(le+1)-1,oe=Y[B],pe=B+1,Ae=Y[pe];if(0>l(oe,De))pe<Ve&&0>l(Ae,oe)?(Y[le]=Ae,Y[pe]=De,le=pe):(Y[le]=oe,Y[B]=De,le=B);else if(pe<Ve&&0>l(Ae,De))Y[le]=Ae,Y[pe]=De,le=pe;else break e}}return _e}function l(Y,_e){var De=Y.sortIndex-_e.sortIndex;return De!==0?De:Y.id-_e.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],y=[],w=1,T=null,S=3,O=!1,G=!1,U=!1,V=!1,Z=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function Se(Y){for(var _e=n(y);_e!==null;){if(_e.callback===null)i(y);else if(_e.startTime<=Y)i(y),_e.sortIndex=_e.expirationTime,e(g,_e);else break;_e=n(y)}}function Be(Y){if(U=!1,Se(Y),!G)if(n(g)!==null)G=!0,Oe||(Oe=!0,q());else{var _e=n(y);_e!==null&&gt(Be,_e.startTime-Y)}}var Oe=!1,I=-1,E=5,A=-1;function P(){return V?!0:!(s.unstable_now()-A<E)}function D(){if(V=!1,Oe){var Y=s.unstable_now();A=Y;var _e=!0;try{e:{G=!1,U&&(U=!1,X(I),I=-1),O=!0;var De=S;try{t:{for(Se(Y),T=n(g);T!==null&&!(T.expirationTime>Y&&P());){var le=T.callback;if(typeof le=="function"){T.callback=null,S=T.priorityLevel;var Ve=le(T.expirationTime<=Y);if(Y=s.unstable_now(),typeof Ve=="function"){T.callback=Ve,Se(Y),_e=!0;break t}T===n(g)&&i(g),Se(Y)}else i(g);T=n(g)}if(T!==null)_e=!0;else{var C=n(y);C!==null&&gt(Be,C.startTime-Y),_e=!1}}break e}finally{T=null,S=De,O=!1}_e=void 0}}finally{_e?q():Oe=!1}}}var q;if(typeof ce=="function")q=function(){ce(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ze=M.port2;M.port1.onmessage=D,q=function(){ze.postMessage(null)}}else q=function(){Z(D,0)};function gt(Y,_e){I=Z(function(){Y(s.unstable_now())},_e)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var _e=3;break;default:_e=S}var De=S;S=_e;try{return Y()}finally{S=De}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(Y,_e){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var De=S;S=Y;try{return _e()}finally{S=De}},s.unstable_scheduleCallback=function(Y,_e,De){var le=s.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?le+De:le):De=le,Y){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=De+Ve,Y={id:w++,callback:_e,priorityLevel:Y,startTime:De,expirationTime:Ve,sortIndex:-1},De>le?(Y.sortIndex=De,e(y,Y),n(g)===null&&Y===n(y)&&(U?(X(I),I=-1):U=!0,gt(Be,De-le))):(Y.sortIndex=Ve,e(g,Y),G||O||(G=!0,Oe||(Oe=!0,q()))),Y},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(Y){var _e=S;return function(){var De=S;S=_e;try{return Y.apply(this,arguments)}finally{S=De}}}})(cp)),cp}var i1;function sj(){return i1||(i1=1,lp.exports=nj()),lp.exports}var up={exports:{}},Ds={};var o1;function rj(){if(o1)return Ds;o1=1;var s=vg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:g,containerInfo:y,implementation:w}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ds.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ds.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,w)},Ds.flushSync=function(g){var y=h.T,w=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=w,i.d.f()}},Ds.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Ds.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Ds.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,T=p(w,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:O}):w==="script"&&i.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ds.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Ds.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,T=p(w,y.crossOrigin);i.d.L(g,w,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ds.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Ds.requestFormReset=function(g){i.d.r(g)},Ds.unstable_batchedUpdates=function(g,y){return g(y)},Ds.useFormState=function(g,y,w){return h.H.useFormState(g,y,w)},Ds.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ds.version="19.2.4",Ds}var l1;function aj(){if(l1)return up.exports;l1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),up.exports=rj(),up.exports}var c1;function ij(){if(c1)return Uc;c1=1;var s=sj(),e=vg(),n=aj();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var o=t,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var x=!1,N=f.child;N;){if(N===o){x=!0,o=f,c=m;break}if(N===c){x=!0,c=f,o=m;break}N=N.sibling}if(!x){for(N=m.child;N;){if(N===o){x=!0,o=m,c=f;break}if(N===c){x=!0,c=m,o=f;break}N=N.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?t:r}function w(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=w(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var M=Symbol.for("react.client.reference");function ze(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===M?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case Z:return"Profiler";case V:return"StrictMode";case Be:return"Suspense";case Oe:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case ce:return t.displayName||"Context";case X:return(t._context.displayName||"Context")+".Consumer";case Se:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return r=t.displayName||null,r!==null?r:ze(t.type)||"Memo";case E:r=t._payload,t=t._init;try{return ze(t(r))}catch{}}return null}var gt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},le=[],Ve=-1;function C(t){return{current:t}}function B(t){0>Ve||(t.current=le[Ve],le[Ve]=null,Ve--)}function oe(t,r){Ve++,le[Ve]=t.current,t.current=r}var pe=C(null),Ae=C(null),Le=C(null),Qe=C(null);function Fe(t,r){switch(oe(Le,r),oe(Ae,t),oe(pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?T0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=T0(r),t=j0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}B(pe),oe(pe,t)}function ae(){B(pe),B(Ae),B(Le)}function We(t){t.memoizedState!==null&&oe(Qe,t);var r=pe.current,o=j0(r,t.type);r!==o&&(oe(Ae,t),oe(pe,o))}function wt(t){Ae.current===t&&(B(pe),B(Ae)),Qe.current===t&&(B(Qe),Pc._currentValue=De)}var ut,ft;function re(t){if(ut===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);ut=r&&r[1]||"",ft=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ut+t+ft}var qt=!1;function kt(t,r){if(!t||qt)return"";qt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(de){var ie=de}Reflect.construct(t,[],Re)}else{try{Re.call()}catch(de){ie=de}t.call(Re.prototype)}}else{try{throw Error()}catch(de){ie=de}(Re=t())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(de){if(de&&ie&&typeof de.stack=="string")return[de.stack,ie.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],N=m[1];if(x&&N){var z=x.split(`
`),se=N.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<se.length&&!se[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===se.length)for(c=z.length-1,f=se.length-1;1<=c&&0<=f&&z[c]!==se[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==se[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==se[f]){var be=`
`+z[c].replace(" at new "," at ");return t.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",t.displayName)),be}while(1<=c&&0<=f);break}}}finally{qt=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?re(o):""}function bt(t,r){switch(t.tag){case 26:case 27:case 5:return re(t.type);case 16:return re("Lazy");case 13:return t.child!==r&&r!==null?re("Suspense Fallback"):re("Suspense");case 19:return re("SuspenseList");case 0:case 15:return kt(t.type,!1);case 11:return kt(t.type.render,!1);case 1:return kt(t.type,!0);case 31:return re("Activity");default:return""}}function Et(t){try{var r="",o=null;do r+=bt(t,o),o=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var lt=Object.prototype.hasOwnProperty,Xe=s.unstable_scheduleCallback,Ht=s.unstable_cancelCallback,ts=s.unstable_shouldYield,Nt=s.unstable_requestPaint,Lt=s.unstable_now,Mn=s.unstable_getCurrentPriorityLevel,Ct=s.unstable_ImmediatePriority,hn=s.unstable_UserBlockingPriority,ye=s.unstable_NormalPriority,Ne=s.unstable_LowPriority,Pe=s.unstable_IdlePriority,tt=s.log,Je=s.unstable_setDisableYieldValue,Ue=null,nt=null;function Ke(t){if(typeof tt=="function"&&Je(t),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(Ue,t)}catch{}}var He=Math.clz32?Math.clz32:Bt,St=Math.log,Jt=Math.LN2;function Bt(t){return t>>>=0,t===0?32:31-(St(t)/Jt|0)|0}var sn=256,Dn=262144,Rt=4194304;function on(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function zn(t,r,o){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var N=c&134217727;return N!==0?(c=N&~m,c!==0?f=on(c):(x&=N,x!==0?f=on(x):o||(o=N&~t,o!==0&&(f=on(o))))):(N=c&~m,N!==0?f=on(N):x!==0?f=on(x):o||(o=c&~t,o!==0&&(f=on(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function kn(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ys(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ns(){var t=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),t}function En(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Yn(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ss(t,r,o,c,f,m){var x=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var N=t.entanglements,z=t.expirationTimes,se=t.hiddenUpdates;for(o=x&~o;0<o;){var be=31-He(o),Re=1<<be;N[be]=0,z[be]=-1;var ie=se[be];if(ie!==null)for(se[be]=null,be=0;be<ie.length;be++){var de=ie[be];de!==null&&(de.lane&=-536870913)}o&=~Re}c!==0&&vs(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~r))}function vs(t,r,o){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-He(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|o&261930}function Hn(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-He(o),f=1<<c;f&r|t[c]&r&&(t[c]|=r),o&=~f}}function As(t,r){var o=r&-r;return o=(o&42)!==0?1:$(o),(o&(t.suspendedLanes|r))!==0?0:o}function $(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ge(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ke(){var t=_e.p;return t!==0?t:(t=window.event,t===void 0?32:K0(t.type))}function xe(t,r){var o=_e.p;try{return _e.p=t,r()}finally{_e.p=o}}var fe=Math.random().toString(36).slice(2),rt="__reactFiber$"+fe,mt="__reactProps$"+fe,it="__reactContainer$"+fe,xt="__reactEvents$"+fe,pt="__reactListeners$"+fe,Zt="__reactHandles$"+fe,Is="__reactResources$"+fe,rs="__reactMarker$"+fe;function bs(t){delete t[rt],delete t[mt],delete t[xt],delete t[pt],delete t[Zt]}function Tn(t){var r=t[rt];if(r)return r;for(var o=t.parentNode;o;){if(r=o[it]||o[rt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=I0(t);t!==null;){if(o=t[rt])return o;t=I0(t)}return r}t=o,o=t.parentNode}return null}function H(t){if(t=t[rt]||t[it]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function ue(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function b(t){var r=t[Is];return r||(r=t[Is]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function j(t){t[rs]=!0}var L=new Set,K={};function Me(t,r){ve(t,r),ve(t+"Capture",r)}function ve(t,r){for(K[t]=r,t=0;t<r.length;t++)L.add(r[t])}var we=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},et={};function F(t){return lt.call(et,t)?!0:lt.call(st,t)?!1:we.test(t)?et[t]=!0:(st[t]=!0,!1)}function J(t,r,o){if(F(r))if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+o)}}function te(t,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+o)}}function me(t,r,o,c){if(c===null)t.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(r,o,""+c)}}function Ce(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $e(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ot(t,r,o){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(x){o=""+x,m.call(this,x)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ye(t){if(!t._valueTracker){var r=$e(t)?"checked":"value";t._valueTracker=ot(t,r,""+t[r])}}function Ot(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=$e(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function mn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ut=/[\n"\\]/g;function dn(t){return t.replace(Ut,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Zs(t,r,o,c,f,m,x,N){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),r!=null?x==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ce(r)):t.value!==""+Ce(r)&&(t.value=""+Ce(r)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),r!=null?fs(t,x,Ce(r)):o!=null?fs(t,x,Ce(o)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+Ce(N):t.removeAttribute("name")}function as(t,r,o,c,f,m,x,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ye(t);return}o=o!=null?""+Ce(o):"",r=r!=null?""+Ce(r):o,N||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=N?t.checked:!!c,t.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),Ye(t)}function fs(t,r,o){r==="number"&&mn(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function ms(t,r,o,c){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+Ce(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function zt(t,r,o){if(r!=null&&(r=""+Ce(r),r!==t.value&&(t.value=r),o==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=o!=null?""+Ce(o):""}function Sn(t,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(gt(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Ce(r),t.defaultValue=o,c=t.textContent,c===o&&c!==""&&c!==null&&(t.value=c),Ye(t)}function Cn(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var er=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ms(t,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,o):typeof o!="number"||o===0||er.has(r)?r==="float"?t.cssFloat=o:t[r]=(""+o).trim():t[r]=o+"px"}function Pn(t,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&Ms(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Ms(t,m,r[m])}function Fn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ka(t){return Nr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Us(){}var Xl=null;function dr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ya=null,Yr=null;function Ki(t){var r=H(t);if(r&&(t=r.stateNode)){var o=t[mt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Zs(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+dn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var f=c[mt]||null;if(!f)throw Error(i(90));Zs(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===t.form&&Ot(c)}break e;case"textarea":zt(t,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&ms(t,!!o.multiple,r,!1)}}}var Vo=!1;function Qa(t,r,o){if(Vo)return t(r,o);Vo=!0;try{var c=t(r);return c}finally{if(Vo=!1,(Ya!==null||Yr!==null)&&(Eh(),Ya&&(r=Ya,t=Yr,Yr=Ya=null,Ki(r),t)))for(r=0;r<t.length;r++)Ki(t[r])}}function Cr(t,r){var o=t.stateNode;if(o===null)return null;var c=o[mt]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yi=!1;if(fr)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){Yi=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{Yi=!1}var Qr=null,Jl=null,Qi=null;function Zl(){if(Qi)return Qi;var t,r=Jl,o=r.length,c,f="value"in Qr?Qr.value:Qr.textContent,m=f.length;for(t=0;t<o&&r[t]===f[t];t++);var x=o-t;for(c=1;c<=x&&r[o-c]===f[m-c];c++);return Qi=f.slice(t,1<c?1-c:void 0)}function Xi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function ya(){return!0}function Rr(){return!1}function _s(t){function r(o,c,f,m,x){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(o=t[N],this[N]=o?o(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ya:Rr,this.isPropagationStopped=Rr,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ya)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ya)},persist:function(){},isPersistent:ya}),r}var va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xr=_s(va),Xa=T({},va,{view:0,detail:0}),ec=_s(Xa),Ja,Bo,Jr,Uo=T({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Za,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jr&&(Jr&&t.type==="mousemove"?(Ja=t.screenX-Jr.screenX,Bo=t.screenY-Jr.screenY):Bo=Ja=0,Jr=t),Ja)},movementY:function(t){return"movementY"in t?t.movementY:Bo}}),tc=_s(Uo),Ji=T({},Uo,{dataTransfer:0}),Du=_s(Ji),Pu=T({},Xa,{relatedTarget:0}),Zi=_s(Pu),nc=T({},va,{animationName:0,elapsedTime:0,pseudoElement:0}),Lu=_s(nc),zo=T({},va,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ou=_s(zo),Vu=T({},va,{data:0}),Zr=_s(Vu),Bu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=zu[t])?!!r[t]:!1}function Za(){return Fu}var zs=T({},Xa,{key:function(t){if(t.key){var r=Bu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Xi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Za,charCode:function(t){return t.type==="keypress"?Xi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qu=_s(zs),Hu=T({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ba=_s(Hu),d=T({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Za}),v=_s(d),k=T({},va,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=_s(k),ee=T({},Uo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),he=_s(ee),qe=T({},va,{newState:0,oldState:0}),Dt=_s(qe),Qn=[9,13,27,32],ln=fr&&"CompositionEvent"in window,Ln=null;fr&&"documentMode"in document&&(Ln=document.documentMode);var mr=fr&&"TextEvent"in window&&!Ln,ea=fr&&(!ln||Ln&&8<Ln&&11>=Ln),Ar=" ",Ir=!1;function eo(t,r){switch(t){case"keyup":return Qn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qo=!1;function kk(t,r){switch(t){case"compositionend":return Fo(r);case"keypress":return r.which!==32?null:(Ir=!0,Ar);case"textInput":return t=r.data,t===Ar&&Ir?null:t;default:return null}}function Tk(t,r){if(qo)return t==="compositionend"||!ln&&eo(t,r)?(t=Zl(),Qi=Jl=Qr=null,qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ea&&r.locale!=="ko"?null:r.data;default:return null}}var jk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Py(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!jk[t.type]:r==="textarea"}function Ly(t,r,o,c){Ya?Yr?Yr.push(c):Yr=[c]:Ya=c,r=Mh(r,"onChange"),0<r.length&&(o=new Xr("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var sc=null,rc=null;function Ek(t){v0(t,0)}function $u(t){var r=ue(t);if(Ot(r))return t}function Oy(t,r){if(t==="change")return r}var Vy=!1;if(fr){var df;if(fr){var ff="oninput"in document;if(!ff){var By=document.createElement("div");By.setAttribute("oninput","return;"),ff=typeof By.oninput=="function"}df=ff}else df=!1;Vy=df&&(!document.documentMode||9<document.documentMode)}function Uy(){sc&&(sc.detachEvent("onpropertychange",zy),rc=sc=null)}function zy(t){if(t.propertyName==="value"&&$u(rc)){var r=[];Ly(r,rc,t,dr(t)),Qa(Ek,r)}}function Sk(t,r,o){t==="focusin"?(Uy(),sc=r,rc=o,sc.attachEvent("onpropertychange",zy)):t==="focusout"&&Uy()}function Nk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $u(rc)}function Ck(t,r){if(t==="click")return $u(r)}function Rk(t,r){if(t==="input"||t==="change")return $u(r)}function Ak(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var tr=typeof Object.is=="function"?Object.is:Ak;function ac(t,r){if(tr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!lt.call(r,f)||!tr(t[f],r[f]))return!1}return!0}function Fy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qy(t,r){var o=Fy(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Fy(o)}}function Hy(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Hy(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function $y(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=mn(t.document);r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=mn(t.document)}return r}function mf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Ik=fr&&"documentMode"in document&&11>=document.documentMode,Ho=null,pf=null,ic=null,gf=!1;function Wy(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;gf||Ho==null||Ho!==mn(c)||(c=Ho,"selectionStart"in c&&mf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ic&&ac(ic,c)||(ic=c,c=Mh(pf,"onSelect"),0<c.length&&(r=new Xr("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=Ho)))}function to(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var $o={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionrun:to("Transition","TransitionRun"),transitionstart:to("Transition","TransitionStart"),transitioncancel:to("Transition","TransitionCancel"),transitionend:to("Transition","TransitionEnd")},yf={},Gy={};fr&&(Gy=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function no(t){if(yf[t])return yf[t];if(!$o[t])return t;var r=$o[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Gy)return yf[t]=r[o];return t}var Ky=no("animationend"),Yy=no("animationiteration"),Qy=no("animationstart"),Mk=no("transitionrun"),Dk=no("transitionstart"),Pk=no("transitioncancel"),Xy=no("transitionend"),Jy=new Map,vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vf.push("scrollEnd");function Mr(t,r){Jy.set(t,r),Me(r,[t])}var Wu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},pr=[],Wo=0,bf=0;function Gu(){for(var t=Wo,r=bf=Wo=0;r<t;){var o=pr[r];pr[r++]=null;var c=pr[r];pr[r++]=null;var f=pr[r];pr[r++]=null;var m=pr[r];if(pr[r++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}m!==0&&Zy(o,f,m)}}function Ku(t,r,o,c){pr[Wo++]=t,pr[Wo++]=r,pr[Wo++]=o,pr[Wo++]=c,bf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function xf(t,r,o,c){return Ku(t,r,o,c),Yu(t)}function so(t,r){return Ku(t,null,null,r),Yu(t)}function Zy(t,r,o){t.lanes|=o;var c=t.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=t.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-He(o),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function Yu(t){if(50<Nc)throw Nc=0,Cm=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Go={};function Lk(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(t,r,o,c){return new Lk(t,r,o,c)}function wf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xa(t,r){var o=t.alternate;return o===null?(o=nr(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function ev(t,r){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,r=o.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Qu(t,r,o,c,f,m){var x=0;if(c=t,typeof t=="function")wf(t)&&(x=1);else if(typeof t=="string")x=zT(t,o,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=nr(31,o,r,f),t.elementType=A,t.lanes=m,t;case U:return ro(o.children,f,m,r);case V:x=8,f|=24;break;case Z:return t=nr(12,o,r,f|2),t.elementType=Z,t.lanes=m,t;case Be:return t=nr(13,o,r,f),t.elementType=Be,t.lanes=m,t;case Oe:return t=nr(19,o,r,f),t.elementType=Oe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ce:x=10;break e;case X:x=9;break e;case Se:x=11;break e;case I:x=14;break e;case E:x=16,c=null;break e}x=29,o=Error(i(130,t===null?"null":typeof t,"")),c=null}return r=nr(x,o,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function ro(t,r,o,c){return t=nr(7,t,c,r),t.lanes=o,t}function _f(t,r,o){return t=nr(6,t,null,r),t.lanes=o,t}function tv(t){var r=nr(18,null,null,0);return r.stateNode=t,r}function kf(t,r,o){return r=nr(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var nv=new WeakMap;function gr(t,r){if(typeof t=="object"&&t!==null){var o=nv.get(t);return o!==void 0?o:(r={value:t,source:r,stack:Et(r)},nv.set(t,r),r)}return{value:t,source:r,stack:Et(r)}}var Ko=[],Yo=0,Xu=null,oc=0,yr=[],vr=0,ei=null,ta=1,na="";function wa(t,r){Ko[Yo++]=oc,Ko[Yo++]=Xu,Xu=t,oc=r}function sv(t,r,o){yr[vr++]=ta,yr[vr++]=na,yr[vr++]=ei,ei=t;var c=ta;t=na;var f=32-He(c)-1;c&=~(1<<f),o+=1;var m=32-He(r)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,ta=1<<32-He(r)+f|o<<f|c,na=m+t}else ta=1<<m|o<<f|c,na=t}function Tf(t){t.return!==null&&(wa(t,1),sv(t,1,0))}function jf(t){for(;t===Xu;)Xu=Ko[--Yo],Ko[Yo]=null,oc=Ko[--Yo],Ko[Yo]=null;for(;t===ei;)ei=yr[--vr],yr[vr]=null,na=yr[--vr],yr[vr]=null,ta=yr[--vr],yr[vr]=null}function rv(t,r){yr[vr++]=ta,yr[vr++]=na,yr[vr++]=ei,ta=r.id,na=r.overflow,ei=t}var ks=null,Rn=null,en=!1,ti=null,br=!1,Ef=Error(i(519));function ni(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lc(gr(r,t)),Ef}function av(t){var r=t.stateNode,o=t.type,c=t.memoizedProps;switch(r[rt]=t,r[mt]=c,o){case"dialog":Wt("cancel",r),Wt("close",r);break;case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(o=0;o<Rc.length;o++)Wt(Rc[o],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"details":Wt("toggle",r);break;case"input":Wt("invalid",r),as(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Wt("invalid",r);break;case"textarea":Wt("invalid",r),Sn(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||_0(r.textContent,o)?(c.popover!=null&&(Wt("beforetoggle",r),Wt("toggle",r)),c.onScroll!=null&&Wt("scroll",r),c.onScrollEnd!=null&&Wt("scrollend",r),c.onClick!=null&&(r.onclick=Us),r=!0):r=!1,r||ni(t,!0)}function iv(t){for(ks=t.return;ks;)switch(ks.tag){case 5:case 31:case 13:br=!1;return;case 27:case 3:br=!0;return;default:ks=ks.return}}function Qo(t){if(t!==ks)return!1;if(!en)return iv(t),en=!0,!1;var r=t.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||Hm(t.type,t.memoizedProps)),o=!o),o&&Rn&&ni(t),iv(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Rn=A0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Rn=A0(t)}else r===27?(r=Rn,gi(t.type)?(t=Ym,Ym=null,Rn=t):Rn=r):Rn=ks?wr(t.stateNode.nextSibling):null;return!0}function ao(){Rn=ks=null,en=!1}function Sf(){var t=ti;return t!==null&&(Ks===null?Ks=t:Ks.push.apply(Ks,t),ti=null),t}function lc(t){ti===null?ti=[t]:ti.push(t)}var Nf=C(null),io=null,_a=null;function si(t,r,o){oe(Nf,r._currentValue),r._currentValue=o}function ka(t){t._currentValue=Nf.current,B(Nf)}function Cf(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Rf(t,r,o,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=f;for(var z=0;z<r.length;z++)if(N.context===r[z]){m.lanes|=o,N=m.alternate,N!==null&&(N.lanes|=o),Cf(m.return,o,t),c||(x=null);break e}m=N.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),Cf(x,o,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Xo(t,r,o,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var N=f.type;tr(f.pendingProps.value,x.value)||(t!==null?t.push(N):t=[N])}}else if(f===Qe.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Pc):t=[Pc])}f=f.return}t!==null&&Rf(r,t,o,c),r.flags|=262144}function Ju(t){for(t=t.firstContext;t!==null;){if(!tr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function oo(t){io=t,_a=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ts(t){return ov(io,t)}function Zu(t,r){return io===null&&oo(t),ov(t,r)}function ov(t,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},_a===null){if(t===null)throw Error(i(308));_a=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else _a=_a.next=r;return o}var Ok=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(o,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(o){return o()})}},Vk=s.unstable_scheduleCallback,Bk=s.unstable_NormalPriority,is={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Af(){return{controller:new Ok,data:new Map,refCount:0}}function cc(t){t.refCount--,t.refCount===0&&Vk(Bk,function(){t.controller.abort()})}var uc=null,If=0,Jo=0,Zo=null;function Uk(t,r){if(uc===null){var o=uc=[];If=0,Jo=Pm(),Zo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return If++,r.then(lv,lv),r}function lv(){if(--If===0&&uc!==null){Zo!==null&&(Zo.status="fulfilled");var t=uc;uc=null,Jo=0,Zo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function zk(t,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var cv=Y.S;Y.S=function(t,r){Wb=Lt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Uk(t,r),cv!==null&&cv(t,r)};var lo=C(null);function Mf(){var t=lo.current;return t!==null?t:jn.pooledCache}function eh(t,r){r===null?oe(lo,lo.current):oe(lo,r.pool)}function uv(){var t=Mf();return t===null?null:{parent:is._currentValue,pool:t}}var el=Error(i(460)),Df=Error(i(474)),th=Error(i(542)),nh={then:function(){}};function hv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function dv(t,r,o){switch(o=t[o],o===void 0?t.push(r):o!==r&&(r.then(Us,Us),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,mv(t),t;default:if(typeof r.status=="string")r.then(Us,Us);else{if(t=jn,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,mv(t),t}throw uo=r,el}}function co(t){try{var r=t._init;return r(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(uo=o,el):o}}var uo=null;function fv(){if(uo===null)throw Error(i(459));var t=uo;return uo=null,t}function mv(t){if(t===el||t===th)throw Error(i(483))}var tl=null,hc=0;function sh(t){var r=hc;return hc+=1,tl===null&&(tl=[]),dv(tl,t,r)}function dc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function rh(t,r){throw r.$$typeof===S?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function pv(t){function r(Q,W){if(t){var ne=Q.deletions;ne===null?(Q.deletions=[W],Q.flags|=16):ne.push(W)}}function o(Q,W){if(!t)return null;for(;W!==null;)r(Q,W),W=W.sibling;return null}function c(Q){for(var W=new Map;Q!==null;)Q.key!==null?W.set(Q.key,Q):W.set(Q.index,Q),Q=Q.sibling;return W}function f(Q,W){return Q=xa(Q,W),Q.index=0,Q.sibling=null,Q}function m(Q,W,ne){return Q.index=ne,t?(ne=Q.alternate,ne!==null?(ne=ne.index,ne<W?(Q.flags|=67108866,W):ne):(Q.flags|=67108866,W)):(Q.flags|=1048576,W)}function x(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function N(Q,W,ne,Te){return W===null||W.tag!==6?(W=_f(ne,Q.mode,Te),W.return=Q,W):(W=f(W,ne),W.return=Q,W)}function z(Q,W,ne,Te){var yt=ne.type;return yt===U?be(Q,W,ne.props.children,Te,ne.key):W!==null&&(W.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===E&&co(yt)===W.type)?(W=f(W,ne.props),dc(W,ne),W.return=Q,W):(W=Qu(ne.type,ne.key,ne.props,null,Q.mode,Te),dc(W,ne),W.return=Q,W)}function se(Q,W,ne,Te){return W===null||W.tag!==4||W.stateNode.containerInfo!==ne.containerInfo||W.stateNode.implementation!==ne.implementation?(W=kf(ne,Q.mode,Te),W.return=Q,W):(W=f(W,ne.children||[]),W.return=Q,W)}function be(Q,W,ne,Te,yt){return W===null||W.tag!==7?(W=ro(ne,Q.mode,Te,yt),W.return=Q,W):(W=f(W,ne),W.return=Q,W)}function Re(Q,W,ne){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=_f(""+W,Q.mode,ne),W.return=Q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case O:return ne=Qu(W.type,W.key,W.props,null,Q.mode,ne),dc(ne,W),ne.return=Q,ne;case G:return W=kf(W,Q.mode,ne),W.return=Q,W;case E:return W=co(W),Re(Q,W,ne)}if(gt(W)||q(W))return W=ro(W,Q.mode,ne,null),W.return=Q,W;if(typeof W.then=="function")return Re(Q,sh(W),ne);if(W.$$typeof===ce)return Re(Q,Zu(Q,W),ne);rh(Q,W)}return null}function ie(Q,W,ne,Te){var yt=W!==null?W.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return yt!==null?null:N(Q,W,""+ne,Te);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case O:return ne.key===yt?z(Q,W,ne,Te):null;case G:return ne.key===yt?se(Q,W,ne,Te):null;case E:return ne=co(ne),ie(Q,W,ne,Te)}if(gt(ne)||q(ne))return yt!==null?null:be(Q,W,ne,Te,null);if(typeof ne.then=="function")return ie(Q,W,sh(ne),Te);if(ne.$$typeof===ce)return ie(Q,W,Zu(Q,ne),Te);rh(Q,ne)}return null}function de(Q,W,ne,Te,yt){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Q=Q.get(ne)||null,N(W,Q,""+Te,yt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case O:return Q=Q.get(Te.key===null?ne:Te.key)||null,z(W,Q,Te,yt);case G:return Q=Q.get(Te.key===null?ne:Te.key)||null,se(W,Q,Te,yt);case E:return Te=co(Te),de(Q,W,ne,Te,yt)}if(gt(Te)||q(Te))return Q=Q.get(ne)||null,be(W,Q,Te,yt,null);if(typeof Te.then=="function")return de(Q,W,ne,sh(Te),yt);if(Te.$$typeof===ce)return de(Q,W,ne,Zu(W,Te),yt);rh(W,Te)}return null}function ct(Q,W,ne,Te){for(var yt=null,rn=null,ht=W,Vt=W=0,Kt=null;ht!==null&&Vt<ne.length;Vt++){ht.index>Vt?(Kt=ht,ht=null):Kt=ht.sibling;var an=ie(Q,ht,ne[Vt],Te);if(an===null){ht===null&&(ht=Kt);break}t&&ht&&an.alternate===null&&r(Q,ht),W=m(an,W,Vt),rn===null?yt=an:rn.sibling=an,rn=an,ht=Kt}if(Vt===ne.length)return o(Q,ht),en&&wa(Q,Vt),yt;if(ht===null){for(;Vt<ne.length;Vt++)ht=Re(Q,ne[Vt],Te),ht!==null&&(W=m(ht,W,Vt),rn===null?yt=ht:rn.sibling=ht,rn=ht);return en&&wa(Q,Vt),yt}for(ht=c(ht);Vt<ne.length;Vt++)Kt=de(ht,Q,Vt,ne[Vt],Te),Kt!==null&&(t&&Kt.alternate!==null&&ht.delete(Kt.key===null?Vt:Kt.key),W=m(Kt,W,Vt),rn===null?yt=Kt:rn.sibling=Kt,rn=Kt);return t&&ht.forEach(function(wi){return r(Q,wi)}),en&&wa(Q,Vt),yt}function _t(Q,W,ne,Te){if(ne==null)throw Error(i(151));for(var yt=null,rn=null,ht=W,Vt=W=0,Kt=null,an=ne.next();ht!==null&&!an.done;Vt++,an=ne.next()){ht.index>Vt?(Kt=ht,ht=null):Kt=ht.sibling;var wi=ie(Q,ht,an.value,Te);if(wi===null){ht===null&&(ht=Kt);break}t&&ht&&wi.alternate===null&&r(Q,ht),W=m(wi,W,Vt),rn===null?yt=wi:rn.sibling=wi,rn=wi,ht=Kt}if(an.done)return o(Q,ht),en&&wa(Q,Vt),yt;if(ht===null){for(;!an.done;Vt++,an=ne.next())an=Re(Q,an.value,Te),an!==null&&(W=m(an,W,Vt),rn===null?yt=an:rn.sibling=an,rn=an);return en&&wa(Q,Vt),yt}for(ht=c(ht);!an.done;Vt++,an=ne.next())an=de(ht,Q,Vt,an.value,Te),an!==null&&(t&&an.alternate!==null&&ht.delete(an.key===null?Vt:an.key),W=m(an,W,Vt),rn===null?yt=an:rn.sibling=an,rn=an);return t&&ht.forEach(function(JT){return r(Q,JT)}),en&&wa(Q,Vt),yt}function _n(Q,W,ne,Te){if(typeof ne=="object"&&ne!==null&&ne.type===U&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case O:e:{for(var yt=ne.key;W!==null;){if(W.key===yt){if(yt=ne.type,yt===U){if(W.tag===7){o(Q,W.sibling),Te=f(W,ne.props.children),Te.return=Q,Q=Te;break e}}else if(W.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===E&&co(yt)===W.type){o(Q,W.sibling),Te=f(W,ne.props),dc(Te,ne),Te.return=Q,Q=Te;break e}o(Q,W);break}else r(Q,W);W=W.sibling}ne.type===U?(Te=ro(ne.props.children,Q.mode,Te,ne.key),Te.return=Q,Q=Te):(Te=Qu(ne.type,ne.key,ne.props,null,Q.mode,Te),dc(Te,ne),Te.return=Q,Q=Te)}return x(Q);case G:e:{for(yt=ne.key;W!==null;){if(W.key===yt)if(W.tag===4&&W.stateNode.containerInfo===ne.containerInfo&&W.stateNode.implementation===ne.implementation){o(Q,W.sibling),Te=f(W,ne.children||[]),Te.return=Q,Q=Te;break e}else{o(Q,W);break}else r(Q,W);W=W.sibling}Te=kf(ne,Q.mode,Te),Te.return=Q,Q=Te}return x(Q);case E:return ne=co(ne),_n(Q,W,ne,Te)}if(gt(ne))return ct(Q,W,ne,Te);if(q(ne)){if(yt=q(ne),typeof yt!="function")throw Error(i(150));return ne=yt.call(ne),_t(Q,W,ne,Te)}if(typeof ne.then=="function")return _n(Q,W,sh(ne),Te);if(ne.$$typeof===ce)return _n(Q,W,Zu(Q,ne),Te);rh(Q,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,W!==null&&W.tag===6?(o(Q,W.sibling),Te=f(W,ne),Te.return=Q,Q=Te):(o(Q,W),Te=_f(ne,Q.mode,Te),Te.return=Q,Q=Te),x(Q)):o(Q,W)}return function(Q,W,ne,Te){try{hc=0;var yt=_n(Q,W,ne,Te);return tl=null,yt}catch(ht){if(ht===el||ht===th)throw ht;var rn=nr(29,ht,null,Q.mode);return rn.lanes=Te,rn.return=Q,rn}}}var ho=pv(!0),gv=pv(!1),ri=!1;function Pf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ai(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ii(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(cn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Yu(t),Zy(t,null,o),r}return Ku(t,c,r,o),Yu(t)}function fc(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Hn(t,o)}}function Of(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}var Vf=!1;function mc(){if(Vf){var t=Zo;if(t!==null)throw t}}function pc(t,r,o,c){Vf=!1;var f=t.updateQueue;ri=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var z=N,se=z.next;z.next=null,x===null?m=se:x.next=se,x=z;var be=t.alternate;be!==null&&(be=be.updateQueue,N=be.lastBaseUpdate,N!==x&&(N===null?be.firstBaseUpdate=se:N.next=se,be.lastBaseUpdate=z))}if(m!==null){var Re=f.baseState;x=0,be=se=z=null,N=m;do{var ie=N.lane&-536870913,de=ie!==N.lane;if(de?(Gt&ie)===ie:(c&ie)===ie){ie!==0&&ie===Jo&&(Vf=!0),be!==null&&(be=be.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ct=t,_t=N;ie=r;var _n=o;switch(_t.tag){case 1:if(ct=_t.payload,typeof ct=="function"){Re=ct.call(_n,Re,ie);break e}Re=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=_t.payload,ie=typeof ct=="function"?ct.call(_n,Re,ie):ct,ie==null)break e;Re=T({},Re,ie);break e;case 2:ri=!0}}ie=N.callback,ie!==null&&(t.flags|=64,de&&(t.flags|=8192),de=f.callbacks,de===null?f.callbacks=[ie]:de.push(ie))}else de={lane:ie,tag:N.tag,payload:N.payload,callback:N.callback,next:null},be===null?(se=be=de,z=Re):be=be.next=de,x|=ie;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;de=N,N=de.next,de.next=null,f.lastBaseUpdate=de,f.shared.pending=null}}while(!0);be===null&&(z=Re),f.baseState=z,f.firstBaseUpdate=se,f.lastBaseUpdate=be,m===null&&(f.shared.lanes=0),hi|=x,t.lanes=x,t.memoizedState=Re}}function yv(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function vv(t,r){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)yv(o[t],r)}var nl=C(null),ah=C(0);function bv(t,r){t=Ia,oe(ah,t),oe(nl,r),Ia=t|r.baseLanes}function Bf(){oe(ah,Ia),oe(nl,nl.current)}function Uf(){Ia=ah.current,B(nl),B(ah)}var sr=C(null),xr=null;function oi(t){var r=t.alternate;oe(Xn,Xn.current&1),oe(sr,t),xr===null&&(r===null||nl.current!==null||r.memoizedState!==null)&&(xr=t)}function zf(t){oe(Xn,Xn.current),oe(sr,t),xr===null&&(xr=t)}function xv(t){t.tag===22?(oe(Xn,Xn.current),oe(sr,t),xr===null&&(xr=t)):li()}function li(){oe(Xn,Xn.current),oe(sr,sr.current)}function rr(t){B(sr),xr===t&&(xr=null),B(Xn)}var Xn=C(0);function ih(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Gm(o)||Km(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ta=0,Pt=null,xn=null,os=null,oh=!1,sl=!1,fo=!1,lh=0,gc=0,rl=null,Fk=0;function $n(){throw Error(i(321))}function Ff(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!tr(t[o],r[o]))return!1;return!0}function qf(t,r,o,c,f,m){return Ta=m,Pt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?sb:rm,fo=!1,m=o(c,f),fo=!1,sl&&(m=_v(r,o,c,f)),wv(t),m}function wv(t){Y.H=bc;var r=xn!==null&&xn.next!==null;if(Ta=0,os=xn=Pt=null,oh=!1,gc=0,rl=null,r)throw Error(i(300));t===null||ls||(t=t.dependencies,t!==null&&Ju(t)&&(ls=!0))}function _v(t,r,o,c){Pt=t;var f=0;do{if(sl&&(rl=null),gc=0,sl=!1,25<=f)throw Error(i(301));if(f+=1,os=xn=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=rb,m=r(o,c)}while(sl);return m}function qk(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?yc(r):r,t=t.useState()[0],(xn!==null?xn.memoizedState:null)!==t&&(Pt.flags|=1024),r}function Hf(){var t=lh!==0;return lh=0,t}function $f(t,r,o){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o}function Wf(t){if(oh){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}oh=!1}Ta=0,os=xn=Pt=null,sl=!1,gc=lh=0,rl=null}function Fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return os===null?Pt.memoizedState=os=t:os=os.next=t,os}function Jn(){if(xn===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=xn.next;var r=os===null?Pt.memoizedState:os.next;if(r!==null)os=r,xn=t;else{if(t===null)throw Pt.alternate===null?Error(i(467)):Error(i(310));xn=t,t={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},os===null?Pt.memoizedState=os=t:os=os.next=t}return os}function ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yc(t){var r=gc;return gc+=1,rl===null&&(rl=[]),t=dv(rl,t,r),r=Pt,(os===null?r.memoizedState:os.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?sb:rm),t}function uh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yc(t);if(t.$$typeof===ce)return Ts(t)}throw Error(i(438,String(t)))}function Gf(t){var r=null,o=Pt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Pt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=ch(),Pt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(t),c=0;c<t;c++)o[c]=P;return r.index++,o}function ja(t,r){return typeof r=="function"?r(t):r}function hh(t){var r=Jn();return Kf(r,xn,t)}function Kf(t,r,o){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var N=x=null,z=null,se=r,be=!1;do{var Re=se.lane&-536870913;if(Re!==se.lane?(Gt&Re)===Re:(Ta&Re)===Re){var ie=se.revertLane;if(ie===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),Re===Jo&&(be=!0);else if((Ta&ie)===ie){se=se.next,ie===Jo&&(be=!0);continue}else Re={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},z===null?(N=z=Re,x=m):z=z.next=Re,Pt.lanes|=ie,hi|=ie;Re=se.action,fo&&o(m,Re),m=se.hasEagerState?se.eagerState:o(m,Re)}else ie={lane:Re,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},z===null?(N=z=ie,x=m):z=z.next=ie,Pt.lanes|=Re,hi|=Re;se=se.next}while(se!==null&&se!==r);if(z===null?x=m:z.next=N,!tr(m,t.memoizedState)&&(ls=!0,be&&(o=Zo,o!==null)))throw o;t.memoizedState=m,t.baseState=x,t.baseQueue=z,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Yf(t){var r=Jn(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var x=f=f.next;do m=t(m,x.action),x=x.next;while(x!==f);tr(m,r.memoizedState)||(ls=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function kv(t,r,o){var c=Pt,f=Jn(),m=en;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var x=!tr((xn||f).memoizedState,o);if(x&&(f.memoizedState=o,ls=!0),f=f.queue,Jf(Ev.bind(null,c,f,t),[t]),f.getSnapshot!==r||x||os!==null&&os.memoizedState.tag&1){if(c.flags|=2048,al(9,{destroy:void 0},jv.bind(null,c,f,o,r),null),jn===null)throw Error(i(349));m||(Ta&127)!==0||Tv(c,r,o)}return o}function Tv(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Pt.updateQueue,r===null?(r=ch(),Pt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function jv(t,r,o,c){r.value=o,r.getSnapshot=c,Sv(r)&&Nv(t)}function Ev(t,r,o){return o(function(){Sv(r)&&Nv(t)})}function Sv(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!tr(t,o)}catch{return!0}}function Nv(t){var r=so(t,2);r!==null&&Ys(r,t,2)}function Qf(t){var r=Fs();if(typeof t=="function"){var o=t;if(t=o(),fo){Ke(!0);try{o()}finally{Ke(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:t},r}function Cv(t,r,o,c){return t.baseState=o,Kf(t,xn,typeof c=="function"?c:ja)}function Hk(t,r,o,c,f){if(mh(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Y.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,Rv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function Rv(t,r){var o=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=Y.T,x={};Y.T=x;try{var N=o(f,c),z=Y.S;z!==null&&z(x,N),Av(t,r,N)}catch(se){Xf(t,r,se)}finally{m!==null&&x.types!==null&&(m.types=x.types),Y.T=m}}else try{m=o(f,c),Av(t,r,m)}catch(se){Xf(t,r,se)}}function Av(t,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Iv(t,r,c)},function(c){return Xf(t,r,c)}):Iv(t,r,o)}function Iv(t,r,o){r.status="fulfilled",r.value=o,Mv(r),t.state=o,r=t.pending,r!==null&&(o=r.next,o===r?t.pending=null:(o=o.next,r.next=o,Rv(t,o)))}function Xf(t,r,o){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Mv(r),r=r.next;while(r!==c)}t.action=null}function Mv(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Dv(t,r){return r}function Pv(t,r){if(en){var o=jn.formState;if(o!==null){e:{var c=Pt;if(en){if(Rn){t:{for(var f=Rn,m=br;f.nodeType!==8;){if(!m){f=null;break t}if(f=wr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Rn=wr(f.nextSibling),c=f.data==="F!";break e}}ni(c)}c=!1}c&&(r=o[0])}}return o=Fs(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dv,lastRenderedState:r},o.queue=c,o=eb.bind(null,Pt,c),c.dispatch=o,c=Qf(!1),m=sm.bind(null,Pt,!1,c.queue),c=Fs(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,o=Hk.bind(null,Pt,f,m,o),f.dispatch=o,c.memoizedState=t,[r,o,!1]}function Lv(t){var r=Jn();return Ov(r,xn,t)}function Ov(t,r,o){if(r=Kf(t,r,Dv)[0],t=hh(ja)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=yc(r)}catch(x){throw x===el?th:x}else c=r;r=Jn();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Pt.flags|=2048,al(9,{destroy:void 0},$k.bind(null,f,o),null)),[c,m,t]}function $k(t,r){t.action=r}function Vv(t){var r=Jn(),o=xn;if(o!==null)return Ov(r,o,t);Jn(),r=r.memoizedState,o=Jn();var c=o.queue.dispatch;return o.memoizedState=t,[r,c,!1]}function al(t,r,o,c){return t={tag:t,create:o,deps:c,inst:r,next:null},r=Pt.updateQueue,r===null&&(r=ch(),Pt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t),t}function Bv(){return Jn().memoizedState}function dh(t,r,o,c){var f=Fs();Pt.flags|=t,f.memoizedState=al(1|r,{destroy:void 0},o,c===void 0?null:c)}function fh(t,r,o,c){var f=Jn();c=c===void 0?null:c;var m=f.memoizedState.inst;xn!==null&&c!==null&&Ff(c,xn.memoizedState.deps)?f.memoizedState=al(r,m,o,c):(Pt.flags|=t,f.memoizedState=al(1|r,m,o,c))}function Uv(t,r){dh(8390656,8,t,r)}function Jf(t,r){fh(2048,8,t,r)}function Wk(t){Pt.flags|=4;var r=Pt.updateQueue;if(r===null)r=ch(),Pt.updateQueue=r,r.events=[t];else{var o=r.events;o===null?r.events=[t]:o.push(t)}}function zv(t){var r=Jn().memoizedState;return Wk({ref:r,nextImpl:t}),function(){if((cn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Fv(t,r){return fh(4,2,t,r)}function qv(t,r){return fh(4,4,t,r)}function Hv(t,r){if(typeof r=="function"){t=t();var o=r(t);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function $v(t,r,o){o=o!=null?o.concat([t]):null,fh(4,4,Hv.bind(null,r,t),o)}function Zf(){}function Wv(t,r){var o=Jn();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Ff(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function Gv(t,r){var o=Jn();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Ff(r,c[1]))return c[0];if(c=t(),fo){Ke(!0);try{t()}finally{Ke(!1)}}return o.memoizedState=[c,r],c}function em(t,r,o){return o===void 0||(Ta&1073741824)!==0&&(Gt&261930)===0?t.memoizedState=r:(t.memoizedState=o,t=Kb(),Pt.lanes|=t,hi|=t,o)}function Kv(t,r,o,c){return tr(o,r)?o:nl.current!==null?(t=em(t,o,c),tr(t,r)||(ls=!0),t):(Ta&42)===0||(Ta&1073741824)!==0&&(Gt&261930)===0?(ls=!0,t.memoizedState=o):(t=Kb(),Pt.lanes|=t,hi|=t,r)}function Yv(t,r,o,c,f){var m=_e.p;_e.p=m!==0&&8>m?m:8;var x=Y.T,N={};Y.T=N,sm(t,!1,r,o);try{var z=f(),se=Y.S;if(se!==null&&se(N,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var be=zk(z,c);vc(t,r,be,or(t))}else vc(t,r,c,or(t))}catch(Re){vc(t,r,{then:function(){},status:"rejected",reason:Re},or())}finally{_e.p=m,x!==null&&N.types!==null&&(x.types=N.types),Y.T=x}}function Gk(){}function tm(t,r,o,c){if(t.tag!==5)throw Error(i(476));var f=Qv(t).queue;Yv(t,f,r,De,o===null?Gk:function(){return Xv(t),o(c)})}function Qv(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:De},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:o},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Xv(t){var r=Qv(t);r.next===null&&(r=t.alternate.memoizedState),vc(t,r.next.queue,{},or())}function nm(){return Ts(Pc)}function Jv(){return Jn().memoizedState}function Zv(){return Jn().memoizedState}function Kk(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var o=or();t=ai(o);var c=ii(r,t,o);c!==null&&(Ys(c,r,o),fc(c,r,o)),r={cache:Af()},t.payload=r;return}r=r.return}}function Yk(t,r,o){var c=or();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},mh(t)?tb(r,o):(o=xf(t,r,o,c),o!==null&&(Ys(o,t,c),nb(o,r,c)))}function eb(t,r,o){var c=or();vc(t,r,o,c)}function vc(t,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(mh(t))tb(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,N=m(x,o);if(f.hasEagerState=!0,f.eagerState=N,tr(N,x))return Ku(t,r,f,0),jn===null&&Gu(),!1}catch{}if(o=xf(t,r,f,c),o!==null)return Ys(o,t,c),nb(o,r,c),!0}return!1}function sm(t,r,o,c){if(c={lane:2,revertLane:Pm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},mh(t)){if(r)throw Error(i(479))}else r=xf(t,o,c,2),r!==null&&Ys(r,t,2)}function mh(t){var r=t.alternate;return t===Pt||r!==null&&r===Pt}function tb(t,r){sl=oh=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function nb(t,r,o){if((o&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Hn(t,o)}}var bc={readContext:Ts,use:uh,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n};bc.useEffectEvent=$n;var sb={readContext:Ts,use:uh,useCallback:function(t,r){return Fs().memoizedState=[t,r===void 0?null:r],t},useContext:Ts,useEffect:Uv,useImperativeHandle:function(t,r,o){o=o!=null?o.concat([t]):null,dh(4194308,4,Hv.bind(null,r,t),o)},useLayoutEffect:function(t,r){return dh(4194308,4,t,r)},useInsertionEffect:function(t,r){dh(4,2,t,r)},useMemo:function(t,r){var o=Fs();r=r===void 0?null:r;var c=t();if(fo){Ke(!0);try{t()}finally{Ke(!1)}}return o.memoizedState=[c,r],c},useReducer:function(t,r,o){var c=Fs();if(o!==void 0){var f=o(r);if(fo){Ke(!0);try{o(r)}finally{Ke(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=Yk.bind(null,Pt,t),[c.memoizedState,t]},useRef:function(t){var r=Fs();return t={current:t},r.memoizedState=t},useState:function(t){t=Qf(t);var r=t.queue,o=eb.bind(null,Pt,r);return r.dispatch=o,[t.memoizedState,o]},useDebugValue:Zf,useDeferredValue:function(t,r){var o=Fs();return em(o,t,r)},useTransition:function(){var t=Qf(!1);return t=Yv.bind(null,Pt,t.queue,!0,!1),Fs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,o){var c=Pt,f=Fs();if(en){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),jn===null)throw Error(i(349));(Gt&127)!==0||Tv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Uv(Ev.bind(null,c,m,t),[t]),c.flags|=2048,al(9,{destroy:void 0},jv.bind(null,c,m,o,r),null),o},useId:function(){var t=Fs(),r=jn.identifierPrefix;if(en){var o=na,c=ta;o=(c&~(1<<32-He(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=lh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Fk++,r="_"+r+"r_"+o.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:nm,useFormState:Pv,useActionState:Pv,useOptimistic:function(t){var r=Fs();r.memoizedState=r.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=sm.bind(null,Pt,!0,o),o.dispatch=r,[t,r]},useMemoCache:Gf,useCacheRefresh:function(){return Fs().memoizedState=Kk.bind(null,Pt)},useEffectEvent:function(t){var r=Fs(),o={impl:t};return r.memoizedState=o,function(){if((cn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},rm={readContext:Ts,use:uh,useCallback:Wv,useContext:Ts,useEffect:Jf,useImperativeHandle:$v,useInsertionEffect:Fv,useLayoutEffect:qv,useMemo:Gv,useReducer:hh,useRef:Bv,useState:function(){return hh(ja)},useDebugValue:Zf,useDeferredValue:function(t,r){var o=Jn();return Kv(o,xn.memoizedState,t,r)},useTransition:function(){var t=hh(ja)[0],r=Jn().memoizedState;return[typeof t=="boolean"?t:yc(t),r]},useSyncExternalStore:kv,useId:Jv,useHostTransitionStatus:nm,useFormState:Lv,useActionState:Lv,useOptimistic:function(t,r){var o=Jn();return Cv(o,xn,t,r)},useMemoCache:Gf,useCacheRefresh:Zv};rm.useEffectEvent=zv;var rb={readContext:Ts,use:uh,useCallback:Wv,useContext:Ts,useEffect:Jf,useImperativeHandle:$v,useInsertionEffect:Fv,useLayoutEffect:qv,useMemo:Gv,useReducer:Yf,useRef:Bv,useState:function(){return Yf(ja)},useDebugValue:Zf,useDeferredValue:function(t,r){var o=Jn();return xn===null?em(o,t,r):Kv(o,xn.memoizedState,t,r)},useTransition:function(){var t=Yf(ja)[0],r=Jn().memoizedState;return[typeof t=="boolean"?t:yc(t),r]},useSyncExternalStore:kv,useId:Jv,useHostTransitionStatus:nm,useFormState:Vv,useActionState:Vv,useOptimistic:function(t,r){var o=Jn();return xn!==null?Cv(o,xn,t,r):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:Gf,useCacheRefresh:Zv};rb.useEffectEvent=zv;function am(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:T({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var im={enqueueSetState:function(t,r,o){t=t._reactInternals;var c=or(),f=ai(c);f.payload=r,o!=null&&(f.callback=o),r=ii(t,f,c),r!==null&&(Ys(r,t,c),fc(r,t,c))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=or(),f=ai(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=ii(t,f,c),r!==null&&(Ys(r,t,c),fc(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=or(),c=ai(o);c.tag=2,r!=null&&(c.callback=r),r=ii(t,c,o),r!==null&&(Ys(r,t,o),fc(r,t,o))}};function ab(t,r,o,c,f,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,x):r.prototype&&r.prototype.isPureReactComponent?!ac(o,c)||!ac(f,m):!0}function ib(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&im.enqueueReplaceState(r,r.state,null)}function mo(t,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(t=t.defaultProps){o===r&&(o=T({},o));for(var f in t)o[f]===void 0&&(o[f]=t[f])}return o}function ob(t){Wu(t)}function lb(t){console.error(t)}function cb(t){Wu(t)}function ph(t,r){try{var o=t.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function ub(t,r,o){try{var c=t.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function om(t,r,o){return o=ai(o),o.tag=3,o.payload={element:null},o.callback=function(){ph(t,r)},o}function hb(t){return t=ai(t),t.tag=3,t}function db(t,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){ub(r,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){ub(r,o,c),typeof f!="function"&&(di===null?di=new Set([this]):di.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function Qk(t,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Xo(r,o,f,!0),o=sr.current,o!==null){switch(o.tag){case 31:case 13:return xr===null?Sh():o.alternate===null&&Wn===0&&(Wn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===nh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Im(t,c,f)),!1;case 22:return o.flags|=65536,c===nh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Im(t,c,f)),!1}throw Error(i(435,o.tag))}return Im(t,c,f),Sh(),!1}if(en)return r=sr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Ef&&(t=Error(i(422),{cause:c}),lc(gr(t,o)))):(c!==Ef&&(r=Error(i(423),{cause:c}),lc(gr(r,o))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=gr(c,o),f=om(t.stateNode,c,f),Of(t,f),Wn!==4&&(Wn=2)),!1;var m=Error(i(520),{cause:c});if(m=gr(m,o),Sc===null?Sc=[m]:Sc.push(m),Wn!==4&&(Wn=2),r===null)return!0;c=gr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,t=f&-f,o.lanes|=t,t=om(o.stateNode,c,t),Of(o,t),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(di===null||!di.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=hb(f),db(f,t,o,c),Of(o,f),!1}o=o.return}while(o!==null);return!1}var lm=Error(i(461)),ls=!1;function js(t,r,o,c){r.child=t===null?gv(r,null,o,c):ho(r,t.child,o,c)}function fb(t,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var x={};for(var N in c)N!=="ref"&&(x[N]=c[N])}else x=c;return oo(r),c=qf(t,r,o,x,m,f),N=Hf(),t!==null&&!ls?($f(t,r,f),Ea(t,r,f)):(en&&N&&Tf(r),r.flags|=1,js(t,r,c,f),r.child)}function mb(t,r,o,c,f){if(t===null){var m=o.type;return typeof m=="function"&&!wf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,pb(t,r,m,c,f)):(t=Qu(o.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!gm(t,f)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:ac,o(x,c)&&t.ref===r.ref)return Ea(t,r,f)}return r.flags|=1,t=xa(m,c),t.ref=r.ref,t.return=r,r.child=t}function pb(t,r,o,c,f){if(t!==null){var m=t.memoizedProps;if(ac(m,c)&&t.ref===r.ref)if(ls=!1,r.pendingProps=c=m,gm(t,f))(t.flags&131072)!==0&&(ls=!0);else return r.lanes=t.lanes,Ea(t,r,f)}return cm(t,r,o,c,f)}function gb(t,r,o,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return yb(t,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&eh(r,m!==null?m.cachePool:null),m!==null?bv(r,m):Bf(),xv(r);else return c=r.lanes=536870912,yb(t,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(eh(r,m.cachePool),bv(r,m),li(),r.memoizedState=null):(t!==null&&eh(r,null),Bf(),li());return js(t,r,f,o),r.child}function xc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function yb(t,r,o,c,f){var m=Mf();return m=m===null?null:{parent:is._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},t!==null&&eh(r,null),Bf(),xv(r),t!==null&&Xo(t,r,c,!0),r.childLanes=f,null}function gh(t,r){return r=vh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function vb(t,r,o){return ho(r,t.child,null,o),t=gh(r,r.pendingProps),t.flags|=2,rr(r),r.memoizedState=null,t}function Xk(t,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(en){if(c.mode==="hidden")return t=gh(r,c),r.lanes=536870912,xc(null,t);if(zf(r),(t=Rn)?(t=R0(t,br),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ei!==null?{id:ta,overflow:na}:null,retryLane:536870912,hydrationErrors:null},o=tv(t),o.return=r,r.child=o,ks=r,Rn=null)):t=null,t===null)throw ni(r);return r.lanes=536870912,null}return gh(r,c)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(zf(r),f)if(r.flags&256)r.flags&=-257,r=vb(t,r,o);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(ls||Xo(t,r,o,!1),f=(o&t.childLanes)!==0,ls||f){if(c=jn,c!==null&&(x=As(c,o),x!==0&&x!==m.retryLane))throw m.retryLane=x,so(t,x),Ys(c,t,x),lm;Sh(),r=vb(t,r,o)}else t=m.treeContext,Rn=wr(x.nextSibling),ks=r,en=!0,ti=null,br=!1,t!==null&&rv(r,t),r=gh(r,c),r.flags|=4096;return r}return t=xa(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function yh(t,r){var o=r.ref;if(o===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(t===null||t.ref!==o)&&(r.flags|=4194816)}}function cm(t,r,o,c,f){return oo(r),o=qf(t,r,o,c,void 0,f),c=Hf(),t!==null&&!ls?($f(t,r,f),Ea(t,r,f)):(en&&c&&Tf(r),r.flags|=1,js(t,r,o,f),r.child)}function bb(t,r,o,c,f,m){return oo(r),r.updateQueue=null,o=_v(r,c,o,f),wv(t),c=Hf(),t!==null&&!ls?($f(t,r,m),Ea(t,r,m)):(en&&c&&Tf(r),r.flags|=1,js(t,r,o,m),r.child)}function xb(t,r,o,c,f){if(oo(r),r.stateNode===null){var m=Go,x=o.contextType;typeof x=="object"&&x!==null&&(m=Ts(x)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=im,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Pf(r),x=o.contextType,m.context=typeof x=="object"&&x!==null?Ts(x):Go,m.state=r.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(am(r,o,x,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&im.enqueueReplaceState(m,m.state,null),pc(r,c,m,f),mc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var N=r.memoizedProps,z=mo(o,N);m.props=z;var se=m.context,be=o.contextType;x=Go,typeof be=="object"&&be!==null&&(x=Ts(be));var Re=o.getDerivedStateFromProps;be=typeof Re=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,be||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||se!==x)&&ib(r,m,c,x),ri=!1;var ie=r.memoizedState;m.state=ie,pc(r,c,m,f),mc(),se=r.memoizedState,N||ie!==se||ri?(typeof Re=="function"&&(am(r,o,Re,c),se=r.memoizedState),(z=ri||ab(r,o,z,c,ie,se,x))?(be||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=se),m.props=c,m.state=se,m.context=x,c=z):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Lf(t,r),x=r.memoizedProps,be=mo(o,x),m.props=be,Re=r.pendingProps,ie=m.context,se=o.contextType,z=Go,typeof se=="object"&&se!==null&&(z=Ts(se)),N=o.getDerivedStateFromProps,(se=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==Re||ie!==z)&&ib(r,m,c,z),ri=!1,ie=r.memoizedState,m.state=ie,pc(r,c,m,f),mc();var de=r.memoizedState;x!==Re||ie!==de||ri||t!==null&&t.dependencies!==null&&Ju(t.dependencies)?(typeof N=="function"&&(am(r,o,N,c),de=r.memoizedState),(be=ri||ab(r,o,be,c,ie,de,z)||t!==null&&t.dependencies!==null&&Ju(t.dependencies))?(se||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,de,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,de,z)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=de),m.props=c,m.state=de,m.context=z,c=be):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,yh(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=ho(r,t.child,null,f),r.child=ho(r,null,o,f)):js(t,r,o,f),r.memoizedState=m.state,t=r.child):t=Ea(t,r,f),t}function wb(t,r,o,c){return ao(),r.flags|=256,js(t,r,o,c),r.child}var um={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hm(t){return{baseLanes:t,cachePool:uv()}}function dm(t,r,o){return t=t!==null?t.childLanes&~o:0,r&&(t|=ir),t}function _b(t,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(Xn.current&2)!==0),x&&(f=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,t===null){if(en){if(f?oi(r):li(),(t=Rn)?(t=R0(t,br),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ei!==null?{id:ta,overflow:na}:null,retryLane:536870912,hydrationErrors:null},o=tv(t),o.return=r,r.child=o,ks=r,Rn=null)):t=null,t===null)throw ni(r);return Km(t)?r.lanes=32:r.lanes=536870912,null}var N=c.children;return c=c.fallback,f?(li(),f=r.mode,N=vh({mode:"hidden",children:N},f),c=ro(c,f,o,null),N.return=r,c.return=r,N.sibling=c,r.child=N,c=r.child,c.memoizedState=hm(o),c.childLanes=dm(t,x,o),r.memoizedState=um,xc(null,c)):(oi(r),fm(r,N))}var z=t.memoizedState;if(z!==null&&(N=z.dehydrated,N!==null)){if(m)r.flags&256?(oi(r),r.flags&=-257,r=mm(t,r,o)):r.memoizedState!==null?(li(),r.child=t.child,r.flags|=128,r=null):(li(),N=c.fallback,f=r.mode,c=vh({mode:"visible",children:c.children},f),N=ro(N,f,o,null),N.flags|=2,c.return=r,N.return=r,c.sibling=N,r.child=c,ho(r,t.child,null,o),c=r.child,c.memoizedState=hm(o),c.childLanes=dm(t,x,o),r.memoizedState=um,r=xc(null,c));else if(oi(r),Km(N)){if(x=N.nextSibling&&N.nextSibling.dataset,x)var se=x.dgst;x=se,c=Error(i(419)),c.stack="",c.digest=x,lc({value:c,source:null,stack:null}),r=mm(t,r,o)}else if(ls||Xo(t,r,o,!1),x=(o&t.childLanes)!==0,ls||x){if(x=jn,x!==null&&(c=As(x,o),c!==0&&c!==z.retryLane))throw z.retryLane=c,so(t,c),Ys(x,t,c),lm;Gm(N)||Sh(),r=mm(t,r,o)}else Gm(N)?(r.flags|=192,r.child=t.child,r=null):(t=z.treeContext,Rn=wr(N.nextSibling),ks=r,en=!0,ti=null,br=!1,t!==null&&rv(r,t),r=fm(r,c.children),r.flags|=4096);return r}return f?(li(),N=c.fallback,f=r.mode,z=t.child,se=z.sibling,c=xa(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,se!==null?N=xa(se,N):(N=ro(N,f,o,null),N.flags|=2),N.return=r,c.return=r,c.sibling=N,r.child=c,xc(null,c),c=r.child,N=t.child.memoizedState,N===null?N=hm(o):(f=N.cachePool,f!==null?(z=is._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=uv(),N={baseLanes:N.baseLanes|o,cachePool:f}),c.memoizedState=N,c.childLanes=dm(t,x,o),r.memoizedState=um,xc(t.child,c)):(oi(r),o=t.child,t=o.sibling,o=xa(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,t!==null&&(x=r.deletions,x===null?(r.deletions=[t],r.flags|=16):x.push(t)),r.child=o,r.memoizedState=null,o)}function fm(t,r){return r=vh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function vh(t,r){return t=nr(22,t,null,r),t.lanes=0,t}function mm(t,r,o){return ho(r,t.child,null,o),t=fm(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function kb(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Cf(t.return,r,o)}function pm(t,r,o,c,f,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=f,x.treeForkCount=m)}function Tb(t,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var x=Xn.current,N=(x&2)!==0;if(N?(x=x&1|2,r.flags|=128):x&=1,oe(Xn,x),js(t,r,c,o),c=en?oc:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kb(t,o,r);else if(t.tag===19)kb(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&ih(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),pm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&ih(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}pm(r,!0,o,null,m,c);break;case"together":pm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Ea(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),hi|=r.lanes,(o&r.childLanes)===0)if(t!==null){if(Xo(t,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,o=xa(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=xa(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function gm(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Ju(t)))}function Jk(t,r,o){switch(r.tag){case 3:Fe(r,r.stateNode.containerInfo),si(r,is,t.memoizedState.cache),ao();break;case 27:case 5:We(r);break;case 4:Fe(r,r.stateNode.containerInfo);break;case 10:si(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,zf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(oi(r),r.flags|=128,null):(o&r.child.childLanes)!==0?_b(t,r,o):(oi(r),t=Ea(t,r,o),t!==null?t.sibling:null);oi(r);break;case 19:var f=(t.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Xo(t,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return Tb(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(Xn,Xn.current),c)break;return null;case 22:return r.lanes=0,gb(t,r,o,r.pendingProps);case 24:si(r,is,t.memoizedState.cache)}return Ea(t,r,o)}function jb(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps)ls=!0;else{if(!gm(t,o)&&(r.flags&128)===0)return ls=!1,Jk(t,r,o);ls=(t.flags&131072)!==0}else ls=!1,en&&(r.flags&1048576)!==0&&sv(r,oc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=co(r.elementType),r.type=t,typeof t=="function")wf(t)?(c=mo(t,c),r.tag=1,r=xb(null,r,t,c,o)):(r.tag=0,r=cm(null,r,t,c,o));else{if(t!=null){var f=t.$$typeof;if(f===Se){r.tag=11,r=fb(null,r,t,c,o);break e}else if(f===I){r.tag=14,r=mb(null,r,t,c,o);break e}}throw r=ze(t)||t,Error(i(306,r,""))}}return r;case 0:return cm(t,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=mo(c,r.pendingProps),xb(t,r,c,f,o);case 3:e:{if(Fe(r,r.stateNode.containerInfo),t===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Lf(t,r),pc(r,c,null,o);var x=r.memoizedState;if(c=x.cache,si(r,is,c),c!==m.cache&&Rf(r,[is],o,!0),mc(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=wb(t,r,c,o);break e}else if(c!==f){f=gr(Error(i(424)),r),lc(f),r=wb(t,r,c,o);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Rn=wr(t.firstChild),ks=r,en=!0,ti=null,br=!0,o=gv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ao(),c===f){r=Ea(t,r,o);break e}js(t,r,c,o)}r=r.child}return r;case 26:return yh(t,r),t===null?(o=L0(r.type,null,r.pendingProps,null))?r.memoizedState=o:en||(o=r.type,t=r.pendingProps,c=Dh(Le.current).createElement(o),c[rt]=r,c[mt]=t,Es(c,o,t),j(c),r.stateNode=c):r.memoizedState=L0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return We(r),t===null&&en&&(c=r.stateNode=M0(r.type,r.pendingProps,Le.current),ks=r,br=!0,f=Rn,gi(r.type)?(Ym=f,Rn=wr(c.firstChild)):Rn=f),js(t,r,r.pendingProps.children,o),yh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&en&&((f=c=Rn)&&(c=NT(c,r.type,r.pendingProps,br),c!==null?(r.stateNode=c,ks=r,Rn=wr(c.firstChild),br=!1,f=!0):f=!1),f||ni(r)),We(r),f=r.type,m=r.pendingProps,x=t!==null?t.memoizedProps:null,c=m.children,Hm(f,m)?c=null:x!==null&&Hm(f,x)&&(r.flags|=32),r.memoizedState!==null&&(f=qf(t,r,qk,null,null,o),Pc._currentValue=f),yh(t,r),js(t,r,c,o),r.child;case 6:return t===null&&en&&((t=o=Rn)&&(o=CT(o,r.pendingProps,br),o!==null?(r.stateNode=o,ks=r,Rn=null,t=!0):t=!1),t||ni(r)),null;case 13:return _b(t,r,o);case 4:return Fe(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=ho(r,null,c,o):js(t,r,c,o),r.child;case 11:return fb(t,r,r.type,r.pendingProps,o);case 7:return js(t,r,r.pendingProps,o),r.child;case 8:return js(t,r,r.pendingProps.children,o),r.child;case 12:return js(t,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,si(r,r.type,c.value),js(t,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,oo(r),f=Ts(f),c=c(f),r.flags|=1,js(t,r,c,o),r.child;case 14:return mb(t,r,r.type,r.pendingProps,o);case 15:return pb(t,r,r.type,r.pendingProps,o);case 19:return Tb(t,r,o);case 31:return Xk(t,r,o);case 22:return gb(t,r,o,r.pendingProps);case 24:return oo(r),c=Ts(is),t===null?(f=Mf(),f===null&&(f=jn,m=Af(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},Pf(r),si(r,is,f)):((t.lanes&o)!==0&&(Lf(t,r),pc(r,null,null,o),mc()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),si(r,is,c)):(c=m.cache,si(r,is,c),c!==f.cache&&Rf(r,[is],o,!0))),js(t,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Sa(t){t.flags|=4}function ym(t,r,o,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Jb())t.flags|=8192;else throw uo=nh,Df}else t.flags&=-16777217}function Eb(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!z0(r))if(Jb())t.flags|=8192;else throw uo=nh,Df}function bh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ns():536870912,t.lanes|=r,cl|=r)}function wc(t,r){if(!en)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function An(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function Zk(t,r,o){var c=r.pendingProps;switch(jf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(r),null;case 1:return An(r),null;case 3:return o=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ka(is),ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Qo(r)?Sa(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Sf())),An(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Sa(r),m!==null?(An(r),Eb(r,m)):(An(r),ym(r,f,null,c,o))):m?m!==t.memoizedState?(Sa(r),An(r),Eb(r,m)):(An(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&Sa(r),An(r),ym(r,f,t,c,o)),null;case 27:if(wt(r),o=Le.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&Sa(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return An(r),null}t=pe.current,Qo(r)?av(r):(t=M0(f,c,o),r.stateNode=t,Sa(r))}return An(r),null;case 5:if(wt(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&Sa(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return An(r),null}if(m=pe.current,Qo(r))av(r);else{var x=Dh(Le.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}m[rt]=r,m[mt]=c;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=m;e:switch(Es(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Sa(r)}}return An(r),ym(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,o),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&Sa(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(t=Le.current,Qo(r)){if(t=r.stateNode,o=r.memoizedProps,c=null,f=ks,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[rt]=r,t=!!(t.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||_0(t.nodeValue,o)),t||ni(r,!0)}else t=Dh(t).createTextNode(c),t[rt]=r,r.stateNode=t}return An(r),null;case 31:if(o=r.memoizedState,t===null||t.memoizedState!==null){if(c=Qo(r),o!==null){if(t===null){if(!c)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[rt]=r}else ao(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;An(r),t=!1}else o=Sf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return r.flags&256?(rr(r),r):(rr(r),null);if((r.flags&128)!==0)throw Error(i(558))}return An(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Qo(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[rt]=r}else ao(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;An(r),f=!1}else f=Sf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(rr(r),r):(rr(r),null)}return rr(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,t=t!==null&&t.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==t&&o&&(r.child.flags|=8192),bh(r,r.updateQueue),An(r),null);case 4:return ae(),t===null&&Bm(r.stateNode.containerInfo),An(r),null;case 10:return ka(r.type),An(r),null;case 19:if(B(Xn),c=r.memoizedState,c===null)return An(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)wc(c,!1);else{if(Wn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=ih(t),m!==null){for(r.flags|=128,wc(c,!1),t=m.updateQueue,r.updateQueue=t,bh(r,t),r.subtreeFlags=0,t=o,o=r.child;o!==null;)ev(o,t),o=o.sibling;return oe(Xn,Xn.current&1|2),en&&wa(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&Lt()>Th&&(r.flags|=128,f=!0,wc(c,!1),r.lanes=4194304)}else{if(!f)if(t=ih(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,bh(r,t),wc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!en)return An(r),null}else 2*Lt()-c.renderingStartTime>Th&&o!==536870912&&(r.flags|=128,f=!0,wc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Lt(),t.sibling=null,o=Xn.current,oe(Xn,f?o&1|2:o&1),en&&wa(r,c.treeForkCount),t):(An(r),null);case 22:case 23:return rr(r),Uf(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(An(r),r.subtreeFlags&6&&(r.flags|=8192)):An(r),o=r.updateQueue,o!==null&&bh(r,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),t!==null&&B(lo),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),ka(is),An(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function eT(t,r){switch(jf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ka(is),ae(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return wt(r),null;case 31:if(r.memoizedState!==null){if(rr(r),r.alternate===null)throw Error(i(340));ao()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(rr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ao()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return B(Xn),null;case 4:return ae(),null;case 10:return ka(r.type),null;case 22:case 23:return rr(r),Uf(),t!==null&&B(lo),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ka(is),null;case 25:return null;default:return null}}function Sb(t,r){switch(jf(r),r.tag){case 3:ka(is),ae();break;case 26:case 27:case 5:wt(r);break;case 4:ae();break;case 31:r.memoizedState!==null&&rr(r);break;case 13:rr(r);break;case 19:B(Xn);break;case 10:ka(r.type);break;case 22:case 23:rr(r),Uf(),t!==null&&B(lo);break;case 24:ka(is)}}function _c(t,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&t)===t){c=void 0;var m=o.create,x=o.inst;c=m(),x.destroy=c}o=o.next}while(o!==f)}}catch(N){gn(r,r.return,N)}}function ci(t,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var x=c.inst,N=x.destroy;if(N!==void 0){x.destroy=void 0,f=r;var z=o,se=N;try{se()}catch(be){gn(f,z,be)}}}c=c.next}while(c!==m)}}catch(be){gn(r,r.return,be)}}function Nb(t){var r=t.updateQueue;if(r!==null){var o=t.stateNode;try{vv(r,o)}catch(c){gn(t,t.return,c)}}}function Cb(t,r,o){o.props=mo(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(c){gn(t,r,c)}}function kc(t,r){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof o=="function"?t.refCleanup=o(c):o.current=c}}catch(f){gn(t,r,f)}}function sa(t,r){var o=t.ref,c=t.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){gn(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){gn(t,r,f)}else o.current=null}function Rb(t){var r=t.type,o=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){gn(t,t.return,f)}}function vm(t,r,o){try{var c=t.stateNode;_T(c,t.type,o,r),c[mt]=r}catch(f){gn(t,t.return,f)}}function Ab(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&gi(t.type)||t.tag===4}function bm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ab(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&gi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xm(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(t),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Us));else if(c!==4&&(c===27&&gi(t.type)&&(o=t.stateNode,r=null),t=t.child,t!==null))for(xm(t,r,o),t=t.sibling;t!==null;)xm(t,r,o),t=t.sibling}function xh(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(c===27&&gi(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(xh(t,r,o),t=t.sibling;t!==null;)xh(t,r,o),t=t.sibling}function Ib(t){var r=t.stateNode,o=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Es(r,c,o),r[rt]=t,r[mt]=o}catch(m){gn(t,t.return,m)}}var Na=!1,cs=!1,wm=!1,Mb=typeof WeakSet=="function"?WeakSet:Set,xs=null;function tT(t,r){if(t=t.containerInfo,Fm=zh,t=$y(t),mf(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,N=-1,z=-1,se=0,be=0,Re=t,ie=null;t:for(;;){for(var de;Re!==o||f!==0&&Re.nodeType!==3||(N=x+f),Re!==m||c!==0&&Re.nodeType!==3||(z=x+c),Re.nodeType===3&&(x+=Re.nodeValue.length),(de=Re.firstChild)!==null;)ie=Re,Re=de;for(;;){if(Re===t)break t;if(ie===o&&++se===f&&(N=x),ie===m&&++be===c&&(z=x),(de=Re.nextSibling)!==null)break;Re=ie,ie=Re.parentNode}Re=de}o=N===-1||z===-1?null:{start:N,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(qm={focusedElem:t,selectionRange:o},zh=!1,xs=r;xs!==null;)if(r=xs,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,xs=t;else for(;xs!==null;){switch(r=xs,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)f=t[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var ct=mo(o.type,f);t=c.getSnapshotBeforeUpdate(ct,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(_t){gn(o,o.return,_t)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,o=t.nodeType,o===9)Wm(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Wm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,xs=t;break}xs=r.return}}function Db(t,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ra(t,o),c&4&&_c(5,o);break;case 1:if(Ra(t,o),c&4)if(t=o.stateNode,r===null)try{t.componentDidMount()}catch(x){gn(o,o.return,x)}else{var f=mo(o.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(x){gn(o,o.return,x)}}c&64&&Nb(o),c&512&&kc(o,o.return);break;case 3:if(Ra(t,o),c&64&&(t=o.updateQueue,t!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{vv(t,r)}catch(x){gn(o,o.return,x)}}break;case 27:r===null&&c&4&&Ib(o);case 26:case 5:Ra(t,o),r===null&&c&4&&Rb(o),c&512&&kc(o,o.return);break;case 12:Ra(t,o);break;case 31:Ra(t,o),c&4&&Ob(t,o);break;case 13:Ra(t,o),c&4&&Vb(t,o),c&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=uT.bind(null,o),RT(t,o))));break;case 22:if(c=o.memoizedState!==null||Na,!c){r=r!==null&&r.memoizedState!==null||cs,f=Na;var m=cs;Na=c,(cs=r)&&!m?Aa(t,o,(o.subtreeFlags&8772)!==0):Ra(t,o),Na=f,cs=m}break;case 30:break;default:Ra(t,o)}}function Pb(t){var r=t.alternate;r!==null&&(t.alternate=null,Pb(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&bs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var On=null,$s=!1;function Ca(t,r,o){for(o=o.child;o!==null;)Lb(t,r,o),o=o.sibling}function Lb(t,r,o){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(Ue,o)}catch{}switch(o.tag){case 26:cs||sa(o,r),Ca(t,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:cs||sa(o,r);var c=On,f=$s;gi(o.type)&&(On=o.stateNode,$s=!1),Ca(t,r,o),Ic(o.stateNode),On=c,$s=f;break;case 5:cs||sa(o,r);case 6:if(c=On,f=$s,On=null,Ca(t,r,o),On=c,$s=f,On!==null)if($s)try{(On.nodeType===9?On.body:On.nodeName==="HTML"?On.ownerDocument.body:On).removeChild(o.stateNode)}catch(m){gn(o,r,m)}else try{On.removeChild(o.stateNode)}catch(m){gn(o,r,m)}break;case 18:On!==null&&($s?(t=On,N0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),yl(t)):N0(On,o.stateNode));break;case 4:c=On,f=$s,On=o.stateNode.containerInfo,$s=!0,Ca(t,r,o),On=c,$s=f;break;case 0:case 11:case 14:case 15:ci(2,o,r),cs||ci(4,o,r),Ca(t,r,o);break;case 1:cs||(sa(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Cb(o,r,c)),Ca(t,r,o);break;case 21:Ca(t,r,o);break;case 22:cs=(c=cs)||o.memoizedState!==null,Ca(t,r,o),cs=c;break;default:Ca(t,r,o)}}function Ob(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{yl(t)}catch(o){gn(r,r.return,o)}}}function Vb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{yl(t)}catch(o){gn(r,r.return,o)}}function nT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Mb),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Mb),r;default:throw Error(i(435,t.tag))}}function wh(t,r){var o=nT(t);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=hT.bind(null,t,c);c.then(f,f)}})}function Ws(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=t,x=r,N=x;e:for(;N!==null;){switch(N.tag){case 27:if(gi(N.type)){On=N.stateNode,$s=!1;break e}break;case 5:On=N.stateNode,$s=!1;break e;case 3:case 4:On=N.stateNode.containerInfo,$s=!0;break e}N=N.return}if(On===null)throw Error(i(160));Lb(m,x,f),On=null,$s=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Bb(r,t),r=r.sibling}var Dr=null;function Bb(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ws(r,t),Gs(t),c&4&&(ci(3,t,t.return),_c(3,t),ci(5,t,t.return));break;case 1:Ws(r,t),Gs(t),c&512&&(cs||o===null||sa(o,o.return)),c&64&&Na&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Dr;if(Ws(r,t),Gs(t),c&512&&(cs||o===null||sa(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=t.memoizedState,o===null)if(c===null)if(t.stateNode===null){e:{c=t.type,o=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[rs]||m[rt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Es(m,c,o),m[rt]=t,j(m),c=m;break e;case"link":var x=B0("link","href",f).get(c+(o.href||""));if(x){for(var N=0;N<x.length;N++)if(m=x[N],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(N,1);break t}}m=f.createElement(c),Es(m,c,o),f.head.appendChild(m);break;case"meta":if(x=B0("meta","content",f).get(c+(o.content||""))){for(N=0;N<x.length;N++)if(m=x[N],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(N,1);break t}}m=f.createElement(c),Es(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[rt]=t,j(m),c=m}t.stateNode=c}else U0(f,t.type,t.stateNode);else t.stateNode=V0(f,c,t.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?U0(f,t.type,t.stateNode):V0(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&vm(t,t.memoizedProps,o.memoizedProps)}break;case 27:Ws(r,t),Gs(t),c&512&&(cs||o===null||sa(o,o.return)),o!==null&&c&4&&vm(t,t.memoizedProps,o.memoizedProps);break;case 5:if(Ws(r,t),Gs(t),c&512&&(cs||o===null||sa(o,o.return)),t.flags&32){f=t.stateNode;try{Cn(f,"")}catch(ct){gn(t,t.return,ct)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,vm(t,f,o!==null?o.memoizedProps:f)),c&1024&&(wm=!0);break;case 6:if(Ws(r,t),Gs(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,o=t.stateNode;try{o.nodeValue=c}catch(ct){gn(t,t.return,ct)}}break;case 3:if(Oh=null,f=Dr,Dr=Ph(r.containerInfo),Ws(r,t),Dr=f,Gs(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{yl(r.containerInfo)}catch(ct){gn(t,t.return,ct)}wm&&(wm=!1,Ub(t));break;case 4:c=Dr,Dr=Ph(t.stateNode.containerInfo),Ws(r,t),Gs(t),Dr=c;break;case 12:Ws(r,t),Gs(t);break;case 31:Ws(r,t),Gs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,wh(t,c)));break;case 13:Ws(r,t),Gs(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(kh=Lt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,wh(t,c)));break;case 22:f=t.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,se=Na,be=cs;if(Na=se||f,cs=be||z,Ws(r,t),cs=be,Na=se,Gs(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||z||Na||cs||po(t)),o=null,r=t;;){if(r.tag===5||r.tag===26){if(o===null){z=o=r;try{if(m=z.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{N=z.stateNode;var Re=z.memoizedProps.style,ie=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;N.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(ct){gn(z,z.return,ct)}}}else if(r.tag===6){if(o===null){z=r;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(ct){gn(z,z.return,ct)}}}else if(r.tag===18){if(o===null){z=r;try{var de=z.stateNode;f?C0(de,!0):C0(z.stateNode,!1)}catch(ct){gn(z,z.return,ct)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,wh(t,o))));break;case 19:Ws(r,t),Gs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,wh(t,c)));break;case 30:break;case 21:break;default:Ws(r,t),Gs(t)}}function Gs(t){var r=t.flags;if(r&2){try{for(var o,c=t.return;c!==null;){if(Ab(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=bm(t);xh(t,m,f);break;case 5:var x=o.stateNode;o.flags&32&&(Cn(x,""),o.flags&=-33);var N=bm(t);xh(t,N,x);break;case 3:case 4:var z=o.stateNode.containerInfo,se=bm(t);xm(t,se,z);break;default:throw Error(i(161))}}catch(be){gn(t,t.return,be)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Ub(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Ub(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ra(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Db(t,r.alternate,r),r=r.sibling}function po(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ci(4,r,r.return),po(r);break;case 1:sa(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Cb(r,r.return,o),po(r);break;case 27:Ic(r.stateNode);case 26:case 5:sa(r,r.return),po(r);break;case 22:r.memoizedState===null&&po(r);break;case 30:po(r);break;default:po(r)}t=t.sibling}}function Aa(t,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,x=m.flags;switch(m.tag){case 0:case 11:case 15:Aa(f,m,o),_c(4,m);break;case 1:if(Aa(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(se){gn(c,c.return,se)}if(c=m,f=c.updateQueue,f!==null){var N=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)yv(z[f],N)}catch(se){gn(c,c.return,se)}}o&&x&64&&Nb(m),kc(m,m.return);break;case 27:Ib(m);case 26:case 5:Aa(f,m,o),o&&c===null&&x&4&&Rb(m),kc(m,m.return);break;case 12:Aa(f,m,o);break;case 31:Aa(f,m,o),o&&x&4&&Ob(f,m);break;case 13:Aa(f,m,o),o&&x&4&&Vb(f,m);break;case 22:m.memoizedState===null&&Aa(f,m,o),kc(m,m.return);break;case 30:break;default:Aa(f,m,o)}r=r.sibling}}function _m(t,r){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&cc(o))}function km(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&cc(t))}function Pr(t,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zb(t,r,o,c),r=r.sibling}function zb(t,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Pr(t,r,o,c),f&2048&&_c(9,r);break;case 1:Pr(t,r,o,c);break;case 3:Pr(t,r,o,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&cc(t)));break;case 12:if(f&2048){Pr(t,r,o,c),t=r.stateNode;try{var m=r.memoizedProps,x=m.id,N=m.onPostCommit;typeof N=="function"&&N(x,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){gn(r,r.return,z)}}else Pr(t,r,o,c);break;case 31:Pr(t,r,o,c);break;case 13:Pr(t,r,o,c);break;case 23:break;case 22:m=r.stateNode,x=r.alternate,r.memoizedState!==null?m._visibility&2?Pr(t,r,o,c):Tc(t,r):m._visibility&2?Pr(t,r,o,c):(m._visibility|=2,il(t,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&_m(x,r);break;case 24:Pr(t,r,o,c),f&2048&&km(r.alternate,r);break;default:Pr(t,r,o,c)}}function il(t,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,x=r,N=o,z=c,se=x.flags;switch(x.tag){case 0:case 11:case 15:il(m,x,N,z,f),_c(8,x);break;case 23:break;case 22:var be=x.stateNode;x.memoizedState!==null?be._visibility&2?il(m,x,N,z,f):Tc(m,x):(be._visibility|=2,il(m,x,N,z,f)),f&&se&2048&&_m(x.alternate,x);break;case 24:il(m,x,N,z,f),f&&se&2048&&km(x.alternate,x);break;default:il(m,x,N,z,f)}r=r.sibling}}function Tc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=t,c=r,f=c.flags;switch(c.tag){case 22:Tc(o,c),f&2048&&_m(c.alternate,c);break;case 24:Tc(o,c),f&2048&&km(c.alternate,c);break;default:Tc(o,c)}r=r.sibling}}var jc=8192;function ol(t,r,o){if(t.subtreeFlags&jc)for(t=t.child;t!==null;)Fb(t,r,o),t=t.sibling}function Fb(t,r,o){switch(t.tag){case 26:ol(t,r,o),t.flags&jc&&t.memoizedState!==null&&FT(o,Dr,t.memoizedState,t.memoizedProps);break;case 5:ol(t,r,o);break;case 3:case 4:var c=Dr;Dr=Ph(t.stateNode.containerInfo),ol(t,r,o),Dr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=jc,jc=16777216,ol(t,r,o),jc=c):ol(t,r,o));break;default:ol(t,r,o)}}function qb(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ec(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];xs=c,$b(c,t)}qb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hb(t),t=t.sibling}function Hb(t){switch(t.tag){case 0:case 11:case 15:Ec(t),t.flags&2048&&ci(9,t,t.return);break;case 3:Ec(t);break;case 12:Ec(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,_h(t)):Ec(t);break;default:Ec(t)}}function _h(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];xs=c,$b(c,t)}qb(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ci(8,r,r.return),_h(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,_h(r));break;default:_h(r)}t=t.sibling}}function $b(t,r){for(;xs!==null;){var o=xs;switch(o.tag){case 0:case 11:case 15:ci(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:cc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,xs=c;else e:for(o=t;xs!==null;){c=xs;var f=c.sibling,m=c.return;if(Pb(c),c===o){xs=null;break e}if(f!==null){f.return=m,xs=f;break e}xs=m}}}var sT={getCacheForType:function(t){var r=Ts(is),o=r.data.get(t);return o===void 0&&(o=t(),r.data.set(t,o)),o},cacheSignal:function(){return Ts(is).controller.signal}},rT=typeof WeakMap=="function"?WeakMap:Map,cn=0,jn=null,$t=null,Gt=0,pn=0,ar=null,ui=!1,ll=!1,Tm=!1,Ia=0,Wn=0,hi=0,go=0,jm=0,ir=0,cl=0,Sc=null,Ks=null,Em=!1,kh=0,Wb=0,Th=1/0,jh=null,di=null,ps=0,fi=null,ul=null,Ma=0,Sm=0,Nm=null,Gb=null,Nc=0,Cm=null;function or(){return(cn&2)!==0&&Gt!==0?Gt&-Gt:Y.T!==null?Pm():ke()}function Kb(){if(ir===0)if((Gt&536870912)===0||en){var t=Dn;Dn<<=1,(Dn&3932160)===0&&(Dn=262144),ir=t}else ir=536870912;return t=sr.current,t!==null&&(t.flags|=32),ir}function Ys(t,r,o){(t===jn&&(pn===2||pn===9)||t.cancelPendingCommit!==null)&&(hl(t,0),mi(t,Gt,ir,!1)),Yn(t,o),((cn&2)===0||t!==jn)&&(t===jn&&((cn&2)===0&&(go|=o),Wn===4&&mi(t,Gt,ir,!1)),ra(t))}function Yb(t,r,o){if((cn&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&t.expiredLanes)===0||kn(t,r),f=c?oT(t,r):Am(t,r,!0),m=c;do{if(f===0){ll&&!c&&mi(t,r,0,!1);break}else{if(o=t.current.alternate,m&&!aT(o)){f=Am(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var N=t;f=Sc;var z=N.current.memoizedState.isDehydrated;if(z&&(hl(N,x).flags|=256),x=Am(N,x,!1),x!==2){if(Tm&&!z){N.errorRecoveryDisabledLanes|=m,go|=m,f=4;break e}m=Ks,Ks=f,m!==null&&(Ks===null?Ks=m:Ks.push.apply(Ks,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){hl(t,0),mi(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:mi(c,r,ir,!ui);break e;case 2:Ks=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=kh+300-Lt(),10<f)){if(mi(c,r,ir,!ui),zn(c,0,!0)!==0)break e;Ma=r,c.timeoutHandle=E0(Qb.bind(null,c,o,Ks,jh,Em,r,ir,go,cl,ui,m,"Throttled",-0,0),f);break e}Qb(c,o,Ks,jh,Em,r,ir,go,cl,ui,m,null,-0,0)}}break}while(!0);ra(t)}function Qb(t,r,o,c,f,m,x,N,z,se,be,Re,ie,de){if(t.timeoutHandle=-1,Re=r.subtreeFlags,Re&8192||(Re&16785408)===16785408){Re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Us},Fb(r,m,Re);var ct=(m&62914560)===m?kh-Lt():(m&4194048)===m?Wb-Lt():0;if(ct=qT(Re,ct),ct!==null){Ma=m,t.cancelPendingCommit=ct(r0.bind(null,t,r,m,o,c,f,x,N,z,be,Re,null,ie,de)),mi(t,m,x,!se);return}}r0(t,r,m,o,c,f,x,N,z)}function aT(t){for(var r=t;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!tr(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function mi(t,r,o,c){r&=~jm,r&=~go,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-He(f),x=1<<m;c[m]=-1,f&=~x}o!==0&&vs(t,o,r)}function Eh(){return(cn&6)===0?(Cc(0),!1):!0}function Rm(){if($t!==null){if(pn===0)var t=$t.return;else t=$t,_a=io=null,Wf(t),tl=null,hc=0,t=$t;for(;t!==null;)Sb(t.alternate,t),t=t.return;$t=null}}function hl(t,r){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,jT(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),Ma=0,Rm(),jn=t,$t=o=xa(t.current,null),Gt=r,pn=0,ar=null,ui=!1,ll=kn(t,r),Tm=!1,cl=ir=jm=go=hi=Wn=0,Ks=Sc=null,Em=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-He(c),m=1<<f;r|=t[f],c&=~m}return Ia=r,Gu(),o}function Xb(t,r){Pt=null,Y.H=bc,r===el||r===th?(r=fv(),pn=3):r===Df?(r=fv(),pn=4):pn=r===lm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ar=r,$t===null&&(Wn=1,ph(t,gr(r,t.current)))}function Jb(){var t=sr.current;return t===null?!0:(Gt&4194048)===Gt?xr===null:(Gt&62914560)===Gt||(Gt&536870912)!==0?t===xr:!1}function Zb(){var t=Y.H;return Y.H=bc,t===null?bc:t}function e0(){var t=Y.A;return Y.A=sT,t}function Sh(){Wn=4,ui||(Gt&4194048)!==Gt&&sr.current!==null||(ll=!0),(hi&134217727)===0&&(go&134217727)===0||jn===null||mi(jn,Gt,ir,!1)}function Am(t,r,o){var c=cn;cn|=2;var f=Zb(),m=e0();(jn!==t||Gt!==r)&&(jh=null,hl(t,r)),r=!1;var x=Wn;e:do try{if(pn!==0&&$t!==null){var N=$t,z=ar;switch(pn){case 8:Rm(),x=6;break e;case 3:case 2:case 9:case 6:sr.current===null&&(r=!0);var se=pn;if(pn=0,ar=null,dl(t,N,z,se),o&&ll){x=0;break e}break;default:se=pn,pn=0,ar=null,dl(t,N,z,se)}}iT(),x=Wn;break}catch(be){Xb(t,be)}while(!0);return r&&t.shellSuspendCounter++,_a=io=null,cn=c,Y.H=f,Y.A=m,$t===null&&(jn=null,Gt=0,Gu()),x}function iT(){for(;$t!==null;)t0($t)}function oT(t,r){var o=cn;cn|=2;var c=Zb(),f=e0();jn!==t||Gt!==r?(jh=null,Th=Lt()+500,hl(t,r)):ll=kn(t,r);e:do try{if(pn!==0&&$t!==null){r=$t;var m=ar;t:switch(pn){case 1:pn=0,ar=null,dl(t,r,m,1);break;case 2:case 9:if(hv(m)){pn=0,ar=null,n0(r);break}r=function(){pn!==2&&pn!==9||jn!==t||(pn=7),ra(t)},m.then(r,r);break e;case 3:pn=7;break e;case 4:pn=5;break e;case 7:hv(m)?(pn=0,ar=null,n0(r)):(pn=0,ar=null,dl(t,r,m,7));break;case 5:var x=null;switch($t.tag){case 26:x=$t.memoizedState;case 5:case 27:var N=$t;if(x?z0(x):N.stateNode.complete){pn=0,ar=null;var z=N.sibling;if(z!==null)$t=z;else{var se=N.return;se!==null?($t=se,Nh(se)):$t=null}break t}}pn=0,ar=null,dl(t,r,m,5);break;case 6:pn=0,ar=null,dl(t,r,m,6);break;case 8:Rm(),Wn=6;break e;default:throw Error(i(462))}}lT();break}catch(be){Xb(t,be)}while(!0);return _a=io=null,Y.H=c,Y.A=f,cn=o,$t!==null?0:(jn=null,Gt=0,Gu(),Wn)}function lT(){for(;$t!==null&&!ts();)t0($t)}function t0(t){var r=jb(t.alternate,t,Ia);t.memoizedProps=t.pendingProps,r===null?Nh(t):$t=r}function n0(t){var r=t,o=r.alternate;switch(r.tag){case 15:case 0:r=bb(o,r,r.pendingProps,r.type,void 0,Gt);break;case 11:r=bb(o,r,r.pendingProps,r.type.render,r.ref,Gt);break;case 5:Wf(r);default:Sb(o,r),r=$t=ev(r,Ia),r=jb(o,r,Ia)}t.memoizedProps=t.pendingProps,r===null?Nh(t):$t=r}function dl(t,r,o,c){_a=io=null,Wf(r),tl=null,hc=0;var f=r.return;try{if(Qk(t,f,r,o,Gt)){Wn=1,ph(t,gr(o,t.current)),$t=null;return}}catch(m){if(f!==null)throw $t=f,m;Wn=1,ph(t,gr(o,t.current)),$t=null;return}r.flags&32768?(en||c===1?t=!0:ll||(Gt&536870912)!==0?t=!1:(ui=t=!0,(c===2||c===9||c===3||c===6)&&(c=sr.current,c!==null&&c.tag===13&&(c.flags|=16384))),s0(r,t)):Nh(r)}function Nh(t){var r=t;do{if((r.flags&32768)!==0){s0(r,ui);return}t=r.return;var o=Zk(r.alternate,r,Ia);if(o!==null){$t=o;return}if(r=r.sibling,r!==null){$t=r;return}$t=r=t}while(r!==null);Wn===0&&(Wn=5)}function s0(t,r){do{var o=eT(t.alternate,t);if(o!==null){o.flags&=32767,$t=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(t=t.sibling,t!==null)){$t=t;return}$t=t=o}while(t!==null);Wn=6,$t=null}function r0(t,r,o,c,f,m,x,N,z){t.cancelPendingCommit=null;do Ch();while(ps!==0);if((cn&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=bf,ss(t,o,m,x,N,z),t===jn&&($t=jn=null,Gt=0),ul=r,fi=t,Ma=o,Sm=m,Nm=f,Gb=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,dT(ye,function(){return c0(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=_e.p,_e.p=2,x=cn,cn|=4;try{tT(t,r,o)}finally{cn=x,_e.p=f,Y.T=c}}ps=1,a0(),i0(),o0()}}function a0(){if(ps===1){ps=0;var t=fi,r=ul,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var c=_e.p;_e.p=2;var f=cn;cn|=4;try{Bb(r,t);var m=qm,x=$y(t.containerInfo),N=m.focusedElem,z=m.selectionRange;if(x!==N&&N&&N.ownerDocument&&Hy(N.ownerDocument.documentElement,N)){if(z!==null&&mf(N)){var se=z.start,be=z.end;if(be===void 0&&(be=se),"selectionStart"in N)N.selectionStart=se,N.selectionEnd=Math.min(be,N.value.length);else{var Re=N.ownerDocument||document,ie=Re&&Re.defaultView||window;if(ie.getSelection){var de=ie.getSelection(),ct=N.textContent.length,_t=Math.min(z.start,ct),_n=z.end===void 0?_t:Math.min(z.end,ct);!de.extend&&_t>_n&&(x=_n,_n=_t,_t=x);var Q=qy(N,_t),W=qy(N,_n);if(Q&&W&&(de.rangeCount!==1||de.anchorNode!==Q.node||de.anchorOffset!==Q.offset||de.focusNode!==W.node||de.focusOffset!==W.offset)){var ne=Re.createRange();ne.setStart(Q.node,Q.offset),de.removeAllRanges(),_t>_n?(de.addRange(ne),de.extend(W.node,W.offset)):(ne.setEnd(W.node,W.offset),de.addRange(ne))}}}}for(Re=[],de=N;de=de.parentNode;)de.nodeType===1&&Re.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<Re.length;N++){var Te=Re[N];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}zh=!!Fm,qm=Fm=null}finally{cn=f,_e.p=c,Y.T=o}}t.current=r,ps=2}}function i0(){if(ps===2){ps=0;var t=fi,r=ul,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var c=_e.p;_e.p=2;var f=cn;cn|=4;try{Db(t,r.alternate,r)}finally{cn=f,_e.p=c,Y.T=o}}ps=3}}function o0(){if(ps===4||ps===3){ps=0,Nt();var t=fi,r=ul,o=Ma,c=Gb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ps=5:(ps=0,ul=fi=null,l0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(di=null),ge(o),r=r.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(Ue,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,f=_e.p,_e.p=2,Y.T=null;try{for(var m=t.onRecoverableError,x=0;x<c.length;x++){var N=c[x];m(N.value,{componentStack:N.stack})}}finally{Y.T=r,_e.p=f}}(Ma&3)!==0&&Ch(),ra(t),f=t.pendingLanes,(o&261930)!==0&&(f&42)!==0?t===Cm?Nc++:(Nc=0,Cm=t):Nc=0,Cc(0)}}function l0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,cc(r)))}function Ch(){return a0(),i0(),o0(),c0()}function c0(){if(ps!==5)return!1;var t=fi,r=Sm;Sm=0;var o=ge(Ma),c=Y.T,f=_e.p;try{_e.p=32>o?32:o,Y.T=null,o=Nm,Nm=null;var m=fi,x=Ma;if(ps=0,ul=fi=null,Ma=0,(cn&6)!==0)throw Error(i(331));var N=cn;if(cn|=4,Hb(m.current),zb(m,m.current,x,o),cn=N,Cc(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(Ue,m)}catch{}return!0}finally{_e.p=f,Y.T=c,l0(t,r)}}function u0(t,r,o){r=gr(o,r),r=om(t.stateNode,r,2),t=ii(t,r,2),t!==null&&(Yn(t,2),ra(t))}function gn(t,r,o){if(t.tag===3)u0(t,t,o);else for(;r!==null;){if(r.tag===3){u0(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(di===null||!di.has(c))){t=gr(o,t),o=hb(2),c=ii(r,o,2),c!==null&&(db(o,c,r,t),Yn(c,2),ra(c));break}}r=r.return}}function Im(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new rT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(Tm=!0,f.add(o),t=cT.bind(null,t,r,o),r.then(t,t))}function cT(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,jn===t&&(Gt&o)===o&&(Wn===4||Wn===3&&(Gt&62914560)===Gt&&300>Lt()-kh?(cn&2)===0&&hl(t,0):jm|=o,cl===Gt&&(cl=0)),ra(t)}function h0(t,r){r===0&&(r=ns()),t=so(t,r),t!==null&&(Yn(t,r),ra(t))}function uT(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),h0(t,o)}function hT(t,r){var o=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),h0(t,o)}function dT(t,r){return Xe(t,r)}var Rh=null,fl=null,Mm=!1,Ah=!1,Dm=!1,pi=0;function ra(t){t!==fl&&t.next===null&&(fl===null?Rh=fl=t:fl=fl.next=t),Ah=!0,Mm||(Mm=!0,mT())}function Cc(t,r){if(!Dm&&Ah){Dm=!0;do for(var o=!1,c=Rh;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var x=c.suspendedLanes,N=c.pingedLanes;m=(1<<31-He(42|t)+1)-1,m&=f&~(x&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,p0(c,m))}else m=Gt,m=zn(c,c===jn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||kn(c,m)||(o=!0,p0(c,m));c=c.next}while(o);Dm=!1}}function fT(){d0()}function d0(){Ah=Mm=!1;var t=0;pi!==0&&TT()&&(t=pi);for(var r=Lt(),o=null,c=Rh;c!==null;){var f=c.next,m=f0(c,r);m===0?(c.next=null,o===null?Rh=f:o.next=f,f===null&&(fl=o)):(o=c,(t!==0||(m&3)!==0)&&(Ah=!0)),c=f}ps!==0&&ps!==5||Cc(t),pi!==0&&(pi=0)}function f0(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-He(m),N=1<<x,z=f[x];z===-1?((N&o)===0||(N&c)!==0)&&(f[x]=ys(N,r)):z<=r&&(t.expiredLanes|=N),m&=~N}if(r=jn,o=Gt,o=zn(t,t===r?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,o===0||t===r&&(pn===2||pn===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Ht(c),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||kn(t,o)){if(r=o&-o,r===t.callbackPriority)return r;switch(c!==null&&Ht(c),ge(o)){case 2:case 8:o=hn;break;case 32:o=ye;break;case 268435456:o=Pe;break;default:o=ye}return c=m0.bind(null,t),o=Xe(o,c),t.callbackPriority=r,t.callbackNode=o,r}return c!==null&&c!==null&&Ht(c),t.callbackPriority=2,t.callbackNode=null,2}function m0(t,r){if(ps!==0&&ps!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(Ch()&&t.callbackNode!==o)return null;var c=Gt;return c=zn(t,t===jn?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Yb(t,c,r),f0(t,Lt()),t.callbackNode!=null&&t.callbackNode===o?m0.bind(null,t):null)}function p0(t,r){if(Ch())return null;Yb(t,r,!0)}function mT(){ET(function(){(cn&6)!==0?Xe(Ct,fT):d0()})}function Pm(){if(pi===0){var t=Jo;t===0&&(t=sn,sn<<=1,(sn&261888)===0&&(sn=256)),pi=t}return pi}function g0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ka(""+t)}function y0(t,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,t.id&&o.setAttribute("form",t.id),r.parentNode.insertBefore(o,r),t=new FormData(t),o.parentNode.removeChild(o),t}function pT(t,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=g0((f[mt]||null).action),x=c.submitter;x&&(r=(r=x[mt]||null)?g0(r.formAction):x.getAttribute("formAction"),r!==null&&(m=r,x=null));var N=new Xr("action","action",null,c,f);t.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(pi!==0){var z=x?y0(f,x):new FormData(f);tm(o,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(N.preventDefault(),z=x?y0(f,x):new FormData(f),tm(o,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var Lm=0;Lm<vf.length;Lm++){var Om=vf[Lm],gT=Om.toLowerCase(),yT=Om[0].toUpperCase()+Om.slice(1);Mr(gT,"on"+yT)}Mr(Ky,"onAnimationEnd"),Mr(Yy,"onAnimationIteration"),Mr(Qy,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Mk,"onTransitionRun"),Mr(Dk,"onTransitionStart"),Mr(Pk,"onTransitionCancel"),Mr(Xy,"onTransitionEnd"),ve("onMouseEnter",["mouseout","mouseover"]),ve("onMouseLeave",["mouseout","mouseover"]),ve("onPointerEnter",["pointerout","pointerover"]),ve("onPointerLeave",["pointerout","pointerover"]),Me("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Me("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Me("onBeforeInput",["compositionend","keypress","textInput","paste"]),Me("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Me("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Me("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rc));function v0(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var x=c.length-1;0<=x;x--){var N=c[x],z=N.instance,se=N.currentTarget;if(N=N.listener,z!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=se;try{m(f)}catch(be){Wu(be)}f.currentTarget=null,m=z}else for(x=0;x<c.length;x++){if(N=c[x],z=N.instance,se=N.currentTarget,N=N.listener,z!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=se;try{m(f)}catch(be){Wu(be)}f.currentTarget=null,m=z}}}}function Wt(t,r){var o=r[xt];o===void 0&&(o=r[xt]=new Set);var c=t+"__bubble";o.has(c)||(b0(r,t,2,!1),o.add(c))}function Vm(t,r,o){var c=0;r&&(c|=4),b0(o,t,c,r)}var Ih="_reactListening"+Math.random().toString(36).slice(2);function Bm(t){if(!t[Ih]){t[Ih]=!0,L.forEach(function(o){o!=="selectionchange"&&(vT.has(o)||Vm(o,!1,t),Vm(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ih]||(r[Ih]=!0,Vm("selectionchange",!1,r))}}function b0(t,r,o,c){switch(K0(r)){case 2:var f=WT;break;case 8:f=GT;break;default:f=ep}o=f.bind(null,r,o,t),f=void 0,!Yi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function Um(t,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var N=c.stateNode.containerInfo;if(N===f)break;if(x===4)for(x=c.return;x!==null;){var z=x.tag;if((z===3||z===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;N!==null;){if(x=Tn(N),x===null)return;if(z=x.tag,z===5||z===6||z===26||z===27){c=m=x;continue e}N=N.parentNode}}c=c.return}Qa(function(){var se=m,be=dr(o),Re=[];e:{var ie=Jy.get(t);if(ie!==void 0){var de=Xr,ct=t;switch(t){case"keypress":if(Xi(o)===0)break e;case"keydown":case"keyup":de=qu;break;case"focusin":ct="focus",de=Zi;break;case"focusout":ct="blur",de=Zi;break;case"beforeblur":case"afterblur":de=Zi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=v;break;case Ky:case Yy:case Qy:de=Lu;break;case Xy:de=R;break;case"scroll":case"scrollend":de=ec;break;case"wheel":de=he;break;case"copy":case"cut":case"paste":de=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=ba;break;case"toggle":case"beforetoggle":de=Dt}var _t=(r&4)!==0,_n=!_t&&(t==="scroll"||t==="scrollend"),Q=_t?ie!==null?ie+"Capture":null:ie;_t=[];for(var W=se,ne;W!==null;){var Te=W;if(ne=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ne===null||Q===null||(Te=Cr(W,Q),Te!=null&&_t.push(Ac(W,Te,ne))),_n)break;W=W.return}0<_t.length&&(ie=new de(ie,ct,null,o,be),Re.push({event:ie,listeners:_t}))}}if((r&7)===0){e:{if(ie=t==="mouseover"||t==="pointerover",de=t==="mouseout"||t==="pointerout",ie&&o!==Xl&&(ct=o.relatedTarget||o.fromElement)&&(Tn(ct)||ct[it]))break e;if((de||ie)&&(ie=be.window===be?be:(ie=be.ownerDocument)?ie.defaultView||ie.parentWindow:window,de?(ct=o.relatedTarget||o.toElement,de=se,ct=ct?Tn(ct):null,ct!==null&&(_n=u(ct),_t=ct.tag,ct!==_n||_t!==5&&_t!==27&&_t!==6)&&(ct=null)):(de=null,ct=se),de!==ct)){if(_t=tc,Te="onMouseLeave",Q="onMouseEnter",W="mouse",(t==="pointerout"||t==="pointerover")&&(_t=ba,Te="onPointerLeave",Q="onPointerEnter",W="pointer"),_n=de==null?ie:ue(de),ne=ct==null?ie:ue(ct),ie=new _t(Te,W+"leave",de,o,be),ie.target=_n,ie.relatedTarget=ne,Te=null,Tn(be)===se&&(_t=new _t(Q,W+"enter",ct,o,be),_t.target=ne,_t.relatedTarget=_n,Te=_t),_n=Te,de&&ct)t:{for(_t=bT,Q=de,W=ct,ne=0,Te=Q;Te;Te=_t(Te))ne++;Te=0;for(var yt=W;yt;yt=_t(yt))Te++;for(;0<ne-Te;)Q=_t(Q),ne--;for(;0<Te-ne;)W=_t(W),Te--;for(;ne--;){if(Q===W||W!==null&&Q===W.alternate){_t=Q;break t}Q=_t(Q),W=_t(W)}_t=null}else _t=null;de!==null&&x0(Re,ie,de,_t,!1),ct!==null&&_n!==null&&x0(Re,_n,ct,_t,!0)}}e:{if(ie=se?ue(se):window,de=ie.nodeName&&ie.nodeName.toLowerCase(),de==="select"||de==="input"&&ie.type==="file")var rn=Oy;else if(Py(ie))if(Vy)rn=Rk;else{rn=Nk;var ht=Sk}else de=ie.nodeName,!de||de.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?se&&Fn(se.elementType)&&(rn=Oy):rn=Ck;if(rn&&(rn=rn(t,se))){Ly(Re,rn,o,be);break e}ht&&ht(t,ie,se),t==="focusout"&&se&&ie.type==="number"&&se.memoizedProps.value!=null&&fs(ie,"number",ie.value)}switch(ht=se?ue(se):window,t){case"focusin":(Py(ht)||ht.contentEditable==="true")&&(Ho=ht,pf=se,ic=null);break;case"focusout":ic=pf=Ho=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,Wy(Re,o,be);break;case"selectionchange":if(Ik)break;case"keydown":case"keyup":Wy(Re,o,be)}var Vt;if(ln)e:{switch(t){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else qo?eo(t,o)&&(Kt="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Kt="onCompositionStart");Kt&&(ea&&o.locale!=="ko"&&(qo||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&qo&&(Vt=Zl()):(Qr=be,Jl="value"in Qr?Qr.value:Qr.textContent,qo=!0)),ht=Mh(se,Kt),0<ht.length&&(Kt=new Zr(Kt,t,null,o,be),Re.push({event:Kt,listeners:ht}),Vt?Kt.data=Vt:(Vt=Fo(o),Vt!==null&&(Kt.data=Vt)))),(Vt=mr?kk(t,o):Tk(t,o))&&(Kt=Mh(se,"onBeforeInput"),0<Kt.length&&(ht=new Zr("onBeforeInput","beforeinput",null,o,be),Re.push({event:ht,listeners:Kt}),ht.data=Vt)),pT(Re,t,se,o,be)}v0(Re,r)})}function Ac(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Mh(t,r){for(var o=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Cr(t,o),f!=null&&c.unshift(Ac(t,f,m)),f=Cr(t,r),f!=null&&c.push(Ac(t,f,m))),t.tag===3)return c;t=t.return}return[]}function bT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function x0(t,r,o,c,f){for(var m=r._reactName,x=[];o!==null&&o!==c;){var N=o,z=N.alternate,se=N.stateNode;if(N=N.tag,z!==null&&z===c)break;N!==5&&N!==26&&N!==27||se===null||(z=se,f?(se=Cr(o,m),se!=null&&x.unshift(Ac(o,se,z))):f||(se=Cr(o,m),se!=null&&x.push(Ac(o,se,z)))),o=o.return}x.length!==0&&t.push({event:r,listeners:x})}var xT=/\r\n?/g,wT=/\u0000|\uFFFD/g;function w0(t){return(typeof t=="string"?t:""+t).replace(xT,`
`).replace(wT,"")}function _0(t,r){return r=w0(r),w0(t)===r}function wn(t,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Cn(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Cn(t,""+c);break;case"className":te(t,"class",c);break;case"tabIndex":te(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":te(t,o,c);break;case"style":Pn(t,c,m);break;case"data":if(r!=="object"){te(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){t.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=Ka(""+c),t.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&wn(t,r,"name",f.name,f,null),wn(t,r,"formEncType",f.formEncType,f,null),wn(t,r,"formMethod",f.formMethod,f,null),wn(t,r,"formTarget",f.formTarget,f,null)):(wn(t,r,"encType",f.encType,f,null),wn(t,r,"method",f.method,f,null),wn(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=Ka(""+c),t.setAttribute(o,c);break;case"onClick":c!=null&&(t.onclick=Us);break;case"onScroll":c!=null&&Wt("scroll",t);break;case"onScrollEnd":c!=null&&Wt("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}o=Ka(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""+c):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":c===!0?t.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,c):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(o,c):t.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(o):t.setAttribute(o,c);break;case"popover":Wt("beforetoggle",t),Wt("toggle",t),J(t,"popover",c);break;case"xlinkActuate":me(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":me(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":me(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":me(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":me(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":me(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":me(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":me(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":me(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":J(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Kr.get(o)||o,J(t,o,c))}}function zm(t,r,o,c,f,m){switch(o){case"style":Pn(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"children":typeof c=="string"?Cn(t,c):(typeof c=="number"||typeof c=="bigint")&&Cn(t,""+c);break;case"onScroll":c!=null&&Wt("scroll",t);break;case"onScrollEnd":c!=null&&Wt("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!K.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=t[mt]||null,m=m!=null?m[o]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(r,c,f);break e}o in t?t[o]=c:c===!0?t.setAttribute(o,""):J(t,o,c)}}}function Es(t,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Wt("error",t),Wt("load",t);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:wn(t,r,m,x,o,null)}}f&&wn(t,r,"srcSet",o.srcSet,o,null),c&&wn(t,r,"src",o.src,o,null);return;case"input":Wt("invalid",t);var N=m=x=f=null,z=null,se=null;for(c in o)if(o.hasOwnProperty(c)){var be=o[c];if(be!=null)switch(c){case"name":f=be;break;case"type":x=be;break;case"checked":z=be;break;case"defaultChecked":se=be;break;case"value":m=be;break;case"defaultValue":N=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(i(137,r));break;default:wn(t,r,c,be,o,null)}}as(t,m,N,z,se,x,f,!1);return;case"select":Wt("invalid",t),c=x=m=null;for(f in o)if(o.hasOwnProperty(f)&&(N=o[f],N!=null))switch(f){case"value":m=N;break;case"defaultValue":x=N;break;case"multiple":c=N;default:wn(t,r,f,N,o,null)}r=m,o=x,t.multiple=!!c,r!=null?ms(t,!!c,r,!1):o!=null&&ms(t,!!c,o,!0);return;case"textarea":Wt("invalid",t),m=f=c=null;for(x in o)if(o.hasOwnProperty(x)&&(N=o[x],N!=null))switch(x){case"value":c=N;break;case"defaultValue":f=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:wn(t,r,x,N,o,null)}Sn(t,c,f,m);return;case"option":for(z in o)o.hasOwnProperty(z)&&(c=o[z],c!=null)&&(z==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":wn(t,r,z,c,o,null));return;case"dialog":Wt("beforetoggle",t),Wt("toggle",t),Wt("cancel",t),Wt("close",t);break;case"iframe":case"object":Wt("load",t);break;case"video":case"audio":for(c=0;c<Rc.length;c++)Wt(Rc[c],t);break;case"image":Wt("error",t),Wt("load",t);break;case"details":Wt("toggle",t);break;case"embed":case"source":case"link":Wt("error",t),Wt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in o)if(o.hasOwnProperty(se)&&(c=o[se],c!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:wn(t,r,se,c,o,null)}return;default:if(Fn(r)){for(be in o)o.hasOwnProperty(be)&&(c=o[be],c!==void 0&&zm(t,r,be,c,o,void 0));return}}for(N in o)o.hasOwnProperty(N)&&(c=o[N],c!=null&&wn(t,r,N,c,o,null))}function _T(t,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,N=null,z=null,se=null,be=null;for(de in o){var Re=o[de];if(o.hasOwnProperty(de)&&Re!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":z=Re;default:c.hasOwnProperty(de)||wn(t,r,de,null,c,Re)}}for(var ie in c){var de=c[ie];if(Re=o[ie],c.hasOwnProperty(ie)&&(de!=null||Re!=null))switch(ie){case"type":m=de;break;case"name":f=de;break;case"checked":se=de;break;case"defaultChecked":be=de;break;case"value":x=de;break;case"defaultValue":N=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,r));break;default:de!==Re&&wn(t,r,ie,de,c,Re)}}Zs(t,x,N,z,se,be,m,f);return;case"select":de=x=N=ie=null;for(m in o)if(z=o[m],o.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":de=z;default:c.hasOwnProperty(m)||wn(t,r,m,null,c,z)}for(f in c)if(m=c[f],z=o[f],c.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":ie=m;break;case"defaultValue":N=m;break;case"multiple":x=m;default:m!==z&&wn(t,r,f,m,c,z)}r=N,o=x,c=de,ie!=null?ms(t,!!o,ie,!1):!!c!=!!o&&(r!=null?ms(t,!!o,r,!0):ms(t,!!o,o?[]:"",!1));return;case"textarea":de=ie=null;for(N in o)if(f=o[N],o.hasOwnProperty(N)&&f!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:wn(t,r,N,null,c,f)}for(x in c)if(f=c[x],m=o[x],c.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":ie=f;break;case"defaultValue":de=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&wn(t,r,x,f,c,m)}zt(t,ie,de);return;case"option":for(var ct in o)ie=o[ct],o.hasOwnProperty(ct)&&ie!=null&&!c.hasOwnProperty(ct)&&(ct==="selected"?t.selected=!1:wn(t,r,ct,null,c,ie));for(z in c)ie=c[z],de=o[z],c.hasOwnProperty(z)&&ie!==de&&(ie!=null||de!=null)&&(z==="selected"?t.selected=ie&&typeof ie!="function"&&typeof ie!="symbol":wn(t,r,z,ie,c,de));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in o)ie=o[_t],o.hasOwnProperty(_t)&&ie!=null&&!c.hasOwnProperty(_t)&&wn(t,r,_t,null,c,ie);for(se in c)if(ie=c[se],de=o[se],c.hasOwnProperty(se)&&ie!==de&&(ie!=null||de!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,r));break;default:wn(t,r,se,ie,c,de)}return;default:if(Fn(r)){for(var _n in o)ie=o[_n],o.hasOwnProperty(_n)&&ie!==void 0&&!c.hasOwnProperty(_n)&&zm(t,r,_n,void 0,c,ie);for(be in c)ie=c[be],de=o[be],!c.hasOwnProperty(be)||ie===de||ie===void 0&&de===void 0||zm(t,r,be,ie,c,de);return}}for(var Q in o)ie=o[Q],o.hasOwnProperty(Q)&&ie!=null&&!c.hasOwnProperty(Q)&&wn(t,r,Q,null,c,ie);for(Re in c)ie=c[Re],de=o[Re],!c.hasOwnProperty(Re)||ie===de||ie==null&&de==null||wn(t,r,Re,ie,c,de)}function k0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,x=f.initiatorType,N=f.duration;if(m&&N&&k0(x)){for(x=0,N=f.responseEnd,c+=1;c<o.length;c++){var z=o[c],se=z.startTime;if(se>N)break;var be=z.transferSize,Re=z.initiatorType;be&&k0(Re)&&(z=z.responseEnd,x+=be*(z<N?1:(N-se)/(z-se)))}if(--c,r+=8*(m+x)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Fm=null,qm=null;function Dh(t){return t.nodeType===9?t:t.ownerDocument}function T0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Hm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var $m=null;function TT(){var t=window.event;return t&&t.type==="popstate"?t===$m?!1:($m=t,!0):($m=null,!1)}var E0=typeof setTimeout=="function"?setTimeout:void 0,jT=typeof clearTimeout=="function"?clearTimeout:void 0,S0=typeof Promise=="function"?Promise:void 0,ET=typeof queueMicrotask=="function"?queueMicrotask:typeof S0<"u"?function(t){return S0.resolve(null).then(t).catch(ST)}:E0;function ST(t){setTimeout(function(){throw t})}function gi(t){return t==="head"}function N0(t,r){var o=r,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){t.removeChild(f),yl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Ic(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Ic(o);for(var m=o.firstChild;m;){var x=m.nextSibling,N=m.nodeName;m[rs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=x}}else o==="body"&&Ic(t.ownerDocument.body);o=f}while(o);yl(r)}function C0(t,r){var o=t;t=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=c}while(o)}function Wm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Wm(o),bs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function NT(t,r,o,c){for(;t.nodeType===1;){var f=o;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[rs])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=wr(t.nextSibling),t===null)break}return null}function CT(t,r,o){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=wr(t.nextSibling),t===null))return null;return t}function R0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=wr(t.nextSibling),t===null))return null;return t}function Gm(t){return t.data==="$?"||t.data==="$~"}function Km(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function RT(t,r){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function wr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Ym=null;function A0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(r===0)return wr(t.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}t=t.nextSibling}return null}function I0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return t;r--}else o!=="/$"&&o!=="/&"||r++}t=t.previousSibling}return null}function M0(t,r,o){switch(r=Dh(o),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Ic(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);bs(t)}var _r=new Map,D0=new Set;function Ph(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Da=_e.d;_e.d={f:AT,r:IT,D:MT,C:DT,L:PT,m:LT,X:VT,S:OT,M:BT};function AT(){var t=Da.f(),r=Eh();return t||r}function IT(t){var r=H(t);r!==null&&r.tag===5&&r.type==="form"?Xv(r):Da.r(t)}var ml=typeof document>"u"?null:document;function P0(t,r,o){var c=ml;if(c&&typeof r=="string"&&r){var f=dn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),D0.has(f)||(D0.add(f),t={rel:t,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Es(r,"link",t),j(r),c.head.appendChild(r)))}}function MT(t){Da.D(t),P0("dns-prefetch",t,null)}function DT(t,r){Da.C(t,r),P0("preconnect",t,r)}function PT(t,r,o){Da.L(t,r,o);var c=ml;if(c&&t&&r){var f='link[rel="preload"][as="'+dn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+dn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+dn(o.imageSizes)+'"]')):f+='[href="'+dn(t)+'"]';var m=f;switch(r){case"style":m=pl(t);break;case"script":m=gl(t)}_r.has(m)||(t=T({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:t,as:r},o),_r.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(Mc(m))||r==="script"&&c.querySelector(Dc(m))||(r=c.createElement("link"),Es(r,"link",t),j(r),c.head.appendChild(r)))}}function LT(t,r){Da.m(t,r);var o=ml;if(o&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+dn(c)+'"][href="'+dn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=gl(t)}if(!_r.has(m)&&(t=T({rel:"modulepreload",href:t},r),_r.set(m,t),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Dc(m)))return}c=o.createElement("link"),Es(c,"link",t),j(c),o.head.appendChild(c)}}}function OT(t,r,o){Da.S(t,r,o);var c=ml;if(c&&t){var f=b(c).hoistableStyles,m=pl(t);r=r||"default";var x=f.get(m);if(!x){var N={loading:0,preload:null};if(x=c.querySelector(Mc(m)))N.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},o),(o=_r.get(m))&&Qm(t,o);var z=x=c.createElement("link");j(z),Es(z,"link",t),z._p=new Promise(function(se,be){z.onload=se,z.onerror=be}),z.addEventListener("load",function(){N.loading|=1}),z.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Lh(x,r,c)}x={type:"stylesheet",instance:x,count:1,state:N},f.set(m,x)}}}function VT(t,r){Da.X(t,r);var o=ml;if(o&&t){var c=b(o).hoistableScripts,f=gl(t),m=c.get(f);m||(m=o.querySelector(Dc(f)),m||(t=T({src:t,async:!0},r),(r=_r.get(f))&&Xm(t,r),m=o.createElement("script"),j(m),Es(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function BT(t,r){Da.M(t,r);var o=ml;if(o&&t){var c=b(o).hoistableScripts,f=gl(t),m=c.get(f);m||(m=o.querySelector(Dc(f)),m||(t=T({src:t,async:!0,type:"module"},r),(r=_r.get(f))&&Xm(t,r),m=o.createElement("script"),j(m),Es(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function L0(t,r,o,c){var f=(f=Le.current)?Ph(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=pl(o.href),o=b(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=pl(o.href);var m=b(f).hoistableStyles,x=m.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=f.querySelector(Mc(t)))&&!m._p&&(x.instance=m,x.state.loading=5),_r.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},_r.set(t,o),m||UT(f,t,o,x.state))),r&&c===null)throw Error(i(528,""));return x}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=gl(o),o=b(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function pl(t){return'href="'+dn(t)+'"'}function Mc(t){return'link[rel="stylesheet"]['+t+"]"}function O0(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function UT(t,r,o,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Es(r,"link",o),j(r),t.head.appendChild(r))}function gl(t){return'[src="'+dn(t)+'"]'}function Dc(t){return"script[async]"+t}function V0(t,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+dn(o.href)+'"]');if(c)return r.instance=c,j(c),c;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),j(c),Es(c,"style",f),Lh(c,o.precedence,t),r.instance=c;case"stylesheet":f=pl(o.href);var m=t.querySelector(Mc(f));if(m)return r.state.loading|=4,r.instance=m,j(m),m;c=O0(o),(f=_r.get(f))&&Qm(c,f),m=(t.ownerDocument||t).createElement("link"),j(m);var x=m;return x._p=new Promise(function(N,z){x.onload=N,x.onerror=z}),Es(m,"link",c),r.state.loading|=4,Lh(m,o.precedence,t),r.instance=m;case"script":return m=gl(o.src),(f=t.querySelector(Dc(m)))?(r.instance=f,j(f),f):(c=o,(f=_r.get(m))&&(c=T({},o),Xm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),j(f),Es(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Lh(c,o.precedence,t));return r.instance}function Lh(t,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,x=0;x<c.length;x++){var N=c[x];if(N.dataset.precedence===r)m=N;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(t,r.firstChild))}function Qm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Xm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Oh=null;function B0(t,r,o){if(Oh===null){var c=new Map,f=Oh=new Map;f.set(o,c)}else f=Oh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(t))return c;for(c.set(t,null),o=o.getElementsByTagName(t),f=0;f<o.length;f++){var m=o[f];if(!(m[rs]||m[rt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(r)||"";x=t+x;var N=c.get(x);N?N.push(m):c.set(x,[m])}}return c}function U0(t,r,o){t=t.ownerDocument||t,t.head.insertBefore(o,r==="title"?t.querySelector("head > title"):null)}function zT(t,r,o){if(o===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function z0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function FT(t,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=pl(c.href),m=r.querySelector(Mc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Vh.bind(t),r.then(t,t)),o.state.loading|=4,o.instance=m,j(m);return}m=r.ownerDocument||r,c=O0(c),(f=_r.get(f))&&Qm(c,f),m=m.createElement("link"),j(m);var x=m;x._p=new Promise(function(N,z){x.onload=N,x.onerror=z}),Es(m,"link",c),o.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Vh.bind(t),r.addEventListener("load",o),r.addEventListener("error",o))}}var Jm=0;function qT(t,r){return t.stylesheets&&t.count===0&&Uh(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var c=setTimeout(function(){if(t.stylesheets&&Uh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Jm===0&&(Jm=62500*kT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Uh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Jm?50:800)+r);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Vh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Bh=null;function Uh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Bh=new Map,r.forEach(HT,t),Bh=null,Vh.call(t))}function HT(t,r){if(!(r.state.loading&4)){var o=Bh.get(t);if(o)var c=o.get(null);else{o=new Map,Bh.set(t,o);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}f=r.instance,x=f.getAttribute("data-precedence"),m=o.get(x)||c,m===c&&o.set(null,f),o.set(x,f),this.count++,c=Vh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Pc={$$typeof:ce,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function $T(t,r,o,c,f,m,x,N,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=En(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=En(0),this.hiddenUpdates=En(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function F0(t,r,o,c,f,m,x,N,z,se,be,Re){return t=new $T(t,r,o,x,z,se,be,Re,N),r=1,m===!0&&(r|=24),m=nr(3,null,null,r),t.current=m,m.stateNode=t,r=Af(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Pf(m),t}function q0(t){return t?(t=Go,t):Go}function H0(t,r,o,c,f,m){f=q0(f),c.context===null?c.context=f:c.pendingContext=f,c=ai(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=ii(t,c,r),o!==null&&(Ys(o,t,r),fc(o,t,r))}function $0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Zm(t,r){$0(t,r),(t=t.alternate)&&$0(t,r)}function W0(t){if(t.tag===13||t.tag===31){var r=so(t,67108864);r!==null&&Ys(r,t,67108864),Zm(t,67108864)}}function G0(t){if(t.tag===13||t.tag===31){var r=or();r=$(r);var o=so(t,r);o!==null&&Ys(o,t,r),Zm(t,r)}}var zh=!0;function WT(t,r,o,c){var f=Y.T;Y.T=null;var m=_e.p;try{_e.p=2,ep(t,r,o,c)}finally{_e.p=m,Y.T=f}}function GT(t,r,o,c){var f=Y.T;Y.T=null;var m=_e.p;try{_e.p=8,ep(t,r,o,c)}finally{_e.p=m,Y.T=f}}function ep(t,r,o,c){if(zh){var f=tp(c);if(f===null)Um(t,r,c,Fh,o),Y0(t,c);else if(YT(f,t,r,o,c))c.stopPropagation();else if(Y0(t,c),r&4&&-1<KT.indexOf(t)){for(;f!==null;){var m=H(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=on(m.pendingLanes);if(x!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;x;){var z=1<<31-He(x);N.entanglements[1]|=z,x&=~z}ra(m),(cn&6)===0&&(Th=Lt()+500,Cc(0))}}break;case 31:case 13:N=so(m,2),N!==null&&Ys(N,m,2),Eh(),Zm(m,2)}if(m=tp(c),m===null&&Um(t,r,c,Fh,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Um(t,r,c,null,o)}}function tp(t){return t=dr(t),np(t)}var Fh=null;function np(t){if(Fh=null,t=Tn(t),t!==null){var r=u(t);if(r===null)t=null;else{var o=r.tag;if(o===13){if(t=h(r),t!==null)return t;t=null}else if(o===31){if(t=p(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Fh=t,null}function K0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mn()){case Ct:return 2;case hn:return 8;case ye:case Ne:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var sp=!1,yi=null,vi=null,bi=null,Lc=new Map,Oc=new Map,xi=[],KT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Y0(t,r){switch(t){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":Lc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oc.delete(r.pointerId)}}function Vc(t,r,o,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=H(r),r!==null&&W0(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function YT(t,r,o,c,f){switch(r){case"focusin":return yi=Vc(yi,t,r,o,c,f),!0;case"dragenter":return vi=Vc(vi,t,r,o,c,f),!0;case"mouseover":return bi=Vc(bi,t,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Lc.set(m,Vc(Lc.get(m)||null,t,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Oc.set(m,Vc(Oc.get(m)||null,t,r,o,c,f)),!0}return!1}function Q0(t){var r=Tn(t.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=h(o),r!==null){t.blockedOn=r,xe(t.priority,function(){G0(o)});return}}else if(r===31){if(r=p(o),r!==null){t.blockedOn=r,xe(t.priority,function(){G0(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=tp(t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);Xl=c,o.target.dispatchEvent(c),Xl=null}else return r=H(o),r!==null&&W0(r),t.blockedOn=o,!1;r.shift()}return!0}function X0(t,r,o){qh(t)&&o.delete(r)}function QT(){sp=!1,yi!==null&&qh(yi)&&(yi=null),vi!==null&&qh(vi)&&(vi=null),bi!==null&&qh(bi)&&(bi=null),Lc.forEach(X0),Oc.forEach(X0)}function Hh(t,r){t.blockedOn===r&&(t.blockedOn=null,sp||(sp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,QT)))}var $h=null;function J0(t){$h!==t&&($h=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){$h===t&&($h=null);for(var r=0;r<t.length;r+=3){var o=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(np(c||o)===null)continue;break}var m=H(o);m!==null&&(t.splice(r,3),r-=3,tm(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function yl(t){function r(z){return Hh(z,t)}yi!==null&&Hh(yi,t),vi!==null&&Hh(vi,t),bi!==null&&Hh(bi,t),Lc.forEach(r),Oc.forEach(r);for(var o=0;o<xi.length;o++){var c=xi[o];c.blockedOn===t&&(c.blockedOn=null)}for(;0<xi.length&&(o=xi[0],o.blockedOn===null);)Q0(o),o.blockedOn===null&&xi.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],x=f[mt]||null;if(typeof m=="function")x||J0(o);else if(x){var N=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[mt]||null)N=x.formAction;else if(np(f)!==null)continue}else N=x.action;typeof N=="function"?o[c+1]=N:(o.splice(c,3),c-=3),J0(o)}}}function Z0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function rp(t){this._internalRoot=t}Wh.prototype.render=rp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=or();H0(o,c,t,r,null,null)},Wh.prototype.unmount=rp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;H0(t.current,2,null,t,null,null),Eh(),r[it]=null}};function Wh(t){this._internalRoot=t}Wh.prototype.unstable_scheduleHydration=function(t){if(t){var r=ke();t={blockedOn:null,target:t,priority:r};for(var o=0;o<xi.length&&r!==0&&r<xi[o].priority;o++);xi.splice(o,0,t),o===0&&Q0(t)}};var e1=e.version;if(e1!=="19.2.4")throw Error(i(527,e1,"19.2.4"));_e.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?w(t):null,t=t===null?null:t.stateNode,t};var XT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{Ue=Gh.inject(XT),nt=Gh}catch{}}return Uc.createRoot=function(t,r){if(!l(t))throw Error(i(299));var o=!1,c="",f=ob,m=lb,x=cb;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=F0(t,1,!1,null,null,o,c,null,f,m,x,Z0),t[it]=r.current,Bm(t),new rp(r)},Uc.hydrateRoot=function(t,r,o){if(!l(t))throw Error(i(299));var c=!1,f="",m=ob,x=lb,N=cb,z=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError),o.formState!==void 0&&(z=o.formState)),r=F0(t,1,!0,r,o??null,c,f,z,m,x,N,Z0),r.context=q0(null),o=r.current,c=or(),c=$(c),f=ai(c),f.callback=null,ii(o,f,c),o=c,r.current.lanes=o,Yn(r,o),ra(r),t[it]=r.current,Bm(t),new Wh(r)},Uc.version="19.2.4",Uc}var u1;function oj(){if(u1)return op.exports;u1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),op.exports=ij(),op.exports}var lj=oj();const cj="modulepreload",uj=function(s){return"/login/"+s},h1={},Sr=function(e,n,i){let l=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=g(n.map(y=>{if(y=uj(y),y in h1)return;h1[y]=!0;const w=y.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${T}`))return;const S=document.createElement("link");if(S.rel=w?"stylesheet":cj,w||(S.as="script"),S.crossOrigin="",S.href=y,p&&S.setAttribute("nonce",p),document.head.appendChild(S),w)return new Promise((O,G)=>{S.addEventListener("load",O),S.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var d1="popstate";function hj(s={}){function e(i,l){let{pathname:u,search:h,hash:p}=i.location;return qp("",{pathname:u,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:au(l)}return fj(e,n,null,s)}function Bn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Er(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dj(){return Math.random().toString(36).substring(2,10)}function f1(s,e){return{usr:s.state,key:s.key,idx:e}}function qp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Fl(e):e,state:n,key:e&&e.key||i||dj()}}function au({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Fl(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function fj(s,e,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,h=l.history,p="POP",g=null,y=w();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function w(){return(h.state||{idx:null}).idx}function T(){p="POP";let V=w(),Z=V==null?null:V-y;y=V,g&&g({action:p,location:U.location,delta:Z})}function S(V,Z){p="PUSH";let X=qp(U.location,V,Z);y=w()+1;let ce=f1(X,y),Se=U.createHref(X);try{h.pushState(ce,"",Se)}catch(Be){if(Be instanceof DOMException&&Be.name==="DataCloneError")throw Be;l.location.assign(Se)}u&&g&&g({action:p,location:U.location,delta:1})}function O(V,Z){p="REPLACE";let X=qp(U.location,V,Z);y=w();let ce=f1(X,y),Se=U.createHref(X);h.replaceState(ce,"",Se),u&&g&&g({action:p,location:U.location,delta:0})}function G(V){return mj(V)}let U={get action(){return p},get location(){return s(l,h)},listen(V){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(d1,T),g=V,()=>{l.removeEventListener(d1,T),g=null}},createHref(V){return e(l,V)},createURL:G,encodeLocation(V){let Z=G(V);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:S,replace:O,go(V){return h.go(V)}};return U}function mj(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Bn(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:au(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function f2(s,e,n="/"){return pj(s,e,n,!1)}function pj(s,e,n,i){let l=typeof e=="string"?Fl(e):e,u=za(l.pathname||"/",n);if(u==null)return null;let h=m2(s);gj(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=Sj(u);p=jj(h[g],y,i)}return p}function m2(s,e=[],n=[],i="",l=!1){let u=(h,p,g=l,y)=>{let w={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(i)&&g)return;Bn(w.relativePath.startsWith(i),`Absolute route path "${w.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(i.length)}let T=Oa([i,w.relativePath]),S=n.concat(w);h.children&&h.children.length>0&&(Bn(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),m2(h.children,e,S,T,g)),!(h.path==null&&!h.index)&&e.push({path:T,score:kj(T,h.index),routesMeta:S})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of p2(h.path))u(h,p,!0,g)}),e}function p2(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let h=p2(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function gj(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:Tj(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var yj=/^:[\w-]+$/,vj=3,bj=2,xj=1,wj=10,_j=-2,m1=s=>s==="*";function kj(s,e){let n=s.split("/"),i=n.length;return n.some(m1)&&(i+=_j),e&&(i+=bj),n.filter(l=>!m1(l)).reduce((l,u)=>l+(yj.test(u)?vj:u===""?xj:wj),i)}function Tj(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function jj(s,e,n=!1){let{routesMeta:i}=s,l={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,w=u==="/"?e:e.slice(u.length)||"/",T=xd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),S=g.route;if(!T&&y&&n&&!i[i.length-1].route.index&&(T=xd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!T)return null;Object.assign(l,T.params),h.push({params:l,pathname:Oa([u,T.pathname]),pathnameBase:Aj(Oa([u,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(u=Oa([u,T.pathnameBase]))}return h}function xd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=Ej(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:w,isOptional:T},S)=>{if(w==="*"){let G=p[S]||"";h=u.slice(0,u.length-G.length).replace(/(.)\/+$/,"$1")}const O=p[S];return T&&!O?y[w]=void 0:y[w]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:s}}function Ej(s,e=!1,n=!0){Er(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function Sj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Er(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function za(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var Nj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Cj(s,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof s=="string"?Fl(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=p1(n.substring(1),"/"):u=p1(n,e)):u=e,{pathname:u,search:Ij(i),hash:Mj(l)}}function p1(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function hp(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Rj(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bg(s){let e=Rj(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function xg(s,e,n,i=!1){let l;typeof s=="string"?l=Fl(s):(l={...s},Bn(!l.pathname||!l.pathname.includes("?"),hp("?","pathname","search",l)),Bn(!l.pathname||!l.pathname.includes("#"),hp("#","pathname","hash",l)),Bn(!l.search||!l.search.includes("#"),hp("#","search","hash",l)));let u=s===""||l.pathname==="",h=u?"/":l.pathname,p;if(h==null)p=n;else{let T=e.length-1;if(!i&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),T-=1;l.pathname=S.join("/")}p=T>=0?e[T]:"/"}let g=Cj(l,p),y=h&&h!=="/"&&h.endsWith("/"),w=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var Oa=s=>s.join("/").replace(/\/\/+/g,"/"),Aj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Ij=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Mj=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Dj=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Pj(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Lj(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var g2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function y2(s,e){let n=s;if(typeof n!="string"||!Nj.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(g2)try{let u=new URL(window.location.href),h=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=za(h.pathname,e);h.origin===u.origin&&p!=null?n=p+h.search+h.hash:l=!0}catch{Er(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var v2=["POST","PUT","PATCH","DELETE"];new Set(v2);var Oj=["GET",...v2];new Set(Oj);var ql=_.createContext(null);ql.displayName="DataRouter";var Ud=_.createContext(null);Ud.displayName="DataRouterState";var Vj=_.createContext(!1),b2=_.createContext({isTransitioning:!1});b2.displayName="ViewTransition";var Bj=_.createContext(new Map);Bj.displayName="Fetchers";var Uj=_.createContext(null);Uj.displayName="Await";var ur=_.createContext(null);ur.displayName="Navigation";var vu=_.createContext(null);vu.displayName="Location";var $r=_.createContext({outlet:null,matches:[],isDataRoute:!1});$r.displayName="Route";var wg=_.createContext(null);wg.displayName="RouteError";var x2="REACT_ROUTER_ERROR",zj="REDIRECT",Fj="ROUTE_ERROR_RESPONSE";function qj(s){if(s.startsWith(`${x2}:${zj}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Hj(s){if(s.startsWith(`${x2}:${Fj}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Dj(e.status,e.statusText,e.data)}catch{}}function $j(s,{relative:e}={}){Bn(Hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=_.useContext(ur),{hash:l,pathname:u,search:h}=bu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Oa([n,u])),i.createHref({pathname:p,search:h,hash:l})}function Hl(){return _.useContext(vu)!=null}function Wr(){return Bn(Hl(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(vu).location}var w2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _2(s){_.useContext(ur).static||_.useLayoutEffect(s)}function Rs(){let{isDataRoute:s}=_.useContext($r);return s?aE():Wj()}function Wj(){Bn(Hl(),"useNavigate() may be used only in the context of a <Router> component.");let s=_.useContext(ql),{basename:e,navigator:n}=_.useContext(ur),{matches:i}=_.useContext($r),{pathname:l}=Wr(),u=JSON.stringify(bg(i)),h=_.useRef(!1);return _2(()=>{h.current=!0}),_.useCallback((g,y={})=>{if(Er(h.current,w2),!h.current)return;if(typeof g=="number"){n.go(g);return}let w=xg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Oa([e,w.pathname])),(y.replace?n.replace:n.push)(w,y.state,y)},[e,n,u,l,s])}_.createContext(null);function Gj(){let{matches:s}=_.useContext($r),e=s[s.length-1];return e?e.params:{}}function bu(s,{relative:e}={}){let{matches:n}=_.useContext($r),{pathname:i}=Wr(),l=JSON.stringify(bg(n));return _.useMemo(()=>xg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function Kj(s,e){return k2(s,e)}function k2(s,e,n,i,l){Bn(Hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=_.useContext(ur),{matches:h}=_.useContext($r),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",w=p?p.pathnameBase:"/",T=p&&p.route;{let X=T&&T.path||"";j2(y,!T||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let S=Wr(),O;if(e){let X=typeof e=="string"?Fl(e):e;Bn(w==="/"||X.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${X.pathname}" was given in the \`location\` prop.`),O=X}else O=S;let G=O.pathname||"/",U=G;if(w!=="/"){let X=w.replace(/^\//,"").split("/");U="/"+G.replace(/^\//,"").split("/").slice(X.length).join("/")}let V=f2(s,{pathname:U});Er(T||V!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Er(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Z=Zj(V&&V.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:Oa([w,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?w:Oa([w,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),h,n,i,l);return e&&Z?_.createElement(vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},Z):Z}function Yj(){let s=rE(),e=Pj(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:l},n):null,h)}var Qj=_.createElement(Yj,null),T2=class extends _.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=Hj(s.digest);n&&(s=n)}let e=s!==void 0?_.createElement($r.Provider,{value:this.props.routeContext},_.createElement(wg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?_.createElement(Xj,{error:s},e):e}};T2.contextType=Vj;var dp=new WeakMap;function Xj({children:s,error:e}){let{basename:n}=_.useContext(ur);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=qj(e.digest);if(i){let l=dp.get(e);if(l)throw l;let u=y2(i.location,n);if(g2&&!dp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw dp.set(e,h),h}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function Jj({routeContext:s,match:e,children:n}){let i=_.useContext(ql);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement($r.Provider,{value:s},n)}function Zj(s,e=[],n=null,i=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,h=n?.errors;if(h!=null){let w=u.findIndex(T=>T.route.id&&h?.[T.route.id]!==void 0);Bn(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,w+1))}let p=!1,g=-1;if(n)for(let w=0;w<u.length;w++){let T=u[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=w),T.route.id){let{loaderData:S,errors:O}=n,G=T.route.loader&&!S.hasOwnProperty(T.route.id)&&(!O||O[T.route.id]===void 0);if(T.route.lazy||G){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&i?(w,T)=>{i(w,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Lj(n.matches),errorInfo:T})}:void 0;return u.reduceRight((w,T,S)=>{let O,G=!1,U=null,V=null;n&&(O=h&&T.route.id?h[T.route.id]:void 0,U=T.route.errorElement||Qj,p&&(g<0&&S===0?(j2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),G=!0,V=null):g===S&&(G=!0,V=T.route.hydrateFallbackElement||null)));let Z=e.concat(u.slice(0,S+1)),X=()=>{let ce;return O?ce=U:G?ce=V:T.route.Component?ce=_.createElement(T.route.Component,null):T.route.element?ce=T.route.element:ce=w,_.createElement(Jj,{match:T,routeContext:{outlet:w,matches:Z,isDataRoute:n!=null},children:ce})};return n&&(T.route.ErrorBoundary||T.route.errorElement||S===0)?_.createElement(T2,{location:n.location,revalidation:n.revalidation,component:U,error:O,children:X(),routeContext:{outlet:null,matches:Z,isDataRoute:!0},onError:y}):X()},null)}function _g(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eE(s){let e=_.useContext(ql);return Bn(e,_g(s)),e}function tE(s){let e=_.useContext(Ud);return Bn(e,_g(s)),e}function nE(s){let e=_.useContext($r);return Bn(e,_g(s)),e}function kg(s){let e=nE(s),n=e.matches[e.matches.length-1];return Bn(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function sE(){return kg("useRouteId")}function rE(){let s=_.useContext(wg),e=tE("useRouteError"),n=kg("useRouteError");return s!==void 0?s:e.errors?.[n]}function aE(){let{router:s}=eE("useNavigate"),e=kg("useNavigate"),n=_.useRef(!1);return _2(()=>{n.current=!0}),_.useCallback(async(l,u={})=>{Er(n.current,w2),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var g1={};function j2(s,e,n){!e&&!g1[s]&&(g1[s]=!0,Er(!1,n))}_.memo(iE);function iE({routes:s,future:e,state:n,onError:i}){return k2(s,void 0,n,i,e)}function oE({to:s,replace:e,state:n,relative:i}){Bn(Hl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=_.useContext(ur);Er(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext($r),{pathname:h}=Wr(),p=Rs(),g=xg(s,bg(u),h,i==="path"),y=JSON.stringify(g);return _.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function Vn(s){Bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lE({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){Bn(!Hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=_.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[p,l,u,h]);typeof n=="string"&&(n=Fl(n));let{pathname:y="/",search:w="",hash:T="",state:S=null,key:O="default"}=n,G=_.useMemo(()=>{let U=za(y,p);return U==null?null:{location:{pathname:U,search:w,hash:T,state:S,key:O},navigationType:i}},[p,y,w,T,S,O,i]);return Er(G!=null,`<Router basename="${p}"> is not able to match the URL "${y}${w}${T}" because it does not start with the basename, so the <Router> won't render anything.`),G==null?null:_.createElement(ur.Provider,{value:g},_.createElement(vu.Provider,{children:e,value:G}))}function cE({children:s,location:e}){return Kj(Hp(s),e)}function Hp(s,e=[]){let n=[];return _.Children.forEach(s,(i,l)=>{if(!_.isValidElement(i))return;let u=[...e,l];if(i.type===_.Fragment){n.push.apply(n,Hp(i.props.children,u));return}Bn(i.type===Vn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Hp(i.props.children,u)),n.push(h)}),n}var ld="get",cd="application/x-www-form-urlencoded";function zd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function uE(s){return zd(s)&&s.tagName.toLowerCase()==="button"}function hE(s){return zd(s)&&s.tagName.toLowerCase()==="form"}function dE(s){return zd(s)&&s.tagName.toLowerCase()==="input"}function fE(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function mE(s,e){return s.button===0&&(!e||e==="_self")&&!fE(s)}function $p(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let i=s[n];return e.concat(Array.isArray(i)?i.map(l=>[n,l]):[[n,i]])},[]))}function pE(s,e){let n=$p(s);return e&&e.forEach((i,l)=>{n.has(l)||e.getAll(l).forEach(u=>{n.append(l,u)})}),n}var Kh=null;function gE(){if(Kh===null)try{new FormData(document.createElement("form"),0),Kh=!1}catch{Kh=!0}return Kh}var yE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fp(s){return s!=null&&!yE.has(s)?(Er(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cd}"`),null):s}function vE(s,e){let n,i,l,u,h;if(hE(s)){let p=s.getAttribute("action");i=p?za(p,e):null,n=s.getAttribute("method")||ld,l=fp(s.getAttribute("enctype"))||cd,u=new FormData(s)}else if(uE(s)||dE(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?za(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||ld,l=fp(s.getAttribute("formenctype"))||fp(p.getAttribute("enctype"))||cd,u=new FormData(p,s),!gE()){let{name:y,type:w,value:T}=s;if(w==="image"){let S=y?`${y}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else y&&u.append(y,T)}}else{if(zd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ld,i=null,l=cd,h=s}return u&&l==="text/plain"&&(h=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function bE(s,e,n,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&za(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function xE(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wE(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function _E(s,e,n){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await xE(u,n);return h.links?h.links():[]}return[]}));return EE(i.flat(1).filter(wE).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function y1(s,e,n,i,l,u){let h=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let w=i.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function kE(s,e,{includeHydrateFallback:n}={}){return TE(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function TE(s){return[...new Set(s)]}function jE(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function EE(s,e){let n=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(jE(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function E2(){let s=_.useContext(ql);return Tg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function SE(){let s=_.useContext(Ud);return Tg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var jg=_.createContext(void 0);jg.displayName="FrameworkContext";function S2(){let s=_.useContext(jg);return Tg(s,"You must render this element inside a <HydratedRouter> element"),s}function NE(s,e){let n=_.useContext(jg),[i,l]=_.useState(!1),[u,h]=_.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:T}=e,S=_.useRef(null);_.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let U=Z=>{Z.forEach(X=>{h(X.isIntersecting)})},V=new IntersectionObserver(U,{threshold:.5});return S.current&&V.observe(S.current),()=>{V.disconnect()}}},[s]),_.useEffect(()=>{if(i){let U=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(U)}}},[i]);let O=()=>{l(!0)},G=()=>{l(!1),h(!1)};return n?s!=="intent"?[u,S,{}]:[u,S,{onFocus:zc(p,O),onBlur:zc(g,G),onMouseEnter:zc(y,O),onMouseLeave:zc(w,G),onTouchStart:zc(T,O)}]:[!1,S,{}]}function zc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function CE({page:s,...e}){let{router:n}=E2(),i=_.useMemo(()=>f2(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?_.createElement(AE,{page:s,matches:i,...e}):null}function RE(s){let{manifest:e,routeModules:n}=S2(),[i,l]=_.useState([]);return _.useEffect(()=>{let u=!1;return _E(s,e,n).then(h=>{u||l(h)}),()=>{u=!0}},[s,e,n]),i}function AE({page:s,matches:e,...n}){let i=Wr(),{future:l,manifest:u,routeModules:h}=S2(),{basename:p}=E2(),{loaderData:g,matches:y}=SE(),w=_.useMemo(()=>y1(s,e,y,u,i,"data"),[s,e,y,u,i]),T=_.useMemo(()=>y1(s,e,y,u,i,"assets"),[s,e,y,u,i]),S=_.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let U=new Set,V=!1;if(e.forEach(X=>{let ce=u.routes[X.route.id];!ce||!ce.hasLoader||(!w.some(Se=>Se.route.id===X.route.id)&&X.route.id in g&&h[X.route.id]?.shouldRevalidate||ce.hasClientLoader?V=!0:U.add(X.route.id))}),U.size===0)return[];let Z=bE(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return V&&U.size>0&&Z.searchParams.set("_routes",e.filter(X=>U.has(X.route.id)).map(X=>X.route.id).join(",")),[Z.pathname+Z.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,w,e,s,h]),O=_.useMemo(()=>kE(T,u),[T,u]),G=RE(T);return _.createElement(_.Fragment,null,S.map(U=>_.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),O.map(U=>_.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),G.map(({key:U,link:V})=>_.createElement("link",{key:U,nonce:n.nonce,...V,crossOrigin:V.crossOrigin??n.crossOrigin})))}function IE(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ME=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ME&&(window.__reactRouterVersion="7.13.0")}catch{}function DE({basename:s,children:e,unstable_useTransitions:n,window:i}){let l=_.useRef();l.current==null&&(l.current=hj({window:i,v5Compat:!0}));let u=l.current,[h,p]=_.useState({action:u.action,location:u.location}),g=_.useCallback(y=>{n===!1?p(y):_.startTransition(()=>p(y))},[n]);return _.useLayoutEffect(()=>u.listen(g),[u,g]),_.createElement(lE,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:n})}var N2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C2=_.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:h,state:p,target:g,to:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:S,...O},G){let{basename:U,unstable_useTransitions:V}=_.useContext(ur),Z=typeof y=="string"&&N2.test(y),X=y2(y,U);y=X.to;let ce=$j(y,{relative:l}),[Se,Be,Oe]=NE(i,O),I=VE(y,{replace:h,state:p,target:g,preventScrollReset:w,relative:l,viewTransition:T,unstable_defaultShouldRevalidate:S,unstable_useTransitions:V});function E(P){e&&e(P),P.defaultPrevented||I(P)}let A=_.createElement("a",{...O,...Oe,href:X.absoluteURL||ce,onClick:X.isExternal||u?e:E,ref:IE(G,Be),target:g,"data-discover":!Z&&n==="render"?"true":void 0});return Se&&!Z?_.createElement(_.Fragment,null,A,_.createElement(CE,{page:ce})):A});C2.displayName="Link";var PE=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:h,viewTransition:p,children:g,...y},w){let T=bu(h,{relative:y.relative}),S=Wr(),O=_.useContext(Ud),{navigator:G,basename:U}=_.useContext(ur),V=O!=null&&HE(T)&&p===!0,Z=G.encodeLocation?G.encodeLocation(T).pathname:T.pathname,X=S.pathname,ce=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(X=X.toLowerCase(),ce=ce?ce.toLowerCase():null,Z=Z.toLowerCase()),ce&&U&&(ce=za(ce,U)||ce);const Se=Z!=="/"&&Z.endsWith("/")?Z.length-1:Z.length;let Be=X===Z||!l&&X.startsWith(Z)&&X.charAt(Se)==="/",Oe=ce!=null&&(ce===Z||!l&&ce.startsWith(Z)&&ce.charAt(Z.length)==="/"),I={isActive:Be,isPending:Oe,isTransitioning:V},E=Be?e:void 0,A;typeof i=="function"?A=i(I):A=[i,Be?"active":null,Oe?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(I):u;return _.createElement(C2,{...y,"aria-current":E,className:A,ref:w,style:P,to:h,viewTransition:p},typeof g=="function"?g(I):g)});PE.displayName="NavLink";var LE=_.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:u,method:h=ld,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:S,...O},G)=>{let{unstable_useTransitions:U}=_.useContext(ur),V=FE(),Z=qE(p,{relative:y}),X=h.toLowerCase()==="get"?"get":"post",ce=typeof p=="string"&&N2.test(p),Se=Be=>{if(g&&g(Be),Be.defaultPrevented)return;Be.preventDefault();let Oe=Be.nativeEvent.submitter,I=Oe?.getAttribute("formmethod")||h,E=()=>V(Oe||Be.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:l,state:u,relative:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:S});U&&n!==!1?_.startTransition(()=>E()):E()};return _.createElement("form",{ref:G,method:X,action:Z,onSubmit:i?g:Se,...O,"data-discover":!ce&&s==="render"?"true":void 0})});LE.displayName="Form";function OE(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R2(s){let e=_.useContext(ql);return Bn(e,OE(s)),e}function VE(s,{target:e,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Rs(),w=Wr(),T=bu(s,{relative:u});return _.useCallback(S=>{if(mE(S,e)){S.preventDefault();let O=n!==void 0?n:au(w)===au(T),G=()=>y(s,{replace:O,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?_.startTransition(()=>G()):G()}},[w,y,T,n,i,e,s,l,u,h,p,g])}function BE(s){Er(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=_.useRef($p(s)),n=_.useRef(!1),i=Wr(),l=_.useMemo(()=>pE(i.search,n.current?null:e.current),[i.search]),u=Rs(),h=_.useCallback((p,g)=>{const y=$p(typeof p=="function"?p(new URLSearchParams(l)):p);n.current=!0,u("?"+y,g)},[u,l]);return[l,h]}var UE=0,zE=()=>`__${String(++UE)}__`;function FE(){let{router:s}=R2("useSubmit"),{basename:e}=_.useContext(ur),n=sE(),i=s.fetch,l=s.navigate;return _.useCallback(async(u,h={})=>{let{action:p,method:g,encType:y,formData:w,body:T}=vE(u,e);if(h.navigate===!1){let S=h.fetcherKey||zE();await i(S,n,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:w,body:T,formMethod:h.method||g,formEncType:h.encType||y,flushSync:h.flushSync})}else await l(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:w,body:T,formMethod:h.method||g,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,l,e,n])}function qE(s,{relative:e}={}){let{basename:n}=_.useContext(ur),i=_.useContext($r);Bn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...bu(s||".",{relative:e})},h=Wr();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(T=>T).forEach(T=>p.append("index",T));let w=p.toString();u.search=w?`?${w}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Oa([n,u.pathname])),au(u)}function HE(s,{relative:e}={}){let n=_.useContext(b2);Bn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=R2("useViewTransitionState"),l=bu(s,{relative:e});if(!n.isTransitioning)return!1;let u=za(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=za(n.nextLocation.pathname,i)||n.nextLocation.pathname;return xd(l.pathname,h)!=null||xd(l.pathname,u)!=null}const $E=()=>{};var v1={};const A2=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},WE=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],h=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],h=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},I2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,p=h?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,w=u>>2,T=(u&3)<<4|p>>4;let S=(p&15)<<2|y>>6,O=y&63;g||(O=64,h||(S=64)),i.push(n[w],n[T],n[S],n[O])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(A2(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):WE(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const T=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||T==null)throw new GE;const S=u<<2|p>>4;if(i.push(S),y!==64){const O=p<<4&240|y>>2;if(i.push(O),T!==64){const G=y<<6&192|T;i.push(G)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class GE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KE=function(s){const e=A2(s);return I2.encodeByteArray(e,!0)},wd=function(s){return KE(s).replace(/\./g,"")},M2=function(s){try{return I2.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function YE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const QE=()=>YE().__FIREBASE_DEFAULTS__,XE=()=>{if(typeof process>"u"||typeof v1>"u")return;const s=v1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},JE=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&M2(s[1]);return e&&JSON.parse(e)},Fd=()=>{try{return $E()||QE()||XE()||JE()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},D2=s=>Fd()?.emulatorHosts?.[s],P2=s=>{const e=D2(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},L2=()=>Fd()?.config,O2=s=>Fd()?.[`_${s}`];class ZE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function qi(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Eg(s){return(await fetch(s,{credentials:"include"})).ok}function V2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[wd(JSON.stringify(n)),wd(JSON.stringify(h)),""].join(".")}const Jc={};function eS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Jc))Jc[e]?s.emulator.push(e):s.prod.push(e);return s}function tS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let b1=!1;function Sg(s,e){if(typeof window>"u"||typeof document>"u"||!qi(window.location.host)||Jc[s]===e||Jc[s]||b1)return;Jc[s]=e;function n(S){return`__firebase__banner__${S}`}const i="__firebase__banner",u=eS().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{b1=!0,h()},S}function w(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=tS(i),O=n("text"),G=document.getElementById(O)||document.createElement("span"),U=n("learnmore"),V=document.getElementById(U)||document.createElement("a"),Z=n("preprendIcon"),X=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ce=S.element;p(ce),w(V,U);const Se=y();g(X,Z),ce.append(X,G,V,Se),document.body.appendChild(ce)}u?(G.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Bs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bs())}function sS(){const s=Fd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function iS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oS(){const s=Bs();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function lS(){return!sS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cS(){try{return typeof indexedDB=="object"}catch{return!1}}function uS(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const hS="FirebaseError";class ga extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=hS,Object.setPrototypeOf(this,ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?dS(u,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new ga(l,p,i)}}function dS(s,e){return s.replace(fS,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const fS=/\{\$([^}]+)}/g;function mS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Eo(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=s[l],h=e[l];if(x1(u)&&x1(h)){if(!Eo(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function x1(s){return s!==null&&typeof s=="object"}function wu(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Wc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Gc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function pS(s,e){const n=new gS(s,e);return n.subscribe.bind(n)}class gS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");yS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=mp),l.error===void 0&&(l.error=mp),l.complete===void 0&&(l.complete=mp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function mp(){}function Un(s){return s&&s._delegate?s._delegate:s}class Pi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const bo="[DEFAULT]";class vS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new ZE;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xS(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bS(s){return s===bo?void 0:s}function xS(s){return s.instantiationMode==="EAGER"}class wS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Yt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Yt||(Yt={}));const _S={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},kS=Yt.INFO,TS={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},jS=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=TS[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ng{constructor(e){this.name=e,this._logLevel=kS,this._logHandler=jS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_S[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}const ES=(s,e)=>e.some(n=>s instanceof n);let w1,_1;function SS(){return w1||(w1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NS(){return _1||(_1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B2=new WeakMap,Wp=new WeakMap,U2=new WeakMap,pp=new WeakMap,Cg=new WeakMap;function CS(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Ai(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&B2.set(n,s)}).catch(()=>{}),Cg.set(e,s),e}function RS(s){if(Wp.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Wp.set(s,e)}let Gp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Wp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||U2.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ai(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function AS(s){Gp=s(Gp)}function IS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(gp(this),e,...n);return U2.set(i,e.sort?e.sort():[e]),Ai(i)}:NS().includes(s)?function(...e){return s.apply(gp(this),e),Ai(B2.get(this))}:function(...e){return Ai(s.apply(gp(this),e))}}function MS(s){return typeof s=="function"?IS(s):(s instanceof IDBTransaction&&RS(s),ES(s,SS())?new Proxy(s,Gp):s)}function Ai(s){if(s instanceof IDBRequest)return CS(s);if(pp.has(s))return pp.get(s);const e=MS(s);return e!==s&&(pp.set(s,e),Cg.set(e,s)),e}const gp=s=>Cg.get(s);function DS(s,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(s,e),p=Ai(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Ai(h.result),g.oldVersion,g.newVersion,Ai(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const PS=["get","getKey","getAll","getAllKeys","count"],LS=["put","add","delete","clear"],yp=new Map;function k1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=LS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||PS.includes(n)))return;const u=async function(h,...p){const g=this.transaction(h,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return yp.set(e,u),u}AS(s=>({...s,get:(e,n,i)=>k1(e,n)||s.get(e,n,i),has:(e,n)=>!!k1(e,n)||s.has(e,n)}));class OS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function VS(s){return s.getComponent()?.type==="VERSION"}const Kp="@firebase/app",T1="0.14.7";const Fa=new Ng("@firebase/app"),BS="@firebase/app-compat",US="@firebase/analytics-compat",zS="@firebase/analytics",FS="@firebase/app-check-compat",qS="@firebase/app-check",HS="@firebase/auth",$S="@firebase/auth-compat",WS="@firebase/database",GS="@firebase/data-connect",KS="@firebase/database-compat",YS="@firebase/functions",QS="@firebase/functions-compat",XS="@firebase/installations",JS="@firebase/installations-compat",ZS="@firebase/messaging",eN="@firebase/messaging-compat",tN="@firebase/performance",nN="@firebase/performance-compat",sN="@firebase/remote-config",rN="@firebase/remote-config-compat",aN="@firebase/storage",iN="@firebase/storage-compat",oN="@firebase/firestore",lN="@firebase/ai",cN="@firebase/firestore-compat",uN="firebase",hN="12.8.0";const Yp="[DEFAULT]",dN={[Kp]:"fire-core",[BS]:"fire-core-compat",[zS]:"fire-analytics",[US]:"fire-analytics-compat",[qS]:"fire-app-check",[FS]:"fire-app-check-compat",[HS]:"fire-auth",[$S]:"fire-auth-compat",[WS]:"fire-rtdb",[GS]:"fire-data-connect",[KS]:"fire-rtdb-compat",[YS]:"fire-fn",[QS]:"fire-fn-compat",[XS]:"fire-iid",[JS]:"fire-iid-compat",[ZS]:"fire-fcm",[eN]:"fire-fcm-compat",[tN]:"fire-perf",[nN]:"fire-perf-compat",[sN]:"fire-rc",[rN]:"fire-rc-compat",[aN]:"fire-gcs",[iN]:"fire-gcs-compat",[oN]:"fire-fst",[cN]:"fire-fst-compat",[lN]:"fire-vertex","fire-js":"fire-js",[uN]:"fire-js-all"};const _d=new Map,fN=new Map,Qp=new Map;function j1(s,e){try{s.container.addComponent(e)}catch(n){Fa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function So(s){const e=s.name;if(Qp.has(e))return Fa.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,s);for(const n of _d.values())j1(n,s);for(const n of fN.values())j1(n,s);return!0}function qd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function lr(s){return s==null?!1:s.settings!==void 0}const mN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new xu("app","Firebase",mN);class pN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}const Do=hN;function Rg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Yp,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Ii.create("bad-app-name",{appName:String(l)});if(n||(n=L2()),!n)throw Ii.create("no-options");const u=_d.get(l);if(u){if(Eo(n,u.options)&&Eo(i,u.config))return u;throw Ii.create("duplicate-app",{appName:l})}const h=new wS(l);for(const g of Qp.values())h.addComponent(g);const p=new pN(n,i,h);return _d.set(l,p),p}function Ag(s=Yp){const e=_d.get(s);if(!e&&s===Yp&&L2())return Rg();if(!e)throw Ii.create("no-app",{appName:s});return e}function ca(s,e,n){let i=dN[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fa.warn(h.join(" "));return}So(new Pi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const gN="firebase-heartbeat-database",yN=1,iu="firebase-heartbeat-store";let vp=null;function z2(){return vp||(vp=DS(gN,yN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(iu)}catch(n){console.warn(n)}}}}).catch(s=>{throw Ii.create("idb-open",{originalErrorMessage:s.message})})),vp}async function vN(s){try{const n=(await z2()).transaction(iu),i=await n.objectStore(iu).get(F2(s));return await n.done,i}catch(e){if(e instanceof ga)Fa.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e?.message});Fa.warn(n.message)}}}async function E1(s,e){try{const i=(await z2()).transaction(iu,"readwrite");await i.objectStore(iu).put(e,F2(s)),await i.done}catch(n){if(n instanceof ga)Fa.warn(n.message);else{const i=Ii.create("idb-set",{originalErrorMessage:n?.message});Fa.warn(i.message)}}}function F2(s){return`${s.name}!${s.options.appId}`}const bN=1024,xN=30;class wN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=S1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>xN){const l=TN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=S1(),{heartbeatsToSend:n,unsentEntries:i}=_N(this._heartbeatsCache.heartbeats),l=wd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Fa.warn(e),""}}}function S1(){return new Date().toISOString().substring(0,10)}function _N(s,e=bN){const n=[];let i=s.slice();for(const l of s){const u=n.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),N1(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),N1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class kN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cS()?uS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return E1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return E1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function N1(s){return wd(JSON.stringify({version:2,heartbeats:s})).length}function TN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function jN(s){So(new Pi("platform-logger",e=>new OS(e),"PRIVATE")),So(new Pi("heartbeat",e=>new wN(e),"PRIVATE")),ca(Kp,T1,s),ca(Kp,T1,"esm2020"),ca("fire-js","")}jN("");function q2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EN=q2,H2=new xu("auth","Firebase",q2());const kd=new Ng("@firebase/auth");function SN(s,...e){kd.logLevel<=Yt.WARN&&kd.warn(`Auth (${Do}): ${s}`,...e)}function ud(s,...e){kd.logLevel<=Yt.ERROR&&kd.error(`Auth (${Do}): ${s}`,...e)}function zr(s,...e){throw Ig(s,...e)}function ua(s,...e){return Ig(s,...e)}function $2(s,e,n){const i={...EN(),[e]:n};return new xu("auth","Firebase",i).create(e,{appName:s.name})}function Va(s){return $2(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ig(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return H2.create(s,...e)}function Tt(s,e,...n){if(!s)throw Ig(e,...n)}function Pa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw ud(e),new Error(e)}function qa(s,e){s||Pa(e)}function Xp(){return typeof self<"u"&&self.location?.href||""}function NN(){return C1()==="http:"||C1()==="https:"}function C1(){return typeof self<"u"&&self.location?.protocol||null}function CN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NN()||aS()||"connection"in navigator)?navigator.onLine:!0}function RN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,qa(n>e,"Short delay should be less than long delay!"),this.isMobile=nS()||iS()}get(){return CN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mg(s,e){qa(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class W2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const AN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const IN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MN=new _u(3e4,6e4);function Wa(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ga(s,e,n,i,l={}){return G2(s,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=wu({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return rS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&qi(s.emulatorConfig.host)&&(y.credentials="include"),W2.fetch()(await K2(s,s.config.apiHost,n,p),y)})}async function G2(s,e,n){s._canInitEmulator=!1;const i={...AN,...e};try{const l=new PN(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Yh(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yh(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Yh(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Yh(s,"user-disabled",h);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw $2(s,w,y);zr(s,w)}}catch(l){if(l instanceof ga)throw l;zr(s,"network-request-failed",{message:String(l)})}}async function ku(s,e,n,i,l={}){const u=await Ga(s,e,n,i,l);return"mfaPendingCredential"in u&&zr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function K2(s,e,n,i){const l=`${e}${n}?${i}`,u=s,h=u.config.emulator?Mg(s.config,l):`${s.config.apiScheme}://${l}`;return IN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function DN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ua(this.auth,"network-request-failed")),MN.get())})}}function Yh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=ua(s,e,i);return l.customData._tokenResponse=n,l}function R1(s){return s!==void 0&&s.enterprise!==void 0}class LN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ON(s,e){return Ga(s,"GET","/v2/recaptchaConfig",Wa(s,e))}async function VN(s,e){return Ga(s,"POST","/v1/accounts:delete",e)}async function Td(s,e){return Ga(s,"POST","/v1/accounts:lookup",e)}function Zc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BN(s,e=!1){const n=Un(s),i=await n.getIdToken(e),l=Dg(i);Tt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:Zc(bp(l.auth_time)),issuedAtTime:Zc(bp(l.iat)),expirationTime:Zc(bp(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function bp(s){return Number(s)*1e3}function Dg(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return ud("JWT malformed, contained fewer than 3 sections"),null;try{const l=M2(n);return l?JSON.parse(l):(ud("Failed to decode base64 JWT payload"),null)}catch(l){return ud("Caught error parsing JWT payload as JSON",l?.toString()),null}}function A1(s){const e=Dg(s);return Tt(e,"internal-error"),Tt(typeof e.exp<"u","internal-error"),Tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ou(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ga&&UN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function UN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class zN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function jd(s){const e=s.auth,n=await s.getIdToken(),i=await ou(s,Td(e,{idToken:n}));Tt(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?Y2(l.providerUserInfo):[],h=qN(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!h?.length,y=p?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Jp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,w)}async function FN(s){const e=Un(s);await jd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qN(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function Y2(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function HN(s,e){const n=await G2(s,{},async()=>{const i=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,h=await K2(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&qi(s.emulatorConfig.host)&&(g.credentials="include"),W2.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $N(s,e){return Ga(s,"POST","/v2/accounts:revokeToken",Wa(s,e))}class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt(typeof e.idToken<"u","internal-error"),Tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Tt(e.length!==0,"internal-error");const n=A1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await HN(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,h=new Sl;return i&&(Tt(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(Tt(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(Tt(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return Pa("not implemented")}}function _i(s,e){Tt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Br{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new zN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Jp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await ou(this,this.stsTokenManager.getToken(this.auth,e));return Tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BN(this,e)}reload(){return FN(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await jd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Va(this.auth));const e=await this.getIdToken();return await ou(this,VN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,w=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:O,providerData:G,stsTokenManager:U}=n;Tt(T&&U,e,"internal-error");const V=Sl.fromJSON(this.name,U);Tt(typeof T=="string",e,"internal-error"),_i(i,e.name),_i(l,e.name),Tt(typeof S=="boolean",e,"internal-error"),Tt(typeof O=="boolean",e,"internal-error"),_i(u,e.name),_i(h,e.name),_i(p,e.name),_i(g,e.name),_i(y,e.name),_i(w,e.name);const Z=new Br({uid:T,auth:e,email:l,emailVerified:S,displayName:i,isAnonymous:O,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:V,createdAt:y,lastLoginAt:w});return G&&Array.isArray(G)&&(Z.providerData=G.map(X=>({...X}))),g&&(Z._redirectEventId=g),Z}static async _fromIdTokenResponse(e,n,i=!1){const l=new Sl;l.updateFromServerResponse(n);const u=new Br({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await jd(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];Tt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Y2(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,p=new Sl;p.updateFromIdToken(i);const g=new Br({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Jp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const I1=new Map;function La(s){qa(s instanceof Function,"Expected a class definition");let e=I1.get(s);return e?(qa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,I1.set(s,e),e)}class Q2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Q2.type="NONE";const M1=Q2;function hd(s,e,n){return`firebase:${s}:${e}:${n}`}class Nl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=hd(this.userKey,l.apiKey,u),this.fullPersistenceKey=hd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Td(this.auth,{idToken:e}).catch(()=>{});return n?Br._fromGetAccountInfoResponse(this.auth,n,e):null}return Br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Nl(La(M1),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||La(M1);const h=hd(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const w=await y._get(h);if(w){let T;if(typeof w=="string"){const S=await Td(e,{idToken:w}).catch(()=>{});if(!S)break;T=await Br._fromGetAccountInfoResponse(e,S,w)}else T=Br._fromJSON(e,w);y!==u&&(p=T),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Nl(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new Nl(u,e,i))}}function D1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ew(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nw(e))return"Blackberry";if(sw(e))return"Webos";if(J2(e))return"Safari";if((e.includes("chrome/")||Z2(e))&&!e.includes("edge/"))return"Chrome";if(tw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function X2(s=Bs()){return/firefox\//i.test(s)}function J2(s=Bs()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Z2(s=Bs()){return/crios\//i.test(s)}function ew(s=Bs()){return/iemobile/i.test(s)}function tw(s=Bs()){return/android/i.test(s)}function nw(s=Bs()){return/blackberry/i.test(s)}function sw(s=Bs()){return/webos/i.test(s)}function Pg(s=Bs()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function WN(s=Bs()){return Pg(s)&&!!window.navigator?.standalone}function GN(){return oS()&&document.documentMode===10}function rw(s=Bs()){return Pg(s)||tw(s)||sw(s)||nw(s)||/windows phone/i.test(s)||ew(s)}function aw(s,e=[]){let n;switch(s){case"Browser":n=D1(Bs());break;case"Worker":n=`${D1(Bs())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Do}/${i}`}class KN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function YN(s,e={}){return Ga(s,"GET","/v2/passwordPolicy",Wa(s,e))}const QN=6;class XN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??QN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class JN{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P1(this),this.idTokenSubscription=new P1(this),this.beforeStateQueue=new KN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=H2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=La(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Nl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Td(this,{idToken:e}),i=await Br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(lr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Va(this));const n=e?Un(e):null;return n&&Tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Va(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(La(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YN(this),n=new XN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await $N(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&La(e)||this._popupRedirectResolver;Tt(n,this,"argument-error"),this.redirectPersistenceManager=await Nl.create(this,[La(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,l);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&SN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Hi(s){return Un(s)}class P1{constructor(e){this.auth=e,this.observer=null,this.addObserver=pS(n=>this.observer=n)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZN(s){Hd=s}function iw(s){return Hd.loadJS(s)}function eC(){return Hd.recaptchaEnterpriseScript}function tC(){return Hd.gapiScript}function nC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class sC{constructor(){this.enterprise=new rC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const aC="recaptcha-enterprise",ow="NO_RECAPTCHA";class iC{constructor(e){this.type=aC,this.auth=Hi(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{ON(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new LN(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,h,p){const g=window.grecaptcha;R1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(ow)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sC().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!n&&R1(window.grecaptcha))l(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=eC();g.length!==0&&(g+=p),iw(g).then(()=>{l(p,u,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function L1(s,e,n,i=!1,l=!1){const u=new iC(s);let h;if(l)h=ow;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Ed(s,e,n,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await L1(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await L1(s,e,n,n==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function oC(s,e){const n=qd(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Eo(u,e??{}))return l;zr(l,"already-initialized")}return n.initialize({options:e})}function lC(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(La);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function cC(s,e,n){const i=Hi(s);Tt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=lw(e),{host:h,port:p}=uC(e),g=p===null?"":`:${p}`,y={url:`${u}//${h}${g}/`},w=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Tt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Tt(Eo(y,i.config.emulator)&&Eo(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,qi(h)?(Eg(`${u}//${h}${g}`),Sg("Auth",!0)):hC()}function lw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function uC(s){const e=lw(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:O1(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:O1(h)}}}function O1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function hC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Lg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pa("not implemented")}_getIdTokenResponse(e){return Pa("not implemented")}_linkToIdToken(e,n){return Pa("not implemented")}_getReauthenticationResolver(e){return Pa("not implemented")}}async function dC(s,e){return Ga(s,"POST","/v1/accounts:signUp",e)}async function fC(s,e){return ku(s,"POST","/v1/accounts:signInWithPassword",Wa(s,e))}async function mC(s,e){return Ga(s,"POST","/v1/accounts:sendOobCode",Wa(s,e))}async function pC(s,e){return mC(s,e)}async function gC(s,e){return ku(s,"POST","/v1/accounts:signInWithEmailLink",Wa(s,e))}async function yC(s,e){return ku(s,"POST","/v1/accounts:signInWithEmailLink",Wa(s,e))}class lu extends Lg{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new lu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new lu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ed(e,n,"signInWithPassword",fC);case"emailLink":return gC(e,{email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ed(e,i,"signUpPassword",dC);case"emailLink":return yC(e,{idToken:n,email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Cl(s,e){return ku(s,"POST","/v1/accounts:signInWithIdp",Wa(s,e))}const vC="http://localhost";class No extends Lg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new No(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const h=new No(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Cl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Cl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cl(e,n)}buildRequest(){const e={requestUri:vC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}function bC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xC(s){const e=Wc(Gc(s)).link,n=e?Wc(Gc(e)).deep_link_id:null,i=Wc(Gc(s)).deep_link_id;return(i?Wc(Gc(i)).link:null)||i||n||e||s}class Og{constructor(e){const n=Wc(Gc(e)),i=n.apiKey??null,l=n.oobCode??null,u=bC(n.mode??null);Tt(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=xC(e);try{return new Og(n)}catch{return null}}}class $l{constructor(){this.providerId=$l.PROVIDER_ID}static credential(e,n){return lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Og.parseLink(n);return Tt(i,"argument-error"),lu._fromEmailAndCode(e,i.code,i.tenantId)}}$l.PROVIDER_ID="password";$l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class cw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Tu extends cw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ji extends Tu{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";ji.PROVIDER_ID="facebook.com";class Ei extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return No._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ei.credential(n,i)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";class Si extends Tu{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";class Ni extends Tu{constructor(){super("twitter.com")}static credential(e,n){return No._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ni.credential(n,i)}catch{return null}}}Ni.TWITTER_SIGN_IN_METHOD="twitter.com";Ni.PROVIDER_ID="twitter.com";async function wC(s,e){return ku(s,"POST","/v1/accounts:signUp",Wa(s,e))}class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await Br._fromIdTokenResponse(e,i,l),h=V1(i);return new Co({user:u,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=V1(i);return new Co({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function V1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Sd extends ga{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Sd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Sd(e,n,i,l)}}function uw(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Sd._fromErrorAndOperation(s,u,e,i):u})}async function _C(s,e,n=!1){const i=await ou(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Co._forOperation(s,"link",i)}async function kC(s,e,n=!1){const{auth:i}=s;if(lr(i.app))return Promise.reject(Va(i));const l="reauthenticate";try{const u=await ou(s,uw(i,l,e,s),n);Tt(u.idToken,i,"internal-error");const h=Dg(u.idToken);Tt(h,i,"internal-error");const{sub:p}=h;return Tt(s.uid===p,i,"user-mismatch"),Co._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&zr(i,"user-mismatch"),u}}async function hw(s,e,n=!1){if(lr(s.app))return Promise.reject(Va(s));const i="signIn",l=await uw(s,i,e),u=await Co._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(u.user),u}async function TC(s,e){return hw(Hi(s),e)}async function dw(s){const e=Hi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jC(s,e,n){const i=Hi(s);await Ed(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pC)}async function LD(s,e,n){if(lr(s.app))return Promise.reject(Va(s));const i=Hi(s),h=await Ed(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&dw(s),g}),p=await Co._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function EC(s,e,n){return lr(s.app)?Promise.reject(Va(s)):TC(Un(s),$l.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dw(s),i})}function SC(s,e){return Un(s).setPersistence(e)}function NC(s,e,n,i){return Un(s).onIdTokenChanged(e,n,i)}function CC(s,e,n){return Un(s).beforeAuthStateChanged(e,n)}function RC(s,e,n,i){return Un(s).onAuthStateChanged(e,n,i)}function AC(s){return Un(s).signOut()}const Nd="__sak";class fw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const IC=1e3,MC=10;class mw extends fw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);GN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,MC):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},IC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}mw.type="LOCAL";const pw=mw;class gw extends fw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gw.type="SESSION";const Vg=gw;function DC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new $d(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,h=this.handlersMap[l];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async y=>y(n.origin,u)),g=await DC(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];function Bg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class PC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const y=Bg("",20);l.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(T){const S=T;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(S.data.response);break;default:clearTimeout(w),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ha(){return window}function LC(s){ha().location.href=s}function yw(){return typeof ha().WorkerGlobalScope<"u"&&typeof ha().importScripts=="function"}async function OC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VC(){return navigator?.serviceWorker?.controller||null}function BC(){return yw()?self:null}const vw="firebaseLocalStorageDb",UC=1,Cd="firebaseLocalStorage",bw="fbase_key";class ju{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wd(s,e){return s.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function zC(){const s=indexedDB.deleteDatabase(vw);return new ju(s).toPromise()}function Zp(){const s=indexedDB.open(vw,UC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Cd,{keyPath:bw})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Cd)?e(i):(i.close(),await zC(),e(await Zp()))})})}async function B1(s,e,n){const i=Wd(s,!0).put({[bw]:e,value:n});return new ju(i).toPromise()}async function FC(s,e){const n=Wd(s,!1).get(e),i=await new ju(n).toPromise();return i===void 0?null:i.value}function U1(s,e){const n=Wd(s,!0).delete(e);return new ju(n).toPromise()}const qC=800,HC=3;class xw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>HC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(BC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await OC(),!this.activeServiceWorker)return;this.sender=new PC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zp();return await B1(e,Nd,"1"),await U1(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>B1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>FC(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>U1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Wd(l,!1).getAll();return new ju(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xw.type="LOCAL";const $C=xw;new _u(3e4,6e4);function WC(s,e){return e?La(e):(Tt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Ug extends Lg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GC(s){return hw(s.auth,new Ug(s),s.bypassAuthState)}function KC(s){const{auth:e,user:n}=s;return Tt(n,e,"internal-error"),kC(n,new Ug(s),s.bypassAuthState)}async function YC(s){const{auth:e,user:n}=s;return Tt(n,e,"internal-error"),_C(n,new Ug(s),s.bypassAuthState)}class ww{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GC;case"linkViaPopup":case"linkViaRedirect":return YC;case"reauthViaPopup":case"reauthViaRedirect":return KC;default:zr(this.auth,"internal-error")}}resolve(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const QC=new _u(2e3,1e4);class El extends ww{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,El.currentPopupAction&&El.currentPopupAction.cancel(),El.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tt(e,this.auth,"internal-error"),e}async onExecution(){qa(this.filter.length===1,"Popup operations only handle one event");const e=Bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,El.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QC.get())};e()}}El.currentPopupAction=null;const XC="pendingRedirect",dd=new Map;class JC extends ww{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=dd.get(this.auth._key());if(!e){try{const i=await ZC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}dd.set(this.auth._key(),e)}return this.bypassAuthState||dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZC(s,e){const n=n4(e),i=t4(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function e4(s,e){dd.set(s._key(),e)}function t4(s){return La(s._redirectPersistence)}function n4(s){return hd(XC,s.config.apiKey,s.name)}async function s4(s,e,n=!1){if(lr(s.app))return Promise.reject(Va(s));const i=Hi(s),l=WC(i,e),h=await new JC(i,l,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const r4=600*1e3;class a4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!_w(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ua(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r4&&this.cachedEventUids.clear(),this.cachedEventUids.has(z1(e))}saveEventToCache(e){this.cachedEventUids.add(z1(e)),this.lastProcessedEventTime=Date.now()}}function z1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function _w({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function i4(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _w(s);default:return!1}}async function o4(s,e={}){return Ga(s,"GET","/v1/projects",e)}const l4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c4=/^https?/;async function u4(s){if(s.config.emulator)return;const{authorizedDomains:e}=await o4(s);for(const n of e)try{if(h4(n))return}catch{}zr(s,"unauthorized-domain")}function h4(s){const e=Xp(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!c4.test(n))return!1;if(l4.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const d4=new _u(3e4,6e4);function F1(){const s=ha().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function f4(s){return new Promise((e,n)=>{function i(){F1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F1(),n(ua(s,"network-request-failed"))},timeout:d4.get()})}if(ha().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ha().gapi?.load)i();else{const l=nC("iframefcb");return ha()[l]=()=>{gapi.load?i():n(ua(s,"network-request-failed"))},iw(`${tC()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw fd=null,e})}let fd=null;function m4(s){return fd=fd||f4(s),fd}const p4=new _u(5e3,15e3),g4="__/auth/iframe",y4="emulator/auth/iframe",v4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x4(s){const e=s.config;Tt(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Mg(e,y4):`https://${s.config.authDomain}/${g4}`,i={apiKey:e.apiKey,appName:s.name,v:Do},l=b4.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${wu(i).slice(1)}`}async function w4(s){const e=await m4(s),n=ha().gapi;return Tt(n,s,"internal-error"),e.open({where:document.body,url:x4(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v4,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=ua(s,"network-request-failed"),p=ha().setTimeout(()=>{u(h)},p4.get());function g(){ha().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(h)})}))}const _4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k4=500,T4=600,j4="_blank",E4="http://localhost";class q1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S4(s,e,n,i=k4,l=T4){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={..._4,width:i.toString(),height:l.toString(),top:u,left:h},y=Bs().toLowerCase();n&&(p=Z2(y)?j4:n),X2(y)&&(e=e||E4,g.scrollbars="yes");const w=Object.entries(g).reduce((S,[O,G])=>`${S}${O}=${G},`,"");if(WN(y)&&p!=="_self")return N4(e||"",p),new q1(null);const T=window.open(e||"",p,w);Tt(T,s,"popup-blocked");try{T.focus()}catch{}return new q1(T)}function N4(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const C4="__/auth/handler",R4="emulator/auth/handler",A4=encodeURIComponent("fac");async function H1(s,e,n,i,l,u){Tt(s.config.authDomain,s,"auth-domain-config-required"),Tt(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Do,eventId:l};if(e instanceof cw){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",mS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof Tu){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await s._getAppCheckToken(),y=g?`#${A4}=${encodeURIComponent(g)}`:"";return`${I4(s)}?${wu(p).slice(1)}${y}`}function I4({config:s}){return s.emulator?Mg(s,R4):`https://${s.authDomain}/${C4}`}const xp="webStorageSupport";class M4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vg,this._completeRedirectFn=s4,this._overrideRedirectResult=e4}async _openPopup(e,n,i,l){qa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await H1(e,n,i,Xp(),l);return S4(e,u,Bg())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await H1(e,n,i,Xp(),l);return LC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(qa(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await w4(e),i=new a4(e);return n.register("authEvent",l=>(Tt(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xp,{type:xp},l=>{const u=l?.[0]?.[xp];u!==void 0&&n(!!u),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=u4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rw()||J2()||Pg()}}const D4=M4;var $1="@firebase/auth",W1="1.12.0";class P4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function L4(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O4(s){So(new Pi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Tt(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aw(s)},y=new JN(i,l,u,g);return lC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),So(new Pi("auth-internal",e=>{const n=Hi(e.getProvider("auth").getImmediate());return(i=>new P4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ca($1,W1,L4(s)),ca($1,W1,"esm2020")}const V4=300,B4=O2("authIdTokenMaxAge")||V4;let G1=null;const U4=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>B4)return;const l=n?.token;G1!==l&&(G1=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function kw(s=Ag()){const e=qd(s,"auth");if(e.isInitialized())return e.getImmediate();const n=oC(s,{popupRedirectResolver:D4,persistence:[$C,pw,Vg]}),i=O2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=U4(u.toString());CC(n,h,()=>h(n.currentUser)),NC(n,p=>h(p))}}const l=D2("auth");return l&&cC(n,`http://${l}`),n}function z4(){return document.getElementsByTagName("head")?.[0]??document}ZN({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=ua("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",z4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O4("Browser");var K1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Mi,Tw;(function(){var s;function e(I,E){function A(){}A.prototype=E.prototype,I.F=E.prototype,I.prototype=new A,I.prototype.constructor=I,I.D=function(P,D,q){for(var M=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)M[ze-2]=arguments[ze];return E.prototype[D].apply(P,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,E,A){A||(A=0);const P=Array(16);if(typeof E=="string")for(var D=0;D<16;++D)P[D]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(D=0;D<16;++D)P[D]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=I.g[0],A=I.g[1],D=I.g[2];let q=I.g[3],M;M=E+(q^A&(D^q))+P[0]+3614090360&4294967295,E=A+(M<<7&4294967295|M>>>25),M=q+(D^E&(A^D))+P[1]+3905402710&4294967295,q=E+(M<<12&4294967295|M>>>20),M=D+(A^q&(E^A))+P[2]+606105819&4294967295,D=q+(M<<17&4294967295|M>>>15),M=A+(E^D&(q^E))+P[3]+3250441966&4294967295,A=D+(M<<22&4294967295|M>>>10),M=E+(q^A&(D^q))+P[4]+4118548399&4294967295,E=A+(M<<7&4294967295|M>>>25),M=q+(D^E&(A^D))+P[5]+1200080426&4294967295,q=E+(M<<12&4294967295|M>>>20),M=D+(A^q&(E^A))+P[6]+2821735955&4294967295,D=q+(M<<17&4294967295|M>>>15),M=A+(E^D&(q^E))+P[7]+4249261313&4294967295,A=D+(M<<22&4294967295|M>>>10),M=E+(q^A&(D^q))+P[8]+1770035416&4294967295,E=A+(M<<7&4294967295|M>>>25),M=q+(D^E&(A^D))+P[9]+2336552879&4294967295,q=E+(M<<12&4294967295|M>>>20),M=D+(A^q&(E^A))+P[10]+4294925233&4294967295,D=q+(M<<17&4294967295|M>>>15),M=A+(E^D&(q^E))+P[11]+2304563134&4294967295,A=D+(M<<22&4294967295|M>>>10),M=E+(q^A&(D^q))+P[12]+1804603682&4294967295,E=A+(M<<7&4294967295|M>>>25),M=q+(D^E&(A^D))+P[13]+4254626195&4294967295,q=E+(M<<12&4294967295|M>>>20),M=D+(A^q&(E^A))+P[14]+2792965006&4294967295,D=q+(M<<17&4294967295|M>>>15),M=A+(E^D&(q^E))+P[15]+1236535329&4294967295,A=D+(M<<22&4294967295|M>>>10),M=E+(D^q&(A^D))+P[1]+4129170786&4294967295,E=A+(M<<5&4294967295|M>>>27),M=q+(A^D&(E^A))+P[6]+3225465664&4294967295,q=E+(M<<9&4294967295|M>>>23),M=D+(E^A&(q^E))+P[11]+643717713&4294967295,D=q+(M<<14&4294967295|M>>>18),M=A+(q^E&(D^q))+P[0]+3921069994&4294967295,A=D+(M<<20&4294967295|M>>>12),M=E+(D^q&(A^D))+P[5]+3593408605&4294967295,E=A+(M<<5&4294967295|M>>>27),M=q+(A^D&(E^A))+P[10]+38016083&4294967295,q=E+(M<<9&4294967295|M>>>23),M=D+(E^A&(q^E))+P[15]+3634488961&4294967295,D=q+(M<<14&4294967295|M>>>18),M=A+(q^E&(D^q))+P[4]+3889429448&4294967295,A=D+(M<<20&4294967295|M>>>12),M=E+(D^q&(A^D))+P[9]+568446438&4294967295,E=A+(M<<5&4294967295|M>>>27),M=q+(A^D&(E^A))+P[14]+3275163606&4294967295,q=E+(M<<9&4294967295|M>>>23),M=D+(E^A&(q^E))+P[3]+4107603335&4294967295,D=q+(M<<14&4294967295|M>>>18),M=A+(q^E&(D^q))+P[8]+1163531501&4294967295,A=D+(M<<20&4294967295|M>>>12),M=E+(D^q&(A^D))+P[13]+2850285829&4294967295,E=A+(M<<5&4294967295|M>>>27),M=q+(A^D&(E^A))+P[2]+4243563512&4294967295,q=E+(M<<9&4294967295|M>>>23),M=D+(E^A&(q^E))+P[7]+1735328473&4294967295,D=q+(M<<14&4294967295|M>>>18),M=A+(q^E&(D^q))+P[12]+2368359562&4294967295,A=D+(M<<20&4294967295|M>>>12),M=E+(A^D^q)+P[5]+4294588738&4294967295,E=A+(M<<4&4294967295|M>>>28),M=q+(E^A^D)+P[8]+2272392833&4294967295,q=E+(M<<11&4294967295|M>>>21),M=D+(q^E^A)+P[11]+1839030562&4294967295,D=q+(M<<16&4294967295|M>>>16),M=A+(D^q^E)+P[14]+4259657740&4294967295,A=D+(M<<23&4294967295|M>>>9),M=E+(A^D^q)+P[1]+2763975236&4294967295,E=A+(M<<4&4294967295|M>>>28),M=q+(E^A^D)+P[4]+1272893353&4294967295,q=E+(M<<11&4294967295|M>>>21),M=D+(q^E^A)+P[7]+4139469664&4294967295,D=q+(M<<16&4294967295|M>>>16),M=A+(D^q^E)+P[10]+3200236656&4294967295,A=D+(M<<23&4294967295|M>>>9),M=E+(A^D^q)+P[13]+681279174&4294967295,E=A+(M<<4&4294967295|M>>>28),M=q+(E^A^D)+P[0]+3936430074&4294967295,q=E+(M<<11&4294967295|M>>>21),M=D+(q^E^A)+P[3]+3572445317&4294967295,D=q+(M<<16&4294967295|M>>>16),M=A+(D^q^E)+P[6]+76029189&4294967295,A=D+(M<<23&4294967295|M>>>9),M=E+(A^D^q)+P[9]+3654602809&4294967295,E=A+(M<<4&4294967295|M>>>28),M=q+(E^A^D)+P[12]+3873151461&4294967295,q=E+(M<<11&4294967295|M>>>21),M=D+(q^E^A)+P[15]+530742520&4294967295,D=q+(M<<16&4294967295|M>>>16),M=A+(D^q^E)+P[2]+3299628645&4294967295,A=D+(M<<23&4294967295|M>>>9),M=E+(D^(A|~q))+P[0]+4096336452&4294967295,E=A+(M<<6&4294967295|M>>>26),M=q+(A^(E|~D))+P[7]+1126891415&4294967295,q=E+(M<<10&4294967295|M>>>22),M=D+(E^(q|~A))+P[14]+2878612391&4294967295,D=q+(M<<15&4294967295|M>>>17),M=A+(q^(D|~E))+P[5]+4237533241&4294967295,A=D+(M<<21&4294967295|M>>>11),M=E+(D^(A|~q))+P[12]+1700485571&4294967295,E=A+(M<<6&4294967295|M>>>26),M=q+(A^(E|~D))+P[3]+2399980690&4294967295,q=E+(M<<10&4294967295|M>>>22),M=D+(E^(q|~A))+P[10]+4293915773&4294967295,D=q+(M<<15&4294967295|M>>>17),M=A+(q^(D|~E))+P[1]+2240044497&4294967295,A=D+(M<<21&4294967295|M>>>11),M=E+(D^(A|~q))+P[8]+1873313359&4294967295,E=A+(M<<6&4294967295|M>>>26),M=q+(A^(E|~D))+P[15]+4264355552&4294967295,q=E+(M<<10&4294967295|M>>>22),M=D+(E^(q|~A))+P[6]+2734768916&4294967295,D=q+(M<<15&4294967295|M>>>17),M=A+(q^(D|~E))+P[13]+1309151649&4294967295,A=D+(M<<21&4294967295|M>>>11),M=E+(D^(A|~q))+P[4]+4149444226&4294967295,E=A+(M<<6&4294967295|M>>>26),M=q+(A^(E|~D))+P[11]+3174756917&4294967295,q=E+(M<<10&4294967295|M>>>22),M=D+(E^(q|~A))+P[2]+718787259&4294967295,D=q+(M<<15&4294967295|M>>>17),M=A+(q^(D|~E))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+E&4294967295,I.g[1]=I.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+q&4294967295}i.prototype.v=function(I,E){E===void 0&&(E=I.length);const A=E-this.blockSize,P=this.C;let D=this.h,q=0;for(;q<E;){if(D==0)for(;q<=A;)l(this,I,q),q+=this.blockSize;if(typeof I=="string"){for(;q<E;)if(P[D++]=I.charCodeAt(q++),D==this.blockSize){l(this,P),D=0;break}}else for(;q<E;)if(P[D++]=I[q++],D==this.blockSize){l(this,P),D=0;break}}this.h=D,this.o+=E},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var E=1;E<I.length-8;++E)I[E]=0;E=this.o*8;for(var A=I.length-8;A<I.length;++A)I[A]=E&255,E/=256;for(this.v(I),I=Array(16),E=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)I[E++]=this.g[A]>>>P&255;return I};function u(I,E){var A=p;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=E(I)}function h(I,E){this.h=E;const A=[];let P=!0;for(let D=I.length-1;D>=0;D--){const q=I[D]|0;P&&q==E||(A[D]=q,P=!1)}this.g=A}var p={};function g(I){return-128<=I&&I<128?u(I,function(E){return new h([E|0],E<0?-1:0)}):new h([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return T;if(I<0)return V(y(-I));const E=[];let A=1;for(let P=0;I>=A;P++)E[P]=I/A|0,A*=4294967296;return new h(E,0)}function w(I,E){if(I.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(I.charAt(0)=="-")return V(w(I.substring(1),E));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(E,8));let P=T;for(let q=0;q<I.length;q+=8){var D=Math.min(8,I.length-q);const M=parseInt(I.substring(q,q+D),E);D<8?(D=y(Math.pow(E,D)),P=P.j(D).add(y(M))):(P=P.j(A),P=P.add(y(M)))}return P}var T=g(0),S=g(1),O=g(16777216);s=h.prototype,s.m=function(){if(U(this))return-V(this).m();let I=0,E=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);I+=(P>=0?P:4294967296+P)*E,E*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(G(this))return"0";if(U(this))return"-"+V(this).toString(I);const E=y(Math.pow(I,6));var A=this;let P="";for(;;){const D=Se(A,E).g;A=Z(A,D.j(E));let q=((A.g.length>0?A.g[0]:A.h)>>>0).toString(I);if(A=D,G(A))return q+P;for(;q.length<6;)q="0"+q;P=q+P}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function G(I){if(I.h!=0)return!1;for(let E=0;E<I.g.length;E++)if(I.g[E]!=0)return!1;return!0}function U(I){return I.h==-1}s.l=function(I){return I=Z(this,I),U(I)?-1:G(I)?0:1};function V(I){const E=I.g.length,A=[];for(let P=0;P<E;P++)A[P]=~I.g[P];return new h(A,~I.h).add(S)}s.abs=function(){return U(this)?V(this):this},s.add=function(I){const E=Math.max(this.g.length,I.g.length),A=[];let P=0;for(let D=0;D<=E;D++){let q=P+(this.i(D)&65535)+(I.i(D)&65535),M=(q>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);P=M>>>16,q&=65535,M&=65535,A[D]=M<<16|q}return new h(A,A[A.length-1]&-2147483648?-1:0)};function Z(I,E){return I.add(V(E))}s.j=function(I){if(G(this)||G(I))return T;if(U(this))return U(I)?V(this).j(V(I)):V(V(this).j(I));if(U(I))return V(this.j(V(I)));if(this.l(O)<0&&I.l(O)<0)return y(this.m()*I.m());const E=this.g.length+I.g.length,A=[];for(var P=0;P<2*E;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<I.g.length;D++){const q=this.i(P)>>>16,M=this.i(P)&65535,ze=I.i(D)>>>16,gt=I.i(D)&65535;A[2*P+2*D]+=M*gt,X(A,2*P+2*D),A[2*P+2*D+1]+=q*gt,X(A,2*P+2*D+1),A[2*P+2*D+1]+=M*ze,X(A,2*P+2*D+1),A[2*P+2*D+2]+=q*ze,X(A,2*P+2*D+2)}for(I=0;I<E;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=E;I<2*E;I++)A[I]=0;return new h(A,0)};function X(I,E){for(;(I[E]&65535)!=I[E];)I[E+1]+=I[E]>>>16,I[E]&=65535,E++}function ce(I,E){this.g=I,this.h=E}function Se(I,E){if(G(E))throw Error("division by zero");if(G(I))return new ce(T,T);if(U(I))return E=Se(V(I),E),new ce(V(E.g),V(E.h));if(U(E))return E=Se(I,V(E)),new ce(V(E.g),E.h);if(I.g.length>30){if(U(I)||U(E))throw Error("slowDivide_ only works with positive integers.");for(var A=S,P=E;P.l(I)<=0;)A=Be(A),P=Be(P);var D=Oe(A,1),q=Oe(P,1);for(P=Oe(P,2),A=Oe(A,2);!G(P);){var M=q.add(P);M.l(I)<=0&&(D=D.add(A),q=M),P=Oe(P,1),A=Oe(A,1)}return E=Z(I,D.j(E)),new ce(D,E)}for(D=T;I.l(E)>=0;){for(A=Math.max(1,Math.floor(I.m()/E.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),q=y(A),M=q.j(E);U(M)||M.l(I)>0;)A-=P,q=y(A),M=q.j(E);G(q)&&(q=S),D=D.add(q),I=Z(I,M)}return new ce(D,I)}s.B=function(I){return Se(this,I).h},s.and=function(I){const E=Math.max(this.g.length,I.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)&I.i(P);return new h(A,this.h&I.h)},s.or=function(I){const E=Math.max(this.g.length,I.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)|I.i(P);return new h(A,this.h|I.h)},s.xor=function(I){const E=Math.max(this.g.length,I.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)^I.i(P);return new h(A,this.h^I.h)};function Be(I){const E=I.g.length+1,A=[];for(let P=0;P<E;P++)A[P]=I.i(P)<<1|I.i(P-1)>>>31;return new h(A,I.h)}function Oe(I,E){const A=E>>5;E%=32;const P=I.g.length-A,D=[];for(let q=0;q<P;q++)D[q]=E>0?I.i(q+A)>>>E|I.i(q+A+1)<<32-E:I.i(q+A);return new h(D,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Tw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,Mi=h}).apply(typeof K1<"u"?K1:typeof self<"u"?self:typeof window<"u"?window:{});var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jw,Kc,Ew,md,eg,Sw,Nw,Cw;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qh=="object"&&Qh];for(var v=0;v<d.length;++v){var k=d[v];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var i=n(this);function l(d,v){if(v)e:{var k=i;d=d.split(".");for(var R=0;R<d.length-1;R++){var ee=d[R];if(!(ee in k))break e;k=k[ee]}d=d[d.length-1],R=k[d],v=v(R),v!=R&&v!=null&&e(k,d,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(v){var k=[],R;for(R in v)Object.prototype.hasOwnProperty.call(v,R)&&k.push([R,v[R]]);return k}});var u=u||{},h=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,k){return d.call.apply(d.bind,arguments)}function y(d,v,k){return y=g,y.apply(null,arguments)}function w(d,v){var k=Array.prototype.slice.call(arguments,1);return function(){var R=k.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function T(d,v){function k(){}k.prototype=v.prototype,d.Z=v.prototype,d.prototype=new k,d.prototype.constructor=d,d.Ob=function(R,ee,he){for(var qe=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)qe[Dt-2]=arguments[Dt];return v.prototype[ee].apply(R,qe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function O(d){const v=d.length;if(v>0){const k=Array(v);for(let R=0;R<v;R++)k[R]=d[R];return k}return[]}function G(d,v){for(let R=1;R<arguments.length;R++){const ee=arguments[R];var k=typeof ee;if(k=k!="object"?k:ee?Array.isArray(ee)?"array":k:"null",k=="array"||k=="object"&&typeof ee.length=="number"){k=d.length||0;const he=ee.length||0;d.length=k+he;for(let qe=0;qe<he;qe++)d[k+qe]=ee[qe]}else d.push(ee)}}class U{constructor(v,k){this.i=v,this.j=k,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(d){h.setTimeout(()=>{throw d},0)}function Z(){var d=I;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class X{constructor(){this.h=this.g=null}add(v,k){const R=ce.get();R.set(v,k),this.h?this.h.next=R:this.g=R,this.h=R}}var ce=new U(()=>new Se,d=>d.reset());class Se{constructor(){this.next=this.g=this.h=null}set(v,k){this.h=v,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,Oe=!1,I=new X,E=()=>{const d=Promise.resolve(void 0);Be=()=>{d.then(A)}};function A(){for(var d;d=Z();){try{d.h.call(d.g)}catch(k){V(k)}var v=ce;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}Oe=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const k=()=>{};h.addEventListener("test",k,v),h.removeEventListener("test",k,v)}catch{}return d})();function M(d){return/^[\s\xa0]*$/.test(d)}function ze(d,v){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}T(ze,D),ze.prototype.init=function(d,v){const k=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(k=="mouseover"?v=d.fromElement:k=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var gt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function _e(d,v,k,R,ee){this.listener=d,this.proxy=null,this.src=v,this.type=k,this.capture=!!R,this.ha=ee,this.key=++Y,this.da=this.fa=!1}function De(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function le(d,v,k){for(const R in d)v.call(k,d[R],R,d)}function Ve(d,v){for(const k in d)v.call(void 0,d[k],k,d)}function C(d){const v={};for(const k in d)v[k]=d[k];return v}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(d,v){let k,R;for(let ee=1;ee<arguments.length;ee++){R=arguments[ee];for(k in R)d[k]=R[k];for(let he=0;he<B.length;he++)k=B[he],Object.prototype.hasOwnProperty.call(R,k)&&(d[k]=R[k])}}function pe(d){this.src=d,this.g={},this.h=0}pe.prototype.add=function(d,v,k,R,ee){const he=d.toString();d=this.g[he],d||(d=this.g[he]=[],this.h++);const qe=Le(d,v,R,ee);return qe>-1?(v=d[qe],k||(v.fa=!1)):(v=new _e(v,this.src,he,!!R,ee),v.fa=k,d.push(v)),v};function Ae(d,v){const k=v.type;if(k in d.g){var R=d.g[k],ee=Array.prototype.indexOf.call(R,v,void 0),he;(he=ee>=0)&&Array.prototype.splice.call(R,ee,1),he&&(De(v),d.g[k].length==0&&(delete d.g[k],d.h--))}}function Le(d,v,k,R){for(let ee=0;ee<d.length;++ee){const he=d[ee];if(!he.da&&he.listener==v&&he.capture==!!k&&he.ha==R)return ee}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),Fe={};function ae(d,v,k,R,ee){if(Array.isArray(v)){for(let he=0;he<v.length;he++)ae(d,v[he],k,R,ee);return null}return k=Et(k),d&&d[gt]?d.J(v,k,p(R)?!!R.capture:!1,ee):We(d,v,k,!1,R,ee)}function We(d,v,k,R,ee,he){if(!v)throw Error("Invalid event type");const qe=p(ee)?!!ee.capture:!!ee;let Dt=kt(d);if(Dt||(d[Qe]=Dt=new pe(d)),k=Dt.add(v,k,R,qe,he),k.proxy)return k;if(R=wt(),k.proxy=R,R.src=d,R.listener=k,d.addEventListener)q||(ee=qe),ee===void 0&&(ee=!1),d.addEventListener(v.toString(),R,ee);else if(d.attachEvent)d.attachEvent(re(v.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return k}function wt(){function d(k){return v.call(d.src,d.listener,k)}const v=qt;return d}function ut(d,v,k,R,ee){if(Array.isArray(v))for(var he=0;he<v.length;he++)ut(d,v[he],k,R,ee);else R=p(R)?!!R.capture:!!R,k=Et(k),d&&d[gt]?(d=d.i,he=String(v).toString(),he in d.g&&(v=d.g[he],k=Le(v,k,R,ee),k>-1&&(De(v[k]),Array.prototype.splice.call(v,k,1),v.length==0&&(delete d.g[he],d.h--)))):d&&(d=kt(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Le(v,k,R,ee)),(k=d>-1?v[d]:null)&&ft(k))}function ft(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[gt])Ae(v.i,d);else{var k=d.type,R=d.proxy;v.removeEventListener?v.removeEventListener(k,R,d.capture):v.detachEvent?v.detachEvent(re(k),R):v.addListener&&v.removeListener&&v.removeListener(R),(k=kt(v))?(Ae(k,d),k.h==0&&(k.src=null,v[Qe]=null)):De(d)}}}function re(d){return d in Fe?Fe[d]:Fe[d]="on"+d}function qt(d,v){if(d.da)d=!0;else{v=new ze(v,this);const k=d.listener,R=d.ha||d.src;d.fa&&ft(d),d=k.call(R,v)}return d}function kt(d){return d=d[Qe],d instanceof pe?d:null}var bt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Et(d){return typeof d=="function"?d:(d[bt]||(d[bt]=function(v){return d.handleEvent(v)}),d[bt])}function lt(){P.call(this),this.i=new pe(this),this.M=this,this.G=null}T(lt,P),lt.prototype[gt]=!0,lt.prototype.removeEventListener=function(d,v,k,R){ut(this,d,v,k,R)};function Xe(d,v){var k,R=d.G;if(R)for(k=[];R;R=R.G)k.push(R);if(d=d.M,R=v.type||v,typeof v=="string")v=new D(v,d);else if(v instanceof D)v.target=v.target||d;else{var ee=v;v=new D(R,d),oe(v,ee)}ee=!0;let he,qe;if(k)for(qe=k.length-1;qe>=0;qe--)he=v.g=k[qe],ee=Ht(he,R,!0,v)&&ee;if(he=v.g=d,ee=Ht(he,R,!0,v)&&ee,ee=Ht(he,R,!1,v)&&ee,k)for(qe=0;qe<k.length;qe++)he=v.g=k[qe],ee=Ht(he,R,!1,v)&&ee}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const k=d.g[v];for(let R=0;R<k.length;R++)De(k[R]);delete d.g[v],d.h--}}this.G=null},lt.prototype.J=function(d,v,k,R){return this.i.add(String(d),v,!1,k,R)},lt.prototype.K=function(d,v,k,R){return this.i.add(String(d),v,!0,k,R)};function Ht(d,v,k,R){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let ee=!0;for(let he=0;he<v.length;++he){const qe=v[he];if(qe&&!qe.da&&qe.capture==k){const Dt=qe.listener,Qn=qe.ha||qe.src;qe.fa&&Ae(d.i,qe),ee=Dt.call(Qn,R)!==!1&&ee}}return ee&&!R.defaultPrevented}function ts(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(d,v||0)}function Nt(d){d.g=ts(()=>{d.g=null,d.i&&(d.i=!1,Nt(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Lt extends P{constructor(v,k){super(),this.m=v,this.l=k,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Nt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(d){P.call(this),this.h=d,this.g={}}T(Mn,P);var Ct=[];function hn(d){le(d.g,function(v,k){this.g.hasOwnProperty(k)&&ft(v)},d),d.g={}}Mn.prototype.N=function(){Mn.Z.N.call(this),hn(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ye=h.JSON.stringify,Ne=h.JSON.parse,Pe=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function tt(){}function Je(){}var Ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nt(){D.call(this,"d")}T(nt,D);function Ke(){D.call(this,"c")}T(Ke,D);var He={},St=null;function Jt(){return St=St||new lt}He.Ia="serverreachability";function Bt(d){D.call(this,He.Ia,d)}T(Bt,D);function sn(d){const v=Jt();Xe(v,new Bt(v))}He.STAT_EVENT="statevent";function Dn(d,v){D.call(this,He.STAT_EVENT,d),this.stat=v}T(Dn,D);function Rt(d){const v=Jt();Xe(v,new Dn(v,d))}He.Ja="timingevent";function on(d,v){D.call(this,He.Ja,d),this.size=v}T(on,D);function zn(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function kn(){this.g=!0}kn.prototype.ua=function(){this.g=!1};function ys(d,v,k,R,ee,he){d.info(function(){if(d.g)if(he){var qe="",Dt=he.split("&");for(let ln=0;ln<Dt.length;ln++){var Qn=Dt[ln].split("=");if(Qn.length>1){const Ln=Qn[0];Qn=Qn[1];const mr=Ln.split("_");qe=mr.length>=2&&mr[1]=="type"?qe+(Ln+"="+Qn+"&"):qe+(Ln+"=redacted&")}}}else qe=null;else qe=he;return"XMLHTTP REQ ("+R+") [attempt "+ee+"]: "+v+`
`+k+`
`+qe})}function ns(d,v,k,R,ee,he,qe){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+ee+"]: "+v+`
`+k+`
`+he+" "+qe})}function En(d,v,k,R){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+ss(d,k)+(R?" "+R:"")})}function Yn(d,v){d.info(function(){return"TIMEOUT: "+v})}kn.prototype.info=function(){};function ss(d,v){if(!d.g)return v;if(!v)return null;try{const he=JSON.parse(v);if(he){for(d=0;d<he.length;d++)if(Array.isArray(he[d])){var k=he[d];if(!(k.length<2)){var R=k[1];if(Array.isArray(R)&&!(R.length<1)){var ee=R[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let qe=1;qe<R.length;qe++)R[qe]=""}}}}return ye(he)}catch{return v}}var vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},As;function $(){}T($,tt),$.prototype.g=function(){return new XMLHttpRequest},As=new $;function ge(d){return encodeURIComponent(String(d))}function ke(d){var v=1;d=d.split(":");const k=[];for(;v>0&&d.length;)k.push(d.shift()),v--;return d.length&&k.push(d.join(":")),k}function xe(d,v,k,R){this.j=d,this.i=v,this.l=k,this.S=R||1,this.V=new Mn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fe}function fe(){this.i=null,this.g="",this.h=!1}var rt={},mt={};function it(d,v,k){d.M=1,d.A=Ot(me(v)),d.u=k,d.R=!0,xt(d,null)}function xt(d,v){d.F=Date.now(),rs(d),d.B=me(d.A);var k=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),Fn(k.i,"t",R),d.C=0,k=d.j.L,d.h=new fe,d.g=zu(d.j,k?v:null,!d.u),d.P>0&&(d.O=new Lt(y(d.Y,d,d.g),d.P)),v=d.V,k=d.g,R=d.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(Ct[0]=ee.toString()),ee=Ct);for(let he=0;he<ee.length;he++){const qe=ae(k,ee[he],R||v.handleEvent,!1,v.h||v);if(!qe)break;v.g[qe.key]=qe}v=d.J?C(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),sn(),ys(d.i,d.v,d.B,d.l,d.S,d.u)}xe.prototype.ba=function(d){d=d.target;const v=this.O;v&&Rr(d)==3?v.j():this.Y(d)},xe.prototype.Y=function(d){try{if(d==this.g)e:{const Dt=Rr(this.g),Qn=this.g.ya(),ln=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||_s(this.g)))){this.K||Dt!=4||Qn==7||(Qn==8||ln<=0?sn(3):sn(2)),Tn(this);var v=this.g.ca();this.X=v;var k=pt(this);if(this.o=v==200,ns(this.i,this.v,this.B,this.l,this.S,Dt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var R,ee=this.g;if((R=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(R)){var he=R;break t}}he=null}if(d=he)En(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,b(this,d);else{this.o=!1,this.m=3,Rt(12),ue(this),H(this);break e}}if(this.R){d=!0;let Ln;for(;!this.K&&this.C<k.length;)if(Ln=Is(this,k),Ln==mt){Dt==4&&(this.m=4,Rt(14),d=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==rt){this.m=4,Rt(15),En(this.i,this.l,k,"[Invalid Chunk]"),d=!1;break}else En(this.i,this.l,Ln,null),b(this,Ln);if(Zt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||k.length!=0||this.h.h||(this.m=1,Rt(16),d=!1),this.o=this.o&&d,!d)En(this.i,this.l,k,"[Invalid Chunked Response]"),ue(this),H(this);else if(k.length>0&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.aa&&!qe.P&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),nc(qe),qe.P=!0,Rt(11))}}else En(this.i,this.l,k,null),b(this,k);Dt==4&&ue(this),this.o&&!this.K&&(Dt==4?Ou(this.j,this):(this.o=!1,rs(this)))}else va(this.g),v==400&&k.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),ue(this),H(this)}}}catch{}};function pt(d){if(!Zt(d))return d.g.la();const v=_s(d.g);if(v==="")return"";let k="";const R=v.length,ee=Rr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ue(d),H(d),"";d.h.i=new h.TextDecoder}for(let he=0;he<R;he++)d.h.h=!0,k+=d.h.i.decode(v[he],{stream:!(ee&&he==R-1)});return v.length=0,d.h.g+=k,d.C=0,d.h.g}function Zt(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Is(d,v){var k=d.C,R=v.indexOf(`
`,k);return R==-1?mt:(k=Number(v.substring(k,R)),isNaN(k)?rt:(R+=1,R+k>v.length?mt:(v=v.slice(R,R+k),d.C=R+k,v)))}xe.prototype.cancel=function(){this.K=!0,ue(this)};function rs(d){d.T=Date.now()+d.H,bs(d,d.H)}function bs(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=zn(y(d.aa,d),v)}function Tn(d){d.D&&(h.clearTimeout(d.D),d.D=null)}xe.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Yn(this.i,this.B),this.M!=2&&(sn(),Rt(17)),ue(this),this.m=2,H(this)):bs(this,this.T-d)};function H(d){d.j.I==0||d.K||Ou(d.j,d)}function ue(d){Tn(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,hn(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function b(d,v){try{var k=d.j;if(k.I!=0&&(k.g==d||ve(k.h,d))){if(!d.L&&ve(k.h,d)&&k.I==3){try{var R=k.Ba.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var ee=R;if(ee[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<d.F)zo(k),Ja(k);else break e;Zi(k),Rt(18)}}else k.xa=ee[1],0<k.xa-k.K&&ee[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=zn(y(k.Va,k),6e3));Me(k.h)<=1&&k.ta&&(k.ta=void 0)}else Zr(k,11)}else if((d.L||k.g==d)&&zo(k),!M(v))for(ee=k.Ba.g.parse(v),v=0;v<ee.length;v++){let ln=ee[v];const Ln=ln[0];if(!(Ln<=k.K))if(k.K=Ln,ln=ln[1],k.I==2)if(ln[0]=="c"){k.M=ln[1],k.ba=ln[2];const mr=ln[3];mr!=null&&(k.ka=mr,k.j.info("VER="+k.ka));const ea=ln[4];ea!=null&&(k.za=ea,k.j.info("SVER="+k.za));const Ar=ln[5];Ar!=null&&typeof Ar=="number"&&Ar>0&&(R=1.5*Ar,k.O=R,k.j.info("backChannelRequestTimeoutMs_="+R)),R=k;const Ir=d.g;if(Ir){const eo=Ir.g?Ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eo){var he=R.h;he.g||eo.indexOf("spdy")==-1&&eo.indexOf("quic")==-1&&eo.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(we(he,he.h),he.h=null))}if(R.G){const Fo=Ir.g?Ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(R.wa=Fo,Ye(R.J,R.G,Fo))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-d.F,k.j.info("Handshake RTT: "+k.T+"ms")),R=k;var qe=d;if(R.na=Uu(R,R.L?R.ba:null,R.W),qe.L){st(R.h,qe);var Dt=qe,Qn=R.O;Qn&&(Dt.H=Qn),Dt.D&&(Tn(Dt),rs(Dt)),R.g=qe}else Pu(R);k.i.length>0&&Jr(k)}else ln[0]!="stop"&&ln[0]!="close"||Zr(k,7);else k.I==3&&(ln[0]=="stop"||ln[0]=="close"?ln[0]=="stop"?Zr(k,7):ec(k):ln[0]!="noop"&&k.l&&k.l.qa(ln),k.A=0)}}sn(4)}catch{}}var j=class{constructor(d,v){this.g=d,this.map=v}};function L(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function K(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Me(d){return d.h?1:d.g?d.g.size:0}function ve(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function we(d,v){d.g?d.g.add(v):d.h=v}function st(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}L.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function et(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const k of d.g.values())v=v.concat(k.G);return v}return O(d.i)}var F=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J(d,v){if(d){d=d.split("&");for(let k=0;k<d.length;k++){const R=d[k].indexOf("=");let ee,he=null;R>=0?(ee=d[k].substring(0,R),he=d[k].substring(R+1)):ee=d[k],v(ee,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function te(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof te?(this.l=d.l,Ce(this,d.j),this.o=d.o,this.g=d.g,$e(this,d.u),this.h=d.h,ot(this,Kr(d.i)),this.m=d.m):d&&(v=String(d).match(F))?(this.l=!1,Ce(this,v[1]||"",!0),this.o=mn(v[2]||""),this.g=mn(v[3]||"",!0),$e(this,v[4]),this.h=mn(v[5]||"",!0),ot(this,v[6]||"",!0),this.m=mn(v[7]||"")):(this.l=!1,this.i=new Sn(null,this.l))}te.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(Ut(v,Zs,!0),":");var k=this.g;return(k||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Ut(v,Zs,!0),"@"),d.push(ge(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&d.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&d.push("/"),d.push(Ut(k,k.charAt(0)=="/"?fs:as,!0))),(k=this.i.toString())&&d.push("?",k),(k=this.m)&&d.push("#",Ut(k,zt)),d.join("")},te.prototype.resolve=function(d){const v=me(this);let k=!!d.j;k?Ce(v,d.j):k=!!d.o,k?v.o=d.o:k=!!d.g,k?v.g=d.g:k=d.u!=null;var R=d.h;if(k)$e(v,d.u);else if(k=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var ee=v.h.lastIndexOf("/");ee!=-1&&(R=v.h.slice(0,ee+1)+R)}if(ee=R,ee==".."||ee==".")R="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){R=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const he=[];for(let qe=0;qe<ee.length;){const Dt=ee[qe++];Dt=="."?R&&qe==ee.length&&he.push(""):Dt==".."?((he.length>1||he.length==1&&he[0]!="")&&he.pop(),R&&qe==ee.length&&he.push("")):(he.push(Dt),R=!0)}R=he.join("/")}else R=ee}return k?v.h=R:k=d.i.toString()!=="",k?ot(v,Kr(d.i)):k=!!d.m,k&&(v.m=d.m),v};function me(d){return new te(d)}function Ce(d,v,k){d.j=k?mn(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function $e(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function ot(d,v,k){v instanceof Sn?(d.i=v,Ka(d.i,d.l)):(k||(v=Ut(v,ms)),d.i=new Sn(v,d.l))}function Ye(d,v,k){d.i.set(v,k)}function Ot(d){return Ye(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function mn(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ut(d,v,k){return typeof d=="string"?(d=encodeURI(d).replace(v,dn),k&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function dn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Zs=/[#\/\?@]/g,as=/[#\?:]/g,fs=/[#\?]/g,ms=/[#\?@]/g,zt=/#/g;function Sn(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Cn(d){d.g||(d.g=new Map,d.h=0,d.i&&J(d.i,function(v,k){d.add(decodeURIComponent(v.replace(/\+/g," ")),k)}))}s=Sn.prototype,s.add=function(d,v){Cn(this),this.i=null,d=Nr(this,d);let k=this.g.get(d);return k||this.g.set(d,k=[]),k.push(v),this.h+=1,this};function er(d,v){Cn(d),v=Nr(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Ms(d,v){return Cn(d),v=Nr(d,v),d.g.has(v)}s.forEach=function(d,v){Cn(this),this.g.forEach(function(k,R){k.forEach(function(ee){d.call(v,ee,R,this)},this)},this)};function Pn(d,v){Cn(d);let k=[];if(typeof v=="string")Ms(d,v)&&(k=k.concat(d.g.get(Nr(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)k=k.concat(d[v]);return k}s.set=function(d,v){return Cn(this),this.i=null,d=Nr(this,d),Ms(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=Pn(this,d),d.length>0?String(d[0]):v):v};function Fn(d,v,k){er(d,v),k.length>0&&(d.i=null,d.g.set(Nr(d,v),O(k)),d.h+=k.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let R=0;R<v.length;R++){var k=v[R];const ee=ge(k);k=Pn(this,k);for(let he=0;he<k.length;he++){let qe=ee;k[he]!==""&&(qe+="="+ge(k[he])),d.push(qe)}}return this.i=d.join("&")};function Kr(d){const v=new Sn;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Nr(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Ka(d,v){v&&!d.j&&(Cn(d),d.i=null,d.g.forEach(function(k,R){const ee=R.toLowerCase();R!=ee&&(er(this,R),Fn(this,ee,k))},d)),d.j=v}function Us(d,v){const k=new kn;if(h.Image){const R=new Image;R.onload=w(dr,k,"TestLoadImage: loaded",!0,v,R),R.onerror=w(dr,k,"TestLoadImage: error",!1,v,R),R.onabort=w(dr,k,"TestLoadImage: abort",!1,v,R),R.ontimeout=w(dr,k,"TestLoadImage: timeout",!1,v,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else v(!1)}function Xl(d,v){const k=new kn,R=new AbortController,ee=setTimeout(()=>{R.abort(),dr(k,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:R.signal}).then(he=>{clearTimeout(ee),he.ok?dr(k,"TestPingServer: ok",!0,v):dr(k,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ee),dr(k,"TestPingServer: error",!1,v)})}function dr(d,v,k,R,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),R(k)}catch{}}function Ya(){this.g=new Pe}function Yr(d){this.i=d.Sb||null,this.h=d.ab||!1}T(Yr,tt),Yr.prototype.g=function(){return new Ki(this.i,this.h)};function Ki(d,v){lt.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ki,lt),s=Ki.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Cr(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qa(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Cr(this)),this.g&&(this.readyState=3,Cr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Qa(this):Cr(this),this.readyState==3&&Vo(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Qa(this))},s.Na=function(d){this.g&&(this.response=d,Qa(this))},s.ga=function(){this.g&&Qa(this)};function Qa(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Cr(d)}s.setRequestHeader=function(d,v){this.A.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var k=v.next();!k.done;)k=k.value,d.push(k[0]+": "+k[1]),k=v.next();return d.join(`\r
`)};function Cr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function fr(d){let v="";return le(d,function(k,R){v+=R,v+=":",v+=k,v+=`\r
`}),v}function Yi(d,v,k){e:{for(R in k){var R=!1;break e}R=!0}R||(k=fr(k),typeof d=="string"?k!=null&&ge(k):Ye(d,v,k))}function bn(d){lt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(bn,lt);var Qr=/^https?$/i,Jl=["POST","PUT"];s=bn.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,v,k,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():As.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(he){Qi(this,he);return}if(d=k||"",k=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var ee in R)k.set(ee,R[ee]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const he of R.keys())k.set(he,R.get(he));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(k.keys()).find(he=>he.toLowerCase()=="content-type"),ee=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Jl,v,void 0)>=0)||R||ee||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,qe]of k)this.g.setRequestHeader(he,qe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(he){Qi(this,he)}};function Qi(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Zl(d),ya(d)}function Zl(d){d.A||(d.A=!0,Xe(d,"complete"),Xe(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Xe(this,"complete"),Xe(this,"abort"),ya(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ya(this,!0)),bn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Xi(this):this.Xa())},s.Xa=function(){Xi(this)};function Xi(d){if(d.h&&typeof u<"u"){if(d.v&&Rr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Xe(d,"readystatechange"),Rr(d)==4){d.h=!1;try{const he=d.ca();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var k;if(!(k=v)){var R;if(R=he===0){let qe=String(d.D).match(F)[1]||null;!qe&&h.self&&h.self.location&&(qe=h.self.location.protocol.slice(0,-1)),R=!Qr.test(qe?qe.toLowerCase():"")}k=R}if(k)Xe(d,"complete"),Xe(d,"success");else{d.o=6;try{var ee=Rr(d)>2?d.g.statusText:""}catch{ee=""}d.l=ee+" ["+d.ca()+"]",Zl(d)}}finally{ya(d)}}}}function ya(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const k=d.g;d.g=null,v||Xe(d,"ready");try{k.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Rr(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Rr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Ne(v)}};function _s(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function va(d){const v={};d=(d.g&&Rr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(M(d[R]))continue;var k=ke(d[R]);const ee=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const he=v[ee]||[];v[ee]=he,he.push(k)}Ve(v,function(R){return R.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xr(d,v,k){return k&&k.internalChannelParams&&k.internalChannelParams[d]||v}function Xa(d){this.za=0,this.i=[],this.j=new kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xr("baseRetryDelayMs",5e3,d),this.Za=Xr("retryDelaySeedMs",1e4,d),this.Ta=Xr("forwardChannelMaxRetries",2,d),this.va=Xr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new L(d&&d.concurrentRequestLimit),this.Ba=new Ya,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Xa.prototype,s.ka=8,s.I=1,s.connect=function(d,v,k,R){Rt(0),this.W=d,this.H=v||{},k&&R!==void 0&&(this.H.OSID=k,this.H.OAID=R),this.F=this.X,this.J=Uu(this,null,this.W),Jr(this)};function ec(d){if(Bo(d),d.I==3){var v=d.V++,k=me(d.J);if(Ye(k,"SID",d.M),Ye(k,"RID",v),Ye(k,"TYPE","terminate"),Ji(d,k),v=new xe(d,d.j,v),v.M=2,v.A=Ot(me(k)),k=!1,h.navigator&&h.navigator.sendBeacon)try{k=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!k&&h.Image&&(new Image().src=v.A,k=!0),k||(v.g=zu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),rs(v)}Bu(d)}function Ja(d){d.g&&(nc(d),d.g.cancel(),d.g=null)}function Bo(d){Ja(d),d.v&&(h.clearTimeout(d.v),d.v=null),zo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Jr(d){if(!K(d.h)&&!d.m){d.m=!0;var v=d.Ea;Be||E(),Oe||(Be(),Oe=!0),I.add(v,d),d.D=0}}function Uo(d,v){return Me(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=zn(y(d.Ea,d,v),Vu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const ee=new xe(this,this.j,d);let he=this.o;if(this.U&&(he?(he=C(he),oe(he,this.U)):he=this.U),this.u!==null||this.R||(ee.J=he,he=null),this.S)e:{for(var v=0,k=0;k<this.i.length;k++){t:{var R=this.i[k];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(v+=R,v>4096){v=k;break e}if(v===4096||k===this.i.length-1){v=k+1;break e}}v=1e3}else v=1e3;v=Du(this,ee,v),k=me(this.J),Ye(k,"RID",d),Ye(k,"CVER",22),this.G&&Ye(k,"X-HTTP-Session-Id",this.G),Ji(this,k),he&&(this.R?v="headers="+ge(fr(he))+"&"+v:this.u&&Yi(k,this.u,he)),we(this.h,ee),this.Ra&&Ye(k,"TYPE","init"),this.S?(Ye(k,"$req",v),Ye(k,"SID","null"),ee.U=!0,it(ee,k,null)):it(ee,k,v),this.I=2}}else this.I==3&&(d?tc(this,d):this.i.length==0||K(this.h)||tc(this))};function tc(d,v){var k;v?k=v.l:k=d.V++;const R=me(d.J);Ye(R,"SID",d.M),Ye(R,"RID",k),Ye(R,"AID",d.K),Ji(d,R),d.u&&d.o&&Yi(R,d.u,d.o),k=new xe(d,d.j,k,d.D+1),d.u===null&&(k.J=d.o),v&&(d.i=v.G.concat(d.i)),v=Du(d,k,1e3),k.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),we(d.h,k),it(k,R,v)}function Ji(d,v){d.H&&le(d.H,function(k,R){Ye(v,R,k)}),d.l&&le({},function(k,R){Ye(v,R,k)})}function Du(d,v,k){k=Math.min(d.i.length,k);const R=d.l?y(d.l.Ka,d.l,d):null;e:{var ee=d.i;let Dt=-1;for(;;){const Qn=["count="+k];Dt==-1?k>0?(Dt=ee[0].g,Qn.push("ofs="+Dt)):Dt=0:Qn.push("ofs="+Dt);let ln=!0;for(let Ln=0;Ln<k;Ln++){var he=ee[Ln].g;const mr=ee[Ln].map;if(he-=Dt,he<0)Dt=Math.max(0,ee[Ln].g-100),ln=!1;else try{he="req"+he+"_"||"";try{var qe=mr instanceof Map?mr:Object.entries(mr);for(const[ea,Ar]of qe){let Ir=Ar;p(Ar)&&(Ir=ye(Ar)),Qn.push(he+ea+"="+encodeURIComponent(Ir))}}catch(ea){throw Qn.push(he+"type="+encodeURIComponent("_badmap")),ea}}catch{R&&R(mr)}}if(ln){qe=Qn.join("&");break e}}qe=void 0}return d=d.i.splice(0,k),v.G=d,qe}function Pu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;Be||E(),Oe||(Be(),Oe=!0),I.add(v,d),d.A=0}}function Zi(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=zn(y(d.Da,d),Vu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=zn(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Ja(this),Lu(this))};function nc(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Lu(d){d.g=new xe(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=me(d.na);Ye(v,"RID","rpc"),Ye(v,"SID",d.M),Ye(v,"AID",d.K),Ye(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ye(v,"TO",d.ia),Ye(v,"TYPE","xmlhttp"),Ji(d,v),d.u&&d.o&&Yi(v,d.u,d.o),d.O&&(d.g.H=d.O);var k=d.g;d=d.ba,k.M=1,k.A=Ot(me(v)),k.u=null,k.R=!0,xt(k,d)}s.Va=function(){this.C!=null&&(this.C=null,Ja(this),Zi(this),Rt(19))};function zo(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Ou(d,v){var k=null;if(d.g==v){zo(d),nc(d),d.g=null;var R=2}else if(ve(d.h,v))k=v.G,st(d.h,v),R=1;else return;if(d.I!=0){if(v.o)if(R==1){k=v.u?v.u.length:0,v=Date.now()-v.F;var ee=d.D;R=Jt(),Xe(R,new on(R,k)),Jr(d)}else Pu(d);else if(ee=v.m,ee==3||ee==0&&v.X>0||!(R==1&&Uo(d,v)||R==2&&Zi(d)))switch(k&&k.length>0&&(v=d.h,v.i=v.i.concat(k)),ee){case 1:Zr(d,5);break;case 4:Zr(d,10);break;case 3:Zr(d,6);break;default:Zr(d,2)}}}function Vu(d,v){let k=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(k*=2),k*v}function Zr(d,v){if(d.j.info("Error code "+v),v==2){var k=y(d.bb,d),R=d.Ua;const ee=!R;R=new te(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ce(R,"https"),Ot(R),ee?Us(R.toString(),k):Xl(R.toString(),k)}else Rt(2);d.I=0,d.l&&d.l.pa(v),Bu(d),Bo(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Bu(d){if(d.I=0,d.ja=[],d.l){const v=et(d.h);(v.length!=0||d.i.length!=0)&&(G(d.ja,v),G(d.ja,d.i),d.h.i.length=0,O(d.i),d.i.length=0),d.l.oa()}}function Uu(d,v,k){var R=k instanceof te?me(k):new te(k);if(R.g!="")v&&(R.g=v+"."+R.g),$e(R,R.u);else{var ee=h.location;R=ee.protocol,v=v?v+"."+ee.hostname:ee.hostname,ee=+ee.port;const he=new te(null);R&&Ce(he,R),v&&(he.g=v),ee&&$e(he,ee),k&&(he.h=k),R=he}return k=d.G,v=d.wa,k&&v&&Ye(R,k,v),Ye(R,"VER",d.ka),Ji(d,R),R}function zu(d,v,k){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new bn(new Yr({ab:k})):new bn(d.ma),v.Fa(d.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}s=Fu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Za(){}Za.prototype.g=function(d,v){return new zs(d,v)};function zs(d,v){lt.call(this),this.g=new Xa(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!M(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!M(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new ba(this)}T(zs,lt),zs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zs.prototype.close=function(){ec(this.g)},zs.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var k={};k.__data__=d,d=k}else this.v&&(k={},k.__data__=ye(d),d=k);v.i.push(new j(v.Ya++,d)),v.I==3&&Jr(v)},zs.prototype.N=function(){this.g.l=null,delete this.j,ec(this.g),delete this.g,zs.Z.N.call(this)};function qu(d){nt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const k in v){d=k;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}T(qu,nt);function Hu(){Ke.call(this),this.status=1}T(Hu,Ke);function ba(d){this.g=d}T(ba,Fu),ba.prototype.ra=function(){Xe(this.g,"a")},ba.prototype.qa=function(d){Xe(this.g,new qu(d))},ba.prototype.pa=function(d){Xe(this.g,new Hu)},ba.prototype.oa=function(){Xe(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,zs.prototype.send=zs.prototype.o,zs.prototype.open=zs.prototype.m,zs.prototype.close=zs.prototype.close,Cw=function(){return new Za},Nw=function(){return Jt()},Sw=He,eg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,md=vs,Hn.COMPLETE="complete",Ew=Hn,Je.EventType=Ue,Ue.OPEN="a",Ue.CLOSE="b",Ue.ERROR="c",Ue.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Kc=Je,bn.prototype.listenOnce=bn.prototype.K,bn.prototype.getLastError=bn.prototype.Ha,bn.prototype.getLastErrorCode=bn.prototype.ya,bn.prototype.getStatus=bn.prototype.ca,bn.prototype.getResponseJson=bn.prototype.La,bn.prototype.getResponseText=bn.prototype.la,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Fa,jw=bn}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});class Ls{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ls.UNAUTHENTICATED=new Ls(null),Ls.GOOGLE_CREDENTIALS=new Ls("google-credentials-uid"),Ls.FIRST_PARTY=new Ls("first-party-uid"),Ls.MOCK_USER=new Ls("mock-user");let Wl="12.8.0";function F4(s){Wl=s}const Ro=new Ng("@firebase/firestore");function _l(){return Ro.logLevel}function at(s,...e){if(Ro.logLevel<=Yt.DEBUG){const n=e.map(zg);Ro.debug(`Firestore (${Wl}): ${s}`,...n)}}function Ha(s,...e){if(Ro.logLevel<=Yt.ERROR){const n=e.map(zg);Ro.error(`Firestore (${Wl}): ${s}`,...n)}}function Dl(s,...e){if(Ro.logLevel<=Yt.WARN){const n=e.map(zg);Ro.warn(`Firestore (${Wl}): ${s}`,...n)}}function zg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function jt(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Rw(s,i,n)}function Rw(s,e,n){let i=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ha(i),new Error(i)}function fn(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||Rw(e,l,i)}function Mt(s,e){return s}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends ga{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ba{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Aw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class q4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ls.UNAUTHENTICATED)))}shutdown(){}}class H4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $4{constructor(e){this.t=e,this.currentUser=Ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fn(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new Ba;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ba,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ba)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fn(typeof i.accessToken=="string",31837,{l:i}),new Aw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fn(e===null||typeof e=="string",2055,{h:e}),new Ls(e)}}class W4{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ls.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class G4{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new W4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ls.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Y1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fn(this.o===void 0,3512);const i=u=>{u.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,at("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Y1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(fn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Y1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Y4(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class Fg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=Y4(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function Qt(s,e){return s<e?-1:s>e?1:0}function tg(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return wp(l)===wp(u)?Qt(l,u):wp(l)?1:-1}return Qt(s.length,e.length)}const Q4=55296,X4=57343;function wp(s){const e=s.charCodeAt(0);return e>=Q4&&e<=X4}function Pl(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}const Q1="__name__";class ia{constructor(e,n,i){n===void 0?n=0:n>e.length&&jt(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&jt(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ia?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=ia.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Qt(e.length,n.length)}static compareSegments(e,n){const i=ia.isNumericId(e),l=ia.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?ia.extractNumericId(e).compare(ia.extractNumericId(n)):tg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mi.fromString(e.substring(4,e.length-2))}}class Nn extends ia{construct(e,n,i){return new Nn(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new Nn(n)}static emptyPath(){return new Nn([])}}const J4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ns extends ia{construct(e,n,i){return new Ns(e,n,i)}static isValidIdentifier(e){return J4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ns.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Q1}static keyField(){return new Ns([Q1])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Ze(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ze(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(h=!h,l++):p!=="."||h?(i+=p,l++):(u(),l++)}if(u(),h)throw new Ze(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ns(n)}static emptyPath(){return new Ns([])}}class vt{constructor(e){this.path=e}static fromPath(e){return new vt(Nn.fromString(e))}static fromName(e){return new vt(Nn.fromString(e).popFirst(5))}static empty(){return new vt(Nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vt(new Nn(e.slice()))}}function Iw(s,e,n){if(!n)throw new Ze(Ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Z4(s,e,n,i){if(e===!0&&i===!0)throw new Ze(Ee.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function X1(s){if(!vt.isDocumentKey(s))throw new Ze(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function J1(s){if(vt.isDocumentKey(s))throw new Ze(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Mw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Gd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":jt(12329,{type:typeof s})}function Fr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ze(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gd(s);throw new Ze(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function eR(s,e){if(e<=0)throw new Ze(Ee.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function ds(s,e){const n={typeString:s};return e&&(n.value=e),n}function Eu(s,e){if(!Mw(s))throw new Ze(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const h=s[i];if(l&&typeof h!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Ze(Ee.INVALID_ARGUMENT,n);return!0}const Z1=-62135596800,ex=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*ex);return new dt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Z1)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ex}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Z1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:ds("string",dt._jsonSchemaVersion),seconds:ds("number"),nanoseconds:ds("number")};class At{static fromTimestamp(e){return new At(e)}static min(){return new At(new dt(0,0))}static max(){return new At(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const cu=-1;function tR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=At.fromTimestamp(i===1e9?new dt(n+1,0):new dt(n,i));return new Li(l,vt.empty(),e)}function nR(s){return new Li(s.readTime,s.key,cu)}class Li{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Li(At.min(),vt.empty(),cu)}static max(){return new Li(At.max(),vt.empty(),cu)}}function sR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=vt.comparator(s.documentKey,e.documentKey),n!==0?n:Qt(s.largestBatchId,e.largestBatchId))}const rR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Gl(s){if(s.code!==Ee.FAILED_PRECONDITION||s.message!==rR)throw s;at("LocalStore","Unexpectedly lost primary lease")}class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&jt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ie(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ie?n:Ie.resolve(n)}catch(n){return Ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.reject(n)}static resolve(e){return new Ie(((n,i)=>{n(e)}))}static reject(e){return new Ie(((n,i)=>{i(e)}))}static waitFor(e){return new Ie(((n,i)=>{let l=0,u=0,h=!1;e.forEach((p=>{++l,p.next((()=>{++u,h&&u===l&&n()}),(g=>i(g)))})),h=!0,u===l&&n()}))}static or(e){let n=Ie.resolve(!1);for(const i of e)n=n.next((l=>l?Ie.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new Ie(((i,l)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((w=>{h[y]=w,++p,p===u&&i(h)}),(w=>l(w)))}}))}static doWhile(e,n){return new Ie(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function iR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kl(s){return s.name==="IndexedDbTransactionError"}class Kd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kd.ce=-1;const qg=-1;function Yd(s){return s==null}function Rd(s){return s===0&&1/s==-1/0}function oR(s){return typeof s=="number"&&Number.isInteger(s)&&!Rd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Dw="";function lR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=tx(e)),e=cR(s.get(n),e);return tx(e)}function cR(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case Dw:n+="";break;default:n+=u}}return n}function tx(s){return s+Dw+""}function nx(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function $i(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Pw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class qn{constructor(e,n){this.comparator=e,this.root=n||Ss.EMPTY}insert(e,n){return new qn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ss.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ss.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ss{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??Ss.RED,this.left=l??Ss.EMPTY,this.right=u??Ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new Ss(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Ss.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw jt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw jt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw jt(27949);return e+(this.isRed()?0:1)}}Ss.EMPTY=null,Ss.RED=!0,Ss.BLACK=!1;Ss.EMPTY=new class{constructor(){this.size=0}get key(){throw jt(57766)}get value(){throw jt(16141)}get color(){throw jt(16727)}get left(){throw jt(29726)}get right(){throw jt(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new Ss(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gs{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sx(this.data.getIterator())}getIteratorFrom(e){return new sx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof gs)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new gs(this.comparator);return n.data=e,n}}class sx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class cr{constructor(e){this.fields=e,e.sort(Ns.comparator)}static empty(){return new cr([])}unionWith(e){let n=new gs(Ns.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class Lw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Lw("Invalid base64 string: "+u):u}})(e);return new Cs(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new Cs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cs.EMPTY_BYTE_STRING=new Cs("");const uR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(s){if(fn(!!s,39018),typeof s=="string"){let e=0;const n=uR.exec(s);if(fn(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Zn(s.seconds),nanos:Zn(s.nanos)}}function Zn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Vi(s){return typeof s=="string"?Cs.fromBase64String(s):Cs.fromUint8Array(s)}const Ow="server_timestamp",Vw="__type__",Bw="__previous_value__",Uw="__local_write_time__";function Hg(s){return(s?.mapValue?.fields||{})[Vw]?.stringValue===Ow}function Qd(s){const e=s.mapValue.fields[Bw];return Hg(e)?Qd(e):e}function uu(s){const e=Oi(s.mapValue.fields[Uw].timestampValue);return new dt(e.seconds,e.nanos)}class hR{constructor(e,n,i,l,u,h,p,g,y,w,T){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w,this.apiKey=T}}const Ad="(default)";class hu{constructor(e,n){this.projectId=e,this.database=n||Ad}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database===Ad}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}function dR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ze(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(s.options.projectId,e)}const zw="__type__",fR="__max__",Jh={mapValue:{}},Fw="__vector__",Id="value";function Bi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Hg(s)?4:pR(s)?9007199254740991:mR(s)?10:11:jt(28295,{value:s})}function pa(s,e){if(s===e)return!0;const n=Bi(s);if(n!==Bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return uu(s).isEqual(uu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=Oi(l.timestampValue),p=Oi(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Vi(l.bytesValue).isEqual(Vi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return Zn(l.geoPointValue.latitude)===Zn(u.geoPointValue.latitude)&&Zn(l.geoPointValue.longitude)===Zn(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Zn(l.integerValue)===Zn(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=Zn(l.doubleValue),p=Zn(u.doubleValue);return h===p?Rd(h)===Rd(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return Pl(s.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},p=u.mapValue.fields||{};if(nx(h)!==nx(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!pa(h[g],p[g])))return!1;return!0})(s,e);default:return jt(52216,{left:s})}}function du(s,e){return(s.values||[]).find((n=>pa(n,e)))!==void 0}function Ll(s,e){if(s===e)return 0;const n=Bi(s),i=Bi(e);if(n!==i)return Qt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qt(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=Zn(u.integerValue||u.doubleValue),g=Zn(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return rx(s.timestampValue,e.timestampValue);case 4:return rx(uu(s),uu(e));case 5:return tg(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=Vi(u),g=Vi(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=Qt(p[y],g[y]);if(w!==0)return w}return Qt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=Qt(Zn(u.latitude),Zn(h.latitude));return p!==0?p:Qt(Zn(u.longitude),Zn(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return ax(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},y=p[Id]?.arrayValue,w=g[Id]?.arrayValue,T=Qt(y?.values?.length||0,w?.values?.length||0);return T!==0?T:ax(y,w)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Jh.mapValue&&h===Jh.mapValue)return 0;if(u===Jh.mapValue)return 1;if(h===Jh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const S=tg(g[T],w[T]);if(S!==0)return S;const O=Ll(p[g[T]],y[w[T]]);if(O!==0)return O}return Qt(g.length,w.length)})(s.mapValue,e.mapValue);default:throw jt(23264,{he:n})}}function rx(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Qt(s,e);const n=Oi(s),i=Oi(e),l=Qt(n.seconds,i.seconds);return l!==0?l:Qt(n.nanos,i.nanos)}function ax(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=Ll(n[l],i[l]);if(u)return u}return Qt(n.length,i.length)}function Ol(s){return ng(s)}function ng(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Oi(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Vi(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return vt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=ng(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const h of i)u?u=!1:l+=",",l+=`${h}:${ng(n.fields[h])}`;return l+"}"})(s.mapValue):jt(61005,{value:s})}function pd(s){switch(Bi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qd(s);return e?16+pd(e):16;case 5:return 2*s.stringValue.length;case 6:return Vi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+pd(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return $i(i.fields,((u,h)=>{l+=u.length+pd(h)})),l})(s.mapValue);default:throw jt(13486,{value:s})}}function ix(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function sg(s){return!!s&&"integerValue"in s}function $g(s){return!!s&&"arrayValue"in s}function ox(s){return!!s&&"nullValue"in s}function lx(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function gd(s){return!!s&&"mapValue"in s}function mR(s){return(s?.mapValue?.fields||{})[zw]?.stringValue===Fw}function eu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return $i(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=eu(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eu(s.arrayValue.values[n]);return e}return{...s}}function pR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===fR}class Js{constructor(e){this.value=e}static empty(){return new Js({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!gd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)}setAll(e){let n=Ns.emptyPath(),i={},l=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,l),i={},l=[],n=p.popLast()}h?i[p.lastSegment()]=eu(h):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];gd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){$i(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new Js(eu(this.value))}}function qw(s){const e=[];return $i(s.fields,((n,i)=>{const l=new Ns([n]);if(gd(i)){const u=qw(i.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new cr(e)}class Os{constructor(e,n,i,l,u,h,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Os(e,0,At.min(),At.min(),At.min(),Js.empty(),0)}static newFoundDocument(e,n,i,l){return new Os(e,1,n,At.min(),i,l,0)}static newNoDocument(e,n){return new Os(e,2,n,At.min(),At.min(),Js.empty(),0)}static newUnknownDocument(e,n){return new Os(e,3,n,At.min(),At.min(),Js.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Js.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Js.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Os&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Os(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Md{constructor(e,n){this.position=e,this.inclusive=n}}function cx(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],h=s.position[l];if(u.field.isKeyField()?i=vt.comparator(vt.fromName(h.referenceValue),n.key):i=Ll(h,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function ux(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!pa(s.position[n],e.position[n]))return!1;return!0}class fu{constructor(e,n="asc"){this.field=e,this.dir=n}}function gR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Hw{}class hs extends Hw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new vR(e,n,i):n==="array-contains"?new wR(e,i):n==="in"?new _R(e,i):n==="not-in"?new kR(e,i):n==="array-contains-any"?new TR(e,i):new hs(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new bR(e,i):new xR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ll(n,this.value)):n!==null&&Bi(this.value)===Bi(n)&&this.matchesComparison(Ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return jt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qr extends Hw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new qr(e,n)}matches(e){return $w(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $w(s){return s.op==="and"}function Ww(s){return yR(s)&&$w(s)}function yR(s){for(const e of s.filters)if(e instanceof qr)return!1;return!0}function rg(s){if(s instanceof hs)return s.field.canonicalString()+s.op.toString()+Ol(s.value);if(Ww(s))return s.filters.map((e=>rg(e))).join(",");{const e=s.filters.map((n=>rg(n))).join(",");return`${s.op}(${e})`}}function Gw(s,e){return s instanceof hs?(function(i,l){return l instanceof hs&&i.op===l.op&&i.field.isEqual(l.field)&&pa(i.value,l.value)})(s,e):s instanceof qr?(function(i,l){return l instanceof qr&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,h,p)=>u&&Gw(h,l.filters[p])),!0):!1})(s,e):void jt(19439)}function Kw(s){return s instanceof hs?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`})(s):s instanceof qr?(function(n){return n.op.toString()+" {"+n.getFilters().map(Kw).join(" ,")+"}"})(s):"Filter"}class vR extends hs{constructor(e,n,i){super(e,n,i),this.key=vt.fromName(i.referenceValue)}matches(e){const n=vt.comparator(e.key,this.key);return this.matchesComparison(n)}}class bR extends hs{constructor(e,n){super(e,"in",n),this.keys=Yw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class xR extends hs{constructor(e,n){super(e,"not-in",n),this.keys=Yw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Yw(s,e){return(e.arrayValue?.values||[]).map((n=>vt.fromName(n.referenceValue)))}class wR extends hs{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $g(n)&&du(n.arrayValue,this.value)}}class _R extends hs{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&du(this.value.arrayValue,n)}}class kR extends hs{constructor(e,n){super(e,"not-in",n)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!du(this.value.arrayValue,n)}}class TR extends hs{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$g(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>du(this.value.arrayValue,i)))}}class jR{constructor(e,n=null,i=[],l=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function hx(s,e=null,n=[],i=[],l=null,u=null,h=null){return new jR(s,e,n,i,l,u,h)}function Wg(s){const e=Mt(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>rg(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Yd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ol(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ol(i))).join(",")),e.Te=n}return e.Te}function Gg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!gR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Gw(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!ux(s.startAt,e.startAt)&&ux(s.endAt,e.endAt)}function ag(s){return vt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Yl{constructor(e,n=null,i=[],l=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function ER(s,e,n,i,l,u,h,p){return new Yl(s,e,n,i,l,u,h,p)}function Kg(s){return new Yl(s)}function dx(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function SR(s){return vt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Qw(s){return s.collectionGroup!==null}function tu(s){const e=Mt(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new gs(Ns.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new fu(u,i))})),n.has(Ns.keyField().canonicalString())||e.Ie.push(new fu(Ns.keyField(),i))}return e.Ie}function da(s){const e=Mt(s);return e.Ee||(e.Ee=NR(e,tu(s))),e.Ee}function NR(s,e){if(s.limitType==="F")return hx(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new fu(l.field,u)}));const n=s.endAt?new Md(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Md(s.startAt.position,s.startAt.inclusive):null;return hx(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function ig(s,e){const n=s.filters.concat([e]);return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function CR(s,e){const n=s.explicitOrderBy.concat([e]);return new Yl(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Dd(s,e,n){return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Xd(s,e){return Gg(da(s),da(e))&&s.limitType===e.limitType}function Xw(s){return`${Wg(da(s))}|lt:${s.limitType}`}function kl(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>Kw(l))).join(", ")}]`),Yd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Ol(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Ol(l))).join(",")),`Target(${i})`})(da(s))}; limitType=${s.limitType})`}function Jd(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):vt.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of tu(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(h,p,g){const y=cx(h,p,g);return h.inclusive?y<=0:y<0})(i.startAt,tu(i),l)||i.endAt&&!(function(h,p,g){const y=cx(h,p,g);return h.inclusive?y>=0:y>0})(i.endAt,tu(i),l))})(s,e)}function RR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Jw(s){return(e,n)=>{let i=!1;for(const l of tu(s)){const u=AR(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function AR(s,e,n){const i=s.field.isKeyField()?vt.comparator(e.key,n.key):(function(u,h,p){const g=h.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Ll(g,y):jt(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return jt(19790,{direction:s.dir})}}class Po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){$i(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return Pw(this.inner)}size(){return this.innerSize}}const IR=new qn(vt.comparator);function $a(){return IR}const Zw=new qn(vt.comparator);function Yc(...s){let e=Zw;for(const n of s)e=e.insert(n.key,n);return e}function e_(s){let e=Zw;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function xo(){return nu()}function t_(){return nu()}function nu(){return new Po((s=>s.toString()),((s,e)=>s.isEqual(e)))}const MR=new qn(vt.comparator),DR=new gs(vt.comparator);function Xt(...s){let e=DR;for(const n of s)e=e.add(n);return e}const PR=new gs(Qt);function LR(){return PR}function Yg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function n_(s){return{integerValue:""+s}}function s_(s,e){return oR(e)?n_(e):Yg(s,e)}class Zd{constructor(){this._=void 0}}function OR(s,e,n){return s instanceof mu?(function(l,u){const h={fields:{[Vw]:{stringValue:Ow},[Uw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Hg(u)&&(u=Qd(u)),u&&(h.fields[Bw]=u),{mapValue:h}})(n,e):s instanceof pu?a_(s,e):s instanceof gu?i_(s,e):(function(l,u){const h=r_(l,u),p=fx(h)+fx(l.Ae);return sg(h)&&sg(l.Ae)?n_(p):Yg(l.serializer,p)})(s,e)}function VR(s,e,n){return s instanceof pu?a_(s,e):s instanceof gu?i_(s,e):n}function r_(s,e){return s instanceof yu?(function(i){return sg(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class mu extends Zd{}class pu extends Zd{constructor(e){super(),this.elements=e}}function a_(s,e){const n=o_(e);for(const i of s.elements)n.some((l=>pa(l,i)))||n.push(i);return{arrayValue:{values:n}}}class gu extends Zd{constructor(e){super(),this.elements=e}}function i_(s,e){let n=o_(e);for(const i of s.elements)n=n.filter((l=>!pa(l,i)));return{arrayValue:{values:n}}}class yu extends Zd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fx(s){return Zn(s.integerValue||s.doubleValue)}function o_(s){return $g(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class l_{constructor(e,n){this.field=e,this.transform=n}}function BR(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof pu&&l instanceof pu||i instanceof gu&&l instanceof gu?Pl(i.elements,l.elements,pa):i instanceof yu&&l instanceof yu?pa(i.Ae,l.Ae):i instanceof mu&&l instanceof mu})(s.transform,e.transform)}class UR{constructor(e,n){this.version=e,this.transformResults=n}}class jr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ef{}function c_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Qg(s.key,jr.none()):new Su(s.key,s.data,jr.none());{const n=s.data,i=Js.empty();let l=new gs(Ns.comparator);for(let u of e.fields)if(!l.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?i.delete(u):i.set(u,h),l=l.add(u)}return new Wi(s.key,i,new cr(l.toArray()),jr.none())}}function zR(s,e,n){s instanceof Su?(function(l,u,h){const p=l.value.clone(),g=px(l.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Wi?(function(l,u,h){if(!yd(l.precondition,u))return void u.convertToUnknownDocument(h.version);const p=px(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(u_(l)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function su(s,e,n,i){return s instanceof Su?(function(u,h,p,g){if(!yd(u.precondition,h))return p;const y=u.value.clone(),w=gx(u.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof Wi?(function(u,h,p,g){if(!yd(u.precondition,h))return p;const y=gx(u.fieldTransforms,g,h),w=h.data;return w.setAll(u_(u)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,e,n,i):(function(u,h,p){return yd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,n)}function FR(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=r_(i.transform,l||null);u!=null&&(n===null&&(n=Js.empty()),n.set(i.field,u))}return n||null}function mx(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Pl(i,l,((u,h)=>BR(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Su extends ef{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Wi extends ef{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function u_(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function px(s,e,n){const i=new Map;fn(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],h=u.transform,p=e.data.field(u.field);i.set(u.field,VR(h,p,n[l]))}return i}function gx(s,e,n){const i=new Map;for(const l of s){const u=l.transform,h=n.data.field(l.field);i.set(l.field,OR(u,h,e))}return i}class Qg extends ef{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qR extends ef{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HR{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&zR(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=su(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=su(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=t_();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(l.key)?null:p;const g=c_(h,p);g!==null&&i.set(l.key,g),h.isValidDocument()||h.convertToNoDocument(At.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Xt())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((n,i)=>mx(n,i)))&&Pl(this.baseMutations,e.baseMutations,((n,i)=>mx(n,i)))}}class Xg{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){fn(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return MR})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,i[h].version);return new Xg(e,n,i,l)}}class $R{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WR{constructor(e,n){this.count=e,this.unchangedNames=n}}var us,tn;function GR(s){switch(s){case Ee.OK:return jt(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return jt(15467,{code:s})}}function h_(s){if(s===void 0)return Ha("GRPC error has no .code"),Ee.UNKNOWN;switch(s){case us.OK:return Ee.OK;case us.CANCELLED:return Ee.CANCELLED;case us.UNKNOWN:return Ee.UNKNOWN;case us.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case us.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case us.INTERNAL:return Ee.INTERNAL;case us.UNAVAILABLE:return Ee.UNAVAILABLE;case us.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case us.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case us.NOT_FOUND:return Ee.NOT_FOUND;case us.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case us.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case us.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case us.ABORTED:return Ee.ABORTED;case us.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case us.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case us.DATA_LOSS:return Ee.DATA_LOSS;default:return jt(39323,{code:s})}}(tn=us||(us={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";function KR(){return new TextEncoder}const YR=new Mi([4294967295,4294967295],0);function yx(s){const e=KR().encode(s),n=new Tw;return n.update(e),new Uint8Array(n.digest())}function vx(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Mi([n,i],0),new Mi([l,u],0)]}class Jg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Qc(`Invalid padding: ${n}`);if(i<0)throw new Qc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Qc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mi.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Mi.fromNumber(i)));return l.compare(YR)===1&&(l=new Mi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=yx(e),[i,l]=vx(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);if(!this.we(h))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Jg(u,l,n);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=yx(e),[i,l]=vx(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);this.be(h)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tf{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new tf(At.min(),l,new qn(Qt),$a(),Xt())}}class Nu{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Nu(i,n,Xt(),Xt(),Xt())}}class vd{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class d_{constructor(e,n){this.targetId=e,this.Ce=n}}class f_{constructor(e,n,i=Cs.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class bx{constructor(){this.ve=0,this.Fe=xx(),this.Me=Cs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xt(),n=Xt(),i=Xt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:jt(38017,{changeType:u})}})),new Nu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=xx()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,fn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class QR{constructor(e){this.Ge=e,this.ze=new Map,this.je=$a(),this.He=Zh(),this.Je=Zh(),this.Ze=new qn(Qt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:jt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(ag(u))if(i===0){const h=new vt(u.path);this.et(n,h,Os.newNoDocument(h,At.min()))}else fn(i===1,20013,{expectedCount:i});else{const h=this._t(n);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let h,p;try{h=Vi(i).toUint8Array()}catch(g){if(g instanceof Lw)return Dl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Jg(h,l,u)}catch(g){return Dl(g instanceof Qc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&ag(p.target)){const g=new vt(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Os.newNoDocument(g,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let i=Xt();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new tf(e,n,this.Ze,this.je,i);return this.je=$a(),this.He=Zh(),this.Je=Zh(),this.Ze=new qn(Qt),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new bx,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new gs(Qt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new gs(Qt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||at("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zh(){return new qn(vt.comparator)}function xx(){return new qn(vt.comparator)}const XR={asc:"ASCENDING",desc:"DESCENDING"},JR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZR={and:"AND",or:"OR"};class eA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function og(s,e){return s.useProto3Json||Yd(e)?e:{value:e}}function Pd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function tA(s,e){return Pd(s,e.toTimestamp())}function fa(s){return fn(!!s,49232),At.fromTimestamp((function(n){const i=Oi(n);return new dt(i.seconds,i.nanos)})(s))}function Zg(s,e){return lg(s,e).canonicalString()}function lg(s,e){const n=(function(l){return new Nn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function p_(s){const e=Nn.fromString(s);return fn(x_(e),10190,{key:e.toString()}),e}function cg(s,e){return Zg(s.databaseId,e.path)}function _p(s,e){const n=p_(e);if(n.get(1)!==s.databaseId.projectId)throw new Ze(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Ze(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new vt(y_(n))}function g_(s,e){return Zg(s.databaseId,e)}function nA(s){const e=p_(s);return e.length===4?Nn.emptyPath():y_(e)}function ug(s){return new Nn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function y_(s){return fn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function wx(s,e,n){return{name:cg(s,e),fields:n.value.mapValue.fields}}function sA(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:jt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,w){return y.useProto3Json?(fn(w===void 0||typeof w=="string",58123),Cs.fromBase64String(w||"")):(fn(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Cs.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const w=y.code===void 0?Ee.UNKNOWN:h_(y.code);return new Ze(w,y.message||"")})(h);n=new f_(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=_p(s,i.document.name),u=fa(i.document.updateTime),h=i.document.createTime?fa(i.document.createTime):At.min(),p=new Js({mapValue:{fields:i.document.fields}}),g=Os.newFoundDocument(l,u,h,p),y=i.targetIds||[],w=i.removedTargetIds||[];n=new vd(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=_p(s,i.document),u=i.readTime?fa(i.readTime):At.min(),h=Os.newNoDocument(l,u),p=i.removedTargetIds||[];n=new vd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=_p(s,i.document),u=i.removedTargetIds||[];n=new vd([],u,l,null)}else{if(!("filter"in e))return jt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,h=new WR(l,u),p=i.targetId;n=new d_(p,h)}}return n}function rA(s,e){let n;if(e instanceof Su)n={update:wx(s,e.key,e.value)};else if(e instanceof Qg)n={delete:cg(s,e.key)};else if(e instanceof Wi)n={update:wx(s,e.key,e.data),updateMask:fA(e.fieldMask)};else{if(!(e instanceof qR))return jt(16599,{dt:e.type});n={verify:cg(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof mu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof pu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof gu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof yu)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw jt(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:tA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:jt(27497)})(s,e.precondition)),n}function aA(s,e){return s&&s.length>0?(fn(e!==void 0,14353),s.map((n=>(function(l,u){let h=l.updateTime?fa(l.updateTime):fa(u);return h.isEqual(At.min())&&(h=fa(u)),new UR(h,l.transformResults||[])})(n,e)))):[]}function iA(s,e){return{documents:[g_(s,e.path)]}}function oA(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=g_(s,l);const u=(function(y){if(y.length!==0)return b_(qr.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((w=>(function(S){return{field:Tl(S.field),direction:uA(S.dir)}})(w)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=og(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function lA(s){let e=nA(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){fn(i===1,65062);const w=n.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let u=[];n.where&&(u=(function(T){const S=v_(T);return S instanceof qr&&Ww(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((S=>(function(G){return new fu(jl(G.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(S)))})(n.orderBy));let p=null;n.limit&&(p=(function(T){let S;return S=typeof T=="object"?T.value:T,Yd(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(T){const S=!!T.before,O=T.values||[];return new Md(O,S)})(n.startAt));let y=null;return n.endAt&&(y=(function(T){const S=!T.before,O=T.values||[];return new Md(O,S)})(n.endAt)),ER(e,l,h,u,p,"F",g,y)}function cA(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jt(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function v_(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=jl(n.unaryFilter.field);return hs.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=jl(n.unaryFilter.field);return hs.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=jl(n.unaryFilter.field);return hs.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=jl(n.unaryFilter.field);return hs.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return jt(61313);default:return jt(60726)}})(s):s.fieldFilter!==void 0?(function(n){return hs.create(jl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return jt(58110);default:return jt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return qr.create(n.compositeFilter.filters.map((i=>v_(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return jt(1026)}})(n.compositeFilter.op))})(s):jt(30097,{filter:s})}function uA(s){return XR[s]}function hA(s){return JR[s]}function dA(s){return ZR[s]}function Tl(s){return{fieldPath:s.canonicalString()}}function jl(s){return Ns.fromServerFormat(s.fieldPath)}function b_(s){return s instanceof hs?(function(n){if(n.op==="=="){if(lx(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NAN"}};if(ox(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lx(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NOT_NAN"}};if(ox(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(n.field),op:hA(n.op),value:n.value}}})(s):s instanceof qr?(function(n){const i=n.getFilters().map((l=>b_(l)));return i.length===1?i[0]:{compositeFilter:{op:dA(n.op),filters:i}}})(s):jt(54877,{filter:s})}function fA(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function x_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function w_(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Ri{constructor(e,n,i,l,u=At.min(),h=At.min(),p=Cs.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mA{constructor(e){this.yt=e}}function pA(s){const e=lA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Dd(e,e.limit,"L"):e}class gA{constructor(){this.Sn=new yA}addToCollectionParentIndex(e,n){return this.Sn.add(n),Ie.resolve()}getCollectionParents(e,n){return Ie.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Ie.resolve()}deleteFieldIndex(e,n){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,n){return Ie.resolve()}getDocumentsMatchingTarget(e,n){return Ie.resolve(null)}getIndexType(e,n){return Ie.resolve(0)}getFieldIndexes(e,n){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,n){return Ie.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,n){return Ie.resolve(Li.min())}updateCollectionGroup(e,n,i){return Ie.resolve()}updateIndexEntries(e,n){return Ie.resolve()}}class yA{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new gs(Nn.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new gs(Nn.comparator)).toArray()}}const _x={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},__=41943040;class Xs{static withCacheSize(e){return new Xs(e,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Xs.DEFAULT_COLLECTION_PERCENTILE=10,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xs.DEFAULT=new Xs(__,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xs.DISABLED=new Xs(-1,0,0);class Vl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Vl(0)}static ar(){return new Vl(-1)}}const kx="LruGarbageCollector",vA=1048576;function Tx([s,e],[n,i]){const l=Qt(s,n);return l===0?Qt(e,i):l}class bA{constructor(e){this.Pr=e,this.buffer=new gs(Tx),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Tx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xA{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){at(kx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kl(n)?at(kx,"Ignoring IndexedDB error during garbage collection: ",n):await Gl(n)}await this.Ar(3e5)}))}}class wA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return Ie.resolve(Kd.ce);const i=new bA(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(_x)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_x):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,u,h,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),l=this.params.maximumSequenceNumbersToCollect):l=T,h=Date.now(),this.nthSequenceNumber(e,l)))).next((T=>(i=T,p=Date.now(),this.removeTargets(e,i,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),_l()<=Yt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${l} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:T}))))}}function _A(s,e){return new wA(s,e)}class kA{constructor(){this.changes=new Po((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Os.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Ie.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class TA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class jA{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&su(i.mutation,l,cr.empty(),dt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Xt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Xt()){const l=xo();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let h=Yc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const i=xo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Xt())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,i,l){let u=$a();const h=nu(),p=(function(){return nu()})();return n.forEach(((g,y)=>{const w=i.get(y.key);l.has(y.key)&&(w===void 0||w.mutation instanceof Wi)?u=u.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),su(w.mutation,y,w.mutation.getFieldMask(),dt.now())):h.set(y.key,cr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,w)=>h.set(y,w))),n.forEach(((y,w)=>p.set(y,new TA(w,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=nu();let l=new qn(((h,p)=>h-p)),u=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let w=i.get(g)||cr.empty();w=p.applyToLocalView(y,w),i.set(g,w);const T=(l.get(p.batchId)||Xt()).add(g);l=l.insert(p.batchId,T)}))})).next((()=>{const h=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,T=t_();w.forEach((S=>{if(!u.has(S)){const O=c_(n.get(S),i.get(S));O!==null&&T.set(S,O),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return Ie.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return SR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):Ie.resolve(xo());let p=cu,g=u;return h.next((y=>Ie.forEach(y,((w,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),u.get(w)?Ie.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{g=g.insert(w,S)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Xt()))).next((w=>({batchId:p,changes:e_(w)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new vt(n)).next((i=>{let l=Yc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let h=Yc();return this.indexManager.getCollectionParents(e,u).next((p=>Ie.forEach(p,(g=>{const y=(function(T,S){return new Yl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((w=>{w.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((h=>{u.forEach(((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Os.newInvalidDocument(w)))}));let p=Yc();return h.forEach(((g,y)=>{const w=u.get(g);w!==void 0&&su(w.mutation,y,cr.empty(),dt.now()),Jd(n,y)&&(p=p.insert(g,y))})),p}))}}class EA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Ie.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:fa(l.createTime)}})(n)),Ie.resolve()}getNamedQuery(e,n){return Ie.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:pA(l.bundledQuery),readTime:fa(l.readTime)}})(n)),Ie.resolve()}}class SA{constructor(){this.overlays=new qn(vt.comparator),this.Lr=new Map}getOverlay(e,n){return Ie.resolve(this.overlays.get(n))}getOverlays(e,n){const i=xo();return Ie.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.bt(e,n,u)})),Ie.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),Ie.resolve()}getOverlaysForCollection(e,n,i){const l=xo(),u=n.length+1,h=new vt(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return Ie.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new qn(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let w=u.get(y.largestBatchId);w===null&&(w=xo(),u=u.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=xo(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>p.set(y,w))),!(p.size()>=l)););return Ie.resolve(p)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new $R(n,i));let u=this.Lr.get(n);u===void 0&&(u=Xt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class NA{constructor(){this.sessionToken=Cs.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ie.resolve()}}class ey{constructor(){this.kr=new gs(ws.Kr),this.qr=new gs(ws.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new ws(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new ws(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new vt(new Nn([])),i=new ws(n,e),l=new ws(n,e+1),u=[];return this.qr.forEachInRange([i,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new vt(new Nn([])),i=new ws(n,e),l=new ws(n,e+1);let u=Xt();return this.qr.forEachInRange([i,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new ws(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ws{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return vt.comparator(e.key,n.key)||Qt(e.Hr,n.Hr)}static Ur(e,n){return Qt(e.Hr,n.Hr)||vt.comparator(e.key,n.key)}}class CA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new gs(ws.Kr)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new HR(u,n,i,l);this.mutationQueue.push(h);for(const p of l)this.Jr=this.Jr.add(new ws(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Ie.resolve(h)}lookupMutationBatch(e,n){return Ie.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),u=l<0?0:l;return Ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?qg:this.Yn-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ws(n,0),l=new ws(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(h=>{const p=this.Zr(h.Hr);u.push(p)})),Ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new gs(Qt);return n.forEach((l=>{const u=new ws(l,0),h=new ws(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),Ie.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;vt.isDocumentKey(u)||(u=u.child(""));const h=new ws(new vt(u),0);let p=new gs(Qt);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),h),Ie.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){fn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Ie.forEach(n.mutations,(l=>{const u=new ws(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new ws(n,0),l=this.Jr.firstAfterOrEqual(i);return Ie.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class RA{constructor(e){this.ti=e,this.docs=(function(){return new qn(vt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,h=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Ie.resolve(i?i.document.mutableCopy():Os.newInvalidDocument(n))}getEntries(e,n){let i=$a();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Os.newInvalidDocument(l))})),Ie.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=$a();const h=n.path,p=new vt(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||sR(nR(w),i)<=0||(l.has(w.key)||Jd(n,w))&&(u=u.insert(w.key,w.mutableCopy()))}return Ie.resolve(u)}getAllFromCollectionGroup(e,n,i,l){jt(9500)}ni(e,n){return Ie.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new AA(this)}getSize(e){return Ie.resolve(this.size)}}class AA extends kA{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),Ie.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class IA{constructor(e){this.persistence=e,this.ri=new Po((n=>Wg(n)),Gg),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.ii=0,this.si=new ey,this.targetCount=0,this.oi=Vl._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),Ie.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Vl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Ie.resolve()}updateTargetData(e,n){return this.lr(n),Ie.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Ie.waitFor(u).next((()=>l))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return Ie.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),Ie.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),Ie.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Ie.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return Ie.resolve(i)}containsKey(e,n){return Ie.resolve(this.si.containsKey(n))}}class k_{constructor(e,n){this._i={},this.overlays={},this.ai=new Kd(0),this.ui=!1,this.ui=!0,this.ci=new NA,this.referenceDelegate=e(this),this.li=new IA(this),this.indexManager=new gA,this.remoteDocumentCache=(function(l){return new RA(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new mA(n),this.Pi=new EA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new CA(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){at("MemoryPersistence","Starting transaction:",e);const l=new MA(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return Ie.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class MA extends aR{constructor(e){super(),this.currentSequenceNumber=e}}class ty{constructor(e){this.persistence=e,this.Ri=new ey,this.Ai=null}static Vi(e){return new ty(e)}get di(){if(this.Ai)return this.Ai;throw jt(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),Ie.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),Ie.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Ie.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.di,(i=>{const l=vt.fromPath(i);return this.mi(e,l).next((u=>{u||n.removeEntry(l,At.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ld{constructor(e,n){this.persistence=e,this.fi=new Po((i=>lR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=_A(this,n)}static Vi(e,n){return new Ld(e,n)}Ti(){}Ii(e){return Ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return Ie.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?Ie.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(h=>this.wr(e,h,n).next((p=>{p||(i++,u.removeEntry(h,At.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Ie.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Ie.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pd(e.data.value)),n}wr(e,n,i){return Ie.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return Ie.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ny{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=Xt(),l=Xt();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new ny(e,n.fromCache,i,l)}}class DA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class PA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return lS()?8:iR(Bs())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,l,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new DA;return this.ys(e,n,h).next((p=>{if(u.result=p,this.As)return this.ws(e,n,h,p.size)}))})).next((()=>u.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(_l()<=Yt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",kl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ie.resolve()):(_l()<=Yt.DEBUG&&at("QueryEngine","Query:",kl(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(_l()<=Yt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",kl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,da(n))):Ie.resolve())}gs(e,n){if(dx(n))return Ie.resolve(null);let i=da(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Dd(n,null,"F"),i=da(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=Xt(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,h,g.readTime)?this.gs(e,Dd(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,i,l){return dx(n)||l.isEqual(At.min())?Ie.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,i,l)?Ie.resolve(null):(_l()<=Yt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),kl(n)),this.Ds(e,h,n,tR(l,cu)).next((p=>p)))}))}bs(e,n){let i=new gs(Jw(e));return n.forEach(((l,u)=>{Jd(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,i){return _l()<=Yt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",kl(n)),this.fs.getDocumentsMatchingQuery(e,n,Li.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const sy="LocalStore",LA=3e8;class OA{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new qn(Qt),this.Fs=new Po((u=>Wg(u)),Gg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function VA(s,e,n,i){return new OA(s,e,n,i)}async function T_(s,e){const n=Mt(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=Xt();for(const y of l){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of u){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function BA(s,e){const n=Mt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,w){const T=y.batch,S=T.keys();let O=Ie.resolve();return S.forEach((G=>{O=O.next((()=>w.getEntry(g,G))).next((U=>{const V=y.docVersions.get(G);fn(V!==null,48541),U.version.compareTo(V)<0&&(T.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),w.addEntry(U)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(g,T)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Xt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function j_(s){const e=Mt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function UA(s,e){const n=Mt(s),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((w,T)=>{const S=l.get(T);if(!S)return;p.push(n.li.removeMatchingKeys(u,w.removedDocuments,T).next((()=>n.li.addMatchingKeys(u,w.addedDocuments,T))));let O=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(Cs.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),l=l.insert(T,O),(function(U,V,Z){return U.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=LA?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(S,O,w)&&p.push(n.li.updateTargetData(u,O))}));let g=$a(),y=Xt();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,w))})),p.push(zA(u,h,e.documentUpdates).next((w=>{g=w.Bs,y=w.Ls}))),!i.isEqual(At.min())){const w=n.li.getLastRemoteSnapshotVersion(u).next((T=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(w)}return Ie.waitFor(p).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=l,u)))}function zA(s,e,n){let i=Xt(),l=Xt();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=$a();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(At.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):at(sy,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function FA(s,e){const n=Mt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=qg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function qA(s,e){const n=Mt(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((u=>u?(l=u,Ie.resolve(l)):n.li.allocateTargetId(i).next((h=>(l=new Ri(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function hg(s,e,n){const i=Mt(s),l=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!Kl(h))throw h;at(sy,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function jx(s,e,n){const i=Mt(s);let l=At.min(),u=Xt();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,w){const T=Mt(g),S=T.Fs.get(w);return S!==void 0?Ie.resolve(T.vs.get(S)):T.li.getTargetData(y,w)})(i,h,da(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,n?l:At.min(),n?u:Xt()))).next((p=>(HA(i,RR(e),p),{documents:p,ks:u})))))}function HA(s,e,n){let i=s.Ms.get(e)||At.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class Ex{constructor(){this.activeTargetIds=LR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $A{constructor(){this.vo=new Ex,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ex,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WA{Mo(e){}shutdown(){}}const Sx="ConnectivityMonitor";class Nx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){at(Sx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){at(Sx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ed=null;function dg(){return ed===null?ed=(function(){return 268435456+Math.round(2147483648*Math.random())})():ed++,"0x"+ed.toString(16)}const kp="RestConnection",GA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class KA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Ad?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,u){const h=dg(),p=this.Qo(e,n.toUriEncodedString());at(kp,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),w=qi(y);return this.zo(e,p,g,i,w).then((T=>(at(kp,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Dl(kp,`RPC '${e}' ${h} failed with error: `,T,"url: ",p,"request:",i),T}))}jo(e,n,i,l,u,h){return this.Wo(e,n,i,l,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const i=GA[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class YA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Ps="WebChannelConnection",Fc=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Rl extends KA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Rl.c_){const e=Nw();Fc(e,Sw.STAT_EVENT,(n=>{n.stat===eg.PROXY?at(Ps,"STAT_EVENT: detected buffering proxy"):n.stat===eg.NOPROXY&&at(Ps,"STAT_EVENT: detected no buffering proxy")})),Rl.c_=!0}}zo(e,n,i,l,u){const h=dg();return new Promise(((p,g)=>{const y=new jw;y.setWithCredentials(!0),y.listenOnce(Ew.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case md.NO_ERROR:const T=y.getResponseJson();at(Ps,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),p(T);break;case md.TIMEOUT:at(Ps,`RPC '${e}' ${h} timed out`),g(new Ze(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const S=y.getStatus();if(at(Ps,`RPC '${e}' ${h} failed with status:`,S,"response text:",y.getResponseText()),S>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const G=O?.error;if(G&&G.status&&G.message){const U=(function(Z){const X=Z.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(X)>=0?X:Ee.UNKNOWN})(G.status);g(new Ze(U,G.message))}else g(new Ze(Ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ze(Ee.UNAVAILABLE,"Connection failed."));break;default:jt(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{at(Ps,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(l);at(Ps,`RPC '${e}' ${h} sending request:`,l),y.send(n,"POST",w,i,15)}))}T_(e,n,i){const l=dg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const y=u.join("");at(Ps,`Creating RPC '${e}' stream ${l}: ${y}`,p);const w=h.createWebChannel(y,p);this.I_(w);let T=!1,S=!1;const O=new YA({Ho:G=>{S?at(Ps,`Not sending because RPC '${e}' stream ${l} is closed:`,G):(T||(at(Ps,`Opening RPC '${e}' stream ${l} transport.`),w.open(),T=!0),at(Ps,`RPC '${e}' stream ${l} sending:`,G),w.send(G))},Jo:()=>w.close()});return Fc(w,Kc.EventType.OPEN,(()=>{S||(at(Ps,`RPC '${e}' stream ${l} transport opened.`),O.i_())})),Fc(w,Kc.EventType.CLOSE,(()=>{S||(S=!0,at(Ps,`RPC '${e}' stream ${l} transport closed`),O.o_(),this.E_(w))})),Fc(w,Kc.EventType.ERROR,(G=>{S||(S=!0,Dl(Ps,`RPC '${e}' stream ${l} transport errored. Name:`,G.name,"Message:",G.message),O.o_(new Ze(Ee.UNAVAILABLE,"The operation could not be completed")))})),Fc(w,Kc.EventType.MESSAGE,(G=>{if(!S){const U=G.data[0];fn(!!U,16349);const V=U,Z=V?.error||V[0]?.error;if(Z){at(Ps,`RPC '${e}' stream ${l} received error:`,Z);const X=Z.status;let ce=(function(Oe){const I=us[Oe];if(I!==void 0)return h_(I)})(X),Se=Z.message;ce===void 0&&(ce=Ee.INTERNAL,Se="Unknown error status: "+X+" with message "+Z.message),S=!0,O.o_(new Ze(ce,Se)),w.close()}else at(Ps,`RPC '${e}' stream ${l} received:`,U),O.__(U)}})),Rl.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Cw()}}function QA(s){return new Rl(s)}function Tp(){return typeof document<"u"?document:null}function nf(s){return new eA(s,!0)}Rl.c_=!1;class E_{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&at("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Cx="PersistentStream";class S_{constructor(e,n,i,l,u,h,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new E_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(Ha(n.toString()),Ha("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new Ze(Ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return at(Cx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(at(Cx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class XA extends S_{constructor(e,n,i,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sA(this.serializer,e),i=(function(u){if(!("targetChange"in u))return At.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?At.min():h.readTime?fa(h.readTime):At.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=ug(this.serializer),n.addTarget=(function(u,h){let p;const g=h.target;if(p=ag(g)?{documents:iA(u,g)}:{query:oA(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=m_(u,h.resumeToken);const y=og(u,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(At.min())>0){p.readTime=Pd(u,h.snapshotVersion.toTimestamp());const y=og(u,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=cA(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=ug(this.serializer),n.removeTarget=e,this.K_(n)}}class JA extends S_{constructor(e,n,i,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return fn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aA(e.writeResults,e.commitTime),i=fa(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=ug(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>rA(this.serializer,i)))};this.K_(n)}}class ZA{}class eI extends ZA{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ze(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,lg(n,i),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ze(Ee.UNKNOWN,u.toString())}))}jo(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,lg(n,i),l,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ze(Ee.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function tI(s,e,n,i){return new eI(s,e,n,i)}class nI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ha(n),this.aa=!1):at("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ao="RemoteStore";class sI{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{Lo(this)&&(at(Ao,"Restarting streams for network reachability change."),await(async function(g){const y=Mt(g);y.Ea.add(4),await Cu(y),y.Va.set("Unknown"),y.Ea.delete(4),await sf(y)})(this))}))})),this.Va=new nI(i,l)}}async function sf(s){if(Lo(s))for(const e of s.Ra)await e(!0)}async function Cu(s){for(const e of s.Ra)await e(!1)}function N_(s,e){const n=Mt(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),oy(n)?iy(n):Ql(n).O_()&&ay(n,e))}function ry(s,e){const n=Mt(s),i=Ql(n);n.Ia.delete(e),i.O_()&&C_(n,e),n.Ia.size===0&&(i.O_()?i.L_():Lo(n)&&n.Va.set("Unknown"))}function ay(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ql(s).Z_(e)}function C_(s,e){s.da.$e(e),Ql(s).X_(e)}function iy(s){s.da=new QR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ql(s).start(),s.Va.ua()}function oy(s){return Lo(s)&&!Ql(s).x_()&&s.Ia.size>0}function Lo(s){return Mt(s).Ea.size===0}function R_(s){s.da=void 0}async function rI(s){s.Va.set("Online")}async function aI(s){s.Ia.forEach(((e,n)=>{ay(s,e)}))}async function iI(s,e){R_(s),oy(s)?(s.Va.ha(e),iy(s)):s.Va.set("Unknown")}async function oI(s,e,n){if(s.Va.set("Online"),e instanceof f_&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,h),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){at(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Od(s,i)}else if(e instanceof vd?s.da.Xe(e):e instanceof d_?s.da.st(e):s.da.tt(e),!n.isEqual(At.min()))try{const i=await j_(s.localStore);n.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=u.Ia.get(y);w&&u.Ia.set(y,w.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const w=u.Ia.get(g);if(!w)return;u.Ia.set(g,w.withResumeToken(Cs.EMPTY_BYTE_STRING,w.snapshotVersion)),C_(u,g);const T=new Ri(w.target,g,y,w.sequenceNumber);ay(u,T)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){at(Ao,"Failed to raise snapshot:",i),await Od(s,i)}}async function Od(s,e,n){if(!Kl(e))throw e;s.Ea.add(1),await Cu(s),s.Va.set("Offline"),n||(n=()=>j_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{at(Ao,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await sf(s)}))}function A_(s,e){return e().catch((n=>Od(s,n,e)))}async function rf(s){const e=Mt(s),n=Ui(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qg;for(;lI(e);)try{const l=await FA(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,cI(e,l)}catch(l){await Od(e,l)}I_(e)&&M_(e)}function lI(s){return Lo(s)&&s.Ta.length<10}function cI(s,e){s.Ta.push(e);const n=Ui(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function I_(s){return Lo(s)&&!Ui(s).x_()&&s.Ta.length>0}function M_(s){Ui(s).start()}async function uI(s){Ui(s).ra()}async function hI(s){const e=Ui(s);for(const n of s.Ta)e.ea(n.mutations)}async function dI(s,e,n){const i=s.Ta.shift(),l=Xg.from(i,e,n);await A_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await rf(s)}async function fI(s,e){e&&Ui(s).Y_&&await(async function(i,l){if((function(h){return GR(h)&&h!==Ee.ABORTED})(l.code)){const u=i.Ta.shift();Ui(i).B_(),await A_(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await rf(i)}})(s,e),I_(s)&&M_(s)}async function Rx(s,e){const n=Mt(s);n.asyncQueue.verifyOperationInProgress(),at(Ao,"RemoteStore received new credentials");const i=Lo(n);n.Ea.add(3),await Cu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sf(n)}async function mI(s,e){const n=Mt(s);e?(n.Ea.delete(2),await sf(n)):e||(n.Ea.add(2),await Cu(n),n.Va.set("Unknown"))}function Ql(s){return s.ma||(s.ma=(function(n,i,l){const u=Mt(n);return u.sa(),new XA(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:rI.bind(null,s),Yo:aI.bind(null,s),t_:iI.bind(null,s),J_:oI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),oy(s)?iy(s):s.Va.set("Unknown")):(await s.ma.stop(),R_(s))}))),s.ma}function Ui(s){return s.fa||(s.fa=(function(n,i,l){const u=Mt(n);return u.sa(),new JA(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:uI.bind(null,s),t_:fI.bind(null,s),ta:hI.bind(null,s),na:dI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await rf(s)):(await s.fa.stop(),s.Ta.length>0&&(at(Ao,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class ly{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const h=Date.now()+i,p=new ly(e,n,h,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(s,e){if(Ha("AsyncQueue",`${e}: ${s}`),Kl(s))return new Ze(Ee.UNAVAILABLE,`${e}: ${s}`);throw s}class Al{static emptySet(e){return new Al(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||vt.comparator(n.key,i.key):(n,i)=>vt.comparator(n.key,i.key),this.keyedMap=Yc(),this.sortedSet=new qn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Al;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class Ax{constructor(){this.ga=new qn(vt.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):jt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Bl{constructor(e,n,i,l,u,h,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,l,u){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new Bl(e,n,Al.emptySet(n),h,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}class pI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class gI{constructor(){this.queries=Ix(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=Mt(n),u=l.queries;l.queries=Ix(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Ze(Ee.ABORTED,"Firestore shutting down"))}}function Ix(){return new Po((s=>Xw(s)),Xd)}async function D_(s,e){const n=Mt(s);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new pI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(h){const p=cy(h,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&uy(n)}async function P_(s,e){const n=Mt(s),i=e.query;let l=3;const u=n.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function yI(s,e){const n=Mt(s);let i=!1;for(const l of e){const u=l.query,h=n.queries.get(u);if(h){for(const p of h.ba)p.Fa(l)&&(i=!0);h.wa=l}}i&&uy(n)}function vI(s,e,n){const i=Mt(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(n);i.queries.delete(e)}function uy(s){s.Ca.forEach((e=>{e.next()}))}var fg,Mx;(Mx=fg||(fg={})).Ma="default",Mx.Cache="cache";class L_{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Bl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fg.Cache}}class O_{constructor(e){this.key=e}}class V_{constructor(e){this.key=e}}class bI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xt(),this.mutatedKeys=Xt(),this.eu=Jw(e),this.tu=new Al(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new Ax,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,T)=>{const S=l.get(w),O=Jd(this.query,T)?T:null,G=!!S&&this.mutatedKeys.has(S.key),U=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let V=!1;S&&O?S.data.isEqual(O.data)?G!==U&&(i.track({type:3,doc:O}),V=!0):this.su(S,O)||(i.track({type:2,doc:O}),V=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(p=!0)):!S&&O?(i.track({type:0,doc:O}),V=!0):S&&!O&&(i.track({type:1,doc:S}),V=!0,(g||y)&&(p=!0)),V&&(O?(h=h.add(O),u=U?u.add(w):u.delete(w)):(h=h.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),u=u.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,T)=>(function(O,G){const U=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt(20277,{Vt:V})}};return U(O)-U(G)})(w.type,T.type)||this.eu(w.doc,T.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,h.length!==0||y?{snapshot:new Bl(this.query,e.tu,u,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ax,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new V_(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new O_(i))})),n}cu(e){this.Za=e.ks,this.Ya=Xt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const hy="SyncEngine";class xI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class wI{constructor(e){this.key=e,this.hu=!1}}class _I{constructor(e,n,i,l,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Po((p=>Xw(p)),Xd),this.Iu=new Map,this.Eu=new Set,this.Ru=new qn(vt.comparator),this.Au=new Map,this.Vu=new ey,this.du={},this.mu=new Map,this.fu=Vl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kI(s,e,n=!0){const i=H_(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await B_(i,e,n,!0),l}async function TI(s,e){const n=H_(s);await B_(n,e,!0,!1)}async function B_(s,e,n,i){const l=await qA(s.localStore,da(e)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await jI(s,e,u,h==="current",l.resumeToken)),s.isPrimaryClient&&n&&N_(s.remoteStore,l),p}async function jI(s,e,n,i,l){s.pu=(T,S,O)=>(async function(U,V,Z,X){let ce=V.view.ru(Z);ce.Ss&&(ce=await jx(U.localStore,V.query,!1).then((({documents:I})=>V.view.ru(I,ce))));const Se=X&&X.targetChanges.get(V.targetId),Be=X&&X.targetMismatches.get(V.targetId)!=null,Oe=V.view.applyChanges(ce,U.isPrimaryClient,Se,Be);return Px(U,V.targetId,Oe.au),Oe.snapshot})(s,T,S,O);const u=await jx(s.localStore,e,!0),h=new bI(e,u.ks),p=h.ru(u.documents),g=Nu.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),y=h.applyChanges(p,s.isPrimaryClient,g);Px(s,n,y.au);const w=new xI(e,n,h);return s.Tu.set(e,w),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function EI(s,e,n){const i=Mt(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((h=>!Xd(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await hg(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&ry(i.remoteStore,l.targetId),mg(i,l.targetId)})).catch(Gl)):(mg(i,l.targetId),await hg(i.localStore,l.targetId,!0))}async function SI(s,e){const n=Mt(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ry(n.remoteStore,i.targetId))}async function NI(s,e,n){const i=PI(s);try{const l=await(function(h,p){const g=Mt(h),y=dt.now(),w=p.reduce(((O,G)=>O.add(G.key)),Xt());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let G=$a(),U=Xt();return g.xs.getEntries(O,w).next((V=>{G=V,G.forEach(((Z,X)=>{X.isValidDocument()||(U=U.add(Z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,G))).next((V=>{T=V;const Z=[];for(const X of p){const ce=FR(X,T.get(X.key).overlayedDocument);ce!=null&&Z.push(new Wi(X.key,ce,qw(ce.value.mapValue),jr.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,Z,p)})).next((V=>{S=V;const Z=V.applyToLocalDocumentSet(T,U);return g.documentOverlayCache.saveOverlays(O,V.batchId,Z)}))})).then((()=>({batchId:S.batchId,changes:e_(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(h,p,g){let y=h.du[h.currentUser.toKey()];y||(y=new qn(Qt)),y=y.insert(p,g),h.du[h.currentUser.toKey()]=y})(i,l.batchId,n),await Ru(i,l.changes),await rf(i.remoteStore)}catch(l){const u=cy(l,"Failed to persist write");n.reject(u)}}async function U_(s,e){const n=Mt(s);try{const i=await UA(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=n.Au.get(u);h&&(fn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?fn(h.hu,14607):l.removedDocuments.size>0&&(fn(h.hu,42227),h.hu=!1))})),await Ru(n,i,e)}catch(i){await Gl(i)}}function Dx(s,e,n){const i=Mt(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(h,p){const g=Mt(h);g.onlineState=p;let y=!1;g.queries.forEach(((w,T)=>{for(const S of T.ba)S.va(p)&&(y=!0)})),y&&uy(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function CI(s,e,n){const i=Mt(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let h=new qn(vt.comparator);h=h.insert(u,Os.newNoDocument(u,At.min()));const p=Xt().add(u),g=new tf(At.min(),new Map,new qn(Qt),h,p);await U_(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),dy(i)}else await hg(i.localStore,e,!1).then((()=>mg(i,e,n))).catch(Gl)}async function RI(s,e){const n=Mt(s),i=e.batch.batchId;try{const l=await BA(n.localStore,e);F_(n,i,null),z_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ru(n,l)}catch(l){await Gl(l)}}async function AI(s,e,n){const i=Mt(s);try{const l=await(function(h,p){const g=Mt(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next((T=>(fn(T!==null,37113),w=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(i.localStore,e);F_(i,e,n),z_(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ru(i,l)}catch(l){await Gl(l)}}function z_(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function F_(s,e,n){const i=Mt(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function mg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||q_(s,i)}))}function q_(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(ry(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),dy(s))}function Px(s,e,n){for(const i of n)i instanceof O_?(s.Vu.addReference(i.key,e),II(s,i)):i instanceof V_?(at(hy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||q_(s,i.key)):jt(19791,{wu:i})}function II(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(at(hy,"New document in limbo: "+n),s.Eu.add(i),dy(s))}function dy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new vt(Nn.fromString(e)),i=s.fu.next();s.Au.set(i,new wI(n)),s.Ru=s.Ru.insert(n,i),N_(s.remoteStore,new Ri(da(Kg(n.path)),i,"TargetPurposeLimboResolution",Kd.ce))}}async function Ru(s,e,n){const i=Mt(s),l=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const w=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){l.push(y);const w=ny.Es(g.targetId,y);u.push(w)}})))})),await Promise.all(h),i.Pu.J_(l),await(async function(g,y){const w=Mt(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Ie.forEach(y,(S=>Ie.forEach(S.Ts,(O=>w.persistence.referenceDelegate.addReference(T,S.targetId,O))).next((()=>Ie.forEach(S.Is,(O=>w.persistence.referenceDelegate.removeReference(T,S.targetId,O)))))))))}catch(T){if(!Kl(T))throw T;at(sy,"Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const O=w.vs.get(S),G=O.snapshotVersion,U=O.withLastLimboFreeSnapshotVersion(G);w.vs=w.vs.insert(S,U)}}})(i.localStore,u))}async function MI(s,e){const n=Mt(s);if(!n.currentUser.isEqual(e)){at(hy,"User change. New user:",e.toKey());const i=await T_(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ze(Ee.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ru(n,i.Ns)}}function DI(s,e){const n=Mt(s),i=n.Au.get(e);if(i&&i.hu)return Xt().add(i.key);{let l=Xt();const u=n.Iu.get(e);if(!u)return l;for(const h of u){const p=n.Tu.get(h);l=l.unionWith(p.view.nu)}return l}}function H_(s){const e=Mt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=U_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CI.bind(null,e),e.Pu.J_=yI.bind(null,e.eventManager),e.Pu.yu=vI.bind(null,e.eventManager),e}function PI(s){const e=Mt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AI.bind(null,e),e}class Vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return VA(this.persistence,new PA,e.initialUser,this.serializer)}Cu(e){return new k_(ty.Vi,this.serializer)}Du(e){return new $A}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vd.provider={build:()=>new Vd};class LI extends Vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){fn(this.persistence.referenceDelegate instanceof Ld,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new xA(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xs.withCacheSize(this.cacheSizeBytes):Xs.DEFAULT;return new k_((i=>Ld.Vi(i,n)),this.serializer)}}class pg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Dx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=MI.bind(null,this.syncEngine),await mI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gI})()}createDatastore(e){const n=nf(e.databaseInfo.databaseId),i=QA(e.databaseInfo);return tI(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,h,p){return new sI(i,l,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Dx(this.syncEngine,n,0)),(function(){return Nx.v()?new Nx:new WA})())}createSyncEngine(e,n){return(function(l,u,h,p,g,y,w){const T=new _I(l,u,h,p,g,y);return w&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Mt(n);at(Ao,"RemoteStore shutting down."),i.Ea.add(5),await Cu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}pg.provider={build:()=>new pg};class $_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ha("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const zi="FirestoreClient";class OI{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=Ls.UNAUTHENTICATED,this.clientId=Fg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{at(zi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(at(zi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=cy(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function jp(s,e){s.asyncQueue.verifyOperationInProgress(),at(zi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await T_(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Lx(s,e){s.asyncQueue.verifyOperationInProgress();const n=await VI(s);at(zi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>Rx(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>Rx(e.remoteStore,l))),s._onlineComponents=e}async function VI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){at(zi,"Using user provided OfflineComponentProvider");try{await jp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Ee.FAILED_PRECONDITION||l.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Dl("Error using user provided cache. Falling back to memory cache: "+n),await jp(s,new Vd)}}else at(zi,"Using default OfflineComponentProvider"),await jp(s,new LI(void 0));return s._offlineComponents}async function W_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(at(zi,"Using user provided OnlineComponentProvider"),await Lx(s,s._uninitializedComponentsProvider._online)):(at(zi,"Using default OnlineComponentProvider"),await Lx(s,new pg))),s._onlineComponents}function BI(s){return W_(s).then((e=>e.syncEngine))}async function G_(s){const e=await W_(s),n=e.eventManager;return n.onListen=kI.bind(null,e.syncEngine),n.onUnlisten=EI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SI.bind(null,e.syncEngine),n}function UI(s,e,n={}){const i=new Ba;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const w=new $_({next:S=>{w.Nu(),h.enqueueAndForget((()=>P_(u,T)));const O=S.docs.has(p);!O&&S.fromCache?y.reject(new Ze(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&g&&g.source==="server"?y.reject(new Ze(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new L_(Kg(p.path),w,{includeMetadataChanges:!0,Ka:!0});return D_(u,T)})(await G_(s),s.asyncQueue,e,n,i))),i.promise}function zI(s,e,n={}){const i=new Ba;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const w=new $_({next:S=>{w.Nu(),h.enqueueAndForget((()=>P_(u,T))),S.fromCache&&g.source==="server"?y.reject(new Ze(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new L_(p,w,{includeMetadataChanges:!0,Ka:!0});return D_(u,T)})(await G_(s),s.asyncQueue,e,n,i))),i.promise}function FI(s,e){const n=new Ba;return s.asyncQueue.enqueueAndForget((async()=>NI(await BI(s),e,n))),n.promise}function K_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const qI="ComponentProvider",Ox=new Map;function HI(s,e,n,i,l){return new hR(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,K_(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const Y_="firestore.googleapis.com",Vx=!0;class Bx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Y_,this.ssl=Vx}else this.host=e.host,this.ssl=e.ssl??Vx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=__;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vA)throw new Ze(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class af{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new q4;switch(i.type){case"firstParty":return new G4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ze(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Ox.get(n);i&&(at(qI,"Removing Datastore"),Ox.delete(n),i.terminate())})(this),Promise.resolve()}}function $I(s,e,n,i={}){s=Fr(s,af);const l=qi(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(Eg(`https://${p}`),Sg("Firestore",!0)),u.host!==Y_&&u.host!==p&&Dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!Eo(g,h)&&(s._setSettings(g),i.mockUserToken)){let y,w;if(typeof i.mockUserToken=="string")y=i.mockUserToken,w=Ls.MOCK_USER;else{y=V2(i.mockUserToken,s._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ze(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Ls(T)}s._authCredentials=new H4(new Aw(y,w))}}class Gi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class es{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new es(this.firestore,e,this._key)}toJSON(){return{type:es._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Eu(n,es._jsonSchema))return new es(e,i||null,new vt(Nn.fromString(n.referencePath)))}}es._jsonSchemaVersion="firestore/documentReference/1.0",es._jsonSchema={type:ds("string",es._jsonSchemaVersion),referencePath:ds("string")};class Di extends Gi{constructor(e,n,i){super(e,n,Kg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new es(this.firestore,null,new vt(e))}withConverter(e){return new Di(this.firestore,e,this._path)}}function Ft(s,e,...n){if(s=Un(s),Iw("collection","path",e),s instanceof af){const i=Nn.fromString(e,...n);return J1(i),new Di(s,null,i)}{if(!(s instanceof es||s instanceof Di))throw new Ze(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Nn.fromString(e,...n));return J1(i),new Di(s.firestore,null,i)}}function Ge(s,e,...n){if(s=Un(s),arguments.length===1&&(e=Fg.newId()),Iw("doc","path",e),s instanceof af){const i=Nn.fromString(e,...n);return X1(i),new es(s,null,new vt(i))}{if(!(s instanceof es||s instanceof Di))throw new Ze(Ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Nn.fromString(e,...n));return X1(i),new es(s.firestore,s instanceof Di?s.converter:null,new vt(i))}}const Ux="AsyncQueue";class zx{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new E_(this,"async_queue_retry"),this._c=()=>{const i=Tp();i&&at(Ux,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Tp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ba;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Kl(e))throw e;at(Ux,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ha("INTERNAL UNHANDLED ERROR: ",Fx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=ly.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&jt(47125,{Pc:Fx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Fx(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Oo extends af{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new zx,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zx(e),this._firestoreClient=void 0,await e}}}function WI(s,e){const n=typeof s=="object"?s:Ag(),i=typeof s=="string"?s:Ad,l=qd(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=P2("firestore");u&&$I(l,...u)}return l}function fy(s){if(s._terminated)throw new Ze(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||GI(s),s._firestoreClient}function GI(s){const e=s._freezeSettings(),n=HI(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new OI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kr(Cs.fromBase64String(e))}catch(n){throw new Ze(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kr(Cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,kr._jsonSchema))return kr.fromBase64String(e.bytes)}}kr._jsonSchemaVersion="firestore/bytes/1.0",kr._jsonSchema={type:ds("string",kr._jsonSchemaVersion),bytes:ds("string")};class my{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ze(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ns(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Au{constructor(e){this._methodName=e}}class ma{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ze(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ze(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ma._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,ma._jsonSchema))return new ma(e.latitude,e.longitude)}}ma._jsonSchemaVersion="firestore/geoPoint/1.0",ma._jsonSchema={type:ds("string",ma._jsonSchemaVersion),latitude:ds("number"),longitude:ds("number")};class Ur{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ur._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,Ur._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ur(e.vectorValues);throw new Ze(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ur._jsonSchemaVersion="firestore/vectorValue/1.0",Ur._jsonSchema={type:ds("string",Ur._jsonSchemaVersion),vectorValues:ds("object")};const KI=/^__.*__$/;class YI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Su(e,this.data,n,this.fieldTransforms)}}class Q_{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Wi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function X_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt(40011,{dataSource:s})}}class py{constructor(e,n,i,l,u,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new py({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Bd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(X_(this.dataSource)&&KI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class QI{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||nf(e)}createContext(e,n,i,l=!1){return new py({dataSource:e,methodName:n,targetDoc:i,path:Ns.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function of(s){const e=s._freezeSettings(),n=nf(s._databaseId);return new QI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function J_(s,e,n,i,l,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);vy("Data must be an object, but it was:",h,i);const p=Z_(i,h);let g,y;if(u.merge)g=new cr(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const w=[];for(const T of u.mergeFields){const S=Io(e,T,n);if(!h.contains(S))throw new Ze(Ee.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);nk(w,S)||w.push(S)}g=new cr(w),y=h.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=h.fieldTransforms;return new YI(new Js(p),g,y)}class lf extends Au{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lf}}class gy extends Au{_toFieldTransform(e){return new l_(e.path,new mu)}isEqual(e){return e instanceof gy}}class yy extends Au{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new yu(e.serializer,s_(e.serializer,this.Vc));return new l_(e.path,n)}isEqual(e){return e instanceof yy&&this.Vc===e.Vc}}function XI(s,e,n,i){const l=s.createContext(1,e,n);vy("Data must be an object, but it was:",l,i);const u=[],h=Js.empty();$i(i,((g,y)=>{const w=tk(e,g,n);y=Un(y);const T=l.childContextForFieldPath(w);if(y instanceof lf)u.push(w);else{const S=Iu(y,T);S!=null&&(u.push(w),h.set(w,S))}}));const p=new cr(u);return new Q_(h,p,l.fieldTransforms)}function JI(s,e,n,i,l,u){const h=s.createContext(1,e,n),p=[Io(e,i,n)],g=[l];if(u.length%2!=0)throw new Ze(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)p.push(Io(e,u[S])),g.push(u[S+1]);const y=[],w=Js.empty();for(let S=p.length-1;S>=0;--S)if(!nk(y,p[S])){const O=p[S];let G=g[S];G=Un(G);const U=h.childContextForFieldPath(O);if(G instanceof lf)y.push(O);else{const V=Iu(G,U);V!=null&&(y.push(O),w.set(O,V))}}const T=new cr(y);return new Q_(w,T,h.fieldTransforms)}function ZI(s,e,n,i=!1){return Iu(n,s.createContext(i?4:3,e))}function Iu(s,e){if(ek(s=Un(s)))return vy("Unsupported field value:",e,s),Z_(s,e);if(s instanceof Au)return(function(i,l){if(!X_(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let h=0;for(const p of i){let g=Iu(p,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=Un(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return s_(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=dt.fromDate(i);return{timestampValue:Pd(l.serializer,u)}}if(i instanceof dt){const u=new dt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pd(l.serializer,u)}}if(i instanceof ma)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof kr)return{bytesValue:m_(l.serializer,i._byteString)};if(i instanceof es){const u=l.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Zg(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof Ur)return(function(h,p){const g=h instanceof Ur?h.toArray():h;return{mapValue:{fields:{[zw]:{stringValue:Fw},[Id]:{arrayValue:{values:g.map((w=>{if(typeof w!="number")throw p.createError("VectorValues must only contain numeric values.");return Yg(p.serializer,w)}))}}}}}})(i,l);if(w_(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Gd(i)}`)})(s,e)}function Z_(s,e){const n={};return Pw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$i(s,((i,l)=>{const u=Iu(l,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function ek(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof dt||s instanceof ma||s instanceof kr||s instanceof es||s instanceof Au||s instanceof Ur||w_(s))}function vy(s,e,n){if(!ek(n)||!Mw(n)){const i=Gd(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Io(s,e,n){if((e=Un(e))instanceof my)return e._internalPath;if(typeof e=="string")return tk(s,e);throw Bd("Field path arguments must be of type string or ",s,!1,void 0,n)}const eM=new RegExp("[~\\*/\\[\\]]");function tk(s,e,n){if(e.search(eM)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new my(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Bd(s,e,n,i,l){const u=i&&!i.isEmpty(),h=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${l}`),g+=")"),new Ze(Ee.INVALID_ARGUMENT,p+s+g)}function nk(s,e){return s.some((n=>n.isEqual(e)))}class tM{convertValue(e,n="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw jt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return $i(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[Id].arrayValue?.values?.map((i=>Zn(i.doubleValue)));return new Ur(n)}convertGeoPoint(e){return new ma(Zn(e.latitude),Zn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Qd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const n=Oi(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Nn.fromString(e);fn(x_(i),9688,{name:e});const l=new hu(i.get(1),i.get(3)),u=new vt(i.popFirst(5));return l.isEqual(n)||Ha(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class sk extends tM{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,n)}}function Tr(){return new gy("serverTimestamp")}function Ua(s){return new yy("increment",s)}const qx="@firebase/firestore",Hx="4.10.0";class rk{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new es(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Io("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nM extends rk{data(){return super.data()}}function sM(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ze(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class xy extends by{}function yn(s,e,...n){let i=[];e instanceof by&&i.push(e),i=i.concat(n),(function(u){const h=u.filter((g=>g instanceof wy)).length,p=u.filter((g=>g instanceof cf)).length;if(h>1||h>0&&p>0)throw new Ze(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class cf extends xy{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new cf(e,n,i)}_apply(e){const n=this._parse(e);return ak(e._query,n),new Gi(e.firestore,e.converter,ig(e._query,n))}_parse(e){const n=of(e.firestore);return(function(u,h,p,g,y,w,T){let S;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Ze(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Wx(T,w);const G=[];for(const U of T)G.push($x(g,u,U));S={arrayValue:{values:G}}}else S=$x(g,u,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Wx(T,w),S=ZI(p,h,T,w==="in"||w==="not-in");return hs.create(y,w,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nn(s,e,n){const i=e,l=Io("where",s);return cf._create(l,i,n)}class wy extends by{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wy(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:qr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let h=l;const p=u.getFlattenedFilters();for(const g of p)ak(h,g),h=ig(h,g)})(e._query,n),new Gi(e.firestore,e.converter,ig(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _y extends xy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _y(e,n)}_apply(e){const n=(function(l,u,h){if(l.startAt!==null)throw new Ze(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ze(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fu(u,h)})(e._query,this._field,this._direction);return new Gi(e.firestore,e.converter,CR(e._query,n))}}function Ul(s,e="asc"){const n=e,i=Io("orderBy",s);return _y._create(i,n)}class ky extends xy{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new ky(e,n,i)}_apply(e){return new Gi(e.firestore,e.converter,Dd(e._query,this._limit,this._limitType))}}function zl(s){return eR("limit",s),ky._create("limit",s,"F")}function $x(s,e,n){if(typeof(n=Un(n))=="string"){if(n==="")throw new Ze(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qw(e)&&n.indexOf("/")!==-1)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Nn.fromString(n));if(!vt.isDocumentKey(i))throw new Ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ix(s,new vt(i))}if(n instanceof es)return ix(s,n._key);throw new Ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gd(n)}.`)}function Wx(s,e){if(!Array.isArray(s)||s.length===0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ak(s,e){const n=(function(l,u){for(const h of l)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ze(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function ik(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class Xc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class To extends rk{constructor(e,n,i,l,u,h){super(e,n,i,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Io("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=To._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}To._jsonSchemaVersion="firestore/documentSnapshot/1.0",To._jsonSchema={type:ds("string",To._jsonSchemaVersion),bundleSource:ds("string","DocumentSnapshot"),bundleName:ds("string"),bundle:ds("string")};class bd extends To{data(e={}){return super.data(e)}}class Il{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Xc(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new bd(this._firestore,this._userDataWriter,i.key,i,new Xc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ze(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((p=>{const g=new bd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Xc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new bd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Xc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,w=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:rM(p.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function rM(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt(61501,{type:s})}}Il._jsonSchemaVersion="firestore/querySnapshot/1.0",Il._jsonSchema={type:ds("string",Il._jsonSchemaVersion),bundleSource:ds("string","QuerySnapshot"),bundleName:ds("string"),bundle:ds("string")};function In(s){s=Fr(s,es);const e=Fr(s.firestore,Oo),n=fy(e);return UI(n,s._key).then((i=>aM(e,s,i)))}function un(s){s=Fr(s,Gi);const e=Fr(s.firestore,Oo),n=fy(e),i=new sk(e);return sM(s._query),zI(n,s._query).then((l=>new Il(e,i,s,l)))}function vn(s,e,n){s=Fr(s,es);const i=Fr(s.firestore,Oo),l=ik(s.converter,e,n),u=of(i);return uf(i,[J_(u,"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,jr.none())])}function oa(s,e,n,...i){s=Fr(s,es);const l=Fr(s.firestore,Oo),u=of(l);let h;return h=typeof(e=Un(e))=="string"||e instanceof my?JI(u,"updateDoc",s._key,e,n,i):XI(u,"updateDoc",s._key,e),uf(l,[h.toMutation(s._key,jr.exists(!0))])}function Vs(s){return uf(Fr(s.firestore,Oo),[new Qg(s._key,jr.none())])}function Fi(s,e){const n=Fr(s.firestore,Oo),i=Ge(s),l=ik(s.converter,e),u=of(s.firestore);return uf(n,[J_(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,jr.exists(!1))]).then((()=>i))}function uf(s,e){const n=fy(s);return FI(n,e)}function aM(s,e,n){const i=n.docs.get(e._key),l=new sk(s);return new To(s,l,e._key,i,new Xc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){F4(Do),So(new Pi("firestore",((i,{instanceIdentifier:l,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new Oo(new $4(i.getProvider("auth-internal")),new K4(h,i.getProvider("app-check-internal")),dR(h,l),h);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ca(qx,Hx,e),ca(qx,Hx,"esm2020")})();var iM="firebase",oM="12.8.0";ca(iM,oM,"app");const ok="firebasestorage.googleapis.com",lk="storageBucket",lM=120*1e3,cM=600*1e3;class Kn extends ga{constructor(e,n,i=0){super(Ep(e),`Firebase Storage: ${n} (${Ep(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ep(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gn||(Gn={}));function Ep(s){return"storage/"+s}function Ty(){const s="An unknown error occurred, please check the error payload for server response.";return new Kn(Gn.UNKNOWN,s)}function uM(s){return new Kn(Gn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function hM(s){return new Kn(Gn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dM(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Kn(Gn.UNAUTHENTICATED,s)}function fM(){return new Kn(Gn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mM(s){return new Kn(Gn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function pM(){return new Kn(Gn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gM(){return new Kn(Gn.CANCELED,"User canceled the upload/download.")}function yM(s){return new Kn(Gn.INVALID_URL,"Invalid URL '"+s+"'.")}function vM(s){return new Kn(Gn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function bM(){return new Kn(Gn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lk+"' property when initializing the app?")}function xM(){return new Kn(Gn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wM(){return new Kn(Gn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _M(s){return new Kn(Gn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gg(s){return new Kn(Gn.INVALID_ARGUMENT,s)}function ck(){return new Kn(Gn.APP_DELETED,"The Firebase app was deleted.")}function kM(s){return new Kn(Gn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ru(s,e){return new Kn(Gn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function qc(s){throw new Kn(Gn.INTERNAL_ERROR,"Internal error: "+s)}class Hs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Hs.makeFromUrl(e,n)}catch{return new Hs(e,"")}if(i.path==="")return i;throw vM(e)}static makeFromUrl(e,n){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(Se){Se.path.charAt(Se.path.length-1)==="/"&&(Se.path_=Se.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+l+h,"i"),g={bucket:1,path:3};function y(Se){Se.path_=decodeURIComponent(Se.path)}const w="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",O=new RegExp(`^https?://${T}/${w}/b/${l}/o${S}`,"i"),G={bucket:1,path:3},U=n===ok?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",Z=new RegExp(`^https?://${U}/${l}/${V}`,"i"),ce=[{regex:p,indices:g,postModify:u},{regex:O,indices:G,postModify:y},{regex:Z,indices:{bucket:1,path:2},postModify:y}];for(let Se=0;Se<ce.length;Se++){const Be=ce[Se],Oe=Be.regex.exec(e);if(Oe){const I=Oe[Be.indices.bucket];let E=Oe[Be.indices.path];E||(E=""),i=new Hs(I,E),Be.postModify(i);break}}if(i==null)throw yM(e);return i}}class TM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function jM(s,e,n){let i=1,l=null,u=null,h=!1,p=0;function g(){return p===2}let y=!1;function w(...V){y||(y=!0,e.apply(null,V))}function T(V){l=setTimeout(()=>{l=null,s(O,g())},V)}function S(){u&&clearTimeout(u)}function O(V,...Z){if(y){S();return}if(V){S(),w.call(null,V,...Z);return}if(g()||h){S(),w.call(null,V,...Z);return}i<64&&(i*=2);let ce;p===1?(p=2,ce=0):ce=(i+Math.random())*1e3,T(ce)}let G=!1;function U(V){G||(G=!0,S(),!y&&(l!==null?(V||(p=2),clearTimeout(l),T(0)):V||(p=1)))}return T(0),u=setTimeout(()=>{h=!0,U(!0)},n),U}function EM(s){s(!1)}function SM(s){return s!==void 0}function NM(s){return typeof s=="object"&&!Array.isArray(s)}function jy(s){return typeof s=="string"||s instanceof String}function Gx(s){return Ey()&&s instanceof Blob}function Ey(){return typeof Blob<"u"}function yg(s,e,n,i){if(i<e)throw gg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw gg(`Invalid value for '${s}'. Expected ${n} or less.`)}function hf(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function uk(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);n=n+l+"&"}return n=n.slice(0,-1),n}var jo;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(jo||(jo={}));function CM(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class RM{constructor(e,n,i,l,u,h,p,g,y,w,T,S=!0,O=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=T,this.retry=S,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((G,U)=>{this.resolve_=G,this.reject_=U,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new td(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===jo.NO_ERROR,g=u.getStatus();if(!p||CM(g,this.additionalRetryCodes_)&&this.retry){const w=u.getErrorCode()===jo.ABORT;i(!1,new td(!1,null,w));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new td(y,u))})},n=(i,l)=>{const u=this.resolve_,h=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());SM(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=Ty();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(l.canceled){const g=this.appDelete_?ck():gM();h(g)}else{const g=pM();h(g)}};this.canceled_?n(!1,new td(!1,null,!0)):this.backoffId_=jM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&EM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class td{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function AM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function IM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function MM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function DM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function PM(s,e,n,i,l,u,h=!0,p=!1){const g=uk(s.urlParams),y=s.url+g,w=Object.assign({},s.headers);return MM(w,e),AM(w,n),IM(w,u),DM(w,i),new RM(y,s.method,w,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,h,p)}function LM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function OM(...s){const e=LM();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(Ey())return new Blob(s);throw new Kn(Gn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function VM(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function BM(s){if(typeof atob>"u")throw _M("base-64");return atob(s)}const la={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sp{constructor(e,n){this.data=e,this.contentType=n||null}}function UM(s,e){switch(s){case la.RAW:return new Sp(hk(e));case la.BASE64:case la.BASE64URL:return new Sp(dk(s,e));case la.DATA_URL:return new Sp(FM(e),qM(e))}throw Ty()}function hk(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++n);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function zM(s){let e;try{e=decodeURIComponent(s)}catch{throw ru(la.DATA_URL,"Malformed data URL.")}return hk(e)}function dk(s,e){switch(s){case la.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw ru(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case la.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw ru(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=BM(e)}catch(l){throw l.message.includes("polyfill")?l:ru(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i}class fk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ru(la.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=HM(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function FM(s){const e=new fk(s);return e.base64?dk(la.BASE64,e.rest):zM(e.rest)}function qM(s){return new fk(s).contentType}function HM(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Ci{constructor(e,n){let i=0,l="";Gx(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(Gx(this.data_)){const i=this.data_,l=VM(i,e,n);return l===null?null:new Ci(l)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ci(i,!0)}}static getBlob(...e){if(Ey()){const n=e.map(i=>i instanceof Ci?i.data_:i);return new Ci(OM.apply(null,n))}else{const n=e.map(h=>jy(h)?UM(la.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const l=new Uint8Array(i);let u=0;return n.forEach(h=>{for(let p=0;p<h.length;p++)l[u++]=h[p]}),new Ci(l,!0)}}uploadData(){return this.data_}}function Sy(s){let e;try{e=JSON.parse(s)}catch{return null}return NM(e)?e:null}function $M(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function WM(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function mk(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function GM(s,e){return e}class qs{constructor(e,n,i,l){this.server=e,this.local=n||e,this.writable=!!i,this.xform=l||GM}}let nd=null;function KM(s){return!jy(s)||s.length<2?s:mk(s)}function pk(){if(nd)return nd;const s=[];s.push(new qs("bucket")),s.push(new qs("generation")),s.push(new qs("metageneration")),s.push(new qs("name","fullPath",!0));function e(u,h){return KM(h)}const n=new qs("name");n.xform=e,s.push(n);function i(u,h){return h!==void 0?Number(h):h}const l=new qs("size");return l.xform=i,s.push(l),s.push(new qs("timeCreated")),s.push(new qs("updated")),s.push(new qs("md5Hash",null,!0)),s.push(new qs("cacheControl",null,!0)),s.push(new qs("contentDisposition",null,!0)),s.push(new qs("contentEncoding",null,!0)),s.push(new qs("contentLanguage",null,!0)),s.push(new qs("contentType",null,!0)),s.push(new qs("metadata","customMetadata",!0)),nd=s,nd}function YM(s,e){function n(){const i=s.bucket,l=s.fullPath,u=new Hs(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function QM(s,e,n){const i={};i.type="file";const l=n.length;for(let u=0;u<l;u++){const h=n[u];i[h.local]=h.xform(i,e[h.server])}return YM(i,s),i}function gk(s,e,n){const i=Sy(e);return i===null?null:QM(s,i,n)}function XM(s,e,n,i){const l=Sy(e);if(l===null||!jy(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(y=>{const w=s.bucket,T=s.fullPath,S="/b/"+h(w)+"/o/"+h(T),O=hf(S,n,i),G=uk({alt:"media",token:y});return O+G})[0]}function JM(s,e){const n={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}const Kx="prefixes",Yx="items";function ZM(s,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Kx])for(const l of n[Kx]){const u=l.replace(/\/$/,""),h=s._makeStorageReference(new Hs(e,u));i.prefixes.push(h)}if(n[Yx])for(const l of n[Yx]){const u=s._makeStorageReference(new Hs(e,l.name));i.items.push(u)}return i}function e3(s,e,n){const i=Sy(n);return i===null?null:ZM(s,e,i)}class Ny{constructor(e,n,i,l){this.url=e,this.method=n,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Cy(s){if(!s)throw Ty()}function t3(s,e){function n(i,l){const u=gk(s,l,e);return Cy(u!==null),u}return n}function n3(s,e){function n(i,l){const u=e3(s,e,l);return Cy(u!==null),u}return n}function s3(s,e){function n(i,l){const u=gk(s,l,e);return Cy(u!==null),XM(u,l,s.host,s._protocol)}return n}function Ry(s){function e(n,i){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=fM():l=dM():n.getStatus()===402?l=hM(s.bucket):n.getStatus()===403?l=mM(s.path):l=i,l.status=n.getStatus(),l.serverResponse=i.serverResponse,l}return e}function r3(s){const e=Ry(s);function n(i,l){let u=e(i,l);return i.getStatus()===404&&(u=uM(s.path)),u.serverResponse=l.serverResponse,u}return n}function a3(s,e,n,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),i&&(u.pageToken=i),l&&(u.maxResults=l);const h=e.bucketOnlyServerUrl(),p=hf(h,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,w=new Ny(p,g,n3(s,e.bucket),y);return w.urlParams=u,w.errorHandler=Ry(e),w}function i3(s,e,n){const i=e.fullServerUrl(),l=hf(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new Ny(l,u,s3(s,n),h);return p.errorHandler=r3(e),p}function o3(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function l3(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=o3(null,e)),i}function c3(s,e,n,i,l){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let ce="";for(let Se=0;Se<2;Se++)ce=ce+Math.random().toString().slice(2);return ce}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const y=l3(e,i,l),w=JM(y,n),T="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,S=`\r
--`+g+"--",O=Ci.getBlob(T,i,S);if(O===null)throw xM();const G={name:y.fullPath},U=hf(u,s.host,s._protocol),V="POST",Z=s.maxUploadRetryTime,X=new Ny(U,V,t3(s,n),Z);return X.urlParams=G,X.headers=h,X.body=O.uploadData(),X.errorHandler=Ry(e),X}class u3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,l,u){if(this.sent_)throw qc("cannot .send() more than once");if(qi(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class h3 extends u3{initXhr(){this.xhr_.responseType="text"}}function Ay(){return new h3}class Mo{constructor(e,n){this._service=e,n instanceof Hs?this._location=n:this._location=Hs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Mo(e,n)}get root(){const e=new Hs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mk(this._location.path)}get storage(){return this._service}get parent(){const e=$M(this._location.path);if(e===null)return null;const n=new Hs(this._location.bucket,e);return new Mo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw kM(e)}}function d3(s,e,n){s._throwIfRoot("uploadBytes");const i=c3(s.storage,s._location,pk(),new Ci(e,!0),n);return s.storage.makeRequestWithTokens(i,Ay).then(l=>({metadata:l,ref:s}))}function f3(s){const e={prefixes:[],items:[]};return yk(s,e).then(()=>e)}async function yk(s,e,n){const l=await m3(s,{pageToken:n});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await yk(s,e,l.nextPageToken)}function m3(s,e){e!=null&&typeof e.maxResults=="number"&&yg("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=a3(s.storage,s._location,"/",n.pageToken,n.maxResults);return s.storage.makeRequestWithTokens(i,Ay)}function p3(s){s._throwIfRoot("getDownloadURL");const e=i3(s.storage,s._location,pk());return s.storage.makeRequestWithTokens(e,Ay).then(n=>{if(n===null)throw wM();return n})}function g3(s,e){const n=WM(s._location.path,e),i=new Hs(s._location.bucket,n);return new Mo(s.storage,i)}function y3(s){return/^[A-Za-z]+:\/\//.test(s)}function v3(s,e){return new Mo(s,e)}function vk(s,e){if(s instanceof Iy){const n=s;if(n._bucket==null)throw bM();const i=new Mo(n,n._bucket);return e!=null?vk(i,e):i}else return e!==void 0?g3(s,e):s}function b3(s,e){if(e&&y3(e)){if(s instanceof Iy)return v3(s,e);throw gg("To use ref(service, url), the first argument must be a Storage instance.")}else return vk(s,e)}function Qx(s,e){const n=e?.[lk];return n==null?null:Hs.makeFromBucketSpec(n,s)}function x3(s,e,n,i={}){s.host=`${e}:${n}`;const l=qi(e);l&&(Eg(`https://${s.host}/b`),Sg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:V2(u,s.app.options.projectId))}class Iy{constructor(e,n,i,l,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=ok,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lM,this._maxUploadRetryTime=cM,this._requests=new Set,l!=null?this._bucket=Hs.makeFromBucketSpec(l,this._host):this._bucket=Qx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hs.makeFromBucketSpec(this._url,e):this._bucket=Qx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mo(this,e)}_makeRequest(e,n,i,l,u=!0){if(this._deleted)return new TM(ck());{const h=PM(e,this._appId,i,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,l).getPromise()}}const Xx="@firebase/storage",Jx="0.14.0";const bk="storage";function Zx(s,e,n){return s=Un(s),d3(s,e,n)}function e2(s){return s=Un(s),f3(s)}function Ml(s){return s=Un(s),p3(s)}function wo(s,e){return s=Un(s),b3(s,e)}function w3(s=Ag(),e){s=Un(s);const i=qd(s,bk).getImmediate({identifier:e}),l=P2("storage");return l&&_3(i,...l),i}function _3(s,e,n,i={}){x3(s,e,n,i)}function k3(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new Iy(n,i,l,e,Do)}function T3(){So(new Pi(bk,k3,"PUBLIC").setMultipleInstances(!0)),ca(Xx,Jx,""),ca(Xx,Jx,"esm2020")}T3();const xk={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},My=Rg(xk),Hc=kw(My),je=WI(My),_o=w3(My),j3=Rg(xk,"secondary"),VD=kw(j3),E3="EYdciKDOi3UYBLk1u8hHams5tmO2",wk=_.createContext();function hr(){return _.useContext(wk)}function S3({children:s}){const[e,n]=_.useState(null),[i,l]=_.useState(!1),[u,h]=_.useState(!1),[p,g]=_.useState(null),[y,w]=_.useState(!0);_.useEffect(()=>RC(Hc,async Z=>{if(n(Z),Z)if(Z.uid===E3)l(!0),h(!1),g(null);else{l(!1);try{const X=yn(Ft(je,"clients"),nn("uid","==",Z.uid)),ce=await un(X);if(ce.empty)h(!1),g(null);else{const Se=ce.docs[0];h(!0),g({id:Se.id,...Se.data()})}}catch(X){console.error("Error fetching client data:",X),h(!1),g(null)}}else l(!1),h(!1),g(null);w(!1)}),[]);const U={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:V=>{g(Z=>Z&&{...Z,...V})},login:async(V,Z,X=!0)=>(await SC(Hc,X?pw:Vg),await EC(Hc,V,Z)),logout:()=>AC(Hc),resetPassword:V=>jC(Hc,V),loading:y};return a.jsx(wk.Provider,{value:U,children:s})}const _k=_.createContext();function Gr(){return _.useContext(_k)}function N3({children:s}){const[e,n]=_.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=_.useState(()=>localStorage.getItem("accent")||"red");_.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),_.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(_k.Provider,{value:p,children:s})}function C3(){const[s,e]=_.useState(""),[n,i]=_.useState(""),[l,u]=_.useState(!0),[h,p]=_.useState(""),[g,y]=_.useState(!1),[w,T]=_.useState(!1),[S,O]=_.useState(!1),{login:G,resetPassword:U,currentUser:V,isAdmin:Z,isClient:X,clientData:ce,loading:Se}=hr(),Be=Rs();if(_.useEffect(()=>{if(!Se&&V){if(Z)Be("/dashboard");else if(X){const E=ce?.clientType;Be(E==="core_buddy"?"/client/core-buddy":E==="circuit_vip"||E==="circuit_dropin"?"/client/circuit":"/client")}}},[Se,V,Z,X,ce,Be]),Se)return null;const Oe=async E=>{E.preventDefault(),p(""),y(!0);try{await G(s,n,l)}catch(A){p(A.message||"Failed to log in"),y(!1)}},I=async E=>{if(E.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await U(s.trim()),O(!0)}catch(A){A.code==="auth/user-not-found"?p("No account found with this email"):p(A.message||"Failed to send reset email")}y(!1)};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:w?"Reset Password":"Client Portal"})]}),h&&a.jsx("div",{className:"error-message",children:h}),S?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{T(!1),O(!1),p("")},children:"Back to Log In"})]}):w?a.jsxs("form",{onSubmit:I,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:E=>e(E.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:Oe,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:E=>e(E.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:n,onChange:E=>i(E.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:E=>u(E.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!0),p("")},children:"Forgot password?"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Hr({active:s}){const e=Rs(),{clientData:n}=hr(),i=n?.clientType==="block"&&n?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{children:"Profile"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"})}),a.jsx("span",{children:"Workouts"})]}),a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),i&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Mu(s,e,n,i,l){const u=[];for(let h=0;h<s;h++){const p=(h*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:n+i*Math.sin(p),x2:e+l*Math.cos(p),y2:n+l*Math.sin(p),thick:h%5===0})}return u}const Dy=Mu(60,100,100,85,96),ko=Mu(60,100,100,78,94),R3=Mu(60,100,100,82,94);Mu(60,50,50,38,46);const A3=Mu(60,40,40,30,37),Np=[10,25,50,100,200,500,1e3],ki=5;function vl(s){return s.toISOString().split("T")[0]}function I3(s){let e=0;for(const n of Np){if(s<n)return{prev:e,next:n};e=n}return{prev:Np[Np.length-1],next:s+100}}const M3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},D3={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},Cp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}];function t2(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Rp(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function P3(s,e=800){return new Promise(n=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,h=i.height;u>h?u>e&&(h=Math.round(h*e/u),u=e):h>e&&(u=Math.round(u*e/h),h=e),l.width=u,l.height=h,l.getContext("2d").drawImage(i,0,0,u,h),l.toBlob(p=>n(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}const Qs={first_workout:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 4v16"}),a.jsx("path",{d:"M18 4v16"}),a.jsx("path",{d:"M6 12h12"}),a.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),a.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]}),workouts_10:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),a.jsx("path",{d:"M12 14v4"}),a.jsx("path",{d:"M10 18h4"})]}),workouts_25:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),workouts_50:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12h4"}),a.jsx("path",{d:"M16 12h4"}),a.jsx("path",{d:"M12 4v4"}),a.jsx("path",{d:"M12 16v4"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]}),workouts_100:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),streak_2:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M9 16l2 2 4-4"})]}),streak_4:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M8 16h8"}),a.jsx("path",{d:"M12 14v4"})]}),streak_8:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),a.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]}),programme_done:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("path",{d:"M4 22h16"}),a.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),a.jsx("path",{d:"M9 12l2 2 4-4"})]}),habits_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),nutrition_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),a.jsx("path",{d:"M9 7h6"})]}),first_pb:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M12 14v8"}),a.jsx("path",{d:"M9 18l3 3 3-3"}),a.jsx("path",{d:"M10 6l2 2 2-2"})]}),pbs_5:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 20h18"}),a.jsx("path",{d:"M5 20V10l4-6"}),a.jsx("path",{d:"M9 20V4"}),a.jsx("path",{d:"M13 20V10l4-6"}),a.jsx("path",{d:"M17 20V4"}),a.jsx("path",{d:"M21 20V10"})]}),leaderboard_join:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},n2=[{id:"first_workout",icon:Qs.first_workout,name:"First Rep",desc:"Complete your first workout",category:"workouts"},{id:"workouts_10",icon:Qs.workouts_10,name:"On Fire",desc:"Complete 10 workouts",category:"workouts"},{id:"workouts_25",icon:Qs.workouts_25,name:"Lightning",desc:"Complete 25 workouts",category:"workouts"},{id:"workouts_50",icon:Qs.workouts_50,name:"Iron Will",desc:"Complete 50 workouts",category:"workouts"},{id:"workouts_100",icon:Qs.workouts_100,name:"Century Club",desc:"Complete 100 workouts",category:"workouts"},{id:"streak_2",icon:Qs.streak_2,name:"2 Week Warrior",desc:"2-week workout streak",category:"streak"},{id:"streak_4",icon:Qs.streak_4,name:"Month Strong",desc:"4-week workout streak",category:"streak"},{id:"streak_8",icon:Qs.streak_8,name:"Unbreakable",desc:"8-week workout streak",category:"streak"},{id:"programme_done",icon:Qs.programme_done,name:"Finisher",desc:"Complete a programme",category:"programme"},{id:"habits_7",icon:Qs.habits_7,name:"Habit Machine",desc:"7-day perfect habit streak",category:"habits"},{id:"nutrition_7",icon:Qs.nutrition_7,name:"Fuel Master",desc:"Log nutrition 7 days in a row",category:"nutrition"},{id:"first_pb",icon:Qs.first_pb,name:"Record Breaker",desc:"Set your first PB",category:"pbs"},{id:"pbs_5",icon:Qs.pbs_5,name:"Climbing",desc:"Set 5 personal bests",category:"pbs"},{id:"leaderboard_join",icon:Qs.leaderboard_join,name:"Competitor",desc:"Join the leaderboard",category:"social"}];function L3(){const{currentUser:s,isClient:e,clientData:n,logout:i,updateClientData:l,loading:u}=hr(),{isDark:h,toggleTheme:p}=Gr(),g=Rs(),[y,w]=_.useState({hours:0,minutes:0,seconds:0}),[T,S]=_.useState(0),[O,G]=_.useState(0),[U,V]=_.useState(""),[Z,X]=_.useState(0),[ce,Se]=_.useState(0),[Be,Oe]=_.useState(!1),[I,E]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[A,P]=_.useState(null),[D,q]=_.useState(0),[M,ze]=_.useState(null),[gt,Y]=_.useState(!1),[_e,De]=_.useState(!1),[le,Ve]=_.useState(0),[C,B]=_.useState(0),[oe,pe]=_.useState([]),[Ae,Le]=_.useState([]),[Qe,Fe]=_.useState(null),[ae,We]=_.useState(!1),wt=_.useRef(null),[ut,ft]=_.useState([]),[re,qt]=_.useState(null),[kt,bt]=_.useState(0),[Et,lt]=_.useState(0),[Xe,Ht]=_.useState(0),[ts,Nt]=_.useState(0),[Lt,Mn]=_.useState(null),Ct=_.useCallback((b,j="info")=>{Mn({message:b,type:j}),setTimeout(()=>Mn(null),4e3)},[]),[hn,ye]=_.useState([]),[Ne,Pe]=_.useState(!1),[tt,Je]=_.useState(""),[Ue,nt]=_.useState(null),[Ke,He]=_.useState(null),[St,Jt]=_.useState(!1),[Bt,sn]=_.useState(new Set),[Dn,Rt]=_.useState(new Set),[on,zn]=_.useState({}),[kn,ys]=_.useState({}),[ns,En]=_.useState({}),Yn=_.useRef(null),ss=_.useRef(null);_.useEffect(()=>{!u&&!s&&g("/")},[u,s,g]),_.useEffect(()=>{if(n)try{const b=sessionStorage.getItem(`cbDash_${n.id}`);if(b){const j=JSON.parse(b);G(j.programmePct??0),V(j.programmeName??""),X(j.totalWorkouts??0),Se(j.habitWeekPct??0),E(j.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),P(j.nutritionTargetData??null),q(j.todayHabitsCount??0),ze(j.nextSession??null),Y(j.hasProgramme??!1),De(j.programmeComplete??!1),Ve(j.weeklyWorkouts??0),B(j.pbCount??0),pe(j.topPBs??[]),Le(j.leaderboardTop3??[]),ft(j.unlockedBadges??[]),bt(j.streakWeeks??0),Oe(!0)}}catch{}},[n]),_.useEffect(()=>{n?.photoURL&&Fe(n.photoURL)},[n]);const vs=async b=>{const j=b.target.files?.[0];if(!(!j||!n)){if(!j.type.startsWith("image/")){Ct("Please select an image file","error");return}if(j.size>5*1024*1024){Ct("Image must be under 5MB","error");return}We(!0);try{const L=await new Promise(ve=>{const we=new Image;we.onload=()=>{const st=document.createElement("canvas"),et=400;let F=we.width,J=we.height;F>J?(J=J/F*et,F=et):(F=F/J*et,J=et),st.width=F,st.height=J,st.getContext("2d").drawImage(we,0,0,F,J),st.toBlob(te=>ve(te),"image/jpeg",.75)},we.src=URL.createObjectURL(j)}),K=wo(_o,`profilePhotos/${n.id}`);await Zx(K,L);const Me=await Ml(K);await oa(Ge(je,"clients",n.id),{photoURL:Me}),Fe(Me),l({photoURL:Me}),Ct("Profile photo updated!","success")}catch(L){console.error("Photo upload error:",L),Ct("Failed to upload photo","error")}We(!1),wt.current&&(wt.current.value="")}};_.useEffect(()=>{const b=()=>{const L=new Date,K=new Date(L);K.setHours(23,59,59,999);const Me=K-L,ve=Math.floor(Me/(1e3*60*60)),we=Math.floor(Me%(1e3*60*60)/(1e3*60)),st=Math.floor(Me%(1e3*60)/1e3);w({hours:ve,minutes:we,seconds:st}),S(60-st)};b();const j=setInterval(b,1e3);return()=>clearInterval(j)},[]),_.useEffect(()=>{const b=setInterval(()=>{Nt(j=>(j+1)%Cp.length)},8e3);return()=>clearInterval(b)},[]),_.useEffect(()=>{if(!s||!n)return;(async()=>{let j=null,L=0,K=[],Me=!1;try{const ve=vl(new Date),we=await In(Ge(je,"clientProgrammes",n.id));if(we.exists()){const as=we.data(),fs=M3[as.templateId];if(Y(!0),fs){const ms=as.completedSessions||{},zt=Object.keys(ms).length,Sn=fs.duration*fs.daysPerWeek;G(Sn>0?Math.round(zt/Sn*100):0);const Cn=as.templateId.replace(/_/g," ").replace(/\b\w/g,Pn=>Pn.toUpperCase());V(Cn);const er=D3[as.templateId];let Ms=!1;for(let Pn=1;Pn<=fs.duration&&!Ms;Pn++)for(let Fn=0;Fn<fs.daysPerWeek&&!Ms;Fn++)ms[`w${Pn}d${Fn}`]||(ze({week:Pn,dayIdx:Fn,label:er?.[Fn]||`Day ${Fn+1}`}),Ms=!0);Ms||(De(!0),Me=!0)}}const st=Ft(je,"workoutLogs"),et=yn(st,nn("clientId","==",n.id));j=await un(et);const F=j.docs.filter(as=>as.data().type!=="programme").length;X(F);const J=new Date,te=J.getDay(),me=te===0?6:te-1,Ce=new Date(J);Ce.setDate(J.getDate()-me),Ce.setHours(0,0,0,0);const $e=vl(Ce),ot=j.docs.filter(as=>(as.data().date||"")>=$e).length;Ve(ot);const Ye=Ft(je,"habitLogs"),Ot=yn(Ye,nn("clientId","==",n.id),nn("date","==",ve)),mn=await un(Ot);let Ut=0;if(!mn.empty){const as=mn.docs[0].data().habits||{};Ut=Object.values(as).filter(Boolean).length}Se(Math.round(Ut/ki*100)),q(Ut);const dn=await In(Ge(je,"nutritionTargets",n.id));dn.exists()&&P(dn.data());const Zs=await In(Ge(je,"nutritionLogs",`${n.id}_${ve}`));if(Zs.exists()){const fs=(Zs.data().entries||[]).reduce((ms,zt)=>({protein:ms.protein+(zt.protein||0),carbs:ms.carbs+(zt.carbs||0),fats:ms.fats+(zt.fats||0),calories:ms.calories+(zt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});E(fs)}}catch(ve){console.error("Error loading dashboard stats:",ve)}try{let ve=[];const we=await In(Ge(je,"coreBuddyPBs",n.id));if(we.exists()){const st=we.data().exercises||{};B(Object.keys(st).length),L=Object.keys(st).length,ve=Object.entries(st).sort(([,et],[,F])=>(F.weight||0)-(et.weight||0)).slice(0,3).map(([et,F])=>({name:et,weight:F.weight,reps:F.reps}))}if(ve.length===0){const st={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},et=yn(Ft(je,"personalBests"),nn("clientId","==",n.id)),F=await un(et);if(!F.empty){const J={};F.docs.forEach(me=>{const Ce=me.data().benchmarks||{};Object.entries(Ce).forEach(([$e,ot])=>{if(!ot.weight||!st[$e])return;const Ye=(ot.weight||0)*(ot.reps||1);(!J[$e]||Ye>(J[$e].weight||0)*(J[$e].reps||1))&&(J[$e]={name:st[$e],weight:ot.weight,reps:ot.reps})})});const te=Object.values(J);B(te.length),L=te.length,ve=te.sort((me,Ce)=>(Ce.weight||0)-(me.weight||0)).slice(0,3)}}K=ve,pe(ve)}catch(ve){console.error("PB fetch error:",ve)}try{const ve=Ft(je,"clients"),we=yn(ve,nn("leaderboardOptIn","==",!0)),et=(await un(we)).docs.map(F=>({id:F.id,name:F.data().name,photoURL:F.data().photoURL||null}));Le(et.slice(0,3))}catch(ve){console.error("Leaderboard preview error:",ve)}try{let ve=0;if(j){const me=j.docs.map(Ce=>Ce.data().date).filter(Boolean).sort().reverse();if(me.length>0){const Ce=new Date;let $e=new Date(Ce);e:for(let ot=0;ot<52;ot++){const Ye=new Date($e),Ot=Ye.getDay(),mn=Ot===0?6:Ot-1;Ye.setDate(Ye.getDate()-mn),Ye.setHours(0,0,0,0);const Ut=new Date(Ye);Ut.setDate(Ut.getDate()+7);const dn=vl(Ye),Zs=vl(Ut);if(me.some(fs=>fs>=dn&&fs<Zs))ve++;else{if(ot>0)break e;break}$e.setDate($e.getDate()-7)}}}bt(ve);let we=0;for(let me=0;me<30;me++){const Ce=new Date;Ce.setDate(Ce.getDate()-me);const $e=vl(Ce);try{const ot=await un(yn(Ft(je,"habitLogs"),nn("clientId","==",n.id),nn("date","==",$e)));if(ot.empty)break;{const Ye=ot.docs[0].data().habits||{};if(Object.values(Ye).filter(Boolean).length>=ki)we++;else break}}catch{break}}lt(we);let st=0;for(let me=0;me<30;me++){const Ce=new Date;Ce.setDate(Ce.getDate()-me);const $e=vl(Ce);try{const ot=await In(Ge(je,"nutritionLogs",`${n.id}_${$e}`));if(ot.exists()&&(ot.data().entries||[]).length>0)st++;else break}catch{break}}Ht(st);const et=j?j.docs.length:0,F=[],J=me=>F.push(me);et>=1&&J("first_workout"),et>=10&&J("workouts_10"),et>=25&&J("workouts_25"),et>=50&&J("workouts_50"),et>=100&&J("workouts_100"),ve>=2&&J("streak_2"),ve>=4&&J("streak_4"),ve>=8&&J("streak_8"),Me&&J("programme_done"),we>=7&&J("habits_7"),st>=7&&J("nutrition_7"),(L>0||K.length>0)&&J("first_pb"),L>=5&&J("pbs_5"),n.leaderboardOptIn&&J("leaderboard_join"),ft(F);const te={};F.forEach(me=>{te[me]={unlockedAt:new Date().toISOString()}}),vn(Ge(je,"achievements",n.id),{badges:te,updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(ve){console.error("Achievement computation error:",ve)}Oe(!0)})()},[s,n]),_.useEffect(()=>{if(!(!Be||!n))try{sessionStorage.setItem(`cbDash_${n.id}`,JSON.stringify({programmePct:O,programmeName:U,totalWorkouts:Z,habitWeekPct:ce,nutritionTotals:I,nutritionTargetData:A,todayHabitsCount:D,nextSession:M,hasProgramme:gt,programmeComplete:_e,weeklyWorkouts:le,pbCount:C,topPBs:oe,leaderboardTop3:Ae,unlockedBadges:ut,streakWeeks:kt}))}catch{}},[Be,O,U,Z,ce,I,A,D,M,gt,_e,le,C,oe,Ae,ut,kt,n]);const Hn=b=>{const j=b.currentTarget,L=j.querySelector(".ripple");L&&L.remove();const K=j.getBoundingClientRect(),Me=Math.max(K.width,K.height),ve=b.clientX-K.left-Me/2,we=b.clientY-K.top-Me/2,st=document.createElement("span");st.className="ripple",st.style.cssText=`width:${Me}px;height:${Me}px;left:${ve}px;top:${we}px;`,j.appendChild(st),setTimeout(()=>st.remove(),600)},As=n?.name?.split(" ")[0]||"there",{prev:$,next:ge}=I3(Z),ke=ge>$?Math.round((Z-$)/(ge-$)*100):100,xe=[{label:"Programme",value:`${O}%`,pct:O,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${Z}`,pct:ke,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${ce}%`,pct:ce,color:"#38B6FF",size:"normal"}],fe=b=>!A||!A[b]?0:Math.min(Math.round(I[b]/A[b]*100),100),rt=(()=>{const b=new Date().getHours();return Be&&D>=ki&&I.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:b>=5&&b<12?{main:"Rise and grind,",sub:"let's get after it!"}:b>=12&&b<17?{main:"Oye",sub:"crack on and make it count!"}:b>=17&&b<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),mt=Be?gt&&M&&!_e?{label:"NEXT SESSION",message:`Week ${M.week}, Day ${M.dayIdx+1}  ${M.label}`,cta:"Continue",action:()=>g("/client/core-buddy/programmes"),pct:O,ringLabel:`${O}%`}:D<ki?{label:"DAILY HABITS",message:`${D}/${ki} completed`,cta:"Open Habits",action:()=>g("/client/core-buddy/consistency"),pct:ce,ringLabel:`${D}/${ki}`}:I.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>g("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:gt?_e?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>g("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>g("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null,it=_.useCallback(async()=>{if(n){Pe(!0);try{const b=await un(yn(Ft(je,"posts"),nn("authorId","==",n.id),Ul("createdAt","desc"),zl(30)));ye(b.docs.map(L=>({id:L.id,...L.data()})));const j=await un(yn(Ft(je,"postLikes"),nn("userId","==",n.id)));sn(new Set(j.docs.map(L=>L.data().postId)))}catch(b){console.error("Error loading journey:",b)}finally{Pe(!1)}}},[n]);_.useEffect(()=>{Be&&n&&it()},[Be,n,it]);const xt=b=>{const j=b.target.files?.[0];if(j){if(!j.type.startsWith("image/")){Ct("Please select an image file","error");return}if(j.size>10*1024*1024){Ct("Image must be under 10MB","error");return}nt(j),He(URL.createObjectURL(j))}},pt=()=>{nt(null),Ke&&URL.revokeObjectURL(Ke),He(null),ss.current&&(ss.current.value="")},Zt=async()=>{if(!(!tt.trim()&&!Ue||St||!n)){Jt(!0);try{let b=null;if(Ue){const j=await P3(Ue),L=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,K=wo(_o,`postImages/${n.id}/${L}`);await Zx(K,j),b=await Ml(K)}await Fi(Ft(je,"posts"),{authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:tt.trim(),type:b?"image":"text",imageURL:b||null,createdAt:Tr(),likeCount:0,commentCount:0}),Je(""),pt(),Yn.current&&(Yn.current.style.height="auto"),await it(),Ct("Posted!","success")}catch(b){console.error("Error posting:",b),Ct(b?.message||"Failed to post","error")}finally{Jt(!1)}}},Is=async b=>{if(window.confirm("Delete this post?"))try{await Vs(Ge(je,"posts",b)),ye(j=>j.filter(L=>L.id!==b)),Ct("Post deleted","info")}catch(j){console.error("Delete error:",j),Ct("Failed to delete","error")}},rs=async b=>{if(!n)return;const j=n.id,L=`${b}_${j}`,K=Bt.has(b),Me=new Set(Bt);K?Me.delete(b):Me.add(b),sn(Me),ye(ve=>ve.map(we=>we.id===b?{...we,likeCount:Math.max(0,(we.likeCount||0)+(K?-1:1))}:we));try{K?(await Vs(Ge(je,"postLikes",L)),await oa(Ge(je,"posts",b),{likeCount:Ua(-1)})):(await vn(Ge(je,"postLikes",L),{postId:b,userId:j,createdAt:Tr()}),await oa(Ge(je,"posts",b),{likeCount:Ua(1)}))}catch(ve){console.error("Like error:",ve),it()}},bs=async b=>{try{const j=await un(yn(Ft(je,"postComments"),nn("postId","==",b),Ul("createdAt","asc"),zl(50)));zn(L=>({...L,[b]:j.docs.map(K=>({id:K.id,...K.data()}))}))}catch(j){console.error("Error loading comments:",j)}},Tn=b=>{const j=new Set(Dn);j.has(b)?j.delete(b):(j.add(b),on[b]||bs(b)),Rt(j)},H=async b=>{const j=(kn[b]||"").trim();if(!(!j||!n)){En(L=>({...L,[b]:!0}));try{await Fi(Ft(je,"postComments"),{postId:b,authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:j,createdAt:Tr()}),await oa(Ge(je,"posts",b),{commentCount:Ua(1)}),ys(L=>({...L,[b]:""})),ye(L=>L.map(K=>K.id===b?{...K,commentCount:(K.commentCount||0)+1}:K)),await bs(b)}catch(L){console.error("Comment error:",L),Ct("Failed to comment","error")}finally{En(L=>({...L,[b]:!1}))}}},ue=b=>{Je(b.target.value),b.target.style.height="auto",b.target.style.height=Math.min(b.target.scrollHeight,120)+"px"};return a.jsxs("div",{className:"cb-dashboard","data-theme":h?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:h?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:Dy.map((b,j)=>{const L=j<T;return a.jsx("line",{x1:b.x1,y1:b.y1,x2:b.x2,y2:b.y2,className:`ring-tick ${L?"elapsed":"remaining"}`,strokeWidth:b.thick?"3":"2"},j)})}),a.jsx("div",{className:"cb-ring-center",children:a.jsxs("div",{className:"cb-ring-logo",onClick:()=>wt.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:Qe||"/Logo.webp",alt:Qe?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${ae?" uploading":""}`,children:ae?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:wt,type:"file",accept:"image/*",onChange:vs,style:{display:"none"}})]})})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(y.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(y.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(y.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Cp[ts].text," ",a.jsx("strong",{children:Cp[ts].bold})]},ts)]}),a.jsx("div",{className:"cb-stats-row",children:xe.map(b=>{const j=(b.size==="large",38),L=2*Math.PI*j,K=L-b.pct/100*L;return a.jsxs("div",{className:`cb-stat-item${b.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:"cb-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:j}),a.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:j,style:{stroke:b.color},strokeDasharray:L,strokeDashoffset:K})]}),a.jsx("span",{className:"cb-stat-value",style:{color:b.color},children:b.value})]}),a.jsx("span",{className:"cb-stat-label",children:b.label})]},b.label)})}),a.jsxs("p",{className:"cb-coach-msg",children:[rt.main," ",a.jsx("strong",{children:As}),"  ",rt.sub]}),mt&&a.jsxs("button",{className:"cb-nudge-card",onClick:mt.action||void 0,style:mt.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-mt.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:mt.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:mt.label}),a.jsx("span",{className:"cb-nudge-title",children:mt.message}),mt.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[mt.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[a.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:b=>{Hn(b),g("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:fe("protein"),color:"#14b8a6"},{label:"C",pct:fe("carbs"),color:"var(--color-primary)"},{label:"F",pct:fe("fats"),color:"#eab308"},{label:"Cal",pct:fe("calories"),color:"#38B6FF"}].map(b=>{const L=2*Math.PI*38,K=L-b.pct/100*L;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:b.color},strokeDasharray:L,strokeDashoffset:K})]}),a.jsx("span",{style:{color:b.color},children:b.label})]},b.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:b=>{Hn(b),g("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[le," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[Z," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-grid-row",children:[a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:b=>{Hn(b),g("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:"cb-habit-dots",children:Array.from({length:ki},(b,j)=>a.jsx("span",{className:`cb-habit-dot${j<D?" done":""}`},j))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[D,"/",ki," today"]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:b=>{Hn(b),g("/client/personal-bests?mode=corebuddy")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"PBs"}),oe.length>0?a.jsx("div",{className:"cb-pb-preview",children:oe.slice(0,2).map(b=>a.jsxs("div",{className:"cb-pb-entry",children:[a.jsx("span",{className:"cb-pb-name",children:b.name}),a.jsxs("span",{className:"cb-pb-value",children:[b.weight,"kg"]})]},b.name))}):a.jsxs("div",{className:"cb-progress-preview",children:[a.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{children:"Start lifting!"})]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:b=>{Hn(b),g("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),Ae.length>0?a.jsx("div",{className:"cb-lb-preview",children:Ae.map((b,j)=>{const L=["#FFD700","#A8B4C0","#CD7F32"][j],K=b.name?b.name.split(" ").map(ve=>ve[0]).join("").slice(0,2).toUpperCase():"?",Me=b.id===n?.id;return a.jsxs("div",{className:`cb-lb-entry${Me?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:L},children:b.photoURL?a.jsx("img",{src:b.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:K})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:L},children:["#",j+1]})]},b.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:b=>{Hn(b),g("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-feed ripple-btn",onClick:b=>{Hn(b),g("/client/core-buddy/feed")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Feed"}),a.jsx("p",{children:"See what your buddies are up to and share updates"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-achievements-section",children:[a.jsx("h3",{className:"cb-achievements-title",children:"Achievements"}),a.jsx("div",{className:"cb-badges-scroll",children:n2.map(b=>{const j=ut.includes(b.id);return a.jsxs("button",{className:`cb-badge${j?" unlocked":" locked"}`,onClick:()=>qt(re?.id===b.id?null:b),children:[a.jsx("span",{className:"cb-badge-icon",children:b.icon}),a.jsx("span",{className:"cb-badge-name",children:b.name})]},b.id)})}),re&&a.jsxs("div",{className:"cb-badge-detail",children:[a.jsx("span",{className:"cb-badge-detail-icon",children:re.icon}),a.jsxs("div",{className:"cb-badge-detail-info",children:[a.jsx("strong",{children:re.name}),a.jsx("span",{children:re.desc}),ut.includes(re.id)?a.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):a.jsx("span",{className:"cb-badge-status locked",children:"Locked"})]})]}),a.jsxs("p",{className:"cb-badges-count",children:[ut.length,"/",n2.length," unlocked"]})]}),a.jsxs("div",{className:"cb-journey-section",children:[a.jsx("h3",{className:"cb-journey-title",children:"My Journey"}),a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:Qe?a.jsx("img",{src:Qe,alt:""}):a.jsx("span",{children:Rp(n?.name)})}),a.jsxs("div",{className:"journey-compose-body",children:[a.jsx("textarea",{ref:Yn,placeholder:"Share your progress...",value:tt,onChange:ue,rows:1,maxLength:500}),Ke&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:Ke,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:pt,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>ss.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:ss,type:"file",accept:"image/*",onChange:xt,hidden:!0}),(tt.trim()||Ue)&&a.jsx("button",{className:"journey-post-btn",onClick:Zt,disabled:St,children:St?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),Ne?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"cb-spinner"})}):hn.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"Start sharing your fitness journey!"})]}):a.jsx("div",{className:"journey-list",children:hn.map(b=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:b.authorPhotoURL?a.jsx("img",{src:b.authorPhotoURL,alt:""}):a.jsx("span",{children:Rp(b.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:b.authorName}),a.jsx("span",{className:"journey-post-time",children:t2(b.createdAt)})]}),a.jsx("button",{className:"journey-delete-btn",onClick:()=>Is(b.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),b.content&&a.jsx("p",{className:"journey-post-content",children:b.content}),b.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:b.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${Bt.has(b.id)?" liked":""}`,onClick:()=>rs(b.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:Bt.has(b.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:b.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${Dn.has(b.id)?" active":""}`,onClick:()=>Tn(b.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:b.commentCount||0})]})]}),Dn.has(b.id)&&a.jsxs("div",{className:"journey-comments",children:[on[b.id]?.length>0?on[b.id].map(j=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",children:j.authorPhotoURL?a.jsx("img",{src:j.authorPhotoURL,alt:""}):a.jsx("span",{children:Rp(j.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:j.authorName}),a.jsx("span",{className:"journey-comment-text",children:j.content})]}),a.jsx("span",{className:"journey-comment-time",children:t2(j.createdAt)})]})]},j.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:kn[b.id]||"",onChange:j=>ys(L=>({...L,[b.id]:j.target.value})),onKeyDown:j=>{j.key==="Enter"&&H(b.id)},maxLength:300}),a.jsx("button",{onClick:()=>H(b.id),disabled:!(kn[b.id]||"").trim()||ns[b.id],children:ns[b.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},b.id))})]})]})]}),a.jsx(Hr,{active:"home"}),Lt&&a.jsxs("div",{className:`toast-notification ${Lt.type}`,children:[Lt.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Lt.message]})]})}const Ap=new Map;function Ti(){return new Date().toISOString().split("T")[0]}const s2=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],O3={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function V3(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function B3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=hr(),{isDark:l,toggleTheme:u,accent:h}=Gr(),p=Rs(),[g,y]=_.useState("loading"),[w,T]=_.useState(null),[S,O]=_.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[G,U]=_.useState(null),[V,Z]=_.useState(Ti()),[X,ce]=_.useState({entries:[],water:0}),[Se,Be]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[Oe,I]=_.useState(!1),[E,A]=_.useState(!1),[P,D]=_.useState(()=>{const b=new Date;return{year:b.getFullYear(),month:b.getMonth()}}),[q,M]=_.useState(V3),[ze,gt]=_.useState(null),[Y,_e]=_.useState(null),[De,le]=_.useState(!1),[Ve,C]=_.useState(null),[B,oe]=_.useState(""),[pe,Ae]=_.useState(!1),[Le,Qe]=_.useState(""),[Fe,ae]=_.useState([]),[We,wt]=_.useState(!1),[ut,ft]=_.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[re,qt]=_.useState(null),[kt,bt]=_.useState("100"),[Et,lt]=_.useState(0),[Xe,Ht]=_.useState("weight"),[ts,Nt]=_.useState(0),[Lt,Mn]=_.useState(null);_.useRef(null);const Ct=_.useRef(!1),hn=_.useRef(null),ye=_.useRef(null),Ne=_.useRef(null),Pe=_.useCallback((b,j="info")=>{Mn({message:b,type:j}),setTimeout(()=>Mn(null),3e3)},[]);_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const j=await In(Ge(je,"nutritionTargets",n.id));j.exists()?(T(j.data()),y("dashboard")):y("setup")}catch(j){console.error("Error loading nutrition data:",j),y("setup")}})()},[n?.id]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const j=await In(Ge(je,"nutritionLogs",`${n.id}_${V}`));if(j.exists()){const L=j.data();ce({entries:L.entries||[],water:L.water||0})}else ce({entries:[],water:0})}catch(j){console.error("Error loading log:",j),ce({entries:[],water:0})}})()},[n?.id,V]),_.useEffect(()=>{const b=X.entries.reduce((j,L)=>({protein:j.protein+(L.protein||0),carbs:j.carbs+(L.carbs||0),fats:j.fats+(L.fats||0),calories:j.calories+(L.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Be(b)},[X.entries]);const tt=async b=>{try{await vn(Ge(je,"nutritionLogs",`${n.id}_${V}`),{clientId:n.id,date:V,entries:b.entries,water:b.water,updatedAt:dt.now()})}catch(j){console.error("Error saving nutrition log:",j)}},Je=V===Ti(),Ue=(b,j)=>new Date(b,j+1,0).getDate(),nt=(b,j)=>new Date(b,j,1).getDay(),Ke=["January","February","March","April","May","June","July","August","September","October","November","December"],He=["Su","Mo","Tu","We","Th","Fr","Sa"],St=()=>{let b=parseFloat(S.weight);S.weightUnit==="lbs"&&(b*=.453592);let j;S.heightUnit==="cm"?j=parseFloat(S.height):j=(parseFloat(S.heightFeet)||0)*30.48+(parseFloat(S.heightInches)||0)*2.54;const L=parseInt(S.age);let K=S.gender==="male"?10*b+6.25*j-5*L+5:10*b+6.25*j-5*L-161;const ve=K*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[S.dailyActivity],we={low:100,moderate:200,high:300,daily:400},st=Math.round(ve+we[S.trainingFrequency]);let et=st,F,J;switch(S.goal){case"lose":et=st*(1-{light:.15,moderate:.2,harsh:.25}[S.deficitLevel]),F=2.2,J=.3;break;case"build":et=st*1.1,F=2,J=.22;break;default:F=1.8,J=.25}et=Math.max(et,S.gender==="male"?1400:1100);const te=Math.round(b*F),me=Math.round(et*J/9),Ce=Math.max(0,Math.round((et-te*4-me*9)/4));U({calories:Math.round(et),protein:te,carbs:Ce,fats:me,bmr:Math.round(K),neat:Math.round(ve),exerciseAdd:we[S.trainingFrequency],tdee:Math.round(st)})},Jt=async()=>{if(G)try{const b={clientId:n.id,calories:G.calories,protein:G.protein,carbs:G.carbs,fats:G.fats,waterGoal:8,goal:S.goal,updatedAt:dt.now()};await vn(Ge(je,"nutritionTargets",n.id),b),T(b),y("dashboard"),Pe("Macro targets saved!","success")}catch(b){console.error("Error saving targets:",b),Pe("Failed to save targets. Please try again.","error")}},Bt=()=>{const b=S.weight&&parseFloat(S.weight)>0,j=S.age&&parseInt(S.age)>0,L=S.heightUnit==="cm"?S.height&&parseFloat(S.height)>0:S.heightFeet&&parseFloat(S.heightFeet)>0||S.heightInches&&parseFloat(S.heightInches)>0;return b&&j&&L},sn="nut_favourite_foods",Dn=()=>{try{return JSON.parse(localStorage.getItem(sn)||"[]")}catch{return[]}},Rt=b=>Dn().some(j=>j.name.toLowerCase()===(b||"").toLowerCase()),on=b=>{const j=Dn(),L=j.findIndex(K=>K.name.toLowerCase()===b.name.toLowerCase());L>=0?j.splice(L,1):j.unshift({name:b.name,protein:b.protein,carbs:b.carbs,fats:b.fats,calories:b.calories,serving:b.serving,per100g:b.per100g||null,servingUnit:b.servingUnit||"g",portion:b.portion||null}),localStorage.setItem(sn,JSON.stringify(j)),Nt(K=>K+1)},zn=b=>{const j=[...X.entries,{...b,meal:q,id:Date.now(),addedAt:new Date().toISOString()}],L={...X,entries:j};ce(L),tt(L),_e(null),qt(null),bt("100"),lt(0),Ht("weight"),ft({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),Pe("Food added!","success")},kn=b=>{const j=X.entries.filter(K=>K.id!==b),L={...X,entries:j};ce(L),tt(L)},ys=_.useRef(null),ns=async()=>{le(!0);const b=document.querySelector("#barcode-reader");if(!b){le(!1),Pe("Scanner container not found.","error");return}if(!ys.current)try{const L=await Sr(()=>import("./quagga.min-BbicSfvA.js").then(K=>K.q),[]);ys.current=L.default}catch(L){console.error("Failed to load barcode scanner:",L),le(!1),Pe("Could not load scanner.","error");return}const j=ys.current;j.init({inputStream:{type:"LiveStream",target:b,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},L=>{if(L){console.error("Quagga init error:",L),le(!1),Pe("Could not access camera. Check permissions.","error");return}j.start(),Ct.current=!0}),j.onDetected(L=>{const K=L.codeResult.decodedCodes?.filter(ve=>ve.error!==void 0)?.map(ve=>ve.error)||[];if((K.length>0?K.reduce((ve,we)=>ve+we,0)/K.length:1)<.15){const ve=L.codeResult.code;j.offDetected(),C(ve)}})},En=()=>{const b=ys.current;Ct.current&&b&&(b.stop(),b.offDetected(),Ct.current=!1),le(!1)},Yn=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,ss=b=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((b||"").replace(/\s/g,"")),vs=b=>{if(!b)return{value:100,unit:"g"};const j=b.toLowerCase().replace(/\s/g,""),L=j.match(/([\d.]+)/),K=L?parseFloat(L[1]):100;return ss(b)?/cl/.test(j)?{value:K*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(j)&&!/ml/.test(j)?{value:K*1e3,unit:"ml"}:{value:K,unit:"ml"}:{value:K,unit:"g"}},Hn=b=>{if(ss(b.serving_size)||ss(b.quantity))return"ml";const j=b.product_name||b.product_name_en||"";return Yn.test(j)?"ml":"g"},As=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],$=(b,j)=>{const L=b||"",K=L.match(/\((\d+\.?\d*)\s*g\)/i),Me=L.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(K&&Me){const st=parseFloat(K[1]);let et=Me[1].replace(/^\d+\s*/,"").trim();if(et&&st>0)return{label:et,weight:st}}const ve=L.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(ve){const st=parseFloat(ve[1]);let et=ve[2].replace(/^\d+\s*/,"").trim();if(et&&st>0)return{label:et,weight:st}}const we=j||"";for(const{pattern:st,label:et,weight:F}of As)if(st.test(we))return{label:et,weight:F};return null},ge=b=>{const j=b.nutriments||{},L=Hn(b),K=vs(b.serving_size),Me=L==="ml"?K.unit==="ml"?K.value:100:K.value,ve=b.product_name||b.product_name_en||"Unknown Product",we=$(b.serving_size,ve);return{name:ve,brand:b.brands||"",image:b.image_small_url||b.image_url||null,servingSize:b.serving_size||"100g",servingValue:Me,servingUnit:L,portion:we,protein:Math.round(j.proteins_100g||j.proteins||0),carbs:Math.round(j.carbohydrates_100g||j.carbohydrates||0),fats:Math.round(j.fat_100g||j.fat||0),calories:Math.round(j["energy-kcal_100g"]||j["energy-kcal"]||(j.energy_100g?j.energy_100g/4.184:0)),per100g:!0}},ke=async b=>{Ae(!0);try{const j=`https://world.openfoodfacts.org/api/v2/product/${b}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,L=await fetch(j);if(!L.ok)throw new Error(`HTTP ${L.status}`);const K=await L.json();if(K.status==="success"||K.status===1||K.product){const Me=ge(K.product);Me.calories===0&&Me.protein===0&&Me.carbs===0?Pe("Product found but no nutrition data available.","error"):(qt(Me),Me.portion?(lt(1),bt(String(Me.portion.weight)),Ht("portion")):(lt(0),bt(String(Me.servingValue||100)),Ht("weight")),oe(""))}else Pe("Product not found. Try search or manual entry.","error")}catch(j){console.error("Barcode lookup error:",j),Pe("Failed to look up product. Check your connection.","error")}Ae(!1)},xe=(b,j,L)=>{const K=b.toLowerCase().trim(),Me=j.toLowerCase().trim(),ve=L.toLowerCase().trim();let we=0;return(K===ve||K===ve+"s"||K+"s"===ve)&&(we+=100),(K.endsWith(" "+ve)||K.endsWith(" "+ve+"s"))&&(we+=40),(K.startsWith(ve+" ")||K.startsWith(ve+"s "))&&(we+=15),ve.split(/\s+/).some(et=>Me===et||Me.startsWith(et))&&(we+=30),we+=Math.max(0,30-K.length),we},fe=async()=>{if(!Le.trim())return;hn.current&&hn.current.abort();const b=new AbortController;hn.current=b;const j=Le.trim().toLowerCase(),L=j.split(/\s+/).filter(Boolean);if(Ap.has(j)){ae(Ap.get(j));return}wt(!0);try{const Me=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Le.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,ve=await fetch(Me,{signal:b.signal});if(!ve.ok)throw new Error(`HTTP ${ve.status}`);const st=((await ve.json()).products||[]).map(et=>ge(et)).filter(et=>et.name!=="Unknown Product"&&(et.calories>0||et.protein>0)).filter(et=>{const F=(et.name+" "+et.brand).toLowerCase();return L.every(J=>F.includes(J))}).sort((et,F)=>xe(F.name,F.brand,j)-xe(et.name,et.brand,j)).slice(0,10);Ap.set(j,st),ae(st),st.length===0&&Pe("No results found. Try a different search.","info")}catch(K){if(K.name==="AbortError")return;console.error("Search error:",K),Pe("Search failed. Check your connection.","error")}wt(!1)};_.useEffect(()=>{if(ye.current&&clearTimeout(ye.current),!(!Le.trim()||Y!=="search"||re))return ye.current=setTimeout(()=>{fe()},700),()=>clearTimeout(ye.current)},[Le]);const rt=()=>{const b={...X,water:X.water+1};ce(b),tt(b)},mt=()=>{if(X.water<=0)return;const b={...X,water:X.water-1};ce(b),tt(b)},it={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},xt=80,pt=2*Math.PI*xt,Zt=(b,j,L,K,Me)=>{const ve=K>0?Math.min(100,Math.round(L/K*100)):0,we=pt-ve/100*pt,st=it[Me]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:xt}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:xt,style:{stroke:st},strokeDasharray:pt,strokeDashoffset:we})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:st},children:Math.round(L)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",K,b==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:st},children:j})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:st},children:[ve,"%"]})]})};if(_.useEffect(()=>{if(!Ve)return;const b=setTimeout(()=>{const j=Ve;En(),C(null),ke(j)},1500);return()=>clearTimeout(b)},[Ve]),_.useEffect(()=>()=>{const b=ys.current;if(Ct.current&&b){try{b.stop(),b.offDetected()}catch{}Ct.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:S.gender==="male"?"active":"",onClick:()=>{O(b=>({...b,gender:"male"})),U(null)},children:"Male"}),a.jsx("button",{className:S.gender==="female"?"active":"",onClick:()=>{O(b=>({...b,gender:"female"})),U(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:S.age,onChange:b=>{O(j=>({...j,age:b.target.value})),U(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:S.weight,onChange:b=>{O(j=>({...j,weight:b.target.value})),U(null)},placeholder:S.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:S.weightUnit==="kg"?"active":"",onClick:()=>{O(b=>({...b,weightUnit:"kg"})),U(null)},children:"kg"}),a.jsx("button",{className:S.weightUnit==="lbs"?"active":"",onClick:()=>{O(b=>({...b,weightUnit:"lbs"})),U(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[S.heightUnit==="cm"?a.jsx("input",{type:"number",value:S.height,onChange:b=>{O(j=>({...j,height:b.target.value})),U(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:S.heightFeet,onChange:b=>{O(j=>({...j,heightFeet:b.target.value})),U(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:S.heightInches,onChange:b=>{O(j=>({...j,heightInches:b.target.value})),U(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:S.heightUnit==="cm"?"active":"",onClick:()=>{O(b=>({...b,heightUnit:"cm"})),U(null)},children:"cm"}),a.jsx("button",{className:S.heightUnit==="ft"?"active":"",onClick:()=>{O(b=>({...b,heightUnit:"ft"})),U(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:S.dailyActivity,onChange:b=>{O(j=>({...j,dailyActivity:b.target.value})),U(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:S.trainingFrequency,onChange:b=>{O(j=>({...j,trainingFrequency:b.target.value})),U(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:S.goal==="lose"?"active":"",onClick:()=>{O(b=>({...b,goal:"lose"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:S.goal==="maintain"?"active":"",onClick:()=>{O(b=>({...b,goal:"maintain"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:S.goal==="build"?"active":"",onClick:()=>{O(b=>({...b,goal:"build"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),S.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:S.deficitLevel==="light"?"active":"",onClick:()=>{O(b=>({...b,deficitLevel:"light"})),U(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:S.deficitLevel==="moderate"?"active":"",onClick:()=>{O(b=>({...b,deficitLevel:"moderate"})),U(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:S.deficitLevel==="harsh"?"active":"",onClick:()=>{O(b=>({...b,deficitLevel:"harsh"})),U(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:St,disabled:!Bt(),children:"Calculate Macros"})]}),G&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[Zt("Protein","Protein",G.protein,G.protein,"ring-protein"),Zt("Carbs","Carbs",G.carbs,G.carbs,"ring-carbs"),Zt("Fats","Fats",G.fats,G.fats,"ring-fats"),Zt("Calories","Calories",G.calories,G.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[G.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[G.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",G.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[G.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:Jt,children:"Set as My Daily Targets"})]})]}),Lt&&a.jsx("div",{className:`toast-notification ${Lt.type}`,children:Lt.message})]});const Is=b=>{const j=new Date(b+"T12:00:00"),L=j.getDay(),K=new Date(j);K.setDate(j.getDate()-(L+6)%7);const Me=[];for(let ve=0;ve<7;ve++){const we=new Date(K);we.setDate(K.getDate()+ve),Me.push(we.toISOString().split("T")[0])}return Me},rs=["M","T","W","T","F","S","S"],bs=(b,j="search")=>{M(b),j==="scan"?(_e("scan"),qt(null)):j==="manual"?(_e("manual"),ft({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):j==="favourites"?_e("favourites"):(_e("search"),ae([]),Qe(""))},Tn=Is(V),H=new Date(V+"T12:00:00"),ue=`${Ke[H.getMonth()]} ${H.getFullYear()}`;return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),U(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const b=new Date(V+"T12:00:00");b.setDate(b.getDate()-7);const j=b.toISOString().split("T")[0];Z(j)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{I(!Oe),D({year:H.getFullYear(),month:H.getMonth()})},children:ue}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const b=new Date(V+"T12:00:00");b.setDate(b.getDate()+7);const j=b.toISOString().split("T")[0];j<=Ti()&&Z(j)},"aria-label":"Next week",disabled:Tn[6]>=Ti(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:Tn.map((b,j)=>{const L=new Date(b+"T12:00:00").getDate(),K=b===V,Me=b>Ti(),ve=b===Ti();return a.jsxs("button",{className:`nut-week-day${K?" selected":""}${ve?" today":""}${Me?" future":""}`,disabled:Me,onClick:()=>Z(b),children:[a.jsx("span",{className:"nut-week-day-letter",children:rs[j]}),a.jsx("span",{className:"nut-week-day-num",children:L})]},b)})})]}),Oe&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>D(b=>{let j=b.month-1,L=b.year;return j<0&&(j=11,L--),{year:L,month:j}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[Ke[P.month]," ",P.year]}),a.jsx("button",{onClick:()=>D(b=>{let j=b.month+1,L=b.year;return j>11&&(j=0,L++),{year:L,month:j}}),disabled:P.year===new Date().getFullYear()&&P.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:He.map(b=>a.jsx("span",{children:b},b))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(nt(P.year,P.month))].map((b,j)=>a.jsx("span",{},`e${j}`)),[...Array(Ue(P.year,P.month))].map((b,j)=>{const L=j+1,K=`${P.year}-${String(P.month+1).padStart(2,"0")}-${String(L).padStart(2,"0")}`,Me=K>Ti(),ve=K===V,we=K===Ti();return a.jsx("button",{className:`nut-cal-day${ve?" selected":""}${we?" today":""}${Me?" future":""}`,disabled:Me,onClick:()=>{Z(K),I(!1)},children:L},L)})]})]}),a.jsxs("div",{className:"nut-rings-row",children:[Zt("Protein","Protein",Se.protein,w.protein,"ring-protein"),Zt("Carbs","Carbs",Se.carbs,w.carbs,"ring-carbs"),Zt("Fats","Fats",Se.fats,w.fats,"ring-fats"),Zt("Calories","kCal",Se.calories,w.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone",children:a.jsxs("div",{className:"nut-light-content",children:[Je&&a.jsxs("button",{className:"nut-water-quick",onClick:()=>A(!0),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsxs("span",{className:"nut-water-quick-count",children:[X.water," / ",w?.waterGoal||8]}),a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:s2.map(b=>{const j=X.entries.filter(K=>(K.meal||"snacks")===b.key),L=j.reduce((K,Me)=>({protein:K.protein+(Me.protein||0),carbs:K.carbs+(Me.carbs||0),fats:K.fats+(Me.fats||0),calories:K.calories+(Me.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${b.key}`,children:O3[b.key]}),a.jsx("span",{className:"nut-meal-card-title",children:b.label}),j.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[L.calories," cal"]}),Je&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>gt(ze===b.key?null:b.key),"aria-label":`Add to ${b.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),j.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,w.protein>0?L.protein/w.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[L.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,w.carbs>0?L.carbs/w.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[L.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,w.fats>0?L.fats/w.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[L.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,w.calories>0?L.calories/w.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:L.calories})]})]}),j.length>0&&a.jsx("div",{className:"nut-log-list",children:j.map(K=>a.jsxs("div",{className:"nut-log-item",children:[a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:K.name}),K.serving&&a.jsx("span",{className:"nut-log-item-serving",children:K.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[K.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[K.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[K.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:K.calories})]}),Je&&a.jsx("button",{className:"nut-log-delete",onClick:()=>kn(K.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},K.id))}),j.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:Je?"Tap + to add food":"No entries"})})]},b.key)})})})]})}),ze&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>gt(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",s2.find(b=>b.key===ze)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const b=ze;gt(null),bs(b,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const b=ze;gt(null),bs(b,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const b=ze;gt(null),bs(b,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const b=ze;gt(null),bs(b,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),E&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>A(!1),children:a.jsxs("div",{className:"nut-water-popup",onClick:b=>b.stopPropagation(),children:[a.jsxs("div",{className:"nut-water-popup-header",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsx("span",{children:"Water Intake"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>A(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsxs("div",{className:"nut-water-popup-body",children:[a.jsx("div",{className:"nut-water-glasses",children:[...Array(w?.waterGoal||8)].map((b,j)=>a.jsx("div",{className:`nut-water-glass ${j<X.water?"filled":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:j<X.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},j))}),a.jsxs("div",{className:"nut-water-popup-count",children:[X.water," / ",w?.waterGoal||8," glasses"]}),a.jsxs("div",{className:"nut-water-btns",children:[a.jsx("button",{onClick:mt,disabled:X.water<=0,children:"-"}),a.jsx("button",{onClick:rt,children:"+"})]})]})]})}),Y&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{En(),C(null),_e(null),qt(null)},children:a.jsxs("div",{className:"nut-modal",onClick:b=>b.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:Y==="scan"?"Scan Barcode":Y==="search"?"Search Food":Y==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{En(),C(null),_e(null),qt(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Y==="scan"&&!re&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),De&&!Ve&&a.jsx("div",{className:"nut-scan-line"}),Ve&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:Ve})]})]}),!De&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:ns,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),De&&!Ve&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:B,onChange:b=>oe(b.target.value),onKeyDown:b=>b.key==="Enter"&&B.trim()&&ke(B.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>B.trim()&&ke(B.trim()),disabled:!B.trim()||pe,children:pe?"...":"Look Up"})]})]}),Y==="scan"&&re&&(()=>{const b=re.servingUnit||"g",j=re.portion,L=Xe==="portion"&&j?Et*j.weight:parseFloat(kt)||0,K=L/100,Me=b==="ml"?[100,200,250,500]:[50,100,150,200],ve=Xe==="portion"&&j?`${Et} ${j.label}${Et!==1?"s":""} (${Math.round(L)}${b})`:`${Math.round(L)}${b}`;return a.jsxs("div",{className:"nut-product-result",children:[re.image&&a.jsx("img",{src:re.image,alt:re.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:re.name}),a.jsx("button",{className:`nut-fav-star confirm${Rt(re.name)?" active":""}`,onClick:()=>on({name:re.name,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,serving:re.servingSize,per100g:{protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories},servingUnit:re.servingUnit||"g",portion:re.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Rt(re.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),re.brand&&a.jsx("p",{className:"nut-product-brand",children:re.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",b,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[re.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[re.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[re.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[re.calories," cal"]})]}),j&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Xe==="portion"?"active":"",onClick:()=>{Ht("portion"),Et<1&&lt(1)},children:"Portions"}),a.jsxs("button",{className:Xe==="weight"?"active":"",onClick:()=>{Ht("weight"),bt(String(Math.round(L)||100))},children:["Custom (",b,")"]})]}),Xe==="portion"&&j?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Math.max(1,Et-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Et}),a.jsxs("span",{className:"nut-stepper-label",children:[j.label,Et!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(L),b]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Et+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",b,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:kt,onChange:we=>bt(we.target.value),onFocus:we=>we.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Me.map(we=>a.jsxs("button",{className:`nut-quick-btn${kt===String(we)?" active":""}`,onClick:()=>bt(String(we)),children:[we,b]},we))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(re.protein*K),"p / ",Math.round(re.carbs*K),"c / ",Math.round(re.fats*K),"f / ",Math.round(re.calories*K)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{qt(null),_e("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>zn({name:re.name,protein:Math.round(re.protein*K),carbs:Math.round(re.carbs*K),fats:Math.round(re.fats*K),calories:Math.round(re.calories*K),serving:ve}),children:"Add"})]})]})})(),Y==="search"&&!re&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:Ne,value:Le,onChange:b=>Qe(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(clearTimeout(ye.current),fe())},onFocus:()=>setTimeout(()=>Ne.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:fe,disabled:We,children:We?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[Fe.map((b,j)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{qt(b),b.portion?(lt(1),bt(String(b.portion.weight)),Ht("portion")):(lt(0),bt(String(b.servingValue||100)),Ht("weight"))},children:[b.image&&a.jsx("img",{src:b.image,alt:b.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:b.name}),b.brand&&a.jsx("span",{className:"nut-search-item-brand",children:b.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[b.calories," cal  ",b.protein,"p  ",b.carbs,"c  ",b.fats,"f per 100",b.servingUnit||"g"]})]})]},j)),Fe.length===0&&Le&&!We&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),Y==="search"&&re&&(()=>{const b=re.servingUnit||"g",j=re.portion,L=Xe==="portion"&&j?Et*j.weight:parseFloat(kt)||0,K=L/100,Me=b==="ml"?[100,200,250,500]:[50,100,150,200],ve=Xe==="portion"&&j?`${Et} ${j.label}${Et!==1?"s":""} (${Math.round(L)}${b})`:`${Math.round(L)}${b}`;return a.jsxs("div",{className:"nut-product-result",children:[re.image&&a.jsx("img",{src:re.image,alt:re.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:re.name}),a.jsx("button",{className:`nut-fav-star confirm${Rt(re.name)?" active":""}`,onClick:()=>on({name:re.name,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,serving:re.servingSize,per100g:{protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories},servingUnit:re.servingUnit||"g",portion:re.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Rt(re.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),re.brand&&a.jsx("p",{className:"nut-product-brand",children:re.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",b,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[re.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[re.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[re.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[re.calories," cal"]})]}),j&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Xe==="portion"?"active":"",onClick:()=>{Ht("portion"),Et<1&&lt(1)},children:"Portions"}),a.jsxs("button",{className:Xe==="weight"?"active":"",onClick:()=>{Ht("weight"),bt(String(Math.round(L)||100))},children:["Custom (",b,")"]})]}),Xe==="portion"&&j?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Math.max(1,Et-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Et}),a.jsxs("span",{className:"nut-stepper-label",children:[j.label,Et!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(L),b]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Et+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",b,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:kt,onChange:we=>bt(we.target.value),onFocus:we=>we.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Me.map(we=>a.jsxs("button",{className:`nut-quick-btn${kt===String(we)?" active":""}`,onClick:()=>bt(String(we)),children:[we,b]},we))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(re.protein*K),"p / ",Math.round(re.carbs*K),"c / ",Math.round(re.fats*K),"f / ",Math.round(re.calories*K)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>qt(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>zn({name:re.name,protein:Math.round(re.protein*K),carbs:Math.round(re.carbs*K),fats:Math.round(re.fats*K),calories:Math.round(re.calories*K),serving:ve}),children:"Add"})]})]})})(),Y==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:ut.name,onChange:b=>ft(j=>({...j,name:b.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:ut.serving,onChange:b=>ft(j=>({...j,serving:b.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:ut.protein,onChange:b=>ft(j=>({...j,protein:b.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:ut.carbs,onChange:b=>ft(j=>({...j,carbs:b.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:ut.fats,onChange:b=>ft(j=>({...j,fats:b.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:ut.calories,onChange:b=>ft(j=>({...j,calories:b.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!ut.name.trim(),onClick:()=>zn({name:ut.name,protein:parseFloat(ut.protein)||0,carbs:parseFloat(ut.carbs)||0,fats:parseFloat(ut.fats)||0,calories:parseFloat(ut.calories)||0,serving:ut.serving||""}),children:"Add Food"})]}),Y==="favourites"&&!re&&(()=>{const b=Dn(),j=L=>{if(L.per100g){const K=L.per100g;qt({name:L.name,brand:"",image:null,servingSize:L.serving||"100g",servingValue:100,servingUnit:L.servingUnit||"g",portion:L.portion||null,protein:K.protein,carbs:K.carbs,fats:K.fats,calories:K.calories,per100g:!0}),L.portion?(lt(1),bt(String(L.portion.weight)),Ht("portion")):(lt(0),bt("100"),Ht("weight"))}else zn({name:L.name,protein:L.protein,carbs:L.carbs,fats:L.fats,calories:L.calories,serving:L.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:b.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:b.map((L,K)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:Me=>{Me.stopPropagation(),on(L)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>j(L),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:L.name}),a.jsx("span",{className:"nut-recent-item-serving",children:L.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[L.calories," cal"]})]})]},K))})})})(),Y==="favourites"&&re&&(()=>{const b=re.servingUnit||"g",j=re.portion,L=Xe==="portion"&&j?Et*j.weight:parseFloat(kt)||0,K=L/100,Me=b==="ml"?[100,200,250,500]:[50,100,150,200],ve=Xe==="portion"&&j?`${Et} ${j.label}${Et!==1?"s":""} (${Math.round(L)}${b})`:`${Math.round(L)}${b}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:re.name}),a.jsx("button",{className:`nut-fav-star confirm${Rt(re.name)?" active":""}`,onClick:()=>on({name:re.name,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,serving:re.servingSize,per100g:{protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories},servingUnit:re.servingUnit||"g",portion:re.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Rt(re.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",b,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[re.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[re.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[re.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[re.calories," cal"]})]}),j&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Xe==="portion"?"active":"",onClick:()=>{Ht("portion"),Et<1&&lt(1)},children:"Portions"}),a.jsxs("button",{className:Xe==="weight"?"active":"",onClick:()=>{Ht("weight"),bt(String(Math.round(L)||100))},children:["Custom (",b,")"]})]}),Xe==="portion"&&j?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Math.max(1,Et-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Et}),a.jsxs("span",{className:"nut-stepper-label",children:[j.label,Et!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(L),b]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Et+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",b,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:kt,onChange:we=>bt(we.target.value),onFocus:we=>we.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Me.map(we=>a.jsxs("button",{className:`nut-quick-btn${kt===String(we)?" active":""}`,onClick:()=>bt(String(we)),children:[we,b]},we))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(re.protein*K),"p / ",Math.round(re.carbs*K),"c / ",Math.round(re.fats*K),"f / ",Math.round(re.calories*K)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>qt(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>zn({name:re.name,protein:Math.round(re.protein*K),carbs:Math.round(re.carbs*K),fats:Math.round(re.fats*K),calories:Math.round(re.calories*K),serving:ve}),children:"Add"})]})]})})()]})}),a.jsx(Hr,{active:"nutrition"}),Lt&&a.jsx("div",{className:`toast-notification ${Lt.type}`,children:Lt.message})]})}const r2="/login/assets/randomiser-glq9YJkL.jpg",U3="/login/assets/programme-card-workout-CnNzTYkz.webp",z3="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",F3="/login/assets/mg-arms-BeOQU3wx.jpg",a2=60,Ip=5,q3=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],H3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},$3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},W3={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},Mp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Dp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:z3},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],$c=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:F3},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],i2={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},o2=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Pp=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],bl=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],G3=[5,10,15,20,30];function K3(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function Y3(s){const e=[...s];for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[e[n],e[i]]=[e[i],e[n]]}return e}function Q3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=hr(),{isDark:l,toggleTheme:u,accent:h}=Gr(),p=Rs(),[g,y]=_.useState("menu"),[w,T]=_.useState(["bodyweight"]),[S,O]=_.useState("core"),[G,U]=_.useState("intermediate"),[V,Z]=_.useState(15),[X,ce]=_.useState([]),[Se,Be]=_.useState(!1),Oe=_.useRef(!1),I=_.useRef([]),[E,A]=_.useState([]),[P,D]=_.useState(2),[q,M]=_.useState(bl[1]),[ze,gt]=_.useState(1),[Y,_e]=_.useState(0),[De,le]=_.useState("work"),[Ve,C]=_.useState(0),[B,oe]=_.useState(!1),[pe,Ae]=_.useState(0),[Le,Qe]=_.useState(null),Fe=_.useRef(null);_.useRef(null),_.useRef(null);const[ae,We]=_.useState(null),wt=_.useCallback((F,J="info")=>{We({message:F,type:J}),setTimeout(()=>We(null),3e3)},[]),[ut,ft]=_.useState(null),[re,qt]=_.useState(null),[kt,bt]=_.useState(0),[Et,lt]=_.useState(0),[Xe,Ht]=_.useState([]),[ts,Nt]=_.useState(""),[Lt,Mn]=_.useState(""),[Ct,hn]=_.useState(!1),[ye,Ne]=_.useState(0),[Pe,tt]=_.useState(!1),[Je,Ue]=_.useState({}),nt=_.useRef(null),Ke=_.useRef(null),[He,St]=_.useState([]),[Jt,Bt]=_.useState(null),[sn,Dn]=_.useState(0),[Rt,on]=_.useState(0),[zn,kn]=_.useState(0),[ys,ns]=_.useState(0),[En,Yn]=_.useState(0),[ss,vs]=_.useState(0),[Hn,As]=_.useState({beginner:0,intermediate:0,advanced:0}),[$,ge]=_.useState(null),[ke,xe]=_.useState(""),[fe,rt]=_.useState(!1);_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const J=Ft(je,"workoutLogs"),te=yn(J,nn("clientId","==",n.id)),Ce=(await un(te)).docs.map(zt=>zt.data()),$e=Ce.filter(zt=>zt.type!=="programme");ns($e.length);const ot=$e.reduce((zt,Sn)=>zt+(Sn.duration||0),0);Yn(ot);const Ye={beginner:0,intermediate:0,advanced:0};$e.forEach(zt=>{zt.level&&Ye[zt.level]!==void 0&&Ye[zt.level]++}),As(Ye);const Ot=new Date,mn=Ot.getDay(),Ut=mn===0?-6:1-mn,dn=new Date(Ot);dn.setDate(Ot.getDate()+Ut),dn.setHours(0,0,0,0);const Zs=dn.getTime(),as=Ce.filter(zt=>{const Sn=zt.completedAt;return Sn?(Sn.toDate?Sn.toDate().getTime():new Date(Sn).getTime())>=Zs:!1});Dn(as.filter(zt=>zt.type!=="programme").length);let fs=0;if(n)try{const zt=await In(Ge(je,"clientProgrammes",n.id));if(zt.exists()){const Sn=zt.data(),Cn=Sn.templateId;fs=as.filter(Pn=>Pn.type==="programme"&&Pn.programmeId===Cn).length,ge(Cn);const er=Dp.find(Pn=>Pn.id===Cn);er&&xe(er.name);const Ms=$3[Cn];if(Ms){const Pn=Object.keys(Sn.completedSessions||{}).length,Fn=Ms.duration*Ms.daysPerWeek;kn(Fn>0?Math.round(Pn/Fn*100):0)}}else ge(null),xe(""),kn(0)}catch{}on(fs);const ms=$e.map(zt=>zt.completedAt).filter(Boolean).map(zt=>zt.toDate?zt.toDate().getTime():new Date(zt).getTime()).sort((zt,Sn)=>Sn-zt);if(ms.length===0)vs(0);else{const zt=new Set;ms.forEach(Fn=>{const Kr=new Date(Fn),Nr=Kr.getDay(),Ka=Nr===0?-6:1-Nr,Us=new Date(Kr);Us.setDate(Kr.getDate()+Ka),Us.setHours(0,0,0,0),zt.add(Us.getTime())});const Sn=[...zt].sort((Fn,Kr)=>Kr-Fn);let Cn=0;const er=new Date(Ot),Ms=Ot.getDay()===0?-6:1-Ot.getDay();er.setDate(Ot.getDate()+Ms),er.setHours(0,0,0,0);let Pn=er.getTime();Sn.includes(Pn)||(Pn-=10080*60*1e3);for(let Fn=0;Fn<200&&Sn.includes(Pn);Fn++)Cn++,Pn-=10080*60*1e3;vs(Cn)}}catch(J){console.error("Error loading workout stats:",J)}finally{rt(!0)}})()},[s,n,g]);const mt=()=>{const F=[];let J;S==="mix"?J=["core","upper","lower"]:S==="fullbody"?J=["upper","lower"]:J=[S];for(const te of w)for(const me of J)F.push(`exercises/${te}/${me}`);return F},it=async()=>{if(Oe.current){for(;Oe.current;)await new Promise(F=>setTimeout(F,200));return I.current}Oe.current=!0,Be(!0);try{const F=mt(),J=[];for(const $e of F)try{const ot=wo(_o,$e),Ye=await e2(ot);J.push(...Ye.items)}catch{console.warn(`Folder ${$e} not found, skipping.`)}if(J.length===0&&w.includes("bodyweight")&&S==="core")try{const $e=wo(_o,"core"),ot=await e2($e);J.push(...ot.items)}catch{console.warn("Legacy core/ folder not found either.")}if(J.length===0){const $e=w.map(Ye=>o2.find(Ot=>Ot.key===Ye)?.label).join(" + "),ot=Pp.find(Ye=>Ye.key===S)?.label;return wt(`No exercises found for ${$e} / ${ot}. Upload videos to Firebase Storage.`,"error"),Oe.current=!1,Be(!1),[]}const te=new Set,me=J.filter($e=>{const ot=$e.name.replace(/\.(mp4|gif)$/i,"");return te.has(ot)?!1:(te.add(ot),!0)}),Ce=await Promise.all(me.map(async $e=>{const ot=await Ml($e),Ye=K3($e.name.replace(/\.(mp4|gif)$/i,"")),Ot=/\.gif$/i.test($e.name);return{name:Ye,videoUrl:ot,isGif:Ot}}));return I.current=Ce,ce(Ce),Oe.current=!1,Be(!1),Ce}catch(F){console.error("Error loading exercises:",F);const J=F.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${F.message||F.code||"Unknown error"}`;return wt(J,"error"),Oe.current=!1,Be(!1),[]}},xt=async()=>{y("spinning"),I.current=[];const F=await it();if(F.length===0){y("setup");return}const J=bl.find(mn=>mn.key===G);M(J);const te=J.work+J.rest,me=V*60,Ce=Math.floor(me/te);let $e,ot;Ce<=6?($e=Math.max(3,Math.floor(Ce/2)),ot=Math.floor(Ce/$e)):Ce<=12?($e=Math.min(6,Math.floor(Ce/2)),ot=Math.floor(Ce/$e)):($e=Math.min(10,Math.floor(Ce/2)),ot=Math.floor(Ce/$e)),ot=Math.max(2,ot);const Ye=Y3(F),Ot=Ye.slice(0,Math.min($e,Ye.length));A(Ot),D(ot),setTimeout(()=>y("preview"),2e3)},pt=()=>{y("countdown"),Ae(3)};_.useEffect(()=>{if(g!=="countdown")return;if(pe<=0){y("workout"),gt(1),_e(0),le("work"),C(q.work),oe(!1),ve();return}Me();const F=setTimeout(()=>Ae(J=>J-1),1e3);return()=>clearTimeout(F)},[pe,g]),_.useEffect(()=>{if(g!=="workout"||B)return;if(Ve<=0){Zt();return}Ve<=3&&Me();const F=setTimeout(()=>C(J=>J-1),1e3);return()=>clearTimeout(F)},[Ve,g,B]);const Zt=()=>{if(De==="work")le("rest"),C(q.rest);else{const F=Y+1;if(F>=E.length){const J=ze+1;if(J>P){y("complete"),Is();return}gt(J),_e(0)}else _e(F);le("work"),C(q.work),ve()}},Is=async()=>{if(s)try{await Fi(Ft(je,"workoutLogs"),{clientId:n.id,level:G,duration:V,equipment:w,focus:S,exerciseCount:E.length,rounds:P,exercises:E.map(F=>F.name),completedAt:dt.now()}),Dn(F=>F+1),ns(F=>F+1),Yn(F=>F+V),As(F=>({...F,[G]:(F[G]||0)+1}))}catch(F){console.error("Error saving workout log:",F)}},rs=async(F,J,te)=>{if(!(!n||!J))try{const me=n.id,Ce=await In(Ge(je,"coreBuddyPBs",me)),ot=(Ce.exists()?Ce.data():null)?.exercises||{},Ye=ot[F];let Ot=!1;if(Ye?(J>(Ye.weight||0)||J===(Ye.weight||0)&&te>(Ye.reps||0))&&(Ot=!0):Ot=!0,Ot){const mn={...ot,[F]:{weight:J,reps:te,achievedAt:dt.now()}};await vn(Ge(je,"coreBuddyPBs",me),{clientId:n.id,exercises:mn,updatedAt:dt.now()}),wt(`New PB! ${J}kg  ${te} reps`,"success"),Me(),await bs(F,J)}}catch(me){console.error("Error checking PB:",me)}},bs=async(F,J)=>{if(n)try{const te=await In(Ge(je,"coreBuddyTargets",n.id));if(!te.exists())return;const Ce=(te.data().targets||{})[F];if(!Ce||J<Ce.targetWeight)return;const $e=await In(Ge(je,"coreBuddyAchievements",n.id)),ot=$e.exists()?$e.data():{clientId:n.id,badges:[],totalVolume:0};if(ot.badges.some(Ut=>Ut.type==="pb_target"&&Ut.exercise===F&&Ut.targetWeight===Ce.targetWeight))return;const Ot={type:"pb_target",exercise:F,group:H3[F]||"push",targetWeight:Ce.targetWeight,achievedAt:dt.now()},mn=[...ot.badges,Ot];await vn(Ge(je,"coreBuddyAchievements",n.id),{...ot,badges:mn,updatedAt:dt.now()}),St(Ut=>[...Ut,Ot])}catch(te){console.error("Error checking target badge:",te)}},Tn=async F=>{if(!(!n||F<=0))try{const J=await In(Ge(je,"coreBuddyAchievements",n.id)),te=J.exists()?J.data():{clientId:n.id,badges:[],totalVolume:0},me=te.totalVolume||0,Ce=me+F,$e=[];q3.forEach(Ye=>{Ce>=Ye.threshold&&me<Ye.threshold&&(te.badges.some(mn=>mn.type==="volume_milestone"&&mn.milestone===Ye.threshold)||$e.push({type:"volume_milestone",milestone:Ye.threshold,label:Ye.label,achievedAt:dt.now()}))});const ot=[...te.badges,...$e];await vn(Ge(je,"coreBuddyAchievements",n.id),{clientId:n.id,badges:ot,totalVolume:Math.round(Ce),updatedAt:dt.now()}),$e.length>0&&St(Ye=>[...Ye,...$e])}catch(J){console.error("Error updating volume:",J)}},H=async F=>{if(qt(F),F.interval){const me=[];for(const Ce of F.exercises){let $e=null,ot=!1;if(Ce.storagePath)try{const Ye=wo(_o,Ce.storagePath);$e=await Ml(Ye),ot=/\.gif$/i.test(Ce.storagePath)}catch{}me.push({name:Ce.name,videoUrl:$e,isGif:ot})}A(me),D(F.rounds),M({work:F.work,rest:F.rest}),y("preview");return}const J={};for(const me of F.exercises)if(me.storagePath)try{const Ce=wo(_o,me.storagePath);J[me.name]={url:await Ml(Ce),isGif:/\.gif$/i.test(me.storagePath)}}catch{}Ue(J);const te=F.exercises.map(me=>({name:me.name,type:me.type,targetSets:me.sets,targetReps:me.reps||0,targetTime:me.time||0,sets:[]}));Ht(te),bt(0),lt(0),Nt(""),Mn(""),tt(!1),hn(!1),Ne(0),St([]),Bt(null),y("muscle_workout")},ue=()=>{const F=nt.current;F&&(F.paused?(F.play(),tt(!0)):(F.pause(),tt(!1)))};_.useEffect(()=>{if(g!=="muscle_workout"||!Ct||ye<=0){g==="muscle_workout"&&Ct&&ye<=0&&(hn(!1),Me());return}return Ke.current=setTimeout(()=>Ne(F=>F-1),1e3),()=>clearTimeout(Ke.current)},[g,Ct,ye]);const b=async()=>{const F=Xe[kt];let J={};if(F.type==="weighted"){const Ce=parseFloat(ts)||0,$e=parseInt(Lt)||0;if($e===0){wt("Enter your reps","error");return}J={weight:Ce,reps:$e}}else if(F.type==="reps"){const Ce=parseInt(Lt)||0;if(Ce===0){wt("Enter your reps","error");return}J={reps:Ce}}else if(F.type==="timed"){const Ce=F.targetTime-ye;J={time:Math.max(Ce,1)}}const te=[...Xe];te[kt]={...F,sets:[...F.sets,J]},Ht(te),F.type==="weighted"&&J.weight>0&&await rs(F.name,J.weight,J.reps);const me=F.sets.length+1;if(me<F.targetSets)lt(me),Mn(""),hn(!1),Ne(0);else if(kt+1<Xe.length){const Ce=kt+1;bt(Ce),lt(0),Nt(""),Mn(""),tt(!1),hn(!1),Ne(0)}else await j(te),y("muscle_complete")},j=async F=>{if(!(!s||!n))try{const J=F.reduce((me,Ce)=>me+Ce.sets.reduce(($e,ot)=>$e+(ot.weight||0)*(ot.reps||0),0),0),te=F.reduce((me,Ce)=>me+Ce.sets.length,0);await Fi(Ft(je,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:ut,sessionId:re?.id,sessionName:re?.name,exerciseCount:F.length,totalSets:te,duration:Math.round(te*1.5),volume:Math.round(J),exercises:F.map(me=>({name:me.name,type:me.type,sets:me.sets})),completedAt:dt.now()}),J>0&&await Tn(J),He.length>0&&Bt({badges:[...He]})}catch(J){console.error("Error saving muscle group workout log:",J)}},L=_.useRef(null),K=()=>(L.current||(L.current=new(window.AudioContext||window.webkitAudioContext)),L.current),Me=()=>{try{const F=K(),J=F.createOscillator(),te=F.createGain();J.connect(te),te.connect(F.destination),J.frequency.value=880,te.gain.value=.3,J.start(F.currentTime),J.stop(F.currentTime+.15)}catch{}},ve=()=>{try{const F=K(),J=F.createOscillator(),te=F.createGain();J.connect(te),te.connect(F.destination),J.frequency.value=1200,te.gain.value=.4,J.start(F.currentTime),J.stop(F.currentTime+.3)}catch{}};_.useEffect(()=>{if(g!=="workout"||De!=="work"||!E[Y]?.isGif)return;const J=setInterval(()=>{const te=Fe.current;if(!te)return;const me=te.getAttribute("src");te.removeAttribute("src"),setTimeout(()=>{Fe.current&&Fe.current.setAttribute("src",me)},0)},4e3);return()=>clearInterval(J)},[g,De,Y,ze,E]);const we=(F,J,te)=>{const me=Math.round(F/J*a2);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:R3.map((Ce,$e)=>a.jsx("line",{x1:Ce.x1,y1:Ce.y1,x2:Ce.x2,y2:Ce.y2,className:$e<me?`wk-tick-filled ${te}`:"wk-tick-empty",strokeWidth:Ce.thick?"3":"2"},$e))})},st=()=>{const F=E.length*P;return((ze-1)*E.length+Y+(De==="rest"?.5:0))/F},et=ae&&a.jsx("div",{className:`toast-notification ${ae.type}`,children:ae.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:a.jsx("img",{src:r2,alt:"Randomise Workout",className:"wk-hero-bg"})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[Dp.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:Dp.map((F,J)=>F.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:F.id}}),style:{animationDelay:`${J*.06}s`},children:[a.jsx("img",{src:F.image,alt:F.name,className:"wk-prog-img"}),J===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},F.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:F.id}}),style:{animationDelay:`${J*.06}s`},children:[a.jsx("img",{src:U3,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:W3[F.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[F.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:F.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:F.name.toUpperCase()}),a.jsxs("p",{children:[F.daysPerWeek,"x per week  ",F.focus==="fullbody"?"Full Body":F.focus.charAt(0).toUpperCase()+F.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),J===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},F.id))})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[$c.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:$c.map((F,J)=>a.jsx("button",{className:`wk-muscle-hero-card${F.image?" wk-muscle-thumb":""}`,onClick:()=>{ft(F.key),y("muscle_sessions")},style:{animationDelay:`${J*.05}s`},children:F.image?a.jsx("img",{src:F.image,alt:F.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:r2,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:Mp[F.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:F.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:F.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[i2[F.key]?.length||0," sessions"]})]})]})]})},F.key))})]}),a.jsx(Hr,{active:"workouts"}),et]});if(g==="setup"){const F=Pp.find(te=>te.key===S)?.label||S,J=bl.find(te=>te.key===G)?.label||G;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsxs("div",{className:"wk-stats-strip",children:[a.jsxs("div",{className:"wk-stats-strip-ring",children:[a.jsx("svg",{viewBox:"0 0 200 200",children:ko.map((te,me)=>{const Ce=Math.round(Math.min(sn,Ip)/Ip*a2);return a.jsx("line",{x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,className:me<Ce?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:te.thick?"3":"2"},me)})}),a.jsxs("span",{className:"wk-stats-strip-ring-num",children:[sn,a.jsxs("small",{children:["/",Ip]})]})]}),a.jsxs("div",{className:"wk-stats-strip-items",children:[a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:ys}),a.jsx("span",{className:"wk-stats-strip-label",children:"Workouts"})]}),a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:En}),a.jsx("span",{className:"wk-stats-strip-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:ss}),a.jsx("span",{className:"wk-stats-strip-label",children:"Wk Streak"})]})]})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:Pp.map(te=>a.jsxs("button",{className:`wk-equip-btn${S===te.key?" active":""}${te.key==="mix"?" wk-mix-btn":""}`,onClick:()=>O(te.key),children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:te.icon})}),a.jsx("span",{children:te.label})]},te.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:bl.map(te=>a.jsxs("button",{className:`wk-level-card wk-level-${te.key}${G===te.key?" active":""}`,onClick:()=>U(te.key),children:[a.jsx("span",{className:"wk-level-name",children:te.label}),a.jsx("span",{className:"wk-level-desc",children:te.desc})]},te.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:G3.map(te=>a.jsxs("button",{className:`wk-time-btn${V===te?" active":""}`,onClick:()=>Z(te),children:[a.jsx("span",{className:"wk-time-num",children:te}),a.jsx("span",{className:"wk-time-unit",children:"min"})]},te))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:o2.map(te=>{const me=w.includes(te.key);return a.jsxs("button",{className:`wk-equip-btn${me?" active":""}`,onClick:()=>{T(Ce=>me&&Ce.length===1?Ce:me?Ce.filter($e=>$e!==te.key):[...Ce,te.key])},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:te.icon})}),a.jsx("span",{children:te.label})]},te.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[F,"  ",J,"  ",V," min"]})})]}),a.jsx("div",{className:"wk-go-sticky",children:a.jsx("button",{className:"wk-randomise-btn",onClick:xt,disabled:Se,children:Se?"Loading exercises...":"Randomise Workout"})}),et]})}if(g==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:ko.map((F,J)=>a.jsx("line",{x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,className:"wk-spin-tick",strokeWidth:F.thick?"3.5":"2",style:{animationDelay:`${J*.03}s`}},J))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),et]});if(g==="preview"){const F=re?.interval?{work:re.work,rest:re.rest}:bl.find(te=>te.key===G),J=E.length*P*(F.work+F.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y(re?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[re?.interval&&a.jsx("h2",{className:"mg-preview-title",children:re.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:E.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:P}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(J/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[F.work,"/",F.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:E.map((te,me)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${me*.06}s`},onClick:()=>Qe(te),children:[a.jsx("span",{className:"wk-preview-num",children:me+1}),a.jsx("div",{className:"wk-preview-thumb",children:te.isGif?a.jsx("img",{src:te.videoUrl,alt:te.name,loading:"lazy"}):a.jsx("video",{src:`${te.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:te.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},me))}),Le&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>Qe(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:te=>te.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>Qe(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Le.isGif?a.jsx("img",{src:Le.videoUrl,alt:Le.name}):a.jsx("video",{src:Le.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Le.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!re?.interval&&a.jsxs("button",{className:"wk-btn-secondary",onClick:()=>xt(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),a.jsx("button",{className:"wk-btn-primary",onClick:pt,children:"Start Workout"})]})]})]})}if(g==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:pe}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const F=E[Y],J=De==="work"?q.work:q.rest,te=De==="rest"?Y+1<E.length?E[Y+1]:ze<P?E[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"wk-video-container",children:De==="work"?F.isGif?a.jsx("img",{ref:Fe,className:"wk-video",src:F.videoUrl,alt:F.name},F.videoUrl):a.jsx("video",{className:"wk-video",src:F.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},F.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),te&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",te.name]})]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[Y+1," / ",E.length]}),a.jsx("h2",{className:"wk-exercise-name",children:F.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",ze," of ",P]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[we(Ve,J,De==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:Ve}),a.jsx("span",{className:`wk-timer-phase ${De}`,children:De==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>oe(!B),children:B?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{C(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${st()*100}%`}})})]})}if(g==="complete"){const F=bl.find(te=>te.key===G),J=E.length*P*(F.work+F.rest);return a.jsx("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:ko.map((te,me)=>a.jsx("line",{x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,className:"wk-tick-complete",strokeWidth:te.thick?"3.5":"2",style:{animationDelay:`${me*.02}s`}},me))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(J/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:E.length*P}),a.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:P}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{qt(null),ft(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const F=$c.find(te=>te.key===ut),J=i2[ut]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:Mp[ut]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:F?.icon})})}),a.jsxs("h2",{children:[F?.label," Workouts"]}),a.jsxs("p",{children:[J.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:J.map((te,me)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{qt(te),y("muscle_overview")},style:{animationDelay:`${me*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:te.name}),a.jsx("p",{children:te.desc}),a.jsx("div",{className:"mg-session-meta",children:te.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[te.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[te.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[te.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const Ce=te.exercises.map(Ye=>Ye.sets||0),$e=Math.min(...Ce),ot=Math.max(...Ce);return $e===ot?`${$e} sets each`:`${$e}-${ot} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},te.id))})]}),et]})}if(g==="muscle_overview"){const F=re;if(!F)return null;const J=$c.find(te=>te.key===ut);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:{background:Mp[ut]},children:a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:J?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:F.name}),F.level&&a.jsx("span",{className:"mg-overview-level",children:F.level})]}),a.jsx("p",{className:"mg-overview-desc",children:F.desc})]}),F.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:F.overview})]}),F.tips&&F.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:F.tips.map((te,me)=>a.jsx("li",{children:te},me))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",F.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:F.exercises.map((te,me)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:me+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:te.name}),F.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[F.work,"s work / ",F.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[te.sets," sets  ",te.reps?`${te.reps} reps`:`${te.time}s`,te.type==="weighted"&&"  weighted"]})]})]},me))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>H(F),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),et]})}if(g==="muscle_workout"){const F=re;if(!F)return null;const J=F.exercises[kt],te=Xe[kt];if(!J||!te)return null;const me=te.sets.length,Ce=F.exercises.length,$e=F.exercises.reduce((Ut,dn)=>Ut+(dn.sets||0),0),Ye=Xe.reduce((Ut,dn)=>Ut+dn.sets.length,0)/$e*100,Ot=Je[J.name];J.type==="timed"&&ye===0&&!Ct&&me===Et&&setTimeout(()=>Ne(J.time),0);const mn=me+1<J.sets?"Log Set":kt+1<Ce?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Ye}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",kt+1,"/",Ce]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[Ot?a.jsxs("div",{className:"mg-video-container",onClick:ue,children:[Ot.isGif?a.jsx("img",{className:"mg-video",src:Ot.url,alt:J.name}):a.jsx("video",{ref:nt,className:"mg-video",src:Ot.url,loop:!0,muted:!0,playsInline:!0},J.name),!Pe&&!Ot.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:J.name}),a.jsx("span",{className:`mg-ex-type-badge ${J.type}`,children:J.type==="weighted"?"Weight + Reps":J.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",me+1," of ",J.sets]}),J.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",J.reps," reps"]}),J.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",J.time,"s"]})]}),J.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:ts,onChange:Ut=>Nt(Ut.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Lt,onChange:Ut=>Mn(Ut.target.value),placeholder:"0"})]})]}),J.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Lt,onChange:Ut=>Mn(Ut.target.value),placeholder:"0"})]})}),J.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[ye,"s"]})}),Ct?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>hn(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{ye===0&&Ne(J.time),hn(!0)},children:ye<J.time&&ye>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:b,children:mn}),te.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:te.sets.map((Ut,dn)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",dn+1,": ",Ut.weight!=null?`${Ut.weight}kg  ${Ut.reps}`:Ut.reps!=null?`${Ut.reps} reps`:`${Ut.time}s`]})]},dn))})]})]}),et]})}if(g==="muscle_complete"){const F=Xe.reduce((me,Ce)=>me+Ce.sets.length,0),J=Xe.reduce((me,Ce)=>me+Ce.sets.reduce(($e,ot)=>$e+(ot.weight||0)*(ot.reps||0),0),0),te=$c.find(me=>me.key===ut)?.label||"";return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:ko.map((me,Ce)=>a.jsx("line",{x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,className:"wk-tick-complete",strokeWidth:me.thick?"3.5":"2",style:{animationDelay:`${Ce*.02}s`}},Ce))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsxs("h2",{className:"wk-complete-title",children:[te," Complete!"]}),a.jsx("p",{className:"mg-complete-session-name",children:re?.name}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Xe.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:F}),a.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),J>0&&a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.round(J).toLocaleString()}),a.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{qt(null),ft(null),Bt(null),y("menu")},children:"Done"})})]}),Jt&&a.jsx("div",{className:"mg-badge-celebration",onClick:()=>Bt(null),children:a.jsxs("div",{className:"mg-badge-celebration-card",children:[a.jsx("div",{className:"mg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:a.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),a.jsx("h3",{className:"mg-badge-celebration-title",children:Jt.badges.length===1?"Badge Earned!":`${Jt.badges.length} Badges Earned!`}),a.jsx("div",{className:"mg-badge-celebration-list",children:Jt.badges.map((me,Ce)=>a.jsx("div",{className:"mg-badge-celebration-item",children:me.type==="pb_target"?`${me.exercise}  ${me.targetWeight}kg`:me.label},Ce))}),a.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const X3=60,J3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},Z3=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],l2=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function sd(s,e,n){const i=s.baseReps?s.baseReps+(e-1)*(n.repProg||0):void 0,l=s.baseTime?s.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:s.sets,reps:i,time:l}}const eD={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function tD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=hr(),{isDark:l,toggleTheme:u,accent:h}=Gr(),p=Rs(),g=Wr(),[y,w]=_.useState("loading"),[T,S]=_.useState(null),O=_.useRef(!1),[G,U]=_.useState(null),[V,Z]=_.useState(1),[X,ce]=_.useState(0),[Se,Be]=_.useState(0),[Oe,I]=_.useState(0),[E,A]=_.useState([]),[P,D]=_.useState(""),[q,M]=_.useState(""),[ze,gt]=_.useState(!1),[Y,_e]=_.useState(0),De=_.useRef(null),[le,Ve]=_.useState({}),[C,B]=_.useState(!1),oe=_.useRef(null),[pe,Ae]=_.useState(null),[Le,Qe]=_.useState([]);_.useEffect(()=>{window.scrollTo(0,0)},[y]);const[Fe,ae]=_.useState(null),We=_.useCallback((ye,Ne="info")=>{ae({message:ye,type:Ne}),setTimeout(()=>ae(null),4e3)},[]),wt=_.useRef(null),ut=()=>(wt.current||(wt.current=new(window.AudioContext||window.webkitAudioContext)),wt.current),ft=()=>{try{const ye=ut(),Ne=ye.createOscillator(),Pe=ye.createGain();Ne.connect(Pe),Pe.connect(ye.destination),Ne.frequency.value=1200,Pe.gain.value=.4,Ne.start(ye.currentTime),Ne.stop(ye.currentTime+.3)}catch{}};_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const Ne=Ge(je,"clientProgrammes",n.id),Pe=await In(Ne);Pe.exists()?(U(Pe.data()),w("dashboard")):g.state?.templateId?w("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(Ne){console.error("Error loading programme:",Ne),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),_.useEffect(()=>{if(O.current||y==="loading")return;const ye=g.state?.templateId;if(!ye)return;const Ne=l2.find(Pe=>Pe.id===ye);Ne&&(O.current=!0,S(Ne),w("overview"))},[y,g.state]),_.useEffect(()=>{if(!ze||Y<=0){ze&&Y<=0&&(gt(!1),ft());return}return De.current=setTimeout(()=>_e(ye=>ye-1),1e3),()=>clearTimeout(De.current)},[ze,Y]);const re=async ye=>{if(n)try{await vn(Ge(je,"clientProgrammes",n.id),ye),U(ye)}catch(Ne){console.error("Error saving programme:",Ne),We("Failed to save. Check Firestore rules for clientProgrammes.","error")}},qt=async ye=>{const Ne={templateId:ye.id,startDate:dt.now(),completedSessions:{}};await re(Ne),w("dashboard")},kt=async()=>{if(n)try{await Vs(Ge(je,"clientProgrammes",n.id)),U(null),w("browse")}catch(ye){console.error("Error quitting programme:",ye)}},bt=()=>G?l2.find(ye=>ye.id===G.templateId):null,Et=()=>{if(!G)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const ye=G.completedSessions||{},Ne=Object.keys(ye).length,Pe=bt();if(!Pe)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const tt=Pe.duration*Pe.daysPerWeek,Je=Math.min(Math.floor(Ne/Pe.daysPerWeek)+1,Pe.duration),Ue=Ne-(Je-1)*Pe.daysPerWeek;for(let nt=1;nt<=Pe.duration;nt++)for(let Ke=0;Ke<Pe.daysPerWeek;Ke++){const He=`w${nt}d${Ke}`;if(!ye[He])return{currentWeek:nt,completedThisWeek:Ue,nextDay:Ke,nextWeek:nt,totalCompleted:Ne,totalSessions:tt}}return{currentWeek:Pe.duration,completedThisWeek:Pe.daysPerWeek,nextDay:-1,totalCompleted:Ne,totalSessions:tt,complete:!0}},lt=(ye,Ne,Pe)=>{if(!G||ye<=1)return null;const tt=`w${ye-1}d${Ne}`,Je=G.completedSessions?.[tt];if(!Je)return null;const Ue=Je.exercises?.find(nt=>nt.name===Pe);return Ue?.sets?.length?Ue.sets[Ue.sets.length-1]:null},Xe=(ye,Ne)=>{const Pe=bt();if(!Pe)return;Z(ye),ce(Ne),Be(0),I(0),A([]),M(""),gt(!1),_e(0),B(!1),Ve({});const tt=Pe.days[Ne],Je=tt.exercises.map(He=>{const St=sd(He,ye,Pe);return{name:He.name,type:He.type,pbKey:He.pbKey,targetSets:St.sets,targetReps:St.reps,targetTime:St.time,sets:[]}});A(Je);const Ue=tt.exercises[0],nt=lt(ye,Ne,Ue.name);nt?.weight&&Ue.type==="weighted"?D(String(nt.weight)):D(""),(async()=>{const He={};for(const St of tt.exercises)if(St.storagePath)try{const Jt=wo(_o,St.storagePath),Bt=await Ml(Jt);He[St.name]={url:Bt,isGif:/\.gif$/i.test(St.storagePath)}}catch(Jt){console.warn(`Video not found for ${St.name}:`,Jt)}Ve(He)})(),w("session")},Ht=async()=>{bt();const ye=E[Se];if(!ye)return;let Ne={};if(ye.type==="weighted"){const Je=parseFloat(P)||0,Ue=parseInt(q)||0;if(Ue===0){We("Enter your reps","error");return}Ne={weight:Je,reps:Ue}}else if(ye.type==="reps"){const Je=parseInt(q)||0;if(Je===0){We("Enter your reps","error");return}Ne={reps:Je}}else if(ye.type==="timed"){const Je=ye.targetTime-Y;Ne={time:Math.max(Je,1)}}const Pe=[...E];Pe[Se]={...ye,sets:[...ye.sets,Ne]},A(Pe),ye.type==="weighted"&&Ne.weight>0&&await Lt(ye.name,Ne.weight,Ne.reps);const tt=ye.sets.length+1;if(tt<ye.targetSets)I(tt),D(Ne.weight?String(Ne.weight):""),M(""),gt(!1),_e(0);else if(Se+1<E.length){const Je=Se+1;Be(Je),I(0),B(!1);const nt=bt()?.days[X]?.exercises[Je],Ke=lt(V,X,nt?.name);Ke?.weight&&nt?.type==="weighted"?D(String(Ke.weight)):D(""),M(""),gt(!1),_e(0)}else await ts(Pe)},ts=async ye=>{if(!G||!n)return;const Ne=`w${V}d${X}`,Pe={...G.completedSessions,[Ne]:{completedAt:new Date().toISOString(),exercises:ye.map(Ue=>({name:Ue.name,type:Ue.type,sets:Ue.sets}))}},tt={...G,completedSessions:Pe};await re(tt);const Je=ye.reduce((Ue,nt)=>Ue+nt.sets.reduce((Ke,He)=>Ke+(He.weight||0)*(He.reps||0),0),0);Je>0&&await Nt(Je);try{const Ue=bt();await Fi(Ft(je,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:Ue?.id,programmeName:Ue?.name,week:V,day:X+1,exerciseCount:ye.length,duration:Math.round(ye.reduce((nt,Ke)=>nt+Ke.sets.length*1.5,0)),volume:Math.round(Je),completedAt:dt.now()})}catch(Ue){console.error("Error saving workout log:",Ue)}Le.length>0&&(Ae({badges:[...Le]}),Qe([])),w("sessionComplete")},Nt=async ye=>{if(n)try{const Ne=await In(Ge(je,"coreBuddyAchievements",n.id)),Pe=Ne.exists()?Ne.data():{clientId:n.id,badges:[],totalVolume:0},tt=Pe.totalVolume||0,Je=tt+ye,Ue=[];Z3.forEach(Ke=>{Je>=Ke.threshold&&tt<Ke.threshold&&(Pe.badges.some(St=>St.type==="volume_milestone"&&St.milestone===Ke.threshold)||Ue.push({type:"volume_milestone",milestone:Ke.threshold,label:Ke.label,achievedAt:dt.now()}))});const nt=[...Pe.badges,...Ue];await vn(Ge(je,"coreBuddyAchievements",n.id),{clientId:n.id,badges:nt,totalVolume:Math.round(Je),updatedAt:dt.now()}),Ue.length>0&&Qe(Ke=>[...Ke,...Ue])}catch(Ne){console.error("Error updating volume:",Ne)}},Lt=async(ye,Ne,Pe)=>{if(n)try{const tt=n.id,Je=await In(Ge(je,"coreBuddyPBs",tt)),nt=(Je.exists()?Je.data():null)?.exercises||{},Ke=nt[ye];let He=!1;if(Ke?(Ne>(Ke.weight||0)||Ne===(Ke.weight||0)&&Pe>(Ke.reps||0))&&(He=!0):He=!0,He){const St={...nt,[ye]:{weight:Ne,reps:Pe,achievedAt:dt.now()}};await vn(Ge(je,"coreBuddyPBs",tt),{clientId:n.id,exercises:St,updatedAt:dt.now()}),We(`New PB! ${Ne}kg  ${Pe} reps`,"success"),ft(),await Mn(ye,Ne)}}catch(tt){console.error("Error checking PB:",tt)}},Mn=async(ye,Ne)=>{if(n)try{const Pe=await In(Ge(je,"coreBuddyTargets",n.id));if(!Pe.exists())return;const Je=(Pe.data().targets||{})[ye];if(!Je||Ne<Je.targetWeight)return;const Ue=await In(Ge(je,"coreBuddyAchievements",n.id)),nt=Ue.exists()?Ue.data():{clientId:n.id,badges:[],totalVolume:0};if(nt.badges.some(Jt=>Jt.type==="pb_target"&&Jt.exercise===ye&&Jt.targetWeight===Je.targetWeight))return;const He={type:"pb_target",exercise:ye,group:J3[ye]||"push",targetWeight:Je.targetWeight,achievedAt:dt.now()},St=[...nt.badges,He];await vn(Ge(je,"coreBuddyAchievements",n.id),{...nt,badges:St,updatedAt:dt.now()}),Qe(Jt=>[...Jt,He])}catch(Pe){console.error("Error checking target badge:",Pe)}},Ct=Fe&&a.jsxs("div",{className:`toast-notification ${Fe.type}`,children:[Fe.type==="success"&&a.jsx("span",{children:" "}),Fe.message]}),hn=(ye,Ne)=>a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:Ne,"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(i||y==="loading")return a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&T){const ye=T;return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[hn(ye.name,()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-overview-hero",children:[a.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:eD[ye.focus]})}),a.jsx("h2",{className:"pg-overview-name",children:ye.name}),a.jsx("p",{className:"pg-overview-desc",children:ye.description}),a.jsxs("div",{className:"pg-overview-stats",children:[a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:ye.duration}),a.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:ye.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:ye.duration*ye.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),a.jsx("div",{className:"pg-overview-days",children:ye.days.map((Ne,Pe)=>a.jsxs("div",{className:"pg-day-card",children:[a.jsxs("div",{className:"pg-day-header",children:[a.jsx("span",{className:"pg-day-name",children:Ne.name}),a.jsx("span",{className:"pg-day-label",children:Ne.label})]}),a.jsx("div",{className:"pg-day-exercises",children:Ne.exercises.map((tt,Je)=>{const Ue=sd(tt,1,ye);return a.jsxs("div",{className:"pg-day-ex",children:[a.jsx("span",{className:"pg-day-ex-name",children:tt.name}),a.jsx("span",{className:"pg-day-ex-target",children:tt.type==="timed"?`${Ue.sets}${Ue.time}s`:`${Ue.sets}${Ue.reps}`}),a.jsx("span",{className:`pg-day-ex-badge pg-badge-${tt.type}`,children:tt.type==="weighted"?"WT":tt.type==="timed"?"TMR":"BW"})]},Je)})})]},Pe))}),a.jsxs("div",{className:"pg-overview-note",children:[a.jsx("strong",{children:"Progressive Overload:"})," +",ye.repProg," reps/week",ye.timeProg?`, +${ye.timeProg}s/week for timed`:""]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>qt(ye),children:"Start Programme"})]}),Ct]})}if(y==="dashboard"){const ye=bt();if(!ye)return w("browse"),null;const Ne=Et(),Pe=G?.completedSessions||{},tt=Ne.totalSessions?Math.round(Ne.totalCompleted/Ne.totalSessions*100):0,Je=Math.round(Ne.totalCompleted/(Ne.totalSessions||1)*X3);return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[hn("Programme",()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-dash-hero",children:[a.jsxs("div",{className:"pg-dash-ring-wrap",children:[a.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:ko.map((Ue,nt)=>a.jsx("line",{x1:Ue.x1,y1:Ue.y1,x2:Ue.x2,y2:Ue.y2,className:nt<Je?"pg-tick-filled":"pg-tick-empty",strokeWidth:Ue.thick?"3":"2"},nt))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"pg-dash-ring-logo",width:"50",height:"50"})]}),a.jsx("h2",{className:"pg-dash-name",children:ye.name}),a.jsxs("div",{className:"pg-dash-progress-text",children:[a.jsxs("span",{className:"pg-dash-pct",children:[tt,"%"]}),a.jsxs("span",{className:"pg-dash-week",children:["Week ",Ne.currentWeek," of ",ye.duration]})]})]}),a.jsx("div",{className:"pg-weeks",children:Array.from({length:ye.duration},(Ue,nt)=>{const Ke=nt+1;return a.jsxs("div",{className:`pg-week-row${Ke===Ne.currentWeek?" pg-week-current":""}`,children:[a.jsxs("span",{className:"pg-week-label",children:["W",Ke]}),a.jsx("div",{className:"pg-week-days",children:ye.days.map((He,St)=>{const Jt=`w${Ke}d${St}`,Bt=!!Pe[Jt],sn=!Ne.complete&&Ke===Ne.nextWeek&&St===Ne.nextDay;return a.jsx("button",{className:`pg-day-dot${Bt?" done":""}${sn?" next":""}`,disabled:Bt,onClick:()=>{sn&&Xe(Ke,St)},children:Bt?a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}):a.jsx("span",{children:He.name.replace("Day ","")})},St)})})]},nt)})}),!Ne.complete&&Ne.nextDay>=0&&a.jsxs("div",{className:"pg-next-session",children:[a.jsx("h3",{children:"Next Session"}),a.jsxs("p",{className:"pg-next-info",children:["Week ",Ne.nextWeek,"  ",ye.days[Ne.nextDay].name,": ",ye.days[Ne.nextDay].label]}),a.jsx("div",{className:"pg-next-exercises",children:ye.days[Ne.nextDay].exercises.map((Ue,nt)=>{const Ke=sd(Ue,Ne.nextWeek,ye);return a.jsxs("div",{className:"pg-next-ex",children:[a.jsx("span",{className:"pg-next-ex-name",children:Ue.name}),a.jsx("span",{className:"pg-next-ex-target",children:Ue.type==="timed"?`${Ke.sets}${Ke.time}s`:`${Ke.sets}${Ke.reps}`})]},nt)})}),a.jsx("button",{className:"pg-start-btn",onClick:()=>Xe(Ne.nextWeek,Ne.nextDay),children:"Start Session"})]}),Ne.complete&&a.jsxs("div",{className:"pg-complete-msg",children:[a.jsx("h3",{children:"Programme Complete! "}),a.jsxs("p",{children:["You finished all ",Ne.totalSessions," sessions."]}),a.jsx("button",{className:"pg-start-btn",onClick:kt,children:"Choose New Programme"})]}),a.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&kt()},children:"Quit Programme"})]}),a.jsx(Hr,{active:"workouts"}),Ct]})}if(y==="session"){const ye=bt();if(!ye)return null;const Ne=ye.days[X],Pe=Ne.exercises[Se],tt=sd(Pe,V,ye),Je=E[Se],Ue=Je?.sets?.length||0,nt=Ne.exercises.length,Ke=(Se+Ue/tt.sets)/nt,He=le[Pe.name],St=lt(V,X,Pe.name);Pe.type==="timed"&&Y===0&&!ze&&Ue===Oe&&setTimeout(()=>_e(tt.time),0);const Jt=()=>{He?.isGif?B(!C):oe.current&&(C?oe.current.pause():oe.current.play(),B(!C))};return a.jsxs("div",{className:"pg-page pg-page-session","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"pg-session-progress",children:a.jsx("div",{className:"pg-session-progress-fill",style:{width:`${Ke*100}%`}})}),a.jsxs("div",{className:"pg-session-header",children:[a.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&w("dashboard")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),a.jsxs("div",{className:"pg-session-title",children:[a.jsxs("span",{className:"pg-session-counter",children:[Se+1," / ",nt]}),a.jsxs("span",{className:"pg-session-week",children:["Week ",V,"  ",Ne.name]})]})]}),He&&a.jsxs("div",{className:"pg-video-container",onClick:Jt,children:[He.isGif?a.jsx("img",{className:"pg-video",src:He.url,alt:Pe.name}):a.jsx("video",{ref:oe,className:"pg-video",src:He.url,loop:!0,muted:!0,playsInline:!0},Pe.name),!C&&a.jsxs("div",{className:"pg-video-overlay",children:[a.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),a.jsx("div",{className:"pg-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"pg-exercise-card",children:[a.jsx("h2",{className:"pg-ex-name",children:Pe.name}),a.jsx("span",{className:`pg-ex-type-badge pg-badge-${Pe.type}`,children:Pe.type==="weighted"?"Weight + Reps":Pe.type==="timed"?"Timed":"Reps Only"}),Pe.type==="weighted"&&St&&a.jsxs("div",{className:"pg-last-week",children:[a.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),a.jsxs("span",{className:"pg-last-week-value",children:[St.weight,"kg x ",St.reps," reps"]})]}),a.jsxs("div",{className:"pg-ex-set-info",children:[a.jsxs("span",{className:"pg-ex-set-num",children:["Set ",Ue+1," of ",tt.sets]}),a.jsxs("span",{className:"pg-ex-target",children:["Target: ",Pe.type==="timed"?`${tt.time}s hold`:`${tt.reps} reps`]})]}),Pe.type==="weighted"&&a.jsxs("div",{className:"pg-input-area",children:[a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",value:P,onChange:Bt=>D(Bt.target.value),placeholder:"0",className:"pg-input"})]}),a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:q,onChange:Bt=>M(Bt.target.value),placeholder:String(tt.reps),className:"pg-input"})]})]}),Pe.type==="reps"&&a.jsx("div",{className:"pg-input-area",children:a.jsxs("div",{className:"pg-input-group pg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:q,onChange:Bt=>M(Bt.target.value),placeholder:String(tt.reps),className:"pg-input"})]})}),Pe.type==="timed"&&a.jsxs("div",{className:"pg-timer-area",children:[a.jsx("div",{className:"pg-timer-display",children:a.jsxs("span",{className:"pg-timer-value",children:[Y,"s"]})}),ze?a.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>gt(!1),children:"Stop"}):a.jsx("button",{className:"pg-timer-btn",onClick:()=>{Y===0&&_e(tt.time),gt(!0)},children:Y<tt.time&&Y>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"pg-log-set-btn",onClick:Ht,disabled:Pe.type==="timed"&&ze,children:Ue+1<tt.sets?"Log Set":Se+1<nt?"Log Set  Next Exercise":"Log Set  Complete"}),Je?.sets?.length>0&&a.jsx("div",{className:"pg-completed-sets",children:Je.sets.map((Bt,sn)=>a.jsxs("div",{className:"pg-completed-set",children:[a.jsx("span",{className:"pg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",sn+1,": ",Bt.weight!==void 0?`${Bt.weight}kg  ${Bt.reps}`:Bt.time!==void 0?`${Bt.time}s`:`${Bt.reps} reps`]})]},sn))})]}),Ct]})}if(y==="sessionComplete"){const Ne=bt()?.days[X],Pe=E.reduce((Je,Ue)=>Je+Ue.sets.length,0),tt=E.reduce((Je,Ue)=>Je+Ue.sets.reduce((nt,Ke)=>nt+(Ke.weight||0)*(Ke.reps||0),0),0);return a.jsxs("div",{className:"pg-page pg-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"pg-session-done",children:[a.jsxs("div",{className:"pg-done-ring",children:[a.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:ko.map((Je,Ue)=>a.jsx("line",{x1:Je.x1,y1:Je.y1,x2:Je.x2,y2:Je.y2,className:"pg-tick-complete",strokeWidth:Je.thick?"3.5":"2",style:{animationDelay:`${Ue*.02}s`}},Ue))}),a.jsx("div",{className:"pg-done-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),a.jsxs("p",{className:"pg-done-subtitle",children:["Week ",V,"  ",Ne?.name,": ",Ne?.label]}),a.jsxs("div",{className:"pg-done-stats",children:[a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:E.length}),a.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Pe}),a.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),tt>0&&a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Math.round(tt).toLocaleString()}),a.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>w("dashboard"),children:"Back to Programme"})]}),pe&&a.jsx("div",{className:"pg-badge-celebration",onClick:()=>Ae(null),children:a.jsxs("div",{className:"pg-badge-celebration-card",onClick:Je=>Je.stopPropagation(),children:[a.jsx("div",{className:"pg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pg-badge-celebration-title",children:pe.badges.length===1?"Badge Earned!":`${pe.badges.length} Badges Earned!`}),a.jsx("div",{className:"pg-badge-celebration-list",children:pe.badges.map((Je,Ue)=>a.jsx("div",{className:"pg-badge-celebration-item",children:Je.type==="pb_target"?`${Je.exercise}  ${Je.targetWeight}kg`:Je.label},Ue))}),a.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Ae(null),children:"Tap to dismiss"})]})}),Ct]})}return null}const nD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},sD={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},Lp=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function rD(s){return nD[s]||"push"}function aD(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function iD(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function oD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=hr(),{isDark:l,toggleTheme:u,accent:h}=Gr(),p=Rs(),[g,y]=_.useState(!0),[w,T]=_.useState(null),[S,O]=_.useState({});_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const[A,P]=await Promise.all([In(Ge(je,"coreBuddyAchievements",n.id)),In(Ge(je,"coreBuddyPBs",n.id))]);A.exists()&&T(A.data()),P.exists()&&O(P.data().exercises||{})}catch(A){console.error("Error loading achievements:",A)}y(!1)})()},[n]);const G=w?.badges||[],U=w?.totalVolume||0,V=G.filter(E=>E.type==="pb_target"),Z=G.filter(E=>E.type==="volume_milestone"),X={push:[],pull:[],lower:[],core:[]};V.forEach(E=>{const A=E.group||rD(E.exercise);X[A]&&X[A].push(E)});const ce=Lp.find(E=>U<E.threshold),Se=Lp.filter(E=>U>=E.threshold).pop()?.threshold||0,Be=ce?(U-Se)/(ce.threshold-Se):1;if(i||g)return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsx("div",{className:"ach-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});const Oe=G.length,I=Oe>0||U>0;return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ach-main",children:[a.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/core-buddy"),children:" Back"}),a.jsxs("div",{className:"ach-stats-banner",children:[a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Oe}),a.jsx("span",{className:"ach-stat-label",children:Oe===1?"Badge":"Badges"})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:aD(U)}),a.jsxs("span",{className:"ach-stat-label",children:[iD(U)," lifted"]})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Object.keys(S).length}),a.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!I&&a.jsxs("div",{className:"ach-empty",children:[a.jsx("div",{className:"ach-empty-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),a.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),a.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),a.jsx("h4",{children:"No achievements yet"}),a.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),a.jsxs("div",{className:"ach-volume-hero",children:[a.jsxs("div",{className:"ach-volume-ring",children:[a.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:ko.map((E,A)=>{const P=A<Math.round(Be*60);return a.jsx("line",{x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,className:P?"ach-tick-filled":"ach-tick-empty",strokeWidth:E.thick?"3":"2"},A)})}),a.jsxs("div",{className:"ach-volume-center",children:[a.jsx("span",{className:"ach-volume-number",children:Math.round(U).toLocaleString()}),a.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),ce&&a.jsxs("div",{className:"ach-volume-next",children:["Next: ",a.jsx("strong",{children:ce.label})," (",(ce.threshold-U).toLocaleString(),"kg to go)"]})]}),a.jsx("div",{className:"ach-milestone-shelf",children:Lp.map((E,A)=>{const P=U>=E.threshold,D=Z.find(q=>q.milestone===E.threshold);return a.jsxs("div",{className:`ach-milestone ${P?"unlocked":"locked"}`,children:[a.jsx("div",{className:"ach-milestone-hex",children:a.jsx("span",{className:"ach-milestone-icon",children:E.icon})}),a.jsx("span",{className:"ach-milestone-label",children:E.label}),D?.achievedAt&&a.jsx("span",{className:"ach-milestone-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},A)})})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),V.length===0?a.jsx("div",{className:"ach-pb-empty",children:a.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",a.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(X).map(([E,A])=>{if(A.length===0)return null;const P=sD[E];return a.jsxs("div",{className:"ach-group",children:[a.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:P.color},children:[a.jsx("span",{className:"ach-group-label",style:{color:P.color},children:P.label}),a.jsx("span",{className:"ach-group-count",children:A.length})]}),a.jsx("div",{className:"ach-badge-grid",children:A.map((D,q)=>a.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${q*.06}s`,"--group-color":P.color},children:[a.jsx("div",{className:"ach-badge-hex",style:{borderColor:P.color,boxShadow:`0 0 12px ${P.color}33`},children:a.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:P.color,strokeWidth:"2",strokeLinecap:"round",children:a.jsx("path",{d:P.icon})})}),a.jsxs("div",{className:"ach-badge-info",children:[a.jsx("span",{className:"ach-badge-exercise",children:D.exercise}),a.jsxs("span",{className:"ach-badge-value",style:{color:P.color},children:[D.targetWeight,"kg"]}),D.achievedAt&&a.jsx("span",{className:"ach-badge-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},q))})]},E)})]})]}),a.jsx(Hr,{active:"home"})]})}const rd=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function lD(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Op(s){return s.toISOString().split("T")[0]}function cD(s){return Array.from({length:7},(e,n)=>{const i=new Date(s);return i.setDate(s.getDate()+n),i})}function uD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=hr(),{isDark:l,toggleTheme:u,accent:h}=Gr(),p=Rs(),[g,y]=_.useState({}),[w,T]=_.useState(!0),[S,O]=_.useState(!1),[G,U]=_.useState(0),[V,Z]=_.useState(null),[X,ce]=_.useState(null),[Se,Be]=_.useState(!1),Oe=_.useRef([]),I=_.useRef([]),E=_.useCallback((B,oe="info")=>{Z({message:B,type:oe}),setTimeout(()=>Z(null),3e3)},[]),A=new Date,P=Op(A),D=lD(A),q=cD(D),M=["M","T","W","T","F","S","S"];_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const oe=Ft(je,"habitLogs"),pe=yn(oe,nn("clientId","==",n.id)),Ae=await un(pe),Le={};Ae.docs.forEach(ae=>{const We=ae.data();Le[We.date]={...We,_id:ae.id}}),y(Le);let Qe=0;const Fe=new Date(A);for(;;){const ae=Op(Fe),We=Le[ae];if(We)if(Object.values(We.habits||{}).filter(Boolean).length>=3)Qe++,Fe.setDate(Fe.getDate()-1);else break;else if(ae===P)Fe.setDate(Fe.getDate()-1);else break}U(Qe)}catch(oe){console.error("Error loading habit logs:",oe)}finally{T(!1)}})()},[s,n]);const ze=g[P]||{habits:{}},gt=async B=>{if(!s||S)return;const oe=ze.habits?.[B]||!1;oe||(Oe.current=[...Array(10)].map((pe,Ae)=>{const Le=Ae/10*2*Math.PI,Qe=18+Math.random()*20;return{tx:Math.cos(Le)*Qe,ty:Math.sin(Le)*Qe,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),ce(B),setTimeout(()=>ce(null),700)),O(!0);try{const pe=ze.habits||{},Ae={...pe,[B]:!pe[B]},Le=ze._id||`${n.id}_${P}`;await vn(Ge(je,"habitLogs",Le),{clientId:n.id,date:P,habits:Ae}),y(Fe=>({...Fe,[P]:{clientId:n.id,date:P,habits:Ae,_id:Le}})),Object.values(Ae).filter(Boolean).length===rd.length&&!oe&&(I.current=[...Array(50)].map((Fe,ae)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][ae%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{Be(!0),setTimeout(()=>Be(!1),3500)},500))}catch(pe){console.error("Error saving habit:",pe),E("Failed to save. Try again.","error")}finally{O(!1)}},Y=q.map(B=>{const oe=Op(B),pe=g[oe],Ae=pe?Object.values(pe.habits||{}).filter(Boolean).length:0;return{date:B,dateStr:oe,completed:Ae,total:rd.length}}),_e=Y.reduce((B,oe)=>B+oe.completed,0),De=Y.reduce((B,oe)=>B+oe.total,0),le=De>0?Math.round(_e/De*100):0,Ve=Object.values(ze.habits||{}).filter(Boolean).length,C=Math.round(Ve/rd.length*100);return a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||w?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-ring-section",children:[a.jsxs("div",{className:"cbc-progress-ring",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-C/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-pct",children:[C,"%"]}),a.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),a.jsxs("div",{className:"cbc-streak",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{className:"cbc-streak-count",children:G}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsx("div",{className:"cbc-habits",children:rd.map(B=>{const oe=ze.habits?.[B.key]||!1,pe=X===B.key;return a.jsxs("button",{className:`cbc-habit-btn cbc-habit-${B.key} ${oe?"cbc-habit-done":""} ${pe?"cbc-habit-just-checked":""}`,onClick:()=>gt(B.key),disabled:S,children:[a.jsx("div",{className:"cbc-habit-check",children:oe?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${pe?"cbc-check-animate":""}`})}):a.jsx("div",{className:"cbc-habit-circle"})}),pe&&a.jsx("div",{className:"cbc-particles",children:Oe.current.map((Ae,Le)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${Ae.tx}px`,"--ty":`${Ae.ty}px`,"--size":`${Ae.size}px`,animationDuration:`${Ae.duration}s`}},Le))}),a.jsx("div",{className:`cbc-habit-icon cbc-icon-${B.key}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:B.icon})})}),a.jsx("span",{className:"cbc-habit-label",children:B.label})]},B.key)})})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsx("div",{className:"cbc-week-grid",children:Y.map((B,oe)=>{const pe=B.dateStr===P,Ae=B.total>0?B.completed/B.total:0,Le=38,Qe=2*Math.PI*Le,Fe=Qe-Ae*Qe;return a.jsxs("div",{className:`cbc-day-ring ${pe?"cbc-day-today":""} ${B.completed>0?"cbc-day-active":""}`,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:Le}),a.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:Le,strokeDasharray:Qe,strokeDashoffset:Fe})]}),a.jsx("span",{className:"cbc-day-label",children:M[oe]}),a.jsxs("span",{className:"cbc-day-count",children:[B.completed,"/",B.total]})]},oe)})}),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${le}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[_e," / ",De," habits this week (",le,"%)"]})]})]})]}),a.jsx(Hr,{active:"home"}),Se&&a.jsxs("div",{className:"cbc-celebration",onClick:()=>Be(!1),children:[a.jsx("div",{className:"cbc-confetti-container",children:I.current.map((B,oe)=>a.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${B.x}%`,"--delay":`${B.delay}s`,"--color":B.color,"--drift":`${B.drift}px`,"--spin":`${B.spin}deg`,"--duration":`${B.duration}s`,width:`${B.width}px`,height:`${B.height}px`}},oe))}),a.jsxs("div",{className:"cbc-celebration-card",children:[a.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),a.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),a.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),V&&a.jsx("div",{className:`toast-notification ${V.type}`,children:V.message})]})}function ad(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function c2(s,e){return[s,e].sort().join("_")}function hD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=hr(),{isDark:l,toggleTheme:u}=Gr(),h=Rs(),[p,g]=_.useState("buddies"),[y,w]=_.useState([]),[T,S]=_.useState([]),[O,G]=_.useState([]),[U,V]=_.useState(""),[Z,X]=_.useState([]),[ce,Se]=_.useState([]),[Be,Oe]=_.useState(!0),[I,E]=_.useState(null),[A,P]=_.useState(null),D=_.useCallback((le,Ve="info")=>{P({message:le,type:Ve}),setTimeout(()=>P(null),3500)},[]);_.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const q=_.useCallback(async()=>{if(n){Oe(!0);try{const le=n.id,C=(await un(Ft(je,"clients"))).docs.map(Fe=>({id:Fe.id,...Fe.data()}));Se(C);const B=Object.fromEntries(C.map(Fe=>[Fe.id,Fe])),oe=await un(yn(Ft(je,"buddies"),nn("user1","==",le))),pe=await un(yn(Ft(je,"buddies"),nn("user2","==",le))),Ae=new Set;[...oe.docs,...pe.docs].forEach(Fe=>{const ae=Fe.data(),We=ae.user1===le?ae.user2:ae.user1;Ae.add(We)}),w(Array.from(Ae).map(Fe=>B[Fe]).filter(Boolean));const Le=await un(yn(Ft(je,"buddyRequests"),nn("toId","==",le),nn("status","==","pending")));S(Le.docs.map(Fe=>({reqId:Fe.id,...Fe.data(),fromClient:B[Fe.data().fromId]})).filter(Fe=>Fe.fromClient));const Qe=await un(yn(Ft(je,"buddyRequests"),nn("fromId","==",le),nn("status","==","pending")));G(Qe.docs.map(Fe=>({reqId:Fe.id,...Fe.data(),toClient:B[Fe.data().toId]})).filter(Fe=>Fe.toClient))}catch(le){console.error("Error fetching buddy data:",le),D("Failed to load buddies","error")}finally{Oe(!1)}}},[n,D]);_.useEffect(()=>{q()},[q]),_.useEffect(()=>{if(!U.trim()||!n){X([]);return}const le=U.toLowerCase(),Ve=n.id,C=new Set(y.map(Ae=>Ae.id)),B=new Set(O.map(Ae=>Ae.toId)),oe=new Set(T.map(Ae=>Ae.fromId)),pe=ce.filter(Ae=>Ae.id===Ve||!Ae.name||!Ae.coreBuddyAccess?!1:Ae.name.toLowerCase().includes(le)).map(Ae=>({...Ae,isBuddy:C.has(Ae.id),isPendingOut:B.has(Ae.id),isPendingIn:oe.has(Ae.id)})).slice(0,20);X(pe)},[U,ce,y,O,T,n]);const M=async le=>{E(le);try{const Ve=`${n.id}_${le}`;await vn(Ge(je,"buddyRequests",Ve),{fromId:n.id,toId:le,status:"pending",createdAt:Tr()}),D("Buddy request sent!","success"),await q()}catch(Ve){console.error("Error sending request:",Ve),D("Failed to send request","error")}finally{E(null)}},ze=async le=>{E(le.reqId);try{const Ve=c2(le.fromId,n.id);await vn(Ge(je,"buddies",Ve),{user1:[le.fromId,n.id].sort()[0],user2:[le.fromId,n.id].sort()[1],connectedAt:Tr()}),await Vs(Ge(je,"buddyRequests",le.reqId)),D("Buddy added!","success"),await q()}catch(Ve){console.error("Error accepting request:",Ve),D("Failed to accept","error")}finally{E(null)}},gt=async le=>{E(le.reqId);try{await Vs(Ge(je,"buddyRequests",le.reqId)),D("Request declined","info"),await q()}catch(Ve){console.error("Error declining:",Ve),D("Failed to decline","error")}finally{E(null)}},Y=async le=>{E(le.reqId);try{await Vs(Ge(je,"buddyRequests",le.reqId)),D("Request cancelled","info"),await q()}catch(Ve){console.error("Error cancelling:",Ve),D("Failed to cancel","error")}finally{E(null)}},_e=async le=>{E(le);try{const Ve=c2(n.id,le);await Vs(Ge(je,"buddies",Ve)),D("Buddy removed","info"),await q()}catch(Ve){console.error("Error removing buddy:",Ve),D("Failed to remove buddy","error")}finally{E(null)}},De=T.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!n?null:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),De>0&&a.jsx("span",{className:"bdy-tab-badge",children:De})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Be?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(le=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${le.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:le.photoURL?a.jsx("img",{src:le.photoURL,alt:le.name}):a.jsx("span",{children:ad(le.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:le.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:Ve=>{Ve.stopPropagation(),_e(le.id)},disabled:I===le.id,"aria-label":"Remove buddy",children:I===le.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},le.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[T.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:T.map(le=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:le.fromClient.photoURL?a.jsx("img",{src:le.fromClient.photoURL,alt:le.fromClient.name}):a.jsx("span",{children:ad(le.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:le.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>ze(le),disabled:I===le.reqId,children:I===le.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>gt(le),disabled:I===le.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},le.reqId))})]}),O.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:O.map(le=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:le.toClient?.photoURL?a.jsx("img",{src:le.toClient.photoURL,alt:le.toClient.name}):a.jsx("span",{children:ad(le.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:le.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>Y(le),disabled:I===le.reqId,children:I===le.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},le.reqId))})]}),T.length===0&&O.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:U,onChange:le=>V(le.target.value),autoFocus:!0}),U&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>V(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),U.trim()&&Z.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',U,'"']})}),Z.length>0&&a.jsx("div",{className:"bdy-list",children:Z.map(le=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${le.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:le.photoURL?a.jsx("img",{src:le.photoURL,alt:le.name}):a.jsx("span",{children:ad(le.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:le.name}),le.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),le.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):le.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):le.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:Ve=>{Ve.stopPropagation();const C=T.find(B=>B.fromId===le.id);C&&ze(C)},disabled:!!I,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:Ve=>{Ve.stopPropagation(),M(le.id)},disabled:I===le.id,children:I===le.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},le.id))})]})]})]}),a.jsx(Hr,{}),A&&a.jsxs("div",{className:`toast-notification ${A.type}`,children:[a.jsx("span",{className:"toast-icon",children:A.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):A.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:A.message})]})]})}function Vp(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Bp(s,e){return[s,e].sort().join("_")}function u2(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function dD(){const{userId:s}=Gj(),{currentUser:e,isClient:n,clientData:i,loading:l}=hr(),{isDark:u,toggleTheme:h}=Gr(),p=Rs(),[g,y]=_.useState(null),[w,T]=_.useState("none"),[S,O]=_.useState(null),[G,U]=_.useState(!0),[V,Z]=_.useState(!1),[X,ce]=_.useState(null),[Se,Be]=_.useState([]),[Oe,I]=_.useState(!1),[E,A]=_.useState(new Set),[P,D]=_.useState(new Set),[q,M]=_.useState({}),[ze,gt]=_.useState({}),[Y,_e]=_.useState({}),De=_.useCallback((ae,We="info")=>{ce({message:ae,type:We}),setTimeout(()=>ce(null),3500)},[]);_.useEffect(()=>{!l&&(!e||!n)&&p("/")},[e,n,l,p]),_.useEffect(()=>{i&&s&&i.id===s&&p("/client/core-buddy",{replace:!0})},[i,s,p]),_.useEffect(()=>{if(!i||!s||i.id===s)return;let ae=!1;return(async()=>{U(!0);try{const ut=(await un(Ft(je,"clients"))).docs.map(kt=>({id:kt.id,...kt.data()})).find(kt=>kt.id===s);if(!ut){ae||U(!1);return}ae||y(ut);const ft=i.id,re=Bp(ft,s);if((await In(Ge(je,"buddies",re))).exists())ae||T("buddy");else{const kt=`${ft}_${s}`,bt=await In(Ge(je,"buddyRequests",kt));if(bt.exists()&&bt.data().status==="pending")ae||(T("pending_out"),O(kt));else{const Et=`${s}_${ft}`,lt=await In(Ge(je,"buddyRequests",Et));lt.exists()&&lt.data().status==="pending"?ae||(T("pending_in"),O(Et)):ae||T("none")}}}catch(We){console.error("Error loading profile:",We)}finally{ae||U(!1)}})(),()=>{ae=!0}},[i,s]);const le=async()=>{Z(!0);try{const ae=`${i.id}_${s}`;await vn(Ge(je,"buddyRequests",ae),{fromId:i.id,toId:s,status:"pending",createdAt:Tr()}),T("pending_out"),O(ae),De("Buddy request sent!","success")}catch(ae){console.error(ae),De("Failed to send request","error")}finally{Z(!1)}},Ve=async()=>{if(S){Z(!0);try{const ae=Bp(i.id,s);await vn(Ge(je,"buddies",ae),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:Tr()}),await Vs(Ge(je,"buddyRequests",S)),T("buddy"),De("Buddy added!","success")}catch(ae){console.error(ae),De("Failed to accept","error")}finally{Z(!1)}}},C=async()=>{if(S){Z(!0);try{await Vs(Ge(je,"buddyRequests",S)),T("none"),De(w==="pending_out"?"Request cancelled":"Request declined","info")}catch(ae){console.error(ae),De("Failed","error")}finally{Z(!1)}}},B=async()=>{Z(!0);try{const ae=Bp(i.id,s);await Vs(Ge(je,"buddies",ae)),T("none"),De("Buddy removed","info")}catch(ae){console.error(ae),De("Failed to remove","error")}finally{Z(!1)}},oe=_.useCallback(async()=>{if(s){I(!0);try{const ae=await un(yn(Ft(je,"posts"),nn("authorId","==",s),Ul("createdAt","desc"),zl(30)));if(Be(ae.docs.map(We=>({id:We.id,...We.data()}))),i){const We=await un(yn(Ft(je,"postLikes"),nn("userId","==",i.id)));A(new Set(We.docs.map(wt=>wt.data().postId)))}}catch(ae){console.error("Error loading journey:",ae)}finally{I(!1)}}},[s,i]);_.useEffect(()=>{!G&&g&&oe()},[G,g,oe]);const pe=async ae=>{if(window.confirm("Delete this post?"))try{await Vs(Ge(je,"posts",ae)),Be(We=>We.filter(wt=>wt.id!==ae)),De("Post deleted","info")}catch(We){console.error("Delete error:",We),De("Failed to delete","error")}},Ae=async ae=>{if(!i)return;const We=i.id,wt=`${ae}_${We}`,ut=E.has(ae),ft=new Set(E);ut?ft.delete(ae):ft.add(ae),A(ft),Be(re=>re.map(qt=>qt.id===ae?{...qt,likeCount:Math.max(0,(qt.likeCount||0)+(ut?-1:1))}:qt));try{ut?(await Vs(Ge(je,"postLikes",wt)),await oa(Ge(je,"posts",ae),{likeCount:Ua(-1)})):(await vn(Ge(je,"postLikes",wt),{postId:ae,userId:We,createdAt:Tr()}),await oa(Ge(je,"posts",ae),{likeCount:Ua(1)}))}catch(re){console.error("Like error:",re),oe()}},Le=async ae=>{try{const We=await un(yn(Ft(je,"postComments"),nn("postId","==",ae),Ul("createdAt","asc"),zl(50)));M(wt=>({...wt,[ae]:We.docs.map(ut=>({id:ut.id,...ut.data()}))}))}catch(We){console.error("Error loading comments:",We)}},Qe=ae=>{const We=new Set(P);We.has(ae)?We.delete(ae):(We.add(ae),q[ae]||Le(ae)),D(We)},Fe=async ae=>{const We=(ze[ae]||"").trim();if(!(!We||!i)){_e(wt=>({...wt,[ae]:!0}));try{await Fi(Ft(je,"postComments"),{postId:ae,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:We,createdAt:Tr()}),await oa(Ge(je,"posts",ae),{commentCount:Ua(1)}),gt(wt=>({...wt,[ae]:""})),Be(wt=>wt.map(ut=>ut.id===ae?{...ut,commentCount:(ut.commentCount||0)+1}:ut)),await Le(ae)}catch(wt){console.error("Comment error:",wt),De("Failed to comment","error")}finally{_e(wt=>({...wt,[ae]:!1}))}}};return l||G||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!n?null:g?a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:h,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:Vp(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),a.jsxs("div",{className:"prf-buddy-action",children:[w==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:le,disabled:V,children:V?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),w==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:C,disabled:V,children:V?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),w==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:Ve,disabled:V,children:V?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:C,disabled:V,children:"Decline"})]}),w==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:B,disabled:V,children:V?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:`${g.name?.split(" ")[0]}'s Journey`}),Oe?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):Se.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:Se.map(ae=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:ae.authorPhotoURL?a.jsx("img",{src:ae.authorPhotoURL,alt:""}):a.jsx("span",{children:Vp(ae.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:ae.authorName}),a.jsx("span",{className:"journey-post-time",children:u2(ae.createdAt)})]}),ae.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>pe(ae.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),ae.content&&a.jsx("p",{className:"journey-post-content",children:ae.content}),ae.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:ae.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${E.has(ae.id)?" liked":""}`,onClick:()=>Ae(ae.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:E.has(ae.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:ae.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${P.has(ae.id)?" active":""}`,onClick:()=>Qe(ae.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:ae.commentCount||0})]})]}),P.has(ae.id)&&a.jsxs("div",{className:"journey-comments",children:[q[ae.id]?.length>0?q[ae.id].map(We=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${We.authorId}`),children:We.authorPhotoURL?a.jsx("img",{src:We.authorPhotoURL,alt:""}):a.jsx("span",{children:Vp(We.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:We.authorName}),a.jsx("span",{className:"journey-comment-text",children:We.content})]}),a.jsx("span",{className:"journey-comment-time",children:u2(We.createdAt)})]})]},We.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:ze[ae.id]||"",onChange:We=>gt(wt=>({...wt,[ae.id]:We.target.value})),onKeyDown:We=>{We.key==="Enter"&&Fe(ae.id)},maxLength:300}),a.jsx("button",{onClick:()=>Fe(ae.id),disabled:!(ze[ae.id]||"").trim()||Y[ae.id],children:Y[ae.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},ae.id))})]})]}),a.jsx(Hr,{}),X&&a.jsxs("div",{className:`toast-notification ${X.type}`,children:[a.jsx("span",{className:"toast-icon",children:X.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):X.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:X.message})]})]}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(Hr,{})]})}function Up(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function h2(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function fD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=hr(),{isDark:l,toggleTheme:u}=Gr(),h=Rs(),[p,g]=_.useState([]),[y,w]=_.useState(!0),[T,S]=_.useState(""),[O,G]=_.useState(!1),[U,V]=_.useState(new Set),[Z,X]=_.useState(new Set),[ce,Se]=_.useState({}),[Be,Oe]=_.useState({}),[I,E]=_.useState({}),[A,P]=_.useState(null),D=_.useRef(null),q=_.useCallback((C,B="info")=>{P({message:C,type:B}),setTimeout(()=>P(null),3500)},[]);_.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const M=_.useCallback(async()=>{if(n){w(!0);try{const C=n.id,B=await un(yn(Ft(je,"buddies"),nn("user1","==",C))),oe=await un(yn(Ft(je,"buddies"),nn("user2","==",C))),pe=new Set;[...B.docs,...oe.docs].forEach(Fe=>{const ae=Fe.data();pe.add(ae.user1===C?ae.user2:ae.user1)});const Ae=[C,...Array.from(pe)].slice(0,30);let Le=[];Ae.length>0&&(Le=(await un(yn(Ft(je,"posts"),nn("authorId","in",Ae),Ul("createdAt","desc"),zl(50)))).docs.map(ae=>({id:ae.id,...ae.data()}))),g(Le);const Qe=await un(yn(Ft(je,"postLikes"),nn("userId","==",C)));V(new Set(Qe.docs.map(Fe=>Fe.data().postId)))}catch(C){console.error("Error loading feed:",C),q("Failed to load feed","error")}finally{w(!1)}}},[n,q]);_.useEffect(()=>{M()},[M]);const ze=async()=>{if(!(!T.trim()||O||!n)){G(!0);try{await Fi(Ft(je,"posts"),{authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:T.trim(),type:"text",createdAt:Tr(),likeCount:0,commentCount:0}),S(""),D.current&&(D.current.style.height="auto"),await M(),q("Posted!","success")}catch(C){console.error("Error posting:",C),q(C?.message||"Failed to post","error")}finally{G(!1)}}},gt=async C=>{if(window.confirm("Delete this post?"))try{await Vs(Ge(je,"posts",C)),g(B=>B.filter(oe=>oe.id!==C)),q("Post deleted","info")}catch(B){console.error("Delete error:",B),q("Failed to delete","error")}},Y=async C=>{if(!n)return;const B=n.id,oe=`${C}_${B}`,pe=U.has(C),Ae=new Set(U);pe?Ae.delete(C):Ae.add(C),V(Ae),g(Le=>Le.map(Qe=>Qe.id===C?{...Qe,likeCount:Math.max(0,(Qe.likeCount||0)+(pe?-1:1))}:Qe));try{pe?(await Vs(Ge(je,"postLikes",oe)),await oa(Ge(je,"posts",C),{likeCount:Ua(-1)})):(await vn(Ge(je,"postLikes",oe),{postId:C,userId:B,createdAt:Tr()}),await oa(Ge(je,"posts",C),{likeCount:Ua(1)}))}catch(Le){console.error("Like error:",Le),M()}},_e=async C=>{try{const B=await un(yn(Ft(je,"postComments"),nn("postId","==",C),Ul("createdAt","asc"),zl(50)));Se(oe=>({...oe,[C]:B.docs.map(pe=>({id:pe.id,...pe.data()}))}))}catch(B){console.error("Error loading comments:",B)}},De=C=>{const B=new Set(Z);B.has(C)?B.delete(C):(B.add(C),ce[C]||_e(C)),X(B)},le=async C=>{const B=(Be[C]||"").trim();if(!(!B||!n)){E(oe=>({...oe,[C]:!0}));try{await Fi(Ft(je,"postComments"),{postId:C,authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:B,createdAt:Tr()}),await oa(Ge(je,"posts",C),{commentCount:Ua(1)}),Oe(oe=>({...oe,[C]:""})),g(oe=>oe.map(pe=>pe.id===C?{...pe,commentCount:(pe.commentCount||0)+1}:pe)),await _e(C)}catch(oe){console.error("Comment error:",oe),q("Failed to comment","error")}finally{E(oe=>({...oe,[C]:!1}))}}},Ve=C=>{S(C.target.value),C.target.style.height="auto",C.target.style.height=Math.min(C.target.scrollHeight,120)+"px"};return i?a.jsx("div",{className:"feed-loading","data-theme":l?"dark":"light",children:a.jsx("div",{className:"feed-spinner"})}):!s||!e||!n?null:a.jsxs("div",{className:"feed-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"feed-main",children:[a.jsx("h1",{className:"feed-title",children:"Feed"}),a.jsxs("div",{className:"feed-compose",children:[a.jsx("div",{className:"feed-compose-avatar",children:n.photoURL?a.jsx("img",{src:n.photoURL,alt:""}):a.jsx("span",{children:Up(n.name)})}),a.jsxs("div",{className:"feed-compose-body",children:[a.jsx("textarea",{ref:D,placeholder:"Share an update with your buddies...",value:T,onChange:Ve,rows:1,maxLength:500}),T.trim()&&a.jsx("button",{className:"feed-post-btn",onClick:ze,disabled:O,children:O?a.jsx("div",{className:"feed-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]}),y?a.jsx("div",{className:"feed-content-loading",children:a.jsx("div",{className:"feed-spinner"})}):p.length===0?a.jsxs("div",{className:"feed-empty",children:[a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("h3",{children:"No posts yet"}),a.jsx("p",{children:"Share an update or add buddies to see their posts here!"})]}):a.jsx("div",{className:"feed-list",children:p.map(C=>a.jsxs("div",{className:"feed-post",children:[a.jsxs("div",{className:"feed-post-header",children:[a.jsx("div",{className:"feed-post-avatar",onClick:()=>h(`/client/core-buddy/profile/${C.authorId}`),children:C.authorPhotoURL?a.jsx("img",{src:C.authorPhotoURL,alt:""}):a.jsx("span",{children:Up(C.authorName)})}),a.jsxs("div",{className:"feed-post-meta",onClick:()=>h(`/client/core-buddy/profile/${C.authorId}`),children:[a.jsx("span",{className:"feed-post-name",children:C.authorName}),a.jsx("span",{className:"feed-post-time",children:h2(C.createdAt)})]}),C.authorId===n.id&&a.jsx("button",{className:"feed-delete-btn",onClick:()=>gt(C.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),C.content&&a.jsx("p",{className:"feed-post-content",children:C.content}),C.imageURL&&a.jsx("div",{className:"feed-post-image",children:a.jsx("img",{src:C.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"feed-post-actions",children:[a.jsxs("button",{className:`feed-action-btn${U.has(C.id)?" liked":""}`,onClick:()=>Y(C.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:U.has(C.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:C.likeCount||0})]}),a.jsxs("button",{className:`feed-action-btn${Z.has(C.id)?" active":""}`,onClick:()=>De(C.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:C.commentCount||0})]})]}),Z.has(C.id)&&a.jsxs("div",{className:"feed-comments",children:[ce[C.id]?.length>0?ce[C.id].map(B=>a.jsxs("div",{className:"feed-comment",children:[a.jsx("div",{className:"feed-comment-avatar",onClick:()=>h(`/client/core-buddy/profile/${B.authorId}`),children:B.authorPhotoURL?a.jsx("img",{src:B.authorPhotoURL,alt:""}):a.jsx("span",{children:Up(B.authorName)})}),a.jsxs("div",{className:"feed-comment-body",children:[a.jsxs("div",{className:"feed-comment-bubble",children:[a.jsx("span",{className:"feed-comment-name",children:B.authorName}),a.jsx("span",{className:"feed-comment-text",children:B.content})]}),a.jsx("span",{className:"feed-comment-time",children:h2(B.createdAt)})]})]},B.id)):a.jsx("p",{className:"feed-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"feed-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:Be[C.id]||"",onChange:B=>Oe(oe=>({...oe,[C.id]:B.target.value})),onKeyDown:B=>{B.key==="Enter"&&le(C.id)},maxLength:300}),a.jsx("button",{onClick:()=>le(C.id),disabled:!(Be[C.id]||"").trim()||I[C.id],children:I[C.id]?a.jsx("div",{className:"feed-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},C.id))})]}),a.jsx(Hr,{}),A&&a.jsxs("div",{className:`toast-notification ${A.type}`,children:[a.jsx("span",{className:"toast-icon",children:A.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):A.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:A.message})]})]})}const Lr=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],yo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function mD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Or(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function pD(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function gD(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function id(s,e){if(!e)return"-";switch(s.unit){case"weight":return gD(e.weight,e.reps);case"time":return pD(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function xl(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function zp(s,e){return!e||e===0?null:(s-e)/e*100}function yD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(U=>{const V=U.benchmarks?.[e];if(!V)return 0;switch(n){case"weight":return(V.weight||0)*(V.reps||0);case"time":return V.time||0;case"reps":return V.reps||0;case"distance":return V.distance||0;default:return 0}}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,w=p-y*2,T=g-y*2,S=i.map((U,V)=>{const Z=y+V/(i.length-1)*w,X=y+T-(U-u)/h*T;return{x:Z,y:X,value:U}}),O=S.map((U,V)=>`${V===0?"M":"L"} ${U.x} ${U.y}`).join(" "),G=O+` L ${S[S.length-1].x} ${y+T} L ${S[0].x} ${y+T} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:G,fill:"url(#trendGradientJr)"}),a.jsx("path",{d:O,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),S.map((U,V)=>a.jsx("circle",{cx:U.x,cy:U.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},V))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((U,V)=>a.jsxs("span",{className:"pb-trend-label",children:[U.month.split("-")[1],"/",U.month.split("-")[0].slice(2)]},V))})]})}function vD(){const[s,e]=_.useState("bests"),[n,i]=_.useState([]),[l,u]=_.useState(!0),[h,p]=_.useState(!1),[g,y]=_.useState(0),[w,T]=_.useState(!1),[S,O]=_.useState(!1),[G,U]=_.useState(!1),[V,Z]=_.useState({}),[X,ce]=_.useState({}),[Se,Be]=_.useState({}),[Oe,I]=_.useState({}),[E,A]=_.useState({}),[P,D]=_.useState(!1),[q,M]=_.useState({}),[ze,gt]=_.useState([]),[Y,_e]=_.useState(null),[De,le]=_.useState(null),[Ve,C]=_.useState(!1),[B,oe]=_.useState(""),[pe,Ae]=_.useState(""),Le=_.useRef(null),Qe=_.useRef(0),Fe=_.useRef(0),ae=_.useRef("right"),We=_.useCallback($=>{y(ge=>{const ke=Math.max(0,Math.min(Lr.length-1,$));return ke===ge?ge:(ae.current=ke>ge?"right":"left",ke)})},[]),{currentUser:wt,isClient:ut,clientData:ft,loading:re}=hr(),{isDark:qt}=Gr(),kt=Rs(),bt=_.useCallback(($,ge="info")=>{le({message:$,type:ge}),setTimeout(()=>le(null),4e3)},[]);_.useEffect(()=>{!re&&(!wt||!ut)&&kt("/")},[wt,ut,re,kt]),_.useEffect(()=>{ft&&Et()},[ft]);const Et=async()=>{try{const $=yn(Ft(je,"juniorPBs"),nn("clientId","==",ft.id)),ke=(await un($)).docs.map(it=>({id:it.id,...it.data()}));ke.sort((it,xt)=>it.month.localeCompare(xt.month)),i(ke);const xe=yn(Ft(je,"juniorPBTargets"),nn("clientId","==",ft.id)),fe=await un(xe);if(!fe.empty){const it=fe.docs[0].data();Be(it.targets||{}),I(it.metricTargets||{}),A(it.targets||{}),M(it.metricTargets||{})}const rt=yn(Ft(je,"juniorAchievements"),nn("clientId","==",ft.id)),mt=await un(rt);mt.empty||gt(mt.docs[0].data().badges||[])}catch($){console.error("Error fetching junior personal bests:",$)}u(!1)},lt=mD(),Xe=n.find($=>$.month===lt),Ht=n.filter($=>$.month<lt),ts=Ht.length>0?Ht[Ht.length-1]:null;_.useEffect(()=>{Xe?(Z(Xe.benchmarks||{}),ce(Xe.bodyMetrics||{})):(Z({}),ce({}))},[Xe?.id]);const Nt=async($,ge)=>{const ke=[];if($==="strength"?Lr.forEach(xe=>{const fe=Se[xe.key];if(!fe)return;const rt=ge[xe.key];if(!rt)return;let mt;if(fe.targetType==="time"){if(!fe.targetValue)return;const it=fe.startValue||0,xt=rt.time||0,pt=fe.targetValue-it;mt=pt===0?xt>=fe.targetValue?1:0:Math.max(0,(xt-it)/pt)}else if(fe.targetType==="reps"){if(!fe.targetReps)return;const it=fe.startReps||0,xt=rt.reps||0,pt=fe.targetReps-it;mt=pt===0?xt>=fe.targetReps?1:0:Math.max(0,(xt-it)/pt)}else if(fe.targetType==="distance"){if(!fe.targetDistance)return;const it=fe.startDistance||0,xt=rt.distance||0,pt=fe.targetDistance-it;mt=pt===0?xt>=fe.targetDistance?1:0:Math.max(0,(xt-it)/pt)}else{if(!fe.targetWeight&&!fe.targetReps)return;const it=(fe.startWeight||0)*(fe.startReps||0),xt=(fe.targetWeight||0)*(fe.targetReps||0),pt=(rt.weight||0)*(rt.reps||0),Zt=xt-it;mt=Zt===0?pt>=xt?1:0:Math.max(0,(pt-it)/Zt)}if(mt>=1){let it,xt;fe.targetType==="time"?(it=ze.some(pt=>pt.type==="strength"&&pt.key===xe.key&&pt.targetValue===fe.targetValue),xt=`${xe.name} ${fe.targetValue}s`):fe.targetType==="reps"?(it=ze.some(pt=>pt.type==="strength"&&pt.key===xe.key&&pt.targetReps===fe.targetReps),xt=`${xe.name} ${fe.targetReps} reps`):fe.targetType==="distance"?(it=ze.some(pt=>pt.type==="strength"&&pt.key===xe.key&&pt.targetDistance===fe.targetDistance),xt=`${xe.name} ${fe.targetDistance}cm`):(it=ze.some(pt=>pt.type==="strength"&&pt.key===xe.key&&pt.targetWeight===fe.targetWeight&&pt.targetReps===fe.targetReps),xt=`${xe.name} ${fe.targetWeight}kg  ${fe.targetReps}`),it||ke.push({type:"strength",key:xe.key,...fe.targetType==="time"?{targetType:"time",targetValue:fe.targetValue}:fe.targetType==="reps"?{targetType:"reps",targetReps:fe.targetReps}:fe.targetType==="distance"?{targetType:"distance",targetDistance:fe.targetDistance}:{targetWeight:fe.targetWeight,targetReps:fe.targetReps},achievedMonth:lt,label:xt})}}):yo.forEach(xe=>{const fe=Oe[xe.key];if(!fe||!fe.targetValue)return;const rt=ge[xe.key];if(rt==null)return;const mt=fe.startValue||0,it=fe.targetValue,xt=it-mt;(xt===0?rt===it?1:0:Math.max(0,(rt-mt)/xt))>=1&&(ze.some(Is=>Is.type==="metric"&&Is.key===xe.key&&Is.targetValue===it)||ke.push({type:"metric",key:xe.key,targetValue:it,achievedMonth:lt,label:`${xe.name} ${it}${xe.suffix}`}))}),ke.length>0){const xe=[...ze,...ke];await vn(Ge(je,"juniorAchievements",ft.id),{clientId:ft.id,badges:xe,updatedAt:dt.now()}),gt(xe),_e(ke),setTimeout(()=>_e(null),5e3)}},Lt=($,ge)=>{if($==="strength"){const ke=Se[ge];if(!ke)return!1;switch(Lr.find(fe=>fe.key===ge)?.unit){case"time":return ze.some(fe=>fe.type==="strength"&&fe.key===ge&&fe.targetValue===ke.targetValue);case"reps":return ze.some(fe=>fe.type==="strength"&&fe.key===ge&&fe.targetReps===ke.targetReps);case"distance":return ze.some(fe=>fe.type==="strength"&&fe.key===ge&&fe.targetDistance===ke.targetDistance);default:return!ke.targetWeight&&!ke.targetReps?!1:ze.some(fe=>fe.type==="strength"&&fe.key===ge&&fe.targetWeight===ke.targetWeight&&fe.targetReps===ke.targetReps)}}else{const ke=Oe[ge];return!ke||!ke.targetValue?!1:ze.some(xe=>xe.type==="metric"&&xe.key===ge&&xe.targetValue===ke.targetValue)}},Mn=async()=>{p(!0);try{const $=`${ft.id}_${lt}`,ge=Xe||{};await vn(Ge(je,"juniorPBs",$),{clientId:ft.id,month:lt,benchmarks:V,bodyMetrics:ge.bodyMetrics||X||{},createdAt:ge.createdAt||dt.now(),updatedAt:dt.now()}),await Nt("strength",V),bt("Benchmarks saved!","success"),T(!1),await Et()}catch($){console.error("Error saving benchmarks:",$),bt("Failed to save. Please try again.","error")}p(!1)},Ct=async()=>{p(!0);try{const $=`${ft.id}_${lt}`,ge=Xe||{};await vn(Ge(je,"juniorPBs",$),{clientId:ft.id,month:lt,benchmarks:ge.benchmarks||V||{},bodyMetrics:X,createdAt:ge.createdAt||dt.now(),updatedAt:dt.now()}),await Nt("metric",X),bt("Body metrics saved!","success"),O(!1),await Et()}catch($){console.error("Error saving metrics:",$),bt("Failed to save. Please try again.","error")}p(!1)},hn=($,ge,ke)=>{Z(xe=>({...xe,[$]:{...xe[$],[ge]:ke===""?"":parseFloat(ke)}}))},ye=($,ge)=>{ce(ke=>({...ke,[$]:ge===""?"":parseFloat(ge)}))},Ne=($,ge,ke)=>{A(xe=>({...xe,[$]:{...xe[$],[ge]:ke===""?"":parseFloat(ke)}}))},Pe=async()=>{p(!0);try{const $=`targets_${ft.id}`,ge=Xe?.benchmarks||{},ke={};Lr.forEach(xe=>{const fe=ge[xe.key];switch(xe.unit){case"time":E[xe.key]?.targetValue&&(ke[xe.key]={targetType:"time",targetValue:E[xe.key].targetValue,startValue:fe?.time||0});break;case"reps":E[xe.key]?.targetReps&&(ke[xe.key]={targetType:"reps",targetReps:E[xe.key].targetReps,startReps:fe?.reps||0});break;case"distance":E[xe.key]?.targetDistance&&(ke[xe.key]={targetType:"distance",targetDistance:E[xe.key].targetDistance,startDistance:fe?.distance||0});break;default:(E[xe.key]?.targetWeight||E[xe.key]?.targetReps)&&(ke[xe.key]={targetWeight:E[xe.key].targetWeight||0,targetReps:E[xe.key].targetReps||0,startWeight:fe?.weight||0,startReps:fe?.reps||0})}}),await vn(Ge(je,"juniorPBTargets",$),{clientId:ft.id,targets:ke,metricTargets:Oe,updatedAt:dt.now()}),Be(ke),A(ke),bt("Targets saved!","success"),U(!1)}catch($){console.error("Error saving targets:",$),bt("Failed to save targets.","error")}p(!1)},tt=($,ge)=>{M(ke=>({...ke,[$]:{...ke[$],targetValue:ge===""?"":parseFloat(ge)}}))},Je=async()=>{p(!0);try{const $=`targets_${ft.id}`,ge={};yo.forEach(ke=>{if(q[ke.key]?.targetValue){const xe=Xe?.bodyMetrics?.[ke.key]||0;ge[ke.key]={targetValue:q[ke.key].targetValue,startValue:xe}}}),await vn(Ge(je,"juniorPBTargets",$),{clientId:ft.id,targets:Se,metricTargets:ge,updatedAt:dt.now()}),I(ge),M(ge),bt("Metric targets saved!","success"),D(!1)}catch($){console.error("Error saving metric targets:",$),bt("Failed to save targets.","error")}p(!1)},Ue=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const $=Ge(je,"juniorPBTargets",`targets_${ft.id}`);await Vs($),Be({}),I({}),A({}),M({}),bt("All goals have been reset","success")}catch($){console.error("Error resetting targets:",$),bt("Failed to reset goals","error")}p(!1)}},nt=($,ge)=>{const ke=Se[$];if(!ke||!ge)return null;if(ke.targetType==="time"){if(!ke.targetValue)return null;const it=ke.startValue||0,xt=ke.targetValue,pt=ge.time||0,Zt=xt-it;return Zt<=0?pt>=xt?1:0:Math.max(0,Math.min((pt-it)/Zt,1))}if(ke.targetType==="reps"){if(!ke.targetReps)return null;const it=ke.startReps||0,xt=ke.targetReps,pt=ge.reps||0,Zt=xt-it;return Zt<=0?pt>=xt?1:0:Math.max(0,Math.min((pt-it)/Zt,1))}if(ke.targetType==="distance"){if(!ke.targetDistance)return null;const it=ke.startDistance||0,xt=ke.targetDistance,pt=ge.distance||0,Zt=xt-it;return Zt<=0?pt>=xt?1:0:Math.max(0,Math.min((pt-it)/Zt,1))}if(!ke.targetWeight&&!ke.targetReps)return null;const xe=(ke.startWeight||0)*(ke.startReps||0),fe=(ke.targetWeight||0)*(ke.targetReps||0),rt=(ge.weight||0)*(ge.reps||0),mt=fe-xe;return mt<=0?rt>=fe?1:0:Math.max(0,Math.min((rt-xe)/mt,1))},Ke=$=>{const ge=Oe[$];if(!ge||!ge.targetValue)return null;const ke=Xe?.bodyMetrics?.[$];if(ke==null)return null;const xe=ge.startValue||0,fe=ge.targetValue,rt=fe-xe;return rt===0?ke===fe?1:0:Math.max(0,Math.min((ke-xe)/rt,1))},He=$=>{Qe.current=$.touches[0].clientX,Fe.current=0},St=$=>{Fe.current=$.touches[0].clientX-Qe.current},Jt=()=>{Fe.current<-50?We(g+1):Fe.current>50&&We(g-1),Fe.current=0},Bt=$=>{const ge=Xe?.bodyMetrics?.[$],ke=ts?.bodyMetrics?.[$];return ge==null||ke==null?null:parseFloat((ge-ke).toFixed(2))},sn=n.find($=>$.month===B),Dn=n.find($=>$.month===pe);if(re||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!wt||!ut||!ft)return null;const Rt=Lr[g],on=Xe?.benchmarks?.[Rt.key],zn=ts?.benchmarks?.[Rt.key],kn=xl(Rt,on),ys=xl(Rt,zn),ns=zp(kn,ys),En=nt(Rt.key,on),Yn=En!==null,ss=En!==null&&En>=1,vs=Yn?Math.round(En*60):kn>0?15:0,Hn=Se[Rt.key],As=$=>$?$.targetType==="time"?`${$.startValue||0}s  ${$.targetValue}s`:$.targetType==="reps"?`${$.startReps||0}  ${$.targetReps} reps`:$.targetType==="distance"?`${$.startDistance||0}  ${$.targetDistance}cm`:`${$.startWeight||0}kg${$.startReps||0}  ${$.targetWeight}kg${$.targetReps}`:null;return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>kt("/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Junior Strength Tests"}),a.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:Le,onTouchStart:He,onTouchMove:St,onTouchEnd:Jt,children:[a.jsx("div",{className:`pb-ring-container slide-from-${ae.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Dy.map(($,ge)=>{const ke=ge<Math.round(vs);return a.jsx("line",{x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,className:`pb-ring-tick ${ke?ss?"hit":"filled":"empty"}`,strokeWidth:$.thick?"3":"2"},ge)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:Rt.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[Rt.name,Lt("strength",Rt.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:on?id(Rt,on):"-"}),ns!==null&&a.jsxs("div",{className:`pb-ring-change ${ns>=0?"positive":"negative"}`,children:[ns>=0?"+":"",ns.toFixed(1),"%"]}),ns===null&&on&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),Hn&&a.jsx("div",{className:`pb-ring-target ${ss?"hit":""}`,children:ss?"Target hit!":As(Hn)}),!Hn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:Lr.map(($,ge)=>a.jsx("button",{className:`pb-dot ${ge===g?"active":""}`,onClick:()=>We(ge)},ge))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>We(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>We(g+1),disabled:g===Lr.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(yD,{data:n,exerciseKey:Rt.key,unit:Rt.unit})]})]}),!w&&!G&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:Xe?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>U(!0),children:Object.keys(Se).length>0?"Edit Targets":"Set Targets"}),(Object.keys(Se).length>0||Object.keys(Oe).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ue,disabled:h,children:"Reset All Goals"})]}),w&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Or(lt)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),Z(Xe?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:Lr.map($=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:$.name}),$.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:V[$.key]?.weight??"",onChange:ge=>hn($.key,"weight",ge.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:V[$.key]?.reps??"",onChange:ge=>hn($.key,"reps",ge.target.value),placeholder:"0"})]})]}):$.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Reps (max in 1 min)"}),a.jsx("input",{type:"number",value:V[$.key]?.reps??"",onChange:ge=>hn($.key,"reps",ge.target.value),placeholder:"0"})]})}):$.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:V[$.key]?.distance??"",onChange:ge=>hn($.key,"distance",ge.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:V[$.key]?.time??"",onChange:ge=>hn($.key,"time",ge.target.value),placeholder:"0"})]})})]},$.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),Z(Xe?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Mn,disabled:h,children:h?"Saving...":"Save"})]})]}),G&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{U(!1),A(Se)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Lr.map($=>{const ge=Xe?.benchmarks?.[$.key];let ke="-";if(ge)switch($.unit){case"weight":(ge.weight||ge.reps)&&(ke=`${ge.weight||0}kg  ${ge.reps||0}`);break;case"time":ge.time&&(ke=`${ge.time}s`);break;case"reps":ge.reps&&(ke=`${ge.reps} reps`);break;case"distance":ge.distance&&(ke=`${ge.distance} cm`);break}return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:$.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ke]})]}),$.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:E[$.key]?.targetWeight??"",onChange:xe=>Ne($.key,"targetWeight",xe.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:E[$.key]?.targetReps??"",onChange:xe=>Ne($.key,"targetReps",xe.target.value),placeholder:"0"})]})]}):$.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Reps (in 1 min)"}),a.jsx("input",{type:"number",value:E[$.key]?.targetReps??"",onChange:xe=>Ne($.key,"targetReps",xe.target.value),placeholder:"0"})]})}):$.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:E[$.key]?.targetDistance??"",onChange:xe=>Ne($.key,"targetDistance",xe.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:E[$.key]?.targetValue??"",onChange:xe=>Ne($.key,"targetValue",xe.target.value),placeholder:"0"})]})})]},$.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{U(!1),A(Se)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Pe,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!S&&!P&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Or(lt)}),a.jsx("div",{className:"pb-metrics-list",children:yo.map($=>{const ge=Xe?.bodyMetrics?.[$.key],ke=Bt($.key),xe=Oe[$.key],fe=Ke($.key),rt=fe!==null&&fe>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[$.name,Lt("metric",$.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),xe&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",xe.targetValue," ",$.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ge!=null?`${ge} ${$.suffix}`:"-"}),ke!==null&&a.jsxs("span",{className:`pb-metric-change ${ke>0?"up":ke<0?"down":"same"}`,children:[ke>0?"+":"",ke," ",$.suffix]})]})]}),fe!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${rt?"hit":""}`,style:{width:`${Math.round(fe*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${rt?"hit":""}`,children:rt?"Hit!":`${Math.round(fe*100)}%`})]})]},$.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>O(!0),children:Xe?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(Oe).length>0?"Edit Targets":"Set Targets"}),(Object.keys(Se).length>0||Object.keys(Oe).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ue,disabled:h,children:"Reset All Goals"})]})]}),S&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Or(lt)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{O(!1),ce(Xe?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:yo.map($=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[$.name," (",$.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:X[$.key]??"",onChange:ge=>ye($.key,ge.target.value),placeholder:"0"})]})},$.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{O(!1),ce(Xe?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ct,disabled:h,children:h?"Saving...":"Save"})]})]}),P&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),M(Oe)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),yo.map($=>{const ge=Xe?.bodyMetrics?.[$.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:$.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ge!=null?`${ge} ${$.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",$.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:q[$.key]?.targetValue??"",onChange:ke=>tt($.key,ke.target.value),placeholder:"0"})]})})]},$.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),M(Oe)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Je,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[ze.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...ze].reverse().map(($,ge)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ge*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:$.label}),a.jsx("span",{className:"pb-achievement-date",children:Or($.achievedMonth)})]})]},ge))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${Ve?"active":""}`,onClick:()=>{C(!Ve),!Ve&&n.length>=2&&(oe(n[0].month),Ae(n[n.length-1].month))},children:Ve?"Back to Timeline":"Compare Months"})}),Ve?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:B,onChange:$=>oe($.target.value),children:n.map($=>a.jsx("option",{value:$.month,children:Or($.month)},$.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:pe,onChange:$=>Ae($.target.value),children:n.map($=>a.jsx("option",{value:$.month,children:Or($.month)},$.month))})]})]}),sn&&Dn&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Tests"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Or(B).split(" ")[0]}),a.jsx("span",{children:Or(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),Lr.map($=>{const ge=sn.benchmarks?.[$.key],ke=Dn.benchmarks?.[$.key],xe=xl($,ge),fe=xl($,ke),rt=zp(fe,xe);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:$.name}),a.jsx("span",{className:"pb-compare-val",children:ge?id($,ge):"-"}),a.jsx("span",{className:"pb-compare-val",children:ke?id($,ke):"-"}),a.jsx("span",{className:`pb-compare-change ${rt!==null?rt>=0?"positive":"negative":""}`,children:rt!==null?`${rt>=0?"+":""}${rt.toFixed(1)}%`:"-"})]},$.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Or(B).split(" ")[0]}),a.jsx("span",{children:Or(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),yo.map($=>{const ge=sn.bodyMetrics?.[$.key],ke=Dn.bodyMetrics?.[$.key],xe=ge!=null&&ke!=null?parseFloat((ke-ge).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:$.name}),a.jsx("span",{className:"pb-compare-val",children:ge!=null?`${ge}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:ke!=null?`${ke}`:"-"}),a.jsx("span",{className:`pb-compare-change ${xe!==null?xe>0?"positive":xe<0?"negative":"neutral":""}`,children:xe!==null?`${xe>0?"+":""}${xe} ${$.suffix}`:"-"})]},$.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map(($,ge)=>{const ke=n.filter(xe=>xe.month<$.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ge*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Or($.month)}),$.benchmarks&&Object.keys($.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Tests"}),Lr.map(xe=>{const fe=$.benchmarks[xe.key];if(!fe)return null;const rt=ke?.benchmarks?.[xe.key],mt=xl(xe,fe),it=xl(xe,rt),xt=zp(mt,it);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:xe.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:id(xe,fe)}),xt!==null&&a.jsxs("span",{className:`pb-timeline-change ${xt>=0?"positive":"negative"}`,children:[xt>=0?"+":"",xt.toFixed(1),"%"]})]})]},xe.key)})]}),$.bodyMetrics&&Object.keys($.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),yo.map(xe=>{const fe=$.bodyMetrics[xe.key];if(fe==null)return null;const rt=ke?.bodyMetrics?.[xe.key],mt=rt!=null?parseFloat((fe-rt).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:xe.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[fe," ",xe.suffix]}),mt!==null&&a.jsxs("span",{className:`pb-timeline-change ${mt>0?"positive":mt<0?"negative":"neutral"}`,children:[mt>0?"+":"",mt," ",xe.suffix]})]})]},xe.key)})]})]})]},$.id)})})]})})]}),Y&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>_e(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:Y.map(($,ge)=>a.jsx("div",{className:"pb-celebration-badge",children:$.label},ge))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),De&&a.jsxs("div",{className:`toast-notification ${De.type}`,children:[a.jsx("span",{className:"toast-icon",children:De.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:De.message}),a.jsx("button",{className:"toast-close",onClick:()=>le(null),children:""})]}),a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>kt("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>kt("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>kt("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),ft?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>kt("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]})]})}const aa=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],vo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function bD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Vr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function od(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function d2(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function wl(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Fp(s,e){return!e||e===0?null:(s-e)/e*100}function xD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(U=>{const V=U.benchmarks?.[e];return V?n==="time"?V.time||0:(V.weight||0)*(V.reps||0):0}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,w=p-y*2,T=g-y*2,S=i.map((U,V)=>{const Z=y+V/(i.length-1)*w,X=y+T-(U-u)/h*T;return{x:Z,y:X,value:U}}),O=S.map((U,V)=>`${V===0?"M":"L"} ${U.x} ${U.y}`).join(" "),G=O+` L ${S[S.length-1].x} ${y+T} L ${S[0].x} ${y+T} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:G,fill:"url(#trendGradient)"}),a.jsx("path",{d:O,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),S.map((U,V)=>a.jsx("circle",{cx:U.x,cy:U.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},V))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((U,V)=>a.jsxs("span",{className:"pb-trend-label",children:[U.month.split("-")[1],"/",U.month.split("-")[0].slice(2)]},V))})]})}function wD(){const[s,e]=_.useState("bests"),[n,i]=_.useState([]),[l,u]=_.useState(!0),[h,p]=_.useState(!1),[g,y]=_.useState(0),[w,T]=_.useState(!1),[S,O]=_.useState(!1),[G,U]=_.useState(!1),[V,Z]=_.useState({}),[X,ce]=_.useState({}),[Se,Be]=_.useState({}),[Oe,I]=_.useState({}),[E,A]=_.useState({}),[P,D]=_.useState(!1),[q,M]=_.useState({}),[ze,gt]=_.useState([]),[Y,_e]=_.useState(null),[De,le]=_.useState(null),[Ve,C]=_.useState(!1),[B,oe]=_.useState(""),[pe,Ae]=_.useState(""),[Le,Qe]=_.useState({}),[Fe,ae]=_.useState({}),[We,wt]=_.useState(null),[ut,ft]=_.useState(null),[re,qt]=_.useState(""),kt=_.useRef(null),bt=_.useRef(0),Et=_.useRef(0),lt=_.useRef("right"),Xe=_.useCallback(H=>{y(ue=>{const b=Math.max(0,Math.min(aa.length-1,H));return b===ue?ue:(lt.current=b>ue?"right":"left",b)})},[]),{currentUser:Ht,isClient:ts,clientData:Nt,loading:Lt}=hr(),{isDark:Mn}=Gr(),Ct=Rs(),[hn]=BE(),ye=hn.get("mode")==="corebuddy",Ne=!ye&&(!Nt?.clientType||Nt.clientType==="block"),Pe=_.useCallback((H,ue="info")=>{le({message:H,type:ue}),setTimeout(()=>le(null),4e3)},[]);_.useEffect(()=>{!Lt&&(!Ht||!ts)&&Ct("/")},[Ht,ts,Lt,Ct]),_.useEffect(()=>{Nt&&(Ne?tt():(async()=>{try{const[ue,b,j]=await Promise.all([In(Ge(je,"coreBuddyPBs",Nt.id)),In(Ge(je,"coreBuddyTargets",Nt.id)),In(Ge(je,"coreBuddyAchievements",Nt.id))]);ue.exists()&&Qe(ue.data().exercises||{}),b.exists()&&ae(b.data().targets||{}),j.exists()&&wt(j.data())}catch(ue){console.error("Error loading Core Buddy PBs:",ue)}u(!1)})())},[Nt]);const tt=async()=>{try{const H=yn(Ft(je,"personalBests"),nn("clientId","==",Nt.id)),b=(await un(H)).docs.map(ve=>({id:ve.id,...ve.data()}));b.sort((ve,we)=>ve.month.localeCompare(we.month)),i(b);const j=yn(Ft(je,"personalBestTargets"),nn("clientId","==",Nt.id)),L=await un(j);if(!L.empty){const ve=L.docs[0].data();Be(ve.targets||{}),I(ve.metricTargets||{}),A(ve.targets||{}),M(ve.metricTargets||{})}const K=yn(Ft(je,"achievements"),nn("clientId","==",Nt.id)),Me=await un(K);Me.empty||gt(Me.docs[0].data().badges||[])}catch(H){console.error("Error fetching personal bests:",H)}u(!1)},Je=async()=>{if(!ut||!re||!Nt)return;const H=parseFloat(re),ue=Le[ut];if(!ue||H<=ue.weight){Pe("Target must be higher than current PB","error");return}p(!0);try{const b={...Fe,[ut]:{targetWeight:H,setAt:dt.now(),currentPBWhenSet:ue.weight}};await vn(Ge(je,"coreBuddyTargets",Nt.id),{clientId:Nt.id,targets:b,updatedAt:dt.now()}),ae(b),ft(null),qt(""),Pe("Target set!","success")}catch(b){console.error("Error saving target:",b),Pe("Failed to save target","error")}p(!1)},Ue=H=>{if(!We?.badges)return!1;const ue=Fe[H];return ue?We.badges.some(b=>b.type==="pb_target"&&b.exercise===H&&b.targetWeight===ue.targetWeight):!1},nt=H=>{const ue=Fe[H];if(!ue)return null;const b=Le[H];if(!b)return 0;const j=ue.currentPBWhenSet||0,L=ue.targetWeight,K=L-j;return K<=0?b.weight>=L?1:0:Math.max(0,Math.min((b.weight-j)/K,1))},Ke=bD(),He=n.find(H=>H.month===Ke),St=n.filter(H=>H.month<Ke),Jt=St.length>0?St[St.length-1]:null;_.useEffect(()=>{He?(Z(He.benchmarks||{}),ce(He.bodyMetrics||{})):(Z({}),ce({}))},[He?.id]);const Bt=async(H,ue)=>{const b=[];if(H==="strength"?aa.forEach(j=>{const L=Se[j.key];if(!L)return;const K=ue[j.key];if(!K)return;let Me;if(L.targetType==="time"){if(!L.targetValue)return;const ve=L.startValue||0,we=K.time||0,st=L.targetValue-ve;Me=st===0?we>=L.targetValue?1:0:Math.max(0,(we-ve)/st)}else{if(!L.targetWeight&&!L.targetReps)return;const ve=(L.startWeight||0)*(L.startReps||0),we=(L.targetWeight||0)*(L.targetReps||0),st=(K.weight||0)*(K.reps||0),et=we-ve;Me=et===0?st>=we?1:0:Math.max(0,(st-ve)/et)}if(Me>=1&&!(L.targetType==="time"?ze.some(we=>we.type==="strength"&&we.key===j.key&&we.targetValue===L.targetValue):ze.some(we=>we.type==="strength"&&we.key===j.key&&we.targetWeight===L.targetWeight&&we.targetReps===L.targetReps))){const we=L.targetType==="time"?`${j.name} ${L.targetValue}s`:`${j.name} ${L.targetWeight}kg  ${L.targetReps}`;b.push({type:"strength",key:j.key,...L.targetType==="time"?{targetType:"time",targetValue:L.targetValue}:{targetWeight:L.targetWeight,targetReps:L.targetReps},achievedMonth:Ke,label:we})}}):vo.forEach(j=>{const L=Oe[j.key];if(!L||!L.targetValue)return;const K=ue[j.key];if(K==null)return;const Me=L.startValue||0,ve=L.targetValue,we=ve-Me;(we===0?K===ve?1:0:Math.max(0,(K-Me)/we))>=1&&(ze.some(F=>F.type==="metric"&&F.key===j.key&&F.targetValue===ve)||b.push({type:"metric",key:j.key,targetValue:ve,achievedMonth:Ke,label:`${j.name} ${ve}${j.suffix}`}))}),b.length>0){const j=[...ze,...b];await vn(Ge(je,"achievements",Nt.id),{clientId:Nt.id,badges:j,updatedAt:dt.now()}),gt(j),_e(b),setTimeout(()=>_e(null),5e3)}},sn=(H,ue)=>{if(H==="strength"){const b=Se[ue];return b?b.targetType==="time"?ze.some(j=>j.type==="strength"&&j.key===ue&&j.targetValue===b.targetValue):!b.targetWeight&&!b.targetReps?!1:ze.some(j=>j.type==="strength"&&j.key===ue&&j.targetWeight===b.targetWeight&&j.targetReps===b.targetReps):!1}else{const b=Oe[ue];return!b||!b.targetValue?!1:ze.some(j=>j.type==="metric"&&j.key===ue&&j.targetValue===b.targetValue)}},Dn=async()=>{p(!0);try{const H=`${Nt.id}_${Ke}`,ue=He||{};await vn(Ge(je,"personalBests",H),{clientId:Nt.id,month:Ke,benchmarks:V,bodyMetrics:ue.bodyMetrics||X||{},createdAt:ue.createdAt||dt.now(),updatedAt:dt.now()}),await Bt("strength",V),Pe("Benchmarks saved!","success"),T(!1),await tt()}catch(H){console.error("Error saving benchmarks:",H),Pe("Failed to save. Please try again.","error")}p(!1)},Rt=async()=>{p(!0);try{const H=`${Nt.id}_${Ke}`,ue=He||{};await vn(Ge(je,"personalBests",H),{clientId:Nt.id,month:Ke,benchmarks:ue.benchmarks||V||{},bodyMetrics:X,createdAt:ue.createdAt||dt.now(),updatedAt:dt.now()}),await Bt("metric",X),Pe("Body metrics saved!","success"),O(!1),await tt()}catch(H){console.error("Error saving metrics:",H),Pe("Failed to save. Please try again.","error")}p(!1)},on=(H,ue,b)=>{Z(j=>({...j,[H]:{...j[H],[ue]:b===""?"":parseFloat(b)}}))},zn=(H,ue)=>{ce(b=>({...b,[H]:ue===""?"":parseFloat(ue)}))},kn=(H,ue,b)=>{A(j=>({...j,[H]:{...j[H],[ue]:b===""?"":parseFloat(b)}}))},ys=async()=>{p(!0);try{const H=`targets_${Nt.id}`,ue=He?.benchmarks||{},b={};aa.forEach(j=>{const L=ue[j.key];j.unit==="time"?E[j.key]?.targetValue&&(b[j.key]={targetType:"time",targetValue:E[j.key].targetValue,startValue:L?.time||0}):(E[j.key]?.targetWeight||E[j.key]?.targetReps)&&(b[j.key]={targetWeight:E[j.key].targetWeight||0,targetReps:E[j.key].targetReps||0,startWeight:L?.weight||0,startReps:L?.reps||0})}),await vn(Ge(je,"personalBestTargets",H),{clientId:Nt.id,targets:b,metricTargets:Oe,updatedAt:dt.now()}),Be(b),A(b),Pe("Targets saved!","success"),U(!1)}catch(H){console.error("Error saving targets:",H),Pe("Failed to save targets.","error")}p(!1)},ns=(H,ue)=>{M(b=>({...b,[H]:{...b[H],targetValue:ue===""?"":parseFloat(ue)}}))},En=async()=>{p(!0);try{const H=`targets_${Nt.id}`,ue={};vo.forEach(b=>{if(q[b.key]?.targetValue){const j=He?.bodyMetrics?.[b.key]||0;ue[b.key]={targetValue:q[b.key].targetValue,startValue:j}}}),await vn(Ge(je,"personalBestTargets",H),{clientId:Nt.id,targets:Se,metricTargets:ue,updatedAt:dt.now()}),I(ue),M(ue),Pe("Metric targets saved!","success"),D(!1)}catch(H){console.error("Error saving metric targets:",H),Pe("Failed to save targets.","error")}p(!1)},Yn=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const H=Ge(je,"personalBestTargets",`targets_${Nt.id}`);await Vs(H),Be({}),I({}),A({}),M({}),Pe("All goals have been reset","success")}catch(H){console.error("Error resetting targets:",H),Pe("Failed to reset goals","error")}p(!1)}},ss=(H,ue)=>{const b=Se[H];if(!b||!ue)return null;if(b.targetType==="time"){if(!b.targetValue)return null;const ve=b.startValue||0,we=b.targetValue,st=ue.time||0,et=we-ve;return et<=0?st>=we?1:0:Math.max(0,Math.min((st-ve)/et,1))}if(!b.targetWeight&&!b.targetReps)return null;const j=(b.startWeight||0)*(b.startReps||0),L=(b.targetWeight||0)*(b.targetReps||0),K=(ue.weight||0)*(ue.reps||0),Me=L-j;return Me<=0?K>=L?1:0:Math.max(0,Math.min((K-j)/Me,1))},vs=H=>{const ue=Oe[H];if(!ue||!ue.targetValue)return null;const b=He?.bodyMetrics?.[H];if(b==null)return null;const j=ue.startValue||0,L=ue.targetValue,K=L-j;return K===0?b===L?1:0:Math.max(0,Math.min((b-j)/K,1))},Hn=H=>{bt.current=H.touches[0].clientX,Et.current=0},As=H=>{Et.current=H.touches[0].clientX-bt.current},$=()=>{Et.current<-50?Xe(g+1):Et.current>50&&Xe(g-1),Et.current=0},ge=H=>{const ue=He?.bodyMetrics?.[H],b=Jt?.bodyMetrics?.[H];return ue==null||b==null?null:parseFloat((ue-b).toFixed(2))},ke=n.find(H=>H.month===B),xe=n.find(H=>H.month===pe);if(Lt||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Ht||!ts||!Nt)return null;if(Ne&&Nt?.isJunior)return a.jsx(vD,{});const fe=aa[g],rt=He?.benchmarks?.[fe.key],mt=Jt?.benchmarks?.[fe.key],it=wl(fe,rt),xt=wl(fe,mt),pt=Fp(it,xt),Zt=ss(fe.key,rt),Is=Zt!==null,rs=Zt!==null&&Zt>=1,bs=Is?Math.round(Zt*60):it>0?15:0,Tn=Se[fe.key];return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>Ct(ye?"/client/core-buddy":"/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Personal Bests"}),a.jsx("p",{children:Ne?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!Ne&&a.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Le).length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("div",{className:"pb-cb-empty-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),a.jsx("h4",{children:"No personal bests yet"}),a.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):a.jsx("div",{className:"pb-cb-grid",children:Object.entries(Le).sort(([H],[ue])=>H.localeCompare(ue)).map(([H,ue],b)=>{const j=Fe[H],L=nt(H),K=L!==null&&L>=1,Me=Ue(H),ve=L!==null?Math.round(L*60):60;return a.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${b*.05}s`},children:[a.jsxs("div",{className:"pb-cb-card-ring",children:[a.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:A3.map((we,st)=>{const et=st<ve;return a.jsx("line",{x1:we.x1,y1:we.y1,x2:we.x2,y2:we.y2,className:`pb-ring-tick ${et?K?"hit":"filled":"empty"}`,strokeWidth:we.thick?"2":"1.5"},st)})}),a.jsx("div",{className:"pb-cb-ring-icon",children:Me?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),a.jsxs("div",{className:"pb-cb-card-info",children:[a.jsx("h4",{className:"pb-cb-card-name",children:H}),a.jsxs("div",{className:"pb-cb-card-value",children:[ue.weight,"kg  ",ue.reps]}),ue.achievedAt&&a.jsx("div",{className:"pb-cb-card-date",children:(ue.achievedAt.toDate?ue.achievedAt.toDate():new Date(ue.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),j&&!K&&a.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",j.targetWeight,"kg (",Math.round((L||0)*100),"%)"]}),j&&K&&!Me&&a.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),Me&&a.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),a.jsx("div",{className:"pb-cb-card-action",children:j?K&&Me?a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{ft(H),qt("")},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{ft(H),qt("")},children:a.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},H)})}),Object.keys(Le).length>0&&a.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>Ct("/client/core-buddy/achievements"),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),ut&&a.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>ft(null),children:a.jsxs("div",{className:"pb-cb-target-modal",onClick:H=>H.stopPropagation(),children:[a.jsx("h3",{children:"Set Target"}),a.jsx("p",{className:"pb-cb-target-exercise-name",children:ut}),a.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",a.jsxs("strong",{children:[Le[ut]?.weight,"kg"]})]}),a.jsxs("div",{className:"pb-cb-target-input-wrap",children:[a.jsx("label",{children:"Your target (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:re,onChange:H=>qt(H.target.value),placeholder:String((Le[ut]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),a.jsxs("div",{className:"pb-cb-target-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>ft(null),children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Je,disabled:h,children:h?"Saving...":"Set Target"})]})]})})]}),Ne&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:kt,onTouchStart:Hn,onTouchMove:As,onTouchEnd:$,children:[a.jsx("div",{className:`pb-ring-container slide-from-${lt.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Dy.map((H,ue)=>{const b=ue<Math.round(bs);return a.jsx("line",{x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,className:`pb-ring-tick ${b?rs?"hit":"filled":"empty"}`,strokeWidth:H.thick?"3":"2"},ue)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:fe.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[fe.name,sn("strength",fe.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:rt?fe.unit==="time"?od(rt.time):d2(rt.weight,rt.reps):"-"}),pt!==null&&a.jsxs("div",{className:`pb-ring-change ${pt>=0?"positive":"negative"}`,children:[pt>=0?"+":"",pt.toFixed(1),"%"]}),pt===null&&rt&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),Tn&&a.jsx("div",{className:`pb-ring-target ${rs?"hit":""}`,children:rs?"Target hit!":Tn.targetType==="time"?`${Tn.startValue||0}s  ${Tn.targetValue}s`:`${Tn.startWeight||0}kg${Tn.startReps||0}  ${Tn.targetWeight}kg${Tn.targetReps}`}),!Tn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:aa.map((H,ue)=>a.jsx("button",{className:`pb-dot ${ue===g?"active":""}`,onClick:()=>Xe(ue)},ue))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Xe(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Xe(g+1),disabled:g===aa.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(xD,{data:n,exerciseKey:fe.key,unit:fe.unit})]})]}),!w&&!G&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:He?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>U(!0),children:Object.keys(Se).length>0?"Edit Targets":"Set Targets"}),(Object.keys(Se).length>0||Object.keys(Oe).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Yn,disabled:h,children:"Reset All Goals"})]}),w&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Vr(Ke)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),Z(He?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:aa.map(H=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),H.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:V[H.key]?.weight??"",onChange:ue=>on(H.key,"weight",ue.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:V[H.key]?.reps??"",onChange:ue=>on(H.key,"reps",ue.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:V[H.key]?.time??"",onChange:ue=>on(H.key,"time",ue.target.value),placeholder:"0"})]})})]},H.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),Z(He?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Dn,disabled:h,children:h?"Saving...":"Save"})]})]}),G&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{U(!1),A(Se)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),aa.map(H=>{const ue=He?.benchmarks?.[H.key];let b="-";return ue&&(H.unit==="time"&&ue.time?b=`${ue.time}s`:(ue.weight||ue.reps)&&(b=`${ue.weight||0}kg  ${ue.reps||0}`)),a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",b]})]}),H.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:E[H.key]?.targetWeight??"",onChange:j=>kn(H.key,"targetWeight",j.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:E[H.key]?.targetReps??"",onChange:j=>kn(H.key,"targetReps",j.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:E[H.key]?.targetValue??"",onChange:j=>kn(H.key,"targetValue",j.target.value),placeholder:"0"})]})})]},H.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{U(!1),A(Se)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:ys,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!S&&!P&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Vr(Ke)}),a.jsx("div",{className:"pb-metrics-list",children:vo.map(H=>{const ue=He?.bodyMetrics?.[H.key],b=ge(H.key),j=Oe[H.key],L=vs(H.key),K=L!==null&&L>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[H.name,sn("metric",H.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),j&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",j.targetValue," ",H.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ue!=null?`${ue} ${H.suffix}`:"-"}),b!==null&&a.jsxs("span",{className:`pb-metric-change ${b>0?"up":b<0?"down":"same"}`,children:[b>0?"+":"",b," ",H.suffix]})]})]}),L!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${K?"hit":""}`,style:{width:`${Math.round(L*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${K?"hit":""}`,children:K?"Hit!":`${Math.round(L*100)}%`})]})]},H.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>O(!0),children:He?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(Oe).length>0?"Edit Targets":"Set Targets"}),(Object.keys(Se).length>0||Object.keys(Oe).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Yn,disabled:h,children:"Reset All Goals"})]})]}),S&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Vr(Ke)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{O(!1),ce(He?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:vo.map(H=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[H.name," (",H.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:X[H.key]??"",onChange:ue=>zn(H.key,ue.target.value),placeholder:"0"})]})},H.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{O(!1),ce(He?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Rt,disabled:h,children:h?"Saving...":"Save"})]})]}),P&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),M(Oe)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),vo.map(H=>{const ue=He?.bodyMetrics?.[H.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ue!=null?`${ue} ${H.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",H.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:q[H.key]?.targetValue??"",onChange:b=>ns(H.key,b.target.value),placeholder:"0"})]})})]},H.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),M(Oe)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:En,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[ze.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...ze].reverse().map((H,ue)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ue*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:H.label}),a.jsx("span",{className:"pb-achievement-date",children:Vr(H.achievedMonth)})]})]},ue))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${Ve?"active":""}`,onClick:()=>{C(!Ve),!Ve&&n.length>=2&&(oe(n[0].month),Ae(n[n.length-1].month))},children:Ve?"Back to Timeline":"Compare Months"})}),Ve?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:B,onChange:H=>oe(H.target.value),children:n.map(H=>a.jsx("option",{value:H.month,children:Vr(H.month)},H.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:pe,onChange:H=>Ae(H.target.value),children:n.map(H=>a.jsx("option",{value:H.month,children:Vr(H.month)},H.month))})]})]}),ke&&xe&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Benchmarks"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Vr(B).split(" ")[0]}),a.jsx("span",{children:Vr(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),aa.map(H=>{const ue=ke.benchmarks?.[H.key],b=xe.benchmarks?.[H.key],j=wl(H,ue),L=wl(H,b),K=Fp(L,j);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:H.name}),a.jsx("span",{className:"pb-compare-val",children:ue?H.unit==="time"?od(ue.time):`${ue.weight}x${ue.reps}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:b?H.unit==="time"?od(b.time):`${b.weight}x${b.reps}`:"-"}),a.jsx("span",{className:`pb-compare-change ${K!==null?K>=0?"positive":"negative":""}`,children:K!==null?`${K>=0?"+":""}${K.toFixed(1)}%`:"-"})]},H.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Vr(B).split(" ")[0]}),a.jsx("span",{children:Vr(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),vo.map(H=>{const ue=ke.bodyMetrics?.[H.key],b=xe.bodyMetrics?.[H.key],j=ue!=null&&b!=null?parseFloat((b-ue).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:H.name}),a.jsx("span",{className:"pb-compare-val",children:ue!=null?`${ue}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:b!=null?`${b}`:"-"}),a.jsx("span",{className:`pb-compare-change ${j!==null?j>0?"positive":j<0?"negative":"neutral":""}`,children:j!==null?`${j>0?"+":""}${j} ${H.suffix}`:"-"})]},H.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((H,ue)=>{const b=n.find(j=>j.month<H.month&&n.indexOf(j)===n.indexOf(H)-1)||n.filter(j=>j.month<H.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ue*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Vr(H.month)}),H.benchmarks&&Object.keys(H.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Benchmarks"}),aa.map(j=>{const L=H.benchmarks[j.key];if(!L)return null;const K=b?.benchmarks?.[j.key],Me=wl(j,L),ve=wl(j,K),we=Fp(Me,ve);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:j.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:j.unit==="time"?od(L.time):d2(L.weight,L.reps)}),we!==null&&a.jsxs("span",{className:`pb-timeline-change ${we>=0?"positive":"negative"}`,children:[we>=0?"+":"",we.toFixed(1),"%"]})]})]},j.key)})]}),H.bodyMetrics&&Object.keys(H.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),vo.map(j=>{const L=H.bodyMetrics[j.key];if(L==null)return null;const K=b?.bodyMetrics?.[j.key],Me=K!=null?parseFloat((L-K).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:j.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[L," ",j.suffix]}),Me!==null&&a.jsxs("span",{className:`pb-timeline-change ${Me>0?"positive":Me<0?"negative":"neutral"}`,children:[Me>0?"+":"",Me," ",j.suffix]})]})]},j.key)})]})]})]},H.id)})})]})})]})]}),Y&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>_e(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:Y.map((H,ue)=>a.jsx("div",{className:"pb-celebration-badge",children:H.label},ue))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),De&&a.jsxs("div",{className:`toast-notification ${De.type}`,children:[a.jsx("span",{className:"toast-icon",children:De.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:De.message}),a.jsx("button",{className:"toast-close",onClick:()=>le(null),children:""})]}),Ne&&a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),Nt?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]}),ye&&a.jsx(Hr,{active:"progress"})]})}const _D=_.lazy(()=>Sr(()=>import("./Dashboard-Gr0N1dy3.js"),__vite__mapDeps([0,1]))),kD=_.lazy(()=>Sr(()=>import("./AddClient-lS5j4egw.js"),__vite__mapDeps([2,3]))),TD=_.lazy(()=>Sr(()=>import("./ClientDashboard-DAx5hs_r.js"),[])),jD=_.lazy(()=>Sr(()=>import("./ClientForms-BuwxoDt2.js"),__vite__mapDeps([4,5]))),ED=_.lazy(()=>Sr(()=>import("./ClientTools-nuxrzAHN.js"),__vite__mapDeps([6,7]))),SD=_.lazy(()=>Sr(()=>import("./MacroCalculator-D-PlcP1v.js"),__vite__mapDeps([8,7]))),ND=_.lazy(()=>Sr(()=>import("./ProteinSnacks-Bh1HDmhM.js"),__vite__mapDeps([9,7]))),CD=_.lazy(()=>Sr(()=>import("./DailyMotivation-DYuOxsa2.js"),__vite__mapDeps([10,7]))),RD=_.lazy(()=>Sr(()=>import("./CircuitDashboard-C0ayXKnT.js"),__vite__mapDeps([11,12]))),AD=_.lazy(()=>Sr(()=>import("./CircuitBooking-D6xIeqnK.js"),__vite__mapDeps([13,14,12]))),ID=_.lazy(()=>Sr(()=>import("./Leaderboard-DVgYxA3t.js"),__vite__mapDeps([15,16])));function MD({children:s}){const{pathname:e}=Wr();return _.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),_.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function DD(){const s=Rs();return _.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function PD(){return a.jsx(N3,{children:a.jsx(S3,{children:a.jsxs(DE,{basename:"/login",children:[a.jsx(DD,{}),a.jsx(MD,{children:a.jsx(_.Suspense,{fallback:null,children:a.jsxs(cE,{children:[a.jsx(Vn,{path:"/",element:a.jsx(C3,{})}),a.jsx(Vn,{path:"/dashboard",element:a.jsx(_D,{})}),a.jsx(Vn,{path:"/add-client",element:a.jsx(kD,{})}),a.jsx(Vn,{path:"/client",element:a.jsx(TD,{})}),a.jsx(Vn,{path:"/client/forms",element:a.jsx(jD,{})}),a.jsx(Vn,{path:"/client/tools",element:a.jsx(ED,{})}),a.jsx(Vn,{path:"/client/tools/macros",element:a.jsx(SD,{})}),a.jsx(Vn,{path:"/client/tools/snacks",element:a.jsx(ND,{})}),a.jsx(Vn,{path:"/client/tools/motivation",element:a.jsx(CD,{})}),a.jsx(Vn,{path:"/client/personal-bests",element:a.jsx(wD,{})}),a.jsx(Vn,{path:"/client/circuit",element:a.jsx(RD,{})}),a.jsx(Vn,{path:"/client/circuit/booking",element:a.jsx(AD,{})}),a.jsx(Vn,{path:"/client/core-buddy",element:a.jsx(L3,{})}),a.jsx(Vn,{path:"/client/core-buddy/nutrition",element:a.jsx(B3,{})}),a.jsx(Vn,{path:"/client/core-buddy/workouts",element:a.jsx(Q3,{})}),a.jsx(Vn,{path:"/client/core-buddy/programmes",element:a.jsx(tD,{})}),a.jsx(Vn,{path:"/client/core-buddy/achievements",element:a.jsx(oD,{})}),a.jsx(Vn,{path:"/client/core-buddy/consistency",element:a.jsx(uD,{})}),a.jsx(Vn,{path:"/client/core-buddy/buddies",element:a.jsx(hD,{})}),a.jsx(Vn,{path:"/client/core-buddy/profile/:userId",element:a.jsx(dD,{})}),a.jsx(Vn,{path:"/client/core-buddy/feed",element:a.jsx(fD,{})}),a.jsx(Vn,{path:"/client/leaderboard",element:a.jsx(ID,{})}),a.jsx(Vn,{path:"*",element:a.jsx(oE,{to:"/",replace:!0})})]})})})]})})})}lj.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(PD,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{Hr as C,dt as T,Fi as a,Vs as b,Ft as c,je as d,Ge as e,LD as f,un as g,AC as h,In as i,a as j,hr as k,Gr as l,Rs as m,Dy as n,Ul as o,vn as p,yn as q,_ as r,VD as s,oa as u,nn as w};
