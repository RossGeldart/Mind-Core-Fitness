const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-C_9aSRMy.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-DphD5U79.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-wRqujvPX.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-ZQtUJOST.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-DfSdzsfT.js","assets/ProteinSnacks-C_KywfGT.js","assets/DailyMotivation-CEprNT1J.js","assets/CircuitDashboard-aET3qHNX.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-r3h11ZnO.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-Bmntorod.js","assets/Leaderboard-DUGNGeOY.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var Ym={exports:{}},Ac={};var z0;function IE(){if(z0)return Ac;z0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:a,key:d,ref:l!==void 0?l:null,props:u}}return Ac.Fragment=e,Ac.jsx=n,Ac.jsxs=n,Ac}var F0;function DE(){return F0||(F0=1,Ym.exports=IE()),Ym.exports}var i=DE(),Qm={exports:{}},Mt={};var H0;function ME(){if(H0)return Mt;H0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),k=Symbol.iterator;function P(V){return V===null||typeof V!="object"?null:(V=k&&V[k]||V["@@iterator"],typeof V=="function"?V:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,L={};function re(V,G,ge){this.props=V,this.context=G,this.refs=L,this.updater=ge||W}re.prototype.isReactComponent={},re.prototype.setState=function(V,G){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,G,"setState")},re.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function X(){}X.prototype=re.prototype;function he(V,G,ge){this.props=V,this.context=G,this.refs=L,this.updater=ge||W}var ke=he.prototype=new X;ke.constructor=he,B(ke,re.prototype),ke.isPureReactComponent=!0;var ze=Array.isArray;function Ae(){}var I={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function R(V,G,ge){var Se=ge.ref;return{$$typeof:s,type:V,key:G,ref:Se!==void 0?Se:null,props:ge}}function D(V,G){return R(V.type,G,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function H(V){var G={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ge){return G[ge]})}var A=/\/+/g;function We(V,G){return typeof V=="object"&&V!==null&&V.key!=null?H(""+V.key):G.toString(36)}function Nt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Ae,Ae):(V.status="pending",V.then(function(G){V.status==="pending"&&(V.status="fulfilled",V.value=G)},function(G){V.status==="pending"&&(V.status="rejected",V.reason=G)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Y(V,G,ge,Se,Ve){var Me=typeof V;(Me==="undefined"||Me==="boolean")&&(V=null);var nt=!1;if(V===null)nt=!0;else switch(Me){case"bigint":case"string":case"number":nt=!0;break;case"object":switch(V.$$typeof){case s:case e:nt=!0;break;case w:return nt=V._init,Y(nt(V._payload),G,ge,Se,Ve)}}if(nt)return Ve=Ve(V),nt=Se===""?"."+We(V,0):Se,ze(Ve)?(ge="",nt!=null&&(ge=nt.replace(A,"$&/")+"/"),Y(Ve,G,ge,"",function(Wt){return Wt})):Ve!=null&&(M(Ve)&&(Ve=D(Ve,ge+(Ve.key==null||V&&V.key===Ve.key?"":(""+Ve.key).replace(A,"$&/")+"/")+nt)),G.push(Ve)),1;nt=0;var ht=Se===""?".":Se+":";if(ze(V))for(var pt=0;pt<V.length;pt++)Se=V[pt],Me=ht+We(Se,pt),nt+=Y(Se,G,ge,Me,Ve);else if(pt=P(V),typeof pt=="function")for(V=pt.call(V),pt=0;!(Se=V.next()).done;)Se=Se.value,Me=ht+We(Se,pt++),nt+=Y(Se,G,ge,Me,Ve);else if(Me==="object"){if(typeof V.then=="function")return Y(Nt(V),G,ge,Se,Ve);throw G=String(V),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return nt}function Te(V,G,ge){if(V==null)return V;var Se=[],Ve=0;return Y(V,Se,"","",function(Me){return G.call(ge,Me,Ve++)}),Se}function De(V){if(V._status===-1){var G=V._result;G=G(),G.then(function(ge){(V._status===0||V._status===-1)&&(V._status=1,V._result=ge)},function(ge){(V._status===0||V._status===-1)&&(V._status=2,V._result=ge)}),V._status===-1&&(V._status=0,V._result=G)}if(V._status===1)return V._result.default;throw V._result}var ct=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},rt={map:Te,forEach:function(V,G,ge){Te(V,function(){G.apply(this,arguments)},ge)},count:function(V){var G=0;return Te(V,function(){G++}),G},toArray:function(V){return Te(V,function(G){return G})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Mt.Activity=T,Mt.Children=rt,Mt.Component=re,Mt.Fragment=n,Mt.Profiler=l,Mt.PureComponent=he,Mt.StrictMode=a,Mt.Suspense=g,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},Mt.cache=function(V){return function(){return V.apply(null,arguments)}},Mt.cacheSignal=function(){return null},Mt.cloneElement=function(V,G,ge){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Se=B({},V.props),Ve=V.key;if(G!=null)for(Me in G.key!==void 0&&(Ve=""+G.key),G)!S.call(G,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&G.ref===void 0||(Se[Me]=G[Me]);var Me=arguments.length-2;if(Me===1)Se.children=ge;else if(1<Me){for(var nt=Array(Me),ht=0;ht<Me;ht++)nt[ht]=arguments[ht+2];Se.children=nt}return R(V.type,Ve,Se)},Mt.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Mt.createElement=function(V,G,ge){var Se,Ve={},Me=null;if(G!=null)for(Se in G.key!==void 0&&(Me=""+G.key),G)S.call(G,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(Ve[Se]=G[Se]);var nt=arguments.length-2;if(nt===1)Ve.children=ge;else if(1<nt){for(var ht=Array(nt),pt=0;pt<nt;pt++)ht[pt]=arguments[pt+2];Ve.children=ht}if(V&&V.defaultProps)for(Se in nt=V.defaultProps,nt)Ve[Se]===void 0&&(Ve[Se]=nt[Se]);return R(V,Me,Ve)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(V){return{$$typeof:p,render:V}},Mt.isValidElement=M,Mt.lazy=function(V){return{$$typeof:w,_payload:{_status:-1,_result:V},_init:De}},Mt.memo=function(V,G){return{$$typeof:y,type:V,compare:G===void 0?null:G}},Mt.startTransition=function(V){var G=I.T,ge={};I.T=ge;try{var Se=V(),Ve=I.S;Ve!==null&&Ve(ge,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(Ae,ct)}catch(Me){ct(Me)}finally{G!==null&&ge.types!==null&&(G.types=ge.types),I.T=G}},Mt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Mt.use=function(V){return I.H.use(V)},Mt.useActionState=function(V,G,ge){return I.H.useActionState(V,G,ge)},Mt.useCallback=function(V,G){return I.H.useCallback(V,G)},Mt.useContext=function(V){return I.H.useContext(V)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(V,G){return I.H.useDeferredValue(V,G)},Mt.useEffect=function(V,G){return I.H.useEffect(V,G)},Mt.useEffectEvent=function(V){return I.H.useEffectEvent(V)},Mt.useId=function(){return I.H.useId()},Mt.useImperativeHandle=function(V,G,ge){return I.H.useImperativeHandle(V,G,ge)},Mt.useInsertionEffect=function(V,G){return I.H.useInsertionEffect(V,G)},Mt.useLayoutEffect=function(V,G){return I.H.useLayoutEffect(V,G)},Mt.useMemo=function(V,G){return I.H.useMemo(V,G)},Mt.useOptimistic=function(V,G){return I.H.useOptimistic(V,G)},Mt.useReducer=function(V,G,ge){return I.H.useReducer(V,G,ge)},Mt.useRef=function(V){return I.H.useRef(V)},Mt.useState=function(V){return I.H.useState(V)},Mt.useSyncExternalStore=function(V,G,ge){return I.H.useSyncExternalStore(V,G,ge)},Mt.useTransition=function(){return I.H.useTransition()},Mt.version="19.2.4",Mt}var q0;function ig(){return q0||(q0=1,Qm.exports=ME()),Qm.exports}var _=ig(),Xm={exports:{}},Ic={},Jm={exports:{}},Zm={};var $0;function PE(){return $0||($0=1,(function(s){function e(Y,Te){var De=Y.length;Y.push(Te);e:for(;0<De;){var ct=De-1>>>1,rt=Y[ct];if(0<l(rt,Te))Y[ct]=Te,Y[De]=rt,De=ct;else break e}}function n(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var Te=Y[0],De=Y.pop();if(De!==Te){Y[0]=De;e:for(var ct=0,rt=Y.length,V=rt>>>1;ct<V;){var G=2*(ct+1)-1,ge=Y[G],Se=G+1,Ve=Y[Se];if(0>l(ge,De))Se<rt&&0>l(Ve,ge)?(Y[ct]=Ve,Y[Se]=De,ct=Se):(Y[ct]=ge,Y[G]=De,ct=G);else if(Se<rt&&0>l(Ve,De))Y[ct]=Ve,Y[Se]=De,ct=Se;else break e}}return Te}function l(Y,Te){var De=Y.sortIndex-Te.sortIndex;return De!==0?De:Y.id-Te.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],w=1,T=null,k=3,P=!1,W=!1,B=!1,L=!1,re=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;function ke(Y){for(var Te=n(y);Te!==null;){if(Te.callback===null)a(y);else if(Te.startTime<=Y)a(y),Te.sortIndex=Te.expirationTime,e(g,Te);else break;Te=n(y)}}function ze(Y){if(B=!1,ke(Y),!W)if(n(g)!==null)W=!0,Ae||(Ae=!0,H());else{var Te=n(y);Te!==null&&Nt(ze,Te.startTime-Y)}}var Ae=!1,I=-1,S=5,R=-1;function D(){return L?!0:!(s.unstable_now()-R<S)}function M(){if(L=!1,Ae){var Y=s.unstable_now();R=Y;var Te=!0;try{e:{W=!1,B&&(B=!1,X(I),I=-1),P=!0;var De=k;try{t:{for(ke(Y),T=n(g);T!==null&&!(T.expirationTime>Y&&D());){var ct=T.callback;if(typeof ct=="function"){T.callback=null,k=T.priorityLevel;var rt=ct(T.expirationTime<=Y);if(Y=s.unstable_now(),typeof rt=="function"){T.callback=rt,ke(Y),Te=!0;break t}T===n(g)&&a(g),ke(Y)}else a(g);T=n(g)}if(T!==null)Te=!0;else{var V=n(y);V!==null&&Nt(ze,V.startTime-Y),Te=!1}}break e}finally{T=null,k=De,P=!1}Te=void 0}}finally{Te?H():Ae=!1}}}var H;if(typeof he=="function")H=function(){he(M)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,We=A.port2;A.port1.onmessage=M,H=function(){We.postMessage(null)}}else H=function(){re(M,0)};function Nt(Y,Te){I=re(function(){Y(s.unstable_now())},Te)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_next=function(Y){switch(k){case 1:case 2:case 3:var Te=3;break;default:Te=k}var De=k;k=Te;try{return Y()}finally{k=De}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(Y,Te){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var De=k;k=Y;try{return Te()}finally{k=De}},s.unstable_scheduleCallback=function(Y,Te,De){var ct=s.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?ct+De:ct):De=ct,Y){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=De+rt,Y={id:w++,callback:Te,priorityLevel:Y,startTime:De,expirationTime:rt,sortIndex:-1},De>ct?(Y.sortIndex=De,e(y,Y),n(g)===null&&Y===n(y)&&(B?(X(I),I=-1):B=!0,Nt(ze,De-ct))):(Y.sortIndex=rt,e(g,Y),W||P||(W=!0,Ae||(Ae=!0,H()))),Y},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(Y){var Te=k;return function(){var De=k;k=Te;try{return Y.apply(this,arguments)}finally{k=De}}}})(Zm)),Zm}var W0;function LE(){return W0||(W0=1,Jm.exports=PE()),Jm.exports}var ep={exports:{}},Ss={};var G0;function OE(){if(G0)return Ss;G0=1;var s=ig();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:g,containerInfo:y,implementation:w}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ss.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ss.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,w)},Ss.flushSync=function(g){var y=d.T,w=a.p;try{if(d.T=null,a.p=2,g)return g()}finally{d.T=y,a.p=w,a.d.f()}},Ss.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(g,y))},Ss.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Ss.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,T=p(w,y.crossOrigin),k=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?a.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:k,fetchPriority:P}):w==="script"&&a.d.X(g,{crossOrigin:T,integrity:k,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ss.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);a.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(g)},Ss.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,T=p(w,y.crossOrigin);a.d.L(g,w,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ss.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);a.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(g)},Ss.requestFormReset=function(g){a.d.r(g)},Ss.unstable_batchedUpdates=function(g,y){return g(y)},Ss.useFormState=function(g,y,w){return d.H.useFormState(g,y,w)},Ss.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ss.version="19.2.4",Ss}var K0;function VE(){if(K0)return ep.exports;K0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),ep.exports=OE(),ep.exports}var Y0;function BE(){if(Y0)return Ic;Y0=1;var s=LE(),e=ig(),n=VE();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(a(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(a(188));return r!==t?null:t}for(var o=t,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(a(188))}if(o.return!==c.return)o=f,c=m;else{for(var b=!1,j=f.child;j;){if(j===o){b=!0,o=f,c=m;break}if(j===c){b=!0,c=f,o=m;break}j=j.sibling}if(!b){for(j=m.child;j;){if(j===o){b=!0,o=m,c=f;break}if(j===c){b=!0,c=m,o=f;break}j=j.sibling}if(!b)throw Error(a(189))}}if(o.alternate!==c)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?t:r}function w(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=w(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,k=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),he=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),ze=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function H(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function We(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case re:return"Profiler";case L:return"StrictMode";case ze:return"Suspense";case Ae:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case W:return"Portal";case he:return t.displayName||"Context";case X:return(t._context.displayName||"Context")+".Consumer";case ke:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return r=t.displayName||null,r!==null?r:We(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return We(t(r))}catch{}}return null}var Nt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},ct=[],rt=-1;function V(t){return{current:t}}function G(t){0>rt||(t.current=ct[rt],ct[rt]=null,rt--)}function ge(t,r){rt++,ct[rt]=t.current,t.current=r}var Se=V(null),Ve=V(null),Me=V(null),nt=V(null);function ht(t,r){switch(ge(Me,r),ge(Ve,t),ge(Se,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?u0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=u0(r),t=h0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(Se),ge(Se,t)}function pt(){G(Se),G(Ve),G(Me)}function Wt(t){t.memoizedState!==null&&ge(nt,t);var r=Se.current,o=h0(r,t.type);r!==o&&(ge(Ve,t),ge(Se,o))}function pn(t){Ve.current===t&&(G(Se),G(Ve)),nt.current===t&&(G(nt),jc._currentValue=De)}var Ct,wt;function ne(t){if(Ct===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Ct=r&&r[1]||"",wt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+t+wt}var gn=!1;function zt(t,r){if(!t||gn)return"";gn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(oe){var te=oe}Reflect.construct(t,[],xe)}else{try{xe.call()}catch(oe){te=oe}t.call(xe.prototype)}}else{try{throw Error()}catch(oe){te=oe}(xe=t())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(oe){if(oe&&te&&typeof oe.stack=="string")return[oe.stack,te.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],j=m[1];if(b&&j){var O=b.split(`
`),ee=j.split(`
`);for(f=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(c===O.length||f===ee.length)for(c=O.length-1,f=ee.length-1;1<=c&&0<=f&&O[c]!==ee[f];)f--;for(;1<=c&&0<=f;c--,f--)if(O[c]!==ee[f]){if(c!==1||f!==1)do if(c--,f--,0>f||O[c]!==ee[f]){var me=`
`+O[c].replace(" at new "," at ");return t.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",t.displayName)),me}while(1<=c&&0<=f);break}}}finally{gn=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?ne(o):""}function vt(t,r){switch(t.tag){case 26:case 27:case 5:return ne(t.type);case 16:return ne("Lazy");case 13:return t.child!==r&&r!==null?ne("Suspense Fallback"):ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return zt(t.type,!1);case 11:return zt(t.type.render,!1);case 1:return zt(t.type,!0);case 31:return ne("Activity");default:return""}}function Rt(t){try{var r="",o=null;do r+=vt(t,o),o=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var at=Object.prototype.hasOwnProperty,He=s.unstable_scheduleCallback,Gt=s.unstable_cancelCallback,ns=s.unstable_shouldYield,At=s.unstable_requestPaint,Bt=s.unstable_now,Dn=s.unstable_getCurrentPriorityLevel,Ht=s.unstable_ImmediatePriority,wn=s.unstable_UserBlockingPriority,de=s.unstable_NormalPriority,ve=s.unstable_LowPriority,je=s.unstable_IdlePriority,Qe=s.log,qe=s.unstable_setDisableYieldValue,Pe=null,Ge=null;function Ue(t){if(typeof Qe=="function"&&qe(t),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(Pe,t)}catch{}}var Ie=Math.clz32?Math.clz32:st,we=Math.log,Ke=Math.LN2;function st(t){return t>>>=0,t===0?32:31-(we(t)/Ke|0)|0}var xt=256,qt=262144,Fe=4194304;function _t(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function St(t,r,o){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var j=c&134217727;return j!==0?(c=j&~m,c!==0?f=_t(c):(b&=j,b!==0?f=_t(b):o||(o=j&~t,o!==0&&(f=_t(o))))):(j=c&~m,j!==0?f=_t(j):b!==0?f=_t(b):o||(o=c&~t,o!==0&&(f=_t(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function Dt(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ft(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bt(){var t=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),t}function nn(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function $t(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function sn(t,r,o,c,f,m){var b=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var j=t.entanglements,O=t.expirationTimes,ee=t.hiddenUpdates;for(o=b&~o;0<o;){var me=31-Ie(o),xe=1<<me;j[me]=0,O[me]=-1;var te=ee[me];if(te!==null)for(ee[me]=null,me=0;me<te.length;me++){var oe=te[me];oe!==null&&(oe.lane&=-536870913)}o&=~xe}c!==0&&ln(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~r))}function ln(t,r,o){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-Ie(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|o&261930}function un(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-Ie(o),f=1<<c;f&r|t[c]&r&&(t[c]|=r),o&=~f}}function jn(t,r){var o=r&-r;return o=(o&42)!==0?1:z(o),(o&(t.suspendedLanes|r))!==0?0:o}function z(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ue(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function fe(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:M0(t.type))}function pe(t,r){var o=Te.p;try{return Te.p=t,r()}finally{Te.p=o}}var ce=Math.random().toString(36).slice(2),Be="__reactFiber$"+ce,ut="__reactProps$"+ce,Ye="__reactContainer$"+ce,ot="__reactEvents$"+ce,dt="__reactListeners$"+ce,rn="__reactHandles$"+ce,Es="__reactResources$"+ce,Bn="__reactMarker$"+ce;function Hn(t){delete t[Be],delete t[ut],delete t[ot],delete t[dt],delete t[rn]}function hn(t){var r=t[Be];if(r)return r;for(var o=t.parentNode;o;){if(r=o[Ye]||o[Be]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=v0(t);t!==null;){if(o=t[Be])return o;t=v0(t)}return r}t=o,o=t.parentNode}return null}function U(t){if(t=t[Be]||t[Ye]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function ie(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function E(t){var r=t[Es];return r||(r=t[Es]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function C(t){t[Bn]=!0}var $=new Set,J={};function Le(t,r){Re(t,r),Re(t+"Capture",r)}function Re(t,r){for(J[t]=r,t=0;t<r.length;t++)$.add(r[t])}var Ce=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lt={},gt={};function q(t){return at.call(gt,t)?!0:at.call(Lt,t)?!1:Ce.test(t)?gt[t]=!0:(Lt[t]=!0,!1)}function le(t,r,o){if(q(r))if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+o)}}function se(t,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+o)}}function Ee(t,r,o,c){if(c===null)t.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(r,o,""+c)}}function Ne(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Je(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function jt(t,r,o){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){o=""+b,m.call(this,b)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ze(t){if(!t._valueTracker){var r=Je(t)?"checked":"value";t._valueTracker=jt(t,r,""+t[r])}}function Qt(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=Je(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function Mn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var dn=/[\n"\\]/g;function Rn(t){return t.replace(dn,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ba(t,r,o,c,f,m,b,j){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ne(r)):t.value!==""+Ne(r)&&(t.value=""+Ne(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Ua(t,b,Ne(r)):o!=null?Ua(t,b,Ne(o)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.name=""+Ne(j):t.removeAttribute("name")}function Ui(t,r,o,c,f,m,b,j){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ze(t);return}o=o!=null?""+Ne(o):"",r=r!=null?""+Ne(r):o,j||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=j?t.checked:!!c,t.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),Ze(t)}function Ua(t,r,o){r==="number"&&Mn(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function br(t,r,o,c){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+Ne(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function cn(t,r,o){if(r!=null&&(r=""+Ne(r),r!==t.value&&(t.value=r),o==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=o!=null?""+Ne(o):""}function Un(t,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(a(92));if(Nt(c)){if(1<c.length)throw Error(a(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Ne(r),t.defaultValue=o,c=t.textContent,c===o&&c!==""&&c!==null&&(t.value=c),Ze(t)}function zn(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var wr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xr(t,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,o):typeof o!="number"||o===0||wr.has(r)?r==="float"?t.cssFloat=o:t[r]=(""+o).trim():t[r]=o+"px"}function ms(t,r,o){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&xr(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&xr(t,m,r[m])}function ks(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Br=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_r=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function za(t){return _r.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Is(){}var Hl=null;function rr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fa=null,Ur=null;function zi(t){var r=U(t);if(r&&(t=r.stateNode)){var o=t[ut]||null;e:switch(t=r.stateNode,r.type){case"input":if(Ba(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Rn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var f=c[ut]||null;if(!f)throw Error(a(90));Ba(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===t.form&&Qt(c)}break e;case"textarea":cn(t,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&br(t,!!o.multiple,r,!1)}}}var Ao=!1;function Ha(t,r,o){if(Ao)return t(r,o);Ao=!0;try{var c=t(r);return c}finally{if(Ao=!1,(Fa!==null||Ur!==null)&&(gh(),Fa&&(r=Fa,t=Ur,Ur=Fa=null,zi(r),t)))for(r=0;r<t.length;r++)zi(t[r])}}function Tr(t,r){var o=t.stateNode;if(o===null)return null;var c=o[ut]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(a(231,r,typeof o));return o}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fi=!1;if(ar)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){Fi=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{Fi=!1}var zr=null,ql=null,Hi=null;function $l(){if(Hi)return Hi;var t,r=ql,o=r.length,c,f="value"in zr?zr.value:zr.textContent,m=f.length;for(t=0;t<o&&r[t]===f[t];t++);var b=o-t;for(c=1;c<=b&&r[o-c]===f[m-c];c++);return Hi=f.slice(t,1<c?1-c:void 0)}function qi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function ca(){return!0}function Er(){return!1}function ps(t){function r(o,c,f,m,b){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var j in t)t.hasOwnProperty(j)&&(o=t[j],this[j]=o?o(m):m[j]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ca:Er,this.isPropagationStopped=Er,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ca)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ca)},persist:function(){},isPersistent:ca}),r}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fr=ps(ua),qa=T({},ua,{view:0,detail:0}),Wl=ps(qa),$a,Io,Hr,Do=T({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hr&&(Hr&&t.type==="mousemove"?($a=t.screenX-Hr.screenX,Io=t.screenY-Hr.screenY):Io=$a=0,Hr=t),$a)},movementY:function(t){return"movementY"in t?t.movementY:Io}}),Gl=ps(Do),$i=T({},Do,{dataTransfer:0}),Eu=ps($i),ku=T({},qa,{relatedTarget:0}),Wi=ps(ku),Kl=T({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),Su=ps(Kl),Mo=T({},ua,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ju=ps(Mo),Nu=T({},ua,{data:0}),qr=ps(Nu),Cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Au[t])?!!r[t]:!1}function Wa(){return Iu}var Ds=T({},qa,{key:function(t){if(t.key){var r=Cu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=qi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ru[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wa,charCode:function(t){return t.type==="keypress"?qi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Du=ps(Ds),Mu=T({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ha=ps(Mu),h=T({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wa}),v=ps(h),x=T({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=ps(x),Q=T({},Do,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=ps(Q),Oe=T({},ua,{newState:0,oldState:0}),Ot=ps(Oe),Qn=[9,13,27,32],yn=ar&&"CompositionEvent"in window,Pn=null;ar&&"documentMode"in document&&(Pn=document.documentMode);var ir=ar&&"TextEvent"in window&&!Pn,$r=ar&&(!yn||Pn&&8<Pn&&11>=Pn),kr=" ",Sr=!1;function Gi(t,r){switch(t){case"keyup":return Qn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Po(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function nT(t,r){switch(t){case"compositionend":return Po(r);case"keypress":return r.which!==32?null:(Sr=!0,kr);case"textInput":return t=r.data,t===kr&&Sr?null:t;default:return null}}function sT(t,r){if(Lo)return t==="compositionend"||!yn&&Gi(t,r)?(t=$l(),Hi=ql=zr=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return $r&&r.locale!=="ko"?null:r.data;default:return null}}var rT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xy(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!rT[t.type]:r==="textarea"}function _y(t,r,o,c){Fa?Ur?Ur.push(c):Ur=[c]:Fa=c,r=Th(r,"onChange"),0<r.length&&(o=new Fr("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var Yl=null,Ql=null;function aT(t){r0(t,0)}function Pu(t){var r=ie(t);if(Qt(r))return t}function Ty(t,r){if(t==="change")return r}var Ey=!1;if(ar){var tf;if(ar){var nf="oninput"in document;if(!nf){var ky=document.createElement("div");ky.setAttribute("oninput","return;"),nf=typeof ky.oninput=="function"}tf=nf}else tf=!1;Ey=tf&&(!document.documentMode||9<document.documentMode)}function Sy(){Yl&&(Yl.detachEvent("onpropertychange",jy),Ql=Yl=null)}function jy(t){if(t.propertyName==="value"&&Pu(Ql)){var r=[];_y(r,Ql,t,rr(t)),Ha(aT,r)}}function iT(t,r,o){t==="focusin"?(Sy(),Yl=r,Ql=o,Yl.attachEvent("onpropertychange",jy)):t==="focusout"&&Sy()}function oT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pu(Ql)}function lT(t,r){if(t==="click")return Pu(r)}function cT(t,r){if(t==="input"||t==="change")return Pu(r)}function uT(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Ks=typeof Object.is=="function"?Object.is:uT;function Xl(t,r){if(Ks(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!at.call(r,f)||!Ks(t[f],r[f]))return!1}return!0}function Ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cy(t,r){var o=Ny(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ny(o)}}function Ry(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Ry(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ay(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Mn(t.document);r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Mn(t.document)}return r}function sf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var hT=ar&&"documentMode"in document&&11>=document.documentMode,Oo=null,rf=null,Jl=null,af=!1;function Iy(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;af||Oo==null||Oo!==Mn(c)||(c=Oo,"selectionStart"in c&&sf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Jl&&Xl(Jl,c)||(Jl=c,c=Th(rf,"onSelect"),0<c.length&&(r=new Fr("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=Oo)))}function Ki(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Vo={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionrun:Ki("Transition","TransitionRun"),transitionstart:Ki("Transition","TransitionStart"),transitioncancel:Ki("Transition","TransitionCancel"),transitionend:Ki("Transition","TransitionEnd")},of={},Dy={};ar&&(Dy=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Yi(t){if(of[t])return of[t];if(!Vo[t])return t;var r=Vo[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Dy)return of[t]=r[o];return t}var My=Yi("animationend"),Py=Yi("animationiteration"),Ly=Yi("animationstart"),dT=Yi("transitionrun"),fT=Yi("transitionstart"),mT=Yi("transitioncancel"),Oy=Yi("transitionend"),Vy=new Map,lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lf.push("scrollEnd");function jr(t,r){Vy.set(t,r),Le(r,[t])}var Lu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},or=[],Bo=0,cf=0;function Ou(){for(var t=Bo,r=cf=Bo=0;r<t;){var o=or[r];or[r++]=null;var c=or[r];or[r++]=null;var f=or[r];or[r++]=null;var m=or[r];if(or[r++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}m!==0&&By(o,f,m)}}function Vu(t,r,o,c){or[Bo++]=t,or[Bo++]=r,or[Bo++]=o,or[Bo++]=c,cf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function uf(t,r,o,c){return Vu(t,r,o,c),Bu(t)}function Qi(t,r){return Vu(t,null,null,r),Bu(t)}function By(t,r,o){t.lanes|=o;var c=t.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=t.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-Ie(o),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function Bu(t){if(50<wc)throw wc=0,bm=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Uo={};function pT(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(t,r,o,c){return new pT(t,r,o,c)}function hf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function da(t,r){var o=t.alternate;return o===null?(o=Ys(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function Uy(t,r){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,r=o.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Uu(t,r,o,c,f,m){var b=0;if(c=t,typeof t=="function")hf(t)&&(b=1);else if(typeof t=="string")b=wE(t,o,Se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Ys(31,o,r,f),t.elementType=R,t.lanes=m,t;case B:return Xi(o.children,f,m,r);case L:b=8,f|=24;break;case re:return t=Ys(12,o,r,f|2),t.elementType=re,t.lanes=m,t;case ze:return t=Ys(13,o,r,f),t.elementType=ze,t.lanes=m,t;case Ae:return t=Ys(19,o,r,f),t.elementType=Ae,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case he:b=10;break e;case X:b=9;break e;case ke:b=11;break e;case I:b=14;break e;case S:b=16,c=null;break e}b=29,o=Error(a(130,t===null?"null":typeof t,"")),c=null}return r=Ys(b,o,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function Xi(t,r,o,c){return t=Ys(7,t,c,r),t.lanes=o,t}function df(t,r,o){return t=Ys(6,t,null,r),t.lanes=o,t}function zy(t){var r=Ys(18,null,null,0);return r.stateNode=t,r}function ff(t,r,o){return r=Ys(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Fy=new WeakMap;function lr(t,r){if(typeof t=="object"&&t!==null){var o=Fy.get(t);return o!==void 0?o:(r={value:t,source:r,stack:Rt(r)},Fy.set(t,r),r)}return{value:t,source:r,stack:Rt(r)}}var zo=[],Fo=0,zu=null,Zl=0,cr=[],ur=0,Ga=null,Wr=1,Gr="";function fa(t,r){zo[Fo++]=Zl,zo[Fo++]=zu,zu=t,Zl=r}function Hy(t,r,o){cr[ur++]=Wr,cr[ur++]=Gr,cr[ur++]=Ga,Ga=t;var c=Wr;t=Gr;var f=32-Ie(c)-1;c&=~(1<<f),o+=1;var m=32-Ie(r)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,Wr=1<<32-Ie(r)+f|o<<f|c,Gr=m+t}else Wr=1<<m|o<<f|c,Gr=t}function mf(t){t.return!==null&&(fa(t,1),Hy(t,1,0))}function pf(t){for(;t===zu;)zu=zo[--Fo],zo[Fo]=null,Zl=zo[--Fo],zo[Fo]=null;for(;t===Ga;)Ga=cr[--ur],cr[ur]=null,Gr=cr[--ur],cr[ur]=null,Wr=cr[--ur],cr[ur]=null}function qy(t,r){cr[ur++]=Wr,cr[ur++]=Gr,cr[ur++]=Ga,Wr=r.id,Gr=r.overflow,Ga=t}var gs=null,An=null,an=!1,Ka=null,hr=!1,gf=Error(a(519));function Ya(t){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ec(lr(r,t)),gf}function $y(t){var r=t.stateNode,o=t.type,c=t.memoizedProps;switch(r[Be]=t,r[ut]=c,o){case"dialog":Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":case"embed":Yt("load",r);break;case"video":case"audio":for(o=0;o<_c.length;o++)Yt(_c[o],r);break;case"source":Yt("error",r);break;case"img":case"image":case"link":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"input":Yt("invalid",r),Ui(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Yt("invalid",r);break;case"textarea":Yt("invalid",r),Un(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||l0(r.textContent,o)?(c.popover!=null&&(Yt("beforetoggle",r),Yt("toggle",r)),c.onScroll!=null&&Yt("scroll",r),c.onScrollEnd!=null&&Yt("scrollend",r),c.onClick!=null&&(r.onclick=Is),r=!0):r=!1,r||Ya(t,!0)}function Wy(t){for(gs=t.return;gs;)switch(gs.tag){case 5:case 31:case 13:hr=!1;return;case 27:case 3:hr=!0;return;default:gs=gs.return}}function Ho(t){if(t!==gs)return!1;if(!an)return Wy(t),an=!0,!1;var r=t.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||Mm(t.type,t.memoizedProps)),o=!o),o&&An&&Ya(t),Wy(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));An=y0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));An=y0(t)}else r===27?(r=An,ci(t.type)?(t=Bm,Bm=null,An=t):An=r):An=gs?fr(t.stateNode.nextSibling):null;return!0}function Ji(){An=gs=null,an=!1}function yf(){var t=Ka;return t!==null&&(Us===null?Us=t:Us.push.apply(Us,t),Ka=null),t}function ec(t){Ka===null?Ka=[t]:Ka.push(t)}var vf=V(null),Zi=null,ma=null;function Qa(t,r,o){ge(vf,r._currentValue),r._currentValue=o}function pa(t){t._currentValue=vf.current,G(vf)}function bf(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function wf(t,r,o,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var j=m;m=f;for(var O=0;O<r.length;O++)if(j.context===r[O]){m.lanes|=o,j=m.alternate,j!==null&&(j.lanes|=o),bf(m.return,o,t),c||(b=null);break e}m=j.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(a(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),bf(b,o,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function qo(t,r,o,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var j=f.type;Ks(f.pendingProps.value,b.value)||(t!==null?t.push(j):t=[j])}}else if(f===nt.current){if(b=f.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(jc):t=[jc])}f=f.return}t!==null&&wf(r,t,o,c),r.flags|=262144}function Fu(t){for(t=t.firstContext;t!==null;){if(!Ks(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function eo(t){Zi=t,ma=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ys(t){return Gy(Zi,t)}function Hu(t,r){return Zi===null&&eo(t),Gy(t,r)}function Gy(t,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ma===null){if(t===null)throw Error(a(308));ma=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ma=ma.next=r;return o}var gT=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(o,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(o){return o()})}},yT=s.unstable_scheduleCallback,vT=s.unstable_NormalPriority,ss={$$typeof:he,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xf(){return{controller:new gT,data:new Map,refCount:0}}function tc(t){t.refCount--,t.refCount===0&&yT(vT,function(){t.controller.abort()})}var nc=null,_f=0,$o=0,Wo=null;function bT(t,r){if(nc===null){var o=nc=[];_f=0,$o=km(),Wo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return _f++,r.then(Ky,Ky),r}function Ky(){if(--_f===0&&nc!==null){Wo!==null&&(Wo.status="fulfilled");var t=nc;nc=null,$o=0,Wo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function wT(t,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Yy=Y.S;Y.S=function(t,r){Ib=Bt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&bT(t,r),Yy!==null&&Yy(t,r)};var to=V(null);function Tf(){var t=to.current;return t!==null?t:Nn.pooledCache}function qu(t,r){r===null?ge(to,to.current):ge(to,r.pool)}function Qy(){var t=Tf();return t===null?null:{parent:ss._currentValue,pool:t}}var Go=Error(a(460)),Ef=Error(a(474)),$u=Error(a(542)),Wu={then:function(){}};function Xy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Jy(t,r,o){switch(o=t[o],o===void 0?t.push(r):o!==r&&(r.then(Is,Is),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,ev(t),t;default:if(typeof r.status=="string")r.then(Is,Is);else{if(t=Nn,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,ev(t),t}throw so=r,Go}}function no(t){try{var r=t._init;return r(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(so=o,Go):o}}var so=null;function Zy(){if(so===null)throw Error(a(459));var t=so;return so=null,t}function ev(t){if(t===Go||t===$u)throw Error(a(483))}var Ko=null,sc=0;function Gu(t){var r=sc;return sc+=1,Ko===null&&(Ko=[]),Jy(Ko,t,r)}function rc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Ku(t,r){throw r.$$typeof===k?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function tv(t){function r(K,F){if(t){var Z=K.deletions;Z===null?(K.deletions=[F],K.flags|=16):Z.push(F)}}function o(K,F){if(!t)return null;for(;F!==null;)r(K,F),F=F.sibling;return null}function c(K){for(var F=new Map;K!==null;)K.key!==null?F.set(K.key,K):F.set(K.index,K),K=K.sibling;return F}function f(K,F){return K=da(K,F),K.index=0,K.sibling=null,K}function m(K,F,Z){return K.index=Z,t?(Z=K.alternate,Z!==null?(Z=Z.index,Z<F?(K.flags|=67108866,F):Z):(K.flags|=67108866,F)):(K.flags|=1048576,F)}function b(K){return t&&K.alternate===null&&(K.flags|=67108866),K}function j(K,F,Z,ye){return F===null||F.tag!==6?(F=df(Z,K.mode,ye),F.return=K,F):(F=f(F,Z),F.return=K,F)}function O(K,F,Z,ye){var ft=Z.type;return ft===B?me(K,F,Z.props.children,ye,Z.key):F!==null&&(F.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===S&&no(ft)===F.type)?(F=f(F,Z.props),rc(F,Z),F.return=K,F):(F=Uu(Z.type,Z.key,Z.props,null,K.mode,ye),rc(F,Z),F.return=K,F)}function ee(K,F,Z,ye){return F===null||F.tag!==4||F.stateNode.containerInfo!==Z.containerInfo||F.stateNode.implementation!==Z.implementation?(F=ff(Z,K.mode,ye),F.return=K,F):(F=f(F,Z.children||[]),F.return=K,F)}function me(K,F,Z,ye,ft){return F===null||F.tag!==7?(F=Xi(Z,K.mode,ye,ft),F.return=K,F):(F=f(F,Z),F.return=K,F)}function xe(K,F,Z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=df(""+F,K.mode,Z),F.return=K,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case P:return Z=Uu(F.type,F.key,F.props,null,K.mode,Z),rc(Z,F),Z.return=K,Z;case W:return F=ff(F,K.mode,Z),F.return=K,F;case S:return F=no(F),xe(K,F,Z)}if(Nt(F)||H(F))return F=Xi(F,K.mode,Z,null),F.return=K,F;if(typeof F.then=="function")return xe(K,Gu(F),Z);if(F.$$typeof===he)return xe(K,Hu(K,F),Z);Ku(K,F)}return null}function te(K,F,Z,ye){var ft=F!==null?F.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return ft!==null?null:j(K,F,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:return Z.key===ft?O(K,F,Z,ye):null;case W:return Z.key===ft?ee(K,F,Z,ye):null;case S:return Z=no(Z),te(K,F,Z,ye)}if(Nt(Z)||H(Z))return ft!==null?null:me(K,F,Z,ye,null);if(typeof Z.then=="function")return te(K,F,Gu(Z),ye);if(Z.$$typeof===he)return te(K,F,Hu(K,Z),ye);Ku(K,Z)}return null}function oe(K,F,Z,ye,ft){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return K=K.get(Z)||null,j(F,K,""+ye,ft);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case P:return K=K.get(ye.key===null?Z:ye.key)||null,O(F,K,ye,ft);case W:return K=K.get(ye.key===null?Z:ye.key)||null,ee(F,K,ye,ft);case S:return ye=no(ye),oe(K,F,Z,ye,ft)}if(Nt(ye)||H(ye))return K=K.get(Z)||null,me(F,K,ye,ft,null);if(typeof ye.then=="function")return oe(K,F,Z,Gu(ye),ft);if(ye.$$typeof===he)return oe(K,F,Z,Hu(F,ye),ft);Ku(F,ye)}return null}function et(K,F,Z,ye){for(var ft=null,fn=null,it=F,Ut=F=0,Jt=null;it!==null&&Ut<Z.length;Ut++){it.index>Ut?(Jt=it,it=null):Jt=it.sibling;var mn=te(K,it,Z[Ut],ye);if(mn===null){it===null&&(it=Jt);break}t&&it&&mn.alternate===null&&r(K,it),F=m(mn,F,Ut),fn===null?ft=mn:fn.sibling=mn,fn=mn,it=Jt}if(Ut===Z.length)return o(K,it),an&&fa(K,Ut),ft;if(it===null){for(;Ut<Z.length;Ut++)it=xe(K,Z[Ut],ye),it!==null&&(F=m(it,F,Ut),fn===null?ft=it:fn.sibling=it,fn=it);return an&&fa(K,Ut),ft}for(it=c(it);Ut<Z.length;Ut++)Jt=oe(it,K,Ut,Z[Ut],ye),Jt!==null&&(t&&Jt.alternate!==null&&it.delete(Jt.key===null?Ut:Jt.key),F=m(Jt,F,Ut),fn===null?ft=Jt:fn.sibling=Jt,fn=Jt);return t&&it.forEach(function(mi){return r(K,mi)}),an&&fa(K,Ut),ft}function yt(K,F,Z,ye){if(Z==null)throw Error(a(151));for(var ft=null,fn=null,it=F,Ut=F=0,Jt=null,mn=Z.next();it!==null&&!mn.done;Ut++,mn=Z.next()){it.index>Ut?(Jt=it,it=null):Jt=it.sibling;var mi=te(K,it,mn.value,ye);if(mi===null){it===null&&(it=Jt);break}t&&it&&mi.alternate===null&&r(K,it),F=m(mi,F,Ut),fn===null?ft=mi:fn.sibling=mi,fn=mi,it=Jt}if(mn.done)return o(K,it),an&&fa(K,Ut),ft;if(it===null){for(;!mn.done;Ut++,mn=Z.next())mn=xe(K,mn.value,ye),mn!==null&&(F=m(mn,F,Ut),fn===null?ft=mn:fn.sibling=mn,fn=mn);return an&&fa(K,Ut),ft}for(it=c(it);!mn.done;Ut++,mn=Z.next())mn=oe(it,K,Ut,mn.value,ye),mn!==null&&(t&&mn.alternate!==null&&it.delete(mn.key===null?Ut:mn.key),F=m(mn,F,Ut),fn===null?ft=mn:fn.sibling=mn,fn=mn);return t&&it.forEach(function(AE){return r(K,AE)}),an&&fa(K,Ut),ft}function Sn(K,F,Z,ye){if(typeof Z=="object"&&Z!==null&&Z.type===B&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:e:{for(var ft=Z.key;F!==null;){if(F.key===ft){if(ft=Z.type,ft===B){if(F.tag===7){o(K,F.sibling),ye=f(F,Z.props.children),ye.return=K,K=ye;break e}}else if(F.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===S&&no(ft)===F.type){o(K,F.sibling),ye=f(F,Z.props),rc(ye,Z),ye.return=K,K=ye;break e}o(K,F);break}else r(K,F);F=F.sibling}Z.type===B?(ye=Xi(Z.props.children,K.mode,ye,Z.key),ye.return=K,K=ye):(ye=Uu(Z.type,Z.key,Z.props,null,K.mode,ye),rc(ye,Z),ye.return=K,K=ye)}return b(K);case W:e:{for(ft=Z.key;F!==null;){if(F.key===ft)if(F.tag===4&&F.stateNode.containerInfo===Z.containerInfo&&F.stateNode.implementation===Z.implementation){o(K,F.sibling),ye=f(F,Z.children||[]),ye.return=K,K=ye;break e}else{o(K,F);break}else r(K,F);F=F.sibling}ye=ff(Z,K.mode,ye),ye.return=K,K=ye}return b(K);case S:return Z=no(Z),Sn(K,F,Z,ye)}if(Nt(Z))return et(K,F,Z,ye);if(H(Z)){if(ft=H(Z),typeof ft!="function")throw Error(a(150));return Z=ft.call(Z),yt(K,F,Z,ye)}if(typeof Z.then=="function")return Sn(K,F,Gu(Z),ye);if(Z.$$typeof===he)return Sn(K,F,Hu(K,Z),ye);Ku(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,F!==null&&F.tag===6?(o(K,F.sibling),ye=f(F,Z),ye.return=K,K=ye):(o(K,F),ye=df(Z,K.mode,ye),ye.return=K,K=ye),b(K)):o(K,F)}return function(K,F,Z,ye){try{sc=0;var ft=Sn(K,F,Z,ye);return Ko=null,ft}catch(it){if(it===Go||it===$u)throw it;var fn=Ys(29,it,null,K.mode);return fn.lanes=ye,fn.return=K,fn}}}var ro=tv(!0),nv=tv(!1),Xa=!1;function kf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ja(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Za(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(vn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Bu(t),By(t,null,o),r}return Vu(t,c,r,o),Bu(t)}function ac(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,un(t,o)}}function jf(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}var Nf=!1;function ic(){if(Nf){var t=Wo;if(t!==null)throw t}}function oc(t,r,o,c){Nf=!1;var f=t.updateQueue;Xa=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,j=f.shared.pending;if(j!==null){f.shared.pending=null;var O=j,ee=O.next;O.next=null,b===null?m=ee:b.next=ee,b=O;var me=t.alternate;me!==null&&(me=me.updateQueue,j=me.lastBaseUpdate,j!==b&&(j===null?me.firstBaseUpdate=ee:j.next=ee,me.lastBaseUpdate=O))}if(m!==null){var xe=f.baseState;b=0,me=ee=O=null,j=m;do{var te=j.lane&-536870913,oe=te!==j.lane;if(oe?(Xt&te)===te:(c&te)===te){te!==0&&te===$o&&(Nf=!0),me!==null&&(me=me.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var et=t,yt=j;te=r;var Sn=o;switch(yt.tag){case 1:if(et=yt.payload,typeof et=="function"){xe=et.call(Sn,xe,te);break e}xe=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=yt.payload,te=typeof et=="function"?et.call(Sn,xe,te):et,te==null)break e;xe=T({},xe,te);break e;case 2:Xa=!0}}te=j.callback,te!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=f.callbacks,oe===null?f.callbacks=[te]:oe.push(te))}else oe={lane:te,tag:j.tag,payload:j.payload,callback:j.callback,next:null},me===null?(ee=me=oe,O=xe):me=me.next=oe,b|=te;if(j=j.next,j===null){if(j=f.shared.pending,j===null)break;oe=j,j=oe.next,oe.next=null,f.lastBaseUpdate=oe,f.shared.pending=null}}while(!0);me===null&&(O=xe),f.baseState=O,f.firstBaseUpdate=ee,f.lastBaseUpdate=me,m===null&&(f.shared.lanes=0),ri|=b,t.lanes=b,t.memoizedState=xe}}function sv(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function rv(t,r){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)sv(o[t],r)}var Yo=V(null),Yu=V(0);function av(t,r){t=Ea,ge(Yu,t),ge(Yo,r),Ea=t|r.baseLanes}function Cf(){ge(Yu,Ea),ge(Yo,Yo.current)}function Rf(){Ea=Yu.current,G(Yo),G(Yu)}var Qs=V(null),dr=null;function ei(t){var r=t.alternate;ge(Xn,Xn.current&1),ge(Qs,t),dr===null&&(r===null||Yo.current!==null||r.memoizedState!==null)&&(dr=t)}function Af(t){ge(Xn,Xn.current),ge(Qs,t),dr===null&&(dr=t)}function iv(t){t.tag===22?(ge(Xn,Xn.current),ge(Qs,t),dr===null&&(dr=t)):ti()}function ti(){ge(Xn,Xn.current),ge(Qs,Qs.current)}function Xs(t){G(Qs),dr===t&&(dr=null),G(Xn)}var Xn=V(0);function Qu(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Om(o)||Vm(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ga=0,Vt=null,En=null,rs=null,Xu=!1,Qo=!1,ao=!1,Ju=0,lc=0,Xo=null,xT=0;function qn(){throw Error(a(321))}function If(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Ks(t[o],r[o]))return!1;return!0}function Df(t,r,o,c,f,m){return ga=m,Vt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?Hv:Kf,ao=!1,m=o(c,f),ao=!1,Qo&&(m=lv(r,o,c,f)),ov(t),m}function ov(t){Y.H=hc;var r=En!==null&&En.next!==null;if(ga=0,rs=En=Vt=null,Xu=!1,lc=0,Xo=null,r)throw Error(a(300));t===null||as||(t=t.dependencies,t!==null&&Fu(t)&&(as=!0))}function lv(t,r,o,c){Vt=t;var f=0;do{if(Qo&&(Xo=null),lc=0,Qo=!1,25<=f)throw Error(a(301));if(f+=1,rs=En=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=qv,m=r(o,c)}while(Qo);return m}function _T(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?cc(r):r,t=t.useState()[0],(En!==null?En.memoizedState:null)!==t&&(Vt.flags|=1024),r}function Mf(){var t=Ju!==0;return Ju=0,t}function Pf(t,r,o){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o}function Lf(t){if(Xu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Xu=!1}ga=0,rs=En=Vt=null,Qo=!1,lc=Ju=0,Xo=null}function Ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rs===null?Vt.memoizedState=rs=t:rs=rs.next=t,rs}function Jn(){if(En===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=En.next;var r=rs===null?Vt.memoizedState:rs.next;if(r!==null)rs=r,En=t;else{if(t===null)throw Vt.alternate===null?Error(a(467)):Error(a(310));En=t,t={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},rs===null?Vt.memoizedState=rs=t:rs=rs.next=t}return rs}function Zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cc(t){var r=lc;return lc+=1,Xo===null&&(Xo=[]),t=Jy(Xo,t,r),r=Vt,(rs===null?r.memoizedState:rs.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?Hv:Kf),t}function eh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return cc(t);if(t.$$typeof===he)return ys(t)}throw Error(a(438,String(t)))}function Of(t){var r=null,o=Vt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Vt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Zu(),Vt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(t),c=0;c<t;c++)o[c]=D;return r.index++,o}function ya(t,r){return typeof r=="function"?r(t):r}function th(t){var r=Jn();return Vf(r,En,t)}function Vf(t,r,o){var c=t.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=o;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var j=b=null,O=null,ee=r,me=!1;do{var xe=ee.lane&-536870913;if(xe!==ee.lane?(Xt&xe)===xe:(ga&xe)===xe){var te=ee.revertLane;if(te===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),xe===$o&&(me=!0);else if((ga&te)===te){ee=ee.next,te===$o&&(me=!0);continue}else xe={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},O===null?(j=O=xe,b=m):O=O.next=xe,Vt.lanes|=te,ri|=te;xe=ee.action,ao&&o(m,xe),m=ee.hasEagerState?ee.eagerState:o(m,xe)}else te={lane:xe,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},O===null?(j=O=te,b=m):O=O.next=te,Vt.lanes|=xe,ri|=xe;ee=ee.next}while(ee!==null&&ee!==r);if(O===null?b=m:O.next=j,!Ks(m,t.memoizedState)&&(as=!0,me&&(o=Wo,o!==null)))throw o;t.memoizedState=m,t.baseState=b,t.baseQueue=O,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Bf(t){var r=Jn(),o=r.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);Ks(m,r.memoizedState)||(as=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function cv(t,r,o){var c=Vt,f=Jn(),m=an;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=r();var b=!Ks((En||f).memoizedState,o);if(b&&(f.memoizedState=o,as=!0),f=f.queue,Ff(dv.bind(null,c,f,t),[t]),f.getSnapshot!==r||b||rs!==null&&rs.memoizedState.tag&1){if(c.flags|=2048,Jo(9,{destroy:void 0},hv.bind(null,c,f,o,r),null),Nn===null)throw Error(a(349));m||(ga&127)!==0||uv(c,r,o)}return o}function uv(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Vt.updateQueue,r===null?(r=Zu(),Vt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function hv(t,r,o,c){r.value=o,r.getSnapshot=c,fv(r)&&mv(t)}function dv(t,r,o){return o(function(){fv(r)&&mv(t)})}function fv(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Ks(t,o)}catch{return!0}}function mv(t){var r=Qi(t,2);r!==null&&zs(r,t,2)}function Uf(t){var r=Ms();if(typeof t=="function"){var o=t;if(t=o(),ao){Ue(!0);try{o()}finally{Ue(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:t},r}function pv(t,r,o,c){return t.baseState=o,Vf(t,En,typeof c=="function"?c:ya)}function TT(t,r,o,c,f){if(rh(t))throw Error(a(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};Y.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,gv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function gv(t,r){var o=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=Y.T,b={};Y.T=b;try{var j=o(f,c),O=Y.S;O!==null&&O(b,j),yv(t,r,j)}catch(ee){zf(t,r,ee)}finally{m!==null&&b.types!==null&&(m.types=b.types),Y.T=m}}else try{m=o(f,c),yv(t,r,m)}catch(ee){zf(t,r,ee)}}function yv(t,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){vv(t,r,c)},function(c){return zf(t,r,c)}):vv(t,r,o)}function vv(t,r,o){r.status="fulfilled",r.value=o,bv(r),t.state=o,r=t.pending,r!==null&&(o=r.next,o===r?t.pending=null:(o=o.next,r.next=o,gv(t,o)))}function zf(t,r,o){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,bv(r),r=r.next;while(r!==c)}t.action=null}function bv(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function wv(t,r){return r}function xv(t,r){if(an){var o=Nn.formState;if(o!==null){e:{var c=Vt;if(an){if(An){t:{for(var f=An,m=hr;f.nodeType!==8;){if(!m){f=null;break t}if(f=fr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){An=fr(f.nextSibling),c=f.data==="F!";break e}}Ya(c)}c=!1}c&&(r=o[0])}}return o=Ms(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wv,lastRenderedState:r},o.queue=c,o=Uv.bind(null,Vt,c),c.dispatch=o,c=Uf(!1),m=Gf.bind(null,Vt,!1,c.queue),c=Ms(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,o=TT.bind(null,Vt,f,m,o),f.dispatch=o,c.memoizedState=t,[r,o,!1]}function _v(t){var r=Jn();return Tv(r,En,t)}function Tv(t,r,o){if(r=Vf(t,r,wv)[0],t=th(ya)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=cc(r)}catch(b){throw b===Go?$u:b}else c=r;r=Jn();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Vt.flags|=2048,Jo(9,{destroy:void 0},ET.bind(null,f,o),null)),[c,m,t]}function ET(t,r){t.action=r}function Ev(t){var r=Jn(),o=En;if(o!==null)return Tv(r,o,t);Jn(),r=r.memoizedState,o=Jn();var c=o.queue.dispatch;return o.memoizedState=t,[r,c,!1]}function Jo(t,r,o,c){return t={tag:t,create:o,deps:c,inst:r,next:null},r=Vt.updateQueue,r===null&&(r=Zu(),Vt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t),t}function kv(){return Jn().memoizedState}function nh(t,r,o,c){var f=Ms();Vt.flags|=t,f.memoizedState=Jo(1|r,{destroy:void 0},o,c===void 0?null:c)}function sh(t,r,o,c){var f=Jn();c=c===void 0?null:c;var m=f.memoizedState.inst;En!==null&&c!==null&&If(c,En.memoizedState.deps)?f.memoizedState=Jo(r,m,o,c):(Vt.flags|=t,f.memoizedState=Jo(1|r,m,o,c))}function Sv(t,r){nh(8390656,8,t,r)}function Ff(t,r){sh(2048,8,t,r)}function kT(t){Vt.flags|=4;var r=Vt.updateQueue;if(r===null)r=Zu(),Vt.updateQueue=r,r.events=[t];else{var o=r.events;o===null?r.events=[t]:o.push(t)}}function jv(t){var r=Jn().memoizedState;return kT({ref:r,nextImpl:t}),function(){if((vn&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function Nv(t,r){return sh(4,2,t,r)}function Cv(t,r){return sh(4,4,t,r)}function Rv(t,r){if(typeof r=="function"){t=t();var o=r(t);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Av(t,r,o){o=o!=null?o.concat([t]):null,sh(4,4,Rv.bind(null,r,t),o)}function Hf(){}function Iv(t,r){var o=Jn();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&If(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function Dv(t,r){var o=Jn();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&If(r,c[1]))return c[0];if(c=t(),ao){Ue(!0);try{t()}finally{Ue(!1)}}return o.memoizedState=[c,r],c}function qf(t,r,o){return o===void 0||(ga&1073741824)!==0&&(Xt&261930)===0?t.memoizedState=r:(t.memoizedState=o,t=Mb(),Vt.lanes|=t,ri|=t,o)}function Mv(t,r,o,c){return Ks(o,r)?o:Yo.current!==null?(t=qf(t,o,c),Ks(t,r)||(as=!0),t):(ga&42)===0||(ga&1073741824)!==0&&(Xt&261930)===0?(as=!0,t.memoizedState=o):(t=Mb(),Vt.lanes|=t,ri|=t,r)}function Pv(t,r,o,c,f){var m=Te.p;Te.p=m!==0&&8>m?m:8;var b=Y.T,j={};Y.T=j,Gf(t,!1,r,o);try{var O=f(),ee=Y.S;if(ee!==null&&ee(j,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var me=wT(O,c);uc(t,r,me,er(t))}else uc(t,r,c,er(t))}catch(xe){uc(t,r,{then:function(){},status:"rejected",reason:xe},er())}finally{Te.p=m,b!==null&&j.types!==null&&(b.types=j.types),Y.T=b}}function ST(){}function $f(t,r,o,c){if(t.tag!==5)throw Error(a(476));var f=Lv(t).queue;Pv(t,f,r,De,o===null?ST:function(){return Ov(t),o(c)})}function Lv(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:De},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:o},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ov(t){var r=Lv(t);r.next===null&&(r=t.alternate.memoizedState),uc(t,r.next.queue,{},er())}function Wf(){return ys(jc)}function Vv(){return Jn().memoizedState}function Bv(){return Jn().memoizedState}function jT(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var o=er();t=Ja(o);var c=Za(r,t,o);c!==null&&(zs(c,r,o),ac(c,r,o)),r={cache:xf()},t.payload=r;return}r=r.return}}function NT(t,r,o){var c=er();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},rh(t)?zv(r,o):(o=uf(t,r,o,c),o!==null&&(zs(o,t,c),Fv(o,r,c)))}function Uv(t,r,o){var c=er();uc(t,r,o,c)}function uc(t,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(rh(t))zv(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,j=m(b,o);if(f.hasEagerState=!0,f.eagerState=j,Ks(j,b))return Vu(t,r,f,0),Nn===null&&Ou(),!1}catch{}if(o=uf(t,r,f,c),o!==null)return zs(o,t,c),Fv(o,r,c),!0}return!1}function Gf(t,r,o,c){if(c={lane:2,revertLane:km(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},rh(t)){if(r)throw Error(a(479))}else r=uf(t,o,c,2),r!==null&&zs(r,t,2)}function rh(t){var r=t.alternate;return t===Vt||r!==null&&r===Vt}function zv(t,r){Qo=Xu=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Fv(t,r,o){if((o&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,un(t,o)}}var hc={readContext:ys,use:eh,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useLayoutEffect:qn,useInsertionEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useSyncExternalStore:qn,useId:qn,useHostTransitionStatus:qn,useFormState:qn,useActionState:qn,useOptimistic:qn,useMemoCache:qn,useCacheRefresh:qn};hc.useEffectEvent=qn;var Hv={readContext:ys,use:eh,useCallback:function(t,r){return Ms().memoizedState=[t,r===void 0?null:r],t},useContext:ys,useEffect:Sv,useImperativeHandle:function(t,r,o){o=o!=null?o.concat([t]):null,nh(4194308,4,Rv.bind(null,r,t),o)},useLayoutEffect:function(t,r){return nh(4194308,4,t,r)},useInsertionEffect:function(t,r){nh(4,2,t,r)},useMemo:function(t,r){var o=Ms();r=r===void 0?null:r;var c=t();if(ao){Ue(!0);try{t()}finally{Ue(!1)}}return o.memoizedState=[c,r],c},useReducer:function(t,r,o){var c=Ms();if(o!==void 0){var f=o(r);if(ao){Ue(!0);try{o(r)}finally{Ue(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=NT.bind(null,Vt,t),[c.memoizedState,t]},useRef:function(t){var r=Ms();return t={current:t},r.memoizedState=t},useState:function(t){t=Uf(t);var r=t.queue,o=Uv.bind(null,Vt,r);return r.dispatch=o,[t.memoizedState,o]},useDebugValue:Hf,useDeferredValue:function(t,r){var o=Ms();return qf(o,t,r)},useTransition:function(){var t=Uf(!1);return t=Pv.bind(null,Vt,t.queue,!0,!1),Ms().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,o){var c=Vt,f=Ms();if(an){if(o===void 0)throw Error(a(407));o=o()}else{if(o=r(),Nn===null)throw Error(a(349));(Xt&127)!==0||uv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Sv(dv.bind(null,c,m,t),[t]),c.flags|=2048,Jo(9,{destroy:void 0},hv.bind(null,c,m,o,r),null),o},useId:function(){var t=Ms(),r=Nn.identifierPrefix;if(an){var o=Gr,c=Wr;o=(c&~(1<<32-Ie(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=Ju++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=xT++,r="_"+r+"r_"+o.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Wf,useFormState:xv,useActionState:xv,useOptimistic:function(t){var r=Ms();r.memoizedState=r.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Gf.bind(null,Vt,!0,o),o.dispatch=r,[t,r]},useMemoCache:Of,useCacheRefresh:function(){return Ms().memoizedState=jT.bind(null,Vt)},useEffectEvent:function(t){var r=Ms(),o={impl:t};return r.memoizedState=o,function(){if((vn&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},Kf={readContext:ys,use:eh,useCallback:Iv,useContext:ys,useEffect:Ff,useImperativeHandle:Av,useInsertionEffect:Nv,useLayoutEffect:Cv,useMemo:Dv,useReducer:th,useRef:kv,useState:function(){return th(ya)},useDebugValue:Hf,useDeferredValue:function(t,r){var o=Jn();return Mv(o,En.memoizedState,t,r)},useTransition:function(){var t=th(ya)[0],r=Jn().memoizedState;return[typeof t=="boolean"?t:cc(t),r]},useSyncExternalStore:cv,useId:Vv,useHostTransitionStatus:Wf,useFormState:_v,useActionState:_v,useOptimistic:function(t,r){var o=Jn();return pv(o,En,t,r)},useMemoCache:Of,useCacheRefresh:Bv};Kf.useEffectEvent=jv;var qv={readContext:ys,use:eh,useCallback:Iv,useContext:ys,useEffect:Ff,useImperativeHandle:Av,useInsertionEffect:Nv,useLayoutEffect:Cv,useMemo:Dv,useReducer:Bf,useRef:kv,useState:function(){return Bf(ya)},useDebugValue:Hf,useDeferredValue:function(t,r){var o=Jn();return En===null?qf(o,t,r):Mv(o,En.memoizedState,t,r)},useTransition:function(){var t=Bf(ya)[0],r=Jn().memoizedState;return[typeof t=="boolean"?t:cc(t),r]},useSyncExternalStore:cv,useId:Vv,useHostTransitionStatus:Wf,useFormState:Ev,useActionState:Ev,useOptimistic:function(t,r){var o=Jn();return En!==null?pv(o,En,t,r):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:Of,useCacheRefresh:Bv};qv.useEffectEvent=jv;function Yf(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:T({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Qf={enqueueSetState:function(t,r,o){t=t._reactInternals;var c=er(),f=Ja(c);f.payload=r,o!=null&&(f.callback=o),r=Za(t,f,c),r!==null&&(zs(r,t,c),ac(r,t,c))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=er(),f=Ja(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Za(t,f,c),r!==null&&(zs(r,t,c),ac(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=er(),c=Ja(o);c.tag=2,r!=null&&(c.callback=r),r=Za(t,c,o),r!==null&&(zs(r,t,o),ac(r,t,o))}};function $v(t,r,o,c,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!Xl(o,c)||!Xl(f,m):!0}function Wv(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&Qf.enqueueReplaceState(r,r.state,null)}function io(t,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(t=t.defaultProps){o===r&&(o=T({},o));for(var f in t)o[f]===void 0&&(o[f]=t[f])}return o}function Gv(t){Lu(t)}function Kv(t){console.error(t)}function Yv(t){Lu(t)}function ah(t,r){try{var o=t.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Qv(t,r,o){try{var c=t.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Xf(t,r,o){return o=Ja(o),o.tag=3,o.payload={element:null},o.callback=function(){ah(t,r)},o}function Xv(t){return t=Ja(t),t.tag=3,t}function Jv(t,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){Qv(r,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Qv(r,o,c),typeof f!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var j=c.stack;this.componentDidCatch(c.value,{componentStack:j!==null?j:""})})}function CT(t,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&qo(r,o,f,!0),o=Qs.current,o!==null){switch(o.tag){case 31:case 13:return dr===null?yh():o.alternate===null&&$n===0&&($n=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Wu?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),_m(t,c,f)),!1;case 22:return o.flags|=65536,c===Wu?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),_m(t,c,f)),!1}throw Error(a(435,o.tag))}return _m(t,c,f),yh(),!1}if(an)return r=Qs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==gf&&(t=Error(a(422),{cause:c}),ec(lr(t,o)))):(c!==gf&&(r=Error(a(423),{cause:c}),ec(lr(r,o))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=lr(c,o),f=Xf(t.stateNode,c,f),jf(t,f),$n!==4&&($n=2)),!1;var m=Error(a(520),{cause:c});if(m=lr(m,o),bc===null?bc=[m]:bc.push(m),$n!==4&&($n=2),r===null)return!0;c=lr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,t=f&-f,o.lanes|=t,t=Xf(o.stateNode,c,t),jf(o,t),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ai===null||!ai.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Xv(f),Jv(f,t,o,c),jf(o,f),!1}o=o.return}while(o!==null);return!1}var Jf=Error(a(461)),as=!1;function vs(t,r,o,c){r.child=t===null?nv(r,null,o,c):ro(r,t.child,o,c)}function Zv(t,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var b={};for(var j in c)j!=="ref"&&(b[j]=c[j])}else b=c;return eo(r),c=Df(t,r,o,b,m,f),j=Mf(),t!==null&&!as?(Pf(t,r,f),va(t,r,f)):(an&&j&&mf(r),r.flags|=1,vs(t,r,c,f),r.child)}function eb(t,r,o,c,f){if(t===null){var m=o.type;return typeof m=="function"&&!hf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,tb(t,r,m,c,f)):(t=Uu(o.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!im(t,f)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:Xl,o(b,c)&&t.ref===r.ref)return va(t,r,f)}return r.flags|=1,t=da(m,c),t.ref=r.ref,t.return=r,r.child=t}function tb(t,r,o,c,f){if(t!==null){var m=t.memoizedProps;if(Xl(m,c)&&t.ref===r.ref)if(as=!1,r.pendingProps=c=m,im(t,f))(t.flags&131072)!==0&&(as=!0);else return r.lanes=t.lanes,va(t,r,f)}return Zf(t,r,o,c,f)}function nb(t,r,o,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return sb(t,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&qu(r,m!==null?m.cachePool:null),m!==null?av(r,m):Cf(),iv(r);else return c=r.lanes=536870912,sb(t,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(qu(r,m.cachePool),av(r,m),ti(),r.memoizedState=null):(t!==null&&qu(r,null),Cf(),ti());return vs(t,r,f,o),r.child}function dc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function sb(t,r,o,c,f){var m=Tf();return m=m===null?null:{parent:ss._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},t!==null&&qu(r,null),Cf(),iv(r),t!==null&&qo(t,r,c,!0),r.childLanes=f,null}function ih(t,r){return r=lh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function rb(t,r,o){return ro(r,t.child,null,o),t=ih(r,r.pendingProps),t.flags|=2,Xs(r),r.memoizedState=null,t}function RT(t,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(an){if(c.mode==="hidden")return t=ih(r,c),r.lanes=536870912,dc(null,t);if(Af(r),(t=An)?(t=g0(t,hr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ga!==null?{id:Wr,overflow:Gr}:null,retryLane:536870912,hydrationErrors:null},o=zy(t),o.return=r,r.child=o,gs=r,An=null)):t=null,t===null)throw Ya(r);return r.lanes=536870912,null}return ih(r,c)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(Af(r),f)if(r.flags&256)r.flags&=-257,r=rb(t,r,o);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(a(558));else if(as||qo(t,r,o,!1),f=(o&t.childLanes)!==0,as||f){if(c=Nn,c!==null&&(b=jn(c,o),b!==0&&b!==m.retryLane))throw m.retryLane=b,Qi(t,b),zs(c,t,b),Jf;yh(),r=rb(t,r,o)}else t=m.treeContext,An=fr(b.nextSibling),gs=r,an=!0,Ka=null,hr=!1,t!==null&&qy(r,t),r=ih(r,c),r.flags|=4096;return r}return t=da(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function oh(t,r){var o=r.ref;if(o===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(t===null||t.ref!==o)&&(r.flags|=4194816)}}function Zf(t,r,o,c,f){return eo(r),o=Df(t,r,o,c,void 0,f),c=Mf(),t!==null&&!as?(Pf(t,r,f),va(t,r,f)):(an&&c&&mf(r),r.flags|=1,vs(t,r,o,f),r.child)}function ab(t,r,o,c,f,m){return eo(r),r.updateQueue=null,o=lv(r,c,o,f),ov(t),c=Mf(),t!==null&&!as?(Pf(t,r,m),va(t,r,m)):(an&&c&&mf(r),r.flags|=1,vs(t,r,o,m),r.child)}function ib(t,r,o,c,f){if(eo(r),r.stateNode===null){var m=Uo,b=o.contextType;typeof b=="object"&&b!==null&&(m=ys(b)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Qf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},kf(r),b=o.contextType,m.context=typeof b=="object"&&b!==null?ys(b):Uo,m.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Yf(r,o,b,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Qf.enqueueReplaceState(m,m.state,null),oc(r,c,m,f),ic(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var j=r.memoizedProps,O=io(o,j);m.props=O;var ee=m.context,me=o.contextType;b=Uo,typeof me=="object"&&me!==null&&(b=ys(me));var xe=o.getDerivedStateFromProps;me=typeof xe=="function"||typeof m.getSnapshotBeforeUpdate=="function",j=r.pendingProps!==j,me||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(j||ee!==b)&&Wv(r,m,c,b),Xa=!1;var te=r.memoizedState;m.state=te,oc(r,c,m,f),ic(),ee=r.memoizedState,j||te!==ee||Xa?(typeof xe=="function"&&(Yf(r,o,xe,c),ee=r.memoizedState),(O=Xa||$v(r,o,O,c,te,ee,b))?(me||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ee),m.props=c,m.state=ee,m.context=b,c=O):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Sf(t,r),b=r.memoizedProps,me=io(o,b),m.props=me,xe=r.pendingProps,te=m.context,ee=o.contextType,O=Uo,typeof ee=="object"&&ee!==null&&(O=ys(ee)),j=o.getDerivedStateFromProps,(ee=typeof j=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==xe||te!==O)&&Wv(r,m,c,O),Xa=!1,te=r.memoizedState,m.state=te,oc(r,c,m,f),ic();var oe=r.memoizedState;b!==xe||te!==oe||Xa||t!==null&&t.dependencies!==null&&Fu(t.dependencies)?(typeof j=="function"&&(Yf(r,o,j,c),oe=r.memoizedState),(me=Xa||$v(r,o,me,c,te,oe,O)||t!==null&&t.dependencies!==null&&Fu(t.dependencies))?(ee||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,oe,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,oe,O)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=oe),m.props=c,m.state=oe,m.context=O,c=me):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,oh(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=ro(r,t.child,null,f),r.child=ro(r,null,o,f)):vs(t,r,o,f),r.memoizedState=m.state,t=r.child):t=va(t,r,f),t}function ob(t,r,o,c){return Ji(),r.flags|=256,vs(t,r,o,c),r.child}var em={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tm(t){return{baseLanes:t,cachePool:Qy()}}function nm(t,r,o){return t=t!==null?t.childLanes&~o:0,r&&(t|=Zs),t}function lb(t,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(Xn.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(an){if(f?ei(r):ti(),(t=An)?(t=g0(t,hr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ga!==null?{id:Wr,overflow:Gr}:null,retryLane:536870912,hydrationErrors:null},o=zy(t),o.return=r,r.child=o,gs=r,An=null)):t=null,t===null)throw Ya(r);return Vm(t)?r.lanes=32:r.lanes=536870912,null}var j=c.children;return c=c.fallback,f?(ti(),f=r.mode,j=lh({mode:"hidden",children:j},f),c=Xi(c,f,o,null),j.return=r,c.return=r,j.sibling=c,r.child=j,c=r.child,c.memoizedState=tm(o),c.childLanes=nm(t,b,o),r.memoizedState=em,dc(null,c)):(ei(r),sm(r,j))}var O=t.memoizedState;if(O!==null&&(j=O.dehydrated,j!==null)){if(m)r.flags&256?(ei(r),r.flags&=-257,r=rm(t,r,o)):r.memoizedState!==null?(ti(),r.child=t.child,r.flags|=128,r=null):(ti(),j=c.fallback,f=r.mode,c=lh({mode:"visible",children:c.children},f),j=Xi(j,f,o,null),j.flags|=2,c.return=r,j.return=r,c.sibling=j,r.child=c,ro(r,t.child,null,o),c=r.child,c.memoizedState=tm(o),c.childLanes=nm(t,b,o),r.memoizedState=em,r=dc(null,c));else if(ei(r),Vm(j)){if(b=j.nextSibling&&j.nextSibling.dataset,b)var ee=b.dgst;b=ee,c=Error(a(419)),c.stack="",c.digest=b,ec({value:c,source:null,stack:null}),r=rm(t,r,o)}else if(as||qo(t,r,o,!1),b=(o&t.childLanes)!==0,as||b){if(b=Nn,b!==null&&(c=jn(b,o),c!==0&&c!==O.retryLane))throw O.retryLane=c,Qi(t,c),zs(b,t,c),Jf;Om(j)||yh(),r=rm(t,r,o)}else Om(j)?(r.flags|=192,r.child=t.child,r=null):(t=O.treeContext,An=fr(j.nextSibling),gs=r,an=!0,Ka=null,hr=!1,t!==null&&qy(r,t),r=sm(r,c.children),r.flags|=4096);return r}return f?(ti(),j=c.fallback,f=r.mode,O=t.child,ee=O.sibling,c=da(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,ee!==null?j=da(ee,j):(j=Xi(j,f,o,null),j.flags|=2),j.return=r,c.return=r,c.sibling=j,r.child=c,dc(null,c),c=r.child,j=t.child.memoizedState,j===null?j=tm(o):(f=j.cachePool,f!==null?(O=ss._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=Qy(),j={baseLanes:j.baseLanes|o,cachePool:f}),c.memoizedState=j,c.childLanes=nm(t,b,o),r.memoizedState=em,dc(t.child,c)):(ei(r),o=t.child,t=o.sibling,o=da(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=o,r.memoizedState=null,o)}function sm(t,r){return r=lh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function lh(t,r){return t=Ys(22,t,null,r),t.lanes=0,t}function rm(t,r,o){return ro(r,t.child,null,o),t=sm(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function cb(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),bf(t.return,r,o)}function am(t,r,o,c,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=f,b.treeForkCount=m)}function ub(t,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var b=Xn.current,j=(b&2)!==0;if(j?(b=b&1|2,r.flags|=128):b&=1,ge(Xn,b),vs(t,r,c,o),c=an?Zl:0,!j&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cb(t,o,r);else if(t.tag===19)cb(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&Qu(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),am(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Qu(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}am(r,!0,o,null,m,c);break;case"together":am(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function va(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),ri|=r.lanes,(o&r.childLanes)===0)if(t!==null){if(qo(t,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,o=da(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=da(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function im(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Fu(t)))}function AT(t,r,o){switch(r.tag){case 3:ht(r,r.stateNode.containerInfo),Qa(r,ss,t.memoizedState.cache),Ji();break;case 27:case 5:Wt(r);break;case 4:ht(r,r.stateNode.containerInfo);break;case 10:Qa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Af(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ei(r),r.flags|=128,null):(o&r.child.childLanes)!==0?lb(t,r,o):(ei(r),t=va(t,r,o),t!==null?t.sibling:null);ei(r);break;case 19:var f=(t.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(qo(t,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return ub(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ge(Xn,Xn.current),c)break;return null;case 22:return r.lanes=0,nb(t,r,o,r.pendingProps);case 24:Qa(r,ss,t.memoizedState.cache)}return va(t,r,o)}function hb(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps)as=!0;else{if(!im(t,o)&&(r.flags&128)===0)return as=!1,AT(t,r,o);as=(t.flags&131072)!==0}else as=!1,an&&(r.flags&1048576)!==0&&Hy(r,Zl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=no(r.elementType),r.type=t,typeof t=="function")hf(t)?(c=io(t,c),r.tag=1,r=ib(null,r,t,c,o)):(r.tag=0,r=Zf(null,r,t,c,o));else{if(t!=null){var f=t.$$typeof;if(f===ke){r.tag=11,r=Zv(null,r,t,c,o);break e}else if(f===I){r.tag=14,r=eb(null,r,t,c,o);break e}}throw r=We(t)||t,Error(a(306,r,""))}}return r;case 0:return Zf(t,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=io(c,r.pendingProps),ib(t,r,c,f,o);case 3:e:{if(ht(r,r.stateNode.containerInfo),t===null)throw Error(a(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Sf(t,r),oc(r,c,null,o);var b=r.memoizedState;if(c=b.cache,Qa(r,ss,c),c!==m.cache&&wf(r,[ss],o,!0),ic(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=ob(t,r,c,o);break e}else if(c!==f){f=lr(Error(a(424)),r),ec(f),r=ob(t,r,c,o);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,An=fr(t.firstChild),gs=r,an=!0,Ka=null,hr=!0,o=nv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ji(),c===f){r=va(t,r,o);break e}vs(t,r,c,o)}r=r.child}return r;case 26:return oh(t,r),t===null?(o=_0(r.type,null,r.pendingProps,null))?r.memoizedState=o:an||(o=r.type,t=r.pendingProps,c=Eh(Me.current).createElement(o),c[Be]=r,c[ut]=t,bs(c,o,t),C(c),r.stateNode=c):r.memoizedState=_0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Wt(r),t===null&&an&&(c=r.stateNode=b0(r.type,r.pendingProps,Me.current),gs=r,hr=!0,f=An,ci(r.type)?(Bm=f,An=fr(c.firstChild)):An=f),vs(t,r,r.pendingProps.children,o),oh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&an&&((f=c=An)&&(c=oE(c,r.type,r.pendingProps,hr),c!==null?(r.stateNode=c,gs=r,An=fr(c.firstChild),hr=!1,f=!0):f=!1),f||Ya(r)),Wt(r),f=r.type,m=r.pendingProps,b=t!==null?t.memoizedProps:null,c=m.children,Mm(f,m)?c=null:b!==null&&Mm(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Df(t,r,_T,null,null,o),jc._currentValue=f),oh(t,r),vs(t,r,c,o),r.child;case 6:return t===null&&an&&((t=o=An)&&(o=lE(o,r.pendingProps,hr),o!==null?(r.stateNode=o,gs=r,An=null,t=!0):t=!1),t||Ya(r)),null;case 13:return lb(t,r,o);case 4:return ht(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=ro(r,null,c,o):vs(t,r,c,o),r.child;case 11:return Zv(t,r,r.type,r.pendingProps,o);case 7:return vs(t,r,r.pendingProps,o),r.child;case 8:return vs(t,r,r.pendingProps.children,o),r.child;case 12:return vs(t,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Qa(r,r.type,c.value),vs(t,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,eo(r),f=ys(f),c=c(f),r.flags|=1,vs(t,r,c,o),r.child;case 14:return eb(t,r,r.type,r.pendingProps,o);case 15:return tb(t,r,r.type,r.pendingProps,o);case 19:return ub(t,r,o);case 31:return RT(t,r,o);case 22:return nb(t,r,o,r.pendingProps);case 24:return eo(r),c=ys(ss),t===null?(f=Tf(),f===null&&(f=Nn,m=xf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},kf(r),Qa(r,ss,f)):((t.lanes&o)!==0&&(Sf(t,r),oc(r,null,null,o),ic()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Qa(r,ss,c)):(c=m.cache,Qa(r,ss,c),c!==f.cache&&wf(r,[ss],o,!0))),vs(t,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function ba(t){t.flags|=4}function om(t,r,o,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Vb())t.flags|=8192;else throw so=Wu,Ef}else t.flags&=-16777217}function db(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!j0(r))if(Vb())t.flags|=8192;else throw so=Wu,Ef}function ch(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?bt():536870912,t.lanes|=r,nl|=r)}function fc(t,r){if(!an)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function In(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function IT(t,r,o){var c=r.pendingProps;switch(pf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(r),null;case 1:return In(r),null;case 3:return o=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),pa(ss),pt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Ho(r)?ba(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,yf())),In(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(ba(r),m!==null?(In(r),db(r,m)):(In(r),om(r,f,null,c,o))):m?m!==t.memoizedState?(ba(r),In(r),db(r,m)):(In(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&ba(r),In(r),om(r,f,t,c,o)),null;case 27:if(pn(r),o=Me.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&ba(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return In(r),null}t=Se.current,Ho(r)?$y(r):(t=b0(f,c,o),r.stateNode=t,ba(r))}return In(r),null;case 5:if(pn(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&ba(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return In(r),null}if(m=Se.current,Ho(r))$y(r);else{var b=Eh(Me.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(f,{is:c.is}):b.createElement(f)}}m[Be]=r,m[ut]=c;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(bs(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ba(r)}}return In(r),om(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,o),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&ba(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(t=Me.current,Ho(r)){if(t=r.stateNode,o=r.memoizedProps,c=null,f=gs,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[Be]=r,t=!!(t.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||l0(t.nodeValue,o)),t||Ya(r,!0)}else t=Eh(t).createTextNode(c),t[Be]=r,r.stateNode=t}return In(r),null;case 31:if(o=r.memoizedState,t===null||t.memoizedState!==null){if(c=Ho(r),o!==null){if(t===null){if(!c)throw Error(a(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Be]=r}else Ji(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;In(r),t=!1}else o=yf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return r.flags&256?(Xs(r),r):(Xs(r),null);if((r.flags&128)!==0)throw Error(a(558))}return In(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ho(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Be]=r}else Ji(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;In(r),f=!1}else f=yf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Xs(r),r):(Xs(r),null)}return Xs(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,t=t!==null&&t.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==t&&o&&(r.child.flags|=8192),ch(r,r.updateQueue),In(r),null);case 4:return pt(),t===null&&Cm(r.stateNode.containerInfo),In(r),null;case 10:return pa(r.type),In(r),null;case 19:if(G(Xn),c=r.memoizedState,c===null)return In(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)fc(c,!1);else{if($n!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Qu(t),m!==null){for(r.flags|=128,fc(c,!1),t=m.updateQueue,r.updateQueue=t,ch(r,t),r.subtreeFlags=0,t=o,o=r.child;o!==null;)Uy(o,t),o=o.sibling;return ge(Xn,Xn.current&1|2),an&&fa(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&Bt()>mh&&(r.flags|=128,f=!0,fc(c,!1),r.lanes=4194304)}else{if(!f)if(t=Qu(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,ch(r,t),fc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!an)return In(r),null}else 2*Bt()-c.renderingStartTime>mh&&o!==536870912&&(r.flags|=128,f=!0,fc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Bt(),t.sibling=null,o=Xn.current,ge(Xn,f?o&1|2:o&1),an&&fa(r,c.treeForkCount),t):(In(r),null);case 22:case 23:return Xs(r),Rf(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(In(r),r.subtreeFlags&6&&(r.flags|=8192)):In(r),o=r.updateQueue,o!==null&&ch(r,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),t!==null&&G(to),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),pa(ss),In(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function DT(t,r){switch(pf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return pa(ss),pt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return pn(r),null;case 31:if(r.memoizedState!==null){if(Xs(r),r.alternate===null)throw Error(a(340));Ji()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Xs(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Ji()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return G(Xn),null;case 4:return pt(),null;case 10:return pa(r.type),null;case 22:case 23:return Xs(r),Rf(),t!==null&&G(to),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return pa(ss),null;case 25:return null;default:return null}}function fb(t,r){switch(pf(r),r.tag){case 3:pa(ss),pt();break;case 26:case 27:case 5:pn(r);break;case 4:pt();break;case 31:r.memoizedState!==null&&Xs(r);break;case 13:Xs(r);break;case 19:G(Xn);break;case 10:pa(r.type);break;case 22:case 23:Xs(r),Rf(),t!==null&&G(to);break;case 24:pa(ss)}}function mc(t,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&t)===t){c=void 0;var m=o.create,b=o.inst;c=m(),b.destroy=c}o=o.next}while(o!==f)}}catch(j){_n(r,r.return,j)}}function ni(t,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var b=c.inst,j=b.destroy;if(j!==void 0){b.destroy=void 0,f=r;var O=o,ee=j;try{ee()}catch(me){_n(f,O,me)}}}c=c.next}while(c!==m)}}catch(me){_n(r,r.return,me)}}function mb(t){var r=t.updateQueue;if(r!==null){var o=t.stateNode;try{rv(r,o)}catch(c){_n(t,t.return,c)}}}function pb(t,r,o){o.props=io(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(c){_n(t,r,c)}}function pc(t,r){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof o=="function"?t.refCleanup=o(c):o.current=c}}catch(f){_n(t,r,f)}}function Kr(t,r){var o=t.ref,c=t.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){_n(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){_n(t,r,f)}else o.current=null}function gb(t){var r=t.type,o=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){_n(t,t.return,f)}}function lm(t,r,o){try{var c=t.stateNode;tE(c,t.type,o,r),c[ut]=r}catch(f){_n(t,t.return,f)}}function yb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ci(t.type)||t.tag===4}function cm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ci(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function um(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(t),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Is));else if(c!==4&&(c===27&&ci(t.type)&&(o=t.stateNode,r=null),t=t.child,t!==null))for(um(t,r,o),t=t.sibling;t!==null;)um(t,r,o),t=t.sibling}function uh(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(c===27&&ci(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(uh(t,r,o),t=t.sibling;t!==null;)uh(t,r,o),t=t.sibling}function vb(t){var r=t.stateNode,o=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);bs(r,c,o),r[Be]=t,r[ut]=o}catch(m){_n(t,t.return,m)}}var wa=!1,is=!1,hm=!1,bb=typeof WeakSet=="function"?WeakSet:Set,ds=null;function MT(t,r){if(t=t.containerInfo,Im=Ah,t=Ay(t),sf(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var b=0,j=-1,O=-1,ee=0,me=0,xe=t,te=null;t:for(;;){for(var oe;xe!==o||f!==0&&xe.nodeType!==3||(j=b+f),xe!==m||c!==0&&xe.nodeType!==3||(O=b+c),xe.nodeType===3&&(b+=xe.nodeValue.length),(oe=xe.firstChild)!==null;)te=xe,xe=oe;for(;;){if(xe===t)break t;if(te===o&&++ee===f&&(j=b),te===m&&++me===c&&(O=b),(oe=xe.nextSibling)!==null)break;xe=te,te=xe.parentNode}xe=oe}o=j===-1||O===-1?null:{start:j,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dm={focusedElem:t,selectionRange:o},Ah=!1,ds=r;ds!==null;)if(r=ds,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ds=t;else for(;ds!==null;){switch(r=ds,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)f=t[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var et=io(o.type,f);t=c.getSnapshotBeforeUpdate(et,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(yt){_n(o,o.return,yt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,o=t.nodeType,o===9)Lm(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Lm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,ds=t;break}ds=r.return}}function wb(t,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:_a(t,o),c&4&&mc(5,o);break;case 1:if(_a(t,o),c&4)if(t=o.stateNode,r===null)try{t.componentDidMount()}catch(b){_n(o,o.return,b)}else{var f=io(o.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){_n(o,o.return,b)}}c&64&&mb(o),c&512&&pc(o,o.return);break;case 3:if(_a(t,o),c&64&&(t=o.updateQueue,t!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{rv(t,r)}catch(b){_n(o,o.return,b)}}break;case 27:r===null&&c&4&&vb(o);case 26:case 5:_a(t,o),r===null&&c&4&&gb(o),c&512&&pc(o,o.return);break;case 12:_a(t,o);break;case 31:_a(t,o),c&4&&Tb(t,o);break;case 13:_a(t,o),c&4&&Eb(t,o),c&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=HT.bind(null,o),cE(t,o))));break;case 22:if(c=o.memoizedState!==null||wa,!c){r=r!==null&&r.memoizedState!==null||is,f=wa;var m=is;wa=c,(is=r)&&!m?Ta(t,o,(o.subtreeFlags&8772)!==0):_a(t,o),wa=f,is=m}break;case 30:break;default:_a(t,o)}}function xb(t){var r=t.alternate;r!==null&&(t.alternate=null,xb(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Hn(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ln=null,Os=!1;function xa(t,r,o){for(o=o.child;o!==null;)_b(t,r,o),o=o.sibling}function _b(t,r,o){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(Pe,o)}catch{}switch(o.tag){case 26:is||Kr(o,r),xa(t,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:is||Kr(o,r);var c=Ln,f=Os;ci(o.type)&&(Ln=o.stateNode,Os=!1),xa(t,r,o),Ec(o.stateNode),Ln=c,Os=f;break;case 5:is||Kr(o,r);case 6:if(c=Ln,f=Os,Ln=null,xa(t,r,o),Ln=c,Os=f,Ln!==null)if(Os)try{(Ln.nodeType===9?Ln.body:Ln.nodeName==="HTML"?Ln.ownerDocument.body:Ln).removeChild(o.stateNode)}catch(m){_n(o,r,m)}else try{Ln.removeChild(o.stateNode)}catch(m){_n(o,r,m)}break;case 18:Ln!==null&&(Os?(t=Ln,m0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),ul(t)):m0(Ln,o.stateNode));break;case 4:c=Ln,f=Os,Ln=o.stateNode.containerInfo,Os=!0,xa(t,r,o),Ln=c,Os=f;break;case 0:case 11:case 14:case 15:ni(2,o,r),is||ni(4,o,r),xa(t,r,o);break;case 1:is||(Kr(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&pb(o,r,c)),xa(t,r,o);break;case 21:xa(t,r,o);break;case 22:is=(c=is)||o.memoizedState!==null,xa(t,r,o),is=c;break;default:xa(t,r,o)}}function Tb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ul(t)}catch(o){_n(r,r.return,o)}}}function Eb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ul(t)}catch(o){_n(r,r.return,o)}}function PT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new bb),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new bb),r;default:throw Error(a(435,t.tag))}}function hh(t,r){var o=PT(t);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=qT.bind(null,t,c);c.then(f,f)}})}function Vs(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=t,b=r,j=b;e:for(;j!==null;){switch(j.tag){case 27:if(ci(j.type)){Ln=j.stateNode,Os=!1;break e}break;case 5:Ln=j.stateNode,Os=!1;break e;case 3:case 4:Ln=j.stateNode.containerInfo,Os=!0;break e}j=j.return}if(Ln===null)throw Error(a(160));_b(m,b,f),Ln=null,Os=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)kb(r,t),r=r.sibling}var Nr=null;function kb(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Vs(r,t),Bs(t),c&4&&(ni(3,t,t.return),mc(3,t),ni(5,t,t.return));break;case 1:Vs(r,t),Bs(t),c&512&&(is||o===null||Kr(o,o.return)),c&64&&wa&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Nr;if(Vs(r,t),Bs(t),c&512&&(is||o===null||Kr(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=t.memoizedState,o===null)if(c===null)if(t.stateNode===null){e:{c=t.type,o=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Bn]||m[Be]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),bs(m,c,o),m[Be]=t,C(m),c=m;break e;case"link":var b=k0("link","href",f).get(c+(o.href||""));if(b){for(var j=0;j<b.length;j++)if(m=b[j],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(j,1);break t}}m=f.createElement(c),bs(m,c,o),f.head.appendChild(m);break;case"meta":if(b=k0("meta","content",f).get(c+(o.content||""))){for(j=0;j<b.length;j++)if(m=b[j],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(j,1);break t}}m=f.createElement(c),bs(m,c,o),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[Be]=t,C(m),c=m}t.stateNode=c}else S0(f,t.type,t.stateNode);else t.stateNode=E0(f,c,t.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?S0(f,t.type,t.stateNode):E0(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&lm(t,t.memoizedProps,o.memoizedProps)}break;case 27:Vs(r,t),Bs(t),c&512&&(is||o===null||Kr(o,o.return)),o!==null&&c&4&&lm(t,t.memoizedProps,o.memoizedProps);break;case 5:if(Vs(r,t),Bs(t),c&512&&(is||o===null||Kr(o,o.return)),t.flags&32){f=t.stateNode;try{zn(f,"")}catch(et){_n(t,t.return,et)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,lm(t,f,o!==null?o.memoizedProps:f)),c&1024&&(hm=!0);break;case 6:if(Vs(r,t),Bs(t),c&4){if(t.stateNode===null)throw Error(a(162));c=t.memoizedProps,o=t.stateNode;try{o.nodeValue=c}catch(et){_n(t,t.return,et)}}break;case 3:if(jh=null,f=Nr,Nr=kh(r.containerInfo),Vs(r,t),Nr=f,Bs(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{ul(r.containerInfo)}catch(et){_n(t,t.return,et)}hm&&(hm=!1,Sb(t));break;case 4:c=Nr,Nr=kh(t.stateNode.containerInfo),Vs(r,t),Bs(t),Nr=c;break;case 12:Vs(r,t),Bs(t);break;case 31:Vs(r,t),Bs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,hh(t,c)));break;case 13:Vs(r,t),Bs(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(fh=Bt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,hh(t,c)));break;case 22:f=t.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,ee=wa,me=is;if(wa=ee||f,is=me||O,Vs(r,t),is=me,wa=ee,Bs(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||O||wa||is||oo(t)),o=null,r=t;;){if(r.tag===5||r.tag===26){if(o===null){O=o=r;try{if(m=O.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{j=O.stateNode;var xe=O.memoizedProps.style,te=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;j.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(et){_n(O,O.return,et)}}}else if(r.tag===6){if(o===null){O=r;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(et){_n(O,O.return,et)}}}else if(r.tag===18){if(o===null){O=r;try{var oe=O.stateNode;f?p0(oe,!0):p0(O.stateNode,!1)}catch(et){_n(O,O.return,et)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,hh(t,o))));break;case 19:Vs(r,t),Bs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,hh(t,c)));break;case 30:break;case 21:break;default:Vs(r,t),Bs(t)}}function Bs(t){var r=t.flags;if(r&2){try{for(var o,c=t.return;c!==null;){if(yb(c)){o=c;break}c=c.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,m=cm(t);uh(t,m,f);break;case 5:var b=o.stateNode;o.flags&32&&(zn(b,""),o.flags&=-33);var j=cm(t);uh(t,j,b);break;case 3:case 4:var O=o.stateNode.containerInfo,ee=cm(t);um(t,ee,O);break;default:throw Error(a(161))}}catch(me){_n(t,t.return,me)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Sb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Sb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function _a(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)wb(t,r.alternate,r),r=r.sibling}function oo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ni(4,r,r.return),oo(r);break;case 1:Kr(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&pb(r,r.return,o),oo(r);break;case 27:Ec(r.stateNode);case 26:case 5:Kr(r,r.return),oo(r);break;case 22:r.memoizedState===null&&oo(r);break;case 30:oo(r);break;default:oo(r)}t=t.sibling}}function Ta(t,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:Ta(f,m,o),mc(4,m);break;case 1:if(Ta(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){_n(c,c.return,ee)}if(c=m,f=c.updateQueue,f!==null){var j=c.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)sv(O[f],j)}catch(ee){_n(c,c.return,ee)}}o&&b&64&&mb(m),pc(m,m.return);break;case 27:vb(m);case 26:case 5:Ta(f,m,o),o&&c===null&&b&4&&gb(m),pc(m,m.return);break;case 12:Ta(f,m,o);break;case 31:Ta(f,m,o),o&&b&4&&Tb(f,m);break;case 13:Ta(f,m,o),o&&b&4&&Eb(f,m);break;case 22:m.memoizedState===null&&Ta(f,m,o),pc(m,m.return);break;case 30:break;default:Ta(f,m,o)}r=r.sibling}}function dm(t,r){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&tc(o))}function fm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&tc(t))}function Cr(t,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)jb(t,r,o,c),r=r.sibling}function jb(t,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Cr(t,r,o,c),f&2048&&mc(9,r);break;case 1:Cr(t,r,o,c);break;case 3:Cr(t,r,o,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&tc(t)));break;case 12:if(f&2048){Cr(t,r,o,c),t=r.stateNode;try{var m=r.memoizedProps,b=m.id,j=m.onPostCommit;typeof j=="function"&&j(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){_n(r,r.return,O)}}else Cr(t,r,o,c);break;case 31:Cr(t,r,o,c);break;case 13:Cr(t,r,o,c);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?Cr(t,r,o,c):gc(t,r):m._visibility&2?Cr(t,r,o,c):(m._visibility|=2,Zo(t,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&dm(b,r);break;case 24:Cr(t,r,o,c),f&2048&&fm(r.alternate,r);break;default:Cr(t,r,o,c)}}function Zo(t,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,b=r,j=o,O=c,ee=b.flags;switch(b.tag){case 0:case 11:case 15:Zo(m,b,j,O,f),mc(8,b);break;case 23:break;case 22:var me=b.stateNode;b.memoizedState!==null?me._visibility&2?Zo(m,b,j,O,f):gc(m,b):(me._visibility|=2,Zo(m,b,j,O,f)),f&&ee&2048&&dm(b.alternate,b);break;case 24:Zo(m,b,j,O,f),f&&ee&2048&&fm(b.alternate,b);break;default:Zo(m,b,j,O,f)}r=r.sibling}}function gc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=t,c=r,f=c.flags;switch(c.tag){case 22:gc(o,c),f&2048&&dm(c.alternate,c);break;case 24:gc(o,c),f&2048&&fm(c.alternate,c);break;default:gc(o,c)}r=r.sibling}}var yc=8192;function el(t,r,o){if(t.subtreeFlags&yc)for(t=t.child;t!==null;)Nb(t,r,o),t=t.sibling}function Nb(t,r,o){switch(t.tag){case 26:el(t,r,o),t.flags&yc&&t.memoizedState!==null&&xE(o,Nr,t.memoizedState,t.memoizedProps);break;case 5:el(t,r,o);break;case 3:case 4:var c=Nr;Nr=kh(t.stateNode.containerInfo),el(t,r,o),Nr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=yc,yc=16777216,el(t,r,o),yc=c):el(t,r,o));break;default:el(t,r,o)}}function Cb(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function vc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];ds=c,Ab(c,t)}Cb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rb(t),t=t.sibling}function Rb(t){switch(t.tag){case 0:case 11:case 15:vc(t),t.flags&2048&&ni(9,t,t.return);break;case 3:vc(t);break;case 12:vc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,dh(t)):vc(t);break;default:vc(t)}}function dh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];ds=c,Ab(c,t)}Cb(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ni(8,r,r.return),dh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,dh(r));break;default:dh(r)}t=t.sibling}}function Ab(t,r){for(;ds!==null;){var o=ds;switch(o.tag){case 0:case 11:case 15:ni(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:tc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,ds=c;else e:for(o=t;ds!==null;){c=ds;var f=c.sibling,m=c.return;if(xb(c),c===o){ds=null;break e}if(f!==null){f.return=m,ds=f;break e}ds=m}}}var LT={getCacheForType:function(t){var r=ys(ss),o=r.data.get(t);return o===void 0&&(o=t(),r.data.set(t,o)),o},cacheSignal:function(){return ys(ss).controller.signal}},OT=typeof WeakMap=="function"?WeakMap:Map,vn=0,Nn=null,Kt=null,Xt=0,xn=0,Js=null,si=!1,tl=!1,mm=!1,Ea=0,$n=0,ri=0,lo=0,pm=0,Zs=0,nl=0,bc=null,Us=null,gm=!1,fh=0,Ib=0,mh=1/0,ph=null,ai=null,us=0,ii=null,sl=null,ka=0,ym=0,vm=null,Db=null,wc=0,bm=null;function er(){return(vn&2)!==0&&Xt!==0?Xt&-Xt:Y.T!==null?km():fe()}function Mb(){if(Zs===0)if((Xt&536870912)===0||an){var t=qt;qt<<=1,(qt&3932160)===0&&(qt=262144),Zs=t}else Zs=536870912;return t=Qs.current,t!==null&&(t.flags|=32),Zs}function zs(t,r,o){(t===Nn&&(xn===2||xn===9)||t.cancelPendingCommit!==null)&&(rl(t,0),oi(t,Xt,Zs,!1)),$t(t,o),((vn&2)===0||t!==Nn)&&(t===Nn&&((vn&2)===0&&(lo|=o),$n===4&&oi(t,Xt,Zs,!1)),Yr(t))}function Pb(t,r,o){if((vn&6)!==0)throw Error(a(327));var c=!o&&(r&127)===0&&(r&t.expiredLanes)===0||Dt(t,r),f=c?UT(t,r):xm(t,r,!0),m=c;do{if(f===0){tl&&!c&&oi(t,r,0,!1);break}else{if(o=t.current.alternate,m&&!VT(o)){f=xm(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var j=t;f=bc;var O=j.current.memoizedState.isDehydrated;if(O&&(rl(j,b).flags|=256),b=xm(j,b,!1),b!==2){if(mm&&!O){j.errorRecoveryDisabledLanes|=m,lo|=m,f=4;break e}m=Us,Us=f,m!==null&&(Us===null?Us=m:Us.push.apply(Us,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){rl(t,0),oi(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:oi(c,r,Zs,!si);break e;case 2:Us=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=fh+300-Bt(),10<f)){if(oi(c,r,Zs,!si),St(c,0,!0)!==0)break e;ka=r,c.timeoutHandle=d0(Lb.bind(null,c,o,Us,ph,gm,r,Zs,lo,nl,si,m,"Throttled",-0,0),f);break e}Lb(c,o,Us,ph,gm,r,Zs,lo,nl,si,m,null,-0,0)}}break}while(!0);Yr(t)}function Lb(t,r,o,c,f,m,b,j,O,ee,me,xe,te,oe){if(t.timeoutHandle=-1,xe=r.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Is},Nb(r,m,xe);var et=(m&62914560)===m?fh-Bt():(m&4194048)===m?Ib-Bt():0;if(et=_E(xe,et),et!==null){ka=m,t.cancelPendingCommit=et(qb.bind(null,t,r,m,o,c,f,b,j,O,me,xe,null,te,oe)),oi(t,m,b,!ee);return}}qb(t,r,m,o,c,f,b,j,O)}function VT(t){for(var r=t;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!Ks(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function oi(t,r,o,c){r&=~pm,r&=~lo,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-Ie(f),b=1<<m;c[m]=-1,f&=~b}o!==0&&ln(t,o,r)}function gh(){return(vn&6)===0?(xc(0),!1):!0}function wm(){if(Kt!==null){if(xn===0)var t=Kt.return;else t=Kt,ma=Zi=null,Lf(t),Ko=null,sc=0,t=Kt;for(;t!==null;)fb(t.alternate,t),t=t.return;Kt=null}}function rl(t,r){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,rE(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),ka=0,wm(),Nn=t,Kt=o=da(t.current,null),Xt=r,xn=0,Js=null,si=!1,tl=Dt(t,r),mm=!1,nl=Zs=pm=lo=ri=$n=0,Us=bc=null,gm=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-Ie(c),m=1<<f;r|=t[f],c&=~m}return Ea=r,Ou(),o}function Ob(t,r){Vt=null,Y.H=hc,r===Go||r===$u?(r=Zy(),xn=3):r===Ef?(r=Zy(),xn=4):xn=r===Jf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Js=r,Kt===null&&($n=1,ah(t,lr(r,t.current)))}function Vb(){var t=Qs.current;return t===null?!0:(Xt&4194048)===Xt?dr===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?t===dr:!1}function Bb(){var t=Y.H;return Y.H=hc,t===null?hc:t}function Ub(){var t=Y.A;return Y.A=LT,t}function yh(){$n=4,si||(Xt&4194048)!==Xt&&Qs.current!==null||(tl=!0),(ri&134217727)===0&&(lo&134217727)===0||Nn===null||oi(Nn,Xt,Zs,!1)}function xm(t,r,o){var c=vn;vn|=2;var f=Bb(),m=Ub();(Nn!==t||Xt!==r)&&(ph=null,rl(t,r)),r=!1;var b=$n;e:do try{if(xn!==0&&Kt!==null){var j=Kt,O=Js;switch(xn){case 8:wm(),b=6;break e;case 3:case 2:case 9:case 6:Qs.current===null&&(r=!0);var ee=xn;if(xn=0,Js=null,al(t,j,O,ee),o&&tl){b=0;break e}break;default:ee=xn,xn=0,Js=null,al(t,j,O,ee)}}BT(),b=$n;break}catch(me){Ob(t,me)}while(!0);return r&&t.shellSuspendCounter++,ma=Zi=null,vn=c,Y.H=f,Y.A=m,Kt===null&&(Nn=null,Xt=0,Ou()),b}function BT(){for(;Kt!==null;)zb(Kt)}function UT(t,r){var o=vn;vn|=2;var c=Bb(),f=Ub();Nn!==t||Xt!==r?(ph=null,mh=Bt()+500,rl(t,r)):tl=Dt(t,r);e:do try{if(xn!==0&&Kt!==null){r=Kt;var m=Js;t:switch(xn){case 1:xn=0,Js=null,al(t,r,m,1);break;case 2:case 9:if(Xy(m)){xn=0,Js=null,Fb(r);break}r=function(){xn!==2&&xn!==9||Nn!==t||(xn=7),Yr(t)},m.then(r,r);break e;case 3:xn=7;break e;case 4:xn=5;break e;case 7:Xy(m)?(xn=0,Js=null,Fb(r)):(xn=0,Js=null,al(t,r,m,7));break;case 5:var b=null;switch(Kt.tag){case 26:b=Kt.memoizedState;case 5:case 27:var j=Kt;if(b?j0(b):j.stateNode.complete){xn=0,Js=null;var O=j.sibling;if(O!==null)Kt=O;else{var ee=j.return;ee!==null?(Kt=ee,vh(ee)):Kt=null}break t}}xn=0,Js=null,al(t,r,m,5);break;case 6:xn=0,Js=null,al(t,r,m,6);break;case 8:wm(),$n=6;break e;default:throw Error(a(462))}}zT();break}catch(me){Ob(t,me)}while(!0);return ma=Zi=null,Y.H=c,Y.A=f,vn=o,Kt!==null?0:(Nn=null,Xt=0,Ou(),$n)}function zT(){for(;Kt!==null&&!ns();)zb(Kt)}function zb(t){var r=hb(t.alternate,t,Ea);t.memoizedProps=t.pendingProps,r===null?vh(t):Kt=r}function Fb(t){var r=t,o=r.alternate;switch(r.tag){case 15:case 0:r=ab(o,r,r.pendingProps,r.type,void 0,Xt);break;case 11:r=ab(o,r,r.pendingProps,r.type.render,r.ref,Xt);break;case 5:Lf(r);default:fb(o,r),r=Kt=Uy(r,Ea),r=hb(o,r,Ea)}t.memoizedProps=t.pendingProps,r===null?vh(t):Kt=r}function al(t,r,o,c){ma=Zi=null,Lf(r),Ko=null,sc=0;var f=r.return;try{if(CT(t,f,r,o,Xt)){$n=1,ah(t,lr(o,t.current)),Kt=null;return}}catch(m){if(f!==null)throw Kt=f,m;$n=1,ah(t,lr(o,t.current)),Kt=null;return}r.flags&32768?(an||c===1?t=!0:tl||(Xt&536870912)!==0?t=!1:(si=t=!0,(c===2||c===9||c===3||c===6)&&(c=Qs.current,c!==null&&c.tag===13&&(c.flags|=16384))),Hb(r,t)):vh(r)}function vh(t){var r=t;do{if((r.flags&32768)!==0){Hb(r,si);return}t=r.return;var o=IT(r.alternate,r,Ea);if(o!==null){Kt=o;return}if(r=r.sibling,r!==null){Kt=r;return}Kt=r=t}while(r!==null);$n===0&&($n=5)}function Hb(t,r){do{var o=DT(t.alternate,t);if(o!==null){o.flags&=32767,Kt=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(t=t.sibling,t!==null)){Kt=t;return}Kt=t=o}while(t!==null);$n=6,Kt=null}function qb(t,r,o,c,f,m,b,j,O){t.cancelPendingCommit=null;do bh();while(us!==0);if((vn&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=cf,sn(t,o,m,b,j,O),t===Nn&&(Kt=Nn=null,Xt=0),sl=r,ii=t,ka=o,ym=m,vm=f,Db=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,$T(de,function(){return Yb(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=Te.p,Te.p=2,b=vn,vn|=4;try{MT(t,r,o)}finally{vn=b,Te.p=f,Y.T=c}}us=1,$b(),Wb(),Gb()}}function $b(){if(us===1){us=0;var t=ii,r=sl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var c=Te.p;Te.p=2;var f=vn;vn|=4;try{kb(r,t);var m=Dm,b=Ay(t.containerInfo),j=m.focusedElem,O=m.selectionRange;if(b!==j&&j&&j.ownerDocument&&Ry(j.ownerDocument.documentElement,j)){if(O!==null&&sf(j)){var ee=O.start,me=O.end;if(me===void 0&&(me=ee),"selectionStart"in j)j.selectionStart=ee,j.selectionEnd=Math.min(me,j.value.length);else{var xe=j.ownerDocument||document,te=xe&&xe.defaultView||window;if(te.getSelection){var oe=te.getSelection(),et=j.textContent.length,yt=Math.min(O.start,et),Sn=O.end===void 0?yt:Math.min(O.end,et);!oe.extend&&yt>Sn&&(b=Sn,Sn=yt,yt=b);var K=Cy(j,yt),F=Cy(j,Sn);if(K&&F&&(oe.rangeCount!==1||oe.anchorNode!==K.node||oe.anchorOffset!==K.offset||oe.focusNode!==F.node||oe.focusOffset!==F.offset)){var Z=xe.createRange();Z.setStart(K.node,K.offset),oe.removeAllRanges(),yt>Sn?(oe.addRange(Z),oe.extend(F.node,F.offset)):(Z.setEnd(F.node,F.offset),oe.addRange(Z))}}}}for(xe=[],oe=j;oe=oe.parentNode;)oe.nodeType===1&&xe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<xe.length;j++){var ye=xe[j];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Ah=!!Im,Dm=Im=null}finally{vn=f,Te.p=c,Y.T=o}}t.current=r,us=2}}function Wb(){if(us===2){us=0;var t=ii,r=sl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var c=Te.p;Te.p=2;var f=vn;vn|=4;try{wb(t,r.alternate,r)}finally{vn=f,Te.p=c,Y.T=o}}us=3}}function Gb(){if(us===4||us===3){us=0,At();var t=ii,r=sl,o=ka,c=Db;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?us=5:(us=0,sl=ii=null,Kb(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ai=null),ue(o),r=r.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(Pe,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,f=Te.p,Te.p=2,Y.T=null;try{for(var m=t.onRecoverableError,b=0;b<c.length;b++){var j=c[b];m(j.value,{componentStack:j.stack})}}finally{Y.T=r,Te.p=f}}(ka&3)!==0&&bh(),Yr(t),f=t.pendingLanes,(o&261930)!==0&&(f&42)!==0?t===bm?wc++:(wc=0,bm=t):wc=0,xc(0)}}function Kb(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,tc(r)))}function bh(){return $b(),Wb(),Gb(),Yb()}function Yb(){if(us!==5)return!1;var t=ii,r=ym;ym=0;var o=ue(ka),c=Y.T,f=Te.p;try{Te.p=32>o?32:o,Y.T=null,o=vm,vm=null;var m=ii,b=ka;if(us=0,sl=ii=null,ka=0,(vn&6)!==0)throw Error(a(331));var j=vn;if(vn|=4,Rb(m.current),jb(m,m.current,b,o),vn=j,xc(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(Pe,m)}catch{}return!0}finally{Te.p=f,Y.T=c,Kb(t,r)}}function Qb(t,r,o){r=lr(o,r),r=Xf(t.stateNode,r,2),t=Za(t,r,2),t!==null&&($t(t,2),Yr(t))}function _n(t,r,o){if(t.tag===3)Qb(t,t,o);else for(;r!==null;){if(r.tag===3){Qb(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ai===null||!ai.has(c))){t=lr(o,t),o=Xv(2),c=Za(r,o,2),c!==null&&(Jv(o,c,r,t),$t(c,2),Yr(c));break}}r=r.return}}function _m(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new OT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(mm=!0,f.add(o),t=FT.bind(null,t,r,o),r.then(t,t))}function FT(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,Nn===t&&(Xt&o)===o&&($n===4||$n===3&&(Xt&62914560)===Xt&&300>Bt()-fh?(vn&2)===0&&rl(t,0):pm|=o,nl===Xt&&(nl=0)),Yr(t)}function Xb(t,r){r===0&&(r=bt()),t=Qi(t,r),t!==null&&($t(t,r),Yr(t))}function HT(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Xb(t,o)}function qT(t,r){var o=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),Xb(t,o)}function $T(t,r){return He(t,r)}var wh=null,il=null,Tm=!1,xh=!1,Em=!1,li=0;function Yr(t){t!==il&&t.next===null&&(il===null?wh=il=t:il=il.next=t),xh=!0,Tm||(Tm=!0,GT())}function xc(t,r){if(!Em&&xh){Em=!0;do for(var o=!1,c=wh;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var b=c.suspendedLanes,j=c.pingedLanes;m=(1<<31-Ie(42|t)+1)-1,m&=f&~(b&~j),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,t0(c,m))}else m=Xt,m=St(c,c===Nn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Dt(c,m)||(o=!0,t0(c,m));c=c.next}while(o);Em=!1}}function WT(){Jb()}function Jb(){xh=Tm=!1;var t=0;li!==0&&sE()&&(t=li);for(var r=Bt(),o=null,c=wh;c!==null;){var f=c.next,m=Zb(c,r);m===0?(c.next=null,o===null?wh=f:o.next=f,f===null&&(il=o)):(o=c,(t!==0||(m&3)!==0)&&(xh=!0)),c=f}us!==0&&us!==5||xc(t),li!==0&&(li=0)}function Zb(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Ie(m),j=1<<b,O=f[b];O===-1?((j&o)===0||(j&c)!==0)&&(f[b]=Ft(j,r)):O<=r&&(t.expiredLanes|=j),m&=~j}if(r=Nn,o=Xt,o=St(t,t===r?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,o===0||t===r&&(xn===2||xn===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Gt(c),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||Dt(t,o)){if(r=o&-o,r===t.callbackPriority)return r;switch(c!==null&&Gt(c),ue(o)){case 2:case 8:o=wn;break;case 32:o=de;break;case 268435456:o=je;break;default:o=de}return c=e0.bind(null,t),o=He(o,c),t.callbackPriority=r,t.callbackNode=o,r}return c!==null&&c!==null&&Gt(c),t.callbackPriority=2,t.callbackNode=null,2}function e0(t,r){if(us!==0&&us!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(bh()&&t.callbackNode!==o)return null;var c=Xt;return c=St(t,t===Nn?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Pb(t,c,r),Zb(t,Bt()),t.callbackNode!=null&&t.callbackNode===o?e0.bind(null,t):null)}function t0(t,r){if(bh())return null;Pb(t,r,!0)}function GT(){aE(function(){(vn&6)!==0?He(Ht,WT):Jb()})}function km(){if(li===0){var t=$o;t===0&&(t=xt,xt<<=1,(xt&261888)===0&&(xt=256)),li=t}return li}function n0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:za(""+t)}function s0(t,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,t.id&&o.setAttribute("form",t.id),r.parentNode.insertBefore(o,r),t=new FormData(t),o.parentNode.removeChild(o),t}function KT(t,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=n0((f[ut]||null).action),b=c.submitter;b&&(r=(r=b[ut]||null)?n0(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var j=new Fr("action","action",null,c,f);t.push({event:j,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(li!==0){var O=b?s0(f,b):new FormData(f);$f(o,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(j.preventDefault(),O=b?s0(f,b):new FormData(f),$f(o,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var Sm=0;Sm<lf.length;Sm++){var jm=lf[Sm],YT=jm.toLowerCase(),QT=jm[0].toUpperCase()+jm.slice(1);jr(YT,"on"+QT)}jr(My,"onAnimationEnd"),jr(Py,"onAnimationIteration"),jr(Ly,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(dT,"onTransitionRun"),jr(fT,"onTransitionStart"),jr(mT,"onTransitionCancel"),jr(Oy,"onTransitionEnd"),Re("onMouseEnter",["mouseout","mouseover"]),Re("onMouseLeave",["mouseout","mouseover"]),Re("onPointerEnter",["pointerout","pointerover"]),Re("onPointerLeave",["pointerout","pointerover"]),Le("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Le("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Le("onBeforeInput",["compositionend","keypress","textInput","paste"]),Le("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Le("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Le("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_c));function r0(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var j=c[b],O=j.instance,ee=j.currentTarget;if(j=j.listener,O!==m&&f.isPropagationStopped())break e;m=j,f.currentTarget=ee;try{m(f)}catch(me){Lu(me)}f.currentTarget=null,m=O}else for(b=0;b<c.length;b++){if(j=c[b],O=j.instance,ee=j.currentTarget,j=j.listener,O!==m&&f.isPropagationStopped())break e;m=j,f.currentTarget=ee;try{m(f)}catch(me){Lu(me)}f.currentTarget=null,m=O}}}}function Yt(t,r){var o=r[ot];o===void 0&&(o=r[ot]=new Set);var c=t+"__bubble";o.has(c)||(a0(r,t,2,!1),o.add(c))}function Nm(t,r,o){var c=0;r&&(c|=4),a0(o,t,c,r)}var _h="_reactListening"+Math.random().toString(36).slice(2);function Cm(t){if(!t[_h]){t[_h]=!0,$.forEach(function(o){o!=="selectionchange"&&(XT.has(o)||Nm(o,!1,t),Nm(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[_h]||(r[_h]=!0,Nm("selectionchange",!1,r))}}function a0(t,r,o,c){switch(M0(r)){case 2:var f=kE;break;case 8:f=SE;break;default:f=qm}o=f.bind(null,r,o,t),f=void 0,!Fi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function Rm(t,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var j=c.stateNode.containerInfo;if(j===f)break;if(b===4)for(b=c.return;b!==null;){var O=b.tag;if((O===3||O===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;j!==null;){if(b=hn(j),b===null)return;if(O=b.tag,O===5||O===6||O===26||O===27){c=m=b;continue e}j=j.parentNode}}c=c.return}Ha(function(){var ee=m,me=rr(o),xe=[];e:{var te=Vy.get(t);if(te!==void 0){var oe=Fr,et=t;switch(t){case"keypress":if(qi(o)===0)break e;case"keydown":case"keyup":oe=Du;break;case"focusin":et="focus",oe=Wi;break;case"focusout":et="blur",oe=Wi;break;case"beforeblur":case"afterblur":oe=Wi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=v;break;case My:case Py:case Ly:oe=Su;break;case Oy:oe=N;break;case"scroll":case"scrollend":oe=Wl;break;case"wheel":oe=ae;break;case"copy":case"cut":case"paste":oe=ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=ha;break;case"toggle":case"beforetoggle":oe=Ot}var yt=(r&4)!==0,Sn=!yt&&(t==="scroll"||t==="scrollend"),K=yt?te!==null?te+"Capture":null:te;yt=[];for(var F=ee,Z;F!==null;){var ye=F;if(Z=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||Z===null||K===null||(ye=Tr(F,K),ye!=null&&yt.push(Tc(F,ye,Z))),Sn)break;F=F.return}0<yt.length&&(te=new oe(te,et,null,o,me),xe.push({event:te,listeners:yt}))}}if((r&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",te&&o!==Hl&&(et=o.relatedTarget||o.fromElement)&&(hn(et)||et[Ye]))break e;if((oe||te)&&(te=me.window===me?me:(te=me.ownerDocument)?te.defaultView||te.parentWindow:window,oe?(et=o.relatedTarget||o.toElement,oe=ee,et=et?hn(et):null,et!==null&&(Sn=u(et),yt=et.tag,et!==Sn||yt!==5&&yt!==27&&yt!==6)&&(et=null)):(oe=null,et=ee),oe!==et)){if(yt=Gl,ye="onMouseLeave",K="onMouseEnter",F="mouse",(t==="pointerout"||t==="pointerover")&&(yt=ha,ye="onPointerLeave",K="onPointerEnter",F="pointer"),Sn=oe==null?te:ie(oe),Z=et==null?te:ie(et),te=new yt(ye,F+"leave",oe,o,me),te.target=Sn,te.relatedTarget=Z,ye=null,hn(me)===ee&&(yt=new yt(K,F+"enter",et,o,me),yt.target=Z,yt.relatedTarget=Sn,ye=yt),Sn=ye,oe&&et)t:{for(yt=JT,K=oe,F=et,Z=0,ye=K;ye;ye=yt(ye))Z++;ye=0;for(var ft=F;ft;ft=yt(ft))ye++;for(;0<Z-ye;)K=yt(K),Z--;for(;0<ye-Z;)F=yt(F),ye--;for(;Z--;){if(K===F||F!==null&&K===F.alternate){yt=K;break t}K=yt(K),F=yt(F)}yt=null}else yt=null;oe!==null&&i0(xe,te,oe,yt,!1),et!==null&&Sn!==null&&i0(xe,Sn,et,yt,!0)}}e:{if(te=ee?ie(ee):window,oe=te.nodeName&&te.nodeName.toLowerCase(),oe==="select"||oe==="input"&&te.type==="file")var fn=Ty;else if(xy(te))if(Ey)fn=cT;else{fn=oT;var it=iT}else oe=te.nodeName,!oe||oe.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&ks(ee.elementType)&&(fn=Ty):fn=lT;if(fn&&(fn=fn(t,ee))){_y(xe,fn,o,me);break e}it&&it(t,te,ee),t==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&Ua(te,"number",te.value)}switch(it=ee?ie(ee):window,t){case"focusin":(xy(it)||it.contentEditable==="true")&&(Oo=it,rf=ee,Jl=null);break;case"focusout":Jl=rf=Oo=null;break;case"mousedown":af=!0;break;case"contextmenu":case"mouseup":case"dragend":af=!1,Iy(xe,o,me);break;case"selectionchange":if(hT)break;case"keydown":case"keyup":Iy(xe,o,me)}var Ut;if(yn)e:{switch(t){case"compositionstart":var Jt="onCompositionStart";break e;case"compositionend":Jt="onCompositionEnd";break e;case"compositionupdate":Jt="onCompositionUpdate";break e}Jt=void 0}else Lo?Gi(t,o)&&(Jt="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Jt="onCompositionStart");Jt&&($r&&o.locale!=="ko"&&(Lo||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&Lo&&(Ut=$l()):(zr=me,ql="value"in zr?zr.value:zr.textContent,Lo=!0)),it=Th(ee,Jt),0<it.length&&(Jt=new qr(Jt,t,null,o,me),xe.push({event:Jt,listeners:it}),Ut?Jt.data=Ut:(Ut=Po(o),Ut!==null&&(Jt.data=Ut)))),(Ut=ir?nT(t,o):sT(t,o))&&(Jt=Th(ee,"onBeforeInput"),0<Jt.length&&(it=new qr("onBeforeInput","beforeinput",null,o,me),xe.push({event:it,listeners:Jt}),it.data=Ut)),KT(xe,t,ee,o,me)}r0(xe,r)})}function Tc(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Th(t,r){for(var o=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Tr(t,o),f!=null&&c.unshift(Tc(t,f,m)),f=Tr(t,r),f!=null&&c.push(Tc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function JT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function i0(t,r,o,c,f){for(var m=r._reactName,b=[];o!==null&&o!==c;){var j=o,O=j.alternate,ee=j.stateNode;if(j=j.tag,O!==null&&O===c)break;j!==5&&j!==26&&j!==27||ee===null||(O=ee,f?(ee=Tr(o,m),ee!=null&&b.unshift(Tc(o,ee,O))):f||(ee=Tr(o,m),ee!=null&&b.push(Tc(o,ee,O)))),o=o.return}b.length!==0&&t.push({event:r,listeners:b})}var ZT=/\r\n?/g,eE=/\u0000|\uFFFD/g;function o0(t){return(typeof t=="string"?t:""+t).replace(ZT,`
`).replace(eE,"")}function l0(t,r){return r=o0(r),o0(t)===r}function kn(t,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||zn(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&zn(t,""+c);break;case"className":se(t,"class",c);break;case"tabIndex":se(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":se(t,o,c);break;case"style":ms(t,c,m);break;case"data":if(r!=="object"){se(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){t.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=za(""+c),t.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&kn(t,r,"name",f.name,f,null),kn(t,r,"formEncType",f.formEncType,f,null),kn(t,r,"formMethod",f.formMethod,f,null),kn(t,r,"formTarget",f.formTarget,f,null)):(kn(t,r,"encType",f.encType,f,null),kn(t,r,"method",f.method,f,null),kn(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=za(""+c),t.setAttribute(o,c);break;case"onClick":c!=null&&(t.onclick=Is);break;case"onScroll":c!=null&&Yt("scroll",t);break;case"onScrollEnd":c!=null&&Yt("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=o}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}o=za(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""+c):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":c===!0?t.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,c):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(o,c):t.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(o):t.setAttribute(o,c);break;case"popover":Yt("beforetoggle",t),Yt("toggle",t),le(t,"popover",c);break;case"xlinkActuate":Ee(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ee(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ee(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ee(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ee(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ee(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ee(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ee(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ee(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":le(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Br.get(o)||o,le(t,o,c))}}function Am(t,r,o,c,f,m){switch(o){case"style":ms(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=o}}break;case"children":typeof c=="string"?zn(t,c):(typeof c=="number"||typeof c=="bigint")&&zn(t,""+c);break;case"onScroll":c!=null&&Yt("scroll",t);break;case"onScrollEnd":c!=null&&Yt("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Is);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!J.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=t[ut]||null,m=m!=null?m[o]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(r,c,f);break e}o in t?t[o]=c:c===!0?t.setAttribute(o,""):le(t,o,c)}}}function bs(t,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",t),Yt("load",t);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:kn(t,r,m,b,o,null)}}f&&kn(t,r,"srcSet",o.srcSet,o,null),c&&kn(t,r,"src",o.src,o,null);return;case"input":Yt("invalid",t);var j=m=b=f=null,O=null,ee=null;for(c in o)if(o.hasOwnProperty(c)){var me=o[c];if(me!=null)switch(c){case"name":f=me;break;case"type":b=me;break;case"checked":O=me;break;case"defaultChecked":ee=me;break;case"value":m=me;break;case"defaultValue":j=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,r));break;default:kn(t,r,c,me,o,null)}}Ui(t,m,j,O,ee,b,f,!1);return;case"select":Yt("invalid",t),c=b=m=null;for(f in o)if(o.hasOwnProperty(f)&&(j=o[f],j!=null))switch(f){case"value":m=j;break;case"defaultValue":b=j;break;case"multiple":c=j;default:kn(t,r,f,j,o,null)}r=m,o=b,t.multiple=!!c,r!=null?br(t,!!c,r,!1):o!=null&&br(t,!!c,o,!0);return;case"textarea":Yt("invalid",t),m=f=c=null;for(b in o)if(o.hasOwnProperty(b)&&(j=o[b],j!=null))switch(b){case"value":c=j;break;case"defaultValue":f=j;break;case"children":m=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(91));break;default:kn(t,r,b,j,o,null)}Un(t,c,f,m);return;case"option":for(O in o)o.hasOwnProperty(O)&&(c=o[O],c!=null)&&(O==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":kn(t,r,O,c,o,null));return;case"dialog":Yt("beforetoggle",t),Yt("toggle",t),Yt("cancel",t),Yt("close",t);break;case"iframe":case"object":Yt("load",t);break;case"video":case"audio":for(c=0;c<_c.length;c++)Yt(_c[c],t);break;case"image":Yt("error",t),Yt("load",t);break;case"details":Yt("toggle",t);break;case"embed":case"source":case"link":Yt("error",t),Yt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(c=o[ee],c!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:kn(t,r,ee,c,o,null)}return;default:if(ks(r)){for(me in o)o.hasOwnProperty(me)&&(c=o[me],c!==void 0&&Am(t,r,me,c,o,void 0));return}}for(j in o)o.hasOwnProperty(j)&&(c=o[j],c!=null&&kn(t,r,j,c,o,null))}function tE(t,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,j=null,O=null,ee=null,me=null;for(oe in o){var xe=o[oe];if(o.hasOwnProperty(oe)&&xe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":O=xe;default:c.hasOwnProperty(oe)||kn(t,r,oe,null,c,xe)}}for(var te in c){var oe=c[te];if(xe=o[te],c.hasOwnProperty(te)&&(oe!=null||xe!=null))switch(te){case"type":m=oe;break;case"name":f=oe;break;case"checked":ee=oe;break;case"defaultChecked":me=oe;break;case"value":b=oe;break;case"defaultValue":j=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,r));break;default:oe!==xe&&kn(t,r,te,oe,c,xe)}}Ba(t,b,j,O,ee,me,m,f);return;case"select":oe=b=j=te=null;for(m in o)if(O=o[m],o.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":oe=O;default:c.hasOwnProperty(m)||kn(t,r,m,null,c,O)}for(f in c)if(m=c[f],O=o[f],c.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":te=m;break;case"defaultValue":j=m;break;case"multiple":b=m;default:m!==O&&kn(t,r,f,m,c,O)}r=j,o=b,c=oe,te!=null?br(t,!!o,te,!1):!!c!=!!o&&(r!=null?br(t,!!o,r,!0):br(t,!!o,o?[]:"",!1));return;case"textarea":oe=te=null;for(j in o)if(f=o[j],o.hasOwnProperty(j)&&f!=null&&!c.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:kn(t,r,j,null,c,f)}for(b in c)if(f=c[b],m=o[b],c.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":te=f;break;case"defaultValue":oe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&kn(t,r,b,f,c,m)}cn(t,te,oe);return;case"option":for(var et in o)te=o[et],o.hasOwnProperty(et)&&te!=null&&!c.hasOwnProperty(et)&&(et==="selected"?t.selected=!1:kn(t,r,et,null,c,te));for(O in c)te=c[O],oe=o[O],c.hasOwnProperty(O)&&te!==oe&&(te!=null||oe!=null)&&(O==="selected"?t.selected=te&&typeof te!="function"&&typeof te!="symbol":kn(t,r,O,te,c,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in o)te=o[yt],o.hasOwnProperty(yt)&&te!=null&&!c.hasOwnProperty(yt)&&kn(t,r,yt,null,c,te);for(ee in c)if(te=c[ee],oe=o[ee],c.hasOwnProperty(ee)&&te!==oe&&(te!=null||oe!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,r));break;default:kn(t,r,ee,te,c,oe)}return;default:if(ks(r)){for(var Sn in o)te=o[Sn],o.hasOwnProperty(Sn)&&te!==void 0&&!c.hasOwnProperty(Sn)&&Am(t,r,Sn,void 0,c,te);for(me in c)te=c[me],oe=o[me],!c.hasOwnProperty(me)||te===oe||te===void 0&&oe===void 0||Am(t,r,me,te,c,oe);return}}for(var K in o)te=o[K],o.hasOwnProperty(K)&&te!=null&&!c.hasOwnProperty(K)&&kn(t,r,K,null,c,te);for(xe in c)te=c[xe],oe=o[xe],!c.hasOwnProperty(xe)||te===oe||te==null&&oe==null||kn(t,r,xe,te,c,oe)}function c0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,b=f.initiatorType,j=f.duration;if(m&&j&&c0(b)){for(b=0,j=f.responseEnd,c+=1;c<o.length;c++){var O=o[c],ee=O.startTime;if(ee>j)break;var me=O.transferSize,xe=O.initiatorType;me&&c0(xe)&&(O=O.responseEnd,b+=me*(O<j?1:(j-ee)/(O-ee)))}if(--c,r+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Im=null,Dm=null;function Eh(t){return t.nodeType===9?t:t.ownerDocument}function u0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Mm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pm=null;function sE(){var t=window.event;return t&&t.type==="popstate"?t===Pm?!1:(Pm=t,!0):(Pm=null,!1)}var d0=typeof setTimeout=="function"?setTimeout:void 0,rE=typeof clearTimeout=="function"?clearTimeout:void 0,f0=typeof Promise=="function"?Promise:void 0,aE=typeof queueMicrotask=="function"?queueMicrotask:typeof f0<"u"?function(t){return f0.resolve(null).then(t).catch(iE)}:d0;function iE(t){setTimeout(function(){throw t})}function ci(t){return t==="head"}function m0(t,r){var o=r,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){t.removeChild(f),ul(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Ec(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Ec(o);for(var m=o.firstChild;m;){var b=m.nextSibling,j=m.nodeName;m[Bn]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=b}}else o==="body"&&Ec(t.ownerDocument.body);o=f}while(o);ul(r)}function p0(t,r){var o=t;t=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=c}while(o)}function Lm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Lm(o),Hn(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function oE(t,r,o,c){for(;t.nodeType===1;){var f=o;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Bn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=fr(t.nextSibling),t===null)break}return null}function lE(t,r,o){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=fr(t.nextSibling),t===null))return null;return t}function g0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=fr(t.nextSibling),t===null))return null;return t}function Om(t){return t.data==="$?"||t.data==="$~"}function Vm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function cE(t,r){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function fr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Bm=null;function y0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(r===0)return fr(t.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}t=t.nextSibling}return null}function v0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return t;r--}else o!=="/$"&&o!=="/&"||r++}t=t.previousSibling}return null}function b0(t,r,o){switch(r=Eh(o),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Ec(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Hn(t)}var mr=new Map,w0=new Set;function kh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Sa=Te.d;Te.d={f:uE,r:hE,D:dE,C:fE,L:mE,m:pE,X:yE,S:gE,M:vE};function uE(){var t=Sa.f(),r=gh();return t||r}function hE(t){var r=U(t);r!==null&&r.tag===5&&r.type==="form"?Ov(r):Sa.r(t)}var ol=typeof document>"u"?null:document;function x0(t,r,o){var c=ol;if(c&&typeof r=="string"&&r){var f=Rn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),w0.has(f)||(w0.add(f),t={rel:t,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),bs(r,"link",t),C(r),c.head.appendChild(r)))}}function dE(t){Sa.D(t),x0("dns-prefetch",t,null)}function fE(t,r){Sa.C(t,r),x0("preconnect",t,r)}function mE(t,r,o){Sa.L(t,r,o);var c=ol;if(c&&t&&r){var f='link[rel="preload"][as="'+Rn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Rn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Rn(o.imageSizes)+'"]')):f+='[href="'+Rn(t)+'"]';var m=f;switch(r){case"style":m=ll(t);break;case"script":m=cl(t)}mr.has(m)||(t=T({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:t,as:r},o),mr.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(kc(m))||r==="script"&&c.querySelector(Sc(m))||(r=c.createElement("link"),bs(r,"link",t),C(r),c.head.appendChild(r)))}}function pE(t,r){Sa.m(t,r);var o=ol;if(o&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Rn(c)+'"][href="'+Rn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=cl(t)}if(!mr.has(m)&&(t=T({rel:"modulepreload",href:t},r),mr.set(m,t),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Sc(m)))return}c=o.createElement("link"),bs(c,"link",t),C(c),o.head.appendChild(c)}}}function gE(t,r,o){Sa.S(t,r,o);var c=ol;if(c&&t){var f=E(c).hoistableStyles,m=ll(t);r=r||"default";var b=f.get(m);if(!b){var j={loading:0,preload:null};if(b=c.querySelector(kc(m)))j.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},o),(o=mr.get(m))&&Um(t,o);var O=b=c.createElement("link");C(O),bs(O,"link",t),O._p=new Promise(function(ee,me){O.onload=ee,O.onerror=me}),O.addEventListener("load",function(){j.loading|=1}),O.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Sh(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:j},f.set(m,b)}}}function yE(t,r){Sa.X(t,r);var o=ol;if(o&&t){var c=E(o).hoistableScripts,f=cl(t),m=c.get(f);m||(m=o.querySelector(Sc(f)),m||(t=T({src:t,async:!0},r),(r=mr.get(f))&&zm(t,r),m=o.createElement("script"),C(m),bs(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function vE(t,r){Sa.M(t,r);var o=ol;if(o&&t){var c=E(o).hoistableScripts,f=cl(t),m=c.get(f);m||(m=o.querySelector(Sc(f)),m||(t=T({src:t,async:!0,type:"module"},r),(r=mr.get(f))&&zm(t,r),m=o.createElement("script"),C(m),bs(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function _0(t,r,o,c){var f=(f=Me.current)?kh(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=ll(o.href),o=E(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=ll(o.href);var m=E(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(kc(t)))&&!m._p&&(b.instance=m,b.state.loading=5),mr.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},mr.set(t,o),m||bE(f,t,o,b.state))),r&&c===null)throw Error(a(528,""));return b}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=cl(o),o=E(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ll(t){return'href="'+Rn(t)+'"'}function kc(t){return'link[rel="stylesheet"]['+t+"]"}function T0(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function bE(t,r,o,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),bs(r,"link",o),C(r),t.head.appendChild(r))}function cl(t){return'[src="'+Rn(t)+'"]'}function Sc(t){return"script[async]"+t}function E0(t,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+Rn(o.href)+'"]');if(c)return r.instance=c,C(c),c;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),C(c),bs(c,"style",f),Sh(c,o.precedence,t),r.instance=c;case"stylesheet":f=ll(o.href);var m=t.querySelector(kc(f));if(m)return r.state.loading|=4,r.instance=m,C(m),m;c=T0(o),(f=mr.get(f))&&Um(c,f),m=(t.ownerDocument||t).createElement("link"),C(m);var b=m;return b._p=new Promise(function(j,O){b.onload=j,b.onerror=O}),bs(m,"link",c),r.state.loading|=4,Sh(m,o.precedence,t),r.instance=m;case"script":return m=cl(o.src),(f=t.querySelector(Sc(m)))?(r.instance=f,C(f),f):(c=o,(f=mr.get(m))&&(c=T({},o),zm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),C(f),bs(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Sh(c,o.precedence,t));return r.instance}function Sh(t,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,b=0;b<c.length;b++){var j=c[b];if(j.dataset.precedence===r)m=j;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(t,r.firstChild))}function Um(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function zm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var jh=null;function k0(t,r,o){if(jh===null){var c=new Map,f=jh=new Map;f.set(o,c)}else f=jh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(t))return c;for(c.set(t,null),o=o.getElementsByTagName(t),f=0;f<o.length;f++){var m=o[f];if(!(m[Bn]||m[Be]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=t+b;var j=c.get(b);j?j.push(m):c.set(b,[m])}}return c}function S0(t,r,o){t=t.ownerDocument||t,t.head.insertBefore(o,r==="title"?t.querySelector("head > title"):null)}function wE(t,r,o){if(o===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function j0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function xE(t,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=ll(c.href),m=r.querySelector(kc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Nh.bind(t),r.then(t,t)),o.state.loading|=4,o.instance=m,C(m);return}m=r.ownerDocument||r,c=T0(c),(f=mr.get(f))&&Um(c,f),m=m.createElement("link"),C(m);var b=m;b._p=new Promise(function(j,O){b.onload=j,b.onerror=O}),bs(m,"link",c),o.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Nh.bind(t),r.addEventListener("load",o),r.addEventListener("error",o))}}var Fm=0;function _E(t,r){return t.stylesheets&&t.count===0&&Rh(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var c=setTimeout(function(){if(t.stylesheets&&Rh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Fm===0&&(Fm=62500*nE());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Rh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Fm?50:800)+r);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Nh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ch=null;function Rh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ch=new Map,r.forEach(TE,t),Ch=null,Nh.call(t))}function TE(t,r){if(!(r.state.loading&4)){var o=Ch.get(t);if(o)var c=o.get(null);else{o=new Map,Ch.set(t,o);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}f=r.instance,b=f.getAttribute("data-precedence"),m=o.get(b)||c,m===c&&o.set(null,f),o.set(b,f),this.count++,c=Nh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var jc={$$typeof:he,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function EE(t,r,o,c,f,m,b,j,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nn(0),this.hiddenUpdates=nn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function N0(t,r,o,c,f,m,b,j,O,ee,me,xe){return t=new EE(t,r,o,b,O,ee,me,xe,j),r=1,m===!0&&(r|=24),m=Ys(3,null,null,r),t.current=m,m.stateNode=t,r=xf(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},kf(m),t}function C0(t){return t?(t=Uo,t):Uo}function R0(t,r,o,c,f,m){f=C0(f),c.context===null?c.context=f:c.pendingContext=f,c=Ja(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=Za(t,c,r),o!==null&&(zs(o,t,r),ac(o,t,r))}function A0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Hm(t,r){A0(t,r),(t=t.alternate)&&A0(t,r)}function I0(t){if(t.tag===13||t.tag===31){var r=Qi(t,67108864);r!==null&&zs(r,t,67108864),Hm(t,67108864)}}function D0(t){if(t.tag===13||t.tag===31){var r=er();r=z(r);var o=Qi(t,r);o!==null&&zs(o,t,r),Hm(t,r)}}var Ah=!0;function kE(t,r,o,c){var f=Y.T;Y.T=null;var m=Te.p;try{Te.p=2,qm(t,r,o,c)}finally{Te.p=m,Y.T=f}}function SE(t,r,o,c){var f=Y.T;Y.T=null;var m=Te.p;try{Te.p=8,qm(t,r,o,c)}finally{Te.p=m,Y.T=f}}function qm(t,r,o,c){if(Ah){var f=$m(c);if(f===null)Rm(t,r,c,Ih,o),P0(t,c);else if(NE(f,t,r,o,c))c.stopPropagation();else if(P0(t,c),r&4&&-1<jE.indexOf(t)){for(;f!==null;){var m=U(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=_t(m.pendingLanes);if(b!==0){var j=m;for(j.pendingLanes|=2,j.entangledLanes|=2;b;){var O=1<<31-Ie(b);j.entanglements[1]|=O,b&=~O}Yr(m),(vn&6)===0&&(mh=Bt()+500,xc(0))}}break;case 31:case 13:j=Qi(m,2),j!==null&&zs(j,m,2),gh(),Hm(m,2)}if(m=$m(c),m===null&&Rm(t,r,c,Ih,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Rm(t,r,c,null,o)}}function $m(t){return t=rr(t),Wm(t)}var Ih=null;function Wm(t){if(Ih=null,t=hn(t),t!==null){var r=u(t);if(r===null)t=null;else{var o=r.tag;if(o===13){if(t=d(r),t!==null)return t;t=null}else if(o===31){if(t=p(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Ih=t,null}function M0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case Ht:return 2;case wn:return 8;case de:case ve:return 32;case je:return 268435456;default:return 32}default:return 32}}var Gm=!1,ui=null,hi=null,di=null,Nc=new Map,Cc=new Map,fi=[],jE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P0(t,r){switch(t){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Nc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cc.delete(r.pointerId)}}function Rc(t,r,o,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=U(r),r!==null&&I0(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function NE(t,r,o,c,f){switch(r){case"focusin":return ui=Rc(ui,t,r,o,c,f),!0;case"dragenter":return hi=Rc(hi,t,r,o,c,f),!0;case"mouseover":return di=Rc(di,t,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Nc.set(m,Rc(Nc.get(m)||null,t,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Cc.set(m,Rc(Cc.get(m)||null,t,r,o,c,f)),!0}return!1}function L0(t){var r=hn(t.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=d(o),r!==null){t.blockedOn=r,pe(t.priority,function(){D0(o)});return}}else if(r===31){if(r=p(o),r!==null){t.blockedOn=r,pe(t.priority,function(){D0(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=$m(t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);Hl=c,o.target.dispatchEvent(c),Hl=null}else return r=U(o),r!==null&&I0(r),t.blockedOn=o,!1;r.shift()}return!0}function O0(t,r,o){Dh(t)&&o.delete(r)}function CE(){Gm=!1,ui!==null&&Dh(ui)&&(ui=null),hi!==null&&Dh(hi)&&(hi=null),di!==null&&Dh(di)&&(di=null),Nc.forEach(O0),Cc.forEach(O0)}function Mh(t,r){t.blockedOn===r&&(t.blockedOn=null,Gm||(Gm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,CE)))}var Ph=null;function V0(t){Ph!==t&&(Ph=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ph===t&&(Ph=null);for(var r=0;r<t.length;r+=3){var o=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(Wm(c||o)===null)continue;break}var m=U(o);m!==null&&(t.splice(r,3),r-=3,$f(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function ul(t){function r(O){return Mh(O,t)}ui!==null&&Mh(ui,t),hi!==null&&Mh(hi,t),di!==null&&Mh(di,t),Nc.forEach(r),Cc.forEach(r);for(var o=0;o<fi.length;o++){var c=fi[o];c.blockedOn===t&&(c.blockedOn=null)}for(;0<fi.length&&(o=fi[0],o.blockedOn===null);)L0(o),o.blockedOn===null&&fi.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],b=f[ut]||null;if(typeof m=="function")b||V0(o);else if(b){var j=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[ut]||null)j=b.formAction;else if(Wm(f)!==null)continue}else j=b.action;typeof j=="function"?o[c+1]=j:(o.splice(c,3),c-=3),V0(o)}}}function B0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Km(t){this._internalRoot=t}Lh.prototype.render=Km.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var o=r.current,c=er();R0(o,c,t,r,null,null)},Lh.prototype.unmount=Km.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;R0(t.current,2,null,t,null,null),gh(),r[Ye]=null}};function Lh(t){this._internalRoot=t}Lh.prototype.unstable_scheduleHydration=function(t){if(t){var r=fe();t={blockedOn:null,target:t,priority:r};for(var o=0;o<fi.length&&r!==0&&r<fi[o].priority;o++);fi.splice(o,0,t),o===0&&L0(t)}};var U0=e.version;if(U0!=="19.2.4")throw Error(a(527,U0,"19.2.4"));Te.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(r),t=t!==null?w(t):null,t=t===null?null:t.stateNode,t};var RE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{Pe=Oh.inject(RE),Ge=Oh}catch{}}return Ic.createRoot=function(t,r){if(!l(t))throw Error(a(299));var o=!1,c="",f=Gv,m=Kv,b=Yv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=N0(t,1,!1,null,null,o,c,null,f,m,b,B0),t[Ye]=r.current,Cm(t),new Km(r)},Ic.hydrateRoot=function(t,r,o){if(!l(t))throw Error(a(299));var c=!1,f="",m=Gv,b=Kv,j=Yv,O=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),r=N0(t,1,!0,r,o??null,c,f,O,m,b,j,B0),r.context=C0(null),o=r.current,c=er(),c=z(c),f=Ja(c),f.callback=null,Za(o,f,c),o=c,r.current.lanes=o,$t(r,o),Yr(r),t[Ye]=r.current,Cm(t),new Lh(r)},Ic.version="19.2.4",Ic}var Q0;function UE(){if(Q0)return Xm.exports;Q0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Xm.exports=BE(),Xm.exports}var zE=UE();const FE="modulepreload",HE=function(s){return"/login/"+s},X0={},vr=function(e,n,a){let l=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");l=g(n.map(y=>{if(y=HE(y),y in X0)return;X0[y]=!0;const w=y.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${T}`))return;const k=document.createElement("link");if(k.rel=w?"stylesheet":FE,w||(k.as="script"),k.crossOrigin="",k.href=y,p&&k.setAttribute("nonce",p),document.head.appendChild(k),w)return new Promise((P,W)=>{k.addEventListener("load",P),k.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var J0="popstate";function qE(s={}){function e(a,l){let{pathname:u,search:d,hash:p}=a.location;return Cp("",{pathname:u,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){return typeof l=="string"?l:Jc(l)}return WE(e,n,null,s)}function On(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function yr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $E(){return Math.random().toString(36).substring(2,10)}function Z0(s,e){return{usr:s.state,key:s.key,idx:e}}function Cp(s,e,n=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ml(e):e,state:n,key:e&&e.key||a||$E()}}function Jc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Ml(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function WE(s,e,n,a={}){let{window:l=document.defaultView,v5Compat:u=!1}=a,d=l.history,p="POP",g=null,y=w();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function w(){return(d.state||{idx:null}).idx}function T(){p="POP";let L=w(),re=L==null?null:L-y;y=L,g&&g({action:p,location:B.location,delta:re})}function k(L,re){p="PUSH";let X=Cp(B.location,L,re);y=w()+1;let he=Z0(X,y),ke=B.createHref(X);try{d.pushState(he,"",ke)}catch(ze){if(ze instanceof DOMException&&ze.name==="DataCloneError")throw ze;l.location.assign(ke)}u&&g&&g({action:p,location:B.location,delta:1})}function P(L,re){p="REPLACE";let X=Cp(B.location,L,re);y=w();let he=Z0(X,y),ke=B.createHref(X);d.replaceState(he,"",ke),u&&g&&g({action:p,location:B.location,delta:0})}function W(L){return GE(L)}let B={get action(){return p},get location(){return s(l,d)},listen(L){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(J0,T),g=L,()=>{l.removeEventListener(J0,T),g=null}},createHref(L){return e(l,L)},createURL:W,encodeLocation(L){let re=W(L);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:k,replace:P,go(L){return d.go(L)}};return B}function GE(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),On(n,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:Jc(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function G2(s,e,n="/"){return KE(s,e,n,!1)}function KE(s,e,n,a){let l=typeof e=="string"?Ml(e):e,u=Ia(l.pathname||"/",n);if(u==null)return null;let d=K2(s);YE(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=ik(u);p=rk(d[g],y,a)}return p}function K2(s,e=[],n=[],a="",l=!1){let u=(d,p,g=l,y)=>{let w={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(a)&&g)return;On(w.relativePath.startsWith(a),`Absolute route path "${w.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(a.length)}let T=Ca([a,w.relativePath]),k=n.concat(w);d.children&&d.children.length>0&&(On(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),K2(d.children,e,k,T,g)),!(d.path==null&&!d.index)&&e.push({path:T,score:nk(T,d.index),routesMeta:k})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of Y2(d.path))u(d,p,!0,g)}),e}function Y2(s){let e=s.split("/");if(e.length===0)return[];let[n,...a]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return l?[u,""]:[u];let d=Y2(a.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function YE(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:sk(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var QE=/^:[\w-]+$/,XE=3,JE=2,ZE=1,ek=10,tk=-2,e1=s=>s==="*";function nk(s,e){let n=s.split("/"),a=n.length;return n.some(e1)&&(a+=tk),e&&(a+=JE),n.filter(l=>!e1(l)).reduce((l,u)=>l+(QE.test(u)?XE:u===""?ZE:ek),a)}function sk(s,e){return s.length===e.length&&s.slice(0,-1).every((a,l)=>a===e[l])?s[s.length-1]-e[e.length-1]:0}function rk(s,e,n=!1){let{routesMeta:a}=s,l={},u="/",d=[];for(let p=0;p<a.length;++p){let g=a[p],y=p===a.length-1,w=u==="/"?e:e.slice(u.length)||"/",T=cd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),k=g.route;if(!T&&y&&n&&!a[a.length-1].route.index&&(T=cd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!T)return null;Object.assign(l,T.params),d.push({params:l,pathname:Ca([u,T.pathname]),pathnameBase:uk(Ca([u,T.pathnameBase])),route:k}),T.pathnameBase!=="/"&&(u=Ca([u,T.pathnameBase]))}return d}function cd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,a]=ak(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:a.reduce((y,{paramName:w,isOptional:T},k)=>{if(w==="*"){let W=p[k]||"";d=u.slice(0,u.length-W.length).replace(/(.)\/+$/,"$1")}const P=p[k];return T&&!P?y[w]=void 0:y[w]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function ak(s,e=!1,n=!0){yr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(a.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),a]}function ik(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ia(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=s.charAt(n);return a&&a!=="/"?null:s.slice(n)||"/"}var ok=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function lk(s,e="/"){let{pathname:n,search:a="",hash:l=""}=typeof s=="string"?Ml(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=t1(n.substring(1),"/"):u=t1(n,e)):u=e,{pathname:u,search:hk(a),hash:dk(l)}}function t1(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function tp(s,e,n,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ck(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function og(s){let e=ck(s);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function lg(s,e,n,a=!1){let l;typeof s=="string"?l=Ml(s):(l={...s},On(!l.pathname||!l.pathname.includes("?"),tp("?","pathname","search",l)),On(!l.pathname||!l.pathname.includes("#"),tp("#","pathname","hash",l)),On(!l.search||!l.search.includes("#"),tp("#","search","hash",l)));let u=s===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=n;else{let T=e.length-1;if(!a&&d.startsWith("..")){let k=d.split("/");for(;k[0]==="..";)k.shift(),T-=1;l.pathname=k.join("/")}p=T>=0?e[T]:"/"}let g=lk(l,p),y=d&&d!=="/"&&d.endsWith("/"),w=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var Ca=s=>s.join("/").replace(/\/\/+/g,"/"),uk=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),hk=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,dk=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,fk=class{constructor(s,e,n,a=!1){this.status=s,this.statusText=e||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function mk(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function pk(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Q2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function X2(s,e){let n=s;if(typeof n!="string"||!ok.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let a=n,l=!1;if(Q2)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=Ia(d.pathname,e);d.origin===u.origin&&p!=null?n=p+d.search+d.hash:l=!0}catch{yr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var J2=["POST","PUT","PATCH","DELETE"];new Set(J2);var gk=["GET",...J2];new Set(gk);var Pl=_.createContext(null);Pl.displayName="DataRouter";var Rd=_.createContext(null);Rd.displayName="DataRouterState";var yk=_.createContext(!1),Z2=_.createContext({isTransitioning:!1});Z2.displayName="ViewTransition";var vk=_.createContext(new Map);vk.displayName="Fetchers";var bk=_.createContext(null);bk.displayName="Await";var sr=_.createContext(null);sr.displayName="Navigation";var cu=_.createContext(null);cu.displayName="Location";var ia=_.createContext({outlet:null,matches:[],isDataRoute:!1});ia.displayName="Route";var cg=_.createContext(null);cg.displayName="RouteError";var ew="REACT_ROUTER_ERROR",wk="REDIRECT",xk="ROUTE_ERROR_RESPONSE";function _k(s){if(s.startsWith(`${ew}:${wk}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Tk(s){if(s.startsWith(`${ew}:${xk}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new fk(e.status,e.statusText,e.data)}catch{}}function Ek(s,{relative:e}={}){On(Ll(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=_.useContext(sr),{hash:l,pathname:u,search:d}=uu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Ca([n,u])),a.createHref({pathname:p,search:d,hash:l})}function Ll(){return _.useContext(cu)!=null}function Vr(){return On(Ll(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(cu).location}var tw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nw(s){_.useContext(sr).static||_.useLayoutEffect(s)}function Gs(){let{isDataRoute:s}=_.useContext(ia);return s?Ok():kk()}function kk(){On(Ll(),"useNavigate() may be used only in the context of a <Router> component.");let s=_.useContext(Pl),{basename:e,navigator:n}=_.useContext(sr),{matches:a}=_.useContext(ia),{pathname:l}=Vr(),u=JSON.stringify(og(a)),d=_.useRef(!1);return nw(()=>{d.current=!0}),_.useCallback((g,y={})=>{if(yr(d.current,tw),!d.current)return;if(typeof g=="number"){n.go(g);return}let w=lg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Ca([e,w.pathname])),(y.replace?n.replace:n.push)(w,y.state,y)},[e,n,u,l,s])}_.createContext(null);function uu(s,{relative:e}={}){let{matches:n}=_.useContext(ia),{pathname:a}=Vr(),l=JSON.stringify(og(n));return _.useMemo(()=>lg(s,JSON.parse(l),a,e==="path"),[s,l,a,e])}function Sk(s,e){return sw(s,e)}function sw(s,e,n,a,l){On(Ll(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=_.useContext(sr),{matches:d}=_.useContext(ia),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",w=p?p.pathnameBase:"/",T=p&&p.route;{let X=T&&T.path||"";aw(y,!T||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let k=Vr(),P;if(e){let X=typeof e=="string"?Ml(e):e;On(w==="/"||X.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${X.pathname}" was given in the \`location\` prop.`),P=X}else P=k;let W=P.pathname||"/",B=W;if(w!=="/"){let X=w.replace(/^\//,"").split("/");B="/"+W.replace(/^\//,"").split("/").slice(X.length).join("/")}let L=G2(s,{pathname:B});yr(T||L!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),yr(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let re=Ak(L&&L.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:Ca([w,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?w:Ca([w,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),d,n,a,l);return e&&re?_.createElement(cu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},re):re}function jk(){let s=Lk(),e=mk(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:l},n):null,d)}var Nk=_.createElement(jk,null),rw=class extends _.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=Tk(s.digest);n&&(s=n)}let e=s!==void 0?_.createElement(ia.Provider,{value:this.props.routeContext},_.createElement(cg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?_.createElement(Ck,{error:s},e):e}};rw.contextType=yk;var np=new WeakMap;function Ck({children:s,error:e}){let{basename:n}=_.useContext(sr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=_k(e.digest);if(a){let l=np.get(e);if(l)throw l;let u=X2(a.location,n);if(Q2&&!np.get(e))if(u.isExternal||a.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:a.replace}));throw np.set(e,d),d}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function Rk({routeContext:s,match:e,children:n}){let a=_.useContext(Pl);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(ia.Provider,{value:s},n)}function Ak(s,e=[],n=null,a=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,d=n?.errors;if(d!=null){let w=u.findIndex(T=>T.route.id&&d?.[T.route.id]!==void 0);On(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,w+1))}let p=!1,g=-1;if(n)for(let w=0;w<u.length;w++){let T=u[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=w),T.route.id){let{loaderData:k,errors:P}=n,W=T.route.loader&&!k.hasOwnProperty(T.route.id)&&(!P||P[T.route.id]===void 0);if(T.route.lazy||W){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&a?(w,T)=>{a(w,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:pk(n.matches),errorInfo:T})}:void 0;return u.reduceRight((w,T,k)=>{let P,W=!1,B=null,L=null;n&&(P=d&&T.route.id?d[T.route.id]:void 0,B=T.route.errorElement||Nk,p&&(g<0&&k===0?(aw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,L=null):g===k&&(W=!0,L=T.route.hydrateFallbackElement||null)));let re=e.concat(u.slice(0,k+1)),X=()=>{let he;return P?he=B:W?he=L:T.route.Component?he=_.createElement(T.route.Component,null):T.route.element?he=T.route.element:he=w,_.createElement(Rk,{match:T,routeContext:{outlet:w,matches:re,isDataRoute:n!=null},children:he})};return n&&(T.route.ErrorBoundary||T.route.errorElement||k===0)?_.createElement(rw,{location:n.location,revalidation:n.revalidation,component:B,error:P,children:X(),routeContext:{outlet:null,matches:re,isDataRoute:!0},onError:y}):X()},null)}function ug(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ik(s){let e=_.useContext(Pl);return On(e,ug(s)),e}function Dk(s){let e=_.useContext(Rd);return On(e,ug(s)),e}function Mk(s){let e=_.useContext(ia);return On(e,ug(s)),e}function hg(s){let e=Mk(s),n=e.matches[e.matches.length-1];return On(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Pk(){return hg("useRouteId")}function Lk(){let s=_.useContext(cg),e=Dk("useRouteError"),n=hg("useRouteError");return s!==void 0?s:e.errors?.[n]}function Ok(){let{router:s}=Ik("useNavigate"),e=hg("useNavigate"),n=_.useRef(!1);return nw(()=>{n.current=!0}),_.useCallback(async(l,u={})=>{yr(n.current,tw),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var n1={};function aw(s,e,n){!e&&!n1[s]&&(n1[s]=!0,yr(!1,n))}_.memo(Vk);function Vk({routes:s,future:e,state:n,onError:a}){return sw(s,void 0,n,a,e)}function Bk({to:s,replace:e,state:n,relative:a}){On(Ll(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=_.useContext(sr);yr(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext(ia),{pathname:d}=Vr(),p=Gs(),g=lg(s,og(u),d,a==="path"),y=JSON.stringify(g);return _.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:a})},[p,y,a,e,n]),null}function Zn(s){On(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Uk({basename:s="/",children:e=null,location:n,navigationType:a="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){On(!Ll(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=_.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[p,l,u,d]);typeof n=="string"&&(n=Ml(n));let{pathname:y="/",search:w="",hash:T="",state:k=null,key:P="default"}=n,W=_.useMemo(()=>{let B=Ia(y,p);return B==null?null:{location:{pathname:B,search:w,hash:T,state:k,key:P},navigationType:a}},[p,y,w,T,k,P,a]);return yr(W!=null,`<Router basename="${p}"> is not able to match the URL "${y}${w}${T}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:_.createElement(sr.Provider,{value:g},_.createElement(cu.Provider,{children:e,value:W}))}function zk({children:s,location:e}){return Sk(Rp(s),e)}function Rp(s,e=[]){let n=[];return _.Children.forEach(s,(a,l)=>{if(!_.isValidElement(a))return;let u=[...e,l];if(a.type===_.Fragment){n.push.apply(n,Rp(a.props.children,u));return}On(a.type===Zn,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),On(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Rp(a.props.children,u)),n.push(d)}),n}var Xh="get",Jh="application/x-www-form-urlencoded";function Ad(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function Fk(s){return Ad(s)&&s.tagName.toLowerCase()==="button"}function Hk(s){return Ad(s)&&s.tagName.toLowerCase()==="form"}function qk(s){return Ad(s)&&s.tagName.toLowerCase()==="input"}function $k(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Wk(s,e){return s.button===0&&(!e||e==="_self")&&!$k(s)}function Ap(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let a=s[n];return e.concat(Array.isArray(a)?a.map(l=>[n,l]):[[n,a]])},[]))}function Gk(s,e){let n=Ap(s);return e&&e.forEach((a,l)=>{n.has(l)||e.getAll(l).forEach(u=>{n.append(l,u)})}),n}var Vh=null;function Kk(){if(Vh===null)try{new FormData(document.createElement("form"),0),Vh=!1}catch{Vh=!0}return Vh}var Yk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sp(s){return s!=null&&!Yk.has(s)?(yr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jh}"`),null):s}function Qk(s,e){let n,a,l,u,d;if(Hk(s)){let p=s.getAttribute("action");a=p?Ia(p,e):null,n=s.getAttribute("method")||Xh,l=sp(s.getAttribute("enctype"))||Jh,u=new FormData(s)}else if(Fk(s)||qk(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(a=g?Ia(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||Xh,l=sp(s.getAttribute("formenctype"))||sp(p.getAttribute("enctype"))||Jh,u=new FormData(p,s),!Kk()){let{name:y,type:w,value:T}=s;if(w==="image"){let k=y?`${y}.`:"";u.append(`${k}x`,"0"),u.append(`${k}y`,"0")}else y&&u.append(y,T)}}else{if(Ad(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Xh,a=null,l=Jh,d=s}return u&&l==="text/plain"&&(d=u,u=void 0),{action:a,method:n.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Xk(s,e,n,a){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${a}`:l.pathname=`${l.pathname}.${a}`:l.pathname==="/"?l.pathname=`_root.${a}`:e&&Ia(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${a}`,l}async function Jk(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zk(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function eS(s,e,n){let a=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await Jk(u,n);return d.links?d.links():[]}return[]}));return rS(a.flat(1).filter(Zk).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function s1(s,e,n,a,l,u){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let w=a.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function tS(s,e,{includeHydrateFallback:n}={}){return nS(s.map(a=>{let l=e.routes[a.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function nS(s){return[...new Set(s)]}function sS(s){let e={},n=Object.keys(s).sort();for(let a of n)e[a]=s[a];return e}function rS(s,e){let n=new Set;return new Set(e),s.reduce((a,l)=>{let u=JSON.stringify(sS(l));return n.has(u)||(n.add(u),a.push({key:u,link:l})),a},[])}function iw(){let s=_.useContext(Pl);return dg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function aS(){let s=_.useContext(Rd);return dg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var fg=_.createContext(void 0);fg.displayName="FrameworkContext";function ow(){let s=_.useContext(fg);return dg(s,"You must render this element inside a <HydratedRouter> element"),s}function iS(s,e){let n=_.useContext(fg),[a,l]=_.useState(!1),[u,d]=_.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:T}=e,k=_.useRef(null);_.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let B=re=>{re.forEach(X=>{d(X.isIntersecting)})},L=new IntersectionObserver(B,{threshold:.5});return k.current&&L.observe(k.current),()=>{L.disconnect()}}},[s]),_.useEffect(()=>{if(a){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[a]);let P=()=>{l(!0)},W=()=>{l(!1),d(!1)};return n?s!=="intent"?[u,k,{}]:[u,k,{onFocus:Dc(p,P),onBlur:Dc(g,W),onMouseEnter:Dc(y,P),onMouseLeave:Dc(w,W),onTouchStart:Dc(T,P)}]:[!1,k,{}]}function Dc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function oS({page:s,...e}){let{router:n}=iw(),a=_.useMemo(()=>G2(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?_.createElement(cS,{page:s,matches:a,...e}):null}function lS(s){let{manifest:e,routeModules:n}=ow(),[a,l]=_.useState([]);return _.useEffect(()=>{let u=!1;return eS(s,e,n).then(d=>{u||l(d)}),()=>{u=!0}},[s,e,n]),a}function cS({page:s,matches:e,...n}){let a=Vr(),{future:l,manifest:u,routeModules:d}=ow(),{basename:p}=iw(),{loaderData:g,matches:y}=aS(),w=_.useMemo(()=>s1(s,e,y,u,a,"data"),[s,e,y,u,a]),T=_.useMemo(()=>s1(s,e,y,u,a,"assets"),[s,e,y,u,a]),k=_.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let B=new Set,L=!1;if(e.forEach(X=>{let he=u.routes[X.route.id];!he||!he.hasLoader||(!w.some(ke=>ke.route.id===X.route.id)&&X.route.id in g&&d[X.route.id]?.shouldRevalidate||he.hasClientLoader?L=!0:B.add(X.route.id))}),B.size===0)return[];let re=Xk(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return L&&B.size>0&&re.searchParams.set("_routes",e.filter(X=>B.has(X.route.id)).map(X=>X.route.id).join(",")),[re.pathname+re.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,a,u,w,e,s,d]),P=_.useMemo(()=>tS(T,u),[T,u]),W=lS(T);return _.createElement(_.Fragment,null,k.map(B=>_.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),P.map(B=>_.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),W.map(({key:B,link:L})=>_.createElement("link",{key:B,nonce:n.nonce,...L,crossOrigin:L.crossOrigin??n.crossOrigin})))}function uS(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var hS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hS&&(window.__reactRouterVersion="7.13.0")}catch{}function dS({basename:s,children:e,unstable_useTransitions:n,window:a}){let l=_.useRef();l.current==null&&(l.current=qE({window:a,v5Compat:!0}));let u=l.current,[d,p]=_.useState({action:u.action,location:u.location}),g=_.useCallback(y=>{n===!1?p(y):_.startTransition(()=>p(y))},[n]);return _.useLayoutEffect(()=>u.listen(g),[u,g]),_.createElement(Uk,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var lw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cw=_.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:l,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:k,...P},W){let{basename:B,unstable_useTransitions:L}=_.useContext(sr),re=typeof y=="string"&&lw.test(y),X=X2(y,B);y=X.to;let he=Ek(y,{relative:l}),[ke,ze,Ae]=iS(a,P),I=gS(y,{replace:d,state:p,target:g,preventScrollReset:w,relative:l,viewTransition:T,unstable_defaultShouldRevalidate:k,unstable_useTransitions:L});function S(D){e&&e(D),D.defaultPrevented||I(D)}let R=_.createElement("a",{...P,...Ae,href:X.absoluteURL||he,onClick:X.isExternal||u?e:S,ref:uS(W,ze),target:g,"data-discover":!re&&n==="render"?"true":void 0});return ke&&!re?_.createElement(_.Fragment,null,R,_.createElement(oS,{page:he})):R});cw.displayName="Link";var fS=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:l=!1,style:u,to:d,viewTransition:p,children:g,...y},w){let T=uu(d,{relative:y.relative}),k=Vr(),P=_.useContext(Rd),{navigator:W,basename:B}=_.useContext(sr),L=P!=null&&_S(T)&&p===!0,re=W.encodeLocation?W.encodeLocation(T).pathname:T.pathname,X=k.pathname,he=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(X=X.toLowerCase(),he=he?he.toLowerCase():null,re=re.toLowerCase()),he&&B&&(he=Ia(he,B)||he);const ke=re!=="/"&&re.endsWith("/")?re.length-1:re.length;let ze=X===re||!l&&X.startsWith(re)&&X.charAt(ke)==="/",Ae=he!=null&&(he===re||!l&&he.startsWith(re)&&he.charAt(re.length)==="/"),I={isActive:ze,isPending:Ae,isTransitioning:L},S=ze?e:void 0,R;typeof a=="function"?R=a(I):R=[a,ze?"active":null,Ae?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(I):u;return _.createElement(cw,{...y,"aria-current":S,className:R,ref:w,style:D,to:d,viewTransition:p},typeof g=="function"?g(I):g)});fS.displayName="NavLink";var mS=_.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:l,state:u,method:d=Xh,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:k,...P},W)=>{let{unstable_useTransitions:B}=_.useContext(sr),L=wS(),re=xS(p,{relative:y}),X=d.toLowerCase()==="get"?"get":"post",he=typeof p=="string"&&lw.test(p),ke=ze=>{if(g&&g(ze),ze.defaultPrevented)return;ze.preventDefault();let Ae=ze.nativeEvent.submitter,I=Ae?.getAttribute("formmethod")||d,S=()=>L(Ae||ze.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:l,state:u,relative:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:k});B&&n!==!1?_.startTransition(()=>S()):S()};return _.createElement("form",{ref:W,method:X,action:re,onSubmit:a?g:ke,...P,"data-discover":!he&&s==="render"?"true":void 0})});mS.displayName="Form";function pS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uw(s){let e=_.useContext(Pl);return On(e,pS(s)),e}function gS(s,{target:e,replace:n,state:a,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Gs(),w=Vr(),T=uu(s,{relative:u});return _.useCallback(k=>{if(Wk(k,e)){k.preventDefault();let P=n!==void 0?n:Jc(w)===Jc(T),W=()=>y(s,{replace:P,state:a,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?_.startTransition(()=>W()):W()}},[w,y,T,n,a,e,s,l,u,d,p,g])}function yS(s){yr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=_.useRef(Ap(s)),n=_.useRef(!1),a=Vr(),l=_.useMemo(()=>Gk(a.search,n.current?null:e.current),[a.search]),u=Gs(),d=_.useCallback((p,g)=>{const y=Ap(typeof p=="function"?p(new URLSearchParams(l)):p);n.current=!0,u("?"+y,g)},[u,l]);return[l,d]}var vS=0,bS=()=>`__${String(++vS)}__`;function wS(){let{router:s}=uw("useSubmit"),{basename:e}=_.useContext(sr),n=Pk(),a=s.fetch,l=s.navigate;return _.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:w,body:T}=Qk(u,e);if(d.navigate===!1){let k=d.fetcherKey||bS();await a(k,n,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:w,body:T,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await l(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:w,body:T,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,l,e,n])}function xS(s,{relative:e}={}){let{basename:n}=_.useContext(sr),a=_.useContext(ia);On(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),u={...uu(s||".",{relative:e})},d=Vr();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(T=>T).forEach(T=>p.append("index",T));let w=p.toString();u.search=w?`?${w}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Ca([n,u.pathname])),Jc(u)}function _S(s,{relative:e}={}){let n=_.useContext(Z2);On(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=uw("useViewTransitionState"),l=uu(s,{relative:e});if(!n.isTransitioning)return!1;let u=Ia(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=Ia(n.nextLocation.pathname,a)||n.nextLocation.pathname;return cd(l.pathname,d)!=null||cd(l.pathname,u)!=null}const TS=()=>{};var r1={};const hw=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let l=s.charCodeAt(a);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},ES=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const l=s[n++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[a++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],d=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[a++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},dw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<s.length;l+=3){const u=s[l],d=l+1<s.length,p=d?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,w=u>>2,T=(u&3)<<4|p>>4;let k=(p&15)<<2|y>>6,P=y&63;g||(P=64,d||(k=64)),a.push(n[w],n[T],n[k],n[P])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(hw(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):ES(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const T=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||T==null)throw new kS;const k=u<<2|p>>4;if(a.push(k),y!==64){const P=p<<4&240|y>>2;if(a.push(P),T!==64){const W=y<<6&192|T;a.push(W)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class kS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SS=function(s){const e=hw(s);return dw.encodeByteArray(e,!0)},ud=function(s){return SS(s).replace(/\./g,"")},fw=function(s){try{return dw.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const NS=()=>jS().__FIREBASE_DEFAULTS__,CS=()=>{if(typeof process>"u"||typeof r1>"u")return;const s=r1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},RS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&fw(s[1]);return e&&JSON.parse(e)},Id=()=>{try{return TS()||NS()||CS()||RS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},mw=s=>Id()?.emulatorHosts?.[s],pw=s=>{const e=mw(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},gw=()=>Id()?.config,yw=s=>Id()?.[`_${s}`];class AS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}function Pi(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mg(s){return(await fetch(s,{credentials:"include"})).ok}function vw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ud(JSON.stringify(n)),ud(JSON.stringify(d)),""].join(".")}const qc={};function IS(){const s={prod:[],emulator:[]};for(const e of Object.keys(qc))qc[e]?s.emulator.push(e):s.prod.push(e);return s}function DS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let a1=!1;function pg(s,e){if(typeof window>"u"||typeof document>"u"||!Pi(window.location.host)||qc[s]===e||qc[s]||a1)return;qc[s]=e;function n(k){return`__firebase__banner__${k}`}const a="__firebase__banner",u=IS().prod.length>0;function d(){const k=document.getElementById(a);k&&k.remove()}function p(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function g(k,P){k.setAttribute("width","24"),k.setAttribute("id",P),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function y(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{a1=!0,d()},k}function w(k,P){k.setAttribute("id",P),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function T(){const k=DS(a),P=n("text"),W=document.getElementById(P)||document.createElement("span"),B=n("learnmore"),L=document.getElementById(B)||document.createElement("a"),re=n("preprendIcon"),X=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const he=k.element;p(he),w(L,B);const ke=y();g(X,re),he.append(X,W,L,ke),document.body.appendChild(he)}u?(W.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function As(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(As())}function PS(){const s=Id()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function VS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BS(){const s=As();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function US(){return!PS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zS(){try{return typeof indexedDB=="object"}catch{return!1}}function FS(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const HS="FirebaseError";class oa extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=HS,Object.setPrototypeOf(this,oa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hu.prototype.create)}}class hu{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?qS(u,a):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new oa(l,p,a)}}function qS(s,e){return s.replace($S,(n,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const $S=/\{\$([^}]+)}/g;function WS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function yo(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const l of n){if(!a.includes(l))return!1;const u=s[l],d=e[l];if(i1(u)&&i1(d)){if(!yo(u,d))return!1}else if(u!==d)return!1}for(const l of a)if(!n.includes(l))return!1;return!0}function i1(s){return s!==null&&typeof s=="object"}function du(s){const e=[];for(const[n,a]of Object.entries(s))Array.isArray(a)?a.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Vc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[l,u]=a.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Bc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function GS(s,e){const n=new KS(s,e);return n.subscribe.bind(n)}class KS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let l;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");YS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:a},l.next===void 0&&(l.next=rp),l.error===void 0&&(l.error=rp),l.complete===void 0&&(l.complete=rp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function rp(){}function Vn(s){return s&&s._delegate?s._delegate:s}class Ni{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ho="[DEFAULT]";class QS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new AS;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JS(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});a.resolve(u)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);a===p&&d.resolve(l)}return l}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(a)??new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const l of a)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:XS(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XS(s){return s===ho?void 0:s}function JS(s){return s.instantiationMode==="EAGER"}class ZS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Zt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Zt||(Zt={}));const ej={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},tj=Zt.INFO,nj={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},sj=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),l=nj[e];if(l)console[l](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gg{constructor(e){this.name=e,this._logLevel=tj,this._logHandler=sj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ej[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}const rj=(s,e)=>e.some(n=>s instanceof n);let o1,l1;function aj(){return o1||(o1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ij(){return l1||(l1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bw=new WeakMap,Ip=new WeakMap,ww=new WeakMap,ap=new WeakMap,yg=new WeakMap;function oj(s){const e=new Promise((n,a)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(Ei(s.result)),l()},d=()=>{a(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&bw.set(n,s)}).catch(()=>{}),yg.set(e,s),e}function lj(s){if(Ip.has(s))return;const e=new Promise((n,a)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),l()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});Ip.set(s,e)}let Dp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Ip.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ww.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ei(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function cj(s){Dp=s(Dp)}function uj(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(ip(this),e,...n);return ww.set(a,e.sort?e.sort():[e]),Ei(a)}:ij().includes(s)?function(...e){return s.apply(ip(this),e),Ei(bw.get(this))}:function(...e){return Ei(s.apply(ip(this),e))}}function hj(s){return typeof s=="function"?uj(s):(s instanceof IDBTransaction&&lj(s),rj(s,aj())?new Proxy(s,Dp):s)}function Ei(s){if(s instanceof IDBRequest)return oj(s);if(ap.has(s))return ap.get(s);const e=hj(s);return e!==s&&(ap.set(s,e),yg.set(e,s)),e}const ip=s=>yg.get(s);function dj(s,e,{blocked:n,upgrade:a,blocking:l,terminated:u}={}){const d=indexedDB.open(s,e),p=Ei(d);return a&&d.addEventListener("upgradeneeded",g=>{a(Ei(d.result),g.oldVersion,g.newVersion,Ei(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const fj=["get","getKey","getAll","getAllKeys","count"],mj=["put","add","delete","clear"],op=new Map;function c1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(op.get(e))return op.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,l=mj.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(l||fj.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return a&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return op.set(e,u),u}cj(s=>({...s,get:(e,n,a)=>c1(e,n)||s.get(e,n,a),has:(e,n)=>!!c1(e,n)||s.has(e,n)}));class pj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gj(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function gj(s){return s.getComponent()?.type==="VERSION"}const Mp="@firebase/app",u1="0.14.7";const Da=new gg("@firebase/app"),yj="@firebase/app-compat",vj="@firebase/analytics-compat",bj="@firebase/analytics",wj="@firebase/app-check-compat",xj="@firebase/app-check",_j="@firebase/auth",Tj="@firebase/auth-compat",Ej="@firebase/database",kj="@firebase/data-connect",Sj="@firebase/database-compat",jj="@firebase/functions",Nj="@firebase/functions-compat",Cj="@firebase/installations",Rj="@firebase/installations-compat",Aj="@firebase/messaging",Ij="@firebase/messaging-compat",Dj="@firebase/performance",Mj="@firebase/performance-compat",Pj="@firebase/remote-config",Lj="@firebase/remote-config-compat",Oj="@firebase/storage",Vj="@firebase/storage-compat",Bj="@firebase/firestore",Uj="@firebase/ai",zj="@firebase/firestore-compat",Fj="firebase",Hj="12.8.0";const Pp="[DEFAULT]",qj={[Mp]:"fire-core",[yj]:"fire-core-compat",[bj]:"fire-analytics",[vj]:"fire-analytics-compat",[xj]:"fire-app-check",[wj]:"fire-app-check-compat",[_j]:"fire-auth",[Tj]:"fire-auth-compat",[Ej]:"fire-rtdb",[kj]:"fire-data-connect",[Sj]:"fire-rtdb-compat",[jj]:"fire-fn",[Nj]:"fire-fn-compat",[Cj]:"fire-iid",[Rj]:"fire-iid-compat",[Aj]:"fire-fcm",[Ij]:"fire-fcm-compat",[Dj]:"fire-perf",[Mj]:"fire-perf-compat",[Pj]:"fire-rc",[Lj]:"fire-rc-compat",[Oj]:"fire-gcs",[Vj]:"fire-gcs-compat",[Bj]:"fire-fst",[zj]:"fire-fst-compat",[Uj]:"fire-vertex","fire-js":"fire-js",[Fj]:"fire-js-all"};const hd=new Map,$j=new Map,Lp=new Map;function h1(s,e){try{s.container.addComponent(e)}catch(n){Da.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function vo(s){const e=s.name;if(Lp.has(e))return Da.debug(`There were multiple attempts to register component ${e}.`),!1;Lp.set(e,s);for(const n of hd.values())h1(n,s);for(const n of $j.values())h1(n,s);return!0}function Dd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function tr(s){return s==null?!1:s.settings!==void 0}const Wj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ki=new hu("app","Firebase",Wj);class Gj{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}const ko=Hj;function vg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:Pp,automaticDataCollectionEnabled:!0,...e},l=a.name;if(typeof l!="string"||!l)throw ki.create("bad-app-name",{appName:String(l)});if(n||(n=gw()),!n)throw ki.create("no-options");const u=hd.get(l);if(u){if(yo(n,u.options)&&yo(a,u.config))return u;throw ki.create("duplicate-app",{appName:l})}const d=new ZS(l);for(const g of Lp.values())d.addComponent(g);const p=new Gj(n,a,d);return hd.set(l,p),p}function bg(s=Pp){const e=hd.get(s);if(!e&&s===Pp&&gw())return vg();if(!e)throw ki.create("no-app",{appName:s});return e}function Zr(s,e,n){let a=qj[s]??s;n&&(a+=`-${n}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Da.warn(d.join(" "));return}vo(new Ni(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const Kj="firebase-heartbeat-database",Yj=1,Zc="firebase-heartbeat-store";let lp=null;function xw(){return lp||(lp=dj(Kj,Yj,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Zc)}catch(n){console.warn(n)}}}}).catch(s=>{throw ki.create("idb-open",{originalErrorMessage:s.message})})),lp}async function Qj(s){try{const n=(await xw()).transaction(Zc),a=await n.objectStore(Zc).get(_w(s));return await n.done,a}catch(e){if(e instanceof oa)Da.warn(e.message);else{const n=ki.create("idb-get",{originalErrorMessage:e?.message});Da.warn(n.message)}}}async function d1(s,e){try{const a=(await xw()).transaction(Zc,"readwrite");await a.objectStore(Zc).put(e,_w(s)),await a.done}catch(n){if(n instanceof oa)Da.warn(n.message);else{const a=ki.create("idb-set",{originalErrorMessage:n?.message});Da.warn(a.message)}}}function _w(s){return`${s.name}!${s.options.appId}`}const Xj=1024,Jj=30;class Zj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tN(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=f1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>Jj){const l=nN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Da.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=f1(),{heartbeatsToSend:n,unsentEntries:a}=eN(this._heartbeatsCache.heartbeats),l=ud(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Da.warn(e),""}}}function f1(){return new Date().toISOString().substring(0,10)}function eN(s,e=Xj){const n=[];let a=s.slice();for(const l of s){const u=n.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),m1(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),m1(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class tN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zS()?FS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Qj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return d1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return d1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function m1(s){return ud(JSON.stringify({version:2,heartbeats:s})).length}function nN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}function sN(s){vo(new Ni("platform-logger",e=>new pj(e),"PRIVATE")),vo(new Ni("heartbeat",e=>new Zj(e),"PRIVATE")),Zr(Mp,u1,s),Zr(Mp,u1,"esm2020"),Zr("fire-js","")}sN("");function Tw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rN=Tw,Ew=new hu("auth","Firebase",Tw());const dd=new gg("@firebase/auth");function aN(s,...e){dd.logLevel<=Zt.WARN&&dd.warn(`Auth (${ko}): ${s}`,...e)}function Zh(s,...e){dd.logLevel<=Zt.ERROR&&dd.error(`Auth (${ko}): ${s}`,...e)}function Pr(s,...e){throw wg(s,...e)}function ea(s,...e){return wg(s,...e)}function kw(s,e,n){const a={...rN(),[e]:n};return new hu("auth","Firebase",a).create(e,{appName:s.name})}function Ra(s){return kw(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wg(s,...e){if(typeof s!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(n,...a)}return Ew.create(s,...e)}function Et(s,e,...n){if(!s)throw wg(e,...n)}function ja(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Zh(e),new Error(e)}function Ma(s,e){s||ja(e)}function Op(){return typeof self<"u"&&self.location?.href||""}function iN(){return p1()==="http:"||p1()==="https:"}function p1(){return typeof self<"u"&&self.location?.protocol||null}function oN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iN()||OS()||"connection"in navigator)?navigator.onLine:!0}function lN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ma(n>e,"Short delay should be less than long delay!"),this.isMobile=MS()||VS()}get(){return oN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xg(s,e){Ma(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Sw{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ja("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ja("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ja("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const uN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hN=new fu(3e4,6e4);function Oa(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Va(s,e,n,a,l={}){return jw(s,l,async()=>{let u={},d={};a&&(e==="GET"?d=a:u={body:JSON.stringify(a)});const p=du({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return LS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Pi(s.emulatorConfig.host)&&(y.credentials="include"),Sw.fetch()(await Nw(s,s.config.apiHost,n,p),y)})}async function jw(s,e,n){s._canInitEmulator=!1;const a={...cN,...e};try{const l=new fN(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Bh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Bh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw Bh(s,"user-disabled",d);const w=a[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw kw(s,w,y);Pr(s,w)}}catch(l){if(l instanceof oa)throw l;Pr(s,"network-request-failed",{message:String(l)})}}async function mu(s,e,n,a,l={}){const u=await Va(s,e,n,a,l);return"mfaPendingCredential"in u&&Pr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Nw(s,e,n,a){const l=`${e}${n}?${a}`,u=s,d=u.config.emulator?xg(s.config,l):`${s.config.apiScheme}://${l}`;return uN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function dN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(ea(this.auth,"network-request-failed")),hN.get())})}}function Bh(s,e,n){const a={appName:s.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const l=ea(s,e,a);return l.customData._tokenResponse=n,l}function g1(s){return s!==void 0&&s.enterprise!==void 0}class mN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pN(s,e){return Va(s,"GET","/v2/recaptchaConfig",Oa(s,e))}async function gN(s,e){return Va(s,"POST","/v1/accounts:delete",e)}async function fd(s,e){return Va(s,"POST","/v1/accounts:lookup",e)}function $c(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yN(s,e=!1){const n=Vn(s),a=await n.getIdToken(e),l=_g(a);Et(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:a,authTime:$c(cp(l.auth_time)),issuedAtTime:$c(cp(l.iat)),expirationTime:$c(cp(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function cp(s){return Number(s)*1e3}function _g(s){const[e,n,a]=s.split(".");if(e===void 0||n===void 0||a===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const l=fw(n);return l?JSON.parse(l):(Zh("Failed to decode base64 JWT payload"),null)}catch(l){return Zh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function y1(s){const e=_g(s);return Et(e,"internal-error"),Et(typeof e.exp<"u","internal-error"),Et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function eu(s,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof oa&&vN(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function vN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class bN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Vp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$c(this.lastLoginAt),this.creationTime=$c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function md(s){const e=s.auth,n=await s.getIdToken(),a=await eu(s,fd(e,{idToken:n}));Et(a?.users.length,e,"internal-error");const l=a.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?Cw(l.providerUserInfo):[],d=xN(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!d?.length,y=p?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Vp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,w)}async function wN(s){const e=Vn(s);await md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xN(s,e){return[...s.filter(a=>!e.some(l=>l.providerId===a.providerId)),...e]}function Cw(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function _N(s,e){const n=await jw(s,{},async()=>{const a=du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,d=await Nw(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:a};return s.emulatorConfig&&Pi(s.emulatorConfig.host)&&(g.credentials="include"),Sw.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TN(s,e){return Va(s,"POST","/v2/accounts:revokeToken",Oa(s,e))}class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Et(e.idToken,"internal-error"),Et(typeof e.idToken<"u","internal-error"),Et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Et(e.length!==0,"internal-error");const n=y1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:l,expiresIn:u}=await _N(e,n);this.updateTokensAndExpiration(a,l,Number(u))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:l,expirationTime:u}=n,d=new _l;return a&&(Et(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),l&&(Et(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(Et(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return ja("not implemented")}}function pi(s,e){Et(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Dr{constructor({uid:e,auth:n,stsTokenManager:a,...l}){this.providerId="firebase",this.proactiveRefresh=new bN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Vp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await eu(this,this.stsTokenManager.getToken(this.auth,e));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yN(this,e)}reload(){return wN(this)}_assign(e){this!==e&&(Et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await md(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(Ra(this.auth));const e=await this.getIdToken();return await eu(this,gN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,w=n.lastLoginAt??void 0,{uid:T,emailVerified:k,isAnonymous:P,providerData:W,stsTokenManager:B}=n;Et(T&&B,e,"internal-error");const L=_l.fromJSON(this.name,B);Et(typeof T=="string",e,"internal-error"),pi(a,e.name),pi(l,e.name),Et(typeof k=="boolean",e,"internal-error"),Et(typeof P=="boolean",e,"internal-error"),pi(u,e.name),pi(d,e.name),pi(p,e.name),pi(g,e.name),pi(y,e.name),pi(w,e.name);const re=new Dr({uid:T,auth:e,email:l,emailVerified:k,displayName:a,isAnonymous:P,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:L,createdAt:y,lastLoginAt:w});return W&&Array.isArray(W)&&(re.providerData=W.map(X=>({...X}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,n,a=!1){const l=new _l;l.updateFromServerResponse(n);const u=new Dr({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:a});return await md(u),u}static async _fromGetAccountInfoResponse(e,n,a){const l=n.users[0];Et(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Cw(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,p=new _l;p.updateFromIdToken(a);const g=new Dr({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Vp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const v1=new Map;function Na(s){Ma(s instanceof Function,"Expected a class definition");let e=v1.get(s);return e?(Ma(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,v1.set(s,e),e)}class Rw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Rw.type="NONE";const b1=Rw;function ed(s,e,n){return`firebase:${s}:${e}:${n}`}class Tl{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:l,name:u}=this.auth;this.fullUserKey=ed(this.userKey,l.apiKey,u),this.fullPersistenceKey=ed("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await fd(this.auth,{idToken:e}).catch(()=>{});return n?Dr._fromGetAccountInfoResponse(this.auth,n,e):null}return Dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new Tl(Na(b1),e,a);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Na(b1);const d=ed(a,e.config.apiKey,e.name);let p=null;for(const y of n)try{const w=await y._get(d);if(w){let T;if(typeof w=="string"){const k=await fd(e,{idToken:w}).catch(()=>{});if(!k)break;T=await Dr._fromGetAccountInfoResponse(e,k,w)}else T=Dr._fromJSON(e,w);y!==u&&(p=T),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Tl(u,e,a):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new Tl(u,e,a))}}function w1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Aw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Lw(e))return"Blackberry";if(Ow(e))return"Webos";if(Iw(e))return"Safari";if((e.includes("chrome/")||Dw(e))&&!e.includes("edge/"))return"Chrome";if(Pw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(n);if(a?.length===2)return a[1]}return"Other"}function Aw(s=As()){return/firefox\//i.test(s)}function Iw(s=As()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dw(s=As()){return/crios\//i.test(s)}function Mw(s=As()){return/iemobile/i.test(s)}function Pw(s=As()){return/android/i.test(s)}function Lw(s=As()){return/blackberry/i.test(s)}function Ow(s=As()){return/webos/i.test(s)}function Tg(s=As()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function EN(s=As()){return Tg(s)&&!!window.navigator?.standalone}function kN(){return BS()&&document.documentMode===10}function Vw(s=As()){return Tg(s)||Pw(s)||Ow(s)||Lw(s)||/windows phone/i.test(s)||Mw(s)}function Bw(s,e=[]){let n;switch(s){case"Browser":n=w1(As());break;case"Worker":n=`${w1(As())}-${s}`;break;default:n=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ko}/${a}`}class SN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});a.onAbort=n,this.queue.push(a);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function jN(s,e={}){return Va(s,"GET","/v2/passwordPolicy",Oa(s,e))}const NN=6;class CN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??NN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let l=0;l<e.length;l++)a=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class RN{constructor(e,n,a,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x1(this),this.idTokenSubscription=new x1(this),this.beforeStateQueue=new SN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ew,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Na(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fd(this,{idToken:e}),a=await Dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(tr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=a?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(a=p.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await md(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(Ra(this));const n=e?Vn(e):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(Ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(Ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jN(this),n=new CN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hu("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await TN(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Na(e)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[Na(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,a,l);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Li(s){return Vn(s)}class x1{constructor(e){this.auth=e,this.observer=null,this.addObserver=GS(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AN(s){Md=s}function Uw(s){return Md.loadJS(s)}function IN(){return Md.recaptchaEnterpriseScript}function DN(){return Md.gapiScript}function MN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class PN{constructor(){this.enterprise=new LN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class LN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ON="recaptcha-enterprise",zw="NO_RECAPTCHA";class VN{constructor(e){this.type=ON,this.auth=Li(e)}async verify(e="verify",n=!1){async function a(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{pN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new mN(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,d,p){const g=window.grecaptcha;g1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(zw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PN().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{a(this.auth).then(p=>{if(!n&&g1(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=IN();g.length!==0&&(g+=p),Uw(g).then(()=>{l(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function _1(s,e,n,a=!1,l=!1){const u=new VN(s);let d;if(l)d=zw;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return a?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function pd(s,e,n,a,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await _1(s,e,n,n==="getOobCode");return a(s,u)}else return a(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await _1(s,e,n,n==="getOobCode");return a(s,d)}else return Promise.reject(u)})}function BN(s,e){const n=Dd(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(yo(u,e??{}))return l;Pr(l,"already-initialized")}return n.initialize({options:e})}function UN(s,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(Na);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function zN(s,e,n){const a=Li(s);Et(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const l=!1,u=Fw(e),{host:d,port:p}=FN(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},w=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!a._canInitEmulator){Et(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Et(yo(y,a.config.emulator)&&yo(w,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=w,a.settings.appVerificationDisabledForTesting=!0,Pi(d)?(mg(`${u}//${d}${g}`),pg("Auth",!0)):HN()}function Fw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function FN(s){const e=Fw(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(a);if(l){const u=l[1];return{host:u,port:T1(a.substr(u.length+1))}}else{const[u,d]=a.split(":");return{host:u,port:T1(d)}}}function T1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function HN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Eg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ja("not implemented")}_getIdTokenResponse(e){return ja("not implemented")}_linkToIdToken(e,n){return ja("not implemented")}_getReauthenticationResolver(e){return ja("not implemented")}}async function qN(s,e){return Va(s,"POST","/v1/accounts:signUp",e)}async function $N(s,e){return mu(s,"POST","/v1/accounts:signInWithPassword",Oa(s,e))}async function WN(s,e){return Va(s,"POST","/v1/accounts:sendOobCode",Oa(s,e))}async function GN(s,e){return WN(s,e)}async function KN(s,e){return mu(s,"POST","/v1/accounts:signInWithEmailLink",Oa(s,e))}async function YN(s,e){return mu(s,"POST","/v1/accounts:signInWithEmailLink",Oa(s,e))}class tu extends Eg{constructor(e,n,a,l=null){super("password",a),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new tu(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new tu(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pd(e,n,"signInWithPassword",$N);case"emailLink":return KN(e,{email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pd(e,a,"signUpPassword",qN);case"emailLink":return YN(e,{idToken:n,email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function El(s,e){return mu(s,"POST","/v1/accounts:signInWithIdp",Oa(s,e))}const QN="http://localhost";class bo extends Eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:l,...u}=n;if(!a||!l)return null;const d=new bo(a,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return El(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,El(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,El(e,n)}buildRequest(){const e={requestUri:QN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=du(n)}return e}}function XN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JN(s){const e=Vc(Bc(s)).link,n=e?Vc(Bc(e)).deep_link_id:null,a=Vc(Bc(s)).deep_link_id;return(a?Vc(Bc(a)).link:null)||a||n||e||s}class kg{constructor(e){const n=Vc(Bc(e)),a=n.apiKey??null,l=n.oobCode??null,u=XN(n.mode??null);Et(a&&l&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=JN(e);try{return new kg(n)}catch{return null}}}class Ol{constructor(){this.providerId=Ol.PROVIDER_ID}static credential(e,n){return tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=kg.parseLink(n);return Et(a,"argument-error"),tu._fromEmailAndCode(e,a.code,a.tenantId)}}Ol.PROVIDER_ID="password";Ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Hw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pu extends Hw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vi extends pu{constructor(){super("facebook.com")}static credential(e){return bo._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";class bi extends pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bo._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return bi.credential(n,a)}catch{return null}}}bi.GOOGLE_SIGN_IN_METHOD="google.com";bi.PROVIDER_ID="google.com";class wi extends pu{constructor(){super("github.com")}static credential(e){return bo._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";class xi extends pu{constructor(){super("twitter.com")}static credential(e,n){return bo._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return xi.credential(n,a)}catch{return null}}}xi.TWITTER_SIGN_IN_METHOD="twitter.com";xi.PROVIDER_ID="twitter.com";async function ZN(s,e){return mu(s,"POST","/v1/accounts:signUp",Oa(s,e))}class wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,l=!1){const u=await Dr._fromIdTokenResponse(e,a,l),d=E1(a);return new wo({user:u,providerId:d,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const l=E1(a);return new wo({user:e,providerId:l,_tokenResponse:a,operationType:n})}}function E1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class gd extends oa{constructor(e,n,a,l){super(n.code,n.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,gd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,l){return new gd(e,n,a,l)}}function qw(s,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?gd._fromErrorAndOperation(s,u,e,a):u})}async function eC(s,e,n=!1){const a=await eu(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return wo._forOperation(s,"link",a)}async function tC(s,e,n=!1){const{auth:a}=s;if(tr(a.app))return Promise.reject(Ra(a));const l="reauthenticate";try{const u=await eu(s,qw(a,l,e,s),n);Et(u.idToken,a,"internal-error");const d=_g(u.idToken);Et(d,a,"internal-error");const{sub:p}=d;return Et(s.uid===p,a,"user-mismatch"),wo._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Pr(a,"user-mismatch"),u}}async function $w(s,e,n=!1){if(tr(s.app))return Promise.reject(Ra(s));const a="signIn",l=await qw(s,a,e),u=await wo._fromIdTokenResponse(s,a,l);return n||await s._updateCurrentUser(u.user),u}async function nC(s,e){return $w(Li(s),e)}async function Ww(s){const e=Li(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sC(s,e,n){const a=Li(s);await pd(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",GN)}async function f3(s,e,n){if(tr(s.app))return Promise.reject(Ra(s));const a=Li(s),d=await pd(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZN).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Ww(s),g}),p=await wo._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(p.user),p}function rC(s,e,n){return tr(s.app)?Promise.reject(Ra(s)):nC(Vn(s),Ol.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Ww(s),a})}function aC(s,e){return Vn(s).setPersistence(e)}function iC(s,e,n,a){return Vn(s).onIdTokenChanged(e,n,a)}function oC(s,e,n){return Vn(s).beforeAuthStateChanged(e,n)}function lC(s,e,n,a){return Vn(s).onAuthStateChanged(e,n,a)}function cC(s){return Vn(s).signOut()}const yd="__sak";class Gw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yd,"1"),this.storage.removeItem(yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uC=1e3,hC=10;class Kw extends Gw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),l=this.localCache[n];a!==l&&e(n,l,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const a=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(a);!n&&this.localCache[a]===d||this.notifyListeners(a,d)},u=this.storage.getItem(a);kN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,hC):l()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},uC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kw.type="LOCAL";const Yw=Kw;class Qw extends Gw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qw.type="SESSION";const Sg=Qw;function dC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const a=new Pd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:l,data:u}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,u)),g=await dC(p);n.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pd.receivers=[];function jg(s="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return s+n}class fC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=jg("",20);l.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},a);d={messageChannel:l,onMessage(T){const k=T;if(k.data.eventId===y)switch(k.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(k.data.response);break;default:clearTimeout(w),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ta(){return window}function mC(s){ta().location.href=s}function Xw(){return typeof ta().WorkerGlobalScope<"u"&&typeof ta().importScripts=="function"}async function pC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gC(){return navigator?.serviceWorker?.controller||null}function yC(){return Xw()?self:null}const Jw="firebaseLocalStorageDb",vC=1,vd="firebaseLocalStorage",Zw="fbase_key";class gu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ld(s,e){return s.transaction([vd],e?"readwrite":"readonly").objectStore(vd)}function bC(){const s=indexedDB.deleteDatabase(Jw);return new gu(s).toPromise()}function Bp(){const s=indexedDB.open(Jw,vC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(vd,{keyPath:Zw})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(vd)?e(a):(a.close(),await bC(),e(await Bp()))})})}async function k1(s,e,n){const a=Ld(s,!0).put({[Zw]:e,value:n});return new gu(a).toPromise()}async function wC(s,e){const n=Ld(s,!1).get(e),a=await new gu(n).toPromise();return a===void 0?null:a.value}function S1(s,e){const n=Ld(s,!0).delete(e);return new gu(n).toPromise()}const xC=800,_C=3;class ex{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>_C)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pd._getInstance(yC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pC(),!this.activeServiceWorker)return;this.sender=new fC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bp();return await k1(e,yd,"1"),await S1(e,yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>k1(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>wC(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>S1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Ld(l,!1).getAll();return new gu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ex.type="LOCAL";const TC=ex;new fu(3e4,6e4);function EC(s,e){return e?Na(e):(Et(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Ng extends Eg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,n){return El(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kC(s){return $w(s.auth,new Ng(s),s.bypassAuthState)}function SC(s){const{auth:e,user:n}=s;return Et(n,e,"internal-error"),tC(n,new Ng(s),s.bypassAuthState)}async function jC(s){const{auth:e,user:n}=s;return Et(n,e,"internal-error"),eC(n,new Ng(s),s.bypassAuthState)}class tx{constructor(e,n,a,l,u=!1){this.auth=e,this.resolver=a,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:a,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kC;case"linkViaPopup":case"linkViaRedirect":return jC;case"reauthViaPopup":case"reauthViaRedirect":return SC;default:Pr(this.auth,"internal-error")}}resolve(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const NC=new fu(2e3,1e4);class bl extends tx{constructor(e,n,a,l,u){super(e,n,l,u),this.provider=a,this.authWindow=null,this.pollId=null,bl.currentPopupAction&&bl.currentPopupAction.cancel(),bl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Et(e,this.auth,"internal-error"),e}async onExecution(){Ma(this.filter.length===1,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ea(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ea(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ea(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NC.get())};e()}}bl.currentPopupAction=null;const CC="pendingRedirect",td=new Map;class RC extends tx{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=td.get(this.auth._key());if(!e){try{const a=await AC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}td.set(this.auth._key(),e)}return this.bypassAuthState||td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AC(s,e){const n=MC(e),a=DC(s);if(!await a._isAvailable())return!1;const l=await a._get(n)==="true";return await a._remove(n),l}function IC(s,e){td.set(s._key(),e)}function DC(s){return Na(s._redirectPersistence)}function MC(s){return ed(CC,s.config.apiKey,s.name)}async function PC(s,e,n=!1){if(tr(s.app))return Promise.reject(Ra(s));const a=Li(s),l=EC(a,e),d=await new RC(a,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}const LC=600*1e3;class OC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!nx(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ea(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LC&&this.cachedEventUids.clear(),this.cachedEventUids.has(j1(e))}saveEventToCache(e){this.cachedEventUids.add(j1(e)),this.lastProcessedEventTime=Date.now()}}function j1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function nx({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function VC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nx(s);default:return!1}}async function BC(s,e={}){return Va(s,"GET","/v1/projects",e)}const UC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zC=/^https?/;async function FC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await BC(s);for(const n of e)try{if(HC(n))return}catch{}Pr(s,"unauthorized-domain")}function HC(s){const e=Op(),{protocol:n,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===a}if(!zC.test(n))return!1;if(UC.test(s))return a===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(a)}const qC=new fu(3e4,6e4);function N1(){const s=ta().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function $C(s){return new Promise((e,n)=>{function a(){N1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N1(),n(ea(s,"network-request-failed"))},timeout:qC.get()})}if(ta().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ta().gapi?.load)a();else{const l=MN("iframefcb");return ta()[l]=()=>{gapi.load?a():n(ea(s,"network-request-failed"))},Uw(`${DN()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw nd=null,e})}let nd=null;function WC(s){return nd=nd||$C(s),nd}const GC=new fu(5e3,15e3),KC="__/auth/iframe",YC="emulator/auth/iframe",QC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JC(s){const e=s.config;Et(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?xg(e,YC):`https://${s.config.authDomain}/${KC}`,a={apiKey:e.apiKey,appName:s.name,v:ko},l=XC.get(s.config.apiHost);l&&(a.eid=l);const u=s._getFrameworks();return u.length&&(a.fw=u.join(",")),`${n}?${du(a).slice(1)}`}async function ZC(s){const e=await WC(s),n=ta().gapi;return Et(n,s,"internal-error"),e.open({where:document.body,url:JC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QC,dontclear:!0},a=>new Promise(async(l,u)=>{await a.restyle({setHideOnLeave:!1});const d=ea(s,"network-request-failed"),p=ta().setTimeout(()=>{u(d)},GC.get());function g(){ta().clearTimeout(p),l(a)}a.ping(g).then(g,()=>{u(d)})}))}const eR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tR=500,nR=600,sR="_blank",rR="http://localhost";class C1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aR(s,e,n,a=tR,l=nR){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let p="";const g={...eR,width:a.toString(),height:l.toString(),top:u,left:d},y=As().toLowerCase();n&&(p=Dw(y)?sR:n),Aw(y)&&(e=e||rR,g.scrollbars="yes");const w=Object.entries(g).reduce((k,[P,W])=>`${k}${P}=${W},`,"");if(EN(y)&&p!=="_self")return iR(e||"",p),new C1(null);const T=window.open(e||"",p,w);Et(T,s,"popup-blocked");try{T.focus()}catch{}return new C1(T)}function iR(s,e){const n=document.createElement("a");n.href=s,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const oR="__/auth/handler",lR="emulator/auth/handler",cR=encodeURIComponent("fac");async function R1(s,e,n,a,l,u){Et(s.config.authDomain,s,"auth-domain-config-required"),Et(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:a,v:ko,eventId:l};if(e instanceof Hw){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",WS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))d[w]=T}if(e instanceof pu){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(d.scopes=w.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await s._getAppCheckToken(),y=g?`#${cR}=${encodeURIComponent(g)}`:"";return`${uR(s)}?${du(p).slice(1)}${y}`}function uR({config:s}){return s.emulator?xg(s,lR):`https://${s.authDomain}/${oR}`}const up="webStorageSupport";class hR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sg,this._completeRedirectFn=PC,this._overrideRedirectResult=IC}async _openPopup(e,n,a,l){Ma(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await R1(e,n,a,Op(),l);return aR(e,u,jg())}async _openRedirect(e,n,a,l){await this._originValidation(e);const u=await R1(e,n,a,Op(),l);return mC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Ma(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await ZC(e),a=new OC(e);return n.register("authEvent",l=>(Et(l?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(up,{type:up},l=>{const u=l?.[0]?.[up];u!==void 0&&n(!!u),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Vw()||Iw()||Tg()}}const dR=hR;var A1="@firebase/auth",I1="1.12.0";class fR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pR(s){vo(new Ni("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=a.options;Et(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bw(s)},y=new RN(a,l,u,g);return UN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),vo(new Ni("auth-internal",e=>{const n=Li(e.getProvider("auth").getImmediate());return(a=>new fR(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zr(A1,I1,mR(s)),Zr(A1,I1,"esm2020")}const gR=300,yR=yw("authIdTokenMaxAge")||gR;let D1=null;const vR=s=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>yR)return;const l=n?.token;D1!==l&&(D1=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function sx(s=bg()){const e=Dd(s,"auth");if(e.isInitialized())return e.getImmediate();const n=BN(s,{popupRedirectResolver:dR,persistence:[TC,Yw,Sg]}),a=yw("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const d=vR(u.toString());oC(n,d,()=>d(n.currentUser)),iC(n,p=>d(p))}}const l=mw("auth");return l&&zN(n,`http://${l}`),n}function bR(){return document.getElementsByTagName("head")?.[0]??document}AN({loadJS(s){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=l=>{const u=ea("internal-error");u.customData=l,n(u)},a.type="text/javascript",a.charset="UTF-8",bR().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pR("Browser");var M1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Si,rx;(function(){var s;function e(I,S){function R(){}R.prototype=S.prototype,I.F=S.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(D,M,H){for(var A=Array(arguments.length-2),We=2;We<arguments.length;We++)A[We-2]=arguments[We];return S.prototype[M].apply(D,A)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,S,R){R||(R=0);const D=Array(16);if(typeof S=="string")for(var M=0;M<16;++M)D[M]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(M=0;M<16;++M)D[M]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=I.g[0],R=I.g[1],M=I.g[2];let H=I.g[3],A;A=S+(H^R&(M^H))+D[0]+3614090360&4294967295,S=R+(A<<7&4294967295|A>>>25),A=H+(M^S&(R^M))+D[1]+3905402710&4294967295,H=S+(A<<12&4294967295|A>>>20),A=M+(R^H&(S^R))+D[2]+606105819&4294967295,M=H+(A<<17&4294967295|A>>>15),A=R+(S^M&(H^S))+D[3]+3250441966&4294967295,R=M+(A<<22&4294967295|A>>>10),A=S+(H^R&(M^H))+D[4]+4118548399&4294967295,S=R+(A<<7&4294967295|A>>>25),A=H+(M^S&(R^M))+D[5]+1200080426&4294967295,H=S+(A<<12&4294967295|A>>>20),A=M+(R^H&(S^R))+D[6]+2821735955&4294967295,M=H+(A<<17&4294967295|A>>>15),A=R+(S^M&(H^S))+D[7]+4249261313&4294967295,R=M+(A<<22&4294967295|A>>>10),A=S+(H^R&(M^H))+D[8]+1770035416&4294967295,S=R+(A<<7&4294967295|A>>>25),A=H+(M^S&(R^M))+D[9]+2336552879&4294967295,H=S+(A<<12&4294967295|A>>>20),A=M+(R^H&(S^R))+D[10]+4294925233&4294967295,M=H+(A<<17&4294967295|A>>>15),A=R+(S^M&(H^S))+D[11]+2304563134&4294967295,R=M+(A<<22&4294967295|A>>>10),A=S+(H^R&(M^H))+D[12]+1804603682&4294967295,S=R+(A<<7&4294967295|A>>>25),A=H+(M^S&(R^M))+D[13]+4254626195&4294967295,H=S+(A<<12&4294967295|A>>>20),A=M+(R^H&(S^R))+D[14]+2792965006&4294967295,M=H+(A<<17&4294967295|A>>>15),A=R+(S^M&(H^S))+D[15]+1236535329&4294967295,R=M+(A<<22&4294967295|A>>>10),A=S+(M^H&(R^M))+D[1]+4129170786&4294967295,S=R+(A<<5&4294967295|A>>>27),A=H+(R^M&(S^R))+D[6]+3225465664&4294967295,H=S+(A<<9&4294967295|A>>>23),A=M+(S^R&(H^S))+D[11]+643717713&4294967295,M=H+(A<<14&4294967295|A>>>18),A=R+(H^S&(M^H))+D[0]+3921069994&4294967295,R=M+(A<<20&4294967295|A>>>12),A=S+(M^H&(R^M))+D[5]+3593408605&4294967295,S=R+(A<<5&4294967295|A>>>27),A=H+(R^M&(S^R))+D[10]+38016083&4294967295,H=S+(A<<9&4294967295|A>>>23),A=M+(S^R&(H^S))+D[15]+3634488961&4294967295,M=H+(A<<14&4294967295|A>>>18),A=R+(H^S&(M^H))+D[4]+3889429448&4294967295,R=M+(A<<20&4294967295|A>>>12),A=S+(M^H&(R^M))+D[9]+568446438&4294967295,S=R+(A<<5&4294967295|A>>>27),A=H+(R^M&(S^R))+D[14]+3275163606&4294967295,H=S+(A<<9&4294967295|A>>>23),A=M+(S^R&(H^S))+D[3]+4107603335&4294967295,M=H+(A<<14&4294967295|A>>>18),A=R+(H^S&(M^H))+D[8]+1163531501&4294967295,R=M+(A<<20&4294967295|A>>>12),A=S+(M^H&(R^M))+D[13]+2850285829&4294967295,S=R+(A<<5&4294967295|A>>>27),A=H+(R^M&(S^R))+D[2]+4243563512&4294967295,H=S+(A<<9&4294967295|A>>>23),A=M+(S^R&(H^S))+D[7]+1735328473&4294967295,M=H+(A<<14&4294967295|A>>>18),A=R+(H^S&(M^H))+D[12]+2368359562&4294967295,R=M+(A<<20&4294967295|A>>>12),A=S+(R^M^H)+D[5]+4294588738&4294967295,S=R+(A<<4&4294967295|A>>>28),A=H+(S^R^M)+D[8]+2272392833&4294967295,H=S+(A<<11&4294967295|A>>>21),A=M+(H^S^R)+D[11]+1839030562&4294967295,M=H+(A<<16&4294967295|A>>>16),A=R+(M^H^S)+D[14]+4259657740&4294967295,R=M+(A<<23&4294967295|A>>>9),A=S+(R^M^H)+D[1]+2763975236&4294967295,S=R+(A<<4&4294967295|A>>>28),A=H+(S^R^M)+D[4]+1272893353&4294967295,H=S+(A<<11&4294967295|A>>>21),A=M+(H^S^R)+D[7]+4139469664&4294967295,M=H+(A<<16&4294967295|A>>>16),A=R+(M^H^S)+D[10]+3200236656&4294967295,R=M+(A<<23&4294967295|A>>>9),A=S+(R^M^H)+D[13]+681279174&4294967295,S=R+(A<<4&4294967295|A>>>28),A=H+(S^R^M)+D[0]+3936430074&4294967295,H=S+(A<<11&4294967295|A>>>21),A=M+(H^S^R)+D[3]+3572445317&4294967295,M=H+(A<<16&4294967295|A>>>16),A=R+(M^H^S)+D[6]+76029189&4294967295,R=M+(A<<23&4294967295|A>>>9),A=S+(R^M^H)+D[9]+3654602809&4294967295,S=R+(A<<4&4294967295|A>>>28),A=H+(S^R^M)+D[12]+3873151461&4294967295,H=S+(A<<11&4294967295|A>>>21),A=M+(H^S^R)+D[15]+530742520&4294967295,M=H+(A<<16&4294967295|A>>>16),A=R+(M^H^S)+D[2]+3299628645&4294967295,R=M+(A<<23&4294967295|A>>>9),A=S+(M^(R|~H))+D[0]+4096336452&4294967295,S=R+(A<<6&4294967295|A>>>26),A=H+(R^(S|~M))+D[7]+1126891415&4294967295,H=S+(A<<10&4294967295|A>>>22),A=M+(S^(H|~R))+D[14]+2878612391&4294967295,M=H+(A<<15&4294967295|A>>>17),A=R+(H^(M|~S))+D[5]+4237533241&4294967295,R=M+(A<<21&4294967295|A>>>11),A=S+(M^(R|~H))+D[12]+1700485571&4294967295,S=R+(A<<6&4294967295|A>>>26),A=H+(R^(S|~M))+D[3]+2399980690&4294967295,H=S+(A<<10&4294967295|A>>>22),A=M+(S^(H|~R))+D[10]+4293915773&4294967295,M=H+(A<<15&4294967295|A>>>17),A=R+(H^(M|~S))+D[1]+2240044497&4294967295,R=M+(A<<21&4294967295|A>>>11),A=S+(M^(R|~H))+D[8]+1873313359&4294967295,S=R+(A<<6&4294967295|A>>>26),A=H+(R^(S|~M))+D[15]+4264355552&4294967295,H=S+(A<<10&4294967295|A>>>22),A=M+(S^(H|~R))+D[6]+2734768916&4294967295,M=H+(A<<15&4294967295|A>>>17),A=R+(H^(M|~S))+D[13]+1309151649&4294967295,R=M+(A<<21&4294967295|A>>>11),A=S+(M^(R|~H))+D[4]+4149444226&4294967295,S=R+(A<<6&4294967295|A>>>26),A=H+(R^(S|~M))+D[11]+3174756917&4294967295,H=S+(A<<10&4294967295|A>>>22),A=M+(S^(H|~R))+D[2]+718787259&4294967295,M=H+(A<<15&4294967295|A>>>17),A=R+(H^(M|~S))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+H&4294967295}a.prototype.v=function(I,S){S===void 0&&(S=I.length);const R=S-this.blockSize,D=this.C;let M=this.h,H=0;for(;H<S;){if(M==0)for(;H<=R;)l(this,I,H),H+=this.blockSize;if(typeof I=="string"){for(;H<S;)if(D[M++]=I.charCodeAt(H++),M==this.blockSize){l(this,D),M=0;break}}else for(;H<S;)if(D[M++]=I[H++],M==this.blockSize){l(this,D),M=0;break}}this.h=M,this.o+=S},a.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,R=0;R<4;++R)for(let D=0;D<32;D+=8)I[S++]=this.g[R]>>>D&255;return I};function u(I,S){var R=p;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=S(I)}function d(I,S){this.h=S;const R=[];let D=!0;for(let M=I.length-1;M>=0;M--){const H=I[M]|0;D&&H==S||(R[M]=H,D=!1)}this.g=R}var p={};function g(I){return-128<=I&&I<128?u(I,function(S){return new d([S|0],S<0?-1:0)}):new d([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return T;if(I<0)return L(y(-I));const S=[];let R=1;for(let D=0;I>=R;D++)S[D]=I/R|0,R*=4294967296;return new d(S,0)}function w(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return L(w(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(S,8));let D=T;for(let H=0;H<I.length;H+=8){var M=Math.min(8,I.length-H);const A=parseInt(I.substring(H,H+M),S);M<8?(M=y(Math.pow(S,M)),D=D.j(M).add(y(A))):(D=D.j(R),D=D.add(y(A)))}return D}var T=g(0),k=g(1),P=g(16777216);s=d.prototype,s.m=function(){if(B(this))return-L(this).m();let I=0,S=1;for(let R=0;R<this.g.length;R++){const D=this.i(R);I+=(D>=0?D:4294967296+D)*S,S*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(W(this))return"0";if(B(this))return"-"+L(this).toString(I);const S=y(Math.pow(I,6));var R=this;let D="";for(;;){const M=ke(R,S).g;R=re(R,M.j(S));let H=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=M,W(R))return H+D;for(;H.length<6;)H="0"+H;D=H+D}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function W(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function B(I){return I.h==-1}s.l=function(I){return I=re(this,I),B(I)?-1:W(I)?0:1};function L(I){const S=I.g.length,R=[];for(let D=0;D<S;D++)R[D]=~I.g[D];return new d(R,~I.h).add(k)}s.abs=function(){return B(this)?L(this):this},s.add=function(I){const S=Math.max(this.g.length,I.g.length),R=[];let D=0;for(let M=0;M<=S;M++){let H=D+(this.i(M)&65535)+(I.i(M)&65535),A=(H>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);D=A>>>16,H&=65535,A&=65535,R[M]=A<<16|H}return new d(R,R[R.length-1]&-2147483648?-1:0)};function re(I,S){return I.add(L(S))}s.j=function(I){if(W(this)||W(I))return T;if(B(this))return B(I)?L(this).j(L(I)):L(L(this).j(I));if(B(I))return L(this.j(L(I)));if(this.l(P)<0&&I.l(P)<0)return y(this.m()*I.m());const S=this.g.length+I.g.length,R=[];for(var D=0;D<2*S;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(let M=0;M<I.g.length;M++){const H=this.i(D)>>>16,A=this.i(D)&65535,We=I.i(M)>>>16,Nt=I.i(M)&65535;R[2*D+2*M]+=A*Nt,X(R,2*D+2*M),R[2*D+2*M+1]+=H*Nt,X(R,2*D+2*M+1),R[2*D+2*M+1]+=A*We,X(R,2*D+2*M+1),R[2*D+2*M+2]+=H*We,X(R,2*D+2*M+2)}for(I=0;I<S;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=S;I<2*S;I++)R[I]=0;return new d(R,0)};function X(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function he(I,S){this.g=I,this.h=S}function ke(I,S){if(W(S))throw Error("division by zero");if(W(I))return new he(T,T);if(B(I))return S=ke(L(I),S),new he(L(S.g),L(S.h));if(B(S))return S=ke(I,L(S)),new he(L(S.g),S.h);if(I.g.length>30){if(B(I)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var R=k,D=S;D.l(I)<=0;)R=ze(R),D=ze(D);var M=Ae(R,1),H=Ae(D,1);for(D=Ae(D,2),R=Ae(R,2);!W(D);){var A=H.add(D);A.l(I)<=0&&(M=M.add(R),H=A),D=Ae(D,1),R=Ae(R,1)}return S=re(I,M.j(S)),new he(M,S)}for(M=T;I.l(S)>=0;){for(R=Math.max(1,Math.floor(I.m()/S.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),H=y(R),A=H.j(S);B(A)||A.l(I)>0;)R-=D,H=y(R),A=H.j(S);W(H)&&(H=k),M=M.add(H),I=re(I,A)}return new he(M,I)}s.B=function(I){return ke(this,I).h},s.and=function(I){const S=Math.max(this.g.length,I.g.length),R=[];for(let D=0;D<S;D++)R[D]=this.i(D)&I.i(D);return new d(R,this.h&I.h)},s.or=function(I){const S=Math.max(this.g.length,I.g.length),R=[];for(let D=0;D<S;D++)R[D]=this.i(D)|I.i(D);return new d(R,this.h|I.h)},s.xor=function(I){const S=Math.max(this.g.length,I.g.length),R=[];for(let D=0;D<S;D++)R[D]=this.i(D)^I.i(D);return new d(R,this.h^I.h)};function ze(I){const S=I.g.length+1,R=[];for(let D=0;D<S;D++)R[D]=I.i(D)<<1|I.i(D-1)>>>31;return new d(R,I.h)}function Ae(I,S){const R=S>>5;S%=32;const D=I.g.length-R,M=[];for(let H=0;H<D;H++)M[H]=S>0?I.i(H+R)>>>S|I.i(H+R+1)<<32-S:I.i(H+R);return new d(M,I.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,rx=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=w,Si=d}).apply(typeof M1<"u"?M1:typeof self<"u"?self:typeof window<"u"?window:{});var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ax,Uc,ix,sd,Up,ox,lx,cx;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uh=="object"&&Uh];for(var v=0;v<h.length;++v){var x=h[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var a=n(this);function l(h,v){if(v)e:{var x=a;h=h.split(".");for(var N=0;N<h.length-1;N++){var Q=h[N];if(!(Q in x))break e;x=x[Q]}h=h[h.length-1],N=x[h],v=v(N),v!=N&&v!=null&&e(x,h,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(v){var x=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&x.push([N,v[N]]);return x}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,x){return h.call.apply(h.bind,arguments)}function y(h,v,x){return y=g,y.apply(null,arguments)}function w(h,v){var x=Array.prototype.slice.call(arguments,1);return function(){var N=x.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function T(h,v){function x(){}x.prototype=v.prototype,h.Z=v.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(N,Q,ae){for(var Oe=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)Oe[Ot-2]=arguments[Ot];return v.prototype[Q].apply(N,Oe)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function P(h){const v=h.length;if(v>0){const x=Array(v);for(let N=0;N<v;N++)x[N]=h[N];return x}return[]}function W(h,v){for(let N=1;N<arguments.length;N++){const Q=arguments[N];var x=typeof Q;if(x=x!="object"?x:Q?Array.isArray(Q)?"array":x:"null",x=="array"||x=="object"&&typeof Q.length=="number"){x=h.length||0;const ae=Q.length||0;h.length=x+ae;for(let Oe=0;Oe<ae;Oe++)h[x+Oe]=Q[Oe]}else h.push(Q)}}class B{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(h){d.setTimeout(()=>{throw h},0)}function re(){var h=I;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class X{constructor(){this.h=this.g=null}add(v,x){const N=he.get();N.set(v,x),this.h?this.h.next=N:this.g=N,this.h=N}}var he=new B(()=>new ke,h=>h.reset());class ke{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,Ae=!1,I=new X,S=()=>{const h=Promise.resolve(void 0);ze=()=>{h.then(R)}};function R(){for(var h;h=re();){try{h.h.call(h.g)}catch(x){L(x)}var v=he;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}Ae=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};d.addEventListener("test",x,v),d.removeEventListener("test",x,v)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function We(h,v){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}T(We,M),We.prototype.init=function(h,v){const x=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(x=="mouseover"?v=h.fromElement:x=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Nt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function Te(h,v,x,N,Q){this.listener=h,this.proxy=null,this.src=v,this.type=x,this.capture=!!N,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function De(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ct(h,v,x){for(const N in h)v.call(x,h[N],N,h)}function rt(h,v){for(const x in h)v.call(void 0,h[x],x,h)}function V(h){const v={};for(const x in h)v[x]=h[x];return v}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(h,v){let x,N;for(let Q=1;Q<arguments.length;Q++){N=arguments[Q];for(x in N)h[x]=N[x];for(let ae=0;ae<G.length;ae++)x=G[ae],Object.prototype.hasOwnProperty.call(N,x)&&(h[x]=N[x])}}function Se(h){this.src=h,this.g={},this.h=0}Se.prototype.add=function(h,v,x,N,Q){const ae=h.toString();h=this.g[ae],h||(h=this.g[ae]=[],this.h++);const Oe=Me(h,v,N,Q);return Oe>-1?(v=h[Oe],x||(v.fa=!1)):(v=new Te(v,this.src,ae,!!N,Q),v.fa=x,h.push(v)),v};function Ve(h,v){const x=v.type;if(x in h.g){var N=h.g[x],Q=Array.prototype.indexOf.call(N,v,void 0),ae;(ae=Q>=0)&&Array.prototype.splice.call(N,Q,1),ae&&(De(v),h.g[x].length==0&&(delete h.g[x],h.h--))}}function Me(h,v,x,N){for(let Q=0;Q<h.length;++Q){const ae=h[Q];if(!ae.da&&ae.listener==v&&ae.capture==!!x&&ae.ha==N)return Q}return-1}var nt="closure_lm_"+(Math.random()*1e6|0),ht={};function pt(h,v,x,N,Q){if(Array.isArray(v)){for(let ae=0;ae<v.length;ae++)pt(h,v[ae],x,N,Q);return null}return x=Rt(x),h&&h[Nt]?h.J(v,x,p(N)?!!N.capture:!1,Q):Wt(h,v,x,!1,N,Q)}function Wt(h,v,x,N,Q,ae){if(!v)throw Error("Invalid event type");const Oe=p(Q)?!!Q.capture:!!Q;let Ot=zt(h);if(Ot||(h[nt]=Ot=new Se(h)),x=Ot.add(v,x,N,Oe,ae),x.proxy)return x;if(N=pn(),x.proxy=N,N.src=h,N.listener=x,h.addEventListener)H||(Q=Oe),Q===void 0&&(Q=!1),h.addEventListener(v.toString(),N,Q);else if(h.attachEvent)h.attachEvent(ne(v.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return x}function pn(){function h(x){return v.call(h.src,h.listener,x)}const v=gn;return h}function Ct(h,v,x,N,Q){if(Array.isArray(v))for(var ae=0;ae<v.length;ae++)Ct(h,v[ae],x,N,Q);else N=p(N)?!!N.capture:!!N,x=Rt(x),h&&h[Nt]?(h=h.i,ae=String(v).toString(),ae in h.g&&(v=h.g[ae],x=Me(v,x,N,Q),x>-1&&(De(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete h.g[ae],h.h--)))):h&&(h=zt(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Me(v,x,N,Q)),(x=h>-1?v[h]:null)&&wt(x))}function wt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Nt])Ve(v.i,h);else{var x=h.type,N=h.proxy;v.removeEventListener?v.removeEventListener(x,N,h.capture):v.detachEvent?v.detachEvent(ne(x),N):v.addListener&&v.removeListener&&v.removeListener(N),(x=zt(v))?(Ve(x,h),x.h==0&&(x.src=null,v[nt]=null)):De(h)}}}function ne(h){return h in ht?ht[h]:ht[h]="on"+h}function gn(h,v){if(h.da)h=!0;else{v=new We(v,this);const x=h.listener,N=h.ha||h.src;h.fa&&wt(h),h=x.call(N,v)}return h}function zt(h){return h=h[nt],h instanceof Se?h:null}var vt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rt(h){return typeof h=="function"?h:(h[vt]||(h[vt]=function(v){return h.handleEvent(v)}),h[vt])}function at(){D.call(this),this.i=new Se(this),this.M=this,this.G=null}T(at,D),at.prototype[Nt]=!0,at.prototype.removeEventListener=function(h,v,x,N){Ct(this,h,v,x,N)};function He(h,v){var x,N=h.G;if(N)for(x=[];N;N=N.G)x.push(N);if(h=h.M,N=v.type||v,typeof v=="string")v=new M(v,h);else if(v instanceof M)v.target=v.target||h;else{var Q=v;v=new M(N,h),ge(v,Q)}Q=!0;let ae,Oe;if(x)for(Oe=x.length-1;Oe>=0;Oe--)ae=v.g=x[Oe],Q=Gt(ae,N,!0,v)&&Q;if(ae=v.g=h,Q=Gt(ae,N,!0,v)&&Q,Q=Gt(ae,N,!1,v)&&Q,x)for(Oe=0;Oe<x.length;Oe++)ae=v.g=x[Oe],Q=Gt(ae,N,!1,v)&&Q}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const x=h.g[v];for(let N=0;N<x.length;N++)De(x[N]);delete h.g[v],h.h--}}this.G=null},at.prototype.J=function(h,v,x,N){return this.i.add(String(h),v,!1,x,N)},at.prototype.K=function(h,v,x,N){return this.i.add(String(h),v,!0,x,N)};function Gt(h,v,x,N){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let Q=!0;for(let ae=0;ae<v.length;++ae){const Oe=v[ae];if(Oe&&!Oe.da&&Oe.capture==x){const Ot=Oe.listener,Qn=Oe.ha||Oe.src;Oe.fa&&Ve(h.i,Oe),Q=Ot.call(Qn,N)!==!1&&Q}}return Q&&!N.defaultPrevented}function ns(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function At(h){h.g=ns(()=>{h.g=null,h.i&&(h.i=!1,At(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Bt extends D{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(h){D.call(this),this.h=h,this.g={}}T(Dn,D);var Ht=[];function wn(h){ct(h.g,function(v,x){this.g.hasOwnProperty(x)&&wt(v)},h),h.g={}}Dn.prototype.N=function(){Dn.Z.N.call(this),wn(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=d.JSON.stringify,ve=d.JSON.parse,je=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Qe(){}function qe(){}var Pe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ge(){M.call(this,"d")}T(Ge,M);function Ue(){M.call(this,"c")}T(Ue,M);var Ie={},we=null;function Ke(){return we=we||new at}Ie.Ia="serverreachability";function st(h){M.call(this,Ie.Ia,h)}T(st,M);function xt(h){const v=Ke();He(v,new st(v))}Ie.STAT_EVENT="statevent";function qt(h,v){M.call(this,Ie.STAT_EVENT,h),this.stat=v}T(qt,M);function Fe(h){const v=Ke();He(v,new qt(v,h))}Ie.Ja="timingevent";function _t(h,v){M.call(this,Ie.Ja,h),this.size=v}T(_t,M);function St(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Dt(){this.g=!0}Dt.prototype.ua=function(){this.g=!1};function Ft(h,v,x,N,Q,ae){h.info(function(){if(h.g)if(ae){var Oe="",Ot=ae.split("&");for(let yn=0;yn<Ot.length;yn++){var Qn=Ot[yn].split("=");if(Qn.length>1){const Pn=Qn[0];Qn=Qn[1];const ir=Pn.split("_");Oe=ir.length>=2&&ir[1]=="type"?Oe+(Pn+"="+Qn+"&"):Oe+(Pn+"=redacted&")}}}else Oe=null;else Oe=ae;return"XMLHTTP REQ ("+N+") [attempt "+Q+"]: "+v+`
`+x+`
`+Oe})}function bt(h,v,x,N,Q,ae,Oe){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+Q+"]: "+v+`
`+x+`
`+ae+" "+Oe})}function nn(h,v,x,N){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+sn(h,x)+(N?" "+N:"")})}function $t(h,v){h.info(function(){return"TIMEOUT: "+v})}Dt.prototype.info=function(){};function sn(h,v){if(!h.g)return v;if(!v)return null;try{const ae=JSON.parse(v);if(ae){for(h=0;h<ae.length;h++)if(Array.isArray(ae[h])){var x=ae[h];if(!(x.length<2)){var N=x[1];if(Array.isArray(N)&&!(N.length<1)){var Q=N[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let Oe=1;Oe<N.length;Oe++)N[Oe]=""}}}}return de(ae)}catch{return v}}var ln={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},un={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jn;function z(){}T(z,Qe),z.prototype.g=function(){return new XMLHttpRequest},jn=new z;function ue(h){return encodeURIComponent(String(h))}function fe(h){var v=1;h=h.split(":");const x=[];for(;v>0&&h.length;)x.push(h.shift()),v--;return h.length&&x.push(h.join(":")),x}function pe(h,v,x,N){this.j=h,this.i=v,this.l=x,this.S=N||1,this.V=new Dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var Be={},ut={};function Ye(h,v,x){h.M=1,h.A=Qt(Ee(v)),h.u=x,h.R=!0,ot(h,null)}function ot(h,v){h.F=Date.now(),Bn(h),h.B=Ee(h.A);var x=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),ks(x.i,"t",N),h.C=0,x=h.j.L,h.h=new ce,h.g=Au(h.j,x?v:null,!h.u),h.P>0&&(h.O=new Bt(y(h.Y,h,h.g),h.P)),v=h.V,x=h.g,N=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Ht[0]=Q.toString()),Q=Ht);for(let ae=0;ae<Q.length;ae++){const Oe=pt(x,Q[ae],N||v.handleEvent,!1,v.h||v);if(!Oe)break;v.g[Oe.key]=Oe}v=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),xt(),Ft(h.i,h.v,h.B,h.l,h.S,h.u)}pe.prototype.ba=function(h){h=h.target;const v=this.O;v&&Er(h)==3?v.j():this.Y(h)},pe.prototype.Y=function(h){try{if(h==this.g)e:{const Ot=Er(this.g),Qn=this.g.ya(),yn=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||ps(this.g)))){this.K||Ot!=4||Qn==7||(Qn==8||yn<=0?xt(3):xt(2)),hn(this);var v=this.g.ca();this.X=v;var x=dt(this);if(this.o=v==200,bt(this.i,this.v,this.B,this.l,this.S,Ot,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,Q=this.g;if((N=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(N)){var ae=N;break t}}ae=null}if(h=ae)nn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,E(this,h);else{this.o=!1,this.m=3,Fe(12),ie(this),U(this);break e}}if(this.R){h=!0;let Pn;for(;!this.K&&this.C<x.length;)if(Pn=Es(this,x),Pn==ut){Ot==4&&(this.m=4,Fe(14),h=!1),nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==Be){this.m=4,Fe(15),nn(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else nn(this.i,this.l,Pn,null),E(this,Pn);if(rn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||x.length!=0||this.h.h||(this.m=1,Fe(16),h=!1),this.o=this.o&&h,!h)nn(this.i,this.l,x,"[Invalid Chunked Response]"),ie(this),U(this);else if(x.length>0&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.aa&&!Oe.P&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Kl(Oe),Oe.P=!0,Fe(11))}}else nn(this.i,this.l,x,null),E(this,x);Ot==4&&ie(this),this.o&&!this.K&&(Ot==4?ju(this.j,this):(this.o=!1,Bn(this)))}else ua(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,Fe(12)):(this.m=0,Fe(13)),ie(this),U(this)}}}catch{}};function dt(h){if(!rn(h))return h.g.la();const v=ps(h.g);if(v==="")return"";let x="";const N=v.length,Q=Er(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ie(h),U(h),"";h.h.i=new d.TextDecoder}for(let ae=0;ae<N;ae++)h.h.h=!0,x+=h.h.i.decode(v[ae],{stream:!(Q&&ae==N-1)});return v.length=0,h.h.g+=x,h.C=0,h.h.g}function rn(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Es(h,v){var x=h.C,N=v.indexOf(`
`,x);return N==-1?ut:(x=Number(v.substring(x,N)),isNaN(x)?Be:(N+=1,N+x>v.length?ut:(v=v.slice(N,N+x),h.C=N+x,v)))}pe.prototype.cancel=function(){this.K=!0,ie(this)};function Bn(h){h.T=Date.now()+h.H,Hn(h,h.H)}function Hn(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=St(y(h.aa,h),v)}function hn(h){h.D&&(d.clearTimeout(h.D),h.D=null)}pe.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?($t(this.i,this.B),this.M!=2&&(xt(),Fe(17)),ie(this),this.m=2,U(this)):Hn(this,this.T-h)};function U(h){h.j.I==0||h.K||ju(h.j,h)}function ie(h){hn(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,wn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function E(h,v){try{var x=h.j;if(x.I!=0&&(x.g==h||Re(x.h,h))){if(!h.L&&Re(x.h,h)&&x.I==3){try{var N=x.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var Q=N;if(Q[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)Mo(x),$a(x);else break e;Wi(x),Fe(18)}}else x.xa=Q[1],0<x.xa-x.K&&Q[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=St(y(x.Va,x),6e3));Le(x.h)<=1&&x.ta&&(x.ta=void 0)}else qr(x,11)}else if((h.L||x.g==h)&&Mo(x),!A(v))for(Q=x.Ba.g.parse(v),v=0;v<Q.length;v++){let yn=Q[v];const Pn=yn[0];if(!(Pn<=x.K))if(x.K=Pn,yn=yn[1],x.I==2)if(yn[0]=="c"){x.M=yn[1],x.ba=yn[2];const ir=yn[3];ir!=null&&(x.ka=ir,x.j.info("VER="+x.ka));const $r=yn[4];$r!=null&&(x.za=$r,x.j.info("SVER="+x.za));const kr=yn[5];kr!=null&&typeof kr=="number"&&kr>0&&(N=1.5*kr,x.O=N,x.j.info("backChannelRequestTimeoutMs_="+N)),N=x;const Sr=h.g;if(Sr){const Gi=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gi){var ae=N.h;ae.g||Gi.indexOf("spdy")==-1&&Gi.indexOf("quic")==-1&&Gi.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Ce(ae,ae.h),ae.h=null))}if(N.G){const Po=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(N.wa=Po,Ze(N.J,N.G,Po))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),N=x;var Oe=h;if(N.na=Ru(N,N.L?N.ba:null,N.W),Oe.L){Lt(N.h,Oe);var Ot=Oe,Qn=N.O;Qn&&(Ot.H=Qn),Ot.D&&(hn(Ot),Bn(Ot)),N.g=Oe}else ku(N);x.i.length>0&&Hr(x)}else yn[0]!="stop"&&yn[0]!="close"||qr(x,7);else x.I==3&&(yn[0]=="stop"||yn[0]=="close"?yn[0]=="stop"?qr(x,7):Wl(x):yn[0]!="noop"&&x.l&&x.l.qa(yn),x.A=0)}}xt(4)}catch{}}var C=class{constructor(h,v){this.g=h,this.map=v}};function $(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function J(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Le(h){return h.h?1:h.g?h.g.size:0}function Re(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ce(h,v){h.g?h.g.add(v):h.h=v}function Lt(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}$.prototype.cancel=function(){if(this.i=gt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gt(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const x of h.g.values())v=v.concat(x.G);return v}return P(h.i)}var q=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function le(h,v){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const N=h[x].indexOf("=");let Q,ae=null;N>=0?(Q=h[x].substring(0,N),ae=h[x].substring(N+1)):Q=h[x],v(Q,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function se(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof se?(this.l=h.l,Ne(this,h.j),this.o=h.o,this.g=h.g,Je(this,h.u),this.h=h.h,jt(this,Br(h.i)),this.m=h.m):h&&(v=String(h).match(q))?(this.l=!1,Ne(this,v[1]||"",!0),this.o=Mn(v[2]||""),this.g=Mn(v[3]||"",!0),Je(this,v[4]),this.h=Mn(v[5]||"",!0),jt(this,v[6]||"",!0),this.m=Mn(v[7]||"")):(this.l=!1,this.i=new Un(null,this.l))}se.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(dn(v,Ba,!0),":");var x=this.g;return(x||v=="file")&&(h.push("//"),(v=this.o)&&h.push(dn(v,Ba,!0),"@"),h.push(ue(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(dn(x,x.charAt(0)=="/"?Ua:Ui,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",dn(x,cn)),h.join("")},se.prototype.resolve=function(h){const v=Ee(this);let x=!!h.j;x?Ne(v,h.j):x=!!h.o,x?v.o=h.o:x=!!h.g,x?v.g=h.g:x=h.u!=null;var N=h.h;if(x)Je(v,h.u);else if(x=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var Q=v.h.lastIndexOf("/");Q!=-1&&(N=v.h.slice(0,Q+1)+N)}if(Q=N,Q==".."||Q==".")N="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){N=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ae=[];for(let Oe=0;Oe<Q.length;){const Ot=Q[Oe++];Ot=="."?N&&Oe==Q.length&&ae.push(""):Ot==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),N&&Oe==Q.length&&ae.push("")):(ae.push(Ot),N=!0)}N=ae.join("/")}else N=Q}return x?v.h=N:x=h.i.toString()!=="",x?jt(v,Br(h.i)):x=!!h.m,x&&(v.m=h.m),v};function Ee(h){return new se(h)}function Ne(h,v,x){h.j=x?Mn(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Je(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function jt(h,v,x){v instanceof Un?(h.i=v,za(h.i,h.l)):(x||(v=dn(v,br)),h.i=new Un(v,h.l))}function Ze(h,v,x){h.i.set(v,x)}function Qt(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Mn(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function dn(h,v,x){return typeof h=="string"?(h=encodeURI(h).replace(v,Rn),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Rn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ba=/[#\/\?@]/g,Ui=/[#\?:]/g,Ua=/[#\?]/g,br=/[#\?@]/g,cn=/#/g;function Un(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function zn(h){h.g||(h.g=new Map,h.h=0,h.i&&le(h.i,function(v,x){h.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}s=Un.prototype,s.add=function(h,v){zn(this),this.i=null,h=_r(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(v),this.h+=1,this};function wr(h,v){zn(h),v=_r(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function xr(h,v){return zn(h),v=_r(h,v),h.g.has(v)}s.forEach=function(h,v){zn(this),this.g.forEach(function(x,N){x.forEach(function(Q){h.call(v,Q,N,this)},this)},this)};function ms(h,v){zn(h);let x=[];if(typeof v=="string")xr(h,v)&&(x=x.concat(h.g.get(_r(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)x=x.concat(h[v]);return x}s.set=function(h,v){return zn(this),this.i=null,h=_r(this,h),xr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=ms(this,h),h.length>0?String(h[0]):v):v};function ks(h,v,x){wr(h,v),x.length>0&&(h.i=null,h.g.set(_r(h,v),P(x)),h.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var x=v[N];const Q=ue(x);x=ms(this,x);for(let ae=0;ae<x.length;ae++){let Oe=Q;x[ae]!==""&&(Oe+="="+ue(x[ae])),h.push(Oe)}}return this.i=h.join("&")};function Br(h){const v=new Un;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function _r(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function za(h,v){v&&!h.j&&(zn(h),h.i=null,h.g.forEach(function(x,N){const Q=N.toLowerCase();N!=Q&&(wr(this,N),ks(this,Q,x))},h)),h.j=v}function Is(h,v){const x=new Dt;if(d.Image){const N=new Image;N.onload=w(rr,x,"TestLoadImage: loaded",!0,v,N),N.onerror=w(rr,x,"TestLoadImage: error",!1,v,N),N.onabort=w(rr,x,"TestLoadImage: abort",!1,v,N),N.ontimeout=w(rr,x,"TestLoadImage: timeout",!1,v,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else v(!1)}function Hl(h,v){const x=new Dt,N=new AbortController,Q=setTimeout(()=>{N.abort(),rr(x,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:N.signal}).then(ae=>{clearTimeout(Q),ae.ok?rr(x,"TestPingServer: ok",!0,v):rr(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Q),rr(x,"TestPingServer: error",!1,v)})}function rr(h,v,x,N,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),N(x)}catch{}}function Fa(){this.g=new je}function Ur(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Ur,Qe),Ur.prototype.g=function(){return new zi(this.i,this.h)};function zi(h,v){at.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(zi,at),s=zi.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Tr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ha(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ao(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ao(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Ha(this):Tr(this),this.readyState==3&&Ao(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Ha(this))},s.Na=function(h){this.g&&(this.response=h,Ha(this))},s.ga=function(){this.g&&Ha(this)};function Ha(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Tr(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=v.next();return h.join(`\r
`)};function Tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ar(h){let v="";return ct(h,function(x,N){v+=N,v+=":",v+=x,v+=`\r
`}),v}function Fi(h,v,x){e:{for(N in x){var N=!1;break e}N=!0}N||(x=ar(x),typeof h=="string"?x!=null&&ue(x):Ze(h,v,x))}function Tn(h){at.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Tn,at);var zr=/^https?$/i,ql=["POST","PUT"];s=Tn.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,x,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jn.g(),this.g.onreadystatechange=k(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ae){Hi(this,ae);return}if(h=x||"",x=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var Q in N)x.set(Q,N[Q]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ae of N.keys())x.set(ae,N.get(ae));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(x.keys()).find(ae=>ae.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(ql,v,void 0)>=0)||N||Q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Oe]of x)this.g.setRequestHeader(ae,Oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ae){Hi(this,ae)}};function Hi(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,$l(h),ca(h)}function $l(h){h.A||(h.A=!0,He(h,"complete"),He(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,He(this,"complete"),He(this,"abort"),ca(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ca(this,!0)),Tn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?qi(this):this.Xa())},s.Xa=function(){qi(this)};function qi(h){if(h.h&&typeof u<"u"){if(h.v&&Er(h)==4)setTimeout(h.Ca.bind(h),0);else if(He(h,"readystatechange"),Er(h)==4){h.h=!1;try{const ae=h.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var N;if(N=ae===0){let Oe=String(h.D).match(q)[1]||null;!Oe&&d.self&&d.self.location&&(Oe=d.self.location.protocol.slice(0,-1)),N=!zr.test(Oe?Oe.toLowerCase():"")}x=N}if(x)He(h,"complete"),He(h,"success");else{h.o=6;try{var Q=Er(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",$l(h)}}finally{ca(h)}}}}function ca(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,v||He(h,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Er(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Er(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),ve(v)}};function ps(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ua(h){const v={};h=(h.g&&Er(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(A(h[N]))continue;var x=fe(h[N]);const Q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ae=v[Q]||[];v[Q]=ae,ae.push(x)}rt(v,function(N){return N.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fr(h,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||v}function qa(h){this.za=0,this.i=[],this.j=new Dt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fr("baseRetryDelayMs",5e3,h),this.Za=Fr("retryDelaySeedMs",1e4,h),this.Ta=Fr("forwardChannelMaxRetries",2,h),this.va=Fr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new $(h&&h.concurrentRequestLimit),this.Ba=new Fa,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=qa.prototype,s.ka=8,s.I=1,s.connect=function(h,v,x,N){Fe(0),this.W=h,this.H=v||{},x&&N!==void 0&&(this.H.OSID=x,this.H.OAID=N),this.F=this.X,this.J=Ru(this,null,this.W),Hr(this)};function Wl(h){if(Io(h),h.I==3){var v=h.V++,x=Ee(h.J);if(Ze(x,"SID",h.M),Ze(x,"RID",v),Ze(x,"TYPE","terminate"),$i(h,x),v=new pe(h,h.j,v),v.M=2,v.A=Qt(Ee(x)),x=!1,d.navigator&&d.navigator.sendBeacon)try{x=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&d.Image&&(new Image().src=v.A,x=!0),x||(v.g=Au(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Bn(v)}Cu(h)}function $a(h){h.g&&(Kl(h),h.g.cancel(),h.g=null)}function Io(h){$a(h),h.v&&(d.clearTimeout(h.v),h.v=null),Mo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Hr(h){if(!J(h.h)&&!h.m){h.m=!0;var v=h.Ea;ze||S(),Ae||(ze(),Ae=!0),I.add(v,h),h.D=0}}function Do(h,v){return Le(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=St(y(h.Ea,h,v),Nu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new pe(this,this.j,h);let ae=this.o;if(this.U&&(ae?(ae=V(ae),ge(ae,this.U)):ae=this.U),this.u!==null||this.R||(Q.J=ae,ae=null),this.S)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var N=this.i[x];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=Eu(this,Q,v),x=Ee(this.J),Ze(x,"RID",h),Ze(x,"CVER",22),this.G&&Ze(x,"X-HTTP-Session-Id",this.G),$i(this,x),ae&&(this.R?v="headers="+ue(ar(ae))+"&"+v:this.u&&Fi(x,this.u,ae)),Ce(this.h,Q),this.Ra&&Ze(x,"TYPE","init"),this.S?(Ze(x,"$req",v),Ze(x,"SID","null"),Q.U=!0,Ye(Q,x,null)):Ye(Q,x,v),this.I=2}}else this.I==3&&(h?Gl(this,h):this.i.length==0||J(this.h)||Gl(this))};function Gl(h,v){var x;v?x=v.l:x=h.V++;const N=Ee(h.J);Ze(N,"SID",h.M),Ze(N,"RID",x),Ze(N,"AID",h.K),$i(h,N),h.u&&h.o&&Fi(N,h.u,h.o),x=new pe(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Eu(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ce(h.h,x),Ye(x,N,v)}function $i(h,v){h.H&&ct(h.H,function(x,N){Ze(v,N,x)}),h.l&&ct({},function(x,N){Ze(v,N,x)})}function Eu(h,v,x){x=Math.min(h.i.length,x);const N=h.l?y(h.l.Ka,h.l,h):null;e:{var Q=h.i;let Ot=-1;for(;;){const Qn=["count="+x];Ot==-1?x>0?(Ot=Q[0].g,Qn.push("ofs="+Ot)):Ot=0:Qn.push("ofs="+Ot);let yn=!0;for(let Pn=0;Pn<x;Pn++){var ae=Q[Pn].g;const ir=Q[Pn].map;if(ae-=Ot,ae<0)Ot=Math.max(0,Q[Pn].g-100),yn=!1;else try{ae="req"+ae+"_"||"";try{var Oe=ir instanceof Map?ir:Object.entries(ir);for(const[$r,kr]of Oe){let Sr=kr;p(kr)&&(Sr=de(kr)),Qn.push(ae+$r+"="+encodeURIComponent(Sr))}}catch($r){throw Qn.push(ae+"type="+encodeURIComponent("_badmap")),$r}}catch{N&&N(ir)}}if(yn){Oe=Qn.join("&");break e}}Oe=void 0}return h=h.i.splice(0,x),v.G=h,Oe}function ku(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;ze||S(),Ae||(ze(),Ae=!0),I.add(v,h),h.A=0}}function Wi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=St(y(h.Da,h),Nu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=St(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Fe(10),$a(this),Su(this))};function Kl(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Su(h){h.g=new pe(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Ee(h.na);Ze(v,"RID","rpc"),Ze(v,"SID",h.M),Ze(v,"AID",h.K),Ze(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(v,"TO",h.ia),Ze(v,"TYPE","xmlhttp"),$i(h,v),h.u&&h.o&&Fi(v,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=Qt(Ee(v)),x.u=null,x.R=!0,ot(x,h)}s.Va=function(){this.C!=null&&(this.C=null,$a(this),Wi(this),Fe(19))};function Mo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ju(h,v){var x=null;if(h.g==v){Mo(h),Kl(h),h.g=null;var N=2}else if(Re(h.h,v))x=v.G,Lt(h.h,v),N=1;else return;if(h.I!=0){if(v.o)if(N==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var Q=h.D;N=Ke(),He(N,new _t(N,x)),Hr(h)}else ku(h);else if(Q=v.m,Q==3||Q==0&&v.X>0||!(N==1&&Do(h,v)||N==2&&Wi(h)))switch(x&&x.length>0&&(v=h.h,v.i=v.i.concat(x)),Q){case 1:qr(h,5);break;case 4:qr(h,10);break;case 3:qr(h,6);break;default:qr(h,2)}}}function Nu(h,v){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*v}function qr(h,v){if(h.j.info("Error code "+v),v==2){var x=y(h.bb,h),N=h.Ua;const Q=!N;N=new se(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ne(N,"https"),Qt(N),Q?Is(N.toString(),x):Hl(N.toString(),x)}else Fe(2);h.I=0,h.l&&h.l.pa(v),Cu(h),Io(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))};function Cu(h){if(h.I=0,h.ja=[],h.l){const v=gt(h.h);(v.length!=0||h.i.length!=0)&&(W(h.ja,v),W(h.ja,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.oa()}}function Ru(h,v,x){var N=x instanceof se?Ee(x):new se(x);if(N.g!="")v&&(N.g=v+"."+N.g),Je(N,N.u);else{var Q=d.location;N=Q.protocol,v=v?v+"."+Q.hostname:Q.hostname,Q=+Q.port;const ae=new se(null);N&&Ne(ae,N),v&&(ae.g=v),Q&&Je(ae,Q),x&&(ae.h=x),N=ae}return x=h.G,v=h.wa,x&&v&&Ze(N,x,v),Ze(N,"VER",h.ka),$i(h,N),N}function Au(h,v,x){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new Tn(new Ur({ab:x})):new Tn(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Iu(){}s=Iu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Wa(){}Wa.prototype.g=function(h,v){return new Ds(h,v)};function Ds(h,v){at.call(this),this.g=new qa(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!A(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!A(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ha(this)}T(Ds,at),Ds.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ds.prototype.close=function(){Wl(this.g)},Ds.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=de(h),h=x);v.i.push(new C(v.Ya++,h)),v.I==3&&Hr(v)},Ds.prototype.N=function(){this.g.l=null,delete this.j,Wl(this.g),delete this.g,Ds.Z.N.call(this)};function Du(h){Ge.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const x in v){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}T(Du,Ge);function Mu(){Ue.call(this),this.status=1}T(Mu,Ue);function ha(h){this.g=h}T(ha,Iu),ha.prototype.ra=function(){He(this.g,"a")},ha.prototype.qa=function(h){He(this.g,new Du(h))},ha.prototype.pa=function(h){He(this.g,new Mu)},ha.prototype.oa=function(){He(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,Ds.prototype.send=Ds.prototype.o,Ds.prototype.open=Ds.prototype.m,Ds.prototype.close=Ds.prototype.close,cx=function(){return new Wa},lx=function(){return Ke()},ox=Ie,Up={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ln.NO_ERROR=0,ln.TIMEOUT=8,ln.HTTP_ERROR=6,sd=ln,un.COMPLETE="complete",ix=un,qe.EventType=Pe,Pe.OPEN="a",Pe.CLOSE="b",Pe.ERROR="c",Pe.MESSAGE="d",at.prototype.listen=at.prototype.J,Uc=qe,Tn.prototype.listenOnce=Tn.prototype.K,Tn.prototype.getLastError=Tn.prototype.Ha,Tn.prototype.getLastErrorCode=Tn.prototype.ya,Tn.prototype.getStatus=Tn.prototype.ca,Tn.prototype.getResponseJson=Tn.prototype.La,Tn.prototype.getResponseText=Tn.prototype.la,Tn.prototype.send=Tn.prototype.ea,Tn.prototype.setWithCredentials=Tn.prototype.Fa,ax=Tn}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});class Ns{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ns.UNAUTHENTICATED=new Ns(null),Ns.GOOGLE_CREDENTIALS=new Ns("google-credentials-uid"),Ns.FIRST_PARTY=new Ns("first-party-uid"),Ns.MOCK_USER=new Ns("mock-user");let Vl="12.8.0";function wR(s){Vl=s}const xo=new gg("@firebase/firestore");function pl(){return xo.logLevel}function Xe(s,...e){if(xo.logLevel<=Zt.DEBUG){const n=e.map(Cg);xo.debug(`Firestore (${Vl}): ${s}`,...n)}}function Pa(s,...e){if(xo.logLevel<=Zt.ERROR){const n=e.map(Cg);xo.error(`Firestore (${Vl}): ${s}`,...n)}}function Nl(s,...e){if(xo.logLevel<=Zt.WARN){const n=e.map(Cg);xo.warn(`Firestore (${Vl}): ${s}`,...n)}}function Cg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function kt(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,ux(s,a,n)}function ux(s,e,n){let a=`FIRESTORE (${Vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Pa(a),new Error(a)}function bn(s,e,n,a){let l="Unexpected state";typeof n=="string"?l=n:a=n,s||ux(e,l,a)}function Pt(s,e){return s}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends oa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Aa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class hx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ns.UNAUTHENTICATED)))}shutdown(){}}class _R{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class TR{constructor(e){this.t=e,this.currentUser=Ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bn(this.o===void 0,42304);let a=this.i;const l=g=>this.i!==a?(a=this.i,n(g)):Promise.resolve();let u=new Aa;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Aa,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Aa)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(bn(typeof a.accessToken=="string",31837,{l:a}),new hx(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bn(e===null||typeof e=="string",2055,{h:e}),new Ns(e)}}class ER{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=Ns.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class kR{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new ER(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ns.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class P1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bn(this.o===void 0,3512);const a=u=>{u.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Xe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const l=u=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new P1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(bn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new P1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function jR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}class Rg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=jR(40);for(let u=0;u<l.length;++u)a.length<20&&l[u]<n&&(a+=e.charAt(l[u]%62))}return a}}function en(s,e){return s<e?-1:s>e?1:0}function zp(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const l=s.charAt(a),u=e.charAt(a);if(l!==u)return hp(l)===hp(u)?en(l,u):hp(l)?1:-1}return en(s.length,e.length)}const NR=55296,CR=57343;function hp(s){const e=s.charCodeAt(0);return e>=NR&&e<=CR}function Cl(s,e,n){return s.length===e.length&&s.every(((a,l)=>n(a,e[l])))}const L1="__name__";class Xr{constructor(e,n,a){n===void 0?n=0:n>e.length&&kt(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&kt(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let l=0;l<a;l++){const u=Xr.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return en(e.length,n.length)}static compareSegments(e,n){const a=Xr.isNumericId(e),l=Xr.isNumericId(n);return a&&!l?-1:!a&&l?1:a&&l?Xr.extractNumericId(e).compare(Xr.extractNumericId(n)):zp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Si.fromString(e.substring(4,e.length-2))}}class Cn extends Xr{construct(e,n,a){return new Cn(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new $e(be.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((l=>l.length>0)))}return new Cn(n)}static emptyPath(){return new Cn([])}}const RR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xs extends Xr{construct(e,n,a){return new xs(e,n,a)}static isValidIdentifier(e){return RR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L1}static keyField(){return new xs([L1])}static fromServerFormat(e){const n=[];let a="",l=0;const u=()=>{if(a.length===0)throw new $e(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new $e(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new $e(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(a+=p,l++):(u(),l++)}if(u(),d)throw new $e(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xs(n)}static emptyPath(){return new xs([])}}class mt{constructor(e){this.path=e}static fromPath(e){return new mt(Cn.fromString(e))}static fromName(e){return new mt(Cn.fromString(e).popFirst(5))}static empty(){return new mt(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mt(new Cn(e.slice()))}}function dx(s,e,n){if(!n)throw new $e(be.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function AR(s,e,n,a){if(e===!0&&a===!0)throw new $e(be.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function O1(s){if(!mt.isDocumentKey(s))throw new $e(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function V1(s){if(mt.isDocumentKey(s))throw new $e(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function fx(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Od(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":kt(12329,{type:typeof s})}function Lr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new $e(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Od(s);throw new $e(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function cs(s,e){const n={typeString:s};return e&&(n.value=e),n}function yu(s,e){if(!fx(s))throw new $e(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const l=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const d=s[a];if(l&&typeof d!==l){n=`JSON field '${a}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new $e(be.INVALID_ARGUMENT,n);return!0}const B1=-62135596800,U1=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*U1);return new lt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $e(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $e(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<B1)throw new $e(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U1}_compareTo(e){return this.seconds===e.seconds?en(this.nanoseconds,e.nanoseconds):en(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yu(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:cs("string",lt._jsonSchemaVersion),seconds:cs("number"),nanoseconds:cs("number")};class It{static fromTimestamp(e){return new It(e)}static min(){return new It(new lt(0,0))}static max(){return new It(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nu=-1;function IR(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,l=It.fromTimestamp(a===1e9?new lt(n+1,0):new lt(n,a));return new Ci(l,mt.empty(),e)}function DR(s){return new Ci(s.readTime,s.key,nu)}class Ci{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Ci(It.min(),mt.empty(),nu)}static max(){return new Ci(It.max(),mt.empty(),nu)}}function MR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=mt.comparator(s.documentKey,e.documentKey),n!==0?n:en(s.largestBatchId,e.largestBatchId))}const PR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Bl(s){if(s.code!==be.FAILED_PRECONDITION||s.message!==PR)throw s;Xe("LocalStore","Unexpectedly lost primary lease")}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&kt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e(((a,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.reject(n)}static resolve(e){return new _e(((n,a)=>{n(e)}))}static reject(e){return new _e(((n,a)=>{a(e)}))}static waitFor(e){return new _e(((n,a)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&n()}),(g=>a(g)))})),d=!0,u===l&&n()}))}static or(e){let n=_e.resolve(!1);for(const a of e)n=n.next((l=>l?_e.resolve(l):a()));return n}static forEach(e,n){const a=[];return e.forEach(((l,u)=>{a.push(n.call(this,l,u))})),this.waitFor(a)}static mapArray(e,n){return new _e(((a,l)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((w=>{d[y]=w,++p,p===u&&a(d)}),(w=>l(w)))}}))}static doWhile(e,n){return new _e(((a,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):a()};u()}))}}function OR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ul(s){return s.name==="IndexedDbTransactionError"}class Vd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vd.ce=-1;const Ag=-1;function Bd(s){return s==null}function bd(s){return s===0&&1/s==-1/0}function VR(s){return typeof s=="number"&&Number.isInteger(s)&&!bd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const mx="";function BR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=z1(e)),e=UR(s.get(n),e);return z1(e)}function UR(s,e){let n=e;const a=s.length;for(let l=0;l<a;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case mx:n+="";break;default:n+=u}}return n}function z1(s){return s+mx+""}function F1(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Oi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function px(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Fn{constructor(e,n){this.comparator=e,this.root=n||ws.EMPTY}insert(e,n){return new Fn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ws.BLACK,null,null))}remove(e){return new Fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ws.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(e,a.key);if(l===0)return n+a.left.size;l<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,n,a,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ws{constructor(e,n,a,l,u){this.key=e,this.value=n,this.color=a??ws.RED,this.left=l??ws.EMPTY,this.right=u??ws.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,l,u){return new ws(e??this.key,n??this.value,a??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let l=this;const u=a(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,a),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return ws.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return ws.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw kt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw kt(27949);return e+(this.isRed()?0:1)}}ws.EMPTY=null,ws.RED=!0,ws.BLACK=!1;ws.EMPTY=new class{constructor(){this.size=0}get key(){throw kt(57766)}get value(){throw kt(16141)}get color(){throw kt(16727)}get left(){throw kt(29726)}get right(){throw kt(36894)}copy(e,n,a,l,u){return this}insert(e,n,a){return new ws(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hs{constructor(e){this.comparator=e,this.data=new Fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new H1(this.data.getIterator())}getIteratorFrom(e){return new H1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof hs)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=a.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new hs(this.comparator);return n.data=e,n}}class H1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class nr{constructor(e){this.fields=e,e.sort(xs.comparator)}static empty(){return new nr([])}unionWith(e){let n=new hs(xs.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new nr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}class gx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ts{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new gx("Invalid base64 string: "+u):u}})(e);return new Ts(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new Ts(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let l=0;l<n.length;l++)a[l]=n.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return en(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ts.EMPTY_BYTE_STRING=new Ts("");const zR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(s){if(bn(!!s,39018),typeof s=="string"){let e=0;const n=zR.exec(s);if(bn(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:es(s.seconds),nanos:es(s.nanos)}}function es(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ai(s){return typeof s=="string"?Ts.fromBase64String(s):Ts.fromUint8Array(s)}const yx="server_timestamp",vx="__type__",bx="__previous_value__",wx="__local_write_time__";function Ig(s){return(s?.mapValue?.fields||{})[vx]?.stringValue===yx}function Ud(s){const e=s.mapValue.fields[bx];return Ig(e)?Ud(e):e}function su(s){const e=Ri(s.mapValue.fields[wx].timestampValue);return new lt(e.seconds,e.nanos)}class FR{constructor(e,n,a,l,u,d,p,g,y,w,T){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w,this.apiKey=T}}const wd="(default)";class ru{constructor(e,n){this.projectId=e,this.database=n||wd}static empty(){return new ru("","")}get isDefaultDatabase(){return this.database===wd}isEqual(e){return e instanceof ru&&e.projectId===this.projectId&&e.database===this.database}}function HR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new $e(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(s.options.projectId,e)}const xx="__type__",qR="__max__",Fh={mapValue:{}},_x="__vector__",xd="value";function Ii(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ig(s)?4:WR(s)?9007199254740991:$R(s)?10:11:kt(28295,{value:s})}function aa(s,e){if(s===e)return!0;const n=Ii(s);if(n!==Ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return su(s).isEqual(su(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=Ri(l.timestampValue),p=Ri(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Ai(l.bytesValue).isEqual(Ai(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return es(l.geoPointValue.latitude)===es(u.geoPointValue.latitude)&&es(l.geoPointValue.longitude)===es(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return es(l.integerValue)===es(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=es(l.doubleValue),p=es(u.doubleValue);return d===p?bd(d)===bd(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return Cl(s.arrayValue.values||[],e.arrayValue.values||[],aa);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(F1(d)!==F1(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!aa(d[g],p[g])))return!1;return!0})(s,e);default:return kt(52216,{left:s})}}function au(s,e){return(s.values||[]).find((n=>aa(n,e)))!==void 0}function Rl(s,e){if(s===e)return 0;const n=Ii(s),a=Ii(e);if(n!==a)return en(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return en(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=es(u.integerValue||u.doubleValue),g=es(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return q1(s.timestampValue,e.timestampValue);case 4:return q1(su(s),su(e));case 5:return zp(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Ai(u),g=Ai(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=en(p[y],g[y]);if(w!==0)return w}return en(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=en(es(u.latitude),es(d.latitude));return p!==0?p:en(es(u.longitude),es(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return $1(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[xd]?.arrayValue,w=g[xd]?.arrayValue,T=en(y?.values?.length||0,w?.values?.length||0);return T!==0?T:$1(y,w)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Fh.mapValue&&d===Fh.mapValue)return 0;if(u===Fh.mapValue)return 1;if(d===Fh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const k=zp(g[T],w[T]);if(k!==0)return k;const P=Rl(p[g[T]],y[w[T]]);if(P!==0)return P}return en(g.length,w.length)})(s.mapValue,e.mapValue);default:throw kt(23264,{he:n})}}function q1(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return en(s,e);const n=Ri(s),a=Ri(e),l=en(n.seconds,a.seconds);return l!==0?l:en(n.nanos,a.nanos)}function $1(s,e){const n=s.values||[],a=e.values||[];for(let l=0;l<n.length&&l<a.length;++l){const u=Rl(n[l],a[l]);if(u)return u}return en(n.length,a.length)}function Al(s){return Fp(s)}function Fp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=Ri(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Ai(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return mt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",l=!0;for(const u of n.values||[])l?l=!1:a+=",",a+=Fp(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const d of a)u?u=!1:l+=",",l+=`${d}:${Fp(n.fields[d])}`;return l+"}"})(s.mapValue):kt(61005,{value:s})}function rd(s){switch(Ii(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ud(s);return e?16+rd(e):16;case 5:return 2*s.stringValue.length;case 6:return Ai(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,u)=>l+rd(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let l=0;return Oi(a.fields,((u,d)=>{l+=u.length+rd(d)})),l})(s.mapValue);default:throw kt(13486,{value:s})}}function W1(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Hp(s){return!!s&&"integerValue"in s}function Dg(s){return!!s&&"arrayValue"in s}function G1(s){return!!s&&"nullValue"in s}function K1(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ad(s){return!!s&&"mapValue"in s}function $R(s){return(s?.mapValue?.fields||{})[xx]?.stringValue===_x}function Wc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Oi(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Wc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wc(s.arrayValue.values[n]);return e}return{...s}}function WR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===qR}class qs{constructor(e){this.value=e}static empty(){return new qs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!ad(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wc(n)}setAll(e){let n=xs.emptyPath(),a={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,a,l),a={},l=[],n=p.popLast()}d?a[p.lastSegment()]=Wc(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,l)}delete(e){const n=this.field(e.popLast());ad(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return aa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=n.mapValue.fields[e.get(a)];ad(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,a){Oi(n,((l,u)=>e[l]=u));for(const l of a)delete e[l]}clone(){return new qs(Wc(this.value))}}function Tx(s){const e=[];return Oi(s.fields,((n,a)=>{const l=new xs([n]);if(ad(a)){const u=Tx(a.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new nr(e)}class Rs{constructor(e,n,a,l,u,d,p){this.key=e,this.documentType=n,this.version=a,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Rs(e,0,It.min(),It.min(),It.min(),qs.empty(),0)}static newFoundDocument(e,n,a,l){return new Rs(e,1,n,It.min(),a,l,0)}static newNoDocument(e,n){return new Rs(e,2,n,It.min(),It.min(),qs.empty(),0)}static newUnknownDocument(e,n){return new Rs(e,3,n,It.min(),It.min(),qs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _d{constructor(e,n){this.position=e,this.inclusive=n}}function Y1(s,e,n){let a=0;for(let l=0;l<s.position.length;l++){const u=e[l],d=s.position[l];if(u.field.isKeyField()?a=mt.comparator(mt.fromName(d.referenceValue),n.key):a=Rl(d,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Q1(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!aa(s.position[n],e.position[n]))return!1;return!0}class iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function GR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Ex{}class ls extends Ex{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new YR(e,n,a):n==="array-contains"?new JR(e,a):n==="in"?new ZR(e,a):n==="not-in"?new eA(e,a):n==="array-contains-any"?new tA(e,a):new ls(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new QR(e,a):new XR(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Rl(n,this.value)):n!==null&&Ii(this.value)===Ii(n)&&this.matchesComparison(Rl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends Ex{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Or(e,n)}matches(e){return kx(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kx(s){return s.op==="and"}function Sx(s){return KR(s)&&kx(s)}function KR(s){for(const e of s.filters)if(e instanceof Or)return!1;return!0}function qp(s){if(s instanceof ls)return s.field.canonicalString()+s.op.toString()+Al(s.value);if(Sx(s))return s.filters.map((e=>qp(e))).join(",");{const e=s.filters.map((n=>qp(n))).join(",");return`${s.op}(${e})`}}function jx(s,e){return s instanceof ls?(function(a,l){return l instanceof ls&&a.op===l.op&&a.field.isEqual(l.field)&&aa(a.value,l.value)})(s,e):s instanceof Or?(function(a,l){return l instanceof Or&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((u,d,p)=>u&&jx(d,l.filters[p])),!0):!1})(s,e):void kt(19439)}function Nx(s){return s instanceof ls?(function(n){return`${n.field.canonicalString()} ${n.op} ${Al(n.value)}`})(s):s instanceof Or?(function(n){return n.op.toString()+" {"+n.getFilters().map(Nx).join(" ,")+"}"})(s):"Filter"}class YR extends ls{constructor(e,n,a){super(e,n,a),this.key=mt.fromName(a.referenceValue)}matches(e){const n=mt.comparator(e.key,this.key);return this.matchesComparison(n)}}class QR extends ls{constructor(e,n){super(e,"in",n),this.keys=Cx("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class XR extends ls{constructor(e,n){super(e,"not-in",n),this.keys=Cx("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Cx(s,e){return(e.arrayValue?.values||[]).map((n=>mt.fromName(n.referenceValue)))}class JR extends ls{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dg(n)&&au(n.arrayValue,this.value)}}class ZR extends ls{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class eA extends ls{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!au(this.value.arrayValue,n)}}class tA extends ls{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>au(this.value.arrayValue,a)))}}class nA{constructor(e,n=null,a=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function X1(s,e=null,n=[],a=[],l=null,u=null,d=null){return new nA(s,e,n,a,l,u,d)}function Mg(s){const e=Pt(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>qp(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>Al(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>Al(a))).join(",")),e.Te=n}return e.Te}function Pg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!GR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!jx(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Q1(s.startAt,e.startAt)&&Q1(s.endAt,e.endAt)}function $p(s){return mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class zl{constructor(e,n=null,a=[],l=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function sA(s,e,n,a,l,u,d,p){return new zl(s,e,n,a,l,u,d,p)}function Lg(s){return new zl(s)}function J1(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function rA(s){return mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Rx(s){return s.collectionGroup!==null}function Gc(s){const e=Pt(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new hs(xs.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new iu(u,a))})),n.has(xs.keyField().canonicalString())||e.Ie.push(new iu(xs.keyField(),a))}return e.Ie}function na(s){const e=Pt(s);return e.Ee||(e.Ee=aA(e,Gc(s))),e.Ee}function aA(s,e){if(s.limitType==="F")return X1(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new iu(l.field,u)}));const n=s.endAt?new _d(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new _d(s.startAt.position,s.startAt.inclusive):null;return X1(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function Wp(s,e){const n=s.filters.concat([e]);return new zl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function iA(s,e){const n=s.explicitOrderBy.concat([e]);return new zl(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Gp(s,e,n){return new zl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function zd(s,e){return Pg(na(s),na(e))&&s.limitType===e.limitType}function Ax(s){return`${Mg(na(s))}|lt:${s.limitType}`}function gl(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((l=>Nx(l))).join(", ")}]`),Bd(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((l=>Al(l))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((l=>Al(l))).join(",")),`Target(${a})`})(na(s))}; limitType=${s.limitType})`}function Fd(s,e){return e.isFoundDocument()&&(function(a,l){const u=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):mt.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,l){for(const u of Gc(a))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,l){for(const u of a.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(a,l){return!(a.startAt&&!(function(d,p,g){const y=Y1(d,p,g);return d.inclusive?y<=0:y<0})(a.startAt,Gc(a),l)||a.endAt&&!(function(d,p,g){const y=Y1(d,p,g);return d.inclusive?y>=0:y>0})(a.endAt,Gc(a),l))})(s,e)}function oA(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Ix(s){return(e,n)=>{let a=!1;for(const l of Gc(s)){const u=lA(l,e,n);if(u!==0)return u;a=a||l.field.isKeyField()}return 0}}function lA(s,e,n){const a=s.field.isKeyField()?mt.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Rl(g,y):kt(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return kt(19790,{direction:s.dir})}}class So{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[l,u]of a)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[n]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,((n,a)=>{for(const[l,u]of a)e(l,u)}))}isEmpty(){return px(this.inner)}size(){return this.innerSize}}const cA=new Fn(mt.comparator);function La(){return cA}const Dx=new Fn(mt.comparator);function zc(...s){let e=Dx;for(const n of s)e=e.insert(n.key,n);return e}function Mx(s){let e=Dx;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function fo(){return Kc()}function Px(){return Kc()}function Kc(){return new So((s=>s.toString()),((s,e)=>s.isEqual(e)))}const uA=new Fn(mt.comparator),hA=new hs(mt.comparator);function tn(...s){let e=hA;for(const n of s)e=e.add(n);return e}const dA=new hs(en);function fA(){return dA}function Og(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function Lx(s){return{integerValue:""+s}}function mA(s,e){return VR(e)?Lx(e):Og(s,e)}class Hd{constructor(){this._=void 0}}function pA(s,e,n){return s instanceof Td?(function(l,u){const d={fields:{[vx]:{stringValue:yx},[wx]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Ig(u)&&(u=Ud(u)),u&&(d.fields[bx]=u),{mapValue:d}})(n,e):s instanceof ou?Vx(s,e):s instanceof lu?Bx(s,e):(function(l,u){const d=Ox(l,u),p=Z1(d)+Z1(l.Ae);return Hp(d)&&Hp(l.Ae)?Lx(p):Og(l.serializer,p)})(s,e)}function gA(s,e,n){return s instanceof ou?Vx(s,e):s instanceof lu?Bx(s,e):n}function Ox(s,e){return s instanceof Ed?(function(a){return Hp(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class Td extends Hd{}class ou extends Hd{constructor(e){super(),this.elements=e}}function Vx(s,e){const n=Ux(e);for(const a of s.elements)n.some((l=>aa(l,a)))||n.push(a);return{arrayValue:{values:n}}}class lu extends Hd{constructor(e){super(),this.elements=e}}function Bx(s,e){let n=Ux(e);for(const a of s.elements)n=n.filter((l=>!aa(l,a)));return{arrayValue:{values:n}}}class Ed extends Hd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Z1(s){return es(s.integerValue||s.doubleValue)}function Ux(s){return Dg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function yA(s,e){return s.field.isEqual(e.field)&&(function(a,l){return a instanceof ou&&l instanceof ou||a instanceof lu&&l instanceof lu?Cl(a.elements,l.elements,aa):a instanceof Ed&&l instanceof Ed?aa(a.Ae,l.Ae):a instanceof Td&&l instanceof Td})(s.transform,e.transform)}class vA{constructor(e,n){this.version=e,this.transformResults=n}}class gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function id(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class qd{}function zx(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Vg(s.key,gr.none()):new vu(s.key,s.data,gr.none());{const n=s.data,a=qs.empty();let l=new hs(xs.comparator);for(let u of e.fields)if(!l.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?a.delete(u):a.set(u,d),l=l.add(u)}return new Vi(s.key,a,new nr(l.toArray()),gr.none())}}function bA(s,e,n){s instanceof vu?(function(l,u,d){const p=l.value.clone(),g=t2(l.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Vi?(function(l,u,d){if(!id(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=t2(l.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(Fx(l)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Yc(s,e,n,a){return s instanceof vu?(function(u,d,p,g){if(!id(u.precondition,d))return p;const y=u.value.clone(),w=n2(u.fieldTransforms,g,d);return y.setAll(w),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,a):s instanceof Vi?(function(u,d,p,g){if(!id(u.precondition,d))return p;const y=n2(u.fieldTransforms,g,d),w=d.data;return w.setAll(Fx(u)),w.setAll(y),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,e,n,a):(function(u,d,p){return id(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function wA(s,e){let n=null;for(const a of s.fieldTransforms){const l=e.data.field(a.field),u=Ox(a.transform,l||null);u!=null&&(n===null&&(n=qs.empty()),n.set(a.field,u))}return n||null}function e2(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&Cl(a,l,((u,d)=>yA(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class vu extends qd{constructor(e,n,a,l=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Vi extends qd{constructor(e,n,a,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Fx(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function t2(s,e,n){const a=new Map;bn(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],d=u.transform,p=e.data.field(u.field);a.set(u.field,gA(d,p,n[l]))}return a}function n2(s,e,n){const a=new Map;for(const l of s){const u=l.transform,d=n.data.field(l.field);a.set(l.field,pA(u,d,e))}return a}class Vg extends qd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xA extends qd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _A{constructor(e,n,a,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&bA(u,e,a[l])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Yc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Yc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=Px();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(l.key)?null:p;const g=zx(d,p);g!==null&&a.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(It.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),tn())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,((n,a)=>e2(n,a)))&&Cl(this.baseMutations,e.baseMutations,((n,a)=>e2(n,a)))}}class Bg{constructor(e,n,a,l){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=l}static from(e,n,a){bn(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let l=(function(){return uA})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,a[d].version);return new Bg(e,n,a,l)}}class TA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class EA{constructor(e,n){this.count=e,this.unchangedNames=n}}var os,on;function kA(s){switch(s){case be.OK:return kt(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return kt(15467,{code:s})}}function Hx(s){if(s===void 0)return Pa("GRPC error has no .code"),be.UNKNOWN;switch(s){case os.OK:return be.OK;case os.CANCELLED:return be.CANCELLED;case os.UNKNOWN:return be.UNKNOWN;case os.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case os.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case os.INTERNAL:return be.INTERNAL;case os.UNAVAILABLE:return be.UNAVAILABLE;case os.UNAUTHENTICATED:return be.UNAUTHENTICATED;case os.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case os.NOT_FOUND:return be.NOT_FOUND;case os.ALREADY_EXISTS:return be.ALREADY_EXISTS;case os.PERMISSION_DENIED:return be.PERMISSION_DENIED;case os.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case os.ABORTED:return be.ABORTED;case os.OUT_OF_RANGE:return be.OUT_OF_RANGE;case os.UNIMPLEMENTED:return be.UNIMPLEMENTED;case os.DATA_LOSS:return be.DATA_LOSS;default:return kt(39323,{code:s})}}(on=os||(os={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";function SA(){return new TextEncoder}const jA=new Si([4294967295,4294967295],0);function s2(s){const e=SA().encode(s),n=new rx;return n.update(e),new Uint8Array(n.digest())}function r2(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Si([n,a],0),new Si([l,u],0)]}class Ug{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Fc(`Invalid padding: ${n}`);if(a<0)throw new Fc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Fc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Fc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Si.fromNumber(this.ge)}ye(e,n,a){let l=e.add(n.multiply(Si.fromNumber(a)));return l.compare(jA)===1&&(l=new Si([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=s2(e),[a,l]=r2(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,l,u);if(!this.we(d))return!1}return!0}static create(e,n,a){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Ug(u,l,n);return a.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=s2(e),[a,l]=r2(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,l,u);this.be(d)}}be(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $d{constructor(e,n,a,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const l=new Map;return l.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new $d(It.min(),l,new Fn(en),La(),tn())}}class bu{constructor(e,n,a,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new bu(a,n,tn(),tn(),tn())}}class od{constructor(e,n,a,l){this.Se=e,this.removedTargetIds=n,this.key=a,this.De=l}}class qx{constructor(e,n){this.targetId=e,this.Ce=n}}class $x{constructor(e,n,a=Ts.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=l}}class a2{constructor(){this.ve=0,this.Fe=i2(),this.Me=Ts.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tn(),n=tn(),a=tn();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:a=a.add(l);break;default:kt(38017,{changeType:u})}})),new bu(this.Me,this.xe,e,n,a)}Ke(){this.Oe=!1,this.Fe=i2()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,bn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class NA{constructor(e){this.Ge=e,this.ze=new Map,this.je=La(),this.He=Hh(),this.Je=Hh(),this.Ze=new Fn(en)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:kt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,a=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if($p(u))if(a===0){const d=new mt(u.path);this.et(n,d,Rs.newNoDocument(d,It.min()))}else bn(a===1,20013,{expectedCount:a});else{const d=this._t(n);if(d!==a){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:u=0}=n;let d,p;try{d=Ai(a).toUint8Array()}catch(g){if(g instanceof gx)return Nl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Ug(d,l,u)}catch(g){return Nl(g instanceof Fc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let l=0;return a.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&$p(p.target)){const g=new mt(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Rs.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let a=tn();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(a=a.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new $d(e,n,this.Ze,this.je,a);return this.je=La(),this.He=Hh(),this.Je=Hh(),this.Ze=new Fn(en),l}Ye(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,a),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new a2,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new hs(en),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new hs(en),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Xe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new a2),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hh(){return new Fn(mt.comparator)}function i2(){return new Fn(mt.comparator)}const CA={asc:"ASCENDING",desc:"DESCENDING"},RA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AA={and:"AND",or:"OR"};class IA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kp(s,e){return s.useProto3Json||Bd(e)?e:{value:e}}function kd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wx(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function DA(s,e){return kd(s,e.toTimestamp())}function sa(s){return bn(!!s,49232),It.fromTimestamp((function(n){const a=Ri(n);return new lt(a.seconds,a.nanos)})(s))}function zg(s,e){return Yp(s,e).canonicalString()}function Yp(s,e){const n=(function(l){return new Cn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function Gx(s){const e=Cn.fromString(s);return bn(Jx(e),10190,{key:e.toString()}),e}function Qp(s,e){return zg(s.databaseId,e.path)}function dp(s,e){const n=Gx(e);if(n.get(1)!==s.databaseId.projectId)throw new $e(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new $e(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new mt(Yx(n))}function Kx(s,e){return zg(s.databaseId,e)}function MA(s){const e=Gx(s);return e.length===4?Cn.emptyPath():Yx(e)}function Xp(s){return new Cn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Yx(s){return bn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function o2(s,e,n){return{name:Qp(s,e),fields:n.value.mapValue.fields}}function PA(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:kt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,w){return y.useProto3Json?(bn(w===void 0||typeof w=="string",58123),Ts.fromBase64String(w||"")):(bn(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Ts.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const w=y.code===void 0?be.UNKNOWN:Hx(y.code);return new $e(w,y.message||"")})(d);n=new $x(a,l,u,p||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const l=dp(s,a.document.name),u=sa(a.document.updateTime),d=a.document.createTime?sa(a.document.createTime):It.min(),p=new qs({mapValue:{fields:a.document.fields}}),g=Rs.newFoundDocument(l,u,d,p),y=a.targetIds||[],w=a.removedTargetIds||[];n=new od(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const l=dp(s,a.document),u=a.readTime?sa(a.readTime):It.min(),d=Rs.newNoDocument(l,u),p=a.removedTargetIds||[];n=new od([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const l=dp(s,a.document),u=a.removedTargetIds||[];n=new od([],u,l,null)}else{if(!("filter"in e))return kt(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:l=0,unchangedNames:u}=a,d=new EA(l,u),p=a.targetId;n=new qx(p,d)}}return n}function LA(s,e){let n;if(e instanceof vu)n={update:o2(s,e.key,e.value)};else if(e instanceof Vg)n={delete:Qp(s,e.key)};else if(e instanceof Vi)n={update:o2(s,e.key,e.data),updateMask:$A(e.fieldMask)};else{if(!(e instanceof xA))return kt(16599,{dt:e.type});n={verify:Qp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,d){const p=d.transform;if(p instanceof Td)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ou)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof lu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Ed)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw kt(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:DA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:kt(27497)})(s,e.precondition)),n}function OA(s,e){return s&&s.length>0?(bn(e!==void 0,14353),s.map((n=>(function(l,u){let d=l.updateTime?sa(l.updateTime):sa(u);return d.isEqual(It.min())&&(d=sa(u)),new vA(d,l.transformResults||[])})(n,e)))):[]}function VA(s,e){return{documents:[Kx(s,e.path)]}}function BA(s,e){const n={structuredQuery:{}},a=e.path;let l;e.collectionGroup!==null?(l=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=Kx(s,l);const u=(function(y){if(y.length!==0)return Xx(Or.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((w=>(function(k){return{field:yl(k.field),direction:FA(k.dir)}})(w)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Kp(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function UA(s){let e=MA(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let l=null;if(a>0){bn(a===1,65062);const w=n.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let u=[];n.where&&(u=(function(T){const k=Qx(T);return k instanceof Or&&Sx(k)?k.getFilters():[k]})(n.where));let d=[];n.orderBy&&(d=(function(T){return T.map((k=>(function(W){return new iu(vl(W.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(k)))})(n.orderBy));let p=null;n.limit&&(p=(function(T){let k;return k=typeof T=="object"?T.value:T,Bd(k)?null:k})(n.limit));let g=null;n.startAt&&(g=(function(T){const k=!!T.before,P=T.values||[];return new _d(P,k)})(n.startAt));let y=null;return n.endAt&&(y=(function(T){const k=!T.before,P=T.values||[];return new _d(P,k)})(n.endAt)),sA(e,l,d,u,p,"F",g,y)}function zA(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Qx(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=vl(n.unaryFilter.field);return ls.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=vl(n.unaryFilter.field);return ls.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vl(n.unaryFilter.field);return ls.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=vl(n.unaryFilter.field);return ls.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return kt(61313);default:return kt(60726)}})(s):s.fieldFilter!==void 0?(function(n){return ls.create(vl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return kt(58110);default:return kt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Or.create(n.compositeFilter.filters.map((a=>Qx(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return kt(1026)}})(n.compositeFilter.op))})(s):kt(30097,{filter:s})}function FA(s){return CA[s]}function HA(s){return RA[s]}function qA(s){return AA[s]}function yl(s){return{fieldPath:s.canonicalString()}}function vl(s){return xs.fromServerFormat(s.fieldPath)}function Xx(s){return s instanceof ls?(function(n){if(n.op==="=="){if(K1(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NAN"}};if(G1(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(K1(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NOT_NAN"}};if(G1(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(n.field),op:HA(n.op),value:n.value}}})(s):s instanceof Or?(function(n){const a=n.getFilters().map((l=>Xx(l)));return a.length===1?a[0]:{compositeFilter:{op:qA(n.op),filters:a}}})(s):kt(54877,{filter:s})}function $A(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Jx(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function Zx(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Ti{constructor(e,n,a,l,u=It.min(),d=It.min(),p=Ts.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class WA{constructor(e){this.yt=e}}function GA(s){const e=UA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Gp(e,e.limit,"L"):e}class KA{constructor(){this.Sn=new YA}addToCollectionParentIndex(e,n){return this.Sn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(Ci.min())}updateCollectionGroup(e,n,a){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class YA{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),l=this.index[n]||new hs(Cn.comparator),u=!l.has(a);return this.index[n]=l.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),l=this.index[n];return l&&l.has(a)}getEntries(e){return(this.index[e]||new hs(Cn.comparator)).toArray()}}const l2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e_=41943040;class Hs{static withCacheSize(e){return new Hs(e,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}Hs.DEFAULT_COLLECTION_PERCENTILE=10,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hs.DEFAULT=new Hs(e_,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hs.DISABLED=new Hs(-1,0,0);class Il{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Il(0)}static ar(){return new Il(-1)}}const c2="LruGarbageCollector",QA=1048576;function u2([s,e],[n,a]){const l=en(s,n);return l===0?en(e,a):l}class XA{constructor(e){this.Pr=e,this.buffer=new hs(u2),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();u2(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JA{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Xe(c2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ul(n)?Xe(c2,"Ignoring IndexedDB error during garbage collection: ",n):await Bl(n)}await this.Ar(3e5)}))}}class ZA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(Vd.ce);const a=new XA(n);return this.Vr.forEachTarget(e,(l=>a.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>a.Er(l))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(l2)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l2):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let a,l,u,d,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),l=this.params.maximumSequenceNumbersToCollect):l=T,d=Date.now(),this.nthSequenceNumber(e,l)))).next((T=>(a=T,p=Date.now(),this.removeTargets(e,a,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,a)))).next((T=>(y=Date.now(),pl()<=Zt.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:T}))))}}function e4(s,e){return new ZA(s,e)}class t4{constructor(){this.changes=new So((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?_e.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class n4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class s4{constructor(e,n,a,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(a=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(a!==null&&Yc(a.mutation,l,nr.empty(),lt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,tn()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=tn()){const l=fo();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,a).next((u=>{let d=zc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const a=fo();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,tn())))}populateOverlays(e,n,a){const l=[];return a.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,a,l){let u=La();const d=Kc(),p=(function(){return Kc()})();return n.forEach(((g,y)=>{const w=a.get(y.key);l.has(y.key)&&(w===void 0||w.mutation instanceof Vi)?u=u.insert(y.key,y):w!==void 0?(d.set(y.key,w.mutation.getFieldMask()),Yc(w.mutation,y,w.mutation.getFieldMask(),lt.now())):d.set(y.key,nr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,w)=>d.set(y,w))),n.forEach(((y,w)=>p.set(y,new n4(w,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const a=Kc();let l=new Fn(((d,p)=>d-p)),u=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let w=a.get(g)||nr.empty();w=p.applyToLocalView(y,w),a.set(g,w);const T=(l.get(p.batchId)||tn()).add(g);l=l.insert(p.batchId,T)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,T=Px();w.forEach((k=>{if(!u.has(k)){const P=zx(n.get(k),a.get(k));P!==null&&T.set(k,P),u=u.add(k)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,T))}return _e.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,l){return rA(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Rx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,l):this.getDocumentsMatchingCollectionQuery(e,n,a,l)}getNextDocuments(e,n,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,l-u.size):_e.resolve(fo());let p=nu,g=u;return d.next((y=>_e.forEach(y,((w,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),u.get(w)?_e.resolve():this.remoteDocumentCache.getEntry(e,w).next((k=>{g=g.insert(w,k)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,tn()))).next((w=>({batchId:p,changes:Mx(w)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new mt(n)).next((a=>{let l=zc();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,l){const u=n.collectionGroup;let d=zc();return this.indexManager.getCollectionParents(e,u).next((p=>_e.forEach(p,(g=>{const y=(function(T,k){return new zl(k,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,a,l).next((w=>{w.forEach(((T,k)=>{d=d.insert(T,k)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,a,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,l)))).next((d=>{u.forEach(((g,y)=>{const w=y.getKey();d.get(w)===null&&(d=d.insert(w,Rs.newInvalidDocument(w)))}));let p=zc();return d.forEach(((g,y)=>{const w=u.get(g);w!==void 0&&Yc(w.mutation,y,nr.empty(),lt.now()),Fd(n,y)&&(p=p.insert(g,y))})),p}))}}class r4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return _e.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:sa(l.createTime)}})(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:GA(l.bundledQuery),readTime:sa(l.readTime)}})(n)),_e.resolve()}}class a4{constructor(){this.overlays=new Fn(mt.comparator),this.Lr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const a=fo();return _e.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&a.set(l,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((l,u)=>{this.bt(e,n,u)})),_e.resolve()}removeOverlaysForBatchId(e,n,a){const l=this.Lr.get(a);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),_e.resolve()}getOverlaysForCollection(e,n,a){const l=fo(),u=n.length+1,d=new mt(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>a&&l.set(g.getKey(),g)}return _e.resolve(l)}getOverlaysForCollectionGroup(e,n,a,l){let u=new Fn(((y,w)=>y-w));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>a){let w=u.get(y.largestBatchId);w===null&&(w=fo(),u=u.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=fo(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>p.set(y,w))),!(p.size()>=l)););return _e.resolve(p)}bt(e,n,a){const l=this.overlays.get(a.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(a.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new TA(n,a));let u=this.Lr.get(n);u===void 0&&(u=tn(),this.Lr.set(n,u)),this.Lr.set(n,u.add(a.key))}}class i4{constructor(){this.sessionToken=Ts.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}class Fg{constructor(){this.kr=new hs(fs.Kr),this.qr=new hs(fs.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const a=new fs(e,n);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Wr(new fs(e,n))}Qr(e,n){e.forEach((a=>this.removeReference(a,n)))}Gr(e){const n=new mt(new Cn([])),a=new fs(n,e),l=new fs(n,e+1),u=[];return this.qr.forEachInRange([a,l],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new mt(new Cn([])),a=new fs(n,e),l=new fs(n,e+1);let u=tn();return this.qr.forEachInRange([a,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new fs(e,0),a=this.kr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class fs{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return mt.comparator(e.key,n.key)||en(e.Hr,n.Hr)}static Ur(e,n){return en(e.Hr,n.Hr)||mt.comparator(e.key,n.key)}}class o4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new hs(fs.Kr)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new _A(u,n,a,l);this.mutationQueue.push(d);for(const p of l)this.Jr=this.Jr.add(new fs(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return _e.resolve(d)}lookupMutationBatch(e,n){return _e.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,l=this.Xr(a),u=l<0?0:l;return _e.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?Ag:this.Yn-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new fs(n,0),l=new fs(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,l],(d=>{const p=this.Zr(d.Hr);u.push(p)})),_e.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new hs(en);return n.forEach((l=>{const u=new fs(l,0),d=new fs(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{a=a.add(p.Hr)}))})),_e.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,l=a.length+1;let u=a;mt.isDocumentKey(u)||(u=u.child(""));const d=new fs(new mt(u),0);let p=new hs(en);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!a.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),d),_e.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((a=>{const l=this.Zr(a);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){bn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return _e.forEach(n.mutations,(l=>{const u=new fs(l.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,n){const a=new fs(n,0),l=this.Jr.firstAfterOrEqual(a);return _e.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class l4{constructor(e){this.ti=e,this.docs=(function(){return new Fn(mt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,l=this.docs.get(a),u=l?l.size:0,d=this.ti(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return _e.resolve(a?a.document.mutableCopy():Rs.newInvalidDocument(n))}getEntries(e,n){let a=La();return n.forEach((l=>{const u=this.docs.get(l);a=a.insert(l,u?u.document.mutableCopy():Rs.newInvalidDocument(l))})),_e.resolve(a)}getDocumentsMatchingQuery(e,n,a,l){let u=La();const d=n.path,p=new mt(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||MR(DR(w),a)<=0||(l.has(w.key)||Fd(n,w))&&(u=u.insert(w.key,w.mutableCopy()))}return _e.resolve(u)}getAllFromCollectionGroup(e,n,a,l){kt(9500)}ni(e,n){return _e.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new c4(this)}getSize(e){return _e.resolve(this.size)}}class c4 extends t4{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(a)})),_e.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class u4{constructor(e){this.persistence=e,this.ri=new So((n=>Mg(n)),Pg),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.ii=0,this.si=new Fg,this.targetCount=0,this.oi=Il._r()}forEachTarget(e,n){return this.ri.forEach(((a,l)=>n(l))),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.ii&&(this.ii=n),_e.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Il(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.lr(n),_e.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,a){let l=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&a.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),_e.waitFor(u).next((()=>l))}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const a=this.ri.get(n)||null;return _e.resolve(a)}addMatchingKeys(e,n,a){return this.si.$r(n,a),_e.resolve()}removeMatchingKeys(e,n,a){this.si.Qr(n,a);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),_e.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const a=this.si.jr(n);return _e.resolve(a)}containsKey(e,n){return _e.resolve(this.si.containsKey(n))}}class t_{constructor(e,n){this._i={},this.overlays={},this.ai=new Vd(0),this.ui=!1,this.ui=!0,this.ci=new i4,this.referenceDelegate=e(this),this.li=new u4(this),this.indexManager=new KA,this.remoteDocumentCache=(function(l){return new l4(l)})((a=>this.referenceDelegate.hi(a))),this.serializer=new WA(n),this.Pi=new r4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new a4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this._i[e.toKey()];return a||(a=new o4(n,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,a){Xe("MemoryPersistence","Starting transaction:",e);const l=new h4(this.ai.next());return this.referenceDelegate.Ti(),a(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return _e.or(Object.values(this._i).map((a=>()=>a.containsKey(e,n))))}}class h4 extends LR{constructor(e){super(),this.currentSequenceNumber=e}}class Hg{constructor(e){this.persistence=e,this.Ri=new Fg,this.Ai=null}static Vi(e){return new Hg(e)}get di(){if(this.Ai)return this.Ai;throw kt(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.di.delete(a.toString()),_e.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.di.add(a.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.di,(a=>{const l=mt.fromPath(a);return this.mi(e,l).next((u=>{u||n.removeEntry(l,It.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((a=>{a?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return _e.or([()=>_e.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Sd{constructor(e,n){this.persistence=e,this.fi=new So((a=>BR(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=e4(this,n)}static Vi(e,n){return new Sd(e,n)}Ti(){}Ii(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((l=>a+l))))}pr(e){let n=0;return this.mr(e,(a=>{n++})).next((()=>n))}mr(e,n){return _e.forEach(this.fi,((a,l)=>this.wr(e,a,l).next((u=>u?_e.resolve():n(l)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(a++,u.removeEntry(d,It.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),_e.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rd(e.data.value)),n}wr(e,n,a){return _e.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return _e.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qg{constructor(e,n,a,l){this.targetId=e,this.fromCache=n,this.Ts=a,this.Is=l}static Es(e,n){let a=tn(),l=tn();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new qg(e,n.fromCache,a,l)}}class d4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class f4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return US()?8:OR(As())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,l){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,l,a).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new d4;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,a,l){return a.documentReadCount<this.Vs?(pl()<=Zt.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",gl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),_e.resolve()):(pl()<=Zt.DEBUG&&Xe("QueryEngine","Query:",gl(n),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.ds*l?(pl()<=Zt.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",gl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,na(n))):_e.resolve())}gs(e,n){if(J1(n))return _e.resolve(null);let a=na(n);return this.indexManager.getIndexType(e,a).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Gp(n,null,"F"),a=na(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const d=tn(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,a).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,d,g.readTime)?this.gs(e,Gp(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,a,l){return J1(n)||l.isEqual(It.min())?_e.resolve(null):this.fs.getDocuments(e,a).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,a,l)?_e.resolve(null):(pl()<=Zt.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),gl(n)),this.Ds(e,d,n,IR(l,nu)).next((p=>p)))}))}bs(e,n){let a=new hs(Ix(e));return n.forEach(((l,u)=>{Fd(e,u)&&(a=a.add(u))})),a}Ss(e,n,a,l){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,a){return pl()<=Zt.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",gl(n)),this.fs.getDocumentsMatchingQuery(e,n,Ci.min(),a)}Ds(e,n,a,l){return this.fs.getDocumentsMatchingQuery(e,a,l).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const $g="LocalStore",m4=3e8;class p4{constructor(e,n,a,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new Fn(en),this.Fs=new So((u=>Mg(u)),Pg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function g4(s,e,n,a){return new p4(s,e,n,a)}async function n_(s,e){const n=Pt(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return n.mutationQueue.getAllMutationBatches(a).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const d=[],p=[];let g=tn();for(const y of l){d.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of u){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(a,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function y4(s,e){const n=Pt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,w){const T=y.batch,k=T.keys();let P=_e.resolve();return k.forEach((W=>{P=P.next((()=>w.getEntry(g,W))).next((B=>{const L=y.docVersions.get(W);bn(L!==null,48541),B.version.compareTo(L)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),w.addEntry(B)))}))})),P.next((()=>p.mutationQueue.removeMutationBatch(g,T)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(p){let g=tn();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(a,l)))}))}function s_(s){const e=Pt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function v4(s,e){const n=Pt(s),a=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((w,T)=>{const k=l.get(T);if(!k)return;p.push(n.li.removeMatchingKeys(u,w.removedDocuments,T).next((()=>n.li.addMatchingKeys(u,w.addedDocuments,T))));let P=k.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?P=P.withResumeToken(Ts.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,a)),l=l.insert(T,P),(function(B,L,re){return B.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=m4?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(k,P,w)&&p.push(n.li.updateTargetData(u,P))}));let g=La(),y=tn();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,w))})),p.push(b4(u,d,e.documentUpdates).next((w=>{g=w.Bs,y=w.Ls}))),!a.isEqual(It.min())){const w=n.li.getLastRemoteSnapshotVersion(u).next((T=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));p.push(w)}return _e.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=l,u)))}function b4(s,e,n){let a=tn(),l=tn();return n.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let d=La();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(It.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):Xe($g,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:l}}))}function w4(s,e){const n=Pt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Ag),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function x4(s,e){const n=Pt(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return n.li.getTargetData(a,e).next((u=>u?(l=u,_e.resolve(l)):n.li.allocateTargetId(a).next((d=>(l=new Ti(e,d,"TargetPurposeListen",a.currentSequenceNumber),n.li.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=n.vs.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(a.targetId,a),n.Fs.set(e,a.targetId)),a}))}async function Jp(s,e,n){const a=Pt(s),l=a.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(d=>a.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Ul(d))throw d;Xe($g,`Failed to update sequence numbers for target ${e}: ${d}`)}a.vs=a.vs.remove(e),a.Fs.delete(l.target)}function h2(s,e,n){const a=Pt(s);let l=It.min(),u=tn();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,w){const T=Pt(g),k=T.Fs.get(w);return k!==void 0?_e.resolve(T.vs.get(k)):T.li.getTargetData(y,w)})(a,d,na(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>a.Cs.getDocumentsMatchingQuery(d,e,n?l:It.min(),n?u:tn()))).next((p=>(_4(a,oA(e),p),{documents:p,ks:u})))))}function _4(s,e,n){let a=s.Ms.get(e)||It.min();n.forEach(((l,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Ms.set(e,a)}class d2{constructor(){this.activeTargetIds=fA()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T4{constructor(){this.vo=new d2,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,a){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new d2,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class E4{Mo(e){}shutdown(){}}const f2="ConnectivityMonitor";class m2{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Xe(f2,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Xe(f2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let qh=null;function Zp(){return qh===null?qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():qh++,"0x"+qh.toString(16)}const fp="RestConnection",k4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class S4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${a}/databases/${l}`,this.$o=this.databaseId.database===wd?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Wo(e,n,a,l,u){const d=Zp(),p=this.Qo(e,n.toUriEncodedString());Xe(fp,`Sending RPC '${e}' ${d}:`,p,a);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),w=Pi(y);return this.zo(e,p,g,a,w).then((T=>(Xe(fp,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw Nl(fp,`RPC '${e}' ${d} failed with error: `,T,"url: ",p,"request:",a),T}))}jo(e,n,a,l,u,d){return this.Wo(e,n,a,l,u)}Go(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),a&&a.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const a=k4[e];let l=`${this.qo}/v1/${n}:${a}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class j4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const js="WebChannelConnection",Mc=(s,e,n)=>{s.listen(e,(a=>{try{n(a)}catch(l){setTimeout((()=>{throw l}),0)}}))};class kl extends S4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!kl.c_){const e=lx();Mc(e,ox.STAT_EVENT,(n=>{n.stat===Up.PROXY?Xe(js,"STAT_EVENT: detected buffering proxy"):n.stat===Up.NOPROXY&&Xe(js,"STAT_EVENT: detected no buffering proxy")})),kl.c_=!0}}zo(e,n,a,l,u){const d=Zp();return new Promise(((p,g)=>{const y=new ax;y.setWithCredentials(!0),y.listenOnce(ix.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case sd.NO_ERROR:const T=y.getResponseJson();Xe(js,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),p(T);break;case sd.TIMEOUT:Xe(js,`RPC '${e}' ${d} timed out`),g(new $e(be.DEADLINE_EXCEEDED,"Request time out"));break;case sd.HTTP_ERROR:const k=y.getStatus();if(Xe(js,`RPC '${e}' ${d} failed with status:`,k,"response text:",y.getResponseText()),k>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const W=P?.error;if(W&&W.status&&W.message){const B=(function(re){const X=re.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(X)>=0?X:be.UNKNOWN})(W.status);g(new $e(B,W.message))}else g(new $e(be.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new $e(be.UNAVAILABLE,"Connection failed."));break;default:kt(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Xe(js,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(l);Xe(js,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",w,a,15)}))}T_(e,n,a){const l=Zp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,a),p.encodeInitMessageHeaders=!0;const y=u.join("");Xe(js,`Creating RPC '${e}' stream ${l}: ${y}`,p);const w=d.createWebChannel(y,p);this.I_(w);let T=!1,k=!1;const P=new j4({Ho:W=>{k?Xe(js,`Not sending because RPC '${e}' stream ${l} is closed:`,W):(T||(Xe(js,`Opening RPC '${e}' stream ${l} transport.`),w.open(),T=!0),Xe(js,`RPC '${e}' stream ${l} sending:`,W),w.send(W))},Jo:()=>w.close()});return Mc(w,Uc.EventType.OPEN,(()=>{k||(Xe(js,`RPC '${e}' stream ${l} transport opened.`),P.i_())})),Mc(w,Uc.EventType.CLOSE,(()=>{k||(k=!0,Xe(js,`RPC '${e}' stream ${l} transport closed`),P.o_(),this.E_(w))})),Mc(w,Uc.EventType.ERROR,(W=>{k||(k=!0,Nl(js,`RPC '${e}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),P.o_(new $e(be.UNAVAILABLE,"The operation could not be completed")))})),Mc(w,Uc.EventType.MESSAGE,(W=>{if(!k){const B=W.data[0];bn(!!B,16349);const L=B,re=L?.error||L[0]?.error;if(re){Xe(js,`RPC '${e}' stream ${l} received error:`,re);const X=re.status;let he=(function(Ae){const I=os[Ae];if(I!==void 0)return Hx(I)})(X),ke=re.message;he===void 0&&(he=be.INTERNAL,ke="Unknown error status: "+X+" with message "+re.message),k=!0,P.o_(new $e(he,ke)),w.close()}else Xe(js,`RPC '${e}' stream ${l} received:`,B),P.__(B)}})),kl.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,a){super.Go(e,n,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return cx()}}function N4(s){return new kl(s)}function mp(){return typeof document<"u"?document:null}function Wd(s){return new IA(s,!0)}kl.c_=!1;class r_{constructor(e,n,a=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-a);l>0&&Xe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const p2="PersistentStream";class a_{constructor(e,n,a,l,u,d,p,g){this.Ci=e,this.b_=a,this.S_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new r_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(Pa(n.toString()),Pa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===n&&this.G_(a,l)}),(a=>{e((()=>{const l=new $e(be.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(e,n){const a=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Xe(p2,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Xe(p2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class C4 extends a_{constructor(e,n,a,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,l,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=PA(this.serializer,e),a=(function(u){if(!("targetChange"in u))return It.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?It.min():d.readTime?sa(d.readTime):It.min()})(e);return this.listener.J_(n,a)}Z_(e){const n={};n.database=Xp(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=$p(g)?{documents:VA(u,g)}:{query:BA(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=Wx(u,d.resumeToken);const y=Kp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(It.min())>0){p.readTime=kd(u,d.snapshotVersion.toTimestamp());const y=Kp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const a=zA(this.serializer,e);a&&(n.labels=a),this.K_(n)}X_(e){const n={};n.database=Xp(this.serializer),n.removeTarget=e,this.K_(n)}}class R4 extends a_{constructor(e,n,a,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,l,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return bn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=OA(e.writeResults,e.commitTime),a=sa(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=Xp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>LA(this.serializer,a)))};this.K_(n)}}class A4{}class I4 extends A4{constructor(e,n,a,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new $e(be.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,Yp(n,a),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new $e(be.UNKNOWN,u.toString())}))}jo(e,n,a,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Yp(n,a),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new $e(be.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function D4(s,e,n,a){return new I4(s,e,n,a)}class M4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pa(n),this.aa=!1):Xe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const _o="RemoteStore";class P4{constructor(e,n,a,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{a.enqueueAndForget((async()=>{jo(this)&&(Xe(_o,"Restarting streams for network reachability change."),await(async function(g){const y=Pt(g);y.Ea.add(4),await wu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Gd(y)})(this))}))})),this.Va=new M4(a,l)}}async function Gd(s){if(jo(s))for(const e of s.Ra)await e(!0)}async function wu(s){for(const e of s.Ra)await e(!1)}function i_(s,e){const n=Pt(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Yg(n)?Kg(n):Fl(n).O_()&&Gg(n,e))}function Wg(s,e){const n=Pt(s),a=Fl(n);n.Ia.delete(e),a.O_()&&o_(n,e),n.Ia.size===0&&(a.O_()?a.L_():jo(n)&&n.Va.set("Unknown"))}function Gg(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fl(s).Z_(e)}function o_(s,e){s.da.$e(e),Fl(s).X_(e)}function Kg(s){s.da=new NA({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Fl(s).start(),s.Va.ua()}function Yg(s){return jo(s)&&!Fl(s).x_()&&s.Ia.size>0}function jo(s){return Pt(s).Ea.size===0}function l_(s){s.da=void 0}async function L4(s){s.Va.set("Online")}async function O4(s){s.Ia.forEach(((e,n)=>{Gg(s,e)}))}async function V4(s,e){l_(s),Yg(s)?(s.Va.ha(e),Kg(s)):s.Va.set("Unknown")}async function B4(s,e,n){if(s.Va.set("Online"),e instanceof $x&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(a){Xe(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await jd(s,a)}else if(e instanceof od?s.da.Xe(e):e instanceof qx?s.da.st(e):s.da.tt(e),!n.isEqual(It.min()))try{const a=await s_(s.localStore);n.compareTo(a)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=u.Ia.get(y);w&&u.Ia.set(y,w.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const w=u.Ia.get(g);if(!w)return;u.Ia.set(g,w.withResumeToken(Ts.EMPTY_BYTE_STRING,w.snapshotVersion)),o_(u,g);const T=new Ti(w.target,g,y,w.sequenceNumber);Gg(u,T)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(a){Xe(_o,"Failed to raise snapshot:",a),await jd(s,a)}}async function jd(s,e,n){if(!Ul(e))throw e;s.Ea.add(1),await wu(s),s.Va.set("Offline"),n||(n=()=>s_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Xe(_o,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Gd(s)}))}function c_(s,e){return e().catch((n=>jd(s,n,e)))}async function Kd(s){const e=Pt(s),n=Di(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ag;for(;U4(e);)try{const l=await w4(e.localStore,a);if(l===null){e.Ta.length===0&&n.L_();break}a=l.batchId,z4(e,l)}catch(l){await jd(e,l)}u_(e)&&h_(e)}function U4(s){return jo(s)&&s.Ta.length<10}function z4(s,e){s.Ta.push(e);const n=Di(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function u_(s){return jo(s)&&!Di(s).x_()&&s.Ta.length>0}function h_(s){Di(s).start()}async function F4(s){Di(s).ra()}async function H4(s){const e=Di(s);for(const n of s.Ta)e.ea(n.mutations)}async function q4(s,e,n){const a=s.Ta.shift(),l=Bg.from(a,e,n);await c_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Kd(s)}async function $4(s,e){e&&Di(s).Y_&&await(async function(a,l){if((function(d){return kA(d)&&d!==be.ABORTED})(l.code)){const u=a.Ta.shift();Di(a).B_(),await c_(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Kd(a)}})(s,e),u_(s)&&h_(s)}async function g2(s,e){const n=Pt(s);n.asyncQueue.verifyOperationInProgress(),Xe(_o,"RemoteStore received new credentials");const a=jo(n);n.Ea.add(3),await wu(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gd(n)}async function W4(s,e){const n=Pt(s);e?(n.Ea.delete(2),await Gd(n)):e||(n.Ea.add(2),await wu(n),n.Va.set("Unknown"))}function Fl(s){return s.ma||(s.ma=(function(n,a,l){const u=Pt(n);return u.sa(),new C4(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:L4.bind(null,s),Yo:O4.bind(null,s),t_:V4.bind(null,s),J_:B4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Yg(s)?Kg(s):s.Va.set("Unknown")):(await s.ma.stop(),l_(s))}))),s.ma}function Di(s){return s.fa||(s.fa=(function(n,a,l){const u=Pt(n);return u.sa(),new R4(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:F4.bind(null,s),t_:$4.bind(null,s),ta:H4.bind(null,s),na:q4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Kd(s)):(await s.fa.stop(),s.Ta.length>0&&(Xe(_o,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Qg{constructor(e,n,a,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=l,this.removalCallback=u,this.deferred=new Aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,l,u){const d=Date.now()+a,p=new Qg(e,n,d,l,u);return p.start(a),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $e(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xg(s,e){if(Pa("AsyncQueue",`${e}: ${s}`),Ul(s))return new $e(be.UNAVAILABLE,`${e}: ${s}`);throw s}class Sl{static emptySet(e){return new Sl(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||mt.comparator(n.key,a.key):(n,a)=>mt.comparator(n.key,a.key),this.keyedMap=zc(),this.sortedSet=new Fn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=a.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Sl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class y2{constructor(){this.ga=new Fn(mt.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):kt(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class Dl{constructor(e,n,a,l,u,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,a,l,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Dl(e,n,Sl.emptySet(n),d,a,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==a[l].type||!n[l].doc.isEqual(a[l].doc))return!1;return!0}}class G4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class K4{constructor(){this.queries=v2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const l=Pt(n),u=l.queries;l.queries=v2(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(a)}))})(this,new $e(be.ABORTED,"Firestore shutting down"))}}function v2(){return new So((s=>Ax(s)),zd)}async function d_(s,e){const n=Pt(s);let a=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(a=2):(u=new G4,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=Xg(d,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Jg(n)}async function f_(s,e){const n=Pt(s),a=e.query;let l=3;const u=n.queries.get(a);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function Y4(s,e){const n=Pt(s);let a=!1;for(const l of e){const u=l.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(l)&&(a=!0);d.wa=l}}a&&Jg(n)}function Q4(s,e,n){const a=Pt(s),l=a.queries.get(e);if(l)for(const u of l.ba)u.onError(n);a.queries.delete(e)}function Jg(s){s.Ca.forEach((e=>{e.next()}))}var eg,b2;(b2=eg||(eg={})).Ma="default",b2.Cache="cache";class m_{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const l of e.docChanges)l.type!==3&&a.push(l);e=new Dl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==eg.Cache}}class p_{constructor(e){this.key=e}}class g_{constructor(e){this.key=e}}class X4{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=tn(),this.mutatedKeys=tn(),this.eu=Ix(e),this.tu=new Sl(this.eu)}get nu(){return this.Za}ru(e,n){const a=n?n.iu:new y2,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,T)=>{const k=l.get(w),P=Fd(this.query,T)?T:null,W=!!k&&this.mutatedKeys.has(k.key),B=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let L=!1;k&&P?k.data.isEqual(P.data)?W!==B&&(a.track({type:3,doc:P}),L=!0):this.su(k,P)||(a.track({type:2,doc:P}),L=!0,(g&&this.eu(P,g)>0||y&&this.eu(P,y)<0)&&(p=!0)):!k&&P?(a.track({type:0,doc:P}),L=!0):k&&!P&&(a.track({type:1,doc:k}),L=!0,(g||y)&&(p=!0)),L&&(P?(d=d.add(P),u=B?u.add(w):u.delete(w)):(d=d.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),u=u.delete(w.key),a.track({type:1,doc:w})}return{tu:d,iu:a,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,T)=>(function(P,W){const B=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt(20277,{Vt:L})}};return B(P)-B(W)})(w.type,T.type)||this.eu(w.doc,T.doc))),this.ou(a),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new Dl(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new y2,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=tn(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const n=[];return e.forEach((a=>{this.Ya.has(a)||n.push(new g_(a))})),this.Ya.forEach((a=>{e.has(a)||n.push(new p_(a))})),n}cu(e){this.Za=e.ks,this.Ya=tn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Dl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Zg="SyncEngine";class J4{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class Z4{constructor(e){this.key=e,this.hu=!1}}class eI{constructor(e,n,a,l,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new So((p=>Ax(p)),zd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Fn(mt.comparator),this.Au=new Map,this.Vu=new Fg,this.du={},this.mu=new Map,this.fu=Il.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tI(s,e,n=!0){const a=__(s);let l;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await y_(a,e,n,!0),l}async function nI(s,e){const n=__(s);await y_(n,e,!0,!1)}async function y_(s,e,n,a){const l=await x4(s.localStore,na(e)),u=l.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let p;return a&&(p=await sI(s,e,u,d==="current",l.resumeToken)),s.isPrimaryClient&&n&&i_(s.remoteStore,l),p}async function sI(s,e,n,a,l){s.pu=(T,k,P)=>(async function(B,L,re,X){let he=L.view.ru(re);he.Ss&&(he=await h2(B.localStore,L.query,!1).then((({documents:I})=>L.view.ru(I,he))));const ke=X&&X.targetChanges.get(L.targetId),ze=X&&X.targetMismatches.get(L.targetId)!=null,Ae=L.view.applyChanges(he,B.isPrimaryClient,ke,ze);return x2(B,L.targetId,Ae.au),Ae.snapshot})(s,T,k,P);const u=await h2(s.localStore,e,!0),d=new X4(e,u.ks),p=d.ru(u.documents),g=bu.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",l),y=d.applyChanges(p,s.isPrimaryClient,g);x2(s,n,y.au);const w=new J4(e,n,d);return s.Tu.set(e,w),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function rI(s,e,n){const a=Pt(s),l=a.Tu.get(e),u=a.Iu.get(l.targetId);if(u.length>1)return a.Iu.set(l.targetId,u.filter((d=>!zd(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await Jp(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),n&&Wg(a.remoteStore,l.targetId),tg(a,l.targetId)})).catch(Bl)):(tg(a,l.targetId),await Jp(a.localStore,l.targetId,!0))}async function aI(s,e){const n=Pt(s),a=n.Tu.get(e),l=n.Iu.get(a.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),Wg(n.remoteStore,a.targetId))}async function iI(s,e,n){const a=fI(s);try{const l=await(function(d,p){const g=Pt(d),y=lt.now(),w=p.reduce(((P,W)=>P.add(W.key)),tn());let T,k;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let W=La(),B=tn();return g.xs.getEntries(P,w).next((L=>{W=L,W.forEach(((re,X)=>{X.isValidDocument()||(B=B.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,W))).next((L=>{T=L;const re=[];for(const X of p){const he=wA(X,T.get(X.key).overlayedDocument);he!=null&&re.push(new Vi(X.key,he,Tx(he.value.mapValue),gr.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,re,p)})).next((L=>{k=L;const re=L.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(P,L.batchId,re)}))})).then((()=>({batchId:k.batchId,changes:Mx(T)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new Fn(en)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(a,l.batchId,n),await xu(a,l.changes),await Kd(a.remoteStore)}catch(l){const u=Xg(l,"Failed to persist write");n.reject(u)}}async function v_(s,e){const n=Pt(s);try{const a=await v4(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=n.Au.get(u);d&&(bn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?bn(d.hu,14607):l.removedDocuments.size>0&&(bn(d.hu,42227),d.hu=!1))})),await xu(n,a,e)}catch(a){await Bl(a)}}function w2(s,e,n){const a=Pt(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const l=[];a.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=Pt(d);g.onlineState=p;let y=!1;g.queries.forEach(((w,T)=>{for(const k of T.ba)k.va(p)&&(y=!0)})),y&&Jg(g)})(a.eventManager,e),l.length&&a.Pu.J_(l),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function oI(s,e,n){const a=Pt(s);a.sharedClientState.updateQueryState(e,"rejected",n);const l=a.Au.get(e),u=l&&l.key;if(u){let d=new Fn(mt.comparator);d=d.insert(u,Rs.newNoDocument(u,It.min()));const p=tn().add(u),g=new $d(It.min(),new Map,new Fn(en),d,p);await v_(a,g),a.Ru=a.Ru.remove(u),a.Au.delete(e),ey(a)}else await Jp(a.localStore,e,!1).then((()=>tg(a,e,n))).catch(Bl)}async function lI(s,e){const n=Pt(s),a=e.batch.batchId;try{const l=await y4(n.localStore,e);w_(n,a,null),b_(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await xu(n,l)}catch(l){await Bl(l)}}async function cI(s,e,n){const a=Pt(s);try{const l=await(function(d,p){const g=Pt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next((T=>(bn(T!==null,37113),w=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(a.localStore,e);w_(a,e,n),b_(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await xu(a,l)}catch(l){await Bl(l)}}function b_(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function w_(s,e,n){const a=Pt(s);let l=a.du[a.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),a.du[a.currentUser.toKey()]=l}}function tg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||x_(s,a)}))}function x_(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Wg(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),ey(s))}function x2(s,e,n){for(const a of n)a instanceof p_?(s.Vu.addReference(a.key,e),uI(s,a)):a instanceof g_?(Xe(Zg,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||x_(s,a.key)):kt(19791,{wu:a})}function uI(s,e){const n=e.key,a=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(a)||(Xe(Zg,"New document in limbo: "+n),s.Eu.add(a),ey(s))}function ey(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new mt(Cn.fromString(e)),a=s.fu.next();s.Au.set(a,new Z4(n)),s.Ru=s.Ru.insert(n,a),i_(s.remoteStore,new Ti(na(Lg(n.path)),a,"TargetPurposeLimboResolution",Vd.ce))}}async function xu(s,e,n){const a=Pt(s),l=[],u=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((p,g)=>{d.push(a.pu(g,e,n).then((y=>{if((y||n)&&a.isPrimaryClient){const w=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;a.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){l.push(y);const w=qg.Es(g.targetId,y);u.push(w)}})))})),await Promise.all(d),a.Pu.J_(l),await(async function(g,y){const w=Pt(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>_e.forEach(y,(k=>_e.forEach(k.Ts,(P=>w.persistence.referenceDelegate.addReference(T,k.targetId,P))).next((()=>_e.forEach(k.Is,(P=>w.persistence.referenceDelegate.removeReference(T,k.targetId,P)))))))))}catch(T){if(!Ul(T))throw T;Xe($g,"Failed to update sequence numbers: "+T)}for(const T of y){const k=T.targetId;if(!T.fromCache){const P=w.vs.get(k),W=P.snapshotVersion,B=P.withLastLimboFreeSnapshotVersion(W);w.vs=w.vs.insert(k,B)}}})(a.localStore,u))}async function hI(s,e){const n=Pt(s);if(!n.currentUser.isEqual(e)){Xe(Zg,"User change. New user:",e.toKey());const a=await n_(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new $e(be.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await xu(n,a.Ns)}}function dI(s,e){const n=Pt(s),a=n.Au.get(e);if(a&&a.hu)return tn().add(a.key);{let l=tn();const u=n.Iu.get(e);if(!u)return l;for(const d of u){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function __(s){const e=Pt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=v_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oI.bind(null,e),e.Pu.J_=Y4.bind(null,e.eventManager),e.Pu.yu=Q4.bind(null,e.eventManager),e}function fI(s){const e=Pt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cI.bind(null,e),e}class Nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return g4(this.persistence,new f4,e.initialUser,this.serializer)}Cu(e){return new t_(Hg.Vi,this.serializer)}Du(e){return new T4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nd.provider={build:()=>new Nd};class mI extends Nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){bn(this.persistence.referenceDelegate instanceof Sd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new JA(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Hs.withCacheSize(this.cacheSizeBytes):Hs.DEFAULT;return new t_((a=>Sd.Vi(a,n)),this.serializer)}}class ng{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>w2(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=hI.bind(null,this.syncEngine),await W4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new K4})()}createDatastore(e){const n=Wd(e.databaseInfo.databaseId),a=N4(e.databaseInfo);return D4(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,l,u,d,p){return new P4(a,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>w2(this.syncEngine,n,0)),(function(){return m2.v()?new m2:new E4})())}createSyncEngine(e,n){return(function(l,u,d,p,g,y,w){const T=new eI(l,u,d,p,g,y);return w&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=Pt(n);Xe(_o,"RemoteStore shutting down."),a.Ea.add(5),await wu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ng.provider={build:()=>new ng};class T_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Mi="FirestoreClient";class pI{constructor(e,n,a,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this._databaseInfo=l,this.user=Ns.UNAUTHENTICATED,this.clientId=Rg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async d=>{Xe(Mi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(Xe(Mi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=Xg(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function pp(s,e){s.asyncQueue.verifyOperationInProgress(),Xe(Mi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async l=>{a.isEqual(l)||(await n_(e.localStore,l),a=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function _2(s,e){s.asyncQueue.verifyOperationInProgress();const n=await gI(s);Xe(Mi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>g2(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,l)=>g2(e.remoteStore,l))),s._onlineComponents=e}async function gI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Xe(Mi,"Using user provided OfflineComponentProvider");try{await pp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===be.FAILED_PRECONDITION||l.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Nl("Error using user provided cache. Falling back to memory cache: "+n),await pp(s,new Nd)}}else Xe(Mi,"Using default OfflineComponentProvider"),await pp(s,new mI(void 0));return s._offlineComponents}async function E_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Xe(Mi,"Using user provided OnlineComponentProvider"),await _2(s,s._uninitializedComponentsProvider._online)):(Xe(Mi,"Using default OnlineComponentProvider"),await _2(s,new ng))),s._onlineComponents}function yI(s){return E_(s).then((e=>e.syncEngine))}async function k_(s){const e=await E_(s),n=e.eventManager;return n.onListen=tI.bind(null,e.syncEngine),n.onUnlisten=rI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=aI.bind(null,e.syncEngine),n}function vI(s,e,n={}){const a=new Aa;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const w=new T_({next:k=>{w.Nu(),d.enqueueAndForget((()=>f_(u,T)));const P=k.docs.has(p);!P&&k.fromCache?y.reject(new $e(be.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&k.fromCache&&g&&g.source==="server"?y.reject(new $e(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(k)},error:k=>y.reject(k)}),T=new m_(Lg(p.path),w,{includeMetadataChanges:!0,Ka:!0});return d_(u,T)})(await k_(s),s.asyncQueue,e,n,a))),a.promise}function bI(s,e,n={}){const a=new Aa;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const w=new T_({next:k=>{w.Nu(),d.enqueueAndForget((()=>f_(u,T))),k.fromCache&&g.source==="server"?y.reject(new $e(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(k)},error:k=>y.reject(k)}),T=new m_(p,w,{includeMetadataChanges:!0,Ka:!0});return d_(u,T)})(await k_(s),s.asyncQueue,e,n,a))),a.promise}function wI(s,e){const n=new Aa;return s.asyncQueue.enqueueAndForget((async()=>iI(await yI(s),e,n))),n.promise}function S_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const xI="ComponentProvider",T2=new Map;function _I(s,e,n,a,l){return new FR(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,S_(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,a)}const j_="firestore.googleapis.com",E2=!0;class k2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $e(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=j_,this.ssl=E2}else this.host=e.host,this.ssl=e.ssl??E2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=e_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QA)throw new $e(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S_(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new $e(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new $e(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new $e(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yd{constructor(e,n,a,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $e(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $e(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new xR;switch(a.type){case"firstParty":return new kR(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new $e(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=T2.get(n);a&&(Xe(xI,"Removing Datastore"),T2.delete(n),a.terminate())})(this),Promise.resolve()}}function TI(s,e,n,a={}){s=Lr(s,Yd);const l=Pi(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(mg(`https://${p}`),pg("Firestore",!0)),u.host!==j_&&u.host!==p&&Nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:a};if(!yo(g,d)&&(s._setSettings(g),a.mockUserToken)){let y,w;if(typeof a.mockUserToken=="string")y=a.mockUserToken,w=Ns.MOCK_USER;else{y=vw(a.mockUserToken,s._app?.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new $e(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Ns(T)}s._authCredentials=new _R(new hx(y,w))}}class No{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new No(this.firestore,e,this._query)}}class ts{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ts(this.firestore,e,this._key)}toJSON(){return{type:ts._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(yu(n,ts._jsonSchema))return new ts(e,a||null,new mt(Cn.fromString(n.referencePath)))}}ts._jsonSchemaVersion="firestore/documentReference/1.0",ts._jsonSchema={type:cs("string",ts._jsonSchemaVersion),referencePath:cs("string")};class ji extends No{constructor(e,n,a){super(e,n,Lg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ts(this.firestore,null,new mt(e))}withConverter(e){return new ji(this.firestore,e,this._path)}}function _s(s,e,...n){if(s=Vn(s),dx("collection","path",e),s instanceof Yd){const a=Cn.fromString(e,...n);return V1(a),new ji(s,null,a)}{if(!(s instanceof ts||s instanceof ji))throw new $e(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Cn.fromString(e,...n));return V1(a),new ji(s.firestore,null,a)}}function Tt(s,e,...n){if(s=Vn(s),arguments.length===1&&(e=Rg.newId()),dx("doc","path",e),s instanceof Yd){const a=Cn.fromString(e,...n);return O1(a),new ts(s,null,new mt(a))}{if(!(s instanceof ts||s instanceof ji))throw new $e(be.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Cn.fromString(e,...n));return O1(a),new ts(s.firestore,s instanceof ji?s.converter:null,new mt(a))}}const S2="AsyncQueue";class j2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new r_(this,"async_queue_retry"),this._c=()=>{const a=mp();a&&Xe(S2,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=mp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=mp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Aa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ul(e))throw e;Xe(S2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Pa("INTERNAL UNHANDLED ERROR: ",N2(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Qg.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&kt(47125,{Pc:N2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function N2(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Co extends Yd{constructor(e,n,a,l){super(e,n,a,l),this.type="firestore",this._queue=new j2,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j2(e),this._firestoreClient=void 0,await e}}}function EI(s,e){const n=typeof s=="object"?s:bg(),a=typeof s=="string"?s:wd,l=Dd(n,"firestore").getImmediate({identifier:a});if(!l._initialized){const u=pw("firestore");u&&TI(l,...u)}return l}function ty(s){if(s._terminated)throw new $e(be.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||kI(s),s._firestoreClient}function kI(s){const e=s._freezeSettings(),n=_I(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new pI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pr(Ts.fromBase64String(e))}catch(n){throw new $e(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pr(Ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yu(e,pr._jsonSchema))return pr.fromBase64String(e.bytes)}}pr._jsonSchemaVersion="firestore/bytes/1.0",pr._jsonSchema={type:cs("string",pr._jsonSchemaVersion),bytes:cs("string")};class ny{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $e(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sy{constructor(e){this._methodName=e}}class ra{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $e(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $e(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return en(this._lat,e._lat)||en(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ra._jsonSchemaVersion}}static fromJSON(e){if(yu(e,ra._jsonSchema))return new ra(e.latitude,e.longitude)}}ra._jsonSchemaVersion="firestore/geoPoint/1.0",ra._jsonSchema={type:cs("string",ra._jsonSchemaVersion),latitude:cs("number"),longitude:cs("number")};class Mr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,l){if(a.length!==l.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yu(e,Mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Mr(e.vectorValues);throw new $e(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mr._jsonSchemaVersion="firestore/vectorValue/1.0",Mr._jsonSchema={type:cs("string",Mr._jsonSchemaVersion),vectorValues:cs("object")};const SI=/^__.*__$/;class jI{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new Vi(e,this.data,this.fieldMask,n,this.fieldTransforms):new vu(e,this.data,n,this.fieldTransforms)}}class N_{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new Vi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function C_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt(40011,{dataSource:s})}}class ry{constructor(e,n,a,l,u,d){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ry({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Cd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(C_(this.dataSource)&&SI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class NI{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Wd(e)}createContext(e,n,a,l=!1){return new ry({dataSource:e,methodName:n,targetDoc:a,path:xs.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(s){const e=s._freezeSettings(),n=Wd(s._databaseId);return new NI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function R_(s,e,n,a,l,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);ay("Data must be an object, but it was:",d,a);const p=A_(a,d);let g,y;if(u.merge)g=new nr(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const w=[];for(const T of u.mergeFields){const k=To(e,T,n);if(!d.contains(k))throw new $e(be.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);M_(w,k)||w.push(k)}g=new nr(w),y=d.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=d.fieldTransforms;return new jI(new qs(p),g,y)}class Xd extends sy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xd}}function CI(s,e,n,a){const l=s.createContext(1,e,n);ay("Data must be an object, but it was:",l,a);const u=[],d=qs.empty();Oi(a,((g,y)=>{const w=D_(e,g,n);y=Vn(y);const T=l.childContextForFieldPath(w);if(y instanceof Xd)u.push(w);else{const k=_u(y,T);k!=null&&(u.push(w),d.set(w,k))}}));const p=new nr(u);return new N_(d,p,l.fieldTransforms)}function RI(s,e,n,a,l,u){const d=s.createContext(1,e,n),p=[To(e,a,n)],g=[l];if(u.length%2!=0)throw new $e(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<u.length;k+=2)p.push(To(e,u[k])),g.push(u[k+1]);const y=[],w=qs.empty();for(let k=p.length-1;k>=0;--k)if(!M_(y,p[k])){const P=p[k];let W=g[k];W=Vn(W);const B=d.childContextForFieldPath(P);if(W instanceof Xd)y.push(P);else{const L=_u(W,B);L!=null&&(y.push(P),w.set(P,L))}}const T=new nr(y);return new N_(w,T,d.fieldTransforms)}function AI(s,e,n,a=!1){return _u(n,s.createContext(a?4:3,e))}function _u(s,e){if(I_(s=Vn(s)))return ay("Unsupported field value:",e,s),A_(s,e);if(s instanceof sy)return(function(a,l){if(!C_(l.dataSource))throw l.createError(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,l){const u=[];let d=0;for(const p of a){let g=_u(p,l.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(a,l){if((a=Vn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return mA(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=lt.fromDate(a);return{timestampValue:kd(l.serializer,u)}}if(a instanceof lt){const u=new lt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:kd(l.serializer,u)}}if(a instanceof ra)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof pr)return{bytesValue:Wx(l.serializer,a._byteString)};if(a instanceof ts){const u=l.databaseId,d=a.firestore._databaseId;if(!d.isEqual(u))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:zg(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Mr)return(function(d,p){const g=d instanceof Mr?d.toArray():d;return{mapValue:{fields:{[xx]:{stringValue:_x},[xd]:{arrayValue:{values:g.map((w=>{if(typeof w!="number")throw p.createError("VectorValues must only contain numeric values.");return Og(p.serializer,w)}))}}}}}})(a,l);if(Zx(a))return a._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Od(a)}`)})(s,e)}function A_(s,e){const n={};return px(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(s,((a,l)=>{const u=_u(l,e.childContextForField(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function I_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof lt||s instanceof ra||s instanceof pr||s instanceof ts||s instanceof sy||s instanceof Mr||Zx(s))}function ay(s,e,n){if(!I_(n)||!fx(n)){const a=Od(n);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function To(s,e,n){if((e=Vn(e))instanceof ny)return e._internalPath;if(typeof e=="string")return D_(s,e);throw Cd("Field path arguments must be of type string or ",s,!1,void 0,n)}const II=new RegExp("[~\\*/\\[\\]]");function D_(s,e,n){if(e.search(II)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new ny(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Cd(s,e,n,a,l){const u=a&&!a.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${a}`),d&&(g+=` in document ${l}`),g+=")"),new $e(be.INVALID_ARGUMENT,p+s+g)}function M_(s,e){return s.some((n=>n.isEqual(e)))}class DI{convertValue(e,n="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return es(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw kt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return Oi(e,((l,u)=>{a[l]=this.convertValue(u,n)})),a}convertVectorValue(e){const n=e.fields?.[xd].arrayValue?.values?.map((a=>es(a.doubleValue)));return new Mr(n)}convertGeoPoint(e){return new ra(es(e.latitude),es(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Ud(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const n=Ri(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Cn.fromString(e);bn(Jx(a),9688,{name:e});const l=new ru(a.get(1),a.get(3)),u=new mt(a.popFirst(5));return l.isEqual(n)||Pa(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class P_ extends DI{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ts(this.firestore,null,n)}}const C2="@firebase/firestore",R2="4.10.0";class L_{constructor(e,n,a,l,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ts(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(To("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MI extends L_{data(){return super.data()}}function PI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new $e(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iy{}class O_ extends iy{}function $s(s,e,...n){let a=[];e instanceof iy&&a.push(e),a=a.concat(n),(function(u){const d=u.filter((g=>g instanceof oy)).length,p=u.filter((g=>g instanceof Jd)).length;if(d>1||d>0&&p>0)throw new $e(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const l of a)s=l._apply(s);return s}class Jd extends O_{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Jd(e,n,a)}_apply(e){const n=this._parse(e);return V_(e._query,n),new No(e.firestore,e.converter,Wp(e._query,n))}_parse(e){const n=Qd(e.firestore);return(function(u,d,p,g,y,w,T){let k;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new $e(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){I2(T,w);const W=[];for(const B of T)W.push(A2(g,u,B));k={arrayValue:{values:W}}}else k=A2(g,u,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||I2(T,w),k=AI(p,d,T,w==="in"||w==="not-in");return ls.create(y,w,k)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Cs(s,e,n){const a=e,l=To("where",s);return Jd._create(l,a,n)}class oy extends iy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new oy(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Or.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let d=l;const p=u.getFlattenedFilters();for(const g of p)V_(d,g),d=Wp(d,g)})(e._query,n),new No(e.firestore,e.converter,Wp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ly extends O_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ly(e,n)}_apply(e){const n=(function(l,u,d){if(l.startAt!==null)throw new $e(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new $e(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iu(u,d)})(e._query,this._field,this._direction);return new No(e.firestore,e.converter,iA(e._query,n))}}function p3(s,e="asc"){const n=e,a=To("orderBy",s);return ly._create(a,n)}function A2(s,e,n){if(typeof(n=Vn(n))=="string"){if(n==="")throw new $e(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rx(e)&&n.indexOf("/")!==-1)throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(Cn.fromString(n));if(!mt.isDocumentKey(a))throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return W1(s,new mt(a))}if(n instanceof ts)return W1(s,n._key);throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Od(n)}.`)}function I2(s,e){if(!Array.isArray(s)||s.length===0)throw new $e(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V_(s,e){const n=(function(l,u){for(const d of l)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new $e(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $e(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function B_(s,e,n){let a;return a=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,a}class Hc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class po extends L_{constructor(e,n,a,l,u,d){super(e,n,a,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(To("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $e(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=po._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}po._jsonSchemaVersion="firestore/documentSnapshot/1.0",po._jsonSchema={type:cs("string",po._jsonSchemaVersion),bundleSource:cs("string","DocumentSnapshot"),bundleName:cs("string"),bundle:cs("string")};class ld extends po{data(e={}){return super.data(e)}}class jl{constructor(e,n,a,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Hc(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new ld(this._firestore,this._userDataWriter,a.key,a,new Hc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $e(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new ld(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Hc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new ld(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Hc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,w=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),w=d.indexOf(p.doc.key)),{type:LI(p.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $e(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt(61501,{type:s})}}jl._jsonSchemaVersion="firestore/querySnapshot/1.0",jl._jsonSchema={type:cs("string",jl._jsonSchemaVersion),bundleSource:cs("string","QuerySnapshot"),bundleName:cs("string"),bundle:cs("string")};function Gn(s){s=Lr(s,ts);const e=Lr(s.firestore,Co),n=ty(e);return vI(n,s._key).then((a=>VI(e,s,a)))}function Ws(s){s=Lr(s,No);const e=Lr(s.firestore,Co),n=ty(e),a=new P_(e);return PI(s._query),bI(n,s._query).then((l=>new jl(e,a,s,l)))}function Wn(s,e,n){s=Lr(s,ts);const a=Lr(s.firestore,Co),l=B_(s.converter,e,n),u=Qd(a);return Zd(a,[R_(u,"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,gr.none())])}function OI(s,e,n,...a){s=Lr(s,ts);const l=Lr(s.firestore,Co),u=Qd(l);let d;return d=typeof(e=Vn(e))=="string"||e instanceof ny?RI(u,"updateDoc",s._key,e,n,a):CI(u,"updateDoc",s._key,e),Zd(l,[d.toMutation(s._key,gr.exists(!0))])}function cy(s){return Zd(Lr(s.firestore,Co),[new Vg(s._key,gr.none())])}function sg(s,e){const n=Lr(s.firestore,Co),a=Tt(s),l=B_(s.converter,e),u=Qd(s.firestore);return Zd(n,[R_(u,"addDoc",a._key,l,s.converter!==null,{}).toMutation(a._key,gr.exists(!1))]).then((()=>a))}function Zd(s,e){const n=ty(s);return wI(n,e)}function VI(s,e,n){const a=n.docs.get(e._key),l=new P_(s);return new po(s,l,e._key,a,new Hc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){wR(ko),vo(new Ni("firestore",((a,{instanceIdentifier:l,options:u})=>{const d=a.getProvider("app").getImmediate(),p=new Co(new TR(a.getProvider("auth-internal")),new SR(d,a.getProvider("app-check-internal")),HR(d,l),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Zr(C2,R2,e),Zr(C2,R2,"esm2020")})();var BI="firebase",UI="12.8.0";Zr(BI,UI,"app");const U_="firebasestorage.googleapis.com",z_="storageBucket",zI=120*1e3,FI=600*1e3;class Yn extends oa{constructor(e,n,a=0){super(gp(e),`Firebase Storage: ${n} (${gp(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kn||(Kn={}));function gp(s){return"storage/"+s}function uy(){const s="An unknown error occurred, please check the error payload for server response.";return new Yn(Kn.UNKNOWN,s)}function HI(s){return new Yn(Kn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function qI(s){return new Yn(Kn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function $I(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Yn(Kn.UNAUTHENTICATED,s)}function WI(){return new Yn(Kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function GI(s){return new Yn(Kn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function KI(){return new Yn(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YI(){return new Yn(Kn.CANCELED,"User canceled the upload/download.")}function QI(s){return new Yn(Kn.INVALID_URL,"Invalid URL '"+s+"'.")}function XI(s){return new Yn(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function JI(){return new Yn(Kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+z_+"' property when initializing the app?")}function ZI(){return new Yn(Kn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eD(){return new Yn(Kn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tD(s){return new Yn(Kn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rg(s){return new Yn(Kn.INVALID_ARGUMENT,s)}function F_(){return new Yn(Kn.APP_DELETED,"The Firebase app was deleted.")}function nD(s){return new Yn(Kn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qc(s,e){return new Yn(Kn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Pc(s){throw new Yn(Kn.INTERNAL_ERROR,"Internal error: "+s)}class Ls{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=Ls.makeFromUrl(e,n)}catch{return new Ls(e,"")}if(a.path==="")return a;throw XI(e)}static makeFromUrl(e,n){let a=null;const l="([A-Za-z0-9.\\-_]+)";function u(ke){ke.path.charAt(ke.path.length-1)==="/"&&(ke.path_=ke.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function y(ke){ke.path_=decodeURIComponent(ke.path)}const w="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),k="(/([^?#]*).*)?$",P=new RegExp(`^https?://${T}/${w}/b/${l}/o${k}`,"i"),W={bucket:1,path:3},B=n===U_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",re=new RegExp(`^https?://${B}/${l}/${L}`,"i"),he=[{regex:p,indices:g,postModify:u},{regex:P,indices:W,postModify:y},{regex:re,indices:{bucket:1,path:2},postModify:y}];for(let ke=0;ke<he.length;ke++){const ze=he[ke],Ae=ze.regex.exec(e);if(Ae){const I=Ae[ze.indices.bucket];let S=Ae[ze.indices.path];S||(S=""),a=new Ls(I,S),ze.postModify(a);break}}if(a==null)throw QI(e);return a}}class sD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function rD(s,e,n){let a=1,l=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function w(...L){y||(y=!0,e.apply(null,L))}function T(L){l=setTimeout(()=>{l=null,s(P,g())},L)}function k(){u&&clearTimeout(u)}function P(L,...re){if(y){k();return}if(L){k(),w.call(null,L,...re);return}if(g()||d){k(),w.call(null,L,...re);return}a<64&&(a*=2);let he;p===1?(p=2,he=0):he=(a+Math.random())*1e3,T(he)}let W=!1;function B(L){W||(W=!0,k(),!y&&(l!==null?(L||(p=2),clearTimeout(l),T(0)):L||(p=1)))}return T(0),u=setTimeout(()=>{d=!0,B(!0)},n),B}function aD(s){s(!1)}function iD(s){return s!==void 0}function oD(s){return typeof s=="object"&&!Array.isArray(s)}function hy(s){return typeof s=="string"||s instanceof String}function D2(s){return dy()&&s instanceof Blob}function dy(){return typeof Blob<"u"}function ag(s,e,n,a){if(a<e)throw rg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>n)throw rg(`Invalid value for '${s}'. Expected ${n} or less.`)}function ef(s,e,n){let a=e;return n==null&&(a=`https://${e}`),`${n}://${a}/v0${s}`}function H_(s){const e=encodeURIComponent;let n="?";for(const a in s)if(s.hasOwnProperty(a)){const l=e(a)+"="+e(s[a]);n=n+l+"&"}return n=n.slice(0,-1),n}var go;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(go||(go={}));function lD(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class cD{constructor(e,n,a,l,u,d,p,g,y,w,T,k=!0,P=!1){this.url_=e,this.method_=n,this.headers_=a,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=T,this.retry=k,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((W,B)=>{this.resolve_=W,this.reject_=B,this.start_()})}start_(){const e=(a,l)=>{if(l){a(!1,new $h(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===go.NO_ERROR,g=u.getStatus();if(!p||lD(g,this.additionalRetryCodes_)&&this.retry){const w=u.getErrorCode()===go.ABORT;a(!1,new $h(!1,null,w));return}const y=this.successCodes_.indexOf(g)!==-1;a(!0,new $h(y,u))})},n=(a,l)=>{const u=this.resolve_,d=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());iD(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=uy();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(l.canceled){const g=this.appDelete_?F_():YI();d(g)}else{const g=KI();d(g)}};this.canceled_?n(!1,new $h(!1,null,!0)):this.backoffId_=rD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $h{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function uD(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function hD(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function fD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function mD(s,e,n,a,l,u,d=!0,p=!1){const g=H_(s.urlParams),y=s.url+g,w=Object.assign({},s.headers);return dD(w,e),uD(w,n),hD(w,u),fD(w,a),new cD(y,s.method,w,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,d,p)}function pD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gD(...s){const e=pD();if(e!==void 0){const n=new e;for(let a=0;a<s.length;a++)n.append(s[a]);return n.getBlob()}else{if(dy())return new Blob(s);throw new Yn(Kn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function yD(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function vD(s){if(typeof atob>"u")throw tD("base-64");return atob(s)}const Jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yp{constructor(e,n){this.data=e,this.contentType=n||null}}function bD(s,e){switch(s){case Jr.RAW:return new yp(q_(e));case Jr.BASE64:case Jr.BASE64URL:return new yp($_(s,e));case Jr.DATA_URL:return new yp(xD(e),_D(e))}throw uy()}function q_(s){const e=[];for(let n=0;n<s.length;n++){let a=s.charCodeAt(n);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=a,d=s.charCodeAt(++n);a=65536|(u&1023)<<10|d&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function wD(s){let e;try{e=decodeURIComponent(s)}catch{throw Qc(Jr.DATA_URL,"Malformed data URL.")}return q_(e)}function $_(s,e){switch(s){case Jr.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw Qc(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case Jr.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw Qc(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=vD(e)}catch(l){throw l.message.includes("polyfill")?l:Qc(s,"Invalid character found")}const a=new Uint8Array(n.length);for(let l=0;l<n.length;l++)a[l]=n.charCodeAt(l);return a}class W_{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Qc(Jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=n[1]||null;a!=null&&(this.base64=TD(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function xD(s){const e=new W_(s);return e.base64?$_(Jr.BASE64,e.rest):wD(e.rest)}function _D(s){return new W_(s).contentType}function TD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class _i{constructor(e,n){let a=0,l="";D2(e)?(this.data_=e,a=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(D2(this.data_)){const a=this.data_,l=yD(a,e,n);return l===null?null:new _i(l)}else{const a=new Uint8Array(this.data_.buffer,e,n-e);return new _i(a,!0)}}static getBlob(...e){if(dy()){const n=e.map(a=>a instanceof _i?a.data_:a);return new _i(gD.apply(null,n))}else{const n=e.map(d=>hy(d)?bD(Jr.RAW,d).data:d.data_);let a=0;n.forEach(d=>{a+=d.byteLength});const l=new Uint8Array(a);let u=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)l[u++]=d[p]}),new _i(l,!0)}}uploadData(){return this.data_}}function fy(s){let e;try{e=JSON.parse(s)}catch{return null}return oD(e)?e:null}function ED(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function kD(s,e){const n=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?n:s+"/"+n}function G_(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function SD(s,e){return e}class Ps{constructor(e,n,a,l){this.server=e,this.local=n||e,this.writable=!!a,this.xform=l||SD}}let Wh=null;function jD(s){return!hy(s)||s.length<2?s:G_(s)}function K_(){if(Wh)return Wh;const s=[];s.push(new Ps("bucket")),s.push(new Ps("generation")),s.push(new Ps("metageneration")),s.push(new Ps("name","fullPath",!0));function e(u,d){return jD(d)}const n=new Ps("name");n.xform=e,s.push(n);function a(u,d){return d!==void 0?Number(d):d}const l=new Ps("size");return l.xform=a,s.push(l),s.push(new Ps("timeCreated")),s.push(new Ps("updated")),s.push(new Ps("md5Hash",null,!0)),s.push(new Ps("cacheControl",null,!0)),s.push(new Ps("contentDisposition",null,!0)),s.push(new Ps("contentEncoding",null,!0)),s.push(new Ps("contentLanguage",null,!0)),s.push(new Ps("contentType",null,!0)),s.push(new Ps("metadata","customMetadata",!0)),Wh=s,Wh}function ND(s,e){function n(){const a=s.bucket,l=s.fullPath,u=new Ls(a,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function CD(s,e,n){const a={};a.type="file";const l=n.length;for(let u=0;u<l;u++){const d=n[u];a[d.local]=d.xform(a,e[d.server])}return ND(a,s),a}function Y_(s,e,n){const a=fy(e);return a===null?null:CD(s,a,n)}function RD(s,e,n,a){const l=fy(e);if(l===null||!hy(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const w=s.bucket,T=s.fullPath,k="/b/"+d(w)+"/o/"+d(T),P=ef(k,n,a),W=H_({alt:"media",token:y});return P+W})[0]}function AD(s,e){const n={},a=e.length;for(let l=0;l<a;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}const M2="prefixes",P2="items";function ID(s,e,n){const a={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[M2])for(const l of n[M2]){const u=l.replace(/\/$/,""),d=s._makeStorageReference(new Ls(e,u));a.prefixes.push(d)}if(n[P2])for(const l of n[P2]){const u=s._makeStorageReference(new Ls(e,l.name));a.items.push(u)}return a}function DD(s,e,n){const a=fy(n);return a===null?null:ID(s,e,a)}class my{constructor(e,n,a,l){this.url=e,this.method=n,this.handler=a,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function py(s){if(!s)throw uy()}function MD(s,e){function n(a,l){const u=Y_(s,l,e);return py(u!==null),u}return n}function PD(s,e){function n(a,l){const u=DD(s,e,l);return py(u!==null),u}return n}function LD(s,e){function n(a,l){const u=Y_(s,l,e);return py(u!==null),RD(u,l,s.host,s._protocol)}return n}function gy(s){function e(n,a){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=WI():l=$I():n.getStatus()===402?l=qI(s.bucket):n.getStatus()===403?l=GI(s.path):l=a,l.status=n.getStatus(),l.serverResponse=a.serverResponse,l}return e}function OD(s){const e=gy(s);function n(a,l){let u=e(a,l);return a.getStatus()===404&&(u=HI(s.path)),u.serverResponse=l.serverResponse,u}return n}function VD(s,e,n,a,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),a&&(u.pageToken=a),l&&(u.maxResults=l);const d=e.bucketOnlyServerUrl(),p=ef(d,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,w=new my(p,g,PD(s,e.bucket),y);return w.urlParams=u,w.errorHandler=gy(e),w}function BD(s,e,n){const a=e.fullServerUrl(),l=ef(a,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new my(l,u,LD(s,n),d);return p.errorHandler=OD(e),p}function UD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function zD(s,e,n){const a=Object.assign({},n);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=UD(null,e)),a}function FD(s,e,n,a,l){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let he="";for(let ke=0;ke<2;ke++)he=he+Math.random().toString().slice(2);return he}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=zD(e,a,l),w=AD(y,n),T="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,k=`\r
--`+g+"--",P=_i.getBlob(T,a,k);if(P===null)throw ZI();const W={name:y.fullPath},B=ef(u,s.host,s._protocol),L="POST",re=s.maxUploadRetryTime,X=new my(B,L,MD(s,n),re);return X.urlParams=W,X.headers=d,X.body=P.uploadData(),X.errorHandler=gy(e),X}class HD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=go.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=go.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=go.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,a,l,u){if(this.sent_)throw Pc("cannot .send() more than once");if(Pi(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class qD extends HD{initXhr(){this.xhr_.responseType="text"}}function yy(){return new qD}class Eo{constructor(e,n){this._service=e,n instanceof Ls?this._location=n:this._location=Ls.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Eo(e,n)}get root(){const e=new Ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return G_(this._location.path)}get storage(){return this._service}get parent(){const e=ED(this._location.path);if(e===null)return null;const n=new Ls(this._location.bucket,e);return new Eo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw nD(e)}}function $D(s,e,n){s._throwIfRoot("uploadBytes");const a=FD(s.storage,s._location,K_(),new _i(e,!0),n);return s.storage.makeRequestWithTokens(a,yy).then(l=>({metadata:l,ref:s}))}function WD(s){const e={prefixes:[],items:[]};return Q_(s,e).then(()=>e)}async function Q_(s,e,n){const l=await GD(s,{pageToken:n});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await Q_(s,e,l.nextPageToken)}function GD(s,e){e!=null&&typeof e.maxResults=="number"&&ag("options.maxResults",1,1e3,e.maxResults);const n=e||{},a=VD(s.storage,s._location,"/",n.pageToken,n.maxResults);return s.storage.makeRequestWithTokens(a,yy)}function KD(s){s._throwIfRoot("getDownloadURL");const e=BD(s.storage,s._location,K_());return s.storage.makeRequestWithTokens(e,yy).then(n=>{if(n===null)throw eD();return n})}function YD(s,e){const n=kD(s._location.path,e),a=new Ls(s._location.bucket,n);return new Eo(s.storage,a)}function QD(s){return/^[A-Za-z]+:\/\//.test(s)}function XD(s,e){return new Eo(s,e)}function X_(s,e){if(s instanceof vy){const n=s;if(n._bucket==null)throw JI();const a=new Eo(n,n._bucket);return e!=null?X_(a,e):a}else return e!==void 0?YD(s,e):s}function JD(s,e){if(e&&QD(e)){if(s instanceof vy)return XD(s,e);throw rg("To use ref(service, url), the first argument must be a Storage instance.")}else return X_(s,e)}function L2(s,e){const n=e?.[z_];return n==null?null:Ls.makeFromBucketSpec(n,s)}function ZD(s,e,n,a={}){s.host=`${e}:${n}`;const l=Pi(e);l&&(mg(`https://${s.host}/b`),pg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=a;u&&(s._overrideAuthToken=typeof u=="string"?u:vw(u,s.app.options.projectId))}class vy{constructor(e,n,a,l,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=U_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zI,this._maxUploadRetryTime=FI,this._requests=new Set,l!=null?this._bucket=Ls.makeFromBucketSpec(l,this._host):this._bucket=L2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ls.makeFromBucketSpec(this._url,e):this._bucket=L2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ag("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ag("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Eo(this,e)}_makeRequest(e,n,a,l,u=!0){if(this._deleted)return new sD(F_());{const d=mD(e,this._appId,a,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[a,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,l).getPromise()}}const O2="@firebase/storage",V2="0.14.0";const J_="storage";function eM(s,e,n){return s=Vn(s),$D(s,e,n)}function B2(s){return s=Vn(s),WD(s)}function Xc(s){return s=Vn(s),KD(s)}function wl(s,e){return s=Vn(s),JD(s,e)}function tM(s=bg(),e){s=Vn(s);const a=Dd(s,J_).getImmediate({identifier:e}),l=pw("storage");return l&&nM(a,...l),a}function nM(s,e,n,a={}){ZD(s,e,n,a)}function sM(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new vy(n,a,l,e,ko)}function rM(){vo(new Ni(J_,sM,"PUBLIC").setMultipleInstances(!0)),Zr(O2,V2,""),Zr(O2,V2,"esm2020")}rM();const Z_={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},by=vg(Z_),Lc=sx(by),tt=EI(by),xl=tM(by),aM=vg(Z_,"secondary"),g3=sx(aM),iM="EYdciKDOi3UYBLk1u8hHams5tmO2",eT=_.createContext();function la(){return _.useContext(eT)}function oM({children:s}){const[e,n]=_.useState(null),[a,l]=_.useState(!1),[u,d]=_.useState(!1),[p,g]=_.useState(null),[y,w]=_.useState(!0);_.useEffect(()=>lC(Lc,async re=>{if(n(re),re)if(re.uid===iM)l(!0),d(!1),g(null);else{l(!1);try{const X=$s(_s(tt,"clients"),Cs("uid","==",re.uid)),he=await Ws(X);if(he.empty)d(!1),g(null);else{const ke=he.docs[0];d(!0),g({id:ke.id,...ke.data()})}}catch(X){console.error("Error fetching client data:",X),d(!1),g(null)}}else l(!1),d(!1),g(null);w(!1)}),[]);const B={currentUser:e,isAdmin:a,isClient:u,clientData:p,updateClientData:L=>{g(re=>re&&{...re,...L})},login:async(L,re,X=!0)=>(await aC(Lc,X?Yw:Sg),await rC(Lc,L,re)),logout:()=>cC(Lc),resetPassword:L=>sC(Lc,L),loading:y};return i.jsx(eT.Provider,{value:B,children:s})}const tT=_.createContext();function Bi(){return _.useContext(tT)}function lM({children:s}){const[e,n]=_.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[a,l]=_.useState(()=>localStorage.getItem("accent")||"red");_.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),_.useEffect(()=>{localStorage.setItem("accent",a)},[a]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:a,setAccent:g=>l(g)};return i.jsx(tT.Provider,{value:p,children:s})}function cM(){const[s,e]=_.useState(""),[n,a]=_.useState(""),[l,u]=_.useState(!0),[d,p]=_.useState(""),[g,y]=_.useState(!1),[w,T]=_.useState(!1),[k,P]=_.useState(!1),{login:W,resetPassword:B,currentUser:L,isAdmin:re,isClient:X,clientData:he,loading:ke}=la(),ze=Gs();if(_.useEffect(()=>{if(!ke&&L){if(re)ze("/dashboard");else if(X){const S=he?.clientType;ze(S==="core_buddy"?"/client/core-buddy":S==="circuit_vip"||S==="circuit_dropin"?"/client/circuit":"/client")}}},[ke,L,re,X,he,ze]),ke)return null;const Ae=async S=>{S.preventDefault(),p(""),y(!0);try{await W(s,n,l)}catch(R){p(R.message||"Failed to log in"),y(!1)}},I=async S=>{if(S.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await B(s.trim()),P(!0)}catch(R){R.code==="auth/user-not-found"?p("No account found with this email"):p(R.message||"Failed to send reset email")}y(!1)};return i.jsx("div",{className:"login-container",children:i.jsxs("div",{className:"login-card",children:[i.jsxs("div",{className:"login-header",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),i.jsx("p",{children:w?"Reset Password":"Client Portal"})]}),d&&i.jsx("div",{className:"error-message",children:d}),k?i.jsxs("div",{className:"reset-sent",children:[i.jsx("div",{className:"reset-sent-icon",children:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),i.jsx("p",{children:"Reset email sent!"}),i.jsx("span",{children:"Check your inbox for a password reset link"}),i.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{T(!1),P(!1),p("")},children:"Back to Log In"})]}):w?i.jsxs("form",{onSubmit:I,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",children:"Email"}),i.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),placeholder:"Enter your email",required:!0})]}),i.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),i.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!1),p("")},children:"Back to Log In"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:Ae,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",children:"Email"}),i.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"password",children:"Password"}),i.jsx("input",{type:"password",id:"password",value:n,onChange:S=>a(S.target.value),required:!0})]}),i.jsx("div",{className:"remember-me",children:i.jsxs("label",{children:[i.jsx("input",{type:"checkbox",checked:l,onChange:S=>u(S.target.checked)}),i.jsx("span",{children:"Remember me"})]})}),i.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),i.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!0),p("")},children:"Forgot password?"})]}),i.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Ro({active:s}){const e=Gs(),{clientData:n}=la(),a=n?.clientType==="block"&&n?.coreBuddyAccess;return i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"})}),i.jsx("span",{children:"Workouts"})]}),i.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),i.jsx("span",{children:"Nutrition"})]}),i.jsxs("button",{className:`block-nav-tab${s==="progress"?" active":""}`,onClick:()=>e("/client/personal-bests?mode=corebuddy"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"Progress"})]}),a&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),i.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),i.jsx("span",{children:"Block"})]})]})}function Tu(s,e,n,a,l){const u=[];for(let d=0;d<s;d++){const p=(d*(360/s)-90)*(Math.PI/180);u.push({x1:e+a*Math.cos(p),y1:n+a*Math.sin(p),x2:e+l*Math.cos(p),y2:n+l*Math.sin(p),thick:d%5===0})}return u}const wy=Tu(60,100,100,85,96),mo=Tu(60,100,100,78,94),uM=Tu(60,100,100,82,94);Tu(60,50,50,38,46);const hM=Tu(60,40,40,30,37),vp=[10,25,50,100,200,500,1e3],gi=5;function hl(s){return s.toISOString().split("T")[0]}function dM(s){let e=0;for(const n of vp){if(s<n)return{prev:e,next:n};e=n}return{prev:vp[vp.length-1],next:s+100}}const fM={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},mM={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},bp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}],Fs={first_workout:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M6 4v16"}),i.jsx("path",{d:"M18 4v16"}),i.jsx("path",{d:"M6 12h12"}),i.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),i.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]}),workouts_10:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),i.jsx("path",{d:"M12 14v4"}),i.jsx("path",{d:"M10 18h4"})]}),workouts_25:i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),workouts_50:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M4 12h4"}),i.jsx("path",{d:"M16 12h4"}),i.jsx("path",{d:"M12 4v4"}),i.jsx("path",{d:"M12 16v4"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]}),workouts_100:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),streak_2:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),i.jsx("path",{d:"M16 2v4"}),i.jsx("path",{d:"M8 2v4"}),i.jsx("path",{d:"M3 10h18"}),i.jsx("path",{d:"M9 16l2 2 4-4"})]}),streak_4:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),i.jsx("path",{d:"M16 2v4"}),i.jsx("path",{d:"M8 2v4"}),i.jsx("path",{d:"M3 10h18"}),i.jsx("path",{d:"M8 16h8"}),i.jsx("path",{d:"M12 14v4"})]}),streak_8:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),i.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]}),programme_done:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),i.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),i.jsx("path",{d:"M4 22h16"}),i.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),i.jsx("path",{d:"M9 12l2 2 4-4"})]}),habits_7:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),nutrition_7:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),i.jsx("path",{d:"M9 7h6"})]}),first_pb:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"8",r:"6"}),i.jsx("path",{d:"M12 14v8"}),i.jsx("path",{d:"M9 18l3 3 3-3"}),i.jsx("path",{d:"M10 6l2 2 2-2"})]}),pbs_5:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 20h18"}),i.jsx("path",{d:"M5 20V10l4-6"}),i.jsx("path",{d:"M9 20V4"}),i.jsx("path",{d:"M13 20V10l4-6"}),i.jsx("path",{d:"M17 20V4"}),i.jsx("path",{d:"M21 20V10"})]}),leaderboard_join:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},U2=[{id:"first_workout",icon:Fs.first_workout,name:"First Rep",desc:"Complete your first workout",category:"workouts"},{id:"workouts_10",icon:Fs.workouts_10,name:"On Fire",desc:"Complete 10 workouts",category:"workouts"},{id:"workouts_25",icon:Fs.workouts_25,name:"Lightning",desc:"Complete 25 workouts",category:"workouts"},{id:"workouts_50",icon:Fs.workouts_50,name:"Iron Will",desc:"Complete 50 workouts",category:"workouts"},{id:"workouts_100",icon:Fs.workouts_100,name:"Century Club",desc:"Complete 100 workouts",category:"workouts"},{id:"streak_2",icon:Fs.streak_2,name:"2 Week Warrior",desc:"2-week workout streak",category:"streak"},{id:"streak_4",icon:Fs.streak_4,name:"Month Strong",desc:"4-week workout streak",category:"streak"},{id:"streak_8",icon:Fs.streak_8,name:"Unbreakable",desc:"8-week workout streak",category:"streak"},{id:"programme_done",icon:Fs.programme_done,name:"Finisher",desc:"Complete a programme",category:"programme"},{id:"habits_7",icon:Fs.habits_7,name:"Habit Machine",desc:"7-day perfect habit streak",category:"habits"},{id:"nutrition_7",icon:Fs.nutrition_7,name:"Fuel Master",desc:"Log nutrition 7 days in a row",category:"nutrition"},{id:"first_pb",icon:Fs.first_pb,name:"Record Breaker",desc:"Set your first PB",category:"pbs"},{id:"pbs_5",icon:Fs.pbs_5,name:"Climbing",desc:"Set 5 personal bests",category:"pbs"},{id:"leaderboard_join",icon:Fs.leaderboard_join,name:"Competitor",desc:"Join the leaderboard",category:"social"}];function pM(){const{currentUser:s,isClient:e,clientData:n,logout:a,updateClientData:l,loading:u}=la(),{isDark:d,toggleTheme:p}=Bi(),g=Gs(),[y,w]=_.useState({hours:0,minutes:0,seconds:0}),[T,k]=_.useState(0),[P,W]=_.useState(0),[B,L]=_.useState(""),[re,X]=_.useState(0),[he,ke]=_.useState(0),[ze,Ae]=_.useState(!1),[I,S]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[R,D]=_.useState(null),[M,H]=_.useState(0),[A,We]=_.useState(null),[Nt,Y]=_.useState(!1),[Te,De]=_.useState(!1),[ct,rt]=_.useState(0),[V,G]=_.useState(0),[ge,Se]=_.useState([]),[Ve,Me]=_.useState([]),[nt,ht]=_.useState(null),[pt,Wt]=_.useState(!1),pn=_.useRef(null),[Ct,wt]=_.useState([]),[ne,gn]=_.useState(null),[zt,vt]=_.useState(0),[Rt,at]=_.useState(0),[He,Gt]=_.useState(0),[ns,At]=_.useState(0),[Bt,Dn]=_.useState(null),Ht=_.useCallback((we,Ke="info")=>{Dn({message:we,type:Ke}),setTimeout(()=>Dn(null),4e3)},[]);_.useEffect(()=>{!u&&!s&&g("/")},[u,s,g]),_.useEffect(()=>{n?.photoURL&&ht(n.photoURL)},[n]);const wn=async we=>{const Ke=we.target.files?.[0];if(!(!Ke||!n)){if(!Ke.type.startsWith("image/")){Ht("Please select an image file","error");return}if(Ke.size>5*1024*1024){Ht("Image must be under 5MB","error");return}Wt(!0);try{const st=await new Promise(Fe=>{const _t=new Image;_t.onload=()=>{const St=document.createElement("canvas"),Dt=400;let Ft=_t.width,bt=_t.height;Ft>bt?(bt=bt/Ft*Dt,Ft=Dt):(Ft=Ft/bt*Dt,bt=Dt),St.width=Ft,St.height=bt,St.getContext("2d").drawImage(_t,0,0,Ft,bt),St.toBlob(nn=>Fe(nn),"image/jpeg",.75)},_t.src=URL.createObjectURL(Ke)}),xt=wl(xl,`profilePhotos/${n.id}`);await eM(xt,st);const qt=await Xc(xt);await OI(Tt(tt,"clients",n.id),{photoURL:qt}),ht(qt),l({photoURL:qt}),Ht("Profile photo updated!","success")}catch(st){console.error("Photo upload error:",st),Ht("Failed to upload photo","error")}Wt(!1),pn.current&&(pn.current.value="")}};_.useEffect(()=>{const we=()=>{const st=new Date,xt=new Date(st);xt.setHours(23,59,59,999);const qt=xt-st,Fe=Math.floor(qt/(1e3*60*60)),_t=Math.floor(qt%(1e3*60*60)/(1e3*60)),St=Math.floor(qt%(1e3*60)/1e3);w({hours:Fe,minutes:_t,seconds:St}),k(60-St)};we();const Ke=setInterval(we,1e3);return()=>clearInterval(Ke)},[]),_.useEffect(()=>{const we=setInterval(()=>{At(Ke=>(Ke+1)%bp.length)},8e3);return()=>clearInterval(we)},[]),_.useEffect(()=>{if(!s||!n)return;(async()=>{let Ke=null,st=0,xt=[],qt=!1;try{const Fe=hl(new Date),_t=await Gn(Tt(tt,"clientProgrammes",n.id));if(_t.exists()){const Be=_t.data(),ut=fM[Be.templateId];if(Y(!0),ut){const Ye=Be.completedSessions||{},ot=Object.keys(Ye).length,dt=ut.duration*ut.daysPerWeek;W(dt>0?Math.round(ot/dt*100):0);const rn=Be.templateId.replace(/_/g," ").replace(/\b\w/g,Hn=>Hn.toUpperCase());L(rn);const Es=mM[Be.templateId];let Bn=!1;for(let Hn=1;Hn<=ut.duration&&!Bn;Hn++)for(let hn=0;hn<ut.daysPerWeek&&!Bn;hn++)Ye[`w${Hn}d${hn}`]||(We({week:Hn,dayIdx:hn,label:Es?.[hn]||`Day ${hn+1}`}),Bn=!0);Bn||(De(!0),qt=!0)}}const St=_s(tt,"workoutLogs"),Dt=$s(St,Cs("clientId","==",n.id));Ke=await Ws(Dt);const Ft=Ke.docs.filter(Be=>Be.data().type!=="programme").length;X(Ft);const bt=new Date,nn=bt.getDay(),$t=nn===0?6:nn-1,sn=new Date(bt);sn.setDate(bt.getDate()-$t),sn.setHours(0,0,0,0);const ln=hl(sn),un=Ke.docs.filter(Be=>(Be.data().date||"")>=ln).length;rt(un);const jn=_s(tt,"habitLogs"),z=$s(jn,Cs("clientId","==",n.id),Cs("date","==",Fe)),ue=await Ws(z);let fe=0;if(!ue.empty){const Be=ue.docs[0].data().habits||{};fe=Object.values(Be).filter(Boolean).length}ke(Math.round(fe/gi*100)),H(fe);const pe=await Gn(Tt(tt,"nutritionTargets",n.id));pe.exists()&&D(pe.data());const ce=await Gn(Tt(tt,"nutritionLogs",`${n.id}_${Fe}`));if(ce.exists()){const ut=(ce.data().entries||[]).reduce((Ye,ot)=>({protein:Ye.protein+(ot.protein||0),carbs:Ye.carbs+(ot.carbs||0),fats:Ye.fats+(ot.fats||0),calories:Ye.calories+(ot.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});S(ut)}}catch(Fe){console.error("Error loading dashboard stats:",Fe)}try{let Fe=[];const _t=await Gn(Tt(tt,"coreBuddyPBs",n.id));if(_t.exists()){const St=_t.data().exercises||{};G(Object.keys(St).length),st=Object.keys(St).length,Fe=Object.entries(St).sort(([,Dt],[,Ft])=>(Ft.weight||0)-(Dt.weight||0)).slice(0,3).map(([Dt,Ft])=>({name:Dt,weight:Ft.weight,reps:Ft.reps}))}if(Fe.length===0){const St={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},Dt=$s(_s(tt,"personalBests"),Cs("clientId","==",n.id)),Ft=await Ws(Dt);if(!Ft.empty){const bt={};Ft.docs.forEach($t=>{const sn=$t.data().benchmarks||{};Object.entries(sn).forEach(([ln,un])=>{if(!un.weight||!St[ln])return;const jn=(un.weight||0)*(un.reps||1);(!bt[ln]||jn>(bt[ln].weight||0)*(bt[ln].reps||1))&&(bt[ln]={name:St[ln],weight:un.weight,reps:un.reps})})});const nn=Object.values(bt);G(nn.length),st=nn.length,Fe=nn.sort(($t,sn)=>(sn.weight||0)-($t.weight||0)).slice(0,3)}}xt=Fe,Se(Fe)}catch(Fe){console.error("PB fetch error:",Fe)}try{const Fe=_s(tt,"clients"),_t=$s(Fe,Cs("leaderboardOptIn","==",!0)),Dt=(await Ws(_t)).docs.map(Ft=>({id:Ft.id,name:Ft.data().name}));Me(Dt.slice(0,3))}catch(Fe){console.error("Leaderboard preview error:",Fe)}try{let Fe=0;if(Ke){const $t=Ke.docs.map(sn=>sn.data().date).filter(Boolean).sort().reverse();if($t.length>0){const sn=new Date;let ln=new Date(sn);e:for(let un=0;un<52;un++){const jn=new Date(ln),z=jn.getDay(),ue=z===0?6:z-1;jn.setDate(jn.getDate()-ue),jn.setHours(0,0,0,0);const fe=new Date(jn);fe.setDate(fe.getDate()+7);const pe=hl(jn),ce=hl(fe);if($t.some(ut=>ut>=pe&&ut<ce))Fe++;else{if(un>0)break e;break}ln.setDate(ln.getDate()-7)}}}vt(Fe);let _t=0;for(let $t=0;$t<30;$t++){const sn=new Date;sn.setDate(sn.getDate()-$t);const ln=hl(sn);try{const un=await Ws($s(_s(tt,"habitLogs"),Cs("clientId","==",n.id),Cs("date","==",ln)));if(un.empty)break;{const jn=un.docs[0].data().habits||{};if(Object.values(jn).filter(Boolean).length>=gi)_t++;else break}}catch{break}}at(_t);let St=0;for(let $t=0;$t<30;$t++){const sn=new Date;sn.setDate(sn.getDate()-$t);const ln=hl(sn);try{const un=await Gn(Tt(tt,"nutritionLogs",`${n.id}_${ln}`));if(un.exists()&&(un.data().entries||[]).length>0)St++;else break}catch{break}}Gt(St);const Dt=Ke?Ke.docs.length:0,Ft=[],bt=$t=>Ft.push($t);Dt>=1&&bt("first_workout"),Dt>=10&&bt("workouts_10"),Dt>=25&&bt("workouts_25"),Dt>=50&&bt("workouts_50"),Dt>=100&&bt("workouts_100"),Fe>=2&&bt("streak_2"),Fe>=4&&bt("streak_4"),Fe>=8&&bt("streak_8"),qt&&bt("programme_done"),_t>=7&&bt("habits_7"),St>=7&&bt("nutrition_7"),(st>0||xt.length>0)&&bt("first_pb"),st>=5&&bt("pbs_5"),n.leaderboardOptIn&&bt("leaderboard_join"),wt(Ft);const nn={};Ft.forEach($t=>{nn[$t]={unlockedAt:new Date().toISOString()}}),Wn(Tt(tt,"achievements",n.id),{badges:nn,updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(Fe){console.error("Achievement computation error:",Fe)}Ae(!0)})()},[s,n]);const de=we=>{const Ke=we.currentTarget,st=Ke.querySelector(".ripple");st&&st.remove();const xt=Ke.getBoundingClientRect(),qt=Math.max(xt.width,xt.height),Fe=we.clientX-xt.left-qt/2,_t=we.clientY-xt.top-qt/2,St=document.createElement("span");St.className="ripple",St.style.cssText=`width:${qt}px;height:${qt}px;left:${Fe}px;top:${_t}px;`,Ke.appendChild(St),setTimeout(()=>St.remove(),600)},ve=n?.name?.split(" ")[0]||"there",{prev:je,next:Qe}=dM(re),qe=Qe>je?Math.round((re-je)/(Qe-je)*100):100,Pe=[{label:"Programme",value:`${P}%`,pct:P,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${re}`,pct:qe,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${he}%`,pct:he,color:"#38B6FF",size:"normal"}],Ge=we=>!R||!R[we]?0:Math.min(Math.round(I[we]/R[we]*100),100),Ue=(()=>{const we=new Date().getHours();return ze&&M>=gi&&I.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:we>=5&&we<12?{main:"Rise and grind,",sub:"let's get after it!"}:we>=12&&we<17?{main:"Oye",sub:"crack on and make it count!"}:we>=17&&we<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),Ie=ze?Nt&&A&&!Te?{label:"NEXT SESSION",message:`Week ${A.week}, Day ${A.dayIdx+1}  ${A.label}`,cta:"Continue",action:()=>g("/client/core-buddy/programmes"),pct:P,ringLabel:`${P}%`}:M<gi?{label:"DAILY HABITS",message:`${M}/${gi} completed`,cta:"Open Habits",action:()=>g("/client/core-buddy/consistency"),pct:he,ringLabel:`${M}/${gi}`}:I.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>g("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:Nt?Te?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>g("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>g("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null;return i.jsxs("div",{className:"cb-dashboard","data-theme":d?"dark":"light",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsxs("div",{className:"header-actions",children:[i.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:d?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),i.jsx("button",{onClick:a,"aria-label":"Log out",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),i.jsx("polyline",{points:"16 17 21 12 16 7"}),i.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),i.jsxs("main",{className:"cb-main",children:[i.jsxs("div",{className:"cb-ring-container",children:[i.jsxs("div",{className:"cb-ring",children:[i.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:wy.map((we,Ke)=>{const st=Ke<T;return i.jsx("line",{x1:we.x1,y1:we.y1,x2:we.x2,y2:we.y2,className:`ring-tick ${st?"elapsed":"remaining"}`,strokeWidth:we.thick?"3":"2"},Ke)})}),i.jsx("div",{className:"cb-ring-center",children:i.jsxs("div",{className:"cb-ring-logo",onClick:()=>pn.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[i.jsx("img",{src:nt||"/Logo.webp",alt:nt?"Profile":"Mind Core Fitness"}),i.jsx("div",{className:`cb-photo-overlay${pt?" uploading":""}`,children:pt?i.jsx("div",{className:"cb-photo-spinner"}):i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[i.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),i.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),i.jsx("input",{ref:pn,type:"file",accept:"image/*",onChange:wn,style:{display:"none"}})]})})]}),i.jsxs("p",{className:"cb-ring-tagline",children:[bp[ns].text," ",i.jsx("strong",{children:bp[ns].bold})]},ns)]}),i.jsx("div",{className:"cb-stats-row",children:Pe.map(we=>{const Ke=(we.size==="large",38),st=2*Math.PI*Ke,xt=st-we.pct/100*st;return i.jsxs("div",{className:`cb-stat-item${we.size==="large"?" cb-stat-large":""}`,children:[i.jsxs("div",{className:"cb-stat-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:Ke}),i.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:Ke,style:{stroke:we.color},strokeDasharray:st,strokeDashoffset:xt})]}),i.jsx("span",{className:"cb-stat-value",style:{color:we.color},children:we.value})]}),i.jsx("span",{className:"cb-stat-label",children:we.label})]},we.label)})}),i.jsxs("p",{className:"cb-coach-msg",children:[Ue.main," ",i.jsx("strong",{children:ve}),"  ",Ue.sub]}),Ie&&i.jsxs("button",{className:"cb-nudge-card",onClick:Ie.action||void 0,style:Ie.action?void 0:{cursor:"default"},children:[i.jsxs("div",{className:"cb-nudge-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),i.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-Ie.pct/100*2*Math.PI*38})]}),i.jsx("span",{className:"cb-nudge-ring-val",children:Ie.ringLabel})]}),i.jsxs("div",{className:"cb-nudge-info",children:[i.jsx("span",{className:"cb-nudge-label",children:Ie.label}),i.jsx("span",{className:"cb-nudge-title",children:Ie.message}),Ie.cta&&i.jsxs("span",{className:"cb-nudge-cta",children:[Ie.cta," "]})]})]}),i.jsxs("div",{className:"cb-features",children:[i.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:we=>{de(we),g("/client/core-buddy/nutrition")},children:[i.jsxs("div",{className:"cb-card-top-row",children:[i.jsx("div",{className:"cb-card-content",children:i.jsx("h3",{children:"Today's Nutrition"})}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsx("div",{className:"cb-card-preview-row",children:i.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:Ge("protein"),color:"#14b8a6"},{label:"C",pct:Ge("carbs"),color:"var(--color-primary)"},{label:"F",pct:Ge("fats"),color:"#eab308"},{label:"Cal",pct:Ge("calories"),color:"#38B6FF"}].map(we=>{const st=2*Math.PI*38,xt=st-we.pct/100*st;return i.jsxs("div",{className:"cb-mini-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),i.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:we.color},strokeDasharray:st,strokeDashoffset:xt})]}),i.jsx("span",{style:{color:we.color},children:we.label})]},we.label)})})}),i.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),i.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:we=>{de(we),g("/client/core-buddy/workouts")},children:[i.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),i.jsxs("div",{className:"cb-hero-stats",children:[i.jsxs("span",{children:[ct," this week"]}),i.jsx("span",{className:"cb-hero-dot",children:""}),i.jsxs("span",{children:[re," total"]})]}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("div",{className:"cb-grid-row",children:[i.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:we=>{de(we),g("/client/core-buddy/consistency")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"Habits"}),i.jsx("div",{className:"cb-habit-dots",children:Array.from({length:gi},(we,Ke)=>i.jsx("span",{className:`cb-habit-dot${Ke<M?" done":""}`},Ke))}),i.jsxs("span",{className:"cb-habit-dots-label",children:[M,"/",gi," today"]})]}),i.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:we=>{de(we),g("/client/personal-bests?mode=corebuddy")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"PBs"}),ge.length>0?i.jsx("div",{className:"cb-pb-preview",children:ge.slice(0,2).map(we=>i.jsxs("div",{className:"cb-pb-entry",children:[i.jsx("span",{className:"cb-pb-name",children:we.name}),i.jsxs("span",{className:"cb-pb-value",children:[we.weight,"kg"]})]},we.name))}):i.jsxs("div",{className:"cb-progress-preview",children:[i.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),i.jsx("span",{children:"Start lifting!"})]})]}),i.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),i.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:we=>{de(we),g("/client/leaderboard")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"Leaderboard"}),Ve.length>0?i.jsx("div",{className:"cb-lb-preview",children:Ve.map((we,Ke)=>{const st=["#FFD700","#A8B4C0","#CD7F32"][Ke],xt=we.name?we.name.split(" ").map(Fe=>Fe[0]).join("").slice(0,2).toUpperCase():"?",qt=we.id===n?.id;return i.jsxs("div",{className:`cb-lb-entry${qt?" cb-lb-me":""}`,children:[i.jsx("div",{className:"cb-lb-avatar",style:{borderColor:st},children:i.jsx("span",{children:xt})}),i.jsxs("span",{className:"cb-lb-rank",style:{color:st},children:["#",Ke+1]})]},we.id)})}):i.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("div",{className:"cb-achievements-section",children:[i.jsx("h3",{className:"cb-achievements-title",children:"Achievements"}),i.jsx("div",{className:"cb-badges-scroll",children:U2.map(we=>{const Ke=Ct.includes(we.id);return i.jsxs("button",{className:`cb-badge${Ke?" unlocked":" locked"}`,onClick:()=>gn(ne?.id===we.id?null:we),children:[i.jsx("span",{className:"cb-badge-icon",children:we.icon}),i.jsx("span",{className:"cb-badge-name",children:we.name})]},we.id)})}),ne&&i.jsxs("div",{className:"cb-badge-detail",children:[i.jsx("span",{className:"cb-badge-detail-icon",children:ne.icon}),i.jsxs("div",{className:"cb-badge-detail-info",children:[i.jsx("strong",{children:ne.name}),i.jsx("span",{children:ne.desc}),Ct.includes(ne.id)?i.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):i.jsx("span",{className:"cb-badge-status locked",children:"Locked"})]})]}),i.jsxs("p",{className:"cb-badges-count",children:[Ct.length,"/",U2.length," unlocked"]})]})]})]}),i.jsx(Ro,{active:"home"}),Bt&&i.jsxs("div",{className:`toast-notification ${Bt.type}`,children:[Bt.type==="info"&&i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),i.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Bt.message]})]})}const wp=new Map;function yi(){return new Date().toISOString().split("T")[0]}const gM=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],yM={breakfast:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),i.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),i.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),i.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),i.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function vM(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function bM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=la(),{isDark:l,toggleTheme:u,accent:d}=Bi(),p=Gs(),[g,y]=_.useState("loading"),[w,T]=_.useState(null),[k,P]=_.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[W,B]=_.useState(null),[L,re]=_.useState(yi()),[X,he]=_.useState({entries:[],water:0}),[ke,ze]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[Ae,I]=_.useState(!1),[S,R]=_.useState(!1),[D,M]=_.useState(()=>{const E=new Date;return{year:E.getFullYear(),month:E.getMonth()}}),[H,A]=_.useState(vM),[We,Nt]=_.useState(null),[Y,Te]=_.useState(null),[De,ct]=_.useState(!1),[rt,V]=_.useState(null),[G,ge]=_.useState(""),[Se,Ve]=_.useState(!1),[Me,nt]=_.useState(""),[ht,pt]=_.useState([]),[Wt,pn]=_.useState(!1),[Ct,wt]=_.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[ne,gn]=_.useState(null),[zt,vt]=_.useState("100"),[Rt,at]=_.useState(0),[He,Gt]=_.useState("weight"),[ns,At]=_.useState(0),[Bt,Dn]=_.useState(null);_.useRef(null);const Ht=_.useRef(!1),wn=_.useRef(null),de=_.useRef(null),ve=_.useRef(null),je=_.useCallback((E,C="info")=>{Dn({message:E,type:C}),setTimeout(()=>Dn(null),3e3)},[]);_.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const C=await Gn(Tt(tt,"nutritionTargets",n.id));C.exists()?(T(C.data()),y("dashboard")):y("setup")}catch(C){console.error("Error loading nutrition data:",C),y("setup")}})()},[n?.id]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const C=await Gn(Tt(tt,"nutritionLogs",`${n.id}_${L}`));if(C.exists()){const $=C.data();he({entries:$.entries||[],water:$.water||0})}else he({entries:[],water:0})}catch(C){console.error("Error loading log:",C),he({entries:[],water:0})}})()},[n?.id,L]),_.useEffect(()=>{const E=X.entries.reduce((C,$)=>({protein:C.protein+($.protein||0),carbs:C.carbs+($.carbs||0),fats:C.fats+($.fats||0),calories:C.calories+($.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});ze(E)},[X.entries]);const Qe=async E=>{try{await Wn(Tt(tt,"nutritionLogs",`${n.id}_${L}`),{clientId:n.id,date:L,entries:E.entries,water:E.water,updatedAt:lt.now()})}catch(C){console.error("Error saving nutrition log:",C)}},qe=L===yi(),Pe=(E,C)=>new Date(E,C+1,0).getDate(),Ge=(E,C)=>new Date(E,C,1).getDay(),Ue=["January","February","March","April","May","June","July","August","September","October","November","December"],Ie=["Su","Mo","Tu","We","Th","Fr","Sa"],we=()=>{let E=parseFloat(k.weight);k.weightUnit==="lbs"&&(E*=.453592);let C;k.heightUnit==="cm"?C=parseFloat(k.height):C=(parseFloat(k.heightFeet)||0)*30.48+(parseFloat(k.heightInches)||0)*2.54;const $=parseInt(k.age);let J=k.gender==="male"?10*E+6.25*C-5*$+5:10*E+6.25*C-5*$-161;const Re=J*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[k.dailyActivity],Ce={low:100,moderate:200,high:300,daily:400},Lt=Math.round(Re+Ce[k.trainingFrequency]);let gt=Lt,q,le;switch(k.goal){case"lose":gt=Lt*(1-{light:.15,moderate:.2,harsh:.25}[k.deficitLevel]),q=2.2,le=.3;break;case"build":gt=Lt*1.1,q=2,le=.22;break;default:q=1.8,le=.25}gt=Math.max(gt,k.gender==="male"?1400:1100);const se=Math.round(E*q),Ee=Math.round(gt*le/9),Ne=Math.max(0,Math.round((gt-se*4-Ee*9)/4));B({calories:Math.round(gt),protein:se,carbs:Ne,fats:Ee,bmr:Math.round(J),neat:Math.round(Re),exerciseAdd:Ce[k.trainingFrequency],tdee:Math.round(Lt)})},Ke=async()=>{if(W)try{const E={clientId:n.id,calories:W.calories,protein:W.protein,carbs:W.carbs,fats:W.fats,waterGoal:8,goal:k.goal,updatedAt:lt.now()};await Wn(Tt(tt,"nutritionTargets",n.id),E),T(E),y("dashboard"),je("Macro targets saved!","success")}catch(E){console.error("Error saving targets:",E),je("Failed to save targets. Please try again.","error")}},st=()=>{const E=k.weight&&parseFloat(k.weight)>0,C=k.age&&parseInt(k.age)>0,$=k.heightUnit==="cm"?k.height&&parseFloat(k.height)>0:k.heightFeet&&parseFloat(k.heightFeet)>0||k.heightInches&&parseFloat(k.heightInches)>0;return E&&C&&$},xt="nut_favourite_foods",qt=()=>{try{return JSON.parse(localStorage.getItem(xt)||"[]")}catch{return[]}},Fe=E=>qt().some(C=>C.name.toLowerCase()===(E||"").toLowerCase()),_t=E=>{const C=qt(),$=C.findIndex(J=>J.name.toLowerCase()===E.name.toLowerCase());$>=0?C.splice($,1):C.unshift({name:E.name,protein:E.protein,carbs:E.carbs,fats:E.fats,calories:E.calories,serving:E.serving,per100g:E.per100g||null,servingUnit:E.servingUnit||"g",portion:E.portion||null}),localStorage.setItem(xt,JSON.stringify(C)),At(J=>J+1)},St=E=>{const C=[...X.entries,{...E,meal:H,id:Date.now(),addedAt:new Date().toISOString()}],$={...X,entries:C};he($),Qe($),Te(null),gn(null),vt("100"),at(0),Gt("weight"),wt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),je("Food added!","success")},Dt=E=>{const C=X.entries.filter(J=>J.id!==E),$={...X,entries:C};he($),Qe($)},Ft=_.useRef(null),bt=async()=>{ct(!0);const E=document.querySelector("#barcode-reader");if(!E){ct(!1),je("Scanner container not found.","error");return}if(!Ft.current)try{const $=await vr(()=>import("./quagga.min-BbicSfvA.js").then(J=>J.q),[]);Ft.current=$.default}catch($){console.error("Failed to load barcode scanner:",$),ct(!1),je("Could not load scanner.","error");return}const C=Ft.current;C.init({inputStream:{type:"LiveStream",target:E,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},$=>{if($){console.error("Quagga init error:",$),ct(!1),je("Could not access camera. Check permissions.","error");return}C.start(),Ht.current=!0}),C.onDetected($=>{const J=$.codeResult.decodedCodes?.filter(Re=>Re.error!==void 0)?.map(Re=>Re.error)||[];if((J.length>0?J.reduce((Re,Ce)=>Re+Ce,0)/J.length:1)<.15){const Re=$.codeResult.code;C.offDetected(),V(Re)}})},nn=()=>{const E=Ft.current;Ht.current&&E&&(E.stop(),E.offDetected(),Ht.current=!1),ct(!1)},$t=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,sn=E=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((E||"").replace(/\s/g,"")),ln=E=>{if(!E)return{value:100,unit:"g"};const C=E.toLowerCase().replace(/\s/g,""),$=C.match(/([\d.]+)/),J=$?parseFloat($[1]):100;return sn(E)?/cl/.test(C)?{value:J*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(C)&&!/ml/.test(C)?{value:J*1e3,unit:"ml"}:{value:J,unit:"ml"}:{value:J,unit:"g"}},un=E=>{if(sn(E.serving_size)||sn(E.quantity))return"ml";const C=E.product_name||E.product_name_en||"";return $t.test(C)?"ml":"g"},jn=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],z=(E,C)=>{const $=E||"",J=$.match(/\((\d+\.?\d*)\s*g\)/i),Le=$.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(J&&Le){const Lt=parseFloat(J[1]);let gt=Le[1].replace(/^\d+\s*/,"").trim();if(gt&&Lt>0)return{label:gt,weight:Lt}}const Re=$.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Re){const Lt=parseFloat(Re[1]);let gt=Re[2].replace(/^\d+\s*/,"").trim();if(gt&&Lt>0)return{label:gt,weight:Lt}}const Ce=C||"";for(const{pattern:Lt,label:gt,weight:q}of jn)if(Lt.test(Ce))return{label:gt,weight:q};return null},ue=E=>{const C=E.nutriments||{},$=un(E),J=ln(E.serving_size),Le=$==="ml"?J.unit==="ml"?J.value:100:J.value,Re=E.product_name||E.product_name_en||"Unknown Product",Ce=z(E.serving_size,Re);return{name:Re,brand:E.brands||"",image:E.image_small_url||E.image_url||null,servingSize:E.serving_size||"100g",servingValue:Le,servingUnit:$,portion:Ce,protein:Math.round(C.proteins_100g||C.proteins||0),carbs:Math.round(C.carbohydrates_100g||C.carbohydrates||0),fats:Math.round(C.fat_100g||C.fat||0),calories:Math.round(C["energy-kcal_100g"]||C["energy-kcal"]||(C.energy_100g?C.energy_100g/4.184:0)),per100g:!0}},fe=async E=>{Ve(!0);try{const C=`https://world.openfoodfacts.org/api/v2/product/${E}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,$=await fetch(C);if(!$.ok)throw new Error(`HTTP ${$.status}`);const J=await $.json();if(J.status==="success"||J.status===1||J.product){const Le=ue(J.product);Le.calories===0&&Le.protein===0&&Le.carbs===0?je("Product found but no nutrition data available.","error"):(gn(Le),Le.portion?(at(1),vt(String(Le.portion.weight)),Gt("portion")):(at(0),vt(String(Le.servingValue||100)),Gt("weight")),ge(""))}else je("Product not found. Try search or manual entry.","error")}catch(C){console.error("Barcode lookup error:",C),je("Failed to look up product. Check your connection.","error")}Ve(!1)},pe=(E,C,$)=>{const J=E.toLowerCase().trim(),Le=C.toLowerCase().trim(),Re=$.toLowerCase().trim();let Ce=0;return(J===Re||J===Re+"s"||J+"s"===Re)&&(Ce+=100),(J.endsWith(" "+Re)||J.endsWith(" "+Re+"s"))&&(Ce+=40),(J.startsWith(Re+" ")||J.startsWith(Re+"s "))&&(Ce+=15),Re.split(/\s+/).some(gt=>Le===gt||Le.startsWith(gt))&&(Ce+=30),Ce+=Math.max(0,30-J.length),Ce},ce=async()=>{if(!Me.trim())return;wn.current&&wn.current.abort();const E=new AbortController;wn.current=E;const C=Me.trim().toLowerCase(),$=C.split(/\s+/).filter(Boolean);if(wp.has(C)){pt(wp.get(C));return}pn(!0);try{const Le=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Me.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Re=await fetch(Le,{signal:E.signal});if(!Re.ok)throw new Error(`HTTP ${Re.status}`);const Lt=((await Re.json()).products||[]).map(gt=>ue(gt)).filter(gt=>gt.name!=="Unknown Product"&&(gt.calories>0||gt.protein>0)).filter(gt=>{const q=(gt.name+" "+gt.brand).toLowerCase();return $.every(le=>q.includes(le))}).sort((gt,q)=>pe(q.name,q.brand,C)-pe(gt.name,gt.brand,C)).slice(0,10);wp.set(C,Lt),pt(Lt),Lt.length===0&&je("No results found. Try a different search.","info")}catch(J){if(J.name==="AbortError")return;console.error("Search error:",J),je("Search failed. Check your connection.","error")}pn(!1)};_.useEffect(()=>{if(de.current&&clearTimeout(de.current),!(!Me.trim()||Y!=="search"||ne))return de.current=setTimeout(()=>{ce()},700),()=>clearTimeout(de.current)},[Me]);const Be=()=>{const E={...X,water:X.water+1};he(E),Qe(E)},ut=()=>{if(X.water<=0)return;const E={...X,water:X.water-1};he(E),Qe(E)},Ye={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},ot=80,dt=2*Math.PI*ot,rn=(E,C,$,J,Le)=>{const Re=J>0?Math.min(100,Math.round($/J*100)):0,Ce=dt-Re/100*dt,Lt=Ye[Le]||"#14b8a6";return i.jsxs("div",{className:"nut-ring-wrap",children:[i.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[i.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:ot}),i.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:ot,style:{stroke:Lt},strokeDasharray:dt,strokeDashoffset:Ce})]}),i.jsxs("div",{className:"nut-ring-center",children:[i.jsx("span",{className:"nut-ring-value",style:{color:Lt},children:Math.round($)}),i.jsxs("span",{className:"nut-ring-target",children:["/ ",J,E==="Calories"?"":"g"]}),i.jsx("span",{className:"nut-ring-label",style:{color:Lt},children:C})]}),i.jsxs("span",{className:"nut-ring-pct",style:{color:Lt},children:[Re,"%"]})]})};if(_.useEffect(()=>{if(!rt)return;const E=setTimeout(()=>{const C=rt;nn(),V(null),fe(C)},1500);return()=>clearTimeout(E)},[rt]),_.useEffect(()=>()=>{const E=Ft.current;if(Ht.current&&E){try{E.stop(),E.offDetected()}catch{}Ht.current=!1}},[]),a||g==="loading")return i.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsx("div",{className:"nut-loading-inline",children:i.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return i.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"nut-main",children:[i.jsxs("div",{className:"nut-setup-intro",children:[i.jsx("h2",{children:"Set Your Daily Targets"}),i.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),i.jsxs("div",{className:"nut-calc-form",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Gender"}),i.jsxs("div",{className:"nut-toggle-group",children:[i.jsx("button",{className:k.gender==="male"?"active":"",onClick:()=>{P(E=>({...E,gender:"male"})),B(null)},children:"Male"}),i.jsx("button",{className:k.gender==="female"?"active":"",onClick:()=>{P(E=>({...E,gender:"female"})),B(null)},children:"Female"})]})]}),i.jsxs("div",{className:"nut-form-row",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Age"}),i.jsx("input",{type:"number",value:k.age,onChange:E=>{P(C=>({...C,age:E.target.value})),B(null)},placeholder:"Years",min:"15",max:"100"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Weight"}),i.jsxs("div",{className:"nut-input-unit",children:[i.jsx("input",{type:"number",value:k.weight,onChange:E=>{P(C=>({...C,weight:E.target.value})),B(null)},placeholder:k.weightUnit,min:"30",max:"300"}),i.jsxs("div",{className:"nut-unit-toggle",children:[i.jsx("button",{className:k.weightUnit==="kg"?"active":"",onClick:()=>{P(E=>({...E,weightUnit:"kg"})),B(null)},children:"kg"}),i.jsx("button",{className:k.weightUnit==="lbs"?"active":"",onClick:()=>{P(E=>({...E,weightUnit:"lbs"})),B(null)},children:"lbs"})]})]})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Height"}),i.jsxs("div",{className:"nut-input-unit",children:[k.heightUnit==="cm"?i.jsx("input",{type:"number",value:k.height,onChange:E=>{P(C=>({...C,height:E.target.value})),B(null)},placeholder:"cm",min:"100",max:"250"}):i.jsxs("div",{className:"nut-height-imperial",children:[i.jsx("input",{type:"number",value:k.heightFeet,onChange:E=>{P(C=>({...C,heightFeet:E.target.value})),B(null)},placeholder:"ft",min:"4",max:"7"}),i.jsx("input",{type:"number",value:k.heightInches,onChange:E=>{P(C=>({...C,heightInches:E.target.value})),B(null)},placeholder:"in",min:"0",max:"11"})]}),i.jsxs("div",{className:"nut-unit-toggle",children:[i.jsx("button",{className:k.heightUnit==="cm"?"active":"",onClick:()=>{P(E=>({...E,heightUnit:"cm"})),B(null)},children:"cm"}),i.jsx("button",{className:k.heightUnit==="ft"?"active":"",onClick:()=>{P(E=>({...E,heightUnit:"ft"})),B(null)},children:"ft/in"})]})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Daily Activity (outside of training)"}),i.jsxs("select",{value:k.dailyActivity,onChange:E=>{P(C=>({...C,dailyActivity:E.target.value})),B(null)},children:[i.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),i.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),i.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),i.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Training Sessions per Week"}),i.jsxs("select",{value:k.trainingFrequency,onChange:E=>{P(C=>({...C,trainingFrequency:E.target.value})),B(null)},children:[i.jsx("option",{value:"low",children:"1-2 sessions"}),i.jsx("option",{value:"moderate",children:"3-4 sessions"}),i.jsx("option",{value:"high",children:"5-6 sessions"}),i.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Fitness Goal"}),i.jsxs("div",{className:"nut-goal-options",children:[i.jsxs("button",{className:k.goal==="lose"?"active":"",onClick:()=>{P(E=>({...E,goal:"lose"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"-"}),i.jsx("span",{children:"Lose Weight"})]}),i.jsxs("button",{className:k.goal==="maintain"?"active":"",onClick:()=>{P(E=>({...E,goal:"maintain"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"="}),i.jsx("span",{children:"Maintain"})]}),i.jsxs("button",{className:k.goal==="build"?"active":"",onClick:()=>{P(E=>({...E,goal:"build"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"+"}),i.jsx("span",{children:"Build Muscle"})]})]})]}),k.goal==="lose"&&i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Deficit Level"}),i.jsxs("div",{className:"nut-deficit-options",children:[i.jsxs("button",{className:k.deficitLevel==="light"?"active":"",onClick:()=>{P(E=>({...E,deficitLevel:"light"})),B(null)},children:[i.jsx("strong",{children:"Mild"}),i.jsx("span",{children:"15% below TDEE"})]}),i.jsxs("button",{className:k.deficitLevel==="moderate"?"active":"",onClick:()=>{P(E=>({...E,deficitLevel:"moderate"})),B(null)},children:[i.jsx("strong",{children:"Moderate"}),i.jsx("span",{children:"20% below TDEE"})]}),i.jsxs("button",{className:k.deficitLevel==="harsh"?"active":"",onClick:()=>{P(E=>({...E,deficitLevel:"harsh"})),B(null)},children:[i.jsx("strong",{children:"Aggressive"}),i.jsx("span",{children:"25% below TDEE"})]})]})]}),i.jsx("button",{className:"nut-calc-btn",onClick:we,disabled:!st(),children:"Calculate Macros"})]}),W&&i.jsxs("div",{className:"nut-calc-results",children:[i.jsx("h3",{children:"Your Daily Targets"}),i.jsxs("div",{className:"nut-calc-rings",children:[rn("Protein","Protein",W.protein,W.protein,"ring-protein"),rn("Carbs","Carbs",W.carbs,W.carbs,"ring-carbs"),rn("Fats","Fats",W.fats,W.fats,"ring-fats"),rn("Calories","Calories",W.calories,W.calories,"ring-cals")]}),i.jsxs("div",{className:"nut-calc-info",children:[i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"BMR (body at rest)"}),i.jsxs("span",{children:[W.bmr," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"+ Daily activity (NEAT)"}),i.jsxs("span",{children:[W.neat," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"+ Training sessions"}),i.jsxs("span",{children:["+",W.exerciseAdd," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[i.jsx("span",{children:"TDEE (total burn)"}),i.jsxs("span",{children:[W.tdee," cal"]})]})]}),i.jsx("button",{className:"nut-save-targets-btn",onClick:Ke,children:"Set as My Daily Targets"})]})]}),Bt&&i.jsx("div",{className:`toast-notification ${Bt.type}`,children:Bt.message})]});const Es=E=>{const C=new Date(E+"T12:00:00"),$=C.getDay(),J=new Date(C);J.setDate(C.getDate()-($+6)%7);const Le=[];for(let Re=0;Re<7;Re++){const Ce=new Date(J);Ce.setDate(J.getDate()+Re),Le.push(Ce.toISOString().split("T")[0])}return Le},Bn=["M","T","W","T","F","S","S"],Hn=(E,C="search")=>{A(E),C==="scan"?(Te("scan"),gn(null)):C==="manual"?(Te("manual"),wt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):C==="favourites"?Te("favourites"):(Te("search"),pt([]),nt(""))},hn=Es(L),U=new Date(L+"T12:00:00"),ie=`${Ue[U.getMonth()]} ${U.getFullYear()}`;return i.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"nut-dark-zone",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsxs("div",{className:"header-actions",children:[i.jsx("button",{onClick:()=>{y("setup"),B(null)},"aria-label":"Recalculate macros",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),i.jsxs("div",{className:"nut-dark-content",children:[i.jsxs("div",{className:"nut-week-strip",children:[i.jsxs("div",{className:"nut-week-header",children:[i.jsx("button",{className:"nut-week-arrow",onClick:()=>{const E=new Date(L+"T12:00:00");E.setDate(E.getDate()-7);const C=E.toISOString().split("T")[0];re(C)},"aria-label":"Previous week",children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:i.jsx("polyline",{points:"15 18 9 12 15 6"})})}),i.jsx("button",{className:"nut-week-month-label",onClick:()=>{I(!Ae),M({year:U.getFullYear(),month:U.getMonth()})},children:ie}),i.jsx("button",{className:"nut-week-arrow",onClick:()=>{const E=new Date(L+"T12:00:00");E.setDate(E.getDate()+7);const C=E.toISOString().split("T")[0];C<=yi()&&re(C)},"aria-label":"Next week",disabled:hn[6]>=yi(),children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:i.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),i.jsx("div",{className:"nut-week-days",children:hn.map((E,C)=>{const $=new Date(E+"T12:00:00").getDate(),J=E===L,Le=E>yi(),Re=E===yi();return i.jsxs("button",{className:`nut-week-day${J?" selected":""}${Re?" today":""}${Le?" future":""}`,disabled:Le,onClick:()=>re(E),children:[i.jsx("span",{className:"nut-week-day-letter",children:Bn[C]}),i.jsx("span",{className:"nut-week-day-num",children:$})]},E)})})]}),Ae&&i.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[i.jsxs("div",{className:"nut-cal-header",children:[i.jsx("button",{onClick:()=>M(E=>{let C=E.month-1,$=E.year;return C<0&&(C=11,$--),{year:$,month:C}}),children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("polyline",{points:"15 18 9 12 15 6"})})}),i.jsxs("span",{children:[Ue[D.month]," ",D.year]}),i.jsx("button",{onClick:()=>M(E=>{let C=E.month+1,$=E.year;return C>11&&(C=0,$++),{year:$,month:C}}),disabled:D.year===new Date().getFullYear()&&D.month>=new Date().getMonth(),children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),i.jsx("div",{className:"nut-cal-days-header",children:Ie.map(E=>i.jsx("span",{children:E},E))}),i.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Ge(D.year,D.month))].map((E,C)=>i.jsx("span",{},`e${C}`)),[...Array(Pe(D.year,D.month))].map((E,C)=>{const $=C+1,J=`${D.year}-${String(D.month+1).padStart(2,"0")}-${String($).padStart(2,"0")}`,Le=J>yi(),Re=J===L,Ce=J===yi();return i.jsx("button",{className:`nut-cal-day${Re?" selected":""}${Ce?" today":""}${Le?" future":""}`,disabled:Le,onClick:()=>{re(J),I(!1)},children:$},$)})]})]}),i.jsxs("div",{className:"nut-rings-row",children:[rn("Protein","Protein",ke.protein,w.protein,"ring-protein"),rn("Carbs","Carbs",ke.carbs,w.carbs,"ring-carbs"),rn("Fats","Fats",ke.fats,w.fats,"ring-fats"),rn("Calories","kCal",ke.calories,w.calories,"ring-cals")]})]})]}),i.jsx("div",{className:"nut-light-zone",children:i.jsxs("div",{className:"nut-light-content",children:[qe&&i.jsxs("button",{className:"nut-water-quick",onClick:()=>R(!0),children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),i.jsxs("span",{className:"nut-water-quick-count",children:[X.water," / ",w?.waterGoal||8]}),i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),i.jsx("div",{className:"nut-log-section",children:i.jsx("div",{className:"nut-meals-list",children:gM.map(E=>{const C=X.entries.filter(J=>(J.meal||"snacks")===E.key),$=C.reduce((J,Le)=>({protein:J.protein+(Le.protein||0),carbs:J.carbs+(Le.carbs||0),fats:J.fats+(Le.fats||0),calories:J.calories+(Le.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return i.jsxs("div",{className:"nut-meal-card",children:[i.jsxs("div",{className:"nut-meal-card-header",children:[i.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${E.key}`,children:yM[E.key]}),i.jsx("span",{className:"nut-meal-card-title",children:E.label}),C.length>0&&i.jsxs("span",{className:"nut-meal-card-cal",children:[$.calories," cal"]}),qe&&i.jsxs("div",{className:"nut-add-wrapper",children:[i.jsx("button",{className:"nut-meal-add-btn",onClick:()=>Nt(We===E.key?null:E.key),"aria-label":`Add to ${E.label}`,children:i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),We===E.key&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>Nt(null)}),i.jsxs("div",{className:"nut-add-picker",children:[i.jsxs("button",{onClick:()=>{Nt(null),Hn(E.key,"scan")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),i.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),i.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),i.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),i.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),i.jsx("span",{children:"Scan"})]}),i.jsxs("button",{onClick:()=>{Nt(null),Hn(E.key,"search")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),i.jsx("span",{children:"Search"})]}),i.jsxs("button",{onClick:()=>{Nt(null),Hn(E.key,"manual")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),i.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),i.jsx("span",{children:"Manual"})]}),i.jsxs("button",{onClick:()=>{Nt(null),Hn(E.key,"favourites")},children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),i.jsx("span",{children:"Favs"})]})]})]})]})]}),C.length>0&&i.jsxs("div",{className:"nut-meal-bars",children:[i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,w.protein>0?$.protein/w.protein*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[$.protein,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,w.carbs>0?$.carbs/w.carbs*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[$.carbs,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,w.fats>0?$.fats/w.fats*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[$.fats,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,w.calories>0?$.calories/w.calories*100:0)}%`}})}),i.jsx("span",{className:"nut-meal-bar-val",children:$.calories})]})]}),C.length>0&&i.jsx("div",{className:"nut-log-list",children:C.map(J=>i.jsxs("div",{className:"nut-log-item",children:[i.jsxs("div",{className:"nut-log-item-info",children:[i.jsx("span",{className:"nut-log-item-name",children:J.name}),J.serving&&i.jsx("span",{className:"nut-log-item-serving",children:J.serving})]}),i.jsxs("div",{className:"nut-log-item-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[J.protein,"p"]}),i.jsxs("span",{className:"nut-macro-c",children:[J.carbs,"c"]}),i.jsxs("span",{className:"nut-macro-f",children:[J.fats,"f"]}),i.jsx("span",{className:"nut-macro-cal",children:J.calories})]}),qe&&i.jsx("button",{className:"nut-log-delete",onClick:()=>Dt(J.id),"aria-label":"Remove",children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},J.id))}),C.length===0&&i.jsx("div",{className:"nut-meal-empty",children:i.jsx("p",{children:qe?"Tap + to add food":"No entries"})})]},E.key)})})})]})}),S&&i.jsx("div",{className:"nut-modal-overlay",onClick:()=>R(!1),children:i.jsxs("div",{className:"nut-water-popup",onClick:E=>E.stopPropagation(),children:[i.jsxs("div",{className:"nut-water-popup-header",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),i.jsx("span",{children:"Water Intake"}),i.jsx("button",{className:"nut-modal-close",onClick:()=>R(!1),children:i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),i.jsxs("div",{className:"nut-water-popup-body",children:[i.jsx("div",{className:"nut-water-glasses",children:[...Array(w?.waterGoal||8)].map((E,C)=>i.jsx("div",{className:`nut-water-glass ${C<X.water?"filled":""}`,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:C<X.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},C))}),i.jsxs("div",{className:"nut-water-popup-count",children:[X.water," / ",w?.waterGoal||8," glasses"]}),i.jsxs("div",{className:"nut-water-btns",children:[i.jsx("button",{onClick:ut,disabled:X.water<=0,children:"-"}),i.jsx("button",{onClick:Be,children:"+"})]})]})]})}),Y&&i.jsx("div",{className:"nut-modal-overlay",onClick:()=>{nn(),V(null),Te(null),gn(null)},children:i.jsxs("div",{className:"nut-modal",onClick:E=>E.stopPropagation(),children:[i.jsxs("div",{className:"nut-modal-header",children:[i.jsx("h3",{children:Y==="scan"?"Scan Barcode":Y==="search"?"Search Food":Y==="favourites"?"Favourites":"Manual Entry"}),i.jsx("button",{className:"nut-modal-close",onClick:()=>{nn(),V(null),Te(null),gn(null)},children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Y==="scan"&&!ne&&i.jsxs("div",{className:"nut-scan-area",children:[i.jsxs("div",{className:"nut-scanner-wrapper",children:[i.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),De&&!rt&&i.jsx("div",{className:"nut-scan-line"}),rt&&i.jsxs("div",{className:"nut-scan-detected-overlay",children:[i.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})}),i.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),i.jsx("p",{className:"nut-scan-detected-code",children:rt})]})]}),!De&&i.jsxs("button",{className:"nut-scan-start-btn",onClick:bt,children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),i.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),i.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),i.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),i.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),De&&!rt&&i.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),i.jsx("div",{className:"nut-barcode-divider",children:i.jsx("span",{children:"or enter barcode manually"})}),i.jsxs("div",{className:"nut-barcode-manual",children:[i.jsx("input",{type:"text",inputMode:"numeric",value:G,onChange:E=>ge(E.target.value),onKeyDown:E=>E.key==="Enter"&&G.trim()&&fe(G.trim()),placeholder:"Enter barcode number"}),i.jsx("button",{onClick:()=>G.trim()&&fe(G.trim()),disabled:!G.trim()||Se,children:Se?"...":"Look Up"})]})]}),Y==="scan"&&ne&&(()=>{const E=ne.servingUnit||"g",C=ne.portion,$=He==="portion"&&C?Rt*C.weight:parseFloat(zt)||0,J=$/100,Le=E==="ml"?[100,200,250,500]:[50,100,150,200],Re=He==="portion"&&C?`${Rt} ${C.label}${Rt!==1?"s":""} (${Math.round($)}${E})`:`${Math.round($)}${E}`;return i.jsxs("div",{className:"nut-product-result",children:[ne.image&&i.jsx("img",{src:ne.image,alt:ne.name||"Product",className:"nut-product-img",loading:"lazy"}),i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:ne.name}),i.jsx("button",{className:`nut-fav-star confirm${Fe(ne.name)?" active":""}`,onClick:()=>_t({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Fe(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ne.brand&&i.jsx("p",{className:"nut-product-brand",children:ne.brand}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",E,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),C&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:He==="portion"?"active":"",onClick:()=>{Gt("portion"),Rt<1&&at(1)},children:"Portions"}),i.jsxs("button",{className:He==="weight"?"active":"",onClick:()=>{Gt("weight"),vt(String(Math.round($)||100))},children:["Custom (",E,")"]})]}),He==="portion"&&C?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Math.max(1,Rt-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:Rt}),i.jsxs("span",{className:"nut-stepper-label",children:[C.label,Rt!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round($),E]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Rt+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",E,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:zt,onChange:Ce=>vt(Ce.target.value),onFocus:Ce=>Ce.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Le.map(Ce=>i.jsxs("button",{className:`nut-quick-btn${zt===String(Ce)?" active":""}`,onClick:()=>vt(String(Ce)),children:[Ce,E]},Ce))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>{gn(null),Te("scan")},children:"Scan Again"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>St({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Re}),children:"Add"})]})]})})(),Y==="search"&&!ne&&i.jsxs("div",{className:"nut-search-area",children:[i.jsxs("div",{className:"nut-search-bar",children:[i.jsx("input",{type:"text",ref:ve,value:Me,onChange:E=>nt(E.target.value),onKeyDown:E=>{E.key==="Enter"&&(clearTimeout(de.current),ce())},onFocus:()=>setTimeout(()=>ve.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),i.jsx("button",{onClick:ce,disabled:Wt,children:Wt?"...":"Search"})]}),i.jsxs("div",{className:"nut-search-results",children:[ht.map((E,C)=>i.jsxs("button",{className:"nut-search-item",onClick:()=>{gn(E),E.portion?(at(1),vt(String(E.portion.weight)),Gt("portion")):(at(0),vt(String(E.servingValue||100)),Gt("weight"))},children:[E.image&&i.jsx("img",{src:E.image,alt:E.name||"Product",loading:"lazy"}),i.jsxs("div",{className:"nut-search-item-info",children:[i.jsx("span",{className:"nut-search-item-name",children:E.name}),E.brand&&i.jsx("span",{className:"nut-search-item-brand",children:E.brand}),i.jsxs("span",{className:"nut-search-item-macros",children:[E.calories," cal  ",E.protein,"p  ",E.carbs,"c  ",E.fats,"f per 100",E.servingUnit||"g"]})]})]},C)),ht.length===0&&Me&&!Wt&&i.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),Y==="search"&&ne&&(()=>{const E=ne.servingUnit||"g",C=ne.portion,$=He==="portion"&&C?Rt*C.weight:parseFloat(zt)||0,J=$/100,Le=E==="ml"?[100,200,250,500]:[50,100,150,200],Re=He==="portion"&&C?`${Rt} ${C.label}${Rt!==1?"s":""} (${Math.round($)}${E})`:`${Math.round($)}${E}`;return i.jsxs("div",{className:"nut-product-result",children:[ne.image&&i.jsx("img",{src:ne.image,alt:ne.name||"Product",className:"nut-product-img",loading:"lazy"}),i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:ne.name}),i.jsx("button",{className:`nut-fav-star confirm${Fe(ne.name)?" active":""}`,onClick:()=>_t({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Fe(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ne.brand&&i.jsx("p",{className:"nut-product-brand",children:ne.brand}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",E,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),C&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:He==="portion"?"active":"",onClick:()=>{Gt("portion"),Rt<1&&at(1)},children:"Portions"}),i.jsxs("button",{className:He==="weight"?"active":"",onClick:()=>{Gt("weight"),vt(String(Math.round($)||100))},children:["Custom (",E,")"]})]}),He==="portion"&&C?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Math.max(1,Rt-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:Rt}),i.jsxs("span",{className:"nut-stepper-label",children:[C.label,Rt!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round($),E]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Rt+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",E,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:zt,onChange:Ce=>vt(Ce.target.value),onFocus:Ce=>Ce.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Le.map(Ce=>i.jsxs("button",{className:`nut-quick-btn${zt===String(Ce)?" active":""}`,onClick:()=>vt(String(Ce)),children:[Ce,E]},Ce))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>gn(null),children:"Back to Search"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>St({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Re}),children:"Add"})]})]})})(),Y==="manual"&&i.jsxs("div",{className:"nut-manual-form",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Food Name"}),i.jsx("input",{type:"text",value:Ct.name,onChange:E=>wt(C=>({...C,name:E.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Serving Size (optional)"}),i.jsx("input",{type:"text",value:Ct.serving,onChange:E=>wt(C=>({...C,serving:E.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),i.jsxs("div",{className:"nut-manual-macros",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Protein (g)"}),i.jsx("input",{type:"number",value:Ct.protein,onChange:E=>wt(C=>({...C,protein:E.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Carbs (g)"}),i.jsx("input",{type:"number",value:Ct.carbs,onChange:E=>wt(C=>({...C,carbs:E.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Fats (g)"}),i.jsx("input",{type:"number",value:Ct.fats,onChange:E=>wt(C=>({...C,fats:E.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Calories"}),i.jsx("input",{type:"number",value:Ct.calories,onChange:E=>wt(C=>({...C,calories:E.target.value})),min:"0"})]})]}),i.jsx("button",{className:"nut-btn-primary",disabled:!Ct.name.trim(),onClick:()=>St({name:Ct.name,protein:parseFloat(Ct.protein)||0,carbs:parseFloat(Ct.carbs)||0,fats:parseFloat(Ct.fats)||0,calories:parseFloat(Ct.calories)||0,serving:Ct.serving||""}),children:"Add Food"})]}),Y==="favourites"&&!ne&&(()=>{const E=qt(),C=$=>{if($.per100g){const J=$.per100g;gn({name:$.name,brand:"",image:null,servingSize:$.serving||"100g",servingValue:100,servingUnit:$.servingUnit||"g",portion:$.portion||null,protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories,per100g:!0}),$.portion?(at(1),vt(String($.portion.weight)),Gt("portion")):(at(0),vt("100"),Gt("weight"))}else St({name:$.name,protein:$.protein,carbs:$.carbs,fats:$.fats,calories:$.calories,serving:$.serving||""})};return i.jsx("div",{className:"nut-recent-area",children:E.length===0?i.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):i.jsx("div",{className:"nut-recent-list",children:E.map(($,J)=>i.jsxs("div",{className:"nut-recent-item-row",children:[i.jsx("button",{className:"nut-fav-star active",onClick:Le=>{Le.stopPropagation(),_t($)},children:i.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("button",{className:"nut-recent-item",onClick:()=>C($),children:[i.jsxs("div",{className:"nut-recent-item-info",children:[i.jsx("span",{className:"nut-recent-item-name",children:$.name}),i.jsx("span",{className:"nut-recent-item-serving",children:$.serving||""})]}),i.jsxs("span",{className:"nut-recent-item-macros",children:[$.calories," cal"]})]})]},J))})})})(),Y==="favourites"&&ne&&(()=>{const E=ne.servingUnit||"g",C=ne.portion,$=He==="portion"&&C?Rt*C.weight:parseFloat(zt)||0,J=$/100,Le=E==="ml"?[100,200,250,500]:[50,100,150,200],Re=He==="portion"&&C?`${Rt} ${C.label}${Rt!==1?"s":""} (${Math.round($)}${E})`:`${Math.round($)}${E}`;return i.jsxs("div",{className:"nut-product-result",children:[i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:ne.name}),i.jsx("button",{className:`nut-fav-star confirm${Fe(ne.name)?" active":""}`,onClick:()=>_t({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Fe(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",E,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),C&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:He==="portion"?"active":"",onClick:()=>{Gt("portion"),Rt<1&&at(1)},children:"Portions"}),i.jsxs("button",{className:He==="weight"?"active":"",onClick:()=>{Gt("weight"),vt(String(Math.round($)||100))},children:["Custom (",E,")"]})]}),He==="portion"&&C?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Math.max(1,Rt-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:Rt}),i.jsxs("span",{className:"nut-stepper-label",children:[C.label,Rt!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round($),E]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Rt+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",E,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:zt,onChange:Ce=>vt(Ce.target.value),onFocus:Ce=>Ce.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Le.map(Ce=>i.jsxs("button",{className:`nut-quick-btn${zt===String(Ce)?" active":""}`,onClick:()=>vt(String(Ce)),children:[Ce,E]},Ce))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>gn(null),children:"Back to Favourites"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>St({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Re}),children:"Add"})]})]})})()]})}),i.jsx(Ro,{active:"nutrition"}),Bt&&i.jsx("div",{className:`toast-notification ${Bt.type}`,children:Bt.message})]})}const z2="/login/assets/randomiser-glq9YJkL.jpg",wM="/login/assets/programme-card-workout-CnNzTYkz.webp",xM="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",_M="/login/assets/mg-arms-BeOQU3wx.jpg",F2=60,xp=5,TM=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],EM={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},kM={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},SM={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},_p={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Tp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:xM},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Oc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:_M},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],H2={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},q2=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Ep=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],dl=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],jM=[5,10,15,20,30];function NM(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function CM(s){const e=[...s];for(let n=e.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[e[n],e[a]]=[e[a],e[n]]}return e}function RM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=la(),{isDark:l,toggleTheme:u,accent:d}=Bi(),p=Gs(),[g,y]=_.useState("menu"),[w,T]=_.useState(["bodyweight"]),[k,P]=_.useState("core"),[W,B]=_.useState("intermediate"),[L,re]=_.useState(15),[X,he]=_.useState([]),[ke,ze]=_.useState(!1),Ae=_.useRef(!1),I=_.useRef([]),[S,R]=_.useState([]),[D,M]=_.useState(2),[H,A]=_.useState(dl[1]),[We,Nt]=_.useState(1),[Y,Te]=_.useState(0),[De,ct]=_.useState("work"),[rt,V]=_.useState(0),[G,ge]=_.useState(!1),[Se,Ve]=_.useState(0),[Me,nt]=_.useState(null),ht=_.useRef(null);_.useRef(null),_.useRef(null);const[pt,Wt]=_.useState(null),pn=_.useCallback((q,le="info")=>{Wt({message:q,type:le}),setTimeout(()=>Wt(null),3e3)},[]),[Ct,wt]=_.useState(null),[ne,gn]=_.useState(null),[zt,vt]=_.useState(0),[Rt,at]=_.useState(0),[He,Gt]=_.useState([]),[ns,At]=_.useState(""),[Bt,Dn]=_.useState(""),[Ht,wn]=_.useState(!1),[de,ve]=_.useState(0),[je,Qe]=_.useState(!1),[qe,Pe]=_.useState({}),Ge=_.useRef(null),Ue=_.useRef(null),[Ie,we]=_.useState([]),[Ke,st]=_.useState(null),[xt,qt]=_.useState(0),[Fe,_t]=_.useState(0),[St,Dt]=_.useState(0),[Ft,bt]=_.useState(0),[nn,$t]=_.useState(0),[sn,ln]=_.useState(0),[un,jn]=_.useState({beginner:0,intermediate:0,advanced:0}),[z,ue]=_.useState(null),[fe,pe]=_.useState(""),[ce,Be]=_.useState(!1);_.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const le=_s(tt,"workoutLogs"),se=$s(le,Cs("clientId","==",n.id)),Ne=(await Ws(se)).docs.map(cn=>cn.data()),Je=Ne.filter(cn=>cn.type!=="programme");bt(Je.length);const jt=Je.reduce((cn,Un)=>cn+(Un.duration||0),0);$t(jt);const Ze={beginner:0,intermediate:0,advanced:0};Je.forEach(cn=>{cn.level&&Ze[cn.level]!==void 0&&Ze[cn.level]++}),jn(Ze);const Qt=new Date,Mn=Qt.getDay(),dn=Mn===0?-6:1-Mn,Rn=new Date(Qt);Rn.setDate(Qt.getDate()+dn),Rn.setHours(0,0,0,0);const Ba=Rn.getTime(),Ui=Ne.filter(cn=>{const Un=cn.completedAt;return Un?(Un.toDate?Un.toDate().getTime():new Date(Un).getTime())>=Ba:!1});qt(Ui.filter(cn=>cn.type!=="programme").length);let Ua=0;if(n)try{const cn=await Gn(Tt(tt,"clientProgrammes",n.id));if(cn.exists()){const Un=cn.data(),zn=Un.templateId;Ua=Ui.filter(ms=>ms.type==="programme"&&ms.programmeId===zn).length,ue(zn);const wr=Tp.find(ms=>ms.id===zn);wr&&pe(wr.name);const xr=kM[zn];if(xr){const ms=Object.keys(Un.completedSessions||{}).length,ks=xr.duration*xr.daysPerWeek;Dt(ks>0?Math.round(ms/ks*100):0)}}else ue(null),pe(""),Dt(0)}catch{}_t(Ua);const br=Je.map(cn=>cn.completedAt).filter(Boolean).map(cn=>cn.toDate?cn.toDate().getTime():new Date(cn).getTime()).sort((cn,Un)=>Un-cn);if(br.length===0)ln(0);else{const cn=new Set;br.forEach(ks=>{const Br=new Date(ks),_r=Br.getDay(),za=_r===0?-6:1-_r,Is=new Date(Br);Is.setDate(Br.getDate()+za),Is.setHours(0,0,0,0),cn.add(Is.getTime())});const Un=[...cn].sort((ks,Br)=>Br-ks);let zn=0;const wr=new Date(Qt),xr=Qt.getDay()===0?-6:1-Qt.getDay();wr.setDate(Qt.getDate()+xr),wr.setHours(0,0,0,0);let ms=wr.getTime();Un.includes(ms)||(ms-=10080*60*1e3);for(let ks=0;ks<200&&Un.includes(ms);ks++)zn++,ms-=10080*60*1e3;ln(zn)}}catch(le){console.error("Error loading workout stats:",le)}finally{Be(!0)}})()},[s,n,g]);const ut=()=>{const q=[];let le;k==="mix"?le=["core","upper","lower"]:k==="fullbody"?le=["upper","lower"]:le=[k];for(const se of w)for(const Ee of le)q.push(`exercises/${se}/${Ee}`);return q},Ye=async()=>{if(Ae.current){for(;Ae.current;)await new Promise(q=>setTimeout(q,200));return I.current}Ae.current=!0,ze(!0);try{const q=ut(),le=[];for(const Je of q)try{const jt=wl(xl,Je),Ze=await B2(jt);le.push(...Ze.items)}catch{console.warn(`Folder ${Je} not found, skipping.`)}if(le.length===0&&w.includes("bodyweight")&&k==="core")try{const Je=wl(xl,"core"),jt=await B2(Je);le.push(...jt.items)}catch{console.warn("Legacy core/ folder not found either.")}if(le.length===0){const Je=w.map(Ze=>q2.find(Qt=>Qt.key===Ze)?.label).join(" + "),jt=Ep.find(Ze=>Ze.key===k)?.label;return pn(`No exercises found for ${Je} / ${jt}. Upload videos to Firebase Storage.`,"error"),Ae.current=!1,ze(!1),[]}const se=new Set,Ee=le.filter(Je=>{const jt=Je.name.replace(/\.(mp4|gif)$/i,"");return se.has(jt)?!1:(se.add(jt),!0)}),Ne=await Promise.all(Ee.map(async Je=>{const jt=await Xc(Je),Ze=NM(Je.name.replace(/\.(mp4|gif)$/i,"")),Qt=/\.gif$/i.test(Je.name);return{name:Ze,videoUrl:jt,isGif:Qt}}));return I.current=Ne,he(Ne),Ae.current=!1,ze(!1),Ne}catch(q){console.error("Error loading exercises:",q);const le=q.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${q.message||q.code||"Unknown error"}`;return pn(le,"error"),Ae.current=!1,ze(!1),[]}},ot=async()=>{y("spinning"),I.current=[];const q=await Ye();if(q.length===0){y("setup");return}const le=dl.find(Mn=>Mn.key===W);A(le);const se=le.work+le.rest,Ee=L*60,Ne=Math.floor(Ee/se);let Je,jt;Ne<=6?(Je=Math.max(3,Math.floor(Ne/2)),jt=Math.floor(Ne/Je)):Ne<=12?(Je=Math.min(6,Math.floor(Ne/2)),jt=Math.floor(Ne/Je)):(Je=Math.min(10,Math.floor(Ne/2)),jt=Math.floor(Ne/Je)),jt=Math.max(2,jt);const Ze=CM(q),Qt=Ze.slice(0,Math.min(Je,Ze.length));R(Qt),M(jt),setTimeout(()=>y("preview"),2e3)},dt=()=>{y("countdown"),Ve(3)};_.useEffect(()=>{if(g!=="countdown")return;if(Se<=0){y("workout"),Nt(1),Te(0),ct("work"),V(H.work),ge(!1),Re();return}Le();const q=setTimeout(()=>Ve(le=>le-1),1e3);return()=>clearTimeout(q)},[Se,g]),_.useEffect(()=>{if(g!=="workout"||G)return;if(rt<=0){rn();return}rt<=3&&Le();const q=setTimeout(()=>V(le=>le-1),1e3);return()=>clearTimeout(q)},[rt,g,G]);const rn=()=>{if(De==="work")ct("rest"),V(H.rest);else{const q=Y+1;if(q>=S.length){const le=We+1;if(le>D){y("complete"),Es();return}Nt(le),Te(0)}else Te(q);ct("work"),V(H.work),Re()}},Es=async()=>{if(s)try{await sg(_s(tt,"workoutLogs"),{clientId:n.id,level:W,duration:L,equipment:w,focus:k,exerciseCount:S.length,rounds:D,exercises:S.map(q=>q.name),completedAt:lt.now()}),qt(q=>q+1),bt(q=>q+1),$t(q=>q+L),jn(q=>({...q,[W]:(q[W]||0)+1}))}catch(q){console.error("Error saving workout log:",q)}},Bn=async(q,le,se)=>{if(!(!n||!le))try{const Ee=n.id,Ne=await Gn(Tt(tt,"coreBuddyPBs",Ee)),jt=(Ne.exists()?Ne.data():null)?.exercises||{},Ze=jt[q];let Qt=!1;if(Ze?(le>(Ze.weight||0)||le===(Ze.weight||0)&&se>(Ze.reps||0))&&(Qt=!0):Qt=!0,Qt){const Mn={...jt,[q]:{weight:le,reps:se,achievedAt:lt.now()}};await Wn(Tt(tt,"coreBuddyPBs",Ee),{clientId:n.id,exercises:Mn,updatedAt:lt.now()}),pn(`New PB! ${le}kg  ${se} reps`,"success"),Le(),await Hn(q,le)}}catch(Ee){console.error("Error checking PB:",Ee)}},Hn=async(q,le)=>{if(n)try{const se=await Gn(Tt(tt,"coreBuddyTargets",n.id));if(!se.exists())return;const Ne=(se.data().targets||{})[q];if(!Ne||le<Ne.targetWeight)return;const Je=await Gn(Tt(tt,"coreBuddyAchievements",n.id)),jt=Je.exists()?Je.data():{clientId:n.id,badges:[],totalVolume:0};if(jt.badges.some(dn=>dn.type==="pb_target"&&dn.exercise===q&&dn.targetWeight===Ne.targetWeight))return;const Qt={type:"pb_target",exercise:q,group:EM[q]||"push",targetWeight:Ne.targetWeight,achievedAt:lt.now()},Mn=[...jt.badges,Qt];await Wn(Tt(tt,"coreBuddyAchievements",n.id),{...jt,badges:Mn,updatedAt:lt.now()}),we(dn=>[...dn,Qt])}catch(se){console.error("Error checking target badge:",se)}},hn=async q=>{if(!(!n||q<=0))try{const le=await Gn(Tt(tt,"coreBuddyAchievements",n.id)),se=le.exists()?le.data():{clientId:n.id,badges:[],totalVolume:0},Ee=se.totalVolume||0,Ne=Ee+q,Je=[];TM.forEach(Ze=>{Ne>=Ze.threshold&&Ee<Ze.threshold&&(se.badges.some(Mn=>Mn.type==="volume_milestone"&&Mn.milestone===Ze.threshold)||Je.push({type:"volume_milestone",milestone:Ze.threshold,label:Ze.label,achievedAt:lt.now()}))});const jt=[...se.badges,...Je];await Wn(Tt(tt,"coreBuddyAchievements",n.id),{clientId:n.id,badges:jt,totalVolume:Math.round(Ne),updatedAt:lt.now()}),Je.length>0&&we(Ze=>[...Ze,...Je])}catch(le){console.error("Error updating volume:",le)}},U=async q=>{if(gn(q),q.interval){const Ee=[];for(const Ne of q.exercises){let Je=null,jt=!1;if(Ne.storagePath)try{const Ze=wl(xl,Ne.storagePath);Je=await Xc(Ze),jt=/\.gif$/i.test(Ne.storagePath)}catch{}Ee.push({name:Ne.name,videoUrl:Je,isGif:jt})}R(Ee),M(q.rounds),A({work:q.work,rest:q.rest}),y("preview");return}const le={};for(const Ee of q.exercises)if(Ee.storagePath)try{const Ne=wl(xl,Ee.storagePath);le[Ee.name]={url:await Xc(Ne),isGif:/\.gif$/i.test(Ee.storagePath)}}catch{}Pe(le);const se=q.exercises.map(Ee=>({name:Ee.name,type:Ee.type,targetSets:Ee.sets,targetReps:Ee.reps||0,targetTime:Ee.time||0,sets:[]}));Gt(se),vt(0),at(0),At(""),Dn(""),Qe(!1),wn(!1),ve(0),we([]),st(null),y("muscle_workout")},ie=()=>{const q=Ge.current;q&&(q.paused?(q.play(),Qe(!0)):(q.pause(),Qe(!1)))};_.useEffect(()=>{if(g!=="muscle_workout"||!Ht||de<=0){g==="muscle_workout"&&Ht&&de<=0&&(wn(!1),Le());return}return Ue.current=setTimeout(()=>ve(q=>q-1),1e3),()=>clearTimeout(Ue.current)},[g,Ht,de]);const E=async()=>{const q=He[zt];let le={};if(q.type==="weighted"){const Ne=parseFloat(ns)||0,Je=parseInt(Bt)||0;if(Je===0){pn("Enter your reps","error");return}le={weight:Ne,reps:Je}}else if(q.type==="reps"){const Ne=parseInt(Bt)||0;if(Ne===0){pn("Enter your reps","error");return}le={reps:Ne}}else if(q.type==="timed"){const Ne=q.targetTime-de;le={time:Math.max(Ne,1)}}const se=[...He];se[zt]={...q,sets:[...q.sets,le]},Gt(se),q.type==="weighted"&&le.weight>0&&await Bn(q.name,le.weight,le.reps);const Ee=q.sets.length+1;if(Ee<q.targetSets)at(Ee),Dn(""),wn(!1),ve(0);else if(zt+1<He.length){const Ne=zt+1;vt(Ne),at(0),At(""),Dn(""),Qe(!1),wn(!1),ve(0)}else await C(se),y("muscle_complete")},C=async q=>{if(!(!s||!n))try{const le=q.reduce((Ee,Ne)=>Ee+Ne.sets.reduce((Je,jt)=>Je+(jt.weight||0)*(jt.reps||0),0),0),se=q.reduce((Ee,Ne)=>Ee+Ne.sets.length,0);await sg(_s(tt,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:Ct,sessionId:ne?.id,sessionName:ne?.name,exerciseCount:q.length,totalSets:se,duration:Math.round(se*1.5),volume:Math.round(le),exercises:q.map(Ee=>({name:Ee.name,type:Ee.type,sets:Ee.sets})),completedAt:lt.now()}),le>0&&await hn(le),Ie.length>0&&st({badges:[...Ie]})}catch(le){console.error("Error saving muscle group workout log:",le)}},$=_.useRef(null),J=()=>($.current||($.current=new(window.AudioContext||window.webkitAudioContext)),$.current),Le=()=>{try{const q=J(),le=q.createOscillator(),se=q.createGain();le.connect(se),se.connect(q.destination),le.frequency.value=880,se.gain.value=.3,le.start(q.currentTime),le.stop(q.currentTime+.15)}catch{}},Re=()=>{try{const q=J(),le=q.createOscillator(),se=q.createGain();le.connect(se),se.connect(q.destination),le.frequency.value=1200,se.gain.value=.4,le.start(q.currentTime),le.stop(q.currentTime+.3)}catch{}};_.useEffect(()=>{if(g!=="workout"||De!=="work"||!S[Y]?.isGif)return;const le=setInterval(()=>{const se=ht.current;if(!se)return;const Ee=se.getAttribute("src");se.removeAttribute("src"),setTimeout(()=>{ht.current&&ht.current.setAttribute("src",Ee)},0)},4e3);return()=>clearInterval(le)},[g,De,Y,We,S]);const Ce=(q,le,se)=>{const Ee=Math.round(q/le*F2);return i.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:uM.map((Ne,Je)=>i.jsx("line",{x1:Ne.x1,y1:Ne.y1,x2:Ne.x2,y2:Ne.y2,className:Je<Ee?`wk-tick-filled ${se}`:"wk-tick-empty",strokeWidth:Ne.thick?"3":"2"},Je))})},Lt=()=>{const q=S.length*D;return((We-1)*S.length+Y+(De==="rest"?.5:0))/q},gt=pt&&i.jsx("div",{className:`toast-notification ${pt.type}`,children:pt.message});if(a)return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsx("div",{className:"wk-loading-inline",children:i.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[i.jsxs("div",{className:"wk-menu-heading",children:[i.jsx("h2",{children:"Choose Your Workout"}),i.jsx("p",{children:"No excuses. Just results."})]}),i.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:i.jsx("img",{src:z2,alt:"Randomise Workout",className:"wk-hero-bg"})}),i.jsxs("div",{className:"wk-section-header",children:[i.jsx("h2",{children:"Programmes"}),i.jsxs("span",{className:"wk-section-count",children:[Tp.length," available"]})]}),i.jsx("div",{className:"wk-prog-scroll-wrap",children:i.jsx("div",{className:"wk-prog-scroll",children:Tp.map((q,le)=>q.image?i.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:q.id}}),style:{animationDelay:`${le*.06}s`},children:[i.jsx("img",{src:q.image,alt:q.name,className:"wk-prog-img"}),le===0&&i.jsx("div",{className:"wk-swipe-arrow",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},q.id):i.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:q.id}}),style:{animationDelay:`${le*.06}s`},children:[i.jsx("img",{src:wM,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),i.jsx("div",{className:"wk-prog-hero-overlay",style:{background:SM[q.focus]}}),i.jsxs("div",{className:"wk-prog-hero-content",children:[i.jsxs("div",{className:"wk-prog-hero-top",children:[i.jsxs("span",{className:"wk-prog-hero-badge",children:[q.duration," WEEKS"]}),i.jsx("span",{className:"wk-prog-hero-level",children:q.level})]}),i.jsxs("div",{className:"wk-prog-hero-bottom",children:[i.jsx("h3",{children:q.name.toUpperCase()}),i.jsxs("p",{children:[q.daysPerWeek,"x per week  ",q.focus==="fullbody"?"Full Body":q.focus.charAt(0).toUpperCase()+q.focus.slice(1)," Focus"]}),i.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),le===0&&i.jsx("div",{className:"wk-swipe-arrow",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},q.id))})}),i.jsxs("div",{className:"wk-section-header",children:[i.jsx("h2",{children:"Muscle Groups"}),i.jsxs("span",{className:"wk-section-count",children:[Oc.length," groups"]})]}),i.jsx("div",{className:"wk-muscle-grid",children:Oc.map((q,le)=>i.jsx("button",{className:`wk-muscle-hero-card${q.image?" wk-muscle-thumb":""}`,onClick:()=>{wt(q.key),y("muscle_sessions")},style:{animationDelay:`${le*.05}s`},children:q.image?i.jsx("img",{src:q.image,alt:q.label,className:"wk-muscle-thumb-img"}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:z2,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),i.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:_p[q.key]}}),i.jsxs("div",{className:"wk-muscle-hero-content",children:[i.jsx("div",{className:"wk-muscle-hero-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:q.icon})})}),i.jsxs("div",{className:"wk-muscle-hero-text",children:[i.jsx("span",{className:"wk-muscle-hero-name",children:q.label}),i.jsxs("span",{className:"wk-muscle-hero-count",children:[H2[q.key]?.length||0," sessions"]})]})]})]})},q.key))})]}),i.jsx(Ro,{active:"workouts"}),gt]});if(g==="setup"){const q=Ep.find(se=>se.key===k)?.label||k,le=dl.find(se=>se.key===W)?.label||W;return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main wk-setup-main",children:[i.jsxs("div",{className:"wk-stats-strip",children:[i.jsxs("div",{className:"wk-stats-strip-ring",children:[i.jsx("svg",{viewBox:"0 0 200 200",children:mo.map((se,Ee)=>{const Ne=Math.round(Math.min(xt,xp)/xp*F2);return i.jsx("line",{x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,className:Ee<Ne?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:se.thick?"3":"2"},Ee)})}),i.jsxs("span",{className:"wk-stats-strip-ring-num",children:[xt,i.jsxs("small",{children:["/",xp]})]})]}),i.jsxs("div",{className:"wk-stats-strip-items",children:[i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:Ft}),i.jsx("span",{className:"wk-stats-strip-label",children:"Workouts"})]}),i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:nn}),i.jsx("span",{className:"wk-stats-strip-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:sn}),i.jsx("span",{className:"wk-stats-strip-label",children:"Wk Streak"})]})]})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Focus Area"}),i.jsx("div",{className:"wk-focus-grid",children:Ep.map(se=>i.jsxs("button",{className:`wk-equip-btn${k===se.key?" active":""}${se.key==="mix"?" wk-mix-btn":""}`,onClick:()=>P(se.key),children:[i.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:se.icon})}),i.jsx("span",{children:se.label})]},se.key))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Level"}),i.jsx("div",{className:"wk-level-cards",children:dl.map(se=>i.jsxs("button",{className:`wk-level-card wk-level-${se.key}${W===se.key?" active":""}`,onClick:()=>B(se.key),children:[i.jsx("span",{className:"wk-level-name",children:se.label}),i.jsx("span",{className:"wk-level-desc",children:se.desc})]},se.key))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Time"}),i.jsx("div",{className:"wk-time-options",children:jM.map(se=>i.jsxs("button",{className:`wk-time-btn${L===se?" active":""}`,onClick:()=>re(se),children:[i.jsx("span",{className:"wk-time-num",children:se}),i.jsx("span",{className:"wk-time-unit",children:"min"})]},se))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Equipment"}),i.jsx("div",{className:"wk-equip-options",children:q2.map(se=>{const Ee=w.includes(se.key);return i.jsxs("button",{className:`wk-equip-btn${Ee?" active":""}`,onClick:()=>{T(Ne=>Ee&&Ne.length===1?Ne:Ee?Ne.filter(Je=>Je!==se.key):[...Ne,se.key])},children:[i.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:se.icon})}),i.jsx("span",{children:se.label})]},se.key)})})]}),i.jsx("div",{className:"wk-setup-summary",children:i.jsxs("span",{children:[q,"  ",le,"  ",L," min"]})})]}),i.jsx("div",{className:"wk-go-sticky",children:i.jsx("button",{className:"wk-randomise-btn",onClick:ot,disabled:ke,children:ke?"Loading exercises...":"Randomise Workout"})}),gt]})}if(g==="spinning")return i.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"wk-spin-container",children:[i.jsxs("div",{className:"wk-spin-ring",children:[i.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:mo.map((q,le)=>i.jsx("line",{x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,className:"wk-spin-tick",strokeWidth:q.thick?"3.5":"2",style:{animationDelay:`${le*.03}s`}},le))}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),i.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),gt]});if(g==="preview"){const q=ne?.interval?{work:ne.work,rest:ne.rest}:dl.find(se=>se.key===W),le=S.length*D*(q.work+q.rest);return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y(ne?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[ne?.interval&&i.jsx("h2",{className:"mg-preview-title",children:ne.name}),i.jsxs("div",{className:"wk-preview-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:S.length}),i.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:D}),i.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.ceil(le/60)}),i.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsxs("span",{className:"wk-stat-val",children:[q.work,"/",q.rest]}),i.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),i.jsx("div",{className:"wk-preview-list",children:S.map((se,Ee)=>i.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${Ee*.06}s`},onClick:()=>nt(se),children:[i.jsx("span",{className:"wk-preview-num",children:Ee+1}),i.jsx("div",{className:"wk-preview-thumb",children:se.isGif?i.jsx("img",{src:se.videoUrl,alt:se.name,loading:"lazy"}):i.jsx("video",{src:`${se.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),i.jsx("span",{className:"wk-preview-name",children:se.name}),i.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},Ee))}),Me&&i.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>nt(null),children:i.jsxs("div",{className:"wk-preview-modal",onClick:se=>se.stopPropagation(),children:[i.jsx("button",{className:"wk-preview-modal-close",onClick:()=>nt(null),"aria-label":"Close preview",children:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),i.jsx("div",{className:"wk-preview-modal-video",children:Me.isGif?i.jsx("img",{src:Me.videoUrl,alt:Me.name}):i.jsx("video",{src:Me.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),i.jsx("h3",{className:"wk-preview-modal-title",children:Me.name})]})}),i.jsxs("div",{className:"wk-preview-actions",children:[!ne?.interval&&i.jsxs("button",{className:"wk-btn-secondary",onClick:()=>ot(),children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("polyline",{points:"1 4 1 10 7 10"}),i.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),i.jsx("button",{className:"wk-btn-primary",onClick:dt,children:"Start Workout"})]})]})]})}if(g==="countdown")return i.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":d,children:i.jsxs("div",{className:"wk-countdown-big",children:[i.jsx("span",{className:"wk-countdown-num",children:Se}),i.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const q=S[Y],le=De==="work"?H.work:H.rest,se=De==="rest"?Y+1<S.length?S[Y+1]:We<D?S[0]:null:null;return i.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"wk-video-container",children:De==="work"?q.isGif?i.jsx("img",{ref:ht,className:"wk-video",src:q.videoUrl,alt:q.name},q.videoUrl):i.jsx("video",{className:"wk-video",src:q.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},q.videoUrl):i.jsxs("div",{className:"wk-rest-screen",children:[i.jsx("span",{className:"wk-rest-label",children:"REST"}),se&&i.jsxs("span",{className:"wk-next-label",children:["Next: ",se.name]})]})}),i.jsx("div",{className:"wk-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"wk-exercise-info",children:[i.jsxs("span",{className:"wk-exercise-counter",children:[Y+1," / ",S.length]}),i.jsx("h2",{className:"wk-exercise-name",children:q.name}),i.jsxs("span",{className:"wk-round-label",children:["Round ",We," of ",D]})]}),i.jsx("div",{className:"wk-timer-section",children:i.jsxs("div",{className:"wk-timer-ring-wrap",children:[Ce(rt,le,De==="work"?"wk-tick-work":"wk-tick-rest"),i.jsxs("div",{className:"wk-timer-center",children:[i.jsx("span",{className:"wk-timer-time",children:rt}),i.jsx("span",{className:`wk-timer-phase ${De}`,children:De==="work"?"WORK":"REST"})]})]})}),i.jsxs("div",{className:"wk-controls",children:[i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>ge(!G),children:G?i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):i.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),i.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{V(0)},children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),i.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),i.jsx("div",{className:"wk-progress-bar",children:i.jsx("div",{className:"wk-progress-fill",style:{width:`${Lt()*100}%`}})})]})}if(g==="complete"){const q=dl.find(se=>se.key===W),le=S.length*D*(q.work+q.rest);return i.jsx("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:i.jsxs("div",{className:"wk-complete",children:[i.jsxs("div",{className:"wk-complete-ring",children:[i.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:mo.map((se,Ee)=>i.jsx("line",{x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,className:"wk-tick-complete",strokeWidth:se.thick?"3.5":"2",style:{animationDelay:`${Ee*.02}s`}},Ee))}),i.jsx("div",{className:"wk-complete-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),i.jsxs("div",{className:"wk-complete-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.ceil(le/60)}),i.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:S.length*D}),i.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:D}),i.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),i.jsx("div",{className:"wk-complete-actions",children:i.jsx("button",{className:"wk-btn-primary",onClick:()=>{gn(null),wt(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const q=Oc.find(se=>se.key===Ct),le=H2[Ct]||[];return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[i.jsxs("div",{className:"mg-sessions-header",children:[i.jsx("div",{className:"mg-sessions-icon",style:{background:_p[Ct]},children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:q?.icon})})}),i.jsxs("h2",{children:[q?.label," Workouts"]}),i.jsxs("p",{children:[le.length," sessions available"]})]}),i.jsx("div",{className:"mg-sessions-list",children:le.map((se,Ee)=>i.jsxs("button",{className:"mg-session-card",onClick:()=>{gn(se),y("muscle_overview")},style:{animationDelay:`${Ee*.08}s`},children:[i.jsxs("div",{className:"mg-session-info",children:[i.jsx("h3",{children:se.name}),i.jsx("p",{children:se.desc}),i.jsx("div",{className:"mg-session-meta",children:se.interval?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),i.jsxs("span",{className:"mg-session-tag",children:[se.exercises.length," exercises"]}),i.jsxs("span",{className:"mg-session-tag",children:[se.rounds," rounds"]})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),i.jsxs("span",{className:"mg-session-tag",children:[se.exercises.length," exercises"]}),i.jsx("span",{className:"mg-session-tag",children:(()=>{const Ne=se.exercises.map(Ze=>Ze.sets||0),Je=Math.min(...Ne),jt=Math.max(...Ne);return Je===jt?`${Je} sets each`:`${Je}-${jt} sets each`})()})]})})]}),i.jsx("div",{className:"mg-session-arrow",children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},se.id))})]}),gt]})}if(g==="muscle_overview"){const q=ne;if(!q)return null;const le=Oc.find(se=>se.key===Ct);return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main mg-overview-main",children:[i.jsx("div",{className:"mg-overview-hero",style:{background:_p[Ct]},children:i.jsx("div",{className:"mg-overview-hero-content",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:i.jsx("path",{d:le?.icon})})})}),i.jsxs("div",{className:"mg-overview-header",children:[i.jsxs("div",{className:"mg-overview-title-row",children:[i.jsx("h2",{children:q.name}),q.level&&i.jsx("span",{className:"mg-overview-level",children:q.level})]}),i.jsx("p",{className:"mg-overview-desc",children:q.desc})]}),q.overview&&i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),i.jsx("p",{children:q.overview})]}),q.tips&&q.tips.length>0&&i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),i.jsx("ul",{className:"mg-overview-tips",children:q.tips.map((se,Ee)=>i.jsx("li",{children:se},Ee))})]}),i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),i.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),i.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",q.exercises.length,")"]}),i.jsx("div",{className:"mg-overview-exercises",children:q.exercises.map((se,Ee)=>i.jsxs("div",{className:"mg-overview-exercise",children:[i.jsx("span",{className:"mg-overview-ex-num",children:Ee+1}),i.jsxs("div",{className:"mg-overview-ex-info",children:[i.jsx("span",{className:"mg-overview-ex-name",children:se.name}),q.interval?i.jsxs("span",{className:"mg-overview-ex-detail",children:[q.work,"s work / ",q.rest,"s rest"]}):i.jsxs("span",{className:"mg-overview-ex-detail",children:[se.sets," sets  ",se.reps?`${se.reps} reps`:`${se.time}s`,se.type==="weighted"&&"  weighted"]})]})]},Ee))})]}),i.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>U(q),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),gt]})}if(g==="muscle_workout"){const q=ne;if(!q)return null;const le=q.exercises[zt],se=He[zt];if(!le||!se)return null;const Ee=se.sets.length,Ne=q.exercises.length,Je=q.exercises.reduce((dn,Rn)=>dn+(Rn.sets||0),0),Ze=He.reduce((dn,Rn)=>dn+Rn.sets.length,0)/Je*100,Qt=qe[le.name];le.type==="timed"&&de===0&&!Ht&&Ee===Rt&&setTimeout(()=>ve(le.time),0);const Mn=Ee+1<le.sets?"Log Set":zt+1<Ne?"Log Set  Next Exercise":"Log Set  Complete";return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"mg-session-progress",children:i.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Ze}%`}})}),i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsxs("span",{className:"mg-header-info",children:["Exercise ",zt+1,"/",Ne]}),i.jsx("div",{style:{width:22}})]})}),i.jsxs("main",{className:"wk-main",children:[Qt?i.jsxs("div",{className:"mg-video-container",onClick:ie,children:[Qt.isGif?i.jsx("img",{className:"mg-video",src:Qt.url,alt:le.name}):i.jsx("video",{ref:Ge,className:"mg-video",src:Qt.url,loop:!0,muted:!0,playsInline:!0},le.name),!je&&!Qt.isGif&&i.jsxs("div",{className:"mg-video-overlay",children:[i.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),i.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):i.jsxs("div",{className:"mg-video-placeholder",children:[i.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[i.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),i.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),i.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),i.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),i.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),i.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),i.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),i.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),i.jsx("span",{children:"Video coming soon"})]}),i.jsx("div",{className:"wk-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"mg-exercise-card",children:[i.jsx("h2",{className:"mg-ex-name",children:le.name}),i.jsx("span",{className:`mg-ex-type-badge ${le.type}`,children:le.type==="weighted"?"Weight + Reps":le.type==="reps"?"Reps Only":"Timed"}),i.jsxs("div",{className:"mg-ex-set-info",children:[i.jsxs("span",{className:"mg-ex-set-num",children:["Set ",Ee+1," of ",le.sets]}),le.type!=="timed"&&i.jsxs("span",{className:"mg-ex-target",children:["Target: ",le.reps," reps"]}),le.type==="timed"&&i.jsxs("span",{className:"mg-ex-target",children:["Target: ",le.time,"s"]})]}),le.type==="weighted"&&i.jsxs("div",{className:"mg-input-area",children:[i.jsxs("div",{className:"mg-input-group",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:ns,onChange:dn=>At(dn.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"mg-input-group",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Bt,onChange:dn=>Dn(dn.target.value),placeholder:"0"})]})]}),le.type==="reps"&&i.jsx("div",{className:"mg-input-area",children:i.jsxs("div",{className:"mg-input-group mg-input-single",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Bt,onChange:dn=>Dn(dn.target.value),placeholder:"0"})]})}),le.type==="timed"&&i.jsxs("div",{className:"mg-timer-area",children:[i.jsx("div",{className:"mg-timer-display",children:i.jsxs("span",{className:"mg-timer-value",children:[de,"s"]})}),Ht?i.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>wn(!1),children:"Stop"}):i.jsx("button",{className:"mg-timer-btn",onClick:()=>{de===0&&ve(le.time),wn(!0)},children:de<le.time&&de>0?"Resume":"Start Timer"})]}),i.jsx("button",{className:"mg-log-set-btn",onClick:E,children:Mn}),se.sets.length>0&&i.jsx("div",{className:"mg-completed-sets",children:se.sets.map((dn,Rn)=>i.jsxs("div",{className:"mg-completed-set",children:[i.jsx("span",{className:"mg-completed-set-check",children:""}),i.jsxs("span",{children:["Set ",Rn+1,": ",dn.weight!=null?`${dn.weight}kg  ${dn.reps}`:dn.reps!=null?`${dn.reps} reps`:`${dn.time}s`]})]},Rn))})]})]}),gt]})}if(g==="muscle_complete"){const q=He.reduce((Ee,Ne)=>Ee+Ne.sets.length,0),le=He.reduce((Ee,Ne)=>Ee+Ne.sets.reduce((Je,jt)=>Je+(jt.weight||0)*(jt.reps||0),0),0),se=Oc.find(Ee=>Ee.key===Ct)?.label||"";return i.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"wk-complete",children:[i.jsxs("div",{className:"wk-complete-ring",children:[i.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:mo.map((Ee,Ne)=>i.jsx("line",{x1:Ee.x1,y1:Ee.y1,x2:Ee.x2,y2:Ee.y2,className:"wk-tick-complete",strokeWidth:Ee.thick?"3.5":"2",style:{animationDelay:`${Ne*.02}s`}},Ne))}),i.jsx("div",{className:"wk-complete-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsxs("h2",{className:"wk-complete-title",children:[se," Complete!"]}),i.jsx("p",{className:"mg-complete-session-name",children:ne?.name}),i.jsxs("div",{className:"wk-complete-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:He.length}),i.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:q}),i.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),le>0&&i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.round(le).toLocaleString()}),i.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),i.jsx("div",{className:"wk-complete-actions",children:i.jsx("button",{className:"wk-btn-primary",onClick:()=>{gn(null),wt(null),st(null),y("menu")},children:"Done"})})]}),Ke&&i.jsx("div",{className:"mg-badge-celebration",onClick:()=>st(null),children:i.jsxs("div",{className:"mg-badge-celebration-card",children:[i.jsx("div",{className:"mg-badge-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),i.jsx("h3",{className:"mg-badge-celebration-title",children:Ke.badges.length===1?"Badge Earned!":`${Ke.badges.length} Badges Earned!`}),i.jsx("div",{className:"mg-badge-celebration-list",children:Ke.badges.map((Ee,Ne)=>i.jsx("div",{className:"mg-badge-celebration-item",children:Ee.type==="pb_target"?`${Ee.exercise}  ${Ee.targetWeight}kg`:Ee.label},Ne))}),i.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const AM=60,IM={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},DM=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],$2=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function Gh(s,e,n){const a=s.baseReps?s.baseReps+(e-1)*(n.repProg||0):void 0,l=s.baseTime?s.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:s.sets,reps:a,time:l}}const MM={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function PM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=la(),{isDark:l,toggleTheme:u,accent:d}=Bi(),p=Gs(),g=Vr(),[y,w]=_.useState("loading"),[T,k]=_.useState(null),P=_.useRef(!1),[W,B]=_.useState(null),[L,re]=_.useState(1),[X,he]=_.useState(0),[ke,ze]=_.useState(0),[Ae,I]=_.useState(0),[S,R]=_.useState([]),[D,M]=_.useState(""),[H,A]=_.useState(""),[We,Nt]=_.useState(!1),[Y,Te]=_.useState(0),De=_.useRef(null),[ct,rt]=_.useState({}),[V,G]=_.useState(!1),ge=_.useRef(null),[Se,Ve]=_.useState(null),[Me,nt]=_.useState([]);_.useEffect(()=>{window.scrollTo(0,0)},[y]);const[ht,pt]=_.useState(null),Wt=_.useCallback((de,ve="info")=>{pt({message:de,type:ve}),setTimeout(()=>pt(null),4e3)},[]),pn=_.useRef(null),Ct=()=>(pn.current||(pn.current=new(window.AudioContext||window.webkitAudioContext)),pn.current),wt=()=>{try{const de=Ct(),ve=de.createOscillator(),je=de.createGain();ve.connect(je),je.connect(de.destination),ve.frequency.value=1200,je.gain.value=.4,ve.start(de.currentTime),ve.stop(de.currentTime+.3)}catch{}};_.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const ve=Tt(tt,"clientProgrammes",n.id),je=await Gn(ve);je.exists()?(B(je.data()),w("dashboard")):g.state?.templateId?w("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(ve){console.error("Error loading programme:",ve),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),_.useEffect(()=>{if(P.current||y==="loading")return;const de=g.state?.templateId;if(!de)return;const ve=$2.find(je=>je.id===de);ve&&(P.current=!0,k(ve),w("overview"))},[y,g.state]),_.useEffect(()=>{if(!We||Y<=0){We&&Y<=0&&(Nt(!1),wt());return}return De.current=setTimeout(()=>Te(de=>de-1),1e3),()=>clearTimeout(De.current)},[We,Y]);const ne=async de=>{if(n)try{await Wn(Tt(tt,"clientProgrammes",n.id),de),B(de)}catch(ve){console.error("Error saving programme:",ve),Wt("Failed to save. Check Firestore rules for clientProgrammes.","error")}},gn=async de=>{const ve={templateId:de.id,startDate:lt.now(),completedSessions:{}};await ne(ve),w("dashboard")},zt=async()=>{if(n)try{await cy(Tt(tt,"clientProgrammes",n.id)),B(null),w("browse")}catch(de){console.error("Error quitting programme:",de)}},vt=()=>W?$2.find(de=>de.id===W.templateId):null,Rt=()=>{if(!W)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const de=W.completedSessions||{},ve=Object.keys(de).length,je=vt();if(!je)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const Qe=je.duration*je.daysPerWeek,qe=Math.min(Math.floor(ve/je.daysPerWeek)+1,je.duration),Pe=ve-(qe-1)*je.daysPerWeek;for(let Ge=1;Ge<=je.duration;Ge++)for(let Ue=0;Ue<je.daysPerWeek;Ue++){const Ie=`w${Ge}d${Ue}`;if(!de[Ie])return{currentWeek:Ge,completedThisWeek:Pe,nextDay:Ue,nextWeek:Ge,totalCompleted:ve,totalSessions:Qe}}return{currentWeek:je.duration,completedThisWeek:je.daysPerWeek,nextDay:-1,totalCompleted:ve,totalSessions:Qe,complete:!0}},at=(de,ve,je)=>{if(!W||de<=1)return null;const Qe=`w${de-1}d${ve}`,qe=W.completedSessions?.[Qe];if(!qe)return null;const Pe=qe.exercises?.find(Ge=>Ge.name===je);return Pe?.sets?.length?Pe.sets[Pe.sets.length-1]:null},He=(de,ve)=>{const je=vt();if(!je)return;re(de),he(ve),ze(0),I(0),R([]),A(""),Nt(!1),Te(0),G(!1),rt({});const Qe=je.days[ve],qe=Qe.exercises.map(Ie=>{const we=Gh(Ie,de,je);return{name:Ie.name,type:Ie.type,pbKey:Ie.pbKey,targetSets:we.sets,targetReps:we.reps,targetTime:we.time,sets:[]}});R(qe);const Pe=Qe.exercises[0],Ge=at(de,ve,Pe.name);Ge?.weight&&Pe.type==="weighted"?M(String(Ge.weight)):M(""),(async()=>{const Ie={};for(const we of Qe.exercises)if(we.storagePath)try{const Ke=wl(xl,we.storagePath),st=await Xc(Ke);Ie[we.name]={url:st,isGif:/\.gif$/i.test(we.storagePath)}}catch(Ke){console.warn(`Video not found for ${we.name}:`,Ke)}rt(Ie)})(),w("session")},Gt=async()=>{vt();const de=S[ke];if(!de)return;let ve={};if(de.type==="weighted"){const qe=parseFloat(D)||0,Pe=parseInt(H)||0;if(Pe===0){Wt("Enter your reps","error");return}ve={weight:qe,reps:Pe}}else if(de.type==="reps"){const qe=parseInt(H)||0;if(qe===0){Wt("Enter your reps","error");return}ve={reps:qe}}else if(de.type==="timed"){const qe=de.targetTime-Y;ve={time:Math.max(qe,1)}}const je=[...S];je[ke]={...de,sets:[...de.sets,ve]},R(je),de.type==="weighted"&&ve.weight>0&&await Bt(de.name,ve.weight,ve.reps);const Qe=de.sets.length+1;if(Qe<de.targetSets)I(Qe),M(ve.weight?String(ve.weight):""),A(""),Nt(!1),Te(0);else if(ke+1<S.length){const qe=ke+1;ze(qe),I(0),G(!1);const Ge=vt()?.days[X]?.exercises[qe],Ue=at(L,X,Ge?.name);Ue?.weight&&Ge?.type==="weighted"?M(String(Ue.weight)):M(""),A(""),Nt(!1),Te(0)}else await ns(je)},ns=async de=>{if(!W||!n)return;const ve=`w${L}d${X}`,je={...W.completedSessions,[ve]:{completedAt:new Date().toISOString(),exercises:de.map(Pe=>({name:Pe.name,type:Pe.type,sets:Pe.sets}))}},Qe={...W,completedSessions:je};await ne(Qe);const qe=de.reduce((Pe,Ge)=>Pe+Ge.sets.reduce((Ue,Ie)=>Ue+(Ie.weight||0)*(Ie.reps||0),0),0);qe>0&&await At(qe);try{const Pe=vt();await sg(_s(tt,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:Pe?.id,programmeName:Pe?.name,week:L,day:X+1,exerciseCount:de.length,duration:Math.round(de.reduce((Ge,Ue)=>Ge+Ue.sets.length*1.5,0)),volume:Math.round(qe),completedAt:lt.now()})}catch(Pe){console.error("Error saving workout log:",Pe)}Me.length>0&&(Ve({badges:[...Me]}),nt([])),w("sessionComplete")},At=async de=>{if(n)try{const ve=await Gn(Tt(tt,"coreBuddyAchievements",n.id)),je=ve.exists()?ve.data():{clientId:n.id,badges:[],totalVolume:0},Qe=je.totalVolume||0,qe=Qe+de,Pe=[];DM.forEach(Ue=>{qe>=Ue.threshold&&Qe<Ue.threshold&&(je.badges.some(we=>we.type==="volume_milestone"&&we.milestone===Ue.threshold)||Pe.push({type:"volume_milestone",milestone:Ue.threshold,label:Ue.label,achievedAt:lt.now()}))});const Ge=[...je.badges,...Pe];await Wn(Tt(tt,"coreBuddyAchievements",n.id),{clientId:n.id,badges:Ge,totalVolume:Math.round(qe),updatedAt:lt.now()}),Pe.length>0&&nt(Ue=>[...Ue,...Pe])}catch(ve){console.error("Error updating volume:",ve)}},Bt=async(de,ve,je)=>{if(n)try{const Qe=n.id,qe=await Gn(Tt(tt,"coreBuddyPBs",Qe)),Ge=(qe.exists()?qe.data():null)?.exercises||{},Ue=Ge[de];let Ie=!1;if(Ue?(ve>(Ue.weight||0)||ve===(Ue.weight||0)&&je>(Ue.reps||0))&&(Ie=!0):Ie=!0,Ie){const we={...Ge,[de]:{weight:ve,reps:je,achievedAt:lt.now()}};await Wn(Tt(tt,"coreBuddyPBs",Qe),{clientId:n.id,exercises:we,updatedAt:lt.now()}),Wt(`New PB! ${ve}kg  ${je} reps`,"success"),wt(),await Dn(de,ve)}}catch(Qe){console.error("Error checking PB:",Qe)}},Dn=async(de,ve)=>{if(n)try{const je=await Gn(Tt(tt,"coreBuddyTargets",n.id));if(!je.exists())return;const qe=(je.data().targets||{})[de];if(!qe||ve<qe.targetWeight)return;const Pe=await Gn(Tt(tt,"coreBuddyAchievements",n.id)),Ge=Pe.exists()?Pe.data():{clientId:n.id,badges:[],totalVolume:0};if(Ge.badges.some(Ke=>Ke.type==="pb_target"&&Ke.exercise===de&&Ke.targetWeight===qe.targetWeight))return;const Ie={type:"pb_target",exercise:de,group:IM[de]||"push",targetWeight:qe.targetWeight,achievedAt:lt.now()},we=[...Ge.badges,Ie];await Wn(Tt(tt,"coreBuddyAchievements",n.id),{...Ge,badges:we,updatedAt:lt.now()}),nt(Ke=>[...Ke,Ie])}catch(je){console.error("Error checking target badge:",je)}},Ht=ht&&i.jsxs("div",{className:`toast-notification ${ht.type}`,children:[ht.type==="success"&&i.jsx("span",{children:" "}),ht.message]}),wn=(de,ve)=>i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:ve,"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(a||y==="loading")return i.jsx("div",{className:"cb-loading",children:i.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&T){const de=T;return i.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":d,children:[wn(de.name,()=>p("/client/core-buddy/workouts")),i.jsxs("main",{className:"pg-main",children:[i.jsxs("div",{className:"pg-overview-hero",children:[i.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:MM[de.focus]})}),i.jsx("h2",{className:"pg-overview-name",children:de.name}),i.jsx("p",{className:"pg-overview-desc",children:de.description}),i.jsxs("div",{className:"pg-overview-stats",children:[i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:de.duration}),i.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:de.daysPerWeek}),i.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:de.duration*de.daysPerWeek}),i.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),i.jsx("div",{className:"pg-overview-days",children:de.days.map((ve,je)=>i.jsxs("div",{className:"pg-day-card",children:[i.jsxs("div",{className:"pg-day-header",children:[i.jsx("span",{className:"pg-day-name",children:ve.name}),i.jsx("span",{className:"pg-day-label",children:ve.label})]}),i.jsx("div",{className:"pg-day-exercises",children:ve.exercises.map((Qe,qe)=>{const Pe=Gh(Qe,1,de);return i.jsxs("div",{className:"pg-day-ex",children:[i.jsx("span",{className:"pg-day-ex-name",children:Qe.name}),i.jsx("span",{className:"pg-day-ex-target",children:Qe.type==="timed"?`${Pe.sets}${Pe.time}s`:`${Pe.sets}${Pe.reps}`}),i.jsx("span",{className:`pg-day-ex-badge pg-badge-${Qe.type}`,children:Qe.type==="weighted"?"WT":Qe.type==="timed"?"TMR":"BW"})]},qe)})})]},je))}),i.jsxs("div",{className:"pg-overview-note",children:[i.jsx("strong",{children:"Progressive Overload:"})," +",de.repProg," reps/week",de.timeProg?`, +${de.timeProg}s/week for timed`:""]}),i.jsx("button",{className:"pg-start-btn",onClick:()=>gn(de),children:"Start Programme"})]}),Ht]})}if(y==="dashboard"){const de=vt();if(!de)return w("browse"),null;const ve=Rt(),je=W?.completedSessions||{},Qe=ve.totalSessions?Math.round(ve.totalCompleted/ve.totalSessions*100):0,qe=Math.round(ve.totalCompleted/(ve.totalSessions||1)*AM);return i.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":d,children:[wn("Programme",()=>p("/client/core-buddy/workouts")),i.jsxs("main",{className:"pg-main",children:[i.jsxs("div",{className:"pg-dash-hero",children:[i.jsxs("div",{className:"pg-dash-ring-wrap",children:[i.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:mo.map((Pe,Ge)=>i.jsx("line",{x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,className:Ge<qe?"pg-tick-filled":"pg-tick-empty",strokeWidth:Pe.thick?"3":"2"},Ge))}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"pg-dash-ring-logo",width:"50",height:"50"})]}),i.jsx("h2",{className:"pg-dash-name",children:de.name}),i.jsxs("div",{className:"pg-dash-progress-text",children:[i.jsxs("span",{className:"pg-dash-pct",children:[Qe,"%"]}),i.jsxs("span",{className:"pg-dash-week",children:["Week ",ve.currentWeek," of ",de.duration]})]})]}),i.jsx("div",{className:"pg-weeks",children:Array.from({length:de.duration},(Pe,Ge)=>{const Ue=Ge+1;return i.jsxs("div",{className:`pg-week-row${Ue===ve.currentWeek?" pg-week-current":""}`,children:[i.jsxs("span",{className:"pg-week-label",children:["W",Ue]}),i.jsx("div",{className:"pg-week-days",children:de.days.map((Ie,we)=>{const Ke=`w${Ue}d${we}`,st=!!je[Ke],xt=!ve.complete&&Ue===ve.nextWeek&&we===ve.nextDay;return i.jsx("button",{className:`pg-day-dot${st?" done":""}${xt?" next":""}`,disabled:st,onClick:()=>{xt&&He(Ue,we)},children:st?i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})}):i.jsx("span",{children:Ie.name.replace("Day ","")})},we)})})]},Ge)})}),!ve.complete&&ve.nextDay>=0&&i.jsxs("div",{className:"pg-next-session",children:[i.jsx("h3",{children:"Next Session"}),i.jsxs("p",{className:"pg-next-info",children:["Week ",ve.nextWeek,"  ",de.days[ve.nextDay].name,": ",de.days[ve.nextDay].label]}),i.jsx("div",{className:"pg-next-exercises",children:de.days[ve.nextDay].exercises.map((Pe,Ge)=>{const Ue=Gh(Pe,ve.nextWeek,de);return i.jsxs("div",{className:"pg-next-ex",children:[i.jsx("span",{className:"pg-next-ex-name",children:Pe.name}),i.jsx("span",{className:"pg-next-ex-target",children:Pe.type==="timed"?`${Ue.sets}${Ue.time}s`:`${Ue.sets}${Ue.reps}`})]},Ge)})}),i.jsx("button",{className:"pg-start-btn",onClick:()=>He(ve.nextWeek,ve.nextDay),children:"Start Session"})]}),ve.complete&&i.jsxs("div",{className:"pg-complete-msg",children:[i.jsx("h3",{children:"Programme Complete! "}),i.jsxs("p",{children:["You finished all ",ve.totalSessions," sessions."]}),i.jsx("button",{className:"pg-start-btn",onClick:zt,children:"Choose New Programme"})]}),i.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&zt()},children:"Quit Programme"})]}),i.jsx(Ro,{active:"workouts"}),Ht]})}if(y==="session"){const de=vt();if(!de)return null;const ve=de.days[X],je=ve.exercises[ke],Qe=Gh(je,L,de),qe=S[ke],Pe=qe?.sets?.length||0,Ge=ve.exercises.length,Ue=(ke+Pe/Qe.sets)/Ge,Ie=ct[je.name],we=at(L,X,je.name);je.type==="timed"&&Y===0&&!We&&Pe===Ae&&setTimeout(()=>Te(Qe.time),0);const Ke=()=>{Ie?.isGif?G(!V):ge.current&&(V?ge.current.pause():ge.current.play(),G(!V))};return i.jsxs("div",{className:"pg-page pg-page-session","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"pg-session-progress",children:i.jsx("div",{className:"pg-session-progress-fill",style:{width:`${Ue*100}%`}})}),i.jsxs("div",{className:"pg-session-header",children:[i.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&w("dashboard")},children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),i.jsxs("div",{className:"pg-session-title",children:[i.jsxs("span",{className:"pg-session-counter",children:[ke+1," / ",Ge]}),i.jsxs("span",{className:"pg-session-week",children:["Week ",L,"  ",ve.name]})]})]}),Ie&&i.jsxs("div",{className:"pg-video-container",onClick:Ke,children:[Ie.isGif?i.jsx("img",{className:"pg-video",src:Ie.url,alt:je.name}):i.jsx("video",{ref:ge,className:"pg-video",src:Ie.url,loop:!0,muted:!0,playsInline:!0},je.name),!V&&i.jsxs("div",{className:"pg-video-overlay",children:[i.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),i.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),i.jsx("div",{className:"pg-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"pg-exercise-card",children:[i.jsx("h2",{className:"pg-ex-name",children:je.name}),i.jsx("span",{className:`pg-ex-type-badge pg-badge-${je.type}`,children:je.type==="weighted"?"Weight + Reps":je.type==="timed"?"Timed":"Reps Only"}),je.type==="weighted"&&we&&i.jsxs("div",{className:"pg-last-week",children:[i.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),i.jsxs("span",{className:"pg-last-week-value",children:[we.weight,"kg x ",we.reps," reps"]})]}),i.jsxs("div",{className:"pg-ex-set-info",children:[i.jsxs("span",{className:"pg-ex-set-num",children:["Set ",Pe+1," of ",Qe.sets]}),i.jsxs("span",{className:"pg-ex-target",children:["Target: ",je.type==="timed"?`${Qe.time}s hold`:`${Qe.reps} reps`]})]}),je.type==="weighted"&&i.jsxs("div",{className:"pg-input-area",children:[i.jsxs("div",{className:"pg-input-group",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",value:D,onChange:st=>M(st.target.value),placeholder:"0",className:"pg-input"})]}),i.jsxs("div",{className:"pg-input-group",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",value:H,onChange:st=>A(st.target.value),placeholder:String(Qe.reps),className:"pg-input"})]})]}),je.type==="reps"&&i.jsx("div",{className:"pg-input-area",children:i.jsxs("div",{className:"pg-input-group pg-input-single",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",value:H,onChange:st=>A(st.target.value),placeholder:String(Qe.reps),className:"pg-input"})]})}),je.type==="timed"&&i.jsxs("div",{className:"pg-timer-area",children:[i.jsx("div",{className:"pg-timer-display",children:i.jsxs("span",{className:"pg-timer-value",children:[Y,"s"]})}),We?i.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>Nt(!1),children:"Stop"}):i.jsx("button",{className:"pg-timer-btn",onClick:()=>{Y===0&&Te(Qe.time),Nt(!0)},children:Y<Qe.time&&Y>0?"Resume":"Start Timer"})]}),i.jsx("button",{className:"pg-log-set-btn",onClick:Gt,disabled:je.type==="timed"&&We,children:Pe+1<Qe.sets?"Log Set":ke+1<Ge?"Log Set  Next Exercise":"Log Set  Complete"}),qe?.sets?.length>0&&i.jsx("div",{className:"pg-completed-sets",children:qe.sets.map((st,xt)=>i.jsxs("div",{className:"pg-completed-set",children:[i.jsx("span",{className:"pg-completed-set-check",children:""}),i.jsxs("span",{children:["Set ",xt+1,": ",st.weight!==void 0?`${st.weight}kg  ${st.reps}`:st.time!==void 0?`${st.time}s`:`${st.reps} reps`]})]},xt))})]}),Ht]})}if(y==="sessionComplete"){const ve=vt()?.days[X],je=S.reduce((qe,Pe)=>qe+Pe.sets.length,0),Qe=S.reduce((qe,Pe)=>qe+Pe.sets.reduce((Ge,Ue)=>Ge+(Ue.weight||0)*(Ue.reps||0),0),0);return i.jsxs("div",{className:"pg-page pg-page-center","data-theme":l?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"pg-session-done",children:[i.jsxs("div",{className:"pg-done-ring",children:[i.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:mo.map((qe,Pe)=>i.jsx("line",{x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,className:"pg-tick-complete",strokeWidth:qe.thick?"3.5":"2",style:{animationDelay:`${Pe*.02}s`}},Pe))}),i.jsx("div",{className:"pg-done-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),i.jsxs("p",{className:"pg-done-subtitle",children:["Week ",L,"  ",ve?.name,": ",ve?.label]}),i.jsxs("div",{className:"pg-done-stats",children:[i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:S.length}),i.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:je}),i.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),Qe>0&&i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:Math.round(Qe).toLocaleString()}),i.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),i.jsx("button",{className:"pg-start-btn",onClick:()=>w("dashboard"),children:"Back to Programme"})]}),Se&&i.jsx("div",{className:"pg-badge-celebration",onClick:()=>Ve(null),children:i.jsxs("div",{className:"pg-badge-celebration-card",onClick:qe=>qe.stopPropagation(),children:[i.jsx("div",{className:"pg-badge-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pg-badge-celebration-title",children:Se.badges.length===1?"Badge Earned!":`${Se.badges.length} Badges Earned!`}),i.jsx("div",{className:"pg-badge-celebration-list",children:Se.badges.map((qe,Pe)=>i.jsx("div",{className:"pg-badge-celebration-item",children:qe.type==="pb_target"?`${qe.exercise}  ${qe.targetWeight}kg`:qe.label},Pe))}),i.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Ve(null),children:"Tap to dismiss"})]})}),Ht]})}return null}const LM={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},OM={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},kp=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function VM(s){return LM[s]||"push"}function BM(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function UM(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function zM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=la(),{isDark:l,toggleTheme:u,accent:d}=Bi(),p=Gs(),[g,y]=_.useState(!0),[w,T]=_.useState(null),[k,P]=_.useState({});_.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const[R,D]=await Promise.all([Gn(Tt(tt,"coreBuddyAchievements",n.id)),Gn(Tt(tt,"coreBuddyPBs",n.id))]);R.exists()&&T(R.data()),D.exists()&&P(D.data().exercises||{})}catch(R){console.error("Error loading achievements:",R)}y(!1)})()},[n]);const W=w?.badges||[],B=w?.totalVolume||0,L=W.filter(S=>S.type==="pb_target"),re=W.filter(S=>S.type==="volume_milestone"),X={push:[],pull:[],lower:[],core:[]};L.forEach(S=>{const R=S.group||VM(S.exercise);X[R]&&X[R].push(S)});const he=kp.find(S=>B<S.threshold),ke=kp.filter(S=>B>=S.threshold).pop()?.threshold||0,ze=he?(B-ke)/(he.threshold-ke):1;if(a||g)return i.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsx("div",{className:"ach-loading-inline",children:i.jsx("div",{className:"cb-loading-spinner"})})]});const Ae=W.length,I=Ae>0||B>0;return i.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"ach-main",children:[i.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/core-buddy"),children:" Back"}),i.jsxs("div",{className:"ach-stats-banner",children:[i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:Ae}),i.jsx("span",{className:"ach-stat-label",children:Ae===1?"Badge":"Badges"})]}),i.jsx("div",{className:"ach-stat-divider"}),i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:BM(B)}),i.jsxs("span",{className:"ach-stat-label",children:[UM(B)," lifted"]})]}),i.jsx("div",{className:"ach-stat-divider"}),i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:Object.keys(k).length}),i.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!I&&i.jsxs("div",{className:"ach-empty",children:[i.jsx("div",{className:"ach-empty-icon",children:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[i.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),i.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),i.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),i.jsx("h4",{children:"No achievements yet"}),i.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),i.jsxs("div",{className:"ach-section",children:[i.jsxs("h3",{className:"ach-section-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),i.jsxs("div",{className:"ach-volume-hero",children:[i.jsxs("div",{className:"ach-volume-ring",children:[i.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:mo.map((S,R)=>{const D=R<Math.round(ze*60);return i.jsx("line",{x1:S.x1,y1:S.y1,x2:S.x2,y2:S.y2,className:D?"ach-tick-filled":"ach-tick-empty",strokeWidth:S.thick?"3":"2"},R)})}),i.jsxs("div",{className:"ach-volume-center",children:[i.jsx("span",{className:"ach-volume-number",children:Math.round(B).toLocaleString()}),i.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),he&&i.jsxs("div",{className:"ach-volume-next",children:["Next: ",i.jsx("strong",{children:he.label})," (",(he.threshold-B).toLocaleString(),"kg to go)"]})]}),i.jsx("div",{className:"ach-milestone-shelf",children:kp.map((S,R)=>{const D=B>=S.threshold,M=re.find(H=>H.milestone===S.threshold);return i.jsxs("div",{className:`ach-milestone ${D?"unlocked":"locked"}`,children:[i.jsx("div",{className:"ach-milestone-hex",children:i.jsx("span",{className:"ach-milestone-icon",children:S.icon})}),i.jsx("span",{className:"ach-milestone-label",children:S.label}),M?.achievedAt&&i.jsx("span",{className:"ach-milestone-date",children:(M.achievedAt.toDate?M.achievedAt.toDate():new Date(M.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},R)})})]}),i.jsxs("div",{className:"ach-section",children:[i.jsxs("h3",{className:"ach-section-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),L.length===0?i.jsx("div",{className:"ach-pb-empty",children:i.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",i.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(X).map(([S,R])=>{if(R.length===0)return null;const D=OM[S];return i.jsxs("div",{className:"ach-group",children:[i.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:D.color},children:[i.jsx("span",{className:"ach-group-label",style:{color:D.color},children:D.label}),i.jsx("span",{className:"ach-group-count",children:R.length})]}),i.jsx("div",{className:"ach-badge-grid",children:R.map((M,H)=>i.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${H*.06}s`,"--group-color":D.color},children:[i.jsx("div",{className:"ach-badge-hex",style:{borderColor:D.color,boxShadow:`0 0 12px ${D.color}33`},children:i.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:D.color,strokeWidth:"2",strokeLinecap:"round",children:i.jsx("path",{d:D.icon})})}),i.jsxs("div",{className:"ach-badge-info",children:[i.jsx("span",{className:"ach-badge-exercise",children:M.exercise}),i.jsxs("span",{className:"ach-badge-value",style:{color:D.color},children:[M.targetWeight,"kg"]}),M.achievedAt&&i.jsx("span",{className:"ach-badge-date",children:(M.achievedAt.toDate?M.achievedAt.toDate():new Date(M.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},H))})]},S)})]})]}),i.jsx(Ro,{active:"home"})]})}const Kh=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function FM(s){const e=new Date(s),n=e.getDay(),a=n===0?-6:1-n;return e.setDate(e.getDate()+a),e.setHours(0,0,0,0),e}function Sp(s){return s.toISOString().split("T")[0]}function HM(s){return Array.from({length:7},(e,n)=>{const a=new Date(s);return a.setDate(s.getDate()+n),a})}function qM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=la(),{isDark:l,toggleTheme:u,accent:d}=Bi(),p=Gs(),[g,y]=_.useState({}),[w,T]=_.useState(!0),[k,P]=_.useState(!1),[W,B]=_.useState(0),[L,re]=_.useState(null),[X,he]=_.useState(null),[ke,ze]=_.useState(!1),Ae=_.useRef([]),I=_.useRef([]),S=_.useCallback((G,ge="info")=>{re({message:G,type:ge}),setTimeout(()=>re(null),3e3)},[]),R=new Date,D=Sp(R),M=FM(R),H=HM(M),A=["M","T","W","T","F","S","S"];_.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const ge=_s(tt,"habitLogs"),Se=$s(ge,Cs("clientId","==",n.id)),Ve=await Ws(Se),Me={};Ve.docs.forEach(pt=>{const Wt=pt.data();Me[Wt.date]={...Wt,_id:pt.id}}),y(Me);let nt=0;const ht=new Date(R);for(;;){const pt=Sp(ht),Wt=Me[pt];if(Wt)if(Object.values(Wt.habits||{}).filter(Boolean).length>=3)nt++,ht.setDate(ht.getDate()-1);else break;else if(pt===D)ht.setDate(ht.getDate()-1);else break}B(nt)}catch(ge){console.error("Error loading habit logs:",ge)}finally{T(!1)}})()},[s,n]);const We=g[D]||{habits:{}},Nt=async G=>{if(!s||k)return;const ge=We.habits?.[G]||!1;ge||(Ae.current=[...Array(10)].map((Se,Ve)=>{const Me=Ve/10*2*Math.PI,nt=18+Math.random()*20;return{tx:Math.cos(Me)*nt,ty:Math.sin(Me)*nt,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),he(G),setTimeout(()=>he(null),700)),P(!0);try{const Se=We.habits||{},Ve={...Se,[G]:!Se[G]},Me=We._id||`${n.id}_${D}`;await Wn(Tt(tt,"habitLogs",Me),{clientId:n.id,date:D,habits:Ve}),y(ht=>({...ht,[D]:{clientId:n.id,date:D,habits:Ve,_id:Me}})),Object.values(Ve).filter(Boolean).length===Kh.length&&!ge&&(I.current=[...Array(50)].map((ht,pt)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][pt%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{ze(!0),setTimeout(()=>ze(!1),3500)},500))}catch(Se){console.error("Error saving habit:",Se),S("Failed to save. Try again.","error")}finally{P(!1)}},Y=H.map(G=>{const ge=Sp(G),Se=g[ge],Ve=Se?Object.values(Se.habits||{}).filter(Boolean).length:0;return{date:G,dateStr:ge,completed:Ve,total:Kh.length}}),Te=Y.reduce((G,ge)=>G+ge.completed,0),De=Y.reduce((G,ge)=>G+ge.total,0),ct=De>0?Math.round(Te/De*100):0,rt=Object.values(We.habits||{}).filter(Boolean).length,V=Math.round(rt/Kh.length*100);return i.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a||w?i.jsx("div",{className:"cbc-loading-inline",children:i.jsx("div",{className:"cbc-loading-spinner"})}):i.jsxs("main",{className:"cbc-main",children:[i.jsxs("div",{className:"cbc-ring-section",children:[i.jsxs("div",{className:"cbc-progress-ring",children:[i.jsxs("svg",{viewBox:"0 0 200 200",children:[i.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),i.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-V/100*2*Math.PI*80})]}),i.jsxs("div",{className:"cbc-ring-center",children:[i.jsxs("span",{className:"cbc-ring-pct",children:[V,"%"]}),i.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),i.jsxs("div",{className:"cbc-streak",children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),i.jsx("span",{className:"cbc-streak-count",children:W}),i.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),i.jsxs("div",{className:"cbc-section",children:[i.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),i.jsx("div",{className:"cbc-habits",children:Kh.map(G=>{const ge=We.habits?.[G.key]||!1,Se=X===G.key;return i.jsxs("button",{className:`cbc-habit-btn cbc-habit-${G.key} ${ge?"cbc-habit-done":""} ${Se?"cbc-habit-just-checked":""}`,onClick:()=>Nt(G.key),disabled:k,children:[i.jsx("div",{className:"cbc-habit-check",children:ge?i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${Se?"cbc-check-animate":""}`})}):i.jsx("div",{className:"cbc-habit-circle"})}),Se&&i.jsx("div",{className:"cbc-particles",children:Ae.current.map((Ve,Me)=>i.jsx("span",{className:"cbc-particle",style:{"--tx":`${Ve.tx}px`,"--ty":`${Ve.ty}px`,"--size":`${Ve.size}px`,animationDuration:`${Ve.duration}s`}},Me))}),i.jsx("div",{className:`cbc-habit-icon cbc-icon-${G.key}`,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:i.jsx("path",{d:G.icon})})}),i.jsx("span",{className:"cbc-habit-label",children:G.label})]},G.key)})})]}),i.jsxs("div",{className:"cbc-section",children:[i.jsx("h2",{className:"cbc-section-title",children:"This Week"}),i.jsx("div",{className:"cbc-week-grid",children:Y.map((G,ge)=>{const Se=G.dateStr===D,Ve=G.total>0?G.completed/G.total:0,Me=38,nt=2*Math.PI*Me,ht=nt-Ve*nt;return i.jsxs("div",{className:`cbc-day-ring ${Se?"cbc-day-today":""} ${G.completed>0?"cbc-day-active":""}`,children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:Me}),i.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:Me,strokeDasharray:nt,strokeDashoffset:ht})]}),i.jsx("span",{className:"cbc-day-label",children:A[ge]}),i.jsxs("span",{className:"cbc-day-count",children:[G.completed,"/",G.total]})]},ge)})}),i.jsxs("div",{className:"cbc-week-summary",children:[i.jsx("div",{className:"cbc-week-summary-bar",children:i.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${ct}%`}})}),i.jsxs("span",{className:"cbc-week-summary-text",children:[Te," / ",De," habits this week (",ct,"%)"]})]})]})]}),i.jsx(Ro,{active:"home"}),ke&&i.jsxs("div",{className:"cbc-celebration",onClick:()=>ze(!1),children:[i.jsx("div",{className:"cbc-confetti-container",children:I.current.map((G,ge)=>i.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${G.x}%`,"--delay":`${G.delay}s`,"--color":G.color,"--drift":`${G.drift}px`,"--spin":`${G.spin}deg`,"--duration":`${G.duration}s`,width:`${G.width}px`,height:`${G.height}px`}},ge))}),i.jsxs("div",{className:"cbc-celebration-card",children:[i.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),i.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),i.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),L&&i.jsx("div",{className:`toast-notification ${L.type}`,children:L.message})]})}const Rr=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],co=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function $M(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Ar(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function WM(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function GM(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function Yh(s,e){if(!e)return"-";switch(s.unit){case"weight":return GM(e.weight,e.reps);case"time":return WM(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function fl(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function jp(s,e){return!e||e===0?null:(s-e)/e*100}function KM({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return i.jsx("div",{className:"pb-trend-empty",children:i.jsx("p",{children:"Not enough data for trend line yet"})});const a=s.map(B=>{const L=B.benchmarks?.[e];if(!L)return 0;switch(n){case"weight":return(L.weight||0)*(L.reps||0);case"time":return L.time||0;case"reps":return L.reps||0;case"distance":return L.distance||0;default:return 0}}),l=Math.max(...a),u=Math.min(...a),d=l-u||1,p=300,g=100,y=20,w=p-y*2,T=g-y*2,k=a.map((B,L)=>{const re=y+L/(a.length-1)*w,X=y+T-(B-u)/d*T;return{x:re,y:X,value:B}}),P=k.map((B,L)=>`${L===0?"M":"L"} ${B.x} ${B.y}`).join(" "),W=P+` L ${k[k.length-1].x} ${y+T} L ${k[0].x} ${y+T} Z`;return i.jsxs("div",{className:"pb-trend-chart",children:[i.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),i.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),i.jsx("path",{d:W,fill:"url(#trendGradientJr)"}),i.jsx("path",{d:P,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),k.map((B,L)=>i.jsx("circle",{cx:B.x,cy:B.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},L))]}),i.jsx("div",{className:"pb-trend-labels",children:s.map((B,L)=>i.jsxs("span",{className:"pb-trend-label",children:[B.month.split("-")[1],"/",B.month.split("-")[0].slice(2)]},L))})]})}function YM(){const[s,e]=_.useState("bests"),[n,a]=_.useState([]),[l,u]=_.useState(!0),[d,p]=_.useState(!1),[g,y]=_.useState(0),[w,T]=_.useState(!1),[k,P]=_.useState(!1),[W,B]=_.useState(!1),[L,re]=_.useState({}),[X,he]=_.useState({}),[ke,ze]=_.useState({}),[Ae,I]=_.useState({}),[S,R]=_.useState({}),[D,M]=_.useState(!1),[H,A]=_.useState({}),[We,Nt]=_.useState([]),[Y,Te]=_.useState(null),[De,ct]=_.useState(null),[rt,V]=_.useState(!1),[G,ge]=_.useState(""),[Se,Ve]=_.useState(""),Me=_.useRef(null),nt=_.useRef(0),ht=_.useRef(0),pt=_.useRef("right"),Wt=_.useCallback(z=>{y(ue=>{const fe=Math.max(0,Math.min(Rr.length-1,z));return fe===ue?ue:(pt.current=fe>ue?"right":"left",fe)})},[]),{currentUser:pn,isClient:Ct,clientData:wt,loading:ne}=la(),{isDark:gn}=Bi(),zt=Gs(),vt=_.useCallback((z,ue="info")=>{ct({message:z,type:ue}),setTimeout(()=>ct(null),4e3)},[]);_.useEffect(()=>{!ne&&(!pn||!Ct)&&zt("/")},[pn,Ct,ne,zt]),_.useEffect(()=>{wt&&Rt()},[wt]);const Rt=async()=>{try{const z=$s(_s(tt,"juniorPBs"),Cs("clientId","==",wt.id)),fe=(await Ws(z)).docs.map(Ye=>({id:Ye.id,...Ye.data()}));fe.sort((Ye,ot)=>Ye.month.localeCompare(ot.month)),a(fe);const pe=$s(_s(tt,"juniorPBTargets"),Cs("clientId","==",wt.id)),ce=await Ws(pe);if(!ce.empty){const Ye=ce.docs[0].data();ze(Ye.targets||{}),I(Ye.metricTargets||{}),R(Ye.targets||{}),A(Ye.metricTargets||{})}const Be=$s(_s(tt,"juniorAchievements"),Cs("clientId","==",wt.id)),ut=await Ws(Be);ut.empty||Nt(ut.docs[0].data().badges||[])}catch(z){console.error("Error fetching junior personal bests:",z)}u(!1)},at=$M(),He=n.find(z=>z.month===at),Gt=n.filter(z=>z.month<at),ns=Gt.length>0?Gt[Gt.length-1]:null;_.useEffect(()=>{He?(re(He.benchmarks||{}),he(He.bodyMetrics||{})):(re({}),he({}))},[He?.id]);const At=async(z,ue)=>{const fe=[];if(z==="strength"?Rr.forEach(pe=>{const ce=ke[pe.key];if(!ce)return;const Be=ue[pe.key];if(!Be)return;let ut;if(ce.targetType==="time"){if(!ce.targetValue)return;const Ye=ce.startValue||0,ot=Be.time||0,dt=ce.targetValue-Ye;ut=dt===0?ot>=ce.targetValue?1:0:Math.max(0,(ot-Ye)/dt)}else if(ce.targetType==="reps"){if(!ce.targetReps)return;const Ye=ce.startReps||0,ot=Be.reps||0,dt=ce.targetReps-Ye;ut=dt===0?ot>=ce.targetReps?1:0:Math.max(0,(ot-Ye)/dt)}else if(ce.targetType==="distance"){if(!ce.targetDistance)return;const Ye=ce.startDistance||0,ot=Be.distance||0,dt=ce.targetDistance-Ye;ut=dt===0?ot>=ce.targetDistance?1:0:Math.max(0,(ot-Ye)/dt)}else{if(!ce.targetWeight&&!ce.targetReps)return;const Ye=(ce.startWeight||0)*(ce.startReps||0),ot=(ce.targetWeight||0)*(ce.targetReps||0),dt=(Be.weight||0)*(Be.reps||0),rn=ot-Ye;ut=rn===0?dt>=ot?1:0:Math.max(0,(dt-Ye)/rn)}if(ut>=1){let Ye,ot;ce.targetType==="time"?(Ye=We.some(dt=>dt.type==="strength"&&dt.key===pe.key&&dt.targetValue===ce.targetValue),ot=`${pe.name} ${ce.targetValue}s`):ce.targetType==="reps"?(Ye=We.some(dt=>dt.type==="strength"&&dt.key===pe.key&&dt.targetReps===ce.targetReps),ot=`${pe.name} ${ce.targetReps} reps`):ce.targetType==="distance"?(Ye=We.some(dt=>dt.type==="strength"&&dt.key===pe.key&&dt.targetDistance===ce.targetDistance),ot=`${pe.name} ${ce.targetDistance}cm`):(Ye=We.some(dt=>dt.type==="strength"&&dt.key===pe.key&&dt.targetWeight===ce.targetWeight&&dt.targetReps===ce.targetReps),ot=`${pe.name} ${ce.targetWeight}kg  ${ce.targetReps}`),Ye||fe.push({type:"strength",key:pe.key,...ce.targetType==="time"?{targetType:"time",targetValue:ce.targetValue}:ce.targetType==="reps"?{targetType:"reps",targetReps:ce.targetReps}:ce.targetType==="distance"?{targetType:"distance",targetDistance:ce.targetDistance}:{targetWeight:ce.targetWeight,targetReps:ce.targetReps},achievedMonth:at,label:ot})}}):co.forEach(pe=>{const ce=Ae[pe.key];if(!ce||!ce.targetValue)return;const Be=ue[pe.key];if(Be==null)return;const ut=ce.startValue||0,Ye=ce.targetValue,ot=Ye-ut;(ot===0?Be===Ye?1:0:Math.max(0,(Be-ut)/ot))>=1&&(We.some(Es=>Es.type==="metric"&&Es.key===pe.key&&Es.targetValue===Ye)||fe.push({type:"metric",key:pe.key,targetValue:Ye,achievedMonth:at,label:`${pe.name} ${Ye}${pe.suffix}`}))}),fe.length>0){const pe=[...We,...fe];await Wn(Tt(tt,"juniorAchievements",wt.id),{clientId:wt.id,badges:pe,updatedAt:lt.now()}),Nt(pe),Te(fe),setTimeout(()=>Te(null),5e3)}},Bt=(z,ue)=>{if(z==="strength"){const fe=ke[ue];if(!fe)return!1;switch(Rr.find(ce=>ce.key===ue)?.unit){case"time":return We.some(ce=>ce.type==="strength"&&ce.key===ue&&ce.targetValue===fe.targetValue);case"reps":return We.some(ce=>ce.type==="strength"&&ce.key===ue&&ce.targetReps===fe.targetReps);case"distance":return We.some(ce=>ce.type==="strength"&&ce.key===ue&&ce.targetDistance===fe.targetDistance);default:return!fe.targetWeight&&!fe.targetReps?!1:We.some(ce=>ce.type==="strength"&&ce.key===ue&&ce.targetWeight===fe.targetWeight&&ce.targetReps===fe.targetReps)}}else{const fe=Ae[ue];return!fe||!fe.targetValue?!1:We.some(pe=>pe.type==="metric"&&pe.key===ue&&pe.targetValue===fe.targetValue)}},Dn=async()=>{p(!0);try{const z=`${wt.id}_${at}`,ue=He||{};await Wn(Tt(tt,"juniorPBs",z),{clientId:wt.id,month:at,benchmarks:L,bodyMetrics:ue.bodyMetrics||X||{},createdAt:ue.createdAt||lt.now(),updatedAt:lt.now()}),await At("strength",L),vt("Benchmarks saved!","success"),T(!1),await Rt()}catch(z){console.error("Error saving benchmarks:",z),vt("Failed to save. Please try again.","error")}p(!1)},Ht=async()=>{p(!0);try{const z=`${wt.id}_${at}`,ue=He||{};await Wn(Tt(tt,"juniorPBs",z),{clientId:wt.id,month:at,benchmarks:ue.benchmarks||L||{},bodyMetrics:X,createdAt:ue.createdAt||lt.now(),updatedAt:lt.now()}),await At("metric",X),vt("Body metrics saved!","success"),P(!1),await Rt()}catch(z){console.error("Error saving metrics:",z),vt("Failed to save. Please try again.","error")}p(!1)},wn=(z,ue,fe)=>{re(pe=>({...pe,[z]:{...pe[z],[ue]:fe===""?"":parseFloat(fe)}}))},de=(z,ue)=>{he(fe=>({...fe,[z]:ue===""?"":parseFloat(ue)}))},ve=(z,ue,fe)=>{R(pe=>({...pe,[z]:{...pe[z],[ue]:fe===""?"":parseFloat(fe)}}))},je=async()=>{p(!0);try{const z=`targets_${wt.id}`,ue=He?.benchmarks||{},fe={};Rr.forEach(pe=>{const ce=ue[pe.key];switch(pe.unit){case"time":S[pe.key]?.targetValue&&(fe[pe.key]={targetType:"time",targetValue:S[pe.key].targetValue,startValue:ce?.time||0});break;case"reps":S[pe.key]?.targetReps&&(fe[pe.key]={targetType:"reps",targetReps:S[pe.key].targetReps,startReps:ce?.reps||0});break;case"distance":S[pe.key]?.targetDistance&&(fe[pe.key]={targetType:"distance",targetDistance:S[pe.key].targetDistance,startDistance:ce?.distance||0});break;default:(S[pe.key]?.targetWeight||S[pe.key]?.targetReps)&&(fe[pe.key]={targetWeight:S[pe.key].targetWeight||0,targetReps:S[pe.key].targetReps||0,startWeight:ce?.weight||0,startReps:ce?.reps||0})}}),await Wn(Tt(tt,"juniorPBTargets",z),{clientId:wt.id,targets:fe,metricTargets:Ae,updatedAt:lt.now()}),ze(fe),R(fe),vt("Targets saved!","success"),B(!1)}catch(z){console.error("Error saving targets:",z),vt("Failed to save targets.","error")}p(!1)},Qe=(z,ue)=>{A(fe=>({...fe,[z]:{...fe[z],targetValue:ue===""?"":parseFloat(ue)}}))},qe=async()=>{p(!0);try{const z=`targets_${wt.id}`,ue={};co.forEach(fe=>{if(H[fe.key]?.targetValue){const pe=He?.bodyMetrics?.[fe.key]||0;ue[fe.key]={targetValue:H[fe.key].targetValue,startValue:pe}}}),await Wn(Tt(tt,"juniorPBTargets",z),{clientId:wt.id,targets:ke,metricTargets:ue,updatedAt:lt.now()}),I(ue),A(ue),vt("Metric targets saved!","success"),M(!1)}catch(z){console.error("Error saving metric targets:",z),vt("Failed to save targets.","error")}p(!1)},Pe=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const z=Tt(tt,"juniorPBTargets",`targets_${wt.id}`);await cy(z),ze({}),I({}),R({}),A({}),vt("All goals have been reset","success")}catch(z){console.error("Error resetting targets:",z),vt("Failed to reset goals","error")}p(!1)}},Ge=(z,ue)=>{const fe=ke[z];if(!fe||!ue)return null;if(fe.targetType==="time"){if(!fe.targetValue)return null;const Ye=fe.startValue||0,ot=fe.targetValue,dt=ue.time||0,rn=ot-Ye;return rn<=0?dt>=ot?1:0:Math.max(0,Math.min((dt-Ye)/rn,1))}if(fe.targetType==="reps"){if(!fe.targetReps)return null;const Ye=fe.startReps||0,ot=fe.targetReps,dt=ue.reps||0,rn=ot-Ye;return rn<=0?dt>=ot?1:0:Math.max(0,Math.min((dt-Ye)/rn,1))}if(fe.targetType==="distance"){if(!fe.targetDistance)return null;const Ye=fe.startDistance||0,ot=fe.targetDistance,dt=ue.distance||0,rn=ot-Ye;return rn<=0?dt>=ot?1:0:Math.max(0,Math.min((dt-Ye)/rn,1))}if(!fe.targetWeight&&!fe.targetReps)return null;const pe=(fe.startWeight||0)*(fe.startReps||0),ce=(fe.targetWeight||0)*(fe.targetReps||0),Be=(ue.weight||0)*(ue.reps||0),ut=ce-pe;return ut<=0?Be>=ce?1:0:Math.max(0,Math.min((Be-pe)/ut,1))},Ue=z=>{const ue=Ae[z];if(!ue||!ue.targetValue)return null;const fe=He?.bodyMetrics?.[z];if(fe==null)return null;const pe=ue.startValue||0,ce=ue.targetValue,Be=ce-pe;return Be===0?fe===ce?1:0:Math.max(0,Math.min((fe-pe)/Be,1))},Ie=z=>{nt.current=z.touches[0].clientX,ht.current=0},we=z=>{ht.current=z.touches[0].clientX-nt.current},Ke=()=>{ht.current<-50?Wt(g+1):ht.current>50&&Wt(g-1),ht.current=0},st=z=>{const ue=He?.bodyMetrics?.[z],fe=ns?.bodyMetrics?.[z];return ue==null||fe==null?null:parseFloat((ue-fe).toFixed(2))},xt=n.find(z=>z.month===G),qt=n.find(z=>z.month===Se);if(ne||l)return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsxs("main",{className:"pb-main",children:[i.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),i.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!pn||!Ct||!wt)return null;const Fe=Rr[g],_t=He?.benchmarks?.[Fe.key],St=ns?.benchmarks?.[Fe.key],Dt=fl(Fe,_t),Ft=fl(Fe,St),bt=jp(Dt,Ft),nn=Ge(Fe.key,_t),$t=nn!==null,sn=nn!==null&&nn>=1,ln=$t?Math.round(nn*60):Dt>0?15:0,un=ke[Fe.key],jn=z=>z?z.targetType==="time"?`${z.startValue||0}s  ${z.targetValue}s`:z.targetType==="reps"?`${z.startReps||0}  ${z.targetReps} reps`:z.targetType==="distance"?`${z.startDistance||0}  ${z.targetDistance}cm`:`${z.startWeight||0}kg${z.startReps||0}  ${z.targetWeight}kg${z.targetReps}`:null;return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>zt("/client"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsxs("main",{className:"pb-main page-transition-enter",children:[i.jsxs("div",{className:"pb-intro",children:[i.jsx("h2",{children:"Junior Strength Tests"}),i.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),i.jsxs("div",{className:"pb-tabs",children:[i.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),i.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),i.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&i.jsxs("div",{className:"pb-strength-section",children:[!w&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-carousel",ref:Me,onTouchStart:Ie,onTouchMove:we,onTouchEnd:Ke,children:[i.jsx("div",{className:`pb-ring-container slide-from-${pt.current}`,children:i.jsxs("div",{className:"pb-ring",children:[i.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:wy.map((z,ue)=>{const fe=ue<Math.round(ln);return i.jsx("line",{x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,className:`pb-ring-tick ${fe?sn?"hit":"filled":"empty"}`,strokeWidth:z.thick?"3":"2"},ue)})}),i.jsxs("div",{className:"pb-ring-center",children:[i.jsx("div",{className:"pb-ring-category",children:Fe.category}),i.jsxs("div",{className:"pb-ring-exercise",children:[Fe.name,Bt("strength",Fe.key)&&i.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),i.jsx("div",{className:"pb-ring-value",children:_t?Yh(Fe,_t):"-"}),bt!==null&&i.jsxs("div",{className:`pb-ring-change ${bt>=0?"positive":"negative"}`,children:[bt>=0?"+":"",bt.toFixed(1),"%"]}),bt===null&&_t&&i.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),un&&i.jsx("div",{className:`pb-ring-target ${sn?"hit":""}`,children:sn?"Target hit!":jn(un)}),!un&&i.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),i.jsx("div",{className:"pb-carousel-dots",children:Rr.map((z,ue)=>i.jsx("button",{className:`pb-dot ${ue===g?"active":""}`,onClick:()=>Wt(ue)},ue))}),i.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Wt(g-1),disabled:g===0,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),i.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Wt(g+1),disabled:g===Rr.length-1,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),i.jsxs("div",{className:"pb-trend-section",children:[i.jsx("h4",{children:"Trend"}),i.jsx(KM,{data:n,exerciseKey:Fe.key,unit:Fe.unit})]})]}),!w&&!W&&i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:He?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>B(!0),children:Object.keys(ke).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ke).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Pe,disabled:d,children:"Reset All Goals"})]}),w&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Benchmarks - ",Ar(at)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),re(He?.benchmarks||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:Rr.map(z=>i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),z.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:L[z.key]?.weight??"",onChange:ue=>wn(z.key,"weight",ue.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",value:L[z.key]?.reps??"",onChange:ue=>wn(z.key,"reps",ue.target.value),placeholder:"0"})]})]}):z.unit==="reps"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Reps (max in 1 min)"}),i.jsx("input",{type:"number",value:L[z.key]?.reps??"",onChange:ue=>wn(z.key,"reps",ue.target.value),placeholder:"0"})]})}):z.unit==="distance"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Distance (cm)"}),i.jsx("input",{type:"number",step:"0.5",value:L[z.key]?.distance??"",onChange:ue=>wn(z.key,"distance",ue.target.value),placeholder:"0"})]})}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Time (seconds)"}),i.jsx("input",{type:"number",step:"0.01",value:L[z.key]?.time??"",onChange:ue=>wn(z.key,"time",ue.target.value),placeholder:"0"})]})})]},z.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),re(He?.benchmarks||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Dn,disabled:d,children:d?"Saving...":"Save"})]})]}),W&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Set Your Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),R(ke)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Rr.map(z=>{const ue=He?.benchmarks?.[z.key];let fe="-";if(ue)switch(z.unit){case"weight":(ue.weight||ue.reps)&&(fe=`${ue.weight||0}kg  ${ue.reps||0}`);break;case"time":ue.time&&(fe=`${ue.time}s`);break;case"reps":ue.reps&&(fe=`${ue.reps} reps`);break;case"distance":ue.distance&&(fe=`${ue.distance} cm`);break}return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",fe]})]}),z.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:S[z.key]?.targetWeight??"",onChange:pe=>ve(z.key,"targetWeight",pe.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Reps"}),i.jsx("input",{type:"number",value:S[z.key]?.targetReps??"",onChange:pe=>ve(z.key,"targetReps",pe.target.value),placeholder:"0"})]})]}):z.unit==="reps"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target Reps (in 1 min)"}),i.jsx("input",{type:"number",value:S[z.key]?.targetReps??"",onChange:pe=>ve(z.key,"targetReps",pe.target.value),placeholder:"0"})]})}):z.unit==="distance"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target Distance (cm)"}),i.jsx("input",{type:"number",step:"0.5",value:S[z.key]?.targetDistance??"",onChange:pe=>ve(z.key,"targetDistance",pe.target.value),placeholder:"0"})]})}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target (seconds)"}),i.jsx("input",{type:"number",step:"1",value:S[z.key]?.targetValue??"",onChange:pe=>ve(z.key,"targetValue",pe.target.value),placeholder:"0"})]})})]},z.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),R(ke)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:je,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&i.jsxs("div",{className:"pb-metrics-section",children:[!k&&!D&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-metrics-card",children:[i.jsx("h3",{children:"Body Measurements"}),i.jsx("p",{className:"pb-metrics-month",children:Ar(at)}),i.jsx("div",{className:"pb-metrics-list",children:co.map(z=>{const ue=He?.bodyMetrics?.[z.key],fe=st(z.key),pe=Ae[z.key],ce=Ue(z.key),Be=ce!==null&&ce>=1;return i.jsxs("div",{className:"pb-metric-row",children:[i.jsxs("div",{className:"pb-metric-top",children:[i.jsxs("div",{className:"pb-metric-left",children:[i.jsxs("span",{className:"pb-metric-name",children:[z.name,Bt("metric",z.key)&&i.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),pe&&i.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",pe.targetValue," ",z.suffix]})]}),i.jsxs("div",{className:"pb-metric-values",children:[i.jsx("span",{className:"pb-metric-current",children:ue!=null?`${ue} ${z.suffix}`:"-"}),fe!==null&&i.jsxs("span",{className:`pb-metric-change ${fe>0?"up":fe<0?"down":"same"}`,children:[fe>0?"+":"",fe," ",z.suffix]})]})]}),ce!==null&&i.jsxs("div",{className:"pb-metric-progress",children:[i.jsx("div",{className:"pb-metric-bar",children:i.jsx("div",{className:`pb-metric-bar-fill ${Be?"hit":""}`,style:{width:`${Math.round(ce*100)}%`}})}),i.jsx("span",{className:`pb-metric-percent ${Be?"hit":""}`,children:Be?"Hit!":`${Math.round(ce*100)}%`})]})]},z.key)})})]}),i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>P(!0),children:He?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>M(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ke).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Pe,disabled:d,children:"Reset All Goals"})]})]}),k&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Measurements - ",Ar(at)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{P(!1),he(He?.bodyMetrics||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:co.map(z=>i.jsx("div",{className:"pb-edit-metric",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:[z.name," (",z.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:X[z.key]??"",onChange:ue=>de(z.key,ue.target.value),placeholder:"0"})]})},z.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{P(!1),he(He?.bodyMetrics||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ht,disabled:d,children:d?"Saving...":"Save"})]})]}),D&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Body Metric Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{M(!1),A(Ae)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),co.map(z=>{const ue=He?.bodyMetrics?.[z.key];return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ue!=null?`${ue} ${z.suffix}`:"-"]})]}),i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:["Target (",z.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:H[z.key]?.targetValue??"",onChange:fe=>Qe(z.key,fe.target.value),placeholder:"0"})]})})]},z.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{M(!1),A(Ae)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:qe,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&i.jsx("div",{className:"pb-history-section",children:n.length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("h4",{children:"No records yet"}),i.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):i.jsxs(i.Fragment,{children:[We.length>0&&i.jsxs("div",{className:"pb-achievements-wall",children:[i.jsxs("h4",{className:"pb-achievements-wall-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),i.jsx("div",{className:"pb-achievements-list",children:[...We].reverse().map((z,ue)=>i.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ue*.05}s`},children:[i.jsx("div",{className:"pb-achievement-star",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("div",{className:"pb-achievement-info",children:[i.jsx("span",{className:"pb-achievement-label",children:z.label}),i.jsx("span",{className:"pb-achievement-date",children:Ar(z.achievedMonth)})]})]},ue))})]}),i.jsx("div",{className:"pb-history-controls",children:i.jsx("button",{className:`pb-compare-toggle ${rt?"active":""}`,onClick:()=>{V(!rt),!rt&&n.length>=2&&(ge(n[0].month),Ve(n[n.length-1].month))},children:rt?"Back to Timeline":"Compare Months"})}),rt?i.jsxs("div",{className:"pb-compare",children:[i.jsxs("div",{className:"pb-compare-selectors",children:[i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"From"}),i.jsx("select",{value:G,onChange:z=>ge(z.target.value),children:n.map(z=>i.jsx("option",{value:z.month,children:Ar(z.month)},z.month))})]}),i.jsx("div",{className:"pb-compare-vs",children:"vs"}),i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"To"}),i.jsx("select",{value:Se,onChange:z=>Ve(z.target.value),children:n.map(z=>i.jsx("option",{value:z.month,children:Ar(z.month)},z.month))})]})]}),xt&&qt&&i.jsxs("div",{className:"pb-compare-results",children:[i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Strength Tests"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Exercise"}),i.jsx("span",{children:Ar(G).split(" ")[0]}),i.jsx("span",{children:Ar(Se).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),Rr.map(z=>{const ue=xt.benchmarks?.[z.key],fe=qt.benchmarks?.[z.key],pe=fl(z,ue),ce=fl(z,fe),Be=jp(ce,pe);return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:z.name}),i.jsx("span",{className:"pb-compare-val",children:ue?Yh(z,ue):"-"}),i.jsx("span",{className:"pb-compare-val",children:fe?Yh(z,fe):"-"}),i.jsx("span",{className:`pb-compare-change ${Be!==null?Be>=0?"positive":"negative":""}`,children:Be!==null?`${Be>=0?"+":""}${Be.toFixed(1)}%`:"-"})]},z.key)})]})]}),i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Body Measurements"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Measurement"}),i.jsx("span",{children:Ar(G).split(" ")[0]}),i.jsx("span",{children:Ar(Se).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),co.map(z=>{const ue=xt.bodyMetrics?.[z.key],fe=qt.bodyMetrics?.[z.key],pe=ue!=null&&fe!=null?parseFloat((fe-ue).toFixed(2)):null;return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:z.name}),i.jsx("span",{className:"pb-compare-val",children:ue!=null?`${ue}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:fe!=null?`${fe}`:"-"}),i.jsx("span",{className:`pb-compare-change ${pe!==null?pe>0?"positive":pe<0?"negative":"neutral":""}`,children:pe!==null?`${pe>0?"+":""}${pe} ${z.suffix}`:"-"})]},z.key)})]})]})]})]}):i.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((z,ue)=>{const fe=n.filter(pe=>pe.month<z.month).pop();return i.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ue*.05}s`},children:[i.jsx("div",{className:"pb-timeline-dot"}),i.jsxs("div",{className:"pb-timeline-card",children:[i.jsx("h4",{children:Ar(z.month)}),z.benchmarks&&Object.keys(z.benchmarks).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Strength Tests"}),Rr.map(pe=>{const ce=z.benchmarks[pe.key];if(!ce)return null;const Be=fe?.benchmarks?.[pe.key],ut=fl(pe,ce),Ye=fl(pe,Be),ot=jp(ut,Ye);return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:pe.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsx("span",{className:"pb-timeline-value",children:Yh(pe,ce)}),ot!==null&&i.jsxs("span",{className:`pb-timeline-change ${ot>=0?"positive":"negative"}`,children:[ot>=0?"+":"",ot.toFixed(1),"%"]})]})]},pe.key)})]}),z.bodyMetrics&&Object.keys(z.bodyMetrics).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Body Measurements"}),co.map(pe=>{const ce=z.bodyMetrics[pe.key];if(ce==null)return null;const Be=fe?.bodyMetrics?.[pe.key],ut=Be!=null?parseFloat((ce-Be).toFixed(2)):null;return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:pe.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsxs("span",{className:"pb-timeline-value",children:[ce," ",pe.suffix]}),ut!==null&&i.jsxs("span",{className:`pb-timeline-change ${ut>0?"positive":ut<0?"negative":"neutral"}`,children:[ut>0?"+":"",ut," ",pe.suffix]})]})]},pe.key)})]})]})]},z.id)})})]})})]}),Y&&i.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Te(null),children:i.jsxs("div",{className:"pb-celebration-card",children:[i.jsx("div",{className:"pb-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),i.jsx("div",{className:"pb-celebration-badges",children:Y.map((z,ue)=>i.jsx("div",{className:"pb-celebration-badge",children:z.label},ue))}),i.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),De&&i.jsxs("div",{className:`toast-notification ${De.type}`,children:[i.jsx("span",{className:"toast-icon",children:De.type==="success"?i.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),i.jsx("span",{className:"toast-message",children:De.message}),i.jsx("button",{className:"toast-close",onClick:()=>ct(null),children:""})]}),i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:"block-nav-tab",onClick:()=>zt("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>zt("/client/forms"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),i.jsx("polyline",{points:"14 2 14 8 20 8"}),i.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),i.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),i.jsx("span",{children:"Forms"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>zt("/client/tools"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),i.jsx("span",{children:"Tools"})]}),i.jsxs("button",{className:"block-nav-tab active",children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"PBs"})]}),wt?.circuitAccess&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>zt("/client/circuit"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 6v6l4 2"})]}),i.jsx("span",{children:"Circuit"})]})]})]})}const Qr=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],uo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function QM(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Ir(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function Qh(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function W2(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function ml(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Np(s,e){return!e||e===0?null:(s-e)/e*100}function XM({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return i.jsx("div",{className:"pb-trend-empty",children:i.jsx("p",{children:"Not enough data for trend line yet"})});const a=s.map(B=>{const L=B.benchmarks?.[e];return L?n==="time"?L.time||0:(L.weight||0)*(L.reps||0):0}),l=Math.max(...a),u=Math.min(...a),d=l-u||1,p=300,g=100,y=20,w=p-y*2,T=g-y*2,k=a.map((B,L)=>{const re=y+L/(a.length-1)*w,X=y+T-(B-u)/d*T;return{x:re,y:X,value:B}}),P=k.map((B,L)=>`${L===0?"M":"L"} ${B.x} ${B.y}`).join(" "),W=P+` L ${k[k.length-1].x} ${y+T} L ${k[0].x} ${y+T} Z`;return i.jsxs("div",{className:"pb-trend-chart",children:[i.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),i.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),i.jsx("path",{d:W,fill:"url(#trendGradient)"}),i.jsx("path",{d:P,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),k.map((B,L)=>i.jsx("circle",{cx:B.x,cy:B.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},L))]}),i.jsx("div",{className:"pb-trend-labels",children:s.map((B,L)=>i.jsxs("span",{className:"pb-trend-label",children:[B.month.split("-")[1],"/",B.month.split("-")[0].slice(2)]},L))})]})}function JM(){const[s,e]=_.useState("bests"),[n,a]=_.useState([]),[l,u]=_.useState(!0),[d,p]=_.useState(!1),[g,y]=_.useState(0),[w,T]=_.useState(!1),[k,P]=_.useState(!1),[W,B]=_.useState(!1),[L,re]=_.useState({}),[X,he]=_.useState({}),[ke,ze]=_.useState({}),[Ae,I]=_.useState({}),[S,R]=_.useState({}),[D,M]=_.useState(!1),[H,A]=_.useState({}),[We,Nt]=_.useState([]),[Y,Te]=_.useState(null),[De,ct]=_.useState(null),[rt,V]=_.useState(!1),[G,ge]=_.useState(""),[Se,Ve]=_.useState(""),[Me,nt]=_.useState({}),[ht,pt]=_.useState({}),[Wt,pn]=_.useState(null),[Ct,wt]=_.useState(null),[ne,gn]=_.useState(""),zt=_.useRef(null),vt=_.useRef(0),Rt=_.useRef(0),at=_.useRef("right"),He=_.useCallback(U=>{y(ie=>{const E=Math.max(0,Math.min(Qr.length-1,U));return E===ie?ie:(at.current=E>ie?"right":"left",E)})},[]),{currentUser:Gt,isClient:ns,clientData:At,loading:Bt}=la(),{isDark:Dn}=Bi(),Ht=Gs(),[wn]=yS(),de=wn.get("mode")==="corebuddy",ve=!de&&(!At?.clientType||At.clientType==="block"),je=_.useCallback((U,ie="info")=>{ct({message:U,type:ie}),setTimeout(()=>ct(null),4e3)},[]);_.useEffect(()=>{!Bt&&(!Gt||!ns)&&Ht("/")},[Gt,ns,Bt,Ht]),_.useEffect(()=>{At&&(ve?Qe():(async()=>{try{const[ie,E,C]=await Promise.all([Gn(Tt(tt,"coreBuddyPBs",At.id)),Gn(Tt(tt,"coreBuddyTargets",At.id)),Gn(Tt(tt,"coreBuddyAchievements",At.id))]);ie.exists()&&nt(ie.data().exercises||{}),E.exists()&&pt(E.data().targets||{}),C.exists()&&pn(C.data())}catch(ie){console.error("Error loading Core Buddy PBs:",ie)}u(!1)})())},[At]);const Qe=async()=>{try{const U=$s(_s(tt,"personalBests"),Cs("clientId","==",At.id)),E=(await Ws(U)).docs.map(Re=>({id:Re.id,...Re.data()}));E.sort((Re,Ce)=>Re.month.localeCompare(Ce.month)),a(E);const C=$s(_s(tt,"personalBestTargets"),Cs("clientId","==",At.id)),$=await Ws(C);if(!$.empty){const Re=$.docs[0].data();ze(Re.targets||{}),I(Re.metricTargets||{}),R(Re.targets||{}),A(Re.metricTargets||{})}const J=$s(_s(tt,"achievements"),Cs("clientId","==",At.id)),Le=await Ws(J);Le.empty||Nt(Le.docs[0].data().badges||[])}catch(U){console.error("Error fetching personal bests:",U)}u(!1)},qe=async()=>{if(!Ct||!ne||!At)return;const U=parseFloat(ne),ie=Me[Ct];if(!ie||U<=ie.weight){je("Target must be higher than current PB","error");return}p(!0);try{const E={...ht,[Ct]:{targetWeight:U,setAt:lt.now(),currentPBWhenSet:ie.weight}};await Wn(Tt(tt,"coreBuddyTargets",At.id),{clientId:At.id,targets:E,updatedAt:lt.now()}),pt(E),wt(null),gn(""),je("Target set!","success")}catch(E){console.error("Error saving target:",E),je("Failed to save target","error")}p(!1)},Pe=U=>{if(!Wt?.badges)return!1;const ie=ht[U];return ie?Wt.badges.some(E=>E.type==="pb_target"&&E.exercise===U&&E.targetWeight===ie.targetWeight):!1},Ge=U=>{const ie=ht[U];if(!ie)return null;const E=Me[U];if(!E)return 0;const C=ie.currentPBWhenSet||0,$=ie.targetWeight,J=$-C;return J<=0?E.weight>=$?1:0:Math.max(0,Math.min((E.weight-C)/J,1))},Ue=QM(),Ie=n.find(U=>U.month===Ue),we=n.filter(U=>U.month<Ue),Ke=we.length>0?we[we.length-1]:null;_.useEffect(()=>{Ie?(re(Ie.benchmarks||{}),he(Ie.bodyMetrics||{})):(re({}),he({}))},[Ie?.id]);const st=async(U,ie)=>{const E=[];if(U==="strength"?Qr.forEach(C=>{const $=ke[C.key];if(!$)return;const J=ie[C.key];if(!J)return;let Le;if($.targetType==="time"){if(!$.targetValue)return;const Re=$.startValue||0,Ce=J.time||0,Lt=$.targetValue-Re;Le=Lt===0?Ce>=$.targetValue?1:0:Math.max(0,(Ce-Re)/Lt)}else{if(!$.targetWeight&&!$.targetReps)return;const Re=($.startWeight||0)*($.startReps||0),Ce=($.targetWeight||0)*($.targetReps||0),Lt=(J.weight||0)*(J.reps||0),gt=Ce-Re;Le=gt===0?Lt>=Ce?1:0:Math.max(0,(Lt-Re)/gt)}if(Le>=1&&!($.targetType==="time"?We.some(Ce=>Ce.type==="strength"&&Ce.key===C.key&&Ce.targetValue===$.targetValue):We.some(Ce=>Ce.type==="strength"&&Ce.key===C.key&&Ce.targetWeight===$.targetWeight&&Ce.targetReps===$.targetReps))){const Ce=$.targetType==="time"?`${C.name} ${$.targetValue}s`:`${C.name} ${$.targetWeight}kg  ${$.targetReps}`;E.push({type:"strength",key:C.key,...$.targetType==="time"?{targetType:"time",targetValue:$.targetValue}:{targetWeight:$.targetWeight,targetReps:$.targetReps},achievedMonth:Ue,label:Ce})}}):uo.forEach(C=>{const $=Ae[C.key];if(!$||!$.targetValue)return;const J=ie[C.key];if(J==null)return;const Le=$.startValue||0,Re=$.targetValue,Ce=Re-Le;(Ce===0?J===Re?1:0:Math.max(0,(J-Le)/Ce))>=1&&(We.some(q=>q.type==="metric"&&q.key===C.key&&q.targetValue===Re)||E.push({type:"metric",key:C.key,targetValue:Re,achievedMonth:Ue,label:`${C.name} ${Re}${C.suffix}`}))}),E.length>0){const C=[...We,...E];await Wn(Tt(tt,"achievements",At.id),{clientId:At.id,badges:C,updatedAt:lt.now()}),Nt(C),Te(E),setTimeout(()=>Te(null),5e3)}},xt=(U,ie)=>{if(U==="strength"){const E=ke[ie];return E?E.targetType==="time"?We.some(C=>C.type==="strength"&&C.key===ie&&C.targetValue===E.targetValue):!E.targetWeight&&!E.targetReps?!1:We.some(C=>C.type==="strength"&&C.key===ie&&C.targetWeight===E.targetWeight&&C.targetReps===E.targetReps):!1}else{const E=Ae[ie];return!E||!E.targetValue?!1:We.some(C=>C.type==="metric"&&C.key===ie&&C.targetValue===E.targetValue)}},qt=async()=>{p(!0);try{const U=`${At.id}_${Ue}`,ie=Ie||{};await Wn(Tt(tt,"personalBests",U),{clientId:At.id,month:Ue,benchmarks:L,bodyMetrics:ie.bodyMetrics||X||{},createdAt:ie.createdAt||lt.now(),updatedAt:lt.now()}),await st("strength",L),je("Benchmarks saved!","success"),T(!1),await Qe()}catch(U){console.error("Error saving benchmarks:",U),je("Failed to save. Please try again.","error")}p(!1)},Fe=async()=>{p(!0);try{const U=`${At.id}_${Ue}`,ie=Ie||{};await Wn(Tt(tt,"personalBests",U),{clientId:At.id,month:Ue,benchmarks:ie.benchmarks||L||{},bodyMetrics:X,createdAt:ie.createdAt||lt.now(),updatedAt:lt.now()}),await st("metric",X),je("Body metrics saved!","success"),P(!1),await Qe()}catch(U){console.error("Error saving metrics:",U),je("Failed to save. Please try again.","error")}p(!1)},_t=(U,ie,E)=>{re(C=>({...C,[U]:{...C[U],[ie]:E===""?"":parseFloat(E)}}))},St=(U,ie)=>{he(E=>({...E,[U]:ie===""?"":parseFloat(ie)}))},Dt=(U,ie,E)=>{R(C=>({...C,[U]:{...C[U],[ie]:E===""?"":parseFloat(E)}}))},Ft=async()=>{p(!0);try{const U=`targets_${At.id}`,ie=Ie?.benchmarks||{},E={};Qr.forEach(C=>{const $=ie[C.key];C.unit==="time"?S[C.key]?.targetValue&&(E[C.key]={targetType:"time",targetValue:S[C.key].targetValue,startValue:$?.time||0}):(S[C.key]?.targetWeight||S[C.key]?.targetReps)&&(E[C.key]={targetWeight:S[C.key].targetWeight||0,targetReps:S[C.key].targetReps||0,startWeight:$?.weight||0,startReps:$?.reps||0})}),await Wn(Tt(tt,"personalBestTargets",U),{clientId:At.id,targets:E,metricTargets:Ae,updatedAt:lt.now()}),ze(E),R(E),je("Targets saved!","success"),B(!1)}catch(U){console.error("Error saving targets:",U),je("Failed to save targets.","error")}p(!1)},bt=(U,ie)=>{A(E=>({...E,[U]:{...E[U],targetValue:ie===""?"":parseFloat(ie)}}))},nn=async()=>{p(!0);try{const U=`targets_${At.id}`,ie={};uo.forEach(E=>{if(H[E.key]?.targetValue){const C=Ie?.bodyMetrics?.[E.key]||0;ie[E.key]={targetValue:H[E.key].targetValue,startValue:C}}}),await Wn(Tt(tt,"personalBestTargets",U),{clientId:At.id,targets:ke,metricTargets:ie,updatedAt:lt.now()}),I(ie),A(ie),je("Metric targets saved!","success"),M(!1)}catch(U){console.error("Error saving metric targets:",U),je("Failed to save targets.","error")}p(!1)},$t=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const U=Tt(tt,"personalBestTargets",`targets_${At.id}`);await cy(U),ze({}),I({}),R({}),A({}),je("All goals have been reset","success")}catch(U){console.error("Error resetting targets:",U),je("Failed to reset goals","error")}p(!1)}},sn=(U,ie)=>{const E=ke[U];if(!E||!ie)return null;if(E.targetType==="time"){if(!E.targetValue)return null;const Re=E.startValue||0,Ce=E.targetValue,Lt=ie.time||0,gt=Ce-Re;return gt<=0?Lt>=Ce?1:0:Math.max(0,Math.min((Lt-Re)/gt,1))}if(!E.targetWeight&&!E.targetReps)return null;const C=(E.startWeight||0)*(E.startReps||0),$=(E.targetWeight||0)*(E.targetReps||0),J=(ie.weight||0)*(ie.reps||0),Le=$-C;return Le<=0?J>=$?1:0:Math.max(0,Math.min((J-C)/Le,1))},ln=U=>{const ie=Ae[U];if(!ie||!ie.targetValue)return null;const E=Ie?.bodyMetrics?.[U];if(E==null)return null;const C=ie.startValue||0,$=ie.targetValue,J=$-C;return J===0?E===$?1:0:Math.max(0,Math.min((E-C)/J,1))},un=U=>{vt.current=U.touches[0].clientX,Rt.current=0},jn=U=>{Rt.current=U.touches[0].clientX-vt.current},z=()=>{Rt.current<-50?He(g+1):Rt.current>50&&He(g-1),Rt.current=0},ue=U=>{const ie=Ie?.bodyMetrics?.[U],E=Ke?.bodyMetrics?.[U];return ie==null||E==null?null:parseFloat((ie-E).toFixed(2))},fe=n.find(U=>U.month===G),pe=n.find(U=>U.month===Se);if(Bt||l)return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsxs("main",{className:"pb-main",children:[i.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),i.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Gt||!ns||!At)return null;if(ve&&At?.isJunior)return i.jsx(YM,{});const ce=Qr[g],Be=Ie?.benchmarks?.[ce.key],ut=Ke?.benchmarks?.[ce.key],Ye=ml(ce,Be),ot=ml(ce,ut),dt=Np(Ye,ot),rn=sn(ce.key,Be),Es=rn!==null,Bn=rn!==null&&rn>=1,Hn=Es?Math.round(rn*60):Ye>0?15:0,hn=ke[ce.key];return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>Ht(de?"/client/core-buddy":"/client"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsxs("main",{className:"pb-main page-transition-enter",children:[i.jsxs("div",{className:"pb-intro",children:[i.jsx("h2",{children:"Personal Bests"}),i.jsx("p",{children:ve?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!ve&&i.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Me).length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("div",{className:"pb-cb-empty-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),i.jsx("h4",{children:"No personal bests yet"}),i.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):i.jsx("div",{className:"pb-cb-grid",children:Object.entries(Me).sort(([U],[ie])=>U.localeCompare(ie)).map(([U,ie],E)=>{const C=ht[U],$=Ge(U),J=$!==null&&$>=1,Le=Pe(U),Re=$!==null?Math.round($*60):60;return i.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${E*.05}s`},children:[i.jsxs("div",{className:"pb-cb-card-ring",children:[i.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:hM.map((Ce,Lt)=>{const gt=Lt<Re;return i.jsx("line",{x1:Ce.x1,y1:Ce.y1,x2:Ce.x2,y2:Ce.y2,className:`pb-ring-tick ${gt?J?"hit":"filled":"empty"}`,strokeWidth:Ce.thick?"2":"1.5"},Lt)})}),i.jsx("div",{className:"pb-cb-ring-icon",children:Le?i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),i.jsxs("div",{className:"pb-cb-card-info",children:[i.jsx("h4",{className:"pb-cb-card-name",children:U}),i.jsxs("div",{className:"pb-cb-card-value",children:[ie.weight,"kg  ",ie.reps]}),ie.achievedAt&&i.jsx("div",{className:"pb-cb-card-date",children:(ie.achievedAt.toDate?ie.achievedAt.toDate():new Date(ie.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),C&&!J&&i.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",C.targetWeight,"kg (",Math.round(($||0)*100),"%)"]}),C&&J&&!Le&&i.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),Le&&i.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),i.jsx("div",{className:"pb-cb-card-action",children:C?J&&Le?i.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{wt(U),gn("")},children:i.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:i.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{wt(U),gn("")},children:i.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("circle",{cx:"12",cy:"12",r:"6"}),i.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},U)})}),Object.keys(Me).length>0&&i.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>Ht("/client/core-buddy/achievements"),children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",i.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),Ct&&i.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>wt(null),children:i.jsxs("div",{className:"pb-cb-target-modal",onClick:U=>U.stopPropagation(),children:[i.jsx("h3",{children:"Set Target"}),i.jsx("p",{className:"pb-cb-target-exercise-name",children:Ct}),i.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",i.jsxs("strong",{children:[Me[Ct]?.weight,"kg"]})]}),i.jsxs("div",{className:"pb-cb-target-input-wrap",children:[i.jsx("label",{children:"Your target (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:ne,onChange:U=>gn(U.target.value),placeholder:String((Me[Ct]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),i.jsxs("div",{className:"pb-cb-target-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>wt(null),children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:qe,disabled:d,children:d?"Saving...":"Set Target"})]})]})})]}),ve&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-tabs",children:[i.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),i.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),i.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&i.jsxs("div",{className:"pb-strength-section",children:[!w&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-carousel",ref:zt,onTouchStart:un,onTouchMove:jn,onTouchEnd:z,children:[i.jsx("div",{className:`pb-ring-container slide-from-${at.current}`,children:i.jsxs("div",{className:"pb-ring",children:[i.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:wy.map((U,ie)=>{const E=ie<Math.round(Hn);return i.jsx("line",{x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,className:`pb-ring-tick ${E?Bn?"hit":"filled":"empty"}`,strokeWidth:U.thick?"3":"2"},ie)})}),i.jsxs("div",{className:"pb-ring-center",children:[i.jsx("div",{className:"pb-ring-category",children:ce.category}),i.jsxs("div",{className:"pb-ring-exercise",children:[ce.name,xt("strength",ce.key)&&i.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),i.jsx("div",{className:"pb-ring-value",children:Be?ce.unit==="time"?Qh(Be.time):W2(Be.weight,Be.reps):"-"}),dt!==null&&i.jsxs("div",{className:`pb-ring-change ${dt>=0?"positive":"negative"}`,children:[dt>=0?"+":"",dt.toFixed(1),"%"]}),dt===null&&Be&&i.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),hn&&i.jsx("div",{className:`pb-ring-target ${Bn?"hit":""}`,children:Bn?"Target hit!":hn.targetType==="time"?`${hn.startValue||0}s  ${hn.targetValue}s`:`${hn.startWeight||0}kg${hn.startReps||0}  ${hn.targetWeight}kg${hn.targetReps}`}),!hn&&i.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),i.jsx("div",{className:"pb-carousel-dots",children:Qr.map((U,ie)=>i.jsx("button",{className:`pb-dot ${ie===g?"active":""}`,onClick:()=>He(ie)},ie))}),i.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>He(g-1),disabled:g===0,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),i.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>He(g+1),disabled:g===Qr.length-1,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),i.jsxs("div",{className:"pb-trend-section",children:[i.jsx("h4",{children:"Trend"}),i.jsx(XM,{data:n,exerciseKey:ce.key,unit:ce.unit})]})]}),!w&&!W&&i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:Ie?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>B(!0),children:Object.keys(ke).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ke).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:$t,disabled:d,children:"Reset All Goals"})]}),w&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Benchmarks - ",Ir(Ue)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),re(Ie?.benchmarks||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:Qr.map(U=>i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),U.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:L[U.key]?.weight??"",onChange:ie=>_t(U.key,"weight",ie.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",value:L[U.key]?.reps??"",onChange:ie=>_t(U.key,"reps",ie.target.value),placeholder:"0"})]})]}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Time (seconds)"}),i.jsx("input",{type:"number",step:"0.01",value:L[U.key]?.time??"",onChange:ie=>_t(U.key,"time",ie.target.value),placeholder:"0"})]})})]},U.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),re(Ie?.benchmarks||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:qt,disabled:d,children:d?"Saving...":"Save"})]})]}),W&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Set Your Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),R(ke)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Qr.map(U=>{const ie=Ie?.benchmarks?.[U.key];let E="-";return ie&&(U.unit==="time"&&ie.time?E=`${ie.time}s`:(ie.weight||ie.reps)&&(E=`${ie.weight||0}kg  ${ie.reps||0}`)),i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",E]})]}),U.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:S[U.key]?.targetWeight??"",onChange:C=>Dt(U.key,"targetWeight",C.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Reps"}),i.jsx("input",{type:"number",value:S[U.key]?.targetReps??"",onChange:C=>Dt(U.key,"targetReps",C.target.value),placeholder:"0"})]})]}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target (seconds)"}),i.jsx("input",{type:"number",step:"1",value:S[U.key]?.targetValue??"",onChange:C=>Dt(U.key,"targetValue",C.target.value),placeholder:"0"})]})})]},U.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),R(ke)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ft,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&i.jsxs("div",{className:"pb-metrics-section",children:[!k&&!D&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-metrics-card",children:[i.jsx("h3",{children:"Body Measurements"}),i.jsx("p",{className:"pb-metrics-month",children:Ir(Ue)}),i.jsx("div",{className:"pb-metrics-list",children:uo.map(U=>{const ie=Ie?.bodyMetrics?.[U.key],E=ue(U.key),C=Ae[U.key],$=ln(U.key),J=$!==null&&$>=1;return i.jsxs("div",{className:"pb-metric-row",children:[i.jsxs("div",{className:"pb-metric-top",children:[i.jsxs("div",{className:"pb-metric-left",children:[i.jsxs("span",{className:"pb-metric-name",children:[U.name,xt("metric",U.key)&&i.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),C&&i.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",C.targetValue," ",U.suffix]})]}),i.jsxs("div",{className:"pb-metric-values",children:[i.jsx("span",{className:"pb-metric-current",children:ie!=null?`${ie} ${U.suffix}`:"-"}),E!==null&&i.jsxs("span",{className:`pb-metric-change ${E>0?"up":E<0?"down":"same"}`,children:[E>0?"+":"",E," ",U.suffix]})]})]}),$!==null&&i.jsxs("div",{className:"pb-metric-progress",children:[i.jsx("div",{className:"pb-metric-bar",children:i.jsx("div",{className:`pb-metric-bar-fill ${J?"hit":""}`,style:{width:`${Math.round($*100)}%`}})}),i.jsx("span",{className:`pb-metric-percent ${J?"hit":""}`,children:J?"Hit!":`${Math.round($*100)}%`})]})]},U.key)})})]}),i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>P(!0),children:Ie?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>M(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ke).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:$t,disabled:d,children:"Reset All Goals"})]})]}),k&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Measurements - ",Ir(Ue)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{P(!1),he(Ie?.bodyMetrics||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:uo.map(U=>i.jsx("div",{className:"pb-edit-metric",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:[U.name," (",U.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:X[U.key]??"",onChange:ie=>St(U.key,ie.target.value),placeholder:"0"})]})},U.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{P(!1),he(Ie?.bodyMetrics||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Fe,disabled:d,children:d?"Saving...":"Save"})]})]}),D&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Body Metric Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{M(!1),A(Ae)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),uo.map(U=>{const ie=Ie?.bodyMetrics?.[U.key];return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ie!=null?`${ie} ${U.suffix}`:"-"]})]}),i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:["Target (",U.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:H[U.key]?.targetValue??"",onChange:E=>bt(U.key,E.target.value),placeholder:"0"})]})})]},U.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{M(!1),A(Ae)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:nn,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&i.jsx("div",{className:"pb-history-section",children:n.length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("h4",{children:"No records yet"}),i.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):i.jsxs(i.Fragment,{children:[We.length>0&&i.jsxs("div",{className:"pb-achievements-wall",children:[i.jsxs("h4",{className:"pb-achievements-wall-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),i.jsx("div",{className:"pb-achievements-list",children:[...We].reverse().map((U,ie)=>i.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ie*.05}s`},children:[i.jsx("div",{className:"pb-achievement-star",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("div",{className:"pb-achievement-info",children:[i.jsx("span",{className:"pb-achievement-label",children:U.label}),i.jsx("span",{className:"pb-achievement-date",children:Ir(U.achievedMonth)})]})]},ie))})]}),i.jsx("div",{className:"pb-history-controls",children:i.jsx("button",{className:`pb-compare-toggle ${rt?"active":""}`,onClick:()=>{V(!rt),!rt&&n.length>=2&&(ge(n[0].month),Ve(n[n.length-1].month))},children:rt?"Back to Timeline":"Compare Months"})}),rt?i.jsxs("div",{className:"pb-compare",children:[i.jsxs("div",{className:"pb-compare-selectors",children:[i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"From"}),i.jsx("select",{value:G,onChange:U=>ge(U.target.value),children:n.map(U=>i.jsx("option",{value:U.month,children:Ir(U.month)},U.month))})]}),i.jsx("div",{className:"pb-compare-vs",children:"vs"}),i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"To"}),i.jsx("select",{value:Se,onChange:U=>Ve(U.target.value),children:n.map(U=>i.jsx("option",{value:U.month,children:Ir(U.month)},U.month))})]})]}),fe&&pe&&i.jsxs("div",{className:"pb-compare-results",children:[i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Strength Benchmarks"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Exercise"}),i.jsx("span",{children:Ir(G).split(" ")[0]}),i.jsx("span",{children:Ir(Se).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),Qr.map(U=>{const ie=fe.benchmarks?.[U.key],E=pe.benchmarks?.[U.key],C=ml(U,ie),$=ml(U,E),J=Np($,C);return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:U.name}),i.jsx("span",{className:"pb-compare-val",children:ie?U.unit==="time"?Qh(ie.time):`${ie.weight}x${ie.reps}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:E?U.unit==="time"?Qh(E.time):`${E.weight}x${E.reps}`:"-"}),i.jsx("span",{className:`pb-compare-change ${J!==null?J>=0?"positive":"negative":""}`,children:J!==null?`${J>=0?"+":""}${J.toFixed(1)}%`:"-"})]},U.key)})]})]}),i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Body Measurements"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Measurement"}),i.jsx("span",{children:Ir(G).split(" ")[0]}),i.jsx("span",{children:Ir(Se).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),uo.map(U=>{const ie=fe.bodyMetrics?.[U.key],E=pe.bodyMetrics?.[U.key],C=ie!=null&&E!=null?parseFloat((E-ie).toFixed(2)):null;return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:U.name}),i.jsx("span",{className:"pb-compare-val",children:ie!=null?`${ie}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:E!=null?`${E}`:"-"}),i.jsx("span",{className:`pb-compare-change ${C!==null?C>0?"positive":C<0?"negative":"neutral":""}`,children:C!==null?`${C>0?"+":""}${C} ${U.suffix}`:"-"})]},U.key)})]})]})]})]}):i.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((U,ie)=>{const E=n.find(C=>C.month<U.month&&n.indexOf(C)===n.indexOf(U)-1)||n.filter(C=>C.month<U.month).pop();return i.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ie*.05}s`},children:[i.jsx("div",{className:"pb-timeline-dot"}),i.jsxs("div",{className:"pb-timeline-card",children:[i.jsx("h4",{children:Ir(U.month)}),U.benchmarks&&Object.keys(U.benchmarks).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Strength Benchmarks"}),Qr.map(C=>{const $=U.benchmarks[C.key];if(!$)return null;const J=E?.benchmarks?.[C.key],Le=ml(C,$),Re=ml(C,J),Ce=Np(Le,Re);return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:C.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsx("span",{className:"pb-timeline-value",children:C.unit==="time"?Qh($.time):W2($.weight,$.reps)}),Ce!==null&&i.jsxs("span",{className:`pb-timeline-change ${Ce>=0?"positive":"negative"}`,children:[Ce>=0?"+":"",Ce.toFixed(1),"%"]})]})]},C.key)})]}),U.bodyMetrics&&Object.keys(U.bodyMetrics).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Body Measurements"}),uo.map(C=>{const $=U.bodyMetrics[C.key];if($==null)return null;const J=E?.bodyMetrics?.[C.key],Le=J!=null?parseFloat(($-J).toFixed(2)):null;return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:C.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsxs("span",{className:"pb-timeline-value",children:[$," ",C.suffix]}),Le!==null&&i.jsxs("span",{className:`pb-timeline-change ${Le>0?"positive":Le<0?"negative":"neutral"}`,children:[Le>0?"+":"",Le," ",C.suffix]})]})]},C.key)})]})]})]},U.id)})})]})})]})]}),Y&&i.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Te(null),children:i.jsxs("div",{className:"pb-celebration-card",children:[i.jsx("div",{className:"pb-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),i.jsx("div",{className:"pb-celebration-badges",children:Y.map((U,ie)=>i.jsx("div",{className:"pb-celebration-badge",children:U.label},ie))}),i.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),De&&i.jsxs("div",{className:`toast-notification ${De.type}`,children:[i.jsx("span",{className:"toast-icon",children:De.type==="success"?i.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),i.jsx("span",{className:"toast-message",children:De.message}),i.jsx("button",{className:"toast-close",onClick:()=>ct(null),children:""})]}),ve&&i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/forms"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),i.jsx("polyline",{points:"14 2 14 8 20 8"}),i.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),i.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),i.jsx("span",{children:"Forms"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/tools"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),i.jsx("span",{children:"Tools"})]}),i.jsxs("button",{className:"block-nav-tab active",children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"PBs"})]}),At?.circuitAccess&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/circuit"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 6v6l4 2"})]}),i.jsx("span",{children:"Circuit"})]})]}),de&&i.jsx(Ro,{active:"progress"})]})}const ZM=_.lazy(()=>vr(()=>import("./Dashboard-C_9aSRMy.js"),__vite__mapDeps([0,1]))),e3=_.lazy(()=>vr(()=>import("./AddClient-DphD5U79.js"),__vite__mapDeps([2,3]))),t3=_.lazy(()=>vr(()=>import("./ClientDashboard-IEqxEHa1.js"),[])),n3=_.lazy(()=>vr(()=>import("./ClientForms-wRqujvPX.js"),__vite__mapDeps([4,5]))),s3=_.lazy(()=>vr(()=>import("./ClientTools-ZQtUJOST.js"),__vite__mapDeps([6,7]))),r3=_.lazy(()=>vr(()=>import("./MacroCalculator-DfSdzsfT.js"),__vite__mapDeps([8,7]))),a3=_.lazy(()=>vr(()=>import("./ProteinSnacks-C_KywfGT.js"),__vite__mapDeps([9,7]))),i3=_.lazy(()=>vr(()=>import("./DailyMotivation-CEprNT1J.js"),__vite__mapDeps([10,7]))),o3=_.lazy(()=>vr(()=>import("./CircuitDashboard-aET3qHNX.js"),__vite__mapDeps([11,12]))),l3=_.lazy(()=>vr(()=>import("./CircuitBooking-r3h11ZnO.js"),__vite__mapDeps([13,14,12]))),c3=_.lazy(()=>vr(()=>import("./Leaderboard-Bmntorod.js"),__vite__mapDeps([15,16])));function u3({children:s}){const{pathname:e}=Vr();return _.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),_.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function h3(){const s=Gs();return _.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function d3(){return i.jsx(lM,{children:i.jsx(oM,{children:i.jsxs(dS,{basename:"/login",children:[i.jsx(h3,{}),i.jsx(u3,{children:i.jsx(_.Suspense,{fallback:null,children:i.jsxs(zk,{children:[i.jsx(Zn,{path:"/",element:i.jsx(cM,{})}),i.jsx(Zn,{path:"/dashboard",element:i.jsx(ZM,{})}),i.jsx(Zn,{path:"/add-client",element:i.jsx(e3,{})}),i.jsx(Zn,{path:"/client",element:i.jsx(t3,{})}),i.jsx(Zn,{path:"/client/forms",element:i.jsx(n3,{})}),i.jsx(Zn,{path:"/client/tools",element:i.jsx(s3,{})}),i.jsx(Zn,{path:"/client/tools/macros",element:i.jsx(r3,{})}),i.jsx(Zn,{path:"/client/tools/snacks",element:i.jsx(a3,{})}),i.jsx(Zn,{path:"/client/tools/motivation",element:i.jsx(i3,{})}),i.jsx(Zn,{path:"/client/personal-bests",element:i.jsx(JM,{})}),i.jsx(Zn,{path:"/client/circuit",element:i.jsx(o3,{})}),i.jsx(Zn,{path:"/client/circuit/booking",element:i.jsx(l3,{})}),i.jsx(Zn,{path:"/client/core-buddy",element:i.jsx(pM,{})}),i.jsx(Zn,{path:"/client/core-buddy/nutrition",element:i.jsx(bM,{})}),i.jsx(Zn,{path:"/client/core-buddy/workouts",element:i.jsx(RM,{})}),i.jsx(Zn,{path:"/client/core-buddy/programmes",element:i.jsx(PM,{})}),i.jsx(Zn,{path:"/client/core-buddy/achievements",element:i.jsx(zM,{})}),i.jsx(Zn,{path:"/client/core-buddy/consistency",element:i.jsx(qM,{})}),i.jsx(Zn,{path:"/client/leaderboard",element:i.jsx(c3,{})}),i.jsx(Zn,{path:"*",element:i.jsx(Bk,{to:"/",replace:!0})})]})})})]})})})}zE.createRoot(document.getElementById("root")).render(i.jsx(_.StrictMode,{children:i.jsx(d3,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{Ro as C,lt as T,sg as a,cy as b,_s as c,tt as d,Tt as e,f3 as f,Ws as g,cC as h,Gn as i,i as j,la as k,Bi as l,Gs as m,wy as n,p3 as o,Wn as p,$s as q,_ as r,g3 as s,OI as u,Cs as w};
