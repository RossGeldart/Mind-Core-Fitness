(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function sN(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var og={exports:{}},ud={};var vb;function rN(){if(vb)return ud;vb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var h in o)h!=="key"&&(c[h]=o[h])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:u,ref:o!==void 0?o:null,props:c}}return ud.Fragment=e,ud.jsx=t,ud.jsxs=t,ud}var yb;function aN(){return yb||(yb=1,og.exports=rN()),og.exports}var n=aN(),lg={exports:{}},fn={};var bb;function iN(){if(bb)return fn;bb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),E=Symbol.iterator;function F(Q){return Q===null||typeof Q!="object"?null:(Q=E&&Q[E]||Q["@@iterator"],typeof Q=="function"?Q:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,P={};function ee(Q,we,Ne){this.props=Q,this.context=we,this.refs=P,this.updater=Ne||L}ee.prototype.isReactComponent={},ee.prototype.setState=function(Q,we){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,we,"setState")},ee.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function $(){}$.prototype=ee.prototype;function le(Q,we,Ne){this.props=Q,this.context=we,this.refs=P,this.updater=Ne||L}var X=le.prototype=new $;X.constructor=le,V(X,ee.prototype),X.isPureReactComponent=!0;var Te=Array.isArray;function Re(){}var B={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function z(Q,we,Ne){var je=Ne.ref;return{$$typeof:r,type:Q,key:we,ref:je!==void 0?je:null,props:Ne}}function Y(Q,we){return z(Q.type,we,Q.props)}function G(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===r}function se(Q){var we={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Ne){return we[Ne]})}var H=/\/+/g;function Le(Q,we){return typeof Q=="object"&&Q!==null&&Q.key!=null?se(""+Q.key):we.toString(36)}function Oe(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(Re,Re):(Q.status="pending",Q.then(function(we){Q.status==="pending"&&(Q.status="fulfilled",Q.value=we)},function(we){Q.status==="pending"&&(Q.status="rejected",Q.reason=we)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function ne(Q,we,Ne,je,ce){var Ee=typeof Q;(Ee==="undefined"||Ee==="boolean")&&(Q=null);var ue=!1;if(Q===null)ue=!0;else switch(Ee){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(Q.$$typeof){case r:case e:ue=!0;break;case k:return ue=Q._init,ne(ue(Q._payload),we,Ne,je,ce)}}if(ue)return ce=ce(Q),ue=je===""?"."+Le(Q,0):je,Te(ce)?(Ne="",ue!=null&&(Ne=ue.replace(H,"$&/")+"/"),ne(ce,we,Ne,"",function(ot){return ot})):ce!=null&&(G(ce)&&(ce=Y(ce,Ne+(ce.key==null||Q&&Q.key===ce.key?"":(""+ce.key).replace(H,"$&/")+"/")+ue)),we.push(ce)),1;ue=0;var xe=je===""?".":je+":";if(Te(Q))for(var Fe=0;Fe<Q.length;Fe++)je=Q[Fe],Ee=xe+Le(je,Fe),ue+=ne(je,we,Ne,Ee,ce);else if(Fe=F(Q),typeof Fe=="function")for(Q=Fe.call(Q),Fe=0;!(je=Q.next()).done;)je=je.value,Ee=xe+Le(je,Fe++),ue+=ne(je,we,Ne,Ee,ce);else if(Ee==="object"){if(typeof Q.then=="function")return ne(Oe(Q),we,Ne,je,ce);throw we=String(Q),Error("Objects are not valid as a React child (found: "+(we==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":we)+"). If you meant to render a collection of children, use an array instead.")}return ue}function be(Q,we,Ne){if(Q==null)return Q;var je=[],ce=0;return ne(Q,je,"","",function(Ee){return we.call(Ne,Ee,ce++)}),je}function me(Q){if(Q._status===-1){var we=Q._result;we=we(),we.then(function(Ne){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Ne)},function(Ne){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Ne)}),Q._status===-1&&(Q._status=0,Q._result=we)}if(Q._status===1)return Q._result.default;throw Q._result}var Ae=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var we=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(we))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},He={map:be,forEach:function(Q,we,Ne){be(Q,function(){we.apply(this,arguments)},Ne)},count:function(Q){var we=0;return be(Q,function(){we++}),we},toArray:function(Q){return be(Q,function(we){return we})||[]},only:function(Q){if(!G(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return fn.Activity=S,fn.Children=He,fn.Component=ee,fn.Fragment=t,fn.Profiler=o,fn.PureComponent=le,fn.StrictMode=i,fn.Suspense=m,fn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,fn.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return B.H.useMemoCache(Q)}},fn.cache=function(Q){return function(){return Q.apply(null,arguments)}},fn.cacheSignal=function(){return null},fn.cloneElement=function(Q,we,Ne){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var je=V({},Q.props),ce=Q.key;if(we!=null)for(Ee in we.key!==void 0&&(ce=""+we.key),we)!O.call(we,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&we.ref===void 0||(je[Ee]=we[Ee]);var Ee=arguments.length-2;if(Ee===1)je.children=Ne;else if(1<Ee){for(var ue=Array(Ee),xe=0;xe<Ee;xe++)ue[xe]=arguments[xe+2];je.children=ue}return z(Q.type,ce,je)},fn.createContext=function(Q){return Q={$$typeof:u,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:c,_context:Q},Q},fn.createElement=function(Q,we,Ne){var je,ce={},Ee=null;if(we!=null)for(je in we.key!==void 0&&(Ee=""+we.key),we)O.call(we,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(ce[je]=we[je]);var ue=arguments.length-2;if(ue===1)ce.children=Ne;else if(1<ue){for(var xe=Array(ue),Fe=0;Fe<ue;Fe++)xe[Fe]=arguments[Fe+2];ce.children=xe}if(Q&&Q.defaultProps)for(je in ue=Q.defaultProps,ue)ce[je]===void 0&&(ce[je]=ue[je]);return z(Q,Ee,ce)},fn.createRef=function(){return{current:null}},fn.forwardRef=function(Q){return{$$typeof:h,render:Q}},fn.isValidElement=G,fn.lazy=function(Q){return{$$typeof:k,_payload:{_status:-1,_result:Q},_init:me}},fn.memo=function(Q,we){return{$$typeof:b,type:Q,compare:we===void 0?null:we}},fn.startTransition=function(Q){var we=B.T,Ne={};B.T=Ne;try{var je=Q(),ce=B.S;ce!==null&&ce(Ne,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(Re,Ae)}catch(Ee){Ae(Ee)}finally{we!==null&&Ne.types!==null&&(we.types=Ne.types),B.T=we}},fn.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},fn.use=function(Q){return B.H.use(Q)},fn.useActionState=function(Q,we,Ne){return B.H.useActionState(Q,we,Ne)},fn.useCallback=function(Q,we){return B.H.useCallback(Q,we)},fn.useContext=function(Q){return B.H.useContext(Q)},fn.useDebugValue=function(){},fn.useDeferredValue=function(Q,we){return B.H.useDeferredValue(Q,we)},fn.useEffect=function(Q,we){return B.H.useEffect(Q,we)},fn.useEffectEvent=function(Q){return B.H.useEffectEvent(Q)},fn.useId=function(){return B.H.useId()},fn.useImperativeHandle=function(Q,we,Ne){return B.H.useImperativeHandle(Q,we,Ne)},fn.useInsertionEffect=function(Q,we){return B.H.useInsertionEffect(Q,we)},fn.useLayoutEffect=function(Q,we){return B.H.useLayoutEffect(Q,we)},fn.useMemo=function(Q,we){return B.H.useMemo(Q,we)},fn.useOptimistic=function(Q,we){return B.H.useOptimistic(Q,we)},fn.useReducer=function(Q,we,Ne){return B.H.useReducer(Q,we,Ne)},fn.useRef=function(Q){return B.H.useRef(Q)},fn.useState=function(Q){return B.H.useState(Q)},fn.useSyncExternalStore=function(Q,we,Ne){return B.H.useSyncExternalStore(Q,we,Ne)},fn.useTransition=function(){return B.H.useTransition()},fn.version="19.2.4",fn}var xb;function Ev(){return xb||(xb=1,lg.exports=iN()),lg.exports}var C=Ev(),cg={exports:{}},dd={},ug={exports:{}},dg={};var wb;function oN(){return wb||(wb=1,(function(r){function e(ne,be){var me=ne.length;ne.push(be);e:for(;0<me;){var Ae=me-1>>>1,He=ne[Ae];if(0<o(He,be))ne[Ae]=be,ne[me]=He,me=Ae;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var be=ne[0],me=ne.pop();if(me!==be){ne[0]=me;e:for(var Ae=0,He=ne.length,Q=He>>>1;Ae<Q;){var we=2*(Ae+1)-1,Ne=ne[we],je=we+1,ce=ne[je];if(0>o(Ne,me))je<He&&0>o(ce,Ne)?(ne[Ae]=ce,ne[je]=me,Ae=je):(ne[Ae]=Ne,ne[we]=me,Ae=we);else if(je<He&&0>o(ce,me))ne[Ae]=ce,ne[je]=me,Ae=je;else break e}}return be}function o(ne,be){var me=ne.sortIndex-be.sortIndex;return me!==0?me:ne.id-be.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var m=[],b=[],k=1,S=null,E=3,F=!1,L=!1,V=!1,P=!1,ee=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function X(ne){for(var be=t(b);be!==null;){if(be.callback===null)i(b);else if(be.startTime<=ne)i(b),be.sortIndex=be.expirationTime,e(m,be);else break;be=t(b)}}function Te(ne){if(V=!1,X(ne),!L)if(t(m)!==null)L=!0,Re||(Re=!0,se());else{var be=t(b);be!==null&&Oe(Te,be.startTime-ne)}}var Re=!1,B=-1,O=5,z=-1;function Y(){return P?!0:!(r.unstable_now()-z<O)}function G(){if(P=!1,Re){var ne=r.unstable_now();z=ne;var be=!0;try{e:{L=!1,V&&(V=!1,$(B),B=-1),F=!0;var me=E;try{t:{for(X(ne),S=t(m);S!==null&&!(S.expirationTime>ne&&Y());){var Ae=S.callback;if(typeof Ae=="function"){S.callback=null,E=S.priorityLevel;var He=Ae(S.expirationTime<=ne);if(ne=r.unstable_now(),typeof He=="function"){S.callback=He,X(ne),be=!0;break t}S===t(m)&&i(m),X(ne)}else i(m);S=t(m)}if(S!==null)be=!0;else{var Q=t(b);Q!==null&&Oe(Te,Q.startTime-ne),be=!1}}break e}finally{S=null,E=me,F=!1}be=void 0}}finally{be?se():Re=!1}}}var se;if(typeof le=="function")se=function(){le(G)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Le=H.port2;H.port1.onmessage=G,se=function(){Le.postMessage(null)}}else se=function(){ee(G,0)};function Oe(ne,be){B=ee(function(){ne(r.unstable_now())},be)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_next=function(ne){switch(E){case 1:case 2:case 3:var be=3;break;default:be=E}var me=E;E=be;try{return ne()}finally{E=me}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(ne,be){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var me=E;E=ne;try{return be()}finally{E=me}},r.unstable_scheduleCallback=function(ne,be,me){var Ae=r.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ae+me:Ae):me=Ae,ne){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=me+He,ne={id:k++,callback:be,priorityLevel:ne,startTime:me,expirationTime:He,sortIndex:-1},me>Ae?(ne.sortIndex=me,e(b,ne),t(m)===null&&ne===t(b)&&(V?($(B),B=-1):V=!0,Oe(Te,me-Ae))):(ne.sortIndex=He,e(m,ne),L||F||(L=!0,Re||(Re=!0,se()))),ne},r.unstable_shouldYield=Y,r.unstable_wrapCallback=function(ne){var be=E;return function(){var me=E;E=be;try{return ne.apply(this,arguments)}finally{E=me}}}})(dg)),dg}var jb;function lN(){return jb||(jb=1,ug.exports=oN()),ug.exports}var hg={exports:{}},kr={};var _b;function cN(){if(_b)return kr;_b=1;var r=Ev();function e(m){var b="https://react.dev/errors/"+m;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)b+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+m+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(m,b,k){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:m,containerInfo:b,implementation:k}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,b){if(m==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return kr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,kr.createPortal=function(m,b){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return c(m,b,null,k)},kr.flushSync=function(m){var b=u.T,k=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=b,i.p=k,i.d.f()}},kr.preconnect=function(m,b){typeof m=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,i.d.C(m,b))},kr.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},kr.preinit=function(m,b){if(typeof m=="string"&&b&&typeof b.as=="string"){var k=b.as,S=h(k,b.crossOrigin),E=typeof b.integrity=="string"?b.integrity:void 0,F=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;k==="style"?i.d.S(m,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:S,integrity:E,fetchPriority:F}):k==="script"&&i.d.X(m,{crossOrigin:S,integrity:E,fetchPriority:F,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},kr.preinitModule=function(m,b){if(typeof m=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var k=h(b.as,b.crossOrigin);i.d.M(m,{crossOrigin:k,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&i.d.M(m)},kr.preload=function(m,b){if(typeof m=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var k=b.as,S=h(k,b.crossOrigin);i.d.L(m,k,{crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},kr.preloadModule=function(m,b){if(typeof m=="string")if(b){var k=h(b.as,b.crossOrigin);i.d.m(m,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:k,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else i.d.m(m)},kr.requestFormReset=function(m){i.d.r(m)},kr.unstable_batchedUpdates=function(m,b){return m(b)},kr.useFormState=function(m,b,k){return u.H.useFormState(m,b,k)},kr.useFormStatus=function(){return u.H.useHostTransitionStatus()},kr.version="19.2.4",kr}var kb;function uN(){if(kb)return hg.exports;kb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),hg.exports=cN(),hg.exports}var Nb;function dN(){if(Nb)return dd;Nb=1;var r=lN(),e=Ev(),t=uN();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function c(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function u(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function m(s){if(c(s)!==s)throw Error(i(188))}function b(s){var a=s.alternate;if(!a){if(a=c(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,d=a;;){var y=l.return;if(y===null)break;var j=y.alternate;if(j===null){if(d=y.return,d!==null){l=d;continue}break}if(y.child===j.child){for(j=y.child;j;){if(j===l)return m(y),s;if(j===d)return m(y),a;j=j.sibling}throw Error(i(188))}if(l.return!==d.return)l=y,d=j;else{for(var A=!1,q=y.child;q;){if(q===l){A=!0,l=y,d=j;break}if(q===d){A=!0,d=y,l=j;break}q=q.sibling}if(!A){for(q=j.child;q;){if(q===l){A=!0,l=j,d=y;break}if(q===d){A=!0,d=j,l=y;break}q=q.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==d)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function k(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=k(s),a!==null)return a;s=s.sibling}return null}var S=Object.assign,E=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),le=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function se(s){return s===null||typeof s!="object"?null:(s=G&&s[G]||s["@@iterator"],typeof s=="function"?s:null)}var H=Symbol.for("react.client.reference");function Le(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===H?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case V:return"Fragment";case ee:return"Profiler";case P:return"StrictMode";case Te:return"Suspense";case Re:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case L:return"Portal";case le:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case X:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case B:return a=s.displayName||null,a!==null?a:Le(s.type)||"Memo";case O:a=s._payload,s=s._init;try{return Le(s(a))}catch{}}return null}var Oe=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ae=[],He=-1;function Q(s){return{current:s}}function we(s){0>He||(s.current=Ae[He],Ae[He]=null,He--)}function Ne(s,a){He++,Ae[He]=s.current,s.current=a}var je=Q(null),ce=Q(null),Ee=Q(null),ue=Q(null);function xe(s,a){switch(Ne(Ee,a),Ne(ce,s),Ne(je,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?U1(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=U1(a),s=F1(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}we(je),Ne(je,s)}function Fe(){we(je),we(ce),we(Ee)}function ot(s){s.memoizedState!==null&&Ne(ue,s);var a=je.current,l=F1(a,s.type);a!==l&&(Ne(ce,s),Ne(je,l))}function Ue(s){ce.current===s&&(we(je),we(ce)),ue.current===s&&(we(ue),id._currentValue=me)}var _e,Ke;function ve(s){if(_e===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);_e=a&&a[1]||"",Ke=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+s+Ke}var bt=!1;function ht(s,a){if(!s||bt)return"";bt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Ge){var Ve=Ge}Reflect.construct(s,[],dt)}else{try{dt.call()}catch(Ge){Ve=Ge}s.call(dt.prototype)}}else{try{throw Error()}catch(Ge){Ve=Ge}(dt=s())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Ge){if(Ge&&Ve&&typeof Ge.stack=="string")return[Ge.stack,Ve.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=d.DetermineComponentFrameRoot(),A=j[0],q=j[1];if(A&&q){var oe=A.split(`
`),Ie=q.split(`
`);for(y=d=0;d<oe.length&&!oe[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Ie.length&&!Ie[y].includes("DetermineComponentFrameRoot");)y++;if(d===oe.length||y===Ie.length)for(d=oe.length-1,y=Ie.length-1;1<=d&&0<=y&&oe[d]!==Ie[y];)y--;for(;1<=d&&0<=y;d--,y--)if(oe[d]!==Ie[y]){if(d!==1||y!==1)do if(d--,y--,0>y||oe[d]!==Ie[y]){var at=`
`+oe[d].replace(" at new "," at ");return s.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",s.displayName)),at}while(1<=d&&0<=y);break}}}finally{bt=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?ve(l):""}function Ye(s,a){switch(s.tag){case 26:case 27:case 5:return ve(s.type);case 16:return ve("Lazy");case 13:return s.child!==a&&a!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return ht(s.type,!1);case 11:return ht(s.type.render,!1);case 1:return ht(s.type,!0);case 31:return ve("Activity");default:return""}}function Ot(s){try{var a="",l=null;do a+=Ye(s,l),l=s,s=s.return;while(s);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var jt=Object.prototype.hasOwnProperty,te=r.unstable_scheduleCallback,it=r.unstable_cancelCallback,kt=r.unstable_shouldYield,Rt=r.unstable_requestPaint,mt=r.unstable_now,Ht=r.unstable_getCurrentPriorityLevel,Zt=r.unstable_ImmediatePriority,Qt=r.unstable_UserBlockingPriority,ze=r.unstable_NormalPriority,Ze=r.unstable_LowPriority,gt=r.unstable_IdlePriority,Lt=r.log,Bt=r.unstable_setDisableYieldValue,Ct=null,Dt=null;function St(s){if(typeof Lt=="function"&&Bt(s),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Ct,s)}catch{}}var wt=Math.clz32?Math.clz32:un,Kt=Math.log,bn=Math.LN2;function un(s){return s>>>=0,s===0?32:31-(Kt(s)/bn|0)|0}var Pn=256,fs=262144,rn=4194304;function Bn(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ss(s,a,l){var d=s.pendingLanes;if(d===0)return 0;var y=0,j=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var q=d&134217727;return q!==0?(d=q&~j,d!==0?y=Bn(d):(A&=q,A!==0?y=Bn(A):l||(l=q&~s,l!==0&&(y=Bn(l))))):(q=d&~j,q!==0?y=Bn(q):A!==0?y=Bn(A):l||(l=d&~s,l!==0&&(y=Bn(l)))),y===0?0:a!==0&&a!==y&&(a&j)===0&&(j=y&-y,l=a&-a,j>=l||j===32&&(l&4194048)!==0)?a:y}function Gn(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function xr(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function as(){var s=rn;return rn<<=1,(rn&62914560)===0&&(rn=4194304),s}function ls(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function bs(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ur(s,a,l,d,y,j){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var q=s.entanglements,oe=s.expirationTimes,Ie=s.hiddenUpdates;for(l=A&~l;0<l;){var at=31-wt(l),dt=1<<at;q[at]=0,oe[at]=-1;var Ve=Ie[at];if(Ve!==null)for(Ie[at]=null,at=0;at<Ve.length;at++){var Ge=Ve[at];Ge!==null&&(Ge.lane&=-536870913)}l&=~dt}d!==0&&Vs(s,d,0),j!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=j&~(A&~a))}function Vs(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-wt(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|l&261930}function ms(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var d=31-wt(l),y=1<<d;y&a|s[d]&a&&(s[d]|=a),l&=~y}}function sr(s,a){var l=a&-a;return l=(l&42)!==0?1:pe(l),(l&(s.suspendedLanes|a))!==0?0:l}function pe(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xe(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function st(){var s=be.p;return s!==0?s:(s=window.event,s===void 0?32:ub(s.type))}function nt(s,a){var l=be.p;try{return be.p=s,a()}finally{be.p=l}}var Qe=Math.random().toString(36).slice(2),ie="__reactFiber$"+Qe,lt="__reactProps$"+Qe,ft="__reactContainer$"+Qe,_t="__reactEvents$"+Qe,It="__reactListeners$"+Qe,ln="__reactHandles$"+Qe,Nn="__reactResources$"+Qe,Fn="__reactMarker$"+Qe;function Ys(s){delete s[ie],delete s[lt],delete s[_t],delete s[It],delete s[ln]}function J(s){var a=s[ie];if(a)return a;for(var l=s.parentNode;l;){if(a=l[ft]||l[ie]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=K1(s);s!==null;){if(l=s[ie])return l;s=K1(s)}return a}s=l,l=s.parentNode}return null}function U(s){if(s=s[ie]||s[ft]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function re(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function ae(s){var a=s[Nn];return a||(a=s[Nn]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ke(s){s[Fn]=!0}var tt=new Set,$e={};function zt(s,a){Nt(s,a),Nt(s+"Capture",a)}function Nt(s,a){for($e[s]=a,s=0;s<a.length;s++)tt.add(a[s])}var Ft=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),he={},De={};function Be(s){return jt.call(De,s)?!0:jt.call(he,s)?!1:Ft.test(s)?De[s]=!0:(he[s]=!0,!1)}function vt(s,a,l){if(Be(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function yt(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function xt(s,a,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+d)}}function At(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Yt(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function dn(s,a,l){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,j=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,j.call(this,A)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function tn(s){if(!s._valueTracker){var a=Yt(s)?"checked":"value";s._valueTracker=dn(s,a,""+s[a])}}function Sn(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),d="";return s&&(d=Yt(s)?s.checked?"true":"false":s.value),s=d,s!==l?(a.setValue(s),!0):!1}function xs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Fa=/[\n"\\]/g;function Qs(s){return s.replace(Fa,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function za(s,a,l,d,y,j,A,q){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),a!=null?A==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+At(a)):s.value!==""+At(a)&&(s.value=""+At(a)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),a!=null?Tn(s,A,At(a)):l!=null?Tn(s,A,At(l)):d!=null&&s.removeAttribute("value"),y==null&&j!=null&&(s.defaultChecked=!!j),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?s.name=""+At(q):s.removeAttribute("name")}function Ui(s,a,l,d,y,j,A,q){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(s.type=j),a!=null||l!=null){if(!(j!=="submit"&&j!=="reset"||a!=null)){tn(s);return}l=l!=null?""+At(l):"",a=a!=null?""+At(a):l,q||a===s.value||(s.value=a),s.defaultValue=a}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=q?s.checked:!!d,s.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),tn(s)}function Tn(s,a,l){a==="number"&&xs(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function cs(s,a,l,d){if(s=s.options,a){a={};for(var y=0;y<l.length;y++)a["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=a.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&d&&(s[l].defaultSelected=!0)}else{for(l=""+At(l),a=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,d&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function Cr(s,a,l){if(a!=null&&(a=""+At(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+At(l):""}function dr(s,a,l,d){if(a==null){if(d!=null){if(l!=null)throw Error(i(92));if(Oe(d)){if(1<d.length)throw Error(i(93));d=d[0]}l=d}l==null&&(l=""),a=l}l=At(a),s.defaultValue=l,d=s.textContent,d===l&&d!==""&&d!==null&&(s.value=d),tn(s)}function Ns(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var rr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hr(s,a,l){var d=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,l):typeof l!="number"||l===0||rr.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function ra(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var y in a)d=a[y],a.hasOwnProperty(y)&&l[y]!==d&&hr(s,y,d)}else for(var j in a)a.hasOwnProperty(j)&&hr(s,j,a[j])}function qa(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Co=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ao(s){return Fr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function aa(){}var Rl=null;function zr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var hi=null,fr=null;function Fi(s){var a=U(s);if(a&&(s=a.stateNode)){var l=s[lt]||null;e:switch(s=a.stateNode,a.type){case"input":if(za(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Qs(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var d=l[a];if(d!==s&&d.form===s.form){var y=d[lt]||null;if(!y)throw Error(i(90));za(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<l.length;a++)d=l[a],d.form===s.form&&Sn(d)}break e;case"textarea":Cr(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&cs(s,!!l.multiple,a,!1)}}}var fi=!1;function mi(s,a,l){if(fi)return s(a,l);fi=!0;try{var d=s(a);return d}finally{if(fi=!1,(hi!==null||fr!==null)&&(qh(),hi&&(a=hi,s=fr,fr=hi=null,Fi(a),s)))for(a=0;a<s.length;a++)Fi(s[a])}}function ia(s,a){var l=s.stateNode;if(l===null)return null;var d=l[lt]||null;if(d===null)return null;l=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zi=!1;if(wr)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){zi=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{zi=!1}var _a=null,Ml=null,ka=null;function Ro(){if(ka)return ka;var s,a=Ml,l=a.length,d,y="value"in _a?_a.value:_a.textContent,j=y.length;for(s=0;s<l&&a[s]===y[s];s++);var A=l-s;for(d=1;d<=A&&a[l-d]===y[j-d];d++);return ka=y.slice(s,1<d?1-d:void 0)}function pi(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Wa(){return!0}function Ar(){return!1}function Kn(s){function a(l,d,y,j,A){this._reactName=l,this._targetInst=y,this.type=d,this.nativeEvent=j,this.target=A,this.currentTarget=null;for(var q in s)s.hasOwnProperty(q)&&(l=s[q],this[q]=l?l(j):j[q]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Wa:Ar,this.isPropagationStopped=Ar,this}return S(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),a}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Us=Kn(Ha),gi=S({},Ha,{view:0,detail:0}),ps=Kn(gi),Na,Mo,Jn,Do=S({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Jn&&(Jn&&s.type==="mousemove"?(Na=s.screenX-Jn.screenX,Mo=s.screenY-Jn.screenY):Mo=Na=0,Jn=s),Na)},movementY:function(s){return"movementY"in s?s.movementY:Mo}}),pn=Kn(Do),qi=S({},Do,{dataTransfer:0}),As=Kn(qi),Dl=S({},gi,{relatedTarget:0}),vi=Kn(Dl),Rr=S({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),gc=Kn(Rr),Wi=S({},Ha,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),vc=Kn(Wi),Il=S({},Ha,{data:0}),Sa=Kn(Il),Pl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Io={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Po(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Io[s])?!!a[s]:!1}function $a(){return Po}var ar=S({},gi,{key:function(s){if(s.key){var a=Pl[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=pi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?yc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(s){return s.type==="keypress"?pi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?pi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),bc=Kn(ar),Ol=S({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ga=Kn(Ol),p=S({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),T=Kn(p),M=S({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),K=Kn(M),Ce=S({},Do,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Kn(Ce),Tt=S({},Ha,{newState:0,oldState:0}),hn=Kn(Tt),ws=[9,13,27,32],On=wr&&"CompositionEvent"in window,is=null;wr&&"documentMode"in document&&(is=document.documentMode);var qr=wr&&"TextEvent"in window&&!is,Ta=wr&&(!On||is&&8<is&&11>=is),Wr=" ",oa=!1;function Ka(s,a){switch(s){case"keyup":return ws.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hi(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var $i=!1;function ah(s,a){switch(s){case"compositionend":return Hi(a);case"keypress":return a.which!==32?null:(oa=!0,Wr);case"textInput":return s=a.data,s===Wr&&oa?null:s;default:return null}}function wu(s,a){if($i)return s==="compositionend"||!On&&Ka(s,a)?(s=Ro(),ka=Ml=_a=null,$i=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ta&&a.locale!=="ko"?null:a.data;default:return null}}var Lm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ih(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Lm[s.type]:a==="textarea"}function ju(s,a,l,d){hi?fr?fr.push(d):fr=[d]:hi=d,a=Qh(a,"onChange"),0<a.length&&(l=new Us("onChange","change",null,l,d),s.push({event:l,listeners:a}))}var Ll=null,Oo=null;function oh(s){I1(s,0)}function la(s){var a=re(s);if(Sn(a))return s}function lh(s,a){if(s==="change")return a}var _u=!1;if(wr){var ku;if(wr){var Nu="oninput"in document;if(!Nu){var Su=document.createElement("div");Su.setAttribute("oninput","return;"),Nu=typeof Su.oninput=="function"}ku=Nu}else ku=!1;_u=ku&&(!document.documentMode||9<document.documentMode)}function ch(){Ll&&(Ll.detachEvent("onpropertychange",Tu),Oo=Ll=null)}function Tu(s){if(s.propertyName==="value"&&la(Oo)){var a=[];ju(a,Oo,s,zr(s)),mi(oh,a)}}function Bm(s,a,l){s==="focusin"?(ch(),Ll=a,Oo=l,Ll.attachEvent("onpropertychange",Tu)):s==="focusout"&&ch()}function uh(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return la(Oo)}function Bl(s,a){if(s==="click")return la(a)}function dh(s,a){if(s==="input"||s==="change")return la(a)}function Vm(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var jr=typeof Object.is=="function"?Object.is:Vm;function Lo(s,a){if(jr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),d=Object.keys(a);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var y=l[d];if(!jt.call(a,y)||!jr(s[y],a[y]))return!1}return!0}function xc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Eu(s,a){var l=xc(s);s=0;for(var d;l;){if(l.nodeType===3){if(d=s+l.textContent.length,s<=a&&d>=a)return{node:l,offset:a-s};s=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=xc(l)}}function hh(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?hh(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Cu(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=xs(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=xs(s.document)}return a}function wc(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Um=wr&&"documentMode"in document&&11>=document.documentMode,Gi=null,Bo=null,yi=null,Vo=!1;function fh(s,a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Vo||Gi==null||Gi!==xs(d)||(d=Gi,"selectionStart"in d&&wc(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),yi&&Lo(yi,d)||(yi=d,d=Qh(Bo,"onSelect"),0<d.length&&(a=new Us("onSelect","select",null,a,l),s.push({event:a,listeners:d}),a.target=Gi)))}function bi(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var Ea={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionrun:bi("Transition","TransitionRun"),transitionstart:bi("Transition","TransitionStart"),transitioncancel:bi("Transition","TransitionCancel"),transitionend:bi("Transition","TransitionEnd")},Vl={},xi={};wr&&(xi=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function Ki(s){if(Vl[s])return Vl[s];if(!Ea[s])return s;var a=Ea[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in xi)return Vl[s]=a[l];return s}var mh=Ki("animationend"),ph=Ki("animationiteration"),gh=Ki("animationstart"),Fm=Ki("transitionrun"),zm=Ki("transitionstart"),Au=Ki("transitioncancel"),Ru=Ki("transitionend"),vh=new Map,jc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jc.push("scrollEnd");function Xs(s,a){vh.set(s,a),zt(a,[s])}var _c=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Mr=[],Yi=0,Mu=0;function Ul(){for(var s=Yi,a=Mu=Yi=0;a<s;){var l=Mr[a];Mr[a++]=null;var d=Mr[a];Mr[a++]=null;var y=Mr[a];Mr[a++]=null;var j=Mr[a];if(Mr[a++]=null,d!==null&&y!==null){var A=d.pending;A===null?y.next=y:(y.next=A.next,A.next=y),d.pending=y}j!==0&&Iu(l,y,j)}}function kc(s,a,l,d){Mr[Yi++]=s,Mr[Yi++]=a,Mr[Yi++]=l,Mr[Yi++]=d,Mu|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Du(s,a,l,d){return kc(s,a,l,d),Nc(s)}function wi(s,a){return kc(s,null,null,a),Nc(s)}function Iu(s,a,l){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l);for(var y=!1,j=s.return;j!==null;)j.childLanes|=l,d=j.alternate,d!==null&&(d.childLanes|=l),j.tag===22&&(s=j.stateNode,s===null||s._visibility&1||(y=!0)),s=j,j=j.return;return s.tag===3?(j=s.stateNode,y&&a!==null&&(y=31-wt(l),s=j.hiddenUpdates,d=s[y],d===null?s[y]=[a]:d.push(a),a.lane=l|536870912),j):null}function Nc(s){if(50<Zu)throw Zu=0,Rp=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Qi={};function Sc(s,a,l,d){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Js(s,a,l,d){return new Sc(s,a,l,d)}function Uo(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ca(s,a){var l=s.alternate;return l===null?(l=Js(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function yh(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Fl(s,a,l,d,y,j){var A=0;if(d=s,typeof s=="function")Uo(s)&&(A=1);else if(typeof s=="string")A=Hk(s,l,je.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case z:return s=Js(31,l,a,y),s.elementType=z,s.lanes=j,s;case V:return ji(l.children,y,j,a);case P:A=8,y|=24;break;case ee:return s=Js(12,l,a,y|2),s.elementType=ee,s.lanes=j,s;case Te:return s=Js(13,l,a,y),s.elementType=Te,s.lanes=j,s;case Re:return s=Js(19,l,a,y),s.elementType=Re,s.lanes=j,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case le:A=10;break e;case $:A=9;break e;case X:A=11;break e;case B:A=14;break e;case O:A=16,d=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),d=null}return a=Js(A,l,a,y),a.elementType=s,a.type=d,a.lanes=j,a}function ji(s,a,l,d){return s=Js(7,s,d,a),s.lanes=l,s}function Pu(s,a,l){return s=Js(6,s,null,a),s.lanes=l,s}function zl(s){var a=Js(18,null,null,0);return a.stateNode=s,a}function Tc(s,a,l){return a=Js(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var bh=new WeakMap;function Hr(s,a){if(typeof s=="object"&&s!==null){var l=bh.get(s);return l!==void 0?l:(a={value:s,source:a,stack:Ot(a)},bh.set(s,a),a)}return{value:s,source:a,stack:Ot(a)}}var Fo=[],zo=0,Ec=null,ql=0,Dr=[],$r=0,_i=null,ca=1,Aa="";function Gr(s,a){Fo[zo++]=ql,Fo[zo++]=Ec,Ec=s,ql=a}function mr(s,a,l){Dr[$r++]=ca,Dr[$r++]=Aa,Dr[$r++]=_i,_i=s;var d=ca;s=Aa;var y=32-wt(d)-1;d&=~(1<<y),l+=1;var j=32-wt(a)+y;if(30<j){var A=y-y%5;j=(d&(1<<A)-1).toString(32),d>>=A,y-=A,ca=1<<32-wt(a)+y|l<<y|d,Aa=j+s}else ca=1<<j|l<<y|d,Aa=s}function Ou(s){s.return!==null&&(Gr(s,1),mr(s,1,0))}function Ya(s){for(;s===Ec;)Ec=Fo[--zo],Fo[zo]=null,ql=Fo[--zo],Fo[zo]=null;for(;s===_i;)_i=Dr[--$r],Dr[$r]=null,Aa=Dr[--$r],Dr[$r]=null,ca=Dr[--$r],Dr[$r]=null}function Ra(s,a){Dr[$r++]=ca,Dr[$r++]=Aa,Dr[$r++]=_i,ca=a.id,Aa=a.overflow,_i=s}var Rs=null,En=null,wn=!1,Ir=null,zn=!1,Ma=Error(i(519));function Zs(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ua(Hr(a,s)),Ma}function er(s){var a=s.stateNode,l=s.type,d=s.memoizedProps;switch(a[ie]=s,a[lt]=d,l){case"dialog":kn("cancel",a),kn("close",a);break;case"iframe":case"object":case"embed":kn("load",a);break;case"video":case"audio":for(l=0;l<td.length;l++)kn(td[l],a);break;case"source":kn("error",a);break;case"img":case"image":case"link":kn("error",a),kn("load",a);break;case"details":kn("toggle",a);break;case"input":kn("invalid",a),Ui(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":kn("invalid",a);break;case"textarea":kn("invalid",a),dr(a,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||d.suppressHydrationWarning===!0||B1(a.textContent,l)?(d.popover!=null&&(kn("beforetoggle",a),kn("toggle",a)),d.onScroll!=null&&kn("scroll",a),d.onScrollEnd!=null&&kn("scrollend",a),d.onClick!=null&&(a.onclick=aa),a=!0):a=!1,a||Zs(s,!0)}function qo(s){for(Rs=s.return;Rs;)switch(Rs.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Rs=Rs.return}}function Xi(s){if(s!==Rs)return!1;if(!wn)return qo(s),wn=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||$p(s.type,s.memoizedProps)),l=!l),l&&En&&Zs(s),qo(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));En=G1(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));En=G1(s)}else a===27?(a=En,nl(s.type)?(s=Xp,Xp=null,En=s):En=a):En=Rs?Oa(s.stateNode.nextSibling):null;return!0}function Ji(){En=Rs=null,wn=!1}function ki(){var s=Ir;return s!==null&&(Zr===null?Zr=s:Zr.push.apply(Zr,s),Ir=null),s}function ua(s){Ir===null?Ir=[s]:Ir.push(s)}var Lu=Q(null),Zi=null,Qa=null;function Ni(s,a,l){Ne(Lu,a._currentValue),a._currentValue=l}function Xa(s){s._currentValue=Lu.current,we(Lu)}function Bu(s,a,l){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===l)break;s=s.return}}function Vu(s,a,l,d){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var j=y.dependencies;if(j!==null){var A=y.child;j=j.firstContext;e:for(;j!==null;){var q=j;j=y;for(var oe=0;oe<a.length;oe++)if(q.context===a[oe]){j.lanes|=l,q=j.alternate,q!==null&&(q.lanes|=l),Bu(j.return,l,s),d||(A=null);break e}j=q.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,j=A.alternate,j!==null&&(j.lanes|=l),Bu(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Wo(s,a,l,d){s=null;for(var y=a,j=!1;y!==null;){if(!j){if((y.flags&524288)!==0)j=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var q=y.type;jr(y.pendingProps.value,A.value)||(s!==null?s.push(q):s=[q])}}else if(y===ue.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(id):s=[id])}y=y.return}s!==null&&Vu(a,s,l,d),a.flags|=262144}function Wl(s){for(s=s.firstContext;s!==null;){if(!jr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function eo(s){Zi=s,Qa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Fs(s){return xh(Zi,s)}function Hl(s,a){return Zi===null&&eo(s),xh(s,a)}function xh(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Qa===null){if(s===null)throw Error(i(308));Qa=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Qa=Qa.next=a;return l}var wh=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},Cc=r.unstable_scheduleCallback,Da=r.unstable_NormalPriority,Ss={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uu(){return{controller:new wh,data:new Map,refCount:0}}function $l(s){s.refCount--,s.refCount===0&&Cc(Da,function(){s.controller.abort()})}var Ho=null,Ac=0,$o=0,to=null;function Si(s,a){if(Ho===null){var l=Ho=[];Ac=0,$o=Lp(),to={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Ac++,a.then(Go,Go),a}function Go(){if(--Ac===0&&Ho!==null){to!==null&&(to.status="fulfilled");var s=Ho;Ho=null,$o=0,to=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function jh(s,a){var l=[],d={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var y=0;y<l.length;y++)(0,l[y])(a)},function(y){for(d.status="rejected",d.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),d}var g=ne.S;ne.S=function(s,a){l1=mt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Si(s,a),g!==null&&g(s,a)};var x=Q(null);function f(){var s=x.current;return s!==null?s:rs.pooledCache}function v(s,a){a===null?Ne(x,x.current):Ne(x,a.pool)}function w(){var s=f();return s===null?null:{parent:Ss._currentValue,pool:s}}var _=Error(i(460)),N=Error(i(474)),R=Error(i(542)),D={then:function(){}};function I(s){return s=s.status,s==="fulfilled"||s==="rejected"}function W(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(aa,aa),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,We(s),s;default:if(typeof a.status=="string")a.then(aa,aa);else{if(s=rs,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=d}},function(d){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,We(s),s}throw de=a,_}}function Z(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(de=l,_):l}}var de=null;function ye(){if(de===null)throw Error(i(459));var s=de;return de=null,s}function We(s){if(s===_||s===R)throw Error(i(483))}var fe=null,Pe=0;function et(s){var a=Pe;return Pe+=1,fe===null&&(fe=[]),W(fe,s,a)}function rt(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Ut(s,a){throw a.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Pt(s){function a(Se,ge){if(s){var Me=Se.deletions;Me===null?(Se.deletions=[ge],Se.flags|=16):Me.push(ge)}}function l(Se,ge){if(!s)return null;for(;ge!==null;)a(Se,ge),ge=ge.sibling;return null}function d(Se){for(var ge=new Map;Se!==null;)Se.key!==null?ge.set(Se.key,Se):ge.set(Se.index,Se),Se=Se.sibling;return ge}function y(Se,ge){return Se=Ca(Se,ge),Se.index=0,Se.sibling=null,Se}function j(Se,ge,Me){return Se.index=Me,s?(Me=Se.alternate,Me!==null?(Me=Me.index,Me<ge?(Se.flags|=67108866,ge):Me):(Se.flags|=67108866,ge)):(Se.flags|=1048576,ge)}function A(Se){return s&&Se.alternate===null&&(Se.flags|=67108866),Se}function q(Se,ge,Me,ct){return ge===null||ge.tag!==6?(ge=Pu(Me,Se.mode,ct),ge.return=Se,ge):(ge=y(ge,Me),ge.return=Se,ge)}function oe(Se,ge,Me,ct){var Xt=Me.type;return Xt===V?at(Se,ge,Me.props.children,ct,Me.key):ge!==null&&(ge.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===O&&Z(Xt)===ge.type)?(ge=y(ge,Me.props),rt(ge,Me),ge.return=Se,ge):(ge=Fl(Me.type,Me.key,Me.props,null,Se.mode,ct),rt(ge,Me),ge.return=Se,ge)}function Ie(Se,ge,Me,ct){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Me.containerInfo||ge.stateNode.implementation!==Me.implementation?(ge=Tc(Me,Se.mode,ct),ge.return=Se,ge):(ge=y(ge,Me.children||[]),ge.return=Se,ge)}function at(Se,ge,Me,ct,Xt){return ge===null||ge.tag!==7?(ge=ji(Me,Se.mode,ct,Xt),ge.return=Se,ge):(ge=y(ge,Me),ge.return=Se,ge)}function dt(Se,ge,Me){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=Pu(""+ge,Se.mode,Me),ge.return=Se,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case F:return Me=Fl(ge.type,ge.key,ge.props,null,Se.mode,Me),rt(Me,ge),Me.return=Se,Me;case L:return ge=Tc(ge,Se.mode,Me),ge.return=Se,ge;case O:return ge=Z(ge),dt(Se,ge,Me)}if(Oe(ge)||se(ge))return ge=ji(ge,Se.mode,Me,null),ge.return=Se,ge;if(typeof ge.then=="function")return dt(Se,et(ge),Me);if(ge.$$typeof===le)return dt(Se,Hl(Se,ge),Me);Ut(Se,ge)}return null}function Ve(Se,ge,Me,ct){var Xt=ge!==null?ge.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Xt!==null?null:q(Se,ge,""+Me,ct);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case F:return Me.key===Xt?oe(Se,ge,Me,ct):null;case L:return Me.key===Xt?Ie(Se,ge,Me,ct):null;case O:return Me=Z(Me),Ve(Se,ge,Me,ct)}if(Oe(Me)||se(Me))return Xt!==null?null:at(Se,ge,Me,ct,null);if(typeof Me.then=="function")return Ve(Se,ge,et(Me),ct);if(Me.$$typeof===le)return Ve(Se,ge,Hl(Se,Me),ct);Ut(Se,Me)}return null}function Ge(Se,ge,Me,ct,Xt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Se=Se.get(Me)||null,q(ge,Se,""+ct,Xt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case F:return Se=Se.get(ct.key===null?Me:ct.key)||null,oe(ge,Se,ct,Xt);case L:return Se=Se.get(ct.key===null?Me:ct.key)||null,Ie(ge,Se,ct,Xt);case O:return ct=Z(ct),Ge(Se,ge,Me,ct,Xt)}if(Oe(ct)||se(ct))return Se=Se.get(Me)||null,at(ge,Se,ct,Xt,null);if(typeof ct.then=="function")return Ge(Se,ge,Me,et(ct),Xt);if(ct.$$typeof===le)return Ge(Se,ge,Me,Hl(ge,ct),Xt);Ut(ge,ct)}return null}function Wt(Se,ge,Me,ct){for(var Xt=null,Vn=null,$t=ge,xn=ge=0,An=null;$t!==null&&xn<Me.length;xn++){$t.index>xn?(An=$t,$t=null):An=$t.sibling;var Un=Ve(Se,$t,Me[xn],ct);if(Un===null){$t===null&&($t=An);break}s&&$t&&Un.alternate===null&&a(Se,$t),ge=j(Un,ge,xn),Vn===null?Xt=Un:Vn.sibling=Un,Vn=Un,$t=An}if(xn===Me.length)return l(Se,$t),wn&&Gr(Se,xn),Xt;if($t===null){for(;xn<Me.length;xn++)$t=dt(Se,Me[xn],ct),$t!==null&&(ge=j($t,ge,xn),Vn===null?Xt=$t:Vn.sibling=$t,Vn=$t);return wn&&Gr(Se,xn),Xt}for($t=d($t);xn<Me.length;xn++)An=Ge($t,Se,xn,Me[xn],ct),An!==null&&(s&&An.alternate!==null&&$t.delete(An.key===null?xn:An.key),ge=j(An,ge,xn),Vn===null?Xt=An:Vn.sibling=An,Vn=An);return s&&$t.forEach(function(ol){return a(Se,ol)}),wn&&Gr(Se,xn),Xt}function sn(Se,ge,Me,ct){if(Me==null)throw Error(i(151));for(var Xt=null,Vn=null,$t=ge,xn=ge=0,An=null,Un=Me.next();$t!==null&&!Un.done;xn++,Un=Me.next()){$t.index>xn?(An=$t,$t=null):An=$t.sibling;var ol=Ve(Se,$t,Un.value,ct);if(ol===null){$t===null&&($t=An);break}s&&$t&&ol.alternate===null&&a(Se,$t),ge=j(ol,ge,xn),Vn===null?Xt=ol:Vn.sibling=ol,Vn=ol,$t=An}if(Un.done)return l(Se,$t),wn&&Gr(Se,xn),Xt;if($t===null){for(;!Un.done;xn++,Un=Me.next())Un=dt(Se,Un.value,ct),Un!==null&&(ge=j(Un,ge,xn),Vn===null?Xt=Un:Vn.sibling=Un,Vn=Un);return wn&&Gr(Se,xn),Xt}for($t=d($t);!Un.done;xn++,Un=Me.next())Un=Ge($t,Se,xn,Un.value,ct),Un!==null&&(s&&Un.alternate!==null&&$t.delete(Un.key===null?xn:Un.key),ge=j(Un,ge,xn),Vn===null?Xt=Un:Vn.sibling=Un,Vn=Un);return s&&$t.forEach(function(nN){return a(Se,nN)}),wn&&Gr(Se,xn),Xt}function ns(Se,ge,Me,ct){if(typeof Me=="object"&&Me!==null&&Me.type===V&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case F:e:{for(var Xt=Me.key;ge!==null;){if(ge.key===Xt){if(Xt=Me.type,Xt===V){if(ge.tag===7){l(Se,ge.sibling),ct=y(ge,Me.props.children),ct.return=Se,Se=ct;break e}}else if(ge.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===O&&Z(Xt)===ge.type){l(Se,ge.sibling),ct=y(ge,Me.props),rt(ct,Me),ct.return=Se,Se=ct;break e}l(Se,ge);break}else a(Se,ge);ge=ge.sibling}Me.type===V?(ct=ji(Me.props.children,Se.mode,ct,Me.key),ct.return=Se,Se=ct):(ct=Fl(Me.type,Me.key,Me.props,null,Se.mode,ct),rt(ct,Me),ct.return=Se,Se=ct)}return A(Se);case L:e:{for(Xt=Me.key;ge!==null;){if(ge.key===Xt)if(ge.tag===4&&ge.stateNode.containerInfo===Me.containerInfo&&ge.stateNode.implementation===Me.implementation){l(Se,ge.sibling),ct=y(ge,Me.children||[]),ct.return=Se,Se=ct;break e}else{l(Se,ge);break}else a(Se,ge);ge=ge.sibling}ct=Tc(Me,Se.mode,ct),ct.return=Se,Se=ct}return A(Se);case O:return Me=Z(Me),ns(Se,ge,Me,ct)}if(Oe(Me))return Wt(Se,ge,Me,ct);if(se(Me)){if(Xt=se(Me),typeof Xt!="function")throw Error(i(150));return Me=Xt.call(Me),sn(Se,ge,Me,ct)}if(typeof Me.then=="function")return ns(Se,ge,et(Me),ct);if(Me.$$typeof===le)return ns(Se,ge,Hl(Se,Me),ct);Ut(Se,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint"?(Me=""+Me,ge!==null&&ge.tag===6?(l(Se,ge.sibling),ct=y(ge,Me),ct.return=Se,Se=ct):(l(Se,ge),ct=Pu(Me,Se.mode,ct),ct.return=Se,Se=ct),A(Se)):l(Se,ge)}return function(Se,ge,Me,ct){try{Pe=0;var Xt=ns(Se,ge,Me,ct);return fe=null,Xt}catch($t){if($t===_||$t===R)throw $t;var Vn=Js(29,$t,null,Se.mode);return Vn.lanes=ct,Vn.return=Se,Vn}}}var Gt=Pt(!0),gn=Pt(!1),nn=!1;function jn(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _r(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function zs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Zn(s,a,l){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(qn&2)!==0){var y=d.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),d.pending=a,a=Nc(s),Iu(s,null,l),a}return kc(s,d,a,l),Nc(s)}function Ja(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,l|=d,a.lanes=l,ms(s,l)}}function da(s,a){var l=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var y=null,j=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};j===null?y=j=A:j=j.next=A,l=l.next}while(l!==null);j===null?y=j=a:j=j.next=a}else y=j=a;l={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:j,shared:d.shared,callbacks:d.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Ia=!1;function Kr(){if(Ia){var s=to;if(s!==null)throw s}}function Pr(s,a,l,d){Ia=!1;var y=s.updateQueue;nn=!1;var j=y.firstBaseUpdate,A=y.lastBaseUpdate,q=y.shared.pending;if(q!==null){y.shared.pending=null;var oe=q,Ie=oe.next;oe.next=null,A===null?j=Ie:A.next=Ie,A=oe;var at=s.alternate;at!==null&&(at=at.updateQueue,q=at.lastBaseUpdate,q!==A&&(q===null?at.firstBaseUpdate=Ie:q.next=Ie,at.lastBaseUpdate=oe))}if(j!==null){var dt=y.baseState;A=0,at=Ie=oe=null,q=j;do{var Ve=q.lane&-536870913,Ge=Ve!==q.lane;if(Ge?(Cn&Ve)===Ve:(d&Ve)===Ve){Ve!==0&&Ve===$o&&(Ia=!0),at!==null&&(at=at.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Wt=s,sn=q;Ve=a;var ns=l;switch(sn.tag){case 1:if(Wt=sn.payload,typeof Wt=="function"){dt=Wt.call(ns,dt,Ve);break e}dt=Wt;break e;case 3:Wt.flags=Wt.flags&-65537|128;case 0:if(Wt=sn.payload,Ve=typeof Wt=="function"?Wt.call(ns,dt,Ve):Wt,Ve==null)break e;dt=S({},dt,Ve);break e;case 2:nn=!0}}Ve=q.callback,Ve!==null&&(s.flags|=64,Ge&&(s.flags|=8192),Ge=y.callbacks,Ge===null?y.callbacks=[Ve]:Ge.push(Ve))}else Ge={lane:Ve,tag:q.tag,payload:q.payload,callback:q.callback,next:null},at===null?(Ie=at=Ge,oe=dt):at=at.next=Ge,A|=Ve;if(q=q.next,q===null){if(q=y.shared.pending,q===null)break;Ge=q,q=Ge.next,Ge.next=null,y.lastBaseUpdate=Ge,y.shared.pending=null}}while(!0);at===null&&(oe=dt),y.baseState=oe,y.firstBaseUpdate=Ie,y.lastBaseUpdate=at,j===null&&(y.shared.lanes=0),Xo|=A,s.lanes=A,s.memoizedState=dt}}function Yn(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function Yr(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Yn(l[s],a)}var Pa=Q(null),ha=Q(0);function fa(s,a){s=uo,Ne(ha,s),Ne(Pa,a),uo=s|a.baseLanes}function In(){Ne(ha,uo),Ne(Pa,Pa.current)}function Ms(){uo=ha.current,we(Pa),we(ha)}var Or=Q(null),Lr=null;function Za(s){var a=s.alternate;Ne(Ds,Ds.current&1),Ne(Or,s),Lr===null&&(a===null||Pa.current!==null||a.memoizedState!==null)&&(Lr=s)}function qm(s){Ne(Ds,Ds.current),Ne(Or,s),Lr===null&&(Lr=s)}function O0(s){s.tag===22?(Ne(Ds,Ds.current),Ne(Or,s),Lr===null&&(Lr=s)):Ko()}function Ko(){Ne(Ds,Ds.current),Ne(Or,Or.current)}function ma(s){we(Or),Lr===s&&(Lr=null),we(Ds)}var Ds=Q(0);function _h(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Yp(l)||Qp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var no=0,vn=null,es=null,qs=null,kh=!1,Rc=!1,Gl=!1,Nh=0,Fu=0,Mc=null,$_=0;function Ts(){throw Error(i(321))}function Wm(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!jr(s[l],a[l]))return!1;return!0}function Hm(s,a,l,d,y,j){return no=j,vn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ne.H=s===null||s.memoizedState===null?by:ip,Gl=!1,j=l(d,y),Gl=!1,Rc&&(j=B0(a,l,d,y)),L0(s),j}function L0(s){ne.H=Wu;var a=es!==null&&es.next!==null;if(no=0,qs=es=vn=null,kh=!1,Fu=0,Mc=null,a)throw Error(i(300));s===null||Ws||(s=s.dependencies,s!==null&&Wl(s)&&(Ws=!0))}function B0(s,a,l,d){vn=s;var y=0;do{if(Rc&&(Mc=null),Fu=0,Rc=!1,25<=y)throw Error(i(301));if(y+=1,qs=es=null,s.updateQueue!=null){var j=s.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}ne.H=xy,j=a(l,d)}while(Rc);return j}function G_(){var s=ne.H,a=s.useState()[0];return a=typeof a.then=="function"?zu(a):a,s=s.useState()[0],(es!==null?es.memoizedState:null)!==s&&(vn.flags|=1024),a}function $m(){var s=Nh!==0;return Nh=0,s}function Gm(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Km(s){if(kh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}kh=!1}no=0,qs=es=vn=null,Rc=!1,Fu=Nh=0,Mc=null}function Br(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qs===null?vn.memoizedState=qs=s:qs=qs.next=s,qs}function Is(){if(es===null){var s=vn.alternate;s=s!==null?s.memoizedState:null}else s=es.next;var a=qs===null?vn.memoizedState:qs.next;if(a!==null)qs=a,es=s;else{if(s===null)throw vn.alternate===null?Error(i(467)):Error(i(310));es=s,s={memoizedState:es.memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},qs===null?vn.memoizedState=qs=s:qs=qs.next=s}return qs}function Sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zu(s){var a=Fu;return Fu+=1,Mc===null&&(Mc=[]),s=W(Mc,s,a),a=vn,(qs===null?a.memoizedState:qs.next)===null&&(a=a.alternate,ne.H=a===null||a.memoizedState===null?by:ip),s}function Th(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return zu(s);if(s.$$typeof===le)return Fs(s)}throw Error(i(438,String(s)))}function Ym(s){var a=null,l=vn.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var d=vn.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Sh(),vn.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),d=0;d<s;d++)l[d]=Y;return a.index++,l}function so(s,a){return typeof a=="function"?a(s):a}function Eh(s){var a=Is();return Qm(a,es,s)}function Qm(s,a,l){var d=s.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=l;var y=s.baseQueue,j=d.pending;if(j!==null){if(y!==null){var A=y.next;y.next=j.next,j.next=A}a.baseQueue=y=j,d.pending=null}if(j=s.baseState,y===null)s.memoizedState=j;else{a=y.next;var q=A=null,oe=null,Ie=a,at=!1;do{var dt=Ie.lane&-536870913;if(dt!==Ie.lane?(Cn&dt)===dt:(no&dt)===dt){var Ve=Ie.revertLane;if(Ve===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),dt===$o&&(at=!0);else if((no&Ve)===Ve){Ie=Ie.next,Ve===$o&&(at=!0);continue}else dt={lane:0,revertLane:Ie.revertLane,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},oe===null?(q=oe=dt,A=j):oe=oe.next=dt,vn.lanes|=Ve,Xo|=Ve;dt=Ie.action,Gl&&l(j,dt),j=Ie.hasEagerState?Ie.eagerState:l(j,dt)}else Ve={lane:dt,revertLane:Ie.revertLane,gesture:Ie.gesture,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},oe===null?(q=oe=Ve,A=j):oe=oe.next=Ve,vn.lanes|=dt,Xo|=dt;Ie=Ie.next}while(Ie!==null&&Ie!==a);if(oe===null?A=j:oe.next=q,!jr(j,s.memoizedState)&&(Ws=!0,at&&(l=to,l!==null)))throw l;s.memoizedState=j,s.baseState=A,s.baseQueue=oe,d.lastRenderedState=j}return y===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function Xm(s){var a=Is(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var d=l.dispatch,y=l.pending,j=a.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do j=s(j,A.action),A=A.next;while(A!==y);jr(j,a.memoizedState)||(Ws=!0),a.memoizedState=j,a.baseQueue===null&&(a.baseState=j),l.lastRenderedState=j}return[j,d]}function V0(s,a,l){var d=vn,y=Is(),j=wn;if(j){if(l===void 0)throw Error(i(407));l=l()}else l=a();var A=!jr((es||y).memoizedState,l);if(A&&(y.memoizedState=l,Ws=!0),y=y.queue,ep(z0.bind(null,d,y,s),[s]),y.getSnapshot!==a||A||qs!==null&&qs.memoizedState.tag&1){if(d.flags|=2048,Dc(9,{destroy:void 0},F0.bind(null,d,y,l,a),null),rs===null)throw Error(i(349));j||(no&127)!==0||U0(d,a,l)}return l}function U0(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=vn.updateQueue,a===null?(a=Sh(),vn.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function F0(s,a,l,d){a.value=l,a.getSnapshot=d,q0(a)&&W0(s)}function z0(s,a,l){return l(function(){q0(a)&&W0(s)})}function q0(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!jr(s,l)}catch{return!0}}function W0(s){var a=wi(s,2);a!==null&&ea(a,s,2)}function Jm(s){var a=Br();if(typeof s=="function"){var l=s;if(s=l(),Gl){St(!0);try{l()}finally{St(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:s},a}function H0(s,a,l,d){return s.baseState=l,Qm(s,es,typeof d=="function"?d:so)}function K_(s,a,l,d,y){if(Rh(s))throw Error(i(485));if(s=a.action,s!==null){var j={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){j.listeners.push(A)}};ne.T!==null?l(!0):j.isTransition=!1,d(j),l=a.pending,l===null?(j.next=a.pending=j,$0(a,j)):(j.next=l.next,a.pending=l.next=j)}}function $0(s,a){var l=a.action,d=a.payload,y=s.state;if(a.isTransition){var j=ne.T,A={};ne.T=A;try{var q=l(y,d),oe=ne.S;oe!==null&&oe(A,q),G0(s,a,q)}catch(Ie){Zm(s,a,Ie)}finally{j!==null&&A.types!==null&&(j.types=A.types),ne.T=j}}else try{j=l(y,d),G0(s,a,j)}catch(Ie){Zm(s,a,Ie)}}function G0(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){K0(s,a,d)},function(d){return Zm(s,a,d)}):K0(s,a,l)}function K0(s,a,l){a.status="fulfilled",a.value=l,Y0(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,$0(s,l)))}function Zm(s,a,l){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=l,Y0(a),a=a.next;while(a!==d)}s.action=null}function Y0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Q0(s,a){return a}function X0(s,a){if(wn){var l=rs.formState;if(l!==null){e:{var d=vn;if(wn){if(En){t:{for(var y=En,j=zn;y.nodeType!==8;){if(!j){y=null;break t}if(y=Oa(y.nextSibling),y===null){y=null;break t}}j=y.data,y=j==="F!"||j==="F"?y:null}if(y){En=Oa(y.nextSibling),d=y.data==="F!";break e}}Zs(d)}d=!1}d&&(a=l[0])}}return l=Br(),l.memoizedState=l.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Q0,lastRenderedState:a},l.queue=d,l=gy.bind(null,vn,d),d.dispatch=l,d=Jm(!1),j=ap.bind(null,vn,!1,d.queue),d=Br(),y={state:a,dispatch:null,action:s,pending:null},d.queue=y,l=K_.bind(null,vn,y,j,l),y.dispatch=l,d.memoizedState=s,[a,l,!1]}function J0(s){var a=Is();return Z0(a,es,s)}function Z0(s,a,l){if(a=Qm(s,a,Q0)[0],s=Eh(so)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=zu(a)}catch(A){throw A===_?R:A}else d=a;a=Is();var y=a.queue,j=y.dispatch;return l!==a.memoizedState&&(vn.flags|=2048,Dc(9,{destroy:void 0},Y_.bind(null,y,l),null)),[d,j,s]}function Y_(s,a){s.action=a}function ey(s){var a=Is(),l=es;if(l!==null)return Z0(a,l,s);Is(),a=a.memoizedState,l=Is();var d=l.queue.dispatch;return l.memoizedState=s,[a,d,!1]}function Dc(s,a,l,d){return s={tag:s,create:l,deps:d,inst:a,next:null},a=vn.updateQueue,a===null&&(a=Sh(),vn.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(d=l.next,l.next=s,s.next=d,a.lastEffect=s),s}function ty(){return Is().memoizedState}function Ch(s,a,l,d){var y=Br();vn.flags|=s,y.memoizedState=Dc(1|a,{destroy:void 0},l,d===void 0?null:d)}function Ah(s,a,l,d){var y=Is();d=d===void 0?null:d;var j=y.memoizedState.inst;es!==null&&d!==null&&Wm(d,es.memoizedState.deps)?y.memoizedState=Dc(a,j,l,d):(vn.flags|=s,y.memoizedState=Dc(1|a,j,l,d))}function ny(s,a){Ch(8390656,8,s,a)}function ep(s,a){Ah(2048,8,s,a)}function Q_(s){vn.flags|=4;var a=vn.updateQueue;if(a===null)a=Sh(),vn.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function sy(s){var a=Is().memoizedState;return Q_({ref:a,nextImpl:s}),function(){if((qn&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function ry(s,a){return Ah(4,2,s,a)}function ay(s,a){return Ah(4,4,s,a)}function iy(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function oy(s,a,l){l=l!=null?l.concat([s]):null,Ah(4,4,iy.bind(null,a,s),l)}function tp(){}function ly(s,a){var l=Is();a=a===void 0?null:a;var d=l.memoizedState;return a!==null&&Wm(a,d[1])?d[0]:(l.memoizedState=[s,a],s)}function cy(s,a){var l=Is();a=a===void 0?null:a;var d=l.memoizedState;if(a!==null&&Wm(a,d[1]))return d[0];if(d=s(),Gl){St(!0);try{s()}finally{St(!1)}}return l.memoizedState=[d,a],d}function np(s,a,l){return l===void 0||(no&1073741824)!==0&&(Cn&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=u1(),vn.lanes|=s,Xo|=s,l)}function uy(s,a,l,d){return jr(l,a)?l:Pa.current!==null?(s=np(s,l,d),jr(s,a)||(Ws=!0),s):(no&42)===0||(no&1073741824)!==0&&(Cn&261930)===0?(Ws=!0,s.memoizedState=l):(s=u1(),vn.lanes|=s,Xo|=s,a)}function dy(s,a,l,d,y){var j=be.p;be.p=j!==0&&8>j?j:8;var A=ne.T,q={};ne.T=q,ap(s,!1,a,l);try{var oe=y(),Ie=ne.S;if(Ie!==null&&Ie(q,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var at=jh(oe,d);qu(s,a,at,va(s))}else qu(s,a,d,va(s))}catch(dt){qu(s,a,{then:function(){},status:"rejected",reason:dt},va())}finally{be.p=j,A!==null&&q.types!==null&&(A.types=q.types),ne.T=A}}function X_(){}function sp(s,a,l,d){if(s.tag!==5)throw Error(i(476));var y=hy(s).queue;dy(s,y,a,me,l===null?X_:function(){return fy(s),l(d)})}function hy(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:me},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function fy(s){var a=hy(s);a.next===null&&(a=s.alternate.memoizedState),qu(s,a.next.queue,{},va())}function rp(){return Fs(id)}function my(){return Is().memoizedState}function py(){return Is().memoizedState}function J_(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=va();s=zs(l);var d=Zn(a,s,l);d!==null&&(ea(d,a,l),Ja(d,a,l)),a={cache:Uu()},s.payload=a;return}a=a.return}}function Z_(s,a,l){var d=va();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Rh(s)?vy(a,l):(l=Du(s,a,l,d),l!==null&&(ea(l,s,d),yy(l,a,d)))}function gy(s,a,l){var d=va();qu(s,a,l,d)}function qu(s,a,l,d){var y={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Rh(s))vy(a,y);else{var j=s.alternate;if(s.lanes===0&&(j===null||j.lanes===0)&&(j=a.lastRenderedReducer,j!==null))try{var A=a.lastRenderedState,q=j(A,l);if(y.hasEagerState=!0,y.eagerState=q,jr(q,A))return kc(s,a,y,0),rs===null&&Ul(),!1}catch{}if(l=Du(s,a,y,d),l!==null)return ea(l,s,d),yy(l,a,d),!0}return!1}function ap(s,a,l,d){if(d={lane:2,revertLane:Lp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Rh(s)){if(a)throw Error(i(479))}else a=Du(s,l,d,2),a!==null&&ea(a,s,2)}function Rh(s){var a=s.alternate;return s===vn||a!==null&&a===vn}function vy(s,a){Rc=kh=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function yy(s,a,l){if((l&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,l|=d,a.lanes=l,ms(s,l)}}var Wu={readContext:Fs,use:Th,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useLayoutEffect:Ts,useInsertionEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useSyncExternalStore:Ts,useId:Ts,useHostTransitionStatus:Ts,useFormState:Ts,useActionState:Ts,useOptimistic:Ts,useMemoCache:Ts,useCacheRefresh:Ts};Wu.useEffectEvent=Ts;var by={readContext:Fs,use:Th,useCallback:function(s,a){return Br().memoizedState=[s,a===void 0?null:a],s},useContext:Fs,useEffect:ny,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Ch(4194308,4,iy.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Ch(4194308,4,s,a)},useInsertionEffect:function(s,a){Ch(4,2,s,a)},useMemo:function(s,a){var l=Br();a=a===void 0?null:a;var d=s();if(Gl){St(!0);try{s()}finally{St(!1)}}return l.memoizedState=[d,a],d},useReducer:function(s,a,l){var d=Br();if(l!==void 0){var y=l(a);if(Gl){St(!0);try{l(a)}finally{St(!1)}}}else y=a;return d.memoizedState=d.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},d.queue=s,s=s.dispatch=Z_.bind(null,vn,s),[d.memoizedState,s]},useRef:function(s){var a=Br();return s={current:s},a.memoizedState=s},useState:function(s){s=Jm(s);var a=s.queue,l=gy.bind(null,vn,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:tp,useDeferredValue:function(s,a){var l=Br();return np(l,s,a)},useTransition:function(){var s=Jm(!1);return s=dy.bind(null,vn,s.queue,!0,!1),Br().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var d=vn,y=Br();if(wn){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),rs===null)throw Error(i(349));(Cn&127)!==0||U0(d,a,l)}y.memoizedState=l;var j={value:l,getSnapshot:a};return y.queue=j,ny(z0.bind(null,d,j,s),[s]),d.flags|=2048,Dc(9,{destroy:void 0},F0.bind(null,d,j,l,a),null),l},useId:function(){var s=Br(),a=rs.identifierPrefix;if(wn){var l=Aa,d=ca;l=(d&~(1<<32-wt(d)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Nh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=$_++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:rp,useFormState:X0,useActionState:X0,useOptimistic:function(s){var a=Br();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=ap.bind(null,vn,!0,l),l.dispatch=a,[s,a]},useMemoCache:Ym,useCacheRefresh:function(){return Br().memoizedState=J_.bind(null,vn)},useEffectEvent:function(s){var a=Br(),l={impl:s};return a.memoizedState=l,function(){if((qn&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},ip={readContext:Fs,use:Th,useCallback:ly,useContext:Fs,useEffect:ep,useImperativeHandle:oy,useInsertionEffect:ry,useLayoutEffect:ay,useMemo:cy,useReducer:Eh,useRef:ty,useState:function(){return Eh(so)},useDebugValue:tp,useDeferredValue:function(s,a){var l=Is();return uy(l,es.memoizedState,s,a)},useTransition:function(){var s=Eh(so)[0],a=Is().memoizedState;return[typeof s=="boolean"?s:zu(s),a]},useSyncExternalStore:V0,useId:my,useHostTransitionStatus:rp,useFormState:J0,useActionState:J0,useOptimistic:function(s,a){var l=Is();return H0(l,es,s,a)},useMemoCache:Ym,useCacheRefresh:py};ip.useEffectEvent=sy;var xy={readContext:Fs,use:Th,useCallback:ly,useContext:Fs,useEffect:ep,useImperativeHandle:oy,useInsertionEffect:ry,useLayoutEffect:ay,useMemo:cy,useReducer:Xm,useRef:ty,useState:function(){return Xm(so)},useDebugValue:tp,useDeferredValue:function(s,a){var l=Is();return es===null?np(l,s,a):uy(l,es.memoizedState,s,a)},useTransition:function(){var s=Xm(so)[0],a=Is().memoizedState;return[typeof s=="boolean"?s:zu(s),a]},useSyncExternalStore:V0,useId:my,useHostTransitionStatus:rp,useFormState:ey,useActionState:ey,useOptimistic:function(s,a){var l=Is();return es!==null?H0(l,es,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Ym,useCacheRefresh:py};xy.useEffectEvent=sy;function op(s,a,l,d){a=s.memoizedState,l=l(d,a),l=l==null?a:S({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var lp={enqueueSetState:function(s,a,l){s=s._reactInternals;var d=va(),y=zs(d);y.payload=a,l!=null&&(y.callback=l),a=Zn(s,y,d),a!==null&&(ea(a,s,d),Ja(a,s,d))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var d=va(),y=zs(d);y.tag=1,y.payload=a,l!=null&&(y.callback=l),a=Zn(s,y,d),a!==null&&(ea(a,s,d),Ja(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=va(),d=zs(l);d.tag=2,a!=null&&(d.callback=a),a=Zn(s,d,l),a!==null&&(ea(a,s,l),Ja(a,s,l))}};function wy(s,a,l,d,y,j,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,j,A):a.prototype&&a.prototype.isPureReactComponent?!Lo(l,d)||!Lo(y,j):!0}function jy(s,a,l,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,d),a.state!==s&&lp.enqueueReplaceState(a,a.state,null)}function Kl(s,a){var l=a;if("ref"in a){l={};for(var d in a)d!=="ref"&&(l[d]=a[d])}if(s=s.defaultProps){l===a&&(l=S({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function _y(s){_c(s)}function ky(s){console.error(s)}function Ny(s){_c(s)}function Mh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function Sy(s,a,l){try{var d=s.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function cp(s,a,l){return l=zs(l),l.tag=3,l.payload={element:null},l.callback=function(){Mh(s,a)},l}function Ty(s){return s=zs(s),s.tag=3,s}function Ey(s,a,l,d){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var j=d.value;s.payload=function(){return y(j)},s.callback=function(){Sy(a,l,d)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){Sy(a,l,d),typeof y!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var q=d.stack;this.componentDidCatch(d.value,{componentStack:q!==null?q:""})})}function ek(s,a,l,d,y){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=l.alternate,a!==null&&Wo(a,l,y,!0),l=Or.current,l!==null){switch(l.tag){case 31:case 13:return Lr===null?Wh():l.alternate===null&&Es===0&&(Es=3),l.flags&=-257,l.flags|=65536,l.lanes=y,d===D?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([d]):a.add(d),Ip(s,d,y)),!1;case 22:return l.flags|=65536,d===D?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([d]):l.add(d)),Ip(s,d,y)),!1}throw Error(i(435,l.tag))}return Ip(s,d,y),Wh(),!1}if(wn)return a=Or.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,d!==Ma&&(s=Error(i(422),{cause:d}),ua(Hr(s,l)))):(d!==Ma&&(a=Error(i(423),{cause:d}),ua(Hr(a,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,d=Hr(d,l),y=cp(s.stateNode,d,y),da(s,y),Es!==4&&(Es=2)),!1;var j=Error(i(520),{cause:d});if(j=Hr(j,l),Ju===null?Ju=[j]:Ju.push(j),Es!==4&&(Es=2),a===null)return!0;d=Hr(d,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=cp(l.stateNode,d,s),da(l,s),!1;case 1:if(a=l.type,j=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Jo===null||!Jo.has(j))))return l.flags|=65536,y&=-y,l.lanes|=y,y=Ty(y),Ey(y,s,l,d),da(l,y),!1}l=l.return}while(l!==null);return!1}var up=Error(i(461)),Ws=!1;function pr(s,a,l,d){a.child=s===null?gn(a,null,l,d):Gt(a,s.child,l,d)}function Cy(s,a,l,d,y){l=l.render;var j=a.ref;if("ref"in d){var A={};for(var q in d)q!=="ref"&&(A[q]=d[q])}else A=d;return eo(a),d=Hm(s,a,l,A,j,y),q=$m(),s!==null&&!Ws?(Gm(s,a,y),ro(s,a,y)):(wn&&q&&Ou(a),a.flags|=1,pr(s,a,d,y),a.child)}function Ay(s,a,l,d,y){if(s===null){var j=l.type;return typeof j=="function"&&!Uo(j)&&j.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=j,Ry(s,a,j,d,y)):(s=Fl(l.type,null,d,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(j=s.child,!yp(s,y)){var A=j.memoizedProps;if(l=l.compare,l=l!==null?l:Lo,l(A,d)&&s.ref===a.ref)return ro(s,a,y)}return a.flags|=1,s=Ca(j,d),s.ref=a.ref,s.return=a,a.child=s}function Ry(s,a,l,d,y){if(s!==null){var j=s.memoizedProps;if(Lo(j,d)&&s.ref===a.ref)if(Ws=!1,a.pendingProps=d=j,yp(s,y))(s.flags&131072)!==0&&(Ws=!0);else return a.lanes=s.lanes,ro(s,a,y)}return dp(s,a,l,d,y)}function My(s,a,l,d){var y=d.children,j=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(j=j!==null?j.baseLanes|l:l,s!==null){for(d=a.child=s.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~j}else d=0,a.child=null;return Dy(s,a,j,l,d)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&v(a,j!==null?j.cachePool:null),j!==null?fa(a,j):In(),O0(a);else return d=a.lanes=536870912,Dy(s,a,j!==null?j.baseLanes|l:l,l,d)}else j!==null?(v(a,j.cachePool),fa(a,j),Ko(),a.memoizedState=null):(s!==null&&v(a,null),In(),Ko());return pr(s,a,y,l),a.child}function Hu(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Dy(s,a,l,d,y){var j=f();return j=j===null?null:{parent:Ss._currentValue,pool:j},a.memoizedState={baseLanes:l,cachePool:j},s!==null&&v(a,null),In(),O0(a),s!==null&&Wo(s,a,d,!0),a.childLanes=y,null}function Dh(s,a){return a=Ph({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Iy(s,a,l){return Gt(a,s.child,null,l),s=Dh(a,a.pendingProps),s.flags|=2,ma(a),a.memoizedState=null,s}function tk(s,a,l){var d=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(wn){if(d.mode==="hidden")return s=Dh(a,d),a.lanes=536870912,Hu(null,s);if(qm(a),(s=En)?(s=$1(s,zn),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:_i!==null?{id:ca,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},l=zl(s),l.return=a,a.child=l,Rs=a,En=null)):s=null,s===null)throw Zs(a);return a.lanes=536870912,null}return Dh(a,d)}var j=s.memoizedState;if(j!==null){var A=j.dehydrated;if(qm(a),y)if(a.flags&256)a.flags&=-257,a=Iy(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Ws||Wo(s,a,l,!1),y=(l&s.childLanes)!==0,Ws||y){if(d=rs,d!==null&&(A=sr(d,l),A!==0&&A!==j.retryLane))throw j.retryLane=A,wi(s,A),ea(d,s,A),up;Wh(),a=Iy(s,a,l)}else s=j.treeContext,En=Oa(A.nextSibling),Rs=a,wn=!0,Ir=null,zn=!1,s!==null&&Ra(a,s),a=Dh(a,d),a.flags|=4096;return a}return s=Ca(s.child,{mode:d.mode,children:d.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Ih(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function dp(s,a,l,d,y){return eo(a),l=Hm(s,a,l,d,void 0,y),d=$m(),s!==null&&!Ws?(Gm(s,a,y),ro(s,a,y)):(wn&&d&&Ou(a),a.flags|=1,pr(s,a,l,y),a.child)}function Py(s,a,l,d,y,j){return eo(a),a.updateQueue=null,l=B0(a,d,l,y),L0(s),d=$m(),s!==null&&!Ws?(Gm(s,a,j),ro(s,a,j)):(wn&&d&&Ou(a),a.flags|=1,pr(s,a,l,j),a.child)}function Oy(s,a,l,d,y){if(eo(a),a.stateNode===null){var j=Qi,A=l.contextType;typeof A=="object"&&A!==null&&(j=Fs(A)),j=new l(d,j),a.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=lp,a.stateNode=j,j._reactInternals=a,j=a.stateNode,j.props=d,j.state=a.memoizedState,j.refs={},jn(a),A=l.contextType,j.context=typeof A=="object"&&A!==null?Fs(A):Qi,j.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(op(a,l,A,d),j.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(A=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),A!==j.state&&lp.enqueueReplaceState(j,j.state,null),Pr(a,d,j,y),Kr(),j.state=a.memoizedState),typeof j.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){j=a.stateNode;var q=a.memoizedProps,oe=Kl(l,q);j.props=oe;var Ie=j.context,at=l.contextType;A=Qi,typeof at=="object"&&at!==null&&(A=Fs(at));var dt=l.getDerivedStateFromProps;at=typeof dt=="function"||typeof j.getSnapshotBeforeUpdate=="function",q=a.pendingProps!==q,at||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(q||Ie!==A)&&jy(a,j,d,A),nn=!1;var Ve=a.memoizedState;j.state=Ve,Pr(a,d,j,y),Kr(),Ie=a.memoizedState,q||Ve!==Ie||nn?(typeof dt=="function"&&(op(a,l,dt,d),Ie=a.memoizedState),(oe=nn||wy(a,l,oe,d,Ve,Ie,A))?(at||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(a.flags|=4194308)):(typeof j.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=Ie),j.props=d,j.state=Ie,j.context=A,d=oe):(typeof j.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{j=a.stateNode,_r(s,a),A=a.memoizedProps,at=Kl(l,A),j.props=at,dt=a.pendingProps,Ve=j.context,Ie=l.contextType,oe=Qi,typeof Ie=="object"&&Ie!==null&&(oe=Fs(Ie)),q=l.getDerivedStateFromProps,(Ie=typeof q=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(A!==dt||Ve!==oe)&&jy(a,j,d,oe),nn=!1,Ve=a.memoizedState,j.state=Ve,Pr(a,d,j,y),Kr();var Ge=a.memoizedState;A!==dt||Ve!==Ge||nn||s!==null&&s.dependencies!==null&&Wl(s.dependencies)?(typeof q=="function"&&(op(a,l,q,d),Ge=a.memoizedState),(at=nn||wy(a,l,at,d,Ve,Ge,oe)||s!==null&&s.dependencies!==null&&Wl(s.dependencies))?(Ie||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(d,Ge,oe),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(d,Ge,oe)),typeof j.componentDidUpdate=="function"&&(a.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof j.componentDidUpdate!="function"||A===s.memoizedProps&&Ve===s.memoizedState||(a.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Ve===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=Ge),j.props=d,j.state=Ge,j.context=oe,d=at):(typeof j.componentDidUpdate!="function"||A===s.memoizedProps&&Ve===s.memoizedState||(a.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Ve===s.memoizedState||(a.flags|=1024),d=!1)}return j=d,Ih(s,a),d=(a.flags&128)!==0,j||d?(j=a.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:j.render(),a.flags|=1,s!==null&&d?(a.child=Gt(a,s.child,null,y),a.child=Gt(a,null,l,y)):pr(s,a,l,y),a.memoizedState=j.state,s=a.child):s=ro(s,a,y),s}function Ly(s,a,l,d){return Ji(),a.flags|=256,pr(s,a,l,d),a.child}var hp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fp(s){return{baseLanes:s,cachePool:w()}}function mp(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=ga),s}function By(s,a,l){var d=a.pendingProps,y=!1,j=(a.flags&128)!==0,A;if((A=j)||(A=s!==null&&s.memoizedState===null?!1:(Ds.current&2)!==0),A&&(y=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,s===null){if(wn){if(y?Za(a):Ko(),(s=En)?(s=$1(s,zn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:_i!==null?{id:ca,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},l=zl(s),l.return=a,a.child=l,Rs=a,En=null)):s=null,s===null)throw Zs(a);return Qp(s)?a.lanes=32:a.lanes=536870912,null}var q=d.children;return d=d.fallback,y?(Ko(),y=a.mode,q=Ph({mode:"hidden",children:q},y),d=ji(d,y,l,null),q.return=a,d.return=a,q.sibling=d,a.child=q,d=a.child,d.memoizedState=fp(l),d.childLanes=mp(s,A,l),a.memoizedState=hp,Hu(null,d)):(Za(a),pp(a,q))}var oe=s.memoizedState;if(oe!==null&&(q=oe.dehydrated,q!==null)){if(j)a.flags&256?(Za(a),a.flags&=-257,a=gp(s,a,l)):a.memoizedState!==null?(Ko(),a.child=s.child,a.flags|=128,a=null):(Ko(),q=d.fallback,y=a.mode,d=Ph({mode:"visible",children:d.children},y),q=ji(q,y,l,null),q.flags|=2,d.return=a,q.return=a,d.sibling=q,a.child=d,Gt(a,s.child,null,l),d=a.child,d.memoizedState=fp(l),d.childLanes=mp(s,A,l),a.memoizedState=hp,a=Hu(null,d));else if(Za(a),Qp(q)){if(A=q.nextSibling&&q.nextSibling.dataset,A)var Ie=A.dgst;A=Ie,d=Error(i(419)),d.stack="",d.digest=A,ua({value:d,source:null,stack:null}),a=gp(s,a,l)}else if(Ws||Wo(s,a,l,!1),A=(l&s.childLanes)!==0,Ws||A){if(A=rs,A!==null&&(d=sr(A,l),d!==0&&d!==oe.retryLane))throw oe.retryLane=d,wi(s,d),ea(A,s,d),up;Yp(q)||Wh(),a=gp(s,a,l)}else Yp(q)?(a.flags|=192,a.child=s.child,a=null):(s=oe.treeContext,En=Oa(q.nextSibling),Rs=a,wn=!0,Ir=null,zn=!1,s!==null&&Ra(a,s),a=pp(a,d.children),a.flags|=4096);return a}return y?(Ko(),q=d.fallback,y=a.mode,oe=s.child,Ie=oe.sibling,d=Ca(oe,{mode:"hidden",children:d.children}),d.subtreeFlags=oe.subtreeFlags&65011712,Ie!==null?q=Ca(Ie,q):(q=ji(q,y,l,null),q.flags|=2),q.return=a,d.return=a,d.sibling=q,a.child=d,Hu(null,d),d=a.child,q=s.child.memoizedState,q===null?q=fp(l):(y=q.cachePool,y!==null?(oe=Ss._currentValue,y=y.parent!==oe?{parent:oe,pool:oe}:y):y=w(),q={baseLanes:q.baseLanes|l,cachePool:y}),d.memoizedState=q,d.childLanes=mp(s,A,l),a.memoizedState=hp,Hu(s.child,d)):(Za(a),l=s.child,s=l.sibling,l=Ca(l,{mode:"visible",children:d.children}),l.return=a,l.sibling=null,s!==null&&(A=a.deletions,A===null?(a.deletions=[s],a.flags|=16):A.push(s)),a.child=l,a.memoizedState=null,l)}function pp(s,a){return a=Ph({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Ph(s,a){return s=Js(22,s,null,a),s.lanes=0,s}function gp(s,a,l){return Gt(a,s.child,null,l),s=pp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Vy(s,a,l){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),Bu(s.return,a,l)}function vp(s,a,l,d,y,j){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:y,treeForkCount:j}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=l,A.tailMode=y,A.treeForkCount=j)}function Uy(s,a,l){var d=a.pendingProps,y=d.revealOrder,j=d.tail;d=d.children;var A=Ds.current,q=(A&2)!==0;if(q?(A=A&1|2,a.flags|=128):A&=1,Ne(Ds,A),pr(s,a,d,l),d=wn?ql:0,!q&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Vy(s,l,a);else if(s.tag===19)Vy(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=a.child,y=null;l!==null;)s=l.alternate,s!==null&&_h(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=a.child,a.child=null):(y=l.sibling,l.sibling=null),vp(a,!1,y,l,j,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&_h(s)===null){a.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}vp(a,!0,l,null,j,d);break;case"together":vp(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function ro(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),Xo|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Wo(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=Ca(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=Ca(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function yp(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Wl(s)))}function nk(s,a,l){switch(a.tag){case 3:xe(a,a.stateNode.containerInfo),Ni(a,Ss,s.memoizedState.cache),Ji();break;case 27:case 5:ot(a);break;case 4:xe(a,a.stateNode.containerInfo);break;case 10:Ni(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,qm(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Za(a),a.flags|=128,null):(l&a.child.childLanes)!==0?By(s,a,l):(Za(a),s=ro(s,a,l),s!==null?s.sibling:null);Za(a);break;case 19:var y=(s.flags&128)!==0;if(d=(l&a.childLanes)!==0,d||(Wo(s,a,l,!1),d=(l&a.childLanes)!==0),y){if(d)return Uy(s,a,l);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ne(Ds,Ds.current),d)break;return null;case 22:return a.lanes=0,My(s,a,l,a.pendingProps);case 24:Ni(a,Ss,s.memoizedState.cache)}return ro(s,a,l)}function Fy(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)Ws=!0;else{if(!yp(s,l)&&(a.flags&128)===0)return Ws=!1,nk(s,a,l);Ws=(s.flags&131072)!==0}else Ws=!1,wn&&(a.flags&1048576)!==0&&mr(a,ql,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(s=Z(a.elementType),a.type=s,typeof s=="function")Uo(s)?(d=Kl(s,d),a.tag=1,a=Oy(null,a,s,d,l)):(a.tag=0,a=dp(null,a,s,d,l));else{if(s!=null){var y=s.$$typeof;if(y===X){a.tag=11,a=Cy(null,a,s,d,l);break e}else if(y===B){a.tag=14,a=Ay(null,a,s,d,l);break e}}throw a=Le(s)||s,Error(i(306,a,""))}}return a;case 0:return dp(s,a,a.type,a.pendingProps,l);case 1:return d=a.type,y=Kl(d,a.pendingProps),Oy(s,a,d,y,l);case 3:e:{if(xe(a,a.stateNode.containerInfo),s===null)throw Error(i(387));d=a.pendingProps;var j=a.memoizedState;y=j.element,_r(s,a),Pr(a,d,null,l);var A=a.memoizedState;if(d=A.cache,Ni(a,Ss,d),d!==j.cache&&Vu(a,[Ss],l,!0),Kr(),d=A.element,j.isDehydrated)if(j={element:d,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=j,a.memoizedState=j,a.flags&256){a=Ly(s,a,d,l);break e}else if(d!==y){y=Hr(Error(i(424)),a),ua(y),a=Ly(s,a,d,l);break e}else for(s=a.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,En=Oa(s.firstChild),Rs=a,wn=!0,Ir=null,zn=!0,l=gn(a,null,d,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ji(),d===y){a=ro(s,a,l);break e}pr(s,a,d,l)}a=a.child}return a;case 26:return Ih(s,a),s===null?(l=J1(a.type,null,a.pendingProps,null))?a.memoizedState=l:wn||(l=a.type,s=a.pendingProps,d=Xh(Ee.current).createElement(l),d[ie]=a,d[lt]=s,gr(d,l,s),ke(d),a.stateNode=d):a.memoizedState=J1(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return ot(a),s===null&&wn&&(d=a.stateNode=Y1(a.type,a.pendingProps,Ee.current),Rs=a,zn=!0,y=En,nl(a.type)?(Xp=y,En=Oa(d.firstChild)):En=y),pr(s,a,a.pendingProps.children,l),Ih(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&wn&&((y=d=En)&&(d=Mk(d,a.type,a.pendingProps,zn),d!==null?(a.stateNode=d,Rs=a,En=Oa(d.firstChild),zn=!1,y=!0):y=!1),y||Zs(a)),ot(a),y=a.type,j=a.pendingProps,A=s!==null?s.memoizedProps:null,d=j.children,$p(y,j)?d=null:A!==null&&$p(y,A)&&(a.flags|=32),a.memoizedState!==null&&(y=Hm(s,a,G_,null,null,l),id._currentValue=y),Ih(s,a),pr(s,a,d,l),a.child;case 6:return s===null&&wn&&((s=l=En)&&(l=Dk(l,a.pendingProps,zn),l!==null?(a.stateNode=l,Rs=a,En=null,s=!0):s=!1),s||Zs(a)),null;case 13:return By(s,a,l);case 4:return xe(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=Gt(a,null,d,l):pr(s,a,d,l),a.child;case 11:return Cy(s,a,a.type,a.pendingProps,l);case 7:return pr(s,a,a.pendingProps,l),a.child;case 8:return pr(s,a,a.pendingProps.children,l),a.child;case 12:return pr(s,a,a.pendingProps.children,l),a.child;case 10:return d=a.pendingProps,Ni(a,a.type,d.value),pr(s,a,d.children,l),a.child;case 9:return y=a.type._context,d=a.pendingProps.children,eo(a),y=Fs(y),d=d(y),a.flags|=1,pr(s,a,d,l),a.child;case 14:return Ay(s,a,a.type,a.pendingProps,l);case 15:return Ry(s,a,a.type,a.pendingProps,l);case 19:return Uy(s,a,l);case 31:return tk(s,a,l);case 22:return My(s,a,l,a.pendingProps);case 24:return eo(a),d=Fs(Ss),s===null?(y=f(),y===null&&(y=rs,j=Uu(),y.pooledCache=j,j.refCount++,j!==null&&(y.pooledCacheLanes|=l),y=j),a.memoizedState={parent:d,cache:y},jn(a),Ni(a,Ss,y)):((s.lanes&l)!==0&&(_r(s,a),Pr(a,null,null,l),Kr()),y=s.memoizedState,j=a.memoizedState,y.parent!==d?(y={parent:d,cache:d},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),Ni(a,Ss,d)):(d=j.cache,Ni(a,Ss,d),d!==y.cache&&Vu(a,[Ss],l,!0))),pr(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function ao(s){s.flags|=4}function bp(s,a,l,d,y){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(m1())s.flags|=8192;else throw de=D,N}else s.flags&=-16777217}function zy(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!sb(a))if(m1())s.flags|=8192;else throw de=D,N}function Oh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?as():536870912,s.lanes|=a,Lc|=a)}function $u(s,a){if(!wn)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function us(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,d=0;if(a)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=d,s.childLanes=l,a}function sk(s,a,l){var d=a.pendingProps;switch(Ya(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return us(a),null;case 1:return us(a),null;case 3:return l=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Xa(Ss),Fe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Xi(a)?ao(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ki())),us(a),null;case 26:var y=a.type,j=a.memoizedState;return s===null?(ao(a),j!==null?(us(a),zy(a,j)):(us(a),bp(a,y,null,d,l))):j?j!==s.memoizedState?(ao(a),us(a),zy(a,j)):(us(a),a.flags&=-16777217):(s=s.memoizedProps,s!==d&&ao(a),us(a),bp(a,y,s,d,l)),null;case 27:if(Ue(a),l=Ee.current,y=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&ao(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return us(a),null}s=je.current,Xi(a)?er(a):(s=Y1(y,d,l),a.stateNode=s,ao(a))}return us(a),null;case 5:if(Ue(a),y=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&ao(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return us(a),null}if(j=je.current,Xi(a))er(a);else{var A=Xh(Ee.current);switch(j){case 1:j=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:j=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":j=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":j=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":j=A.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild);break;case"select":j=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?j.multiple=!0:d.size&&(j.size=d.size);break;default:j=typeof d.is=="string"?A.createElement(y,{is:d.is}):A.createElement(y)}}j[ie]=a,j[lt]=d;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)j.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=j;e:switch(gr(j,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ao(a)}}return us(a),bp(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&ao(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(s=Ee.current,Xi(a)){if(s=a.stateNode,l=a.memoizedProps,d=null,y=Rs,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}s[ie]=a,s=!!(s.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||B1(s.nodeValue,l)),s||Zs(a,!0)}else s=Xh(s).createTextNode(d),s[ie]=a,a.stateNode=s}return us(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(d=Xi(a),l!==null){if(s===null){if(!d)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[ie]=a}else Ji(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;us(a),s=!1}else l=ki(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(ma(a),a):(ma(a),null);if((a.flags&128)!==0)throw Error(i(558))}return us(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Xi(a),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[ie]=a}else Ji(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;us(a),y=!1}else y=ki(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(ma(a),a):(ma(a),null)}return ma(a),(a.flags&128)!==0?(a.lanes=l,a):(l=d!==null,s=s!==null&&s.memoizedState!==null,l&&(d=a.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),j=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(j=d.memoizedState.cachePool.pool),j!==y&&(d.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),Oh(a,a.updateQueue),us(a),null);case 4:return Fe(),s===null&&Fp(a.stateNode.containerInfo),us(a),null;case 10:return Xa(a.type),us(a),null;case 19:if(we(Ds),d=a.memoizedState,d===null)return us(a),null;if(y=(a.flags&128)!==0,j=d.rendering,j===null)if(y)$u(d,!1);else{if(Es!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(j=_h(s),j!==null){for(a.flags|=128,$u(d,!1),s=j.updateQueue,a.updateQueue=s,Oh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)yh(l,s),l=l.sibling;return Ne(Ds,Ds.current&1|2),wn&&Gr(a,d.treeForkCount),a.child}s=s.sibling}d.tail!==null&&mt()>Fh&&(a.flags|=128,y=!0,$u(d,!1),a.lanes=4194304)}else{if(!y)if(s=_h(j),s!==null){if(a.flags|=128,y=!0,s=s.updateQueue,a.updateQueue=s,Oh(a,s),$u(d,!0),d.tail===null&&d.tailMode==="hidden"&&!j.alternate&&!wn)return us(a),null}else 2*mt()-d.renderingStartTime>Fh&&l!==536870912&&(a.flags|=128,y=!0,$u(d,!1),a.lanes=4194304);d.isBackwards?(j.sibling=a.child,a.child=j):(s=d.last,s!==null?s.sibling=j:a.child=j,d.last=j)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=mt(),s.sibling=null,l=Ds.current,Ne(Ds,y?l&1|2:l&1),wn&&Gr(a,d.treeForkCount),s):(us(a),null);case 22:case 23:return ma(a),Ms(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(l&536870912)!==0&&(a.flags&128)===0&&(us(a),a.subtreeFlags&6&&(a.flags|=8192)):us(a),l=a.updateQueue,l!==null&&Oh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==l&&(a.flags|=2048),s!==null&&we(x),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Xa(Ss),us(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function rk(s,a){switch(Ya(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Xa(Ss),Fe(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ue(a),null;case 31:if(a.memoizedState!==null){if(ma(a),a.alternate===null)throw Error(i(340));Ji()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(ma(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ji()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return we(Ds),null;case 4:return Fe(),null;case 10:return Xa(a.type),null;case 22:case 23:return ma(a),Ms(),s!==null&&we(x),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Xa(Ss),null;case 25:return null;default:return null}}function qy(s,a){switch(Ya(a),a.tag){case 3:Xa(Ss),Fe();break;case 26:case 27:case 5:Ue(a);break;case 4:Fe();break;case 31:a.memoizedState!==null&&ma(a);break;case 13:ma(a);break;case 19:we(Ds);break;case 10:Xa(a.type);break;case 22:case 23:ma(a),Ms(),s!==null&&we(x);break;case 24:Xa(Ss)}}function Gu(s,a){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var y=d.next;l=y;do{if((l.tag&s)===s){d=void 0;var j=l.create,A=l.inst;d=j(),A.destroy=d}l=l.next}while(l!==y)}}catch(q){Xn(a,a.return,q)}}function Yo(s,a,l){try{var d=a.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var j=y.next;d=j;do{if((d.tag&s)===s){var A=d.inst,q=A.destroy;if(q!==void 0){A.destroy=void 0,y=a;var oe=l,Ie=q;try{Ie()}catch(at){Xn(y,oe,at)}}}d=d.next}while(d!==j)}}catch(at){Xn(a,a.return,at)}}function Wy(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{Yr(a,l)}catch(d){Xn(s,s.return,d)}}}function Hy(s,a,l){l.props=Kl(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(d){Xn(s,a,d)}}function Ku(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof l=="function"?s.refCleanup=l(d):l.current=d}}catch(y){Xn(s,a,y)}}function Ti(s,a){var l=s.ref,d=s.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(y){Xn(s,a,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){Xn(s,a,y)}else l.current=null}function $y(s){var a=s.type,l=s.memoizedProps,d=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(y){Xn(s,s.return,y)}}function xp(s,a,l){try{var d=s.stateNode;Sk(d,s.type,l,a),d[lt]=a}catch(y){Xn(s,s.return,y)}}function Gy(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&nl(s.type)||s.tag===4}function wp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Gy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&nl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function jp(s,a,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=aa));else if(d!==4&&(d===27&&nl(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(jp(s,a,l),s=s.sibling;s!==null;)jp(s,a,l),s=s.sibling}function Lh(s,a,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(d!==4&&(d===27&&nl(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Lh(s,a,l),s=s.sibling;s!==null;)Lh(s,a,l),s=s.sibling}function Ky(s){var a=s.stateNode,l=s.memoizedProps;try{for(var d=s.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);gr(a,d,l),a[ie]=s,a[lt]=l}catch(j){Xn(s,s.return,j)}}var io=!1,Hs=!1,_p=!1,Yy=typeof WeakSet=="function"?WeakSet:Set,ir=null;function ak(s,a){if(s=s.containerInfo,Wp=rf,s=Cu(s),wc(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var y=d.anchorOffset,j=d.focusNode;d=d.focusOffset;try{l.nodeType,j.nodeType}catch{l=null;break e}var A=0,q=-1,oe=-1,Ie=0,at=0,dt=s,Ve=null;t:for(;;){for(var Ge;dt!==l||y!==0&&dt.nodeType!==3||(q=A+y),dt!==j||d!==0&&dt.nodeType!==3||(oe=A+d),dt.nodeType===3&&(A+=dt.nodeValue.length),(Ge=dt.firstChild)!==null;)Ve=dt,dt=Ge;for(;;){if(dt===s)break t;if(Ve===l&&++Ie===y&&(q=A),Ve===j&&++at===d&&(oe=A),(Ge=dt.nextSibling)!==null)break;dt=Ve,Ve=dt.parentNode}dt=Ge}l=q===-1||oe===-1?null:{start:q,end:oe}}else l=null}l=l||{start:0,end:0}}else l=null;for(Hp={focusedElem:s,selectionRange:l},rf=!1,ir=a;ir!==null;)if(a=ir,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,ir=s;else for(;ir!==null;){switch(a=ir,j=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&j!==null){s=void 0,l=a,y=j.memoizedProps,j=j.memoizedState,d=l.stateNode;try{var Wt=Kl(l.type,y);s=d.getSnapshotBeforeUpdate(Wt,j),d.__reactInternalSnapshotBeforeUpdate=s}catch(sn){Xn(l,l.return,sn)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)Kp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Kp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,ir=s;break}ir=a.return}}function Qy(s,a,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:lo(s,l),d&4&&Gu(5,l);break;case 1:if(lo(s,l),d&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(A){Xn(l,l.return,A)}else{var y=Kl(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(y,a,s.__reactInternalSnapshotBeforeUpdate)}catch(A){Xn(l,l.return,A)}}d&64&&Wy(l),d&512&&Ku(l,l.return);break;case 3:if(lo(s,l),d&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Yr(s,a)}catch(A){Xn(l,l.return,A)}}break;case 27:a===null&&d&4&&Ky(l);case 26:case 5:lo(s,l),a===null&&d&4&&$y(l),d&512&&Ku(l,l.return);break;case 12:lo(s,l);break;case 31:lo(s,l),d&4&&Zy(s,l);break;case 13:lo(s,l),d&4&&e1(s,l),d&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=mk.bind(null,l),Ik(s,l))));break;case 22:if(d=l.memoizedState!==null||io,!d){a=a!==null&&a.memoizedState!==null||Hs,y=io;var j=Hs;io=d,(Hs=a)&&!j?co(s,l,(l.subtreeFlags&8772)!==0):lo(s,l),io=y,Hs=j}break;case 30:break;default:lo(s,l)}}function Xy(s){var a=s.alternate;a!==null&&(s.alternate=null,Xy(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Ys(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var gs=null,Qr=!1;function oo(s,a,l){for(l=l.child;l!==null;)Jy(s,a,l),l=l.sibling}function Jy(s,a,l){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Ct,l)}catch{}switch(l.tag){case 26:Hs||Ti(l,a),oo(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Hs||Ti(l,a);var d=gs,y=Qr;nl(l.type)&&(gs=l.stateNode,Qr=!1),oo(s,a,l),sd(l.stateNode),gs=d,Qr=y;break;case 5:Hs||Ti(l,a);case 6:if(d=gs,y=Qr,gs=null,oo(s,a,l),gs=d,Qr=y,gs!==null)if(Qr)try{(gs.nodeType===9?gs.body:gs.nodeName==="HTML"?gs.ownerDocument.body:gs).removeChild(l.stateNode)}catch(j){Xn(l,a,j)}else try{gs.removeChild(l.stateNode)}catch(j){Xn(l,a,j)}break;case 18:gs!==null&&(Qr?(s=gs,W1(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Hc(s)):W1(gs,l.stateNode));break;case 4:d=gs,y=Qr,gs=l.stateNode.containerInfo,Qr=!0,oo(s,a,l),gs=d,Qr=y;break;case 0:case 11:case 14:case 15:Yo(2,l,a),Hs||Yo(4,l,a),oo(s,a,l);break;case 1:Hs||(Ti(l,a),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Hy(l,a,d)),oo(s,a,l);break;case 21:oo(s,a,l);break;case 22:Hs=(d=Hs)||l.memoizedState!==null,oo(s,a,l),Hs=d;break;default:oo(s,a,l)}}function Zy(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Hc(s)}catch(l){Xn(a,a.return,l)}}}function e1(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Hc(s)}catch(l){Xn(a,a.return,l)}}function ik(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Yy),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Yy),a;default:throw Error(i(435,s.tag))}}function Bh(s,a){var l=ik(s);a.forEach(function(d){if(!l.has(d)){l.add(d);var y=pk.bind(null,s,d);d.then(y,y)}})}function Xr(s,a){var l=a.deletions;if(l!==null)for(var d=0;d<l.length;d++){var y=l[d],j=s,A=a,q=A;e:for(;q!==null;){switch(q.tag){case 27:if(nl(q.type)){gs=q.stateNode,Qr=!1;break e}break;case 5:gs=q.stateNode,Qr=!1;break e;case 3:case 4:gs=q.stateNode.containerInfo,Qr=!0;break e}q=q.return}if(gs===null)throw Error(i(160));Jy(j,A,y),gs=null,Qr=!1,j=y.alternate,j!==null&&(j.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)t1(a,s),a=a.sibling}var ei=null;function t1(s,a){var l=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Xr(a,s),Jr(s),d&4&&(Yo(3,s,s.return),Gu(3,s),Yo(5,s,s.return));break;case 1:Xr(a,s),Jr(s),d&512&&(Hs||l===null||Ti(l,l.return)),d&64&&io&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var y=ei;if(Xr(a,s),Jr(s),d&512&&(Hs||l===null||Ti(l,l.return)),d&4){var j=l!==null?l.memoizedState:null;if(d=s.memoizedState,l===null)if(d===null)if(s.stateNode===null){e:{d=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":j=y.getElementsByTagName("title")[0],(!j||j[Fn]||j[ie]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=y.createElement(d),y.head.insertBefore(j,y.querySelector("head > title"))),gr(j,d,l),j[ie]=s,ke(j),d=j;break e;case"link":var A=tb("link","href",y).get(d+(l.href||""));if(A){for(var q=0;q<A.length;q++)if(j=A[q],j.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&j.getAttribute("rel")===(l.rel==null?null:l.rel)&&j.getAttribute("title")===(l.title==null?null:l.title)&&j.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(q,1);break t}}j=y.createElement(d),gr(j,d,l),y.head.appendChild(j);break;case"meta":if(A=tb("meta","content",y).get(d+(l.content||""))){for(q=0;q<A.length;q++)if(j=A[q],j.getAttribute("content")===(l.content==null?null:""+l.content)&&j.getAttribute("name")===(l.name==null?null:l.name)&&j.getAttribute("property")===(l.property==null?null:l.property)&&j.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&j.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(q,1);break t}}j=y.createElement(d),gr(j,d,l),y.head.appendChild(j);break;default:throw Error(i(468,d))}j[ie]=s,ke(j),d=j}s.stateNode=d}else nb(y,s.type,s.stateNode);else s.stateNode=eb(y,d,s.memoizedProps);else j!==d?(j===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):j.count--,d===null?nb(y,s.type,s.stateNode):eb(y,d,s.memoizedProps)):d===null&&s.stateNode!==null&&xp(s,s.memoizedProps,l.memoizedProps)}break;case 27:Xr(a,s),Jr(s),d&512&&(Hs||l===null||Ti(l,l.return)),l!==null&&d&4&&xp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Xr(a,s),Jr(s),d&512&&(Hs||l===null||Ti(l,l.return)),s.flags&32){y=s.stateNode;try{Ns(y,"")}catch(Wt){Xn(s,s.return,Wt)}}d&4&&s.stateNode!=null&&(y=s.memoizedProps,xp(s,y,l!==null?l.memoizedProps:y)),d&1024&&(_p=!0);break;case 6:if(Xr(a,s),Jr(s),d&4){if(s.stateNode===null)throw Error(i(162));d=s.memoizedProps,l=s.stateNode;try{l.nodeValue=d}catch(Wt){Xn(s,s.return,Wt)}}break;case 3:if(ef=null,y=ei,ei=Jh(a.containerInfo),Xr(a,s),ei=y,Jr(s),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Hc(a.containerInfo)}catch(Wt){Xn(s,s.return,Wt)}_p&&(_p=!1,n1(s));break;case 4:d=ei,ei=Jh(s.stateNode.containerInfo),Xr(a,s),Jr(s),ei=d;break;case 12:Xr(a,s),Jr(s);break;case 31:Xr(a,s),Jr(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Bh(s,d)));break;case 13:Xr(a,s),Jr(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Uh=mt()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Bh(s,d)));break;case 22:y=s.memoizedState!==null;var oe=l!==null&&l.memoizedState!==null,Ie=io,at=Hs;if(io=Ie||y,Hs=at||oe,Xr(a,s),Hs=at,io=Ie,Jr(s),d&8192)e:for(a=s.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(l===null||oe||io||Hs||Yl(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){oe=l=a;try{if(j=oe.stateNode,y)A=j.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{q=oe.stateNode;var dt=oe.memoizedProps.style,Ve=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;q.style.display=Ve==null||typeof Ve=="boolean"?"":(""+Ve).trim()}}catch(Wt){Xn(oe,oe.return,Wt)}}}else if(a.tag===6){if(l===null){oe=a;try{oe.stateNode.nodeValue=y?"":oe.memoizedProps}catch(Wt){Xn(oe,oe.return,Wt)}}}else if(a.tag===18){if(l===null){oe=a;try{var Ge=oe.stateNode;y?H1(Ge,!0):H1(oe.stateNode,!1)}catch(Wt){Xn(oe,oe.return,Wt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Bh(s,l))));break;case 19:Xr(a,s),Jr(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Bh(s,d)));break;case 30:break;case 21:break;default:Xr(a,s),Jr(s)}}function Jr(s){var a=s.flags;if(a&2){try{for(var l,d=s.return;d!==null;){if(Gy(d)){l=d;break}d=d.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,j=wp(s);Lh(s,j,y);break;case 5:var A=l.stateNode;l.flags&32&&(Ns(A,""),l.flags&=-33);var q=wp(s);Lh(s,q,A);break;case 3:case 4:var oe=l.stateNode.containerInfo,Ie=wp(s);jp(s,Ie,oe);break;default:throw Error(i(161))}}catch(at){Xn(s,s.return,at)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function n1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;n1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function lo(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Qy(s,a.alternate,a),a=a.sibling}function Yl(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Yo(4,a,a.return),Yl(a);break;case 1:Ti(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Hy(a,a.return,l),Yl(a);break;case 27:sd(a.stateNode);case 26:case 5:Ti(a,a.return),Yl(a);break;case 22:a.memoizedState===null&&Yl(a);break;case 30:Yl(a);break;default:Yl(a)}s=s.sibling}}function co(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,y=s,j=a,A=j.flags;switch(j.tag){case 0:case 11:case 15:co(y,j,l),Gu(4,j);break;case 1:if(co(y,j,l),d=j,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Ie){Xn(d,d.return,Ie)}if(d=j,y=d.updateQueue,y!==null){var q=d.stateNode;try{var oe=y.shared.hiddenCallbacks;if(oe!==null)for(y.shared.hiddenCallbacks=null,y=0;y<oe.length;y++)Yn(oe[y],q)}catch(Ie){Xn(d,d.return,Ie)}}l&&A&64&&Wy(j),Ku(j,j.return);break;case 27:Ky(j);case 26:case 5:co(y,j,l),l&&d===null&&A&4&&$y(j),Ku(j,j.return);break;case 12:co(y,j,l);break;case 31:co(y,j,l),l&&A&4&&Zy(y,j);break;case 13:co(y,j,l),l&&A&4&&e1(y,j);break;case 22:j.memoizedState===null&&co(y,j,l),Ku(j,j.return);break;case 30:break;default:co(y,j,l)}a=a.sibling}}function kp(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&$l(l))}function Np(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&$l(s))}function ti(s,a,l,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)s1(s,a,l,d),a=a.sibling}function s1(s,a,l,d){var y=a.flags;switch(a.tag){case 0:case 11:case 15:ti(s,a,l,d),y&2048&&Gu(9,a);break;case 1:ti(s,a,l,d);break;case 3:ti(s,a,l,d),y&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&$l(s)));break;case 12:if(y&2048){ti(s,a,l,d),s=a.stateNode;try{var j=a.memoizedProps,A=j.id,q=j.onPostCommit;typeof q=="function"&&q(A,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(oe){Xn(a,a.return,oe)}}else ti(s,a,l,d);break;case 31:ti(s,a,l,d);break;case 13:ti(s,a,l,d);break;case 23:break;case 22:j=a.stateNode,A=a.alternate,a.memoizedState!==null?j._visibility&2?ti(s,a,l,d):Yu(s,a):j._visibility&2?ti(s,a,l,d):(j._visibility|=2,Ic(s,a,l,d,(a.subtreeFlags&10256)!==0||!1)),y&2048&&kp(A,a);break;case 24:ti(s,a,l,d),y&2048&&Np(a.alternate,a);break;default:ti(s,a,l,d)}}function Ic(s,a,l,d,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var j=s,A=a,q=l,oe=d,Ie=A.flags;switch(A.tag){case 0:case 11:case 15:Ic(j,A,q,oe,y),Gu(8,A);break;case 23:break;case 22:var at=A.stateNode;A.memoizedState!==null?at._visibility&2?Ic(j,A,q,oe,y):Yu(j,A):(at._visibility|=2,Ic(j,A,q,oe,y)),y&&Ie&2048&&kp(A.alternate,A);break;case 24:Ic(j,A,q,oe,y),y&&Ie&2048&&Np(A.alternate,A);break;default:Ic(j,A,q,oe,y)}a=a.sibling}}function Yu(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,d=a,y=d.flags;switch(d.tag){case 22:Yu(l,d),y&2048&&kp(d.alternate,d);break;case 24:Yu(l,d),y&2048&&Np(d.alternate,d);break;default:Yu(l,d)}a=a.sibling}}var Qu=8192;function Pc(s,a,l){if(s.subtreeFlags&Qu)for(s=s.child;s!==null;)r1(s,a,l),s=s.sibling}function r1(s,a,l){switch(s.tag){case 26:Pc(s,a,l),s.flags&Qu&&s.memoizedState!==null&&$k(l,ei,s.memoizedState,s.memoizedProps);break;case 5:Pc(s,a,l);break;case 3:case 4:var d=ei;ei=Jh(s.stateNode.containerInfo),Pc(s,a,l),ei=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=Qu,Qu=16777216,Pc(s,a,l),Qu=d):Pc(s,a,l));break;default:Pc(s,a,l)}}function a1(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Xu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];ir=d,o1(d,s)}a1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)i1(s),s=s.sibling}function i1(s){switch(s.tag){case 0:case 11:case 15:Xu(s),s.flags&2048&&Yo(9,s,s.return);break;case 3:Xu(s);break;case 12:Xu(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Vh(s)):Xu(s);break;default:Xu(s)}}function Vh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];ir=d,o1(d,s)}a1(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Yo(8,a,a.return),Vh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Vh(a));break;default:Vh(a)}s=s.sibling}}function o1(s,a){for(;ir!==null;){var l=ir;switch(l.tag){case 0:case 11:case 15:Yo(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:$l(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,ir=d;else e:for(l=s;ir!==null;){d=ir;var y=d.sibling,j=d.return;if(Xy(d),d===l){ir=null;break e}if(y!==null){y.return=j,ir=y;break e}ir=j}}}var ok={getCacheForType:function(s){var a=Fs(Ss),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return Fs(Ss).controller.signal}},lk=typeof WeakMap=="function"?WeakMap:Map,qn=0,rs=null,_n=null,Cn=0,Qn=0,pa=null,Qo=!1,Oc=!1,Sp=!1,uo=0,Es=0,Xo=0,Ql=0,Tp=0,ga=0,Lc=0,Ju=null,Zr=null,Ep=!1,Uh=0,l1=0,Fh=1/0,zh=null,Jo=null,tr=0,Zo=null,Bc=null,ho=0,Cp=0,Ap=null,c1=null,Zu=0,Rp=null;function va(){return(qn&2)!==0&&Cn!==0?Cn&-Cn:ne.T!==null?Lp():st()}function u1(){if(ga===0)if((Cn&536870912)===0||wn){var s=fs;fs<<=1,(fs&3932160)===0&&(fs=262144),ga=s}else ga=536870912;return s=Or.current,s!==null&&(s.flags|=32),ga}function ea(s,a,l){(s===rs&&(Qn===2||Qn===9)||s.cancelPendingCommit!==null)&&(Vc(s,0),el(s,Cn,ga,!1)),bs(s,l),((qn&2)===0||s!==rs)&&(s===rs&&((qn&2)===0&&(Ql|=l),Es===4&&el(s,Cn,ga,!1)),Ei(s))}function d1(s,a,l){if((qn&6)!==0)throw Error(i(327));var d=!l&&(a&127)===0&&(a&s.expiredLanes)===0||Gn(s,a),y=d?dk(s,a):Dp(s,a,!0),j=d;do{if(y===0){Oc&&!d&&el(s,a,0,!1);break}else{if(l=s.current.alternate,j&&!ck(l)){y=Dp(s,a,!1),j=!1;continue}if(y===2){if(j=a,s.errorRecoveryDisabledLanes&j)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var q=s;y=Ju;var oe=q.current.memoizedState.isDehydrated;if(oe&&(Vc(q,A).flags|=256),A=Dp(q,A,!1),A!==2){if(Sp&&!oe){q.errorRecoveryDisabledLanes|=j,Ql|=j,y=4;break e}j=Zr,Zr=y,j!==null&&(Zr===null?Zr=j:Zr.push.apply(Zr,j))}y=A}if(j=!1,y!==2)continue}}if(y===1){Vc(s,0),el(s,a,0,!0);break}e:{switch(d=s,j=y,j){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:el(d,a,ga,!Qo);break e;case 2:Zr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(y=Uh+300-mt(),10<y)){if(el(d,a,ga,!Qo),ss(d,0,!0)!==0)break e;ho=a,d.timeoutHandle=z1(h1.bind(null,d,l,Zr,zh,Ep,a,ga,Ql,Lc,Qo,j,"Throttled",-0,0),y);break e}h1(d,l,Zr,zh,Ep,a,ga,Ql,Lc,Qo,j,null,-0,0)}}break}while(!0);Ei(s)}function h1(s,a,l,d,y,j,A,q,oe,Ie,at,dt,Ve,Ge){if(s.timeoutHandle=-1,dt=a.subtreeFlags,dt&8192||(dt&16785408)===16785408){dt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:aa},r1(a,j,dt);var Wt=(j&62914560)===j?Uh-mt():(j&4194048)===j?l1-mt():0;if(Wt=Gk(dt,Wt),Wt!==null){ho=j,s.cancelPendingCommit=Wt(x1.bind(null,s,a,j,l,d,y,A,q,oe,at,dt,null,Ve,Ge)),el(s,j,A,!Ie);return}}x1(s,a,j,l,d,y,A,q,oe)}function ck(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var y=l[d],j=y.getSnapshot;y=y.value;try{if(!jr(j(),y))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function el(s,a,l,d){a&=~Tp,a&=~Ql,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var y=a;0<y;){var j=31-wt(y),A=1<<j;d[j]=-1,y&=~A}l!==0&&Vs(s,l,a)}function qh(){return(qn&6)===0?(ed(0),!1):!0}function Mp(){if(_n!==null){if(Qn===0)var s=_n.return;else s=_n,Qa=Zi=null,Km(s),fe=null,Pe=0,s=_n;for(;s!==null;)qy(s.alternate,s),s=s.return;_n=null}}function Vc(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Ck(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ho=0,Mp(),rs=s,_n=l=Ca(s.current,null),Cn=a,Qn=0,pa=null,Qo=!1,Oc=Gn(s,a),Sp=!1,Lc=ga=Tp=Ql=Xo=Es=0,Zr=Ju=null,Ep=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var y=31-wt(d),j=1<<y;a|=s[y],d&=~j}return uo=a,Ul(),l}function f1(s,a){vn=null,ne.H=Wu,a===_||a===R?(a=ye(),Qn=3):a===N?(a=ye(),Qn=4):Qn=a===up?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,pa=a,_n===null&&(Es=1,Mh(s,Hr(a,s.current)))}function m1(){var s=Or.current;return s===null?!0:(Cn&4194048)===Cn?Lr===null:(Cn&62914560)===Cn||(Cn&536870912)!==0?s===Lr:!1}function p1(){var s=ne.H;return ne.H=Wu,s===null?Wu:s}function g1(){var s=ne.A;return ne.A=ok,s}function Wh(){Es=4,Qo||(Cn&4194048)!==Cn&&Or.current!==null||(Oc=!0),(Xo&134217727)===0&&(Ql&134217727)===0||rs===null||el(rs,Cn,ga,!1)}function Dp(s,a,l){var d=qn;qn|=2;var y=p1(),j=g1();(rs!==s||Cn!==a)&&(zh=null,Vc(s,a)),a=!1;var A=Es;e:do try{if(Qn!==0&&_n!==null){var q=_n,oe=pa;switch(Qn){case 8:Mp(),A=6;break e;case 3:case 2:case 9:case 6:Or.current===null&&(a=!0);var Ie=Qn;if(Qn=0,pa=null,Uc(s,q,oe,Ie),l&&Oc){A=0;break e}break;default:Ie=Qn,Qn=0,pa=null,Uc(s,q,oe,Ie)}}uk(),A=Es;break}catch(at){f1(s,at)}while(!0);return a&&s.shellSuspendCounter++,Qa=Zi=null,qn=d,ne.H=y,ne.A=j,_n===null&&(rs=null,Cn=0,Ul()),A}function uk(){for(;_n!==null;)v1(_n)}function dk(s,a){var l=qn;qn|=2;var d=p1(),y=g1();rs!==s||Cn!==a?(zh=null,Fh=mt()+500,Vc(s,a)):Oc=Gn(s,a);e:do try{if(Qn!==0&&_n!==null){a=_n;var j=pa;t:switch(Qn){case 1:Qn=0,pa=null,Uc(s,a,j,1);break;case 2:case 9:if(I(j)){Qn=0,pa=null,y1(a);break}a=function(){Qn!==2&&Qn!==9||rs!==s||(Qn=7),Ei(s)},j.then(a,a);break e;case 3:Qn=7;break e;case 4:Qn=5;break e;case 7:I(j)?(Qn=0,pa=null,y1(a)):(Qn=0,pa=null,Uc(s,a,j,7));break;case 5:var A=null;switch(_n.tag){case 26:A=_n.memoizedState;case 5:case 27:var q=_n;if(A?sb(A):q.stateNode.complete){Qn=0,pa=null;var oe=q.sibling;if(oe!==null)_n=oe;else{var Ie=q.return;Ie!==null?(_n=Ie,Hh(Ie)):_n=null}break t}}Qn=0,pa=null,Uc(s,a,j,5);break;case 6:Qn=0,pa=null,Uc(s,a,j,6);break;case 8:Mp(),Es=6;break e;default:throw Error(i(462))}}hk();break}catch(at){f1(s,at)}while(!0);return Qa=Zi=null,ne.H=d,ne.A=y,qn=l,_n!==null?0:(rs=null,Cn=0,Ul(),Es)}function hk(){for(;_n!==null&&!kt();)v1(_n)}function v1(s){var a=Fy(s.alternate,s,uo);s.memoizedProps=s.pendingProps,a===null?Hh(s):_n=a}function y1(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=Py(l,a,a.pendingProps,a.type,void 0,Cn);break;case 11:a=Py(l,a,a.pendingProps,a.type.render,a.ref,Cn);break;case 5:Km(a);default:qy(l,a),a=_n=yh(a,uo),a=Fy(l,a,uo)}s.memoizedProps=s.pendingProps,a===null?Hh(s):_n=a}function Uc(s,a,l,d){Qa=Zi=null,Km(a),fe=null,Pe=0;var y=a.return;try{if(ek(s,y,a,l,Cn)){Es=1,Mh(s,Hr(l,s.current)),_n=null;return}}catch(j){if(y!==null)throw _n=y,j;Es=1,Mh(s,Hr(l,s.current)),_n=null;return}a.flags&32768?(wn||d===1?s=!0:Oc||(Cn&536870912)!==0?s=!1:(Qo=s=!0,(d===2||d===9||d===3||d===6)&&(d=Or.current,d!==null&&d.tag===13&&(d.flags|=16384))),b1(a,s)):Hh(a)}function Hh(s){var a=s;do{if((a.flags&32768)!==0){b1(a,Qo);return}s=a.return;var l=sk(a.alternate,a,uo);if(l!==null){_n=l;return}if(a=a.sibling,a!==null){_n=a;return}_n=a=s}while(a!==null);Es===0&&(Es=5)}function b1(s,a){do{var l=rk(s.alternate,s);if(l!==null){l.flags&=32767,_n=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){_n=s;return}_n=s=l}while(s!==null);Es=6,_n=null}function x1(s,a,l,d,y,j,A,q,oe){s.cancelPendingCommit=null;do $h();while(tr!==0);if((qn&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(j=a.lanes|a.childLanes,j|=Mu,ur(s,l,j,A,q,oe),s===rs&&(_n=rs=null,Cn=0),Bc=a,Zo=s,ho=l,Cp=j,Ap=y,c1=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,gk(ze,function(){return N1(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=ne.T,ne.T=null,y=be.p,be.p=2,A=qn,qn|=4;try{ak(s,a,l)}finally{qn=A,be.p=y,ne.T=d}}tr=1,w1(),j1(),_1()}}function w1(){if(tr===1){tr=0;var s=Zo,a=Bc,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null;var d=be.p;be.p=2;var y=qn;qn|=4;try{t1(a,s);var j=Hp,A=Cu(s.containerInfo),q=j.focusedElem,oe=j.selectionRange;if(A!==q&&q&&q.ownerDocument&&hh(q.ownerDocument.documentElement,q)){if(oe!==null&&wc(q)){var Ie=oe.start,at=oe.end;if(at===void 0&&(at=Ie),"selectionStart"in q)q.selectionStart=Ie,q.selectionEnd=Math.min(at,q.value.length);else{var dt=q.ownerDocument||document,Ve=dt&&dt.defaultView||window;if(Ve.getSelection){var Ge=Ve.getSelection(),Wt=q.textContent.length,sn=Math.min(oe.start,Wt),ns=oe.end===void 0?sn:Math.min(oe.end,Wt);!Ge.extend&&sn>ns&&(A=ns,ns=sn,sn=A);var Se=Eu(q,sn),ge=Eu(q,ns);if(Se&&ge&&(Ge.rangeCount!==1||Ge.anchorNode!==Se.node||Ge.anchorOffset!==Se.offset||Ge.focusNode!==ge.node||Ge.focusOffset!==ge.offset)){var Me=dt.createRange();Me.setStart(Se.node,Se.offset),Ge.removeAllRanges(),sn>ns?(Ge.addRange(Me),Ge.extend(ge.node,ge.offset)):(Me.setEnd(ge.node,ge.offset),Ge.addRange(Me))}}}}for(dt=[],Ge=q;Ge=Ge.parentNode;)Ge.nodeType===1&&dt.push({element:Ge,left:Ge.scrollLeft,top:Ge.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<dt.length;q++){var ct=dt[q];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}rf=!!Wp,Hp=Wp=null}finally{qn=y,be.p=d,ne.T=l}}s.current=a,tr=2}}function j1(){if(tr===2){tr=0;var s=Zo,a=Bc,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=ne.T,ne.T=null;var d=be.p;be.p=2;var y=qn;qn|=4;try{Qy(s,a.alternate,a)}finally{qn=y,be.p=d,ne.T=l}}tr=3}}function _1(){if(tr===4||tr===3){tr=0,Rt();var s=Zo,a=Bc,l=ho,d=c1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?tr=5:(tr=0,Bc=Zo=null,k1(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Jo=null),Xe(l),a=a.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Ct,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=ne.T,y=be.p,be.p=2,ne.T=null;try{for(var j=s.onRecoverableError,A=0;A<d.length;A++){var q=d[A];j(q.value,{componentStack:q.stack})}}finally{ne.T=a,be.p=y}}(ho&3)!==0&&$h(),Ei(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===Rp?Zu++:(Zu=0,Rp=s):Zu=0,ed(0)}}function k1(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,$l(a)))}function $h(){return w1(),j1(),_1(),N1()}function N1(){if(tr!==5)return!1;var s=Zo,a=Cp;Cp=0;var l=Xe(ho),d=ne.T,y=be.p;try{be.p=32>l?32:l,ne.T=null,l=Ap,Ap=null;var j=Zo,A=ho;if(tr=0,Bc=Zo=null,ho=0,(qn&6)!==0)throw Error(i(331));var q=qn;if(qn|=4,i1(j.current),s1(j,j.current,A,l),qn=q,ed(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Ct,j)}catch{}return!0}finally{be.p=y,ne.T=d,k1(s,a)}}function S1(s,a,l){a=Hr(l,a),a=cp(s.stateNode,a,2),s=Zn(s,a,2),s!==null&&(bs(s,2),Ei(s))}function Xn(s,a,l){if(s.tag===3)S1(s,s,l);else for(;a!==null;){if(a.tag===3){S1(a,s,l);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Jo===null||!Jo.has(d))){s=Hr(l,s),l=Ty(2),d=Zn(a,l,2),d!==null&&(Ey(l,d,a,s),bs(d,2),Ei(d));break}}a=a.return}}function Ip(s,a,l){var d=s.pingCache;if(d===null){d=s.pingCache=new lk;var y=new Set;d.set(a,y)}else y=d.get(a),y===void 0&&(y=new Set,d.set(a,y));y.has(l)||(Sp=!0,y.add(l),s=fk.bind(null,s,a,l),a.then(s,s))}function fk(s,a,l){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,rs===s&&(Cn&l)===l&&(Es===4||Es===3&&(Cn&62914560)===Cn&&300>mt()-Uh?(qn&2)===0&&Vc(s,0):Tp|=l,Lc===Cn&&(Lc=0)),Ei(s)}function T1(s,a){a===0&&(a=as()),s=wi(s,a),s!==null&&(bs(s,a),Ei(s))}function mk(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),T1(s,l)}function pk(s,a){var l=0;switch(s.tag){case 31:case 13:var d=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),T1(s,l)}function gk(s,a){return te(s,a)}var Gh=null,Fc=null,Pp=!1,Kh=!1,Op=!1,tl=0;function Ei(s){s!==Fc&&s.next===null&&(Fc===null?Gh=Fc=s:Fc=Fc.next=s),Kh=!0,Pp||(Pp=!0,yk())}function ed(s,a){if(!Op&&Kh){Op=!0;do for(var l=!1,d=Gh;d!==null;){if(s!==0){var y=d.pendingLanes;if(y===0)var j=0;else{var A=d.suspendedLanes,q=d.pingedLanes;j=(1<<31-wt(42|s)+1)-1,j&=y&~(A&~q),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(l=!0,R1(d,j))}else j=Cn,j=ss(d,d===rs?j:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(j&3)===0||Gn(d,j)||(l=!0,R1(d,j));d=d.next}while(l);Op=!1}}function vk(){E1()}function E1(){Kh=Pp=!1;var s=0;tl!==0&&Ek()&&(s=tl);for(var a=mt(),l=null,d=Gh;d!==null;){var y=d.next,j=C1(d,a);j===0?(d.next=null,l===null?Gh=y:l.next=y,y===null&&(Fc=l)):(l=d,(s!==0||(j&3)!==0)&&(Kh=!0)),d=y}tr!==0&&tr!==5||ed(s),tl!==0&&(tl=0)}function C1(s,a){for(var l=s.suspendedLanes,d=s.pingedLanes,y=s.expirationTimes,j=s.pendingLanes&-62914561;0<j;){var A=31-wt(j),q=1<<A,oe=y[A];oe===-1?((q&l)===0||(q&d)!==0)&&(y[A]=xr(q,a)):oe<=a&&(s.expiredLanes|=q),j&=~q}if(a=rs,l=Cn,l=ss(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,l===0||s===a&&(Qn===2||Qn===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&it(d),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Gn(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(d!==null&&it(d),Xe(l)){case 2:case 8:l=Qt;break;case 32:l=ze;break;case 268435456:l=gt;break;default:l=ze}return d=A1.bind(null,s),l=te(l,d),s.callbackPriority=a,s.callbackNode=l,a}return d!==null&&d!==null&&it(d),s.callbackPriority=2,s.callbackNode=null,2}function A1(s,a){if(tr!==0&&tr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if($h()&&s.callbackNode!==l)return null;var d=Cn;return d=ss(s,s===rs?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(d1(s,d,a),C1(s,mt()),s.callbackNode!=null&&s.callbackNode===l?A1.bind(null,s):null)}function R1(s,a){if($h())return null;d1(s,a,!0)}function yk(){Ak(function(){(qn&6)!==0?te(Zt,vk):E1()})}function Lp(){if(tl===0){var s=$o;s===0&&(s=Pn,Pn<<=1,(Pn&261888)===0&&(Pn=256)),tl=s}return tl}function M1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ao(""+s)}function D1(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function bk(s,a,l,d,y){if(a==="submit"&&l&&l.stateNode===y){var j=M1((y[lt]||null).action),A=d.submitter;A&&(a=(a=A[lt]||null)?M1(a.formAction):A.getAttribute("formAction"),a!==null&&(j=a,A=null));var q=new Us("action","action",null,d,y);s.push({event:q,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(tl!==0){var oe=A?D1(y,A):new FormData(y);sp(l,{pending:!0,data:oe,method:y.method,action:j},null,oe)}}else typeof j=="function"&&(q.preventDefault(),oe=A?D1(y,A):new FormData(y),sp(l,{pending:!0,data:oe,method:y.method,action:j},j,oe))},currentTarget:y}]})}}for(var Bp=0;Bp<jc.length;Bp++){var Vp=jc[Bp],xk=Vp.toLowerCase(),wk=Vp[0].toUpperCase()+Vp.slice(1);Xs(xk,"on"+wk)}Xs(mh,"onAnimationEnd"),Xs(ph,"onAnimationIteration"),Xs(gh,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(Fm,"onTransitionRun"),Xs(zm,"onTransitionStart"),Xs(Au,"onTransitionCancel"),Xs(Ru,"onTransitionEnd"),Nt("onMouseEnter",["mouseout","mouseover"]),Nt("onMouseLeave",["mouseout","mouseover"]),Nt("onPointerEnter",["pointerout","pointerover"]),Nt("onPointerLeave",["pointerout","pointerover"]),zt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zt("onBeforeInput",["compositionend","keypress","textInput","paste"]),zt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(td));function I1(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var d=s[l],y=d.event;d=d.listeners;e:{var j=void 0;if(a)for(var A=d.length-1;0<=A;A--){var q=d[A],oe=q.instance,Ie=q.currentTarget;if(q=q.listener,oe!==j&&y.isPropagationStopped())break e;j=q,y.currentTarget=Ie;try{j(y)}catch(at){_c(at)}y.currentTarget=null,j=oe}else for(A=0;A<d.length;A++){if(q=d[A],oe=q.instance,Ie=q.currentTarget,q=q.listener,oe!==j&&y.isPropagationStopped())break e;j=q,y.currentTarget=Ie;try{j(y)}catch(at){_c(at)}y.currentTarget=null,j=oe}}}}function kn(s,a){var l=a[_t];l===void 0&&(l=a[_t]=new Set);var d=s+"__bubble";l.has(d)||(P1(a,s,2,!1),l.add(d))}function Up(s,a,l){var d=0;a&&(d|=4),P1(l,s,d,a)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function Fp(s){if(!s[Yh]){s[Yh]=!0,tt.forEach(function(l){l!=="selectionchange"&&(jk.has(l)||Up(l,!1,s),Up(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Yh]||(a[Yh]=!0,Up("selectionchange",!1,a))}}function P1(s,a,l,d){switch(ub(a)){case 2:var y=Qk;break;case 8:y=Xk;break;default:y=ng}l=y.bind(null,a,l,s),y=void 0,!zi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),d?y!==void 0?s.addEventListener(a,l,{capture:!0,passive:y}):s.addEventListener(a,l,!0):y!==void 0?s.addEventListener(a,l,{passive:y}):s.addEventListener(a,l,!1)}function zp(s,a,l,d,y){var j=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var q=d.stateNode.containerInfo;if(q===y)break;if(A===4)for(A=d.return;A!==null;){var oe=A.tag;if((oe===3||oe===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;q!==null;){if(A=J(q),A===null)return;if(oe=A.tag,oe===5||oe===6||oe===26||oe===27){d=j=A;continue e}q=q.parentNode}}d=d.return}mi(function(){var Ie=j,at=zr(l),dt=[];e:{var Ve=vh.get(s);if(Ve!==void 0){var Ge=Us,Wt=s;switch(s){case"keypress":if(pi(l)===0)break e;case"keydown":case"keyup":Ge=bc;break;case"focusin":Wt="focus",Ge=vi;break;case"focusout":Wt="blur",Ge=vi;break;case"beforeblur":case"afterblur":Ge=vi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=As;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=T;break;case mh:case ph:case gh:Ge=gc;break;case Ru:Ge=K;break;case"scroll":case"scrollend":Ge=ps;break;case"wheel":Ge=qe;break;case"copy":case"cut":case"paste":Ge=vc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=Ga;break;case"toggle":case"beforetoggle":Ge=hn}var sn=(a&4)!==0,ns=!sn&&(s==="scroll"||s==="scrollend"),Se=sn?Ve!==null?Ve+"Capture":null:Ve;sn=[];for(var ge=Ie,Me;ge!==null;){var ct=ge;if(Me=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Me===null||Se===null||(ct=ia(ge,Se),ct!=null&&sn.push(nd(ge,ct,Me))),ns)break;ge=ge.return}0<sn.length&&(Ve=new Ge(Ve,Wt,null,l,at),dt.push({event:Ve,listeners:sn}))}}if((a&7)===0){e:{if(Ve=s==="mouseover"||s==="pointerover",Ge=s==="mouseout"||s==="pointerout",Ve&&l!==Rl&&(Wt=l.relatedTarget||l.fromElement)&&(J(Wt)||Wt[ft]))break e;if((Ge||Ve)&&(Ve=at.window===at?at:(Ve=at.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,Ge?(Wt=l.relatedTarget||l.toElement,Ge=Ie,Wt=Wt?J(Wt):null,Wt!==null&&(ns=c(Wt),sn=Wt.tag,Wt!==ns||sn!==5&&sn!==27&&sn!==6)&&(Wt=null)):(Ge=null,Wt=Ie),Ge!==Wt)){if(sn=pn,ct="onMouseLeave",Se="onMouseEnter",ge="mouse",(s==="pointerout"||s==="pointerover")&&(sn=Ga,ct="onPointerLeave",Se="onPointerEnter",ge="pointer"),ns=Ge==null?Ve:re(Ge),Me=Wt==null?Ve:re(Wt),Ve=new sn(ct,ge+"leave",Ge,l,at),Ve.target=ns,Ve.relatedTarget=Me,ct=null,J(at)===Ie&&(sn=new sn(Se,ge+"enter",Wt,l,at),sn.target=Me,sn.relatedTarget=ns,ct=sn),ns=ct,Ge&&Wt)t:{for(sn=_k,Se=Ge,ge=Wt,Me=0,ct=Se;ct;ct=sn(ct))Me++;ct=0;for(var Xt=ge;Xt;Xt=sn(Xt))ct++;for(;0<Me-ct;)Se=sn(Se),Me--;for(;0<ct-Me;)ge=sn(ge),ct--;for(;Me--;){if(Se===ge||ge!==null&&Se===ge.alternate){sn=Se;break t}Se=sn(Se),ge=sn(ge)}sn=null}else sn=null;Ge!==null&&O1(dt,Ve,Ge,sn,!1),Wt!==null&&ns!==null&&O1(dt,ns,Wt,sn,!0)}}e:{if(Ve=Ie?re(Ie):window,Ge=Ve.nodeName&&Ve.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Ve.type==="file")var Vn=lh;else if(ih(Ve))if(_u)Vn=dh;else{Vn=uh;var $t=Bm}else Ge=Ve.nodeName,!Ge||Ge.toLowerCase()!=="input"||Ve.type!=="checkbox"&&Ve.type!=="radio"?Ie&&qa(Ie.elementType)&&(Vn=lh):Vn=Bl;if(Vn&&(Vn=Vn(s,Ie))){ju(dt,Vn,l,at);break e}$t&&$t(s,Ve,Ie),s==="focusout"&&Ie&&Ve.type==="number"&&Ie.memoizedProps.value!=null&&Tn(Ve,"number",Ve.value)}switch($t=Ie?re(Ie):window,s){case"focusin":(ih($t)||$t.contentEditable==="true")&&(Gi=$t,Bo=Ie,yi=null);break;case"focusout":yi=Bo=Gi=null;break;case"mousedown":Vo=!0;break;case"contextmenu":case"mouseup":case"dragend":Vo=!1,fh(dt,l,at);break;case"selectionchange":if(Um)break;case"keydown":case"keyup":fh(dt,l,at)}var xn;if(On)e:{switch(s){case"compositionstart":var An="onCompositionStart";break e;case"compositionend":An="onCompositionEnd";break e;case"compositionupdate":An="onCompositionUpdate";break e}An=void 0}else $i?Ka(s,l)&&(An="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(An="onCompositionStart");An&&(Ta&&l.locale!=="ko"&&($i||An!=="onCompositionStart"?An==="onCompositionEnd"&&$i&&(xn=Ro()):(_a=at,Ml="value"in _a?_a.value:_a.textContent,$i=!0)),$t=Qh(Ie,An),0<$t.length&&(An=new Sa(An,s,null,l,at),dt.push({event:An,listeners:$t}),xn?An.data=xn:(xn=Hi(l),xn!==null&&(An.data=xn)))),(xn=qr?ah(s,l):wu(s,l))&&(An=Qh(Ie,"onBeforeInput"),0<An.length&&($t=new Sa("onBeforeInput","beforeinput",null,l,at),dt.push({event:$t,listeners:An}),$t.data=xn)),bk(dt,s,Ie,l,at)}I1(dt,a)})}function nd(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Qh(s,a){for(var l=a+"Capture",d=[];s!==null;){var y=s,j=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||j===null||(y=ia(s,l),y!=null&&d.unshift(nd(s,y,j)),y=ia(s,a),y!=null&&d.push(nd(s,y,j))),s.tag===3)return d;s=s.return}return[]}function _k(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function O1(s,a,l,d,y){for(var j=a._reactName,A=[];l!==null&&l!==d;){var q=l,oe=q.alternate,Ie=q.stateNode;if(q=q.tag,oe!==null&&oe===d)break;q!==5&&q!==26&&q!==27||Ie===null||(oe=Ie,y?(Ie=ia(l,j),Ie!=null&&A.unshift(nd(l,Ie,oe))):y||(Ie=ia(l,j),Ie!=null&&A.push(nd(l,Ie,oe)))),l=l.return}A.length!==0&&s.push({event:a,listeners:A})}var kk=/\r\n?/g,Nk=/\u0000|\uFFFD/g;function L1(s){return(typeof s=="string"?s:""+s).replace(kk,`
`).replace(Nk,"")}function B1(s,a){return a=L1(a),L1(s)===a}function ts(s,a,l,d,y,j){switch(l){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Ns(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Ns(s,""+d);break;case"className":yt(s,"class",d);break;case"tabIndex":yt(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":yt(s,l,d);break;case"style":ra(s,d,j);break;case"data":if(a!=="object"){yt(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=Ao(""+d),s.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(l==="formAction"?(a!=="input"&&ts(s,a,"name",y.name,y,null),ts(s,a,"formEncType",y.formEncType,y,null),ts(s,a,"formMethod",y.formMethod,y,null),ts(s,a,"formTarget",y.formTarget,y,null)):(ts(s,a,"encType",y.encType,y,null),ts(s,a,"method",y.method,y,null),ts(s,a,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=Ao(""+d),s.setAttribute(l,d);break;case"onClick":d!=null&&(s.onclick=aa);break;case"onScroll":d!=null&&kn("scroll",s);break;case"onScrollEnd":d!=null&&kn("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}l=Ao(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""+d):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":d===!0?s.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,d):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(l,d):s.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(l):s.setAttribute(l,d);break;case"popover":kn("beforetoggle",s),kn("toggle",s),vt(s,"popover",d);break;case"xlinkActuate":xt(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":xt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":xt(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":xt(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":xt(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":xt(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":xt(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":xt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":xt(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":vt(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Co.get(l)||l,vt(s,l,d))}}function qp(s,a,l,d,y,j){switch(l){case"style":ra(s,d,j);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof d=="string"?Ns(s,d):(typeof d=="number"||typeof d=="bigint")&&Ns(s,""+d);break;case"onScroll":d!=null&&kn("scroll",s);break;case"onScrollEnd":d!=null&&kn("scrollend",s);break;case"onClick":d!=null&&(s.onclick=aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$e.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),a=l.slice(2,y?l.length-7:void 0),j=s[lt]||null,j=j!=null?j[l]:null,typeof j=="function"&&s.removeEventListener(a,j,y),typeof d=="function")){typeof j!="function"&&j!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,d,y);break e}l in s?s[l]=d:d===!0?s.setAttribute(l,""):vt(s,l,d)}}}function gr(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kn("error",s),kn("load",s);var d=!1,y=!1,j;for(j in l)if(l.hasOwnProperty(j)){var A=l[j];if(A!=null)switch(j){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ts(s,a,j,A,l,null)}}y&&ts(s,a,"srcSet",l.srcSet,l,null),d&&ts(s,a,"src",l.src,l,null);return;case"input":kn("invalid",s);var q=j=A=y=null,oe=null,Ie=null;for(d in l)if(l.hasOwnProperty(d)){var at=l[d];if(at!=null)switch(d){case"name":y=at;break;case"type":A=at;break;case"checked":oe=at;break;case"defaultChecked":Ie=at;break;case"value":j=at;break;case"defaultValue":q=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,a));break;default:ts(s,a,d,at,l,null)}}Ui(s,j,q,oe,Ie,A,y,!1);return;case"select":kn("invalid",s),d=A=j=null;for(y in l)if(l.hasOwnProperty(y)&&(q=l[y],q!=null))switch(y){case"value":j=q;break;case"defaultValue":A=q;break;case"multiple":d=q;default:ts(s,a,y,q,l,null)}a=j,l=A,s.multiple=!!d,a!=null?cs(s,!!d,a,!1):l!=null&&cs(s,!!d,l,!0);return;case"textarea":kn("invalid",s),j=y=d=null;for(A in l)if(l.hasOwnProperty(A)&&(q=l[A],q!=null))switch(A){case"value":d=q;break;case"defaultValue":y=q;break;case"children":j=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(91));break;default:ts(s,a,A,q,l,null)}dr(s,d,y,j);return;case"option":for(oe in l)l.hasOwnProperty(oe)&&(d=l[oe],d!=null)&&(oe==="selected"?s.selected=d&&typeof d!="function"&&typeof d!="symbol":ts(s,a,oe,d,l,null));return;case"dialog":kn("beforetoggle",s),kn("toggle",s),kn("cancel",s),kn("close",s);break;case"iframe":case"object":kn("load",s);break;case"video":case"audio":for(d=0;d<td.length;d++)kn(td[d],s);break;case"image":kn("error",s),kn("load",s);break;case"details":kn("toggle",s);break;case"embed":case"source":case"link":kn("error",s),kn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ie in l)if(l.hasOwnProperty(Ie)&&(d=l[Ie],d!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ts(s,a,Ie,d,l,null)}return;default:if(qa(a)){for(at in l)l.hasOwnProperty(at)&&(d=l[at],d!==void 0&&qp(s,a,at,d,l,void 0));return}}for(q in l)l.hasOwnProperty(q)&&(d=l[q],d!=null&&ts(s,a,q,d,l,null))}function Sk(s,a,l,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,j=null,A=null,q=null,oe=null,Ie=null,at=null;for(Ge in l){var dt=l[Ge];if(l.hasOwnProperty(Ge)&&dt!=null)switch(Ge){case"checked":break;case"value":break;case"defaultValue":oe=dt;default:d.hasOwnProperty(Ge)||ts(s,a,Ge,null,d,dt)}}for(var Ve in d){var Ge=d[Ve];if(dt=l[Ve],d.hasOwnProperty(Ve)&&(Ge!=null||dt!=null))switch(Ve){case"type":j=Ge;break;case"name":y=Ge;break;case"checked":Ie=Ge;break;case"defaultChecked":at=Ge;break;case"value":A=Ge;break;case"defaultValue":q=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(i(137,a));break;default:Ge!==dt&&ts(s,a,Ve,Ge,d,dt)}}za(s,A,q,oe,Ie,at,j,y);return;case"select":Ge=A=q=Ve=null;for(j in l)if(oe=l[j],l.hasOwnProperty(j)&&oe!=null)switch(j){case"value":break;case"multiple":Ge=oe;default:d.hasOwnProperty(j)||ts(s,a,j,null,d,oe)}for(y in d)if(j=d[y],oe=l[y],d.hasOwnProperty(y)&&(j!=null||oe!=null))switch(y){case"value":Ve=j;break;case"defaultValue":q=j;break;case"multiple":A=j;default:j!==oe&&ts(s,a,y,j,d,oe)}a=q,l=A,d=Ge,Ve!=null?cs(s,!!l,Ve,!1):!!d!=!!l&&(a!=null?cs(s,!!l,a,!0):cs(s,!!l,l?[]:"",!1));return;case"textarea":Ge=Ve=null;for(q in l)if(y=l[q],l.hasOwnProperty(q)&&y!=null&&!d.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:ts(s,a,q,null,d,y)}for(A in d)if(y=d[A],j=l[A],d.hasOwnProperty(A)&&(y!=null||j!=null))switch(A){case"value":Ve=y;break;case"defaultValue":Ge=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==j&&ts(s,a,A,y,d,j)}Cr(s,Ve,Ge);return;case"option":for(var Wt in l)Ve=l[Wt],l.hasOwnProperty(Wt)&&Ve!=null&&!d.hasOwnProperty(Wt)&&(Wt==="selected"?s.selected=!1:ts(s,a,Wt,null,d,Ve));for(oe in d)Ve=d[oe],Ge=l[oe],d.hasOwnProperty(oe)&&Ve!==Ge&&(Ve!=null||Ge!=null)&&(oe==="selected"?s.selected=Ve&&typeof Ve!="function"&&typeof Ve!="symbol":ts(s,a,oe,Ve,d,Ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var sn in l)Ve=l[sn],l.hasOwnProperty(sn)&&Ve!=null&&!d.hasOwnProperty(sn)&&ts(s,a,sn,null,d,Ve);for(Ie in d)if(Ve=d[Ie],Ge=l[Ie],d.hasOwnProperty(Ie)&&Ve!==Ge&&(Ve!=null||Ge!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(i(137,a));break;default:ts(s,a,Ie,Ve,d,Ge)}return;default:if(qa(a)){for(var ns in l)Ve=l[ns],l.hasOwnProperty(ns)&&Ve!==void 0&&!d.hasOwnProperty(ns)&&qp(s,a,ns,void 0,d,Ve);for(at in d)Ve=d[at],Ge=l[at],!d.hasOwnProperty(at)||Ve===Ge||Ve===void 0&&Ge===void 0||qp(s,a,at,Ve,d,Ge);return}}for(var Se in l)Ve=l[Se],l.hasOwnProperty(Se)&&Ve!=null&&!d.hasOwnProperty(Se)&&ts(s,a,Se,null,d,Ve);for(dt in d)Ve=d[dt],Ge=l[dt],!d.hasOwnProperty(dt)||Ve===Ge||Ve==null&&Ge==null||ts(s,a,dt,Ve,d,Ge)}function V1(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Tk(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var y=l[d],j=y.transferSize,A=y.initiatorType,q=y.duration;if(j&&q&&V1(A)){for(A=0,q=y.responseEnd,d+=1;d<l.length;d++){var oe=l[d],Ie=oe.startTime;if(Ie>q)break;var at=oe.transferSize,dt=oe.initiatorType;at&&V1(dt)&&(oe=oe.responseEnd,A+=at*(oe<q?1:(q-Ie)/(oe-Ie)))}if(--d,a+=8*(j+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Wp=null,Hp=null;function Xh(s){return s.nodeType===9?s:s.ownerDocument}function U1(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F1(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function $p(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Gp=null;function Ek(){var s=window.event;return s&&s.type==="popstate"?s===Gp?!1:(Gp=s,!0):(Gp=null,!1)}var z1=typeof setTimeout=="function"?setTimeout:void 0,Ck=typeof clearTimeout=="function"?clearTimeout:void 0,q1=typeof Promise=="function"?Promise:void 0,Ak=typeof queueMicrotask=="function"?queueMicrotask:typeof q1<"u"?function(s){return q1.resolve(null).then(s).catch(Rk)}:z1;function Rk(s){setTimeout(function(){throw s})}function nl(s){return s==="head"}function W1(s,a){var l=a,d=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(d===0){s.removeChild(y),Hc(a);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")sd(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,sd(l);for(var j=l.firstChild;j;){var A=j.nextSibling,q=j.nodeName;j[Fn]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&j.rel.toLowerCase()==="stylesheet"||l.removeChild(j),j=A}}else l==="body"&&sd(s.ownerDocument.body);l=y}while(l);Hc(a)}function H1(s,a){var l=s;s=0;do{var d=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=d}while(l)}function Kp(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Kp(l),Ys(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function Mk(s,a,l,d){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Fn])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(j=s.getAttribute("rel"),j==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(j!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(j=s.getAttribute("src"),(j!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&j&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var j=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===j)return s}else return s;if(s=Oa(s.nextSibling),s===null)break}return null}function Dk(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Oa(s.nextSibling),s===null))return null;return s}function $1(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=Oa(s.nextSibling),s===null))return null;return s}function Yp(s){return s.data==="$?"||s.data==="$~"}function Qp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Ik(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var d=function(){a(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function Oa(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Xp=null;function G1(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return Oa(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function K1(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function Y1(s,a,l){switch(a=Xh(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function sd(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Ys(s)}var La=new Map,Q1=new Set;function Jh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var fo=be.d;be.d={f:Pk,r:Ok,D:Lk,C:Bk,L:Vk,m:Uk,X:zk,S:Fk,M:qk};function Pk(){var s=fo.f(),a=qh();return s||a}function Ok(s){var a=U(s);a!==null&&a.tag===5&&a.type==="form"?fy(a):fo.r(s)}var zc=typeof document>"u"?null:document;function X1(s,a,l){var d=zc;if(d&&typeof a=="string"&&a){var y=Qs(a);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Q1.has(y)||(Q1.add(y),s={rel:s,crossOrigin:l,href:a},d.querySelector(y)===null&&(a=d.createElement("link"),gr(a,"link",s),ke(a),d.head.appendChild(a)))}}function Lk(s){fo.D(s),X1("dns-prefetch",s,null)}function Bk(s,a){fo.C(s,a),X1("preconnect",s,a)}function Vk(s,a,l){fo.L(s,a,l);var d=zc;if(d&&s&&a){var y='link[rel="preload"][as="'+Qs(a)+'"]';a==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+Qs(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+Qs(l.imageSizes)+'"]')):y+='[href="'+Qs(s)+'"]';var j=y;switch(a){case"style":j=qc(s);break;case"script":j=Wc(s)}La.has(j)||(s=S({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),La.set(j,s),d.querySelector(y)!==null||a==="style"&&d.querySelector(rd(j))||a==="script"&&d.querySelector(ad(j))||(a=d.createElement("link"),gr(a,"link",s),ke(a),d.head.appendChild(a)))}}function Uk(s,a){fo.m(s,a);var l=zc;if(l&&s){var d=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Qs(d)+'"][href="'+Qs(s)+'"]',j=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=Wc(s)}if(!La.has(j)&&(s=S({rel:"modulepreload",href:s},a),La.set(j,s),l.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ad(j)))return}d=l.createElement("link"),gr(d,"link",s),ke(d),l.head.appendChild(d)}}}function Fk(s,a,l){fo.S(s,a,l);var d=zc;if(d&&s){var y=ae(d).hoistableStyles,j=qc(s);a=a||"default";var A=y.get(j);if(!A){var q={loading:0,preload:null};if(A=d.querySelector(rd(j)))q.loading=5;else{s=S({rel:"stylesheet",href:s,"data-precedence":a},l),(l=La.get(j))&&Jp(s,l);var oe=A=d.createElement("link");ke(oe),gr(oe,"link",s),oe._p=new Promise(function(Ie,at){oe.onload=Ie,oe.onerror=at}),oe.addEventListener("load",function(){q.loading|=1}),oe.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Zh(A,a,d)}A={type:"stylesheet",instance:A,count:1,state:q},y.set(j,A)}}}function zk(s,a){fo.X(s,a);var l=zc;if(l&&s){var d=ae(l).hoistableScripts,y=Wc(s),j=d.get(y);j||(j=l.querySelector(ad(y)),j||(s=S({src:s,async:!0},a),(a=La.get(y))&&Zp(s,a),j=l.createElement("script"),ke(j),gr(j,"link",s),l.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},d.set(y,j))}}function qk(s,a){fo.M(s,a);var l=zc;if(l&&s){var d=ae(l).hoistableScripts,y=Wc(s),j=d.get(y);j||(j=l.querySelector(ad(y)),j||(s=S({src:s,async:!0,type:"module"},a),(a=La.get(y))&&Zp(s,a),j=l.createElement("script"),ke(j),gr(j,"link",s),l.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},d.set(y,j))}}function J1(s,a,l,d){var y=(y=Ee.current)?Jh(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=qc(l.href),l=ae(y).hoistableStyles,d=l.get(a),d||(d={type:"style",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=qc(l.href);var j=ae(y).hoistableStyles,A=j.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(s,A),(j=y.querySelector(rd(s)))&&!j._p&&(A.instance=j,A.state.loading=5),La.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},La.set(s,l),j||Wk(y,s,l,A.state))),a&&d===null)throw Error(i(528,""));return A}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Wc(l),l=ae(y).hoistableScripts,d=l.get(a),d||(d={type:"script",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function qc(s){return'href="'+Qs(s)+'"'}function rd(s){return'link[rel="stylesheet"]['+s+"]"}function Z1(s){return S({},s,{"data-precedence":s.precedence,precedence:null})}function Wk(s,a,l,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),gr(a,"link",l),ke(a),s.head.appendChild(a))}function Wc(s){return'[src="'+Qs(s)+'"]'}function ad(s){return"script[async]"+s}function eb(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+Qs(l.href)+'"]');if(d)return a.instance=d,ke(d),d;var y=S({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),ke(d),gr(d,"style",y),Zh(d,l.precedence,s),a.instance=d;case"stylesheet":y=qc(l.href);var j=s.querySelector(rd(y));if(j)return a.state.loading|=4,a.instance=j,ke(j),j;d=Z1(l),(y=La.get(y))&&Jp(d,y),j=(s.ownerDocument||s).createElement("link"),ke(j);var A=j;return A._p=new Promise(function(q,oe){A.onload=q,A.onerror=oe}),gr(j,"link",d),a.state.loading|=4,Zh(j,l.precedence,s),a.instance=j;case"script":return j=Wc(l.src),(y=s.querySelector(ad(j)))?(a.instance=y,ke(y),y):(d=l,(y=La.get(j))&&(d=S({},l),Zp(d,y)),s=s.ownerDocument||s,y=s.createElement("script"),ke(y),gr(y,"link",d),s.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Zh(d,l.precedence,s));return a.instance}function Zh(s,a,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,j=y,A=0;A<d.length;A++){var q=d[A];if(q.dataset.precedence===a)j=q;else if(j!==y)break}j?j.parentNode.insertBefore(s,j.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Jp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Zp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var ef=null;function tb(s,a,l){if(ef===null){var d=new Map,y=ef=new Map;y.set(l,d)}else y=ef,d=y.get(l),d||(d=new Map,y.set(l,d));if(d.has(s))return d;for(d.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var j=l[y];if(!(j[Fn]||j[ie]||s==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var A=j.getAttribute(a)||"";A=s+A;var q=d.get(A);q?q.push(j):d.set(A,[j])}}return d}function nb(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function Hk(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(s=a.disabled,typeof a.precedence=="string"&&s==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function sb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function $k(s,a,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=qc(d.href),j=a.querySelector(rd(y));if(j){a=j._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=tf.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=j,ke(j);return}j=a.ownerDocument||a,d=Z1(d),(y=La.get(y))&&Jp(d,y),j=j.createElement("link"),ke(j);var A=j;A._p=new Promise(function(q,oe){A.onload=q,A.onerror=oe}),gr(j,"link",d),l.instance=j}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=tf.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var eg=0;function Gk(s,a){return s.stylesheets&&s.count===0&&sf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var d=setTimeout(function(){if(s.stylesheets&&sf(s,s.stylesheets),s.unsuspend){var j=s.unsuspend;s.unsuspend=null,j()}},6e4+a);0<s.imgBytes&&eg===0&&(eg=62500*Tk());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&sf(s,s.stylesheets),s.unsuspend)){var j=s.unsuspend;s.unsuspend=null,j()}},(s.imgBytes>eg?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var nf=null;function sf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,nf=new Map,a.forEach(Kk,s),nf=null,tf.call(s))}function Kk(s,a){if(!(a.state.loading&4)){var l=nf.get(s);if(l)var d=l.get(null);else{l=new Map,nf.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<y.length;j++){var A=y[j];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),d=A)}d&&l.set(null,d)}y=a.instance,A=y.getAttribute("data-precedence"),j=l.get(A)||d,j===d&&l.set(null,y),l.set(A,y),this.count++,d=tf.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),j?j.parentNode.insertBefore(y,j.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),a.state.loading|=4}}var id={$$typeof:le,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function Yk(s,a,l,d,y,j,A,q,oe){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ls(0),this.hiddenUpdates=ls(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=j,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=oe,this.incompleteTransitions=new Map}function rb(s,a,l,d,y,j,A,q,oe,Ie,at,dt){return s=new Yk(s,a,l,A,oe,Ie,at,dt,q),a=1,j===!0&&(a|=24),j=Js(3,null,null,a),s.current=j,j.stateNode=s,a=Uu(),a.refCount++,s.pooledCache=a,a.refCount++,j.memoizedState={element:d,isDehydrated:l,cache:a},jn(j),s}function ab(s){return s?(s=Qi,s):Qi}function ib(s,a,l,d,y,j){y=ab(y),d.context===null?d.context=y:d.pendingContext=y,d=zs(a),d.payload={element:l},j=j===void 0?null:j,j!==null&&(d.callback=j),l=Zn(s,d,a),l!==null&&(ea(l,s,a),Ja(l,s,a))}function ob(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function tg(s,a){ob(s,a),(s=s.alternate)&&ob(s,a)}function lb(s){if(s.tag===13||s.tag===31){var a=wi(s,67108864);a!==null&&ea(a,s,67108864),tg(s,67108864)}}function cb(s){if(s.tag===13||s.tag===31){var a=va();a=pe(a);var l=wi(s,a);l!==null&&ea(l,s,a),tg(s,a)}}var rf=!0;function Qk(s,a,l,d){var y=ne.T;ne.T=null;var j=be.p;try{be.p=2,ng(s,a,l,d)}finally{be.p=j,ne.T=y}}function Xk(s,a,l,d){var y=ne.T;ne.T=null;var j=be.p;try{be.p=8,ng(s,a,l,d)}finally{be.p=j,ne.T=y}}function ng(s,a,l,d){if(rf){var y=sg(d);if(y===null)zp(s,a,d,af,l),db(s,d);else if(Zk(y,s,a,l,d))d.stopPropagation();else if(db(s,d),a&4&&-1<Jk.indexOf(s)){for(;y!==null;){var j=U(y);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var A=Bn(j.pendingLanes);if(A!==0){var q=j;for(q.pendingLanes|=2,q.entangledLanes|=2;A;){var oe=1<<31-wt(A);q.entanglements[1]|=oe,A&=~oe}Ei(j),(qn&6)===0&&(Fh=mt()+500,ed(0))}}break;case 31:case 13:q=wi(j,2),q!==null&&ea(q,j,2),qh(),tg(j,2)}if(j=sg(d),j===null&&zp(s,a,d,af,l),j===y)break;y=j}y!==null&&d.stopPropagation()}else zp(s,a,d,null,l)}}function sg(s){return s=zr(s),rg(s)}var af=null;function rg(s){if(af=null,s=J(s),s!==null){var a=c(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=u(a),s!==null)return s;s=null}else if(l===31){if(s=h(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return af=s,null}function ub(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ht()){case Zt:return 2;case Qt:return 8;case ze:case Ze:return 32;case gt:return 268435456;default:return 32}default:return 32}}var ag=!1,sl=null,rl=null,al=null,od=new Map,ld=new Map,il=[],Jk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function db(s,a){switch(s){case"focusin":case"focusout":sl=null;break;case"dragenter":case"dragleave":rl=null;break;case"mouseover":case"mouseout":al=null;break;case"pointerover":case"pointerout":od.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ld.delete(a.pointerId)}}function cd(s,a,l,d,y,j){return s===null||s.nativeEvent!==j?(s={blockedOn:a,domEventName:l,eventSystemFlags:d,nativeEvent:j,targetContainers:[y]},a!==null&&(a=U(a),a!==null&&lb(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function Zk(s,a,l,d,y){switch(a){case"focusin":return sl=cd(sl,s,a,l,d,y),!0;case"dragenter":return rl=cd(rl,s,a,l,d,y),!0;case"mouseover":return al=cd(al,s,a,l,d,y),!0;case"pointerover":var j=y.pointerId;return od.set(j,cd(od.get(j)||null,s,a,l,d,y)),!0;case"gotpointercapture":return j=y.pointerId,ld.set(j,cd(ld.get(j)||null,s,a,l,d,y)),!0}return!1}function hb(s){var a=J(s.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){s.blockedOn=a,nt(s.priority,function(){cb(l)});return}}else if(a===31){if(a=h(l),a!==null){s.blockedOn=a,nt(s.priority,function(){cb(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function of(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=sg(s.nativeEvent);if(l===null){l=s.nativeEvent;var d=new l.constructor(l.type,l);Rl=d,l.target.dispatchEvent(d),Rl=null}else return a=U(l),a!==null&&lb(a),s.blockedOn=l,!1;a.shift()}return!0}function fb(s,a,l){of(s)&&l.delete(a)}function eN(){ag=!1,sl!==null&&of(sl)&&(sl=null),rl!==null&&of(rl)&&(rl=null),al!==null&&of(al)&&(al=null),od.forEach(fb),ld.forEach(fb)}function lf(s,a){s.blockedOn===a&&(s.blockedOn=null,ag||(ag=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,eN)))}var cf=null;function mb(s){cf!==s&&(cf=s,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){cf===s&&(cf=null);for(var a=0;a<s.length;a+=3){var l=s[a],d=s[a+1],y=s[a+2];if(typeof d!="function"){if(rg(d||l)===null)continue;break}var j=U(l);j!==null&&(s.splice(a,3),a-=3,sp(j,{pending:!0,data:y,method:l.method,action:d},d,y))}}))}function Hc(s){function a(oe){return lf(oe,s)}sl!==null&&lf(sl,s),rl!==null&&lf(rl,s),al!==null&&lf(al,s),od.forEach(a),ld.forEach(a);for(var l=0;l<il.length;l++){var d=il[l];d.blockedOn===s&&(d.blockedOn=null)}for(;0<il.length&&(l=il[0],l.blockedOn===null);)hb(l),l.blockedOn===null&&il.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var y=l[d],j=l[d+1],A=y[lt]||null;if(typeof j=="function")A||mb(l);else if(A){var q=null;if(j&&j.hasAttribute("formAction")){if(y=j,A=j[lt]||null)q=A.formAction;else if(rg(y)!==null)continue}else q=A.action;typeof q=="function"?l[d+1]=q:(l.splice(d,3),d-=3),mb(l)}}}function pb(){function s(j){j.canIntercept&&j.info==="react-transition"&&j.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var j=navigation.currentEntry;j&&j.url!=null&&navigation.navigate(j.url,{state:j.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function ig(s){this._internalRoot=s}uf.prototype.render=ig.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,d=va();ib(l,d,s,a,null,null)},uf.prototype.unmount=ig.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;ib(s.current,2,null,s,null,null),qh(),a[ft]=null}};function uf(s){this._internalRoot=s}uf.prototype.unstable_scheduleHydration=function(s){if(s){var a=st();s={blockedOn:null,target:s,priority:a};for(var l=0;l<il.length&&a!==0&&a<il[l].priority;l++);il.splice(l,0,s),l===0&&hb(s)}};var gb=e.version;if(gb!=="19.2.4")throw Error(i(527,gb,"19.2.4"));be.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=b(a),s=s!==null?k(s):null,s=s===null?null:s.stateNode,s};var tN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{Ct=df.inject(tN),Dt=df}catch{}}return dd.createRoot=function(s,a){if(!o(s))throw Error(i(299));var l=!1,d="",y=_y,j=ky,A=Ny;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(j=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=rb(s,1,!1,null,null,l,d,null,y,j,A,pb),s[ft]=a.current,Fp(s),new ig(a)},dd.hydrateRoot=function(s,a,l){if(!o(s))throw Error(i(299));var d=!1,y="",j=_y,A=ky,q=Ny,oe=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(j=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(q=l.onRecoverableError),l.formState!==void 0&&(oe=l.formState)),a=rb(s,1,!0,a,l??null,d,y,oe,j,A,q,pb),a.context=ab(null),l=a.current,d=va(),d=pe(d),y=zs(d),y.callback=null,Zn(l,y,d),l=d,a.current.lanes=l,bs(a,l),Ei(a),s[ft]=a.current,Fp(s),new uf(a)},dd.version="19.2.4",dd}var Sb;function hN(){if(Sb)return cg.exports;Sb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),cg.exports=dN(),cg.exports}var fN=hN();var Tb="popstate";function mN(r={}){function e(i,o){let{pathname:c,search:u,hash:h}=i.location;return Yg("",{pathname:c,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:Dd(o)}return gN(e,t,null,r)}function ys(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ua(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pN(){return Math.random().toString(36).substring(2,10)}function Eb(r,e){return{usr:r.state,key:r.key,idx:e}}function Yg(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?hu(e):e,state:t,key:e&&e.key||i||pN()}}function Dd({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function hu(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function gN(r,e,t,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,u=o.history,h="POP",m=null,b=k();b==null&&(b=0,u.replaceState({...u.state,idx:b},""));function k(){return(u.state||{idx:null}).idx}function S(){h="POP";let P=k(),ee=P==null?null:P-b;b=P,m&&m({action:h,location:V.location,delta:ee})}function E(P,ee){h="PUSH";let $=Yg(V.location,P,ee);b=k()+1;let le=Eb($,b),X=V.createHref($);try{u.pushState(le,"",X)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;o.location.assign(X)}c&&m&&m({action:h,location:V.location,delta:1})}function F(P,ee){h="REPLACE";let $=Yg(V.location,P,ee);b=k();let le=Eb($,b),X=V.createHref($);u.replaceState(le,"",X),c&&m&&m({action:h,location:V.location,delta:0})}function L(P){return vN(P)}let V={get action(){return h},get location(){return r(o,u)},listen(P){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Tb,S),m=P,()=>{o.removeEventListener(Tb,S),m=null}},createHref(P){return e(o,P)},createURL:L,encodeLocation(P){let ee=L(P);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:E,replace:F,go(P){return u.go(P)}};return V}function vN(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ys(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Dd(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function M2(r,e,t="/"){return yN(r,e,t,!1)}function yN(r,e,t,i){let o=typeof e=="string"?hu(e):e,c=wo(o.pathname||"/",t);if(c==null)return null;let u=D2(r);bN(u);let h=null;for(let m=0;h==null&&m<u.length;++m){let b=AN(c);h=EN(u[m],b,i)}return h}function D2(r,e=[],t=[],i="",o=!1){let c=(u,h,m=o,b)=>{let k={relativePath:b===void 0?u.path||"":b,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(k.relativePath.startsWith("/")){if(!k.relativePath.startsWith(i)&&m)return;ys(k.relativePath.startsWith(i),`Absolute route path "${k.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),k.relativePath=k.relativePath.slice(i.length)}let S=yo([i,k.relativePath]),E=t.concat(k);u.children&&u.children.length>0&&(ys(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),D2(u.children,e,E,S,m)),!(u.path==null&&!u.index)&&e.push({path:S,score:SN(S,u.index),routesMeta:E})};return r.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))c(u,h);else for(let m of I2(u.path))c(u,h,!0,m)}),e}function I2(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let u=I2(i.join("/")),h=[];return h.push(...u.map(m=>m===""?c:[c,m].join("/"))),o&&h.push(...u),h.map(m=>r.startsWith("/")&&m===""?"/":m)}function bN(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:TN(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var xN=/^:[\w-]+$/,wN=3,jN=2,_N=1,kN=10,NN=-2,Cb=r=>r==="*";function SN(r,e){let t=r.split("/"),i=t.length;return t.some(Cb)&&(i+=NN),e&&(i+=jN),t.filter(o=>!Cb(o)).reduce((o,c)=>o+(xN.test(c)?wN:c===""?_N:kN),i)}function TN(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function EN(r,e,t=!1){let{routesMeta:i}=r,o={},c="/",u=[];for(let h=0;h<i.length;++h){let m=i[h],b=h===i.length-1,k=c==="/"?e:e.slice(c.length)||"/",S=Hf({path:m.relativePath,caseSensitive:m.caseSensitive,end:b},k),E=m.route;if(!S&&b&&t&&!i[i.length-1].route.index&&(S=Hf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},k)),!S)return null;Object.assign(o,S.params),u.push({params:o,pathname:yo([c,S.pathname]),pathnameBase:IN(yo([c,S.pathnameBase])),route:E}),S.pathnameBase!=="/"&&(c=yo([c,S.pathnameBase]))}return u}function Hf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=CN(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let c=o[0],u=c.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((b,{paramName:k,isOptional:S},E)=>{if(k==="*"){let L=h[E]||"";u=c.slice(0,c.length-L.length).replace(/(.)\/+$/,"$1")}const F=h[E];return S&&!F?b[k]=void 0:b[k]=(F||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:u,pattern:r}}function CN(r,e=!1,t=!0){Ua(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,m)=>(i.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function AN(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ua(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function wo(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}var RN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function MN(r,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?hu(r):r,c;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?c=Ab(t.substring(1),"/"):c=Ab(t,e)):c=e,{pathname:c,search:PN(i),hash:ON(o)}}function Ab(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function fg(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Cv(r){let e=DN(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Av(r,e,t,i=!1){let o;typeof r=="string"?o=hu(r):(o={...r},ys(!o.pathname||!o.pathname.includes("?"),fg("?","pathname","search",o)),ys(!o.pathname||!o.pathname.includes("#"),fg("#","pathname","hash",o)),ys(!o.search||!o.search.includes("#"),fg("#","search","hash",o)));let c=r===""||o.pathname==="",u=c?"/":o.pathname,h;if(u==null)h=t;else{let S=e.length-1;if(!i&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),S-=1;o.pathname=E.join("/")}h=S>=0?e[S]:"/"}let m=MN(o,h),b=u&&u!=="/"&&u.endsWith("/"),k=(c||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(b||k)&&(m.pathname+="/"),m}var yo=r=>r.join("/").replace(/\/\/+/g,"/"),IN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),PN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ON=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,LN=class{constructor(r,e,t,i=!1){this.status=r,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function BN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function VN(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var P2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function O2(r,e){let t=r;if(typeof t!="string"||!RN.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,o=!1;if(P2)try{let c=new URL(window.location.href),u=t.startsWith("//")?new URL(c.protocol+t):new URL(t),h=wo(u.pathname,e);u.origin===c.origin&&h!=null?t=h+u.search+u.hash:o=!0}catch{Ua(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var L2=["POST","PUT","PATCH","DELETE"];new Set(L2);var UN=["GET",...L2];new Set(UN);var fu=C.createContext(null);fu.displayName="DataRouter";var fm=C.createContext(null);fm.displayName="DataRouterState";var FN=C.createContext(!1),B2=C.createContext({isTransitioning:!1});B2.displayName="ViewTransition";var zN=C.createContext(new Map);zN.displayName="Fetchers";var qN=C.createContext(null);qN.displayName="Await";var wa=C.createContext(null);wa.displayName="Navigation";var Hd=C.createContext(null);Hd.displayName="Location";var Bi=C.createContext({outlet:null,matches:[],isDataRoute:!1});Bi.displayName="Route";var Rv=C.createContext(null);Rv.displayName="RouteError";var V2="REACT_ROUTER_ERROR",WN="REDIRECT",HN="ROUTE_ERROR_RESPONSE";function $N(r){if(r.startsWith(`${V2}:${WN}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function GN(r){if(r.startsWith(`${V2}:${HN}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new LN(e.status,e.statusText,e.data)}catch{}}function KN(r,{relative:e}={}){ys(mu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=C.useContext(wa),{hash:o,pathname:c,search:u}=$d(r,{relative:e}),h=c;return t!=="/"&&(h=c==="/"?t:yo([t,c])),i.createHref({pathname:h,search:u,hash:o})}function mu(){return C.useContext(Hd)!=null}function di(){return ys(mu(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Hd).location}var U2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function F2(r){C.useContext(wa).static||C.useLayoutEffect(r)}function hs(){let{isDataRoute:r}=C.useContext(Bi);return r?oS():YN()}function YN(){ys(mu(),"useNavigate() may be used only in the context of a <Router> component.");let r=C.useContext(fu),{basename:e,navigator:t}=C.useContext(wa),{matches:i}=C.useContext(Bi),{pathname:o}=di(),c=JSON.stringify(Cv(i)),u=C.useRef(!1);return F2(()=>{u.current=!0}),C.useCallback((m,b={})=>{if(Ua(u.current,U2),!u.current)return;if(typeof m=="number"){t.go(m);return}let k=Av(m,JSON.parse(c),o,b.relative==="path");r==null&&e!=="/"&&(k.pathname=k.pathname==="/"?e:yo([e,k.pathname])),(b.replace?t.replace:t.push)(k,b.state,b)},[e,t,c,o,r])}C.createContext(null);function $d(r,{relative:e}={}){let{matches:t}=C.useContext(Bi),{pathname:i}=di(),o=JSON.stringify(Cv(t));return C.useMemo(()=>Av(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function QN(r,e){return z2(r,e)}function z2(r,e,t,i,o){ys(mu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=C.useContext(wa),{matches:u}=C.useContext(Bi),h=u[u.length-1],m=h?h.params:{},b=h?h.pathname:"/",k=h?h.pathnameBase:"/",S=h&&h.route;{let $=S&&S.path||"";W2(b,!S||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let E=di(),F;if(e){let $=typeof e=="string"?hu(e):e;ys(k==="/"||$.pathname?.startsWith(k),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${k}" but pathname "${$.pathname}" was given in the \`location\` prop.`),F=$}else F=E;let L=F.pathname||"/",V=L;if(k!=="/"){let $=k.replace(/^\//,"").split("/");V="/"+L.replace(/^\//,"").split("/").slice($.length).join("/")}let P=M2(r,{pathname:V});Ua(S||P!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Ua(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ee=tS(P&&P.map($=>Object.assign({},$,{params:Object.assign({},m,$.params),pathname:yo([k,c.encodeLocation?c.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?k:yo([k,c.encodeLocation?c.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),u,t,i,o);return e&&ee?C.createElement(Hd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},ee):ee}function XN(){let r=iS(),e=BN(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",r),u=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:c},"ErrorBoundary")," or"," ",C.createElement("code",{style:c},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:o},t):null,u)}var JN=C.createElement(XN,null),q2=class extends C.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=GN(r.digest);t&&(r=t)}let e=r!==void 0?C.createElement(Bi.Provider,{value:this.props.routeContext},C.createElement(Rv.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?C.createElement(ZN,{error:r},e):e}};q2.contextType=FN;var mg=new WeakMap;function ZN({children:r,error:e}){let{basename:t}=C.useContext(wa);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=$N(e.digest);if(i){let o=mg.get(e);if(o)throw o;let c=O2(i.location,t);if(P2&&!mg.get(e))if(c.isExternal||i.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:i.replace}));throw mg.set(e,u),u}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return r}function eS({routeContext:r,match:e,children:t}){let i=C.useContext(fu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Bi.Provider,{value:r},t)}function tS(r,e=[],t=null,i=null,o=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let c=r,u=t?.errors;if(u!=null){let k=c.findIndex(S=>S.route.id&&u?.[S.route.id]!==void 0);ys(k>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,k+1))}let h=!1,m=-1;if(t)for(let k=0;k<c.length;k++){let S=c[k];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(m=k),S.route.id){let{loaderData:E,errors:F}=t,L=S.route.loader&&!E.hasOwnProperty(S.route.id)&&(!F||F[S.route.id]===void 0);if(S.route.lazy||L){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}let b=t&&i?(k,S)=>{i(k,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:VN(t.matches),errorInfo:S})}:void 0;return c.reduceRight((k,S,E)=>{let F,L=!1,V=null,P=null;t&&(F=u&&S.route.id?u[S.route.id]:void 0,V=S.route.errorElement||JN,h&&(m<0&&E===0?(W2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,P=null):m===E&&(L=!0,P=S.route.hydrateFallbackElement||null)));let ee=e.concat(c.slice(0,E+1)),$=()=>{let le;return F?le=V:L?le=P:S.route.Component?le=C.createElement(S.route.Component,null):S.route.element?le=S.route.element:le=k,C.createElement(eS,{match:S,routeContext:{outlet:k,matches:ee,isDataRoute:t!=null},children:le})};return t&&(S.route.ErrorBoundary||S.route.errorElement||E===0)?C.createElement(q2,{location:t.location,revalidation:t.revalidation,component:V,error:F,children:$(),routeContext:{outlet:null,matches:ee,isDataRoute:!0},onError:b}):$()},null)}function Mv(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nS(r){let e=C.useContext(fu);return ys(e,Mv(r)),e}function sS(r){let e=C.useContext(fm);return ys(e,Mv(r)),e}function rS(r){let e=C.useContext(Bi);return ys(e,Mv(r)),e}function Dv(r){let e=rS(r),t=e.matches[e.matches.length-1];return ys(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function aS(){return Dv("useRouteId")}function iS(){let r=C.useContext(Rv),e=sS("useRouteError"),t=Dv("useRouteError");return r!==void 0?r:e.errors?.[t]}function oS(){let{router:r}=nS("useNavigate"),e=Dv("useNavigate"),t=C.useRef(!1);return F2(()=>{t.current=!0}),C.useCallback(async(o,c={})=>{Ua(t.current,U2),t.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:e,...c}))},[r,e])}var Rb={};function W2(r,e,t){!e&&!Rb[r]&&(Rb[r]=!0,Ua(!1,t))}C.memo(lS);function lS({routes:r,future:e,state:t,onError:i}){return z2(r,void 0,t,i,e)}function cS({to:r,replace:e,state:t,relative:i}){ys(mu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(wa);Ua(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=C.useContext(Bi),{pathname:u}=di(),h=hs(),m=Av(r,Cv(c),u,i==="path"),b=JSON.stringify(m);return C.useEffect(()=>{h(JSON.parse(b),{replace:e,state:t,relative:i})},[h,b,i,e,t]),null}function Ps(r){ys(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uS({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:c=!1,unstable_useTransitions:u}){ys(!mu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),m=C.useMemo(()=>({basename:h,navigator:o,static:c,unstable_useTransitions:u,future:{}}),[h,o,c,u]);typeof t=="string"&&(t=hu(t));let{pathname:b="/",search:k="",hash:S="",state:E=null,key:F="default"}=t,L=C.useMemo(()=>{let V=wo(b,h);return V==null?null:{location:{pathname:V,search:k,hash:S,state:E,key:F},navigationType:i}},[h,b,k,S,E,F,i]);return Ua(L!=null,`<Router basename="${h}"> is not able to match the URL "${b}${k}${S}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:C.createElement(wa.Provider,{value:m},C.createElement(Hd.Provider,{children:e,value:L}))}function dS({children:r,location:e}){return QN(Qg(r),e)}function Qg(r,e=[]){let t=[];return C.Children.forEach(r,(i,o)=>{if(!C.isValidElement(i))return;let c=[...e,o];if(i.type===C.Fragment){t.push.apply(t,Qg(i.props.children,c));return}ys(i.type===Ps,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ys(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Qg(i.props.children,c)),t.push(u)}),t}var Cf="get",Af="application/x-www-form-urlencoded";function mm(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function hS(r){return mm(r)&&r.tagName.toLowerCase()==="button"}function fS(r){return mm(r)&&r.tagName.toLowerCase()==="form"}function mS(r){return mm(r)&&r.tagName.toLowerCase()==="input"}function pS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function gS(r,e){return r.button===0&&(!e||e==="_self")&&!pS(r)}function Xg(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let i=r[t];return e.concat(Array.isArray(i)?i.map(o=>[t,o]):[[t,i]])},[]))}function vS(r,e){let t=Xg(r);return e&&e.forEach((i,o)=>{t.has(o)||e.getAll(o).forEach(c=>{t.append(o,c)})}),t}var hf=null;function yS(){if(hf===null)try{new FormData(document.createElement("form"),0),hf=!1}catch{hf=!0}return hf}var bS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pg(r){return r!=null&&!bS.has(r)?(Ua(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Af}"`),null):r}function xS(r,e){let t,i,o,c,u;if(fS(r)){let h=r.getAttribute("action");i=h?wo(h,e):null,t=r.getAttribute("method")||Cf,o=pg(r.getAttribute("enctype"))||Af,c=new FormData(r)}else if(hS(r)||mS(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||h.getAttribute("action");if(i=m?wo(m,e):null,t=r.getAttribute("formmethod")||h.getAttribute("method")||Cf,o=pg(r.getAttribute("formenctype"))||pg(h.getAttribute("enctype"))||Af,c=new FormData(h,r),!yS()){let{name:b,type:k,value:S}=r;if(k==="image"){let E=b?`${b}.`:"";c.append(`${E}x`,"0"),c.append(`${E}y`,"0")}else b&&c.append(b,S)}}else{if(mm(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Cf,i=null,o=Af,u=r}return c&&o==="text/plain"&&(u=c,c=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Iv(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function wS(r,e,t,i){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${i}`:o.pathname=`${o.pathname}.${i}`:o.pathname==="/"?o.pathname=`_root.${i}`:e&&wo(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function jS(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _S(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function kS(r,e,t){let i=await Promise.all(r.map(async o=>{let c=e.routes[o.route.id];if(c){let u=await jS(c,t);return u.links?u.links():[]}return[]}));return ES(i.flat(1).filter(_S).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Mb(r,e,t,i,o,c){let u=(m,b)=>t[b]?m.route.id!==t[b].route.id:!0,h=(m,b)=>t[b].pathname!==m.pathname||t[b].route.path?.endsWith("*")&&t[b].params["*"]!==m.params["*"];return c==="assets"?e.filter((m,b)=>u(m,b)||h(m,b)):c==="data"?e.filter((m,b)=>{let k=i.routes[m.route.id];if(!k||!k.hasLoader)return!1;if(u(m,b)||h(m,b))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function NS(r,e,{includeHydrateFallback:t}={}){return SS(r.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function SS(r){return[...new Set(r)]}function TS(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function ES(r,e){let t=new Set;return new Set(e),r.reduce((i,o)=>{let c=JSON.stringify(TS(o));return t.has(c)||(t.add(c),i.push({key:c,link:o})),i},[])}function H2(){let r=C.useContext(fu);return Iv(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function CS(){let r=C.useContext(fm);return Iv(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Pv=C.createContext(void 0);Pv.displayName="FrameworkContext";function $2(){let r=C.useContext(Pv);return Iv(r,"You must render this element inside a <HydratedRouter> element"),r}function AS(r,e){let t=C.useContext(Pv),[i,o]=C.useState(!1),[c,u]=C.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:b,onMouseLeave:k,onTouchStart:S}=e,E=C.useRef(null);C.useEffect(()=>{if(r==="render"&&u(!0),r==="viewport"){let V=ee=>{ee.forEach($=>{u($.isIntersecting)})},P=new IntersectionObserver(V,{threshold:.5});return E.current&&P.observe(E.current),()=>{P.disconnect()}}},[r]),C.useEffect(()=>{if(i){let V=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(V)}}},[i]);let F=()=>{o(!0)},L=()=>{o(!1),u(!1)};return t?r!=="intent"?[c,E,{}]:[c,E,{onFocus:hd(h,F),onBlur:hd(m,L),onMouseEnter:hd(b,F),onMouseLeave:hd(k,L),onTouchStart:hd(S,F)}]:[!1,E,{}]}function hd(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function RS({page:r,...e}){let{router:t}=H2(),i=C.useMemo(()=>M2(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?C.createElement(DS,{page:r,matches:i,...e}):null}function MS(r){let{manifest:e,routeModules:t}=$2(),[i,o]=C.useState([]);return C.useEffect(()=>{let c=!1;return kS(r,e,t).then(u=>{c||o(u)}),()=>{c=!0}},[r,e,t]),i}function DS({page:r,matches:e,...t}){let i=di(),{future:o,manifest:c,routeModules:u}=$2(),{basename:h}=H2(),{loaderData:m,matches:b}=CS(),k=C.useMemo(()=>Mb(r,e,b,c,i,"data"),[r,e,b,c,i]),S=C.useMemo(()=>Mb(r,e,b,c,i,"assets"),[r,e,b,c,i]),E=C.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let V=new Set,P=!1;if(e.forEach($=>{let le=c.routes[$.route.id];!le||!le.hasLoader||(!k.some(X=>X.route.id===$.route.id)&&$.route.id in m&&u[$.route.id]?.shouldRevalidate||le.hasClientLoader?P=!0:V.add($.route.id))}),V.size===0)return[];let ee=wS(r,h,o.unstable_trailingSlashAwareDataRequests,"data");return P&&V.size>0&&ee.searchParams.set("_routes",e.filter($=>V.has($.route.id)).map($=>$.route.id).join(",")),[ee.pathname+ee.search]},[h,o.unstable_trailingSlashAwareDataRequests,m,i,c,k,e,r,u]),F=C.useMemo(()=>NS(S,c),[S,c]),L=MS(S);return C.createElement(C.Fragment,null,E.map(V=>C.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),F.map(V=>C.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),L.map(({key:V,link:P})=>C.createElement("link",{key:V,nonce:t.nonce,...P,crossOrigin:P.crossOrigin??t.crossOrigin})))}function IS(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var PS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{PS&&(window.__reactRouterVersion="7.13.0")}catch{}function OS({basename:r,children:e,unstable_useTransitions:t,window:i}){let o=C.useRef();o.current==null&&(o.current=mN({window:i,v5Compat:!0}));let c=o.current,[u,h]=C.useState({action:c.action,location:c.location}),m=C.useCallback(b=>{t===!1?h(b):C.startTransition(()=>h(b))},[t]);return C.useLayoutEffect(()=>c.listen(m),[c,m]),C.createElement(uS,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:c,unstable_useTransitions:t})}var G2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K2=C.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:c,replace:u,state:h,target:m,to:b,preventScrollReset:k,viewTransition:S,unstable_defaultShouldRevalidate:E,...F},L){let{basename:V,unstable_useTransitions:P}=C.useContext(wa),ee=typeof b=="string"&&G2.test(b),$=O2(b,V);b=$.to;let le=KN(b,{relative:o}),[X,Te,Re]=AS(i,F),B=US(b,{replace:u,state:h,target:m,preventScrollReset:k,relative:o,viewTransition:S,unstable_defaultShouldRevalidate:E,unstable_useTransitions:P});function O(Y){e&&e(Y),Y.defaultPrevented||B(Y)}let z=C.createElement("a",{...F,...Re,href:$.absoluteURL||le,onClick:$.isExternal||c?e:O,ref:IS(L,Te),target:m,"data-discover":!ee&&t==="render"?"true":void 0});return X&&!ee?C.createElement(C.Fragment,null,z,C.createElement(RS,{page:le})):z});K2.displayName="Link";var LS=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:c,to:u,viewTransition:h,children:m,...b},k){let S=$d(u,{relative:b.relative}),E=di(),F=C.useContext(fm),{navigator:L,basename:V}=C.useContext(wa),P=F!=null&&$S(S)&&h===!0,ee=L.encodeLocation?L.encodeLocation(S).pathname:S.pathname,$=E.pathname,le=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;t||($=$.toLowerCase(),le=le?le.toLowerCase():null,ee=ee.toLowerCase()),le&&V&&(le=wo(le,V)||le);const X=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let Te=$===ee||!o&&$.startsWith(ee)&&$.charAt(X)==="/",Re=le!=null&&(le===ee||!o&&le.startsWith(ee)&&le.charAt(ee.length)==="/"),B={isActive:Te,isPending:Re,isTransitioning:P},O=Te?e:void 0,z;typeof i=="function"?z=i(B):z=[i,Te?"active":null,Re?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let Y=typeof c=="function"?c(B):c;return C.createElement(K2,{...b,"aria-current":O,className:z,ref:k,style:Y,to:u,viewTransition:h},typeof m=="function"?m(B):m)});LS.displayName="NavLink";var BS=C.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:c,method:u=Cf,action:h,onSubmit:m,relative:b,preventScrollReset:k,viewTransition:S,unstable_defaultShouldRevalidate:E,...F},L)=>{let{unstable_useTransitions:V}=C.useContext(wa),P=WS(),ee=HS(h,{relative:b}),$=u.toLowerCase()==="get"?"get":"post",le=typeof h=="string"&&G2.test(h),X=Te=>{if(m&&m(Te),Te.defaultPrevented)return;Te.preventDefault();let Re=Te.nativeEvent.submitter,B=Re?.getAttribute("formmethod")||u,O=()=>P(Re||Te.currentTarget,{fetcherKey:e,method:B,navigate:t,replace:o,state:c,relative:b,preventScrollReset:k,viewTransition:S,unstable_defaultShouldRevalidate:E});V&&t!==!1?C.startTransition(()=>O()):O()};return C.createElement("form",{ref:L,method:$,action:ee,onSubmit:i?m:X,...F,"data-discover":!le&&r==="render"?"true":void 0})});BS.displayName="Form";function VS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Y2(r){let e=C.useContext(fu);return ys(e,VS(r)),e}function US(r,{target:e,replace:t,state:i,preventScrollReset:o,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:h,unstable_useTransitions:m}={}){let b=hs(),k=di(),S=$d(r,{relative:c});return C.useCallback(E=>{if(gS(E,e)){E.preventDefault();let F=t!==void 0?t:Dd(k)===Dd(S),L=()=>b(r,{replace:F,state:i,preventScrollReset:o,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:h});m?C.startTransition(()=>L()):L()}},[k,b,S,t,i,e,r,o,c,u,h,m])}function FS(r){Ua(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=C.useRef(Xg(r)),t=C.useRef(!1),i=di(),o=C.useMemo(()=>vS(i.search,t.current?null:e.current),[i.search]),c=hs(),u=C.useCallback((h,m)=>{const b=Xg(typeof h=="function"?h(new URLSearchParams(o)):h);t.current=!0,c("?"+b,m)},[c,o]);return[o,u]}var zS=0,qS=()=>`__${String(++zS)}__`;function WS(){let{router:r}=Y2("useSubmit"),{basename:e}=C.useContext(wa),t=aS(),i=r.fetch,o=r.navigate;return C.useCallback(async(c,u={})=>{let{action:h,method:m,encType:b,formData:k,body:S}=xS(c,e);if(u.navigate===!1){let E=u.fetcherKey||qS();await i(E,t,u.action||h,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:k,body:S,formMethod:u.method||m,formEncType:u.encType||b,flushSync:u.flushSync})}else await o(u.action||h,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:k,body:S,formMethod:u.method||m,formEncType:u.encType||b,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,o,e,t])}function HS(r,{relative:e}={}){let{basename:t}=C.useContext(wa),i=C.useContext(Bi);ys(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...$d(r||".",{relative:e})},u=di();if(r==null){c.search=u.search;let h=new URLSearchParams(c.search),m=h.getAll("index");if(m.some(k=>k==="")){h.delete("index"),m.filter(S=>S).forEach(S=>h.append("index",S));let k=h.toString();c.search=k?`?${k}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:yo([t,c.pathname])),Dd(c)}function $S(r,{relative:e}={}){let t=C.useContext(B2);ys(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Y2("useViewTransitionState"),o=$d(r,{relative:e});if(!t.isTransitioning)return!1;let c=wo(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=wo(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Hf(o.pathname,u)!=null||Hf(o.pathname,c)!=null}const GS=()=>{};var Db={};const Q2=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},KS=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[t++],u=r[t++],h=r[t++],m=((o&7)<<18|(c&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const c=r[t++],u=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},X2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const c=r[o],u=o+1<r.length,h=u?r[o+1]:0,m=o+2<r.length,b=m?r[o+2]:0,k=c>>2,S=(c&3)<<4|h>>4;let E=(h&15)<<2|b>>6,F=b&63;m||(F=64,u||(E=64)),i.push(t[k],t[S],t[E],t[F])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Q2(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):KS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const c=t[r.charAt(o++)],h=o<r.length?t[r.charAt(o)]:0;++o;const b=o<r.length?t[r.charAt(o)]:64;++o;const S=o<r.length?t[r.charAt(o)]:64;if(++o,c==null||h==null||b==null||S==null)throw new YS;const E=c<<2|h>>4;if(i.push(E),b!==64){const F=h<<4&240|b>>2;if(i.push(F),S!==64){const L=b<<6&192|S;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class YS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QS=function(r){const e=Q2(r);return X2.encodeByteArray(e,!0)},$f=function(r){return QS(r).replace(/\./g,"")},J2=function(r){try{return X2.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const JS=()=>XS().__FIREBASE_DEFAULTS__,ZS=()=>{if(typeof process>"u"||typeof Db>"u")return;const r=Db.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},eT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&J2(r[1]);return e&&JSON.parse(e)},pm=()=>{try{return GS()||JS()||ZS()||eT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Z2=r=>pm()?.emulatorHosts?.[r],ew=r=>{const e=Z2(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},tw=()=>pm()?.config,nw=r=>pm()?.[`_${r}`];class tT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Tl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ov(r){return(await fetch(r,{credentials:"include"})).ok}function sw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[$f(JSON.stringify(t)),$f(JSON.stringify(u)),""].join(".")}const Nd={};function nT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Nd))Nd[e]?r.emulator.push(e):r.prod.push(e);return r}function sT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Ib=!1;function Lv(r,e){if(typeof window>"u"||typeof document>"u"||!Tl(window.location.host)||Nd[r]===e||Nd[r]||Ib)return;Nd[r]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",c=nT().prod.length>0;function u(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,F){E.setAttribute("width","24"),E.setAttribute("id",F),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function b(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Ib=!0,u()},E}function k(E,F){E.setAttribute("id",F),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function S(){const E=sT(i),F=t("text"),L=document.getElementById(F)||document.createElement("span"),V=t("learnmore"),P=document.getElementById(V)||document.createElement("a"),ee=t("preprendIcon"),$=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const le=E.element;h(le),k(P,V);const X=b();m($,ee),le.append($,L,P,X),document.body.appendChild(le)}c?(L.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function Er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Er())}function aT(){const r=pm()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function lT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cT(){const r=Er();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function uT(){return!aT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dT(){try{return typeof indexedDB=="object"}catch{return!1}}function hT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const fT="FirebaseError";class Vi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=fT,Object.setPrototypeOf(this,Vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gd.prototype.create)}}class Gd{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?mT(c,i):"Error",h=`${this.serviceName}: ${u} (${o}).`;return new Vi(o,h,i)}}function mT(r,e){return r.replace(pT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const pT=/\{\$([^}]+)}/g;function gT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function sc(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=r[o],u=e[o];if(Pb(c)&&Pb(u)){if(!sc(c,u))return!1}else if(c!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Pb(r){return r!==null&&typeof r=="object"}function Kd(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function vd(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function yd(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function vT(r,e){const t=new yT(r,e);return t.subscribe.bind(t)}class yT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");bT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=gg),o.error===void 0&&(o.error=gg),o.complete===void 0&&(o.complete=gg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function gg(){}function _s(r){return r&&r._delegate?r._delegate:r}class xl{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zl="[DEFAULT]";class xT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new tT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jT(e))try{this.getOrInitializeService({instanceIdentifier:Zl})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=Zl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zl){return this.instances.has(e)}getOptions(e=Zl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(c);i===h&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Zl){return this.component?this.component.multipleInstances?e:Zl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wT(r){return r===Zl?void 0:r}function jT(r){return r.instantiationMode==="EAGER"}class _T{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Rn;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Rn||(Rn={}));const kT={debug:Rn.DEBUG,verbose:Rn.VERBOSE,info:Rn.INFO,warn:Rn.WARN,error:Rn.ERROR,silent:Rn.SILENT},NT=Rn.INFO,ST={[Rn.DEBUG]:"log",[Rn.VERBOSE]:"log",[Rn.INFO]:"info",[Rn.WARN]:"warn",[Rn.ERROR]:"error"},TT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=ST[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bv{constructor(e){this.name=e,this._logLevel=NT,this._logHandler=TT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rn.DEBUG,...e),this._logHandler(this,Rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rn.VERBOSE,...e),this._logHandler(this,Rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rn.INFO,...e),this._logHandler(this,Rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rn.WARN,...e),this._logHandler(this,Rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rn.ERROR,...e),this._logHandler(this,Rn.ERROR,...e)}}const ET=(r,e)=>e.some(t=>r instanceof t);let Ob,Lb;function CT(){return Ob||(Ob=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AT(){return Lb||(Lb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rw=new WeakMap,Jg=new WeakMap,aw=new WeakMap,vg=new WeakMap,Vv=new WeakMap;function RT(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",u)},c=()=>{t(gl(r.result)),o()},u=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&rw.set(t,r)}).catch(()=>{}),Vv.set(e,r),e}function MT(r){if(Jg.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",u),r.removeEventListener("abort",u)},c=()=>{t(),o()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",u),r.addEventListener("abort",u)});Jg.set(r,e)}let Zg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Jg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||aw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gl(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function DT(r){Zg=r(Zg)}function IT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(yg(this),e,...t);return aw.set(i,e.sort?e.sort():[e]),gl(i)}:AT().includes(r)?function(...e){return r.apply(yg(this),e),gl(rw.get(this))}:function(...e){return gl(r.apply(yg(this),e))}}function PT(r){return typeof r=="function"?IT(r):(r instanceof IDBTransaction&&MT(r),ET(r,CT())?new Proxy(r,Zg):r)}function gl(r){if(r instanceof IDBRequest)return RT(r);if(vg.has(r))return vg.get(r);const e=PT(r);return e!==r&&(vg.set(r,e),Vv.set(e,r)),e}const yg=r=>Vv.get(r);function OT(r,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const u=indexedDB.open(r,e),h=gl(u);return i&&u.addEventListener("upgradeneeded",m=>{i(gl(u.result),m.oldVersion,m.newVersion,gl(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{c&&m.addEventListener("close",()=>c()),o&&m.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),h}const LT=["get","getKey","getAll","getAllKeys","count"],BT=["put","add","delete","clear"],bg=new Map;function Bb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(bg.get(e))return bg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=BT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||LT.includes(t)))return;const c=async function(u,...h){const m=this.transaction(u,o?"readwrite":"readonly");let b=m.store;return i&&(b=b.index(h.shift())),(await Promise.all([b[t](...h),o&&m.done]))[0]};return bg.set(e,c),c}DT(r=>({...r,get:(e,t,i)=>Bb(e,t)||r.get(e,t,i),has:(e,t)=>!!Bb(e,t)||r.has(e,t)}));class VT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function UT(r){return r.getComponent()?.type==="VERSION"}const ev="@firebase/app",Vb="0.14.7";const jo=new Bv("@firebase/app"),FT="@firebase/app-compat",zT="@firebase/analytics-compat",qT="@firebase/analytics",WT="@firebase/app-check-compat",HT="@firebase/app-check",$T="@firebase/auth",GT="@firebase/auth-compat",KT="@firebase/database",YT="@firebase/data-connect",QT="@firebase/database-compat",XT="@firebase/functions",JT="@firebase/functions-compat",ZT="@firebase/installations",eE="@firebase/installations-compat",tE="@firebase/messaging",nE="@firebase/messaging-compat",sE="@firebase/performance",rE="@firebase/performance-compat",aE="@firebase/remote-config",iE="@firebase/remote-config-compat",oE="@firebase/storage",lE="@firebase/storage-compat",cE="@firebase/firestore",uE="@firebase/ai",dE="@firebase/firestore-compat",hE="firebase",fE="12.8.0";const tv="[DEFAULT]",mE={[ev]:"fire-core",[FT]:"fire-core-compat",[qT]:"fire-analytics",[zT]:"fire-analytics-compat",[HT]:"fire-app-check",[WT]:"fire-app-check-compat",[$T]:"fire-auth",[GT]:"fire-auth-compat",[KT]:"fire-rtdb",[YT]:"fire-data-connect",[QT]:"fire-rtdb-compat",[XT]:"fire-fn",[JT]:"fire-fn-compat",[ZT]:"fire-iid",[eE]:"fire-iid-compat",[tE]:"fire-fcm",[nE]:"fire-fcm-compat",[sE]:"fire-perf",[rE]:"fire-perf-compat",[aE]:"fire-rc",[iE]:"fire-rc-compat",[oE]:"fire-gcs",[lE]:"fire-gcs-compat",[cE]:"fire-fst",[dE]:"fire-fst-compat",[uE]:"fire-vertex","fire-js":"fire-js",[hE]:"fire-js-all"};const Gf=new Map,pE=new Map,nv=new Map;function Ub(r,e){try{r.container.addComponent(e)}catch(t){jo.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function rc(r){const e=r.name;if(nv.has(e))return jo.debug(`There were multiple attempts to register component ${e}.`),!1;nv.set(e,r);for(const t of Gf.values())Ub(t,r);for(const t of pE.values())Ub(t,r);return!0}function gm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ya(r){return r==null?!1:r.settings!==void 0}const gE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vl=new Gd("app","Firebase",gE);class vE{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vl.create("app-deleted",{appName:this._name})}}const dc=fE;function Uv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:tv,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw vl.create("bad-app-name",{appName:String(o)});if(t||(t=tw()),!t)throw vl.create("no-options");const c=Gf.get(o);if(c){if(sc(t,c.options)&&sc(i,c.config))return c;throw vl.create("duplicate-app",{appName:o})}const u=new _T(o);for(const m of nv.values())u.addComponent(m);const h=new vE(t,i,u);return Gf.set(o,h),h}function Fv(r=tv){const e=Gf.get(r);if(!e&&r===tv&&tw())return Uv();if(!e)throw vl.create("no-app",{appName:r});return e}function Ri(r,e,t){let i=mE[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jo.warn(u.join(" "));return}rc(new xl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const yE="firebase-heartbeat-database",bE=1,Id="firebase-heartbeat-store";let xg=null;function iw(){return xg||(xg=OT(yE,bE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Id)}catch(t){console.warn(t)}}}}).catch(r=>{throw vl.create("idb-open",{originalErrorMessage:r.message})})),xg}async function xE(r){try{const t=(await iw()).transaction(Id),i=await t.objectStore(Id).get(ow(r));return await t.done,i}catch(e){if(e instanceof Vi)jo.warn(e.message);else{const t=vl.create("idb-get",{originalErrorMessage:e?.message});jo.warn(t.message)}}}async function Fb(r,e){try{const i=(await iw()).transaction(Id,"readwrite");await i.objectStore(Id).put(e,ow(r)),await i.done}catch(t){if(t instanceof Vi)jo.warn(t.message);else{const i=vl.create("idb-set",{originalErrorMessage:t?.message});jo.warn(i.message)}}}function ow(r){return`${r.name}!${r.options.appId}`}const wE=1024,jE=30;class _E{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=zb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>jE){const o=SE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zb(),{heartbeatsToSend:t,unsentEntries:i}=kE(this._heartbeatsCache.heartbeats),o=$f(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return jo.warn(e),""}}}function zb(){return new Date().toISOString().substring(0,10)}function kE(r,e=wE){const t=[];let i=r.slice();for(const o of r){const c=t.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),qb(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),qb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class NE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dT()?hT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Fb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Fb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qb(r){return $f(JSON.stringify({version:2,heartbeats:r})).length}function SE(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function TE(r){rc(new xl("platform-logger",e=>new VT(e),"PRIVATE")),rc(new xl("heartbeat",e=>new _E(e),"PRIVATE")),Ri(ev,Vb,r),Ri(ev,Vb,"esm2020"),Ri("fire-js","")}TE("");function lw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EE=lw,cw=new Gd("auth","Firebase",lw());const Kf=new Bv("@firebase/auth");function CE(r,...e){Kf.logLevel<=Rn.WARN&&Kf.warn(`Auth (${dc}): ${r}`,...e)}function Rf(r,...e){Kf.logLevel<=Rn.ERROR&&Kf.error(`Auth (${dc}): ${r}`,...e)}function li(r,...e){throw zv(r,...e)}function Mi(r,...e){return zv(r,...e)}function uw(r,e,t){const i={...EE(),[e]:t};return new Gd("auth","Firebase",i).create(e,{appName:r.name})}function bo(r){return uw(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zv(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return cw.create(r,...e)}function an(r,e,...t){if(!r)throw zv(e,...t)}function go(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Rf(e),new Error(e)}function _o(r,e){r||go(e)}function sv(){return typeof self<"u"&&self.location?.href||""}function AE(){return Wb()==="http:"||Wb()==="https:"}function Wb(){return typeof self<"u"&&self.location?.protocol||null}function RE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AE()||oT()||"connection"in navigator)?navigator.onLine:!0}function ME(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Yd{constructor(e,t){this.shortDelay=e,this.longDelay=t,_o(t>e,"Short delay should be less than long delay!"),this.isMobile=rT()||lT()}get(){return RE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qv(r,e){_o(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class dw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const DE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const IE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PE=new Yd(3e4,6e4);function To(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Eo(r,e,t,i,o={}){return hw(r,o,async()=>{let c={},u={};i&&(e==="GET"?u=i:c={body:JSON.stringify(i)});const h=Kd({key:r.config.apiKey,...u}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const b={method:e,headers:m,...c};return iT()||(b.referrerPolicy="no-referrer"),r.emulatorConfig&&Tl(r.emulatorConfig.host)&&(b.credentials="include"),dw.fetch()(await fw(r,r.config.apiHost,t,h),b)})}async function hw(r,e,t){r._canInitEmulator=!1;const i={...DE,...e};try{const o=new LE(r),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw ff(r,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const h=c.ok?u.errorMessage:u.error.message,[m,b]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw ff(r,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw ff(r,"email-already-in-use",u);if(m==="USER_DISABLED")throw ff(r,"user-disabled",u);const k=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw uw(r,k,b);li(r,k)}}catch(o){if(o instanceof Vi)throw o;li(r,"network-request-failed",{message:String(o)})}}async function Qd(r,e,t,i,o={}){const c=await Eo(r,e,t,i,o);return"mfaPendingCredential"in c&&li(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function fw(r,e,t,i){const o=`${e}${t}?${i}`,c=r,u=c.config.emulator?qv(r.config,o):`${r.config.apiScheme}://${o}`;return IE.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function OE(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Mi(this.auth,"network-request-failed")),PE.get())})}}function ff(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Mi(r,e,i);return o.customData._tokenResponse=t,o}function Hb(r){return r!==void 0&&r.enterprise!==void 0}class BE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return OE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VE(r,e){return Eo(r,"GET","/v2/recaptchaConfig",To(r,e))}async function UE(r,e){return Eo(r,"POST","/v1/accounts:delete",e)}async function Yf(r,e){return Eo(r,"POST","/v1/accounts:lookup",e)}function Sd(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FE(r,e=!1){const t=_s(r),i=await t.getIdToken(e),o=Wv(i);an(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:i,authTime:Sd(wg(o.auth_time)),issuedAtTime:Sd(wg(o.iat)),expirationTime:Sd(wg(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function wg(r){return Number(r)*1e3}function Wv(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Rf("JWT malformed, contained fewer than 3 sections"),null;try{const o=J2(t);return o?JSON.parse(o):(Rf("Failed to decode base64 JWT payload"),null)}catch(o){return Rf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function $b(r){const e=Wv(r);return an(e,"internal-error"),an(typeof e.exp<"u","internal-error"),an(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Pd(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Vi&&zE(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function zE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class qE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class rv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sd(this.lastLoginAt),this.creationTime=Sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qf(r){const e=r.auth,t=await r.getIdToken(),i=await Pd(r,Yf(e,{idToken:t}));an(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?mw(o.providerUserInfo):[],u=HE(r.providerData,c),h=r.isAnonymous,m=!(r.email&&o.passwordHash)&&!u?.length,b=h?m:!1,k={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new rv(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(r,k)}async function WE(r){const e=_s(r);await Qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HE(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function mw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function $E(r,e){const t=await hw(r,{},async()=>{const i=Kd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,u=await fw(r,o,"/v1/token",`key=${c}`),h=await r._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:i};return r.emulatorConfig&&Tl(r.emulatorConfig.host)&&(m.credentials="include"),dw.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function GE(r,e){return Eo(r,"POST","/v2/accounts:revokeToken",To(r,e))}class eu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){an(e.idToken,"internal-error"),an(typeof e.idToken<"u","internal-error"),an(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$b(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){an(e.length!==0,"internal-error");const t=$b(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(an(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await $E(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,u=new eu;return i&&(an(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(an(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(an(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eu,this.toJSON())}_performRefresh(){return go("not implemented")}}function ll(r,e){an(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new qE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new rv(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Pd(this,this.stsTokenManager.getToken(this.auth,e));return an(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FE(this,e)}reload(){return WE(this)}_assign(e){this!==e&&(an(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Qf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ya(this.auth.app))return Promise.reject(bo(this.auth));const e=await this.getIdToken();return await Pd(this,UE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,b=t.createdAt??void 0,k=t.lastLoginAt??void 0,{uid:S,emailVerified:E,isAnonymous:F,providerData:L,stsTokenManager:V}=t;an(S&&V,e,"internal-error");const P=eu.fromJSON(this.name,V);an(typeof S=="string",e,"internal-error"),ll(i,e.name),ll(o,e.name),an(typeof E=="boolean",e,"internal-error"),an(typeof F=="boolean",e,"internal-error"),ll(c,e.name),ll(u,e.name),ll(h,e.name),ll(m,e.name),ll(b,e.name),ll(k,e.name);const ee=new ii({uid:S,auth:e,email:o,emailVerified:E,displayName:i,isAnonymous:F,photoURL:u,phoneNumber:c,tenantId:h,stsTokenManager:P,createdAt:b,lastLoginAt:k});return L&&Array.isArray(L)&&(ee.providerData=L.map($=>({...$}))),m&&(ee._redirectEventId=m),ee}static async _fromIdTokenResponse(e,t,i=!1){const o=new eu;o.updateFromServerResponse(t);const c=new ii({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Qf(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];an(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?mw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,h=new eu;h.updateFromIdToken(i);const m=new ii({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:u}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new rv(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(m,b),m}}const Gb=new Map;function vo(r){_o(r instanceof Function,"Expected a class definition");let e=Gb.get(r);return e?(_o(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Gb.set(r,e),e)}class pw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pw.type="NONE";const Kb=pw;function Mf(r,e,t){return`firebase:${r}:${e}:${t}`}class tu{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Mf(this.userKey,o.apiKey,c),this.fullPersistenceKey=Mf("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Yf(this.auth,{idToken:e}).catch(()=>{});return t?ii._fromGetAccountInfoResponse(this.auth,t,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new tu(vo(Kb),e,i);const o=(await Promise.all(t.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let c=o[0]||vo(Kb);const u=Mf(i,e.config.apiKey,e.name);let h=null;for(const b of t)try{const k=await b._get(u);if(k){let S;if(typeof k=="string"){const E=await Yf(e,{idToken:k}).catch(()=>{});if(!E)break;S=await ii._fromGetAccountInfoResponse(e,E,k)}else S=ii._fromJSON(e,k);b!==c&&(h=S),c=b;break}}catch{}const m=o.filter(b=>b._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new tu(c,e,i):(c=m[0],h&&await c._set(u,h.toJSON()),await Promise.all(t.map(async b=>{if(b!==c)try{await b._remove(u)}catch{}})),new tu(c,e,i))}}function Yb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ww(e))return"Blackberry";if(jw(e))return"Webos";if(vw(e))return"Safari";if((e.includes("chrome/")||yw(e))&&!e.includes("edge/"))return"Chrome";if(xw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function gw(r=Er()){return/firefox\//i.test(r)}function vw(r=Er()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yw(r=Er()){return/crios\//i.test(r)}function bw(r=Er()){return/iemobile/i.test(r)}function xw(r=Er()){return/android/i.test(r)}function ww(r=Er()){return/blackberry/i.test(r)}function jw(r=Er()){return/webos/i.test(r)}function Hv(r=Er()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function KE(r=Er()){return Hv(r)&&!!window.navigator?.standalone}function YE(){return cT()&&document.documentMode===10}function _w(r=Er()){return Hv(r)||xw(r)||jw(r)||ww(r)||/windows phone/i.test(r)||bw(r)}function kw(r,e=[]){let t;switch(r){case"Browser":t=Yb(Er());break;case"Worker":t=`${Yb(Er())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dc}/${i}`}class QE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((u,h)=>{try{const m=e(c);u(m)}catch(m){h(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function XE(r,e={}){return Eo(r,"GET","/v2/passwordPolicy",To(r,e))}const JE=6;class ZE{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??JE,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class e4{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qb(this),this.idTokenSubscription=new Qb(this),this.beforeStateQueue=new QE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vo(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await tu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Yf(this,{idToken:e}),i=await ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ya(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&h?.user&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ME()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ya(this.app))return Promise.reject(bo(this));const t=e?_s(e):null;return t&&an(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&an(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ya(this.app)?Promise.reject(bo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ya(this.app)?Promise.reject(bo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XE(this),t=new ZE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gd("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await GE(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vo(e)||this._popupRedirectResolver;an(t,this,"argument-error"),this.redirectPersistenceManager=await tu.create(this,[vo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(an(h,this,"internal-error"),h.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ya(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&CE(`Error while retrieving App Check token: ${e.error}`),e?.token}}function El(r){return _s(r)}class Qb{constructor(e){this.auth=e,this.observer=null,this.addObserver=vT(t=>this.observer=t)}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t4(r){vm=r}function Nw(r){return vm.loadJS(r)}function n4(){return vm.recaptchaEnterpriseScript}function s4(){return vm.gapiScript}function r4(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class a4{constructor(){this.enterprise=new i4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class i4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const o4="recaptcha-enterprise",Sw="NO_RECAPTCHA";class l4{constructor(e){this.type=o4,this.auth=El(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,h)=>{VE(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const b=new BE(m);return c.tenantId==null?c._agentRecaptchaConfig=b:c._tenantRecaptchaConfigs[c.tenantId]=b,u(b.siteKey)}}).catch(m=>{h(m)})})}function o(c,u,h){const m=window.grecaptcha;Hb(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:e}).then(b=>{u(b)}).catch(()=>{u(Sw)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new a4().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{i(this.auth).then(h=>{if(!t&&Hb(window.grecaptcha))o(h,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=n4();m.length!==0&&(m+=h),Nw(m).then(()=>{o(h,c,u)}).catch(b=>{u(b)})}}).catch(h=>{u(h)})})}}async function Xb(r,e,t,i=!1,o=!1){const c=new l4(r);let u;if(o)u=Sw;else try{u=await c.verify(t)}catch{u=await c.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,b=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:b,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Xf(r,e,t,i,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Xb(r,e,t,t==="getOobCode");return i(r,c)}else return i(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Xb(r,e,t,t==="getOobCode");return i(r,u)}else return Promise.reject(c)})}function c4(r,e){const t=gm(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(sc(c,e??{}))return o;li(o,"already-initialized")}return t.initialize({options:e})}function u4(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(vo);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function d4(r,e,t){const i=El(r);an(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=Tw(e),{host:u,port:h}=h4(e),m=h===null?"":`:${h}`,b={url:`${c}//${u}${m}/`},k=Object.freeze({host:u,port:h,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){an(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),an(sc(b,i.config.emulator)&&sc(k,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=b,i.emulatorConfig=k,i.settings.appVerificationDisabledForTesting=!0,Tl(u)?(Ov(`${c}//${u}${m}`),Lv("Auth",!0)):f4()}function Tw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function h4(r){const e=Tw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:Jb(i.substr(c.length+1))}}else{const[c,u]=i.split(":");return{host:c,port:Jb(u)}}}function Jb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function f4(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class $v{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return go("not implemented")}_getIdTokenResponse(e){return go("not implemented")}_linkToIdToken(e,t){return go("not implemented")}_getReauthenticationResolver(e){return go("not implemented")}}async function m4(r,e){return Eo(r,"POST","/v1/accounts:signUp",e)}async function p4(r,e){return Qd(r,"POST","/v1/accounts:signInWithPassword",To(r,e))}async function g4(r,e){return Eo(r,"POST","/v1/accounts:sendOobCode",To(r,e))}async function v4(r,e){return g4(r,e)}async function y4(r,e){return Qd(r,"POST","/v1/accounts:signInWithEmailLink",To(r,e))}async function b4(r,e){return Qd(r,"POST","/v1/accounts:signInWithEmailLink",To(r,e))}class Od extends $v{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Od(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Od(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,t,"signInWithPassword",p4);case"emailLink":return y4(e,{email:this._email,oobCode:this._password});default:li(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,i,"signUpPassword",m4);case"emailLink":return b4(e,{idToken:t,email:this._email,oobCode:this._password});default:li(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function nu(r,e){return Qd(r,"POST","/v1/accounts:signInWithIdp",To(r,e))}const x4="http://localhost";class ac extends $v{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ac(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):li("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=t;if(!i||!o)return null;const u=new ac(i,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return nu(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,nu(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nu(e,t)}buildRequest(){const e={requestUri:x4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Kd(t)}return e}}function w4(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function j4(r){const e=vd(yd(r)).link,t=e?vd(yd(e)).deep_link_id:null,i=vd(yd(r)).deep_link_id;return(i?vd(yd(i)).link:null)||i||t||e||r}class Gv{constructor(e){const t=vd(yd(e)),i=t.apiKey??null,o=t.oobCode??null,c=w4(t.mode??null);an(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=j4(e);try{return new Gv(t)}catch{return null}}}class pu{constructor(){this.providerId=pu.PROVIDER_ID}static credential(e,t){return Od._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Gv.parseLink(t);return an(i,"argument-error"),Od._fromEmailAndCode(e,i.code,i.tenantId)}}pu.PROVIDER_ID="password";pu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ew{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xd extends Ew{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class dl extends Xd{constructor(){super("facebook.com")}static credential(e){return ac._fromParams({providerId:dl.PROVIDER_ID,signInMethod:dl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dl.credentialFromTaggedObject(e)}static credentialFromError(e){return dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dl.credential(e.oauthAccessToken)}catch{return null}}}dl.FACEBOOK_SIGN_IN_METHOD="facebook.com";dl.PROVIDER_ID="facebook.com";class hl extends Xd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ac._fromParams({providerId:hl.PROVIDER_ID,signInMethod:hl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hl.credentialFromTaggedObject(e)}static credentialFromError(e){return hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return hl.credential(t,i)}catch{return null}}}hl.GOOGLE_SIGN_IN_METHOD="google.com";hl.PROVIDER_ID="google.com";class fl extends Xd{constructor(){super("github.com")}static credential(e){return ac._fromParams({providerId:fl.PROVIDER_ID,signInMethod:fl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fl.credentialFromTaggedObject(e)}static credentialFromError(e){return fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fl.credential(e.oauthAccessToken)}catch{return null}}}fl.GITHUB_SIGN_IN_METHOD="github.com";fl.PROVIDER_ID="github.com";class ml extends Xd{constructor(){super("twitter.com")}static credential(e,t){return ac._fromParams({providerId:ml.PROVIDER_ID,signInMethod:ml.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ml.credentialFromTaggedObject(e)}static credentialFromError(e){return ml.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ml.credential(t,i)}catch{return null}}}ml.TWITTER_SIGN_IN_METHOD="twitter.com";ml.PROVIDER_ID="twitter.com";async function _4(r,e){return Qd(r,"POST","/v1/accounts:signUp",To(r,e))}class ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await ii._fromIdTokenResponse(e,i,o),u=Zb(i);return new ic({user:c,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Zb(i);return new ic({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Zb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Jf extends Vi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Jf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Jf(e,t,i,o)}}function Cw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Jf._fromErrorAndOperation(r,c,e,i):c})}async function k4(r,e,t=!1){const i=await Pd(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ic._forOperation(r,"link",i)}async function N4(r,e,t=!1){const{auth:i}=r;if(ya(i.app))return Promise.reject(bo(i));const o="reauthenticate";try{const c=await Pd(r,Cw(i,o,e,r),t);an(c.idToken,i,"internal-error");const u=Wv(c.idToken);an(u,i,"internal-error");const{sub:h}=u;return an(r.uid===h,i,"user-mismatch"),ic._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&li(i,"user-mismatch"),c}}async function Aw(r,e,t=!1){if(ya(r.app))return Promise.reject(bo(r));const i="signIn",o=await Cw(r,i,e),c=await ic._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(c.user),c}async function S4(r,e){return Aw(El(r),e)}async function Rw(r){const e=El(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function T4(r,e,t){const i=El(r);await Xf(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",v4)}async function Mw(r,e,t){if(ya(r.app))return Promise.reject(bo(r));const i=El(r),u=await Xf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_4).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Rw(r),m}),h=await ic._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function E4(r,e,t){return ya(r.app)?Promise.reject(bo(r)):S4(_s(r),pu.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Rw(r),i})}function C4(r,e){return _s(r).setPersistence(e)}function A4(r,e,t,i){return _s(r).onIdTokenChanged(e,t,i)}function R4(r,e,t){return _s(r).beforeAuthStateChanged(e,t)}function M4(r,e,t,i){return _s(r).onAuthStateChanged(e,t,i)}function Kv(r){return _s(r).signOut()}const Zf="__sak";class Dw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zf,"1"),this.storage.removeItem(Zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const D4=1e3,I4=10;class Iw extends Dw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_w(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},c=this.storage.getItem(i);YE()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,I4):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},D4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Iw.type="LOCAL";const Pw=Iw;class Ow extends Dw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ow.type="SESSION";const Yv=Ow;function P4(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ym(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(u).map(async b=>b(t.origin,c)),m=await P4(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ym.receivers=[];function Qv(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class O4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((h,m)=>{const b=Qv("",20);o.port1.start();const k=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(S){const E=S;if(E.data.eventId===b)switch(E.data.status){case"ack":clearTimeout(k),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),h(E.data.response);break;default:clearTimeout(k),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:b,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Di(){return window}function L4(r){Di().location.href=r}function Lw(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function B4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V4(){return navigator?.serviceWorker?.controller||null}function U4(){return Lw()?self:null}const Bw="firebaseLocalStorageDb",F4=1,em="firebaseLocalStorage",Vw="fbase_key";class Jd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bm(r,e){return r.transaction([em],e?"readwrite":"readonly").objectStore(em)}function z4(){const r=indexedDB.deleteDatabase(Bw);return new Jd(r).toPromise()}function av(){const r=indexedDB.open(Bw,F4);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(em,{keyPath:Vw})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(em)?e(i):(i.close(),await z4(),e(await av()))})})}async function ex(r,e,t){const i=bm(r,!0).put({[Vw]:e,value:t});return new Jd(i).toPromise()}async function q4(r,e){const t=bm(r,!1).get(e),i=await new Jd(t).toPromise();return i===void 0?null:i.value}function tx(r,e){const t=bm(r,!0).delete(e);return new Jd(t).toPromise()}const W4=800,H4=3;class Uw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await av(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>H4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ym._getInstance(U4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await B4(),!this.activeServiceWorker)return;this.sender=new O4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await av();return await ex(e,Zf,"1"),await tx(e,Zf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ex(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>q4(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>tx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=bm(o,!1).getAll();return new Jd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uw.type="LOCAL";const $4=Uw;new Yd(3e4,6e4);function G4(r,e){return e?vo(e):(an(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Xv extends $v{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function K4(r){return Aw(r.auth,new Xv(r),r.bypassAuthState)}function Y4(r){const{auth:e,user:t}=r;return an(t,e,"internal-error"),N4(t,new Xv(r),r.bypassAuthState)}async function Q4(r){const{auth:e,user:t}=r;return an(t,e,"internal-error"),k4(t,new Xv(r),r.bypassAuthState)}class Fw{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:u,type:h}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K4;case"linkViaPopup":case"linkViaRedirect":return Q4;case"reauthViaPopup":case"reauthViaRedirect":return Y4;default:li(this.auth,"internal-error")}}resolve(e){_o(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_o(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const X4=new Yd(2e3,1e4);class Zc extends Fw{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,Zc.currentPopupAction&&Zc.currentPopupAction.cancel(),Zc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return an(e,this.auth,"internal-error"),e}async onExecution(){_o(this.filter.length===1,"Popup operations only handle one event");const e=Qv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,X4.get())};e()}}Zc.currentPopupAction=null;const J4="pendingRedirect",Df=new Map;class Z4 extends Fw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Df.get(this.auth._key());if(!e){try{const i=await eC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Df.set(this.auth._key(),e)}return this.bypassAuthState||Df.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eC(r,e){const t=sC(e),i=nC(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function tC(r,e){Df.set(r._key(),e)}function nC(r){return vo(r._redirectPersistence)}function sC(r){return Mf(J4,r.config.apiKey,r.name)}async function rC(r,e,t=!1){if(ya(r.app))return Promise.reject(bo(r));const i=El(r),o=G4(i,e),u=await new Z4(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const aC=600*1e3;class iC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!zw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Mi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aC&&this.cachedEventUids.clear(),this.cachedEventUids.has(nx(e))}saveEventToCache(e){this.cachedEventUids.add(nx(e)),this.lastProcessedEventTime=Date.now()}}function nx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function zw({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function oC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zw(r);default:return!1}}async function lC(r,e={}){return Eo(r,"GET","/v1/projects",e)}const cC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uC=/^https?/;async function dC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await lC(r);for(const t of e)try{if(hC(t))return}catch{}li(r,"unauthorized-domain")}function hC(r){const e=sv(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!uC.test(t))return!1;if(cC.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const fC=new Yd(3e4,6e4);function sx(){const r=Di().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function mC(r){return new Promise((e,t)=>{function i(){sx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sx(),t(Mi(r,"network-request-failed"))},timeout:fC.get()})}if(Di().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Di().gapi?.load)i();else{const o=r4("iframefcb");return Di()[o]=()=>{gapi.load?i():t(Mi(r,"network-request-failed"))},Nw(`${s4()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw If=null,e})}let If=null;function pC(r){return If=If||mC(r),If}const gC=new Yd(5e3,15e3),vC="__/auth/iframe",yC="emulator/auth/iframe",bC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wC(r){const e=r.config;an(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?qv(e,yC):`https://${r.config.authDomain}/${vC}`,i={apiKey:e.apiKey,appName:r.name,v:dc},o=xC.get(r.config.apiHost);o&&(i.eid=o);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${Kd(i).slice(1)}`}async function jC(r){const e=await pC(r),t=Di().gapi;return an(t,r,"internal-error"),e.open({where:document.body,url:wC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bC,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const u=Mi(r,"network-request-failed"),h=Di().setTimeout(()=>{c(u)},gC.get());function m(){Di().clearTimeout(h),o(i)}i.ping(m).then(m,()=>{c(u)})}))}const _C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kC=500,NC=600,SC="_blank",TC="http://localhost";class rx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EC(r,e,t,i=kC,o=NC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const m={..._C,width:i.toString(),height:o.toString(),top:c,left:u},b=Er().toLowerCase();t&&(h=yw(b)?SC:t),gw(b)&&(e=e||TC,m.scrollbars="yes");const k=Object.entries(m).reduce((E,[F,L])=>`${E}${F}=${L},`,"");if(KE(b)&&h!=="_self")return CC(e||"",h),new rx(null);const S=window.open(e||"",h,k);an(S,r,"popup-blocked");try{S.focus()}catch{}return new rx(S)}function CC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const AC="__/auth/handler",RC="emulator/auth/handler",MC=encodeURIComponent("fac");async function ax(r,e,t,i,o,c){an(r.config.authDomain,r,"auth-domain-config-required"),an(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:dc,eventId:o};if(e instanceof Ew){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",gT(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[k,S]of Object.entries({}))u[k]=S}if(e instanceof Xd){const k=e.getScopes().filter(S=>S!=="");k.length>0&&(u.scopes=k.join(","))}r.tenantId&&(u.tid=r.tenantId);const h=u;for(const k of Object.keys(h))h[k]===void 0&&delete h[k];const m=await r._getAppCheckToken(),b=m?`#${MC}=${encodeURIComponent(m)}`:"";return`${DC(r)}?${Kd(h).slice(1)}${b}`}function DC({config:r}){return r.emulator?qv(r,RC):`https://${r.authDomain}/${AC}`}const jg="webStorageSupport";class IC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yv,this._completeRedirectFn=rC,this._overrideRedirectResult=tC}async _openPopup(e,t,i,o){_o(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await ax(e,t,i,sv(),o);return EC(e,c,Qv())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await ax(e,t,i,sv(),o);return L4(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(_o(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await jC(e),i=new iC(e);return t.register("authEvent",o=>(an(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jg,{type:jg},o=>{const c=o?.[0]?.[jg];c!==void 0&&t(!!c),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _w()||vw()||Hv()}}const PC=IC;var ix="@firebase/auth",ox="1.12.0";class OC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function LC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BC(r){rc(new xl("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;an(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kw(r)},b=new e4(i,o,c,m);return u4(b,t),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),rc(new xl("auth-internal",e=>{const t=El(e.getProvider("auth").getImmediate());return(i=>new OC(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ri(ix,ox,LC(r)),Ri(ix,ox,"esm2020")}const VC=300,UC=nw("authIdTokenMaxAge")||VC;let lx=null;const FC=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>UC)return;const o=t?.token;lx!==o&&(lx=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function qw(r=Fv()){const e=gm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=c4(r,{popupRedirectResolver:PC,persistence:[$4,Pw,Yv]}),i=nw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const u=FC(c.toString());R4(t,u,()=>u(t.currentUser)),A4(t,h=>u(h))}}const o=Z2("auth");return o&&d4(t,`http://${o}`),t}function zC(){return document.getElementsByTagName("head")?.[0]??document}t4({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const c=Mi("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",zC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BC("Browser");var cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var yl,Ww;(function(){var r;function e(B,O){function z(){}z.prototype=O.prototype,B.F=O.prototype,B.prototype=new z,B.prototype.constructor=B,B.D=function(Y,G,se){for(var H=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)H[Le-2]=arguments[Le];return O.prototype[G].apply(Y,H)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(B,O,z){z||(z=0);const Y=Array(16);if(typeof O=="string")for(var G=0;G<16;++G)Y[G]=O.charCodeAt(z++)|O.charCodeAt(z++)<<8|O.charCodeAt(z++)<<16|O.charCodeAt(z++)<<24;else for(G=0;G<16;++G)Y[G]=O[z++]|O[z++]<<8|O[z++]<<16|O[z++]<<24;O=B.g[0],z=B.g[1],G=B.g[2];let se=B.g[3],H;H=O+(se^z&(G^se))+Y[0]+3614090360&4294967295,O=z+(H<<7&4294967295|H>>>25),H=se+(G^O&(z^G))+Y[1]+3905402710&4294967295,se=O+(H<<12&4294967295|H>>>20),H=G+(z^se&(O^z))+Y[2]+606105819&4294967295,G=se+(H<<17&4294967295|H>>>15),H=z+(O^G&(se^O))+Y[3]+3250441966&4294967295,z=G+(H<<22&4294967295|H>>>10),H=O+(se^z&(G^se))+Y[4]+4118548399&4294967295,O=z+(H<<7&4294967295|H>>>25),H=se+(G^O&(z^G))+Y[5]+1200080426&4294967295,se=O+(H<<12&4294967295|H>>>20),H=G+(z^se&(O^z))+Y[6]+2821735955&4294967295,G=se+(H<<17&4294967295|H>>>15),H=z+(O^G&(se^O))+Y[7]+4249261313&4294967295,z=G+(H<<22&4294967295|H>>>10),H=O+(se^z&(G^se))+Y[8]+1770035416&4294967295,O=z+(H<<7&4294967295|H>>>25),H=se+(G^O&(z^G))+Y[9]+2336552879&4294967295,se=O+(H<<12&4294967295|H>>>20),H=G+(z^se&(O^z))+Y[10]+4294925233&4294967295,G=se+(H<<17&4294967295|H>>>15),H=z+(O^G&(se^O))+Y[11]+2304563134&4294967295,z=G+(H<<22&4294967295|H>>>10),H=O+(se^z&(G^se))+Y[12]+1804603682&4294967295,O=z+(H<<7&4294967295|H>>>25),H=se+(G^O&(z^G))+Y[13]+4254626195&4294967295,se=O+(H<<12&4294967295|H>>>20),H=G+(z^se&(O^z))+Y[14]+2792965006&4294967295,G=se+(H<<17&4294967295|H>>>15),H=z+(O^G&(se^O))+Y[15]+1236535329&4294967295,z=G+(H<<22&4294967295|H>>>10),H=O+(G^se&(z^G))+Y[1]+4129170786&4294967295,O=z+(H<<5&4294967295|H>>>27),H=se+(z^G&(O^z))+Y[6]+3225465664&4294967295,se=O+(H<<9&4294967295|H>>>23),H=G+(O^z&(se^O))+Y[11]+643717713&4294967295,G=se+(H<<14&4294967295|H>>>18),H=z+(se^O&(G^se))+Y[0]+3921069994&4294967295,z=G+(H<<20&4294967295|H>>>12),H=O+(G^se&(z^G))+Y[5]+3593408605&4294967295,O=z+(H<<5&4294967295|H>>>27),H=se+(z^G&(O^z))+Y[10]+38016083&4294967295,se=O+(H<<9&4294967295|H>>>23),H=G+(O^z&(se^O))+Y[15]+3634488961&4294967295,G=se+(H<<14&4294967295|H>>>18),H=z+(se^O&(G^se))+Y[4]+3889429448&4294967295,z=G+(H<<20&4294967295|H>>>12),H=O+(G^se&(z^G))+Y[9]+568446438&4294967295,O=z+(H<<5&4294967295|H>>>27),H=se+(z^G&(O^z))+Y[14]+3275163606&4294967295,se=O+(H<<9&4294967295|H>>>23),H=G+(O^z&(se^O))+Y[3]+4107603335&4294967295,G=se+(H<<14&4294967295|H>>>18),H=z+(se^O&(G^se))+Y[8]+1163531501&4294967295,z=G+(H<<20&4294967295|H>>>12),H=O+(G^se&(z^G))+Y[13]+2850285829&4294967295,O=z+(H<<5&4294967295|H>>>27),H=se+(z^G&(O^z))+Y[2]+4243563512&4294967295,se=O+(H<<9&4294967295|H>>>23),H=G+(O^z&(se^O))+Y[7]+1735328473&4294967295,G=se+(H<<14&4294967295|H>>>18),H=z+(se^O&(G^se))+Y[12]+2368359562&4294967295,z=G+(H<<20&4294967295|H>>>12),H=O+(z^G^se)+Y[5]+4294588738&4294967295,O=z+(H<<4&4294967295|H>>>28),H=se+(O^z^G)+Y[8]+2272392833&4294967295,se=O+(H<<11&4294967295|H>>>21),H=G+(se^O^z)+Y[11]+1839030562&4294967295,G=se+(H<<16&4294967295|H>>>16),H=z+(G^se^O)+Y[14]+4259657740&4294967295,z=G+(H<<23&4294967295|H>>>9),H=O+(z^G^se)+Y[1]+2763975236&4294967295,O=z+(H<<4&4294967295|H>>>28),H=se+(O^z^G)+Y[4]+1272893353&4294967295,se=O+(H<<11&4294967295|H>>>21),H=G+(se^O^z)+Y[7]+4139469664&4294967295,G=se+(H<<16&4294967295|H>>>16),H=z+(G^se^O)+Y[10]+3200236656&4294967295,z=G+(H<<23&4294967295|H>>>9),H=O+(z^G^se)+Y[13]+681279174&4294967295,O=z+(H<<4&4294967295|H>>>28),H=se+(O^z^G)+Y[0]+3936430074&4294967295,se=O+(H<<11&4294967295|H>>>21),H=G+(se^O^z)+Y[3]+3572445317&4294967295,G=se+(H<<16&4294967295|H>>>16),H=z+(G^se^O)+Y[6]+76029189&4294967295,z=G+(H<<23&4294967295|H>>>9),H=O+(z^G^se)+Y[9]+3654602809&4294967295,O=z+(H<<4&4294967295|H>>>28),H=se+(O^z^G)+Y[12]+3873151461&4294967295,se=O+(H<<11&4294967295|H>>>21),H=G+(se^O^z)+Y[15]+530742520&4294967295,G=se+(H<<16&4294967295|H>>>16),H=z+(G^se^O)+Y[2]+3299628645&4294967295,z=G+(H<<23&4294967295|H>>>9),H=O+(G^(z|~se))+Y[0]+4096336452&4294967295,O=z+(H<<6&4294967295|H>>>26),H=se+(z^(O|~G))+Y[7]+1126891415&4294967295,se=O+(H<<10&4294967295|H>>>22),H=G+(O^(se|~z))+Y[14]+2878612391&4294967295,G=se+(H<<15&4294967295|H>>>17),H=z+(se^(G|~O))+Y[5]+4237533241&4294967295,z=G+(H<<21&4294967295|H>>>11),H=O+(G^(z|~se))+Y[12]+1700485571&4294967295,O=z+(H<<6&4294967295|H>>>26),H=se+(z^(O|~G))+Y[3]+2399980690&4294967295,se=O+(H<<10&4294967295|H>>>22),H=G+(O^(se|~z))+Y[10]+4293915773&4294967295,G=se+(H<<15&4294967295|H>>>17),H=z+(se^(G|~O))+Y[1]+2240044497&4294967295,z=G+(H<<21&4294967295|H>>>11),H=O+(G^(z|~se))+Y[8]+1873313359&4294967295,O=z+(H<<6&4294967295|H>>>26),H=se+(z^(O|~G))+Y[15]+4264355552&4294967295,se=O+(H<<10&4294967295|H>>>22),H=G+(O^(se|~z))+Y[6]+2734768916&4294967295,G=se+(H<<15&4294967295|H>>>17),H=z+(se^(G|~O))+Y[13]+1309151649&4294967295,z=G+(H<<21&4294967295|H>>>11),H=O+(G^(z|~se))+Y[4]+4149444226&4294967295,O=z+(H<<6&4294967295|H>>>26),H=se+(z^(O|~G))+Y[11]+3174756917&4294967295,se=O+(H<<10&4294967295|H>>>22),H=G+(O^(se|~z))+Y[2]+718787259&4294967295,G=se+(H<<15&4294967295|H>>>17),H=z+(se^(G|~O))+Y[9]+3951481745&4294967295,B.g[0]=B.g[0]+O&4294967295,B.g[1]=B.g[1]+(G+(H<<21&4294967295|H>>>11))&4294967295,B.g[2]=B.g[2]+G&4294967295,B.g[3]=B.g[3]+se&4294967295}i.prototype.v=function(B,O){O===void 0&&(O=B.length);const z=O-this.blockSize,Y=this.C;let G=this.h,se=0;for(;se<O;){if(G==0)for(;se<=z;)o(this,B,se),se+=this.blockSize;if(typeof B=="string"){for(;se<O;)if(Y[G++]=B.charCodeAt(se++),G==this.blockSize){o(this,Y),G=0;break}}else for(;se<O;)if(Y[G++]=B[se++],G==this.blockSize){o(this,Y),G=0;break}}this.h=G,this.o+=O},i.prototype.A=function(){var B=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);B[0]=128;for(var O=1;O<B.length-8;++O)B[O]=0;O=this.o*8;for(var z=B.length-8;z<B.length;++z)B[z]=O&255,O/=256;for(this.v(B),B=Array(16),O=0,z=0;z<4;++z)for(let Y=0;Y<32;Y+=8)B[O++]=this.g[z]>>>Y&255;return B};function c(B,O){var z=h;return Object.prototype.hasOwnProperty.call(z,B)?z[B]:z[B]=O(B)}function u(B,O){this.h=O;const z=[];let Y=!0;for(let G=B.length-1;G>=0;G--){const se=B[G]|0;Y&&se==O||(z[G]=se,Y=!1)}this.g=z}var h={};function m(B){return-128<=B&&B<128?c(B,function(O){return new u([O|0],O<0?-1:0)}):new u([B|0],B<0?-1:0)}function b(B){if(isNaN(B)||!isFinite(B))return S;if(B<0)return P(b(-B));const O=[];let z=1;for(let Y=0;B>=z;Y++)O[Y]=B/z|0,z*=4294967296;return new u(O,0)}function k(B,O){if(B.length==0)throw Error("number format error: empty string");if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(B.charAt(0)=="-")return P(k(B.substring(1),O));if(B.indexOf("-")>=0)throw Error('number format error: interior "-" character');const z=b(Math.pow(O,8));let Y=S;for(let se=0;se<B.length;se+=8){var G=Math.min(8,B.length-se);const H=parseInt(B.substring(se,se+G),O);G<8?(G=b(Math.pow(O,G)),Y=Y.j(G).add(b(H))):(Y=Y.j(z),Y=Y.add(b(H)))}return Y}var S=m(0),E=m(1),F=m(16777216);r=u.prototype,r.m=function(){if(V(this))return-P(this).m();let B=0,O=1;for(let z=0;z<this.g.length;z++){const Y=this.i(z);B+=(Y>=0?Y:4294967296+Y)*O,O*=4294967296}return B},r.toString=function(B){if(B=B||10,B<2||36<B)throw Error("radix out of range: "+B);if(L(this))return"0";if(V(this))return"-"+P(this).toString(B);const O=b(Math.pow(B,6));var z=this;let Y="";for(;;){const G=X(z,O).g;z=ee(z,G.j(O));let se=((z.g.length>0?z.g[0]:z.h)>>>0).toString(B);if(z=G,L(z))return se+Y;for(;se.length<6;)se="0"+se;Y=se+Y}},r.i=function(B){return B<0?0:B<this.g.length?this.g[B]:this.h};function L(B){if(B.h!=0)return!1;for(let O=0;O<B.g.length;O++)if(B.g[O]!=0)return!1;return!0}function V(B){return B.h==-1}r.l=function(B){return B=ee(this,B),V(B)?-1:L(B)?0:1};function P(B){const O=B.g.length,z=[];for(let Y=0;Y<O;Y++)z[Y]=~B.g[Y];return new u(z,~B.h).add(E)}r.abs=function(){return V(this)?P(this):this},r.add=function(B){const O=Math.max(this.g.length,B.g.length),z=[];let Y=0;for(let G=0;G<=O;G++){let se=Y+(this.i(G)&65535)+(B.i(G)&65535),H=(se>>>16)+(this.i(G)>>>16)+(B.i(G)>>>16);Y=H>>>16,se&=65535,H&=65535,z[G]=H<<16|se}return new u(z,z[z.length-1]&-2147483648?-1:0)};function ee(B,O){return B.add(P(O))}r.j=function(B){if(L(this)||L(B))return S;if(V(this))return V(B)?P(this).j(P(B)):P(P(this).j(B));if(V(B))return P(this.j(P(B)));if(this.l(F)<0&&B.l(F)<0)return b(this.m()*B.m());const O=this.g.length+B.g.length,z=[];for(var Y=0;Y<2*O;Y++)z[Y]=0;for(Y=0;Y<this.g.length;Y++)for(let G=0;G<B.g.length;G++){const se=this.i(Y)>>>16,H=this.i(Y)&65535,Le=B.i(G)>>>16,Oe=B.i(G)&65535;z[2*Y+2*G]+=H*Oe,$(z,2*Y+2*G),z[2*Y+2*G+1]+=se*Oe,$(z,2*Y+2*G+1),z[2*Y+2*G+1]+=H*Le,$(z,2*Y+2*G+1),z[2*Y+2*G+2]+=se*Le,$(z,2*Y+2*G+2)}for(B=0;B<O;B++)z[B]=z[2*B+1]<<16|z[2*B];for(B=O;B<2*O;B++)z[B]=0;return new u(z,0)};function $(B,O){for(;(B[O]&65535)!=B[O];)B[O+1]+=B[O]>>>16,B[O]&=65535,O++}function le(B,O){this.g=B,this.h=O}function X(B,O){if(L(O))throw Error("division by zero");if(L(B))return new le(S,S);if(V(B))return O=X(P(B),O),new le(P(O.g),P(O.h));if(V(O))return O=X(B,P(O)),new le(P(O.g),O.h);if(B.g.length>30){if(V(B)||V(O))throw Error("slowDivide_ only works with positive integers.");for(var z=E,Y=O;Y.l(B)<=0;)z=Te(z),Y=Te(Y);var G=Re(z,1),se=Re(Y,1);for(Y=Re(Y,2),z=Re(z,2);!L(Y);){var H=se.add(Y);H.l(B)<=0&&(G=G.add(z),se=H),Y=Re(Y,1),z=Re(z,1)}return O=ee(B,G.j(O)),new le(G,O)}for(G=S;B.l(O)>=0;){for(z=Math.max(1,Math.floor(B.m()/O.m())),Y=Math.ceil(Math.log(z)/Math.LN2),Y=Y<=48?1:Math.pow(2,Y-48),se=b(z),H=se.j(O);V(H)||H.l(B)>0;)z-=Y,se=b(z),H=se.j(O);L(se)&&(se=E),G=G.add(se),B=ee(B,H)}return new le(G,B)}r.B=function(B){return X(this,B).h},r.and=function(B){const O=Math.max(this.g.length,B.g.length),z=[];for(let Y=0;Y<O;Y++)z[Y]=this.i(Y)&B.i(Y);return new u(z,this.h&B.h)},r.or=function(B){const O=Math.max(this.g.length,B.g.length),z=[];for(let Y=0;Y<O;Y++)z[Y]=this.i(Y)|B.i(Y);return new u(z,this.h|B.h)},r.xor=function(B){const O=Math.max(this.g.length,B.g.length),z=[];for(let Y=0;Y<O;Y++)z[Y]=this.i(Y)^B.i(Y);return new u(z,this.h^B.h)};function Te(B){const O=B.g.length+1,z=[];for(let Y=0;Y<O;Y++)z[Y]=B.i(Y)<<1|B.i(Y-1)>>>31;return new u(z,B.h)}function Re(B,O){const z=O>>5;O%=32;const Y=B.g.length-z,G=[];for(let se=0;se<Y;se++)G[se]=O>0?B.i(se+z)>>>O|B.i(se+z+1)<<32-O:B.i(se+z);return new u(G,B.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Ww=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=b,u.fromString=k,yl=u}).apply(typeof cx<"u"?cx:typeof self<"u"?self:typeof window<"u"?window:{});var mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Hw,bd,$w,Pf,iv,Gw,Kw,Yw;(function(){var r,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof mf=="object"&&mf];for(var T=0;T<p.length;++T){var M=p[T];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var i=t(this);function o(p,T){if(T)e:{var M=i;p=p.split(".");for(var K=0;K<p.length-1;K++){var Ce=p[K];if(!(Ce in M))break e;M=M[Ce]}p=p[p.length-1],K=M[p],T=T(K),T!=K&&T!=null&&e(M,p,{configurable:!0,writable:!0,value:T})}}o("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(p){return p||function(T){var M=[],K;for(K in T)Object.prototype.hasOwnProperty.call(T,K)&&M.push([K,T[K]]);return M}});var c=c||{},u=this||self;function h(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function m(p,T,M){return p.call.apply(p.bind,arguments)}function b(p,T,M){return b=m,b.apply(null,arguments)}function k(p,T){var M=Array.prototype.slice.call(arguments,1);return function(){var K=M.slice();return K.push.apply(K,arguments),p.apply(this,K)}}function S(p,T){function M(){}M.prototype=T.prototype,p.Z=T.prototype,p.prototype=new M,p.prototype.constructor=p,p.Ob=function(K,Ce,qe){for(var Tt=Array(arguments.length-2),hn=2;hn<arguments.length;hn++)Tt[hn-2]=arguments[hn];return T.prototype[Ce].apply(K,Tt)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function F(p){const T=p.length;if(T>0){const M=Array(T);for(let K=0;K<T;K++)M[K]=p[K];return M}return[]}function L(p,T){for(let K=1;K<arguments.length;K++){const Ce=arguments[K];var M=typeof Ce;if(M=M!="object"?M:Ce?Array.isArray(Ce)?"array":M:"null",M=="array"||M=="object"&&typeof Ce.length=="number"){M=p.length||0;const qe=Ce.length||0;p.length=M+qe;for(let Tt=0;Tt<qe;Tt++)p[M+Tt]=Ce[Tt]}else p.push(Ce)}}class V{constructor(T,M){this.i=T,this.j=M,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function P(p){u.setTimeout(()=>{throw p},0)}function ee(){var p=B;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class ${constructor(){this.h=this.g=null}add(T,M){const K=le.get();K.set(T,M),this.h?this.h.next=K:this.g=K,this.h=K}}var le=new V(()=>new X,p=>p.reset());class X{constructor(){this.next=this.g=this.h=null}set(T,M){this.h=T,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,Re=!1,B=new $,O=()=>{const p=Promise.resolve(void 0);Te=()=>{p.then(z)}};function z(){for(var p;p=ee();){try{p.h.call(p.g)}catch(M){P(M)}var T=le;T.j(p),T.h<100&&(T.h++,p.next=T.g,T.g=p)}Re=!1}function Y(){this.u=this.u,this.C=this.C}Y.prototype.u=!1,Y.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Y.prototype[Symbol.dispose]=function(){this.dispose()},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var se=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const M=()=>{};u.addEventListener("test",M,T),u.removeEventListener("test",M,T)}catch{}return p})();function H(p){return/^[\s\xa0]*$/.test(p)}function Le(p,T){G.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,T)}S(Le,G),Le.prototype.init=function(p,T){const M=this.type=p.type,K=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget,T||(M=="mouseover"?T=p.fromElement:M=="mouseout"&&(T=p.toElement)),this.relatedTarget=T,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),ne=0;function be(p,T,M,K,Ce){this.listener=p,this.proxy=null,this.src=T,this.type=M,this.capture=!!K,this.ha=Ce,this.key=++ne,this.da=this.fa=!1}function me(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ae(p,T,M){for(const K in p)T.call(M,p[K],K,p)}function He(p,T){for(const M in p)T.call(void 0,p[M],M,p)}function Q(p){const T={};for(const M in p)T[M]=p[M];return T}const we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(p,T){let M,K;for(let Ce=1;Ce<arguments.length;Ce++){K=arguments[Ce];for(M in K)p[M]=K[M];for(let qe=0;qe<we.length;qe++)M=we[qe],Object.prototype.hasOwnProperty.call(K,M)&&(p[M]=K[M])}}function je(p){this.src=p,this.g={},this.h=0}je.prototype.add=function(p,T,M,K,Ce){const qe=p.toString();p=this.g[qe],p||(p=this.g[qe]=[],this.h++);const Tt=Ee(p,T,K,Ce);return Tt>-1?(T=p[Tt],M||(T.fa=!1)):(T=new be(T,this.src,qe,!!K,Ce),T.fa=M,p.push(T)),T};function ce(p,T){const M=T.type;if(M in p.g){var K=p.g[M],Ce=Array.prototype.indexOf.call(K,T,void 0),qe;(qe=Ce>=0)&&Array.prototype.splice.call(K,Ce,1),qe&&(me(T),p.g[M].length==0&&(delete p.g[M],p.h--))}}function Ee(p,T,M,K){for(let Ce=0;Ce<p.length;++Ce){const qe=p[Ce];if(!qe.da&&qe.listener==T&&qe.capture==!!M&&qe.ha==K)return Ce}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),xe={};function Fe(p,T,M,K,Ce){if(Array.isArray(T)){for(let qe=0;qe<T.length;qe++)Fe(p,T[qe],M,K,Ce);return null}return M=Ot(M),p&&p[Oe]?p.J(T,M,h(K)?!!K.capture:!1,Ce):ot(p,T,M,!1,K,Ce)}function ot(p,T,M,K,Ce,qe){if(!T)throw Error("Invalid event type");const Tt=h(Ce)?!!Ce.capture:!!Ce;let hn=ht(p);if(hn||(p[ue]=hn=new je(p)),M=hn.add(T,M,K,Tt,qe),M.proxy)return M;if(K=Ue(),M.proxy=K,K.src=p,K.listener=M,p.addEventListener)se||(Ce=Tt),Ce===void 0&&(Ce=!1),p.addEventListener(T.toString(),K,Ce);else if(p.attachEvent)p.attachEvent(ve(T.toString()),K);else if(p.addListener&&p.removeListener)p.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return M}function Ue(){function p(M){return T.call(p.src,p.listener,M)}const T=bt;return p}function _e(p,T,M,K,Ce){if(Array.isArray(T))for(var qe=0;qe<T.length;qe++)_e(p,T[qe],M,K,Ce);else K=h(K)?!!K.capture:!!K,M=Ot(M),p&&p[Oe]?(p=p.i,qe=String(T).toString(),qe in p.g&&(T=p.g[qe],M=Ee(T,M,K,Ce),M>-1&&(me(T[M]),Array.prototype.splice.call(T,M,1),T.length==0&&(delete p.g[qe],p.h--)))):p&&(p=ht(p))&&(T=p.g[T.toString()],p=-1,T&&(p=Ee(T,M,K,Ce)),(M=p>-1?T[p]:null)&&Ke(M))}function Ke(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[Oe])ce(T.i,p);else{var M=p.type,K=p.proxy;T.removeEventListener?T.removeEventListener(M,K,p.capture):T.detachEvent?T.detachEvent(ve(M),K):T.addListener&&T.removeListener&&T.removeListener(K),(M=ht(T))?(ce(M,p),M.h==0&&(M.src=null,T[ue]=null)):me(p)}}}function ve(p){return p in xe?xe[p]:xe[p]="on"+p}function bt(p,T){if(p.da)p=!0;else{T=new Le(T,this);const M=p.listener,K=p.ha||p.src;p.fa&&Ke(p),p=M.call(K,T)}return p}function ht(p){return p=p[ue],p instanceof je?p:null}var Ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ot(p){return typeof p=="function"?p:(p[Ye]||(p[Ye]=function(T){return p.handleEvent(T)}),p[Ye])}function jt(){Y.call(this),this.i=new je(this),this.M=this,this.G=null}S(jt,Y),jt.prototype[Oe]=!0,jt.prototype.removeEventListener=function(p,T,M,K){_e(this,p,T,M,K)};function te(p,T){var M,K=p.G;if(K)for(M=[];K;K=K.G)M.push(K);if(p=p.M,K=T.type||T,typeof T=="string")T=new G(T,p);else if(T instanceof G)T.target=T.target||p;else{var Ce=T;T=new G(K,p),Ne(T,Ce)}Ce=!0;let qe,Tt;if(M)for(Tt=M.length-1;Tt>=0;Tt--)qe=T.g=M[Tt],Ce=it(qe,K,!0,T)&&Ce;if(qe=T.g=p,Ce=it(qe,K,!0,T)&&Ce,Ce=it(qe,K,!1,T)&&Ce,M)for(Tt=0;Tt<M.length;Tt++)qe=T.g=M[Tt],Ce=it(qe,K,!1,T)&&Ce}jt.prototype.N=function(){if(jt.Z.N.call(this),this.i){var p=this.i;for(const T in p.g){const M=p.g[T];for(let K=0;K<M.length;K++)me(M[K]);delete p.g[T],p.h--}}this.G=null},jt.prototype.J=function(p,T,M,K){return this.i.add(String(p),T,!1,M,K)},jt.prototype.K=function(p,T,M,K){return this.i.add(String(p),T,!0,M,K)};function it(p,T,M,K){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();let Ce=!0;for(let qe=0;qe<T.length;++qe){const Tt=T[qe];if(Tt&&!Tt.da&&Tt.capture==M){const hn=Tt.listener,ws=Tt.ha||Tt.src;Tt.fa&&ce(p.i,Tt),Ce=hn.call(ws,K)!==!1&&Ce}}return Ce&&!K.defaultPrevented}function kt(p,T){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=b(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:u.setTimeout(p,T||0)}function Rt(p){p.g=kt(()=>{p.g=null,p.i&&(p.i=!1,Rt(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class mt extends Y{constructor(T,M){super(),this.m=T,this.l=M,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ht(p){Y.call(this),this.h=p,this.g={}}S(Ht,Y);var Zt=[];function Qt(p){Ae(p.g,function(T,M){this.g.hasOwnProperty(M)&&Ke(T)},p),p.g={}}Ht.prototype.N=function(){Ht.Z.N.call(this),Qt(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ze=u.JSON.stringify,Ze=u.JSON.parse,gt=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Lt(){}function Bt(){}var Ct={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dt(){G.call(this,"d")}S(Dt,G);function St(){G.call(this,"c")}S(St,G);var wt={},Kt=null;function bn(){return Kt=Kt||new jt}wt.Ia="serverreachability";function un(p){G.call(this,wt.Ia,p)}S(un,G);function Pn(p){const T=bn();te(T,new un(T))}wt.STAT_EVENT="statevent";function fs(p,T){G.call(this,wt.STAT_EVENT,p),this.stat=T}S(fs,G);function rn(p){const T=bn();te(T,new fs(T,p))}wt.Ja="timingevent";function Bn(p,T){G.call(this,wt.Ja,p),this.size=T}S(Bn,G);function ss(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},T)}function Gn(){this.g=!0}Gn.prototype.ua=function(){this.g=!1};function xr(p,T,M,K,Ce,qe){p.info(function(){if(p.g)if(qe){var Tt="",hn=qe.split("&");for(let On=0;On<hn.length;On++){var ws=hn[On].split("=");if(ws.length>1){const is=ws[0];ws=ws[1];const qr=is.split("_");Tt=qr.length>=2&&qr[1]=="type"?Tt+(is+"="+ws+"&"):Tt+(is+"=redacted&")}}}else Tt=null;else Tt=qe;return"XMLHTTP REQ ("+K+") [attempt "+Ce+"]: "+T+`
`+M+`
`+Tt})}function as(p,T,M,K,Ce,qe,Tt){p.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+Ce+"]: "+T+`
`+M+`
`+qe+" "+Tt})}function ls(p,T,M,K){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+ur(p,M)+(K?" "+K:"")})}function bs(p,T){p.info(function(){return"TIMEOUT: "+T})}Gn.prototype.info=function(){};function ur(p,T){if(!p.g)return T;if(!T)return null;try{const qe=JSON.parse(T);if(qe){for(p=0;p<qe.length;p++)if(Array.isArray(qe[p])){var M=qe[p];if(!(M.length<2)){var K=M[1];if(Array.isArray(K)&&!(K.length<1)){var Ce=K[0];if(Ce!="noop"&&Ce!="stop"&&Ce!="close")for(let Tt=1;Tt<K.length;Tt++)K[Tt]=""}}}}return ze(qe)}catch{return T}}var Vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ms={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},sr;function pe(){}S(pe,Lt),pe.prototype.g=function(){return new XMLHttpRequest},sr=new pe;function Xe(p){return encodeURIComponent(String(p))}function st(p){var T=1;p=p.split(":");const M=[];for(;T>0&&p.length;)M.push(p.shift()),T--;return p.length&&M.push(p.join(":")),M}function nt(p,T,M,K){this.j=p,this.i=T,this.l=M,this.S=K||1,this.V=new Ht(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}var ie={},lt={};function ft(p,T,M){p.M=1,p.A=Sn(xt(T)),p.u=M,p.R=!0,_t(p,null)}function _t(p,T){p.F=Date.now(),Fn(p),p.B=xt(p.A);var M=p.B,K=p.S;Array.isArray(K)||(K=[String(K)]),qa(M.i,"t",K),p.C=0,M=p.j.L,p.h=new Qe,p.g=Io(p.j,M?T:null,!p.u),p.P>0&&(p.O=new mt(b(p.Y,p,p.g),p.P)),T=p.V,M=p.g,K=p.ba;var Ce="readystatechange";Array.isArray(Ce)||(Ce&&(Zt[0]=Ce.toString()),Ce=Zt);for(let qe=0;qe<Ce.length;qe++){const Tt=Fe(M,Ce[qe],K||T.handleEvent,!1,T.h||T);if(!Tt)break;T.g[Tt.key]=Tt}T=p.J?Q(p.J):{},p.u?(p.v||(p.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,T)):(p.v="GET",p.g.ea(p.B,p.v,null,T)),Pn(),xr(p.i,p.v,p.B,p.l,p.S,p.u)}nt.prototype.ba=function(p){p=p.target;const T=this.O;T&&Ar(p)==3?T.j():this.Y(p)},nt.prototype.Y=function(p){try{if(p==this.g)e:{const hn=Ar(this.g),ws=this.g.ya(),On=this.g.ca();if(!(hn<3)&&(hn!=3||this.g&&(this.h.h||this.g.la()||Kn(this.g)))){this.K||hn!=4||ws==7||(ws==8||On<=0?Pn(3):Pn(2)),J(this);var T=this.g.ca();this.X=T;var M=It(this);if(this.o=T==200,as(this.i,this.v,this.B,this.l,this.S,hn,T),this.o){if(this.U&&!this.L){t:{if(this.g){var K,Ce=this.g;if((K=Ce.g?Ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(K)){var qe=K;break t}}qe=null}if(p=qe)ls(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ae(this,p);else{this.o=!1,this.m=3,rn(12),re(this),U(this);break e}}if(this.R){p=!0;let is;for(;!this.K&&this.C<M.length;)if(is=Nn(this,M),is==lt){hn==4&&(this.m=4,rn(14),p=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(is==ie){this.m=4,rn(15),ls(this.i,this.l,M,"[Invalid Chunk]"),p=!1;break}else ls(this.i,this.l,is,null),ae(this,is);if(ln(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hn!=4||M.length!=0||this.h.h||(this.m=1,rn(16),p=!1),this.o=this.o&&p,!p)ls(this.i,this.l,M,"[Invalid Chunked Response]"),re(this),U(this);else if(M.length>0&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.aa&&!Tt.P&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),Rr(Tt),Tt.P=!0,rn(11))}}else ls(this.i,this.l,M,null),ae(this,M);hn==4&&re(this),this.o&&!this.K&&(hn==4?vc(this.j,this):(this.o=!1,Fn(this)))}else Ha(this.g),T==400&&M.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),re(this),U(this)}}}catch{}};function It(p){if(!ln(p))return p.g.la();const T=Kn(p.g);if(T==="")return"";let M="";const K=T.length,Ce=Ar(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return re(p),U(p),"";p.h.i=new u.TextDecoder}for(let qe=0;qe<K;qe++)p.h.h=!0,M+=p.h.i.decode(T[qe],{stream:!(Ce&&qe==K-1)});return T.length=0,p.h.g+=M,p.C=0,p.h.g}function ln(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Nn(p,T){var M=p.C,K=T.indexOf(`
`,M);return K==-1?lt:(M=Number(T.substring(M,K)),isNaN(M)?ie:(K+=1,K+M>T.length?lt:(T=T.slice(K,K+M),p.C=K+M,T)))}nt.prototype.cancel=function(){this.K=!0,re(this)};function Fn(p){p.T=Date.now()+p.H,Ys(p,p.H)}function Ys(p,T){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ss(b(p.aa,p),T)}function J(p){p.D&&(u.clearTimeout(p.D),p.D=null)}nt.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(bs(this.i,this.B),this.M!=2&&(Pn(),rn(17)),re(this),this.m=2,U(this)):Ys(this,this.T-p)};function U(p){p.j.I==0||p.K||vc(p.j,p)}function re(p){J(p);var T=p.O;T&&typeof T.dispose=="function"&&T.dispose(),p.O=null,Qt(p.V),p.g&&(T=p.g,p.g=null,T.abort(),T.dispose())}function ae(p,T){try{var M=p.j;if(M.I!=0&&(M.g==p||Nt(M.h,p))){if(!p.L&&Nt(M.h,p)&&M.I==3){try{var K=M.Ba.g.parse(T)}catch{K=null}if(Array.isArray(K)&&K.length==3){var Ce=K;if(Ce[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<p.F)Wi(M),Na(M);else break e;vi(M),rn(18)}}else M.xa=Ce[1],0<M.xa-M.K&&Ce[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=ss(b(M.Va,M),6e3));zt(M.h)<=1&&M.ta&&(M.ta=void 0)}else Sa(M,11)}else if((p.L||M.g==p)&&Wi(M),!H(T))for(Ce=M.Ba.g.parse(T),T=0;T<Ce.length;T++){let On=Ce[T];const is=On[0];if(!(is<=M.K))if(M.K=is,On=On[1],M.I==2)if(On[0]=="c"){M.M=On[1],M.ba=On[2];const qr=On[3];qr!=null&&(M.ka=qr,M.j.info("VER="+M.ka));const Ta=On[4];Ta!=null&&(M.za=Ta,M.j.info("SVER="+M.za));const Wr=On[5];Wr!=null&&typeof Wr=="number"&&Wr>0&&(K=1.5*Wr,M.O=K,M.j.info("backChannelRequestTimeoutMs_="+K)),K=M;const oa=p.g;if(oa){const Ka=oa.g?oa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var qe=K.h;qe.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(qe.j=qe.l,qe.g=new Set,qe.h&&(Ft(qe,qe.h),qe.h=null))}if(K.G){const Hi=oa.g?oa.g.getResponseHeader("X-HTTP-Session-Id"):null;Hi&&(K.wa=Hi,tn(K.J,K.G,Hi))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-p.F,M.j.info("Handshake RTT: "+M.T+"ms")),K=M;var Tt=p;if(K.na=yc(K,K.L?K.ba:null,K.W),Tt.L){he(K.h,Tt);var hn=Tt,ws=K.O;ws&&(hn.H=ws),hn.D&&(J(hn),Fn(hn)),K.g=Tt}else Dl(K);M.i.length>0&&Jn(M)}else On[0]!="stop"&&On[0]!="close"||Sa(M,7);else M.I==3&&(On[0]=="stop"||On[0]=="close"?On[0]=="stop"?Sa(M,7):ps(M):On[0]!="noop"&&M.l&&M.l.qa(On),M.A=0)}}Pn(4)}catch{}}var ke=class{constructor(p,T){this.g=p,this.map=T}};function tt(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $e(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function zt(p){return p.h?1:p.g?p.g.size:0}function Nt(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function Ft(p,T){p.g?p.g.add(T):p.h=T}function he(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}tt.prototype.cancel=function(){if(this.i=De(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function De(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const M of p.g.values())T=T.concat(M.G);return T}return F(p.i)}var Be=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vt(p,T){if(p){p=p.split("&");for(let M=0;M<p.length;M++){const K=p[M].indexOf("=");let Ce,qe=null;K>=0?(Ce=p[M].substring(0,K),qe=p[M].substring(K+1)):Ce=p[M],T(Ce,qe?decodeURIComponent(qe.replace(/\+/g," ")):"")}}}function yt(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;p instanceof yt?(this.l=p.l,At(this,p.j),this.o=p.o,this.g=p.g,Yt(this,p.u),this.h=p.h,dn(this,Co(p.i)),this.m=p.m):p&&(T=String(p).match(Be))?(this.l=!1,At(this,T[1]||"",!0),this.o=xs(T[2]||""),this.g=xs(T[3]||"",!0),Yt(this,T[4]),this.h=xs(T[5]||"",!0),dn(this,T[6]||"",!0),this.m=xs(T[7]||"")):(this.l=!1,this.i=new dr(null,this.l))}yt.prototype.toString=function(){const p=[];var T=this.j;T&&p.push(Fa(T,za,!0),":");var M=this.g;return(M||T=="file")&&(p.push("//"),(T=this.o)&&p.push(Fa(T,za,!0),"@"),p.push(Xe(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&p.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&p.push("/"),p.push(Fa(M,M.charAt(0)=="/"?Tn:Ui,!0))),(M=this.i.toString())&&p.push("?",M),(M=this.m)&&p.push("#",Fa(M,Cr)),p.join("")},yt.prototype.resolve=function(p){const T=xt(this);let M=!!p.j;M?At(T,p.j):M=!!p.o,M?T.o=p.o:M=!!p.g,M?T.g=p.g:M=p.u!=null;var K=p.h;if(M)Yt(T,p.u);else if(M=!!p.h){if(K.charAt(0)!="/")if(this.g&&!this.h)K="/"+K;else{var Ce=T.h.lastIndexOf("/");Ce!=-1&&(K=T.h.slice(0,Ce+1)+K)}if(Ce=K,Ce==".."||Ce==".")K="";else if(Ce.indexOf("./")!=-1||Ce.indexOf("/.")!=-1){K=Ce.lastIndexOf("/",0)==0,Ce=Ce.split("/");const qe=[];for(let Tt=0;Tt<Ce.length;){const hn=Ce[Tt++];hn=="."?K&&Tt==Ce.length&&qe.push(""):hn==".."?((qe.length>1||qe.length==1&&qe[0]!="")&&qe.pop(),K&&Tt==Ce.length&&qe.push("")):(qe.push(hn),K=!0)}K=qe.join("/")}else K=Ce}return M?T.h=K:M=p.i.toString()!=="",M?dn(T,Co(p.i)):M=!!p.m,M&&(T.m=p.m),T};function xt(p){return new yt(p)}function At(p,T,M){p.j=M?xs(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function Yt(p,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);p.u=T}else p.u=null}function dn(p,T,M){T instanceof dr?(p.i=T,Ao(p.i,p.l)):(M||(T=Fa(T,cs)),p.i=new dr(T,p.l))}function tn(p,T,M){p.i.set(T,M)}function Sn(p){return tn(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function xs(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Fa(p,T,M){return typeof p=="string"?(p=encodeURI(p).replace(T,Qs),M&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Qs(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var za=/[#\/\?@]/g,Ui=/[#\?:]/g,Tn=/[#\?]/g,cs=/[#\?@]/g,Cr=/#/g;function dr(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function Ns(p){p.g||(p.g=new Map,p.h=0,p.i&&vt(p.i,function(T,M){p.add(decodeURIComponent(T.replace(/\+/g," ")),M)}))}r=dr.prototype,r.add=function(p,T){Ns(this),this.i=null,p=Fr(this,p);let M=this.g.get(p);return M||this.g.set(p,M=[]),M.push(T),this.h+=1,this};function rr(p,T){Ns(p),T=Fr(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function hr(p,T){return Ns(p),T=Fr(p,T),p.g.has(T)}r.forEach=function(p,T){Ns(this),this.g.forEach(function(M,K){M.forEach(function(Ce){p.call(T,Ce,K,this)},this)},this)};function ra(p,T){Ns(p);let M=[];if(typeof T=="string")hr(p,T)&&(M=M.concat(p.g.get(Fr(p,T))));else for(p=Array.from(p.g.values()),T=0;T<p.length;T++)M=M.concat(p[T]);return M}r.set=function(p,T){return Ns(this),this.i=null,p=Fr(this,p),hr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},r.get=function(p,T){return p?(p=ra(this,p),p.length>0?String(p[0]):T):T};function qa(p,T,M){rr(p,T),M.length>0&&(p.i=null,p.g.set(Fr(p,T),F(M)),p.h+=M.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(let K=0;K<T.length;K++){var M=T[K];const Ce=Xe(M);M=ra(this,M);for(let qe=0;qe<M.length;qe++){let Tt=Ce;M[qe]!==""&&(Tt+="="+Xe(M[qe])),p.push(Tt)}}return this.i=p.join("&")};function Co(p){const T=new dr;return T.i=p.i,p.g&&(T.g=new Map(p.g),T.h=p.h),T}function Fr(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function Ao(p,T){T&&!p.j&&(Ns(p),p.i=null,p.g.forEach(function(M,K){const Ce=K.toLowerCase();K!=Ce&&(rr(this,K),qa(this,Ce,M))},p)),p.j=T}function aa(p,T){const M=new Gn;if(u.Image){const K=new Image;K.onload=k(zr,M,"TestLoadImage: loaded",!0,T,K),K.onerror=k(zr,M,"TestLoadImage: error",!1,T,K),K.onabort=k(zr,M,"TestLoadImage: abort",!1,T,K),K.ontimeout=k(zr,M,"TestLoadImage: timeout",!1,T,K),u.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=p}else T(!1)}function Rl(p,T){const M=new Gn,K=new AbortController,Ce=setTimeout(()=>{K.abort(),zr(M,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:K.signal}).then(qe=>{clearTimeout(Ce),qe.ok?zr(M,"TestPingServer: ok",!0,T):zr(M,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(Ce),zr(M,"TestPingServer: error",!1,T)})}function zr(p,T,M,K,Ce){try{Ce&&(Ce.onload=null,Ce.onerror=null,Ce.onabort=null,Ce.ontimeout=null),K(M)}catch{}}function hi(){this.g=new gt}function fr(p){this.i=p.Sb||null,this.h=p.ab||!1}S(fr,Lt),fr.prototype.g=function(){return new Fi(this.i,this.h)};function Fi(p,T){jt.call(this),this.H=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Fi,jt),r=Fi.prototype,r.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=T,this.readyState=1,ia(this)},r.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(T.body=p),(this.H||u).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mi(this)),this.readyState=0},r.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ia(this)),this.g&&(this.readyState=3,ia(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fi(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function fi(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}r.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?mi(this):ia(this),this.readyState==3&&fi(this)}},r.Oa=function(p){this.g&&(this.response=this.responseText=p,mi(this))},r.Na=function(p){this.g&&(this.response=p,mi(this))},r.ga=function(){this.g&&mi(this)};function mi(p){p.readyState=4,p.l=null,p.j=null,p.B=null,ia(p)}r.setRequestHeader=function(p,T){this.A.append(p,T)},r.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var M=T.next();!M.done;)M=M.value,p.push(M[0]+": "+M[1]),M=T.next();return p.join(`\r
`)};function ia(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function wr(p){let T="";return Ae(p,function(M,K){T+=K,T+=":",T+=M,T+=`\r
`}),T}function zi(p,T,M){e:{for(K in M){var K=!1;break e}K=!0}K||(M=wr(M),typeof p=="string"?M!=null&&Xe(M):tn(p,T,M))}function Wn(p){jt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Wn,jt);var _a=/^https?$/i,Ml=["POST","PUT"];r=Wn.prototype,r.Fa=function(p){this.H=p},r.ea=function(p,T,M,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():sr.g(),this.g.onreadystatechange=E(b(this.Ca,this));try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(qe){ka(this,qe);return}if(p=M||"",M=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var Ce in K)M.set(Ce,K[Ce]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const qe of K.keys())M.set(qe,K.get(qe));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(M.keys()).find(qe=>qe.toLowerCase()=="content-type"),Ce=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(Ml,T,void 0)>=0)||K||Ce||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[qe,Tt]of M)this.g.setRequestHeader(qe,Tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(qe){ka(this,qe)}};function ka(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.o=5,Ro(p),Wa(p)}function Ro(p){p.A||(p.A=!0,te(p,"complete"),te(p,"error"))}r.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,te(this,"complete"),te(this,"abort"),Wa(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wa(this,!0)),Wn.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?pi(this):this.Xa())},r.Xa=function(){pi(this)};function pi(p){if(p.h&&typeof c<"u"){if(p.v&&Ar(p)==4)setTimeout(p.Ca.bind(p),0);else if(te(p,"readystatechange"),Ar(p)==4){p.h=!1;try{const qe=p.ca();e:switch(qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var M;if(!(M=T)){var K;if(K=qe===0){let Tt=String(p.D).match(Be)[1]||null;!Tt&&u.self&&u.self.location&&(Tt=u.self.location.protocol.slice(0,-1)),K=!_a.test(Tt?Tt.toLowerCase():"")}M=K}if(M)te(p,"complete"),te(p,"success");else{p.o=6;try{var Ce=Ar(p)>2?p.g.statusText:""}catch{Ce=""}p.l=Ce+" ["+p.ca()+"]",Ro(p)}}finally{Wa(p)}}}}function Wa(p,T){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const M=p.g;p.g=null,T||te(p,"ready");try{M.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Ar(p){return p.g?p.g.readyState:0}r.ca=function(){try{return Ar(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),Ze(T)}};function Kn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ha(p){const T={};p=(p.g&&Ar(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<p.length;K++){if(H(p[K]))continue;var M=st(p[K]);const Ce=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const qe=T[Ce]||[];T[Ce]=qe,qe.push(M)}He(T,function(K){return K.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Us(p,T,M){return M&&M.internalChannelParams&&M.internalChannelParams[p]||T}function gi(p){this.za=0,this.i=[],this.j=new Gn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Us("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Us("baseRetryDelayMs",5e3,p),this.Za=Us("retryDelaySeedMs",1e4,p),this.Ta=Us("forwardChannelMaxRetries",2,p),this.va=Us("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new tt(p&&p.concurrentRequestLimit),this.Ba=new hi,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=gi.prototype,r.ka=8,r.I=1,r.connect=function(p,T,M,K){rn(0),this.W=p,this.H=T||{},M&&K!==void 0&&(this.H.OSID=M,this.H.OAID=K),this.F=this.X,this.J=yc(this,null,this.W),Jn(this)};function ps(p){if(Mo(p),p.I==3){var T=p.V++,M=xt(p.J);if(tn(M,"SID",p.M),tn(M,"RID",T),tn(M,"TYPE","terminate"),qi(p,M),T=new nt(p,p.j,T),T.M=2,T.A=Sn(xt(M)),M=!1,u.navigator&&u.navigator.sendBeacon)try{M=u.navigator.sendBeacon(T.A.toString(),"")}catch{}!M&&u.Image&&(new Image().src=T.A,M=!0),M||(T.g=Io(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Fn(T)}Pl(p)}function Na(p){p.g&&(Rr(p),p.g.cancel(),p.g=null)}function Mo(p){Na(p),p.v&&(u.clearTimeout(p.v),p.v=null),Wi(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function Jn(p){if(!$e(p.h)&&!p.m){p.m=!0;var T=p.Ea;Te||O(),Re||(Te(),Re=!0),B.add(T,p),p.D=0}}function Do(p,T){return zt(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=T.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ss(b(p.Ea,p,T),Il(p,p.D)),p.D++,!0)}r.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const Ce=new nt(this,this.j,p);let qe=this.o;if(this.U&&(qe?(qe=Q(qe),Ne(qe,this.U)):qe=this.U),this.u!==null||this.R||(Ce.J=qe,qe=null),this.S)e:{for(var T=0,M=0;M<this.i.length;M++){t:{var K=this.i[M];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(T+=K,T>4096){T=M;break e}if(T===4096||M===this.i.length-1){T=M+1;break e}}T=1e3}else T=1e3;T=As(this,Ce,T),M=xt(this.J),tn(M,"RID",p),tn(M,"CVER",22),this.G&&tn(M,"X-HTTP-Session-Id",this.G),qi(this,M),qe&&(this.R?T="headers="+Xe(wr(qe))+"&"+T:this.u&&zi(M,this.u,qe)),Ft(this.h,Ce),this.Ra&&tn(M,"TYPE","init"),this.S?(tn(M,"$req",T),tn(M,"SID","null"),Ce.U=!0,ft(Ce,M,null)):ft(Ce,M,T),this.I=2}}else this.I==3&&(p?pn(this,p):this.i.length==0||$e(this.h)||pn(this))};function pn(p,T){var M;T?M=T.l:M=p.V++;const K=xt(p.J);tn(K,"SID",p.M),tn(K,"RID",M),tn(K,"AID",p.K),qi(p,K),p.u&&p.o&&zi(K,p.u,p.o),M=new nt(p,p.j,M,p.D+1),p.u===null&&(M.J=p.o),T&&(p.i=T.G.concat(p.i)),T=As(p,M,1e3),M.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ft(p.h,M),ft(M,K,T)}function qi(p,T){p.H&&Ae(p.H,function(M,K){tn(T,K,M)}),p.l&&Ae({},function(M,K){tn(T,K,M)})}function As(p,T,M){M=Math.min(p.i.length,M);const K=p.l?b(p.l.Ka,p.l,p):null;e:{var Ce=p.i;let hn=-1;for(;;){const ws=["count="+M];hn==-1?M>0?(hn=Ce[0].g,ws.push("ofs="+hn)):hn=0:ws.push("ofs="+hn);let On=!0;for(let is=0;is<M;is++){var qe=Ce[is].g;const qr=Ce[is].map;if(qe-=hn,qe<0)hn=Math.max(0,Ce[is].g-100),On=!1;else try{qe="req"+qe+"_"||"";try{var Tt=qr instanceof Map?qr:Object.entries(qr);for(const[Ta,Wr]of Tt){let oa=Wr;h(Wr)&&(oa=ze(Wr)),ws.push(qe+Ta+"="+encodeURIComponent(oa))}}catch(Ta){throw ws.push(qe+"type="+encodeURIComponent("_badmap")),Ta}}catch{K&&K(qr)}}if(On){Tt=ws.join("&");break e}}Tt=void 0}return p=p.i.splice(0,M),T.G=p,Tt}function Dl(p){if(!p.g&&!p.v){p.Y=1;var T=p.Da;Te||O(),Re||(Te(),Re=!0),B.add(T,p),p.A=0}}function vi(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ss(b(p.Da,p),Il(p,p.A)),p.A++,!0)}r.Da=function(){if(this.v=null,gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ss(b(this.Wa,this),p)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Na(this),gc(this))};function Rr(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function gc(p){p.g=new nt(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var T=xt(p.na);tn(T,"RID","rpc"),tn(T,"SID",p.M),tn(T,"AID",p.K),tn(T,"CI",p.F?"0":"1"),!p.F&&p.ia&&tn(T,"TO",p.ia),tn(T,"TYPE","xmlhttp"),qi(p,T),p.u&&p.o&&zi(T,p.u,p.o),p.O&&(p.g.H=p.O);var M=p.g;p=p.ba,M.M=1,M.A=Sn(xt(T)),M.u=null,M.R=!0,_t(M,p)}r.Va=function(){this.C!=null&&(this.C=null,Na(this),vi(this),rn(19))};function Wi(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function vc(p,T){var M=null;if(p.g==T){Wi(p),Rr(p),p.g=null;var K=2}else if(Nt(p.h,T))M=T.G,he(p.h,T),K=1;else return;if(p.I!=0){if(T.o)if(K==1){M=T.u?T.u.length:0,T=Date.now()-T.F;var Ce=p.D;K=bn(),te(K,new Bn(K,M)),Jn(p)}else Dl(p);else if(Ce=T.m,Ce==3||Ce==0&&T.X>0||!(K==1&&Do(p,T)||K==2&&vi(p)))switch(M&&M.length>0&&(T=p.h,T.i=T.i.concat(M)),Ce){case 1:Sa(p,5);break;case 4:Sa(p,10);break;case 3:Sa(p,6);break;default:Sa(p,2)}}}function Il(p,T){let M=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(M*=2),M*T}function Sa(p,T){if(p.j.info("Error code "+T),T==2){var M=b(p.bb,p),K=p.Ua;const Ce=!K;K=new yt(K||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||At(K,"https"),Sn(K),Ce?aa(K.toString(),M):Rl(K.toString(),M)}else rn(2);p.I=0,p.l&&p.l.pa(T),Pl(p),Mo(p)}r.bb=function(p){p?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function Pl(p){if(p.I=0,p.ja=[],p.l){const T=De(p.h);(T.length!=0||p.i.length!=0)&&(L(p.ja,T),L(p.ja,p.i),p.h.i.length=0,F(p.i),p.i.length=0),p.l.oa()}}function yc(p,T,M){var K=M instanceof yt?xt(M):new yt(M);if(K.g!="")T&&(K.g=T+"."+K.g),Yt(K,K.u);else{var Ce=u.location;K=Ce.protocol,T=T?T+"."+Ce.hostname:Ce.hostname,Ce=+Ce.port;const qe=new yt(null);K&&At(qe,K),T&&(qe.g=T),Ce&&Yt(qe,Ce),M&&(qe.h=M),K=qe}return M=p.G,T=p.wa,M&&T&&tn(K,M,T),tn(K,"VER",p.ka),qi(p,K),K}function Io(p,T,M){if(T&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Aa&&!p.ma?new Wn(new fr({ab:M})):new Wn(p.ma),T.Fa(p.L),T}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Po(){}r=Po.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function $a(){}$a.prototype.g=function(p,T){return new ar(p,T)};function ar(p,T){jt.call(this),this.g=new gi(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(p?p["X-WebChannel-Client-Profile"]=T.sa:p={"X-WebChannel-Client-Profile":T.sa}),this.g.U=p,(p=T&&T.Qb)&&!H(p)&&(this.g.u=p),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!H(T)&&(this.g.G=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new Ga(this)}S(ar,jt),ar.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ar.prototype.close=function(){ps(this.g)},ar.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var M={};M.__data__=p,p=M}else this.v&&(M={},M.__data__=ze(p),p=M);T.i.push(new ke(T.Ya++,p)),T.I==3&&Jn(T)},ar.prototype.N=function(){this.g.l=null,delete this.j,ps(this.g),delete this.g,ar.Z.N.call(this)};function bc(p){Dt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const M in T){p=M;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}S(bc,Dt);function Ol(){St.call(this),this.status=1}S(Ol,St);function Ga(p){this.g=p}S(Ga,Po),Ga.prototype.ra=function(){te(this.g,"a")},Ga.prototype.qa=function(p){te(this.g,new bc(p))},Ga.prototype.pa=function(p){te(this.g,new Ol)},Ga.prototype.oa=function(){te(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,ar.prototype.send=ar.prototype.o,ar.prototype.open=ar.prototype.m,ar.prototype.close=ar.prototype.close,Yw=function(){return new $a},Kw=function(){return bn()},Gw=wt,iv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,Pf=Vs,ms.COMPLETE="complete",$w=ms,Bt.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",jt.prototype.listen=jt.prototype.J,bd=Bt,Wn.prototype.listenOnce=Wn.prototype.K,Wn.prototype.getLastError=Wn.prototype.Ha,Wn.prototype.getLastErrorCode=Wn.prototype.ya,Wn.prototype.getStatus=Wn.prototype.ca,Wn.prototype.getResponseJson=Wn.prototype.La,Wn.prototype.getResponseText=Wn.prototype.la,Wn.prototype.send=Wn.prototype.ea,Wn.prototype.setWithCredentials=Wn.prototype.Fa,Hw=Wn}).apply(typeof mf<"u"?mf:typeof self<"u"?self:typeof window<"u"?window:{});class Sr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");let gu="12.8.0";function qC(r){gu=r}const oc=new Bv("@firebase/firestore");function Yc(){return oc.logLevel}function qt(r,...e){if(oc.logLevel<=Rn.DEBUG){const t=e.map(Jv);oc.debug(`Firestore (${gu}): ${r}`,...t)}}function ko(r,...e){if(oc.logLevel<=Rn.ERROR){const t=e.map(Jv);oc.error(`Firestore (${gu}): ${r}`,...t)}}function iu(r,...e){if(oc.logLevel<=Rn.WARN){const t=e.map(Jv);oc.warn(`Firestore (${gu}): ${r}`,...t)}}function Jv(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function on(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Qw(r,i,t)}function Qw(r,e,t){let i=`FIRESTORE (${gu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ko(i),new Error(i)}function $n(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||Qw(e,o,i)}function mn(r,e){return r}const ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vt extends Vi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Xw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Sr.UNAUTHENTICATED)))}shutdown(){}}class HC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $C{constructor(e){this.t=e,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$n(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let c=new xo;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new xo,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=c;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},h=m=>{qt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(qt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new xo)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(qt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($n(typeof i.accessToken=="string",31837,{l:i}),new Xw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $n(e===null||typeof e=="string",2055,{h:e}),new Sr(e)}}class GC{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class KC{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new GC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Sr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ux{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ya(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$n(this.o===void 0,3512);const i=c=>{c.error!=null&&qt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,qt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{qt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):qt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ux(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($n(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ux(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function QC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class Zv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=QC(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}}function Mn(r,e){return r<e?-1:r>e?1:0}function ov(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),c=e.charAt(i);if(o!==c)return _g(o)===_g(c)?Mn(o,c):_g(o)?1:-1}return Mn(r.length,e.length)}const XC=55296,JC=57343;function _g(r){const e=r.charCodeAt(0);return e>=XC&&e<=JC}function ou(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}const dx="__name__";class Ai{constructor(e,t,i){t===void 0?t=0:t>e.length&&on(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&on(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const c=Ai.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Mn(e.length,t.length)}static compareSegments(e,t){const i=Ai.isNumericId(e),o=Ai.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):ov(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yl.fromString(e.substring(4,e.length-2))}}class os extends Ai{construct(e,t,i){return new os(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Vt(ut.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new os(t)}static emptyPath(){return new os([])}}const ZC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends Ai{construct(e,t,i){return new yr(e,t,i)}static isValidIdentifier(e){return ZC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dx}static keyField(){return new yr([dx])}static fromServerFormat(e){const t=[];let i="",o=0;const c=()=>{if(i.length===0)throw new Vt(ut.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new Vt(ut.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Vt(ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else h==="`"?(u=!u,o++):h!=="."||u?(i+=h,o++):(c(),o++)}if(c(),u)throw new Vt(ut.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class Jt{constructor(e){this.path=e}static fromPath(e){return new Jt(os.fromString(e))}static fromName(e){return new Jt(os.fromString(e).popFirst(5))}static empty(){return new Jt(os.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&os.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return os.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jt(new os(e.slice()))}}function Jw(r,e,t){if(!t)throw new Vt(ut.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function eA(r,e,t,i){if(e===!0&&i===!0)throw new Vt(ut.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function hx(r){if(!Jt.isDocumentKey(r))throw new Vt(ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function fx(r){if(Jt.isDocumentKey(r))throw new Vt(ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Zw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function xm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":on(12329,{type:typeof r})}function ci(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Vt(ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xm(r);throw new Vt(ut.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Ks(r,e){const t={typeString:r};return e&&(t.value=e),t}function Zd(r,e){if(!Zw(r))throw new Vt(ut.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const u=r[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new Vt(ut.INVALID_ARGUMENT,t);return!0}const mx=-62135596800,px=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*px);return new Et(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Vt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Vt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mx)throw new Vt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/px}_compareTo(e){return this.seconds===e.seconds?Mn(this.nanoseconds,e.nanoseconds):Mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zd(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:Ks("string",Et._jsonSchemaVersion),seconds:Ks("number"),nanoseconds:Ks("number")};class cn{static fromTimestamp(e){return new cn(e)}static min(){return new cn(new Et(0,0))}static max(){return new cn(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ld=-1;function tA(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=cn.fromTimestamp(i===1e9?new Et(t+1,0):new Et(t,i));return new wl(o,Jt.empty(),e)}function nA(r){return new wl(r.readTime,r.key,Ld)}class wl{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new wl(cn.min(),Jt.empty(),Ld)}static max(){return new wl(cn.max(),Jt.empty(),Ld)}}function sA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Jt.comparator(r.documentKey,e.documentKey),t!==0?t:Mn(r.largestBatchId,e.largestBatchId))}const rA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function vu(r){if(r.code!==ut.FAILED_PRECONDITION||r.message!==rA)throw r;qt("LocalStore","Unexpectedly lost primary lease")}class pt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&on(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pt(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pt?t:pt.resolve(t)}catch(t){return pt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pt.reject(t)}static resolve(e){return new pt(((t,i)=>{t(e)}))}static reject(e){return new pt(((t,i)=>{i(e)}))}static waitFor(e){return new pt(((t,i)=>{let o=0,c=0,u=!1;e.forEach((h=>{++o,h.next((()=>{++c,u&&c===o&&t()}),(m=>i(m)))})),u=!0,c===o&&t()}))}static or(e){let t=pt.resolve(!1);for(const i of e)t=t.next((o=>o?pt.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,c)=>{i.push(t.call(this,o,c))})),this.waitFor(i)}static mapArray(e,t){return new pt(((i,o)=>{const c=e.length,u=new Array(c);let h=0;for(let m=0;m<c;m++){const b=m;t(e[b]).next((k=>{u[b]=k,++h,h===c&&i(u)}),(k=>o(k)))}}))}static doWhile(e,t){return new pt(((i,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):i()};c()}))}}function iA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yu(r){return r.name==="IndexedDbTransactionError"}class wm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wm.ce=-1;const e0=-1;function jm(r){return r==null}function tm(r){return r===0&&1/r==-1/0}function oA(r){return typeof r=="number"&&Number.isInteger(r)&&!tm(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const ej="";function lA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=gx(e)),e=cA(r.get(t),e);return gx(e)}function cA(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const c=r.charAt(o);switch(c){case"\0":t+="";break;case ej:t+="";break;default:t+=c}}return t}function gx(r){return r+ej+""}function vx(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Cl(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function tj(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ks{constructor(e,t){this.comparator=e,this.root=t||vr.EMPTY}insert(e,t){return new ks(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new ks(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pf(this.root,e,this.comparator,!1)}getReverseIterator(){return new pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pf(this.root,e,this.comparator,!0)}}class pf{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vr{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??vr.RED,this.left=o??vr.EMPTY,this.right=c??vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new vr(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return vr.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw on(43730,{key:this.key,value:this.value});if(this.right.isRed())throw on(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw on(27949);return e+(this.isRed()?0:1)}}vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1;vr.EMPTY=new class{constructor(){this.size=0}get key(){throw on(57766)}get value(){throw on(16141)}get color(){throw on(16727)}get left(){throw on(29726)}get right(){throw on(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new vr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nr{constructor(e){this.comparator=e,this.data=new ks(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yx(this.data.getIterator())}getIteratorFrom(e){return new yx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof nr)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new nr(this.comparator);return t.data=e,t}}class yx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ba{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new ba([])}unionWith(e){let t=new nr(yr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ba(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ou(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class nj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new nj("Invalid base64 string: "+c):c}})(e);return new br(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const uA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jl(r){if($n(!!r,39018),typeof r=="string"){let e=0;const t=uA.exec(r);if($n(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Os(r.seconds),nanos:Os(r.nanos)}}function Os(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function _l(r){return typeof r=="string"?br.fromBase64String(r):br.fromUint8Array(r)}const sj="server_timestamp",rj="__type__",aj="__previous_value__",ij="__local_write_time__";function t0(r){return(r?.mapValue?.fields||{})[rj]?.stringValue===sj}function _m(r){const e=r.mapValue.fields[aj];return t0(e)?_m(e):e}function Bd(r){const e=jl(r.mapValue.fields[ij].timestampValue);return new Et(e.seconds,e.nanos)}class dA{constructor(e,t,i,o,c,u,h,m,b,k,S){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=b,this.isUsingEmulator=k,this.apiKey=S}}const nm="(default)";class Vd{constructor(e,t){this.projectId=e,this.database=t||nm}static empty(){return new Vd("","")}get isDefaultDatabase(){return this.database===nm}isEqual(e){return e instanceof Vd&&e.projectId===this.projectId&&e.database===this.database}}function hA(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Vt(ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vd(r.options.projectId,e)}const oj="__type__",fA="__max__",gf={mapValue:{}},lj="__vector__",sm="value";function kl(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?t0(r)?4:pA(r)?9007199254740991:mA(r)?10:11:on(28295,{value:r})}function Li(r,e){if(r===e)return!0;const t=kl(r);if(t!==kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Bd(r).isEqual(Bd(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=jl(o.timestampValue),h=jl(c.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return _l(o.bytesValue).isEqual(_l(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return Os(o.geoPointValue.latitude)===Os(c.geoPointValue.latitude)&&Os(o.geoPointValue.longitude)===Os(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Os(o.integerValue)===Os(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=Os(o.doubleValue),h=Os(c.doubleValue);return u===h?tm(u)===tm(h):isNaN(u)&&isNaN(h)}return!1})(r,e);case 9:return ou(r.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},h=c.mapValue.fields||{};if(vx(u)!==vx(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!Li(u[m],h[m])))return!1;return!0})(r,e);default:return on(52216,{left:r})}}function Ud(r,e){return(r.values||[]).find((t=>Li(t,e)))!==void 0}function lu(r,e){if(r===e)return 0;const t=kl(r),i=kl(e);if(t!==i)return Mn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mn(r.booleanValue,e.booleanValue);case 2:return(function(c,u){const h=Os(c.integerValue||c.doubleValue),m=Os(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(r,e);case 3:return bx(r.timestampValue,e.timestampValue);case 4:return bx(Bd(r),Bd(e));case 5:return ov(r.stringValue,e.stringValue);case 6:return(function(c,u){const h=_l(c),m=_l(u);return h.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(c,u){const h=c.split("/"),m=u.split("/");for(let b=0;b<h.length&&b<m.length;b++){const k=Mn(h[b],m[b]);if(k!==0)return k}return Mn(h.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,u){const h=Mn(Os(c.latitude),Os(u.latitude));return h!==0?h:Mn(Os(c.longitude),Os(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return xx(r.arrayValue,e.arrayValue);case 10:return(function(c,u){const h=c.fields||{},m=u.fields||{},b=h[sm]?.arrayValue,k=m[sm]?.arrayValue,S=Mn(b?.values?.length||0,k?.values?.length||0);return S!==0?S:xx(b,k)})(r.mapValue,e.mapValue);case 11:return(function(c,u){if(c===gf.mapValue&&u===gf.mapValue)return 0;if(c===gf.mapValue)return 1;if(u===gf.mapValue)return-1;const h=c.fields||{},m=Object.keys(h),b=u.fields||{},k=Object.keys(b);m.sort(),k.sort();for(let S=0;S<m.length&&S<k.length;++S){const E=ov(m[S],k[S]);if(E!==0)return E;const F=lu(h[m[S]],b[k[S]]);if(F!==0)return F}return Mn(m.length,k.length)})(r.mapValue,e.mapValue);default:throw on(23264,{he:t})}}function bx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Mn(r,e);const t=jl(r),i=jl(e),o=Mn(t.seconds,i.seconds);return o!==0?o:Mn(t.nanos,i.nanos)}function xx(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const c=lu(t[o],i[o]);if(c)return c}return Mn(t.length,i.length)}function cu(r){return lv(r)}function lv(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=jl(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return _l(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Jt.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const c of t.values||[])o?o=!1:i+=",",i+=lv(c);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const u of i)c?c=!1:o+=",",o+=`${u}:${lv(t.fields[u])}`;return o+"}"})(r.mapValue):on(61005,{value:r})}function Of(r){switch(kl(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_m(r);return e?16+Of(e):16;case 5:return 2*r.stringValue.length;case 6:return _l(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+Of(c)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Cl(i.fields,((c,u)=>{o+=c.length+Of(u)})),o})(r.mapValue);default:throw on(13486,{value:r})}}function wx(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function cv(r){return!!r&&"integerValue"in r}function n0(r){return!!r&&"arrayValue"in r}function jx(r){return!!r&&"nullValue"in r}function _x(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Lf(r){return!!r&&"mapValue"in r}function mA(r){return(r?.mapValue?.fields||{})[oj]?.stringValue===lj}function Td(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Cl(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Td(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Td(r.arrayValue.values[t]);return e}return{...r}}function pA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===fA}class sa{constructor(e){this.value=e}static empty(){return new sa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Lf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Td(t)}setAll(e){let t=yr.emptyPath(),i={},o=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=h.popLast()}u?i[h.lastSegment()]=Td(u):o.push(h.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,o)}delete(e){const t=this.field(e.popLast());Lf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Lf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Cl(t,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new sa(Td(this.value))}}function cj(r){const e=[];return Cl(r.fields,((t,i)=>{const o=new yr([t]);if(Lf(i)){const c=cj(i.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new ba(e)}class Tr{constructor(e,t,i,o,c,u,h){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=c,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Tr(e,0,cn.min(),cn.min(),cn.min(),sa.empty(),0)}static newFoundDocument(e,t,i,o){return new Tr(e,1,t,cn.min(),i,o,0)}static newNoDocument(e,t){return new Tr(e,2,t,cn.min(),cn.min(),sa.empty(),0)}static newUnknownDocument(e,t){return new Tr(e,3,t,cn.min(),cn.min(),sa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(cn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rm{constructor(e,t){this.position=e,this.inclusive=t}}function kx(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const c=e[o],u=r.position[o];if(c.field.isKeyField()?i=Jt.comparator(Jt.fromName(u.referenceValue),t.key):i=lu(u,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Nx(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Li(r.position[t],e.position[t]))return!1;return!0}class Fd{constructor(e,t="asc"){this.field=e,this.dir=t}}function gA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class uj{}class Gs extends uj{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new yA(e,t,i):t==="array-contains"?new wA(e,i):t==="in"?new jA(e,i):t==="not-in"?new _A(e,i):t==="array-contains-any"?new kA(e,i):new Gs(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new bA(e,i):new xA(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(lu(t,this.value)):t!==null&&kl(this.value)===kl(t)&&this.matchesComparison(lu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return on(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends uj{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ui(e,t)}matches(e){return dj(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dj(r){return r.op==="and"}function hj(r){return vA(r)&&dj(r)}function vA(r){for(const e of r.filters)if(e instanceof ui)return!1;return!0}function uv(r){if(r instanceof Gs)return r.field.canonicalString()+r.op.toString()+cu(r.value);if(hj(r))return r.filters.map((e=>uv(e))).join(",");{const e=r.filters.map((t=>uv(t))).join(",");return`${r.op}(${e})`}}function fj(r,e){return r instanceof Gs?(function(i,o){return o instanceof Gs&&i.op===o.op&&i.field.isEqual(o.field)&&Li(i.value,o.value)})(r,e):r instanceof ui?(function(i,o){return o instanceof ui&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,u,h)=>c&&fj(u,o.filters[h])),!0):!1})(r,e):void on(19439)}function mj(r){return r instanceof Gs?(function(t){return`${t.field.canonicalString()} ${t.op} ${cu(t.value)}`})(r):r instanceof ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(mj).join(" ,")+"}"})(r):"Filter"}class yA extends Gs{constructor(e,t,i){super(e,t,i),this.key=Jt.fromName(i.referenceValue)}matches(e){const t=Jt.comparator(e.key,this.key);return this.matchesComparison(t)}}class bA extends Gs{constructor(e,t){super(e,"in",t),this.keys=pj("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class xA extends Gs{constructor(e,t){super(e,"not-in",t),this.keys=pj("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function pj(r,e){return(e.arrayValue?.values||[]).map((t=>Jt.fromName(t.referenceValue)))}class wA extends Gs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return n0(t)&&Ud(t.arrayValue,this.value)}}class jA extends Gs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ud(this.value.arrayValue,t)}}class _A extends Gs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ud(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ud(this.value.arrayValue,t)}}class kA extends Gs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!n0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ud(this.value.arrayValue,i)))}}class NA{constructor(e,t=null,i=[],o=[],c=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=u,this.endAt=h,this.Te=null}}function Sx(r,e=null,t=[],i=[],o=null,c=null,u=null){return new NA(r,e,t,i,o,c,u)}function s0(r){const e=mn(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>uv(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),jm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>cu(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>cu(i))).join(",")),e.Te=t}return e.Te}function r0(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!gA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!fj(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Nx(r.startAt,e.startAt)&&Nx(r.endAt,e.endAt)}function dv(r){return Jt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class bu{constructor(e,t=null,i=[],o=[],c=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=u,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function SA(r,e,t,i,o,c,u,h){return new bu(r,e,t,i,o,c,u,h)}function a0(r){return new bu(r)}function Tx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function TA(r){return Jt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function gj(r){return r.collectionGroup!==null}function Ed(r){const e=mn(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new nr(yr.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((b=>{b.isInequality()&&(h=h.add(b.field))}))})),h})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Fd(c,i))})),t.has(yr.keyField().canonicalString())||e.Ie.push(new Fd(yr.keyField(),i))}return e.Ie}function Ii(r){const e=mn(r);return e.Ee||(e.Ee=EA(e,Ed(r))),e.Ee}function EA(r,e){if(r.limitType==="F")return Sx(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Fd(o.field,c)}));const t=r.endAt?new rm(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new rm(r.startAt.position,r.startAt.inclusive):null;return Sx(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function hv(r,e){const t=r.filters.concat([e]);return new bu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function CA(r,e){const t=r.explicitOrderBy.concat([e]);return new bu(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function fv(r,e,t){return new bu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function km(r,e){return r0(Ii(r),Ii(e))&&r.limitType===e.limitType}function vj(r){return`${s0(Ii(r))}|lt:${r.limitType}`}function Qc(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>mj(o))).join(", ")}]`),jm(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>cu(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>cu(o))).join(",")),`Target(${i})`})(Ii(r))}; limitType=${r.limitType})`}function Nm(r,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Jt.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(r,e)&&(function(i,o){for(const c of Ed(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(u,h,m){const b=kx(u,h,m);return u.inclusive?b<=0:b<0})(i.startAt,Ed(i),o)||i.endAt&&!(function(u,h,m){const b=kx(u,h,m);return u.inclusive?b>=0:b>0})(i.endAt,Ed(i),o))})(r,e)}function AA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function yj(r){return(e,t)=>{let i=!1;for(const o of Ed(r)){const c=RA(o,e,t);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function RA(r,e,t){const i=r.field.isKeyField()?Jt.comparator(e.key,t.key):(function(c,u,h){const m=u.data.field(c),b=h.data.field(c);return m!==null&&b!==null?lu(m,b):on(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return on(19790,{direction:r.dir})}}class hc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Cl(this.inner,((t,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return tj(this.inner)}size(){return this.innerSize}}const MA=new ks(Jt.comparator);function No(){return MA}const bj=new ks(Jt.comparator);function xd(...r){let e=bj;for(const t of r)e=e.insert(t.key,t);return e}function xj(r){let e=bj;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ec(){return Cd()}function wj(){return Cd()}function Cd(){return new hc((r=>r.toString()),((r,e)=>r.isEqual(e)))}const DA=new ks(Jt.comparator),IA=new nr(Jt.comparator);function Dn(...r){let e=IA;for(const t of r)e=e.add(t);return e}const PA=new nr(Mn);function OA(){return PA}function i0(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tm(e)?"-0":e}}function jj(r){return{integerValue:""+r}}function LA(r,e){return oA(e)?jj(e):i0(r,e)}class Sm{constructor(){this._=void 0}}function BA(r,e,t){return r instanceof am?(function(o,c){const u={fields:{[rj]:{stringValue:sj},[ij]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&t0(c)&&(c=_m(c)),c&&(u.fields[aj]=c),{mapValue:u}})(t,e):r instanceof zd?kj(r,e):r instanceof qd?Nj(r,e):(function(o,c){const u=_j(o,c),h=Ex(u)+Ex(o.Ae);return cv(u)&&cv(o.Ae)?jj(h):i0(o.serializer,h)})(r,e)}function VA(r,e,t){return r instanceof zd?kj(r,e):r instanceof qd?Nj(r,e):t}function _j(r,e){return r instanceof im?(function(i){return cv(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class am extends Sm{}class zd extends Sm{constructor(e){super(),this.elements=e}}function kj(r,e){const t=Sj(e);for(const i of r.elements)t.some((o=>Li(o,i)))||t.push(i);return{arrayValue:{values:t}}}class qd extends Sm{constructor(e){super(),this.elements=e}}function Nj(r,e){let t=Sj(e);for(const i of r.elements)t=t.filter((o=>!Li(o,i)));return{arrayValue:{values:t}}}class im extends Sm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ex(r){return Os(r.integerValue||r.doubleValue)}function Sj(r){return n0(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function UA(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof zd&&o instanceof zd||i instanceof qd&&o instanceof qd?ou(i.elements,o.elements,Li):i instanceof im&&o instanceof im?Li(i.Ae,o.Ae):i instanceof am&&o instanceof am})(r.transform,e.transform)}class FA{constructor(e,t){this.version=e,this.transformResults=t}}class Va{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Va}static exists(e){return new Va(void 0,e)}static updateTime(e){return new Va(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Tm{}function Tj(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new o0(r.key,Va.none()):new eh(r.key,r.data,Va.none());{const t=r.data,i=sa.empty();let o=new nr(yr.comparator);for(let c of e.fields)if(!o.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?i.delete(c):i.set(c,u),o=o.add(c)}return new Al(r.key,i,new ba(o.toArray()),Va.none())}}function zA(r,e,t){r instanceof eh?(function(o,c,u){const h=o.value.clone(),m=Ax(o.fieldTransforms,c,u.transformResults);h.setAll(m),c.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(r,e,t):r instanceof Al?(function(o,c,u){if(!Bf(o.precondition,c))return void c.convertToUnknownDocument(u.version);const h=Ax(o.fieldTransforms,c,u.transformResults),m=c.data;m.setAll(Ej(o)),m.setAll(h),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(r,e,t):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ad(r,e,t,i){return r instanceof eh?(function(c,u,h,m){if(!Bf(c.precondition,u))return h;const b=c.value.clone(),k=Rx(c.fieldTransforms,m,u);return b.setAll(k),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null})(r,e,t,i):r instanceof Al?(function(c,u,h,m){if(!Bf(c.precondition,u))return h;const b=Rx(c.fieldTransforms,m,u),k=u.data;return k.setAll(Ej(c)),k.setAll(b),u.convertToFoundDocument(u.version,k).setHasLocalMutations(),h===null?null:h.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(r,e,t,i):(function(c,u,h){return Bf(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(r,e,t)}function qA(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),c=_j(i.transform,o||null);c!=null&&(t===null&&(t=sa.empty()),t.set(i.field,c))}return t||null}function Cx(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ou(i,o,((c,u)=>UA(c,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class eh extends Tm{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Al extends Tm{constructor(e,t,i,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ej(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Ax(r,e,t){const i=new Map;$n(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const c=r[o],u=c.transform,h=e.data.field(c.field);i.set(c.field,VA(u,h,t[o]))}return i}function Rx(r,e,t){const i=new Map;for(const o of r){const c=o.transform,u=t.data.field(o.field);i.set(o.field,BA(c,u,e))}return i}class o0 extends Tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WA extends Tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HA{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&zA(c,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ad(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ad(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=wj();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let h=this.applyToLocalView(u,c.mutatedFields);h=t.has(o.key)?null:h;const m=Tj(u,h);m!==null&&i.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(cn.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Dn())}isEqual(e){return this.batchId===e.batchId&&ou(this.mutations,e.mutations,((t,i)=>Cx(t,i)))&&ou(this.baseMutations,e.baseMutations,((t,i)=>Cx(t,i)))}}class l0{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){$n(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return DA})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,i[u].version);return new l0(e,t,i,o)}}class $A{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class GA{constructor(e,t){this.count=e,this.unchangedNames=t}}var $s,Ln;function KA(r){switch(r){case ut.OK:return on(64938);case ut.CANCELLED:case ut.UNKNOWN:case ut.DEADLINE_EXCEEDED:case ut.RESOURCE_EXHAUSTED:case ut.INTERNAL:case ut.UNAVAILABLE:case ut.UNAUTHENTICATED:return!1;case ut.INVALID_ARGUMENT:case ut.NOT_FOUND:case ut.ALREADY_EXISTS:case ut.PERMISSION_DENIED:case ut.FAILED_PRECONDITION:case ut.ABORTED:case ut.OUT_OF_RANGE:case ut.UNIMPLEMENTED:case ut.DATA_LOSS:return!0;default:return on(15467,{code:r})}}function Cj(r){if(r===void 0)return ko("GRPC error has no .code"),ut.UNKNOWN;switch(r){case $s.OK:return ut.OK;case $s.CANCELLED:return ut.CANCELLED;case $s.UNKNOWN:return ut.UNKNOWN;case $s.DEADLINE_EXCEEDED:return ut.DEADLINE_EXCEEDED;case $s.RESOURCE_EXHAUSTED:return ut.RESOURCE_EXHAUSTED;case $s.INTERNAL:return ut.INTERNAL;case $s.UNAVAILABLE:return ut.UNAVAILABLE;case $s.UNAUTHENTICATED:return ut.UNAUTHENTICATED;case $s.INVALID_ARGUMENT:return ut.INVALID_ARGUMENT;case $s.NOT_FOUND:return ut.NOT_FOUND;case $s.ALREADY_EXISTS:return ut.ALREADY_EXISTS;case $s.PERMISSION_DENIED:return ut.PERMISSION_DENIED;case $s.FAILED_PRECONDITION:return ut.FAILED_PRECONDITION;case $s.ABORTED:return ut.ABORTED;case $s.OUT_OF_RANGE:return ut.OUT_OF_RANGE;case $s.UNIMPLEMENTED:return ut.UNIMPLEMENTED;case $s.DATA_LOSS:return ut.DATA_LOSS;default:return on(39323,{code:r})}}(Ln=$s||($s={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";function YA(){return new TextEncoder}const QA=new yl([4294967295,4294967295],0);function Mx(r){const e=YA().encode(r),t=new Ww;return t.update(e),new Uint8Array(t.digest())}function Dx(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new yl([t,i],0),new yl([o,c],0)]}class c0{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new wd(`Invalid padding: ${t}`);if(i<0)throw new wd(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new wd(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new wd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=yl.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(yl.fromNumber(i)));return o.compare(QA)===1&&(o=new yl([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Mx(e),[i,o]=Dx(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,o,c);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new c0(c,o,t);return i.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=Mx(e),[i,o]=Dx(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,o,c);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class wd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Em{constructor(e,t,i,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,th.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Em(cn.min(),o,new ks(Mn),No(),Dn())}}class th{constructor(e,t,i,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new th(i,t,Dn(),Dn(),Dn())}}class Vf{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Aj{constructor(e,t){this.targetId=e,this.Ce=t}}class Rj{constructor(e,t,i=br.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Ix{constructor(){this.ve=0,this.Fe=Px(),this.Me=br.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Dn(),t=Dn(),i=Dn();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:on(38017,{changeType:c})}})),new th(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Px()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,$n(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class XA{constructor(e){this.Ge=e,this.ze=new Map,this.je=No(),this.He=vf(),this.Je=vf(),this.Ze=new ks(Mn)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:on(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(dv(c))if(i===0){const u=new Jt(c.path);this.et(t,u,Tr.newNoDocument(u,cn.min()))}else $n(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const h=this.ut(e),m=h?this.ct(h,e,u):1;if(m!==0){this.it(t);const b=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,b)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=t;let u,h;try{u=_l(i).toUint8Array()}catch(m){if(m instanceof nj)return iu("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new c0(u,o,c)}catch(m){return iu(m instanceof wd?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((c=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(h)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const h=this.ot(u);if(h){if(c.current&&dv(h.target)){const m=new Jt(h.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,Tr.newNoDocument(m,e))}c.Be&&(t.set(u,c.ke()),c.Ke())}}));let i=Dn();this.Je.forEach(((c,u)=>{let h=!0;u.forEachWhile((m=>{const b=this.ot(m);return!b||b.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Em(e,t,this.Ze,this.je,i);return this.je=No(),this.He=vf(),this.Je=vf(),this.Ze=new ks(Mn),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Ix,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new nr(Mn),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new nr(Mn),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||qt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ix),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function vf(){return new ks(Jt.comparator)}function Px(){return new ks(Jt.comparator)}const JA={asc:"ASCENDING",desc:"DESCENDING"},ZA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eR={and:"AND",or:"OR"};class tR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mv(r,e){return r.useProto3Json||jm(e)?e:{value:e}}function om(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mj(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function nR(r,e){return om(r,e.toTimestamp())}function Pi(r){return $n(!!r,49232),cn.fromTimestamp((function(t){const i=jl(t);return new Et(i.seconds,i.nanos)})(r))}function u0(r,e){return pv(r,e).canonicalString()}function pv(r,e){const t=(function(o){return new os(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Dj(r){const e=os.fromString(r);return $n(Bj(e),10190,{key:e.toString()}),e}function gv(r,e){return u0(r.databaseId,e.path)}function kg(r,e){const t=Dj(e);if(t.get(1)!==r.databaseId.projectId)throw new Vt(ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Vt(ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Jt(Pj(t))}function Ij(r,e){return u0(r.databaseId,e)}function sR(r){const e=Dj(r);return e.length===4?os.emptyPath():Pj(e)}function vv(r){return new os(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Pj(r){return $n(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ox(r,e,t){return{name:gv(r,e),fields:t.value.mapValue.fields}}function rR(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:on(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(b,k){return b.useProto3Json?($n(k===void 0||typeof k=="string",58123),br.fromBase64String(k||"")):($n(k===void 0||k instanceof Buffer||k instanceof Uint8Array,16193),br.fromUint8Array(k||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(b){const k=b.code===void 0?ut.UNKNOWN:Cj(b.code);return new Vt(k,b.message||"")})(u);t=new Rj(i,o,c,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=kg(r,i.document.name),c=Pi(i.document.updateTime),u=i.document.createTime?Pi(i.document.createTime):cn.min(),h=new sa({mapValue:{fields:i.document.fields}}),m=Tr.newFoundDocument(o,c,u,h),b=i.targetIds||[],k=i.removedTargetIds||[];t=new Vf(b,k,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=kg(r,i.document),c=i.readTime?Pi(i.readTime):cn.min(),u=Tr.newNoDocument(o,c),h=i.removedTargetIds||[];t=new Vf([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=kg(r,i.document),c=i.removedTargetIds||[];t=new Vf([],c,o,null)}else{if(!("filter"in e))return on(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,u=new GA(o,c),h=i.targetId;t=new Aj(h,u)}}return t}function aR(r,e){let t;if(e instanceof eh)t={update:Ox(r,e.key,e.value)};else if(e instanceof o0)t={delete:gv(r,e.key)};else if(e instanceof Al)t={update:Ox(r,e.key,e.data),updateMask:mR(e.fieldMask)};else{if(!(e instanceof WA))return on(16599,{dt:e.type});t={verify:gv(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,u){const h=u.transform;if(h instanceof am)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof zd)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof qd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof im)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw on(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:nR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:on(27497)})(r,e.precondition)),t}function iR(r,e){return r&&r.length>0?($n(e!==void 0,14353),r.map((t=>(function(o,c){let u=o.updateTime?Pi(o.updateTime):Pi(c);return u.isEqual(cn.min())&&(u=Pi(c)),new FA(u,o.transformResults||[])})(t,e)))):[]}function oR(r,e){return{documents:[Ij(r,e.path)]}}function lR(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Ij(r,o);const c=(function(b){if(b.length!==0)return Lj(ui.create(b,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(b){if(b.length!==0)return b.map((k=>(function(E){return{field:Xc(E.field),direction:dR(E.dir)}})(k)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=mv(r,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:t,parent:o}}function cR(r){let e=sR(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){$n(i===1,65062);const k=t.from[0];k.allDescendants?o=k.collectionId:e=e.child(k.collectionId)}let c=[];t.where&&(c=(function(S){const E=Oj(S);return E instanceof ui&&hj(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(S){return S.map((E=>(function(L){return new Fd(Jc(L.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(E)))})(t.orderBy));let h=null;t.limit&&(h=(function(S){let E;return E=typeof S=="object"?S.value:S,jm(E)?null:E})(t.limit));let m=null;t.startAt&&(m=(function(S){const E=!!S.before,F=S.values||[];return new rm(F,E)})(t.startAt));let b=null;return t.endAt&&(b=(function(S){const E=!S.before,F=S.values||[];return new rm(F,E)})(t.endAt)),SA(e,o,u,c,h,"F",m,b)}function uR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return on(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Oj(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Jc(t.unaryFilter.field);return Gs.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Jc(t.unaryFilter.field);return Gs.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Jc(t.unaryFilter.field);return Gs.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Jc(t.unaryFilter.field);return Gs.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return on(61313);default:return on(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Gs.create(Jc(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return on(58110);default:return on(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return ui.create(t.compositeFilter.filters.map((i=>Oj(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return on(1026)}})(t.compositeFilter.op))})(r):on(30097,{filter:r})}function dR(r){return JA[r]}function hR(r){return ZA[r]}function fR(r){return eR[r]}function Xc(r){return{fieldPath:r.canonicalString()}}function Jc(r){return yr.fromServerFormat(r.fieldPath)}function Lj(r){return r instanceof Gs?(function(t){if(t.op==="=="){if(_x(t.value))return{unaryFilter:{field:Xc(t.field),op:"IS_NAN"}};if(jx(t.value))return{unaryFilter:{field:Xc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_x(t.value))return{unaryFilter:{field:Xc(t.field),op:"IS_NOT_NAN"}};if(jx(t.value))return{unaryFilter:{field:Xc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xc(t.field),op:hR(t.op),value:t.value}}})(r):r instanceof ui?(function(t){const i=t.getFilters().map((o=>Lj(o)));return i.length===1?i[0]:{compositeFilter:{op:fR(t.op),filters:i}}})(r):on(54877,{filter:r})}function mR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Bj(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function Vj(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class pl{constructor(e,t,i,o,c=cn.min(),u=cn.min(),h=br.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new pl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class pR{constructor(e){this.yt=e}}function gR(r){const e=cR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?fv(e,e.limit,"L"):e}class vR{constructor(){this.Sn=new yR}addToCollectionParentIndex(e,t){return this.Sn.add(t),pt.resolve()}getCollectionParents(e,t){return pt.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return pt.resolve()}deleteFieldIndex(e,t){return pt.resolve()}deleteAllFieldIndexes(e){return pt.resolve()}createTargetIndexes(e,t){return pt.resolve()}getDocumentsMatchingTarget(e,t){return pt.resolve(null)}getIndexType(e,t){return pt.resolve(0)}getFieldIndexes(e,t){return pt.resolve([])}getNextCollectionGroupToUpdate(e){return pt.resolve(null)}getMinOffset(e,t){return pt.resolve(wl.min())}getMinOffsetFromCollectionGroup(e,t){return pt.resolve(wl.min())}updateCollectionGroup(e,t,i){return pt.resolve()}updateIndexEntries(e,t){return pt.resolve()}}class yR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new nr(os.comparator),c=!o.has(i);return this.index[t]=o.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new nr(os.comparator)).toArray()}}const Lx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uj=41943040;class na{static withCacheSize(e){return new na(e,na.DEFAULT_COLLECTION_PERCENTILE,na.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}na.DEFAULT_COLLECTION_PERCENTILE=10,na.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,na.DEFAULT=new na(Uj,na.DEFAULT_COLLECTION_PERCENTILE,na.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),na.DISABLED=new na(-1,0,0);class uu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new uu(0)}static ar(){return new uu(-1)}}const Bx="LruGarbageCollector",bR=1048576;function Vx([r,e],[t,i]){const o=Mn(r,t);return o===0?Mn(e,i):o}class xR{constructor(e){this.Pr=e,this.buffer=new nr(Vx),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Vx(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){qt(Bx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yu(t)?qt(Bx,"Ignoring IndexedDB error during garbage collection: ",t):await vu(t)}await this.Ar(3e5)}))}}class jR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return pt.resolve(wm.ce);const i=new xR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(qt("LruGarbageCollector","Garbage collection skipped; disabled"),pt.resolve(Lx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lx):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,c,u,h,m,b;const k=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(qt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,u=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(i=S,h=Date.now(),this.removeTargets(e,i,t)))).next((S=>(c=S,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((S=>(b=Date.now(),Yc()<=Rn.DEBUG&&qt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-k}ms
	Determined least recently used ${o} in `+(h-u)+`ms
	Removed ${c} targets in `+(m-h)+`ms
	Removed ${S} documents in `+(b-m)+`ms
Total Duration: ${b-k}ms`),pt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S}))))}}function _R(r,e){return new jR(r,e)}class kR{constructor(){this.changes=new hc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?pt.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class NR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class SR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ad(i.mutation,o,ba.empty(),Et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Dn()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Dn()){const o=ec();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((c=>{let u=xd();return c.forEach(((h,m)=>{u=u.insert(h,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=ec();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Dn())))}populateOverlays(e,t,i){const o=[];return i.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,i,o){let c=No();const u=Cd(),h=(function(){return Cd()})();return t.forEach(((m,b)=>{const k=i.get(b.key);o.has(b.key)&&(k===void 0||k.mutation instanceof Al)?c=c.insert(b.key,b):k!==void 0?(u.set(b.key,k.mutation.getFieldMask()),Ad(k.mutation,b,k.mutation.getFieldMask(),Et.now())):u.set(b.key,ba.empty())})),this.recalculateAndSaveOverlays(e,c).next((m=>(m.forEach(((b,k)=>u.set(b,k))),t.forEach(((b,k)=>h.set(b,new NR(k,u.get(b)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=Cd();let o=new ks(((u,h)=>u-h)),c=Dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((m=>{const b=t.get(m);if(b===null)return;let k=i.get(m)||ba.empty();k=h.applyToLocalView(b,k),i.set(m,k);const S=(o.get(h.batchId)||Dn()).add(m);o=o.insert(h.batchId,S)}))})).next((()=>{const u=[],h=o.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),b=m.key,k=m.value,S=wj();k.forEach((E=>{if(!c.has(E)){const F=Tj(t.get(E),i.get(E));F!==null&&S.set(E,F),c=c.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,b,S))}return pt.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return TA(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-c.size):pt.resolve(ec());let h=Ld,m=c;return u.next((b=>pt.forEach(b,((k,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),c.get(k)?pt.resolve():this.remoteDocumentCache.getEntry(e,k).next((E=>{m=m.insert(k,E)}))))).next((()=>this.populateOverlays(e,b,c))).next((()=>this.computeViews(e,m,b,Dn()))).next((k=>({batchId:h,changes:xj(k)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Jt(t)).next((i=>{let o=xd();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const c=t.collectionGroup;let u=xd();return this.indexManager.getCollectionParents(e,c).next((h=>pt.forEach(h,(m=>{const b=(function(S,E){return new bu(E,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,m.child(c));return this.getDocumentsMatchingCollectionQuery(e,b,i,o).next((k=>{k.forEach(((S,E)=>{u=u.insert(S,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,o)))).next((u=>{c.forEach(((m,b)=>{const k=b.getKey();u.get(k)===null&&(u=u.insert(k,Tr.newInvalidDocument(k)))}));let h=xd();return u.forEach(((m,b)=>{const k=c.get(m);k!==void 0&&Ad(k.mutation,b,ba.empty(),Et.now()),Nm(t,b)&&(h=h.insert(m,b))})),h}))}}class TR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return pt.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Pi(o.createTime)}})(t)),pt.resolve()}getNamedQuery(e,t){return pt.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:gR(o.bundledQuery),readTime:Pi(o.readTime)}})(t)),pt.resolve()}}class ER{constructor(){this.overlays=new ks(Jt.comparator),this.Lr=new Map}getOverlay(e,t){return pt.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ec();return pt.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,c)=>{this.bt(e,t,c)})),pt.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(i)),pt.resolve()}getOverlaysForCollection(e,t,i){const o=ec(),c=t.length+1,u=new Jt(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,b=m.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===c&&m.largestBatchId>i&&o.set(m.getKey(),m)}return pt.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let c=new ks(((b,k)=>b-k));const u=this.overlays.getIterator();for(;u.hasNext();){const b=u.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>i){let k=c.get(b.largestBatchId);k===null&&(k=ec(),c=c.insert(b.largestBatchId,k)),k.set(b.getKey(),b)}}const h=ec(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((b,k)=>h.set(b,k))),!(h.size()>=o)););return pt.resolve(h)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new $A(t,i));let c=this.Lr.get(t);c===void 0&&(c=Dn(),this.Lr.set(t,c)),this.Lr.set(t,c.add(i.key))}}class CR{constructor(){this.sessionToken=br.EMPTY_BYTE_STRING}getSessionToken(e){return pt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pt.resolve()}}class d0{constructor(){this.kr=new nr(or.Kr),this.qr=new nr(or.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new or(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new or(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Jt(new os([])),i=new or(t,e),o=new or(t,e+1),c=[];return this.qr.forEachInRange([i,o],(u=>{this.Wr(u),c.push(u.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Jt(new os([])),i=new or(t,e),o=new or(t,e+1);let c=Dn();return this.qr.forEachInRange([i,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new or(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class or{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Jt.comparator(e.key,t.key)||Mn(e.Hr,t.Hr)}static Ur(e,t){return Mn(e.Hr,t.Hr)||Jt.comparator(e.key,t.key)}}class AR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new nr(or.Kr)}checkEmpty(e){return pt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new HA(c,t,i,o);this.mutationQueue.push(u);for(const h of o)this.Jr=this.Jr.add(new or(h.key,c)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return pt.resolve(u)}lookupMutationBatch(e,t){return pt.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),c=o<0?0:o;return pt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return pt.resolve(this.mutationQueue.length===0?e0:this.Yn-1)}getAllMutationBatches(e){return pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new or(t,0),o=new or(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([i,o],(u=>{const h=this.Zr(u.Hr);c.push(h)})),pt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nr(Mn);return t.forEach((o=>{const c=new or(o,0),u=new or(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,u],(h=>{i=i.add(h.Hr)}))})),pt.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let c=i;Jt.isDocumentKey(c)||(c=c.child(""));const u=new or(new Jt(c),0);let h=new nr(Mn);return this.Jr.forEachWhile((m=>{const b=m.key.path;return!!i.isPrefixOf(b)&&(b.length===o&&(h=h.add(m.Hr)),!0)}),u),pt.resolve(this.Yr(h))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){$n(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return pt.forEach(t.mutations,(o=>{const c=new or(o.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new or(t,0),o=this.Jr.firstAfterOrEqual(i);return pt.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,pt.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class RR{constructor(e){this.ti=e,this.docs=(function(){return new ks(Jt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),c=o?o.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return pt.resolve(i?i.document.mutableCopy():Tr.newInvalidDocument(t))}getEntries(e,t){let i=No();return t.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():Tr.newInvalidDocument(o))})),pt.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let c=No();const u=t.path,h=new Jt(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:b,value:{document:k}}=m.getNext();if(!u.isPrefixOf(b.path))break;b.path.length>u.length+1||sA(nA(k),i)<=0||(o.has(k.key)||Nm(t,k))&&(c=c.insert(k.key,k.mutableCopy()))}return pt.resolve(c)}getAllFromCollectionGroup(e,t,i,o){on(9500)}ni(e,t){return pt.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new MR(this)}getSize(e){return pt.resolve(this.size)}}class MR extends kR{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),pt.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class DR{constructor(e){this.persistence=e,this.ri=new hc((t=>s0(t)),r0),this.lastRemoteSnapshotVersion=cn.min(),this.highestTargetId=0,this.ii=0,this.si=new d0,this.targetCount=0,this.oi=uu._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),pt.resolve()}getLastRemoteSnapshotVersion(e){return pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pt.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),pt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),pt.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new uu(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,pt.resolve()}updateTargetData(e,t){return this.lr(t),pt.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,pt.resolve()}removeTargets(e,t,i){let o=0;const c=[];return this.ri.forEach(((u,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.ri.delete(u),c.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),pt.waitFor(c).next((()=>o))}getTargetCount(e){return pt.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return pt.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),pt.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),pt.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),pt.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return pt.resolve(i)}containsKey(e,t){return pt.resolve(this.si.containsKey(t))}}class Fj{constructor(e,t){this._i={},this.overlays={},this.ai=new wm(0),this.ui=!1,this.ui=!0,this.ci=new CR,this.referenceDelegate=e(this),this.li=new DR(this),this.indexManager=new vR,this.remoteDocumentCache=(function(o){return new RR(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new pR(t),this.Pi=new TR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ER,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new AR(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){qt("MemoryPersistence","Starting transaction:",e);const o=new IR(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,t){return pt.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class IR extends aA{constructor(e){super(),this.currentSequenceNumber=e}}class h0{constructor(e){this.persistence=e,this.Ri=new d0,this.Ai=null}static Vi(e){return new h0(e)}get di(){if(this.Ai)return this.Ai;throw on(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),pt.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),pt.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),pt.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pt.forEach(this.di,(i=>{const o=Jt.fromPath(i);return this.mi(e,o).next((c=>{c||t.removeEntry(o,cn.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return pt.or([()=>pt.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class lm{constructor(e,t){this.persistence=e,this.fi=new hc((i=>lA(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=_R(this,t)}static Vi(e,t){return new lm(e,t)}Ti(){}Ii(e){return pt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return pt.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((c=>c?pt.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(u=>this.wr(e,u,t).next((h=>{h||(i++,c.removeEntry(u,cn.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),pt.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),pt.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),pt.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),pt.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Of(e.data.value)),t}wr(e,t,i){return pt.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return pt.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class f0{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=Dn(),o=Dn();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new f0(e,t.fromCache,i,o)}}class PR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class OR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return uT()?8:iA(Er())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const c={result:null};return this.gs(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ps(e,t,o,i).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new PR;return this.ys(e,t,u).next((h=>{if(c.result=h,this.As)return this.ws(e,t,u,h.size)}))})).next((()=>c.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(Yc()<=Rn.DEBUG&&qt("QueryEngine","SDK will not create cache indexes for query:",Qc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),pt.resolve()):(Yc()<=Rn.DEBUG&&qt("QueryEngine","Query:",Qc(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(Yc()<=Rn.DEBUG&&qt("QueryEngine","The SDK decides to create cache indexes for query:",Qc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ii(t))):pt.resolve())}gs(e,t){if(Tx(t))return pt.resolve(null);let i=Ii(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=fv(t,null,"F"),i=Ii(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const u=Dn(...c);return this.fs.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,i).next((m=>{const b=this.bs(t,h);return this.Ss(t,b,u,m.readTime)?this.gs(e,fv(t,null,"F")):this.Ds(e,b,t,m)}))))})))))}ps(e,t,i,o){return Tx(t)||o.isEqual(cn.min())?pt.resolve(null):this.fs.getDocuments(e,i).next((c=>{const u=this.bs(t,c);return this.Ss(t,u,i,o)?pt.resolve(null):(Yc()<=Rn.DEBUG&&qt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Qc(t)),this.Ds(e,u,t,tA(o,Ld)).next((h=>h)))}))}bs(e,t){let i=new nr(yj(e));return t.forEach(((o,c)=>{Nm(e,c)&&(i=i.add(c))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,t,i){return Yc()<=Rn.DEBUG&&qt("QueryEngine","Using full collection scan to execute query:",Qc(t)),this.fs.getDocumentsMatchingQuery(e,t,wl.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const m0="LocalStore",LR=3e8;class BR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new ks(Mn),this.Fs=new hc((c=>s0(c)),r0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function VR(r,e,t,i){return new BR(r,e,t,i)}async function zj(r,e){const t=mn(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const u=[],h=[];let m=Dn();for(const b of o){u.push(b.batchId);for(const k of b.mutations)m=m.add(k.key)}for(const b of c){h.push(b.batchId);for(const k of b.mutations)m=m.add(k.key)}return t.localDocuments.getDocuments(i,m).next((b=>({Ns:b,removedBatchIds:u,addedBatchIds:h})))}))}))}function UR(r,e){const t=mn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(h,m,b,k){const S=b.batch,E=S.keys();let F=pt.resolve();return E.forEach((L=>{F=F.next((()=>k.getEntry(m,L))).next((V=>{const P=b.docVersions.get(L);$n(P!==null,48541),V.version.compareTo(P)<0&&(S.applyToRemoteDocument(V,b),V.isValidDocument()&&(V.setReadTime(b.commitVersion),k.addEntry(V)))}))})),F.next((()=>h.mutationQueue.removeMutationBatch(m,S)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let m=Dn();for(let b=0;b<h.mutationResults.length;++b)h.mutationResults[b].transformResults.length>0&&(m=m.add(h.batch.mutations[b].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function qj(r){const e=mn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function FR(r,e){const t=mn(r),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const h=[];e.targetChanges.forEach(((k,S)=>{const E=o.get(S);if(!E)return;h.push(t.li.removeMatchingKeys(c,k.removedDocuments,S).next((()=>t.li.addMatchingKeys(c,k.addedDocuments,S))));let F=E.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?F=F.withResumeToken(br.EMPTY_BYTE_STRING,cn.min()).withLastLimboFreeSnapshotVersion(cn.min()):k.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(k.resumeToken,i)),o=o.insert(S,F),(function(V,P,ee){return V.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=LR?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(E,F,k)&&h.push(t.li.updateTargetData(c,F))}));let m=No(),b=Dn();if(e.documentUpdates.forEach((k=>{e.resolvedLimboDocuments.has(k)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(c,k))})),h.push(zR(c,u,e.documentUpdates).next((k=>{m=k.Bs,b=k.Ls}))),!i.isEqual(cn.min())){const k=t.li.getLastRemoteSnapshotVersion(c).next((S=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,i)));h.push(k)}return pt.waitFor(h).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,m,b))).next((()=>m))})).then((c=>(t.vs=o,c)))}function zR(r,e,t){let i=Dn(),o=Dn();return t.forEach((c=>i=i.add(c))),e.getEntries(r,i).next((c=>{let u=No();return t.forEach(((h,m)=>{const b=c.get(h);m.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(h)),m.isNoDocument()&&m.version.isEqual(cn.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!b.isValidDocument()||m.version.compareTo(b.version)>0||m.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):qt(m0,"Ignoring outdated watch update for ",h,". Current version:",b.version," Watch version:",m.version)})),{Bs:u,Ls:o}}))}function qR(r,e){const t=mn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=e0),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function WR(r,e){const t=mn(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((c=>c?(o=c,pt.resolve(o)):t.li.allocateTargetId(i).next((u=>(o=new pl(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function yv(r,e,t){const i=mn(r),o=i.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!yu(u))throw u;qt(m0,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function Ux(r,e,t){const i=mn(r);let o=cn.min(),c=Dn();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,b,k){const S=mn(m),E=S.Fs.get(k);return E!==void 0?pt.resolve(S.vs.get(E)):S.li.getTargetData(b,k)})(i,u,Ii(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,h.targetId).next((m=>{c=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:cn.min(),t?c:Dn()))).next((h=>(HR(i,AA(e),h),{documents:h,ks:c})))))}function HR(r,e,t){let i=r.Ms.get(e)||cn.min();t.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),r.Ms.set(e,i)}class Fx{constructor(){this.activeTargetIds=OA()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $R{constructor(){this.vo=new Fx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Fx,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class GR{Mo(e){}shutdown(){}}const zx="ConnectivityMonitor";class qx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){qt(zx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){qt(zx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let yf=null;function bv(){return yf===null?yf=(function(){return 268435456+Math.round(2147483648*Math.random())})():yf++,"0x"+yf.toString(16)}const Ng="RestConnection",KR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class YR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===nm?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,c){const u=bv(),h=this.Qo(e,t.toUriEncodedString());qt(Ng,`Sending RPC '${e}' ${u}:`,h,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,o,c);const{host:b}=new URL(h),k=Tl(b);return this.zo(e,h,m,i,k).then((S=>(qt(Ng,`Received RPC '${e}' ${u}: `,S),S)),(S=>{throw iu(Ng,`RPC '${e}' ${u} failed with error: `,S,"url: ",h,"request:",i),S}))}jo(e,t,i,o,c,u){return this.Wo(e,t,i,o,c)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}Qo(e,t){const i=KR[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class QR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Nr="WebChannelConnection",fd=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class su extends YR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!su.c_){const e=Kw();fd(e,Gw.STAT_EVENT,(t=>{t.stat===iv.PROXY?qt(Nr,"STAT_EVENT: detected buffering proxy"):t.stat===iv.NOPROXY&&qt(Nr,"STAT_EVENT: detected no buffering proxy")})),su.c_=!0}}zo(e,t,i,o,c){const u=bv();return new Promise(((h,m)=>{const b=new Hw;b.setWithCredentials(!0),b.listenOnce($w.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Pf.NO_ERROR:const S=b.getResponseJson();qt(Nr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),h(S);break;case Pf.TIMEOUT:qt(Nr,`RPC '${e}' ${u} timed out`),m(new Vt(ut.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const E=b.getStatus();if(qt(Nr,`RPC '${e}' ${u} failed with status:`,E,"response text:",b.getResponseText()),E>0){let F=b.getResponseJson();Array.isArray(F)&&(F=F[0]);const L=F?.error;if(L&&L.status&&L.message){const V=(function(ee){const $=ee.toLowerCase().replace(/_/g,"-");return Object.values(ut).indexOf($)>=0?$:ut.UNKNOWN})(L.status);m(new Vt(V,L.message))}else m(new Vt(ut.UNKNOWN,"Server responded with status "+b.getStatus()))}else m(new Vt(ut.UNAVAILABLE,"Connection failed."));break;default:on(9055,{l_:e,streamId:u,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{qt(Nr,`RPC '${e}' ${u} completed.`)}}));const k=JSON.stringify(o);qt(Nr,`RPC '${e}' ${u} sending request:`,o),b.send(t,"POST",k,i,15)}))}T_(e,t,i){const o=bv(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,t,i),h.encodeInitMessageHeaders=!0;const b=c.join("");qt(Nr,`Creating RPC '${e}' stream ${o}: ${b}`,h);const k=u.createWebChannel(b,h);this.I_(k);let S=!1,E=!1;const F=new QR({Ho:L=>{E?qt(Nr,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(S||(qt(Nr,`Opening RPC '${e}' stream ${o} transport.`),k.open(),S=!0),qt(Nr,`RPC '${e}' stream ${o} sending:`,L),k.send(L))},Jo:()=>k.close()});return fd(k,bd.EventType.OPEN,(()=>{E||(qt(Nr,`RPC '${e}' stream ${o} transport opened.`),F.i_())})),fd(k,bd.EventType.CLOSE,(()=>{E||(E=!0,qt(Nr,`RPC '${e}' stream ${o} transport closed`),F.o_(),this.E_(k))})),fd(k,bd.EventType.ERROR,(L=>{E||(E=!0,iu(Nr,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),F.o_(new Vt(ut.UNAVAILABLE,"The operation could not be completed")))})),fd(k,bd.EventType.MESSAGE,(L=>{if(!E){const V=L.data[0];$n(!!V,16349);const P=V,ee=P?.error||P[0]?.error;if(ee){qt(Nr,`RPC '${e}' stream ${o} received error:`,ee);const $=ee.status;let le=(function(Re){const B=$s[Re];if(B!==void 0)return Cj(B)})($),X=ee.message;le===void 0&&(le=ut.INTERNAL,X="Unknown error status: "+$+" with message "+ee.message),E=!0,F.o_(new Vt(le,X)),k.close()}else qt(Nr,`RPC '${e}' stream ${o} received:`,V),F.__(V)}})),su.u_(),setTimeout((()=>{F.s_()}),0),F}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Yw()}}function XR(r){return new su(r)}function Sg(){return typeof document<"u"?document:null}function Cm(r){return new tR(r,!0)}su.c_=!1;class Wj{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&qt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Wx="PersistentStream";class Hj{constructor(e,t,i,o,c,u,h,m){this.Ci=e,this.b_=i,this.S_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wj(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ut.RESOURCE_EXHAUSTED?(ko(t.toString()),ko("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ut.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new Vt(ut.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return qt(Wx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(qt(Wx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JR extends Hj{constructor(e,t,i,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=rR(this.serializer,e),i=(function(c){if(!("targetChange"in c))return cn.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?cn.min():u.readTime?Pi(u.readTime):cn.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=vv(this.serializer),t.addTarget=(function(c,u){let h;const m=u.target;if(h=dv(m)?{documents:oR(c,m)}:{query:lR(c,m).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=Mj(c,u.resumeToken);const b=mv(c,u.expectedCount);b!==null&&(h.expectedCount=b)}else if(u.snapshotVersion.compareTo(cn.min())>0){h.readTime=om(c,u.snapshotVersion.toTimestamp());const b=mv(c,u.expectedCount);b!==null&&(h.expectedCount=b)}return h})(this.serializer,e);const i=uR(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=vv(this.serializer),t.removeTarget=e,this.K_(t)}}class ZR extends Hj{constructor(e,t,i,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return $n(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$n(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$n(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iR(e.writeResults,e.commitTime),i=Pi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=vv(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>aR(this.serializer,i)))};this.K_(t)}}class e3{}class t3 extends e3{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Vt(ut.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Wo(e,pv(t,i),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Vt(ut.UNKNOWN,c.toString())}))}jo(e,t,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.jo(e,pv(t,i),o,u,h,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Vt(ut.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function n3(r,e,t,i){return new t3(r,e,t,i)}class s3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ko(t),this.aa=!1):qt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const lc="RemoteStore";class r3{constructor(e,t,i,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{fc(this)&&(qt(lc,"Restarting streams for network reachability change."),await(async function(m){const b=mn(m);b.Ea.add(4),await nh(b),b.Va.set("Unknown"),b.Ea.delete(4),await Am(b)})(this))}))})),this.Va=new s3(i,o)}}async function Am(r){if(fc(r))for(const e of r.Ra)await e(!0)}async function nh(r){for(const e of r.Ra)await e(!1)}function $j(r,e){const t=mn(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),y0(t)?v0(t):xu(t).O_()&&g0(t,e))}function p0(r,e){const t=mn(r),i=xu(t);t.Ia.delete(e),i.O_()&&Gj(t,e),t.Ia.size===0&&(i.O_()?i.L_():fc(t)&&t.Va.set("Unknown"))}function g0(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(cn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xu(r).Z_(e)}function Gj(r,e){r.da.$e(e),xu(r).X_(e)}function v0(r){r.da=new XA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),xu(r).start(),r.Va.ua()}function y0(r){return fc(r)&&!xu(r).x_()&&r.Ia.size>0}function fc(r){return mn(r).Ea.size===0}function Kj(r){r.da=void 0}async function a3(r){r.Va.set("Online")}async function i3(r){r.Ia.forEach(((e,t)=>{g0(r,e)}))}async function o3(r,e){Kj(r),y0(r)?(r.Va.ha(e),v0(r)):r.Va.set("Unknown")}async function l3(r,e,t){if(r.Va.set("Online"),e instanceof Rj&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const h of c.targetIds)o.Ia.has(h)&&(await o.remoteSyncer.rejectListen(h,u),o.Ia.delete(h),o.da.removeTarget(h))})(r,e)}catch(i){qt(lc,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cm(r,i)}else if(e instanceof Vf?r.da.Xe(e):e instanceof Aj?r.da.st(e):r.da.tt(e),!t.isEqual(cn.min()))try{const i=await qj(r.localStore);t.compareTo(i)>=0&&await(function(c,u){const h=c.da.Tt(u);return h.targetChanges.forEach(((m,b)=>{if(m.resumeToken.approximateByteSize()>0){const k=c.Ia.get(b);k&&c.Ia.set(b,k.withResumeToken(m.resumeToken,u))}})),h.targetMismatches.forEach(((m,b)=>{const k=c.Ia.get(m);if(!k)return;c.Ia.set(m,k.withResumeToken(br.EMPTY_BYTE_STRING,k.snapshotVersion)),Gj(c,m);const S=new pl(k.target,m,b,k.sequenceNumber);g0(c,S)})),c.remoteSyncer.applyRemoteEvent(h)})(r,t)}catch(i){qt(lc,"Failed to raise snapshot:",i),await cm(r,i)}}async function cm(r,e,t){if(!yu(e))throw e;r.Ea.add(1),await nh(r),r.Va.set("Offline"),t||(t=()=>qj(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{qt(lc,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Am(r)}))}function Yj(r,e){return e().catch((t=>cm(r,t,e)))}async function Rm(r){const e=mn(r),t=Nl(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:e0;for(;c3(e);)try{const o=await qR(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,u3(e,o)}catch(o){await cm(e,o)}Qj(e)&&Xj(e)}function c3(r){return fc(r)&&r.Ta.length<10}function u3(r,e){r.Ta.push(e);const t=Nl(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function Qj(r){return fc(r)&&!Nl(r).x_()&&r.Ta.length>0}function Xj(r){Nl(r).start()}async function d3(r){Nl(r).ra()}async function h3(r){const e=Nl(r);for(const t of r.Ta)e.ea(t.mutations)}async function f3(r,e,t){const i=r.Ta.shift(),o=l0.from(i,e,t);await Yj(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Rm(r)}async function m3(r,e){e&&Nl(r).Y_&&await(async function(i,o){if((function(u){return KA(u)&&u!==ut.ABORTED})(o.code)){const c=i.Ta.shift();Nl(i).B_(),await Yj(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Rm(i)}})(r,e),Qj(r)&&Xj(r)}async function Hx(r,e){const t=mn(r);t.asyncQueue.verifyOperationInProgress(),qt(lc,"RemoteStore received new credentials");const i=fc(t);t.Ea.add(3),await nh(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Am(t)}async function p3(r,e){const t=mn(r);e?(t.Ea.delete(2),await Am(t)):e||(t.Ea.add(2),await nh(t),t.Va.set("Unknown"))}function xu(r){return r.ma||(r.ma=(function(t,i,o){const c=mn(t);return c.sa(),new JR(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Zo:a3.bind(null,r),Yo:i3.bind(null,r),t_:o3.bind(null,r),J_:l3.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),y0(r)?v0(r):r.Va.set("Unknown")):(await r.ma.stop(),Kj(r))}))),r.ma}function Nl(r){return r.fa||(r.fa=(function(t,i,o){const c=mn(t);return c.sa(),new ZR(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:d3.bind(null,r),t_:m3.bind(null,r),ta:h3.bind(null,r),na:f3.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Rm(r)):(await r.fa.stop(),r.Ta.length>0&&(qt(lc,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class b0{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new xo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){const u=Date.now()+i,h=new b0(e,t,u,o,c);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Vt(ut.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x0(r,e){if(ko("AsyncQueue",`${e}: ${r}`),yu(r))return new Vt(ut.UNAVAILABLE,`${e}: ${r}`);throw r}class ru{static emptySet(e){return new ru(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Jt.comparator(t.key,i.key):(t,i)=>Jt.comparator(t.key,i.key),this.keyedMap=xd(),this.sortedSet=new ks(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ru)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ru;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class $x{constructor(){this.ga=new ks(Jt.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):on(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class du{constructor(e,t,i,o,c,u,h,m,b){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=b}static fromInitialDocuments(e,t,i,o,c){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new du(e,t,ru.emptySet(t),u,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&km(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class g3{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class v3{constructor(){this.queries=Gx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=mn(t),c=o.queries;o.queries=Gx(),c.forEach(((u,h)=>{for(const m of h.ba)m.onError(i)}))})(this,new Vt(ut.ABORTED,"Firestore shutting down"))}}function Gx(){return new hc((r=>vj(r)),km)}async function Jj(r,e){const t=mn(r);let i=3;const o=e.query;let c=t.queries.get(o);c?!c.Sa()&&e.Da()&&(i=2):(c=new g3,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const h=x0(u,`Initialization of query '${Qc(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&w0(t)}async function Zj(r,e){const t=mn(r),i=e.query;let o=3;const c=t.queries.get(i);if(c){const u=c.ba.indexOf(e);u>=0&&(c.ba.splice(u,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function y3(r,e){const t=mn(r);let i=!1;for(const o of e){const c=o.query,u=t.queries.get(c);if(u){for(const h of u.ba)h.Fa(o)&&(i=!0);u.wa=o}}i&&w0(t)}function b3(r,e,t){const i=mn(r),o=i.queries.get(e);if(o)for(const c of o.ba)c.onError(t);i.queries.delete(e)}function w0(r){r.Ca.forEach((e=>{e.next()}))}var xv,Kx;(Kx=xv||(xv={})).Ma="default",Kx.Cache="cache";class e_{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new du(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=du.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xv.Cache}}class t_{constructor(e){this.key=e}}class n_{constructor(e){this.key=e}}class x3{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Dn(),this.mutatedKeys=Dn(),this.eu=yj(e),this.tu=new ru(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new $x,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=o,h=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((k,S)=>{const E=o.get(k),F=Nm(this.query,S)?S:null,L=!!E&&this.mutatedKeys.has(E.key),V=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let P=!1;E&&F?E.data.isEqual(F.data)?L!==V&&(i.track({type:3,doc:F}),P=!0):this.su(E,F)||(i.track({type:2,doc:F}),P=!0,(m&&this.eu(F,m)>0||b&&this.eu(F,b)<0)&&(h=!0)):!E&&F?(i.track({type:0,doc:F}),P=!0):E&&!F&&(i.track({type:1,doc:E}),P=!0,(m||b)&&(h=!0)),P&&(F?(u=u.add(F),c=V?c.add(k):c.delete(k)):(u=u.delete(k),c=c.delete(k)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const k=this.query.limitType==="F"?u.last():u.first();u=u.delete(k.key),c=c.delete(k.key),i.track({type:1,doc:k})}return{tu:u,iu:i,Ss:h,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((k,S)=>(function(F,L){const V=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return on(20277,{Vt:P})}};return V(F)-V(L)})(k.type,S.type)||this.eu(k.doc,S.doc))),this.ou(i),o=o??!1;const h=t&&!o?this._u():[],m=this.Ya.size===0&&this.current&&!o?1:0,b=m!==this.Xa;return this.Xa=m,u.length!==0||b?{snapshot:new du(this.query,e.tu,c,u,e.mutatedKeys,m===0,b,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $x,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Dn(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new n_(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new t_(i))})),t}cu(e){this.Za=e.ks,this.Ya=Dn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return du.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const j0="SyncEngine";class w3{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class j3{constructor(e){this.key=e,this.hu=!1}}class _3{constructor(e,t,i,o,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new hc((h=>vj(h)),km),this.Iu=new Map,this.Eu=new Set,this.Ru=new ks(Jt.comparator),this.Au=new Map,this.Vu=new d0,this.du={},this.mu=new Map,this.fu=uu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function k3(r,e,t=!0){const i=l_(r);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await s_(i,e,t,!0),o}async function N3(r,e){const t=l_(r);await s_(t,e,!0,!1)}async function s_(r,e,t,i){const o=await WR(r.localStore,Ii(e)),c=o.targetId,u=r.sharedClientState.addLocalQueryTarget(c,t);let h;return i&&(h=await S3(r,e,c,u==="current",o.resumeToken)),r.isPrimaryClient&&t&&$j(r.remoteStore,o),h}async function S3(r,e,t,i,o){r.pu=(S,E,F)=>(async function(V,P,ee,$){let le=P.view.ru(ee);le.Ss&&(le=await Ux(V.localStore,P.query,!1).then((({documents:B})=>P.view.ru(B,le))));const X=$&&$.targetChanges.get(P.targetId),Te=$&&$.targetMismatches.get(P.targetId)!=null,Re=P.view.applyChanges(le,V.isPrimaryClient,X,Te);return Qx(V,P.targetId,Re.au),Re.snapshot})(r,S,E,F);const c=await Ux(r.localStore,e,!0),u=new x3(e,c.ks),h=u.ru(c.documents),m=th.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),b=u.applyChanges(h,r.isPrimaryClient,m);Qx(r,t,b.au);const k=new w3(e,t,u);return r.Tu.set(e,k),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),b.snapshot}async function T3(r,e,t){const i=mn(r),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((u=>!km(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await yv(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&p0(i.remoteStore,o.targetId),wv(i,o.targetId)})).catch(vu)):(wv(i,o.targetId),await yv(i.localStore,o.targetId,!0))}async function E3(r,e){const t=mn(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),p0(t.remoteStore,i.targetId))}async function C3(r,e,t){const i=O3(r);try{const o=await(function(u,h){const m=mn(u),b=Et.now(),k=h.reduce(((F,L)=>F.add(L.key)),Dn());let S,E;return m.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let L=No(),V=Dn();return m.xs.getEntries(F,k).next((P=>{L=P,L.forEach(((ee,$)=>{$.isValidDocument()||(V=V.add(ee))}))})).next((()=>m.localDocuments.getOverlayedDocuments(F,L))).next((P=>{S=P;const ee=[];for(const $ of h){const le=qA($,S.get($.key).overlayedDocument);le!=null&&ee.push(new Al($.key,le,cj(le.value.mapValue),Va.exists(!0)))}return m.mutationQueue.addMutationBatch(F,b,ee,h)})).next((P=>{E=P;const ee=P.applyToLocalDocumentSet(S,V);return m.documentOverlayCache.saveOverlays(F,P.batchId,ee)}))})).then((()=>({batchId:E.batchId,changes:xj(S)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,h,m){let b=u.du[u.currentUser.toKey()];b||(b=new ks(Mn)),b=b.insert(h,m),u.du[u.currentUser.toKey()]=b})(i,o.batchId,t),await sh(i,o.changes),await Rm(i.remoteStore)}catch(o){const c=x0(o,"Failed to persist write");t.reject(c)}}async function r_(r,e){const t=mn(r);try{const i=await FR(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=t.Au.get(c);u&&($n(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?$n(u.hu,14607):o.removedDocuments.size>0&&($n(u.hu,42227),u.hu=!1))})),await sh(t,i,e)}catch(i){await vu(i)}}function Yx(r,e,t){const i=mn(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((c,u)=>{const h=u.view.va(e);h.snapshot&&o.push(h.snapshot)})),(function(u,h){const m=mn(u);m.onlineState=h;let b=!1;m.queries.forEach(((k,S)=>{for(const E of S.ba)E.va(h)&&(b=!0)})),b&&w0(m)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function A3(r,e,t){const i=mn(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),c=o&&o.key;if(c){let u=new ks(Jt.comparator);u=u.insert(c,Tr.newNoDocument(c,cn.min()));const h=Dn().add(c),m=new Em(cn.min(),new Map,new ks(Mn),u,h);await r_(i,m),i.Ru=i.Ru.remove(c),i.Au.delete(e),_0(i)}else await yv(i.localStore,e,!1).then((()=>wv(i,e,t))).catch(vu)}async function R3(r,e){const t=mn(r),i=e.batch.batchId;try{const o=await UR(t.localStore,e);i_(t,i,null),a_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await sh(t,o)}catch(o){await vu(o)}}async function M3(r,e,t){const i=mn(r);try{const o=await(function(u,h){const m=mn(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let k;return m.mutationQueue.lookupMutationBatch(b,h).next((S=>($n(S!==null,37113),k=S.keys(),m.mutationQueue.removeMutationBatch(b,S)))).next((()=>m.mutationQueue.performConsistencyCheck(b))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(b,k,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,k))).next((()=>m.localDocuments.getDocuments(b,k)))}))})(i.localStore,e);i_(i,e,t),a_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await sh(i,o)}catch(o){await vu(o)}}function a_(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function i_(r,e,t){const i=mn(r);let o=i.du[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function wv(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||o_(r,i)}))}function o_(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(p0(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),_0(r))}function Qx(r,e,t){for(const i of t)i instanceof t_?(r.Vu.addReference(i.key,e),D3(r,i)):i instanceof n_?(qt(j0,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||o_(r,i.key)):on(19791,{wu:i})}function D3(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(qt(j0,"New document in limbo: "+t),r.Eu.add(i),_0(r))}function _0(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Jt(os.fromString(e)),i=r.fu.next();r.Au.set(i,new j3(t)),r.Ru=r.Ru.insert(t,i),$j(r.remoteStore,new pl(Ii(a0(t.path)),i,"TargetPurposeLimboResolution",wm.ce))}}async function sh(r,e,t){const i=mn(r),o=[],c=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,m)=>{u.push(i.pu(m,e,t).then((b=>{if((b||t)&&i.isPrimaryClient){const k=b?!b.fromCache:t?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,k?"current":"not-current")}if(b){o.push(b);const k=f0.Es(m.targetId,b);c.push(k)}})))})),await Promise.all(u),i.Pu.J_(o),await(async function(m,b){const k=mn(m);try{await k.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>pt.forEach(b,(E=>pt.forEach(E.Ts,(F=>k.persistence.referenceDelegate.addReference(S,E.targetId,F))).next((()=>pt.forEach(E.Is,(F=>k.persistence.referenceDelegate.removeReference(S,E.targetId,F)))))))))}catch(S){if(!yu(S))throw S;qt(m0,"Failed to update sequence numbers: "+S)}for(const S of b){const E=S.targetId;if(!S.fromCache){const F=k.vs.get(E),L=F.snapshotVersion,V=F.withLastLimboFreeSnapshotVersion(L);k.vs=k.vs.insert(E,V)}}})(i.localStore,c))}async function I3(r,e){const t=mn(r);if(!t.currentUser.isEqual(e)){qt(j0,"User change. New user:",e.toKey());const i=await zj(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((h=>{h.forEach((m=>{m.reject(new Vt(ut.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await sh(t,i.Ns)}}function P3(r,e){const t=mn(r),i=t.Au.get(e);if(i&&i.hu)return Dn().add(i.key);{let o=Dn();const c=t.Iu.get(e);if(!c)return o;for(const u of c){const h=t.Tu.get(u);o=o.unionWith(h.view.nu)}return o}}function l_(r){const e=mn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=r_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A3.bind(null,e),e.Pu.J_=y3.bind(null,e.eventManager),e.Pu.yu=b3.bind(null,e.eventManager),e}function O3(r){const e=mn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M3.bind(null,e),e}class um{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return VR(this.persistence,new OR,e.initialUser,this.serializer)}Cu(e){return new Fj(h0.Vi,this.serializer)}Du(e){return new $R}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}um.provider={build:()=>new um};class L3 extends um{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$n(this.persistence.referenceDelegate instanceof lm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new wR(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?na.withCacheSize(this.cacheSizeBytes):na.DEFAULT;return new Fj((i=>lm.Vi(i,t)),this.serializer)}}class jv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=I3.bind(null,this.syncEngine),await p3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new v3})()}createDatastore(e){const t=Cm(e.databaseInfo.databaseId),i=XR(e.databaseInfo);return n3(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,c,u,h){return new r3(i,o,c,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Yx(this.syncEngine,t,0)),(function(){return qx.v()?new qx:new GR})())}createSyncEngine(e,t){return(function(o,c,u,h,m,b,k){const S=new _3(o,c,u,h,m,b);return k&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=mn(t);qt(lc,"RemoteStore shutting down."),i.Ea.add(5),await nh(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jv.provider={build:()=>new jv};class c_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ko("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Sl="FirestoreClient";class B3{constructor(e,t,i,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=Sr.UNAUTHENTICATED,this.clientId=Zv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async u=>{qt(Sl,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(qt(Sl,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=x0(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Tg(r,e){r.asyncQueue.verifyOperationInProgress(),qt(Sl,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await zj(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Xx(r,e){r.asyncQueue.verifyOperationInProgress();const t=await V3(r);qt(Sl,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Hx(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Hx(e.remoteStore,o))),r._onlineComponents=e}async function V3(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){qt(Sl,"Using user provided OfflineComponentProvider");try{await Tg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ut.FAILED_PRECONDITION||o.code===ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;iu("Error using user provided cache. Falling back to memory cache: "+t),await Tg(r,new um)}}else qt(Sl,"Using default OfflineComponentProvider"),await Tg(r,new L3(void 0));return r._offlineComponents}async function u_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(qt(Sl,"Using user provided OnlineComponentProvider"),await Xx(r,r._uninitializedComponentsProvider._online)):(qt(Sl,"Using default OnlineComponentProvider"),await Xx(r,new jv))),r._onlineComponents}function U3(r){return u_(r).then((e=>e.syncEngine))}async function d_(r){const e=await u_(r),t=e.eventManager;return t.onListen=k3.bind(null,e.syncEngine),t.onUnlisten=T3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E3.bind(null,e.syncEngine),t}function F3(r,e,t={}){const i=new xo;return r.asyncQueue.enqueueAndForget((async()=>(function(c,u,h,m,b){const k=new c_({next:E=>{k.Nu(),u.enqueueAndForget((()=>Zj(c,S)));const F=E.docs.has(h);!F&&E.fromCache?b.reject(new Vt(ut.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&E.fromCache&&m&&m.source==="server"?b.reject(new Vt(ut.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(E)},error:E=>b.reject(E)}),S=new e_(a0(h.path),k,{includeMetadataChanges:!0,Ka:!0});return Jj(c,S)})(await d_(r),r.asyncQueue,e,t,i))),i.promise}function z3(r,e,t={}){const i=new xo;return r.asyncQueue.enqueueAndForget((async()=>(function(c,u,h,m,b){const k=new c_({next:E=>{k.Nu(),u.enqueueAndForget((()=>Zj(c,S))),E.fromCache&&m.source==="server"?b.reject(new Vt(ut.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(E)},error:E=>b.reject(E)}),S=new e_(h,k,{includeMetadataChanges:!0,Ka:!0});return Jj(c,S)})(await d_(r),r.asyncQueue,e,t,i))),i.promise}function q3(r,e){const t=new xo;return r.asyncQueue.enqueueAndForget((async()=>C3(await U3(r),e,t))),t.promise}function h_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const W3="ComponentProvider",Jx=new Map;function H3(r,e,t,i,o){return new dA(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,h_(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}const f_="firestore.googleapis.com",Zx=!0;class e2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Vt(ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f_,this.ssl=Zx}else this.host=e.host,this.ssl=e.ssl??Zx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bR)throw new Vt(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Vt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Vt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Vt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mm{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Vt(ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Vt(ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new WC;switch(i.type){case"firstParty":return new KC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Vt(ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Jx.get(t);i&&(qt(W3,"Removing Datastore"),Jx.delete(t),i.terminate())})(this),Promise.resolve()}}function $3(r,e,t,i={}){r=ci(r,Mm);const o=Tl(e),c=r._getSettings(),u={...c,emulatorOptions:r._getEmulatorOptions()},h=`${e}:${t}`;o&&(Ov(`https://${h}`),Lv("Firestore",!0)),c.host!==f_&&c.host!==h&&iu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...c,host:h,ssl:o,emulatorOptions:i};if(!sc(m,u)&&(r._setSettings(m),i.mockUserToken)){let b,k;if(typeof i.mockUserToken=="string")b=i.mockUserToken,k=Sr.MOCK_USER;else{b=sw(i.mockUserToken,r._app?.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Vt(ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new Sr(S)}r._authCredentials=new HC(new Xw(b,k))}}class mc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new mc(this.firestore,e,this._query)}}class Ls{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ls(this.firestore,e,this._key)}toJSON(){return{type:Ls._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Zd(t,Ls._jsonSchema))return new Ls(e,i||null,new Jt(os.fromString(t.referencePath)))}}Ls._jsonSchemaVersion="firestore/documentReference/1.0",Ls._jsonSchema={type:Ks("string",Ls._jsonSchemaVersion),referencePath:Ks("string")};class bl extends mc{constructor(e,t,i){super(e,t,a0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ls(this.firestore,null,new Jt(e))}withConverter(e){return new bl(this.firestore,e,this._path)}}function en(r,e,...t){if(r=_s(r),Jw("collection","path",e),r instanceof Mm){const i=os.fromString(e,...t);return fx(i),new bl(r,null,i)}{if(!(r instanceof Ls||r instanceof bl))throw new Vt(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(os.fromString(e,...t));return fx(i),new bl(r.firestore,null,i)}}function Mt(r,e,...t){if(r=_s(r),arguments.length===1&&(e=Zv.newId()),Jw("doc","path",e),r instanceof Mm){const i=os.fromString(e,...t);return hx(i),new Ls(r,null,new Jt(i))}{if(!(r instanceof Ls||r instanceof bl))throw new Vt(ut.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(os.fromString(e,...t));return hx(i),new Ls(r.firestore,r instanceof bl?r.converter:null,new Jt(i))}}const t2="AsyncQueue";class n2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wj(this,"async_queue_retry"),this._c=()=>{const i=Sg();i&&qt(t2,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Sg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new xo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!yu(e))throw e;qt(t2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ko("INTERNAL UNHANDLED ERROR: ",s2(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=b0.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&on(47125,{Pc:s2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function s2(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class pc extends Mm{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new n2,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n2(e),this._firestoreClient=void 0,await e}}}function G3(r,e){const t=typeof r=="object"?r:Fv(),i=typeof r=="string"?r:nm,o=gm(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=ew("firestore");c&&$3(o,...c)}return o}function k0(r){if(r._terminated)throw new Vt(ut.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||K3(r),r._firestoreClient}function K3(r){const e=r._freezeSettings(),t=H3(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new B3(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class Ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ba(br.fromBase64String(e))}catch(t){throw new Vt(ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ba(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ba._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zd(e,Ba._jsonSchema))return Ba.fromBase64String(e.bytes)}}Ba._jsonSchemaVersion="firestore/bytes/1.0",Ba._jsonSchema={type:Ks("string",Ba._jsonSchemaVersion),bytes:Ks("string")};class N0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Vt(ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class S0{constructor(e){this._methodName=e}}class Oi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Vt(ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Vt(ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Mn(this._lat,e._lat)||Mn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(Zd(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:Ks("string",Oi._jsonSchemaVersion),latitude:Ks("number"),longitude:Ks("number")};class oi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zd(e,oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new oi(e.vectorValues);throw new Vt(ut.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}oi._jsonSchemaVersion="firestore/vectorValue/1.0",oi._jsonSchema={type:Ks("string",oi._jsonSchemaVersion),vectorValues:Ks("object")};const Y3=/^__.*__$/;class Q3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Al(e,this.data,this.fieldMask,t,this.fieldTransforms):new eh(e,this.data,t,this.fieldTransforms)}}class m_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Al(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function p_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw on(40011,{dataSource:r})}}class T0{constructor(e,t,i,o,c,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new T0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return dm(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(p_(this.dataSource)&&Y3.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class X3{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Cm(e)}createContext(e,t,i,o=!1){return new T0({dataSource:e,methodName:t,targetDoc:i,path:yr.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dm(r){const e=r._freezeSettings(),t=Cm(r._databaseId);return new X3(r._databaseId,!!e.ignoreUndefinedProperties,t)}function g_(r,e,t,i,o,c={}){const u=r.createContext(c.merge||c.mergeFields?2:0,e,t,o);E0("Data must be an object, but it was:",u,i);const h=v_(i,u);let m,b;if(c.merge)m=new ba(u.fieldMask),b=u.fieldTransforms;else if(c.mergeFields){const k=[];for(const S of c.mergeFields){const E=cc(e,S,t);if(!u.contains(E))throw new Vt(ut.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);x_(k,E)||k.push(E)}m=new ba(k),b=u.fieldTransforms.filter((S=>m.covers(S.field)))}else m=null,b=u.fieldTransforms;return new Q3(new sa(h),m,b)}class Im extends S0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Im}}function J3(r,e,t,i){const o=r.createContext(1,e,t);E0("Data must be an object, but it was:",o,i);const c=[],u=sa.empty();Cl(i,((m,b)=>{const k=b_(e,m,t);b=_s(b);const S=o.childContextForFieldPath(k);if(b instanceof Im)c.push(k);else{const E=rh(b,S);E!=null&&(c.push(k),u.set(k,E))}}));const h=new ba(c);return new m_(u,h,o.fieldTransforms)}function Z3(r,e,t,i,o,c){const u=r.createContext(1,e,t),h=[cc(e,i,t)],m=[o];if(c.length%2!=0)throw new Vt(ut.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<c.length;E+=2)h.push(cc(e,c[E])),m.push(c[E+1]);const b=[],k=sa.empty();for(let E=h.length-1;E>=0;--E)if(!x_(b,h[E])){const F=h[E];let L=m[E];L=_s(L);const V=u.childContextForFieldPath(F);if(L instanceof Im)b.push(F);else{const P=rh(L,V);P!=null&&(b.push(F),k.set(F,P))}}const S=new ba(b);return new m_(k,S,u.fieldTransforms)}function eM(r,e,t,i=!1){return rh(t,r.createContext(i?4:3,e))}function rh(r,e){if(y_(r=_s(r)))return E0("Unsupported field value:",e,r),v_(r,e);if(r instanceof S0)return(function(i,o){if(!p_(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const c=[];let u=0;for(const h of i){let m=rh(h,o.childContextForArray(u));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),u++}return{arrayValue:{values:c}}})(r,e)}return(function(i,o){if((i=_s(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return LA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Et.fromDate(i);return{timestampValue:om(o.serializer,c)}}if(i instanceof Et){const c=new Et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:om(o.serializer,c)}}if(i instanceof Oi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ba)return{bytesValue:Mj(o.serializer,i._byteString)};if(i instanceof Ls){const c=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(c))throw o.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:u0(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof oi)return(function(u,h){const m=u instanceof oi?u.toArray():u;return{mapValue:{fields:{[oj]:{stringValue:lj},[sm]:{arrayValue:{values:m.map((k=>{if(typeof k!="number")throw h.createError("VectorValues must only contain numeric values.");return i0(h.serializer,k)}))}}}}}})(i,o);if(Vj(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${xm(i)}`)})(r,e)}function v_(r,e){const t={};return tj(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cl(r,((i,o)=>{const c=rh(o,e.childContextForField(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function y_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Et||r instanceof Oi||r instanceof Ba||r instanceof Ls||r instanceof S0||r instanceof oi||Vj(r))}function E0(r,e,t){if(!y_(t)||!Zw(t)){const i=xm(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function cc(r,e,t){if((e=_s(e))instanceof N0)return e._internalPath;if(typeof e=="string")return b_(r,e);throw dm("Field path arguments must be of type string or ",r,!1,void 0,t)}const tM=new RegExp("[~\\*/\\[\\]]");function b_(r,e,t){if(e.search(tM)>=0)throw dm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new N0(...e.split("."))._internalPath}catch{throw dm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function dm(r,e,t,i,o){const c=i&&!i.isEmpty(),u=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(c||u)&&(m+=" (found",c&&(m+=` in field ${i}`),u&&(m+=` in document ${o}`),m+=")"),new Vt(ut.INVALID_ARGUMENT,h+r+m)}function x_(r,e){return r.some((t=>t.isEqual(e)))}class nM{convertValue(e,t="none"){switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Os(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_l(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw on(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Cl(e,((o,c)=>{i[o]=this.convertValue(c,t)})),i}convertVectorValue(e){const t=e.fields?.[sm].arrayValue?.values?.map((i=>Os(i.doubleValue)));return new oi(t)}convertGeoPoint(e){return new Oi(Os(e.latitude),Os(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=_m(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Bd(e));default:return null}}convertTimestamp(e){const t=jl(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=os.fromString(e);$n(Bj(i),9688,{name:e});const o=new Vd(i.get(1),i.get(3)),c=new Jt(i.popFirst(5));return o.isEqual(t)||ko(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}class w_ extends nM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ls(this.firestore,null,t)}}const r2="@firebase/firestore",a2="4.10.0";class j_{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ls(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(cc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sM extends j_{data(){return super.data()}}function rM(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Vt(ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class C0{}class __ extends C0{}function ds(r,e,...t){let i=[];e instanceof C0&&i.push(e),i=i.concat(t),(function(c){const u=c.filter((m=>m instanceof A0)).length,h=c.filter((m=>m instanceof Pm)).length;if(u>1||u>0&&h>0)throw new Vt(ut.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Pm extends __{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Pm(e,t,i)}_apply(e){const t=this._parse(e);return k_(e._query,t),new mc(e.firestore,e.converter,hv(e._query,t))}_parse(e){const t=Dm(e.firestore);return(function(c,u,h,m,b,k,S){let E;if(b.isKeyField()){if(k==="array-contains"||k==="array-contains-any")throw new Vt(ut.INVALID_ARGUMENT,`Invalid Query. You can't perform '${k}' queries on documentId().`);if(k==="in"||k==="not-in"){o2(S,k);const L=[];for(const V of S)L.push(i2(m,c,V));E={arrayValue:{values:L}}}else E=i2(m,c,S)}else k!=="in"&&k!=="not-in"&&k!=="array-contains-any"||o2(S,k),E=eM(h,u,S,k==="in"||k==="not-in");return Gs.create(b,k,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Hn(r,e,t){const i=e,o=cc("where",r);return Pm._create(o,i,t)}class A0 extends C0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new A0(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ui.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let u=o;const h=c.getFlattenedFilters();for(const m of h)k_(u,m),u=hv(u,m)})(e._query,t),new mc(e.firestore,e.converter,hv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class R0 extends __{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new R0(e,t)}_apply(e){const t=(function(o,c,u){if(o.startAt!==null)throw new Vt(ut.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Vt(ut.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fd(c,u)})(e._query,this._field,this._direction);return new mc(e.firestore,e.converter,CA(e._query,t))}}function aM(r,e="asc"){const t=e,i=cc("orderBy",r);return R0._create(i,t)}function i2(r,e,t){if(typeof(t=_s(t))=="string"){if(t==="")throw new Vt(ut.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gj(e)&&t.indexOf("/")!==-1)throw new Vt(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(os.fromString(t));if(!Jt.isDocumentKey(i))throw new Vt(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return wx(r,new Jt(i))}if(t instanceof Ls)return wx(r,t._key);throw new Vt(ut.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xm(t)}.`)}function o2(r,e){if(!Array.isArray(r)||r.length===0)throw new Vt(ut.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k_(r,e){const t=(function(o,c){for(const u of o)for(const h of u.getFlattenedFilters())if(c.indexOf(h.op)>=0)return h.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Vt(ut.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Vt(ut.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function N_(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class jd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tc extends j_{constructor(e,t,i,o,c,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(cc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Vt(ut.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=tc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}tc._jsonSchemaVersion="firestore/documentSnapshot/1.0",tc._jsonSchema={type:Ks("string",tc._jsonSchemaVersion),bundleSource:Ks("string","DocumentSnapshot"),bundleName:Ks("string"),bundle:Ks("string")};class Uf extends tc{data(e={}){return super.data(e)}}class au{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new jd(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Uf(this._firestore,this._userDataWriter,i.key,i,new jd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Vt(ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((h=>{const m=new Uf(o._firestore,o._userDataWriter,h.doc.key,h.doc,new jd(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>c||h.type!==3)).map((h=>{const m=new Uf(o._firestore,o._userDataWriter,h.doc.key,h.doc,new jd(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,k=-1;return h.type!==0&&(b=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),k=u.indexOf(h.doc.key)),{type:iM(h.type),doc:m,oldIndex:b,newIndex:k}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Vt(ut.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=au._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return on(61501,{type:r})}}au._jsonSchemaVersion="firestore/querySnapshot/1.0",au._jsonSchema={type:Ks("string",au._jsonSchemaVersion),bundleSource:Ks("string","QuerySnapshot"),bundleName:Ks("string"),bundle:Ks("string")};function vs(r){r=ci(r,Ls);const e=ci(r.firestore,pc),t=k0(e);return F3(t,r._key).then((i=>oM(e,r,i)))}function yn(r){r=ci(r,mc);const e=ci(r.firestore,pc),t=k0(e),i=new w_(e);return rM(r._query),z3(t,r._query).then((o=>new au(e,i,r,o)))}function Cs(r,e,t){r=ci(r,Ls);const i=ci(r.firestore,pc),o=N_(r.converter,e),c=Dm(i);return Om(i,[g_(c,"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Va.none())])}function js(r,e,t,...i){r=ci(r,Ls);const o=ci(r.firestore,pc),c=Dm(o);let u;return u=typeof(e=_s(e))=="string"||e instanceof N0?Z3(c,"updateDoc",r._key,e,t,i):J3(c,"updateDoc",r._key,e),Om(o,[u.toMutation(r._key,Va.exists(!0))])}function xa(r){return Om(ci(r.firestore,pc),[new o0(r._key,Va.none())])}function ai(r,e){const t=ci(r.firestore,pc),i=Mt(r),o=N_(r.converter,e),c=Dm(r.firestore);return Om(t,[g_(c,"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Va.exists(!1))]).then((()=>i))}function Om(r,e){const t=k0(r);return q3(t,e)}function oM(r,e,t){const i=t.docs.get(e._key),o=new w_(r);return new tc(r,o,e._key,i,new jd(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){qC(dc),rc(new xl("firestore",((i,{instanceIdentifier:o,options:c})=>{const u=i.getProvider("app").getImmediate(),h=new pc(new $C(i.getProvider("auth-internal")),new YC(u,i.getProvider("app-check-internal")),hA(u,o),u);return c={useFetchStreams:t,...c},h._setSettings(c),h}),"PUBLIC").setMultipleInstances(!0)),Ri(r2,a2,e),Ri(r2,a2,"esm2020")})();var lM="firebase",cM="12.8.0";Ri(lM,cM,"app");const S_="firebasestorage.googleapis.com",T_="storageBucket",uM=120*1e3,dM=600*1e3;class cr extends Vi{constructor(e,t,i=0){super(Eg(e),`Firebase Storage: ${t} (${Eg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,cr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Eg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lr||(lr={}));function Eg(r){return"storage/"+r}function E_(){const r="An unknown error occurred, please check the error payload for server response.";return new cr(lr.UNKNOWN,r)}function hM(r){return new cr(lr.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function fM(r){return new cr(lr.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mM(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new cr(lr.UNAUTHENTICATED,r)}function pM(){return new cr(lr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gM(r){return new cr(lr.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function vM(){return new cr(lr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yM(){return new cr(lr.CANCELED,"User canceled the upload/download.")}function bM(r){return new cr(lr.INVALID_URL,"Invalid URL '"+r+"'.")}function xM(r){return new cr(lr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function wM(){return new cr(lr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+T_+"' property when initializing the app?")}function jM(){return new cr(lr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _v(r){return new cr(lr.INVALID_ARGUMENT,r)}function C_(){return new cr(lr.APP_DELETED,"The Firebase app was deleted.")}function _M(r){return new cr(lr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function md(r){throw new cr(lr.INTERNAL_ERROR,"Internal error: "+r)}class Ur{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Ur.makeFromUrl(e,t)}catch{return new Ur(e,"")}if(i.path==="")return i;throw xM(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function c(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+o+u,"i"),m={bucket:1,path:3};function b(X){X.path_=decodeURIComponent(X.path)}const k="v[A-Za-z0-9_]+",S=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",F=new RegExp(`^https?://${S}/${k}/b/${o}/o${E}`,"i"),L={bucket:1,path:3},V=t===S_?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",ee=new RegExp(`^https?://${V}/${o}/${P}`,"i"),le=[{regex:h,indices:m,postModify:c},{regex:F,indices:L,postModify:b},{regex:ee,indices:{bucket:1,path:2},postModify:b}];for(let X=0;X<le.length;X++){const Te=le[X],Re=Te.regex.exec(e);if(Re){const B=Re[Te.indices.bucket];let O=Re[Te.indices.path];O||(O=""),i=new Ur(B,O),Te.postModify(i);break}}if(i==null)throw bM(e);return i}}class kM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function NM(r,e,t){let i=1,o=null,c=null,u=!1,h=0;function m(){return h===2}let b=!1;function k(...P){b||(b=!0,e.apply(null,P))}function S(P){o=setTimeout(()=>{o=null,r(F,m())},P)}function E(){c&&clearTimeout(c)}function F(P,...ee){if(b){E();return}if(P){E(),k.call(null,P,...ee);return}if(m()||u){E(),k.call(null,P,...ee);return}i<64&&(i*=2);let le;h===1?(h=2,le=0):le=(i+Math.random())*1e3,S(le)}let L=!1;function V(P){L||(L=!0,E(),!b&&(o!==null?(P||(h=2),clearTimeout(o),S(0)):P||(h=1)))}return S(0),c=setTimeout(()=>{u=!0,V(!0)},t),V}function SM(r){r(!1)}function TM(r){return r!==void 0}function EM(r){return typeof r=="object"&&!Array.isArray(r)}function A_(r){return typeof r=="string"||r instanceof String}function kv(r,e,t,i){if(i<e)throw _v(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>t)throw _v(`Invalid value for '${r}'. Expected ${t} or less.`)}function M0(r,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${r}`}function R_(r){const e=encodeURIComponent;let t="?";for(const i in r)if(r.hasOwnProperty(i)){const o=e(i)+"="+e(r[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var nc;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(nc||(nc={}));function CM(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return t||o||c}class AM{constructor(e,t,i,o,c,u,h,m,b,k,S,E=!0,F=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=k,this.connectionFactory_=S,this.retry=E,this.isUsingEmulator=F,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,V)=>{this.resolve_=L,this.reject_=V,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new bf(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const u=h=>{const m=h.loaded,b=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,b)};this.progressCallback_!==null&&c.addUploadProgressListener(u),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(u),this.pendingConnection_=null;const h=c.getErrorCode()===nc.NO_ERROR,m=c.getStatus();if(!h||CM(m,this.additionalRetryCodes_)&&this.retry){const k=c.getErrorCode()===nc.ABORT;i(!1,new bf(!1,null,k));return}const b=this.successCodes_.indexOf(m)!==-1;i(!0,new bf(b,c))})},t=(i,o)=>{const c=this.resolve_,u=this.reject_,h=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());TM(m)?c(m):c()}catch(m){u(m)}else if(h!==null){const m=E_();m.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,m)):u(m)}else if(o.canceled){const m=this.appDelete_?C_():yM();u(m)}else{const m=vM();u(m)}};this.canceled_?t(!1,new bf(!1,null,!0)):this.backoffId_=NM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function RM(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function MM(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function DM(r,e){e&&(r["X-Firebase-GMPID"]=e)}function IM(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function PM(r,e,t,i,o,c,u=!0,h=!1){const m=R_(r.urlParams),b=r.url+m,k=Object.assign({},r.headers);return DM(k,e),RM(k,t),MM(k,c),IM(k,i),new AM(b,r.method,k,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,u,h)}function D0(r){let e;try{e=JSON.parse(r)}catch{return null}return EM(e)?e:null}function OM(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function LM(r,e){const t=e.split("/").filter(i=>i.length>0).join("/");return r.length===0?t:r+"/"+t}function M_(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}function BM(r,e){return e}class Vr{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||BM}}let xf=null;function VM(r){return!A_(r)||r.length<2?r:M_(r)}function UM(){if(xf)return xf;const r=[];r.push(new Vr("bucket")),r.push(new Vr("generation")),r.push(new Vr("metageneration")),r.push(new Vr("name","fullPath",!0));function e(c,u){return VM(u)}const t=new Vr("name");t.xform=e,r.push(t);function i(c,u){return u!==void 0?Number(u):u}const o=new Vr("size");return o.xform=i,r.push(o),r.push(new Vr("timeCreated")),r.push(new Vr("updated")),r.push(new Vr("md5Hash",null,!0)),r.push(new Vr("cacheControl",null,!0)),r.push(new Vr("contentDisposition",null,!0)),r.push(new Vr("contentEncoding",null,!0)),r.push(new Vr("contentLanguage",null,!0)),r.push(new Vr("contentType",null,!0)),r.push(new Vr("metadata","customMetadata",!0)),xf=r,xf}function FM(r,e){function t(){const i=r.bucket,o=r.fullPath,c=new Ur(i,o);return e._makeStorageReference(c)}Object.defineProperty(r,"ref",{get:t})}function zM(r,e,t){const i={};i.type="file";const o=t.length;for(let c=0;c<o;c++){const u=t[c];i[u.local]=u.xform(i,e[u.server])}return FM(i,r),i}function qM(r,e,t){const i=D0(e);return i===null?null:zM(r,i,t)}function WM(r,e,t,i){const o=D0(e);if(o===null||!A_(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const u=encodeURIComponent;return c.split(",").map(b=>{const k=r.bucket,S=r.fullPath,E="/b/"+u(k)+"/o/"+u(S),F=M0(E,t,i),L=R_({alt:"media",token:b});return F+L})[0]}const l2="prefixes",c2="items";function HM(r,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[l2])for(const o of t[l2]){const c=o.replace(/\/$/,""),u=r._makeStorageReference(new Ur(e,c));i.prefixes.push(u)}if(t[c2])for(const o of t[c2]){const c=r._makeStorageReference(new Ur(e,o.name));i.items.push(c)}return i}function $M(r,e,t){const i=D0(t);return i===null?null:HM(r,e,i)}class D_{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function I_(r){if(!r)throw E_()}function GM(r,e){function t(i,o){const c=$M(r,e,o);return I_(c!==null),c}return t}function KM(r,e){function t(i,o){const c=qM(r,o,e);return I_(c!==null),WM(c,o,r.host,r._protocol)}return t}function P_(r){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=pM():o=mM():t.getStatus()===402?o=fM(r.bucket):t.getStatus()===403?o=gM(r.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function YM(r){const e=P_(r);function t(i,o){let c=e(i,o);return i.getStatus()===404&&(c=hM(r.path)),c.serverResponse=o.serverResponse,c}return t}function QM(r,e,t,i,o){const c={};e.isRoot?c.prefix="":c.prefix=e.path+"/",t.length>0&&(c.delimiter=t),i&&(c.pageToken=i),o&&(c.maxResults=o);const u=e.bucketOnlyServerUrl(),h=M0(u,r.host,r._protocol),m="GET",b=r.maxOperationRetryTime,k=new D_(h,m,GM(r,e.bucket),b);return k.urlParams=c,k.errorHandler=P_(e),k}function XM(r,e,t){const i=e.fullServerUrl(),o=M0(i,r.host,r._protocol),c="GET",u=r.maxOperationRetryTime,h=new D_(o,c,KM(r,t),u);return h.errorHandler=YM(e),h}class JM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,c){if(this.sent_)throw md("cannot .send() more than once");if(Tl(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const u in c)c.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,c[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw md("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw md("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw md("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw md("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ZM extends JM{initXhr(){this.xhr_.responseType="text"}}function O_(){return new ZM}class uc{constructor(e,t){this._service=e,t instanceof Ur?this._location=t:this._location=Ur.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new uc(e,t)}get root(){const e=new Ur(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return M_(this._location.path)}get storage(){return this._service}get parent(){const e=OM(this._location.path);if(e===null)return null;const t=new Ur(this._location.bucket,e);return new uc(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw _M(e)}}function eD(r){const e={prefixes:[],items:[]};return L_(r,e).then(()=>e)}async function L_(r,e,t){const o=await tD(r,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),o.nextPageToken!=null&&await L_(r,e,o.nextPageToken)}function tD(r,e){e!=null&&typeof e.maxResults=="number"&&kv("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=QM(r.storage,r._location,"/",t.pageToken,t.maxResults);return r.storage.makeRequestWithTokens(i,O_)}function nD(r){r._throwIfRoot("getDownloadURL");const e=XM(r.storage,r._location,UM());return r.storage.makeRequestWithTokens(e,O_).then(t=>{if(t===null)throw jM();return t})}function sD(r,e){const t=LM(r._location.path,e),i=new Ur(r._location.bucket,t);return new uc(r.storage,i)}function rD(r){return/^[A-Za-z]+:\/\//.test(r)}function aD(r,e){return new uc(r,e)}function B_(r,e){if(r instanceof I0){const t=r;if(t._bucket==null)throw wM();const i=new uc(t,t._bucket);return e!=null?B_(i,e):i}else return e!==void 0?sD(r,e):r}function iD(r,e){if(e&&rD(e)){if(r instanceof I0)return aD(r,e);throw _v("To use ref(service, url), the first argument must be a Storage instance.")}else return B_(r,e)}function u2(r,e){const t=e?.[T_];return t==null?null:Ur.makeFromBucketSpec(t,r)}function oD(r,e,t,i={}){r.host=`${e}:${t}`;const o=Tl(e);o&&(Ov(`https://${r.host}/b`),Lv("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:c}=i;c&&(r._overrideAuthToken=typeof c=="string"?c:sw(c,r.app.options.projectId))}class I0{constructor(e,t,i,o,c,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=u,this._bucket=null,this._host=S_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uM,this._maxUploadRetryTime=dM,this._requests=new Set,o!=null?this._bucket=Ur.makeFromBucketSpec(o,this._host):this._bucket=u2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ur.makeFromBucketSpec(this._url,e):this._bucket=u2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ya(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new uc(this,e)}_makeRequest(e,t,i,o,c=!0){if(this._deleted)return new kM(C_());{const u=PM(e,this._appId,i,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const d2="@firebase/storage",h2="0.14.0";const V_="storage";function f2(r){return r=_s(r),eD(r)}function Ff(r){return r=_s(r),nD(r)}function _d(r,e){return r=_s(r),iD(r,e)}function lD(r=Fv(),e){r=_s(r);const i=gm(r,V_).getImmediate({identifier:e}),o=ew("storage");return o&&cD(i,...o),i}function cD(r,e,t,i={}){oD(r,e,t,i)}function uD(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new I0(t,i,o,e,dc)}function dD(){rc(new xl(V_,uD,"PUBLIC").setMultipleInstances(!0)),Ri(d2,h2,""),Ri(d2,h2,"esm2020")}dD();const U_={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},P0=Uv(U_),pd=qw(P0),Je=G3(P0),kd=lD(P0),hD=Uv(U_,"secondary"),hm=qw(hD),fD="EYdciKDOi3UYBLk1u8hHams5tmO2",F_=C.createContext();function Bs(){return C.useContext(F_)}function mD({children:r}){const[e,t]=C.useState(null),[i,o]=C.useState(!1),[c,u]=C.useState(!1),[h,m]=C.useState(null),[b,k]=C.useState(!0);C.useEffect(()=>M4(pd,async ee=>{if(t(ee),ee)if(ee.uid===fD)o(!0),u(!1),m(null);else{o(!1);try{const $=ds(en(Je,"clients"),Hn("uid","==",ee.uid)),le=await yn($);if(le.empty)u(!1),m(null);else{const X=le.docs[0];u(!0),m({id:X.id,...X.data()})}}catch($){console.error("Error fetching client data:",$),u(!1),m(null)}}else o(!1),u(!1),m(null);k(!1)}),[]);const V={currentUser:e,isAdmin:i,isClient:c,clientData:h,updateClientData:P=>{m(ee=>ee&&{...ee,...P})},login:async(P,ee,$=!0)=>(await C4(pd,$?Pw:Yv),await E4(pd,P,ee)),logout:()=>Kv(pd),resetPassword:P=>T4(pd,P),loading:b};return n.jsx(F_.Provider,{value:V,children:r})}const z_=C.createContext();function ja(){return C.useContext(z_)}function pD({children:r}){const[e,t]=C.useState(()=>{const m=localStorage.getItem("theme");return m?m==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,o]=C.useState(()=>localStorage.getItem("accent")||"red");C.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),C.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const h={isDark:e,toggleTheme:()=>t(!e),accent:i,setAccent:m=>o(m)};return n.jsx(z_.Provider,{value:h,children:r})}function gD(){const[r,e]=C.useState(""),[t,i]=C.useState(""),[o,c]=C.useState(!0),[u,h]=C.useState(""),[m,b]=C.useState(!1),[k,S]=C.useState(!1),[E,F]=C.useState(!1),{login:L,resetPassword:V,currentUser:P,isAdmin:ee,isClient:$,clientData:le,loading:X}=Bs(),Te=hs();if(C.useEffect(()=>{if(!X&&P){if(ee)Te("/dashboard");else if($){const O=le?.clientType;Te(O==="core_buddy"?"/client/core-buddy":O==="circuit_vip"||O==="circuit_dropin"?"/client/circuit":"/client")}}},[X,P,ee,$,le,Te]),X)return n.jsx("div",{className:"login-container",children:n.jsx("div",{className:"login-loading",children:n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"loading-logo"})})});const Re=async O=>{O.preventDefault(),h(""),b(!0);try{await L(r,t,o)}catch(z){h(z.message||"Failed to log in"),b(!1)}},B=async O=>{if(O.preventDefault(),h(""),!r.trim()){h("Please enter your email address");return}b(!0);try{await V(r.trim()),F(!0)}catch(z){z.code==="auth/user-not-found"?h("No account found with this email"):h(z.message||"Failed to send reset email")}b(!1)};return n.jsx("div",{className:"login-container",children:n.jsxs("div",{className:"login-card",children:[n.jsxs("div",{className:"login-header",children:[n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"login-logo"}),n.jsx("p",{children:k?"Reset Password":"Client Portal"})]}),u&&n.jsx("div",{className:"error-message",children:u}),E?n.jsxs("div",{className:"reset-sent",children:[n.jsx("div",{className:"reset-sent-icon",children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),n.jsx("p",{children:"Reset email sent!"}),n.jsx("span",{children:"Check your inbox for a password reset link"}),n.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{S(!1),F(!1),h("")},children:"Back to Log In"})]}):k?n.jsxs("form",{onSubmit:B,children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"email",children:"Email"}),n.jsx("input",{type:"email",id:"email",value:r,onChange:O=>e(O.target.value),placeholder:"Enter your email",required:!0})]}),n.jsx("button",{type:"submit",className:"login-btn",disabled:m,children:m?"Sending...":"Send Reset Link"}),n.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{S(!1),h("")},children:"Back to Log In"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("form",{onSubmit:Re,children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"email",children:"Email"}),n.jsx("input",{type:"email",id:"email",value:r,onChange:O=>e(O.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"password",children:"Password"}),n.jsx("input",{type:"password",id:"password",value:t,onChange:O=>i(O.target.value),required:!0})]}),n.jsx("div",{className:"remember-me",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:o,onChange:O=>c(O.target.checked)}),n.jsx("span",{children:"Remember me"})]})}),n.jsx("button",{type:"submit",className:"login-btn",disabled:m,children:m?"Logging in...":"Log In"})]}),n.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{S(!0),h("")},children:"Forgot password?"})]}),n.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function vD(){const[r,e]=C.useState([]),[t,i]=C.useState([]),[o,c]=C.useState(!0),[u,h]=C.useState(null),[m,b]=C.useState({}),[k,S]=C.useState(null),[E,F]=C.useState(""),[L,V]=C.useState("all"),[P,ee]=C.useState(null),[$,le]=C.useState({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""}),[X,Te]=C.useState([]),[Re,B]=C.useState(!1),[O,z]=C.useState(!1),[Y,G]=C.useState("list");C.useEffect(()=>{se()},[]);const se=async()=>{try{const[te,it]=await Promise.all([yn(ds(en(Je,"clients"),aM("createdAt","desc"))),yn(en(Je,"sessions"))]),kt=te.docs.map(mt=>({id:mt.id,...mt.data()})),Rt=it.docs.map(mt=>({id:mt.id,...mt.data()}));e(kt),i(Rt)}catch(te){console.error("Error fetching data:",te)}c(!1)},H=te=>{const it=new Date,kt=it.getFullYear(),Rt=(it.getMonth()+1).toString().padStart(2,"0"),mt=it.getDate().toString().padStart(2,"0"),Ht=`${kt}-${Rt}-${mt}`,Zt=`${it.getHours().toString().padStart(2,"0")}:${it.getMinutes().toString().padStart(2,"0")}`;return t.filter(Qt=>Qt.clientId!==te?!1:Qt.date<Ht||Qt.date===Ht&&Qt.time<Zt).length},Le=te=>{const it=H(te.id);return(te.totalSessions||0)-it},Oe=te=>{const it=new Date,kt=it.getFullYear(),Rt=(it.getMonth()+1).toString().padStart(2,"0"),mt=it.getDate().toString().padStart(2,"0"),Ht=`${kt}-${Rt}-${mt}`,Zt=`${it.getHours().toString().padStart(2,"0")}:${it.getMinutes().toString().padStart(2,"0")}`;return t.filter(Qt=>Qt.clientId!==te?!1:Qt.date>Ht||Qt.date===Ht&&Qt.time>=Zt).length},ne=te=>te?(te.toDate?te.toDate():new Date(te)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",be=async(te,it)=>{if(window.confirm(`Are you sure you want to delete ${it}? This will also delete all their booked sessions.`))try{const Rt=t.filter(mt=>mt.clientId===te).map(mt=>xa(Mt(Je,"sessions",mt.id)));await Promise.all(Rt),await xa(Mt(Je,"clients",te)),e(r.filter(mt=>mt.id!==te)),i(t.filter(mt=>mt.clientId!==te))}catch(kt){console.error("Error deleting client:",kt),alert("Failed to delete client")}},me=te=>{if(!te)return"";const it=te.toDate?te.toDate():new Date(te),kt=it.getFullYear(),Rt=(it.getMonth()+1).toString().padStart(2,"0"),mt=it.getDate().toString().padStart(2,"0");return`${kt}-${Rt}-${mt}`},Ae=te=>{h(te.id),b({name:te.name,email:te.email,password:"",clientType:te.clientType||"block",weeksInBlock:te.weeksInBlock||"",totalSessions:te.totalSessions||"",sessionsRemaining:te.sessionsRemaining,sessionDuration:te.sessionDuration||45,startDate:me(te.startDate),endDate:me(te.endDate),status:te.status,hasPortalAccess:!!te.uid,circuitAccess:!!te.circuitAccess,coreBuddyAccess:!!te.coreBuddyAccess,isJunior:!!te.isJunior})},He=te=>{const{name:it,value:kt}=te.target;if(b(Rt=>({...Rt,[it]:kt})),it==="startDate"||it==="weeksInBlock"){const Rt=it==="startDate"?kt:m.startDate,mt=parseInt(it==="weeksInBlock"?kt:m.weeksInBlock);if(Rt&&mt>0){const Ht=new Date(Rt),Zt=new Date(Ht);Zt.setDate(Zt.getDate()+mt*7);const Qt=Zt.getFullYear(),ze=(Zt.getMonth()+1).toString().padStart(2,"0"),Ze=Zt.getDate().toString().padStart(2,"0");b(gt=>({...gt,[it]:kt,endDate:`${Qt}-${ze}-${Ze}`}))}}},Q=async te=>{try{const it=r.find(Ht=>Ht.id===te);let kt=it?.uid;if(m.password&&m.password.length>=6&&!it?.uid)try{const Ht=await Mw(hm,m.email.trim().toLowerCase(),m.password);await Kv(hm),kt=Ht.user.uid}catch(Ht){if(console.error("Error creating auth account:",Ht),Ht.code==="auth/email-already-in-use")alert("This email already has a portal account. Password not changed.");else if(Ht.code==="auth/weak-password"){alert("Password must be at least 6 characters.");return}else{alert("Failed to create portal account: "+Ht.message);return}}const Rt=m.clientType==="block",mt={name:m.name.trim(),email:m.email.trim().toLowerCase(),clientType:m.clientType,status:m.status,coreBuddyAccess:m.coreBuddyAccess,isJunior:m.isJunior};if(Rt)mt.weeksInBlock=parseInt(m.weeksInBlock)||0,mt.totalSessions=parseInt(m.totalSessions)||0,mt.sessionDuration=parseInt(m.sessionDuration),mt.circuitAccess=m.circuitAccess,m.startDate&&(mt.startDate=Et.fromDate(new Date(m.startDate))),m.endDate&&(mt.endDate=Et.fromDate(new Date(m.endDate)));else{const Ht=r.find(Zt=>Zt.id===te);Ht?.circuitStrikes===void 0&&(mt.circuitStrikes=0),Ht?.circuitBanUntil===void 0&&(mt.circuitBanUntil=null)}kt&&!it?.uid&&(mt.uid=kt),await js(Mt(Je,"clients",te),mt),e(r.map(Ht=>Ht.id===te?{...Ht,...m,uid:kt||Ht.uid,weeksInBlock:parseInt(m.weeksInBlock),totalSessions:parseInt(m.totalSessions),sessionDuration:parseInt(m.sessionDuration),startDate:Et.fromDate(new Date(m.startDate)),endDate:Et.fromDate(new Date(m.endDate))}:Ht)),h(null),kt&&!it?.uid&&alert("Portal access created! Client can now log in.")}catch(it){console.error("Error updating client:",it),alert("Failed to update client")}},we=async te=>{try{const it=r.find(kt=>kt.id===te)?.status==="archived"?"active":"archived";await js(Mt(Je,"clients",te),{status:it}),e(r.map(kt=>kt.id===te?{...kt,status:it}:kt))}catch(it){console.error("Error archiving client:",it),alert("Failed to update client status")}},Ne=async te=>{ee({clientId:te.id,clientName:te.name}),G("list"),le({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""}),B(!0);try{const it=ds(en(Je,"sessionNotes"),Hn("clientId","==",te.id)),Rt=(await yn(it)).docs.map(mt=>({id:mt.id,...mt.data()}));Rt.sort((mt,Ht)=>{const Zt=mt.createdAt?.toMillis?.()||0;return(Ht.createdAt?.toMillis?.()||0)-Zt}),Te(Rt)}catch(it){console.error("Error fetching notes:",it),Te([])}B(!1)},je=()=>{ee(null),Te([]),G("list")},ce=async()=>{if(!P)return;const{sessionNotes:te,whatWentWell:it,whatWentWrong:kt,whatsNext:Rt}=$;if(!(!te.trim()&&!it.trim()&&!kt.trim()&&!Rt.trim())){z(!0);try{const Ht=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});await ai(en(Je,"sessionNotes"),{clientId:P.clientId,date:Ht,sessionNotes:te.trim(),whatWentWell:it.trim(),whatWentWrong:kt.trim(),whatsNext:Rt.trim(),createdAt:Et.now()}),le({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""});const Zt=ds(en(Je,"sessionNotes"),Hn("clientId","==",P.clientId)),ze=(await yn(Zt)).docs.map(Ze=>({id:Ze.id,...Ze.data()}));ze.sort((Ze,gt)=>{const Lt=Ze.createdAt?.toMillis?.()||0;return(gt.createdAt?.toMillis?.()||0)-Lt}),Te(ze),G("list")}catch(mt){console.error("Error saving note:",mt),alert("Failed to save note. Check Firestore rules for sessionNotes collection.")}z(!1)}},Ee=async te=>{if(window.confirm("Delete this session note?"))try{await xa(Mt(Je,"sessionNotes",te)),Te(X.filter(it=>it.id!==te))}catch(it){console.error("Error deleting note:",it)}};if(o)return n.jsx("div",{className:"client-list-loading",children:"Loading clients..."});if(r.length===0)return n.jsxs("div",{className:"client-list-empty",children:[n.jsx("p",{children:"No clients yet"}),n.jsx("span",{children:"Add your first client to get started"})]});const ue=te=>te.clientType==="circuit_vip"?"VIP":te.clientType==="circuit_dropin"?"Drop-in":te.clientType==="core_buddy"?"Core Buddy":"Block",xe=r.filter(te=>te.name?.toLowerCase().includes(E.toLowerCase())||te.email?.toLowerCase().includes(E.toLowerCase())),Fe=te=>te.clientType==="circuit_vip"||te.clientType==="circuit_dropin",ot=te=>te.clientType==="core_buddy",Ue=te=>te.status==="archived",_e=xe.filter(te=>!Ue(te)),Ke=_e.filter(te=>!Fe(te)&&!ot(te)),ve=_e.filter(te=>Fe(te)),bt=_e.filter(te=>ot(te)),ht=xe.filter(te=>Ue(te)),Ye=L==="block"?Ke:L==="circuit"?ve:L==="core_buddy"?bt:L==="archived"?ht:_e,Ot=te=>{u||S(it=>it===te?null:te)},jt=te=>{const it=k===te.id,kt=u===te.id,Rt=!te.clientType||te.clientType==="block";return n.jsxs("div",{className:`client-card ${te.status==="archived"?"archived":""} ${it||kt?"expanded":"collapsed"}`,children:[n.jsxs("div",{className:"client-name-row",onClick:()=>Ot(te.id),children:[n.jsxs("div",{className:"client-name-row-left",children:[n.jsx("span",{className:"client-name-initial",children:te.name?.charAt(0)?.toUpperCase()}),n.jsxs("div",{className:"client-name-text",children:[n.jsx("h3",{children:te.name}),n.jsx("span",{className:"client-name-sub",children:Rt?`${Le(te)}/${te.totalSessions||0} sessions`:ue(te)})]})]}),n.jsxs("div",{className:"client-name-row-right",children:[(te.clientType==="circuit_vip"||te.clientType==="circuit_dropin"||te.clientType==="core_buddy")&&n.jsx("span",{className:`client-type-badge ${te.clientType==="circuit_vip"?"vip":te.clientType==="core_buddy"?"core-buddy":"dropin"}`,children:ue(te)}),n.jsx("span",{className:`status-dot ${te.status}`}),n.jsx("svg",{className:`client-chevron ${it||kt?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M6 9l6 6 6-6"})})]})]}),(it||kt)&&n.jsx("div",{className:"client-expand-panel",children:kt?n.jsxs("div",{className:"edit-form",children:[n.jsx("div",{className:"edit-type-toggle",children:[{value:"block",label:"Block"},{value:"circuit_vip",label:"VIP"},{value:"circuit_dropin",label:"Drop-in"},{value:"core_buddy",label:"Core Buddy"}].map(mt=>n.jsx("button",{type:"button",className:`edit-type-btn ${m.clientType===mt.value?"active":""}`,onClick:()=>b(Ht=>({...Ht,clientType:mt.value})),children:mt.label},mt.value))}),n.jsxs("div",{className:"edit-row",children:[n.jsx("input",{type:"text",name:"name",value:m.name,onChange:He,placeholder:"Name"}),n.jsx("input",{type:"email",name:"email",value:m.email,onChange:He,placeholder:"Email"})]}),m.clientType==="block"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"edit-row",children:[n.jsx("input",{type:"number",name:"weeksInBlock",value:m.weeksInBlock,onChange:He,placeholder:"Weeks",min:"1"}),n.jsx("input",{type:"number",name:"totalSessions",value:m.totalSessions,onChange:He,placeholder:"Total Sessions",min:"1"}),n.jsxs("select",{name:"sessionDuration",value:m.sessionDuration,onChange:He,children:[n.jsx("option",{value:"30",children:"30 min"}),n.jsx("option",{value:"45",children:"45 min"})]})]}),n.jsxs("div",{className:"edit-row",children:[n.jsx("input",{type:"date",name:"startDate",value:m.startDate,onChange:He}),n.jsx("input",{type:"date",name:"endDate",value:m.endDate,onChange:He})]})]}),n.jsx("div",{className:"edit-row password-row",children:m.hasPortalAccess?n.jsx("div",{className:"portal-status has-access",children:"Has portal access"}):n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",name:"password",value:m.password,onChange:He,placeholder:"Set portal password (min 6 chars)"}),n.jsx("span",{className:"password-hint",children:"Set password to enable client portal"})]})}),m.clientType==="block"&&n.jsx("div",{className:"edit-row circuit-row",children:n.jsxs("label",{className:"circuit-access-toggle",children:[n.jsx("input",{type:"checkbox",checked:m.circuitAccess,onChange:mt=>b(Ht=>({...Ht,circuitAccess:mt.target.checked}))}),n.jsx("span",{children:"Circuit Class Access"})]})}),m.clientType!=="core_buddy"&&n.jsx("div",{className:"edit-row circuit-row",children:n.jsxs("label",{className:"circuit-access-toggle",children:[n.jsx("input",{type:"checkbox",checked:m.coreBuddyAccess,onChange:mt=>b(Ht=>({...Ht,coreBuddyAccess:mt.target.checked}))}),n.jsx("span",{children:"Core Buddy Access"})]})}),m.clientType==="block"&&n.jsx("div",{className:"edit-row circuit-row",children:n.jsxs("label",{className:"circuit-access-toggle",children:[n.jsx("input",{type:"checkbox",checked:m.isJunior,onChange:mt=>b(Ht=>({...Ht,isJunior:mt.target.checked}))}),n.jsx("span",{children:"Junior Client (Kids)"})]})}),n.jsxs("div",{className:"edit-actions",children:[n.jsx("button",{className:"save-edit-btn",onClick:()=>Q(te.id),children:"Save"}),n.jsx("button",{className:"cancel-edit-btn",onClick:()=>{h(null)},children:"Cancel"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"client-expand-info",children:[n.jsx("span",{className:"client-email",children:te.email}),n.jsx("span",{className:`status-badge ${te.status}`,children:te.status})]}),Rt?n.jsxs("div",{className:"client-details",children:[n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"Block"}),n.jsxs("span",{className:"detail-value",children:[te.weeksInBlock," weeks"]})]}),n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"Sessions"}),n.jsxs("span",{className:"detail-value",children:[Le(te)," / ",te.totalSessions," remaining"]})]}),n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"Booked"}),n.jsxs("span",{className:"detail-value",children:[Oe(te.id)," sessions"]})]}),n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"Duration"}),n.jsxs("span",{className:"detail-value",children:[te.sessionDuration||45," min"]})]}),n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"Start"}),n.jsx("span",{className:"detail-value",children:ne(te.startDate)})]}),n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"End"}),n.jsx("span",{className:"detail-value",children:ne(te.endDate)})]})]}):n.jsxs("div",{className:"client-details circuit-details",children:[n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"Type"}),n.jsx("span",{className:"detail-value",children:te.clientType==="circuit_vip"?"Monthly VIP":"Drop-in"})]}),n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"Strikes"}),n.jsxs("span",{className:"detail-value",children:[te.circuitStrikes||0,"/3"]})]}),n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"Joined"}),n.jsx("span",{className:"detail-value",children:ne(te.createdAt)})]})]}),n.jsxs("div",{className:"client-actions",children:[Rt&&n.jsxs("button",{className:"action-btn notes",onClick:mt=>{mt.stopPropagation(),Ne(te)},children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[n.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Notes"]}),n.jsx("button",{className:"action-btn edit",onClick:mt=>{mt.stopPropagation(),Ae(te)},children:"Edit"}),n.jsx("button",{className:"action-btn archive",onClick:mt=>{mt.stopPropagation(),we(te.id)},children:te.status==="archived"?"Reactivate":"Archive"}),n.jsx("button",{className:"action-btn delete",onClick:mt=>{mt.stopPropagation(),be(te.id,te.name)},children:"Delete"})]})]})})]},te.id)};return n.jsxs("div",{className:"client-list",children:[n.jsxs("div",{className:"client-search",children:[n.jsxs("svg",{className:"client-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"11",cy:"11",r:"8"}),n.jsx("path",{d:"M21 21l-4.35-4.35"})]}),n.jsx("input",{type:"text",placeholder:"Search clients...",value:E,onChange:te=>F(te.target.value),className:"client-search-input"}),E&&n.jsx("button",{className:"client-search-clear",onClick:()=>F(""),children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),n.jsx("div",{className:"client-type-filter",children:[{value:"all",label:"All",count:_e.length},{value:"block",label:"Block",count:Ke.length},{value:"circuit",label:"Circuit",count:ve.length},{value:"core_buddy",label:"Core Buddy",count:bt.length},{value:"archived",label:"Archived",count:ht.length}].map(te=>n.jsxs("button",{className:`client-filter-btn ${L===te.value?"active":""}`,onClick:()=>V(te.value),children:[te.label,n.jsx("span",{className:"client-filter-count",children:te.count})]},te.value))}),L==="all"?n.jsxs(n.Fragment,{children:[Ke.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"client-section-header",children:["Block Members ",n.jsx("span",{children:Ke.length})]}),Ke.map(jt)]}),ve.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"client-section-header",children:["Circuit Members ",n.jsx("span",{children:ve.length})]}),ve.map(jt)]}),bt.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"client-section-header",children:["Core Buddy Members ",n.jsx("span",{children:bt.length})]}),bt.map(jt)]})]}):L==="archived"?n.jsx(n.Fragment,{children:ht.length===0?n.jsx("div",{className:"client-section-empty",children:"No archived clients"}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"client-section-header",children:["Archived Clients ",n.jsx("span",{children:ht.length})]}),ht.map(jt)]})}):n.jsxs(n.Fragment,{children:[Ye.length===0&&n.jsxs("div",{className:"client-section-empty",children:["No ",L," clients found"]}),Ye.map(jt)]}),P&&n.jsx("div",{className:"notes-modal-overlay",onClick:je,children:n.jsxs("div",{className:"notes-modal",onClick:te=>te.stopPropagation(),children:[n.jsxs("div",{className:"notes-modal-header",children:[n.jsxs("h3",{children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",children:[n.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),P.clientName]}),n.jsx("button",{className:"notes-modal-close",onClick:je,children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),Y==="list"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"notes-modal-body",children:Re?n.jsx("div",{className:"notes-loading",children:"Loading notes..."}):X.length===0?n.jsxs("div",{className:"notes-empty",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",width:"40",height:"40",children:[n.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"})]}),n.jsx("p",{children:"No session notes yet"}),n.jsx("span",{children:"Add notes after each session"})]}):n.jsx("div",{className:"notes-list",children:X.map(te=>n.jsxs("div",{className:"note-card",children:[n.jsxs("div",{className:"note-card-header",children:[n.jsx("span",{className:"note-date",children:te.date}),n.jsx("button",{className:"note-delete-btn",onClick:()=>Ee(te.id),children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[n.jsx("polyline",{points:"3 6 5 6 21 6"}),n.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]})})]}),te.sessionNotes&&n.jsxs("div",{className:"note-section",children:[n.jsx("span",{className:"note-section-label",children:"Session Notes"}),n.jsx("p",{children:te.sessionNotes})]}),te.whatWentWell&&n.jsxs("div",{className:"note-section went-well",children:[n.jsx("span",{className:"note-section-label",children:"What Went Well"}),n.jsx("p",{children:te.whatWentWell})]}),te.whatWentWrong&&n.jsxs("div",{className:"note-section went-wrong",children:[n.jsx("span",{className:"note-section-label",children:"What Went Wrong"}),n.jsx("p",{children:te.whatWentWrong})]}),te.whatsNext&&n.jsxs("div",{className:"note-section whats-next",children:[n.jsx("span",{className:"note-section-label",children:"What's Next"}),n.jsx("p",{children:te.whatsNext})]})]},te.id))})}),n.jsx("div",{className:"notes-modal-footer",children:n.jsxs("button",{className:"notes-add-btn",onClick:()=>G("add"),children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[n.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),n.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Session Notes"]})})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"notes-modal-body",children:n.jsxs("div",{className:"notes-form",children:[n.jsxs("div",{className:"notes-form-group",children:[n.jsx("label",{children:"Session Notes"}),n.jsx("textarea",{value:$.sessionNotes,onChange:te=>le(it=>({...it,sessionNotes:te.target.value})),placeholder:"Overview of the session...",rows:"3"})]}),n.jsxs("div",{className:"notes-form-group went-well",children:[n.jsxs("label",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"What Went Well"]}),n.jsx("textarea",{value:$.whatWentWell,onChange:te=>le(it=>({...it,whatWentWell:te.target.value})),placeholder:"Positives from the session...",rows:"2"})]}),n.jsxs("div",{className:"notes-form-group went-wrong",children:[n.jsxs("label",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),"What Went Wrong"]}),n.jsx("textarea",{value:$.whatWentWrong,onChange:te=>le(it=>({...it,whatWentWrong:te.target.value})),placeholder:"Areas to improve...",rows:"2"})]}),n.jsxs("div",{className:"notes-form-group whats-next",children:[n.jsxs("label",{children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})}),"What's Next"]}),n.jsx("textarea",{value:$.whatsNext,onChange:te=>le(it=>({...it,whatsNext:te.target.value})),placeholder:"Goals for next session...",rows:"2"})]})]})}),n.jsxs("div",{className:"notes-modal-footer",children:[n.jsx("button",{className:"notes-cancel-btn",onClick:()=>G("list"),children:"Back"}),n.jsx("button",{className:"notes-save-btn",onClick:ce,disabled:O,children:O?"Saving...":"Save Notes"})]})]})]})})]})}const Nv={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"12:00",end:"17:00"},defaultBlocked:!0}},zf=["monday","tuesday","wednesday","thursday","friday"],yD=["Monday","Tuesday","Wednesday","Thursday","Friday"],bD=["Mon","Tue","Wed","Thu","Fri"],m2=r=>{const[e,t]=r.split(":"),i=parseInt(e),o=i>=12?"pm":"am";return`${i>12?i-12:i===0?12:i}:${t}${o}`},xD=r=>{const e=new Date(r),t=e.getDay(),i=e.getDate()-t+(t===0?-6:1);return e.setDate(i),zf.map((o,c)=>{const u=new Date(e);return u.setDate(e.getDate()+c),u})},ta=r=>{const e=r.getFullYear(),t=(r.getMonth()+1).toString().padStart(2,"0"),i=r.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},Sv=r=>{const[e,t]=r.split(":").map(Number);return e*60+t},Rd=(r,e)=>{const t=Sv(r)+e,i=Math.floor(t/60),o=t%60;return`${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},wD=r=>{const e=Nv[r];if(!e)return[];const t=[];if(e.morning){let i=e.morning.start;for(;i<e.morning.end;)t.push({time:i,period:"morning"}),i=Rd(i,15)}if(e.afternoon){let i=e.afternoon.start;for(;i<e.afternoon.end;)t.push({time:i,period:"afternoon"}),i=Rd(i,15)}return t};function jD(){const[r,e]=C.useState(new Date),[t,i]=C.useState([]),[o,c]=C.useState([]),[u,h]=C.useState([]),[m,b]=C.useState([]),[k,S]=C.useState([]),[E,F]=C.useState([]),[L,V]=C.useState(null),[P,ee]=C.useState(null),[$,le]=C.useState(!1),[X,Te]=C.useState(!0);C.useEffect(()=>{i(xD(r))},[r]),C.useEffect(()=>{Y()},[]);const Re=ue=>{if(V(ue),le(!1),ue.startDate){const xe=ue.startDate.toDate?ue.startDate.toDate():new Date(ue.startDate);e(xe)}ee(null)},B=ue=>{const xe=new Date,Fe=ta(xe),ot=`${xe.getHours().toString().padStart(2,"0")}:${xe.getMinutes().toString().padStart(2,"0")}`;return u.filter(Ue=>Ue.clientId!==ue?!1:Ue.date<Fe||Ue.date===Fe&&Ue.time<ot).length},O=ue=>{const xe=B(ue.id);return(ue.totalSessions||0)-xe},z=ue=>{const xe=new Date,Fe=xe.getFullYear(),ot=(xe.getMonth()+1).toString().padStart(2,"0"),Ue=xe.getDate().toString().padStart(2,"0"),_e=`${Fe}-${ot}-${Ue}`,Ke=`${xe.getHours().toString().padStart(2,"0")}:${xe.getMinutes().toString().padStart(2,"0")}`;return u.filter(ve=>ve.clientId!==ue?!1:ve.date>_e||ve.date===_e&&ve.time>=Ke).length},Y=async()=>{try{const xe=(await yn(en(Je,"clients"))).docs.map(Ye=>({id:Ye.id,...Ye.data()})).filter(Ye=>Ye.status==="active");c(xe);const ot=(await yn(en(Je,"sessions"))).docs.map(Ye=>({id:Ye.id,...Ye.data()}));h(ot);const _e=(await yn(en(Je,"holidays"))).docs.map(Ye=>({id:Ye.id,...Ye.data()}));b(_e);const ve=(await yn(en(Je,"blockedTimes"))).docs.map(Ye=>({id:Ye.id,...Ye.data()}));S(ve);const ht=(await yn(en(Je,"openedSlots"))).docs.map(Ye=>({id:Ye.id,...Ye.data()}));F(ht)}catch(ue){console.error("Error fetching data:",ue)}Te(!1)},G=ue=>{const xe=new Date(r);xe.setDate(xe.getDate()+ue*7),e(xe),ee(null)},se=()=>{e(new Date),ee(null)},H=ue=>{const xe=ta(ue);return m.some(Fe=>Fe.date===xe)},Le=(ue,xe)=>{const Fe=ta(ue);return k.some(ot=>ot.date===Fe&&ot.time===xe)},Oe=(ue,xe)=>{const Fe=ta(ue);return E.some(ot=>ot.date===Fe&&ot.time===xe)},ne=ue=>{const xe=zf[ue.getDay()-1];return xe&&Nv[xe]?.defaultBlocked},be=async(ue,xe)=>{const Fe=ta(ue);if(ne(ue)){const Ue=E.find(_e=>_e.date===Fe&&_e.time===xe);try{if(Ue)await xa(Mt(Je,"openedSlots",Ue.id)),F(E.filter(_e=>_e.id!==Ue.id));else{const _e=await ai(en(Je,"openedSlots"),{date:Fe,time:xe,createdAt:Et.now()});F([...E,{id:_e.id,date:Fe,time:xe}])}}catch(_e){console.error("Error toggling opened slot:",_e),alert("Failed to update time slot")}return}const ot=k.find(Ue=>Ue.date===Fe&&Ue.time===xe);try{if(ot)await xa(Mt(Je,"blockedTimes",ot.id)),S(k.filter(Ue=>Ue.id!==ot.id));else{const Ue=await ai(en(Je,"blockedTimes"),{date:Fe,time:xe,createdAt:Et.now()});S([...k,{id:Ue.id,date:Fe,time:xe}])}}catch(Ue){console.error("Error toggling blocked time:",Ue),alert("Failed to update time slot")}},me=ue=>{const xe=ta(ue);return u.filter(Fe=>Fe.date===xe)},Ae=(ue,xe)=>{const Fe=ta(ue);return u.find(ot=>ot.date===Fe&&ot.time===xe)},He=(ue,xe,Fe)=>{const ot=zf[ue.getDay()-1];if(!ot||H(ue))return!1;const Ue=Nv[ot],_e=Math.ceil(Fe/15);if(Ue.defaultBlocked)for(let te=0;te<_e;te++){const it=Rd(xe,te*15);if(!Oe(ue,it))return!1}else for(let te=0;te<_e;te++){const it=Rd(xe,te*15);if(Le(ue,it))return!1}const Ke=ta(ue);if(u.find(te=>te.date===Ke&&te.time===xe))return!1;const bt=Rd(xe,Fe),ht=Ue.morning&&bt<=Ue.morning.end,Ye=Ue.afternoon&&bt<=Ue.afternoon.end,Ot=Ue.morning&&xe>=Ue.morning.start&&xe<Ue.morning.end,jt=Ue.afternoon&&xe>=Ue.afternoon.start&&xe<Ue.afternoon.end;if(Ot&&!ht||jt&&!Ye)return!1;for(const te of u){if(te.date!==Ke)continue;const it=Sv(te.time),kt=it+(te.duration||45),Rt=Sv(xe),mt=Rt+Fe;if(Rt<kt&&mt>it)return!1}return!0},Q=async(ue,xe)=>{const Fe=Ae(ue,xe);if(Fe){if(window.confirm(`Cancel ${Fe.clientName}'s session at ${m2(xe)}?`))try{await xa(Mt(Je,"sessions",Fe.id)),h(u.filter(Ue=>Ue.id!==Fe.id))}catch(Ue){console.error("Error cancelling session:",Ue),alert("Failed to cancel session")}return}if(!L){alert("Please select a client first");return}if(!He(ue,xe,L.sessionDuration||45)){alert("This slot is not available for this client's session duration");return}if(u.filter(Ue=>Ue.clientId===L.id).length>=L.totalSessions){alert(`${L.name} has already booked all ${L.totalSessions} sessions`);return}try{const Ue=ta(ue),_e={clientId:L.id,clientName:L.name,date:Ue,time:xe,duration:L.sessionDuration||45,createdAt:Et.now()},Ke=await ai(en(Je,"sessions"),_e);h([...u,{id:Ke.id,..._e}])}catch(Ue){console.error("Error booking session:",Ue),alert("Failed to book session")}},we=async()=>{if(!L)return;const ue=L.startDate?.toDate?L.startDate.toDate():new Date(L.startDate),xe=L.endDate?.toDate?L.endDate.toDate():new Date(L.endDate),Fe=u.filter(bt=>bt.clientId!==L.id?!1:t.some(ht=>ta(ht)===bt.date));if(Fe.length===0){alert("No sessions in current week to repeat. Book some sessions first, then use this button.");return}const ot=L.weeksInBlock||Math.ceil((xe-ue)/(10080*60*1e3)),Ue=Fe.map(bt=>({dayOfWeek:new Date(bt.date).getDay(),time:bt.time}));let _e=[];const Ke=u.filter(bt=>bt.clientId===L.id).length;for(let bt=0;bt<ot;bt++){const ht=new Date(ue);ht.setDate(ht.getDate()+bt*7);const Ye=new Date(ht),Ot=Ye.getDay(),jt=Ye.getDate()-Ot+(Ot===0?-6:1);Ye.setDate(jt);for(const te of Ue){const it=new Date(Ye),kt=te.dayOfWeek===0?6:te.dayOfWeek-1;it.setDate(Ye.getDate()+kt);const Rt=ta(it);u.some(mt=>mt.clientId===L.id&&mt.date===Rt&&mt.time===te.time)||it<ue||it>xe||m.some(mt=>mt.date===Rt)||_e.push({dateKey:Rt,time:te.time,sessionDate:it})}}const ve=Ke+_e.length;if(ve>L.totalSessions){alert(`This would create ${_e.length} new sessions (${ve} total), but client only has ${L.totalSessions} sessions in their package.

You can still book ${L.totalSessions-Ke} more sessions.`);return}if(_e.length===0){alert("All weeks already have sessions booked for this pattern.");return}if(window.confirm(`This will create ${_e.length} new sessions across the block.

(${Ke} existing + ${_e.length} new = ${ve} total)

Continue?`))try{const bt=[];for(const ht of _e){const Ye={clientId:L.id,clientName:L.name,date:ht.dateKey,time:ht.time,duration:L.sessionDuration||45,createdAt:Et.now()},Ot=await ai(en(Je,"sessions"),Ye);bt.push({id:Ot.id,...Ye})}h([...u,...bt]),alert(`Created ${bt.length} new sessions!`)}catch(bt){console.error("Error repeating weekly:",bt),alert("Failed to repeat sessions")}},Ne=async ue=>{const xe=ta(ue),Fe=m.find(ot=>ot.date===xe);try{if(Fe)await xa(Mt(Je,"holidays",Fe.id)),b(m.filter(ot=>ot.id!==Fe.id));else{const ot=await ai(en(Je,"holidays"),{date:xe,createdAt:Et.now()});b([...m,{id:ot.id,date:xe}])}}catch(ot){console.error("Error toggling day availability:",ot),alert("Failed to update day availability")}};if(X)return n.jsx("div",{className:"calendar-loading",children:"Loading calendar..."});const je=t[0],ce=t[4],Ee=je&&ce?`${je.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${ce.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return n.jsxs("div",{className:"calendar",children:[n.jsxs("div",{className:"calendar-header",children:[n.jsxs("div",{className:"calendar-nav",children:[n.jsx("button",{onClick:()=>G(-1),children:""}),n.jsx("button",{onClick:se,children:"Today"}),n.jsx("button",{onClick:()=>G(1),children:""})]}),n.jsx("h3",{children:Ee})]}),n.jsxs("div",{className:"client-selector",children:[n.jsx("span",{className:"selector-label",children:"Booking for:"}),L?n.jsxs("div",{className:"selected-client",children:[n.jsxs("div",{className:"selected-info",children:[n.jsx("strong",{children:L.name}),n.jsxs("span",{children:[L.sessionDuration||45,"min  ",O(L),"/",L.totalSessions," remaining"]}),n.jsxs("span",{className:"booked-info",children:[z(L.id)," booked"]})]}),n.jsx("button",{onClick:()=>V(null),children:"Change"})]}):n.jsx("button",{className:"select-client-btn",onClick:()=>le(!0),children:"Select Client"})]}),L&&n.jsxs("div",{className:"repeat-weekly-section",children:[n.jsx("button",{className:"repeat-weekly-btn",onClick:we,children:"Repeat This Week's Schedule For All Weeks"}),n.jsx("span",{className:"repeat-hint",children:"Copies current week's sessions to all weeks in block"})]}),n.jsx("div",{className:"day-cards",children:t.map((ue,xe)=>{const Fe=me(ue),ot=ta(ue)===ta(new Date),Ue=H(ue);return n.jsxs("div",{className:`day-card ${P===xe?"selected":""} ${ot?"today":""} ${Ue?"holiday":""}`,onClick:()=>ee(P===xe?null:xe),children:[n.jsxs("div",{className:"day-card-header",children:[n.jsx("span",{className:"day-name",children:bD[xe]}),n.jsx("span",{className:"day-date",children:ue.getDate()})]}),Ue?n.jsx("div",{className:"day-card-status holiday",children:"Unavailable"}):n.jsxs("div",{className:"day-card-status",children:[Fe.length," session",Fe.length!==1?"s":""]})]},xe)})}),P!==null&&t[P]&&n.jsxs("div",{className:"time-panel",children:[n.jsxs("div",{className:"time-panel-header",children:[n.jsxs("h4",{children:[yD[P]," ",t[P].getDate()]}),n.jsx("button",{className:"close-panel",onClick:()=>ee(null),children:""})]}),n.jsx("div",{className:"availability-toggle",children:n.jsx("button",{className:`toggle-availability-btn ${H(t[P])?"unavailable":"available"}`,onClick:()=>Ne(t[P]),children:H(t[P])?"Mark Day Available":"Mark Day Unavailable"})}),H(t[P])?n.jsxs("div",{className:"day-unavailable-message",children:[n.jsx("p",{children:"This day is marked as unavailable"}),n.jsx("span",{children:"Tap the button above to make it available again"})]}):n.jsxs("div",{className:"time-slots",children:[ne(t[P])&&n.jsx("div",{className:"default-blocked-notice",children:"Flex day  slots are closed by default. Tap the toggle to open slots."}),wD(zf[P]).map(({time:ue,period:xe},Fe,ot)=>{const Ue=Ae(t[P],ue),_e=ne(t[P]),Ke=_e?!Oe(t[P],ue):Le(t[P],ue),ve=_e&&Oe(t[P],ue),bt=L&&He(t[P],ue,L.sessionDuration||45),ht=Fe===0||ot[Fe-1]?.period!==xe;return n.jsxs("div",{children:[ht&&n.jsx("div",{className:"period-label",children:xe==="morning"?"Morning":"Afternoon"}),n.jsxs("div",{className:"time-slot-row",children:[n.jsxs("button",{className:`time-slot ${Ue?"booked":""} ${Ke&&!Ue?"blocked":""} ${ve&&!Ue?"opened":""} ${bt?"available":""} ${!Ue&&!Ke&&!bt&&L?"unavailable":""}`,onClick:()=>(!Ke||Ue)&&Q(t[P],ue),disabled:Ke&&!Ue,children:[n.jsx("span",{className:"slot-time",children:m2(ue)}),Ue?n.jsxs("span",{className:"slot-client",children:[Ue.clientName," (",Ue.duration,"m)"]}):Ke?n.jsx("span",{className:"slot-blocked",children:_e?"Closed":"Blocked"}):bt?n.jsx("span",{className:"slot-available",children:"Available"}):L?n.jsx("span",{className:"slot-unavailable",children:"Unavailable"}):ve?n.jsx("span",{className:"slot-available",children:"Open"}):n.jsx("span",{className:"slot-empty",children:"Select client to book"})]}),n.jsx("button",{className:`block-toggle-btn ${_e?ve?"is-opened":"":Ke?"is-blocked":""}`,onClick:()=>be(t[P],ue),disabled:!!Ue,title:_e?ve?"Close this slot":"Open this slot":Ke?"Unblock this time":"Block this time",children:_e?ve?"":"+":Ke?"":""})]})]},ue)})]})]}),$&&n.jsx("div",{className:"modal-overlay",onClick:()=>le(!1),children:n.jsxs("div",{className:"modal-content",onClick:ue=>ue.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:"Select Client"}),n.jsx("button",{className:"close-btn",onClick:()=>le(!1),children:""})]}),n.jsx("div",{className:"client-list-picker",children:o.length===0?n.jsx("p",{className:"no-items",children:"No active clients"}):o.map(ue=>{const xe=ue.startDate?.toDate?ue.startDate.toDate():new Date(ue.startDate),Fe=ue.endDate?.toDate?ue.endDate.toDate():new Date(ue.endDate),ot=O(ue),Ue=z(ue.id);return n.jsxs("button",{className:"client-option",onClick:()=>Re(ue),children:[n.jsx("strong",{children:ue.name}),n.jsxs("span",{children:[ue.sessionDuration||45,"min  ",ot,"/",ue.totalSessions," remaining  ",Ue," booked"]}),n.jsxs("span",{className:"client-dates",children:[xe.toLocaleDateString("en-GB",{day:"numeric",month:"short"})," - ",Fe.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]},ue.id)})})]})})]})}const p2=r=>{const[e,t]=r.split(":"),i=parseInt(e),o=i>=12?"pm":"am";return`${i>12?i-12:i===0?12:i}:${t}${o}`},Wd=r=>{const e=r.getFullYear(),t=(r.getMonth()+1).toString().padStart(2,"0"),i=r.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},q_=r=>r===Wd(new Date),_D=r=>{const e=new Date;return e.setDate(e.getDate()+1),r===Wd(e)},g2=r=>q_(r)?"Today":_D(r)?"Tomorrow":new Date(r).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"}),v2=r=>{const e=new Date,t=Wd(e),i=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;if(r.date<t)return!0;if(r.date===t){const o=y2(r.time)+(r.duration||45);return y2(i)>=o}return!1},y2=r=>{const[e,t]=r.split(":").map(Number);return e*60+t};function kD(){const[r,e]=C.useState([]),[t,i]=C.useState(!0),[o,c]=C.useState(new Date);C.useEffect(()=>{u();const L=setInterval(()=>{c(new Date)},6e4);return()=>clearInterval(L)},[]);const u=async()=>{try{const V=(await yn(en(Je,"sessions"))).docs.map($=>({id:$.id,...$.data()})),P=Wd(new Date),ee=V.filter($=>$.date>=P).sort(($,le)=>$.date!==le.date?$.date.localeCompare(le.date):$.time.localeCompare(le.time));e(ee)}catch(L){console.error("Error fetching sessions:",L)}i(!1)},h=async L=>{if(window.confirm(`Cancel ${L.clientName}'s session at ${p2(L.time)} on ${g2(L.date)}?`))try{await xa(Mt(Je,"sessions",L.id)),e(r.filter(V=>V.id!==L.id))}catch(V){console.error("Error cancelling session:",V),alert("Failed to cancel session")}};if(t)return n.jsx("div",{className:"schedule-loading",children:"Loading schedule..."});const m=r.reduce((L,V)=>{const P=V.date;return L[P]||(L[P]=[]),L[P].push(V),L},{}),b=Object.keys(m).sort(),k=Wd(new Date),S=m[k]||[],E=S.filter(L=>v2(L)).length,F=S.length-E;return n.jsxs("div",{className:"schedule",children:[n.jsxs("div",{className:"today-summary",children:[n.jsx("h3",{children:"Today's Sessions"}),n.jsx("div",{className:"today-count",children:S.length===0?n.jsx("span",{className:"no-sessions",children:"No sessions today"}):n.jsxs("div",{className:"today-stats",children:[n.jsxs("span",{className:"completed-count",children:[E," completed"]}),n.jsxs("span",{className:"remaining-count",children:[F," remaining"]})]})})]}),b.length===0?n.jsx("div",{className:"no-upcoming",children:n.jsx("p",{children:"No upcoming sessions booked"})}):n.jsx("div",{className:"sessions-list",children:b.map(L=>n.jsxs("div",{className:`date-group ${q_(L)?"today":""}`,children:[n.jsxs("div",{className:"date-header",children:[n.jsx("span",{className:"date-label",children:g2(L)}),n.jsxs("span",{className:"date-count",children:[m[L].length," session",m[L].length!==1?"s":""]})]}),n.jsx("div",{className:"date-sessions",children:m[L].map(V=>{const P=v2(V);return n.jsxs("div",{className:`session-card ${P?"completed":""}`,children:[n.jsx("div",{className:"session-time",children:p2(V.time)}),n.jsxs("div",{className:"session-details",children:[n.jsx("strong",{children:V.clientName}),n.jsxs("span",{children:[V.duration,"min session"]})]}),P?n.jsx("div",{className:"completed-badge",children:""}):n.jsx("button",{className:"cancel-session-btn",onClick:()=>h(V),children:"Cancel"})]},V.id)})})]},L))})]})}const ND={sedentary:"Sedentary (little to no exercise)",light:"Lightly Active (1-2 days/week)",moderate:"Moderately Active (3-4 days/week)",active:"Very Active (5+ days/week)",athlete:"Athlete/Highly Active"},SD={"less-5":"Less than 5 hours","5-6":"5-6 hours","7-8":"7-8 hours","more-8":"More than 8 hours"},TD={low:"Low",moderate:"Moderate",high:"High","very-high":"Very High"},ED=[{key:"q1HeartCondition",text:"Has your doctor ever said that you have a heart condition and that you should only do physical activity recommended by a doctor?"},{key:"q2ChestPain",text:"Do you feel pain in your chest when you do physical activity?"},{key:"q3ChestPainLastMonth",text:"In the past month, have you had chest pain when you were not doing physical activity?"},{key:"q4Balance",text:"Do you lose your balance because of dizziness or do you ever lose consciousness?"},{key:"q5BoneJoint",text:"Do you have a bone or joint problem that could be made worse by a change in your physical activity?"},{key:"q6BloodPressure",text:"Is your doctor currently prescribing drugs for your blood pressure or heart condition?"},{key:"q7OtherReason",text:"Do you know of any other reason why you should not do physical activity?"}];function CD(){const[r,e]=C.useState([]),[t,i]=C.useState(!0),[o,c]=C.useState(null),[u,h]=C.useState(null),[m,b]=C.useState("all"),[k,S]=C.useState("");C.useEffect(()=>{E()},[]);const E=async()=>{try{const O=(await yn(en(Je,"clients"))).docs.map(z=>({id:z.id,...z.data()}));O.sort((z,Y)=>(z.name||"").localeCompare(Y.name||"")),e(O)}catch(B){console.error("Error fetching clients:",B)}i(!1)},F=B=>!!B.welcomeForm?.completedAt,L=B=>!!B.parqForm?.completedAt,V=B=>F(B)||L(B),P=B=>F(B)&&L(B),ee=B=>B?(B.toDate?B.toDate():new Date(B)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",$=r.filter(B=>!k||B.name?.toLowerCase().includes(k.toLowerCase())?m==="all"?!0:m==="completed"?P(B):m==="partial"?V(B)&&!P(B):m==="pending"?!V(B):!0:!1),le=r.filter(P).length,X=r.filter(B=>V(B)&&!P(B)).length,Te=r.filter(B=>!V(B)).length,Re=B=>{o===B?(c(null),h(null)):(c(B),h(null))};return t?n.jsx("div",{className:"forms-loading",children:"Loading form submissions..."}):n.jsxs("div",{className:"form-submissions",children:[n.jsxs("div",{className:"forms-stats",children:[n.jsxs("div",{className:"forms-stat",children:[n.jsx("span",{className:"stat-number",children:le}),n.jsx("span",{className:"stat-label",children:"Complete"})]}),n.jsxs("div",{className:"forms-stat partial",children:[n.jsx("span",{className:"stat-number",children:X}),n.jsx("span",{className:"stat-label",children:"Partial"})]}),n.jsxs("div",{className:"forms-stat pending",children:[n.jsx("span",{className:"stat-number",children:Te}),n.jsx("span",{className:"stat-label",children:"Pending"})]})]}),n.jsxs("div",{className:"forms-search",children:[n.jsxs("svg",{className:"forms-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"11",cy:"11",r:"8"}),n.jsx("path",{d:"m21 21-4.35-4.35"})]}),n.jsx("input",{type:"text",className:"forms-search-input",placeholder:"Search clients...",value:k,onChange:B=>S(B.target.value)}),k&&n.jsx("button",{className:"forms-search-clear",onClick:()=>S(""),children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),n.jsxs("div",{className:"forms-filter",children:[n.jsxs("button",{className:`forms-filter-btn ${m==="all"?"active":""}`,onClick:()=>b("all"),children:["All ",n.jsx("span",{className:"forms-filter-count",children:r.length})]}),n.jsxs("button",{className:`forms-filter-btn ${m==="completed"?"active":""}`,onClick:()=>b("completed"),children:["Complete ",n.jsx("span",{className:"forms-filter-count",children:le})]}),n.jsxs("button",{className:`forms-filter-btn ${m==="partial"?"active":""}`,onClick:()=>b("partial"),children:["Partial ",n.jsx("span",{className:"forms-filter-count",children:X})]}),n.jsxs("button",{className:`forms-filter-btn ${m==="pending"?"active":""}`,onClick:()=>b("pending"),children:["Pending ",n.jsx("span",{className:"forms-filter-count",children:Te})]})]}),$.length===0?n.jsxs("div",{className:"forms-empty",children:[n.jsx("div",{className:"forms-empty-icon",children:n.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),n.jsx("path",{d:"M35 35h30M35 50h30M35 65h20"}),n.jsx("circle",{cx:"70",cy:"70",r:"18",fill:"var(--bg-card)",strokeWidth:"3"}),n.jsx("path",{d:"M63 70h14M70 63v14",strokeWidth:"3",strokeLinecap:"round"})]})}),n.jsx("p",{children:"No clients match this filter"}),n.jsx("span",{children:"Try adjusting your search or filter"})]}):n.jsx("div",{className:"forms-client-list",children:$.map(B=>{const O=o===B.id,z=F(B),Y=L(B);return n.jsxs("div",{className:`forms-client-card ${O?"expanded":""}`,children:[n.jsxs("div",{className:"forms-client-row",onClick:()=>Re(B.id),children:[n.jsxs("div",{className:"forms-client-left",children:[n.jsx("div",{className:"forms-client-initial",children:(B.name||"?")[0].toUpperCase()}),n.jsxs("div",{className:"forms-client-info",children:[n.jsx("h3",{children:B.name||"Unknown"}),n.jsxs("div",{className:"forms-badges",children:[n.jsxs("span",{className:`form-badge ${z?"done":"not-done"}`,children:[z?"":""," Welcome"]}),n.jsxs("span",{className:`form-badge ${Y?"done":"not-done"}`,children:[Y?"":""," PAR-Q"]})]})]})]}),n.jsx("svg",{className:`forms-chevron ${O?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"m6 9 6 6 6-6"})})]}),O&&n.jsx("div",{className:"forms-expand-panel",children:!z&&!Y?n.jsxs("div",{className:"forms-no-data",children:[n.jsx("p",{children:"No forms submitted yet"}),n.jsx("span",{children:"This client hasn't completed any forms"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"forms-toggle",children:[z&&n.jsx("button",{className:`forms-toggle-btn ${u==="welcome"||!u&&z?"active":""}`,onClick:()=>h("welcome"),children:"Welcome Questionnaire"}),Y&&n.jsx("button",{className:`forms-toggle-btn ${u==="parq"||!u&&!z&&Y?"active":""}`,onClick:()=>h("parq"),children:"PAR-Q Health Screening"})]}),(u==="welcome"||!u&&z)&&z&&n.jsxs("div",{className:"form-data",children:[n.jsxs("div",{className:"form-data-header",children:[n.jsx("span",{className:"form-data-title",children:"Welcome Questionnaire"}),n.jsxs("span",{className:"form-data-date",children:["Submitted ",ee(B.welcomeForm.completedAt)]})]}),B.welcomeForm.fitnessGoals&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Fitness Goals"}),n.jsx("p",{children:B.welcomeForm.fitnessGoals})]}),B.welcomeForm.currentActivityLevel&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Activity Level"}),n.jsx("p",{children:ND[B.welcomeForm.currentActivityLevel]||B.welcomeForm.currentActivityLevel})]}),B.welcomeForm.exerciseHistory&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Exercise History"}),n.jsx("p",{children:B.welcomeForm.exerciseHistory})]}),B.welcomeForm.injuries&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Injuries"}),n.jsx("p",{children:B.welcomeForm.injuries})]}),B.welcomeForm.medicalConditions&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Medical Conditions"}),n.jsx("p",{children:B.welcomeForm.medicalConditions})]}),B.welcomeForm.sleepHours&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Sleep"}),n.jsx("p",{children:SD[B.welcomeForm.sleepHours]||B.welcomeForm.sleepHours})]}),B.welcomeForm.stressLevel&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Stress Level"}),n.jsx("p",{children:TD[B.welcomeForm.stressLevel]||B.welcomeForm.stressLevel})]}),B.welcomeForm.dietaryInfo&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Diet / Nutrition"}),n.jsx("p",{children:B.welcomeForm.dietaryInfo})]}),B.welcomeForm.availability&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Availability"}),n.jsx("p",{children:B.welcomeForm.availability})]}),B.welcomeForm.additionalInfo&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Additional Info"}),n.jsx("p",{children:B.welcomeForm.additionalInfo})]})]}),u==="parq"&&Y&&n.jsxs("div",{className:"form-data",children:[n.jsxs("div",{className:"form-data-header",children:[n.jsx("span",{className:"form-data-title",children:"PAR-Q Health Screening"}),n.jsxs("span",{className:"form-data-date",children:["Submitted ",ee(B.parqForm.completedAt)]})]}),n.jsx("div",{className:"parq-results",children:ED.map(G=>{const se=B.parqForm[G.key];return n.jsxs("div",{className:`parq-result-item ${se?"flagged":""}`,children:[n.jsx("span",{className:`parq-answer ${se?"yes":"no"}`,children:se?"YES":"NO"}),n.jsx("span",{className:"parq-question-text",children:G.text})]},G.key)})}),B.parqForm.additionalDetails&&n.jsxs("div",{className:"form-data-field",children:[n.jsx("label",{children:"Additional Details"}),n.jsx("p",{children:B.parqForm.additionalDetails})]}),n.jsx("div",{className:"parq-declaration-status",children:n.jsx("span",{className:B.parqForm.declaration?"declared":"not-declared",children:B.parqForm.declaration?" Declaration signed":" Declaration not signed"})})]})]})})]},B.id)})})]})}const Cg=r=>`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,b2=r=>new Date(r+"T09:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),x2=()=>{const r=new Date;let t=(6-r.getDay()+7)%7;if(t===0){const o=new Date(r);o.setHours(9,45,0,0),r>o&&(t=7)}const i=new Date(r);return i.setDate(r.getDate()+t),i},qf=r=>r==="circuit_vip"?"VIP":r==="circuit_dropin"?"Drop-in":"Block",Wf=r=>r==="circuit_vip"?"vip":r==="circuit_dropin"?"dropin":"block";function AD(){const[r,e]=C.useState(!0),[t,i]=C.useState([]),[o,c]=C.useState([]),[u,h]=C.useState(null),[m,b]=C.useState("upcoming"),[k,S]=C.useState(!1),[E,F]=C.useState(null),[L,V]=C.useState(!1),[P,ee]=C.useState(!1),$=C.useCallback((ce,Ee="info")=>{F({message:ce,type:Ee}),setTimeout(()=>F(null),4e3)},[]);C.useEffect(()=>{le()},[]);const le=async()=>{try{const Ee=(await yn(en(Je,"circuitSessions"))).docs.map(Ue=>({id:Ue.id,...Ue.data()}));Ee.sort((Ue,_e)=>_e.date.localeCompare(Ue.date)),i(Ee);const xe=(await yn(en(Je,"clients"))).docs.map(Ue=>({id:Ue.id,...Ue.data()})).filter(Ue=>Ue.clientType==="circuit_vip"||Ue.clientType==="circuit_dropin"||Ue.circuitAccess===!0);c(xe);const Fe=Cg(x2()),ot=Ee.find(Ue=>Ue.date===Fe);ot?h(ot):Ee.length>0&&h(Ee[0])}catch(ce){console.error("Error loading circuit data:",ce),$("Failed to load circuit data","error")}e(!1)},X=async ce=>{if(!(!u||k)&&window.confirm("Remove this member from the slot?")){S(!0);try{const Ee=[...u.slots],ue=Ee.findIndex(ot=>ot.slotNumber===ce);if(ue===-1){S(!1);return}let xe=[...u.waitlist||[]];if(xe.length>0){const ot=xe.shift();Ee[ue]={slotNumber:ce,memberId:ot.memberId,memberName:ot.memberName,memberType:ot.memberType,status:"confirmed",bookedAt:Et.now()},$(`Slot given to ${ot.memberName} from waitlist`,"success")}else Ee[ue]={slotNumber:ce,memberId:null,memberName:null,memberType:null,status:"available"},$("Member removed from slot","success");await js(Mt(Je,"circuitSessions",u.id),{slots:Ee,waitlist:xe});const Fe={...u,slots:Ee,waitlist:xe};h(Fe),i(ot=>ot.map(Ue=>Ue.id===Fe.id?Fe:Ue))}catch(Ee){console.error("Error removing from slot:",Ee),$("Failed to remove member","error")}S(!1)}},Te=async(ce,Ee)=>{if(!(!u||k)){S(!0);try{const ue=[...u.slots],xe=ue.findIndex(Ue=>Ue.slotNumber===ce&&Ue.status==="available");if(xe===-1){$("Slot is not available","error"),S(!1);return}if(ue.some(Ue=>Ue.memberId===Ee.id)){$(`${Ee.name} already has a slot`,"error"),S(!1);return}ue[xe]={slotNumber:ce,memberId:Ee.id,memberName:Ee.name,memberType:Ee.clientType||"block",status:"confirmed",bookedAt:Et.now()};const Fe=(u.waitlist||[]).filter(Ue=>Ue.memberId!==Ee.id);await js(Mt(Je,"circuitSessions",u.id),{slots:ue,waitlist:Fe});const ot={...u,slots:ue,waitlist:Fe};h(ot),i(Ue=>Ue.map(_e=>_e.id===ot.id?ot:_e)),$(`${Ee.name} added to slot ${ce}`,"success")}catch(ue){console.error("Error adding to slot:",ue),$("Failed to add member","error")}S(!1)}},Re=async ce=>{if(!(!u||k)){S(!0);try{const Ee=(u.waitlist||[]).filter(xe=>xe.memberId!==ce);await js(Mt(Je,"circuitSessions",u.id),{waitlist:Ee});const ue={...u,waitlist:Ee};h(ue),i(xe=>xe.map(Fe=>Fe.id===ue.id?ue:Fe)),$("Removed from waitlist","success")}catch(Ee){console.error("Error removing from waitlist:",Ee),$("Failed to remove from waitlist","error")}S(!1)}},B=async(ce,Ee)=>{if(!(!u||k)){S(!0);try{const ue=[...u.slots],xe=ue.findIndex(ot=>ot.slotNumber===ce);if(xe===-1){S(!1);return}if(ue[xe]={...ue[xe],attended:Ee},await js(Mt(Je,"circuitSessions",u.id),{slots:ue}),Ee===!1){const ot=ue[xe].memberId;if(ot){const Ue=Mt(Je,"clients",ot),_e=await vs(Ue);if(_e.exists()){const ve=(_e.data().circuitStrikes||0)+1,bt={circuitStrikes:ve};if(ve>=3){const ht=new Date;ht.setMonth(ht.getMonth()+1),bt.circuitBanUntil=Et.fromDate(ht),bt.circuitStrikes=0,$(`${ue[xe].memberName} banned for 1 month (3 strikes)`,"error")}else $(`No-show recorded - ${ue[xe].memberName} (${ve}/3 strikes)`,"error");await js(Ue,bt)}}}else $(`${ue[xe].memberName} marked as attended`,"success");const Fe={...u,slots:ue};h(Fe),i(ot=>ot.map(Ue=>Ue.id===Fe.id?Fe:Ue))}catch(ue){console.error("Error marking attendance:",ue),$("Failed to update attendance","error")}S(!1)}},O=async(ce,Ee)=>{if(!k&&window.confirm(`Reset strikes for ${Ee}?`)){S(!0);try{await js(Mt(Je,"clients",ce),{circuitStrikes:0,circuitBanUntil:null}),c(ue=>ue.map(xe=>xe.id===ce?{...xe,circuitStrikes:0,circuitBanUntil:null}:xe)),$(`Strikes reset for ${Ee}`,"success")}catch(ue){console.error("Error resetting strikes:",ue),$("Failed to reset strikes","error")}S(!1)}},z=async(ce,Ee)=>{if(!k&&window.confirm(`Lift ban for ${Ee}?`)){S(!0);try{await js(Mt(Je,"clients",ce),{circuitBanUntil:null,circuitStrikes:0}),c(ue=>ue.map(xe=>xe.id===ce?{...xe,circuitBanUntil:null,circuitStrikes:0}:xe)),$(`Ban lifted for ${Ee}`,"success")}catch(ue){console.error("Error lifting ban:",ue),$("Failed to lift ban","error")}S(!1)}};if(r)return n.jsxs("div",{className:"cm-loading",children:[n.jsx("div",{className:"cm-loading-spinner"}),n.jsx("span",{children:"Loading circuit data..."})]});const Y=Cg(new Date),G=Cg(x2()),se=t.filter(ce=>ce.date>=Y),H=t.filter(ce=>ce.date<Y),Le=m==="upcoming"?se:H,Oe=u?u.slots.filter(ce=>ce.status!=="available").length:0,ne=u?u.slots.filter(ce=>ce.status==="available").length:0,be=u?u.date>=Y:!1,me=u?u.slots.filter(ce=>ce.memberId).map(ce=>ce.memberId):[],Ae=u?(u.waitlist||[]).map(ce=>ce.memberId):[],He=o.filter(ce=>!me.includes(ce.id)&&!Ae.includes(ce.id)),Q=o.filter(ce=>ce.clientType==="circuit_vip").length,we=o.filter(ce=>ce.clientType==="circuit_dropin").length,Ne=o.filter(ce=>ce.circuitAccess&&ce.clientType!=="circuit_vip"&&ce.clientType!=="circuit_dropin").length,je=o.filter(ce=>ce.circuitBanUntil?(ce.circuitBanUntil.toDate?ce.circuitBanUntil.toDate():new Date(ce.circuitBanUntil))>new Date:!1);return n.jsxs("div",{className:"cm-container",children:[n.jsxs("div",{className:"cm-stats-row",children:[n.jsxs("div",{className:"cm-stat-pill",children:[n.jsx("span",{className:"cm-stat-num",children:Q}),n.jsx("span",{className:"cm-stat-label",children:"VIP"})]}),n.jsxs("div",{className:"cm-stat-pill",children:[n.jsx("span",{className:"cm-stat-num",children:we}),n.jsx("span",{className:"cm-stat-label",children:"Drop-in"})]}),n.jsxs("div",{className:"cm-stat-pill",children:[n.jsx("span",{className:"cm-stat-num",children:Ne}),n.jsx("span",{className:"cm-stat-label",children:"Block"})]}),n.jsxs("div",{className:"cm-stat-pill",children:[n.jsx("span",{className:"cm-stat-num",children:t.length}),n.jsx("span",{className:"cm-stat-label",children:"Sessions"})]})]}),n.jsxs("div",{className:"cm-view-toggle",children:[n.jsx("button",{className:`cm-toggle-btn ${L?"":"active"}`,onClick:()=>V(!1),children:"Sessions"}),n.jsx("button",{className:`cm-toggle-btn ${L?"active":""}`,onClick:()=>V(!0),children:"Members"})]}),!L&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"cm-tabs",children:[n.jsxs("button",{className:`cm-tab ${m==="upcoming"?"active":""}`,onClick:()=>b("upcoming"),children:["Upcoming (",se.length,")"]}),n.jsxs("button",{className:`cm-tab ${m==="past"?"active":""}`,onClick:()=>b("past"),children:["Past (",H.length,")"]})]}),n.jsx("div",{className:"cm-sessions-list",children:Le.length===0?n.jsx("div",{className:"cm-empty",children:n.jsxs("p",{children:["No ",m," sessions"]})}):Le.map(ce=>{const Ee=ce.slots.filter(Fe=>Fe.status!=="available").length,ue=u?.id===ce.id,xe=ce.date===G;return n.jsxs("button",{className:`cm-session-btn ${ue?"selected":""} ${xe?"next":""}`,onClick:()=>{h(ce),ee(!1)},children:[n.jsxs("div",{className:"cm-session-btn-left",children:[n.jsx("span",{className:"cm-session-date",children:b2(ce.date)}),xe&&n.jsx("span",{className:"cm-next-badge",children:"Next"})]}),n.jsxs("div",{className:"cm-session-btn-right",children:[n.jsxs("span",{className:"cm-session-fill",children:[Ee,"/8"]}),(ce.waitlist?.length||0)>0&&n.jsxs("span",{className:"cm-waitlist-count",children:["+",ce.waitlist.length," wl"]})]})]},ce.id)})}),u&&n.jsxs("div",{className:"cm-detail",children:[n.jsxs("div",{className:"cm-detail-header",children:[n.jsxs("div",{children:[n.jsx("h3",{children:b2(u.date)}),n.jsxs("p",{children:[u.time," - ",u.endTime,"  ",Oe,"/8 booked  ",ne," available"]})]}),!be&&n.jsx("button",{className:`cm-attendance-btn ${P?"active":""}`,onClick:()=>ee(!P),children:P?"Done":"Attendance"})]}),n.jsx("div",{className:"cm-slots",children:u.slots.map(ce=>{const Ee=ce.status==="available";return n.jsxs("div",{className:`cm-slot ${Ee?"empty":"filled"} ${ce.attended===!0?"attended":""} ${ce.attended===!1?"no-show":""}`,children:[n.jsx("span",{className:"cm-slot-num",children:ce.slotNumber}),Ee?n.jsxs("div",{className:"cm-slot-empty",children:[n.jsx("span",{children:"Available"}),be&&n.jsx(RD,{members:He,onSelect:ue=>Te(ce.slotNumber,ue),disabled:k})]}):n.jsxs("div",{className:"cm-slot-filled",children:[n.jsxs("div",{className:"cm-slot-info",children:[n.jsx("span",{className:"cm-slot-name",children:ce.memberName}),n.jsx("span",{className:`cm-type-badge ${Wf(ce.memberType)}`,children:qf(ce.memberType)})]}),n.jsxs("div",{className:"cm-slot-actions",children:[P&&ce.attended===void 0&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"cm-attend-yes",onClick:()=>B(ce.slotNumber,!0),disabled:k,title:"Attended",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:n.jsx("path",{d:"M5 13l4 4L19 7"})})}),n.jsx("button",{className:"cm-attend-no",onClick:()=>B(ce.slotNumber,!1),disabled:k,title:"No-show",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:n.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),ce.attended===!0&&n.jsx("span",{className:"cm-attended-label",children:"Attended"}),ce.attended===!1&&n.jsx("span",{className:"cm-noshow-label",children:"No-show"}),be&&n.jsx("button",{className:"cm-remove-btn",onClick:()=>X(ce.slotNumber),disabled:k,title:"Remove from slot",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]})]},ce.slotNumber)})}),(u.waitlist?.length||0)>0&&n.jsxs("div",{className:"cm-waitlist",children:[n.jsxs("h4",{children:["Waitlist (",u.waitlist.length,")"]}),u.waitlist.map((ce,Ee)=>n.jsxs("div",{className:"cm-waitlist-row",children:[n.jsxs("span",{className:"cm-wl-pos",children:["#",Ee+1]}),n.jsx("span",{className:"cm-wl-name",children:ce.memberName}),n.jsx("span",{className:`cm-type-badge ${Wf(ce.memberType)}`,children:qf(ce.memberType)}),be&&n.jsx("button",{className:"cm-wl-remove",onClick:()=>Re(ce.memberId),disabled:k,children:"Remove"})]},ce.memberId))]})]})]}),L&&n.jsxs("div",{className:"cm-members",children:[je.length>0&&n.jsxs("div",{className:"cm-ban-alert",children:[n.jsxs("h4",{children:["Currently Banned (",je.length,")"]}),je.map(ce=>{const Ee=ce.circuitBanUntil?.toDate?ce.circuitBanUntil.toDate():new Date(ce.circuitBanUntil);return n.jsxs("div",{className:"cm-ban-row",children:[n.jsxs("div",{className:"cm-ban-info",children:[n.jsx("span",{className:"cm-ban-name",children:ce.name}),n.jsxs("span",{className:"cm-ban-until",children:["Until ",Ee.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),n.jsx("button",{className:"cm-lift-ban-btn",onClick:()=>z(ce.id,ce.name),disabled:k,children:"Lift Ban"})]},ce.id)})]}),n.jsx("div",{className:"cm-members-list",children:o.length===0?n.jsxs("div",{className:"cm-empty",children:[n.jsx("p",{children:"No circuit members yet"}),n.jsx("span",{children:"Add members via the Clients page"})]}):o.map(ce=>{const Ee=ce.circuitStrikes||0,ue=je.some(xe=>xe.id===ce.id);return n.jsxs("div",{className:`cm-member-card ${ue?"banned":""}`,children:[n.jsxs("div",{className:"cm-member-top",children:[n.jsx("span",{className:"cm-member-name",children:ce.name}),n.jsx("span",{className:`cm-type-badge ${Wf(ce.clientType)}`,children:qf(ce.clientType)})]}),n.jsxs("div",{className:"cm-member-bottom",children:[n.jsxs("div",{className:"cm-strikes",children:[[0,1,2].map(xe=>n.jsx("span",{className:`cm-strike-dot ${xe<Ee?"active":""}`},xe)),n.jsxs("span",{className:"cm-strike-text",children:[Ee,"/3 strikes"]})]}),n.jsxs("div",{className:"cm-member-actions",children:[ue&&n.jsx("button",{className:"cm-small-btn ban",onClick:()=>z(ce.id,ce.name),disabled:k,children:"Lift Ban"}),Ee>0&&!ue&&n.jsx("button",{className:"cm-small-btn reset",onClick:()=>O(ce.id,ce.name),disabled:k,children:"Reset"})]})]})]},ce.id)})})]}),E&&n.jsx("div",{className:`cm-toast ${E.type}`,children:n.jsx("span",{children:E.message})})]})}function RD({members:r,onSelect:e,disabled:t}){const[i,o]=C.useState(!1),[c,u]=C.useState(""),h=r.filter(m=>m.name.toLowerCase().includes(c.toLowerCase()));return r.length===0?null:n.jsxs("div",{className:"cm-add-dropdown",children:[n.jsx("button",{className:"cm-add-trigger",onClick:()=>o(!i),disabled:t,children:"+ Add"}),i&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"cm-dropdown-backdrop",onClick:()=>{o(!1),u("")}}),n.jsxs("div",{className:"cm-dropdown-menu",children:[r.length>4&&n.jsx("input",{type:"text",className:"cm-dropdown-search",placeholder:"Search...",value:c,onChange:m=>u(m.target.value),autoFocus:!0}),n.jsxs("div",{className:"cm-dropdown-list",children:[h.map(m=>n.jsxs("button",{className:"cm-dropdown-item",onClick:()=>{e(m),o(!1),u("")},children:[n.jsx("span",{children:m.name}),n.jsx("span",{className:`cm-type-badge sm ${Wf(m.clientType)}`,children:qf(m.clientType)})]},m.id)),h.length===0&&n.jsx("div",{className:"cm-dropdown-empty",children:"No members found"})]})]})]})]})}function MD(){const[r,e]=C.useState(()=>localStorage.getItem("adminActiveView")||"schedule"),t=_e=>{e(_e),localStorage.setItem("adminActiveView",_e)},[i,o]=C.useState(0),[c,u]=C.useState(!1),[h,m]=C.useState([]),[b,k]=C.useState(null),[S,E]=C.useState(null),[F,L]=C.useState([]),[V,P]=C.useState([]),{currentUser:ee,logout:$,isAdmin:le,loading:X}=Bs(),{isDark:Te,toggleTheme:Re}=ja(),B=hs(),O=C.useRef(0),z=C.useRef(!1);C.useRef(null);const Y=C.useCallback((_e,Ke="info")=>{E({message:_e,type:Ke}),setTimeout(()=>E(null),4e3)},[]);C.useEffect(()=>{!X&&(!ee||!le)&&B("/")},[ee,le,X,B]),C.useEffect(()=>{ee&&le&&G()},[ee,le]);const G=async()=>{try{const _e=ds(en(Je,"rescheduleRequests"),Hn("status","==","pending")),ve=(await yn(_e)).docs.map(bt=>({id:bt.id,...bt.data()}));ve.sort((bt,ht)=>{const Ye=bt.createdAt?.toDate?bt.createdAt.toDate():new Date(0);return(ht.createdAt?.toDate?ht.createdAt.toDate():new Date(0))-Ye}),m(ve)}catch(_e){console.error("Error fetching reschedule requests:",_e)}};C.useEffect(()=>{(async()=>{if(!(!ee||!le))try{const[Ke,ve]=await Promise.all([yn(en(Je,"clients")),yn(en(Je,"sessions"))]),bt=Ke.docs.map(jt=>({id:jt.id,...jt.data()})),ht=ve.docs.map(jt=>({id:jt.id,...jt.data()}));L(bt);const Ye=new Set(bt.map(jt=>jt.id)),Ot=ve.docs.filter(jt=>!Ye.has(jt.data().clientId));if(Ot.length>0){const jt=Ot.map(te=>xa(Mt(Je,"sessions",te.id)));await Promise.all(jt)}P(ht.filter(jt=>Ye.has(jt.clientId)))}catch(Ke){console.error("Error fetching dashboard data:",Ke)}})()},[ee,le]),C.useEffect(()=>{const _e=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,Ke=ht=>{_e()<=0&&(O.current=ht.touches[0].clientY,z.current=!1)},ve=ht=>{const Ye=_e(),jt=ht.touches[0].clientY-O.current;if(Ye>5||jt<=0){z.current=!1,o(0);return}jt>20&&Ye<=0&&(z.current=!0,o(Math.min((jt-20)*.4,80)))},bt=()=>{z.current&&i>60?(u(!0),setTimeout(()=>{window.location.reload()},300)):o(0),z.current=!1};return document.addEventListener("touchstart",Ke,{passive:!0}),document.addEventListener("touchmove",ve,{passive:!0}),document.addEventListener("touchend",bt),()=>{document.removeEventListener("touchstart",Ke),document.removeEventListener("touchmove",ve),document.removeEventListener("touchend",bt)}},[i]);const se=()=>{u(!0),setTimeout(()=>{window.location.reload()},300)},H=async()=>{try{await $(),B("/")}catch(_e){console.error("Failed to log out:",_e)}},Le=()=>{B("/add-client")},Oe=_e=>new Date(_e).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),ne=_e=>{const[Ke,ve]=_e.split(":"),bt=parseInt(Ke),ht=bt>=12?"pm":"am";return`${bt>12?bt-12:bt===0?12:bt}:${ve}${ht}`},be=async _e=>{if(window.confirm(`Approve reschedule for ${_e.clientName}?

From: ${Oe(_e.originalDate)} at ${ne(_e.originalTime)}
To: ${Oe(_e.requestedDate)} at ${ne(_e.requestedTime)}`)){k(_e.id);try{await js(Mt(Je,"sessions",_e.sessionId),{date:_e.requestedDate,time:_e.requestedTime}),await js(Mt(Je,"rescheduleRequests",_e.id),{status:"approved",respondedAt:Et.now()}),m(h.filter(Ke=>Ke.id!==_e.id)),Y(`Approved reschedule for ${_e.clientName}`,"success")}catch(Ke){console.error("Error approving request:",Ke),Y("Failed to approve request","error")}k(null)}},me=async _e=>{if(window.confirm(`Reject reschedule request from ${_e.clientName}?`)){k(_e.id);try{await js(Mt(Je,"rescheduleRequests",_e.id),{status:"rejected",respondedAt:Et.now()}),m(h.filter(Ke=>Ke.id!==_e.id)),Y(`Request from ${_e.clientName} rejected`,"info")}catch(Ke){console.error("Error rejecting request:",Ke),Y("Failed to reject request","error")}k(null)}};if(X)return n.jsx("div",{className:"loading",children:"Loading..."});if(!ee||!le)return null;const Ae=h.length,He=new Date,Q=`${He.getFullYear()}-${(He.getMonth()+1).toString().padStart(2,"0")}-${He.getDate().toString().padStart(2,"0")}`,we=`${He.getHours().toString().padStart(2,"0")}:${He.getMinutes().toString().padStart(2,"0")}`,je=V.filter(_e=>_e.date===Q).length,ce=_e=>V.filter(Ke=>Ke.clientId!==_e?!1:Ke.date<Q||Ke.date===Q&&Ke.time<we).length,Ee=F.filter(_e=>_e.status!=="archived"&&(!_e.clientType||_e.clientType==="block")),ue=new Date(He);ue.setDate(ue.getDate()+7);const xe=Ee.filter(_e=>{if(!_e.endDate)return!1;const Ke=_e.endDate.toDate?_e.endDate.toDate():new Date(_e.endDate);return Ke>=He&&Ke<=ue}),Fe=Ee.filter(_e=>(_e.totalSessions||0)-ce(_e.id)<=2),ot=new Map;xe.forEach(_e=>{const Ke=_e.endDate.toDate?_e.endDate.toDate():new Date(_e.endDate),ve=Math.ceil((Ke-He)/(1e3*60*60*24));ot.set(_e.id,{client:_e,reasons:[`Block ends in ${ve} day${ve!==1?"s":""}`]})}),Fe.forEach(_e=>{const Ke=(_e.totalSessions||0)-ce(_e.id),ve=Ke<=0?"No sessions left":`${Ke} session${Ke!==1?"s":""} left`;ot.has(_e.id)?ot.get(_e.id).reasons.push(ve):ot.set(_e.id,{client:_e,reasons:[ve]})});const Ue=Array.from(ot.values());return n.jsxs("div",{className:"dashboard",children:[i>0&&n.jsxs("div",{className:"pull-indicator",style:{height:i},children:[n.jsx("div",{className:`pull-spinner ${c?"spinning":""}`,children:c?"":""}),n.jsx("span",{children:c?"Refreshing...":i>60?"Release to refresh":"Pull to refresh"})]}),n.jsxs("header",{className:"dashboard-header",children:[n.jsxs("div",{className:"header-left",children:[n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"admin-header-logo"}),n.jsx("span",{className:"admin-badge",children:"Admin"})]}),n.jsxs("nav",{className:"header-nav",children:[n.jsxs("button",{className:`nav-btn ${r==="requests"?"active":""} ${Ae>0?"has-badge":""}`,onClick:()=>t("requests"),children:["Requests",Ae>0&&n.jsx("span",{className:"nav-badge",children:Ae})]}),n.jsx("button",{className:`nav-btn ${r==="forms"?"active":""}`,onClick:()=>t("forms"),children:"Forms"}),n.jsx("button",{className:`nav-btn ${r==="circuits"?"active":""}`,onClick:()=>t("circuits"),children:"Circuits"})]}),n.jsxs("div",{className:"header-actions",children:[n.jsx("button",{className:"theme-toggle-btn",onClick:Re,"aria-label":Te?"Switch to light mode":"Switch to dark mode",children:Te?n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),n.jsx("button",{className:"refresh-btn",onClick:se,disabled:c,children:c?"":""}),n.jsx("button",{className:"logout-btn",onClick:H,children:"Log Out"})]})]}),S&&n.jsx("div",{className:"toast-container",children:n.jsxs("div",{className:`toast ${S.type}`,children:[n.jsxs("span",{className:"toast-icon",children:[S.type==="success"&&n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),S.type==="error"&&n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),S.type==="info"&&n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})]}),n.jsx("span",{className:"toast-message",children:S.message})]})}),n.jsxs("main",{className:"dashboard-main",children:[r==="schedule"&&n.jsxs("div",{className:"schedule-view",children:[n.jsx("div",{className:"view-header",children:n.jsx("h2",{children:"Schedule"})}),n.jsxs("div",{className:"summary-cards",children:[n.jsxs("div",{className:"summary-card",onClick:()=>{},children:[n.jsx("div",{className:"summary-icon sessions-icon",children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),n.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),n.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),n.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),n.jsxs("div",{className:"summary-info",children:[n.jsx("span",{className:"summary-number",children:je}),n.jsx("span",{className:"summary-label",children:"Today"})]})]}),n.jsxs("div",{className:"summary-card",onClick:()=>Ae>0&&t("requests"),children:[n.jsx("div",{className:`summary-icon requests-icon ${Ae>0?"has-items":""}`,children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})})}),n.jsxs("div",{className:"summary-info",children:[n.jsx("span",{className:"summary-number",children:Ae}),n.jsx("span",{className:"summary-label",children:"Requests"})]})]}),n.jsxs("div",{className:"summary-card",onClick:()=>t("clients"),children:[n.jsx("div",{className:`summary-icon expiring-icon ${xe.length>0?"has-items":""}`,children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),n.jsxs("div",{className:"summary-info",children:[n.jsx("span",{className:"summary-number",children:xe.length}),n.jsx("span",{className:"summary-label",children:"Expiring"})]})]}),n.jsxs("div",{className:"summary-card",onClick:()=>t("clients"),children:[n.jsx("div",{className:`summary-icon low-icon ${Fe.length>0?"has-items":""}`,children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),n.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),n.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),n.jsxs("div",{className:"summary-info",children:[n.jsx("span",{className:"summary-number",children:Fe.length}),n.jsx("span",{className:"summary-label",children:"Low Sessions"})]})]})]}),Ue.length>0&&n.jsxs("div",{className:"attention-section",children:[n.jsxs("div",{className:"attention-header",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[n.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),n.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),n.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),n.jsx("span",{children:"Needs Attention"})]}),Ue.map(({client:_e,reasons:Ke})=>n.jsxs("div",{className:"attention-item",children:[n.jsx("span",{className:"attention-name",children:_e.name}),n.jsx("div",{className:"attention-reasons",children:Ke.map((ve,bt)=>n.jsx("span",{className:`attention-tag ${ve.includes("No sessions")?"urgent":ve.includes("ends")?"warning":"low"}`,children:ve},bt))})]},_e.id))]}),n.jsx(kD,{})]}),r==="clients"&&n.jsxs("div",{className:"clients-view",children:[n.jsxs("div",{className:"view-header",children:[n.jsx("h2",{children:"Clients"}),n.jsx("button",{className:"add-btn",onClick:Le,children:"+ Add Client"})]}),n.jsx(vD,{})]}),r==="calendar"&&n.jsxs("div",{className:"calendar-view",children:[n.jsx("div",{className:"view-header",children:n.jsx("h2",{children:"Calendar"})}),n.jsx(jD,{})]}),r==="requests"&&n.jsxs("div",{className:"requests-view",children:[n.jsx("div",{className:"view-header",children:n.jsx("h2",{children:"Reschedule Requests"})}),h.length===0?n.jsxs("div",{className:"no-requests",children:[n.jsx("div",{className:"empty-icon",children:n.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("rect",{x:"20",y:"25",width:"60",height:"50",rx:"4"}),n.jsx("path",{d:"M20 35 L50 55 L80 35"}),n.jsx("circle",{cx:"50",cy:"70",r:"3",fill:"currentColor"})]})}),n.jsx("p",{children:"No pending requests"}),n.jsx("span",{children:"When clients request to reschedule, they will appear here"})]}):n.jsx("div",{className:"requests-list",children:h.map(_e=>n.jsxs("div",{className:"request-card",children:[n.jsxs("div",{className:"request-header",children:[n.jsx("span",{className:"client-name",children:_e.clientName}),n.jsx("span",{className:"request-time",children:_e.createdAt?.toDate?_e.createdAt.toDate().toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""})]}),n.jsx("div",{className:"request-details",children:n.jsxs("div",{className:"request-change",children:[n.jsxs("div",{className:"from-session",children:[n.jsx("span",{className:"label",children:"From:"}),n.jsxs("span",{className:"value",children:[Oe(_e.originalDate)," at ",ne(_e.originalTime)]})]}),n.jsx("div",{className:"arrow",children:""}),n.jsxs("div",{className:"to-session",children:[n.jsx("span",{className:"label",children:"To:"}),n.jsxs("span",{className:"value",children:[Oe(_e.requestedDate)," at ",ne(_e.requestedTime)]})]})]})}),n.jsxs("div",{className:"request-actions",children:[n.jsx("button",{className:"approve-btn",onClick:()=>be(_e),disabled:b===_e.id,children:b===_e.id?"Processing...":"Approve"}),n.jsx("button",{className:"reject-btn",onClick:()=>me(_e),disabled:b===_e.id,children:"Reject"})]})]},_e.id))})]}),r==="forms"&&n.jsxs("div",{className:"forms-view",children:[n.jsx("div",{className:"view-header",children:n.jsx("h2",{children:"Client Forms"})}),n.jsx(CD,{})]}),r==="circuits"&&n.jsxs("div",{className:"circuits-view",children:[n.jsx("div",{className:"view-header",children:n.jsx("h2",{children:"Circuit Management"})}),n.jsx(AD,{})]})]}),n.jsxs("nav",{className:"admin-bottom-nav",children:[n.jsxs("button",{className:`admin-nav-tab ${r==="schedule"?"active":""}`,onClick:()=>t("schedule"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),n.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),n.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),n.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),n.jsx("span",{children:"Today"})]}),n.jsxs("button",{className:`admin-nav-tab ${r==="clients"?"active":""}`,onClick:()=>t("clients"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"9",cy:"7",r:"4"}),n.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),n.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),n.jsx("span",{children:"Clients"})]}),n.jsxs("button",{className:`admin-nav-tab ${r==="calendar"?"active":""}`,onClick:()=>t("calendar"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),n.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),n.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),n.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),n.jsx("path",{d:"M8 14h.01"}),n.jsx("path",{d:"M12 14h.01"}),n.jsx("path",{d:"M16 14h.01"}),n.jsx("path",{d:"M8 18h.01"}),n.jsx("path",{d:"M12 18h.01"})]}),n.jsx("span",{children:"Calendar"})]})]})]})}const DD=[{value:"block",label:"Block (1-2-1)"},{value:"circuit_vip",label:"Circuit VIP"},{value:"circuit_dropin",label:"Circuit Drop-in"},{value:"core_buddy",label:"Core Buddy"}];function ID(){const[r,e]=C.useState({name:"",email:"",password:"",clientType:"block",circuitAccess:!1,weeksInBlock:"",numberOfSessions:"",sessionDuration:"45",startDate:"",endDate:""}),[t,i]=C.useState(!1),[o,c]=C.useState(""),{currentUser:u,isAdmin:h,loading:m}=Bs(),b=hs();C.useEffect(()=>{!m&&(!u||!h)&&b("/")},[u,h,m,b]),C.useEffect(()=>{if(r.startDate&&r.weeksInBlock){const L=new Date(r.startDate),V=parseInt(r.weeksInBlock);if(!isNaN(V)&&V>0){const P=new Date(L);P.setDate(P.getDate()+V*7);const ee=P.getFullYear(),$=(P.getMonth()+1).toString().padStart(2,"0"),le=P.getDate().toString().padStart(2,"0");e(X=>({...X,endDate:`${ee}-${$}-${le}`}))}}},[r.startDate,r.weeksInBlock]);const k=L=>{const{name:V,value:P,type:ee,checked:$}=L.target;e(le=>({...le,[V]:ee==="checkbox"?$:P}))},S=async L=>{L.preventDefault(),c(""),i(!0);try{const V=await Mw(hm,r.email.trim().toLowerCase(),r.password);await Kv(hm);const P=r.clientType==="block",ee={uid:V.user.uid,name:r.name.trim(),email:r.email.trim().toLowerCase(),clientType:r.clientType,status:"active",createdAt:Et.now()};P?(ee.circuitAccess=r.circuitAccess,ee.weeksInBlock=parseInt(r.weeksInBlock),ee.totalSessions=parseInt(r.numberOfSessions),ee.sessionsRemaining=parseInt(r.numberOfSessions),ee.sessionDuration=parseInt(r.sessionDuration),ee.startDate=Et.fromDate(new Date(r.startDate)),ee.endDate=Et.fromDate(new Date(r.endDate))):(ee.circuitStrikes=0,ee.circuitBanUntil=null),await ai(en(Je,"clients"),ee),b("/dashboard")}catch(V){console.error("Error adding client:",V),V.code==="auth/email-already-in-use"?c("This email is already registered."):V.code==="auth/weak-password"?c("Password should be at least 6 characters."):c("Failed to add client. Please try again."),i(!1)}},E=()=>{b("/dashboard")};if(m)return n.jsx("div",{className:"loading",children:"Loading..."});if(!u||!h)return null;const F=r.clientType==="block";return n.jsxs("div",{className:"add-client-page",children:[n.jsxs("header",{className:"page-header",children:[n.jsx("button",{className:"back-btn",onClick:E,"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("h1",{children:"Add New Client"})]}),n.jsxs("main",{className:"page-content",children:[o&&n.jsx("div",{className:"form-error",children:o}),n.jsxs("form",{onSubmit:S,children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Client Type"}),n.jsx("div",{className:"client-type-toggle",children:DD.map(L=>n.jsx("button",{type:"button",className:`type-btn ${r.clientType===L.value?"active":""}`,onClick:()=>e(V=>({...V,clientType:L.value})),children:L.label},L.value))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"name",children:"Client Name"}),n.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:k,placeholder:"John Smith",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"email",children:"Client Email"}),n.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:k,placeholder:"john@example.com",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"password",children:"Client Portal Password"}),n.jsx("input",{type:"text",id:"password",name:"password",value:r.password,onChange:k,placeholder:"Set a password for client login",minLength:"6",required:!0}),n.jsx("span",{className:"helper-text",children:"Minimum 6 characters. Share this with your client."})]}),F&&n.jsx("div",{className:"form-group",children:n.jsxs("label",{className:"circuit-toggle-label",children:[n.jsx("input",{type:"checkbox",name:"circuitAccess",checked:r.circuitAccess,onChange:k}),n.jsx("span",{children:"Also allow Circuit Class access"})]})}),F&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"weeksInBlock",children:"Weeks in Block"}),n.jsx("input",{type:"number",id:"weeksInBlock",name:"weeksInBlock",value:r.weeksInBlock,onChange:k,placeholder:"8",min:"1",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"numberOfSessions",children:"Number of Sessions"}),n.jsx("input",{type:"number",id:"numberOfSessions",name:"numberOfSessions",value:r.numberOfSessions,onChange:k,placeholder:"16",min:"1",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"sessionDuration",children:"Session Duration"}),n.jsxs("select",{id:"sessionDuration",name:"sessionDuration",value:r.sessionDuration,onChange:k,required:!0,children:[n.jsx("option",{value:"30",children:"30 minutes"}),n.jsx("option",{value:"45",children:"45 minutes"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"startDate",children:"Start Date"}),n.jsx("input",{type:"date",id:"startDate",name:"startDate",value:r.startDate,onChange:k,required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"endDate",children:"End Date (auto-calculated)"}),n.jsx("input",{type:"date",id:"endDate",name:"endDate",value:r.endDate,onChange:k,required:!0}),n.jsx("span",{className:"helper-text",children:"Calculated from start date + weeks"})]})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"button",className:"cancel-btn",onClick:E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"submit-btn",disabled:t,children:t?"Saving...":"Save Client"})]})]})]})]})}const W_={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"12:00",end:"17:00"},defaultBlocked:!0}},PD=["monday","tuesday","wednesday","thursday","friday"],po=r=>{const e=r.getFullYear(),t=(r.getMonth()+1).toString().padStart(2,"0"),i=r.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},Tv=r=>{const[e,t]=r.split(":").map(Number);return e*60+t},Md=(r,e)=>{const t=Tv(r)+e,i=Math.floor(t/60),o=t%60;return`${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},OD=r=>{const e=W_[r];if(!e)return[];const t=[];if(e.morning){let i=e.morning.start;for(;i<e.morning.end;)t.push({time:i,period:"morning"}),i=Md(i,15)}if(e.afternoon){let i=e.afternoon.start;for(;i<e.afternoon.end;)t.push({time:i,period:"afternoon"}),i=Md(i,15)}return t},LD=r=>{const e=r.getDay();return e>=1&&e<=5},H_=r=>{const e=r.getDay();return e===0||e===6?null:PD[e-1]},BD=(r,e,t,i,o,c=null,u=[],h=[])=>{const m=H_(r);if(!m)return!1;const b=po(r),k=W_[m];if(o.some($=>$.date===b))return!1;if(k.defaultBlocked){const $=Math.ceil(t/15);for(let le=0;le<$;le++){const X=Md(e,le*15);if(!h.some(Te=>Te.date===b&&Te.time===X))return!1}}else{const $=Math.ceil(t/15);for(let le=0;le<$;le++){const X=Md(e,le*15);if(u.some(Te=>Te.date===b&&Te.time===X))return!1}}const S=new Date,E=po(S);if(b<E)return!1;if(b===E){const $=`${S.getHours().toString().padStart(2,"0")}:${S.getMinutes().toString().padStart(2,"0")}`;if(e<$)return!1}const F=Md(e,t),L=k.morning&&e>=k.morning.start&&e<k.morning.end,V=k.afternoon&&e>=k.afternoon.start&&e<k.afternoon.end,P=k.morning&&F<=k.morning.end,ee=k.afternoon&&F<=k.afternoon.end;if(L&&!P||V&&!ee||!L&&!V)return!1;for(const $ of i){if(c&&$.id===c||$.date!==b)continue;const le=Tv($.time),X=le+($.duration||45),Te=Tv(e),Re=Te+t;if(Te<X&&Re>le)return!1}return!0},VD=(r,e,t,i,o=null,c=[],u=[])=>{const h=H_(r);return h?OD(h).filter(b=>BD(r,b.time,e,t,i,o,c,u)):[]};function UD(){const[r,e]=C.useState([]),[t,i]=C.useState([]),[o,c]=C.useState([]),[u,h]=C.useState([]),[m,b]=C.useState([]),[k,S]=C.useState([]),[E,F]=C.useState(!0),[L,V]=C.useState(null),[P,ee]=C.useState(!1),[$,le]=C.useState(null),[X,Te]=C.useState(null),[Re,B]=C.useState(null),[O,z]=C.useState([]),[Y,G]=C.useState(!1),[se,H]=C.useState([]),[Le,Oe]=C.useState(null),[ne,be]=C.useState(!1),[me,Ae]=C.useState(0),He=C.useRef(null),Q=C.useRef(0),we=C.useRef(!1),[Ne,je]=C.useState(null),[ce,Ee]=C.useState(null),[ue,xe]=C.useState([]),[Fe,ot]=C.useState(!1),[Ue,_e]=C.useState(null),[Ke,ve]=C.useState(null),[bt,ht]=C.useState([]),[Ye,Ot]=C.useState(null),jt=C.useRef(null),{currentUser:te,isClient:it,clientData:kt,logout:Rt,loading:mt}=Bs(),{isDark:Ht,toggleTheme:Zt}=ja(),Qt=hs(),ze=C.useCallback((ie,lt="info")=>{Oe({message:ie,type:lt}),setTimeout(()=>Oe(null),4e3)},[]),Ze=ie=>{const lt=ie.currentTarget,ft=lt.querySelector(".ripple");ft&&ft.remove();const _t=document.createElement("span"),It=Math.max(lt.clientWidth,lt.clientHeight),ln=It/2,Nn=lt.getBoundingClientRect();_t.style.width=_t.style.height=`${It}px`,_t.style.left=`${ie.clientX-Nn.left-ln}px`,_t.style.top=`${ie.clientY-Nn.top-ln}px`,_t.classList.add("ripple"),lt.appendChild(_t),setTimeout(()=>_t.remove(),600)},gt=ie=>{He.current&&He.current.scrollTop===0&&(Q.current=ie.touches[0].clientY,we.current=!0)},Lt=ie=>{if(!we.current||!He.current)return;const ft=ie.touches[0].clientY-Q.current;ft>20&&He.current.scrollTop===0&&(ie.preventDefault(),Ae(Math.min((ft-20)*.35,80)))},Bt=async()=>{me>55&&!ne&&(be(!0),await St(),ze("Refreshed!","success"),be(!1)),Ae(0),we.current=!1},Ct=(ie,lt)=>{const ft=ie.touches[0];ie.currentTarget.dataset.startX=ft.clientX,ie.currentTarget.dataset.startY=ft.clientY},Dt=(ie,lt)=>{const ft=ie.touches[0],_t=parseFloat(ie.currentTarget.dataset.startX),It=parseFloat(ie.currentTarget.dataset.startY),ln=ft.clientX-_t,Nn=ft.clientY-It;Math.abs(ln)>Math.abs(Nn)&&Math.abs(ln)>10&&(ie.preventDefault(),ln<-50?je(lt):ln>50&&je(null))};C.useEffect(()=>{!mt&&(!te||!it)&&Qt("/")},[te,it,mt,Qt]),C.useEffect(()=>{if(kt){if(kt.dailyQuote){const ie=new Date().toISOString().split("T")[0];kt.dailyQuote.date===ie&&ve(kt.dailyQuote)}St()}},[kt]),C.useEffect(()=>{if(!E&&kt){const ie=setTimeout(()=>ot(!0),300);return()=>clearTimeout(ie)}},[E,kt]),C.useEffect(()=>{const ie=()=>{const ft=rn();if(ft.length===0){_e(null);return}const _t=ft[0],It=new Date,Nn=new Date(_t.date+"T"+_t.time)-It;if(Nn<=0){_e(null);return}const Fn=Math.floor(Nn/(1e3*60*60*24)),Ys=Math.floor(Nn%(1e3*60*60*24)/(1e3*60*60)),J=Math.floor(Nn%(1e3*60*60)/(1e3*60)),U=Math.floor(Nn%(1e3*60)/1e3);_e({days:Fn,hours:Ys,minutes:J,seconds:U,session:_t})};ie();const lt=setInterval(ie,1e3);return()=>clearInterval(lt)},[r,E]);const St=async()=>{try{const ie=ds(en(Je,"sessions"),Hn("clientId","==",kt.id)),ft=(await yn(ie)).docs.map($e=>({id:$e.id,...$e.data()}));ft.sort(($e,zt)=>$e.date!==zt.date?$e.date.localeCompare(zt.date):$e.time.localeCompare(zt.time)),e(ft);const _t=await yn(en(Je,"sessions"));i(_t.docs.map($e=>({id:$e.id,...$e.data()})));const It=await yn(en(Je,"holidays"));c(It.docs.map($e=>({id:$e.id,...$e.data()})));const ln=await yn(en(Je,"blockedTimes"));h(ln.docs.map($e=>({id:$e.id,...$e.data()})));const Nn=await yn(en(Je,"openedSlots"));b(Nn.docs.map($e=>({id:$e.id,...$e.data()})));const Fn=ds(en(Je,"rescheduleRequests"),Hn("clientId","==",kt.id)),J=(await yn(Fn)).docs.map($e=>({id:$e.id,...$e.data()}));H(J.filter($e=>$e.status==="pending"));const U=J.filter($e=>{if($e.status==="pending"||!$e.respondedAt)return!1;const zt=$e.respondedAt.toDate?$e.respondedAt.toDate():new Date($e.respondedAt),Nt=new Date;return Nt.setDate(Nt.getDate()-7),zt>Nt&&!$e.dismissed});S(U);const re=ds(en(Je,"achievements"),Hn("clientId","==",kt.id)),ae=await yn(re);if(!ae.empty){const $e=ae.docs[0].data().badges||[];xe($e)}const ke=new Date().toISOString().split("T")[0],tt=await vs(Mt(Je,"clients",kt.id));if(tt.exists()){const $e=tt.data();$e.dailyQuote&&$e.dailyQuote.date===ke?ve($e.dailyQuote):ve(null)}try{const $e=ds(en(Je,"sessionNotes"),Hn("clientId","==",kt.id)),Nt=(await yn($e)).docs.map(Ft=>({id:Ft.id,...Ft.data()}));Nt.sort((Ft,he)=>{const De=Ft.createdAt?.toMillis?.()||0;return(he.createdAt?.toMillis?.()||0)-De}),ht(Nt)}catch($e){console.error("Error fetching session notes:",$e)}}catch(ie){console.error("Error fetching data:",ie)}F(!1)},wt=ie=>new Date(ie).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),Kt=ie=>{const[lt,ft]=ie.split(":"),_t=parseInt(lt),It=_t>=12?"pm":"am";return`${_t>12?_t-12:_t===0?12:_t}:${ft}${It}`},bn=ie=>ie?(ie.toDate?ie.toDate():new Date(ie)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",un=ie=>{const lt=new Date,ft=po(lt),_t=`${lt.getHours().toString().padStart(2,"0")}:${lt.getMinutes().toString().padStart(2,"0")}`;return ie.date<ft||ie.date===ft&&ie.time<_t},Pn=ie=>{const ft=po(new Date);return ie.date===ft&&!un(ie)},fs=()=>r.filter(ie=>un(ie)).length,rn=()=>r.filter(ie=>!un(ie)),Bn=ie=>{Ee({title:"Cancel Session?",message:`Cancel your session on ${wt(ie.date)} at ${Kt(ie.time)}? This cannot be undone.`,onConfirm:async()=>{Ee(null),V(ie.id),je(null);try{await xa(Mt(Je,"sessions",ie.id)),e(r.filter(lt=>lt.id!==ie.id)),ze("Session cancelled","success")}catch(lt){console.error("Error cancelling session:",lt),ze("Failed to cancel session. Please try again.","error")}V(null)},onCancel:()=>Ee(null)})},ss=async()=>{try{await Rt(),Qt("/")}catch(ie){console.error("Failed to log out:",ie)}},Gn=ie=>se.some(lt=>lt.sessionId===ie),xr=ie=>{le(ie),Te(null),B(null),z([]),ee(!0)},as=()=>{ee(!1),le(null),Te(null),B(null),z([])},ls=()=>kt.endDate?kt.endDate.toDate?kt.endDate.toDate():new Date(kt.endDate):new Date,bs=()=>{const ie=[],lt=new Date,ft=ls(),_t=new Date(lt);for(_t.setDate(_t.getDate()+1);_t<=ft;){if(LD(_t)){const It=po(_t);o.some(Nn=>Nn.date===It)||ie.push(new Date(_t))}_t.setDate(_t.getDate()+1)}return ie},ur=ie=>{Te(ie),B(null);const lt=$?.duration||kt.sessionDuration||45;let ft=VD(ie,lt,t,o,$?.id,u,m);$&&po(ie)===$.date&&(ft=ft.filter(_t=>_t.time!==$.time)),z(ft)},Vs=async()=>{if(!(!X||!Re||!$)){G(!0);try{await ai(en(Je,"rescheduleRequests"),{sessionId:$.id,clientId:kt.id,clientName:kt.name,originalDate:$.date,originalTime:$.time,requestedDate:po(X),requestedTime:Re,duration:$.duration,status:"pending",createdAt:Et.now(),respondedAt:null,dismissed:!1}),as(),ze("Reschedule request submitted! You'll be notified when your trainer responds.","success"),St()}catch(ie){console.error("Error submitting reschedule request:",ie),ze("Failed to submit request. Please try again.","error")}G(!1)}},ms=async ie=>{try{await js(Mt(Je,"rescheduleRequests",ie),{dismissed:!0}),S(k.filter(lt=>lt.id!==ie))}catch(lt){console.error("Error dismissing notification:",lt)}},sr=()=>{const ie=rn();if(ie.length===0)return null;const lt=ie[0],ft=new Date,It=new Date(lt.date+"T"+lt.time)-ft;if(It<=0)return null;const ln=Math.floor(It/(1e3*60*60*24)),Nn=Math.floor(It%(1e3*60*60*24)/(1e3*60*60)),Fn=Math.floor(It%(1e3*60*60)/(1e3*60));return{days:ln,hours:Nn,minutes:Fn,session:lt}};if(mt||E)return n.jsxs("div",{className:"client-dashboard",children:[n.jsx("header",{className:"client-header",children:n.jsx("div",{className:"header-content",children:n.jsx("div",{className:"skeleton skeleton-logo"})})}),n.jsxs("main",{className:"client-main",children:[n.jsxs("div",{className:"skeleton-welcome",children:[n.jsx("div",{className:"skeleton skeleton-title"}),n.jsx("div",{className:"skeleton skeleton-btn-small"})]}),n.jsxs("div",{className:"skeleton-actions",children:[n.jsx("div",{className:"skeleton skeleton-btn"}),n.jsx("div",{className:"skeleton skeleton-btn"})]}),n.jsx("div",{className:"skeleton skeleton-card-large"}),n.jsx("div",{className:"skeleton skeleton-card-medium"}),n.jsx("div",{className:"skeleton skeleton-card-medium"})]})]});if(!te||!it||!kt)return null;const pe=fs(),Xe=kt.totalSessions-pe,st=rn(),nt=P?bs():[];sr();const Qe=kt.totalSessions>0?pe/kt.totalSessions*100:0;return n.jsxs("div",{className:"client-dashboard",children:[n.jsx("header",{className:"client-header",children:n.jsx("div",{className:"header-content",children:n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),n.jsxs("div",{className:`pull-refresh-indicator ${me>0?"visible":""} ${ne?"refreshing":""}`,style:{height:me},children:[n.jsx("div",{className:`refresh-spinner ${ne?"spinning":""}`,children:n.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:n.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),n.jsx("span",{className:"refresh-text",children:ne?"Refreshing...":"Pull to refresh"})]}),n.jsxs("main",{className:"client-main page-transition-enter",ref:He,onTouchStart:gt,onTouchMove:Lt,onTouchEnd:Bt,children:[n.jsxs("div",{className:"welcome-section",children:[n.jsxs("h2",{children:["Welcome, ",kt.name.split(" ")[0]]}),n.jsxs("div",{className:"welcome-actions",children:[n.jsx("button",{className:"theme-toggle",onClick:Zt,"aria-label":Ht?"Switch to light mode":"Switch to dark mode",children:Ht?n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),n.jsx("button",{className:"logout-btn",onClick:ss,children:"Log Out"})]})]}),k.length>0&&n.jsx("div",{className:"notifications-section",children:k.map(ie=>n.jsxs("div",{className:`notification ${ie.status}`,children:[n.jsxs("div",{className:"notification-content",children:[n.jsx("span",{className:"notification-icon",children:ie.status==="approved"?"":""}),n.jsxs("div",{className:"notification-text",children:[n.jsx("strong",{children:ie.status==="approved"?"Reschedule Approved!":"Reschedule Declined"}),n.jsx("p",{children:ie.status==="approved"?`Your session has been moved to ${wt(ie.requestedDate)} at ${Kt(ie.requestedTime)}`:`Your request to reschedule from ${wt(ie.originalDate)} was declined. Please contact your trainer.`})]})]}),n.jsx("button",{className:"dismiss-btn",onClick:()=>ms(ie.id),children:""})]},ie.id))}),Ue&&n.jsxs("div",{className:"ring-timer-container",children:[n.jsxs("div",{className:"ring-timer",children:[n.jsx("svg",{className:"ring-timer-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((ie,lt)=>{const ft=(lt*6-90)*(Math.PI/180),_t=85,It=96,ln=100+_t*Math.cos(ft),Nn=100+_t*Math.sin(ft),Fn=100+It*Math.cos(ft),Ys=100+It*Math.sin(ft),U=60-Ue.seconds,re=lt<U;return n.jsx("line",{x1:ln,y1:Nn,x2:Fn,y2:Ys,className:`ring-tick ${re?"elapsed":"remaining"}`,strokeWidth:lt%5===0?"3":"2"},lt)})}),n.jsxs("div",{className:"ring-timer-center",children:[n.jsx("div",{className:"ring-timer-logo",children:n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),n.jsxs("div",{className:"ring-timer-countdown",children:[Ue.days>0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"timer-digit",children:String(Ue.days).padStart(2,"0")}),n.jsx("span",{className:"timer-colon",children:":"})]}),n.jsx("span",{className:"timer-digit",children:String(Ue.hours).padStart(2,"0")}),n.jsx("span",{className:"timer-colon",children:":"}),n.jsx("span",{className:"timer-digit",children:String(Ue.minutes).padStart(2,"0")}),n.jsx("span",{className:"timer-colon",children:":"}),n.jsx("span",{className:"timer-digit timer-seconds",children:String(Ue.seconds).padStart(2,"0")})]}),n.jsx("div",{className:"ring-timer-label",children:"until next session"})]})]}),n.jsxs("div",{className:"ring-timer-session-info",children:[wt(Ue.session.date)," at ",Kt(Ue.session.time)]})]}),n.jsxs("div",{className:"block-info-card",children:[n.jsx("div",{className:"block-header-row",children:n.jsx("h3",{children:"Your Training Block"})}),n.jsxs("div",{className:"progress-section",children:[n.jsxs("div",{className:"progress-ring-container",children:[n.jsxs("svg",{className:"progress-ring",viewBox:"0 0 100 100",children:[n.jsx("circle",{className:"progress-ring-bg",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8"}),n.jsx("circle",{className:`progress-ring-fill ${Fe?"animate":""}`,cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:Fe?`${2*Math.PI*42*(1-Qe/100)}`:`${2*Math.PI*42}`,strokeLinecap:"round"})]}),n.jsxs("div",{className:"progress-ring-text",children:[n.jsxs("span",{className:"progress-percent",children:[Math.round(Qe),"%"]}),n.jsx("span",{className:"progress-label",children:"complete"})]})]}),n.jsxs("div",{className:"progress-stats",children:[n.jsxs("div",{className:"progress-stat",children:[n.jsx("span",{className:"progress-stat-value",children:pe}),n.jsx("span",{className:"progress-stat-label",children:"Completed"})]}),n.jsxs("div",{className:"progress-stat",children:[n.jsx("span",{className:"progress-stat-value",children:Xe}),n.jsx("span",{className:"progress-stat-label",children:"Remaining"})]}),n.jsxs("div",{className:"progress-stat",children:[n.jsx("span",{className:"progress-stat-value",children:kt.totalSessions}),n.jsx("span",{className:"progress-stat-label",children:"Total"})]})]})]}),n.jsxs("div",{className:"block-dates",children:[n.jsxs("div",{className:"date-item",children:[n.jsx("span",{className:"date-label",children:"Start Date"}),n.jsx("span",{className:"date-value",children:bn(kt.startDate)})]}),n.jsxs("div",{className:"date-item",children:[n.jsx("span",{className:"date-label",children:"End Date"}),n.jsx("span",{className:"date-value",children:bn(kt.endDate)})]}),n.jsxs("div",{className:"date-item",children:[n.jsx("span",{className:"date-label",children:"Session Duration"}),n.jsxs("span",{className:"date-value",children:[kt.sessionDuration," minutes"]})]})]})]}),kt?.coreBuddyAccess&&n.jsxs("div",{className:"core-buddy-cta",onClick:()=>Qt("/client/core-buddy"),children:[n.jsx("div",{className:"core-buddy-cta-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"})})}),n.jsxs("div",{className:"core-buddy-cta-text",children:[n.jsx("span",{className:"core-buddy-cta-title",children:"Core Buddy"}),n.jsx("span",{className:"core-buddy-cta-sub",children:"Workouts, nutrition & habits"})]}),n.jsx("svg",{className:"core-buddy-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),bt.length>0&&n.jsxs("div",{className:"session-notes-card",ref:jt,children:[n.jsxs("div",{className:"session-notes-header",children:[n.jsxs("div",{className:"session-notes-title",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",children:[n.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),n.jsx("span",{children:"Session Notes"})]}),n.jsx("span",{className:"session-notes-count",children:bt.length})]}),n.jsx("div",{className:"session-notes-list",children:bt.slice(0,Ye==="show-all"?void 0:3).map((ie,lt)=>n.jsxs("div",{className:`session-note-item ${Ye===ie.id?"expanded":""}`,onClick:()=>Ot(Ye===ie.id?null:ie.id),children:[n.jsxs("div",{className:"session-note-top",children:[n.jsx("span",{className:"session-note-date",children:ie.date}),n.jsx("svg",{className:`session-note-chevron ${Ye===ie.id?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:n.jsx("path",{d:"M6 9l6 6 6-6"})})]}),ie.sessionNotes&&n.jsx("p",{className:"session-note-preview",children:Ye===ie.id?ie.sessionNotes:ie.sessionNotes.length>80?ie.sessionNotes.slice(0,80)+"...":ie.sessionNotes}),Ye===ie.id&&n.jsxs("div",{className:"session-note-details",children:[ie.whatWentWell&&n.jsxs("div",{className:"session-note-section went-well",children:[n.jsx("span",{className:"session-note-label",children:"What Went Well"}),n.jsx("p",{children:ie.whatWentWell})]}),ie.whatWentWrong&&n.jsxs("div",{className:"session-note-section went-wrong",children:[n.jsx("span",{className:"session-note-label",children:"What Went Wrong"}),n.jsx("p",{children:ie.whatWentWrong})]}),ie.whatsNext&&n.jsxs("div",{className:"session-note-section whats-next",children:[n.jsx("span",{className:"session-note-label",children:"What's Next"}),n.jsx("p",{children:ie.whatsNext})]})]})]},ie.id))}),bt.length>3&&Ye===null&&n.jsxs("button",{className:"session-notes-viewall",onClick:()=>Ot("show-all"),children:["View all ",bt.length," notes",n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),Ye==="show-all"&&bt.length>3&&n.jsxs("button",{className:"session-notes-viewall",onClick:()=>Ot(null),children:["Show less",n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",style:{transform:"rotate(180deg)"},children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),ue.length>0&&n.jsxs("div",{className:"achievements-card",children:[n.jsxs("div",{className:"achievements-card-header",children:[n.jsxs("div",{className:"achievements-card-title",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),n.jsx("span",{children:"Targets Achieved"})]}),n.jsx("span",{className:"achievements-card-count",children:ue.length})]}),n.jsx("div",{className:"achievements-card-list",children:[...ue].reverse().slice(0,3).map((ie,lt)=>n.jsxs("div",{className:"achievements-card-item",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),n.jsx("span",{className:"achievements-card-label",children:ie.label}),n.jsx("span",{className:"achievements-card-date",children:ie.achievedMonth})]},lt))}),ue.length>3&&n.jsxs("button",{className:"achievements-card-viewall",onClick:()=>Qt("/client/personal-bests"),children:["View all ",ue.length," achievements",n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),Ke?n.jsxs("div",{className:"daily-quote-card",children:[n.jsx("div",{className:"daily-quote-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),n.jsxs("div",{className:"daily-quote-content",children:[n.jsx("div",{className:"daily-quote-label",children:"Daily Motivation"}),n.jsx("div",{className:"daily-quote-text",children:Ke.text}),n.jsxs("div",{className:"daily-quote-author",children:[" ",Ke.author]}),n.jsxs("div",{className:"daily-quote-lock",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"12",height:"12",children:n.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"})}),"New quote at midnight"]})]})]}):n.jsxs("div",{className:"daily-quote-cta",onClick:()=>Qt("/client/tools/motivation"),children:[n.jsx("div",{className:"daily-quote-cta-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),n.jsxs("div",{className:"daily-quote-cta-text",children:[n.jsx("span",{className:"daily-quote-cta-title",children:"Daily Motivation"}),n.jsx("span",{className:"daily-quote-cta-sub",children:"Tap to get today's inspiration"})]}),n.jsx("svg",{className:"daily-quote-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),n.jsxs("div",{className:"sessions-section",children:[n.jsxs("h3",{children:["Upcoming Sessions (",st.length,")"]}),st.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state-icon",children:n.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),n.jsx("line",{x1:"20",y1:"35",x2:"80",y2:"35"}),n.jsx("line",{x1:"35",y1:"15",x2:"35",y2:"35"}),n.jsx("line",{x1:"65",y1:"15",x2:"65",y2:"35"}),n.jsx("circle",{cx:"40",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),n.jsx("circle",{cx:"60",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),n.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"}),n.jsx("circle",{cx:"60",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"})]})}),n.jsx("h4",{children:"No upcoming sessions"}),n.jsx("p",{children:"Contact your trainer to book sessions"})]}):n.jsx("div",{className:"sessions-list",children:st.map(ie=>n.jsxs("div",{className:`session-card-wrapper ${Ne===ie.id?"swiped":""}`,onTouchStart:lt=>Ct(lt,ie.id),onTouchMove:lt=>Dt(lt,ie.id),children:[n.jsxs("div",{className:"session-card-swipe-actions",children:[n.jsx("button",{className:"swipe-action-btn reschedule ripple-btn",onClick:lt=>{Ze(lt),je(null),xr(ie)},disabled:Gn(ie.id),children:"Reschedule"}),n.jsx("button",{className:"swipe-action-btn cancel ripple-btn",onClick:lt=>{Ze(lt),Bn(ie)},disabled:L===ie.id,children:"Cancel"})]}),n.jsxs("div",{className:`session-card ${Pn(ie)?"today-session":""}`,onClick:()=>Ne===ie.id&&je(null),children:[n.jsxs("div",{className:"session-info",children:[n.jsxs("div",{className:"session-date",children:[Pn(ie)&&n.jsx("span",{className:"today-label",children:"Today - "}),wt(ie.date)]}),n.jsxs("div",{className:"session-time",children:[Kt(ie.time)," (",ie.duration," min)"]}),Gn(ie.id)&&n.jsx("div",{className:"pending-badge",children:"Reschedule pending"})]}),n.jsxs("div",{className:"session-actions",children:[n.jsx("button",{className:"reschedule-btn ripple-btn",onClick:lt=>{lt.stopPropagation(),Ze(lt),xr(ie)},disabled:Gn(ie.id),children:"Reschedule"}),n.jsx("button",{className:"cancel-btn ripple-btn",onClick:lt=>{lt.stopPropagation(),Ze(lt),Bn(ie)},disabled:L===ie.id,children:L===ie.id?"Cancelling...":"Cancel"})]}),n.jsxs("div",{className:"swipe-hint",children:[n.jsx("span",{className:"swipe-hint-text",children:"Swipe"}),n.jsxs("span",{className:"swipe-hint-chevrons",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})]})]})]})]},ie.id))})]}),n.jsxs("div",{className:"completed-section",children:[n.jsxs("h3",{children:["Completed Sessions (",pe,")"]}),pe===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-state-icon",children:n.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"50",cy:"50",r:"35"}),n.jsx("path",{d:"M35 50 L45 60 L65 40",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),n.jsx("path",{d:"M50 25 L50 50 L65 55",strokeLinecap:"round",strokeLinejoin:"round"})]})}),n.jsx("h4",{children:"No completed sessions yet"}),n.jsx("p",{children:"Your completed sessions will appear here"})]}):n.jsxs("div",{className:"sessions-list completed",children:[r.filter(ie=>un(ie)).slice(-5).reverse().map(ie=>n.jsxs("div",{className:"session-card completed",children:[n.jsxs("div",{className:"session-info",children:[n.jsx("div",{className:"session-date",children:wt(ie.date)}),n.jsx("div",{className:"session-time",children:Kt(ie.time)})]}),n.jsx("span",{className:"completed-badge",children:"Completed"})]},ie.id)),pe>5&&n.jsxs("div",{className:"more-sessions",children:["And ",pe-5," more completed sessions"]})]})]})]}),P&&$&&n.jsx("div",{className:"modal-overlay",onClick:as,children:n.jsxs("div",{className:"reschedule-modal",onClick:ie=>ie.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:"Reschedule Session"}),n.jsx("button",{className:"close-modal-btn",onClick:as,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"current-session-info",children:n.jsxs("p",{children:["Current: ",n.jsx("strong",{children:wt($.date)})," at ",n.jsx("strong",{children:Kt($.time)})]})}),n.jsxs("div",{className:"date-selection",children:[n.jsx("h4",{children:"Select New Date"}),nt.length===0?n.jsx("p",{className:"no-dates",children:"No available dates within your training block"}):n.jsx("div",{className:"dates-grid",children:nt.map((ie,lt)=>n.jsxs("button",{className:`date-btn ${X&&po(X)===po(ie)?"selected":""}`,onClick:()=>ur(ie),children:[n.jsx("span",{className:"date-day",children:ie.toLocaleDateString("en-GB",{weekday:"short"})}),n.jsx("span",{className:"date-num",children:ie.getDate()}),n.jsx("span",{className:"date-month",children:ie.toLocaleDateString("en-GB",{month:"short"})})]},lt))})]}),X&&n.jsxs("div",{className:"time-selection",children:[n.jsx("h4",{children:"Select Time"}),O.length===0?n.jsx("p",{className:"no-slots",children:"No available slots on this date"}):n.jsx("div",{className:"times-grid",children:O.map((ie,lt)=>n.jsx("button",{className:`time-btn ${Re===ie.time?"selected":""} ${ie.period}`,onClick:()=>B(ie.time),children:Kt(ie.time)},lt))})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"cancel-modal-btn",onClick:as,children:"Cancel"}),n.jsx("button",{className:"submit-reschedule-btn",onClick:Vs,disabled:!X||!Re||Y,children:Y?"Submitting...":"Request Reschedule"})]})]})}),Le&&n.jsxs("div",{className:`toast-notification ${Le.type}`,children:[n.jsx("span",{className:"toast-icon",children:Le.type==="success"?n.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):Le.type==="error"?n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),n.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),n.jsx("span",{className:"toast-message",children:Le.message}),n.jsx("button",{className:"toast-close",onClick:()=>Oe(null),children:""})]}),ce&&n.jsx("div",{className:"confirm-modal-overlay",onClick:ce.onCancel,children:n.jsxs("div",{className:"confirm-modal",onClick:ie=>ie.stopPropagation(),children:[n.jsx("h3",{children:ce.title}),n.jsx("p",{children:ce.message}),n.jsxs("div",{className:"confirm-modal-actions",children:[n.jsx("button",{className:"confirm-cancel-btn ripple-btn",onClick:ie=>{Ze(ie),ce.onCancel()},children:"Keep Session"}),n.jsx("button",{className:"confirm-btn ripple-btn",onClick:ie=>{Ze(ie),ce.onConfirm()},children:"Yes, Cancel"})]})]})}),n.jsxs("nav",{className:"block-bottom-nav",children:[n.jsxs("button",{className:"block-nav-tab active",children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>Qt("/client/forms"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),n.jsx("span",{children:"Forms"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>Qt("/client/tools"),children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),n.jsx("span",{children:"Tools"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>Qt("/client/personal-bests"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M12 20V10"}),n.jsx("path",{d:"M18 20V4"}),n.jsx("path",{d:"M6 20v-4"})]}),n.jsx("span",{children:"PBs"})]}),kt?.circuitAccess&&n.jsxs("button",{className:"block-nav-tab",onClick:()=>Qt("/client/circuit"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 6v6l4 2"})]}),n.jsx("span",{children:"Circuit"})]})]})]})}function FD(){const[r,e]=C.useState(null),[t,i]=C.useState(!1),{currentUser:o,isClient:c,clientData:u,logout:h,loading:m}=Bs(),b=hs(),[k,S]=C.useState({fitnessGoals:"",currentActivityLevel:"",exerciseHistory:"",injuries:"",medicalConditions:"",sleepHours:"",stressLevel:"",dietaryInfo:"",availability:"",additionalInfo:""}),[E,F]=C.useState({q1HeartCondition:!1,q2ChestPain:!1,q3ChestPainLastMonth:!1,q4Balance:!1,q5BoneJoint:!1,q6BloodPressure:!1,q7OtherReason:!1,additionalDetails:"",declaration:!1});C.useEffect(()=>{!m&&(!o||!c)&&b("/")},[o,c,m,b]),C.useEffect(()=>{u?.welcomeForm&&S(u.welcomeForm),u?.parqForm&&F(u.parqForm)},[u]);const L=X=>{const{name:Te,value:Re}=X.target;S(B=>({...B,[Te]:Re}))},V=X=>{const{name:Te,type:Re,checked:B,value:O}=X.target;F(z=>({...z,[Te]:Re==="checkbox"?B:O}))},P=async()=>{i(!0);try{await js(Mt(Je,"clients",u.id),{welcomeForm:{...k,completedAt:Et.now()}}),alert("Welcome form saved successfully!"),e(null)}catch(X){console.error("Error saving welcome form:",X),alert("Failed to save form. Please try again.")}i(!1)},ee=async()=>{if(!E.declaration){alert("Please confirm the declaration to submit the form.");return}i(!0);try{await js(Mt(Je,"clients",u.id),{parqForm:{...E,completedAt:Et.now()}}),alert("PAR-Q form saved successfully!"),e(null)}catch(X){console.error("Error saving PAR-Q form:",X),alert("Failed to save form. Please try again.")}i(!1)};if(m)return n.jsx("div",{className:"client-loading",children:"Loading..."});if(!o||!c||!u)return null;const $=!!u?.welcomeForm?.completedAt,le=!!u?.parqForm?.completedAt;return n.jsxs("div",{className:"client-forms-page",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>b("/client"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})]})}),n.jsx("main",{className:"forms-main page-transition-enter",children:r?r==="welcome"?n.jsxs("div",{className:"form-container",children:[n.jsxs("div",{className:"form-header",children:[n.jsx("h2",{children:"Welcome Questionnaire"}),n.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),n.jsxs("div",{className:"form-body",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"What are your main fitness goals?"}),n.jsx("textarea",{name:"fitnessGoals",value:k.fitnessGoals,onChange:L,placeholder:"e.g., Lose weight, build muscle, improve endurance, increase flexibility...",rows:"3"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"How would you describe your current activity level?"}),n.jsxs("select",{name:"currentActivityLevel",value:k.currentActivityLevel,onChange:L,children:[n.jsx("option",{value:"",children:"Select..."}),n.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),n.jsx("option",{value:"light",children:"Lightly Active (1-2 days/week)"}),n.jsx("option",{value:"moderate",children:"Moderately Active (3-4 days/week)"}),n.jsx("option",{value:"active",children:"Very Active (5+ days/week)"}),n.jsx("option",{value:"athlete",children:"Athlete/Highly Active"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"What is your exercise history?"}),n.jsx("textarea",{name:"exerciseHistory",value:k.exerciseHistory,onChange:L,placeholder:"Describe your previous experience with exercise, sports, or training...",rows:"3"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Do you have any current or past injuries?"}),n.jsx("textarea",{name:"injuries",value:k.injuries,onChange:L,placeholder:"List any injuries that may affect your training...",rows:"2"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Do you have any medical conditions we should know about?"}),n.jsx("textarea",{name:"medicalConditions",value:k.medicalConditions,onChange:L,placeholder:"e.g., Diabetes, asthma, heart conditions...",rows:"2"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"How many hours of sleep do you typically get?"}),n.jsxs("select",{name:"sleepHours",value:k.sleepHours,onChange:L,children:[n.jsx("option",{value:"",children:"Select..."}),n.jsx("option",{value:"less-5",children:"Less than 5 hours"}),n.jsx("option",{value:"5-6",children:"5-6 hours"}),n.jsx("option",{value:"7-8",children:"7-8 hours"}),n.jsx("option",{value:"more-8",children:"More than 8 hours"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"How would you rate your current stress level?"}),n.jsxs("select",{name:"stressLevel",value:k.stressLevel,onChange:L,children:[n.jsx("option",{value:"",children:"Select..."}),n.jsx("option",{value:"low",children:"Low"}),n.jsx("option",{value:"moderate",children:"Moderate"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"very-high",children:"Very High"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Tell us about your diet/nutrition"}),n.jsx("textarea",{name:"dietaryInfo",value:k.dietaryInfo,onChange:L,placeholder:"Any dietary restrictions, typical eating habits, nutrition goals...",rows:"3"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"What is your preferred training schedule/availability?"}),n.jsx("textarea",{name:"availability",value:k.availability,onChange:L,placeholder:"Days and times that work best for you...",rows:"2"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Anything else you'd like us to know?"}),n.jsx("textarea",{name:"additionalInfo",value:k.additionalInfo,onChange:L,placeholder:"Any other information that might be helpful...",rows:"3"})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),n.jsx("button",{className:"save-btn",onClick:P,disabled:t,children:t?"Saving...":"Save"})]})]})]}):n.jsxs("div",{className:"form-container",children:[n.jsxs("div",{className:"form-header",children:[n.jsx("h2",{children:"PAR-Q Health Screening"}),n.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),n.jsxs("div",{className:"form-body",children:[n.jsx("div",{className:"parq-intro",children:n.jsx("p",{children:"The Physical Activity Readiness Questionnaire (PAR-Q) is designed to identify those who should check with a doctor before starting an exercise program."})}),n.jsxs("div",{className:"parq-questions",children:[n.jsx("div",{className:"parq-question",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"q1HeartCondition",checked:E.q1HeartCondition,onChange:V}),n.jsx("span",{children:"Has your doctor ever said that you have a heart condition and that you should only do physical activity recommended by a doctor?"})]})}),n.jsx("div",{className:"parq-question",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"q2ChestPain",checked:E.q2ChestPain,onChange:V}),n.jsx("span",{children:"Do you feel pain in your chest when you do physical activity?"})]})}),n.jsx("div",{className:"parq-question",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"q3ChestPainLastMonth",checked:E.q3ChestPainLastMonth,onChange:V}),n.jsx("span",{children:"In the past month, have you had chest pain when you were not doing physical activity?"})]})}),n.jsx("div",{className:"parq-question",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"q4Balance",checked:E.q4Balance,onChange:V}),n.jsx("span",{children:"Do you lose your balance because of dizziness or do you ever lose consciousness?"})]})}),n.jsx("div",{className:"parq-question",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"q5BoneJoint",checked:E.q5BoneJoint,onChange:V}),n.jsx("span",{children:"Do you have a bone or joint problem that could be made worse by a change in your physical activity?"})]})}),n.jsx("div",{className:"parq-question",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"q6BloodPressure",checked:E.q6BloodPressure,onChange:V}),n.jsx("span",{children:"Is your doctor currently prescribing drugs for your blood pressure or heart condition?"})]})}),n.jsx("div",{className:"parq-question",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"q7OtherReason",checked:E.q7OtherReason,onChange:V}),n.jsx("span",{children:"Do you know of any other reason why you should not do physical activity?"})]})})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"If you answered YES to any questions, please provide details:"}),n.jsx("textarea",{name:"additionalDetails",value:E.additionalDetails,onChange:V,placeholder:"Please explain any conditions or concerns...",rows:"4"})]}),n.jsx("div",{className:"parq-declaration",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"declaration",checked:E.declaration,onChange:V}),n.jsx("span",{children:"I have read, understood and completed this questionnaire. Any questions I had were answered to my full satisfaction. I confirm that the information provided is accurate to the best of my knowledge."})]})}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),n.jsx("button",{className:"save-btn",onClick:ee,disabled:t,children:t?"Saving...":"Submit"})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"forms-intro",children:[n.jsx("h2",{children:"Forms"}),n.jsx("p",{children:"Please complete these forms to help us better understand your fitness journey and ensure your safety."})]}),n.jsxs("div",{className:"forms-list",children:[n.jsxs("div",{className:`form-card ${$?"completed":""}`,children:[n.jsxs("div",{className:"form-card-info",children:[n.jsx("h3",{children:"Welcome Questionnaire"}),n.jsx("p",{children:"Tell us about your fitness goals, experience, and lifestyle."}),$&&n.jsx("span",{className:"completed-badge",children:"Completed"})]}),n.jsx("button",{onClick:()=>e("welcome"),children:$?"View / Edit":"Start"})]}),n.jsxs("div",{className:`form-card ${le?"completed":""}`,children:[n.jsxs("div",{className:"form-card-info",children:[n.jsx("h3",{children:"PAR-Q Health Screening"}),n.jsx("p",{children:"Physical Activity Readiness Questionnaire for your safety."}),le&&n.jsx("span",{className:"completed-badge",children:"Completed"})]}),n.jsx("button",{onClick:()=>e("parq"),children:le?"View / Edit":"Start"})]})]})]})}),n.jsxs("nav",{className:"block-bottom-nav",children:[n.jsxs("button",{className:"block-nav-tab",onClick:()=>b("/client"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:"block-nav-tab active",children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),n.jsx("span",{children:"Forms"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>b("/client/tools"),children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),n.jsx("span",{children:"Tools"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>b("/client/personal-bests"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M12 20V10"}),n.jsx("path",{d:"M18 20V4"}),n.jsx("path",{d:"M6 20v-4"})]}),n.jsx("span",{children:"PBs"})]}),u?.circuitAccess&&n.jsxs("button",{className:"block-nav-tab",onClick:()=>b("/client/circuit"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 6v6l4 2"})]}),n.jsx("span",{children:"Circuit"})]})]})]})}function zD(){const{currentUser:r,isClient:e,clientData:t,loading:i}=Bs(),o=hs();return C.useEffect(()=>{!i&&(!r||!e)&&o("/")},[r,e,i,o]),i?n.jsx("div",{className:"client-loading",children:"Loading..."}):!r||!e||!t?null:n.jsxs("div",{className:"client-tools-page",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>o("/client"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})]})}),n.jsxs("main",{className:"tools-main page-transition-enter",children:[n.jsxs("div",{className:"tools-intro",children:[n.jsx("h2",{children:"Tools"}),n.jsx("p",{children:"Use these tools to help plan your nutrition and stay motivated."})]}),n.jsxs("div",{className:"tools-grid",children:[n.jsxs("div",{className:"tool-select-card",onClick:()=>o("/client/tools/macros"),children:[n.jsx("div",{className:"tool-select-icon",children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[n.jsx("path",{d:"M4 6h16M4 12h16M4 18h7"}),n.jsx("circle",{cx:"17",cy:"18",r:"3"}),n.jsx("path",{d:"M17 15v6M14 18h6"})]})}),n.jsxs("div",{className:"tool-select-info",children:[n.jsx("h3",{children:"Macro Calculator"}),n.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),n.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),n.jsxs("div",{className:"tool-select-card",onClick:()=>o("/client/tools/snacks"),children:[n.jsx("div",{className:"tool-select-icon snack-icon",children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[n.jsx("path",{d:"M18 8h1a4 4 0 010 8h-1"}),n.jsx("path",{d:"M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"}),n.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),n.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),n.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),n.jsxs("div",{className:"tool-select-info",children:[n.jsx("h3",{children:"Protein Snack Generator"}),n.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),n.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),n.jsxs("div",{className:"tool-select-card",onClick:()=>o("/client/tools/motivation"),children:[n.jsx("div",{className:"tool-select-icon quote-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),n.jsxs("div",{className:"tool-select-info",children:[n.jsx("h3",{children:"Daily Motivation"}),n.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),n.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]})]}),n.jsxs("nav",{className:"block-bottom-nav",children:[n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client/forms"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),n.jsx("span",{children:"Forms"})]}),n.jsxs("button",{className:"block-nav-tab active",children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),n.jsx("span",{children:"Tools"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client/personal-bests"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M12 20V10"}),n.jsx("path",{d:"M18 20V4"}),n.jsx("path",{d:"M6 20v-4"})]}),n.jsx("span",{children:"PBs"})]}),t?.circuitAccess&&n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client/circuit"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 6v6l4 2"})]}),n.jsx("span",{children:"Circuit"})]})]})]})}function qD(){const{currentUser:r,isClient:e,clientData:t,loading:i}=Bs(),o=hs(),[c,u]=C.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[h,m]=C.useState(null),[b,k]=C.useState(!1);C.useEffect(()=>{!i&&(!r||!e)&&o("/")},[r,e,i,o]);const S=V=>{const{name:P,value:ee}=V.target;u($=>({...$,[P]:ee})),k(!1)},E=()=>{let V=parseFloat(c.weight);c.weightUnit==="lbs"&&(V=V*.453592);let P;if(c.heightUnit==="cm")P=parseFloat(c.height);else{const be=parseFloat(c.heightFeet)||0,me=parseFloat(c.heightInches)||0;P=be*30.48+me*2.54}const ee=parseInt(c.age);let $;c.gender==="male"?$=10*V+6.25*P-5*ee+5:$=10*V+6.25*P-5*ee-161;const X=$*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[c.dailyActivity],Te={low:100,moderate:200,high:300,daily:400},Re=Math.round(X+Te[c.trainingFrequency]);let B=Re,O,z;switch(c.goal){case"lose":B=Re*(1-{light:.15,moderate:.2,harsh:.25}[c.deficitLevel]),O=2.2,z=.3;break;case"build":B=Re*1.1,O=2,z=.22;break;default:O=1.8,z=.25;break}const Y=c.gender==="male"?1400:1100;B=Math.max(B,Y);const G=Math.round(V*O),se=G*4,H=B*z,Le=Math.round(H/9),Oe=B-se-H,ne=Math.max(0,Math.round(Oe/4));m({bmr:Math.round($),neat:Math.round(X),exerciseAdd:Te[c.trainingFrequency],tdee:Math.round(Re),targetCalories:Math.round(B),protein:G,carbs:ne,fats:Le,proteinCalories:Math.round(se),carbCalories:Math.round(Oe),fatCalories:Math.round(H)}),k(!0)},F=()=>{const V=c.weight&&parseFloat(c.weight)>0,P=c.age&&parseInt(c.age)>0;let ee;return c.heightUnit==="cm"?ee=c.height&&parseFloat(c.height)>0:ee=c.heightFeet&&parseFloat(c.heightFeet)>0||c.heightInches&&parseFloat(c.heightInches)>0,V&&P&&ee},L=()=>{switch(c.goal){case"lose":return"Weight Loss";case"build":return"Muscle Building";default:return"Maintenance"}};return i?n.jsx("div",{className:"client-loading",children:"Loading..."}):!r||!e||!t?null:n.jsxs("div",{className:"client-tools-page",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>o("/client/tools"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})]})}),n.jsx("main",{className:"tools-main page-transition-enter",children:n.jsxs("div",{className:"tool-card",children:[n.jsxs("div",{className:"tool-header",children:[n.jsx("h3",{children:"Macro Calculator"}),n.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),n.jsxs("div",{className:"calculator-form",children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Gender"}),n.jsxs("div",{className:"toggle-group",children:[n.jsx("button",{type:"button",className:c.gender==="male"?"active":"",onClick:()=>{u(V=>({...V,gender:"male"})),k(!1)},children:"Male"}),n.jsx("button",{type:"button",className:c.gender==="female"?"active":"",onClick:()=>{u(V=>({...V,gender:"female"})),k(!1)},children:"Female"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Age"}),n.jsx("input",{type:"number",name:"age",value:c.age,onChange:S,placeholder:"Years",min:"15",max:"100"})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Weight"}),n.jsxs("div",{className:"input-with-unit",children:[n.jsx("input",{type:"number",name:"weight",value:c.weight,onChange:S,placeholder:c.weightUnit==="kg"?"kg":"lbs",min:"30",max:"300"}),n.jsxs("div",{className:"unit-toggle",children:[n.jsx("button",{type:"button",className:c.weightUnit==="kg"?"active":"",onClick:()=>{u(V=>({...V,weightUnit:"kg"})),k(!1)},children:"kg"}),n.jsx("button",{type:"button",className:c.weightUnit==="lbs"?"active":"",onClick:()=>{u(V=>({...V,weightUnit:"lbs"})),k(!1)},children:"lbs"})]})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Height"}),n.jsxs("div",{className:"input-with-unit",children:[c.heightUnit==="cm"?n.jsx("input",{type:"number",name:"height",value:c.height,onChange:S,placeholder:"cm",min:"100",max:"250"}):n.jsxs("div",{className:"height-imperial",children:[n.jsx("input",{type:"number",name:"heightFeet",value:c.heightFeet,onChange:S,placeholder:"ft",min:"4",max:"7"}),n.jsx("input",{type:"number",name:"heightInches",value:c.heightInches,onChange:S,placeholder:"in",min:"0",max:"11"})]}),n.jsxs("div",{className:"unit-toggle",children:[n.jsx("button",{type:"button",className:c.heightUnit==="cm"?"active":"",onClick:()=>{u(V=>({...V,heightUnit:"cm"})),k(!1)},children:"cm"}),n.jsx("button",{type:"button",className:c.heightUnit==="ft"?"active":"",onClick:()=>{u(V=>({...V,heightUnit:"ft"})),k(!1)},children:"ft/in"})]})]})]})]}),n.jsxs("div",{className:"form-group full-width",children:[n.jsx("label",{children:"Daily Activity (outside of training)"}),n.jsxs("select",{name:"dailyActivity",value:c.dailyActivity,onChange:S,children:[n.jsx("option",{value:"sedentary",children:"Sedentary  desk job, drive to work, under 5k steps"}),n.jsx("option",{value:"light",children:"Lightly Active  office + some walking, 5-8k steps"}),n.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),n.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),n.jsxs("div",{className:"form-group full-width",children:[n.jsx("label",{children:"Training Sessions per Week"}),n.jsxs("select",{name:"trainingFrequency",value:c.trainingFrequency,onChange:S,children:[n.jsx("option",{value:"low",children:"1-2 sessions"}),n.jsx("option",{value:"moderate",children:"3-4 sessions"}),n.jsx("option",{value:"high",children:"5-6 sessions"}),n.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),n.jsxs("div",{className:"form-group full-width",children:[n.jsx("label",{children:"Fitness Goal"}),n.jsxs("div",{className:"goal-options",children:[n.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="lose"?"active":""}`,onClick:()=>{u(V=>({...V,goal:"lose"})),k(!1)},children:[n.jsx("span",{className:"goal-icon",children:"-"}),n.jsx("span",{children:"Lose Weight"})]}),n.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="maintain"?"active":""}`,onClick:()=>{u(V=>({...V,goal:"maintain"})),k(!1)},children:[n.jsx("span",{className:"goal-icon",children:"="}),n.jsx("span",{children:"Maintain"})]}),n.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="build"?"active":""}`,onClick:()=>{u(V=>({...V,goal:"build"})),k(!1)},children:[n.jsx("span",{className:"goal-icon",children:"+"}),n.jsx("span",{children:"Build Muscle"})]})]})]}),c.goal==="lose"&&n.jsxs("div",{className:"form-group full-width deficit-section",children:[n.jsx("label",{children:"Calorie Deficit Level"}),n.jsxs("div",{className:"deficit-options",children:[n.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="light"?"active":""}`,onClick:()=>{u(V=>({...V,deficitLevel:"light"})),k(!1)},children:[n.jsx("span",{className:"deficit-name",children:"Mild"}),n.jsx("span",{className:"deficit-desc",children:"15% below TDEE"}),n.jsx("span",{className:"deficit-rate",children:"Steady, sustainable"})]}),n.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="moderate"?"active":""}`,onClick:()=>{u(V=>({...V,deficitLevel:"moderate"})),k(!1)},children:[n.jsx("span",{className:"deficit-name",children:"Moderate"}),n.jsx("span",{className:"deficit-desc",children:"20% below TDEE"}),n.jsx("span",{className:"deficit-rate",children:"Recommended"})]}),n.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="harsh"?"active":""}`,onClick:()=>{u(V=>({...V,deficitLevel:"harsh"})),k(!1)},children:[n.jsx("span",{className:"deficit-name",children:"Aggressive"}),n.jsx("span",{className:"deficit-desc",children:"25% below TDEE"}),n.jsx("span",{className:"deficit-rate",children:"Fast but tough"})]})]})]}),n.jsx("button",{className:"calculate-btn",onClick:E,disabled:!F(),children:"Calculate Macros"})]}),b&&h&&(()=>{const V=h.proteinCalories+h.carbCalories+h.fatCalories,P=Math.round(h.proteinCalories/V*100),ee=Math.round(h.carbCalories/V*100),$=100-P-ee;return n.jsxs("div",{className:"results-section",children:[n.jsxs("div",{className:"results-header",children:[n.jsx("h4",{children:"Your Daily Targets"}),n.jsx("span",{className:"goal-badge",children:L()})]}),n.jsxs("div",{className:"calories-display",children:[n.jsx("span",{className:"calories-value",children:h.targetCalories}),n.jsx("span",{className:"calories-label",children:"calories/day"})]}),n.jsxs("div",{className:"macro-percentage-bar",children:[n.jsxs("div",{className:"macro-bar-track",children:[n.jsx("div",{className:"macro-bar-segment protein",style:{width:`${P}%`},children:P>=12&&n.jsxs("span",{children:[P,"%"]})}),n.jsx("div",{className:"macro-bar-segment carbs",style:{width:`${ee}%`},children:ee>=12&&n.jsxs("span",{children:[ee,"%"]})}),n.jsx("div",{className:"macro-bar-segment fats",style:{width:`${$}%`},children:$>=12&&n.jsxs("span",{children:[$,"%"]})})]}),n.jsxs("div",{className:"macro-bar-legend",children:[n.jsxs("div",{className:"legend-item",children:[n.jsx("span",{className:"legend-dot protein"}),"Protein ",P,"%"]}),n.jsxs("div",{className:"legend-item",children:[n.jsx("span",{className:"legend-dot carbs"}),"Carbs ",ee,"%"]}),n.jsxs("div",{className:"legend-item",children:[n.jsx("span",{className:"legend-dot fats"}),"Fats ",$,"%"]})]})]}),n.jsxs("div",{className:"macros-grid",children:[n.jsxs("div",{className:"macro-card protein",style:{animationDelay:"0.1s"},children:[n.jsxs("div",{className:"macro-value",children:[h.protein,"g"]}),n.jsx("div",{className:"macro-label",children:"Protein"}),n.jsxs("div",{className:"macro-calories",children:[h.proteinCalories," cal"]})]}),n.jsxs("div",{className:"macro-card carbs",style:{animationDelay:"0.2s"},children:[n.jsxs("div",{className:"macro-value",children:[h.carbs,"g"]}),n.jsx("div",{className:"macro-label",children:"Carbs"}),n.jsxs("div",{className:"macro-calories",children:[h.carbCalories," cal"]})]}),n.jsxs("div",{className:"macro-card fats",style:{animationDelay:"0.3s"},children:[n.jsxs("div",{className:"macro-value",children:[h.fats,"g"]}),n.jsx("div",{className:"macro-label",children:"Fats"}),n.jsxs("div",{className:"macro-calories",children:[h.fatCalories," cal"]})]})]}),n.jsxs("div",{className:"results-info",children:[n.jsxs("div",{className:"info-row",children:[n.jsx("span",{children:"BMR (your body at rest)"}),n.jsxs("span",{className:"info-value",children:[h.bmr," cal"]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{children:"+ Daily activity (NEAT)"}),n.jsxs("span",{className:"info-value",children:[h.neat," cal"]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{children:"+ Training sessions"}),n.jsxs("span",{className:"info-value",children:["+",h.exerciseAdd," cal"]})]}),n.jsxs("div",{className:"info-row",style:{fontWeight:600},children:[n.jsx("span",{children:"TDEE (total burn)"}),n.jsxs("span",{className:"info-value",children:[h.tdee," cal"]})]})]}),n.jsx("div",{className:"results-note",children:n.jsx("p",{children:"These are estimated values. Individual results may vary based on metabolism, body composition, and other factors. Consult with your trainer for personalized guidance."})})]})})()]})}),n.jsxs("nav",{className:"block-bottom-nav",children:[n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client/forms"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),n.jsx("span",{children:"Forms"})]}),n.jsxs("button",{className:"block-nav-tab active",children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),n.jsx("span",{children:"Tools"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client/personal-bests"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M12 20V10"}),n.jsx("path",{d:"M18 20V4"}),n.jsx("path",{d:"M6 20v-4"})]}),n.jsx("span",{children:"PBs"})]}),t?.circuitAccess&&n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client/circuit"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 6v6l4 2"})]}),n.jsx("span",{children:"Circuit"})]})]})]})}const w2=[{name:"Greek Yoghurt & Honey",protein:20,calories:180,prep:0,category:"no-prep",instructions:"Grab a pot of Greek yoghurt, drizzle with honey. Done. Go for full-fat or 0% depending on your macros."},{name:"Protein Bar",protein:20,calories:220,prep:0,category:"no-prep",instructions:"Unwrap and eat. Keep one in your bag for emergencies. Look for bars with 20g+ protein and under 5g sugar."},{name:"Beef Jerky",protein:15,calories:120,prep:0,category:"no-prep",instructions:"Open the pack and snack. Great for on the go. Check the label  some brands are loaded with sugar."},{name:"Handful of Almonds",protein:7,calories:170,prep:0,category:"no-prep",instructions:"Grab about 30g (roughly 23 almonds). Good fats and protein. Keep a bag at your desk or in your car."},{name:"Boiled Eggs (x2)",protein:12,calories:140,prep:0,category:"no-prep",instructions:"Batch boil at the start of the week  10 mins in boiling water, cool in ice water, peel and store in the fridge. Grab 2 when you need them."},{name:"String Cheese (x2)",protein:14,calories:160,prep:0,category:"no-prep",instructions:"Peel and eat. Keep a few in the fridge for quick grabs. Pair with some fruit if you want extra carbs."},{name:"Cottage Cheese Pot",protein:14,calories:110,prep:0,category:"no-prep",instructions:"Eat straight from the pot. Add a pinch of salt and pepper, or keep it sweet with a drizzle of honey."},{name:"Edamame Beans",protein:11,calories:120,prep:0,category:"no-prep",instructions:"Buy pre-cooked and shelled from the supermarket. Sprinkle with sea salt or chilli flakes. Eat cold or warm in the microwave for 1 min."},{name:"Turkey Slices (50g)",protein:12,calories:60,prep:0,category:"no-prep",instructions:"Straight from the pack. Roll up a few slices on their own or wrap around some cheese for extra protein."},{name:"Roasted Chickpeas",protein:10,calories:160,prep:0,category:"no-prep",instructions:"Buy a bag of roasted chickpeas or make a batch: drain tinned chickpeas, toss in oil and spices, roast at 200C for 25 mins. Store in a jar."},{name:"Protein Shake & Banana",protein:30,calories:280,prep:1,category:"quick",instructions:"Add one scoop of protein powder to 300ml water or milk in a shaker. Shake for 10 seconds. Eat a banana on the side."},{name:"Peanut Butter on Rice Cakes",protein:14,calories:260,prep:1,category:"quick",instructions:"Spread 1-2 tablespoons of peanut butter across 2 rice cakes. Top with sliced banana or a drizzle of honey if you want."},{name:"Greek Yoghurt & Granola",protein:22,calories:300,prep:1,category:"quick",instructions:"Scoop Greek yoghurt into a bowl. Top with a handful of granola and some berries. Use high-protein granola if you can find it."},{name:"Turkey & Cream Cheese Roll-Ups",protein:18,calories:180,prep:2,category:"quick",instructions:"Lay out 3-4 turkey slices. Spread a thin layer of cream cheese on each. Roll them up. Add cucumber or spinach inside for crunch."},{name:"Cottage Cheese & Pineapple",protein:15,calories:160,prep:1,category:"quick",instructions:"Scoop cottage cheese into a bowl, top with tinned or fresh pineapple chunks. The sweet and savoury combo works surprisingly well."},{name:"Ham & Cheese Wrap",protein:22,calories:320,prep:2,category:"quick",instructions:"Lay a tortilla flat. Add 2-3 ham slices and a slice of cheese. Add lettuce or spinach if you have it. Roll up tight and eat."},{name:"Tuna & Crackers",protein:20,calories:220,prep:2,category:"quick",instructions:"Drain a small tin of tuna, mix with a squeeze of lemon and black pepper. Spoon onto 4-5 crackers. Add hot sauce if you like it."},{name:"Protein Yoghurt Bowl",protein:25,calories:250,prep:1,category:"quick",instructions:"Mix a scoop of protein powder into Greek yoghurt until smooth. Top with berries, nuts, or a drizzle of honey."},{name:"Hummus & Veggie Sticks",protein:8,calories:180,prep:1,category:"quick",instructions:"Grab a pot of hummus and chop up carrots, cucumber, and peppers into sticks. Dip and eat. Simple."},{name:"Chocolate Milk (500ml)",protein:17,calories:340,prep:1,category:"quick",instructions:"Pour 500ml milk, stir in 2 tablespoons of chocolate protein powder or cocoa. Great post-workout  the carbs help recovery."},{name:"Peanut Butter & Apple Slices",protein:10,calories:250,prep:1,category:"quick",instructions:"Slice an apple into wedges. Dip into 1-2 tablespoons of peanut butter. Sweet, crunchy, and filling."},{name:"Overnight Oats (pre-made)",protein:18,calories:310,prep:1,category:"quick",instructions:"Prep the night before: mix 50g oats, 1 scoop protein powder, 150ml milk, and a handful of berries in a jar. Refrigerate overnight. Grab and eat cold."},{name:"Smoked Salmon on Crackers",protein:16,calories:200,prep:2,category:"quick",instructions:"Lay out 4-5 crackers. Top each with a slice of smoked salmon and a small squeeze of lemon. Add cream cheese if you want extra."},{name:"Protein Smoothie Bowl",protein:28,calories:350,prep:2,category:"quick",instructions:"Blend 1 scoop protein powder, 1 frozen banana, and a splash of milk until thick. Pour into a bowl. Top with granola, berries, and seeds."},{name:"Almond Butter & Banana Toast",protein:12,calories:280,prep:2,category:"quick",instructions:"Toast a slice of wholemeal bread. Spread with almond butter. Slice half a banana on top. Sprinkle with cinnamon."},{name:"Scrambled Eggs on Toast",protein:22,calories:320,prep:4,category:"cook",instructions:"Crack 3 eggs into a pan on medium-low heat. Stir continuously with a spatula until just set  keep them soft. Season with salt and pepper, serve on wholemeal toast."},{name:"Protein Pancake Mug Cake",protein:25,calories:280,prep:3,category:"cook",instructions:"Mix 1 scoop protein powder, 1 egg, and 2 tablespoons of oats in a mug. Microwave for 90 seconds. Top with peanut butter or berries."},{name:"Tuna Mayo on Toast",protein:24,calories:340,prep:3,category:"cook",instructions:"Drain a tin of tuna, mix with 1 tablespoon of light mayo, salt, pepper, and a squeeze of lemon. Toast 2 slices of bread. Pile the tuna on top."},{name:"Egg & Cheese Muffin",protein:18,calories:300,prep:4,category:"cook",instructions:"Fry or microwave an egg. Toast an English muffin. Layer the egg with a slice of cheese and optionally a slice of ham. Press together."},{name:"Chicken Quesadilla",protein:26,calories:380,prep:5,category:"cook",instructions:"Use leftover chicken or pre-cooked slices. Lay a tortilla in a dry pan on medium heat. Add chicken and grated cheese on one half. Fold over, cook 2 mins each side until golden and melted."},{name:"Beans on Toast",protein:16,calories:340,prep:3,category:"cook",instructions:"Heat a tin of baked beans in the microwave for 2 mins, stirring halfway. Toast 2 slices of wholemeal bread. Pour beans on top. Add grated cheese for extra protein."},{name:"Omelette (2 eggs)",protein:14,calories:180,prep:4,category:"cook",instructions:"Beat 2 eggs with salt and pepper. Pour into a hot, lightly oiled pan. Swirl to cover the base. Add fillings (cheese, ham, peppers) when the edges set. Fold in half and serve."},{name:"Protein Porridge",protein:28,calories:380,prep:4,category:"cook",instructions:"Cook 50g oats with 250ml milk in a pan or microwave (3 mins). Stir in 1 scoop of protein powder once it cools slightly. Top with banana and a drizzle of honey."},{name:"Cheese Toastie",protein:16,calories:350,prep:3,category:"cook",instructions:"Butter the outside of 2 slices of bread. Place cheese (and ham if you have it) between the unbuttered sides. Cook in a dry pan on medium heat, 2 mins each side until golden."},{name:"Egg Fried Rice (leftover rice)",protein:16,calories:360,prep:5,category:"cook",instructions:"Heat a splash of oil in a pan on high heat. Add leftover cold rice and stir-fry for 2 mins. Push to one side, crack in 2 eggs and scramble. Mix together, add soy sauce to taste."}];function WD(){const{currentUser:r,isClient:e,clientData:t,loading:i}=Bs(),o=hs(),[c,u]=C.useState(null),[h,m]=C.useState("all"),[b,k]=C.useState(!1),S=C.useRef([]);C.useEffect(()=>{!i&&(!r||!e)&&o("/")},[r,e,i,o]);const E=P=>{const ee=[...P];for(let $=ee.length-1;$>0;$--){const le=Math.floor(Math.random()*($+1));[ee[$],ee[le]]=[ee[le],ee[$]]}return ee},F=()=>{const P=h==="all"?w2:w2.filter(ee=>ee.category===h);S.current.length===0&&(S.current=E(P)),k(!0),setTimeout(()=>{const ee=S.current.pop();u(ee),k(!1)},300)},L=P=>P===0?"No prep":`${P} min`,V=P=>{switch(P){case"no-prep":return"Grab & Go";case"quick":return"Quick Prep";case"cook":return"Light Cook";default:return P}};return i?n.jsx("div",{className:"client-loading",children:"Loading..."}):!r||!e||!t?null:n.jsxs("div",{className:"client-tools-page",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>o("/client/tools"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})]})}),n.jsx("main",{className:"tools-main page-transition-enter",children:n.jsxs("div",{className:"tool-card",children:[n.jsxs("div",{className:"tool-header",children:[n.jsx("h3",{children:"Protein Snack Generator"}),n.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),n.jsxs("div",{className:"snack-generator",children:[n.jsx("div",{className:"snack-filters",children:[{value:"all",label:"All"},{value:"no-prep",label:"Grab & Go"},{value:"quick",label:"Quick Prep"},{value:"cook",label:"Light Cook"}].map(P=>n.jsx("button",{className:`snack-filter-btn ${h===P.value?"active":""}`,onClick:()=>{m(P.value),u(null),S.current=[]},children:P.label},P.value))}),c&&!b&&n.jsxs("div",{className:"snack-result",children:[n.jsx("div",{className:"snack-name",children:c.name}),n.jsxs("div",{className:"snack-details",children:[n.jsxs("div",{className:"snack-detail",children:[n.jsxs("span",{className:"snack-detail-value",children:[c.protein,"g"]}),n.jsx("span",{className:"snack-detail-label",children:"Protein"})]}),n.jsxs("div",{className:"snack-detail",children:[n.jsx("span",{className:"snack-detail-value",children:c.calories}),n.jsx("span",{className:"snack-detail-label",children:"Calories"})]}),n.jsxs("div",{className:"snack-detail",children:[n.jsx("span",{className:"snack-detail-value",children:L(c.prep)}),n.jsx("span",{className:"snack-detail-label",children:"Prep Time"})]})]}),n.jsxs("div",{className:"snack-prep-indicator",children:[n.jsx("div",{className:`prep-dot ${c.category==="no-prep"||c.category==="quick"||c.category==="cook"?"active":""}`}),n.jsx("div",{className:`prep-dot ${c.category==="quick"||c.category==="cook"?"active":""}`}),n.jsx("div",{className:`prep-dot ${c.category==="cook"?"active":""}`}),n.jsx("span",{className:"prep-indicator-label",children:V(c.category)})]}),n.jsxs("div",{className:"snack-instructions",children:[n.jsx("div",{className:"snack-instructions-label",children:"How to make it"}),n.jsx("p",{children:c.instructions})]})]}),b&&n.jsx("div",{className:"snack-result shuffling",children:n.jsx("div",{className:"snack-shuffle-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"})})})}),n.jsx("button",{className:"snack-generate-btn",onClick:F,children:c?"Give Me Another":"Give Me a Snack"})]})]})}),n.jsxs("nav",{className:"block-bottom-nav",children:[n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client/forms"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),n.jsx("span",{children:"Forms"})]}),n.jsxs("button",{className:"block-nav-tab active",children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),n.jsx("span",{children:"Tools"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client/personal-bests"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M12 20V10"}),n.jsx("path",{d:"M18 20V4"}),n.jsx("path",{d:"M6 20v-4"})]}),n.jsx("span",{children:"PBs"})]}),t?.circuitAccess&&n.jsxs("button",{className:"block-nav-tab",onClick:()=>o("/client/circuit"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 6v6l4 2"})]}),n.jsx("span",{children:"Circuit"})]})]})]})}const Ag=[{text:"The only bad workout is the one that didn't happen.",author:"Unknown"},{text:"Your body can stand almost anything. It's your mind that you have to convince.",author:"Unknown"},{text:"Discipline is choosing between what you want now and what you want most.",author:"Abraham Lincoln"},{text:"The pain you feel today will be the strength you feel tomorrow.",author:"Unknown"},{text:"Don't wish for it. Work for it.",author:"Unknown"},{text:"Success isn't always about greatness. It's about consistency.",author:"Dwayne Johnson"},{text:"The harder you work, the luckier you get.",author:"Gary Player"},{text:"Fall seven times, stand up eight.",author:"Japanese Proverb"},{text:"What seems impossible today will one day become your warm-up.",author:"Unknown"},{text:"You don't have to be extreme, just consistent.",author:"Unknown"},{text:"Strength does not come from the body. It comes from the will.",author:"Unknown"},{text:"The only way to define your limits is by going beyond them.",author:"Arthur C. Clarke"},{text:"Motivation gets you started. Habit keeps you going.",author:"Jim Ryun"},{text:"If it doesn't challenge you, it doesn't change you.",author:"Fred DeVito"},{text:"Progress, not perfection.",author:"Unknown"},{text:"The best project you'll ever work on is you.",author:"Unknown"},{text:"A year from now you'll wish you had started today.",author:"Karen Lamb"},{text:"You are one workout away from a good mood.",author:"Unknown"},{text:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{text:"The body achieves what the mind believes.",author:"Unknown"},{text:"Small daily improvements are the key to staggering long-term results.",author:"Unknown"},{text:"It's not about having time. It's about making time.",author:"Unknown"},{text:"Sore today, strong tomorrow.",author:"Unknown"},{text:"Champions keep playing until they get it right.",author:"Billie Jean King"},{text:"Be stronger than your excuses.",author:"Unknown"},{text:"When you feel like quitting, think about why you started.",author:"Unknown"},{text:"The difference between try and triumph is a little umph.",author:"Marvin Phillips"},{text:"Your only limit is you.",author:"Unknown"},{text:"Believe you can and you're halfway there.",author:"Theodore Roosevelt"},{text:"Making excuses burns zero calories per hour.",author:"Unknown"},{text:"Results happen over time, not overnight. Work hard, stay consistent, and be patient.",author:"Unknown"},{text:"You don't find willpower, you create it.",author:"Unknown"},{text:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{text:"Sweat is just fat crying.",author:"Unknown"},{text:"Today I will do what others won't, so tomorrow I can do what others can't.",author:"Jerry Rice"},{text:"The only person you are destined to become is the person you decide to be.",author:"Ralph Waldo Emerson"},{text:"Don't count the days, make the days count.",author:"Muhammad Ali"},{text:"It never gets easier, you just get stronger.",author:"Unknown"},{text:"Suffer the pain of discipline or suffer the pain of regret.",author:"Jim Rohn"},{text:"Strive for progress, not perfection.",author:"Unknown"},{text:"Your health is an investment, not an expense.",author:"Unknown"},{text:"Action is the foundational key to all success.",author:"Pablo Picasso"},{text:"Good things come to those who sweat.",author:"Unknown"},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"No matter how slow you go, you're still lapping everyone on the couch.",author:"Unknown"},{text:"Train insane or remain the same.",author:"Unknown"},{text:"The hardest step is the first one out the door.",author:"Unknown"},{text:"Work hard in silence, let your results be the noise.",author:"Frank Ocean"},{text:"Every champion was once a contender who refused to give up.",author:"Rocky Balboa"},{text:"Take care of your body. It's the only place you have to live.",author:"Jim Rohn"},{text:"Energy and persistence conquer all things.",author:"Benjamin Franklin"},{text:"The mind is the most important muscle.",author:"Unknown"},{text:"You are stronger than you think.",author:"Unknown"},{text:"Obsessed is a word the lazy use to describe the dedicated.",author:"Unknown"},{text:"The only weight you need to lose is the weight of your doubts.",author:"Unknown"}];function HD(){const{currentUser:r,isClient:e,clientData:t,updateClientData:i,loading:o}=Bs(),c=hs(),[u,h]=C.useState(null),[m,b]=C.useState(!0),[k,S]=C.useState(!1);C.useEffect(()=>{!o&&(!r||!e)&&c("/")},[r,e,o,c]),C.useEffect(()=>{t&&E()},[t]);const E=async()=>{try{const L=new Date().toISOString().split("T")[0],V=Mt(Je,"clients",t.id),P=await vs(V);if(P.exists()){const ee=P.data();ee.dailyQuote&&ee.dailyQuote.date===L&&h(ee.dailyQuote)}}catch(L){console.error("Error loading daily quote:",L)}b(!1)},F=async()=>{if(u)return;S(!0);const L=new Date().toISOString().split("T")[0];let V=[];try{const Te=await vs(Mt(Je,"clients",t.id));Te.exists()&&(V=Te.data().quoteUsedIndices||[])}catch{}V.length>=Ag.length&&(V=[]);const P=Ag.map((Te,Re)=>Re).filter(Te=>!V.includes(Te)),ee=Math.floor(Math.random()*P.length),$=P[ee],le=Ag[$],X={text:le.text,author:le.author,date:L};try{await js(Mt(Je,"clients",t.id),{dailyQuote:X,quoteUsedIndices:[...V,$]})}catch(Te){console.error("Error saving daily quote to Firestore:",Te)}i({dailyQuote:X}),h(X),S(!1)};return o?n.jsx("div",{className:"client-loading",children:"Loading..."}):!r||!e||!t?null:n.jsxs("div",{className:"client-tools-page",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>c("/client/tools"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})]})}),n.jsx("main",{className:"tools-main page-transition-enter",children:n.jsxs("div",{className:"tool-card",children:[n.jsxs("div",{className:"tool-header",children:[n.jsx("h3",{children:"Daily Motivation"}),n.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),n.jsxs("div",{className:"quote-generator",children:[m?n.jsxs("div",{className:"quote-skeleton",children:[n.jsx("div",{className:"skeleton-icon"}),n.jsx("div",{className:"skeleton-line long"}),n.jsx("div",{className:"skeleton-line medium"}),n.jsx("div",{className:"skeleton-line short"})]}):u?n.jsxs("div",{className:"quote-result",children:[n.jsx("div",{className:"quote-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),n.jsx("div",{className:"quote-text",children:u.text}),n.jsxs("div",{className:"quote-author",children:[" ",u.author]}),n.jsx("div",{className:"quote-date-note",children:"Your inspiration for today"}),n.jsxs("div",{className:"quote-lock-note",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:n.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"})}),"New quote available tomorrow at midnight"]})]}):k?n.jsx("div",{className:"quote-result shuffling",children:n.jsx("div",{className:"quote-shuffle-icon",children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 6v6l4 2"})]})})}):n.jsxs("div",{className:"quote-empty",children:[n.jsx("div",{className:"quote-empty-graphic",children:n.jsxs("svg",{viewBox:"0 0 80 80",fill:"none",children:[n.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"var(--border-color)",strokeWidth:"2",strokeDasharray:"4 4"}),n.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",fill:"var(--color-primary)",opacity:"0.2"}),n.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",stroke:"var(--color-primary)",strokeWidth:"1.5"})]})}),n.jsx("h4",{className:"quote-empty-title",children:"Your Daily Inspiration"}),n.jsx("p",{children:"Tap below to reveal today's motivational quote  a new one every day to keep you going."})]}),!u&&!m&&n.jsx("button",{className:"quote-generate-btn",onClick:F,disabled:k,children:k?"Finding your quote...":"Get Inspired"})]})]})}),n.jsxs("nav",{className:"block-bottom-nav",children:[n.jsxs("button",{className:"block-nav-tab",onClick:()=>c("/client"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>c("/client/forms"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),n.jsx("span",{children:"Forms"})]}),n.jsxs("button",{className:"block-nav-tab active",children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),n.jsx("span",{children:"Tools"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>c("/client/personal-bests"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M12 20V10"}),n.jsx("path",{d:"M18 20V4"}),n.jsx("path",{d:"M6 20v-4"})]}),n.jsx("span",{children:"PBs"})]}),t?.circuitAccess&&n.jsxs("button",{className:"block-nav-tab",onClick:()=>c("/client/circuit"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 6v6l4 2"})]}),n.jsx("span",{children:"Circuit"})]})]})]})}const ni=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],Xl=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function $D(){const r=new Date;return`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`}function si(r){const[e,t]=r.split("-");return new Date(parseInt(e),parseInt(t)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function GD(r){if(!r&&r!==0)return"-";const e=Math.floor(r/60),t=(r%60).toFixed(2);return e>0?`${e}m ${parseFloat(t).toFixed(0)}s`:`${parseFloat(t).toFixed(2)}s`}function KD(r,e){return!r&&r!==0?"-":!e&&e!==0?`${r}kg`:`${r}kg x ${e}`}function wf(r,e){if(!e)return"-";switch(r.unit){case"weight":return KD(e.weight,e.reps);case"time":return GD(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function $c(r,e){if(!e)return 0;switch(r.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function Rg(r,e){return!e||e===0?null:(r-e)/e*100}function YD({data:r,exerciseKey:e,unit:t}){if(!r||r.length<2)return n.jsx("div",{className:"pb-trend-empty",children:n.jsx("p",{children:"Not enough data for trend line yet"})});const i=r.map(V=>{const P=V.benchmarks?.[e];if(!P)return 0;switch(t){case"weight":return(P.weight||0)*(P.reps||0);case"time":return P.time||0;case"reps":return P.reps||0;case"distance":return P.distance||0;default:return 0}}),o=Math.max(...i),c=Math.min(...i),u=o-c||1,h=300,m=100,b=20,k=h-b*2,S=m-b*2,E=i.map((V,P)=>{const ee=b+P/(i.length-1)*k,$=b+S-(V-c)/u*S;return{x:ee,y:$,value:V}}),F=E.map((V,P)=>`${P===0?"M":"L"} ${V.x} ${V.y}`).join(" "),L=F+` L ${E[E.length-1].x} ${b+S} L ${E[0].x} ${b+S} Z`;return n.jsxs("div",{className:"pb-trend-chart",children:[n.jsxs("svg",{viewBox:`0 0 ${h} ${m}`,preserveAspectRatio:"xMidYMid meet",children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),n.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),n.jsx("path",{d:L,fill:"url(#trendGradientJr)"}),n.jsx("path",{d:F,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),E.map((V,P)=>n.jsx("circle",{cx:V.x,cy:V.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},P))]}),n.jsx("div",{className:"pb-trend-labels",children:r.map((V,P)=>n.jsxs("span",{className:"pb-trend-label",children:[V.month.split("-")[1],"/",V.month.split("-")[0].slice(2)]},P))})]})}function QD(){const[r,e]=C.useState("bests"),[t,i]=C.useState([]),[o,c]=C.useState(!0),[u,h]=C.useState(!1),[m,b]=C.useState(0),[k,S]=C.useState(!1),[E,F]=C.useState(!1),[L,V]=C.useState(!1),[P,ee]=C.useState({}),[$,le]=C.useState({}),[X,Te]=C.useState({}),[Re,B]=C.useState({}),[O,z]=C.useState({}),[Y,G]=C.useState(!1),[se,H]=C.useState({}),[Le,Oe]=C.useState([]),[ne,be]=C.useState(null),[me,Ae]=C.useState(null),[He,Q]=C.useState(!1),[we,Ne]=C.useState(""),[je,ce]=C.useState(""),Ee=C.useRef(null),ue=C.useRef(0),xe=C.useRef(0),Fe=C.useRef("right"),ot=C.useCallback(pe=>{b(Xe=>{const st=Math.max(0,Math.min(ni.length-1,pe));return st===Xe?Xe:(Fe.current=st>Xe?"right":"left",st)})},[]),{currentUser:Ue,isClient:_e,clientData:Ke,loading:ve}=Bs(),{isDark:bt}=ja(),ht=hs(),Ye=C.useCallback((pe,Xe="info")=>{Ae({message:pe,type:Xe}),setTimeout(()=>Ae(null),4e3)},[]);C.useEffect(()=>{!ve&&(!Ue||!_e)&&ht("/")},[Ue,_e,ve,ht]),C.useEffect(()=>{Ke&&Ot()},[Ke]);const Ot=async()=>{try{const pe=ds(en(Je,"juniorPBs"),Hn("clientId","==",Ke.id)),st=(await yn(pe)).docs.map(ft=>({id:ft.id,...ft.data()}));st.sort((ft,_t)=>ft.month.localeCompare(_t.month)),i(st);const nt=ds(en(Je,"juniorPBTargets"),Hn("clientId","==",Ke.id)),Qe=await yn(nt);if(!Qe.empty){const ft=Qe.docs[0].data();Te(ft.targets||{}),B(ft.metricTargets||{}),z(ft.targets||{}),H(ft.metricTargets||{})}const ie=ds(en(Je,"juniorAchievements"),Hn("clientId","==",Ke.id)),lt=await yn(ie);lt.empty||Oe(lt.docs[0].data().badges||[])}catch(pe){console.error("Error fetching junior personal bests:",pe)}c(!1)},jt=$D(),te=t.find(pe=>pe.month===jt),it=t.filter(pe=>pe.month<jt),kt=it.length>0?it[it.length-1]:null;C.useEffect(()=>{te?(ee(te.benchmarks||{}),le(te.bodyMetrics||{})):(ee({}),le({}))},[te?.id]);const Rt=async(pe,Xe)=>{const st=[];if(pe==="strength"?ni.forEach(nt=>{const Qe=X[nt.key];if(!Qe)return;const ie=Xe[nt.key];if(!ie)return;let lt;if(Qe.targetType==="time"){if(!Qe.targetValue)return;const ft=Qe.startValue||0,_t=ie.time||0,It=Qe.targetValue-ft;lt=It===0?_t>=Qe.targetValue?1:0:Math.max(0,(_t-ft)/It)}else if(Qe.targetType==="reps"){if(!Qe.targetReps)return;const ft=Qe.startReps||0,_t=ie.reps||0,It=Qe.targetReps-ft;lt=It===0?_t>=Qe.targetReps?1:0:Math.max(0,(_t-ft)/It)}else if(Qe.targetType==="distance"){if(!Qe.targetDistance)return;const ft=Qe.startDistance||0,_t=ie.distance||0,It=Qe.targetDistance-ft;lt=It===0?_t>=Qe.targetDistance?1:0:Math.max(0,(_t-ft)/It)}else{if(!Qe.targetWeight&&!Qe.targetReps)return;const ft=(Qe.startWeight||0)*(Qe.startReps||0),_t=(Qe.targetWeight||0)*(Qe.targetReps||0),It=(ie.weight||0)*(ie.reps||0),ln=_t-ft;lt=ln===0?It>=_t?1:0:Math.max(0,(It-ft)/ln)}if(lt>=1){let ft,_t;Qe.targetType==="time"?(ft=Le.some(It=>It.type==="strength"&&It.key===nt.key&&It.targetValue===Qe.targetValue),_t=`${nt.name} ${Qe.targetValue}s`):Qe.targetType==="reps"?(ft=Le.some(It=>It.type==="strength"&&It.key===nt.key&&It.targetReps===Qe.targetReps),_t=`${nt.name} ${Qe.targetReps} reps`):Qe.targetType==="distance"?(ft=Le.some(It=>It.type==="strength"&&It.key===nt.key&&It.targetDistance===Qe.targetDistance),_t=`${nt.name} ${Qe.targetDistance}cm`):(ft=Le.some(It=>It.type==="strength"&&It.key===nt.key&&It.targetWeight===Qe.targetWeight&&It.targetReps===Qe.targetReps),_t=`${nt.name} ${Qe.targetWeight}kg  ${Qe.targetReps}`),ft||st.push({type:"strength",key:nt.key,...Qe.targetType==="time"?{targetType:"time",targetValue:Qe.targetValue}:Qe.targetType==="reps"?{targetType:"reps",targetReps:Qe.targetReps}:Qe.targetType==="distance"?{targetType:"distance",targetDistance:Qe.targetDistance}:{targetWeight:Qe.targetWeight,targetReps:Qe.targetReps},achievedMonth:jt,label:_t})}}):Xl.forEach(nt=>{const Qe=Re[nt.key];if(!Qe||!Qe.targetValue)return;const ie=Xe[nt.key];if(ie==null)return;const lt=Qe.startValue||0,ft=Qe.targetValue,_t=ft-lt;(_t===0?ie===ft?1:0:Math.max(0,(ie-lt)/_t))>=1&&(Le.some(Nn=>Nn.type==="metric"&&Nn.key===nt.key&&Nn.targetValue===ft)||st.push({type:"metric",key:nt.key,targetValue:ft,achievedMonth:jt,label:`${nt.name} ${ft}${nt.suffix}`}))}),st.length>0){const nt=[...Le,...st];await Cs(Mt(Je,"juniorAchievements",Ke.id),{clientId:Ke.id,badges:nt,updatedAt:Et.now()}),Oe(nt),be(st),setTimeout(()=>be(null),5e3)}},mt=(pe,Xe)=>{if(pe==="strength"){const st=X[Xe];if(!st)return!1;switch(ni.find(Qe=>Qe.key===Xe)?.unit){case"time":return Le.some(Qe=>Qe.type==="strength"&&Qe.key===Xe&&Qe.targetValue===st.targetValue);case"reps":return Le.some(Qe=>Qe.type==="strength"&&Qe.key===Xe&&Qe.targetReps===st.targetReps);case"distance":return Le.some(Qe=>Qe.type==="strength"&&Qe.key===Xe&&Qe.targetDistance===st.targetDistance);default:return!st.targetWeight&&!st.targetReps?!1:Le.some(Qe=>Qe.type==="strength"&&Qe.key===Xe&&Qe.targetWeight===st.targetWeight&&Qe.targetReps===st.targetReps)}}else{const st=Re[Xe];return!st||!st.targetValue?!1:Le.some(nt=>nt.type==="metric"&&nt.key===Xe&&nt.targetValue===st.targetValue)}},Ht=async()=>{h(!0);try{const pe=`${Ke.id}_${jt}`,Xe=te||{};await Cs(Mt(Je,"juniorPBs",pe),{clientId:Ke.id,month:jt,benchmarks:P,bodyMetrics:Xe.bodyMetrics||$||{},createdAt:Xe.createdAt||Et.now(),updatedAt:Et.now()}),await Rt("strength",P),Ye("Benchmarks saved!","success"),S(!1),await Ot()}catch(pe){console.error("Error saving benchmarks:",pe),Ye("Failed to save. Please try again.","error")}h(!1)},Zt=async()=>{h(!0);try{const pe=`${Ke.id}_${jt}`,Xe=te||{};await Cs(Mt(Je,"juniorPBs",pe),{clientId:Ke.id,month:jt,benchmarks:Xe.benchmarks||P||{},bodyMetrics:$,createdAt:Xe.createdAt||Et.now(),updatedAt:Et.now()}),await Rt("metric",$),Ye("Body metrics saved!","success"),F(!1),await Ot()}catch(pe){console.error("Error saving metrics:",pe),Ye("Failed to save. Please try again.","error")}h(!1)},Qt=(pe,Xe,st)=>{ee(nt=>({...nt,[pe]:{...nt[pe],[Xe]:st===""?"":parseFloat(st)}}))},ze=(pe,Xe)=>{le(st=>({...st,[pe]:Xe===""?"":parseFloat(Xe)}))},Ze=(pe,Xe,st)=>{z(nt=>({...nt,[pe]:{...nt[pe],[Xe]:st===""?"":parseFloat(st)}}))},gt=async()=>{h(!0);try{const pe=`targets_${Ke.id}`,Xe=te?.benchmarks||{},st={};ni.forEach(nt=>{const Qe=Xe[nt.key];switch(nt.unit){case"time":O[nt.key]?.targetValue&&(st[nt.key]={targetType:"time",targetValue:O[nt.key].targetValue,startValue:Qe?.time||0});break;case"reps":O[nt.key]?.targetReps&&(st[nt.key]={targetType:"reps",targetReps:O[nt.key].targetReps,startReps:Qe?.reps||0});break;case"distance":O[nt.key]?.targetDistance&&(st[nt.key]={targetType:"distance",targetDistance:O[nt.key].targetDistance,startDistance:Qe?.distance||0});break;default:(O[nt.key]?.targetWeight||O[nt.key]?.targetReps)&&(st[nt.key]={targetWeight:O[nt.key].targetWeight||0,targetReps:O[nt.key].targetReps||0,startWeight:Qe?.weight||0,startReps:Qe?.reps||0})}}),await Cs(Mt(Je,"juniorPBTargets",pe),{clientId:Ke.id,targets:st,metricTargets:Re,updatedAt:Et.now()}),Te(st),z(st),Ye("Targets saved!","success"),V(!1)}catch(pe){console.error("Error saving targets:",pe),Ye("Failed to save targets.","error")}h(!1)},Lt=(pe,Xe)=>{H(st=>({...st,[pe]:{...st[pe],targetValue:Xe===""?"":parseFloat(Xe)}}))},Bt=async()=>{h(!0);try{const pe=`targets_${Ke.id}`,Xe={};Xl.forEach(st=>{if(se[st.key]?.targetValue){const nt=te?.bodyMetrics?.[st.key]||0;Xe[st.key]={targetValue:se[st.key].targetValue,startValue:nt}}}),await Cs(Mt(Je,"juniorPBTargets",pe),{clientId:Ke.id,targets:X,metricTargets:Xe,updatedAt:Et.now()}),B(Xe),H(Xe),Ye("Metric targets saved!","success"),G(!1)}catch(pe){console.error("Error saving metric targets:",pe),Ye("Failed to save targets.","error")}h(!1)},Ct=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){h(!0);try{const pe=Mt(Je,"juniorPBTargets",`targets_${Ke.id}`);await xa(pe),Te({}),B({}),z({}),H({}),Ye("All goals have been reset","success")}catch(pe){console.error("Error resetting targets:",pe),Ye("Failed to reset goals","error")}h(!1)}},Dt=(pe,Xe)=>{const st=X[pe];if(!st||!Xe)return null;if(st.targetType==="time"){if(!st.targetValue)return null;const ft=st.startValue||0,_t=st.targetValue,It=Xe.time||0,ln=_t-ft;return ln<=0?It>=_t?1:0:Math.max(0,Math.min((It-ft)/ln,1))}if(st.targetType==="reps"){if(!st.targetReps)return null;const ft=st.startReps||0,_t=st.targetReps,It=Xe.reps||0,ln=_t-ft;return ln<=0?It>=_t?1:0:Math.max(0,Math.min((It-ft)/ln,1))}if(st.targetType==="distance"){if(!st.targetDistance)return null;const ft=st.startDistance||0,_t=st.targetDistance,It=Xe.distance||0,ln=_t-ft;return ln<=0?It>=_t?1:0:Math.max(0,Math.min((It-ft)/ln,1))}if(!st.targetWeight&&!st.targetReps)return null;const nt=(st.startWeight||0)*(st.startReps||0),Qe=(st.targetWeight||0)*(st.targetReps||0),ie=(Xe.weight||0)*(Xe.reps||0),lt=Qe-nt;return lt<=0?ie>=Qe?1:0:Math.max(0,Math.min((ie-nt)/lt,1))},St=pe=>{const Xe=Re[pe];if(!Xe||!Xe.targetValue)return null;const st=te?.bodyMetrics?.[pe];if(st==null)return null;const nt=Xe.startValue||0,Qe=Xe.targetValue,ie=Qe-nt;return ie===0?st===Qe?1:0:Math.max(0,Math.min((st-nt)/ie,1))},wt=pe=>{ue.current=pe.touches[0].clientX,xe.current=0},Kt=pe=>{xe.current=pe.touches[0].clientX-ue.current},bn=()=>{xe.current<-50?ot(m+1):xe.current>50&&ot(m-1),xe.current=0},un=pe=>{const Xe=te?.bodyMetrics?.[pe],st=kt?.bodyMetrics?.[pe];return Xe==null||st==null?null:parseFloat((Xe-st).toFixed(2))},Pn=t.find(pe=>pe.month===we),fs=t.find(pe=>pe.month===je);if(ve||o)return n.jsxs("div",{className:"pb-page",children:[n.jsx("header",{className:"client-header",children:n.jsx("div",{className:"header-content",children:n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),n.jsxs("main",{className:"pb-main",children:[n.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),n.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Ue||!_e||!Ke)return null;const rn=ni[m],Bn=te?.benchmarks?.[rn.key],ss=kt?.benchmarks?.[rn.key],Gn=$c(rn,Bn),xr=$c(rn,ss),as=Rg(Gn,xr),ls=Dt(rn.key,Bn),bs=ls!==null,ur=ls!==null&&ls>=1,Vs=bs?Math.round(ls*60):Gn>0?15:0,ms=X[rn.key],sr=pe=>pe?pe.targetType==="time"?`${pe.startValue||0}s  ${pe.targetValue}s`:pe.targetType==="reps"?`${pe.startReps||0}  ${pe.targetReps} reps`:pe.targetType==="distance"?`${pe.startDistance||0}  ${pe.targetDistance}cm`:`${pe.startWeight||0}kg${pe.startReps||0}  ${pe.targetWeight}kg${pe.targetReps}`:null;return n.jsxs("div",{className:"pb-page",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>ht("/client"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})]})}),n.jsxs("main",{className:"pb-main page-transition-enter",children:[n.jsxs("div",{className:"pb-intro",children:[n.jsx("h2",{children:"Junior Strength Tests"}),n.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),n.jsxs("div",{className:"pb-tabs",children:[n.jsx("button",{className:`pb-tab ${r==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),n.jsx("button",{className:`pb-tab ${r==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),n.jsx("button",{className:`pb-tab ${r==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),r==="bests"&&n.jsxs("div",{className:"pb-strength-section",children:[!k&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"pb-carousel",ref:Ee,onTouchStart:wt,onTouchMove:Kt,onTouchEnd:bn,children:[n.jsx("div",{className:`pb-ring-container slide-from-${Fe.current}`,children:n.jsxs("div",{className:"pb-ring",children:[n.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((pe,Xe)=>{const st=(Xe*6-90)*(Math.PI/180),nt=85,Qe=96,ie=100+nt*Math.cos(st),lt=100+nt*Math.sin(st),ft=100+Qe*Math.cos(st),_t=100+Qe*Math.sin(st),It=Xe<Math.round(Vs);return n.jsx("line",{x1:ie,y1:lt,x2:ft,y2:_t,className:`pb-ring-tick ${It?ur?"hit":"filled":"empty"}`,strokeWidth:Xe%5===0?"3":"2"},Xe)})}),n.jsxs("div",{className:"pb-ring-center",children:[n.jsx("div",{className:"pb-ring-category",children:rn.category}),n.jsxs("div",{className:"pb-ring-exercise",children:[rn.name,mt("strength",rn.key)&&n.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),n.jsx("div",{className:"pb-ring-value",children:Bn?wf(rn,Bn):"-"}),as!==null&&n.jsxs("div",{className:`pb-ring-change ${as>=0?"positive":"negative"}`,children:[as>=0?"+":"",as.toFixed(1),"%"]}),as===null&&Bn&&n.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),ms&&n.jsx("div",{className:`pb-ring-target ${ur?"hit":""}`,children:ur?"Target hit!":sr(ms)}),!ms&&n.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},m),n.jsx("div",{className:"pb-carousel-dots",children:ni.map((pe,Xe)=>n.jsx("button",{className:`pb-dot ${Xe===m?"active":""}`,onClick:()=>ot(Xe)},Xe))}),n.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>ot(m-1),disabled:m===0,children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),n.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>ot(m+1),disabled:m===ni.length-1,children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),n.jsxs("div",{className:"pb-trend-section",children:[n.jsx("h4",{children:"Trend"}),n.jsx(YD,{data:t,exerciseKey:rn.key,unit:rn.unit})]})]}),!k&&!L&&n.jsxs("div",{className:"pb-action-buttons",children:[n.jsx("button",{className:"pb-edit-btn",onClick:()=>S(!0),children:te?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),n.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>V(!0),children:Object.keys(X).length>0?"Edit Targets":"Set Targets"}),(Object.keys(X).length>0||Object.keys(Re).length>0)&&n.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ct,disabled:u,children:"Reset All Goals"})]}),k&&n.jsxs("div",{className:"pb-edit-card",children:[n.jsxs("div",{className:"pb-edit-header",children:[n.jsxs("h3",{children:["Benchmarks - ",si(jt)]}),n.jsx("button",{className:"pb-edit-close",onClick:()=>{S(!1),ee(te?.benchmarks||{})},children:""})]}),n.jsx("div",{className:"pb-edit-body",children:ni.map(pe=>n.jsxs("div",{className:"pb-edit-exercise",children:[n.jsx("div",{className:"pb-edit-exercise-name",children:pe.name}),pe.unit==="weight"?n.jsxs("div",{className:"pb-edit-row",children:[n.jsxs("div",{className:"pb-edit-field",children:[n.jsx("label",{children:"Weight (kg)"}),n.jsx("input",{type:"number",step:"0.5",value:P[pe.key]?.weight??"",onChange:Xe=>Qt(pe.key,"weight",Xe.target.value),placeholder:"0"})]}),n.jsxs("div",{className:"pb-edit-field",children:[n.jsx("label",{children:"Reps"}),n.jsx("input",{type:"number",value:P[pe.key]?.reps??"",onChange:Xe=>Qt(pe.key,"reps",Xe.target.value),placeholder:"0"})]})]}):pe.unit==="reps"?n.jsx("div",{className:"pb-edit-row",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsx("label",{children:"Reps (max in 1 min)"}),n.jsx("input",{type:"number",value:P[pe.key]?.reps??"",onChange:Xe=>Qt(pe.key,"reps",Xe.target.value),placeholder:"0"})]})}):pe.unit==="distance"?n.jsx("div",{className:"pb-edit-row",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsx("label",{children:"Distance (cm)"}),n.jsx("input",{type:"number",step:"0.5",value:P[pe.key]?.distance??"",onChange:Xe=>Qt(pe.key,"distance",Xe.target.value),placeholder:"0"})]})}):n.jsx("div",{className:"pb-edit-row",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsx("label",{children:"Time (seconds)"}),n.jsx("input",{type:"number",step:"0.01",value:P[pe.key]?.time??"",onChange:Xe=>Qt(pe.key,"time",Xe.target.value),placeholder:"0"})]})})]},pe.key))}),n.jsxs("div",{className:"pb-edit-actions",children:[n.jsx("button",{className:"pb-cancel-btn",onClick:()=>{S(!1),ee(te?.benchmarks||{})},children:"Cancel"}),n.jsx("button",{className:"pb-save-btn",onClick:Ht,disabled:u,children:u?"Saving...":"Save"})]})]}),L&&n.jsxs("div",{className:"pb-edit-card",children:[n.jsxs("div",{className:"pb-edit-header",children:[n.jsx("h3",{children:"Set Your Targets"}),n.jsx("button",{className:"pb-edit-close",onClick:()=>{V(!1),z(X)},children:""})]}),n.jsxs("div",{className:"pb-edit-body",children:[n.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),ni.map(pe=>{const Xe=te?.benchmarks?.[pe.key];let st="-";if(Xe)switch(pe.unit){case"weight":(Xe.weight||Xe.reps)&&(st=`${Xe.weight||0}kg  ${Xe.reps||0}`);break;case"time":Xe.time&&(st=`${Xe.time}s`);break;case"reps":Xe.reps&&(st=`${Xe.reps} reps`);break;case"distance":Xe.distance&&(st=`${Xe.distance} cm`);break}return n.jsxs("div",{className:"pb-edit-exercise",children:[n.jsxs("div",{className:"pb-edit-exercise-header",children:[n.jsx("div",{className:"pb-edit-exercise-name",children:pe.name}),n.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",st]})]}),pe.unit==="weight"?n.jsxs("div",{className:"pb-edit-row",children:[n.jsxs("div",{className:"pb-edit-field",children:[n.jsx("label",{children:"Target Weight (kg)"}),n.jsx("input",{type:"number",step:"0.5",value:O[pe.key]?.targetWeight??"",onChange:nt=>Ze(pe.key,"targetWeight",nt.target.value),placeholder:"0"})]}),n.jsxs("div",{className:"pb-edit-field",children:[n.jsx("label",{children:"Target Reps"}),n.jsx("input",{type:"number",value:O[pe.key]?.targetReps??"",onChange:nt=>Ze(pe.key,"targetReps",nt.target.value),placeholder:"0"})]})]}):pe.unit==="reps"?n.jsx("div",{className:"pb-edit-row",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsx("label",{children:"Target Reps (in 1 min)"}),n.jsx("input",{type:"number",value:O[pe.key]?.targetReps??"",onChange:nt=>Ze(pe.key,"targetReps",nt.target.value),placeholder:"0"})]})}):pe.unit==="distance"?n.jsx("div",{className:"pb-edit-row",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsx("label",{children:"Target Distance (cm)"}),n.jsx("input",{type:"number",step:"0.5",value:O[pe.key]?.targetDistance??"",onChange:nt=>Ze(pe.key,"targetDistance",nt.target.value),placeholder:"0"})]})}):n.jsx("div",{className:"pb-edit-row",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsx("label",{children:"Target (seconds)"}),n.jsx("input",{type:"number",step:"1",value:O[pe.key]?.targetValue??"",onChange:nt=>Ze(pe.key,"targetValue",nt.target.value),placeholder:"0"})]})})]},pe.key)})]}),n.jsxs("div",{className:"pb-edit-actions",children:[n.jsx("button",{className:"pb-cancel-btn",onClick:()=>{V(!1),z(X)},children:"Cancel"}),n.jsx("button",{className:"pb-save-btn",onClick:gt,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),r==="metrics"&&n.jsxs("div",{className:"pb-metrics-section",children:[!E&&!Y&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"pb-metrics-card",children:[n.jsx("h3",{children:"Body Measurements"}),n.jsx("p",{className:"pb-metrics-month",children:si(jt)}),n.jsx("div",{className:"pb-metrics-list",children:Xl.map(pe=>{const Xe=te?.bodyMetrics?.[pe.key],st=un(pe.key),nt=Re[pe.key],Qe=St(pe.key),ie=Qe!==null&&Qe>=1;return n.jsxs("div",{className:"pb-metric-row",children:[n.jsxs("div",{className:"pb-metric-top",children:[n.jsxs("div",{className:"pb-metric-left",children:[n.jsxs("span",{className:"pb-metric-name",children:[pe.name,mt("metric",pe.key)&&n.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),nt&&n.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",nt.targetValue," ",pe.suffix]})]}),n.jsxs("div",{className:"pb-metric-values",children:[n.jsx("span",{className:"pb-metric-current",children:Xe!=null?`${Xe} ${pe.suffix}`:"-"}),st!==null&&n.jsxs("span",{className:`pb-metric-change ${st>0?"up":st<0?"down":"same"}`,children:[st>0?"+":"",st," ",pe.suffix]})]})]}),Qe!==null&&n.jsxs("div",{className:"pb-metric-progress",children:[n.jsx("div",{className:"pb-metric-bar",children:n.jsx("div",{className:`pb-metric-bar-fill ${ie?"hit":""}`,style:{width:`${Math.round(Qe*100)}%`}})}),n.jsx("span",{className:`pb-metric-percent ${ie?"hit":""}`,children:ie?"Hit!":`${Math.round(Qe*100)}%`})]})]},pe.key)})})]}),n.jsxs("div",{className:"pb-action-buttons",children:[n.jsx("button",{className:"pb-edit-btn",onClick:()=>F(!0),children:te?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),n.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>G(!0),children:Object.keys(Re).length>0?"Edit Targets":"Set Targets"}),(Object.keys(X).length>0||Object.keys(Re).length>0)&&n.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ct,disabled:u,children:"Reset All Goals"})]})]}),E&&n.jsxs("div",{className:"pb-edit-card",children:[n.jsxs("div",{className:"pb-edit-header",children:[n.jsxs("h3",{children:["Measurements - ",si(jt)]}),n.jsx("button",{className:"pb-edit-close",onClick:()=>{F(!1),le(te?.bodyMetrics||{})},children:""})]}),n.jsx("div",{className:"pb-edit-body",children:Xl.map(pe=>n.jsx("div",{className:"pb-edit-metric",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsxs("label",{children:[pe.name," (",pe.suffix,")"]}),n.jsx("input",{type:"number",step:"0.1",value:$[pe.key]??"",onChange:Xe=>ze(pe.key,Xe.target.value),placeholder:"0"})]})},pe.key))}),n.jsxs("div",{className:"pb-edit-actions",children:[n.jsx("button",{className:"pb-cancel-btn",onClick:()=>{F(!1),le(te?.bodyMetrics||{})},children:"Cancel"}),n.jsx("button",{className:"pb-save-btn",onClick:Zt,disabled:u,children:u?"Saving...":"Save"})]})]}),Y&&n.jsxs("div",{className:"pb-edit-card",children:[n.jsxs("div",{className:"pb-edit-header",children:[n.jsx("h3",{children:"Body Metric Targets"}),n.jsx("button",{className:"pb-edit-close",onClick:()=>{G(!1),H(Re)},children:""})]}),n.jsxs("div",{className:"pb-edit-body",children:[n.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),Xl.map(pe=>{const Xe=te?.bodyMetrics?.[pe.key];return n.jsxs("div",{className:"pb-edit-exercise",children:[n.jsxs("div",{className:"pb-edit-exercise-header",children:[n.jsx("div",{className:"pb-edit-exercise-name",children:pe.name}),n.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",Xe!=null?`${Xe} ${pe.suffix}`:"-"]})]}),n.jsx("div",{className:"pb-edit-row",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsxs("label",{children:["Target (",pe.suffix,")"]}),n.jsx("input",{type:"number",step:"0.1",value:se[pe.key]?.targetValue??"",onChange:st=>Lt(pe.key,st.target.value),placeholder:"0"})]})})]},pe.key)})]}),n.jsxs("div",{className:"pb-edit-actions",children:[n.jsx("button",{className:"pb-cancel-btn",onClick:()=>{G(!1),H(Re)},children:"Cancel"}),n.jsx("button",{className:"pb-save-btn",onClick:Bt,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),r==="history"&&n.jsx("div",{className:"pb-history-section",children:t.length===0?n.jsxs("div",{className:"pb-empty",children:[n.jsx("h4",{children:"No records yet"}),n.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):n.jsxs(n.Fragment,{children:[Le.length>0&&n.jsxs("div",{className:"pb-achievements-wall",children:[n.jsxs("h4",{className:"pb-achievements-wall-title",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),n.jsx("div",{className:"pb-achievements-list",children:[...Le].reverse().map((pe,Xe)=>n.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${Xe*.05}s`},children:[n.jsx("div",{className:"pb-achievement-star",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),n.jsxs("div",{className:"pb-achievement-info",children:[n.jsx("span",{className:"pb-achievement-label",children:pe.label}),n.jsx("span",{className:"pb-achievement-date",children:si(pe.achievedMonth)})]})]},Xe))})]}),n.jsx("div",{className:"pb-history-controls",children:n.jsx("button",{className:`pb-compare-toggle ${He?"active":""}`,onClick:()=>{Q(!He),!He&&t.length>=2&&(Ne(t[0].month),ce(t[t.length-1].month))},children:He?"Back to Timeline":"Compare Months"})}),He?n.jsxs("div",{className:"pb-compare",children:[n.jsxs("div",{className:"pb-compare-selectors",children:[n.jsxs("div",{className:"pb-compare-select",children:[n.jsx("label",{children:"From"}),n.jsx("select",{value:we,onChange:pe=>Ne(pe.target.value),children:t.map(pe=>n.jsx("option",{value:pe.month,children:si(pe.month)},pe.month))})]}),n.jsx("div",{className:"pb-compare-vs",children:"vs"}),n.jsxs("div",{className:"pb-compare-select",children:[n.jsx("label",{children:"To"}),n.jsx("select",{value:je,onChange:pe=>ce(pe.target.value),children:t.map(pe=>n.jsx("option",{value:pe.month,children:si(pe.month)},pe.month))})]})]}),Pn&&fs&&n.jsxs("div",{className:"pb-compare-results",children:[n.jsxs("div",{className:"pb-compare-group",children:[n.jsx("h4",{children:"Strength Tests"}),n.jsxs("div",{className:"pb-compare-table",children:[n.jsxs("div",{className:"pb-compare-header-row",children:[n.jsx("span",{children:"Exercise"}),n.jsx("span",{children:si(we).split(" ")[0]}),n.jsx("span",{children:si(je).split(" ")[0]}),n.jsx("span",{children:"Change"})]}),ni.map(pe=>{const Xe=Pn.benchmarks?.[pe.key],st=fs.benchmarks?.[pe.key],nt=$c(pe,Xe),Qe=$c(pe,st),ie=Rg(Qe,nt);return n.jsxs("div",{className:"pb-compare-row",children:[n.jsx("span",{className:"pb-compare-name",children:pe.name}),n.jsx("span",{className:"pb-compare-val",children:Xe?wf(pe,Xe):"-"}),n.jsx("span",{className:"pb-compare-val",children:st?wf(pe,st):"-"}),n.jsx("span",{className:`pb-compare-change ${ie!==null?ie>=0?"positive":"negative":""}`,children:ie!==null?`${ie>=0?"+":""}${ie.toFixed(1)}%`:"-"})]},pe.key)})]})]}),n.jsxs("div",{className:"pb-compare-group",children:[n.jsx("h4",{children:"Body Measurements"}),n.jsxs("div",{className:"pb-compare-table",children:[n.jsxs("div",{className:"pb-compare-header-row",children:[n.jsx("span",{children:"Measurement"}),n.jsx("span",{children:si(we).split(" ")[0]}),n.jsx("span",{children:si(je).split(" ")[0]}),n.jsx("span",{children:"Change"})]}),Xl.map(pe=>{const Xe=Pn.bodyMetrics?.[pe.key],st=fs.bodyMetrics?.[pe.key],nt=Xe!=null&&st!=null?parseFloat((st-Xe).toFixed(2)):null;return n.jsxs("div",{className:"pb-compare-row",children:[n.jsx("span",{className:"pb-compare-name",children:pe.name}),n.jsx("span",{className:"pb-compare-val",children:Xe!=null?`${Xe}`:"-"}),n.jsx("span",{className:"pb-compare-val",children:st!=null?`${st}`:"-"}),n.jsx("span",{className:`pb-compare-change ${nt!==null?nt>0?"positive":nt<0?"negative":"neutral":""}`,children:nt!==null?`${nt>0?"+":""}${nt} ${pe.suffix}`:"-"})]},pe.key)})]})]})]})]}):n.jsx("div",{className:"pb-timeline",children:[...t].reverse().map((pe,Xe)=>{const st=t.filter(nt=>nt.month<pe.month).pop();return n.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${Xe*.05}s`},children:[n.jsx("div",{className:"pb-timeline-dot"}),n.jsxs("div",{className:"pb-timeline-card",children:[n.jsx("h4",{children:si(pe.month)}),pe.benchmarks&&Object.keys(pe.benchmarks).length>0&&n.jsxs("div",{className:"pb-timeline-group",children:[n.jsx("h5",{children:"Strength Tests"}),ni.map(nt=>{const Qe=pe.benchmarks[nt.key];if(!Qe)return null;const ie=st?.benchmarks?.[nt.key],lt=$c(nt,Qe),ft=$c(nt,ie),_t=Rg(lt,ft);return n.jsxs("div",{className:"pb-timeline-row",children:[n.jsx("span",{className:"pb-timeline-label",children:nt.name}),n.jsxs("div",{className:"pb-timeline-values",children:[n.jsx("span",{className:"pb-timeline-value",children:wf(nt,Qe)}),_t!==null&&n.jsxs("span",{className:`pb-timeline-change ${_t>=0?"positive":"negative"}`,children:[_t>=0?"+":"",_t.toFixed(1),"%"]})]})]},nt.key)})]}),pe.bodyMetrics&&Object.keys(pe.bodyMetrics).length>0&&n.jsxs("div",{className:"pb-timeline-group",children:[n.jsx("h5",{children:"Body Measurements"}),Xl.map(nt=>{const Qe=pe.bodyMetrics[nt.key];if(Qe==null)return null;const ie=st?.bodyMetrics?.[nt.key],lt=ie!=null?parseFloat((Qe-ie).toFixed(2)):null;return n.jsxs("div",{className:"pb-timeline-row",children:[n.jsx("span",{className:"pb-timeline-label",children:nt.name}),n.jsxs("div",{className:"pb-timeline-values",children:[n.jsxs("span",{className:"pb-timeline-value",children:[Qe," ",nt.suffix]}),lt!==null&&n.jsxs("span",{className:`pb-timeline-change ${lt>0?"positive":lt<0?"negative":"neutral"}`,children:[lt>0?"+":"",lt," ",nt.suffix]})]})]},nt.key)})]})]})]},pe.id)})})]})})]}),ne&&n.jsx("div",{className:"pb-celebration-overlay",onClick:()=>be(null),children:n.jsxs("div",{className:"pb-celebration-card",children:[n.jsx("div",{className:"pb-celebration-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),n.jsx("h3",{className:"pb-celebration-title",children:ne.length===1?"Target Achieved!":`${ne.length} Targets Achieved!`}),n.jsx("div",{className:"pb-celebration-badges",children:ne.map((pe,Xe)=>n.jsx("div",{className:"pb-celebration-badge",children:pe.label},Xe))}),n.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),me&&n.jsxs("div",{className:`toast-notification ${me.type}`,children:[n.jsx("span",{className:"toast-icon",children:me.type==="success"?n.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),n.jsx("span",{className:"toast-message",children:me.message}),n.jsx("button",{className:"toast-close",onClick:()=>Ae(null),children:""})]}),n.jsxs("nav",{className:"block-bottom-nav",children:[n.jsxs("button",{className:"block-nav-tab",onClick:()=>ht("/client"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>ht("/client/forms"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),n.jsx("span",{children:"Forms"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>ht("/client/tools"),children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),n.jsx("span",{children:"Tools"})]}),n.jsxs("button",{className:"block-nav-tab active",children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M12 20V10"}),n.jsx("path",{d:"M18 20V4"}),n.jsx("path",{d:"M6 20v-4"})]}),n.jsx("span",{children:"PBs"})]}),Ke?.circuitAccess&&n.jsxs("button",{className:"block-nav-tab",onClick:()=>ht("/client/circuit"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 6v6l4 2"})]}),n.jsx("span",{children:"Circuit"})]})]})]})}function So({active:r}){const e=hs(),{clientData:t}=Bs(),i=t?.clientType==="block"&&t?.coreBuddyAccess;return n.jsxs("nav",{className:"block-bottom-nav",children:[n.jsxs("button",{className:`block-nav-tab${r==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:`block-nav-tab${r==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"})}),n.jsx("span",{children:"Workouts"})]}),n.jsxs("button",{className:`block-nav-tab${r==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),n.jsx("span",{children:"Nutrition"})]}),n.jsxs("button",{className:`block-nav-tab${r==="progress"?" active":""}`,onClick:()=>e("/client/personal-bests?mode=corebuddy"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M12 20V10"}),n.jsx("path",{d:"M18 20V4"}),n.jsx("path",{d:"M6 20v-4"})]}),n.jsx("span",{children:"Progress"})]}),i&&n.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),n.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),n.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),n.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),n.jsx("span",{children:"Block"})]})]})}const Ci=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],Jl=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function XD(){const r=new Date;return`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`}function ri(r){const[e,t]=r.split("-");return new Date(parseInt(e),parseInt(t)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function jf(r){if(!r&&r!==0)return"-";const e=Math.floor(r/60),t=(r%60).toFixed(2);return e>0?`${e}m ${parseFloat(t).toFixed(0)}s`:`${parseFloat(t).toFixed(2)}s`}function j2(r,e){return!r&&r!==0?"-":!e&&e!==0?`${r}kg`:`${r}kg x ${e}`}function Gc(r,e){return e?r.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Mg(r,e){return!e||e===0?null:(r-e)/e*100}function JD({data:r,exerciseKey:e,unit:t}){if(!r||r.length<2)return n.jsx("div",{className:"pb-trend-empty",children:n.jsx("p",{children:"Not enough data for trend line yet"})});const i=r.map(V=>{const P=V.benchmarks?.[e];return P?t==="time"?P.time||0:(P.weight||0)*(P.reps||0):0}),o=Math.max(...i),c=Math.min(...i),u=o-c||1,h=300,m=100,b=20,k=h-b*2,S=m-b*2,E=i.map((V,P)=>{const ee=b+P/(i.length-1)*k,$=b+S-(V-c)/u*S;return{x:ee,y:$,value:V}}),F=E.map((V,P)=>`${P===0?"M":"L"} ${V.x} ${V.y}`).join(" "),L=F+` L ${E[E.length-1].x} ${b+S} L ${E[0].x} ${b+S} Z`;return n.jsxs("div",{className:"pb-trend-chart",children:[n.jsxs("svg",{viewBox:`0 0 ${h} ${m}`,preserveAspectRatio:"xMidYMid meet",children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),n.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),n.jsx("path",{d:L,fill:"url(#trendGradient)"}),n.jsx("path",{d:F,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),E.map((V,P)=>n.jsx("circle",{cx:V.x,cy:V.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},P))]}),n.jsx("div",{className:"pb-trend-labels",children:r.map((V,P)=>n.jsxs("span",{className:"pb-trend-label",children:[V.month.split("-")[1],"/",V.month.split("-")[0].slice(2)]},P))})]})}function ZD(){const[r,e]=C.useState("bests"),[t,i]=C.useState([]),[o,c]=C.useState(!0),[u,h]=C.useState(!1),[m,b]=C.useState(0),[k,S]=C.useState(!1),[E,F]=C.useState(!1),[L,V]=C.useState(!1),[P,ee]=C.useState({}),[$,le]=C.useState({}),[X,Te]=C.useState({}),[Re,B]=C.useState({}),[O,z]=C.useState({}),[Y,G]=C.useState(!1),[se,H]=C.useState({}),[Le,Oe]=C.useState([]),[ne,be]=C.useState(null),[me,Ae]=C.useState(null),[He,Q]=C.useState(!1),[we,Ne]=C.useState(""),[je,ce]=C.useState(""),[Ee,ue]=C.useState({}),[xe,Fe]=C.useState({}),[ot,Ue]=C.useState(null),[_e,Ke]=C.useState(null),[ve,bt]=C.useState(""),ht=C.useRef(null),Ye=C.useRef(0),Ot=C.useRef(0),jt=C.useRef("right"),te=C.useCallback(U=>{b(re=>{const ae=Math.max(0,Math.min(Ci.length-1,U));return ae===re?re:(jt.current=ae>re?"right":"left",ae)})},[]),{currentUser:it,isClient:kt,clientData:Rt,loading:mt}=Bs(),{isDark:Ht}=ja(),Zt=hs(),[Qt]=FS(),ze=Qt.get("mode")==="corebuddy",Ze=!ze&&(!Rt?.clientType||Rt.clientType==="block"),gt=C.useCallback((U,re="info")=>{Ae({message:U,type:re}),setTimeout(()=>Ae(null),4e3)},[]);C.useEffect(()=>{!mt&&(!it||!kt)&&Zt("/")},[it,kt,mt,Zt]),C.useEffect(()=>{Rt&&(Ze?Lt():(async()=>{try{const[re,ae,ke]=await Promise.all([vs(Mt(Je,"coreBuddyPBs",Rt.id)),vs(Mt(Je,"coreBuddyTargets",Rt.id)),vs(Mt(Je,"coreBuddyAchievements",Rt.id))]);re.exists()&&ue(re.data().exercises||{}),ae.exists()&&Fe(ae.data().targets||{}),ke.exists()&&Ue(ke.data())}catch(re){console.error("Error loading Core Buddy PBs:",re)}c(!1)})())},[Rt]);const Lt=async()=>{try{const U=ds(en(Je,"personalBests"),Hn("clientId","==",Rt.id)),ae=(await yn(U)).docs.map(Nt=>({id:Nt.id,...Nt.data()}));ae.sort((Nt,Ft)=>Nt.month.localeCompare(Ft.month)),i(ae);const ke=ds(en(Je,"personalBestTargets"),Hn("clientId","==",Rt.id)),tt=await yn(ke);if(!tt.empty){const Nt=tt.docs[0].data();Te(Nt.targets||{}),B(Nt.metricTargets||{}),z(Nt.targets||{}),H(Nt.metricTargets||{})}const $e=ds(en(Je,"achievements"),Hn("clientId","==",Rt.id)),zt=await yn($e);zt.empty||Oe(zt.docs[0].data().badges||[])}catch(U){console.error("Error fetching personal bests:",U)}c(!1)},Bt=async()=>{if(!_e||!ve||!Rt)return;const U=parseFloat(ve),re=Ee[_e];if(!re||U<=re.weight){gt("Target must be higher than current PB","error");return}h(!0);try{const ae={...xe,[_e]:{targetWeight:U,setAt:Et.now(),currentPBWhenSet:re.weight}};await Cs(Mt(Je,"coreBuddyTargets",Rt.id),{clientId:Rt.id,targets:ae,updatedAt:Et.now()}),Fe(ae),Ke(null),bt(""),gt("Target set!","success")}catch(ae){console.error("Error saving target:",ae),gt("Failed to save target","error")}h(!1)},Ct=U=>{if(!ot?.badges)return!1;const re=xe[U];return re?ot.badges.some(ae=>ae.type==="pb_target"&&ae.exercise===U&&ae.targetWeight===re.targetWeight):!1},Dt=U=>{const re=xe[U];if(!re)return null;const ae=Ee[U];if(!ae)return 0;const ke=re.currentPBWhenSet||0,tt=re.targetWeight,$e=tt-ke;return $e<=0?ae.weight>=tt?1:0:Math.max(0,Math.min((ae.weight-ke)/$e,1))},St=XD(),wt=t.find(U=>U.month===St),Kt=t.filter(U=>U.month<St),bn=Kt.length>0?Kt[Kt.length-1]:null;C.useEffect(()=>{wt?(ee(wt.benchmarks||{}),le(wt.bodyMetrics||{})):(ee({}),le({}))},[wt?.id]);const un=async(U,re)=>{const ae=[];if(U==="strength"?Ci.forEach(ke=>{const tt=X[ke.key];if(!tt)return;const $e=re[ke.key];if(!$e)return;let zt;if(tt.targetType==="time"){if(!tt.targetValue)return;const Nt=tt.startValue||0,Ft=$e.time||0,he=tt.targetValue-Nt;zt=he===0?Ft>=tt.targetValue?1:0:Math.max(0,(Ft-Nt)/he)}else{if(!tt.targetWeight&&!tt.targetReps)return;const Nt=(tt.startWeight||0)*(tt.startReps||0),Ft=(tt.targetWeight||0)*(tt.targetReps||0),he=($e.weight||0)*($e.reps||0),De=Ft-Nt;zt=De===0?he>=Ft?1:0:Math.max(0,(he-Nt)/De)}if(zt>=1&&!(tt.targetType==="time"?Le.some(Ft=>Ft.type==="strength"&&Ft.key===ke.key&&Ft.targetValue===tt.targetValue):Le.some(Ft=>Ft.type==="strength"&&Ft.key===ke.key&&Ft.targetWeight===tt.targetWeight&&Ft.targetReps===tt.targetReps))){const Ft=tt.targetType==="time"?`${ke.name} ${tt.targetValue}s`:`${ke.name} ${tt.targetWeight}kg  ${tt.targetReps}`;ae.push({type:"strength",key:ke.key,...tt.targetType==="time"?{targetType:"time",targetValue:tt.targetValue}:{targetWeight:tt.targetWeight,targetReps:tt.targetReps},achievedMonth:St,label:Ft})}}):Jl.forEach(ke=>{const tt=Re[ke.key];if(!tt||!tt.targetValue)return;const $e=re[ke.key];if($e==null)return;const zt=tt.startValue||0,Nt=tt.targetValue,Ft=Nt-zt;(Ft===0?$e===Nt?1:0:Math.max(0,($e-zt)/Ft))>=1&&(Le.some(Be=>Be.type==="metric"&&Be.key===ke.key&&Be.targetValue===Nt)||ae.push({type:"metric",key:ke.key,targetValue:Nt,achievedMonth:St,label:`${ke.name} ${Nt}${ke.suffix}`}))}),ae.length>0){const ke=[...Le,...ae];await Cs(Mt(Je,"achievements",Rt.id),{clientId:Rt.id,badges:ke,updatedAt:Et.now()}),Oe(ke),be(ae),setTimeout(()=>be(null),5e3)}},Pn=(U,re)=>{if(U==="strength"){const ae=X[re];return ae?ae.targetType==="time"?Le.some(ke=>ke.type==="strength"&&ke.key===re&&ke.targetValue===ae.targetValue):!ae.targetWeight&&!ae.targetReps?!1:Le.some(ke=>ke.type==="strength"&&ke.key===re&&ke.targetWeight===ae.targetWeight&&ke.targetReps===ae.targetReps):!1}else{const ae=Re[re];return!ae||!ae.targetValue?!1:Le.some(ke=>ke.type==="metric"&&ke.key===re&&ke.targetValue===ae.targetValue)}},fs=async()=>{h(!0);try{const U=`${Rt.id}_${St}`,re=wt||{};await Cs(Mt(Je,"personalBests",U),{clientId:Rt.id,month:St,benchmarks:P,bodyMetrics:re.bodyMetrics||$||{},createdAt:re.createdAt||Et.now(),updatedAt:Et.now()}),await un("strength",P),gt("Benchmarks saved!","success"),S(!1),await Lt()}catch(U){console.error("Error saving benchmarks:",U),gt("Failed to save. Please try again.","error")}h(!1)},rn=async()=>{h(!0);try{const U=`${Rt.id}_${St}`,re=wt||{};await Cs(Mt(Je,"personalBests",U),{clientId:Rt.id,month:St,benchmarks:re.benchmarks||P||{},bodyMetrics:$,createdAt:re.createdAt||Et.now(),updatedAt:Et.now()}),await un("metric",$),gt("Body metrics saved!","success"),F(!1),await Lt()}catch(U){console.error("Error saving metrics:",U),gt("Failed to save. Please try again.","error")}h(!1)},Bn=(U,re,ae)=>{ee(ke=>({...ke,[U]:{...ke[U],[re]:ae===""?"":parseFloat(ae)}}))},ss=(U,re)=>{le(ae=>({...ae,[U]:re===""?"":parseFloat(re)}))},Gn=(U,re,ae)=>{z(ke=>({...ke,[U]:{...ke[U],[re]:ae===""?"":parseFloat(ae)}}))},xr=async()=>{h(!0);try{const U=`targets_${Rt.id}`,re=wt?.benchmarks||{},ae={};Ci.forEach(ke=>{const tt=re[ke.key];ke.unit==="time"?O[ke.key]?.targetValue&&(ae[ke.key]={targetType:"time",targetValue:O[ke.key].targetValue,startValue:tt?.time||0}):(O[ke.key]?.targetWeight||O[ke.key]?.targetReps)&&(ae[ke.key]={targetWeight:O[ke.key].targetWeight||0,targetReps:O[ke.key].targetReps||0,startWeight:tt?.weight||0,startReps:tt?.reps||0})}),await Cs(Mt(Je,"personalBestTargets",U),{clientId:Rt.id,targets:ae,metricTargets:Re,updatedAt:Et.now()}),Te(ae),z(ae),gt("Targets saved!","success"),V(!1)}catch(U){console.error("Error saving targets:",U),gt("Failed to save targets.","error")}h(!1)},as=(U,re)=>{H(ae=>({...ae,[U]:{...ae[U],targetValue:re===""?"":parseFloat(re)}}))},ls=async()=>{h(!0);try{const U=`targets_${Rt.id}`,re={};Jl.forEach(ae=>{if(se[ae.key]?.targetValue){const ke=wt?.bodyMetrics?.[ae.key]||0;re[ae.key]={targetValue:se[ae.key].targetValue,startValue:ke}}}),await Cs(Mt(Je,"personalBestTargets",U),{clientId:Rt.id,targets:X,metricTargets:re,updatedAt:Et.now()}),B(re),H(re),gt("Metric targets saved!","success"),G(!1)}catch(U){console.error("Error saving metric targets:",U),gt("Failed to save targets.","error")}h(!1)},bs=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){h(!0);try{const U=Mt(Je,"personalBestTargets",`targets_${Rt.id}`);await xa(U),Te({}),B({}),z({}),H({}),gt("All goals have been reset","success")}catch(U){console.error("Error resetting targets:",U),gt("Failed to reset goals","error")}h(!1)}},ur=(U,re)=>{const ae=X[U];if(!ae||!re)return null;if(ae.targetType==="time"){if(!ae.targetValue)return null;const Nt=ae.startValue||0,Ft=ae.targetValue,he=re.time||0,De=Ft-Nt;return De<=0?he>=Ft?1:0:Math.max(0,Math.min((he-Nt)/De,1))}if(!ae.targetWeight&&!ae.targetReps)return null;const ke=(ae.startWeight||0)*(ae.startReps||0),tt=(ae.targetWeight||0)*(ae.targetReps||0),$e=(re.weight||0)*(re.reps||0),zt=tt-ke;return zt<=0?$e>=tt?1:0:Math.max(0,Math.min(($e-ke)/zt,1))},Vs=U=>{const re=Re[U];if(!re||!re.targetValue)return null;const ae=wt?.bodyMetrics?.[U];if(ae==null)return null;const ke=re.startValue||0,tt=re.targetValue,$e=tt-ke;return $e===0?ae===tt?1:0:Math.max(0,Math.min((ae-ke)/$e,1))},ms=U=>{Ye.current=U.touches[0].clientX,Ot.current=0},sr=U=>{Ot.current=U.touches[0].clientX-Ye.current},pe=()=>{Ot.current<-50?te(m+1):Ot.current>50&&te(m-1),Ot.current=0},Xe=U=>{const re=wt?.bodyMetrics?.[U],ae=bn?.bodyMetrics?.[U];return re==null||ae==null?null:parseFloat((re-ae).toFixed(2))},st=t.find(U=>U.month===we),nt=t.find(U=>U.month===je);if(mt||o)return n.jsxs("div",{className:"pb-page",children:[n.jsx("header",{className:"client-header",children:n.jsx("div",{className:"header-content",children:n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),n.jsxs("main",{className:"pb-main",children:[n.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),n.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!it||!kt||!Rt)return null;if(Ze&&Rt?.isJunior)return n.jsx(QD,{});const Qe=Ci[m],ie=wt?.benchmarks?.[Qe.key],lt=bn?.benchmarks?.[Qe.key],ft=Gc(Qe,ie),_t=Gc(Qe,lt),It=Mg(ft,_t),ln=ur(Qe.key,ie),Nn=ln!==null,Fn=ln!==null&&ln>=1,Ys=Nn?Math.round(ln*60):ft>0?15:0,J=X[Qe.key];return n.jsxs("div",{className:"pb-page",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>Zt(ze?"/client/core-buddy":"/client"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})]})}),n.jsxs("main",{className:"pb-main page-transition-enter",children:[n.jsxs("div",{className:"pb-intro",children:[n.jsx("h2",{children:"Personal Bests"}),n.jsx("p",{children:Ze?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!Ze&&n.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Ee).length===0?n.jsxs("div",{className:"pb-empty",children:[n.jsx("div",{className:"pb-cb-empty-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),n.jsx("h4",{children:"No personal bests yet"}),n.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):n.jsx("div",{className:"pb-cb-grid",children:Object.entries(Ee).sort(([U],[re])=>U.localeCompare(re)).map(([U,re],ae)=>{const ke=xe[U],tt=Dt(U),$e=tt!==null&&tt>=1,zt=Ct(U),Nt=tt!==null?Math.round(tt*60):60;return n.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${ae*.05}s`},children:[n.jsxs("div",{className:"pb-cb-card-ring",children:[n.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:[...Array(60)].map((Ft,he)=>{const De=(he*6-90)*(Math.PI/180),Be=40+30*Math.cos(De),vt=40+30*Math.sin(De),yt=40+37*Math.cos(De),xt=40+37*Math.sin(De),At=he<Nt;return n.jsx("line",{x1:Be,y1:vt,x2:yt,y2:xt,className:`pb-ring-tick ${At?$e?"hit":"filled":"empty"}`,strokeWidth:he%5===0?"2":"1.5"},he)})}),n.jsx("div",{className:"pb-cb-ring-icon",children:zt?n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),n.jsxs("div",{className:"pb-cb-card-info",children:[n.jsx("h4",{className:"pb-cb-card-name",children:U}),n.jsxs("div",{className:"pb-cb-card-value",children:[re.weight,"kg  ",re.reps]}),re.achievedAt&&n.jsx("div",{className:"pb-cb-card-date",children:(re.achievedAt.toDate?re.achievedAt.toDate():new Date(re.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),ke&&!$e&&n.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",ke.targetWeight,"kg (",Math.round((tt||0)*100),"%)"]}),ke&&$e&&!zt&&n.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),zt&&n.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),n.jsx("div",{className:"pb-cb-card-action",children:ke?$e&&zt?n.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{Ke(U),bt("")},children:n.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:n.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{Ke(U),bt("")},children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("circle",{cx:"12",cy:"12",r:"6"}),n.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},U)})}),Object.keys(Ee).length>0&&n.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>Zt("/client/core-buddy/achievements"),children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",n.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})]}),_e&&n.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>Ke(null),children:n.jsxs("div",{className:"pb-cb-target-modal",onClick:U=>U.stopPropagation(),children:[n.jsx("h3",{children:"Set Target"}),n.jsx("p",{className:"pb-cb-target-exercise-name",children:_e}),n.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",n.jsxs("strong",{children:[Ee[_e]?.weight,"kg"]})]}),n.jsxs("div",{className:"pb-cb-target-input-wrap",children:[n.jsx("label",{children:"Your target (kg)"}),n.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:ve,onChange:U=>bt(U.target.value),placeholder:String((Ee[_e]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),n.jsxs("div",{className:"pb-cb-target-actions",children:[n.jsx("button",{className:"pb-cancel-btn",onClick:()=>Ke(null),children:"Cancel"}),n.jsx("button",{className:"pb-save-btn",onClick:Bt,disabled:u,children:u?"Saving...":"Set Target"})]})]})})]}),Ze&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"pb-tabs",children:[n.jsx("button",{className:`pb-tab ${r==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),n.jsx("button",{className:`pb-tab ${r==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),n.jsx("button",{className:`pb-tab ${r==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),r==="bests"&&n.jsxs("div",{className:"pb-strength-section",children:[!k&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"pb-carousel",ref:ht,onTouchStart:ms,onTouchMove:sr,onTouchEnd:pe,children:[n.jsx("div",{className:`pb-ring-container slide-from-${jt.current}`,children:n.jsxs("div",{className:"pb-ring",children:[n.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((U,re)=>{const ae=(re*6-90)*(Math.PI/180),ke=85,tt=96,$e=100+ke*Math.cos(ae),zt=100+ke*Math.sin(ae),Nt=100+tt*Math.cos(ae),Ft=100+tt*Math.sin(ae),he=re<Math.round(Ys);return n.jsx("line",{x1:$e,y1:zt,x2:Nt,y2:Ft,className:`pb-ring-tick ${he?Fn?"hit":"filled":"empty"}`,strokeWidth:re%5===0?"3":"2"},re)})}),n.jsxs("div",{className:"pb-ring-center",children:[n.jsx("div",{className:"pb-ring-category",children:Qe.category}),n.jsxs("div",{className:"pb-ring-exercise",children:[Qe.name,Pn("strength",Qe.key)&&n.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),n.jsx("div",{className:"pb-ring-value",children:ie?Qe.unit==="time"?jf(ie.time):j2(ie.weight,ie.reps):"-"}),It!==null&&n.jsxs("div",{className:`pb-ring-change ${It>=0?"positive":"negative"}`,children:[It>=0?"+":"",It.toFixed(1),"%"]}),It===null&&ie&&n.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),J&&n.jsx("div",{className:`pb-ring-target ${Fn?"hit":""}`,children:Fn?"Target hit!":J.targetType==="time"?`${J.startValue||0}s  ${J.targetValue}s`:`${J.startWeight||0}kg${J.startReps||0}  ${J.targetWeight}kg${J.targetReps}`}),!J&&n.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},m),n.jsx("div",{className:"pb-carousel-dots",children:Ci.map((U,re)=>n.jsx("button",{className:`pb-dot ${re===m?"active":""}`,onClick:()=>te(re)},re))}),n.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>te(m-1),disabled:m===0,children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),n.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>te(m+1),disabled:m===Ci.length-1,children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),n.jsxs("div",{className:"pb-trend-section",children:[n.jsx("h4",{children:"Trend"}),n.jsx(JD,{data:t,exerciseKey:Qe.key,unit:Qe.unit})]})]}),!k&&!L&&n.jsxs("div",{className:"pb-action-buttons",children:[n.jsx("button",{className:"pb-edit-btn",onClick:()=>S(!0),children:wt?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),n.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>V(!0),children:Object.keys(X).length>0?"Edit Targets":"Set Targets"}),(Object.keys(X).length>0||Object.keys(Re).length>0)&&n.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:bs,disabled:u,children:"Reset All Goals"})]}),k&&n.jsxs("div",{className:"pb-edit-card",children:[n.jsxs("div",{className:"pb-edit-header",children:[n.jsxs("h3",{children:["Benchmarks - ",ri(St)]}),n.jsx("button",{className:"pb-edit-close",onClick:()=>{S(!1),ee(wt?.benchmarks||{})},children:""})]}),n.jsx("div",{className:"pb-edit-body",children:Ci.map(U=>n.jsxs("div",{className:"pb-edit-exercise",children:[n.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),U.unit==="weight"?n.jsxs("div",{className:"pb-edit-row",children:[n.jsxs("div",{className:"pb-edit-field",children:[n.jsx("label",{children:"Weight (kg)"}),n.jsx("input",{type:"number",step:"0.5",value:P[U.key]?.weight??"",onChange:re=>Bn(U.key,"weight",re.target.value),placeholder:"0"})]}),n.jsxs("div",{className:"pb-edit-field",children:[n.jsx("label",{children:"Reps"}),n.jsx("input",{type:"number",value:P[U.key]?.reps??"",onChange:re=>Bn(U.key,"reps",re.target.value),placeholder:"0"})]})]}):n.jsx("div",{className:"pb-edit-row",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsx("label",{children:"Time (seconds)"}),n.jsx("input",{type:"number",step:"0.01",value:P[U.key]?.time??"",onChange:re=>Bn(U.key,"time",re.target.value),placeholder:"0"})]})})]},U.key))}),n.jsxs("div",{className:"pb-edit-actions",children:[n.jsx("button",{className:"pb-cancel-btn",onClick:()=>{S(!1),ee(wt?.benchmarks||{})},children:"Cancel"}),n.jsx("button",{className:"pb-save-btn",onClick:fs,disabled:u,children:u?"Saving...":"Save"})]})]}),L&&n.jsxs("div",{className:"pb-edit-card",children:[n.jsxs("div",{className:"pb-edit-header",children:[n.jsx("h3",{children:"Set Your Targets"}),n.jsx("button",{className:"pb-edit-close",onClick:()=>{V(!1),z(X)},children:""})]}),n.jsxs("div",{className:"pb-edit-body",children:[n.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Ci.map(U=>{const re=wt?.benchmarks?.[U.key];let ae="-";return re&&(U.unit==="time"&&re.time?ae=`${re.time}s`:(re.weight||re.reps)&&(ae=`${re.weight||0}kg  ${re.reps||0}`)),n.jsxs("div",{className:"pb-edit-exercise",children:[n.jsxs("div",{className:"pb-edit-exercise-header",children:[n.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),n.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ae]})]}),U.unit==="weight"?n.jsxs("div",{className:"pb-edit-row",children:[n.jsxs("div",{className:"pb-edit-field",children:[n.jsx("label",{children:"Target Weight (kg)"}),n.jsx("input",{type:"number",step:"0.5",value:O[U.key]?.targetWeight??"",onChange:ke=>Gn(U.key,"targetWeight",ke.target.value),placeholder:"0"})]}),n.jsxs("div",{className:"pb-edit-field",children:[n.jsx("label",{children:"Target Reps"}),n.jsx("input",{type:"number",value:O[U.key]?.targetReps??"",onChange:ke=>Gn(U.key,"targetReps",ke.target.value),placeholder:"0"})]})]}):n.jsx("div",{className:"pb-edit-row",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsx("label",{children:"Target (seconds)"}),n.jsx("input",{type:"number",step:"1",value:O[U.key]?.targetValue??"",onChange:ke=>Gn(U.key,"targetValue",ke.target.value),placeholder:"0"})]})})]},U.key)})]}),n.jsxs("div",{className:"pb-edit-actions",children:[n.jsx("button",{className:"pb-cancel-btn",onClick:()=>{V(!1),z(X)},children:"Cancel"}),n.jsx("button",{className:"pb-save-btn",onClick:xr,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),r==="metrics"&&n.jsxs("div",{className:"pb-metrics-section",children:[!E&&!Y&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"pb-metrics-card",children:[n.jsx("h3",{children:"Body Measurements"}),n.jsx("p",{className:"pb-metrics-month",children:ri(St)}),n.jsx("div",{className:"pb-metrics-list",children:Jl.map(U=>{const re=wt?.bodyMetrics?.[U.key],ae=Xe(U.key),ke=Re[U.key],tt=Vs(U.key),$e=tt!==null&&tt>=1;return n.jsxs("div",{className:"pb-metric-row",children:[n.jsxs("div",{className:"pb-metric-top",children:[n.jsxs("div",{className:"pb-metric-left",children:[n.jsxs("span",{className:"pb-metric-name",children:[U.name,Pn("metric",U.key)&&n.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),ke&&n.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",ke.targetValue," ",U.suffix]})]}),n.jsxs("div",{className:"pb-metric-values",children:[n.jsx("span",{className:"pb-metric-current",children:re!=null?`${re} ${U.suffix}`:"-"}),ae!==null&&n.jsxs("span",{className:`pb-metric-change ${ae>0?"up":ae<0?"down":"same"}`,children:[ae>0?"+":"",ae," ",U.suffix]})]})]}),tt!==null&&n.jsxs("div",{className:"pb-metric-progress",children:[n.jsx("div",{className:"pb-metric-bar",children:n.jsx("div",{className:`pb-metric-bar-fill ${$e?"hit":""}`,style:{width:`${Math.round(tt*100)}%`}})}),n.jsx("span",{className:`pb-metric-percent ${$e?"hit":""}`,children:$e?"Hit!":`${Math.round(tt*100)}%`})]})]},U.key)})})]}),n.jsxs("div",{className:"pb-action-buttons",children:[n.jsx("button",{className:"pb-edit-btn",onClick:()=>F(!0),children:wt?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),n.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>G(!0),children:Object.keys(Re).length>0?"Edit Targets":"Set Targets"}),(Object.keys(X).length>0||Object.keys(Re).length>0)&&n.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:bs,disabled:u,children:"Reset All Goals"})]})]}),E&&n.jsxs("div",{className:"pb-edit-card",children:[n.jsxs("div",{className:"pb-edit-header",children:[n.jsxs("h3",{children:["Measurements - ",ri(St)]}),n.jsx("button",{className:"pb-edit-close",onClick:()=>{F(!1),le(wt?.bodyMetrics||{})},children:""})]}),n.jsx("div",{className:"pb-edit-body",children:Jl.map(U=>n.jsx("div",{className:"pb-edit-metric",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsxs("label",{children:[U.name," (",U.suffix,")"]}),n.jsx("input",{type:"number",step:"0.1",value:$[U.key]??"",onChange:re=>ss(U.key,re.target.value),placeholder:"0"})]})},U.key))}),n.jsxs("div",{className:"pb-edit-actions",children:[n.jsx("button",{className:"pb-cancel-btn",onClick:()=>{F(!1),le(wt?.bodyMetrics||{})},children:"Cancel"}),n.jsx("button",{className:"pb-save-btn",onClick:rn,disabled:u,children:u?"Saving...":"Save"})]})]}),Y&&n.jsxs("div",{className:"pb-edit-card",children:[n.jsxs("div",{className:"pb-edit-header",children:[n.jsx("h3",{children:"Body Metric Targets"}),n.jsx("button",{className:"pb-edit-close",onClick:()=>{G(!1),H(Re)},children:""})]}),n.jsxs("div",{className:"pb-edit-body",children:[n.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),Jl.map(U=>{const re=wt?.bodyMetrics?.[U.key];return n.jsxs("div",{className:"pb-edit-exercise",children:[n.jsxs("div",{className:"pb-edit-exercise-header",children:[n.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),n.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",re!=null?`${re} ${U.suffix}`:"-"]})]}),n.jsx("div",{className:"pb-edit-row",children:n.jsxs("div",{className:"pb-edit-field full",children:[n.jsxs("label",{children:["Target (",U.suffix,")"]}),n.jsx("input",{type:"number",step:"0.1",value:se[U.key]?.targetValue??"",onChange:ae=>as(U.key,ae.target.value),placeholder:"0"})]})})]},U.key)})]}),n.jsxs("div",{className:"pb-edit-actions",children:[n.jsx("button",{className:"pb-cancel-btn",onClick:()=>{G(!1),H(Re)},children:"Cancel"}),n.jsx("button",{className:"pb-save-btn",onClick:ls,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),r==="history"&&n.jsx("div",{className:"pb-history-section",children:t.length===0?n.jsxs("div",{className:"pb-empty",children:[n.jsx("h4",{children:"No records yet"}),n.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):n.jsxs(n.Fragment,{children:[Le.length>0&&n.jsxs("div",{className:"pb-achievements-wall",children:[n.jsxs("h4",{className:"pb-achievements-wall-title",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),n.jsx("div",{className:"pb-achievements-list",children:[...Le].reverse().map((U,re)=>n.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${re*.05}s`},children:[n.jsx("div",{className:"pb-achievement-star",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),n.jsxs("div",{className:"pb-achievement-info",children:[n.jsx("span",{className:"pb-achievement-label",children:U.label}),n.jsx("span",{className:"pb-achievement-date",children:ri(U.achievedMonth)})]})]},re))})]}),n.jsx("div",{className:"pb-history-controls",children:n.jsx("button",{className:`pb-compare-toggle ${He?"active":""}`,onClick:()=>{Q(!He),!He&&t.length>=2&&(Ne(t[0].month),ce(t[t.length-1].month))},children:He?"Back to Timeline":"Compare Months"})}),He?n.jsxs("div",{className:"pb-compare",children:[n.jsxs("div",{className:"pb-compare-selectors",children:[n.jsxs("div",{className:"pb-compare-select",children:[n.jsx("label",{children:"From"}),n.jsx("select",{value:we,onChange:U=>Ne(U.target.value),children:t.map(U=>n.jsx("option",{value:U.month,children:ri(U.month)},U.month))})]}),n.jsx("div",{className:"pb-compare-vs",children:"vs"}),n.jsxs("div",{className:"pb-compare-select",children:[n.jsx("label",{children:"To"}),n.jsx("select",{value:je,onChange:U=>ce(U.target.value),children:t.map(U=>n.jsx("option",{value:U.month,children:ri(U.month)},U.month))})]})]}),st&&nt&&n.jsxs("div",{className:"pb-compare-results",children:[n.jsxs("div",{className:"pb-compare-group",children:[n.jsx("h4",{children:"Strength Benchmarks"}),n.jsxs("div",{className:"pb-compare-table",children:[n.jsxs("div",{className:"pb-compare-header-row",children:[n.jsx("span",{children:"Exercise"}),n.jsx("span",{children:ri(we).split(" ")[0]}),n.jsx("span",{children:ri(je).split(" ")[0]}),n.jsx("span",{children:"Change"})]}),Ci.map(U=>{const re=st.benchmarks?.[U.key],ae=nt.benchmarks?.[U.key],ke=Gc(U,re),tt=Gc(U,ae),$e=Mg(tt,ke);return n.jsxs("div",{className:"pb-compare-row",children:[n.jsx("span",{className:"pb-compare-name",children:U.name}),n.jsx("span",{className:"pb-compare-val",children:re?U.unit==="time"?jf(re.time):`${re.weight}x${re.reps}`:"-"}),n.jsx("span",{className:"pb-compare-val",children:ae?U.unit==="time"?jf(ae.time):`${ae.weight}x${ae.reps}`:"-"}),n.jsx("span",{className:`pb-compare-change ${$e!==null?$e>=0?"positive":"negative":""}`,children:$e!==null?`${$e>=0?"+":""}${$e.toFixed(1)}%`:"-"})]},U.key)})]})]}),n.jsxs("div",{className:"pb-compare-group",children:[n.jsx("h4",{children:"Body Measurements"}),n.jsxs("div",{className:"pb-compare-table",children:[n.jsxs("div",{className:"pb-compare-header-row",children:[n.jsx("span",{children:"Measurement"}),n.jsx("span",{children:ri(we).split(" ")[0]}),n.jsx("span",{children:ri(je).split(" ")[0]}),n.jsx("span",{children:"Change"})]}),Jl.map(U=>{const re=st.bodyMetrics?.[U.key],ae=nt.bodyMetrics?.[U.key],ke=re!=null&&ae!=null?parseFloat((ae-re).toFixed(2)):null;return n.jsxs("div",{className:"pb-compare-row",children:[n.jsx("span",{className:"pb-compare-name",children:U.name}),n.jsx("span",{className:"pb-compare-val",children:re!=null?`${re}`:"-"}),n.jsx("span",{className:"pb-compare-val",children:ae!=null?`${ae}`:"-"}),n.jsx("span",{className:`pb-compare-change ${ke!==null?ke>0?"positive":ke<0?"negative":"neutral":""}`,children:ke!==null?`${ke>0?"+":""}${ke} ${U.suffix}`:"-"})]},U.key)})]})]})]})]}):n.jsx("div",{className:"pb-timeline",children:[...t].reverse().map((U,re)=>{const ae=t.find(ke=>ke.month<U.month&&t.indexOf(ke)===t.indexOf(U)-1)||t.filter(ke=>ke.month<U.month).pop();return n.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${re*.05}s`},children:[n.jsx("div",{className:"pb-timeline-dot"}),n.jsxs("div",{className:"pb-timeline-card",children:[n.jsx("h4",{children:ri(U.month)}),U.benchmarks&&Object.keys(U.benchmarks).length>0&&n.jsxs("div",{className:"pb-timeline-group",children:[n.jsx("h5",{children:"Strength Benchmarks"}),Ci.map(ke=>{const tt=U.benchmarks[ke.key];if(!tt)return null;const $e=ae?.benchmarks?.[ke.key],zt=Gc(ke,tt),Nt=Gc(ke,$e),Ft=Mg(zt,Nt);return n.jsxs("div",{className:"pb-timeline-row",children:[n.jsx("span",{className:"pb-timeline-label",children:ke.name}),n.jsxs("div",{className:"pb-timeline-values",children:[n.jsx("span",{className:"pb-timeline-value",children:ke.unit==="time"?jf(tt.time):j2(tt.weight,tt.reps)}),Ft!==null&&n.jsxs("span",{className:`pb-timeline-change ${Ft>=0?"positive":"negative"}`,children:[Ft>=0?"+":"",Ft.toFixed(1),"%"]})]})]},ke.key)})]}),U.bodyMetrics&&Object.keys(U.bodyMetrics).length>0&&n.jsxs("div",{className:"pb-timeline-group",children:[n.jsx("h5",{children:"Body Measurements"}),Jl.map(ke=>{const tt=U.bodyMetrics[ke.key];if(tt==null)return null;const $e=ae?.bodyMetrics?.[ke.key],zt=$e!=null?parseFloat((tt-$e).toFixed(2)):null;return n.jsxs("div",{className:"pb-timeline-row",children:[n.jsx("span",{className:"pb-timeline-label",children:ke.name}),n.jsxs("div",{className:"pb-timeline-values",children:[n.jsxs("span",{className:"pb-timeline-value",children:[tt," ",ke.suffix]}),zt!==null&&n.jsxs("span",{className:`pb-timeline-change ${zt>0?"positive":zt<0?"negative":"neutral"}`,children:[zt>0?"+":"",zt," ",ke.suffix]})]})]},ke.key)})]})]})]},U.id)})})]})})]})]}),ne&&n.jsx("div",{className:"pb-celebration-overlay",onClick:()=>be(null),children:n.jsxs("div",{className:"pb-celebration-card",children:[n.jsx("div",{className:"pb-celebration-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),n.jsx("h3",{className:"pb-celebration-title",children:ne.length===1?"Target Achieved!":`${ne.length} Targets Achieved!`}),n.jsx("div",{className:"pb-celebration-badges",children:ne.map((U,re)=>n.jsx("div",{className:"pb-celebration-badge",children:U.label},re))}),n.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),me&&n.jsxs("div",{className:`toast-notification ${me.type}`,children:[n.jsx("span",{className:"toast-icon",children:me.type==="success"?n.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),n.jsx("span",{className:"toast-message",children:me.message}),n.jsx("button",{className:"toast-close",onClick:()=>Ae(null),children:""})]}),Ze&&n.jsxs("nav",{className:"block-bottom-nav",children:[n.jsxs("button",{className:"block-nav-tab",onClick:()=>Zt("/client"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>Zt("/client/forms"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n.jsx("polyline",{points:"14 2 14 8 20 8"}),n.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),n.jsx("span",{children:"Forms"})]}),n.jsxs("button",{className:"block-nav-tab",onClick:()=>Zt("/client/tools"),children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),n.jsx("span",{children:"Tools"})]}),n.jsxs("button",{className:"block-nav-tab active",children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M12 20V10"}),n.jsx("path",{d:"M18 20V4"}),n.jsx("path",{d:"M6 20v-4"})]}),n.jsx("span",{children:"PBs"})]}),Rt?.circuitAccess&&n.jsxs("button",{className:"block-nav-tab",onClick:()=>Zt("/client/circuit"),children:[n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 6v6l4 2"})]}),n.jsx("span",{children:"Circuit"})]})]}),ze&&n.jsx(So,{active:"progress"})]})}const Dg=()=>{const r=new Date;let t=(6-r.getDay()+7)%7;if(t===0){const o=new Date(r);o.setHours(9,45,0,0),r>o&&(t=7)}const i=new Date(r);return i.setDate(r.getDate()+t),i},Ig=r=>`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,e6=r=>new Date(r+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"});function t6(){const[r,e]=C.useState(!0),[t,i]=C.useState(null),[o,c]=C.useState(null),[u,h]=C.useState({attended:0,streak:0,strikes:0}),[m,b]=C.useState(null),{currentUser:k,isClient:S,clientData:E,logout:F,loading:L}=Bs(),{isDark:V,toggleTheme:P}=ja(),ee=hs();C.useCallback((B,O="info")=>{b({message:B,type:O}),setTimeout(()=>b(null),4e3)},[]),C.useEffect(()=>{!L&&(!k||!S)&&ee("/")},[k,S,L,ee]),C.useEffect(()=>{const B=()=>{const z=new Date,Y=Dg();Y.setHours(9,0,0,0);const G=Y-z;if(G<=0){i({days:0,hours:0,minutes:0,seconds:0});return}i({days:Math.floor(G/864e5),hours:Math.floor(G%864e5/36e5),minutes:Math.floor(G%36e5/6e4),seconds:Math.floor(G%6e4/1e3)})};B();const O=setInterval(B,1e3);return()=>clearInterval(O)},[]),C.useEffect(()=>{E&&$()},[E]);const $=async()=>{try{const B=Ig(Dg()),O=Mt(Je,"circuitSessions",B),z=await vs(O);if(z.exists()){const He=z.data().slots?.find(Q=>Q.memberId===E.id);c(He||null)}else c(null);const G=(await yn(en(Je,"circuitSessions"))).docs.map(Ae=>({id:Ae.id,...Ae.data()})),se=new Date;se.setHours(0,0,0,0);let H=0;const Le=[];G.forEach(Ae=>{new Date(Ae.date+"T09:00:00")<se&&Ae.slots?.some(we=>we.memberId===E.id&&(we.status==="confirmed"||we.status==="attended"))&&(H++,Le.push(Ae.date))}),Le.sort((Ae,He)=>He.localeCompare(Ae));let Oe=0,ne=new Date(se);const be=ne.getDay(),me=be>=6?be-6:be+1;ne.setDate(ne.getDate()-me);for(const Ae of Le)if(Ae===Ig(ne))Oe++,ne.setDate(ne.getDate()-7);else break;h({attended:H,streak:Oe,strikes:E.circuitStrikes||0,banUntil:E.circuitBanUntil||null})}catch(B){console.error("Error fetching circuit data:",B)}e(!1)};if(L||r)return n.jsx("div",{className:"circuit-page",children:n.jsx("div",{className:"circuit-loading",children:n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"circuit-loading-logo"})})});const le=Ig(Dg()),X=E?.clientType||"block",Te=X==="circuit_vip"||X==="circuit_dropin",Re=X==="circuit_vip"?"VIP":X==="circuit_dropin"?"Drop-in":"Block";return n.jsxs("div",{className:`circuit-page ${V?"dark":""}`,children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsxs("div",{className:"header-actions",children:[n.jsx("button",{onClick:P,"aria-label":"Toggle theme",children:V?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),Te&&n.jsx("button",{onClick:F,"aria-label":"Log out",children:n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"})})})]})]})}),n.jsxs("main",{className:"circuit-main",children:[n.jsxs("div",{className:"circuit-intro",children:[n.jsx("h2",{children:"Circuit Class"}),n.jsxs("p",{children:["Hey ",E?.name?.split(" ")[0],"! Your Saturday session awaits."]})]}),t&&n.jsxs("div",{className:"circuit-countdown",children:[n.jsxs("div",{className:"circuit-ring",children:[n.jsx("svg",{className:"circuit-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((B,O)=>{const z=(O*6-90)*(Math.PI/180),Y=85,G=96,se=100+Y*Math.cos(z),H=100+Y*Math.sin(z),Le=100+G*Math.cos(z),Oe=100+G*Math.sin(z),ne=60-t.seconds,be=O<ne;return n.jsx("line",{x1:se,y1:H,x2:Le,y2:Oe,className:`circuit-tick ${be?"elapsed":"remaining"}`,strokeWidth:O%5===0?"3":"2"},O)})}),n.jsxs("div",{className:"circuit-ring-center",children:[n.jsx("div",{className:"circuit-ring-logo",children:n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),n.jsx("div",{className:"circuit-ring-label",children:"Next Class"}),n.jsxs("div",{className:"circuit-ring-countdown",children:[t.days>0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"circuit-digit",children:String(t.days).padStart(2,"0")}),n.jsx("span",{className:"circuit-colon",children:":"})]}),n.jsx("span",{className:"circuit-digit",children:String(t.hours).padStart(2,"0")}),n.jsx("span",{className:"circuit-colon",children:":"}),n.jsx("span",{className:"circuit-digit",children:String(t.minutes).padStart(2,"0")}),n.jsx("span",{className:"circuit-colon",children:":"}),n.jsx("span",{className:"circuit-digit circuit-seconds",children:String(t.seconds).padStart(2,"0")})]}),n.jsx("div",{className:"circuit-ring-sub",children:"Saturday 9:00am"})]})]}),n.jsx("p",{className:"circuit-date-full",children:e6(le)})]}),n.jsx("div",{className:`circuit-status-card ${o?"booked":"not-booked"}`,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"circuit-status-check",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M5 13l4 4L19 7"})})}),n.jsxs("div",{className:"circuit-status-info",children:[n.jsx("h3",{children:"You're Locked In"}),n.jsxs("p",{children:["Slot #",o.slotNumber,"  ",Re]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"circuit-status-alert",children:"!"}),n.jsxs("div",{className:"circuit-status-info",children:[n.jsx("h3",{children:"Not Booked Yet"}),n.jsx("p",{children:"Tap below to view and book your slot"})]}),n.jsx("button",{className:"circuit-book-now-btn",onClick:()=>ee("/client/circuit/booking"),children:"Book Now"})]})}),n.jsxs("div",{className:"circuit-stats-card",children:[n.jsx("h3",{children:"Your Stats"}),n.jsxs("div",{className:"circuit-stats-grid",children:[n.jsxs("div",{className:"circuit-stat",children:[n.jsx("span",{className:"circuit-stat-value",children:u.attended}),n.jsx("span",{className:"circuit-stat-label",children:"Classes"})]}),n.jsxs("div",{className:"circuit-stat",children:[n.jsx("span",{className:"circuit-stat-value",children:u.streak}),n.jsx("span",{className:"circuit-stat-label",children:"Week Streak"})]}),n.jsxs("div",{className:"circuit-stat",children:[n.jsxs("span",{className:`circuit-stat-value ${u.strikes>=2?"warning":""}`,children:[u.strikes,"/3"]}),n.jsx("span",{className:"circuit-stat-label",children:"Strikes"})]})]}),u.banUntil&&(()=>{const B=u.banUntil.toDate?u.banUntil.toDate():new Date(u.banUntil.seconds*1e3);return B>new Date?n.jsxs("div",{className:"circuit-ban-notice",children:["Booking suspended until ",B.toLocaleDateString("en-GB",{day:"numeric",month:"long"})]}):null})()]}),n.jsxs("div",{className:"circuit-rules",children:[n.jsx("h4",{children:"Class Rules"}),n.jsxs("ul",{children:[n.jsxs("li",{children:["Book your slot ",n.jsx("strong",{children:"anytime before class"})]}),n.jsxs("li",{children:["Cancel at least ",n.jsx("strong",{children:"24 hours"})," before class"]}),n.jsx("li",{children:"3 no-show strikes = 1 month booking ban"})]})]}),X!=="circuit_vip"&&n.jsxs("div",{className:"circuit-vip-promo",children:[n.jsx("div",{className:"vip-promo-badge",children:"VIP"}),n.jsx("h3",{children:"Become a VIP Member"}),n.jsxs("p",{className:"vip-promo-price",children:["Just ",n.jsx("strong",{children:"25"}),"/month"]}),n.jsx("p",{className:"vip-promo-desc",children:"Full access with a priority spot every week  your slot is automatically locked in before anyone else can book."}),n.jsxs("ul",{className:"vip-promo-perks",children:[n.jsx("li",{children:"Guaranteed slot every Saturday"}),n.jsx("li",{children:"Auto-booked  no need to race for a spot"}),n.jsx("li",{children:"Cancel anytime for the week, reinstated the next"})]}),n.jsxs("a",{href:"https://wa.me/447449782055?text=Hi%20Ross%2C%20I%27d%20like%20to%20become%20a%20VIP%20circuit%20member!",target:"_blank",rel:"noopener noreferrer",className:"vip-promo-wa-btn",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Message on WhatsApp"]})]})]}),n.jsxs("nav",{className:"circuit-bottom-nav",children:[!Te&&n.jsxs("button",{className:"circuit-nav-tab",onClick:()=>ee("/client"),children:[n.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("button",{className:"circuit-nav-tab active",onClick:()=>ee("/client/circuit"),children:[n.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:"circuit-nav-tab",onClick:()=>ee("/client/circuit/booking"),children:[n.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),n.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),n.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),n.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),n.jsx("span",{children:"Class"})]})]}),m&&n.jsx("div",{className:`toast-notification ${m.type}`,children:n.jsx("span",{children:m.message})})]})}const Pg=()=>{const r=new Date;let t=(6-r.getDay()+7)%7;if(t===0){const o=new Date(r);o.setHours(9,45,0,0),r>o&&(t=7)}const i=new Date(r);return i.setDate(r.getDate()+t),i},n6=r=>`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,s6=r=>new Date(r+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),_2=r=>r==="circuit_vip"?"VIP":r==="circuit_dropin"?"Drop-in":"Block",k2=r=>r==="circuit_vip"?"vip":r==="circuit_dropin"?"dropin":"block";function r6(){const[r,e]=C.useState(!0),[t,i]=C.useState(!1),[o,c]=C.useState(null),[u,h]=C.useState(!1),[m,b]=C.useState(null),{currentUser:k,isClient:S,clientData:E,loading:F}=Bs(),{isDark:L}=ja(),V=hs(),P=C.useCallback((Oe,ne="info")=>{b({message:Oe,type:ne}),setTimeout(()=>b(null),4e3)},[]);C.useEffect(()=>{!F&&(!k||!S)&&V("/")},[k,S,F,V]),C.useEffect(()=>{E&&ee()},[E]);const ee=async()=>{try{const Oe=n6(Pg()),ne=Mt(Je,"circuitSessions",Oe),be=await vs(ne);if(be.exists()){const me={id:be.id,...be.data()};try{const Ae=ds(en(Je,"clients"),Hn("clientType","==","circuit_vip"),Hn("status","==","active")),Q=(await yn(Ae)).docs.map(je=>({id:je.id,...je.data()})),we=me.slots.filter(je=>je.memberId).map(je=>je.memberId),Ne=Q.filter(je=>!we.includes(je.id));if(Ne.length>0){const je=[...me.slots];let ce=!1;for(const Ee of Ne){const ue=je.findIndex(xe=>xe.status==="available");if(ue===-1)break;je[ue]={slotNumber:je[ue].slotNumber,memberId:Ee.id,memberName:Ee.name,memberType:"circuit_vip",status:"confirmed",bookedAt:Et.now()},ce=!0}ce&&(await js(ne,{slots:je}),me.slots=je)}}catch(Ae){console.error("VIP auto-slot check failed (non-critical):",Ae)}c(me)}else{let me=[];try{const Q=ds(en(Je,"clients"),Hn("clientType","==","circuit_vip"),Hn("status","==","active"));me=(await yn(Q)).docs.map(Ne=>({id:Ne.id,...Ne.data()}))}catch(Q){console.error("VIP query failed, creating session with empty slots:",Q)}const Ae=[];for(let Q=0;Q<8;Q++)Q<me.length?Ae.push({slotNumber:Q+1,memberId:me[Q].id,memberName:me[Q].name,memberType:"circuit_vip",status:"confirmed",bookedAt:Et.now()}):Ae.push({slotNumber:Q+1,memberId:null,memberName:null,memberType:null,status:"available"});const He={date:Oe,time:"09:00",endTime:"09:45",maxCapacity:8,slots:Ae,waitlist:[],createdAt:Et.now()};await Cs(ne,He),c({id:Oe,...He})}}catch(Oe){console.error("Error loading session:",Oe),h(!0),P("Failed to load session","error")}e(!1)},$=async Oe=>{if(!t){i(!0);try{if(E.circuitBanUntil&&(E.circuitBanUntil.toDate?E.circuitBanUntil.toDate():new Date(E.circuitBanUntil))>new Date){P("You are currently suspended from booking","error"),i(!1);return}if(o.slots.some(Ae=>Ae.memberId===E.id)){P("You already have a slot booked","error"),i(!1);return}const ne=[...o.slots],be=ne.findIndex(Ae=>Ae.slotNumber===Oe&&Ae.status==="available");if(be===-1){P("Slot is no longer available","error"),i(!1);return}ne[be]={slotNumber:Oe,memberId:E.id,memberName:E.name,memberType:E.clientType||"block",status:"confirmed",bookedAt:Et.now()};const me=(o.waitlist||[]).filter(Ae=>Ae.memberId!==E.id);await js(Mt(Je,"circuitSessions",o.id),{slots:ne,waitlist:me}),c(Ae=>({...Ae,slots:ne,waitlist:me})),P("Slot booked!","success")}catch(ne){console.error("Error booking slot:",ne),P("Failed to book slot","error")}i(!1)}},le=async()=>{if(!t){i(!0);try{const Oe=Pg();Oe.setHours(9,0,0,0);const ne=new Date(Oe.getTime()-1440*60*1e3);if(new Date>ne){P("Cancellation deadline passed (24hrs before class)","error"),i(!1);return}const be=[...o.slots],me=be.findIndex(Q=>Q.memberId===E.id);if(me===-1){i(!1);return}const Ae=be[me].slotNumber;let He=[...o.waitlist||[]];if(He.length>0){const Q=He.shift();be[me]={slotNumber:Ae,memberId:Q.memberId,memberName:Q.memberName,memberType:Q.memberType,status:"confirmed",bookedAt:Et.now()}}else be[me]={slotNumber:Ae,memberId:null,memberName:null,memberType:null,status:"available"};await js(Mt(Je,"circuitSessions",o.id),{slots:be,waitlist:He}),c(Q=>({...Q,slots:be,waitlist:He})),P("Slot released","success")}catch(Oe){console.error("Error releasing slot:",Oe),P("Failed to release slot","error")}i(!1)}},X=async()=>{if(!t){i(!0);try{if(o.waitlist?.some(ne=>ne.memberId===E.id)){P("Already on the waitlist","error"),i(!1);return}if(o.slots.some(ne=>ne.memberId===E.id)){P("You already have a slot","error"),i(!1);return}const Oe=[...o.waitlist||[],{memberId:E.id,memberName:E.name,memberType:E.clientType||"block",addedAt:Et.now()}];await js(Mt(Je,"circuitSessions",o.id),{waitlist:Oe}),c(ne=>({...ne,waitlist:Oe})),P("Added to waitlist!","success")}catch(Oe){console.error("Error joining waitlist:",Oe),P("Failed to join waitlist","error")}i(!1)}},Te=async()=>{if(!t){i(!0);try{const Oe=(o.waitlist||[]).filter(ne=>ne.memberId!==E.id);await js(Mt(Je,"circuitSessions",o.id),{waitlist:Oe}),c(ne=>({...ne,waitlist:Oe})),P("Removed from waitlist","success")}catch(Oe){console.error("Error leaving waitlist:",Oe),P("Failed to leave waitlist","error")}i(!1)}};if(F||r)return n.jsx("div",{className:"cb-page",children:n.jsx("div",{className:"cb-loading",children:n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-loading-logo"})})});if(!o)return n.jsxs("div",{className:`cb-page ${L?"dark":""}`,children:[n.jsxs("header",{className:"cb-header",children:[n.jsx("button",{className:"cb-back-btn",onClick:()=>V("/client/circuit"),children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),n.jsx("h1",{children:"Class Booking"}),n.jsx("div",{className:"cb-header-spacer"})]}),n.jsx("main",{className:"cb-main",children:n.jsxs("div",{className:"cb-error-state",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",width:"48",height:"48",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),n.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]}),n.jsx("h3",{children:"Couldn't load booking"}),n.jsx("p",{children:"Something went wrong. Please try again."}),n.jsx("button",{className:"cb-retry-btn",onClick:()=>{e(!0),h(!1),ee()},children:"Retry"})]})})]});const Re=E?.clientType||"block",B=Re==="circuit_vip"||Re==="circuit_dropin",O=o.slots.find(Oe=>Oe.memberId===E.id),z=o.waitlist?.some(Oe=>Oe.memberId===E.id),Y=o.slots.filter(Oe=>Oe.status==="available").length,G=Y===0,se=Pg(),H=new Date(se);H.setHours(9,0,0,0),H.setTime(H.getTime()-1440*60*1e3);const Le=new Date>H;return n.jsxs("div",{className:`cb-page ${L?"dark":""}`,children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>V("/client/circuit"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})]})}),n.jsxs("main",{className:"cb-main",children:[n.jsxs("div",{className:"cb-class-info",children:[n.jsx("h2",{children:s6(o.date)}),n.jsxs("p",{children:[o.time," - ",o.endTime,"  ",Y," slot",Y!==1?"s":""," available"]})]}),n.jsx("div",{className:"cb-slots-grid",children:o.slots.map(Oe=>{const ne=Oe.memberId===E.id,be=Oe.status==="available";return Oe.memberType,n.jsxs("div",{className:`cb-slot ${ne?"mine":""} ${be?"available":"filled"}`,children:[n.jsx("div",{className:"cb-slot-number",children:Oe.slotNumber}),n.jsx("div",{className:"cb-slot-body",children:be?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"cb-slot-available",children:"Available"}),!O&&n.jsx("button",{className:"cb-slot-book-btn",onClick:()=>$(Oe.slotNumber),disabled:t,children:"Book"})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"cb-slot-name",children:Oe.memberName}),n.jsx("span",{className:`cb-slot-badge ${k2(Oe.memberType)}`,children:_2(Oe.memberType)})]})}),ne&&n.jsx("button",{className:"cb-slot-release-btn",onClick:le,disabled:t||Le,title:Le?"Cancellation deadline passed":"Cancel this slot",children:Le?"Locked":"Cancel"})]},Oe.slotNumber)})}),!O&&G&&n.jsx("div",{className:"cb-waitlist-section",children:z?n.jsxs("div",{className:"cb-waitlist-status",children:[n.jsxs("p",{children:["You're on the waitlist (position #",(o.waitlist?.findIndex(Oe=>Oe.memberId===E.id)||0)+1,")"]}),n.jsx("button",{className:"cb-waitlist-leave-btn",onClick:Te,disabled:t,children:"Leave Waitlist"})]}):n.jsx("button",{className:"cb-waitlist-join-btn",onClick:X,disabled:t,children:"Class Full - Join Waitlist"})}),o.waitlist?.length>0&&n.jsxs("div",{className:"cb-waitlist-preview",children:[n.jsxs("h4",{children:["Waitlist (",o.waitlist.length,")"]}),o.waitlist.map((Oe,ne)=>n.jsxs("div",{className:"cb-waitlist-item",children:[n.jsxs("span",{className:"cb-waitlist-pos",children:["#",ne+1]}),n.jsx("span",{className:"cb-waitlist-name",children:Oe.memberName}),n.jsx("span",{className:`cb-slot-badge ${k2(Oe.memberType)}`,children:_2(Oe.memberType)})]},Oe.memberId))]}),n.jsx("div",{className:"cb-rules",children:n.jsxs("p",{children:[n.jsx("strong",{children:"Book anytime before class"}),"  ",n.jsx("strong",{children:"Cancel 24hrs before"}),"  ",n.jsx("strong",{children:"3 no-shows = 1 month ban"})]})})]}),n.jsxs("nav",{className:"circuit-bottom-nav",children:[!B&&n.jsxs("button",{className:"circuit-nav-tab",onClick:()=>V("/client"),children:[n.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("button",{className:"circuit-nav-tab",onClick:()=>V("/client/circuit"),children:[n.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n.jsx("span",{children:"Home"})]}),n.jsxs("button",{className:"circuit-nav-tab active",onClick:()=>V("/client/circuit/booking"),children:[n.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),n.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),n.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),n.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),n.jsx("span",{children:"Class"})]})]}),m&&n.jsx("div",{className:`toast-notification ${m.type}`,children:n.jsx("span",{children:m.message})})]})}const a6="/login/assets/workouts-DXJtvJtv.jpg",_f=60,Og=[10,25,50,100,200,500,1e3],i6=5;function o6(r){return r.toISOString().split("T")[0]}function l6(r){let e=0;for(const t of Og){if(r<t)return{prev:e,next:t};e=t}return{prev:Og[Og.length-1],next:r+100}}const c6={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}};function u6(){const{currentUser:r,isClient:e,clientData:t,logout:i,loading:o}=Bs(),{isDark:c,toggleTheme:u}=ja(),h=hs(),[m,b]=C.useState({hours:0,minutes:0,seconds:0}),[k,S]=C.useState(0),[E,F]=C.useState(0),[L,V]=C.useState(""),[P,ee]=C.useState(0),[$,le]=C.useState(0),[X,Te]=C.useState(!1),[Re,B]=C.useState(null);C.useCallback((be,me="info")=>{B({message:be,type:me}),setTimeout(()=>B(null),4e3)},[]),C.useEffect(()=>{!o&&!r&&h("/")},[o,r,h]),C.useEffect(()=>{const be=()=>{const Ae=new Date,He=new Date(Ae);He.setHours(23,59,59,999);const Q=He-Ae,we=Math.floor(Q/(1e3*60*60)),Ne=Math.floor(Q%(1e3*60*60)/(1e3*60)),je=Math.floor(Q%(1e3*60)/1e3);b({hours:we,minutes:Ne,seconds:je}),S(60-je)};be();const me=setInterval(be,1e3);return()=>clearInterval(me)},[]),C.useEffect(()=>{if(!r||!t)return;(async()=>{try{const me=await vs(Mt(Je,"clientProgrammes",t.id));if(me.exists()){const xe=me.data(),Fe=c6[xe.templateId];if(Fe){const ot=Object.keys(xe.completedSessions||{}).length,Ue=Fe.duration*Fe.daysPerWeek;F(Ue>0?Math.round(ot/Ue*100):0);const _e=xe.templateId.replace(/_/g," ").replace(/\b\w/g,Ke=>Ke.toUpperCase());V(_e)}}const Ae=en(Je,"workoutLogs"),He=ds(Ae,Hn("clientId","==",t.id)),we=(await yn(He)).docs.filter(xe=>xe.data().type!=="programme").length;ee(we);const Ne=o6(new Date),je=en(Je,"habitLogs"),ce=ds(je,Hn("clientId","==",t.id),Hn("date","==",Ne)),Ee=await yn(ce);let ue=0;if(!Ee.empty){const xe=Ee.docs[0].data().habits||{};ue=Object.values(xe).filter(Boolean).length}le(Math.round(ue/i6*100))}catch(me){console.error("Error loading dashboard stats:",me)}finally{Te(!0)}})()},[r,t]);const O=be=>{const me=be.currentTarget,Ae=me.querySelector(".ripple");Ae&&Ae.remove();const He=me.getBoundingClientRect(),Q=Math.max(He.width,He.height),we=be.clientX-He.left-Q/2,Ne=be.clientY-He.top-Q/2,je=document.createElement("span");je.className="ripple",je.style.cssText=`width:${Q}px;height:${Q}px;left:${we}px;top:${Ne}px;`,me.appendChild(je),setTimeout(()=>je.remove(),600)},z=t?.name?.split(" ")[0]||"there",Y=Math.round(E/100*_f),{prev:G,next:se}=l6(P),H=se>G?Math.round((P-G)/(se-G)*100):100,Le=Math.round(H/100*_f),Oe=Math.round($/100*_f),ne=[{label:"Programme",value:`${E}%`,ticks:Y,cls:"cb-stat-programme"},{label:"Workouts",value:`${P}`,ticks:Le,cls:"cb-stat-workouts"},{label:"Habits Today",value:`${$}%`,ticks:Oe,cls:"cb-stat-habits"}];return o?n.jsx("div",{className:"cb-loading",children:n.jsx("div",{className:"cb-loading-spinner"})}):n.jsxs("div",{className:"cb-dashboard","data-theme":c?"dark":"light",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsxs("div",{className:"header-actions",children:[n.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:c?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),n.jsx("button",{onClick:i,"aria-label":"Log out",children:n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),n.jsx("polyline",{points:"16 17 21 12 16 7"}),n.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),n.jsxs("main",{className:"cb-main",children:[n.jsx("div",{className:"cb-greeting",children:n.jsxs("h2",{children:["Hey ",z]})}),n.jsxs("div",{className:"cb-ring-container",children:[n.jsxs("div",{className:"cb-ring",children:[n.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((be,me)=>{const Ae=(me*6-90)*(Math.PI/180),He=85,Q=96,we=100+He*Math.cos(Ae),Ne=100+He*Math.sin(Ae),je=100+Q*Math.cos(Ae),ce=100+Q*Math.sin(Ae),Ee=me<k;return n.jsx("line",{x1:we,y1:Ne,x2:je,y2:ce,className:`ring-tick ${Ee?"elapsed":"remaining"}`,strokeWidth:me%5===0?"3":"2"},me)})}),n.jsxs("div",{className:"cb-ring-center",children:[n.jsx("div",{className:"cb-ring-logo",children:n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),n.jsxs("div",{className:"cb-ring-countdown",children:[n.jsx("span",{className:"cb-timer-digit",children:String(m.hours).padStart(2,"0")}),n.jsx("span",{className:"cb-timer-colon",children:":"}),n.jsx("span",{className:"cb-timer-digit",children:String(m.minutes).padStart(2,"0")}),n.jsx("span",{className:"cb-timer-colon",children:":"}),n.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(m.seconds).padStart(2,"0")})]}),n.jsx("div",{className:"cb-ring-label",children:"remaining today"})]})]}),n.jsxs("p",{className:"cb-ring-tagline",children:["You have 24 hours a day... ",n.jsx("strong",{children:"make it count"})," with Core Buddy"]})]}),X&&n.jsx("div",{className:"cb-stats-row",children:ne.map(be=>n.jsxs("div",{className:"cb-stat-item",children:[n.jsxs("div",{className:`cb-stat-ring ${be.cls}`,children:[n.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(_f)].map((me,Ae)=>{const He=(Ae*6-90)*(Math.PI/180),Q=50+38*Math.cos(He),we=50+38*Math.sin(He),Ne=50+46*Math.cos(He),je=50+46*Math.sin(He);return n.jsx("line",{x1:Q,y1:we,x2:Ne,y2:je,className:Ae<be.ticks?"cb-stat-filled":"cb-stat-empty",strokeWidth:Ae%5===0?"3":"2"},Ae)})}),n.jsx("span",{className:"cb-stat-value",children:be.value})]}),n.jsx("span",{className:"cb-stat-label",children:be.label})]},be.cls))}),n.jsxs("div",{className:"cb-features",children:[n.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:be=>{O(be),h("/client/core-buddy/nutrition")},children:[n.jsxs("div",{className:"cb-card-top-row",children:[n.jsx("div",{className:"cb-card-content",children:n.jsx("h3",{children:"Today's Nutrition"})}),n.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})]}),n.jsx("div",{className:"cb-card-preview-row",children:n.jsx("div",{className:"cb-mini-rings",children:[{cls:"cb-ring-protein",label:"P",filled:15},{cls:"cb-ring-carbs",label:"C",filled:28},{cls:"cb-ring-fats",label:"F",filled:38},{cls:"cb-ring-cals",label:"Cal",filled:22}].map(be=>n.jsxs("div",{className:`cb-mini-ring ${be.cls}`,children:[n.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(60)].map((me,Ae)=>{const He=(Ae*6-90)*(Math.PI/180),Q=50+38*Math.cos(He),we=50+38*Math.sin(He),Ne=50+46*Math.cos(He),je=50+46*Math.sin(He);return n.jsx("line",{x1:Q,y1:we,x2:Ne,y2:je,className:Ae<be.filled?"cb-tick-filled":"cb-tick-empty",strokeWidth:Ae%5===0?"3":"2"},Ae)})}),n.jsx("span",{children:be.label})]},be.cls))})}),n.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),n.jsx("button",{className:"cb-feature-card cb-card-workouts cb-card-thumbnail ripple-btn",onClick:be=>{O(be),h("/client/core-buddy/workouts")},children:n.jsx("img",{src:a6,alt:"Workouts",className:"cb-card-thumb-img"})}),n.jsxs("button",{className:"cb-feature-card cb-card-consistency ripple-btn",onClick:be=>{O(be),h("/client/core-buddy/consistency")},children:[n.jsxs("div",{className:"cb-card-content",children:[n.jsx("h3",{children:"Daily Habits"}),n.jsx("p",{children:"Check off your daily habits and build streaks"})]}),n.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})]}),n.jsxs("button",{className:"cb-feature-card cb-card-progress ripple-btn",onClick:be=>{O(be),h("/client/personal-bests?mode=corebuddy")},children:[n.jsxs("div",{className:"cb-card-content",children:[n.jsx("h3",{children:"My Progress"}),n.jsx("p",{children:"Track personal bests and body metrics"})]}),n.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})]}),n.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:be=>{O(be),h("/client/leaderboard")},children:[n.jsxs("div",{className:"cb-card-content",children:[n.jsx("h3",{children:"Leaderboard"}),n.jsx("p",{children:"Compete with your Core Buddies"})]}),n.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})]})]})]}),n.jsx(So,{active:"home"}),Re&&n.jsxs("div",{className:`toast-notification ${Re.type}`,children:[Re.type==="info"&&n.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),n.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Re.message]})]})}var Lg={exports:{}},N2;function d6(){return N2||(N2=1,(function(r,e){(function(t,i){r.exports=i()})(window,(function(){return(function(t){var i={};function o(c){if(i[c])return i[c].exports;var u=i[c]={i:c,l:!1,exports:{}};return t[c].call(u.exports,u,u.exports,o),u.l=!0,u.exports}return o.m=t,o.c=i,o.d=function(c,u,h){o.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:h})},o.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},o.t=function(c,u){if(1&u&&(c=o(c)),8&u||4&u&&typeof c=="object"&&c&&c.__esModule)return c;var h=Object.create(null);if(o.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:c}),2&u&&typeof c!="string")for(var m in c)o.d(h,m,(function(b){return c[b]}).bind(null,m));return h},o.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return o.d(u,"a",u),u},o.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},o.p="/",o(o.s=90)})([function(t,i,o){var c=o(68);t.exports=function(u,h,m){return(h=c(h))in u?Object.defineProperty(u,h,{value:m,enumerable:!0,configurable:!0,writable:!0}):u[h]=m,u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){function o(c){return t.exports=o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},t.exports.__esModule=!0,t.exports.default=t.exports,o(c)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(o,c){if(!(o instanceof c))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(68);function u(h,m){for(var b=0;b<m.length;b++){var k=m[b];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(h,c(k.key),k)}}t.exports=function(h,m,b){return m&&u(h.prototype,m),b&&u(h,b),Object.defineProperty(h,"prototype",{writable:!1}),h},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(9).default,u=o(150);t.exports=function(h,m){if(m&&(c(m)=="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(h)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(38);t.exports=function(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),h&&c(u,h)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(146)();t.exports=c;try{regeneratorRuntime=c}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=c:Function("r","regeneratorRuntime = r")(c)}},function(t,i){function o(c,u,h,m,b,k,S){try{var E=c[k](S),F=E.value}catch(L){return void h(L)}E.done?u(F):Promise.resolve(F).then(m,b)}t.exports=function(c){return function(){var u=this,h=arguments;return new Promise((function(m,b){var k=c.apply(u,h);function S(F){o(k,m,b,S,E,"next",F)}function E(F){o(k,m,b,S,E,"throw",F)}S(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(46),u=typeof self=="object"&&self&&self.Object===Object&&self,h=c||u||Function("return this")();t.exports=h},function(t,i){function o(c){return t.exports=o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t.exports.__esModule=!0,t.exports.default=t.exports,o(c)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}},function(t,i){t.exports=function(o){return o!=null&&typeof o=="object"}},function(t,i){var o=Array.isArray;t.exports=o},function(t,i,o){var c=o(151);function u(){return t.exports=u=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(h,m,b){var k=c(h,m);if(k){var S=Object.getOwnPropertyDescriptor(k,m);return S.get?S.get.call(arguments.length<3?h:b):S.value}},t.exports.__esModule=!0,t.exports.default=t.exports,u.apply(null,arguments)}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(102),u=o(108);t.exports=function(h,m){var b=u(h,m);return c(b)?b:void 0}},function(t,i,o){var c=o(91),u=o(134)((function(h,m,b){c(h,m,b)}));t.exports=u},function(t,i,o){var c=o(152),u=o(153),h=o(66),m=o(154);t.exports=function(b){return c(b)||u(b)||h(b)||m()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(19),u=o(104),h=o(105),m=c?c.toStringTag:void 0;t.exports=function(b){return b==null?b===void 0?"[object Undefined]":"[object Null]":m&&m in Object(b)?u(b):h(b)}},function(t,i,o){var c=o(60),u=o(29);t.exports=function(h,m,b,k){var S=!b;b||(b={});for(var E=-1,F=m.length;++E<F;){var L=m[E],V=k?k(b[L],h[L],L,b,h):void 0;V===void 0&&(V=h[L]),S?u(b,L,V):c(b,L,V)}return b}},function(t,i,o){var c=o(8).Symbol;t.exports=c},function(t,i,o){var c=o(61),u=o(132),h=o(26);t.exports=function(m){return h(m)?c(m,!0):u(m)}},function(t,i,o){var c=o(92),u=o(93),h=o(94),m=o(95),b=o(96);function k(S){var E=-1,F=S==null?0:S.length;for(this.clear();++E<F;){var L=S[E];this.set(L[0],L[1])}}k.prototype.clear=c,k.prototype.delete=u,k.prototype.get=h,k.prototype.has=m,k.prototype.set=b,t.exports=k},function(t,i,o){var c=o(23);t.exports=function(u,h){for(var m=u.length;m--;)if(c(u[m][0],h))return m;return-1}},function(t,i){t.exports=function(o,c){return o===c||o!=o&&c!=c}},function(t,i,o){var c=o(14)(Object,"create");t.exports=c},function(t,i,o){var c=o(117);t.exports=function(u,h){var m=u.__data__;return c(h)?m[typeof h=="string"?"string":"hash"]:m.map}},function(t,i,o){var c=o(28),u=o(56);t.exports=function(h){return h!=null&&u(h.length)&&!c(h)}},function(t,i,o){var c=o(14)(o(8),"Map");t.exports=c},function(t,i,o){var c=o(17),u=o(10);t.exports=function(h){if(!u(h))return!1;var m=c(h);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}},function(t,i,o){var c=o(50);t.exports=function(u,h,m){h=="__proto__"&&c?c(u,h,{configurable:!0,enumerable:!0,value:m,writable:!0}):u[h]=m}},function(t,i){t.exports=function(o){return o.webpackPolyfill||(o.deprecate=function(){},o.paths=[],o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function(){return o.i}}),o.webpackPolyfill=1),o}},function(t,i,o){var c=o(124);t.exports=function(u){var h=new u.constructor(u.byteLength);return new c(h).set(new c(u)),h}},function(t,i,o){var c=o(55)(Object.getPrototypeOf,Object);t.exports=c},function(t,i){var o=Object.prototype;t.exports=function(c){var u=c&&c.constructor;return c===(typeof u=="function"&&u.prototype||o)}},function(t,i,o){var c=o(126),u=o(11),h=Object.prototype,m=h.hasOwnProperty,b=h.propertyIsEnumerable,k=c((function(){return arguments})())?c:function(S){return u(S)&&m.call(S,"callee")&&!b.call(S,"callee")};t.exports=k},function(t,i,o){(function(c){var u=o(8),h=o(128),m=i&&!i.nodeType&&i,b=m&&typeof c=="object"&&c&&!c.nodeType&&c,k=b&&b.exports===m?u.Buffer:void 0,S=(k?k.isBuffer:void 0)||h;c.exports=S}).call(this,o(30)(t))},function(t,i){t.exports=function(o){return function(c){return o(c)}}},function(t,i,o){(function(c){var u=o(46),h=i&&!i.nodeType&&i,m=h&&typeof c=="object"&&c&&!c.nodeType&&c,b=m&&m.exports===h&&u.process,k=(function(){try{var S=m&&m.require&&m.require("util").types;return S||b&&b.binding&&b.binding("util")}catch{}})();c.exports=k}).call(this,o(30)(t))},function(t,i){function o(c,u){return t.exports=o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,m){return h.__proto__=m,h},t.exports.__esModule=!0,t.exports.default=t.exports,o(c,u)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(61),u=o(159),h=o(26);t.exports=function(m){return h(m)?c(m):u(m)}},function(t,i,o){var c=o(163),u=o(75),h=Object.prototype.propertyIsEnumerable,m=Object.getOwnPropertySymbols,b=m?function(k){return k==null?[]:(k=Object(k),c(m(k),(function(S){return h.call(k,S)})))}:u;t.exports=b},function(t,i){t.exports=function(o,c){for(var u=-1,h=c.length,m=o.length;++u<h;)o[m+u]=c[u];return o}},function(t,i,o){var c=o(166),u=o(27),h=o(167),m=o(168),b=o(169),k=o(17),S=o(47),E=S(c),F=S(u),L=S(h),V=S(m),P=S(b),ee=k;(c&&ee(new c(new ArrayBuffer(1)))!="[object DataView]"||u&&ee(new u)!="[object Map]"||h&&ee(h.resolve())!="[object Promise]"||m&&ee(new m)!="[object Set]"||b&&ee(new b)!="[object WeakMap]")&&(ee=function($){var le=k($),X=le=="[object Object]"?$.constructor:void 0,Te=X?S(X):"";if(Te)switch(Te){case E:return"[object DataView]";case F:return"[object Map]";case L:return"[object Promise]";case V:return"[object Set]";case P:return"[object WeakMap]"}return le}),t.exports=ee},function(t,i,o){var c=o(12),u=o(180),h=o(181),m=o(184);t.exports=function(b,k){return c(b)?b:u(b,k)?[b]:h(m(b))}},function(t,i,o){var c=o(17),u=o(11);t.exports=function(h){return typeof h=="symbol"||u(h)&&c(h)=="[object Symbol]"}},function(t,i,o){var c=o(21),u=o(97),h=o(98),m=o(99),b=o(100),k=o(101);function S(E){var F=this.__data__=new c(E);this.size=F.size}S.prototype.clear=u,S.prototype.delete=h,S.prototype.get=m,S.prototype.has=b,S.prototype.set=k,t.exports=S},function(t,i,o){(function(c){var u=typeof c=="object"&&c&&c.Object===Object&&c;t.exports=u}).call(this,o(103))},function(t,i){var o=Function.prototype.toString;t.exports=function(c){if(c!=null){try{return o.call(c)}catch{}try{return c+""}catch{}}return""}},function(t,i,o){var c=o(109),u=o(116),h=o(118),m=o(119),b=o(120);function k(S){var E=-1,F=S==null?0:S.length;for(this.clear();++E<F;){var L=S[E];this.set(L[0],L[1])}}k.prototype.clear=c,k.prototype.delete=u,k.prototype.get=h,k.prototype.has=m,k.prototype.set=b,t.exports=k},function(t,i,o){var c=o(29),u=o(23);t.exports=function(h,m,b){(b!==void 0&&!u(h[m],b)||b===void 0&&!(m in h))&&c(h,m,b)}},function(t,i,o){var c=o(14),u=(function(){try{var h=c(Object,"defineProperty");return h({},"",{}),h}catch{}})();t.exports=u},function(t,i,o){(function(c){var u=o(8),h=i&&!i.nodeType&&i,m=h&&typeof c=="object"&&c&&!c.nodeType&&c,b=m&&m.exports===h?u.Buffer:void 0,k=b?b.allocUnsafe:void 0;c.exports=function(S,E){if(E)return S.slice();var F=S.length,L=k?k(F):new S.constructor(F);return S.copy(L),L}}).call(this,o(30)(t))},function(t,i,o){var c=o(31);t.exports=function(u,h){var m=h?c(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.length)}},function(t,i){t.exports=function(o,c){var u=-1,h=o.length;for(c||(c=Array(h));++u<h;)c[u]=o[u];return c}},function(t,i,o){var c=o(125),u=o(32),h=o(33);t.exports=function(m){return typeof m.constructor!="function"||h(m)?{}:c(u(m))}},function(t,i){t.exports=function(o,c){return function(u){return o(c(u))}}},function(t,i){t.exports=function(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=9007199254740991}},function(t,i,o){var c=o(17),u=o(32),h=o(11),m=Function.prototype,b=Object.prototype,k=m.toString,S=b.hasOwnProperty,E=k.call(Object);t.exports=function(F){if(!h(F)||c(F)!="[object Object]")return!1;var L=u(F);if(L===null)return!0;var V=S.call(L,"constructor")&&L.constructor;return typeof V=="function"&&V instanceof V&&k.call(V)==E}},function(t,i,o){var c=o(129),u=o(36),h=o(37),m=h&&h.isTypedArray,b=m?u(m):c;t.exports=b},function(t,i){t.exports=function(o,c){if((c!=="constructor"||typeof o[c]!="function")&&c!="__proto__")return o[c]}},function(t,i,o){var c=o(29),u=o(23),h=Object.prototype.hasOwnProperty;t.exports=function(m,b,k){var S=m[b];h.call(m,b)&&u(S,k)&&(k!==void 0||b in m)||c(m,b,k)}},function(t,i,o){var c=o(131),u=o(34),h=o(12),m=o(35),b=o(62),k=o(58),S=Object.prototype.hasOwnProperty;t.exports=function(E,F){var L=h(E),V=!L&&u(E),P=!L&&!V&&m(E),ee=!L&&!V&&!P&&k(E),$=L||V||P||ee,le=$?c(E.length,String):[],X=le.length;for(var Te in E)!F&&!S.call(E,Te)||$&&(Te=="length"||P&&(Te=="offset"||Te=="parent")||ee&&(Te=="buffer"||Te=="byteLength"||Te=="byteOffset")||b(Te,X))||le.push(Te);return le}},function(t,i){var o=/^(?:0|[1-9]\d*)$/;t.exports=function(c,u){var h=typeof c;return!!(u=u??9007199254740991)&&(h=="number"||h!="symbol"&&o.test(c))&&c>-1&&c%1==0&&c<u}},function(t,i){t.exports=function(o){return o}},function(t,i,o){var c=o(136),u=Math.max;t.exports=function(h,m,b){return m=u(m===void 0?h.length-1:m,0),function(){for(var k=arguments,S=-1,E=u(k.length-m,0),F=Array(E);++S<E;)F[S]=k[m+S];S=-1;for(var L=Array(m+1);++S<m;)L[S]=k[S];return L[m]=b(F),c(h,this,L)}}},function(t,i,o){var c=o(137),u=o(139)(c);t.exports=u},function(t,i,o){var c=o(67);t.exports=function(u,h){if(u){if(typeof u=="string")return c(u,h);var m={}.toString.call(u).slice(8,-1);return m==="Object"&&u.constructor&&(m=u.constructor.name),m==="Map"||m==="Set"?Array.from(u):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?c(u,h):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(o,c){(c==null||c>o.length)&&(c=o.length);for(var u=0,h=Array(c);u<c;u++)h[u]=o[u];return h},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(9).default,u=o(145);t.exports=function(h){var m=u(h,"string");return c(m)=="symbol"?m:m+""},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(o,c){this.v=o,this.k=c},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(71);function u(){var h,m,b=typeof Symbol=="function"?Symbol:{},k=b.iterator||"@@iterator",S=b.toStringTag||"@@toStringTag";function E(X,Te,Re,B){var O=Te&&Te.prototype instanceof L?Te:L,z=Object.create(O.prototype);return c(z,"_invoke",(function(Y,G,se){var H,Le,Oe,ne=0,be=se||[],me=!1,Ae={p:0,n:0,v:h,a:He,f:He.bind(h,4),d:function(Q,we){return H=Q,Le=0,Oe=h,Ae.n=we,F}};function He(Q,we){for(Le=Q,Oe=we,m=0;!me&&ne&&!Ne&&m<be.length;m++){var Ne,je=be[m],ce=Ae.p,Ee=je[2];Q>3?(Ne=Ee===we)&&(Oe=je[(Le=je[4])?5:(Le=3,3)],je[4]=je[5]=h):je[0]<=ce&&((Ne=Q<2&&ce<je[1])?(Le=0,Ae.v=we,Ae.n=je[1]):ce<Ee&&(Ne=Q<3||je[0]>we||we>Ee)&&(je[4]=Q,je[5]=we,Ae.n=Ee,Le=0))}if(Ne||Q>1)return F;throw me=!0,we}return function(Q,we,Ne){if(ne>1)throw TypeError("Generator is already running");for(me&&we===1&&He(we,Ne),Le=we,Oe=Ne;(m=Le<2?h:Oe)||!me;){H||(Le?Le<3?(Le>1&&(Ae.n=-1),He(Le,Oe)):Ae.n=Oe:Ae.v=Oe);try{if(ne=2,H){if(Le||(Q="next"),m=H[Q]){if(!(m=m.call(H,Oe)))throw TypeError("iterator result is not an object");if(!m.done)return m;Oe=m.value,Le<2&&(Le=0)}else Le===1&&(m=H.return)&&m.call(H),Le<2&&(Oe=TypeError("The iterator does not provide a '"+Q+"' method"),Le=1);H=h}else if((m=(me=Ae.n<0)?Oe:Y.call(G,Ae))!==F)break}catch(je){H=h,Le=1,Oe=je}finally{ne=1}}return{value:m,done:me}}})(X,Re,B),!0),z}var F={};function L(){}function V(){}function P(){}m=Object.getPrototypeOf;var ee=[][k]?m(m([][k]())):(c(m={},k,(function(){return this})),m),$=P.prototype=L.prototype=Object.create(ee);function le(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,P):(X.__proto__=P,c(X,S,"GeneratorFunction")),X.prototype=Object.create($),X}return V.prototype=P,c($,"constructor",P),c(P,"constructor",V),V.displayName="GeneratorFunction",c(P,S,"GeneratorFunction"),c($),c($,S,"Generator"),c($,k,(function(){return this})),c($,"toString",(function(){return"[object Generator]"})),(t.exports=u=function(){return{w:E,m:le}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){function o(c,u,h,m){var b=Object.defineProperty;try{b({},"",{})}catch{b=0}t.exports=o=function(k,S,E,F){function L(V,P){o(k,V,(function(ee){return this._invoke(V,P,ee)}))}S?b?b(k,S,{value:E,enumerable:!F,configurable:!F,writable:!F}):k[S]=E:(L("next",0),L("throw",1),L("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,o(c,u,h,m)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(70),u=o(73);t.exports=function(h,m,b,k,S){return new u(c().w(h,m,b,k),S||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(69),u=o(71);t.exports=function h(m,b){function k(E,F,L,V){try{var P=m[E](F),ee=P.value;return ee instanceof c?b.resolve(ee.v).then((function($){k("next",$,L,V)}),(function($){k("throw",$,L,V)})):b.resolve(ee).then((function($){P.value=$,L(P)}),(function($){return k("throw",$,L,V)}))}catch($){V($)}}var S;this.next||(u(h.prototype),u(h.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),u(this,"_invoke",(function(E,F,L){function V(){return new b((function(P,ee){k(E,L,P,ee)}))}return S=S?S.then(V,V):V()}),!0)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(o,c){for(var u=-1,h=o==null?0:o.length,m=Array(h);++u<h;)m[u]=c(o[u],u,o);return m}},function(t,i){t.exports=function(){return[]}},function(t,i,o){var c=o(41),u=o(32),h=o(40),m=o(75),b=Object.getOwnPropertySymbols?function(k){for(var S=[];k;)c(S,h(k)),k=u(k);return S}:m;t.exports=b},function(t,i,o){var c=o(41),u=o(12);t.exports=function(h,m,b){var k=m(h);return u(h)?k:c(k,b(h))}},function(t,i,o){var c=o(77),u=o(76),h=o(20);t.exports=function(m){return c(m,h,u)}},function(t,i,o){var c=o(44);t.exports=function(u){if(typeof u=="string"||c(u))return u;var h=u+"";return h=="0"&&1/u==-1/0?"-0":h}},function(t,i,o){var c=o(142),u=o(143),h=o(66),m=o(144);t.exports=function(b,k){return c(b)||u(b,k)||h(b,k)||m()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(155);t.exports=function(u,h){if(u==null)return{};var m,b,k=c(u,h);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(u);for(b=0;b<S.length;b++)m=S[b],h.indexOf(m)===-1&&{}.propertyIsEnumerable.call(u,m)&&(k[m]=u[m])}return k},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(74),u=o(156),h=o(179),m=o(43),b=o(18),k=o(190),S=o(191),E=o(78),F=S((function(L,V){var P={};if(L==null)return P;var ee=!1;V=c(V,(function(le){return le=m(le,L),ee||(ee=le.length>1),le})),b(L,E(L),P),ee&&(P=u(P,7,k));for(var $=V.length;$--;)h(P,V[$]);return P}));t.exports=F},function(t,i,o){var c=o(1),u=o(38),h=o(195),m=o(196);function b(k){var S=typeof Map=="function"?new Map:void 0;return t.exports=b=function(E){if(E===null||!h(E))return E;if(typeof E!="function")throw new TypeError("Super expression must either be null or a function");if(S!==void 0){if(S.has(E))return S.get(E);S.set(E,F)}function F(){return m(E,arguments,c(this).constructor)}return F.prototype=Object.create(E.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),u(F,E)},t.exports.__esModule=!0,t.exports.default=t.exports,b(k)}t.exports=b,t.exports.__esModule=!0,t.exports.default=t.exports},,,,,,,function(t,i,o){t.exports=o(198)},function(t,i,o){var c=o(45),u=o(49),h=o(121),m=o(123),b=o(10),k=o(20),S=o(59);t.exports=function E(F,L,V,P,ee){F!==L&&h(L,(function($,le){if(ee||(ee=new c),b($))m(F,L,le,V,E,P,ee);else{var X=P?P(S(F,le),$,le+"",F,L,ee):void 0;X===void 0&&(X=$),u(F,le,X)}}),k)}},function(t,i){t.exports=function(){this.__data__=[],this.size=0}},function(t,i,o){var c=o(22),u=Array.prototype.splice;t.exports=function(h){var m=this.__data__,b=c(m,h);return!(b<0)&&(b==m.length-1?m.pop():u.call(m,b,1),--this.size,!0)}},function(t,i,o){var c=o(22);t.exports=function(u){var h=this.__data__,m=c(h,u);return m<0?void 0:h[m][1]}},function(t,i,o){var c=o(22);t.exports=function(u){return c(this.__data__,u)>-1}},function(t,i,o){var c=o(22);t.exports=function(u,h){var m=this.__data__,b=c(m,u);return b<0?(++this.size,m.push([u,h])):m[b][1]=h,this}},function(t,i,o){var c=o(21);t.exports=function(){this.__data__=new c,this.size=0}},function(t,i){t.exports=function(o){var c=this.__data__,u=c.delete(o);return this.size=c.size,u}},function(t,i){t.exports=function(o){return this.__data__.get(o)}},function(t,i){t.exports=function(o){return this.__data__.has(o)}},function(t,i,o){var c=o(21),u=o(27),h=o(48);t.exports=function(m,b){var k=this.__data__;if(k instanceof c){var S=k.__data__;if(!u||S.length<199)return S.push([m,b]),this.size=++k.size,this;k=this.__data__=new h(S)}return k.set(m,b),this.size=k.size,this}},function(t,i,o){var c=o(28),u=o(106),h=o(10),m=o(47),b=/^\[object .+?Constructor\]$/,k=Function.prototype,S=Object.prototype,E=k.toString,F=S.hasOwnProperty,L=RegExp("^"+E.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(V){return!(!h(V)||u(V))&&(c(V)?L:b).test(m(V))}},function(t,i){var o;o=(function(){return this})();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}t.exports=o},function(t,i,o){var c=o(19),u=Object.prototype,h=u.hasOwnProperty,m=u.toString,b=c?c.toStringTag:void 0;t.exports=function(k){var S=h.call(k,b),E=k[b];try{k[b]=void 0;var F=!0}catch{}var L=m.call(k);return F&&(S?k[b]=E:delete k[b]),L}},function(t,i){var o=Object.prototype.toString;t.exports=function(c){return o.call(c)}},function(t,i,o){var c,u=o(107),h=(c=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";t.exports=function(m){return!!h&&h in m}},function(t,i,o){var c=o(8)["__core-js_shared__"];t.exports=c},function(t,i){t.exports=function(o,c){return o?.[c]}},function(t,i,o){var c=o(110),u=o(21),h=o(27);t.exports=function(){this.size=0,this.__data__={hash:new c,map:new(h||u),string:new c}}},function(t,i,o){var c=o(111),u=o(112),h=o(113),m=o(114),b=o(115);function k(S){var E=-1,F=S==null?0:S.length;for(this.clear();++E<F;){var L=S[E];this.set(L[0],L[1])}}k.prototype.clear=c,k.prototype.delete=u,k.prototype.get=h,k.prototype.has=m,k.prototype.set=b,t.exports=k},function(t,i,o){var c=o(24);t.exports=function(){this.__data__=c?c(null):{},this.size=0}},function(t,i){t.exports=function(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}},function(t,i,o){var c=o(24),u=Object.prototype.hasOwnProperty;t.exports=function(h){var m=this.__data__;if(c){var b=m[h];return b==="__lodash_hash_undefined__"?void 0:b}return u.call(m,h)?m[h]:void 0}},function(t,i,o){var c=o(24),u=Object.prototype.hasOwnProperty;t.exports=function(h){var m=this.__data__;return c?m[h]!==void 0:u.call(m,h)}},function(t,i,o){var c=o(24);t.exports=function(u,h){var m=this.__data__;return this.size+=this.has(u)?0:1,m[u]=c&&h===void 0?"__lodash_hash_undefined__":h,this}},function(t,i,o){var c=o(25);t.exports=function(u){var h=c(this,u).delete(u);return this.size-=h?1:0,h}},function(t,i){t.exports=function(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}},function(t,i,o){var c=o(25);t.exports=function(u){return c(this,u).get(u)}},function(t,i,o){var c=o(25);t.exports=function(u){return c(this,u).has(u)}},function(t,i,o){var c=o(25);t.exports=function(u,h){var m=c(this,u),b=m.size;return m.set(u,h),this.size+=m.size==b?0:1,this}},function(t,i,o){var c=o(122)();t.exports=c},function(t,i){t.exports=function(o){return function(c,u,h){for(var m=-1,b=Object(c),k=h(c),S=k.length;S--;){var E=k[o?S:++m];if(u(b[E],E,b)===!1)break}return c}}},function(t,i,o){var c=o(49),u=o(51),h=o(52),m=o(53),b=o(54),k=o(34),S=o(12),E=o(127),F=o(35),L=o(28),V=o(10),P=o(57),ee=o(58),$=o(59),le=o(130);t.exports=function(X,Te,Re,B,O,z,Y){var G=$(X,Re),se=$(Te,Re),H=Y.get(se);if(H)c(X,Re,H);else{var Le=z?z(G,se,Re+"",X,Te,Y):void 0,Oe=Le===void 0;if(Oe){var ne=S(se),be=!ne&&F(se),me=!ne&&!be&&ee(se);Le=se,ne||be||me?S(G)?Le=G:E(G)?Le=m(G):be?(Oe=!1,Le=u(se,!0)):me?(Oe=!1,Le=h(se,!0)):Le=[]:P(se)||k(se)?(Le=G,k(G)?Le=le(G):V(G)&&!L(G)||(Le=b(se))):Oe=!1}Oe&&(Y.set(se,Le),O(Le,se,B,z,Y),Y.delete(se)),c(X,Re,Le)}}},function(t,i,o){var c=o(8).Uint8Array;t.exports=c},function(t,i,o){var c=o(10),u=Object.create,h=(function(){function m(){}return function(b){if(!c(b))return{};if(u)return u(b);m.prototype=b;var k=new m;return m.prototype=void 0,k}})();t.exports=h},function(t,i,o){var c=o(17),u=o(11);t.exports=function(h){return u(h)&&c(h)=="[object Arguments]"}},function(t,i,o){var c=o(26),u=o(11);t.exports=function(h){return u(h)&&c(h)}},function(t,i){t.exports=function(){return!1}},function(t,i,o){var c=o(17),u=o(56),h=o(11),m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m["[object Arguments]"]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m["[object Function]"]=m["[object Map]"]=m["[object Number]"]=m["[object Object]"]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1,t.exports=function(b){return h(b)&&u(b.length)&&!!m[c(b)]}},function(t,i,o){var c=o(18),u=o(20);t.exports=function(h){return c(h,u(h))}},function(t,i){t.exports=function(o,c){for(var u=-1,h=Array(o);++u<o;)h[u]=c(u);return h}},function(t,i,o){var c=o(10),u=o(33),h=o(133),m=Object.prototype.hasOwnProperty;t.exports=function(b){if(!c(b))return h(b);var k=u(b),S=[];for(var E in b)(E!="constructor"||!k&&m.call(b,E))&&S.push(E);return S}},function(t,i){t.exports=function(o){var c=[];if(o!=null)for(var u in Object(o))c.push(u);return c}},function(t,i,o){var c=o(135),u=o(140);t.exports=function(h){return c((function(m,b){var k=-1,S=b.length,E=S>1?b[S-1]:void 0,F=S>2?b[2]:void 0;for(E=h.length>3&&typeof E=="function"?(S--,E):void 0,F&&u(b[0],b[1],F)&&(E=S<3?void 0:E,S=1),m=Object(m);++k<S;){var L=b[k];L&&h(m,L,k,E)}return m}))}},function(t,i,o){var c=o(63),u=o(64),h=o(65);t.exports=function(m,b){return h(u(m,b,c),m+"")}},function(t,i){t.exports=function(o,c,u){switch(u.length){case 0:return o.call(c);case 1:return o.call(c,u[0]);case 2:return o.call(c,u[0],u[1]);case 3:return o.call(c,u[0],u[1],u[2])}return o.apply(c,u)}},function(t,i,o){var c=o(138),u=o(50),h=o(63),m=u?function(b,k){return u(b,"toString",{configurable:!0,enumerable:!1,value:c(k),writable:!0})}:h;t.exports=m},function(t,i){t.exports=function(o){return function(){return o}}},function(t,i){var o=Date.now;t.exports=function(c){var u=0,h=0;return function(){var m=o(),b=16-(m-h);if(h=m,b>0){if(++u>=800)return arguments[0]}else u=0;return c.apply(void 0,arguments)}}},function(t,i,o){var c=o(23),u=o(26),h=o(62),m=o(10);t.exports=function(b,k,S){if(!m(S))return!1;var E=typeof k;return!!(E=="number"?u(S)&&h(k,S.length):E=="string"&&k in S)&&c(S[k],b)}},function(t,i){typeof window<"u"&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(o){window.setTimeout(o,1e3/60)})),typeof Math.imul!="function"&&(Math.imul=function(o,c){var u=65535&o,h=65535&c;return u*h+((o>>>16&65535)*h+u*(c>>>16&65535)<<16>>>0)|0}),typeof Object.assign!="function"&&(Object.assign=function(o){if(o===null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(o),u=1;u<arguments.length;u++){var h=arguments[u];if(h!==null)for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(c[m]=h[m])}return c})},function(t,i){t.exports=function(o){if(Array.isArray(o))return o},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(o,c){var u=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(u!=null){var h,m,b,k,S=[],E=!0,F=!1;try{if(b=(u=u.call(o)).next,c===0){if(Object(u)!==u)return;E=!1}else for(;!(E=(h=b.call(u)).done)&&(S.push(h.value),S.length!==c);E=!0);}catch(L){F=!0,m=L}finally{try{if(!E&&u.return!=null&&(k=u.return(),Object(k)!==k))return}finally{if(F)throw m}}return S}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(9).default;t.exports=function(u,h){if(c(u)!="object"||!u)return u;var m=u[Symbol.toPrimitive];if(m!==void 0){var b=m.call(u,h||"default");if(c(b)!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(u)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(69),u=o(70),h=o(147),m=o(72),b=o(73),k=o(148),S=o(149);function E(){var F=u(),L=F.m(E),V=(Object.getPrototypeOf?Object.getPrototypeOf(L):L.__proto__).constructor;function P(le){var X=typeof le=="function"&&le.constructor;return!!X&&(X===V||(X.displayName||X.name)==="GeneratorFunction")}var ee={throw:1,return:2,break:3,continue:3};function $(le){var X,Te;return function(Re){X||(X={stop:function(){return Te(Re.a,2)},catch:function(){return Re.v},abrupt:function(B,O){return Te(Re.a,ee[B],O)},delegateYield:function(B,O,z){return X.resultName=O,Te(Re.d,S(B),z)},finish:function(B){return Te(Re.f,B)}},Te=function(B,O,z){Re.p=X.prev,Re.n=X.next;try{return B(O,z)}finally{X.next=Re.n}}),X.resultName&&(X[X.resultName]=Re.v,X.resultName=void 0),X.sent=Re.v,X.next=Re.n;try{return le.call(this,X)}finally{Re.p=X.prev,Re.n=X.next}}}return(t.exports=E=function(){return{wrap:function(le,X,Te,Re){return F.w($(le),X,Te,Re&&Re.reverse())},isGeneratorFunction:P,mark:F.m,awrap:function(le,X){return new c(le,X)},AsyncIterator:b,async:function(le,X,Te,Re,B){return(P(X)?m:h)($(le),X,Te,Re,B)},keys:k,values:S}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=E,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(72);t.exports=function(u,h,m,b,k){var S=c(u,h,m,b,k);return S.next().then((function(E){return E.done?E.value:S.next()}))},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(o){var c=Object(o),u=[];for(var h in c)u.unshift(h);return function m(){for(;u.length;)if((h=u.pop())in c)return m.value=h,m.done=!1,m;return m.done=!0,m}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(9).default;t.exports=function(u){if(u!=null){var h=u[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],m=0;if(h)return h.call(u);if(typeof u.next=="function")return u;if(!isNaN(u.length))return{next:function(){return u&&m>=u.length&&(u=void 0),{value:u&&u[m++],done:!u}}}}throw new TypeError(c(u)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(1);t.exports=function(u,h){for(;!{}.hasOwnProperty.call(u,h)&&(u=c(u))!==null;);return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(67);t.exports=function(u){if(Array.isArray(u))return c(u)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(o,c){if(o==null)return{};var u={};for(var h in o)if({}.hasOwnProperty.call(o,h)){if(c.indexOf(h)!==-1)continue;u[h]=o[h]}return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(45),u=o(157),h=o(60),m=o(158),b=o(161),k=o(51),S=o(53),E=o(162),F=o(164),L=o(165),V=o(78),P=o(42),ee=o(170),$=o(171),le=o(54),X=o(12),Te=o(35),Re=o(175),B=o(10),O=o(177),z=o(39),Y=o(20),G={};G["[object Arguments]"]=G["[object Array]"]=G["[object ArrayBuffer]"]=G["[object DataView]"]=G["[object Boolean]"]=G["[object Date]"]=G["[object Float32Array]"]=G["[object Float64Array]"]=G["[object Int8Array]"]=G["[object Int16Array]"]=G["[object Int32Array]"]=G["[object Map]"]=G["[object Number]"]=G["[object Object]"]=G["[object RegExp]"]=G["[object Set]"]=G["[object String]"]=G["[object Symbol]"]=G["[object Uint8Array]"]=G["[object Uint8ClampedArray]"]=G["[object Uint16Array]"]=G["[object Uint32Array]"]=!0,G["[object Error]"]=G["[object Function]"]=G["[object WeakMap]"]=!1,t.exports=function se(H,Le,Oe,ne,be,me){var Ae,He=1&Le,Q=2&Le,we=4&Le;if(Oe&&(Ae=be?Oe(H,ne,be,me):Oe(H)),Ae!==void 0)return Ae;if(!B(H))return H;var Ne=X(H);if(Ne){if(Ae=ee(H),!He)return S(H,Ae)}else{var je=P(H),ce=je=="[object Function]"||je=="[object GeneratorFunction]";if(Te(H))return k(H,He);if(je=="[object Object]"||je=="[object Arguments]"||ce&&!be){if(Ae=Q||ce?{}:le(H),!He)return Q?F(H,b(Ae,H)):E(H,m(Ae,H))}else{if(!G[je])return be?H:{};Ae=$(H,je,He)}}me||(me=new c);var Ee=me.get(H);if(Ee)return Ee;me.set(H,Ae),O(H)?H.forEach((function(xe){Ae.add(se(xe,Le,Oe,xe,H,me))})):Re(H)&&H.forEach((function(xe,Fe){Ae.set(Fe,se(xe,Le,Oe,Fe,H,me))}));var ue=Ne?void 0:(we?Q?V:L:Q?Y:z)(H);return u(ue||H,(function(xe,Fe){ue&&(xe=H[Fe=xe]),h(Ae,Fe,se(xe,Le,Oe,Fe,H,me))})),Ae}},function(t,i){t.exports=function(o,c){for(var u=-1,h=o==null?0:o.length;++u<h&&c(o[u],u,o)!==!1;);return o}},function(t,i,o){var c=o(18),u=o(39);t.exports=function(h,m){return h&&c(m,u(m),h)}},function(t,i,o){var c=o(33),u=o(160),h=Object.prototype.hasOwnProperty;t.exports=function(m){if(!c(m))return u(m);var b=[];for(var k in Object(m))h.call(m,k)&&k!="constructor"&&b.push(k);return b}},function(t,i,o){var c=o(55)(Object.keys,Object);t.exports=c},function(t,i,o){var c=o(18),u=o(20);t.exports=function(h,m){return h&&c(m,u(m),h)}},function(t,i,o){var c=o(18),u=o(40);t.exports=function(h,m){return c(h,u(h),m)}},function(t,i){t.exports=function(o,c){for(var u=-1,h=o==null?0:o.length,m=0,b=[];++u<h;){var k=o[u];c(k,u,o)&&(b[m++]=k)}return b}},function(t,i,o){var c=o(18),u=o(76);t.exports=function(h,m){return c(h,u(h),m)}},function(t,i,o){var c=o(77),u=o(40),h=o(39);t.exports=function(m){return c(m,h,u)}},function(t,i,o){var c=o(14)(o(8),"DataView");t.exports=c},function(t,i,o){var c=o(14)(o(8),"Promise");t.exports=c},function(t,i,o){var c=o(14)(o(8),"Set");t.exports=c},function(t,i,o){var c=o(14)(o(8),"WeakMap");t.exports=c},function(t,i){var o=Object.prototype.hasOwnProperty;t.exports=function(c){var u=c.length,h=new c.constructor(u);return u&&typeof c[0]=="string"&&o.call(c,"index")&&(h.index=c.index,h.input=c.input),h}},function(t,i,o){var c=o(31),u=o(172),h=o(173),m=o(174),b=o(52);t.exports=function(k,S,E){var F=k.constructor;switch(S){case"[object ArrayBuffer]":return c(k);case"[object Boolean]":case"[object Date]":return new F(+k);case"[object DataView]":return u(k,E);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return b(k,E);case"[object Map]":return new F;case"[object Number]":case"[object String]":return new F(k);case"[object RegExp]":return h(k);case"[object Set]":return new F;case"[object Symbol]":return m(k)}}},function(t,i,o){var c=o(31);t.exports=function(u,h){var m=h?c(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.byteLength)}},function(t,i){var o=/\w*$/;t.exports=function(c){var u=new c.constructor(c.source,o.exec(c));return u.lastIndex=c.lastIndex,u}},function(t,i,o){var c=o(19),u=c?c.prototype:void 0,h=u?u.valueOf:void 0;t.exports=function(m){return h?Object(h.call(m)):{}}},function(t,i,o){var c=o(176),u=o(36),h=o(37),m=h&&h.isMap,b=m?u(m):c;t.exports=b},function(t,i,o){var c=o(42),u=o(11);t.exports=function(h){return u(h)&&c(h)=="[object Map]"}},function(t,i,o){var c=o(178),u=o(36),h=o(37),m=h&&h.isSet,b=m?u(m):c;t.exports=b},function(t,i,o){var c=o(42),u=o(11);t.exports=function(h){return u(h)&&c(h)=="[object Set]"}},function(t,i,o){var c=o(43),u=o(186),h=o(187),m=o(79);t.exports=function(b,k){return k=c(k,b),(b=h(b,k))==null||delete b[m(u(k))]}},function(t,i,o){var c=o(12),u=o(44),h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;t.exports=function(b,k){if(c(b))return!1;var S=typeof b;return!(S!="number"&&S!="symbol"&&S!="boolean"&&b!=null&&!u(b))||m.test(b)||!h.test(b)||k!=null&&b in Object(k)}},function(t,i,o){var c=o(182),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,m=c((function(b){var k=[];return b.charCodeAt(0)===46&&k.push(""),b.replace(u,(function(S,E,F,L){k.push(F?L.replace(h,"$1"):E||S)})),k}));t.exports=m},function(t,i,o){var c=o(183);t.exports=function(u){var h=c(u,(function(b){return m.size===500&&m.clear(),b})),m=h.cache;return h}},function(t,i,o){var c=o(48);function u(h,m){if(typeof h!="function"||m!=null&&typeof m!="function")throw new TypeError("Expected a function");var b=function(){var k=arguments,S=m?m.apply(this,k):k[0],E=b.cache;if(E.has(S))return E.get(S);var F=h.apply(this,k);return b.cache=E.set(S,F)||E,F};return b.cache=new(u.Cache||c),b}u.Cache=c,t.exports=u},function(t,i,o){var c=o(185);t.exports=function(u){return u==null?"":c(u)}},function(t,i,o){var c=o(19),u=o(74),h=o(12),m=o(44),b=c?c.prototype:void 0,k=b?b.toString:void 0;t.exports=function S(E){if(typeof E=="string")return E;if(h(E))return u(E,S)+"";if(m(E))return k?k.call(E):"";var F=E+"";return F=="0"&&1/E==-1/0?"-0":F}},function(t,i){t.exports=function(o){var c=o==null?0:o.length;return c?o[c-1]:void 0}},function(t,i,o){var c=o(188),u=o(189);t.exports=function(h,m){return m.length<2?h:c(h,u(m,0,-1))}},function(t,i,o){var c=o(43),u=o(79);t.exports=function(h,m){for(var b=0,k=(m=c(m,h)).length;h!=null&&b<k;)h=h[u(m[b++])];return b&&b==k?h:void 0}},function(t,i){t.exports=function(o,c,u){var h=-1,m=o.length;c<0&&(c=-c>m?0:m+c),(u=u>m?m:u)<0&&(u+=m),m=c>u?0:u-c>>>0,c>>>=0;for(var b=Array(m);++h<m;)b[h]=o[h+c];return b}},function(t,i,o){var c=o(57);t.exports=function(u){return c(u)?void 0:u}},function(t,i,o){var c=o(192),u=o(64),h=o(65);t.exports=function(m){return h(u(m,void 0,c),m+"")}},function(t,i,o){var c=o(193);t.exports=function(u){return u!=null&&u.length?c(u,1):[]}},function(t,i,o){var c=o(41),u=o(194);t.exports=function h(m,b,k,S,E){var F=-1,L=m.length;for(k||(k=u),E||(E=[]);++F<L;){var V=m[F];b>0&&k(V)?b>1?h(V,b-1,k,S,E):c(E,V):S||(E[E.length]=V)}return E}},function(t,i,o){var c=o(19),u=o(34),h=o(12),m=c?c.isConcatSpreadable:void 0;t.exports=function(b){return h(b)||u(b)||!!(m&&b&&b[m])}},function(t,i){t.exports=function(o){try{return Function.toString.call(o).indexOf("[native code]")!==-1}catch{return typeof o=="function"}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){var c=o(197),u=o(38);t.exports=function(h,m,b){if(c())return Reflect.construct.apply(null,arguments);var k=[null];k.push.apply(k,m);var S=new(h.bind.apply(h,k));return b&&u(S,b.prototype),S},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){function o(){try{var c=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(t.exports=o=function(){return!!c},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,o){o.r(i),o.d(i,"BarcodeDecoder",(function(){return Vl})),o.d(i,"Readers",(function(){return m})),o.d(i,"CameraAccess",(function(){return Uo})),o.d(i,"ImageDebug",(function(){return Na})),o.d(i,"ImageWrapper",(function(){return Kn})),o.d(i,"ResultCollector",(function(){return Ca}));var c={};o.r(c),o.d(c,"create",(function(){return O})),o.d(c,"clone",(function(){return z})),o.d(c,"copy",(function(){return Y})),o.d(c,"identity",(function(){return G})),o.d(c,"fromValues",(function(){return se})),o.d(c,"set",(function(){return H})),o.d(c,"transpose",(function(){return Le})),o.d(c,"invert",(function(){return Oe})),o.d(c,"adjoint",(function(){return ne})),o.d(c,"determinant",(function(){return be})),o.d(c,"multiply",(function(){return me})),o.d(c,"rotate",(function(){return Ae})),o.d(c,"scale",(function(){return He})),o.d(c,"fromRotation",(function(){return Q})),o.d(c,"fromScaling",(function(){return we})),o.d(c,"str",(function(){return Ne})),o.d(c,"frob",(function(){return je})),o.d(c,"LDU",(function(){return ce})),o.d(c,"add",(function(){return Ee})),o.d(c,"subtract",(function(){return ue})),o.d(c,"exactEquals",(function(){return xe})),o.d(c,"equals",(function(){return Fe})),o.d(c,"multiplyScalar",(function(){return ot})),o.d(c,"multiplyScalarAndAdd",(function(){return Ue})),o.d(c,"mul",(function(){return _e})),o.d(c,"sub",(function(){return Ke}));var u={};o.r(u),o.d(u,"create",(function(){return ve})),o.d(u,"clone",(function(){return bt})),o.d(u,"fromValues",(function(){return ht})),o.d(u,"copy",(function(){return Ye})),o.d(u,"set",(function(){return Ot})),o.d(u,"add",(function(){return jt})),o.d(u,"subtract",(function(){return te})),o.d(u,"multiply",(function(){return it})),o.d(u,"divide",(function(){return kt})),o.d(u,"ceil",(function(){return Rt})),o.d(u,"floor",(function(){return mt})),o.d(u,"min",(function(){return Ht})),o.d(u,"max",(function(){return Zt})),o.d(u,"round",(function(){return Qt})),o.d(u,"scale",(function(){return ze})),o.d(u,"scaleAndAdd",(function(){return Ze})),o.d(u,"distance",(function(){return gt})),o.d(u,"squaredDistance",(function(){return Lt})),o.d(u,"length",(function(){return Bt})),o.d(u,"squaredLength",(function(){return Ct})),o.d(u,"negate",(function(){return Dt})),o.d(u,"inverse",(function(){return St})),o.d(u,"normalize",(function(){return wt})),o.d(u,"dot",(function(){return Kt})),o.d(u,"cross",(function(){return bn})),o.d(u,"lerp",(function(){return un})),o.d(u,"random",(function(){return Pn})),o.d(u,"transformMat2",(function(){return fs})),o.d(u,"transformMat2d",(function(){return rn})),o.d(u,"transformMat3",(function(){return Bn})),o.d(u,"transformMat4",(function(){return ss})),o.d(u,"rotate",(function(){return Gn})),o.d(u,"angle",(function(){return xr})),o.d(u,"signedAngle",(function(){return as})),o.d(u,"zero",(function(){return ls})),o.d(u,"str",(function(){return bs})),o.d(u,"exactEquals",(function(){return ur})),o.d(u,"equals",(function(){return Vs})),o.d(u,"len",(function(){return sr})),o.d(u,"sub",(function(){return pe})),o.d(u,"mul",(function(){return Xe})),o.d(u,"div",(function(){return st})),o.d(u,"dist",(function(){return nt})),o.d(u,"sqrDist",(function(){return Qe})),o.d(u,"sqrLen",(function(){return ie})),o.d(u,"forEach",(function(){return lt}));var h={};o.r(h),o.d(h,"create",(function(){return ft})),o.d(h,"clone",(function(){return _t})),o.d(h,"length",(function(){return It})),o.d(h,"fromValues",(function(){return ln})),o.d(h,"copy",(function(){return Nn})),o.d(h,"set",(function(){return Fn})),o.d(h,"add",(function(){return Ys})),o.d(h,"subtract",(function(){return J})),o.d(h,"multiply",(function(){return U})),o.d(h,"divide",(function(){return re})),o.d(h,"ceil",(function(){return ae})),o.d(h,"floor",(function(){return ke})),o.d(h,"min",(function(){return tt})),o.d(h,"max",(function(){return $e})),o.d(h,"round",(function(){return zt})),o.d(h,"scale",(function(){return Nt})),o.d(h,"scaleAndAdd",(function(){return Ft})),o.d(h,"distance",(function(){return he})),o.d(h,"squaredDistance",(function(){return De})),o.d(h,"squaredLength",(function(){return Be})),o.d(h,"negate",(function(){return vt})),o.d(h,"inverse",(function(){return yt})),o.d(h,"normalize",(function(){return xt})),o.d(h,"dot",(function(){return At})),o.d(h,"cross",(function(){return Yt})),o.d(h,"lerp",(function(){return dn})),o.d(h,"slerp",(function(){return tn})),o.d(h,"hermite",(function(){return Sn})),o.d(h,"bezier",(function(){return xs})),o.d(h,"random",(function(){return Fa})),o.d(h,"transformMat4",(function(){return Qs})),o.d(h,"transformMat3",(function(){return za})),o.d(h,"transformQuat",(function(){return Ui})),o.d(h,"rotateX",(function(){return Tn})),o.d(h,"rotateY",(function(){return cs})),o.d(h,"rotateZ",(function(){return Cr})),o.d(h,"angle",(function(){return dr})),o.d(h,"zero",(function(){return Ns})),o.d(h,"str",(function(){return rr})),o.d(h,"exactEquals",(function(){return hr})),o.d(h,"equals",(function(){return ra})),o.d(h,"sub",(function(){return qa})),o.d(h,"mul",(function(){return Co})),o.d(h,"div",(function(){return Fr})),o.d(h,"dist",(function(){return Ao})),o.d(h,"sqrDist",(function(){return aa})),o.d(h,"len",(function(){return Rl})),o.d(h,"sqrLen",(function(){return zr})),o.d(h,"forEach",(function(){return hi}));var m={};o.r(m),o.d(m,"BarcodeReader",(function(){return Rr})),o.d(m,"TwoOfFiveReader",(function(){return Pl})),o.d(m,"NewCodabarReader",(function(){return ar})),o.d(m,"Code128Reader",(function(){return Ol})),o.d(m,"Code32Reader",(function(){return On})),o.d(m,"Code39Reader",(function(){return Tt})),o.d(m,"Code39VINReader",(function(){return Wr})),o.d(m,"Code93Reader",(function(){return $i})),o.d(m,"EAN2Reader",(function(){return _u})),o.d(m,"EAN5Reader",(function(){return Su})),o.d(m,"EAN8Reader",(function(){return Tu})),o.d(m,"EANReader",(function(){return la})),o.d(m,"I2of5Reader",(function(){return uh})),o.d(m,"PharmacodeReader",(function(){return xc})),o.d(m,"UPCEReader",(function(){return wc})),o.d(m,"UPCReader",(function(){return Gi}));var b=o(9),k=o.n(b),S=o(15),E=o.n(S),F=(o(141),o(80)),L=o.n(F),V=o(2),P=o.n(V),ee=o(3),$=o.n(ee),le=o(0),X=o.n(le),Te=typeof Float32Array<"u"?Float32Array:Array,Re=Math.random;function B(g){return g>=0?Math.round(g):g%.5==0?Math.floor(g):Math.round(g)}function O(){var g=new Te(4);return Te!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}function z(g){var x=new Te(4);return x[0]=g[0],x[1]=g[1],x[2]=g[2],x[3]=g[3],x}function Y(g,x){return g[0]=x[0],g[1]=x[1],g[2]=x[2],g[3]=x[3],g}function G(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=1,g}function se(g,x,f,v){var w=new Te(4);return w[0]=g,w[1]=x,w[2]=f,w[3]=v,w}function H(g,x,f,v,w){return g[0]=x,g[1]=f,g[2]=v,g[3]=w,g}function Le(g,x){if(g===x){var f=x[1];g[1]=x[2],g[2]=f}else g[0]=x[0],g[1]=x[2],g[2]=x[1],g[3]=x[3];return g}function Oe(g,x){var f=x[0],v=x[1],w=x[2],_=x[3],N=f*_-w*v;return N?(N=1/N,g[0]=_*N,g[1]=-v*N,g[2]=-w*N,g[3]=f*N,g):null}function ne(g,x){var f=x[0];return g[0]=x[3],g[1]=-x[1],g[2]=-x[2],g[3]=f,g}function be(g){return g[0]*g[3]-g[2]*g[1]}function me(g,x,f){var v=x[0],w=x[1],_=x[2],N=x[3],R=f[0],D=f[1],I=f[2],W=f[3];return g[0]=v*R+_*D,g[1]=w*R+N*D,g[2]=v*I+_*W,g[3]=w*I+N*W,g}function Ae(g,x,f){var v=x[0],w=x[1],_=x[2],N=x[3],R=Math.sin(f),D=Math.cos(f);return g[0]=v*D+_*R,g[1]=w*D+N*R,g[2]=v*-R+_*D,g[3]=w*-R+N*D,g}function He(g,x,f){var v=x[0],w=x[1],_=x[2],N=x[3],R=f[0],D=f[1];return g[0]=v*R,g[1]=w*R,g[2]=_*D,g[3]=N*D,g}function Q(g,x){var f=Math.sin(x),v=Math.cos(x);return g[0]=v,g[1]=f,g[2]=-f,g[3]=v,g}function we(g,x){return g[0]=x[0],g[1]=0,g[2]=0,g[3]=x[1],g}function Ne(g){return"mat2("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+")"}function je(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]+g[3]*g[3])}function ce(g,x,f,v){return g[2]=v[2]/v[0],f[0]=v[0],f[1]=v[1],f[3]=v[3]-g[2]*f[1],[g,x,f]}function Ee(g,x,f){return g[0]=x[0]+f[0],g[1]=x[1]+f[1],g[2]=x[2]+f[2],g[3]=x[3]+f[3],g}function ue(g,x,f){return g[0]=x[0]-f[0],g[1]=x[1]-f[1],g[2]=x[2]-f[2],g[3]=x[3]-f[3],g}function xe(g,x){return g[0]===x[0]&&g[1]===x[1]&&g[2]===x[2]&&g[3]===x[3]}function Fe(g,x){var f=g[0],v=g[1],w=g[2],_=g[3],N=x[0],R=x[1],D=x[2],I=x[3];return Math.abs(f-N)<=1e-6*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(v-R)<=1e-6*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(w-D)<=1e-6*Math.max(1,Math.abs(w),Math.abs(D))&&Math.abs(_-I)<=1e-6*Math.max(1,Math.abs(_),Math.abs(I))}function ot(g,x,f){return g[0]=x[0]*f,g[1]=x[1]*f,g[2]=x[2]*f,g[3]=x[3]*f,g}function Ue(g,x,f,v){return g[0]=x[0]+f[0]*v,g[1]=x[1]+f[1]*v,g[2]=x[2]+f[2]*v,g[3]=x[3]+f[3]*v,g}var _e=me,Ke=ue;function ve(){var g=new Te(2);return Te!=Float32Array&&(g[0]=0,g[1]=0),g}function bt(g){var x=new Te(2);return x[0]=g[0],x[1]=g[1],x}function ht(g,x){var f=new Te(2);return f[0]=g,f[1]=x,f}function Ye(g,x){return g[0]=x[0],g[1]=x[1],g}function Ot(g,x,f){return g[0]=x,g[1]=f,g}function jt(g,x,f){return g[0]=x[0]+f[0],g[1]=x[1]+f[1],g}function te(g,x,f){return g[0]=x[0]-f[0],g[1]=x[1]-f[1],g}function it(g,x,f){return g[0]=x[0]*f[0],g[1]=x[1]*f[1],g}function kt(g,x,f){return g[0]=x[0]/f[0],g[1]=x[1]/f[1],g}function Rt(g,x){return g[0]=Math.ceil(x[0]),g[1]=Math.ceil(x[1]),g}function mt(g,x){return g[0]=Math.floor(x[0]),g[1]=Math.floor(x[1]),g}function Ht(g,x,f){return g[0]=Math.min(x[0],f[0]),g[1]=Math.min(x[1],f[1]),g}function Zt(g,x,f){return g[0]=Math.max(x[0],f[0]),g[1]=Math.max(x[1],f[1]),g}function Qt(g,x){return g[0]=B(x[0]),g[1]=B(x[1]),g}function ze(g,x,f){return g[0]=x[0]*f,g[1]=x[1]*f,g}function Ze(g,x,f,v){return g[0]=x[0]+f[0]*v,g[1]=x[1]+f[1]*v,g}function gt(g,x){var f=x[0]-g[0],v=x[1]-g[1];return Math.sqrt(f*f+v*v)}function Lt(g,x){var f=x[0]-g[0],v=x[1]-g[1];return f*f+v*v}function Bt(g){var x=g[0],f=g[1];return Math.sqrt(x*x+f*f)}function Ct(g){var x=g[0],f=g[1];return x*x+f*f}function Dt(g,x){return g[0]=-x[0],g[1]=-x[1],g}function St(g,x){return g[0]=1/x[0],g[1]=1/x[1],g}function wt(g,x){var f=x[0],v=x[1],w=f*f+v*v;return w>0&&(w=1/Math.sqrt(w)),g[0]=x[0]*w,g[1]=x[1]*w,g}function Kt(g,x){return g[0]*x[0]+g[1]*x[1]}function bn(g,x,f){var v=x[0]*f[1]-x[1]*f[0];return g[0]=g[1]=0,g[2]=v,g}function un(g,x,f,v){var w=x[0],_=x[1];return g[0]=w+v*(f[0]-w),g[1]=_+v*(f[1]-_),g}function Pn(g,x){x=x===void 0?1:x;var f=2*Re()*Math.PI;return g[0]=Math.cos(f)*x,g[1]=Math.sin(f)*x,g}function fs(g,x,f){var v=x[0],w=x[1];return g[0]=f[0]*v+f[2]*w,g[1]=f[1]*v+f[3]*w,g}function rn(g,x,f){var v=x[0],w=x[1];return g[0]=f[0]*v+f[2]*w+f[4],g[1]=f[1]*v+f[3]*w+f[5],g}function Bn(g,x,f){var v=x[0],w=x[1];return g[0]=f[0]*v+f[3]*w+f[6],g[1]=f[1]*v+f[4]*w+f[7],g}function ss(g,x,f){var v=x[0],w=x[1];return g[0]=f[0]*v+f[4]*w+f[12],g[1]=f[1]*v+f[5]*w+f[13],g}function Gn(g,x,f,v){var w=x[0]-f[0],_=x[1]-f[1],N=Math.sin(v),R=Math.cos(v);return g[0]=w*R-_*N+f[0],g[1]=w*N+_*R+f[1],g}function xr(g,x){var f=g[0],v=g[1],w=x[0],_=x[1];return Math.abs(Math.atan2(v*w-f*_,f*w+v*_))}function as(g,x){var f=g[0],v=g[1],w=x[0],_=x[1];return Math.atan2(f*_-v*w,f*w+v*_)}function ls(g){return g[0]=0,g[1]=0,g}function bs(g){return"vec2("+g[0]+", "+g[1]+")"}function ur(g,x){return g[0]===x[0]&&g[1]===x[1]}function Vs(g,x){var f=g[0],v=g[1],w=x[0],_=x[1];return Math.abs(f-w)<=1e-6*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(v-_)<=1e-6*Math.max(1,Math.abs(v),Math.abs(_))}var ms,sr=Bt,pe=te,Xe=it,st=kt,nt=gt,Qe=Lt,ie=Ct,lt=(ms=ve(),function(g,x,f,v,w,_){var N,R;for(x||(x=2),f||(f=0),R=v?Math.min(v*x+f,g.length):g.length,N=f;N<R;N+=x)ms[0]=g[N],ms[1]=g[N+1],w(ms,ms,_),g[N]=ms[0],g[N+1]=ms[1];return g});function ft(){var g=new Te(3);return Te!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g}function _t(g){var x=new Te(3);return x[0]=g[0],x[1]=g[1],x[2]=g[2],x}function It(g){var x=g[0],f=g[1],v=g[2];return Math.sqrt(x*x+f*f+v*v)}function ln(g,x,f){var v=new Te(3);return v[0]=g,v[1]=x,v[2]=f,v}function Nn(g,x){return g[0]=x[0],g[1]=x[1],g[2]=x[2],g}function Fn(g,x,f,v){return g[0]=x,g[1]=f,g[2]=v,g}function Ys(g,x,f){return g[0]=x[0]+f[0],g[1]=x[1]+f[1],g[2]=x[2]+f[2],g}function J(g,x,f){return g[0]=x[0]-f[0],g[1]=x[1]-f[1],g[2]=x[2]-f[2],g}function U(g,x,f){return g[0]=x[0]*f[0],g[1]=x[1]*f[1],g[2]=x[2]*f[2],g}function re(g,x,f){return g[0]=x[0]/f[0],g[1]=x[1]/f[1],g[2]=x[2]/f[2],g}function ae(g,x){return g[0]=Math.ceil(x[0]),g[1]=Math.ceil(x[1]),g[2]=Math.ceil(x[2]),g}function ke(g,x){return g[0]=Math.floor(x[0]),g[1]=Math.floor(x[1]),g[2]=Math.floor(x[2]),g}function tt(g,x,f){return g[0]=Math.min(x[0],f[0]),g[1]=Math.min(x[1],f[1]),g[2]=Math.min(x[2],f[2]),g}function $e(g,x,f){return g[0]=Math.max(x[0],f[0]),g[1]=Math.max(x[1],f[1]),g[2]=Math.max(x[2],f[2]),g}function zt(g,x){return g[0]=B(x[0]),g[1]=B(x[1]),g[2]=B(x[2]),g}function Nt(g,x,f){return g[0]=x[0]*f,g[1]=x[1]*f,g[2]=x[2]*f,g}function Ft(g,x,f,v){return g[0]=x[0]+f[0]*v,g[1]=x[1]+f[1]*v,g[2]=x[2]+f[2]*v,g}function he(g,x){var f=x[0]-g[0],v=x[1]-g[1],w=x[2]-g[2];return Math.sqrt(f*f+v*v+w*w)}function De(g,x){var f=x[0]-g[0],v=x[1]-g[1],w=x[2]-g[2];return f*f+v*v+w*w}function Be(g){var x=g[0],f=g[1],v=g[2];return x*x+f*f+v*v}function vt(g,x){return g[0]=-x[0],g[1]=-x[1],g[2]=-x[2],g}function yt(g,x){return g[0]=1/x[0],g[1]=1/x[1],g[2]=1/x[2],g}function xt(g,x){var f=x[0],v=x[1],w=x[2],_=f*f+v*v+w*w;return _>0&&(_=1/Math.sqrt(_)),g[0]=x[0]*_,g[1]=x[1]*_,g[2]=x[2]*_,g}function At(g,x){return g[0]*x[0]+g[1]*x[1]+g[2]*x[2]}function Yt(g,x,f){var v=x[0],w=x[1],_=x[2],N=f[0],R=f[1],D=f[2];return g[0]=w*D-_*R,g[1]=_*N-v*D,g[2]=v*R-w*N,g}function dn(g,x,f,v){var w=x[0],_=x[1],N=x[2];return g[0]=w+v*(f[0]-w),g[1]=_+v*(f[1]-_),g[2]=N+v*(f[2]-N),g}function tn(g,x,f,v){var w=Math.acos(Math.min(Math.max(At(x,f),-1),1)),_=Math.sin(w),N=Math.sin((1-v)*w)/_,R=Math.sin(v*w)/_;return g[0]=N*x[0]+R*f[0],g[1]=N*x[1]+R*f[1],g[2]=N*x[2]+R*f[2],g}function Sn(g,x,f,v,w,_){var N=_*_,R=N*(2*_-3)+1,D=N*(_-2)+_,I=N*(_-1),W=N*(3-2*_);return g[0]=x[0]*R+f[0]*D+v[0]*I+w[0]*W,g[1]=x[1]*R+f[1]*D+v[1]*I+w[1]*W,g[2]=x[2]*R+f[2]*D+v[2]*I+w[2]*W,g}function xs(g,x,f,v,w,_){var N=1-_,R=N*N,D=_*_,I=R*N,W=3*_*R,Z=3*D*N,de=D*_;return g[0]=x[0]*I+f[0]*W+v[0]*Z+w[0]*de,g[1]=x[1]*I+f[1]*W+v[1]*Z+w[1]*de,g[2]=x[2]*I+f[2]*W+v[2]*Z+w[2]*de,g}function Fa(g,x){x=x===void 0?1:x;var f=2*Re()*Math.PI,v=2*Re()-1,w=Math.sqrt(1-v*v)*x;return g[0]=Math.cos(f)*w,g[1]=Math.sin(f)*w,g[2]=v*x,g}function Qs(g,x,f){var v=x[0],w=x[1],_=x[2],N=f[3]*v+f[7]*w+f[11]*_+f[15];return N=N||1,g[0]=(f[0]*v+f[4]*w+f[8]*_+f[12])/N,g[1]=(f[1]*v+f[5]*w+f[9]*_+f[13])/N,g[2]=(f[2]*v+f[6]*w+f[10]*_+f[14])/N,g}function za(g,x,f){var v=x[0],w=x[1],_=x[2];return g[0]=v*f[0]+w*f[3]+_*f[6],g[1]=v*f[1]+w*f[4]+_*f[7],g[2]=v*f[2]+w*f[5]+_*f[8],g}function Ui(g,x,f){var v=f[0],w=f[1],_=f[2],N=f[3],R=x[0],D=x[1],I=x[2],W=w*I-_*D,Z=_*R-v*I,de=v*D-w*R;return W+=W,Z+=Z,de+=de,g[0]=R+N*W+w*de-_*Z,g[1]=D+N*Z+_*W-v*de,g[2]=I+N*de+v*Z-w*W,g}function Tn(g,x,f,v){var w=[],_=[];return w[0]=x[0]-f[0],w[1]=x[1]-f[1],w[2]=x[2]-f[2],_[0]=w[0],_[1]=w[1]*Math.cos(v)-w[2]*Math.sin(v),_[2]=w[1]*Math.sin(v)+w[2]*Math.cos(v),g[0]=_[0]+f[0],g[1]=_[1]+f[1],g[2]=_[2]+f[2],g}function cs(g,x,f,v){var w=[],_=[];return w[0]=x[0]-f[0],w[1]=x[1]-f[1],w[2]=x[2]-f[2],_[0]=w[2]*Math.sin(v)+w[0]*Math.cos(v),_[1]=w[1],_[2]=w[2]*Math.cos(v)-w[0]*Math.sin(v),g[0]=_[0]+f[0],g[1]=_[1]+f[1],g[2]=_[2]+f[2],g}function Cr(g,x,f,v){var w=[],_=[];return w[0]=x[0]-f[0],w[1]=x[1]-f[1],w[2]=x[2]-f[2],_[0]=w[0]*Math.cos(v)-w[1]*Math.sin(v),_[1]=w[0]*Math.sin(v)+w[1]*Math.cos(v),_[2]=w[2],g[0]=_[0]+f[0],g[1]=_[1]+f[1],g[2]=_[2]+f[2],g}function dr(g,x){var f=g[0],v=g[1],w=g[2],_=x[0],N=x[1],R=x[2],D=Math.sqrt((f*f+v*v+w*w)*(_*_+N*N+R*R)),I=D&&At(g,x)/D;return Math.acos(Math.min(Math.max(I,-1),1))}function Ns(g){return g[0]=0,g[1]=0,g[2]=0,g}function rr(g){return"vec3("+g[0]+", "+g[1]+", "+g[2]+")"}function hr(g,x){return g[0]===x[0]&&g[1]===x[1]&&g[2]===x[2]}function ra(g,x){var f=g[0],v=g[1],w=g[2],_=x[0],N=x[1],R=x[2];return Math.abs(f-_)<=1e-6*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(v-N)<=1e-6*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(w-R)<=1e-6*Math.max(1,Math.abs(w),Math.abs(R))}var qa=J,Co=U,Fr=re,Ao=he,aa=De,Rl=It,zr=Be,hi=(function(){var g=ft();return function(x,f,v,w,_,N){var R,D;for(f||(f=3),v||(v=0),D=w?Math.min(w*f+v,x.length):x.length,R=v;R<D;R+=f)g[0]=x[R],g[1]=x[R+1],g[2]=x[R+2],_(g,g,N),x[R]=g[0],x[R+1]=g[1],x[R+2]=g[2];return x}})(),fr=function(g,x){g.fill(x)},Fi=function(g){for(var x=0,f=0;f<g.length;f++)g[f]>g[x]&&(x=f);return x},fi=function(g){for(var x=g.length,f=0;x--;)f+=g[x];return f},mi=function(g,x){var f=[],v={rad:0,vec:u.clone([0,0])},w={};function _(R){w[R.id]=R,f.push(R)}function N(){var R,D=0;for(R=0;R<f.length;R++)D+=f[R].rad;v.rad=D/f.length,v.vec=u.clone([Math.cos(v.rad),Math.sin(v.rad)])}return _(g),N(),{add:function(R){w[R.id]||(_(R),N())},fits:function(R){return Math.abs(u.dot(R.point.vec,v.vec))>x},getPoints:function(){return f},getCenter:function(){return v}}},ia=function(g,x,f){return{rad:g[f],point:g,id:x}};function wr(g,x){return{x:g,y:x,toVec2:function(){return u.clone([this.x,this.y])},toVec3:function(){return h.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function zi(g,x){x||(x=8);for(var f=g.data,v=f.length,w=8-x,_=new Int32Array(1<<x);v--;)_[f[v]>>w]++;return _}function Wn(g,x){var f=(function(v){var w,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,N=8-_;function R(Z,de){for(var ye=0,We=Z;We<=de;We++)ye+=w[We];return ye}function D(Z,de){for(var ye=0,We=Z;We<=de;We++)ye+=We*w[We];return ye}function I(){var Z,de,ye,We,fe=[0],Pe=(1<<_)-1;w=zi(v,_);for(var et=1;et<Pe;et++)(ye=(Z=R(0,et))*(de=R(et+1,Pe)))===0&&(ye=1),We=D(0,et)*de-D(et+1,Pe)*Z,fe[et]=We*We/ye;return Fi(fe)}var W=I();return W<<N})(g);return(function(v,w,_){_||(_=v);for(var N=v.data,R=N.length,D=_.data;R--;)D[R]=N[R]<w?1:0})(g,f,x),f}function _a(g,x,f){var v=g.length/4|0;if(f&&f.singleChannel===!0)for(var w=0;w<v;w++){var _=g[4*w+3];x[w]=_===0?255:g[4*w+0]}else for(var N=0;N<v;N++){var R=g[4*N+3];x[N]=R===0?255:.299*g[4*N+0]+.587*g[4*N+1]+.114*g[4*N+2]}}function Ml(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],f=g[0],v=g[1],w=g[2],_=w*v,N=_*(1-Math.abs(f/60%2-1)),R=w-_,D=0,I=0,W=0;return f<60?(D=_,I=N):f<120?(D=N,I=_):f<180?(I=_,W=N):f<240?(I=N,W=_):f<300?(D=N,W=_):f<360&&(D=_,W=N),x[0]=255*(D+R)|0,x[1]=255*(I+R)|0,x[2]=255*(W+R)|0,x}function ka(g){if(!Number.isFinite(g)||g<1)return[];for(var x=[],f=[],v=Math.sqrt(g),w=1;w<=v;w++)g%w==0&&(f.push(w),w!==g/w&&x.unshift(Math.floor(g/w)));return f.concat(x)}function Ro(g,x){var f,v=ka(x.x),w=ka(x.y),_=Math.max(x.x,x.y),N=(function(ye,We){for(var fe=0,Pe=0,et=[];fe<ye.length&&Pe<We.length;)ye[fe]===We[Pe]?(et.push(ye[fe]),fe++,Pe++):ye[fe]>We[Pe]?Pe++:fe++;return et})(v,w),R=[8,10,15,20,32,60,80],D={"x-small":5,small:4,medium:3,large:2,"x-large":1},I=D[g]||D.medium,W=R[I],Z=Math.floor(_/W);function de(ye){for(var We=0,fe=ye[Math.floor(ye.length/2)];We<ye.length-1&&ye[We]<Z;)We++;return We>0&&(fe=Math.abs(ye[We]-Z)>Math.abs(ye[We-1]-Z)?ye[We-1]:ye[We]),Z/fe<R[I+1]/R[I]&&Z/fe>R[I-1]/R[I]?{x:fe,y:fe}:null}return(f=de(N))||(f=de(ka(_)))||(f=de(ka(Z*W))),f||(f={x:Math.max(1,x.x),y:Math.max(1,x.y)}),f}var pi={top:function(g,x){return g.unit==="%"?Math.floor(x.height*(g.value/100)):null},right:function(g,x){return g.unit==="%"?Math.floor(x.width-x.width*(g.value/100)):null},bottom:function(g,x){return g.unit==="%"?Math.floor(x.height-x.height*(g.value/100)):null},left:function(g,x){return g.unit==="%"?Math.floor(x.width*(g.value/100)):null}};function Wa(g,x,f){var v={width:g,height:x},w=Object.keys(f).reduce((function(_,N){if(!pi[N])return _;var R=(function(I){return{value:parseFloat(I),unit:(I.indexOf("%"),I.length,"%")}})(f[N]),D=pi[N](R,v);return _[N]=D,_}),{});return{sx:w.left,sy:w.top,sw:w.right-w.left,sh:w.bottom-w.top}}function Ar(g){if(g<0)throw new Error("expected positive number, received ".concat(g))}var Kn=(function(){return $()((function g(x,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uint8Array,w=arguments.length>3?arguments[3]:void 0;P()(this,g),X()(this,"data",void 0),X()(this,"size",void 0),X()(this,"indexMapping",void 0),f?this.data=f:(this.data=new v(x.x*x.y),w&&fr(this.data,0)),this.size=x}),[{key:"inImageWithBorder",value:function(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Ar(x),g.x>=0&&g.y>=0&&g.x<this.size.x+2*x&&g.y<this.size.y+2*x}},{key:"subImageAsCopy",value:function(g,x){Ar(x.x),Ar(x.y);for(var f=g.size,v=f.x,w=f.y,_=0;_<v;_++)for(var N=0;N<w;N++)g.data[N*v+_]=this.data[(x.y+N)*this.size.x+x.x+_];return g}},{key:"get",value:function(g,x){return this.data[x*this.size.x+g]}},{key:"getSafe",value:function(g,x){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var f=0;f<this.size.x;f++)this.indexMapping.x[f]=f,this.indexMapping.x[f+this.size.x]=f;for(var v=0;v<this.size.y;v++)this.indexMapping.y[v]=v,this.indexMapping.y[v+this.size.y]=v}return this.data[this.indexMapping.y[x+this.size.y]*this.size.x+this.indexMapping.x[g+this.size.x]]}},{key:"set",value:function(g,x,f){return this.data[x*this.size.x+g]=f,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var g=this.size,x=g.x,f=g.y,v=0;v<x;v++)this.data[v]=this.data[(f-1)*x+v]=0;for(var w=1;w<f-1;w++)this.data[w*x]=this.data[w*x+(x-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(g){var x,f,v,w,_,N,R,D,I,W,Z=this.data,de=this.size.y,ye=this.size.x,We=[],fe=[],Pe=Math.PI,et=Pe/4;if(g<=0)return fe;for(_=0;_<g;_++)We[_]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(f=0;f<de;f++)for(w=f*f,x=0;x<ye;x++)(v=Z[f*ye+x])>0&&((N=We[v-1]).m00+=1,N.m01+=f,N.m10+=x,N.m11+=x*f,N.m02+=w,N.m20+=x*x);for(_=0;_<g;_++)N=We[_],isNaN(N.m00)||N.m00===0||(D=N.m10/N.m00,I=N.m01/N.m00,R=N.m11/N.m00-D*I,W=(N.m02/N.m00-I*I-(N.m20/N.m00-D*D))/(2*R),W=.5*Math.atan(W)+(R>=0?et:-et)+Pe,N.theta=(180*W/Pe+90)%180-90,N.theta<0&&(N.theta+=180),N.rad=W>Pe?W-Pe:W,N.vec=u.clone([Math.cos(W),Math.sin(W)]),fe.push(N));return fe}},{key:"getAsRGBA",value:function(){for(var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,x=new Uint8ClampedArray(4*this.size.x*this.size.y),f=0;f<this.size.y;f++)for(var v=0;v<this.size.x;v++){var w=f*this.size.x+v,_=this.get(v,f)*g;x[4*w+0]=_,x[4*w+1]=_,x[4*w+2]=_,x[4*w+3]=255}return x}},{key:"show",value:function(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var f=g.getContext("2d");if(!f)throw new Error("Unable to get canvas context");var v=f.getImageData(0,0,g.width,g.height),w=this.getAsRGBA(x);g.width=this.size.x,g.height=this.size.y;var _=new ImageData(w,v.width,v.height);f.putImageData(_,0,0)}},{key:"overlay",value:function(g,x,f){var v=x<0||x>360?360:x,w=[0,1,1],_=[0,0,0],N=[255,255,255],R=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var D=g.getContext("2d");if(!D)throw new Error("Unable to get canvas context");for(var I=D.getImageData(f.x,f.y,this.size.x,this.size.y),W=I.data,Z=this.data.length;Z--;){w[0]=this.data[Z]*v;var de=4*Z,ye=w[0]<=0?N:w[0]>=360?R:Ml(w,_),We=L()(ye,3);W[de]=We[0],W[de+1]=We[1],W[de+2]=We[2],W[de+3]=255}D.putImageData(I,f.x,f.y)}}])})(),Ha=o(7),Us=o.n(Ha),gi=o(6),ps=o.n(gi),Na={drawRect:function(g,x,f,v){f.strokeStyle=v.color,f.fillStyle=v.color,f.lineWidth=v.lineWidth||1,f.beginPath(),f.strokeRect(g.x,g.y,x.x,x.y)},drawPath:function(g,x,f,v){f.strokeStyle=v.color,f.fillStyle=v.color,f.lineWidth=v.lineWidth,f.beginPath(),f.moveTo(g[0][x.x],g[0][x.y]);for(var w=1;w<g.length;w++)f.lineTo(g[w][x.x],g[w][x.y]);f.closePath(),f.stroke()},drawImage:function(g,x,f){var v=f.getImageData(0,0,x.x,x.y),w=v.data,_=w.length,N=g.length;if(_/N!=4)return!1;for(;N--;){var R=g[N];w[--_]=255,w[--_]=R,w[--_]=R,w[--_]=R}return f.putImageData(v,0,0),!0}},Mo=o(4),Jn=o.n(Mo),Do=o(1),pn=o.n(Do),qi=o(5),As=o.n(qi),Dl=(function(g){return g[g.Forward=1]="Forward",g[g.Reverse=-1]="Reverse",g})({}),vi=(function(){return $()((function g(x,f){P()(this,g),X()(this,"_row",[]),X()(this,"config",{}),X()(this,"supplements",[]),X()(this,"SINGLE_CODE_ERROR",0),X()(this,"FORMAT","unknown"),X()(this,"CONFIG_KEYS",{}),this._row=[],this.config=x||{},f&&(this.supplements=f)}),[{key:"_nextUnset",value:function(g){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=x;f<g.length;f++)if(!g[f])return f;return g.length}},{key:"_matchPattern",value:function(g,x){for(var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.SINGLE_CODE_ERROR||1,v=0,w=0,_=0,N=0,R=0,D=0,I=0,W=0;W<g.length;W++)_+=g[W],N+=x[W];if(_<N)return Number.MAX_VALUE;f*=R=_/N;for(var Z=0;Z<g.length;Z++){if(D=g[Z],I=x[Z]*R,(w=Math.abs(D-I)/I)>f)return Number.MAX_VALUE;v+=w}return v/N}},{key:"_nextSet",value:function(g){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=x;f<g.length;f++)if(g[f])return f;return g.length}},{key:"_correctBars",value:function(g,x,f){for(var v=f.length,w=0;v--;)(w=g[f[v]]*(1-(1-x)/2))>1&&(g[f[v]]=w)}},{key:"decodePattern",value:function(g){this._row=g;var x=this.decode();return x===null?(this._row.reverse(),(x=this.decode())&&(x.direction=Dl.Reverse,x.start=this._row.length-x.start,x.end=this._row.length-x.end)):x.direction=Dl.Forward,x&&(x.format=this.FORMAT),x}},{key:"_matchRange",value:function(g,x,f){var v;for(v=g=g<0?0:g;v<x;v++)if(this._row[v]!==f)return!1;return!0}},{key:"_fillCounters",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._nextUnset(this._row),x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._row.length,f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],v=[],w=0;v[w]=0;for(var _=g;_<x;_++)this._row[_]^(f?1:0)?v[w]++:(v[++w]=1,f=!f);return v}},{key:"_toCounters",value:function(g,x){var f=x.length,v=this._row.length,w=!this._row[g],_=0;fr(x,0);for(var N=g;N<v;N++)if(this._row[N]^(w?1:0))x[_]++;else{if(++_===f)break;x[_]=1,w=!w}return x}},{key:"decodeImage",value:function(g){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}])})();X()(vi,"adjacentLineValidationMatches",0);var Rr=vi;function gc(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var Wi=[3,1,3,1,1,1],vc=[3,1,1,1,3],Il=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],Sa=Wi.reduce((function(g,x){return g+x}),0),Pl=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=gc(this,x,[].concat(w)),X()(f,"barSpaceRatio",[1,1]),X()(f,"FORMAT","2of5"),X()(f,"SINGLE_CODE_ERROR",.78),X()(f,"AVG_CODE_ERROR",.3),f}return As()(x,g),$()(x,[{key:"_findPattern",value:function(f,v){var w=arguments.length>2&&arguments[2]!==void 0&&arguments[2],_=arguments.length>3&&arguments[3]!==void 0&&arguments[3],N=[],R=0,D={error:Number.MAX_VALUE,code:-1,start:0,end:0},I=0,W=0,Z=this.AVG_CODE_ERROR;v||(v=this._nextSet(this._row));for(var de=0;de<f.length;de++)N[de]=0;for(var ye=v;ye<this._row.length;ye++)if(this._row[ye]^(w?1:0))N[R]++;else{if(R===N.length-1){I=0;for(var We=0;We<N.length;We++)I+=N[We];if((W=this._matchPattern(N,f))<Z)return D.error=W,D.start=ye-I,D.end=ye,D;if(!_)return null;for(var fe=0;fe<N.length-2;fe++)N[fe]=N[fe+2];N[N.length-2]=0,N[N.length-1]=0,R--}else R++;N[R]=1,w=!w}return null}},{key:"_findStart",value:function(){for(var f=null,v=this._nextSet(this._row),w=1,_=0;!f;){if(!(f=this._findPattern(Wi,v,!1,!0)))return null;if(w=Math.floor((f.end-f.start)/Sa),(_=f.start-5*w)>=0&&this._matchRange(_,f.start,0))return f;v=f.end,f=null}return f}},{key:"_verifyTrailingWhitespace",value:function(f){var v=f.end+(f.end-f.start)/2;return v<this._row.length&&this._matchRange(f.end,v,0)?f:null}},{key:"_findEnd",value:function(){this._row.reverse();var f=this._nextSet(this._row),v=this._findPattern(vc,f,!1,!0);if(this._row.reverse(),v===null)return null;var w=v.start;return v.start=this._row.length-v.end,v.end=this._row.length-w,v!==null?this._verifyTrailingWhitespace(v):null}},{key:"_verifyCounterLength",value:function(f){return f.length%10==0}},{key:"_decodeCode",value:function(f){for(var v=this.AVG_CODE_ERROR,w={error:Number.MAX_VALUE,code:-1,start:0,end:0},_=0;_<Il.length;_++){var N=this._matchPattern(f,Il[_]);N<w.error&&(w.code=_,w.error=N)}return w.error<v?w:null}},{key:"_decodePayload",value:function(f,v,w){for(var _=0,N=f.length,R=[0,0,0,0,0],D=null;_<N;){for(var I=0;I<5;I++)R[I]=f[_]*this.barSpaceRatio[0],_+=2;if(!(D=this._decodeCode(R)))return null;v.push("".concat(D.code)),w.push(D)}return D}},{key:"decode",value:function(f,v){var w=this._findStart();if(!w)return null;var _=this._findEnd();if(!_)return null;var N=this._fillCounters(w.end,_.start,!1);if(!this._verifyCounterLength(N))return null;var R=[];R.push(w);var D=[];return this._decodePayload(N,D,R)?D.length<5?null:(R.push(_),{code:D.join(""),start:w.start,end:_.end,startInfo:w,decodedCodes:R,format:this.FORMAT}):null}}])})(Rr);function yc(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var Io=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],Po=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],$a=[26,41,11,14],ar=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=yc(this,x,[].concat(w)),X()(f,"_counters",[]),X()(f,"FORMAT","codabar"),f}return As()(x,g),$()(x,[{key:"_computeAlternatingThreshold",value:function(f,v){for(var w=Number.MAX_VALUE,_=0,N=0,R=f;R<v;R+=2)(N=this._counters[R])>_&&(_=N),N<w&&(w=N);return(w+_)/2|0}},{key:"_toPattern",value:function(f){var v=f+7;if(v>this._counters.length)return-1;for(var w=this._computeAlternatingThreshold(f,v),_=this._computeAlternatingThreshold(f+1,v),N=64,R=0,D=0,I=0;I<7;I++)R=(1&I)==0?w:_,this._counters[f+I]>R&&(D|=N),N>>=1;return D}},{key:"_isStartEnd",value:function(f){for(var v=0;v<$a.length;v++)if($a[v]===f)return!0;return!1}},{key:"_sumCounters",value:function(f,v){for(var w=0,_=f;_<v;_++)w+=this._counters[_];return w}},{key:"_findStart",value:function(){for(var f=this._nextUnset(this._row),v=1;v<this._counters.length;v++){var w=this._toPattern(v);if(w!==-1&&this._isStartEnd(w))return{start:f+=this._sumCounters(0,v),end:f+this._sumCounters(v,v+8),startCounter:v,endCounter:v+8}}return null}},{key:"_patternToChar",value:function(f){for(var v=0;v<Po.length;v++)if(Po[v]===f)return String.fromCharCode(Io[v]);return null}},{key:"_calculatePatternLength",value:function(f){for(var v=0,w=f;w<f+7;w++)v+=this._counters[w];return v}},{key:"_verifyWhitespace",value:function(f,v){return(f-1<=0||this._counters[f-1]>=this._calculatePatternLength(f)/2)&&(v+8>=this._counters.length||this._counters[v+7]>=this._calculatePatternLength(v)/2)}},{key:"_charToPattern",value:function(f){for(var v=f.charCodeAt(0),w=0;w<Io.length;w++)if(Io[w]===v)return Po[w];return 0}},{key:"_thresholdResultPattern",value:function(f,v){for(var w,_={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},N=v,R=0;R<f.length;R++){w=this._charToPattern(f[R]);for(var D=6;D>=0;D--){var I=(1&D)==2?_.bar:_.space,W=(1&w)==1?I.wide:I.narrow;W.size+=this._counters[N+D],W.counts++,w>>=1}N+=8}return["space","bar"].forEach((function(Z){var de=_[Z];de.wide.min=Math.floor((de.narrow.size/de.narrow.counts+de.wide.size/de.wide.counts)/2),de.narrow.max=Math.ceil(de.wide.min),de.wide.max=Math.ceil((2*de.wide.size+1.5)/de.wide.counts)})),_}},{key:"_validateResult",value:function(f,v){for(var w,_=this._thresholdResultPattern(f,v),N=v,R=0;R<f.length;R++){w=this._charToPattern(f[R]);for(var D=6;D>=0;D--){var I=(1&D)==0?_.bar:_.space,W=(1&w)==1?I.wide:I.narrow,Z=this._counters[N+D];if(Z<W.min||Z>W.max)return!1;w>>=1}N+=8}return!0}},{key:"decode",value:function(f,v){if(this._counters=this._fillCounters(),!(v=this._findStart()))return null;var w,_=v.startCounter,N=[];do{if((w=this._toPattern(_))<0)return null;var R=this._patternToChar(w);if(R===null)return null;if(N.push(R),_+=8,N.length>1&&this._isStartEnd(w))break}while(_<this._counters.length);if(N.length-2<4||!this._isStartEnd(w)||!this._verifyWhitespace(v.startCounter,_-8)||!this._validateResult(N,v.startCounter))return null;_=_>this._counters.length?this._counters.length:_;var D=v.start+this._sumCounters(v.startCounter,_-8);return{code:N.join(""),start:v.start,end:D,startInfo:v,decodedCodes:N,format:this.FORMAT}}}])})(Rr);function bc(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var Ol=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=bc(this,x,[].concat(w)),X()(f,"CODE_SHIFT",98),X()(f,"CODE_C",99),X()(f,"CODE_B",100),X()(f,"CODE_A",101),X()(f,"FNC1",102),X()(f,"START_CODE_A",103),X()(f,"START_CODE_B",104),X()(f,"START_CODE_C",105),X()(f,"STOP_CODE",106),X()(f,"FNC1_CHAR",""),X()(f,"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),X()(f,"SINGLE_CODE_ERROR",.64),X()(f,"AVG_CODE_ERROR",.3),X()(f,"FORMAT","code_128"),X()(f,"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),f}return As()(x,g),$()(x,[{key:"_decodeCode",value:function(f,v){for(var w={error:Number.MAX_VALUE,code:-1,start:f,end:f,correction:{bar:1,space:1}},_=[0,0,0,0,0,0],N=f,R=!this._row[N],D=0,I=N;I<this._row.length;I++)if(this._row[I]^(R?1:0))_[D]++;else{if(D===_.length-1){v&&this._correct(_,v);for(var W=0;W<this.CODE_PATTERN.length;W++){var Z=this._matchPattern(_,this.CODE_PATTERN[W]);Z<w.error&&(w.code=W,w.error=Z)}return w.end=I,w.code===-1||w.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[w.code]&&(w.correction.bar=this.calculateCorrection(this.CODE_PATTERN[w.code],_,this.MODULE_INDICES.bar),w.correction.space=this.calculateCorrection(this.CODE_PATTERN[w.code],_,this.MODULE_INDICES.space)),w)}_[++D]=1,R=!R}return null}},{key:"_correct",value:function(f,v){this._correctBars(f,v.bar,this.MODULE_INDICES.bar),this._correctBars(f,v.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var f=[0,0,0,0,0,0],v=this._nextSet(this._row),w={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},_=!1,N=0,R=v;R<this._row.length;R++)if(this._row[R]^(_?1:0))f[N]++;else{if(N===f.length-1){for(var D=f.reduce((function(de,ye){return de+ye}),0),I=this.START_CODE_A;I<=this.START_CODE_C;I++){var W=this._matchPattern(f,this.CODE_PATTERN[I]);W<w.error&&(w.code=I,w.error=W)}if(w.error<this.AVG_CODE_ERROR)return w.start=R-D,w.end=R,w.correction.bar=this.calculateCorrection(this.CODE_PATTERN[w.code],f,this.MODULE_INDICES.bar),w.correction.space=this.calculateCorrection(this.CODE_PATTERN[w.code],f,this.MODULE_INDICES.space),w;for(var Z=0;Z<4;Z++)f[Z]=f[Z+2];f[4]=0,f[5]=0,N--}else N++;f[N]=1,_=!_}return null}},{key:"decode",value:function(f,v){var w=this,_=this._findStart();if(_===null)return null;var N={code:_.code,start:_.start,end:_.end,correction:{bar:_.correction.bar,space:_.correction.space}},R=[];R.push(N);for(var D=N.code,I=(function(et){switch(et){case w.START_CODE_A:return w.CODE_A;case w.START_CODE_B:return w.CODE_B;case w.START_CODE_C:return w.CODE_C;default:return null}})(N.code),W=!1,Z=!1,de=Z,ye=!0,We=0,fe=[],Pe=[];!W;){if(de=Z,Z=!1,(N=this._decodeCode(N.end,N.correction))!==null)switch(N.code!==this.STOP_CODE&&(ye=!0),N.code!==this.STOP_CODE&&(fe.push(N.code),D+=++We*N.code),R.push(N),I){case this.CODE_A:if(N.code<64)Pe.push(String.fromCharCode(32+N.code));else if(N.code<96)Pe.push(String.fromCharCode(N.code-64));else switch(N.code!==this.STOP_CODE&&(ye=!1),N.code){case this.CODE_SHIFT:Z=!0,I=this.CODE_B;break;case this.CODE_B:I=this.CODE_B;break;case this.CODE_C:I=this.CODE_C;break;case this.FNC1:Pe.push(this.FNC1_CHAR);break;case this.STOP_CODE:W=!0}break;case this.CODE_B:if(N.code<96)Pe.push(String.fromCharCode(32+N.code));else switch(N.code!==this.STOP_CODE&&(ye=!1),N.code){case this.CODE_SHIFT:Z=!0,I=this.CODE_A;break;case this.CODE_A:I=this.CODE_A;break;case this.CODE_C:I=this.CODE_C;break;case this.FNC1:Pe.push(this.FNC1_CHAR);break;case this.STOP_CODE:W=!0}break;case this.CODE_C:if(N.code<100)Pe.push(N.code<10?"0"+N.code:N.code);else switch(N.code!==this.STOP_CODE&&(ye=!1),N.code){case this.CODE_A:I=this.CODE_A;break;case this.CODE_B:I=this.CODE_B;break;case this.FNC1:Pe.push(this.FNC1_CHAR);break;case this.STOP_CODE:W=!0}}else W=!0;de&&(I=I===this.CODE_A?this.CODE_B:this.CODE_A)}return N===null?null:(N.end=this._nextUnset(this._row,N.end),this._verifyTrailingWhitespace(N)?(D-=We*fe[fe.length-1])%103!==fe[fe.length-1]?null:Pe.length?(ye&&Pe.splice(Pe.length-1,1),{code:Pe.join(""),start:_.start,end:N.end,codeset:I,startInfo:_,decodedCodes:R,endInfo:N,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(f){var v;return(v=f.end+(f.end-f.start)/2)<this._row.length&&this._matchRange(f.end,v,0)?f:null}},{key:"calculateCorrection",value:function(f,v,w){for(var _=w.length,N=0,R=0;_--;)R+=f[w[_]],N+=v[w[_]];return R/N}}])})(Rr),Ga=o(13),p=o.n(Ga),T=o(16),M=o.n(T);function K(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var Ce=new Uint16Array(M()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map((function(g){return g.charCodeAt(0)}))),qe=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),Tt=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=K(this,x,[].concat(w)),X()(f,"FORMAT","code_39"),f}return As()(x,g),$()(x,[{key:"_findStart",value:function(){for(var f=this._nextSet(this._row),v=f,w=new Uint16Array([0,0,0,0,0,0,0,0,0]),_=0,N=!1,R=f;R<this._row.length;R++)if(this._row[R]^(N?1:0))w[_]++;else{if(_===w.length-1){if(this._toPattern(w)===148){var D=Math.floor(Math.max(0,v-(R-v)/4));if(this._matchRange(D,v,0))return{start:v,end:R}}v+=w[0]+w[1];for(var I=0;I<7;I++)w[I]=w[I+2];w[7]=0,w[8]=0,_--}else _++;w[_]=1,N=!N}return null}},{key:"_toPattern",value:function(f){for(var v=f.length,w=0,_=v,N=0;_>3;){w=this._findNextWidth(f,w),_=0;for(var R=0,D=0;D<v;D++)f[D]>w&&(R|=1<<v-1-D,_++,N+=f[D]);if(_===3){for(var I=0;I<v&&_>0;I++)if(f[I]>w&&(_--,2*f[I]>=N))return-1;return R}}return-1}},{key:"_findNextWidth",value:function(f,v){for(var w=Number.MAX_VALUE,_=0;_<f.length;_++)f[_]<w&&f[_]>v&&(w=f[_]);return w}},{key:"_patternToChar",value:function(f){for(var v=0;v<qe.length;v++)if(qe[v]===f)return String.fromCharCode(Ce[v]);return null}},{key:"_verifyTrailingWhitespace",value:function(f,v,w){var _=fi(w);return 3*(v-f-_)>=_}},{key:"decode",value:function(){var f=new Uint16Array([0,0,0,0,0,0,0,0,0]),v=[],w=this._findStart();if(!w)return null;var _,N,R=this._nextSet(this._row,w.end);do{f=this._toCounters(R,f);var D=this._toPattern(f);if(D<0||(_=this._patternToChar(D))===null)return null;v.push(_),N=R,R+=fi(f),R=this._nextSet(this._row,R)}while(_!=="*");return v.pop(),v.length&&this._verifyTrailingWhitespace(N,R,f)?{code:v.join(""),start:w.start,end:R,startInfo:w,decodedCodes:v,format:this.FORMAT}:null}}])})(Rr);function hn(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var ws=/[AEIO]/g,On=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=hn(this,x,[].concat(w)),X()(f,"FORMAT","code_32_reader"),f}return As()(x,g),$()(x,[{key:"_decodeCode32",value:function(f){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(f))return null;for(var v=0,w=0;w<f.length;w++)v=32*v+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(f[w]);var _="".concat(v);return _.length<9&&(_=("000000000"+_).slice(-9)),"A"+_}},{key:"_checkChecksum",value:function(f){return!!f}},{key:"decode",value:function(){var f,v,w,_,N,R=(f=x,v="decode",w=this,_=3,N=p()(pn()(1&_?f.prototype:f),v,w),2&_&&typeof N=="function"?function(W){return N.apply(w,W)}:N)([]);if(!R)return null;var D=R.code;if(!D||(D=D.replace(ws,""),!this._checkChecksum(D)))return null;var I=this._decodeCode32(D);return I?(R.code=I,R):null}}])})(Tt);function is(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var qr=/[IOQ]/g,Ta=/[A-Z0-9]{17}/,Wr=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=is(this,x,[].concat(w)),X()(f,"FORMAT","code_39_vin"),f}return As()(x,g),$()(x,[{key:"_checkChecksum",value:function(f){return!!f}},{key:"decode",value:function(){var f,v,w,_,N,R=(f=x,v="decode",w=this,_=3,N=p()(pn()(1&_?f.prototype:f),v,w),2&_&&typeof N=="function"?function(I){return N.apply(w,I)}:N)([]);if(!R)return null;var D=R.code;return D&&(D=D.replace(qr,"")).match(Ta)&&this._checkChecksum(D)?(R.code=D,R):null}}])})(Tt);function oa(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var Ka=new Uint16Array(M()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map((function(g){return g.charCodeAt(0)}))),Hi=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),$i=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=oa(this,x,[].concat(w)),X()(f,"FORMAT","code_93"),f}return As()(x,g),$()(x,[{key:"_patternToChar",value:function(f){for(var v=0;v<Hi.length;v++)if(Hi[v]===f)return String.fromCharCode(Ka[v]);return null}},{key:"_toPattern",value:function(f){for(var v=f.length,w=f.reduce((function(I,W){return I+W}),0),_=0,N=0;N<v;N++){var R=Math.round(9*f[N]/w);if(R<1||R>4)return-1;if((1&N)==0)for(var D=0;D<R;D++)_=_<<1|1;else _<<=R}return _}},{key:"_findStart",value:function(){for(var f=this._nextSet(this._row),v=f,w=new Uint16Array([0,0,0,0,0,0]),_=0,N=!1,R=f;R<this._row.length;R++)if(this._row[R]^(N?1:0))w[_]++;else{if(_===w.length-1){if(this._toPattern(w)===350){var D=Math.floor(Math.max(0,v-(R-v)/4));if(this._matchRange(D,v,0))return{start:v,end:R}}v+=w[0]+w[1];for(var I=0;I<4;I++)w[I]=w[I+2];w[4]=0,w[5]=0,_--}else _++;w[_]=1,N=!N}return null}},{key:"_verifyEnd",value:function(f,v){return!(f===v||!this._row[v])}},{key:"_decodeExtended",value:function(f){for(var v=f.length,w=[],_=0;_<v;_++){var N=f[_];if(N>="a"&&N<="d"){if(_>v-2)return null;var R=f[++_],D=R.charCodeAt(0),I=void 0;switch(N){case"a":if(!(R>="A"&&R<="Z"))return null;I=String.fromCharCode(D-64);break;case"b":if(R>="A"&&R<="E")I=String.fromCharCode(D-38);else if(R>="F"&&R<="J")I=String.fromCharCode(D-11);else if(R>="K"&&R<="O")I=String.fromCharCode(D+16);else if(R>="P"&&R<="S")I=String.fromCharCode(D+43);else{if(!(R>="T"&&R<="Z"))return null;I=""}break;case"c":if(R>="A"&&R<="O")I=String.fromCharCode(D-32);else{if(R!=="Z")return null;I=":"}break;case"d":if(!(R>="A"&&R<="Z"))return null;I=String.fromCharCode(D+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",I),null}w.push(I)}else w.push(N)}return w}},{key:"_matchCheckChar",value:function(f,v,w){var _=f.slice(0,v),N=_.length,R=_.reduce((function(D,I,W){return D+((-1*W+(N-1))%w+1)*Ka.indexOf(I.charCodeAt(0))}),0);return Ka[R%47]===f[v].charCodeAt(0)}},{key:"_verifyChecksums",value:function(f){return this._matchCheckChar(f,f.length-2,20)&&this._matchCheckChar(f,f.length-1,15)}},{key:"decode",value:function(f,v){if(!(v=this._findStart()))return null;var w,_,N=new Uint16Array([0,0,0,0,0,0]),R=[],D=this._nextSet(this._row,v.end);do{N=this._toCounters(D,N);var I=this._toPattern(N);if(I<0||(_=this._patternToChar(I))===null)return null;R.push(_),w=D,D+=fi(N),D=this._nextSet(this._row,D)}while(_!=="*");return R.pop(),R.length&&this._verifyEnd(w,D)&&this._verifyChecksums(R)?(R=R.slice(0,R.length-2),(R=this._decodeExtended(R))===null?null:{code:R.join(""),start:v.start,end:D,startInfo:v,decodedCodes:R,format:this.FORMAT}):null}}])})(Rr);function ah(g,x){var f=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);x&&(v=v.filter((function(w){return Object.getOwnPropertyDescriptor(g,w).enumerable}))),f.push.apply(f,v)}return f}function wu(g){for(var x=1;x<arguments.length;x++){var f=arguments[x]!=null?arguments[x]:{};x%2?ah(Object(f),!0).forEach((function(v){X()(g,v,f[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(f)):ah(Object(f)).forEach((function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(f,v))}))}return g}function Lm(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var ih=[1,1,1],ju=[1,1,1,1,1],Ll=[1,1,2],Oo=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],oh=[0,11,13,14,19,25,28,21,22,26],la=(function(g){function x(f,v){var w;return P()(this,x),w=Lm(this,x,[E()({supplements:[]},f),v]),X()(w,"FORMAT","ean_13"),X()(w,"SINGLE_CODE_ERROR",.7),X()(w,"STOP_PATTERN",[1,1,1]),w}return As()(x,g),$()(x,[{key:"_findPattern",value:function(f,v,w,_){var N=new Array(f.length).fill(0),R={error:Number.MAX_VALUE,start:0,end:0},D=0;v||(v=this._nextSet(this._row));for(var I=!1,W=v;W<this._row.length;W++)if(this._row[W]^(w?1:0))N[D]+=1;else{if(D===N.length-1){var Z=this._matchPattern(N,f);if(Z<.48&&R.error&&Z<R.error)return I=!0,R.error=Z,R.start=W-N.reduce((function(ye,We){return ye+We}),0),R.end=W,R;if(_){for(var de=0;de<N.length-2;de++)N[de]=N[de+2];N[N.length-2]=0,N[N.length-1]=0,D--}}else D++;N[D]=1,w=!w}return I?R:null}},{key:"_decodeCode",value:function(f,v){var w=[0,0,0,0],_=f,N={error:Number.MAX_VALUE,code:-1,start:f,end:f},R=!this._row[_],D=0;v||(v=Oo.length);for(var I=_;I<this._row.length;I++)if(this._row[I]^(R?1:0))w[D]++;else{if(D===w.length-1){for(var W=0;W<v;W++){var Z=this._matchPattern(w,Oo[W]);N.end=I,Z<N.error&&(N.code=W,N.error=Z)}return N.error>.48?null:N}w[++D]=1,R=!R}return null}},{key:"_findStart",value:function(){for(var f=this._nextSet(this._row),v=null;!v;){if(!(v=this._findPattern(ih,f,!1,!0)))return null;var w=v.start-(v.end-v.start);if(w>=0&&this._matchRange(w,v.start,0))return v;f=v.end,v=null}return null}},{key:"_calculateFirstDigit",value:function(f){for(var v=0;v<oh.length;v++)if(f===oh[v])return v;return null}},{key:"_decodePayload",value:function(f,v,w){for(var _=wu({},f),N=0,R=0;R<6;R++){if(!(_=this._decodeCode(_.end)))return null;_.code>=10?(_.code-=10,N|=1<<5-R):N|=0<<5-R,v.push(_.code),w.push(_)}var D=this._calculateFirstDigit(N);if(D===null)return null;v.unshift(D);var I=this._findPattern(ju,_.end,!0,!1);if(I===null||!I.end)return null;w.push(I);for(var W=0;W<6;W++){if(!(I=this._decodeCode(I.end,10)))return null;w.push(I),v.push(I.code)}return I}},{key:"_verifyTrailingWhitespace",value:function(f){var v=f.end+(f.end-f.start);return v<this._row.length&&this._matchRange(f.end,v,0)?f:null}},{key:"_findEnd",value:function(f,v){var w=this._findPattern(this.STOP_PATTERN,f,v,!1);return w!==null?this._verifyTrailingWhitespace(w):null}},{key:"_checksum",value:function(f){for(var v=0,w=f.length-2;w>=0;w-=2)v+=f[w];v*=3;for(var _=f.length-1;_>=0;_-=2)v+=f[_];return v%10==0}},{key:"_decodeExtensions",value:function(f){var v=this._nextSet(this._row,f),w=this._findPattern(Ll,v,!1,!1);if(w===null)return null;for(var _=0;_<this.supplements.length;_++)try{var N=this.supplements[_].decode(this._row,w.end);if(N!==null)return{code:N.code,start:v,startInfo:w,end:N.end,decodedCodes:N.decodedCodes,format:this.supplements[_].FORMAT}}catch(R){console.error("* decodeExtensions error in ",this.supplements[_],": ",R)}return null}},{key:"decode",value:function(f,v){var w=new Array,_=new Array,N={},R=this._findStart();if(!R)return null;var D={start:R.start,end:R.end};if(_.push(D),!(D=this._decodePayload(D,w,_))||!(D=this._findEnd(D.end,!1))||(_.push(D),!this._checksum(w)))return null;if(this.supplements.length>0){var I=this._decodeExtensions(D.end);if(!I||!I.decodedCodes)return null;var W=I.decodedCodes[I.decodedCodes.length-1],Z={start:W.start+((W.end-W.start)/2|0),end:W.end};if(!this._verifyTrailingWhitespace(Z))return null;N={supplement:I,code:w.join("")+I.code}}return wu(wu({code:w.join(""),start:R.start,end:D.end,startInfo:R,decodedCodes:_},N),{},{format:this.FORMAT})}}])})(Rr);function lh(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var _u=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=lh(this,x,[].concat(w)),X()(f,"FORMAT","ean_2"),f}return As()(x,g),$()(x,[{key:"decode",value:function(f,v){f&&(this._row=f);var w=0,_=v,N=this._row.length,R=[],D=[],I=null;if(_===void 0)return null;for(var W=0;W<2&&_<N;W++){if(!(I=this._decodeCode(_)))return null;D.push(I),R.push(I.code%10),I.code>=10&&(w|=1<<1-W),W!==1&&(_=this._nextSet(this._row,I.end),_=this._nextUnset(this._row,_))}if(R.length!==2||parseInt(R.join(""))%4!==w)return null;var Z=this._findStart();return{code:R.join(""),decodedCodes:D,end:I.end,format:this.FORMAT,startInfo:Z,start:Z.start}}}])})(la);function ku(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var Nu=[24,20,18,17,12,6,3,10,9,5],Su=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=ku(this,x,[].concat(w)),X()(f,"FORMAT","ean_5"),f}return As()(x,g),$()(x,[{key:"decode",value:function(f,v){if(v===void 0)return null;f&&(this._row=f);for(var w=0,_=v,N=this._row.length,R=null,D=[],I=[],W=0;W<5&&_<N;W++){if(!(R=this._decodeCode(_)))return null;I.push(R),D.push(R.code%10),R.code>=10&&(w|=1<<4-W),W!==4&&(_=this._nextSet(this._row,R.end),_=this._nextUnset(this._row,_))}if(D.length!==5||(function(de){for(var ye=de.length,We=0,fe=ye-2;fe>=0;fe-=2)We+=de[fe];We*=3;for(var Pe=ye-1;Pe>=0;Pe-=2)We+=de[Pe];return(We*=3)%10})(D)!==(function(de){for(var ye=0;ye<10;ye++)if(de===Nu[ye])return ye;return null})(w))return null;var Z=this._findStart();return{code:D.join(""),decodedCodes:I,end:R.end,format:this.FORMAT,startInfo:Z,start:Z.start}}}])})(la);function ch(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var Tu=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=ch(this,x,[].concat(w)),X()(f,"FORMAT","ean_8"),f}return As()(x,g),$()(x,[{key:"_decodePayload",value:function(f,v,w){for(var _=f,N=0;N<4;N++){if(!(_=this._decodeCode(_.end,10)))return null;v.push(_.code),w.push(_)}if((_=this._findPattern(ju,_.end,!0,!1))===null)return null;w.push(_);for(var R=0;R<4;R++){if(!(_=this._decodeCode(_.end,10)))return null;w.push(_),v.push(_.code)}return _}}])})(la);function Bm(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var uh=(function(g){function x(f){var v;return P()(this,x),v=Bm(this,x,[E()({normalizeBarSpaceWidth:!1},f)]),X()(v,"barSpaceRatio",[1,1]),X()(v,"SINGLE_CODE_ERROR",.78),X()(v,"AVG_CODE_ERROR",.38),X()(v,"START_PATTERN",[1,1,1,1]),X()(v,"STOP_PATTERN",[1,1,3]),X()(v,"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),X()(v,"MAX_CORRECTION_FACTOR",5),X()(v,"FORMAT","i2of5"),f.normalizeBarSpaceWidth&&(v.SINGLE_CODE_ERROR=.38,v.AVG_CODE_ERROR=.09),v.config=f,Jn()(v,v)}return As()(x,g),$()(x,[{key:"_matchPattern",value:function(f,v){if(this.config.normalizeBarSpaceWidth){for(var w=[0,0],_=[0,0],N=[0,0],R=this.MAX_CORRECTION_FACTOR,D=1/R,I=0;I<f.length;I++)w[I%2]+=f[I],_[I%2]+=v[I];N[0]=_[0]/w[0],N[1]=_[1]/w[1],N[0]=Math.max(Math.min(N[0],R),D),N[1]=Math.max(Math.min(N[1],R),D),this.barSpaceRatio=N;for(var W=0;W<f.length;W++)f[W]*=this.barSpaceRatio[W%2]}return(Z=x,de="_matchPattern",ye=this,We=3,fe=p()(pn()(1&We?Z.prototype:Z),de,ye),2&We&&typeof fe=="function"?function(Pe){return fe.apply(ye,Pe)}:fe)([f,v]);var Z,de,ye,We,fe}},{key:"_findPattern",value:function(f,v){var w=arguments.length>2&&arguments[2]!==void 0&&arguments[2],_=arguments.length>3&&arguments[3]!==void 0&&arguments[3],N=new Array(f.length).fill(0),R=0,D={error:Number.MAX_VALUE,start:0,end:0},I=this.AVG_CODE_ERROR;w=w||!1,_=_||!1,v||(v=this._nextSet(this._row));for(var W=v;W<this._row.length;W++)if(this._row[W]^(w?1:0))N[R]++;else{if(R===N.length-1){var Z=N.reduce((function(We,fe){return We+fe}),0),de=this._matchPattern(N,f);if(de<I)return D.error=de,D.start=W-Z,D.end=W,D;if(!_)return null;for(var ye=0;ye<N.length-2;ye++)N[ye]=N[ye+2];N[N.length-2]=0,N[N.length-1]=0,R--}else R++;N[R]=1,w=!w}return null}},{key:"_findStart",value:function(){for(var f=0,v=this._nextSet(this._row),w=null,_=1;!w;){if(!(w=this._findPattern(this.START_PATTERN,v,!1,!0)))return null;if(_=Math.floor((w.end-w.start)/4),(f=w.start-10*_)>=0&&this._matchRange(f,w.start,0))return w;v=w.end,w=null}return null}},{key:"_verifyTrailingWhitespace",value:function(f){var v=f.end+(f.end-f.start)/2;return v<this._row.length&&this._matchRange(f.end,v,0)?f:null}},{key:"_findEnd",value:function(){this._row.reverse();var f=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),f===null)return null;var v=f.start;return f.start=this._row.length-f.end,f.end=this._row.length-v,f!==null?this._verifyTrailingWhitespace(f):null}},{key:"_decodePair",value:function(f){for(var v=[],w=0;w<f.length;w++){var _=this._decodeCode(f[w]);if(!_)return null;v.push(_)}return v}},{key:"_decodeCode",value:function(f){for(var v=this.AVG_CODE_ERROR,w={error:Number.MAX_VALUE,code:-1,start:0,end:0},_=0;_<this.CODE_PATTERN.length;_++){var N=this._matchPattern(f,this.CODE_PATTERN[_]);N<w.error&&(w.code=_,w.error=N)}return w.error<v?w:null}},{key:"_decodePayload",value:function(f,v,w){for(var _=0,N=f.length,R=[[0,0,0,0,0],[0,0,0,0,0]],D=null;_<N;){for(var I=0;I<5;I++)R[0][I]=f[_]*this.barSpaceRatio[0],R[1][I]=f[_+1]*this.barSpaceRatio[1],_+=2;if(!(D=this._decodePair(R)))return null;for(var W=0;W<D.length;W++)v.push(D[W].code+""),w.push(D[W])}return D}},{key:"_verifyCounterLength",value:function(f){return f.length%10==0}},{key:"decode",value:function(f,v){var w=new Array,_=new Array,N=this._findStart();if(!N)return null;_.push(N);var R=this._findEnd();if(!R)return null;var D=this._fillCounters(N.end,R.start,!1);return this._verifyCounterLength(D)&&this._decodePayload(D,w,_)?w.length%2!=0||w.length<6?null:(_.push(R),{code:w.join(""),start:N.start,end:R.end,startInfo:N,decodedCodes:_,format:this.FORMAT}):null}}])})(Rr);function Bl(g,x){var f=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!f){if(Array.isArray(g)||(f=(function(D,I){if(D){if(typeof D=="string")return dh(D,I);var W={}.toString.call(D).slice(8,-1);return W==="Object"&&D.constructor&&(W=D.constructor.name),W==="Map"||W==="Set"?Array.from(D):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?dh(D,I):void 0}})(g))||x){f&&(g=f);var v=0,w=function(){};return{s:w,n:function(){return v>=g.length?{done:!0}:{done:!1,value:g[v++]}},e:function(D){throw D},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,N=!0,R=!1;return{s:function(){f=f.call(g)},n:function(){var D=f.next();return N=D.done,D},e:function(D){R=!0,_=D},f:function(){try{N||f.return==null||f.return()}finally{if(R)throw _}}}}function dh(g,x){(x==null||x>g.length)&&(x=g.length);for(var f=0,v=Array(x);f<x;f++)v[f]=g[f];return v}function Vm(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var jr=[2,2.5,3],Lo=(function(g){function x(){var f,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return P()(this,x),f=Vm(this,x,[v]),X()(f,"FORMAT","pharmacode"),X()(f,"SINGLE_CODE_ERROR",.7),X()(f,"AVG_CODE_ERROR",.48),f}return As()(x,g),$()(x,[{key:"_findStart",value:function(){for(var f=0;f<this._row.length;){var v=this._nextSet(this._row,f);if(v>=this._row.length)return null;for(var w=v;w<this._row.length&&this._row[w];)w++;var _=w-v;if(_<5)f=w+1;else{var N=v-Math.max(2*_,20);if(N<0)f=w+1;else if(this._matchRange(N,v,0)){var R=Math.max(10*_,50),D=this._nextSet(this._row,w);if(D>=this._row.length)f=w+1;else{if(!(D-w>R))return{start:v,end:w};f=w+1}}else f=w+1}}return null}},{key:"_smoothBarWidths",value:function(f){if(f.length<=2)return f;for(var v=f.slice(),w=1;w<v.length-1;w++){var _=v[w-1],N=v[w],R=[_,N,v[w+1]].sort((function(I,W){return I-W}))[1],D=Math.abs(N-R);D>0&&D<=3&&(v[w]=R)}return v}},{key:"_extractBarsAndSpaces",value:function(f){for(var v=[],w=[],_=f,N=0,R=!1;_<this._row.length&&this._row[_];)N++,_++;if(N===0)return null;for(v.push(N),N=0;_<this._row.length&&!this._row[_];)N++,_++;if(N===0||_>=this._row.length)return null;w.push(N);for(var D=6*(v[0]<w[0]?v[0]:.8*w[0]),I=2.5*w[0];_<this._row.length&&v.length<16;){for(N=0;_<this._row.length&&this._row[_];)N++,_++;if(N===0)break;v.push(N),N=0;for(var W=_;_<this._row.length&&!this._row[_];)N++,_++;if(N===0)break;if(N>=D){R=!0,_=W;break}if(v.length>=2&&N>=I){R=!0,_=W;break}if(_>=this._row.length){R=!0,_=W;break}w.push(N),w.length>=2&&(I=2*(w.reduce((function(Z,de){return Z+de}),0)/w.length))}return R?v.length<2||v.length>16||w.length!==v.length-1?null:this._validateSpaces(w)&&this._validateBarSizeCount(v)?{bars:this._smoothBarWidths(v),spaces:w,end:_}:null:null}},{key:"_validateBarSizeCount",value:function(f){if(f.length===0)return!1;var v,w=[],_=Bl(f);try{for(_.s();!(v=_.n()).done;){var N,R=v.value,D=!1,I=Bl(w);try{for(I.s();!(N=I.n()).done;){var W=N.value,Z=W.reduce((function(de,ye){return de+ye}),0)/W.length;if(Math.abs(R-Z)<=.35*Z){W.push(R),D=!0;break}}}catch(de){I.e(de)}finally{I.f()}D||w.push([R])}}catch(de){_.e(de)}finally{_.f()}return!(w.length>2)}},{key:"_validateSpaces",value:function(f){if(f.length===0)return!0;var v=f.reduce((function(_,N){return _+N}),0)/f.length;if(v===0)return!1;var w=f.reduce((function(_,N){return _+Math.pow(N-v,2)}),0)/f.length;return Math.sqrt(w)/v<=.35}},{key:"_validateBarRatios",value:function(f,v){var w=f.reduce((function(In,Ms){return In+Ms}),0)/f.length,_=f.reduce((function(In,Ms){return In+Math.abs(Ms-w)}),0)/f.length;if((w===0?0:_/w)<=.1){var N=v.length>0?v.reduce((function(In,Ms){return In+Ms}),0)/v.length:0;return N>0&&N/w<.7?{narrowWidth:w/2.5,wideRatio:2.5}:{narrowWidth:w,wideRatio:2}}var R=Array.from(new Set(f.slice().sort((function(In,Ms){return In-Ms}))));if(R.length<2)return{narrowWidth:f.reduce((function(In,Ms){return In+Ms}),0)/f.length,wideRatio:2};for(var D=[],I=0;I<R.length-1;I++){var W,Z=(R[I]+R[I+1])/2,de=[],ye=[],We=Bl(f);try{for(We.s();!(W=We.n()).done;){var fe=W.value;fe<Z?de.push(fe):ye.push(fe)}}catch(In){We.e(In)}finally{We.f()}if(de.length!==0&&ye.length!==0){for(var Pe=de.reduce((function(In,Ms){return In+Ms}),0)/de.length,et=ye.reduce((function(In,Ms){return In+Ms}),0)/ye.length,rt=et/Pe,Ut=jr[0],Pt=Math.abs(rt-Ut),Gt=0,gn=jr;Gt<gn.length;Gt++){var nn=gn[Gt],jn=Math.abs(rt-nn);jn<Pt&&(Pt=jn,Ut=nn)}D.push({threshold:Z,narrowBars:de,wideBars:ye,avgN:Pe,avgW:et,ratio:rt,ratioDiff:Pt,matchedRatio:Ut})}}D.sort((function(In,Ms){return In.ratioDiff-Ms.ratioDiff}));for(var _r=0,zs=D;_r<zs.length;_r++){var Zn=zs[_r],Ja=.05*Zn.matchedRatio;if(!(Math.abs(Zn.ratio-Zn.matchedRatio)>Ja)){var da,Ia=.15*Zn.avgN,Kr=.15*Zn.avgW,Pr=!0,Yn=Bl(Zn.narrowBars);try{for(Yn.s();!(da=Yn.n()).done;){var Yr=da.value;if(Math.abs(Yr-Zn.avgN)>Ia){Pr=!1;break}}}catch(In){Yn.e(In)}finally{Yn.f()}if(Pr){var Pa,ha=Bl(Zn.wideBars);try{for(ha.s();!(Pa=ha.n()).done;){var fa=Pa.value;if(Math.abs(fa-Zn.avgW)>Kr){Pr=!1;break}}}catch(In){ha.e(In)}finally{ha.f()}if(Pr)return{narrowWidth:Zn.avgN,wideRatio:Zn.matchedRatio}}}}return null}},{key:"_validatePeriodicity",value:function(f,v){if(f.length>0){var w=f.reduce((function(W,Z){return W+Z}),0)/f.length,_=f.reduce((function(W,Z){return W+Math.pow(Z-w,2)}),0)/f.length,N=Math.sqrt(_);if((w!==0?N/w:0)>.65)return!1}if(v.length>0){var R=v.reduce((function(W,Z){return W+Z}),0)/v.length,D=v.reduce((function(W,Z){return W+Math.pow(Z-R,2)}),0)/v.length,I=Math.sqrt(D);if((R!==0?I/R:0)>.55)return!1}return!0}},{key:"_validateQuietZones",value:function(f,v,w){var _=1*v;if(f.start>=2&&f.start<_)return!1;var N=this._row.length-w;return N<6||!(N<_)}},{key:"_decodeBars",value:function(f,v){for(var w=1.6*(v??Math.min.apply(Math,M()(f))),_=0,N=f.slice().reverse(),R=0;R<N.length;R++)_+=N[R]>w?Math.pow(2,R+1):Math.pow(2,R);for(var D="",I=N.length-1;I>=0;I--)D+=N[I]>w?"W":"N";return{value:_,pattern:D}}},{key:"_verifyTrailingWhitespace",value:function(f,v){var w=Math.min(f+2*v,this._row.length);return this._matchRange(f,w,0)}},{key:"_validatePatternConsistency",value:function(f,v){for(var w=f.start,_=0,N=0,R=0,D=[-2,-1,1,2];R<D.length;R++){var I=w+D[R];if(!(I<0||I>=this._row.length)){N++;var W=this._extractBarsAndSpaces(I);if(W&&W.bars.length===v.length){for(var Z=!0,de=0;de<v.length;de++)if(Math.abs(W.bars[de]-v[de])/Math.max(v[de],1)>.25){Z=!1;break}Z&&_++}}}return N>0&&_>=.5*N}},{key:"decode",value:function(f,v){var w=this._findStart();if(!w||w.start>.5*this._row.length)return null;var _=this._extractBarsAndSpaces(w.start);if(!_)return null;var N=_.bars,R=_.spaces,D=_.end;if(N.reduce((function(We,fe){return We+fe}),0)+R.reduce((function(We,fe){return We+fe}),0)<20||this._row.length-D<0||!this._validateSpaces(R)||!this._validatePeriodicity(N,R)||!this._validatePatternConsistency(w,N))return null;var I=this._validateBarRatios(N,R);if(!I||!this._validateQuietZones(w,I.narrowWidth,D))return null;var W=this._decodeBars(N,I.narrowWidth);if(!W)return null;var Z=W.value;if(Z<3||Z>131070)return null;var de=N.reduce((function(We,fe){return We+fe}),0)/N.length;this._verifyTrailingWhitespace(D,de);var ye=N.map((function(We,fe){return{code:We>1.6*Math.min.apply(Math,M()(N))?1:0,start:0,end:0,error:0}}));return{code:Z.toString(),start:w.start,end:D,startInfo:w,decodedCodes:ye,pattern:W.pattern,format:this.FORMAT}}}])})(Rr);X()(Lo,"adjacentLineValidationMatches",1);var xc=Lo;function Eu(g,x){var f=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);x&&(v=v.filter((function(w){return Object.getOwnPropertyDescriptor(g,w).enumerable}))),f.push.apply(f,v)}return f}function hh(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}function Cu(g,x,f,v){var w=p()(pn()(g.prototype),x,f);return 2&v&&typeof w=="function"?function(_){return w.apply(f,_)}:w}var wc=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=hh(this,x,[].concat(w)),X()(f,"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),X()(f,"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),X()(f,"FORMAT","upc_e"),f}return As()(x,g),$()(x,[{key:"_decodePayload",value:function(f,v,w){for(var _=(function(D){for(var I=1;I<arguments.length;I++){var W=arguments[I]!=null?arguments[I]:{};I%2?Eu(Object(W),!0).forEach((function(Z){X()(D,Z,W[Z])})):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(W)):Eu(Object(W)).forEach((function(Z){Object.defineProperty(D,Z,Object.getOwnPropertyDescriptor(W,Z))}))}return D})({},f),N=0,R=0;R<6;R++){if(!(_=this._decodeCode(_.end)))return null;_.code>=10&&(_.code=_.code-10,N|=1<<5-R),v.push(_.code),w.push(_)}return this._determineParity(N,v)?_:null}},{key:"_determineParity",value:function(f,v){for(var w=0;w<this.CODE_FREQUENCY.length;w++)for(var _=0;_<this.CODE_FREQUENCY[w].length;_++)if(f===this.CODE_FREQUENCY[w][_])return v.unshift(w),v.push(_),!0;return!1}},{key:"_convertToUPCA",value:function(f){var v=[f[0]],w=f[f.length-2];return(v=w<=2?v.concat(f.slice(1,3)).concat([w,0,0,0,0]).concat(f.slice(3,6)):w===3?v.concat(f.slice(1,4)).concat([0,0,0,0,0]).concat(f.slice(4,6)):w===4?v.concat(f.slice(1,5)).concat([0,0,0,0,0,f[5]]):v.concat(f.slice(1,6)).concat([0,0,0,0,w])).push(f[f.length-1]),v}},{key:"_checksum",value:function(f){return Cu(x,"_checksum",this,3)([this._convertToUPCA(f)])}},{key:"_findEnd",value:function(f,v){return Cu(x,"_findEnd",this,3)([f,!0])}},{key:"_verifyTrailingWhitespace",value:function(f){var v=f.end+(f.end-f.start)/2;return v<this._row.length&&this._matchRange(f.end,v,0)?f:null}}])})(la);function Um(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var Gi=(function(g){function x(){var f;P()(this,x);for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];return f=Um(this,x,[].concat(w)),X()(f,"FORMAT","upc_a"),f}return As()(x,g),$()(x,[{key:"decode",value:function(f,v){var w=la.prototype.decode.call(this);return w&&w.code&&w.code.length===13&&w.code.charAt(0)==="0"?(w.code=w.code.substring(1),w):null}}])})(la),Bo={},yi={UP:1,DOWN:-1};Bo.getBarcodeLine=function(g,x,f){var v,w,_,N,R,D=0|x.x,I=0|x.y,W=0|f.x,Z=0|f.y,de=Math.abs(Z-I)>Math.abs(W-D),ye=[],We=g.data,fe=g.size.x,Pe=255,et=0;function rt(gn,nn){R=We[nn*fe+gn],Pe=R<Pe?R:Pe,et=R>et?R:et,ye.push(R)}de&&(_=D,D=I,I=_,_=W,W=Z,Z=_),D>W&&(_=D,D=W,W=_,_=I,I=Z,Z=_);var Ut=W-D,Pt=Math.abs(Z-I);v=Ut/2|0,w=I;var Gt=I<Z?1:-1;for(N=D;N<W;N++)de?rt(w,N):rt(N,w),(v-=Pt)<0&&(w+=Gt,v+=Ut);return{line:ye,min:Pe,max:et}},Bo.toBinaryLine=function(g){var x,f,v,w,_,N,R=g.min,D=g.max,I=g.line,W=R+(D-R)/2,Z=[],de=(D-R)/12,ye=-de;for(v=I[0]>W?yi.UP:yi.DOWN,Z.push({pos:0,val:I[0]}),_=0;_<I.length-2;_++)v!==(w=(x=I[_+1]-I[_])+(f=I[_+2]-I[_+1])<ye&&I[_+1]<1.5*W?yi.DOWN:x+f>de&&I[_+1]>.5*W?yi.UP:v)&&(Z.push({pos:_,val:I[_]}),v=w);for(Z.push({pos:I.length,val:I[I.length-1]}),N=Z[0].pos;N<Z[1].pos;N++)I[N]=I[N]>W?0:1;for(_=1;_<Z.length-1;_++)for(de=Z[_+1].val>Z[_].val?Z[_].val+(Z[_+1].val-Z[_].val)/3*2|0:Z[_+1].val+(Z[_].val-Z[_+1].val)/3|0,N=Z[_].pos;N<Z[_+1].pos;N++)I[N]=I[N]>de?0:1;return{line:I,threshold:de}},Bo.debug={printFrequency:function(g,x){var f,v=x.getContext("2d");for(x.width=g.length,x.height=256,v.beginPath(),v.strokeStyle="blue",f=0;f<g.length;f++)v.moveTo(f,255),v.lineTo(f,255-g[f]);v.stroke(),v.closePath()},printPattern:function(g,x){var f,v=x.getContext("2d");for(x.width=g.length,v.fillColor="black",f=0;f<g.length;f++)g[f]===1&&v.fillRect(f,0,1,100)}};var Vo=Bo;function fh(g,x){var f=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!f){if(Array.isArray(g)||(f=(function(D,I){if(D){if(typeof D=="string")return bi(D,I);var W={}.toString.call(D).slice(8,-1);return W==="Object"&&D.constructor&&(W=D.constructor.name),W==="Map"||W==="Set"?Array.from(D):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?bi(D,I):void 0}})(g))||x){f&&(g=f);var v=0,w=function(){};return{s:w,n:function(){return v>=g.length?{done:!0}:{done:!1,value:g[v++]}},e:function(D){throw D},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,N=!0,R=!1;return{s:function(){f=f.call(g)},n:function(){var D=f.next();return N=D.done,D},e:function(D){R=!0,_=D},f:function(){try{N||f.return==null||f.return()}finally{if(R)throw _}}}}function bi(g,x){(x==null||x>g.length)&&(x=g.length);for(var f=0,v=Array(x);f<x;f++)v[f]=g[f];return v}var Ea={code_128_reader:Ol,ean_reader:la,ean_5_reader:Su,ean_2_reader:_u,ean_8_reader:Tu,code_39_reader:Tt,code_39_vin_reader:Wr,codabar_reader:ar,upc_reader:Gi,upc_e_reader:wc,i2of5_reader:uh,"2of5_reader":Pl,code_93_reader:$i,code_32_reader:On,pharmacode_reader:xc},Vl={registerReader:function(g,x){Ea[g]=x},create:function(g,x){var f=[];function v(){g.readers.forEach((function(D){var I,W={},Z=[];k()(D)==="object"?(I=D.format,W=D.config):typeof D=="string"&&(I=D),W.supplements&&(Z=W.supplements.map((function(ye){return new Ea[ye]})));try{var de=new Ea[I](W,Z);f.push(de)}catch(ye){throw console.error("* Error constructing reader ",I,ye),ye}}))}function w(D){var I,W=null,Z=Vo.getBarcodeLine(x,D[0],D[1]);Vo.toBinaryLine(Z);var de=-1;for(I=0;I<f.length&&W===null;I++)typeof f[I].setImageWrapper=="function"&&f[I].setImageWrapper(x),(W=f[I].decodePattern(Z.line))!==null&&(de=I);return W===null||de>=0&&f[de]instanceof xc&&!(function(ye,We,fe,Pe){var et=Math.round(ye[1].y),rt=We.start,Ut=fe.constructor,Pt=Ut&&Ut.adjacentLineValidationMatches||0;if(Pt<=0)return!0;for(var Gt=0,gn=!1,nn=0,jn=[1,2,3];nn<jn.length;nn++){var _r=jn[nn];if(gn)break;for(var zs=0,Zn=[-1,1];zs<Zn.length;zs++){var Ja=Zn[zs];if(gn)break;var da=et+_r*Ja;if(!(da<0||da>=Pe.size.y)){var Ia={x:ye[0].x,y:da},Kr={x:ye[1].x,y:da};try{var Pr=Vo.getBarcodeLine(Pe,Ia,Kr);Vo.toBinaryLine(Pr),fe._row=Pr.line;var Yn=fe._findStart();if(Yn!==null&&Yn.start===rt&&++Gt>=Pt){gn=!0;break}}catch{}}}}return Gt>=Pt})(D,W,f[de],x)?null:{codeResult:W,barcodeLine:Z}}function _(D){return N.apply(this,arguments)}function N(){return(N=Us()(ps.a.mark((function D(I){var W,Z,de,ye,We;return ps.a.wrap((function(fe){for(;;)switch(fe.prev=fe.next){case 0:W=null,Z=fh(f),fe.prev=1,Z.s();case 2:if((de=Z.n()).done){fe.next=5;break}if(!(ye=de.value).decodeImage){fe.next=4;break}return fe.next=3,ye.decodeImage(I);case 3:if(!(W=fe.sent)){fe.next=4;break}return fe.abrupt("continue",5);case 4:fe.next=2;break;case 5:fe.next=7;break;case 6:fe.prev=6,We=fe.catch(1),Z.e(We);case 7:return fe.prev=7,Z.f(),fe.finish(7);case 8:return fe.abrupt("return",W);case 9:case"end":return fe.stop()}}),D,null,[[1,6,7,8]])})))).apply(this,arguments)}function R(D){var I,W,Z=(function(ye){return Math.sqrt(Math.pow(Math.abs(ye[1].y-ye[0].y),2)+Math.pow(Math.abs(ye[1].x-ye[0].x),2))})(I=(function(ye){return[{x:(ye[1][0]-ye[0][0])/2+ye[0][0],y:(ye[1][1]-ye[0][1])/2+ye[0][1]},{x:(ye[3][0]-ye[2][0])/2+ye[2][0],y:(ye[3][1]-ye[2][1])/2+ye[2][1]}]})(D)),de=Math.atan2(I[1].y-I[0].y,I[1].x-I[0].x);return(I=(function(ye,We,fe){function Pe(et){var rt=et*Math.sin(We),Ut=et*Math.cos(We);ye[0].y-=rt,ye[0].x-=Ut,ye[1].y+=rt,ye[1].x+=Ut}for(Pe(fe);fe>1&&(!x.inImageWithBorder(ye[0])||!x.inImageWithBorder(ye[1]));)Pe(-(fe-=Math.ceil(fe/2)));return ye})(I,de,Math.floor(.1*Z)))===null?null:((W=w(I))===null&&(W=(function(ye,We,fe){var Pe,et,rt,Ut=Math.sqrt(Math.pow(ye[1][0]-ye[0][0],2)+Math.pow(ye[1][1]-ye[0][1],2)),Pt=null,Gt=Math.sin(fe),gn=Math.cos(fe);for(Pe=1;Pe<16&&Pt===null;Pe++)rt={y:(et=Ut/16*Pe*(Pe%2==0?-1:1))*Gt,x:et*gn},We[0].y+=rt.x,We[0].x-=rt.y,We[1].y+=rt.x,We[1].x-=rt.y,Pt=w(We);return Pt})(D,I,de)),W===null?null:{codeResult:W.codeResult,line:I,angle:de,pattern:W.barcodeLine.line,threshold:W.barcodeLine.threshold})}return v(),{decodeFromBoundingBox:function(D){return R(D)},decodeFromBoundingBoxes:function(D){var I,W,Z=[],de=g.multiple;for(I=0;I<D.length;I++){var ye=D[I];if((W=R(ye)||{}).box=ye,de)Z.push(W);else if(W.codeResult)return W}return{barcodes:Z}},decodeFromImage:function(D){return Us()(ps.a.mark((function I(){var W;return ps.a.wrap((function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=1,_(D);case 1:return W=Z.sent,Z.abrupt("return",W);case 2:case"end":return Z.stop()}}),I)})))()},registerReader:function(D,I){if(Ea[D])throw new Error("cannot register existing reader",D);Ea[D]=I},setReaders:function(D){g.readers=D,f.length=0,v()}}}},xi=(function(){var g={};function x(w){return g[w]||(g[w]={subscribers:[]}),g[w]}function f(w,_){w.async?setTimeout((function(){w.callback(_)}),4):w.callback(_)}function v(w,_,N){var R;if(typeof _=="function")R={callback:_,async:N};else if(!(R=_).callback)throw new Error("Callback was not specified on options");x(w).subscribers.push(R)}return{subscribe:function(w,_,N){return v(w,_,N)},publish:function(w,_){var N=x(w),R=N.subscribers;R.filter((function(D){return!!D.once})).forEach((function(D){f(D,_)})),N.subscribers=R.filter((function(D){return!D.once})),N.subscribers.forEach((function(D){f(D,_)}))},once:function(w,_){var N=arguments.length>2&&arguments[2]!==void 0&&arguments[2];v(w,{callback:_,async:N,once:!0})},unsubscribe:function(w,_){if(w){var N=x(w);N.subscribers=N&&_?N.subscribers.filter((function(R){return R.callback!==_})):[]}else g={}}}})(),Ki=o(81),mh=o.n(Ki),ph=o(82),gh=o.n(ph),Fm=o(83);function zm(g,x,f){return x=pn()(x),Jn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(x,f||[],pn()(g).constructor):x.apply(g,f))}var Au=(function(g){function x(f,v){var w;return P()(this,x),w=zm(this,x,[f]),X()(w,"code",void 0),w.code=v,Object.setPrototypeOf(w,x.prototype),w}return As()(x,g),$()(x,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,code:this.code}}}])})(o.n(Fm)()(Error)),Ru="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function vh(){try{return navigator.mediaDevices.enumerateDevices()}catch{var g=new Au("enumerateDevices is not defined. ".concat(Ru),-1);return Promise.reject(g)}}function jc(g){try{return navigator.mediaDevices.getUserMedia(g)}catch{var x=new Au("getUserMedia is not defined. ".concat(Ru),-1);return Promise.reject(x)}}var Xs,_c=["deviceId"];function Mr(g,x){var f=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);x&&(v=v.filter((function(w){return Object.getOwnPropertyDescriptor(g,w).enumerable}))),f.push.apply(f,v)}return f}function Yi(g){for(var x=1;x<arguments.length;x++){var f=arguments[x]!=null?arguments[x]:{};x%2?Mr(Object(f),!0).forEach((function(v){X()(g,v,f[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(f)):Mr(Object(f)).forEach((function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(f,v))}))}return g}function Mu(g,x){var f=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!f){if(Array.isArray(g)||(f=(function(D,I){if(D){if(typeof D=="string")return Ul(D,I);var W={}.toString.call(D).slice(8,-1);return W==="Object"&&D.constructor&&(W=D.constructor.name),W==="Map"||W==="Set"?Array.from(D):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?Ul(D,I):void 0}})(g))||x){f&&(g=f);var v=0,w=function(){};return{s:w,n:function(){return v>=g.length?{done:!0}:{done:!1,value:g[v++]}},e:function(D){throw D},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,N=!0,R=!1;return{s:function(){f=f.call(g)},n:function(){var D=f.next();return N=D.done,D},e:function(D){R=!0,_=D},f:function(){try{N||f.return==null||f.return()}finally{if(R)throw _}}}}function Ul(g,x){(x==null||x>g.length)&&(x=g.length);for(var f=0,v=Array(x);f<x;f++)v[f]=g[f];return v}function kc(g){return new Promise((function(x,f){var v=10;(function w(){v>0?g.videoWidth>10&&g.videoHeight>10?x():window.setTimeout(w,500):f(new Au("Unable to play video stream. Is webcam working?",-1)),v--})()}))}function Du(g,x){return wi.apply(this,arguments)}function wi(){return(wi=Us()(ps.a.mark((function g(x,f){var v;return ps.a.wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=1,jc(f);case 1:if(v=w.sent,Xs=v,!x){w.next=2;break}return x.setAttribute("autoplay","true"),x.setAttribute("muted","true"),x.setAttribute("playsinline","true"),x.srcObject=v,x.addEventListener("loadedmetadata",(function(){x.play().catch((function(_){console.warn("* Error while trying to play video stream:",_)}))})),w.abrupt("return",kc(x));case 2:return w.abrupt("return",Promise.resolve());case 3:case"end":return w.stop()}}),g)})))).apply(this,arguments)}function Iu(g){var x=gh()(g,["facing","minAspectRatio","maxAspectRatio"]);return g.minAspectRatio!==void 0&&g.minAspectRatio>0&&(x.aspectRatio=g.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),g.facing!==void 0&&(x.facingMode=g.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),x}function Nc(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=Iu(g);return x&&x.deviceId&&x.facingMode&&delete x.facingMode,Promise.resolve({audio:!1,video:x})}function Qi(){return(Qi=Us()(ps.a.mark((function g(x){var f,v,w,_,N,R,D,I,W,Z;return ps.a.wrap((function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=1,vh();case 1:if(f=de.sent,v=f.filter((function(ye){return ye.kind==="videoinput"})),x){de.next=2;break}return de.abrupt("return",v);case 2:w=[],_=Iu(x),_.deviceId,N=mh()(_,_c),R=Mu(v),de.prev=3,R.s();case 4:if((D=R.n()).done){de.next=9;break}return I=D.value,de.prev=5,W={audio:!1,video:Yi(Yi({},N),{},{deviceId:{exact:I.deviceId}})},de.next=6,jc(W);case 6:de.sent.getTracks().forEach((function(ye){return ye.stop()})),w.push(I),de.next=8;break;case 7:de.prev=7,de.catch(5);case 8:de.next=4;break;case 9:de.next=11;break;case 10:de.prev=10,Z=de.catch(3),R.e(Z);case 11:return de.prev=11,R.f(),de.finish(11);case 12:return de.abrupt("return",w);case 13:case"end":return de.stop()}}),g,null,[[3,10,11,12],[5,7]])})))).apply(this,arguments)}function Sc(){if(!Xs)return null;var g=Xs.getVideoTracks();return g&&g!=null&&g.length?g[0]:null}var Js={requestedVideoElement:null,request:function(g,x){return Us()(ps.a.mark((function f(){var v;return ps.a.wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return Js.requestedVideoElement=g,w.next=1,Nc(x);case 1:return v=w.sent,w.abrupt("return",Du(g,v));case 2:case"end":return w.stop()}}),f)})))()},release:function(){var g=Xs&&Xs.getVideoTracks();return Js.requestedVideoElement!==null&&Js.requestedVideoElement.pause(),new Promise((function(x){setTimeout((function(){g&&g.length&&g.forEach((function(f){return f.stop()})),Xs=null,Js.requestedVideoElement=null,x()}),0)}))},enumerateVideoDevices:function(g){return Qi.apply(this,arguments)},getActiveStream:function(){var g;return(g=Xs)!==null&&g!==void 0?g:null},getActiveStreamLabel:function(){var g=Sc();return g?g.label:""},getActiveTrack:Sc,disableTorch:function(){return Us()(ps.a.mark((function g(){var x,f;return ps.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(!(x=Sc())){v.next=4;break}return v.prev=1,v.next=2,x.applyConstraints({advanced:[{torch:!1}]});case 2:v.next=4;break;case 3:throw v.prev=3,(f=v.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),f;case 4:case"end":return v.stop()}}),g,null,[[1,3]])})))()},enableTorch:function(){return Us()(ps.a.mark((function g(){var x,f;return ps.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(!(x=Sc())){v.next=4;break}return v.prev=1,v.next=2,x.applyConstraints({advanced:[{torch:!0}]});case 2:v.next=4;break;case 3:throw v.prev=3,(f=v.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),f;case 4:case"end":return v.stop()}}),g,null,[[1,3]])})))()}},Uo=Js,Ca={create:function(g){var x,f=document.createElement("canvas"),v=f.getContext("2d",{willReadFrequently:!!g.willReadFrequently}),w=[],_=(x=g.capacity)!==null&&x!==void 0?x:20,N=g.capture===!0;function R(D){return!!_&&D&&!(function(I,W){return W&&W.some((function(Z){return Object.keys(Z).every((function(de){return Z[de]===I[de]}))}))})(D,g.blacklist)&&(function(I,W){return typeof W!="function"||W(I)})(D,g.filter)}return{addResult:function(D,I,W){var Z={};R(W)&&(_--,Z.codeResult=W,N&&(f.width=I.x,f.height=I.y,Na.drawImage(D,I,v),Z.frame=f.toDataURL()),w.push(Z))},getResults:function(){return w}}}},yh={inputStream:{type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,canvas:{createOverlay:!0},decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},Fl=Math.PI/180,ji={};ji.create=function(g,x){var f,v={},w=g.getConfig(),_=wr(g.getRealWidth(),g.getRealHeight()),N=g.getCanvasSize(),R=wr(g.getWidth(),g.getHeight()),D=g.getTopRight(),I=D.x,W=D.y,Z=null,de=null,ye=w.willReadFrequently;function We(fe,Pe,et,rt,Ut){var Pt=Math.floor(rt),Gt=Math.floor(Ut),gn=Math.min(Pt+1,Pe-1),nn=Math.min(Gt+1,et-1),jn=rt-Pt,_r=Ut-Gt;return(fe[Gt*Pe+Pt]*(1-jn)+fe[Gt*Pe+gn]*jn)*(1-_r)+(fe[nn*Pe+Pt]*(1-jn)+fe[nn*Pe+gn]*jn)*_r}return(f=x||document.createElement("canvas")).width=N.x,f.height=N.y,Z=f.getContext("2d",{willReadFrequently:!!ye}),de=new Uint8Array(R.x*R.y),v.attachData=function(fe){de=fe},v.getData=function(){return de},v.grab=function(){var fe=w.halfSample,Pe=g.getFrame(),et=Pe,rt=0;if(et){if((function(Yn,Yr,Pa){Yn.width!==Yr.x&&(Yn.width=Yr.x),Yn.height!==Yr.y&&(Yn.height=Yr.y)})(f,N,w.debug),w.type==="ImageStream"&&(et=Pe.img,Pe.tags&&Pe.tags.orientation))switch(Pe.tags.orientation){case 6:rt=90*Fl;break;case 8:rt=-90*Fl}if(rt!==0?(Z.translate(N.x/2,N.y/2),Z.rotate(rt),Z.drawImage(et,-N.y/2,-N.x/2,N.y,N.x),Z.rotate(-rt),Z.translate(-N.x/2,-N.y/2)):Z.drawImage(et,0,0,N.x,N.y),fe)(function(Yn,Yr,Pa){for(var ha,fa=0,In=Yr.x,Ms=Math.floor(Yn.length/4),Or=Yr.x/2,Lr=0,Za=Yr.x;In<Ms;){for(ha=0;ha<Or;ha++)Pa[Lr]=(.299*Yn[4*fa+0]+.587*Yn[4*fa+1]+.114*Yn[4*fa+2]+(.299*Yn[4*(fa+1)+0]+.587*Yn[4*(fa+1)+1]+.114*Yn[4*(fa+1)+2])+(.299*Yn[4*In+0]+.587*Yn[4*In+1]+.114*Yn[4*In+2])+(.299*Yn[4*(In+1)+0]+.587*Yn[4*(In+1)+1]+.114*Yn[4*(In+1)+2]))/4,Lr++,fa+=2,In+=2;fa+=Za,In+=Za}})(Z.getImageData(I,W,R.x,R.y).data,R,de);else{var Ut=document.createElement("canvas");Ut.width=_.x,Ut.height=_.y;var Pt=Ut.getContext("2d");rt!==0?(Pt.translate(_.x/2,_.y/2),Pt.rotate(rt),Pt.drawImage(et,-_.y/2,-_.x/2,_.y,_.x)):Pt.drawImage(et,0,0,_.x,_.y);var Gt=Pt.getImageData(0,0,_.x,_.y).data,gn=new Uint8Array(_.x*_.y);_a(Gt,gn,w);for(var nn=new Uint8Array(N.x*N.y),jn=_.x/N.x,_r=_.y/N.y,zs=0;zs<N.y;zs++)for(var Zn=0;Zn<N.x;Zn++){var Ja=Zn*jn,da=zs*_r;nn[zs*N.x+Zn]=0|We(gn,_.x,_.y,Ja,da)}for(var Ia=0;Ia<R.y;Ia++)for(var Kr=0;Kr<R.x;Kr++){var Pr=(Ia+W)*N.x+(Kr+I);de[Ia*R.x+Kr]=nn[Pr]}}return!0}return!1},v.getSize=function(){return R},v};var Pu=ji,zl={274:"orientation"},Tc=Object.keys(zl).map((function(g){return zl[g]}));function bh(g){return new Promise((function(x){var f=new FileReader;f.onload=function(v){return x(v.target.result)},f.readAsArrayBuffer(g)}))}function Hr(g){return new Promise((function(x,f){var v=new XMLHttpRequest;v.open("GET",g,!0),v.responseType="blob",v.onreadystatechange=function(){v.readyState!==XMLHttpRequest.DONE||v.status!==200&&v.status!==0||x(this.response)},v.onerror=f,v.send()}))}function Fo(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tc,f=new DataView(g),v=g.byteLength,w=x.reduce((function(N,R){var D=Object.keys(zl).filter((function(I){return zl[I]===R}))[0];return D&&(N[D]=R),N}),{}),_=2;if(f.getUint8(0)!==255||f.getUint8(1)!==216)return!1;for(;_<v;){if(f.getUint8(_)!==255)return!1;if(f.getUint8(_+1)===225)return zo(f,_+4,w);_+=2+f.getUint16(_+2)}return!1}function zo(g,x,f){if((function(N,R,D){for(var I="",W=R;W<R+D;W++)I+=String.fromCharCode(N.getUint8(W));return I})(g,x,4)!=="Exif")return!1;var v,w=x+6;if(g.getUint16(w)===18761)v=!1;else{if(g.getUint16(w)!==19789)return!1;v=!0}if(g.getUint16(w+2,!v)!==42)return!1;var _=g.getUint32(w+4,!v);return!(_<8)&&(function(N,R,D,I,W){for(var Z=N.getUint16(D,!W),de={},ye=0;ye<Z;ye++){var We=D+12*ye+2,fe=I[N.getUint16(We,!W)];fe&&(de[fe]=Ec(N,We,R,D,W))}return de})(g,w,w+_,f,v)}function Ec(g,x,f,v,w){var _=g.getUint16(x+2,!w),N=g.getUint32(x+4,!w);switch(_){case 3:if(N===1)return g.getUint16(x+8,!w)}return null}function ql(g,x){return"".concat(g,"image-").concat(x.toString().padStart(3,"0"),".jpg")}var Dr={};function $r(g,x){g.onload=function(){x.loaded(this)},g.onerror=function(){x.loaded(this)}}Dr.load=function(g,x,f,v,w,_){var N,R,D,I=new Array(v),W=new Array(I.length);if(w===!1)I[0]=g;else for(N=0;N<I.length;N++)D=f+N,I[N]=ql(g,D);for(W.notLoaded=[],W.addImage=function(Z){W.notLoaded.push(Z)},W.loaded=function(Z){for(var de=W.notLoaded,ye=0;ye<de.length;ye++)if(de[ye]===Z){de.splice(ye,1);for(var We=0;We<I.length;We++){var fe=encodeURI(I[We].substr(I[We].lastIndexOf("/")));if(Z.src.lastIndexOf(fe)!==-1){W[We]={img:Z};break}}break}de.length===0&&(w===!1?(function(Pe){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tc;return/^blob:/i.test(Pe)?Hr(Pe).then(bh).then((function(rt){return Fo(rt,et)})):Promise.resolve(null)})(g,["orientation"]).then((function(Pe){W[0].tags=Pe,x(W)})).catch((function(Pe){console.log(Pe),x(W)})):x(W))},N=0;N<I.length;N++)R=new Image,W.addImage(R),$r(R,W),R.src=I[N]};var _i=Dr,ca={createVideoStream:function(g){console.warn("**** InputStreamBrowser createVideoStream");var x,f,v=null,w=["canrecord","ended"],_={},N={x:0,y:0,type:"Point"},R={x:0,y:0,type:"XYSize"},D={getRealWidth:function(){return g.videoWidth},getRealHeight:function(){return g.videoHeight},getWidth:function(){return x},getHeight:function(){return f},setWidth:function(I){x=I},setHeight:function(I){f=I},setInputStream:function(I){v=I,this.setAttribute("src",I.src!==void 0?I.src:"")},ended:function(){return g.ended},getConfig:function(){return v},setAttribute:function(I,W){g&&g.setAttribute(I,W)},pause:function(){g.pause()},play:function(){g.play()},setCurrentTime:function(I){var W;((W=v)===null||W===void 0?void 0:W.type)!=="LiveStream"&&this.setAttribute("currentTime",I.toString())},addEventListener:function(I,W,Z){w.indexOf(I)!==-1?(_[I]||(_[I]=[]),_[I].push(W)):g.addEventListener(I,W,Z)},clearEventHandlers:function(){w.forEach((function(I){var W=_[I];W&&W.length>0&&W.forEach((function(Z){g.removeEventListener(I,Z)}))}))},trigger:function(I,W){var Z,de,ye,We,fe,Pe=_[I];if(I==="canrecord"&&(We=g.videoWidth,fe=g.videoHeight,x=(de=v)!==null&&de!==void 0&&de.size?We/fe>1?v.size:Math.floor(We/fe*v.size):We,f=(ye=v)!==null&&ye!==void 0&&ye.size?We/fe>1?Math.floor(fe/We*v.size):v.size:fe,R.x=x,R.y=f),Pe&&Pe.length>0)for(Z=0;Z<Pe.length;Z++)Pe[Z].apply(D,W)},setTopRight:function(I){N.x=I.x,N.y=I.y},getTopRight:function(){return N},setCanvasSize:function(I){R.x=I.x,R.y=I.y},getCanvasSize:function(){return R},getFrame:function(){return g}};return D},createLiveStream:function(g){console.warn("**** InputStreamBrowser createLiveStream"),g&&g.setAttribute("autoplay","true");var x=ca.createVideoStream(g);return x.ended=function(){return!1},x},createImageStream:function(){var g,x,f=null,v=0,w=0,_=0,N=!0,R=!1,D=null,I=0,W=null,Z=!1,de=["canrecord","ended"],ye={},We={x:0,y:0,type:"Point"},fe={x:0,y:0,type:"XYSize"};function Pe(rt,Ut){var Pt,Gt=ye[rt];if(Gt&&Gt.length>0)for(Pt=0;Pt<Gt.length;Pt++)Gt[Pt].apply(et,Ut)}var et={trigger:Pe,getWidth:function(){return g},getHeight:function(){return x},setWidth:function(rt){g=rt},setHeight:function(rt){x=rt},getRealWidth:function(){return v},getRealHeight:function(){return w},setInputStream:function(rt){var Ut;f=rt,rt.sequence===!1?(W=rt.src,I=1):(W=rt.src,I=rt.length),R=!1,_i.load(W,(function(Pt){var Gt,gn;if(D=Pt,Pt[0].tags&&Pt[0].tags.orientation)switch(Pt[0].tags.orientation){case 6:case 8:v=Pt[0].img.height,w=Pt[0].img.width;break;default:v=Pt[0].img.width,w=Pt[0].img.height}else v=Pt[0].img.width,w=Pt[0].img.height;g=(Gt=f)!==null&&Gt!==void 0&&Gt.size?v/w>1?f.size:Math.floor(v/w*f.size):v,x=(gn=f)!==null&&gn!==void 0&&gn.size?v/w>1?Math.floor(w/v*f.size):f.size:w,fe.x=g,fe.y=x,R=!0,_=0,setTimeout((function(){Pe("canrecord",[])}),0)}),1,I,(Ut=f)===null||Ut===void 0?void 0:Ut.sequence,f)},ended:function(){return Z},setAttribute:function(){},getConfig:function(){return f},pause:function(){N=!0},play:function(){N=!1},setCurrentTime:function(rt){_=rt},addEventListener:function(rt,Ut){de.indexOf(rt)!==-1&&(ye[rt]||(ye[rt]=[]),ye[rt].push(Ut))},clearEventHandlers:function(){Object.keys(ye).forEach((function(rt){return delete ye[rt]}))},setTopRight:function(rt){We.x=rt.x,We.y=rt.y},getTopRight:function(){return We},setCanvasSize:function(rt){fe.x=rt.x,fe.y=rt.y},getCanvasSize:function(){return fe},getFrame:function(){var rt,Ut;return R?(N||(rt=(Ut=D)===null||Ut===void 0?void 0:Ut[_],_<I-1?_++:setTimeout((function(){Z=!0,Pe("ended",[])}),0)),rt):null}};return et}},Aa=ca,Gr={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(g,x){var f,v=g.data,w=x.data,_=this.searchDirections,N=g.size.x;function R(I,W,Z,de){var ye,We,fe;for(ye=0;ye<_.length;ye++){if(We=I.cy+_[I.dir][0],fe=I.cx+_[I.dir][1],v[f=We*N+fe]===W&&(w[f]===0||w[f]===Z))return w[f]=Z,I.cy=We,I.cx=fe,!0;w[f]===0&&(w[f]=de),I.dir=(I.dir+1)%8}return!1}function D(I,W,Z){return{dir:Z,x:I,y:W,next:null,prev:null}}return{trace:function(I,W,Z,de){return R(I,W,Z,de)},contourTracing:function(I,W,Z,de,ye){return(function(We,fe,Pe,et,rt){var Ut,Pt,Gt,gn=null,nn={cx:fe,cy:We,dir:0};if(R(nn,et,Pe,rt)){Ut=gn=D(fe,We,nn.dir),Gt=nn.dir,(Pt=D(nn.cx,nn.cy,0)).prev=Ut,Ut.next=Pt,Pt.next=null,Ut=Pt;var jn=g.size.x*g.size.y,_r=0;do nn.dir=(nn.dir+6)%8,R(nn,et,Pe,rt),Gt!==nn.dir?(Ut.dir=nn.dir,(Pt=D(nn.cx,nn.cy,0)).prev=Ut,Ut.next=Pt,Pt.next=null,Ut=Pt):(Ut.dir=Gt,Ut.x=nn.cx,Ut.y=nn.cy),Gt=nn.dir;while((nn.cx!==fe||nn.cy!==We)&&++_r<jn);gn.prev=Ut.prev,Ut.prev.next=gn}return gn})(I,W,Z,de,ye)}}}},mr={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(g,x){var f=g.data,v=x.data,w=g.size.x,_=g.size.y,N=Gr.create(g,x);return{rasterize:function(R){var D,I,W,Z,de,ye,We,fe,Pe,et,rt,Ut,Pt=[],Gt=0;for(Ut=0;Ut<400;Ut++)Pt[Ut]=0;for(Pt[0]=f[0],Pe=null,ye=1;ye<_-1;ye++)for(Z=0,I=Pt[0],de=1;de<w-1;de++)if(v[rt=ye*w+de]===0)if((D=f[rt])!==I){if(Z===0)Pt[W=Gt+1]=D,I=D,(We=N.contourTracing(ye,de,W,D,mr.DIR.OUTSIDE_EDGE))!==null&&(Gt++,Z=W,(fe=mr.createContour2D()).dir=mr.CONTOUR_DIR.CW_DIR,fe.index=Z,fe.firstVertex=We,fe.nextpeer=Pe,fe.insideContours=null,Pe!==null&&(Pe.prevpeer=fe),Pe=fe);else if((We=N.contourTracing(ye,de,mr.DIR.INSIDE_EDGE,D,Z))!==null){for((fe=mr.createContour2D()).firstVertex=We,fe.insideContours=null,fe.dir=R===0?mr.CONTOUR_DIR.CCW_DIR:mr.CONTOUR_DIR.CW_DIR,fe.index=R,et=Pe;et!==null&&et.index!==Z;)et=et.nextpeer;et!==null&&(fe.nextpeer=et.insideContours,et.insideContours!==null&&(et.insideContours.prevpeer=fe),et.insideContours=fe)}}else v[rt]=Z;else v[rt]===mr.DIR.OUTSIDE_EDGE||v[rt]===mr.DIR.INSIDE_EDGE?(Z=0,I=v[rt]===mr.DIR.INSIDE_EDGE?f[rt]:Pt[0]):I=Pt[Z=v[rt]];for(et=Pe;et!==null;)et.index=R,et=et.nextpeer;return{cc:Pe,count:Gt}},debug:{drawContour:function(R,D){var I,W,Z,de=R.getContext("2d"),ye=D;for(de.strokeStyle="red",de.fillStyle="red",de.lineWidth=1,I=ye!==null?ye.insideContours:null;ye!==null;){switch(I!==null?(W=I,I=I.nextpeer):(W=ye,I=(ye=ye.nextpeer)!==null?ye.insideContours:null),W.dir){case mr.CONTOUR_DIR.CW_DIR:de.strokeStyle="red";break;case mr.CONTOUR_DIR.CCW_DIR:de.strokeStyle="blue";break;case mr.CONTOUR_DIR.UNKNOWN_DIR:de.strokeStyle="green"}Z=W.firstVertex,de.beginPath(),de.moveTo(Z.x,Z.y);do Z=Z.next,de.lineTo(Z.x,Z.y);while(Z!==W.firstVertex);de.stroke()}}}}}},Ou=mr;var Ya,Ra,Rs,En,wn,Ir,zn,Ma,Zs,er,qo,Xi,Ji=function(g,x,f){var v=new g.Uint8Array(f),w=x.size|0,_=g.Math.imul;function N(fe,Pe){fe=fe|0,Pe=Pe|0;var et=0,rt=0,Ut=0,Pt=0,Gt=0,gn=0,nn=0,jn=0;for(et=1;(et|0)<(w-1|0);et=et+1|0)for(jn=jn+w|0,rt=1;(rt|0)<(w-1|0);rt=rt+1|0)Pt=jn-w|0,Gt=jn+w|0,gn=rt-1|0,nn=rt+1|0,Ut=(v[fe+Pt+gn|0]|0)+(v[fe+Pt+nn|0]|0)+(v[fe+jn+rt|0]|0)+(v[fe+Gt+gn|0]|0)+(v[fe+Gt+nn|0]|0)|0,(Ut|0)==5?v[Pe+jn+rt|0]=1:v[Pe+jn+rt|0]=0}function R(fe,Pe,et){fe=fe|0,Pe=Pe|0,et=et|0;var rt=0;for(rt=_(w,w)|0;(rt|0)>0;)rt=rt-1|0,v[et+rt|0]=(v[fe+rt|0]|0)-(v[Pe+rt|0]|0)|0}function D(fe,Pe,et){fe=fe|0,Pe=Pe|0,et=et|0;var rt=0;for(rt=_(w,w)|0;(rt|0)>0;)rt=rt-1|0,v[et+rt|0]=v[fe+rt|0]|0|(v[Pe+rt|0]|0)|0}function I(fe){fe=fe|0;var Pe=0,et=0;for(et=_(w,w)|0;(et|0)>0;)et=et-1|0,Pe=(Pe|0)+(v[fe+et|0]|0)|0;return Pe|0}function W(fe,Pe){fe=fe|0,Pe=Pe|0;var et=0;for(et=_(w,w)|0;(et|0)>0;)et=et-1|0,v[fe+et|0]=Pe}function Z(fe,Pe){fe=fe|0,Pe=Pe|0;var et=0,rt=0,Ut=0,Pt=0,Gt=0,gn=0,nn=0,jn=0;for(et=1;(et|0)<(w-1|0);et=et+1|0)for(jn=jn+w|0,rt=1;(rt|0)<(w-1|0);rt=rt+1|0)Pt=jn-w|0,Gt=jn+w|0,gn=rt-1|0,nn=rt+1|0,Ut=(v[fe+Pt+gn|0]|0)+(v[fe+Pt+nn|0]|0)+(v[fe+jn+rt|0]|0)+(v[fe+Gt+gn|0]|0)+(v[fe+Gt+nn|0]|0)|0,(Ut|0)>0?v[Pe+jn+rt|0]=1:v[Pe+jn+rt|0]=0}function de(fe,Pe){fe=fe|0,Pe=Pe|0;var et=0;for(et=_(w,w)|0;(et|0)>0;)et=et-1|0,v[Pe+et|0]=v[fe+et|0]|0}function ye(fe){fe=fe|0;var Pe=0,et=0;for(Pe=0;(Pe|0)<(w-1|0);Pe=Pe+1|0)v[fe+Pe|0]=0,v[fe+et|0]=0,et=et+w-1|0,v[fe+et|0]=0,et=et+1|0;for(Pe=0;(Pe|0)<(w|0);Pe=Pe+1|0)v[fe+et|0]=0,et=et+1|0}function We(){var fe=0,Pe=0,et=0,rt=0,Ut=0,Pt=0;Pe=_(w,w)|0,et=Pe+Pe|0,rt=et+Pe|0,W(rt,0),ye(fe);do N(fe,Pe),Z(Pe,et),R(fe,et,et),D(rt,et,rt),de(Pe,fe),Ut=I(fe)|0,Pt=(Ut|0)==0|0;while(!Pt)}return{skeletonize:We}},ki={ctx:{binary:null},dom:{binary:null}},ua={x:0,y:0};function Lu(g){var x,f,v,w,_,N,R,D=Zs.size.x,I=Zs.size.y,W=-Zs.size.x,Z=-Zs.size.y;for(x=0,f=0;f<g.length;f++)x+=(w=g[f]).rad;for((x=(180*(x/=g.length)/Math.PI+90)%180-90)<0&&(x+=180),x=(180-x)*Math.PI/180,_=c.copy(c.create(),[Math.cos(x),Math.sin(x),-Math.sin(x),Math.cos(x)]),f=0;f<g.length;f++)for(w=g[f],v=0;v<4;v++)u.transformMat2(w.box[v],w.box[v],_);for(f=0;f<g.length;f++)for(w=g[f],v=0;v<4;v++)w.box[v][0]<D&&(D=w.box[v][0]),w.box[v][0]>W&&(W=w.box[v][0]),w.box[v][1]<I&&(I=w.box[v][1]),w.box[v][1]>Z&&(Z=w.box[v][1]);for(N=[[D,I],[W,I],[W,Z],[D,Z]],R=Ya.halfSample?2:1,_=c.invert(_,_),v=0;v<4;v++)u.transformMat2(N[v],N[v],_);for(v=0;v<4;v++)u.scale(N[v],N[v],R);return N}function Zi(g){var x=(function(_,N,R){var D,I,W,Z,de=0,ye=0,We=[];for(D=0;D<N;D++)We[D]={score:0,item:null};for(D=0;D<_.length;D++)if((I=R.apply(this,[_[D]]))>ye)for((W=We[de]).score=I,W.item=_[D],ye=Number.MAX_VALUE,Z=0;Z<N;Z++)We[Z].score<ye&&(ye=We[Z].score,de=Z);return We})((function(_,N,R){var D,I,W,Z,de=[];function ye(We){var fe=!1;for(I=0;I<de.length;I++)(W=de[I]).fits(We)&&(W.add(We),fe=!0);return fe}for(R||(R="rad"),D=0;D<_.length;D++)ye(Z=ia(_[D],D,R))||de.push(mi(Z,N));return de})(g,.9),1,(function(_){return _.getPoints().length})),f=[],v=[];if(x.length===1){f=x[0].item.getPoints();for(var w=0;w<f.length;w++)v.push(f[w].point)}return v}function Qa(g,x){Zs.subImageAsCopy(En,wr(g,x)),Xi.skeletonize()}function Ni(g,x,f,v){var w,_,N,R,D=[],I=[],W=Math.ceil(er.x/3);if(g.length>=2){for(w=0;w<g.length;w++)g[w].m00>W&&D.push(g[w]);if(D.length>=2){for(N=Zi(D),_=0,w=0;w<N.length;w++){var Z,de;_+=(Z=(de=N[w])===null||de===void 0?void 0:de.rad)!==null&&Z!==void 0?Z:0}N.length>1&&N.length>=D.length/4*3&&N.length>g.length/4&&(_/=N.length,R={index:x[1]*ua.x+x[0],pos:{x:f,y:v},box:[u.clone([f,v]),u.clone([f+En.size.x,v]),u.clone([f+En.size.x,v+En.size.y]),u.clone([f,v+En.size.y])],moments:N,rad:_,vec:u.clone([Math.cos(_),Math.sin(_)])},I.push(R))}}return I}var Xa=function(g,x){Ya=x,qo=g,(function(){Ra=Ya.halfSample?new Kn({x:qo.size.x/2|0,y:qo.size.y/2|0}):qo,er=Ro(Ya.patchSize,Ra.size),ua.x=Ra.size.x/er.x|0,ua.y=Ra.size.y/er.y|0,Zs=new Kn(Ra.size,void 0,Uint8Array,!1),wn=new Kn(er,void 0,Array,!0);var f=er.x*er.y*4,v=Math.max(65536,Math.pow(2,Math.ceil(Math.log2(f)))),w=new ArrayBuffer(v);En=new Kn(er,new Uint8Array(w,0,er.x*er.y)),Rs=new Kn(er,new Uint8Array(w,er.x*er.y*3,er.x*er.y),void 0,!0),Xi=Ji({Math,Uint8Array},{size:er.x},w),Ma=new Kn({x:Ra.size.x/En.size.x|0,y:Ra.size.y/En.size.y|0},void 0,Array,!0),Ir=new Kn(Ma.size,void 0,void 0,!0),zn=new Kn(Ma.size,void 0,Int32Array,!0)})(),(function(){if(!Ya.useWorker&&typeof document<"u"){ki.dom.binary=document.createElement("canvas"),ki.dom.binary.className="binaryBuffer";var f=!!Ya.willReadFrequently;ki.ctx.binary=ki.dom.binary.getContext("2d",{willReadFrequently:f}),ki.dom.binary.width=Zs.size.x,ki.dom.binary.height=Zs.size.y}})()},Bu=function(){Ya.halfSample&&(function(v,w){for(var _=v.data,N=v.size.x,R=w.data,D=0,I=N,W=_.length,Z=N/2,de=0;I<W;){for(var ye=0;ye<Z;ye++)R[de]=Math.floor((_[D]+_[D+1]+_[I]+_[I+1])/4),de++,D+=2,I+=2;D+=N,I+=N}})(qo,Ra),Wn(Ra,Zs),Zs.zeroBorder();var g=(function(){var v,w,_,N,R,D,I=[];for(v=0;v<ua.x;v++)for(w=0;w<ua.y;w++)Qa(_=En.size.x*v,N=En.size.y*w),Rs.zeroBorder(),fr(wn.data,0),D=Ou.create(Rs,wn).rasterize(0),R=wn.moments(D.count),I=I.concat(Ni(R,[v,w],_,N));return I})();if(g.length<ua.x*ua.y*.05)return null;var x=(function(v){var w,_,N=0,R=0;function D(){var W;for(W=0;W<zn.data.length;W++)if(zn.data[W]===0&&Ir.data[W]===1)return W;return zn.data.length}function I(W){var Z,de,ye,We,fe,Pe=W%zn.size.x,et=W/zn.size.x|0;if(W<zn.data.length)for(ye=Ma.data[W],zn.data[W]=N,fe=0;fe<Gr.searchDirections.length;fe++)de=et+Gr.searchDirections[fe][0],Z=Pe+Gr.searchDirections[fe][1],We=de*zn.size.x+Z,Ir.data[We]!==0?zn.data[We]===0&&Math.abs(u.dot(Ma.data[We].vec,ye.vec))>.95&&I(We):zn.data[We]=Number.MAX_VALUE}for(fr(Ir.data,0),fr(zn.data,0),fr(Ma.data,null),w=0;w<v.length;w++)_=v[w],Ma.data[_.index]=_,Ir.data[_.index]=1;for(Ir.zeroBorder();(R=D())<zn.data.length;)N++,I(R);return N})(g);if(x<1)return null;var f=(function(v){var w,_,N=[];for(w=0;w<v;w++)N.push(0);for(_=zn.data.length;_--;)zn.data[_]>0&&N[zn.data[_]-1]++;return(N=N.map((function(R,D){return{val:R,label:D+1}}))).sort((function(R,D){return D.val-R.val})),N.filter((function(R){return R.val>=5}))})(x);return f.length===0?null:(function(v,w){var _,N,R,D,I=[],W=[];for(_=0;_<v.length;_++){for(N=zn.data.length,I.length=0;N--;)zn.data[N]===v[_].label&&(R=Ma.data[N],I.push(R));(D=Lu(I))&&W.push(D)}return W})(f)},Vu=function(g,x){var f,v,w=g.getWidth(),_=g.getHeight(),N=x.halfSample?.5:1;g.getConfig().area&&(v=Wa(w,_,g.getConfig().area),g.setTopRight({x:v.sx,y:v.sy}),g.setCanvasSize({x:w,y:_}),w=v.sw,_=v.sh);var R={x:Math.floor(w*N),y:Math.floor(_*N)};if(f=Ro(x.patchSize,R),g.setWidth(Math.max(Math.floor(Math.floor(R.x/f.x)*(1/N)*f.x),f.x)),g.setHeight(Math.max(Math.floor(Math.floor(R.y/f.y)*(1/N)*f.y),f.y)),g.getWidth()%f.x==0&&g.getHeight()%f.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(w," )and height (").concat(_,") must a multiple of ").concat(f.x))},Wo=$()((function g(){P()(this,g),X()(this,"config",void 0),X()(this,"inputStream",void 0),X()(this,"framegrabber",void 0),X()(this,"inputImageWrapper",void 0),X()(this,"stopped",!1),X()(this,"initAborted",!1),X()(this,"boxSize",void 0),X()(this,"resultCollector",void 0),X()(this,"decoder",void 0),X()(this,"workerPool",[]),X()(this,"onUIThread",!0),X()(this,"canvasContainer",new eo)})),Wl=$()((function g(){P()(this,g),X()(this,"image",void 0),X()(this,"overlay",void 0)})),eo=$()((function g(){P()(this,g),X()(this,"ctx",void 0),X()(this,"dom",void 0),this.ctx=new Wl,this.dom=new Wl}));function Fs(g){if(typeof document>"u")return null;if(g instanceof HTMLElement&&g.nodeName&&g.nodeType===1)return g;var x=typeof g=="string"?g:"#interactive.viewport";return document.querySelector(x)}function Hl(g,x,f){var v=(function(_,N){var R=document.querySelector(_);return R||((R=document.createElement("canvas")).className=N),R})(g,x),w=v.getContext("2d",{willReadFrequently:f.willReadFrequently});return{canvas:v,context:w}}function xh(g){var x,f,v,w,_,N,R,D,I,W,Z=Fs(g==null||(x=g.config)===null||x===void 0||(f=x.inputStream)===null||f===void 0?void 0:f.target),de=g==null||(v=g.config)===null||v===void 0||(w=v.inputStream)===null||w===void 0?void 0:w.type;if(!de)return null;var ye=(g==null||(_=g.config)===null||_===void 0||(N=_.canvas)===null||N===void 0?void 0:N.createOverlay)!==!1,We=(function(Pe,et){var rt=et.willReadFrequently,Ut=et.createOverlay;if(typeof document<"u"){var Pt=Hl("canvas.imgBuffer","imgBuffer",{willReadFrequently:rt});Pt.canvas.width=Pe.x,Pt.canvas.height=Pe.y;var Gt={canvas:null,context:null};if(Ut){var gn=Hl("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:rt});gn.canvas.width=Pe.x,gn.canvas.height=Pe.y,Gt=gn}return{dom:{image:Pt.canvas,overlay:Gt.canvas},ctx:{image:Pt.context,overlay:Gt.context}}}return null})(g.inputStream.getCanvasSize(),{willReadFrequently:!(g==null||(R=g.config)===null||R===void 0||(D=R.inputStream)===null||D===void 0||!D.willReadFrequently),createOverlay:ye,debug:g==null||(I=g.config)===null||I===void 0||(W=I.locator)===null||W===void 0?void 0:W.debug});if(!We)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var fe=We.dom;return typeof document<"u"&&Z&&(de!=="ImageStream"||Z.contains(fe.image)||Z.appendChild(fe.image),fe.overlay&&!Z.contains(fe.overlay)&&Z.appendChild(fe.overlay)),We}function wh(g,x){var f=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);x&&(v=v.filter((function(w){return Object.getOwnPropertyDescriptor(g,w).enumerable}))),f.push.apply(f,v)}return f}function Cc(g){for(var x=1;x<arguments.length;x++){var f=arguments[x]!=null?arguments[x]:{};x%2?wh(Object(f),!0).forEach((function(v){X()(g,v,f[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(f)):wh(Object(f)).forEach((function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(f,v))}))}return g}var Da=[];function Ss(g){return Cc(Cc({},g),{},{inputStream:Cc(Cc({},g.inputStream),{},{target:null})})}function Uu(g){if(g){var x=g().default;if(!x)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var f;function v(_){self.postMessage({event:"processed",imageData:f.data,result:_},[f.data.buffer])}function w(){self.postMessage({event:"initialized",imageData:f.data},[f.data.buffer])}self.onmessage=function(_){if(_.data.cmd==="init"){var N=_.data.config;N.numOfWorkers=0,f=new x.ImageWrapper({x:_.data.size.x,y:_.data.size.y},new Uint8Array(_.data.imageData)),x.init(N,w,f),x.onProcessed(v)}else _.data.cmd==="process"?(f.data=new Uint8Array(_.data.imageData),x.start()):_.data.cmd==="setReaders"?x.setReaders(_.data.readers):_.data.cmd==="registerReader"&&x.registerReader(_.data.name,_.data.reader)}}function $l(g,x,f){var v,w,_=(typeof __factorySource__<"u"&&(w=__factorySource__),v=new Blob(["("+Uu.toString()+")("+w+");"],{type:"text/javascript"}),window.URL.createObjectURL(v)),N={worker:new Worker(_),imageData:new Uint8Array(x.getWidth()*x.getHeight()),busy:!0};N.worker.onmessage=function(R){R.data.event==="initialized"?(URL.revokeObjectURL(_),N.busy=!1,N.imageData=new Uint8Array(R.data.imageData),f(N)):R.data.event==="processed"?(N.imageData=new Uint8Array(R.data.imageData),N.busy=!1,typeof publishResult<"u"&&publishResult(R.data.result,N.imageData)):R.data.event},N.worker.postMessage({cmd:"init",size:{x:x.getWidth(),y:x.getHeight()},imageData:N.imageData,config:Ss(g)},[N.imageData.buffer])}function Ho(g,x,f,v){var w=g-Da.length;if(w===0&&v)v();else if(w<0)Da.slice(w).forEach((function(R){R.worker.terminate()})),Da=Da.slice(0,w),v&&v();else{var _=function(R){Da.push(R),Da.length>=g&&v&&v()};if(x)for(var N=0;N<w;N++)$l(x,f,_)}}function Ac(g,x,f){for(var v=g.length;v--;)g[v][0]+=x,g[v][1]+=f}function $o(g,x,f){g[0].x+=x,g[0].y+=f,g[1].x+=x,g[1].y+=f}var to=(function(){return $()((function f(){var v=this;P()(this,f),X()(this,"context",new Wo),X()(this,"canRecord",(function(w){var _;v.context.initAborted?w(new Error("Initialization was aborted")):v.context.config?v.context.inputStream?(Vu(v.context.inputStream,(_=v.context.config)===null||_===void 0?void 0:_.locator),v.initCanvas(),v.context.framegrabber=Pu.create(v.context.inputStream,v.context.canvasContainer.dom.image),v.context.config.numOfWorkers===void 0&&(v.context.config.numOfWorkers=0),Ho(v.context.config.numOfWorkers,v.context.config,v.context.inputStream,(function(){var N;((N=v.context.config)===null||N===void 0?void 0:N.numOfWorkers)===0&&v.initializeData(),v.ready(w)}))):w(new Error("Input stream not initialized")):w(new Error("Configuration not initialized"))})),X()(this,"update",(function(){if(v.context.onUIThread){var w,_=(R=v.context.framegrabber,Da.length?!!(D=Da.filter((function(I){return!I.busy}))[0])&&(R.attachData(D.imageData),R.grab()&&(D.busy=!0,D.worker.postMessage({cmd:"process",imageData:D.imageData},[D.imageData.buffer])),!0):null);_||(v.context.framegrabber.attachData((w=v.context.inputImageWrapper)===null||w===void 0?void 0:w.data),v.context.framegrabber.grab()&&(_||v.locateAndDecode()))}else{var N;v.context.framegrabber.attachData((N=v.context.inputImageWrapper)===null||N===void 0?void 0:N.data),v.context.framegrabber.grab(),v.locateAndDecode()}var R,D})),X()(this,"_cachedStyleValues",void 0),X()(this,"_resolvedStyle",void 0)}),[{key:"initBuffers",value:function(f){if(this.context.config){var v=(function(N,R,D){var I=R||new Kn({x:N.getWidth(),y:N.getHeight(),type:"XYSize"}),W=[u.clone([0,0]),u.clone([0,I.size.y]),u.clone([I.size.x,I.size.y]),u.clone([I.size.x,0])];return Xa(I,D),{inputImageWrapper:I,boxSize:W}})(this.context.inputStream,f,this.context.config.locator),w=v.inputImageWrapper,_=v.boxSize;this.context.inputImageWrapper=w,this.context.boxSize=_}}},{key:"initializeData",value:function(f){this.context.config&&(this.initBuffers(f),this.context.decoder=Vl.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?Fs(this.context.config.inputStream.target):null}},{key:"ready",value:function(f){this.context.inputStream.play(),f()}},{key:"initCanvas",value:function(){var f=xh(this.context);if(f){var v=f.ctx,w=f.dom;this.context.canvasContainer.dom.image=w.image,this.context.canvasContainer.dom.overlay=w.overlay,this.context.canvasContainer.ctx.image=v.image,this.context.canvasContainer.ctx.overlay=v.overlay}}},{key:"initInputStream",value:function(f){if(this.context.config&&this.context.config.inputStream){var v=this.context.config.inputStream,w=v.type,_=v.constraints,N=(function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"LiveStream",W=arguments.length>1?arguments[1]:void 0,Z=arguments.length>2?arguments[2]:void 0;switch(I){case"VideoStream":var de=document.createElement("video");return{video:de,inputStream:Z.createVideoStream(de)};case"ImageStream":return{inputStream:Z.createImageStream()};case"LiveStream":var ye=null;return W&&((ye=W.querySelector("video"))||(ye=document.createElement("video"),W.appendChild(ye))),{video:ye,inputStream:Z.createLiveStream(ye)};default:return console.error("* setupInputStream invalid type ".concat(I)),{video:null,inputStream:null}}})(w,this.getViewPort(),Aa),R=N.video,D=N.inputStream;w==="LiveStream"&&R&&Uo.request(R,_).then((function(){return D.trigger("canrecord")})).catch((function(I){return f(I)})),D&&(D.setAttribute("preload","auto"),D.setInputStream(this.context.config.inputStream),D.addEventListener("canrecord",this.canRecord.bind(void 0,f))),this.context.inputStream=D}}},{key:"getBoundingBoxes",value:function(){var f;return(f=this.context.config)!==null&&f!==void 0&&f.locate?Bu():[[u.clone(this.context.boxSize[0]),u.clone(this.context.boxSize[1]),u.clone(this.context.boxSize[2]),u.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(f){var v=this,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set,_=this.context.inputStream.getTopRight(),N=_.x,R=_.y;if((N!==0||R!==0)&&(f.barcodes&&f.barcodes.forEach((function(I){return v.transformResult(I,w)})),f.line&&f.line.length===2&&$o(f.line,N,R),f.box&&!w.has(f.box)&&(Ac(f.box,N,R),w.add(f.box)),f.boxes&&f.boxes.length>0))for(var D=0;D<f.boxes.length;D++)w.has(f.boxes[D])||(Ac(f.boxes[D],N,R),w.add(f.boxes[D]))}},{key:"addResult",value:function(f,v){var w=this;v&&this.context.resultCollector&&(f.barcodes?f.barcodes.filter((function(_){return _.codeResult})).forEach((function(_){return w.addResult(_,v)})):f.codeResult&&this.context.resultCollector.addResult(v,this.context.inputStream.getCanvasSize(),f.codeResult))}},{key:"hasCodeResult",value:function(f){return!(!f||!(f.barcodes?f.barcodes.some((function(v){return v.codeResult})):f.codeResult))}},{key:"publishResult",value:function(){var f,v,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,_=arguments.length>1?arguments[1]:void 0,N=w;w&&this.context.onUIThread&&(this.transformResult(w),this.addResult(w,_),N=(w==null||(v=w.barcodes)===null||v===void 0?void 0:v.length)>0?w.barcodes:w),xi.publish("processed",N),this.hasCodeResult(w)&&xi.publish("detected",N);var R=this.context.config;R&&R.locate===!1&&(f=R.inputStream)!==null&&f!==void 0&&f.area&&this.drawScannerArea()}},{key:"locateAndDecode",value:(x=Us()(ps.a.mark((function f(){var v,w,_,N,R,D;return ps.a.wrap((function(I){for(;;)switch(I.prev=I.next){case 0:if(!(v=this.getBoundingBoxes())){I.next=3;break}return I.next=1,this.context.decoder.decodeFromBoundingBoxes(v);case 1:if(D=I.sent){I.next=2;break}D={};case 2:(_=D).boxes=v,this.publishResult(_,(w=this.context.inputImageWrapper)===null||w===void 0?void 0:w.data),I.next=5;break;case 3:return I.next=4,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 4:(N=I.sent)?this.publishResult(N,(R=this.context.inputImageWrapper)===null||R===void 0?void 0:R.data):this.publishResult();case 5:case"end":return I.stop()}}),f,this)}))),function(){return x.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var f,v=this,w=null,_=1e3/(((f=this.context.config)===null||f===void 0?void 0:f.frequency)||60);this.context.stopped=!1;var N=this.context,R=function(D){w=w||D,N.stopped||(D>=w&&(w+=_,v.update()),window.requestAnimationFrame(R))};R(performance.now())}},{key:"start",value:function(){var f,v;this.context.onUIThread&&((f=this.context.config)===null||f===void 0||(v=f.inputStream)===null||v===void 0?void 0:v.type)==="LiveStream"?this.startContinuousUpdate():this.update()}},{key:"stop",value:(g=Us()(ps.a.mark((function f(){var v,w;return ps.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if(this.context.stopped=!0,this.context.framegrabber||(this.context.initAborted=!0),Ho(0),(v=this.context.config)===null||v===void 0||!v.inputStream||this.context.config.inputStream.type!=="LiveStream"){_.next=2;break}return _.next=1,Uo.release();case 1:(w=this.context.inputStream)===null||w===void 0||w.clearEventHandlers();case 2:case"end":return _.stop()}}),f,this)}))),function(){return g.apply(this,arguments)})},{key:"setReaders",value:function(f){this.context.decoder&&this.context.decoder.setReaders(f),(function(v){Da.forEach((function(w){return w.worker.postMessage({cmd:"setReaders",readers:v})}))})(f)}},{key:"registerReader",value:function(f,v){Vl.registerReader(f,v),this.context.decoder&&this.context.decoder.registerReader(f,v),(function(w,_){Da.forEach((function(N){return N.worker.postMessage({cmd:"registerReader",name:w,reader:_})}))})(f,v)}},{key:"drawScannerArea",value:function(){var f,v,w,_=(f=this.context.config)===null||f===void 0||(v=f.inputStream)===null||v===void 0?void 0:v.area;if(_){var N=this.context.canvasContainer.ctx.overlay;if(N&&((w=this.context.config)===null||w===void 0?void 0:w.locate)===!1&&(_.borderColor!==void 0&&_.borderColor!==""||_.borderWidth!==void 0&&_.borderWidth>0||_.backgroundColor!==void 0&&_.backgroundColor!=="")&&this.context.boxSize){var R=this.context.inputStream.getTopRight(),D=R.x,I=R.y,W=this.context.boxSize,Z=W[0],de=W[1],ye=W[3],We=Z[0]+D,fe=Z[1]+I,Pe=ye[0]-Z[0],et=de[1]-Z[1];if(!this._cachedStyleValues||this._cachedStyleValues.borderColor!==_.borderColor||this._cachedStyleValues.borderWidth!==_.borderWidth||this._cachedStyleValues.backgroundColor!==_.backgroundColor){var rt,Ut;this._cachedStyleValues={borderColor:_.borderColor,borderWidth:_.borderWidth,backgroundColor:_.backgroundColor};var Pt=_.borderColor!==void 0||_.borderWidth!==void 0,Gt=(rt=_.borderColor)!==null&&rt!==void 0?rt:"rgba(0, 255, 0, 0.5)",gn=Pt?(Ut=_.borderWidth)!==null&&Ut!==void 0?Ut:2:0,nn=_.backgroundColor;this._resolvedStyle={color:Gt,width:gn,bg:nn}}var jn=this._resolvedStyle;jn.bg&&(N.fillStyle=jn.bg,N.fillRect(We,fe,Pe,et)),jn.width>0&&(N.strokeStyle=jn.color,N.lineWidth=jn.width,N.strokeRect(We,fe,Pe,et))}}}}]);var g,x})(),Si=new to,Go=Si.context,jh={init:function(g,x,f){var v,w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Si;return x||(v=new Promise((function(_,N){x=function(R){R?N(R):_()}}))),w.context.initAborted=!1,w.context.config=E()({},yh,g),w.context.config.numOfWorkers>0&&(w.context.config.numOfWorkers=0),f?(w.context.onUIThread=!1,w.initializeData(f),x&&x()):w.initInputStream(x),v},start:function(g,x){var f;if(g)return x||(f=new Promise((function(v,w){x=function(_){_?w(_):v()}}))),this.init(g,(function(v){if(v)x(v);else try{Si.start(),x()}catch(w){x(w)}})),f;if(!Go.framegrabber)throw new Error("start() was called before init() completed. Call init() first, or call start(config) to combine init and start.");return Si.start()},stop:function(){return Si.stop()},pause:function(){Go.stopped=!0},onDetected:function(g){g&&(typeof g=="function"||k()(g)==="object"&&g.callback)?xi.subscribe("detected",g):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(g){xi.unsubscribe("detected",g)},onProcessed:function(g){g&&(typeof g=="function"||k()(g)==="object"&&g.callback)?xi.subscribe("processed",g):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(g){xi.unsubscribe("processed",g)},setReaders:function(g){g?Si.setReaders(g):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(g,x){g?x?Si.registerReader(g,x):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(g){g&&typeof g.addResult=="function"&&(Go.resultCollector=g)},get canvas(){return Go.canvasContainer},drawScannerArea:function(){return Si.drawScannerArea()},decodeSingle:function(g,x){var f=this,v=new to;return(g=E()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:g.src},numOfWorkers:1,locator:{halfSample:!1}},g)).numOfWorkers>0&&(g.numOfWorkers=0),g.numOfWorkers>0&&(typeof Blob>"u"||typeof Worker>"u")&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),g.numOfWorkers=0),new Promise((function(w,_){try{f.init(g,(function(){Go.canvasContainer=v.context.canvasContainer,xi.once("processed",(function(N){v.stop(),x&&x.call(null,N),w(N)}),!0),v.start()}),null,v)}catch(N){_(N)}}))},get default(){return jh},Readers:m,CameraAccess:Uo,ImageDebug:Na,ImageWrapper:Kn,ResultCollector:Ca};i.default=jh}]).default}))})(Lg)),Lg.exports}var h6=d6();const cl=sN(h6),Bg=60,Vg=new Map;function ul(){return new Date().toISOString().split("T")[0]}const f6=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],m6={breakfast:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),n.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),n.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),n.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),n.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function p6(){const r=new Date().getHours();return r<11?"breakfast":r<14?"lunch":r<17?"snacks":"dinner"}function g6(){const{currentUser:r,isClient:e,clientData:t,loading:i}=Bs(),{isDark:o,toggleTheme:c,accent:u}=ja(),h=hs(),[m,b]=C.useState("loading"),[k,S]=C.useState(null),[E,F]=C.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[L,V]=C.useState(null),[P,ee]=C.useState(ul()),[$,le]=C.useState({entries:[],water:0}),[X,Te]=C.useState({protein:0,carbs:0,fats:0,calories:0}),[Re,B]=C.useState(!1),[O,z]=C.useState(!1),[Y,G]=C.useState(()=>{const J=new Date;return{year:J.getFullYear(),month:J.getMonth()}}),[se,H]=C.useState(p6),[Le,Oe]=C.useState(null),[ne,be]=C.useState(null),[me,Ae]=C.useState(!1),[He,Q]=C.useState(null),[we,Ne]=C.useState(""),[je,ce]=C.useState(!1),[Ee,ue]=C.useState(""),[xe,Fe]=C.useState([]),[ot,Ue]=C.useState(!1),[_e,Ke]=C.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[ve,bt]=C.useState(null),[ht,Ye]=C.useState("100"),[Ot,jt]=C.useState(0),[te,it]=C.useState("weight"),[kt,Rt]=C.useState(0),[mt,Ht]=C.useState(null);C.useRef(null);const Zt=C.useRef(!1),Qt=C.useRef(null),ze=C.useRef(null),Ze=C.useRef(null),gt=C.useCallback((J,U="info")=>{Ht({message:J,type:U}),setTimeout(()=>Ht(null),3e3)},[]);C.useEffect(()=>{!i&&(!r||!e)&&h("/")},[r,e,i,h]),C.useEffect(()=>{if(!t?.id)return;(async()=>{try{const U=await vs(Mt(Je,"nutritionTargets",t.id));U.exists()?(S(U.data()),b("dashboard")):b("setup")}catch(U){console.error("Error loading nutrition data:",U),b("setup")}})()},[t?.id]),C.useEffect(()=>{if(!t?.id)return;(async()=>{try{const U=await vs(Mt(Je,"nutritionLogs",`${t.id}_${P}`));if(U.exists()){const re=U.data();le({entries:re.entries||[],water:re.water||0})}else le({entries:[],water:0})}catch(U){console.error("Error loading log:",U),le({entries:[],water:0})}})()},[t?.id,P]),C.useEffect(()=>{const J=$.entries.reduce((U,re)=>({protein:U.protein+(re.protein||0),carbs:U.carbs+(re.carbs||0),fats:U.fats+(re.fats||0),calories:U.calories+(re.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Te(J)},[$.entries]);const Lt=async J=>{try{await Cs(Mt(Je,"nutritionLogs",`${t.id}_${P}`),{clientId:t.id,date:P,entries:J.entries,water:J.water,updatedAt:Et.now()})}catch(U){console.error("Error saving nutrition log:",U)}},Bt=P===ul(),Ct=(J,U)=>new Date(J,U+1,0).getDate(),Dt=(J,U)=>new Date(J,U,1).getDay(),St=["January","February","March","April","May","June","July","August","September","October","November","December"],wt=["Su","Mo","Tu","We","Th","Fr","Sa"],Kt=()=>{let J=parseFloat(E.weight);E.weightUnit==="lbs"&&(J*=.453592);let U;E.heightUnit==="cm"?U=parseFloat(E.height):U=(parseFloat(E.heightFeet)||0)*30.48+(parseFloat(E.heightInches)||0)*2.54;const re=parseInt(E.age);let ae=E.gender==="male"?10*J+6.25*U-5*re+5:10*J+6.25*U-5*re-161;const tt=ae*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[E.dailyActivity],$e={low:100,moderate:200,high:300,daily:400},zt=Math.round(tt+$e[E.trainingFrequency]);let Nt=zt,Ft,he;switch(E.goal){case"lose":Nt=zt*(1-{light:.15,moderate:.2,harsh:.25}[E.deficitLevel]),Ft=2.2,he=.3;break;case"build":Nt=zt*1.1,Ft=2,he=.22;break;default:Ft=1.8,he=.25}Nt=Math.max(Nt,E.gender==="male"?1400:1100);const De=Math.round(J*Ft),Be=Math.round(Nt*he/9),vt=Math.max(0,Math.round((Nt-De*4-Be*9)/4));V({calories:Math.round(Nt),protein:De,carbs:vt,fats:Be,bmr:Math.round(ae),neat:Math.round(tt),exerciseAdd:$e[E.trainingFrequency],tdee:Math.round(zt)})},bn=async()=>{if(L)try{const J={clientId:t.id,calories:L.calories,protein:L.protein,carbs:L.carbs,fats:L.fats,waterGoal:8,goal:E.goal,updatedAt:Et.now()};await Cs(Mt(Je,"nutritionTargets",t.id),J),S(J),b("dashboard"),gt("Macro targets saved!","success")}catch(J){console.error("Error saving targets:",J),gt("Failed to save targets. Please try again.","error")}},un=()=>{const J=E.weight&&parseFloat(E.weight)>0,U=E.age&&parseInt(E.age)>0,re=E.heightUnit==="cm"?E.height&&parseFloat(E.height)>0:E.heightFeet&&parseFloat(E.heightFeet)>0||E.heightInches&&parseFloat(E.heightInches)>0;return J&&U&&re},Pn="nut_favourite_foods",fs=()=>{try{return JSON.parse(localStorage.getItem(Pn)||"[]")}catch{return[]}},rn=J=>fs().some(U=>U.name.toLowerCase()===(J||"").toLowerCase()),Bn=J=>{const U=fs(),re=U.findIndex(ae=>ae.name.toLowerCase()===J.name.toLowerCase());re>=0?U.splice(re,1):U.unshift({name:J.name,protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories,serving:J.serving,per100g:J.per100g||null,servingUnit:J.servingUnit||"g",portion:J.portion||null}),localStorage.setItem(Pn,JSON.stringify(U)),Rt(ae=>ae+1)},ss=J=>{const U=[...$.entries,{...J,meal:se,id:Date.now(),addedAt:new Date().toISOString()}],re={...$,entries:U};le(re),Lt(re),be(null),bt(null),Ye("100"),jt(0),it("weight"),Ke({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),gt("Food added!","success")},Gn=J=>{const U=$.entries.filter(ae=>ae.id!==J),re={...$,entries:U};le(re),Lt(re)},xr=()=>{Ae(!0);const J=document.querySelector("#barcode-reader");if(!J){Ae(!1),gt("Scanner container not found.","error");return}cl.init({inputStream:{type:"LiveStream",target:J,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},U=>{if(U){console.error("Quagga init error:",U),Ae(!1),gt("Could not access camera. Check permissions.","error");return}cl.start(),Zt.current=!0}),cl.onDetected(U=>{const re=U.codeResult.decodedCodes?.filter(ke=>ke.error!==void 0)?.map(ke=>ke.error)||[];if((re.length>0?re.reduce((ke,tt)=>ke+tt,0)/re.length:1)<.15){const ke=U.codeResult.code;cl.offDetected(),Q(ke)}})},as=()=>{Zt.current&&(cl.stop(),cl.offDetected(),Zt.current=!1),Ae(!1)},ls=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,bs=J=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((J||"").replace(/\s/g,"")),ur=J=>{if(!J)return{value:100,unit:"g"};const U=J.toLowerCase().replace(/\s/g,""),re=U.match(/([\d.]+)/),ae=re?parseFloat(re[1]):100;return bs(J)?/cl/.test(U)?{value:ae*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(U)&&!/ml/.test(U)?{value:ae*1e3,unit:"ml"}:{value:ae,unit:"ml"}:{value:ae,unit:"g"}},Vs=J=>{if(bs(J.serving_size)||bs(J.quantity))return"ml";const U=J.product_name||J.product_name_en||"";return ls.test(U)?"ml":"g"},ms=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],sr=(J,U)=>{const re=J||"",ae=re.match(/\((\d+\.?\d*)\s*g\)/i),ke=re.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(ae&&ke){const zt=parseFloat(ae[1]);let Nt=ke[1].replace(/^\d+\s*/,"").trim();if(Nt&&zt>0)return{label:Nt,weight:zt}}const tt=re.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(tt){const zt=parseFloat(tt[1]);let Nt=tt[2].replace(/^\d+\s*/,"").trim();if(Nt&&zt>0)return{label:Nt,weight:zt}}const $e=U||"";for(const{pattern:zt,label:Nt,weight:Ft}of ms)if(zt.test($e))return{label:Nt,weight:Ft};return null},pe=J=>{const U=J.nutriments||{},re=Vs(J),ae=ur(J.serving_size),ke=re==="ml"?ae.unit==="ml"?ae.value:100:ae.value,tt=J.product_name||J.product_name_en||"Unknown Product",$e=sr(J.serving_size,tt);return{name:tt,brand:J.brands||"",image:J.image_small_url||J.image_url||null,servingSize:J.serving_size||"100g",servingValue:ke,servingUnit:re,portion:$e,protein:Math.round(U.proteins_100g||U.proteins||0),carbs:Math.round(U.carbohydrates_100g||U.carbohydrates||0),fats:Math.round(U.fat_100g||U.fat||0),calories:Math.round(U["energy-kcal_100g"]||U["energy-kcal"]||(U.energy_100g?U.energy_100g/4.184:0)),per100g:!0}},Xe=async J=>{ce(!0);try{const U=`https://world.openfoodfacts.org/api/v2/product/${J}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,re=await fetch(U);if(!re.ok)throw new Error(`HTTP ${re.status}`);const ae=await re.json();if(ae.status==="success"||ae.status===1||ae.product){const ke=pe(ae.product);ke.calories===0&&ke.protein===0&&ke.carbs===0?gt("Product found but no nutrition data available.","error"):(bt(ke),ke.portion?(jt(1),Ye(String(ke.portion.weight)),it("portion")):(jt(0),Ye(String(ke.servingValue||100)),it("weight")),Ne(""))}else gt("Product not found. Try search or manual entry.","error")}catch(U){console.error("Barcode lookup error:",U),gt("Failed to look up product. Check your connection.","error")}ce(!1)},st=(J,U,re)=>{const ae=J.toLowerCase().trim(),ke=U.toLowerCase().trim(),tt=re.toLowerCase().trim();let $e=0;return(ae===tt||ae===tt+"s"||ae+"s"===tt)&&($e+=100),(ae.endsWith(" "+tt)||ae.endsWith(" "+tt+"s"))&&($e+=40),(ae.startsWith(tt+" ")||ae.startsWith(tt+"s "))&&($e+=15),tt.split(/\s+/).some(Nt=>ke===Nt||ke.startsWith(Nt))&&($e+=30),$e+=Math.max(0,30-ae.length),$e},nt=async()=>{if(!Ee.trim())return;Qt.current&&Qt.current.abort();const J=new AbortController;Qt.current=J;const U=Ee.trim().toLowerCase(),re=U.split(/\s+/).filter(Boolean);if(Vg.has(U)){Fe(Vg.get(U));return}Ue(!0);try{const ke=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Ee.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,tt=await fetch(ke,{signal:J.signal});if(!tt.ok)throw new Error(`HTTP ${tt.status}`);const zt=((await tt.json()).products||[]).map(Nt=>pe(Nt)).filter(Nt=>Nt.name!=="Unknown Product"&&(Nt.calories>0||Nt.protein>0)).filter(Nt=>{const Ft=(Nt.name+" "+Nt.brand).toLowerCase();return re.every(he=>Ft.includes(he))}).sort((Nt,Ft)=>st(Ft.name,Ft.brand,U)-st(Nt.name,Nt.brand,U)).slice(0,10);Vg.set(U,zt),Fe(zt),zt.length===0&&gt("No results found. Try a different search.","info")}catch(ae){if(ae.name==="AbortError")return;console.error("Search error:",ae),gt("Search failed. Check your connection.","error")}Ue(!1)};C.useEffect(()=>{if(ze.current&&clearTimeout(ze.current),!(!Ee.trim()||ne!=="search"||ve))return ze.current=setTimeout(()=>{nt()},700),()=>clearTimeout(ze.current)},[Ee]);const Qe=()=>{const J={...$,water:$.water+1};le(J),Lt(J)},ie=()=>{if($.water<=0)return;const J={...$,water:$.water-1};le(J),Lt(J)},lt=(J,U)=>!U||U<=0?0:Math.min(Bg,Math.round(J/U*Bg)),ft=(J,U,re,ae,ke)=>{const tt=lt(re,ae),$e=ae>0?Math.min(100,Math.round(re/ae*100)):0;return n.jsxs("div",{className:`nut-ring-wrap ${ke}`,children:[n.jsx("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[...Array(Bg)].map((zt,Nt)=>{const Ft=(Nt*6-90)*(Math.PI/180),he=100+78*Math.cos(Ft),De=100+78*Math.sin(Ft),Be=100+96*Math.cos(Ft),vt=100+96*Math.sin(Ft);return n.jsx("line",{x1:he,y1:De,x2:Be,y2:vt,className:Nt<tt?"nut-tick-filled":"nut-tick-empty",strokeWidth:Nt%5===0?"4.5":"3",strokeLinecap:"round",style:Nt<tt?{animationDelay:`${Nt*50}ms`}:void 0},Nt)})}),n.jsxs("div",{className:"nut-ring-center",children:[n.jsx("span",{className:"nut-ring-value",children:Math.round(re)}),n.jsxs("span",{className:"nut-ring-target",children:["/ ",ae,J==="Calories"?"":"g"]}),n.jsx("span",{className:"nut-ring-label",children:U})]}),n.jsxs("span",{className:"nut-ring-pct",children:[$e,"%"]})]})};if(C.useEffect(()=>{if(!He)return;const J=setTimeout(()=>{const U=He;as(),Q(null),Xe(U)},1500);return()=>clearTimeout(J)},[He]),C.useEffect(()=>()=>{if(Zt.current){try{cl.stop(),cl.offDetected()}catch{}Zt.current=!1}},[]),i||m==="loading")return n.jsx("div",{className:"cb-loading",children:n.jsx("div",{className:"cb-loading-spinner"})});if(m==="setup")return n.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:c,"aria-label":"Toggle theme",children:o?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),n.jsxs("main",{className:"nut-main",children:[n.jsxs("div",{className:"nut-setup-intro",children:[n.jsx("h2",{children:"Set Your Daily Targets"}),n.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),n.jsxs("div",{className:"nut-calc-form",children:[n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Gender"}),n.jsxs("div",{className:"nut-toggle-group",children:[n.jsx("button",{className:E.gender==="male"?"active":"",onClick:()=>{F(J=>({...J,gender:"male"})),V(null)},children:"Male"}),n.jsx("button",{className:E.gender==="female"?"active":"",onClick:()=>{F(J=>({...J,gender:"female"})),V(null)},children:"Female"})]})]}),n.jsxs("div",{className:"nut-form-row",children:[n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Age"}),n.jsx("input",{type:"number",value:E.age,onChange:J=>{F(U=>({...U,age:J.target.value})),V(null)},placeholder:"Years",min:"15",max:"100"})]}),n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Weight"}),n.jsxs("div",{className:"nut-input-unit",children:[n.jsx("input",{type:"number",value:E.weight,onChange:J=>{F(U=>({...U,weight:J.target.value})),V(null)},placeholder:E.weightUnit,min:"30",max:"300"}),n.jsxs("div",{className:"nut-unit-toggle",children:[n.jsx("button",{className:E.weightUnit==="kg"?"active":"",onClick:()=>{F(J=>({...J,weightUnit:"kg"})),V(null)},children:"kg"}),n.jsx("button",{className:E.weightUnit==="lbs"?"active":"",onClick:()=>{F(J=>({...J,weightUnit:"lbs"})),V(null)},children:"lbs"})]})]})]})]}),n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Height"}),n.jsxs("div",{className:"nut-input-unit",children:[E.heightUnit==="cm"?n.jsx("input",{type:"number",value:E.height,onChange:J=>{F(U=>({...U,height:J.target.value})),V(null)},placeholder:"cm",min:"100",max:"250"}):n.jsxs("div",{className:"nut-height-imperial",children:[n.jsx("input",{type:"number",value:E.heightFeet,onChange:J=>{F(U=>({...U,heightFeet:J.target.value})),V(null)},placeholder:"ft",min:"4",max:"7"}),n.jsx("input",{type:"number",value:E.heightInches,onChange:J=>{F(U=>({...U,heightInches:J.target.value})),V(null)},placeholder:"in",min:"0",max:"11"})]}),n.jsxs("div",{className:"nut-unit-toggle",children:[n.jsx("button",{className:E.heightUnit==="cm"?"active":"",onClick:()=>{F(J=>({...J,heightUnit:"cm"})),V(null)},children:"cm"}),n.jsx("button",{className:E.heightUnit==="ft"?"active":"",onClick:()=>{F(J=>({...J,heightUnit:"ft"})),V(null)},children:"ft/in"})]})]})]}),n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Daily Activity (outside of training)"}),n.jsxs("select",{value:E.dailyActivity,onChange:J=>{F(U=>({...U,dailyActivity:J.target.value})),V(null)},children:[n.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),n.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),n.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),n.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Training Sessions per Week"}),n.jsxs("select",{value:E.trainingFrequency,onChange:J=>{F(U=>({...U,trainingFrequency:J.target.value})),V(null)},children:[n.jsx("option",{value:"low",children:"1-2 sessions"}),n.jsx("option",{value:"moderate",children:"3-4 sessions"}),n.jsx("option",{value:"high",children:"5-6 sessions"}),n.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Fitness Goal"}),n.jsxs("div",{className:"nut-goal-options",children:[n.jsxs("button",{className:E.goal==="lose"?"active":"",onClick:()=>{F(J=>({...J,goal:"lose"})),V(null)},children:[n.jsx("span",{className:"nut-goal-icon",children:"-"}),n.jsx("span",{children:"Lose Weight"})]}),n.jsxs("button",{className:E.goal==="maintain"?"active":"",onClick:()=>{F(J=>({...J,goal:"maintain"})),V(null)},children:[n.jsx("span",{className:"nut-goal-icon",children:"="}),n.jsx("span",{children:"Maintain"})]}),n.jsxs("button",{className:E.goal==="build"?"active":"",onClick:()=>{F(J=>({...J,goal:"build"})),V(null)},children:[n.jsx("span",{className:"nut-goal-icon",children:"+"}),n.jsx("span",{children:"Build Muscle"})]})]})]}),E.goal==="lose"&&n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Deficit Level"}),n.jsxs("div",{className:"nut-deficit-options",children:[n.jsxs("button",{className:E.deficitLevel==="light"?"active":"",onClick:()=>{F(J=>({...J,deficitLevel:"light"})),V(null)},children:[n.jsx("strong",{children:"Mild"}),n.jsx("span",{children:"15% below TDEE"})]}),n.jsxs("button",{className:E.deficitLevel==="moderate"?"active":"",onClick:()=>{F(J=>({...J,deficitLevel:"moderate"})),V(null)},children:[n.jsx("strong",{children:"Moderate"}),n.jsx("span",{children:"20% below TDEE"})]}),n.jsxs("button",{className:E.deficitLevel==="harsh"?"active":"",onClick:()=>{F(J=>({...J,deficitLevel:"harsh"})),V(null)},children:[n.jsx("strong",{children:"Aggressive"}),n.jsx("span",{children:"25% below TDEE"})]})]})]}),n.jsx("button",{className:"nut-calc-btn",onClick:Kt,disabled:!un(),children:"Calculate Macros"})]}),L&&n.jsxs("div",{className:"nut-calc-results",children:[n.jsx("h3",{children:"Your Daily Targets"}),n.jsxs("div",{className:"nut-calc-rings",children:[ft("Protein","Protein",L.protein,L.protein,"ring-protein"),ft("Carbs","Carbs",L.carbs,L.carbs,"ring-carbs"),ft("Fats","Fats",L.fats,L.fats,"ring-fats"),ft("Calories","Calories",L.calories,L.calories,"ring-cals")]}),n.jsxs("div",{className:"nut-calc-info",children:[n.jsxs("div",{className:"nut-calc-info-row",children:[n.jsx("span",{children:"BMR (body at rest)"}),n.jsxs("span",{children:[L.bmr," cal"]})]}),n.jsxs("div",{className:"nut-calc-info-row",children:[n.jsx("span",{children:"+ Daily activity (NEAT)"}),n.jsxs("span",{children:[L.neat," cal"]})]}),n.jsxs("div",{className:"nut-calc-info-row",children:[n.jsx("span",{children:"+ Training sessions"}),n.jsxs("span",{children:["+",L.exerciseAdd," cal"]})]}),n.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[n.jsx("span",{children:"TDEE (total burn)"}),n.jsxs("span",{children:[L.tdee," cal"]})]})]}),n.jsx("button",{className:"nut-save-targets-btn",onClick:bn,children:"Set as My Daily Targets"})]})]}),mt&&n.jsx("div",{className:`toast-notification ${mt.type}`,children:mt.message})]});const _t=J=>{const U=new Date(J+"T12:00:00"),re=U.getDay(),ae=new Date(U);ae.setDate(U.getDate()-(re+6)%7);const ke=[];for(let tt=0;tt<7;tt++){const $e=new Date(ae);$e.setDate(ae.getDate()+tt),ke.push($e.toISOString().split("T")[0])}return ke},It=["M","T","W","T","F","S","S"],ln=(J,U="search")=>{H(J),U==="scan"?(be("scan"),bt(null)):U==="manual"?(be("manual"),Ke({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):U==="favourites"?be("favourites"):(be("search"),Fe([]),ue(""))},Nn=_t(P),Fn=new Date(P+"T12:00:00"),Ys=`${St[Fn.getMonth()]} ${Fn.getFullYear()}`;return n.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsxs("div",{className:"nut-dark-zone",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsxs("div",{className:"header-actions",children:[n.jsx("button",{onClick:()=>{b("setup"),V(null)},"aria-label":"Recalculate macros",children:n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"3"}),n.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),n.jsx("button",{onClick:c,"aria-label":"Toggle theme",children:o?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),n.jsxs("div",{className:"nut-dark-content",children:[n.jsxs("div",{className:"nut-week-strip",children:[n.jsxs("div",{className:"nut-week-header",children:[n.jsx("button",{className:"nut-week-arrow",onClick:()=>{const J=new Date(P+"T12:00:00");J.setDate(J.getDate()-7);const U=J.toISOString().split("T")[0];ee(U)},"aria-label":"Previous week",children:n.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:n.jsx("polyline",{points:"15 18 9 12 15 6"})})}),n.jsx("button",{className:"nut-week-month-label",onClick:()=>{B(!Re),G({year:Fn.getFullYear(),month:Fn.getMonth()})},children:Ys}),n.jsx("button",{className:"nut-week-arrow",onClick:()=>{const J=new Date(P+"T12:00:00");J.setDate(J.getDate()+7);const U=J.toISOString().split("T")[0];U<=ul()&&ee(U)},"aria-label":"Next week",disabled:Nn[6]>=ul(),children:n.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:n.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),n.jsx("div",{className:"nut-week-days",children:Nn.map((J,U)=>{const re=new Date(J+"T12:00:00").getDate(),ae=J===P,ke=J>ul(),tt=J===ul();return n.jsxs("button",{className:`nut-week-day${ae?" selected":""}${tt?" today":""}${ke?" future":""}`,disabled:ke,onClick:()=>ee(J),children:[n.jsx("span",{className:"nut-week-day-letter",children:It[U]}),n.jsx("span",{className:"nut-week-day-num",children:re})]},J)})})]}),Re&&n.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[n.jsxs("div",{className:"nut-cal-header",children:[n.jsx("button",{onClick:()=>G(J=>{let U=J.month-1,re=J.year;return U<0&&(U=11,re--),{year:re,month:U}}),children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("polyline",{points:"15 18 9 12 15 6"})})}),n.jsxs("span",{children:[St[Y.month]," ",Y.year]}),n.jsx("button",{onClick:()=>G(J=>{let U=J.month+1,re=J.year;return U>11&&(U=0,re++),{year:re,month:U}}),disabled:Y.year===new Date().getFullYear()&&Y.month>=new Date().getMonth(),children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),n.jsx("div",{className:"nut-cal-days-header",children:wt.map(J=>n.jsx("span",{children:J},J))}),n.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Dt(Y.year,Y.month))].map((J,U)=>n.jsx("span",{},`e${U}`)),[...Array(Ct(Y.year,Y.month))].map((J,U)=>{const re=U+1,ae=`${Y.year}-${String(Y.month+1).padStart(2,"0")}-${String(re).padStart(2,"0")}`,ke=ae>ul(),tt=ae===P,$e=ae===ul();return n.jsx("button",{className:`nut-cal-day${tt?" selected":""}${$e?" today":""}${ke?" future":""}`,disabled:ke,onClick:()=>{ee(ae),B(!1)},children:re},re)})]})]}),n.jsxs("div",{className:"nut-rings-row",children:[ft("Protein","Protein",X.protein,k.protein,"ring-protein"),ft("Carbs","Carbs",X.carbs,k.carbs,"ring-carbs"),ft("Fats","Fats",X.fats,k.fats,"ring-fats"),ft("Calories","kCal",X.calories,k.calories,"ring-cals")]})]})]}),n.jsx("div",{className:"nut-light-zone",children:n.jsxs("div",{className:"nut-light-content",children:[Bt&&n.jsxs("button",{className:"nut-water-quick",onClick:()=>z(!0),children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:n.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),n.jsxs("span",{className:"nut-water-quick-count",children:[$.water," / ",k?.waterGoal||8]}),n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[n.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),n.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),n.jsx("div",{className:"nut-log-section",children:n.jsx("div",{className:"nut-meals-list",children:f6.map(J=>{const U=$.entries.filter(ae=>(ae.meal||"snacks")===J.key),re=U.reduce((ae,ke)=>({protein:ae.protein+(ke.protein||0),carbs:ae.carbs+(ke.carbs||0),fats:ae.fats+(ke.fats||0),calories:ae.calories+(ke.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return n.jsxs("div",{className:"nut-meal-card",children:[n.jsxs("div",{className:"nut-meal-card-header",children:[n.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${J.key}`,children:m6[J.key]}),n.jsx("span",{className:"nut-meal-card-title",children:J.label}),U.length>0&&n.jsxs("span",{className:"nut-meal-card-cal",children:[re.calories," cal"]}),Bt&&n.jsxs("div",{className:"nut-add-wrapper",children:[n.jsx("button",{className:"nut-meal-add-btn",onClick:()=>Oe(Le===J.key?null:J.key),"aria-label":`Add to ${J.label}`,children:n.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[n.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),n.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),Le===J.key&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>Oe(null)}),n.jsxs("div",{className:"nut-add-picker",children:[n.jsxs("button",{onClick:()=>{Oe(null),ln(J.key,"scan")},children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),n.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),n.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),n.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),n.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),n.jsx("span",{children:"Scan"})]}),n.jsxs("button",{onClick:()=>{Oe(null),ln(J.key,"search")},children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"11",cy:"11",r:"8"}),n.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),n.jsx("span",{children:"Search"})]}),n.jsxs("button",{onClick:()=>{Oe(null),ln(J.key,"manual")},children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),n.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),n.jsx("span",{children:"Manual"})]}),n.jsxs("button",{onClick:()=>{Oe(null),ln(J.key,"favourites")},children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),n.jsx("span",{children:"Favs"})]})]})]})]})]}),U.length>0&&n.jsxs("div",{className:"nut-meal-bars",children:[n.jsxs("div",{className:"nut-meal-bar-row",children:[n.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),n.jsx("div",{className:"nut-meal-bar-track",children:n.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,k.protein>0?re.protein/k.protein*100:0)}%`}})}),n.jsxs("span",{className:"nut-meal-bar-val",children:[re.protein,"g"]})]}),n.jsxs("div",{className:"nut-meal-bar-row",children:[n.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),n.jsx("div",{className:"nut-meal-bar-track",children:n.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,k.carbs>0?re.carbs/k.carbs*100:0)}%`}})}),n.jsxs("span",{className:"nut-meal-bar-val",children:[re.carbs,"g"]})]}),n.jsxs("div",{className:"nut-meal-bar-row",children:[n.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),n.jsx("div",{className:"nut-meal-bar-track",children:n.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,k.fats>0?re.fats/k.fats*100:0)}%`}})}),n.jsxs("span",{className:"nut-meal-bar-val",children:[re.fats,"g"]})]}),n.jsxs("div",{className:"nut-meal-bar-row",children:[n.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),n.jsx("div",{className:"nut-meal-bar-track",children:n.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,k.calories>0?re.calories/k.calories*100:0)}%`}})}),n.jsx("span",{className:"nut-meal-bar-val",children:re.calories})]})]}),U.length>0&&n.jsx("div",{className:"nut-log-list",children:U.map(ae=>n.jsxs("div",{className:"nut-log-item",children:[n.jsxs("div",{className:"nut-log-item-info",children:[n.jsx("span",{className:"nut-log-item-name",children:ae.name}),ae.serving&&n.jsx("span",{className:"nut-log-item-serving",children:ae.serving})]}),n.jsxs("div",{className:"nut-log-item-macros",children:[n.jsxs("span",{className:"nut-macro-p",children:[ae.protein,"p"]}),n.jsxs("span",{className:"nut-macro-c",children:[ae.carbs,"c"]}),n.jsxs("span",{className:"nut-macro-f",children:[ae.fats,"f"]}),n.jsx("span",{className:"nut-macro-cal",children:ae.calories})]}),Bt&&n.jsx("button",{className:"nut-log-delete",onClick:()=>Gn(ae.id),"aria-label":"Remove",children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ae.id))}),U.length===0&&n.jsx("div",{className:"nut-meal-empty",children:n.jsx("p",{children:Bt?"Tap + to add food":"No entries"})})]},J.key)})})})]})}),O&&n.jsx("div",{className:"nut-modal-overlay",onClick:()=>z(!1),children:n.jsxs("div",{className:"nut-water-popup",onClick:J=>J.stopPropagation(),children:[n.jsxs("div",{className:"nut-water-popup-header",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:n.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),n.jsx("span",{children:"Water Intake"}),n.jsx("button",{className:"nut-modal-close",onClick:()=>z(!1),children:n.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),n.jsxs("div",{className:"nut-water-popup-body",children:[n.jsx("div",{className:"nut-water-glasses",children:[...Array(k?.waterGoal||8)].map((J,U)=>n.jsx("div",{className:`nut-water-glass ${U<$.water?"filled":""}`,children:n.jsx("svg",{viewBox:"0 0 24 24",fill:U<$.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},U))}),n.jsxs("div",{className:"nut-water-popup-count",children:[$.water," / ",k?.waterGoal||8," glasses"]}),n.jsxs("div",{className:"nut-water-btns",children:[n.jsx("button",{onClick:ie,disabled:$.water<=0,children:"-"}),n.jsx("button",{onClick:Qe,children:"+"})]})]})]})}),ne&&n.jsx("div",{className:"nut-modal-overlay",onClick:()=>{as(),Q(null),be(null),bt(null)},children:n.jsxs("div",{className:"nut-modal",onClick:J=>J.stopPropagation(),children:[n.jsxs("div",{className:"nut-modal-header",children:[n.jsx("h3",{children:ne==="scan"?"Scan Barcode":ne==="search"?"Search Food":ne==="favourites"?"Favourites":"Manual Entry"}),n.jsx("button",{className:"nut-modal-close",onClick:()=>{as(),Q(null),be(null),bt(null)},children:n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),ne==="scan"&&!ve&&n.jsxs("div",{className:"nut-scan-area",children:[n.jsxs("div",{className:"nut-scanner-wrapper",children:[n.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),me&&!He&&n.jsx("div",{className:"nut-scan-line"}),He&&n.jsxs("div",{className:"nut-scan-detected-overlay",children:[n.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M20 6L9 17l-5-5"})}),n.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),n.jsx("p",{className:"nut-scan-detected-code",children:He})]})]}),!me&&n.jsxs("button",{className:"nut-scan-start-btn",onClick:xr,children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),n.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),n.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),n.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),n.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),me&&!He&&n.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),n.jsx("div",{className:"nut-barcode-divider",children:n.jsx("span",{children:"or enter barcode manually"})}),n.jsxs("div",{className:"nut-barcode-manual",children:[n.jsx("input",{type:"text",inputMode:"numeric",value:we,onChange:J=>Ne(J.target.value),onKeyDown:J=>J.key==="Enter"&&we.trim()&&Xe(we.trim()),placeholder:"Enter barcode number"}),n.jsx("button",{onClick:()=>we.trim()&&Xe(we.trim()),disabled:!we.trim()||je,children:je?"...":"Look Up"})]})]}),ne==="scan"&&ve&&(()=>{const J=ve.servingUnit||"g",U=ve.portion,re=te==="portion"&&U?Ot*U.weight:parseFloat(ht)||0,ae=re/100,ke=J==="ml"?[100,200,250,500]:[50,100,150,200],tt=te==="portion"&&U?`${Ot} ${U.label}${Ot!==1?"s":""} (${Math.round(re)}${J})`:`${Math.round(re)}${J}`;return n.jsxs("div",{className:"nut-product-result",children:[ve.image&&n.jsx("img",{src:ve.image,alt:"",className:"nut-product-img"}),n.jsxs("div",{className:"nut-product-name-row",children:[n.jsx("h4",{children:ve.name}),n.jsx("button",{className:`nut-fav-star confirm${rn(ve.name)?" active":""}`,onClick:()=>Bn({name:ve.name,protein:ve.protein,carbs:ve.carbs,fats:ve.fats,calories:ve.calories,serving:ve.servingSize,per100g:{protein:ve.protein,carbs:ve.carbs,fats:ve.fats,calories:ve.calories},servingUnit:ve.servingUnit||"g",portion:ve.portion||null}),children:n.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:rn(ve.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ve.brand&&n.jsx("p",{className:"nut-product-brand",children:ve.brand}),n.jsxs("p",{className:"nut-product-per",children:["Per 100",J,":"]}),n.jsxs("div",{className:"nut-product-macros",children:[n.jsxs("span",{className:"nut-macro-p",children:[ve.protein,"g P"]}),n.jsxs("span",{className:"nut-macro-c",children:[ve.carbs,"g C"]}),n.jsxs("span",{className:"nut-macro-f",children:[ve.fats,"g F"]}),n.jsxs("span",{className:"nut-macro-cal",children:[ve.calories," cal"]})]}),U&&n.jsxs("div",{className:"nut-mode-toggle",children:[n.jsx("button",{className:te==="portion"?"active":"",onClick:()=>{it("portion"),Ot<1&&jt(1)},children:"Portions"}),n.jsxs("button",{className:te==="weight"?"active":"",onClick:()=>{it("weight"),Ye(String(Math.round(re)||100))},children:["Custom (",J,")"]})]}),te==="portion"&&U?n.jsxs("div",{className:"nut-portion-stepper",children:[n.jsx("button",{className:"nut-stepper-btn",onClick:()=>jt(Math.max(1,Ot-1)),children:"-"}),n.jsxs("div",{className:"nut-stepper-display",children:[n.jsx("span",{className:"nut-stepper-count",children:Ot}),n.jsxs("span",{className:"nut-stepper-label",children:[U.label,Ot!==1?"s":""]}),n.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),J]})]}),n.jsx("button",{className:"nut-stepper-btn",onClick:()=>jt(Ot+1),children:"+"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"nut-serving-adjust",children:[n.jsxs("label",{children:["Serving (",J,")"]}),n.jsx("input",{type:"number",inputMode:"numeric",value:ht,onChange:$e=>Ye($e.target.value),onFocus:$e=>$e.target.select(),min:"0"})]}),n.jsx("div",{className:"nut-quick-amounts",children:ke.map($e=>n.jsxs("button",{className:`nut-quick-btn${ht===String($e)?" active":""}`,onClick:()=>Ye(String($e)),children:[$e,J]},$e))})]}),n.jsx("div",{className:"nut-product-total",children:n.jsxs("span",{children:["Total: ",Math.round(ve.protein*ae),"p / ",Math.round(ve.carbs*ae),"c / ",Math.round(ve.fats*ae),"f / ",Math.round(ve.calories*ae)," cal"]})}),n.jsxs("div",{className:"nut-product-actions",children:[n.jsx("button",{className:"nut-btn-secondary",onClick:()=>{bt(null),be("scan")},children:"Scan Again"}),n.jsx("button",{className:"nut-btn-primary",onClick:()=>ss({name:ve.name,protein:Math.round(ve.protein*ae),carbs:Math.round(ve.carbs*ae),fats:Math.round(ve.fats*ae),calories:Math.round(ve.calories*ae),serving:tt}),children:"Add"})]})]})})(),ne==="search"&&!ve&&n.jsxs("div",{className:"nut-search-area",children:[n.jsxs("div",{className:"nut-search-bar",children:[n.jsx("input",{type:"text",ref:Ze,value:Ee,onChange:J=>ue(J.target.value),onKeyDown:J=>{J.key==="Enter"&&(clearTimeout(ze.current),nt())},onFocus:()=>setTimeout(()=>Ze.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),n.jsx("button",{onClick:nt,disabled:ot,children:ot?"...":"Search"})]}),n.jsxs("div",{className:"nut-search-results",children:[xe.map((J,U)=>n.jsxs("button",{className:"nut-search-item",onClick:()=>{bt(J),J.portion?(jt(1),Ye(String(J.portion.weight)),it("portion")):(jt(0),Ye(String(J.servingValue||100)),it("weight"))},children:[J.image&&n.jsx("img",{src:J.image,alt:"",loading:"lazy"}),n.jsxs("div",{className:"nut-search-item-info",children:[n.jsx("span",{className:"nut-search-item-name",children:J.name}),J.brand&&n.jsx("span",{className:"nut-search-item-brand",children:J.brand}),n.jsxs("span",{className:"nut-search-item-macros",children:[J.calories," cal  ",J.protein,"p  ",J.carbs,"c  ",J.fats,"f per 100",J.servingUnit||"g"]})]})]},U)),xe.length===0&&Ee&&!ot&&n.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),ne==="search"&&ve&&(()=>{const J=ve.servingUnit||"g",U=ve.portion,re=te==="portion"&&U?Ot*U.weight:parseFloat(ht)||0,ae=re/100,ke=J==="ml"?[100,200,250,500]:[50,100,150,200],tt=te==="portion"&&U?`${Ot} ${U.label}${Ot!==1?"s":""} (${Math.round(re)}${J})`:`${Math.round(re)}${J}`;return n.jsxs("div",{className:"nut-product-result",children:[ve.image&&n.jsx("img",{src:ve.image,alt:"",className:"nut-product-img"}),n.jsxs("div",{className:"nut-product-name-row",children:[n.jsx("h4",{children:ve.name}),n.jsx("button",{className:`nut-fav-star confirm${rn(ve.name)?" active":""}`,onClick:()=>Bn({name:ve.name,protein:ve.protein,carbs:ve.carbs,fats:ve.fats,calories:ve.calories,serving:ve.servingSize,per100g:{protein:ve.protein,carbs:ve.carbs,fats:ve.fats,calories:ve.calories},servingUnit:ve.servingUnit||"g",portion:ve.portion||null}),children:n.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:rn(ve.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ve.brand&&n.jsx("p",{className:"nut-product-brand",children:ve.brand}),n.jsxs("p",{className:"nut-product-per",children:["Per 100",J,":"]}),n.jsxs("div",{className:"nut-product-macros",children:[n.jsxs("span",{className:"nut-macro-p",children:[ve.protein,"g P"]}),n.jsxs("span",{className:"nut-macro-c",children:[ve.carbs,"g C"]}),n.jsxs("span",{className:"nut-macro-f",children:[ve.fats,"g F"]}),n.jsxs("span",{className:"nut-macro-cal",children:[ve.calories," cal"]})]}),U&&n.jsxs("div",{className:"nut-mode-toggle",children:[n.jsx("button",{className:te==="portion"?"active":"",onClick:()=>{it("portion"),Ot<1&&jt(1)},children:"Portions"}),n.jsxs("button",{className:te==="weight"?"active":"",onClick:()=>{it("weight"),Ye(String(Math.round(re)||100))},children:["Custom (",J,")"]})]}),te==="portion"&&U?n.jsxs("div",{className:"nut-portion-stepper",children:[n.jsx("button",{className:"nut-stepper-btn",onClick:()=>jt(Math.max(1,Ot-1)),children:"-"}),n.jsxs("div",{className:"nut-stepper-display",children:[n.jsx("span",{className:"nut-stepper-count",children:Ot}),n.jsxs("span",{className:"nut-stepper-label",children:[U.label,Ot!==1?"s":""]}),n.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),J]})]}),n.jsx("button",{className:"nut-stepper-btn",onClick:()=>jt(Ot+1),children:"+"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"nut-serving-adjust",children:[n.jsxs("label",{children:["Serving (",J,")"]}),n.jsx("input",{type:"number",inputMode:"numeric",value:ht,onChange:$e=>Ye($e.target.value),onFocus:$e=>$e.target.select(),min:"0"})]}),n.jsx("div",{className:"nut-quick-amounts",children:ke.map($e=>n.jsxs("button",{className:`nut-quick-btn${ht===String($e)?" active":""}`,onClick:()=>Ye(String($e)),children:[$e,J]},$e))})]}),n.jsx("div",{className:"nut-product-total",children:n.jsxs("span",{children:["Total: ",Math.round(ve.protein*ae),"p / ",Math.round(ve.carbs*ae),"c / ",Math.round(ve.fats*ae),"f / ",Math.round(ve.calories*ae)," cal"]})}),n.jsxs("div",{className:"nut-product-actions",children:[n.jsx("button",{className:"nut-btn-secondary",onClick:()=>bt(null),children:"Back to Search"}),n.jsx("button",{className:"nut-btn-primary",onClick:()=>ss({name:ve.name,protein:Math.round(ve.protein*ae),carbs:Math.round(ve.carbs*ae),fats:Math.round(ve.fats*ae),calories:Math.round(ve.calories*ae),serving:tt}),children:"Add"})]})]})})(),ne==="manual"&&n.jsxs("div",{className:"nut-manual-form",children:[n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Food Name"}),n.jsx("input",{type:"text",value:_e.name,onChange:J=>Ke(U=>({...U,name:J.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Serving Size (optional)"}),n.jsx("input",{type:"text",value:_e.serving,onChange:J=>Ke(U=>({...U,serving:J.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),n.jsxs("div",{className:"nut-manual-macros",children:[n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Protein (g)"}),n.jsx("input",{type:"number",value:_e.protein,onChange:J=>Ke(U=>({...U,protein:J.target.value})),min:"0"})]}),n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Carbs (g)"}),n.jsx("input",{type:"number",value:_e.carbs,onChange:J=>Ke(U=>({...U,carbs:J.target.value})),min:"0"})]}),n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Fats (g)"}),n.jsx("input",{type:"number",value:_e.fats,onChange:J=>Ke(U=>({...U,fats:J.target.value})),min:"0"})]}),n.jsxs("div",{className:"nut-form-group",children:[n.jsx("label",{children:"Calories"}),n.jsx("input",{type:"number",value:_e.calories,onChange:J=>Ke(U=>({...U,calories:J.target.value})),min:"0"})]})]}),n.jsx("button",{className:"nut-btn-primary",disabled:!_e.name.trim(),onClick:()=>ss({name:_e.name,protein:parseFloat(_e.protein)||0,carbs:parseFloat(_e.carbs)||0,fats:parseFloat(_e.fats)||0,calories:parseFloat(_e.calories)||0,serving:_e.serving||""}),children:"Add Food"})]}),ne==="favourites"&&!ve&&(()=>{const J=fs(),U=re=>{if(re.per100g){const ae=re.per100g;bt({name:re.name,brand:"",image:null,servingSize:re.serving||"100g",servingValue:100,servingUnit:re.servingUnit||"g",portion:re.portion||null,protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories,per100g:!0}),re.portion?(jt(1),Ye(String(re.portion.weight)),it("portion")):(jt(0),Ye("100"),it("weight"))}else ss({name:re.name,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,serving:re.serving||""})};return n.jsx("div",{className:"nut-recent-area",children:J.length===0?n.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):n.jsx("div",{className:"nut-recent-list",children:J.map((re,ae)=>n.jsxs("div",{className:"nut-recent-item-row",children:[n.jsx("button",{className:"nut-fav-star active",onClick:ke=>{ke.stopPropagation(),Bn(re)},children:n.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),n.jsxs("button",{className:"nut-recent-item",onClick:()=>U(re),children:[n.jsxs("div",{className:"nut-recent-item-info",children:[n.jsx("span",{className:"nut-recent-item-name",children:re.name}),n.jsx("span",{className:"nut-recent-item-serving",children:re.serving||""})]}),n.jsxs("span",{className:"nut-recent-item-macros",children:[re.calories," cal"]})]})]},ae))})})})(),ne==="favourites"&&ve&&(()=>{const J=ve.servingUnit||"g",U=ve.portion,re=te==="portion"&&U?Ot*U.weight:parseFloat(ht)||0,ae=re/100,ke=J==="ml"?[100,200,250,500]:[50,100,150,200],tt=te==="portion"&&U?`${Ot} ${U.label}${Ot!==1?"s":""} (${Math.round(re)}${J})`:`${Math.round(re)}${J}`;return n.jsxs("div",{className:"nut-product-result",children:[n.jsxs("div",{className:"nut-product-name-row",children:[n.jsx("h4",{children:ve.name}),n.jsx("button",{className:`nut-fav-star confirm${rn(ve.name)?" active":""}`,onClick:()=>Bn({name:ve.name,protein:ve.protein,carbs:ve.carbs,fats:ve.fats,calories:ve.calories,serving:ve.servingSize,per100g:{protein:ve.protein,carbs:ve.carbs,fats:ve.fats,calories:ve.calories},servingUnit:ve.servingUnit||"g",portion:ve.portion||null}),children:n.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:rn(ve.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),n.jsxs("p",{className:"nut-product-per",children:["Per 100",J,":"]}),n.jsxs("div",{className:"nut-product-macros",children:[n.jsxs("span",{className:"nut-macro-p",children:[ve.protein,"g P"]}),n.jsxs("span",{className:"nut-macro-c",children:[ve.carbs,"g C"]}),n.jsxs("span",{className:"nut-macro-f",children:[ve.fats,"g F"]}),n.jsxs("span",{className:"nut-macro-cal",children:[ve.calories," cal"]})]}),U&&n.jsxs("div",{className:"nut-mode-toggle",children:[n.jsx("button",{className:te==="portion"?"active":"",onClick:()=>{it("portion"),Ot<1&&jt(1)},children:"Portions"}),n.jsxs("button",{className:te==="weight"?"active":"",onClick:()=>{it("weight"),Ye(String(Math.round(re)||100))},children:["Custom (",J,")"]})]}),te==="portion"&&U?n.jsxs("div",{className:"nut-portion-stepper",children:[n.jsx("button",{className:"nut-stepper-btn",onClick:()=>jt(Math.max(1,Ot-1)),children:"-"}),n.jsxs("div",{className:"nut-stepper-display",children:[n.jsx("span",{className:"nut-stepper-count",children:Ot}),n.jsxs("span",{className:"nut-stepper-label",children:[U.label,Ot!==1?"s":""]}),n.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),J]})]}),n.jsx("button",{className:"nut-stepper-btn",onClick:()=>jt(Ot+1),children:"+"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"nut-serving-adjust",children:[n.jsxs("label",{children:["Serving (",J,")"]}),n.jsx("input",{type:"number",inputMode:"numeric",value:ht,onChange:$e=>Ye($e.target.value),onFocus:$e=>$e.target.select(),min:"0"})]}),n.jsx("div",{className:"nut-quick-amounts",children:ke.map($e=>n.jsxs("button",{className:`nut-quick-btn${ht===String($e)?" active":""}`,onClick:()=>Ye(String($e)),children:[$e,J]},$e))})]}),n.jsx("div",{className:"nut-product-total",children:n.jsxs("span",{children:["Total: ",Math.round(ve.protein*ae),"p / ",Math.round(ve.carbs*ae),"c / ",Math.round(ve.fats*ae),"f / ",Math.round(ve.calories*ae)," cal"]})}),n.jsxs("div",{className:"nut-product-actions",children:[n.jsx("button",{className:"nut-btn-secondary",onClick:()=>bt(null),children:"Back to Favourites"}),n.jsx("button",{className:"nut-btn-primary",onClick:()=>ss({name:ve.name,protein:Math.round(ve.protein*ae),carbs:Math.round(ve.carbs*ae),fats:Math.round(ve.fats*ae),calories:Math.round(ve.calories*ae),serving:tt}),children:"Add"})]})]})})()]})}),n.jsx(So,{active:"nutrition"}),mt&&n.jsx("div",{className:`toast-notification ${mt.type}`,children:mt.message})]})}const S2="/login/assets/randomiser-glq9YJkL.jpg",v6="/login/assets/programme-card-workout-smzPAV77.JPG",y6="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",b6="/login/assets/mg-arms-BeOQU3wx.jpg",mo=60,Ug=5,x6=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],w6={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},j6={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},_6={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},Fg={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},zg=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:y6},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],gd=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:b6},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],T2={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},E2=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],qg=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],Kc=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],k6=[5,10,15,20,30];function N6(r){return r.replace(/\b\w/g,e=>e.toUpperCase())}function S6(r){const e=[...r];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function T6(){const{currentUser:r,isClient:e,clientData:t,loading:i}=Bs(),{isDark:o,toggleTheme:c,accent:u}=ja(),h=hs(),[m,b]=C.useState("menu"),[k,S]=C.useState(["bodyweight"]),[E,F]=C.useState("core"),[L,V]=C.useState("intermediate"),[P,ee]=C.useState(15),[$,le]=C.useState([]),[X,Te]=C.useState(!1),Re=C.useRef(!1),B=C.useRef([]),[O,z]=C.useState([]),[Y,G]=C.useState(2),[se,H]=C.useState(Kc[1]),[Le,Oe]=C.useState(1),[ne,be]=C.useState(0),[me,Ae]=C.useState("work"),[He,Q]=C.useState(0),[we,Ne]=C.useState(!1),[je,ce]=C.useState(0),[Ee,ue]=C.useState(null),xe=C.useRef(null);C.useRef(null),C.useRef(null);const[Fe,ot]=C.useState(null),Ue=C.useCallback((he,De="info")=>{ot({message:he,type:De}),setTimeout(()=>ot(null),3e3)},[]),[_e,Ke]=C.useState(null),[ve,bt]=C.useState(null),[ht,Ye]=C.useState(0),[Ot,jt]=C.useState(0),[te,it]=C.useState([]),[kt,Rt]=C.useState(""),[mt,Ht]=C.useState(""),[Zt,Qt]=C.useState(!1),[ze,Ze]=C.useState(0),[gt,Lt]=C.useState(!1),[Bt,Ct]=C.useState({}),Dt=C.useRef(null),St=C.useRef(null),[wt,Kt]=C.useState([]),[bn,un]=C.useState(null),[Pn,fs]=C.useState(0),[rn,Bn]=C.useState(0),[ss,Gn]=C.useState(0),[xr,as]=C.useState(0),[ls,bs]=C.useState(0),[ur,Vs]=C.useState(0),[ms,sr]=C.useState({beginner:0,intermediate:0,advanced:0}),[pe,Xe]=C.useState(null),[st,nt]=C.useState("");C.useEffect(()=>{!i&&(!r||!e)&&h("/")},[r,e,i,h]),C.useEffect(()=>{if(!r||!t)return;(async()=>{try{const De=en(Je,"workoutLogs"),Be=ds(De,Hn("clientId","==",t.id)),yt=(await yn(Be)).docs.map(Tn=>Tn.data()),xt=yt.filter(Tn=>Tn.type!=="programme");as(xt.length);const At=xt.reduce((Tn,cs)=>Tn+(cs.duration||0),0);bs(At);const Yt={beginner:0,intermediate:0,advanced:0};xt.forEach(Tn=>{Tn.level&&Yt[Tn.level]!==void 0&&Yt[Tn.level]++}),sr(Yt);const dn=new Date,tn=dn.getDay(),Sn=tn===0?-6:1-tn,xs=new Date(dn);xs.setDate(dn.getDate()+Sn),xs.setHours(0,0,0,0);const Fa=xs.getTime(),Qs=yt.filter(Tn=>{const cs=Tn.completedAt;return cs?(cs.toDate?cs.toDate().getTime():new Date(cs).getTime())>=Fa:!1});fs(Qs.filter(Tn=>Tn.type!=="programme").length);let za=0;if(t)try{const Tn=await vs(Mt(Je,"clientProgrammes",t.id));if(Tn.exists()){const cs=Tn.data(),Cr=cs.templateId;za=Qs.filter(rr=>rr.type==="programme"&&rr.programmeId===Cr).length,Xe(Cr);const dr=zg.find(rr=>rr.id===Cr);dr&&nt(dr.name);const Ns=j6[Cr];if(Ns){const rr=Object.keys(cs.completedSessions||{}).length,hr=Ns.duration*Ns.daysPerWeek;Gn(hr>0?Math.round(rr/hr*100):0)}}else Xe(null),nt(""),Gn(0)}catch{}Bn(za);const Ui=xt.map(Tn=>Tn.completedAt).filter(Boolean).map(Tn=>Tn.toDate?Tn.toDate().getTime():new Date(Tn).getTime()).sort((Tn,cs)=>cs-Tn);if(Ui.length===0)Vs(0);else{const Tn=new Set;Ui.forEach(hr=>{const ra=new Date(hr),qa=ra.getDay(),Co=qa===0?-6:1-qa,Fr=new Date(ra);Fr.setDate(ra.getDate()+Co),Fr.setHours(0,0,0,0),Tn.add(Fr.getTime())});const cs=[...Tn].sort((hr,ra)=>ra-hr);let Cr=0;const dr=new Date(dn),Ns=dn.getDay()===0?-6:1-dn.getDay();dr.setDate(dn.getDate()+Ns),dr.setHours(0,0,0,0);let rr=dr.getTime();cs.includes(rr)||(rr-=10080*60*1e3);for(let hr=0;hr<200&&cs.includes(rr);hr++)Cr++,rr-=10080*60*1e3;Vs(Cr)}}catch(De){console.error("Error loading workout stats:",De)}})()},[r,t,m]);const Qe=()=>{const he=[];let De;E==="mix"?De=["core","upper","lower"]:E==="fullbody"?De=["upper","lower"]:De=[E];for(const Be of k)for(const vt of De)he.push(`exercises/${Be}/${vt}`);return he},ie=async()=>{if(Re.current){for(;Re.current;)await new Promise(he=>setTimeout(he,200));return B.current}Re.current=!0,Te(!0);try{const he=Qe(),De=[];for(const xt of he)try{const At=_d(kd,xt),Yt=await f2(At);De.push(...Yt.items)}catch{console.warn(`Folder ${xt} not found, skipping.`)}if(De.length===0&&k.includes("bodyweight")&&E==="core")try{const xt=_d(kd,"core"),At=await f2(xt);De.push(...At.items)}catch{console.warn("Legacy core/ folder not found either.")}if(De.length===0){const xt=k.map(Yt=>E2.find(dn=>dn.key===Yt)?.label).join(" + "),At=qg.find(Yt=>Yt.key===E)?.label;return Ue(`No exercises found for ${xt} / ${At}. Upload videos to Firebase Storage.`,"error"),Re.current=!1,Te(!1),[]}const Be=new Set,vt=De.filter(xt=>{const At=xt.name.replace(/\.(mp4|gif)$/i,"");return Be.has(At)?!1:(Be.add(At),!0)}),yt=await Promise.all(vt.map(async xt=>{const At=await Ff(xt),Yt=N6(xt.name.replace(/\.(mp4|gif)$/i,"")),dn=/\.gif$/i.test(xt.name);return{name:Yt,videoUrl:At,isGif:dn}}));return B.current=yt,le(yt),Re.current=!1,Te(!1),yt}catch(he){console.error("Error loading exercises:",he);const De=he.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${he.message||he.code||"Unknown error"}`;return Ue(De,"error"),Re.current=!1,Te(!1),[]}},lt=async()=>{b("spinning"),B.current=[];const he=await ie();if(he.length===0){b("setup");return}const De=Kc.find(tn=>tn.key===L);H(De);const Be=De.work+De.rest,vt=P*60,yt=Math.floor(vt/Be);let xt,At;yt<=6?(xt=Math.max(3,Math.floor(yt/2)),At=Math.floor(yt/xt)):yt<=12?(xt=Math.min(6,Math.floor(yt/2)),At=Math.floor(yt/xt)):(xt=Math.min(10,Math.floor(yt/2)),At=Math.floor(yt/xt)),At=Math.max(2,At);const Yt=S6(he),dn=Yt.slice(0,Math.min(xt,Yt.length));z(dn),G(At),setTimeout(()=>b("preview"),2e3)},ft=()=>{b("countdown"),ce(3)};C.useEffect(()=>{if(m!=="countdown")return;if(je<=0){b("workout"),Oe(1),be(0),Ae("work"),Q(se.work),Ne(!1),$e();return}tt();const he=setTimeout(()=>ce(De=>De-1),1e3);return()=>clearTimeout(he)},[je,m]),C.useEffect(()=>{if(m!=="workout"||we)return;if(He<=0){_t();return}He<=3&&tt();const he=setTimeout(()=>Q(De=>De-1),1e3);return()=>clearTimeout(he)},[He,m,we]);const _t=()=>{if(me==="work")Ae("rest"),Q(se.rest);else{const he=ne+1;if(he>=O.length){const De=Le+1;if(De>Y){b("complete"),It();return}Oe(De),be(0)}else be(he);Ae("work"),Q(se.work),$e()}},It=async()=>{if(r)try{await ai(en(Je,"workoutLogs"),{clientId:t.id,level:L,duration:P,equipment:k,focus:E,exerciseCount:O.length,rounds:Y,exercises:O.map(he=>he.name),completedAt:Et.now()}),fs(he=>he+1),as(he=>he+1),bs(he=>he+P),sr(he=>({...he,[L]:(he[L]||0)+1}))}catch(he){console.error("Error saving workout log:",he)}},ln=async(he,De,Be)=>{if(!(!t||!De))try{const vt=t.id,yt=await vs(Mt(Je,"coreBuddyPBs",vt)),At=(yt.exists()?yt.data():null)?.exercises||{},Yt=At[he];let dn=!1;if(Yt?(De>(Yt.weight||0)||De===(Yt.weight||0)&&Be>(Yt.reps||0))&&(dn=!0):dn=!0,dn){const tn={...At,[he]:{weight:De,reps:Be,achievedAt:Et.now()}};await Cs(Mt(Je,"coreBuddyPBs",vt),{clientId:t.id,exercises:tn,updatedAt:Et.now()}),Ue(`New PB! ${De}kg  ${Be} reps`,"success"),tt(),await Nn(he,De)}}catch(vt){console.error("Error checking PB:",vt)}},Nn=async(he,De)=>{if(t)try{const Be=await vs(Mt(Je,"coreBuddyTargets",t.id));if(!Be.exists())return;const yt=(Be.data().targets||{})[he];if(!yt||De<yt.targetWeight)return;const xt=await vs(Mt(Je,"coreBuddyAchievements",t.id)),At=xt.exists()?xt.data():{clientId:t.id,badges:[],totalVolume:0};if(At.badges.some(Sn=>Sn.type==="pb_target"&&Sn.exercise===he&&Sn.targetWeight===yt.targetWeight))return;const dn={type:"pb_target",exercise:he,group:w6[he]||"push",targetWeight:yt.targetWeight,achievedAt:Et.now()},tn=[...At.badges,dn];await Cs(Mt(Je,"coreBuddyAchievements",t.id),{...At,badges:tn,updatedAt:Et.now()}),Kt(Sn=>[...Sn,dn])}catch(Be){console.error("Error checking target badge:",Be)}},Fn=async he=>{if(!(!t||he<=0))try{const De=await vs(Mt(Je,"coreBuddyAchievements",t.id)),Be=De.exists()?De.data():{clientId:t.id,badges:[],totalVolume:0},vt=Be.totalVolume||0,yt=vt+he,xt=[];x6.forEach(Yt=>{yt>=Yt.threshold&&vt<Yt.threshold&&(Be.badges.some(tn=>tn.type==="volume_milestone"&&tn.milestone===Yt.threshold)||xt.push({type:"volume_milestone",milestone:Yt.threshold,label:Yt.label,achievedAt:Et.now()}))});const At=[...Be.badges,...xt];await Cs(Mt(Je,"coreBuddyAchievements",t.id),{clientId:t.id,badges:At,totalVolume:Math.round(yt),updatedAt:Et.now()}),xt.length>0&&Kt(Yt=>[...Yt,...xt])}catch(De){console.error("Error updating volume:",De)}},Ys=async he=>{if(bt(he),he.interval){const vt=[];for(const yt of he.exercises){let xt=null,At=!1;if(yt.storagePath)try{const Yt=_d(kd,yt.storagePath);xt=await Ff(Yt),At=/\.gif$/i.test(yt.storagePath)}catch{}vt.push({name:yt.name,videoUrl:xt,isGif:At})}z(vt),G(he.rounds),H({work:he.work,rest:he.rest}),b("preview");return}const De={};for(const vt of he.exercises)if(vt.storagePath)try{const yt=_d(kd,vt.storagePath);De[vt.name]={url:await Ff(yt),isGif:/\.gif$/i.test(vt.storagePath)}}catch{}Ct(De);const Be=he.exercises.map(vt=>({name:vt.name,type:vt.type,targetSets:vt.sets,targetReps:vt.reps||0,targetTime:vt.time||0,sets:[]}));it(Be),Ye(0),jt(0),Rt(""),Ht(""),Lt(!1),Qt(!1),Ze(0),Kt([]),un(null),b("muscle_workout")},J=()=>{const he=Dt.current;he&&(he.paused?(he.play(),Lt(!0)):(he.pause(),Lt(!1)))};C.useEffect(()=>{if(m!=="muscle_workout"||!Zt||ze<=0){m==="muscle_workout"&&Zt&&ze<=0&&(Qt(!1),tt());return}return St.current=setTimeout(()=>Ze(he=>he-1),1e3),()=>clearTimeout(St.current)},[m,Zt,ze]);const U=async()=>{const he=te[ht];let De={};if(he.type==="weighted"){const yt=parseFloat(kt)||0,xt=parseInt(mt)||0;if(xt===0){Ue("Enter your reps","error");return}De={weight:yt,reps:xt}}else if(he.type==="reps"){const yt=parseInt(mt)||0;if(yt===0){Ue("Enter your reps","error");return}De={reps:yt}}else if(he.type==="timed"){const yt=he.targetTime-ze;De={time:Math.max(yt,1)}}const Be=[...te];Be[ht]={...he,sets:[...he.sets,De]},it(Be),he.type==="weighted"&&De.weight>0&&await ln(he.name,De.weight,De.reps);const vt=he.sets.length+1;if(vt<he.targetSets)jt(vt),Ht(""),Qt(!1),Ze(0);else if(ht+1<te.length){const yt=ht+1;Ye(yt),jt(0),Rt(""),Ht(""),Lt(!1),Qt(!1),Ze(0)}else await re(Be),b("muscle_complete")},re=async he=>{if(!(!r||!t))try{const De=he.reduce((vt,yt)=>vt+yt.sets.reduce((xt,At)=>xt+(At.weight||0)*(At.reps||0),0),0),Be=he.reduce((vt,yt)=>vt+yt.sets.length,0);await ai(en(Je,"workoutLogs"),{clientId:t.id,type:"muscle_group",muscleGroup:_e,sessionId:ve?.id,sessionName:ve?.name,exerciseCount:he.length,totalSets:Be,duration:Math.round(Be*1.5),volume:Math.round(De),exercises:he.map(vt=>({name:vt.name,type:vt.type,sets:vt.sets})),completedAt:Et.now()}),De>0&&await Fn(De),wt.length>0&&un({badges:[...wt]})}catch(De){console.error("Error saving muscle group workout log:",De)}},ae=C.useRef(null),ke=()=>(ae.current||(ae.current=new(window.AudioContext||window.webkitAudioContext)),ae.current),tt=()=>{try{const he=ke(),De=he.createOscillator(),Be=he.createGain();De.connect(Be),Be.connect(he.destination),De.frequency.value=880,Be.gain.value=.3,De.start(he.currentTime),De.stop(he.currentTime+.15)}catch{}},$e=()=>{try{const he=ke(),De=he.createOscillator(),Be=he.createGain();De.connect(Be),Be.connect(he.destination),De.frequency.value=1200,Be.gain.value=.4,De.start(he.currentTime),De.stop(he.currentTime+.3)}catch{}};C.useEffect(()=>{if(m!=="workout"||me!=="work"||!O[ne]?.isGif)return;const De=setInterval(()=>{const Be=xe.current;if(!Be)return;const vt=Be.getAttribute("src");Be.removeAttribute("src"),setTimeout(()=>{xe.current&&xe.current.setAttribute("src",vt)},0)},4e3);return()=>clearInterval(De)},[m,me,ne,Le,O]);const zt=(he,De,Be)=>{const vt=Math.round(he/De*mo);return n.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:[...Array(mo)].map((yt,xt)=>{const At=(xt*6-90)*(Math.PI/180),Yt=100+82*Math.cos(At),dn=100+82*Math.sin(At),tn=100+94*Math.cos(At),Sn=100+94*Math.sin(At);return n.jsx("line",{x1:Yt,y1:dn,x2:tn,y2:Sn,className:xt<vt?`wk-tick-filled ${Be}`:"wk-tick-empty",strokeWidth:xt%5===0?"3":"2"},xt)})})},Nt=()=>{const he=O.length*Y;return((Le-1)*O.length+ne+(me==="rest"?.5:0))/he},Ft=Fe&&n.jsx("div",{className:`toast-notification ${Fe.type}`,children:Fe.message});if(i)return n.jsx("div",{className:"cb-loading",children:n.jsx("div",{className:"cb-loading-spinner"})});if(m==="menu")return n.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:c,"aria-label":"Toggle theme",children:o?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),n.jsxs("main",{className:"wk-main",children:[pe&&n.jsxs("button",{className:"wk-active-prog",onClick:()=>h("/client/core-buddy/programmes"),children:[n.jsxs("div",{className:"wk-active-prog-ring",children:[n.jsx("svg",{viewBox:"0 0 200 200",children:[...Array(mo)].map((he,De)=>{const Be=(De*6-90)*(Math.PI/180),vt=100+78*Math.cos(Be),yt=100+78*Math.sin(Be),xt=100+94*Math.cos(Be),At=100+94*Math.sin(Be),Yt=Math.round(ss/100*mo);return n.jsx("line",{x1:vt,y1:yt,x2:xt,y2:At,className:De<Yt?"wk-ap-tick-filled":"wk-ap-tick-empty",strokeWidth:De%5===0?"3":"2"},De)})}),n.jsxs("span",{className:"wk-ap-pct",children:[ss,"%"]})]}),n.jsxs("div",{className:"wk-active-prog-info",children:[n.jsx("span",{className:"wk-ap-label",children:"CURRENT PROGRAMME"}),n.jsx("span",{className:"wk-ap-name",children:st}),n.jsx("span",{className:"wk-ap-cta",children:"Continue "})]})]}),n.jsxs("div",{className:"wk-menu-heading",children:[n.jsx("h2",{children:"Choose Your Workout"}),n.jsx("p",{children:"No excuses. Just results."})]}),n.jsx("button",{className:"wk-hero-card",onClick:()=>b("setup"),children:n.jsx("img",{src:S2,alt:"Randomise Workout",className:"wk-hero-bg"})}),n.jsxs("div",{className:"wk-section-header",children:[n.jsx("h2",{children:"Programmes"}),n.jsxs("span",{className:"wk-section-count",children:[zg.length," available"]})]}),n.jsx("div",{className:"wk-prog-scroll-wrap",children:n.jsx("div",{className:"wk-prog-scroll",children:zg.map((he,De)=>he.image?n.jsxs("button",{className:"wk-prog-img-card",onClick:()=>h("/client/core-buddy/programmes",{state:{templateId:he.id}}),style:{animationDelay:`${De*.06}s`},children:[n.jsx("img",{src:he.image,alt:he.name,className:"wk-prog-img"}),De===0&&n.jsx("div",{className:"wk-swipe-arrow",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})})]},he.id):n.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>h("/client/core-buddy/programmes",{state:{templateId:he.id}}),style:{animationDelay:`${De*.06}s`},children:[n.jsx("img",{src:v6,alt:"",className:"wk-prog-hero-bg"}),n.jsx("div",{className:"wk-prog-hero-overlay",style:{background:_6[he.focus]}}),n.jsxs("div",{className:"wk-prog-hero-content",children:[n.jsxs("div",{className:"wk-prog-hero-top",children:[n.jsxs("span",{className:"wk-prog-hero-badge",children:[he.duration," WEEKS"]}),n.jsx("span",{className:"wk-prog-hero-level",children:he.level})]}),n.jsxs("div",{className:"wk-prog-hero-bottom",children:[n.jsx("h3",{children:he.name.toUpperCase()}),n.jsxs("p",{children:[he.daysPerWeek,"x per week  ",he.focus==="fullbody"?"Full Body":he.focus.charAt(0).toUpperCase()+he.focus.slice(1)," Focus"]}),n.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),De===0&&n.jsx("div",{className:"wk-swipe-arrow",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})})]},he.id))})}),n.jsxs("div",{className:"wk-section-header",children:[n.jsx("h2",{children:"Muscle Groups"}),n.jsxs("span",{className:"wk-section-count",children:[gd.length," groups"]})]}),n.jsx("div",{className:"wk-muscle-grid",children:gd.map((he,De)=>n.jsx("button",{className:`wk-muscle-hero-card${he.image?" wk-muscle-thumb":""}`,onClick:()=>{Ke(he.key),b("muscle_sessions")},style:{animationDelay:`${De*.05}s`},children:he.image?n.jsx("img",{src:he.image,alt:he.label,className:"wk-muscle-thumb-img"}):n.jsxs(n.Fragment,{children:[n.jsx("img",{src:S2,alt:"",className:"wk-muscle-hero-bg"}),n.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:Fg[he.key]}}),n.jsxs("div",{className:"wk-muscle-hero-content",children:[n.jsx("div",{className:"wk-muscle-hero-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:he.icon})})}),n.jsxs("div",{className:"wk-muscle-hero-text",children:[n.jsx("span",{className:"wk-muscle-hero-name",children:he.label}),n.jsxs("span",{className:"wk-muscle-hero-count",children:[T2[he.key]?.length||0," sessions"]})]})]})]})},he.key))})]}),n.jsx(So,{active:"workouts"}),Ft]});if(m==="setup"){const he=qg.find(Be=>Be.key===E)?.label||E,De=Kc.find(Be=>Be.key===L)?.label||L;return n.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>b("menu"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:c,"aria-label":"Toggle theme",children:o?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),n.jsxs("main",{className:"wk-main wk-setup-main",children:[n.jsxs("div",{className:"wk-stats-strip",children:[n.jsxs("div",{className:"wk-stats-strip-ring",children:[n.jsx("svg",{viewBox:"0 0 200 200",children:[...Array(mo)].map((Be,vt)=>{const yt=(vt*6-90)*(Math.PI/180),xt=100+78*Math.cos(yt),At=100+78*Math.sin(yt),Yt=100+94*Math.cos(yt),dn=100+94*Math.sin(yt),tn=Math.round(Math.min(Pn,Ug)/Ug*mo);return n.jsx("line",{x1:xt,y1:At,x2:Yt,y2:dn,className:vt<tn?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:vt%5===0?"3":"2"},vt)})}),n.jsxs("span",{className:"wk-stats-strip-ring-num",children:[Pn,n.jsxs("small",{children:["/",Ug]})]})]}),n.jsxs("div",{className:"wk-stats-strip-items",children:[n.jsxs("div",{className:"wk-stats-strip-item",children:[n.jsx("span",{className:"wk-stats-strip-num",children:xr}),n.jsx("span",{className:"wk-stats-strip-label",children:"Workouts"})]}),n.jsxs("div",{className:"wk-stats-strip-item",children:[n.jsx("span",{className:"wk-stats-strip-num",children:ls}),n.jsx("span",{className:"wk-stats-strip-label",children:"Minutes"})]}),n.jsxs("div",{className:"wk-stats-strip-item",children:[n.jsx("span",{className:"wk-stats-strip-num",children:ur}),n.jsx("span",{className:"wk-stats-strip-label",children:"Wk Streak"})]})]})]}),n.jsxs("div",{className:"wk-setup-section",children:[n.jsx("h2",{children:"Focus Area"}),n.jsx("div",{className:"wk-focus-grid",children:qg.map(Be=>n.jsxs("button",{className:`wk-equip-btn${E===Be.key?" active":""}${Be.key==="mix"?" wk-mix-btn":""}`,onClick:()=>F(Be.key),children:[n.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:Be.icon})}),n.jsx("span",{children:Be.label})]},Be.key))})]}),n.jsxs("div",{className:"wk-setup-section",children:[n.jsx("h2",{children:"Level"}),n.jsx("div",{className:"wk-level-cards",children:Kc.map(Be=>n.jsxs("button",{className:`wk-level-card wk-level-${Be.key}${L===Be.key?" active":""}`,onClick:()=>V(Be.key),children:[n.jsx("span",{className:"wk-level-name",children:Be.label}),n.jsx("span",{className:"wk-level-desc",children:Be.desc})]},Be.key))})]}),n.jsxs("div",{className:"wk-setup-section",children:[n.jsx("h2",{children:"Time"}),n.jsx("div",{className:"wk-time-options",children:k6.map(Be=>n.jsxs("button",{className:`wk-time-btn${P===Be?" active":""}`,onClick:()=>ee(Be),children:[n.jsx("span",{className:"wk-time-num",children:Be}),n.jsx("span",{className:"wk-time-unit",children:"min"})]},Be))})]}),n.jsxs("div",{className:"wk-setup-section",children:[n.jsx("h2",{children:"Equipment"}),n.jsx("div",{className:"wk-equip-options",children:E2.map(Be=>{const vt=k.includes(Be.key);return n.jsxs("button",{className:`wk-equip-btn${vt?" active":""}`,onClick:()=>{S(yt=>vt&&yt.length===1?yt:vt?yt.filter(xt=>xt!==Be.key):[...yt,Be.key])},children:[n.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:Be.icon})}),n.jsx("span",{children:Be.label})]},Be.key)})})]}),n.jsx("div",{className:"wk-setup-summary",children:n.jsxs("span",{children:[he,"  ",De,"  ",P," min"]})})]}),n.jsx("div",{className:"wk-go-sticky",children:n.jsx("button",{className:"wk-randomise-btn",onClick:lt,disabled:X,children:X?"Loading exercises...":"Randomise Workout"})}),Ft]})}if(m==="spinning")return n.jsxs("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":u,children:[n.jsxs("div",{className:"wk-spin-container",children:[n.jsxs("div",{className:"wk-spin-ring",children:[n.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:[...Array(mo)].map((he,De)=>{const Be=(De*6-90)*(Math.PI/180),vt=100+78*Math.cos(Be),yt=100+78*Math.sin(Be),xt=100+94*Math.cos(Be),At=100+94*Math.sin(Be);return n.jsx("line",{x1:vt,y1:yt,x2:xt,y2:At,className:"wk-spin-tick",strokeWidth:De%5===0?"3.5":"2",style:{animationDelay:`${De*.03}s`}},De)})}),n.jsx("img",{src:"/Logo.PNG",alt:"",className:"wk-spin-logo"})]}),n.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),Ft]});if(m==="preview"){const he=ve?.interval?{work:ve.work,rest:ve.rest}:Kc.find(Be=>Be.key===L),De=O.length*Y*(he.work+he.rest);return n.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>b(ve?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:c,"aria-label":"Toggle theme",children:o?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),n.jsxs("main",{className:"wk-main",children:[ve?.interval&&n.jsx("h2",{className:"mg-preview-title",children:ve.name}),n.jsxs("div",{className:"wk-preview-stats",children:[n.jsxs("div",{className:"wk-stat",children:[n.jsx("span",{className:"wk-stat-val",children:O.length}),n.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),n.jsxs("div",{className:"wk-stat",children:[n.jsx("span",{className:"wk-stat-val",children:Y}),n.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),n.jsxs("div",{className:"wk-stat",children:[n.jsx("span",{className:"wk-stat-val",children:Math.ceil(De/60)}),n.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),n.jsxs("div",{className:"wk-stat",children:[n.jsxs("span",{className:"wk-stat-val",children:[he.work,"/",he.rest]}),n.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),n.jsx("div",{className:"wk-preview-list",children:O.map((Be,vt)=>n.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${vt*.06}s`},onClick:()=>ue(Be),children:[n.jsx("span",{className:"wk-preview-num",children:vt+1}),n.jsx("div",{className:"wk-preview-thumb",children:Be.isGif?n.jsx("img",{src:Be.videoUrl,alt:Be.name,loading:"lazy"}):n.jsx("video",{src:`${Be.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),n.jsx("span",{className:"wk-preview-name",children:Be.name}),n.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},vt))}),Ee&&n.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>ue(null),children:n.jsxs("div",{className:"wk-preview-modal",onClick:Be=>Be.stopPropagation(),children:[n.jsx("button",{className:"wk-preview-modal-close",onClick:()=>ue(null),"aria-label":"Close preview",children:n.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),n.jsx("div",{className:"wk-preview-modal-video",children:Ee.isGif?n.jsx("img",{src:Ee.videoUrl,alt:Ee.name}):n.jsx("video",{src:Ee.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),n.jsx("h3",{className:"wk-preview-modal-title",children:Ee.name})]})}),n.jsxs("div",{className:"wk-preview-actions",children:[!ve?.interval&&n.jsxs("button",{className:"wk-btn-secondary",onClick:()=>lt(),children:[n.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("polyline",{points:"1 4 1 10 7 10"}),n.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),n.jsx("button",{className:"wk-btn-primary",onClick:ft,children:"Start Workout"})]})]})]})}if(m==="countdown")return n.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":o?"dark":"light","data-accent":u,children:n.jsxs("div",{className:"wk-countdown-big",children:[n.jsx("span",{className:"wk-countdown-num",children:je}),n.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(m==="workout"){const he=O[ne],De=me==="work"?se.work:se.rest,Be=me==="rest"?ne+1<O.length?O[ne+1]:Le<Y?O[0]:null:null;return n.jsxs("div",{className:"wk-page wk-page-workout","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("div",{className:"wk-video-container",children:me==="work"?he.isGif?n.jsx("img",{ref:xe,className:"wk-video",src:he.videoUrl,alt:he.name},he.videoUrl):n.jsx("video",{className:"wk-video",src:he.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},he.videoUrl):n.jsxs("div",{className:"wk-rest-screen",children:[n.jsx("span",{className:"wk-rest-label",children:"REST"}),Be&&n.jsxs("span",{className:"wk-next-label",children:["Next: ",Be.name]})]})}),n.jsx("div",{className:"wk-spotify",children:n.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),n.jsxs("div",{className:"wk-exercise-info",children:[n.jsxs("span",{className:"wk-exercise-counter",children:[ne+1," / ",O.length]}),n.jsx("h2",{className:"wk-exercise-name",children:he.name}),n.jsxs("span",{className:"wk-round-label",children:["Round ",Le," of ",Y]})]}),n.jsx("div",{className:"wk-timer-section",children:n.jsxs("div",{className:"wk-timer-ring-wrap",children:[zt(He,De,me==="work"?"wk-tick-work":"wk-tick-rest"),n.jsxs("div",{className:"wk-timer-center",children:[n.jsx("span",{className:"wk-timer-time",children:He}),n.jsx("span",{className:`wk-timer-phase ${me}`,children:me==="work"?"WORK":"REST"})]})]})}),n.jsxs("div",{className:"wk-controls",children:[n.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&b("menu")},children:n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),n.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>Ne(!we),children:we?n.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):n.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[n.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),n.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),n.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{Q(0)},children:n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[n.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),n.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),n.jsx("div",{className:"wk-progress-bar",children:n.jsx("div",{className:"wk-progress-fill",style:{width:`${Nt()*100}%`}})})]})}if(m==="complete"){const he=Kc.find(Be=>Be.key===L),De=O.length*Y*(he.work+he.rest);return n.jsx("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":u,children:n.jsxs("div",{className:"wk-complete",children:[n.jsxs("div",{className:"wk-complete-ring",children:[n.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:[...Array(mo)].map((Be,vt)=>{const yt=(vt*6-90)*(Math.PI/180),xt=100+78*Math.cos(yt),At=100+78*Math.sin(yt),Yt=100+94*Math.cos(yt),dn=100+94*Math.sin(yt);return n.jsx("line",{x1:xt,y1:At,x2:Yt,y2:dn,className:"wk-tick-complete",strokeWidth:vt%5===0?"3.5":"2",style:{animationDelay:`${vt*.02}s`}},vt)})}),n.jsx("div",{className:"wk-complete-center",children:n.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),n.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),n.jsxs("div",{className:"wk-complete-stats",children:[n.jsxs("div",{className:"wk-stat",children:[n.jsx("span",{className:"wk-stat-val",children:Math.ceil(De/60)}),n.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),n.jsxs("div",{className:"wk-stat",children:[n.jsx("span",{className:"wk-stat-val",children:O.length*Y}),n.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),n.jsxs("div",{className:"wk-stat",children:[n.jsx("span",{className:"wk-stat-val",children:Y}),n.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),n.jsx("div",{className:"wk-complete-actions",children:n.jsx("button",{className:"wk-btn-primary",onClick:()=>{bt(null),Ke(null),b("menu")},children:"Done"})})]})})}if(m==="muscle_sessions"){const he=gd.find(Be=>Be.key===_e),De=T2[_e]||[];return n.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>b("menu"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:c,"aria-label":"Toggle theme",children:o?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),n.jsxs("main",{className:"wk-main",children:[n.jsxs("div",{className:"mg-sessions-header",children:[n.jsx("div",{className:"mg-sessions-icon",style:{background:Fg[_e]},children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:he?.icon})})}),n.jsxs("h2",{children:[he?.label," Workouts"]}),n.jsxs("p",{children:[De.length," sessions available"]})]}),n.jsx("div",{className:"mg-sessions-list",children:De.map((Be,vt)=>n.jsxs("button",{className:"mg-session-card",onClick:()=>{bt(Be),b("muscle_overview")},style:{animationDelay:`${vt*.08}s`},children:[n.jsxs("div",{className:"mg-session-info",children:[n.jsx("h3",{children:Be.name}),n.jsx("p",{children:Be.desc}),n.jsx("div",{className:"mg-session-meta",children:Be.interval?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),n.jsxs("span",{className:"mg-session-tag",children:[Be.exercises.length," exercises"]}),n.jsxs("span",{className:"mg-session-tag",children:[Be.rounds," rounds"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),n.jsxs("span",{className:"mg-session-tag",children:[Be.exercises.length," exercises"]}),n.jsx("span",{className:"mg-session-tag",children:(()=>{const yt=Be.exercises.map(Yt=>Yt.sets||0),xt=Math.min(...yt),At=Math.max(...yt);return xt===At?`${xt} sets each`:`${xt}-${At} sets each`})()})]})})]}),n.jsx("div",{className:"mg-session-arrow",children:n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})})]},Be.id))})]}),Ft]})}if(m==="muscle_overview"){const he=ve;if(!he)return null;const De=gd.find(Be=>Be.key===_e);return n.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>b("muscle_sessions"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:c,"aria-label":"Toggle theme",children:o?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),n.jsxs("main",{className:"wk-main mg-overview-main",children:[n.jsx("div",{className:"mg-overview-hero",style:{background:Fg[_e]},children:n.jsx("div",{className:"mg-overview-hero-content",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:n.jsx("path",{d:De?.icon})})})}),n.jsxs("div",{className:"mg-overview-header",children:[n.jsxs("div",{className:"mg-overview-title-row",children:[n.jsx("h2",{children:he.name}),he.level&&n.jsx("span",{className:"mg-overview-level",children:he.level})]}),n.jsx("p",{className:"mg-overview-desc",children:he.desc})]}),he.overview&&n.jsxs("div",{className:"mg-overview-section",children:[n.jsxs("h3",{children:[n.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),n.jsx("p",{children:he.overview})]}),he.tips&&he.tips.length>0&&n.jsxs("div",{className:"mg-overview-section",children:[n.jsxs("h3",{children:[n.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),n.jsx("ul",{className:"mg-overview-tips",children:he.tips.map((Be,vt)=>n.jsx("li",{children:Be},vt))})]}),n.jsxs("div",{className:"mg-overview-section",children:[n.jsxs("h3",{children:[n.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),n.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),n.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",he.exercises.length,")"]}),n.jsx("div",{className:"mg-overview-exercises",children:he.exercises.map((Be,vt)=>n.jsxs("div",{className:"mg-overview-exercise",children:[n.jsx("span",{className:"mg-overview-ex-num",children:vt+1}),n.jsxs("div",{className:"mg-overview-ex-info",children:[n.jsx("span",{className:"mg-overview-ex-name",children:Be.name}),he.interval?n.jsxs("span",{className:"mg-overview-ex-detail",children:[he.work,"s work / ",he.rest,"s rest"]}):n.jsxs("span",{className:"mg-overview-ex-detail",children:[Be.sets," sets  ",Be.reps?`${Be.reps} reps`:`${Be.time}s`,Be.type==="weighted"&&"  weighted"]})]})]},vt))})]}),n.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>Ys(he),children:[n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),Ft]})}if(m==="muscle_workout"){const he=ve;if(!he)return null;const De=he.exercises[ht],Be=te[ht];if(!De||!Be)return null;const vt=Be.sets.length,yt=he.exercises.length,xt=he.exercises.reduce((Sn,xs)=>Sn+(xs.sets||0),0),Yt=te.reduce((Sn,xs)=>Sn+xs.sets.length,0)/xt*100,dn=Bt[De.name];De.type==="timed"&&ze===0&&!Zt&&vt===Ot&&setTimeout(()=>Ze(De.time),0);const tn=vt+1<De.sets?"Log Set":ht+1<yt?"Log Set  Next Exercise":"Log Set  Complete";return n.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("div",{className:"mg-session-progress",children:n.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Yt}%`}})}),n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&b("muscle_overview")},"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsxs("span",{className:"mg-header-info",children:["Exercise ",ht+1,"/",yt]}),n.jsx("div",{style:{width:22}})]})}),n.jsxs("main",{className:"wk-main",children:[dn?n.jsxs("div",{className:"mg-video-container",onClick:J,children:[dn.isGif?n.jsx("img",{className:"mg-video",src:dn.url,alt:De.name}):n.jsx("video",{ref:Dt,className:"mg-video",src:dn.url,loop:!0,muted:!0,playsInline:!0},De.name),!gt&&!dn.isGif&&n.jsxs("div",{className:"mg-video-overlay",children:[n.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:n.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),n.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):n.jsxs("div",{className:"mg-video-placeholder",children:[n.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[n.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),n.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),n.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),n.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),n.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),n.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),n.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),n.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),n.jsx("span",{children:"Video coming soon"})]}),n.jsx("div",{className:"wk-spotify",children:n.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),n.jsxs("div",{className:"mg-exercise-card",children:[n.jsx("h2",{className:"mg-ex-name",children:De.name}),n.jsx("span",{className:`mg-ex-type-badge ${De.type}`,children:De.type==="weighted"?"Weight + Reps":De.type==="reps"?"Reps Only":"Timed"}),n.jsxs("div",{className:"mg-ex-set-info",children:[n.jsxs("span",{className:"mg-ex-set-num",children:["Set ",vt+1," of ",De.sets]}),De.type!=="timed"&&n.jsxs("span",{className:"mg-ex-target",children:["Target: ",De.reps," reps"]}),De.type==="timed"&&n.jsxs("span",{className:"mg-ex-target",children:["Target: ",De.time,"s"]})]}),De.type==="weighted"&&n.jsxs("div",{className:"mg-input-area",children:[n.jsxs("div",{className:"mg-input-group",children:[n.jsx("label",{children:"Weight (kg)"}),n.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:kt,onChange:Sn=>Rt(Sn.target.value),placeholder:"0"})]}),n.jsxs("div",{className:"mg-input-group",children:[n.jsx("label",{children:"Reps"}),n.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:mt,onChange:Sn=>Ht(Sn.target.value),placeholder:"0"})]})]}),De.type==="reps"&&n.jsx("div",{className:"mg-input-area",children:n.jsxs("div",{className:"mg-input-group mg-input-single",children:[n.jsx("label",{children:"Reps"}),n.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:mt,onChange:Sn=>Ht(Sn.target.value),placeholder:"0"})]})}),De.type==="timed"&&n.jsxs("div",{className:"mg-timer-area",children:[n.jsx("div",{className:"mg-timer-display",children:n.jsxs("span",{className:"mg-timer-value",children:[ze,"s"]})}),Zt?n.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>Qt(!1),children:"Stop"}):n.jsx("button",{className:"mg-timer-btn",onClick:()=>{ze===0&&Ze(De.time),Qt(!0)},children:ze<De.time&&ze>0?"Resume":"Start Timer"})]}),n.jsx("button",{className:"mg-log-set-btn",onClick:U,children:tn}),Be.sets.length>0&&n.jsx("div",{className:"mg-completed-sets",children:Be.sets.map((Sn,xs)=>n.jsxs("div",{className:"mg-completed-set",children:[n.jsx("span",{className:"mg-completed-set-check",children:""}),n.jsxs("span",{children:["Set ",xs+1,": ",Sn.weight!=null?`${Sn.weight}kg  ${Sn.reps}`:Sn.reps!=null?`${Sn.reps} reps`:`${Sn.time}s`]})]},xs))})]})]}),Ft]})}if(m==="muscle_complete"){const he=te.reduce((vt,yt)=>vt+yt.sets.length,0),De=te.reduce((vt,yt)=>vt+yt.sets.reduce((xt,At)=>xt+(At.weight||0)*(At.reps||0),0),0),Be=gd.find(vt=>vt.key===_e)?.label||"";return n.jsxs("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":u,children:[n.jsxs("div",{className:"wk-complete",children:[n.jsxs("div",{className:"wk-complete-ring",children:[n.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:[...Array(mo)].map((vt,yt)=>{const xt=(yt*6-90)*(Math.PI/180),At=100+78*Math.cos(xt),Yt=100+78*Math.sin(xt),dn=100+94*Math.cos(xt),tn=100+94*Math.sin(xt);return n.jsx("line",{x1:At,y1:Yt,x2:dn,y2:tn,className:"wk-tick-complete",strokeWidth:yt%5===0?"3.5":"2",style:{animationDelay:`${yt*.02}s`}},yt)})}),n.jsx("div",{className:"wk-complete-center",children:n.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),n.jsxs("h2",{className:"wk-complete-title",children:[Be," Complete!"]}),n.jsx("p",{className:"mg-complete-session-name",children:ve?.name}),n.jsxs("div",{className:"wk-complete-stats",children:[n.jsxs("div",{className:"wk-stat",children:[n.jsx("span",{className:"wk-stat-val",children:te.length}),n.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),n.jsxs("div",{className:"wk-stat",children:[n.jsx("span",{className:"wk-stat-val",children:he}),n.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),De>0&&n.jsxs("div",{className:"wk-stat",children:[n.jsx("span",{className:"wk-stat-val",children:Math.round(De).toLocaleString()}),n.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),n.jsx("div",{className:"wk-complete-actions",children:n.jsx("button",{className:"wk-btn-primary",onClick:()=>{bt(null),Ke(null),un(null),b("menu")},children:"Done"})})]}),bn&&n.jsx("div",{className:"mg-badge-celebration",onClick:()=>un(null),children:n.jsxs("div",{className:"mg-badge-celebration-card",children:[n.jsx("div",{className:"mg-badge-celebration-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:n.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),n.jsx("h3",{className:"mg-badge-celebration-title",children:bn.badges.length===1?"Badge Earned!":`${bn.badges.length} Badges Earned!`}),n.jsx("div",{className:"mg-badge-celebration-list",children:bn.badges.map((vt,yt)=>n.jsx("div",{className:"mg-badge-celebration-item",children:vt.type==="pb_target"?`${vt.exercise}  ${vt.targetWeight}kg`:vt.label},yt))}),n.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const Wg=60,E6={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},C6=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],Hg=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function kf(r,e,t){const i=r.baseReps?r.baseReps+(e-1)*(t.repProg||0):void 0,o=r.baseTime?r.baseTime+(e-1)*(t.timeProg||0):void 0;return{sets:r.sets,reps:i,time:o}}const C2={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function A6(){const{currentUser:r,isClient:e,clientData:t,loading:i}=Bs(),{isDark:o,toggleTheme:c,accent:u}=ja(),h=hs(),m=di(),[b,k]=C.useState("loading"),[S,E]=C.useState(null),F=C.useRef(!1),[L,V]=C.useState(null),[P,ee]=C.useState(1),[$,le]=C.useState(0),[X,Te]=C.useState(0),[Re,B]=C.useState(0),[O,z]=C.useState([]),[Y,G]=C.useState(""),[se,H]=C.useState(""),[Le,Oe]=C.useState(!1),[ne,be]=C.useState(0),me=C.useRef(null),[Ae,He]=C.useState({}),[Q,we]=C.useState(!1),Ne=C.useRef(null),[je,ce]=C.useState(null),[Ee,ue]=C.useState([]);C.useEffect(()=>{window.scrollTo(0,0)},[b]);const[xe,Fe]=C.useState(null),ot=C.useCallback((ze,Ze="info")=>{Fe({message:ze,type:Ze}),setTimeout(()=>Fe(null),4e3)},[]),Ue=C.useRef(null),_e=()=>(Ue.current||(Ue.current=new(window.AudioContext||window.webkitAudioContext)),Ue.current),Ke=()=>{try{const ze=_e(),Ze=ze.createOscillator(),gt=ze.createGain();Ze.connect(gt),gt.connect(ze.destination),Ze.frequency.value=1200,gt.gain.value=.4,Ze.start(ze.currentTime),Ze.stop(ze.currentTime+.3)}catch{}};C.useEffect(()=>{!i&&(!r||!e)&&h("/")},[r,e,i,h]),C.useEffect(()=>{if(!t)return;(async()=>{try{const Ze=Mt(Je,"clientProgrammes",t.id),gt=await vs(Ze);gt.exists()?(V(gt.data()),k("dashboard")):k("browse")}catch(Ze){console.error("Error loading programme:",Ze),k("browse")}})()},[t]),C.useEffect(()=>{if(F.current||b==="loading")return;const ze=m.state?.templateId;if(!ze)return;const Ze=Hg.find(gt=>gt.id===ze);Ze&&(F.current=!0,E(Ze),k("overview"))},[b,m.state]),C.useEffect(()=>{if(!Le||ne<=0){Le&&ne<=0&&(Oe(!1),Ke());return}return me.current=setTimeout(()=>be(ze=>ze-1),1e3),()=>clearTimeout(me.current)},[Le,ne]);const ve=async ze=>{if(t)try{await Cs(Mt(Je,"clientProgrammes",t.id),ze),V(ze)}catch(Ze){console.error("Error saving programme:",Ze),ot("Failed to save. Check Firestore rules for clientProgrammes.","error")}},bt=async ze=>{const Ze={templateId:ze.id,startDate:Et.now(),completedSessions:{}};await ve(Ze),k("dashboard")},ht=async()=>{if(t)try{await xa(Mt(Je,"clientProgrammes",t.id)),V(null),k("browse")}catch(ze){console.error("Error quitting programme:",ze)}},Ye=()=>L?Hg.find(ze=>ze.id===L.templateId):null,Ot=()=>{if(!L)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const ze=L.completedSessions||{},Ze=Object.keys(ze).length,gt=Ye();if(!gt)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const Lt=gt.duration*gt.daysPerWeek,Bt=Math.min(Math.floor(Ze/gt.daysPerWeek)+1,gt.duration),Ct=Ze-(Bt-1)*gt.daysPerWeek;for(let Dt=1;Dt<=gt.duration;Dt++)for(let St=0;St<gt.daysPerWeek;St++){const wt=`w${Dt}d${St}`;if(!ze[wt])return{currentWeek:Dt,completedThisWeek:Ct,nextDay:St,nextWeek:Dt,totalCompleted:Ze,totalSessions:Lt}}return{currentWeek:gt.duration,completedThisWeek:gt.daysPerWeek,nextDay:-1,totalCompleted:Ze,totalSessions:Lt,complete:!0}},jt=(ze,Ze,gt)=>{if(!L||ze<=1)return null;const Lt=`w${ze-1}d${Ze}`,Bt=L.completedSessions?.[Lt];if(!Bt)return null;const Ct=Bt.exercises?.find(Dt=>Dt.name===gt);return Ct?.sets?.length?Ct.sets[Ct.sets.length-1]:null},te=(ze,Ze)=>{const gt=Ye();if(!gt)return;ee(ze),le(Ze),Te(0),B(0),z([]),H(""),Oe(!1),be(0),we(!1),He({});const Lt=gt.days[Ze],Bt=Lt.exercises.map(wt=>{const Kt=kf(wt,ze,gt);return{name:wt.name,type:wt.type,pbKey:wt.pbKey,targetSets:Kt.sets,targetReps:Kt.reps,targetTime:Kt.time,sets:[]}});z(Bt);const Ct=Lt.exercises[0],Dt=jt(ze,Ze,Ct.name);Dt?.weight&&Ct.type==="weighted"?G(String(Dt.weight)):G(""),(async()=>{const wt={};for(const Kt of Lt.exercises)if(Kt.storagePath)try{const bn=_d(kd,Kt.storagePath),un=await Ff(bn);wt[Kt.name]={url:un,isGif:/\.gif$/i.test(Kt.storagePath)}}catch(bn){console.warn(`Video not found for ${Kt.name}:`,bn)}He(wt)})(),k("session")},it=async()=>{Ye();const ze=O[X];if(!ze)return;let Ze={};if(ze.type==="weighted"){const Bt=parseFloat(Y)||0,Ct=parseInt(se)||0;if(Ct===0){ot("Enter your reps","error");return}Ze={weight:Bt,reps:Ct}}else if(ze.type==="reps"){const Bt=parseInt(se)||0;if(Bt===0){ot("Enter your reps","error");return}Ze={reps:Bt}}else if(ze.type==="timed"){const Bt=ze.targetTime-ne;Ze={time:Math.max(Bt,1)}}const gt=[...O];gt[X]={...ze,sets:[...ze.sets,Ze]},z(gt),ze.type==="weighted"&&Ze.weight>0&&await mt(ze.name,Ze.weight,Ze.reps);const Lt=ze.sets.length+1;if(Lt<ze.targetSets)B(Lt),G(Ze.weight?String(Ze.weight):""),H(""),Oe(!1),be(0);else if(X+1<O.length){const Bt=X+1;Te(Bt),B(0),we(!1);const Dt=Ye()?.days[$]?.exercises[Bt],St=jt(P,$,Dt?.name);St?.weight&&Dt?.type==="weighted"?G(String(St.weight)):G(""),H(""),Oe(!1),be(0)}else await kt(gt)},kt=async ze=>{if(!L||!t)return;const Ze=`w${P}d${$}`,gt={...L.completedSessions,[Ze]:{completedAt:new Date().toISOString(),exercises:ze.map(Ct=>({name:Ct.name,type:Ct.type,sets:Ct.sets}))}},Lt={...L,completedSessions:gt};await ve(Lt);const Bt=ze.reduce((Ct,Dt)=>Ct+Dt.sets.reduce((St,wt)=>St+(wt.weight||0)*(wt.reps||0),0),0);Bt>0&&await Rt(Bt);try{const Ct=Ye();await ai(en(Je,"workoutLogs"),{clientId:t.id,type:"programme",programmeId:Ct?.id,programmeName:Ct?.name,week:P,day:$+1,exerciseCount:ze.length,duration:Math.round(ze.reduce((Dt,St)=>Dt+St.sets.length*1.5,0)),volume:Math.round(Bt),completedAt:Et.now()})}catch(Ct){console.error("Error saving workout log:",Ct)}Ee.length>0&&(ce({badges:[...Ee]}),ue([])),k("sessionComplete")},Rt=async ze=>{if(t)try{const Ze=await vs(Mt(Je,"coreBuddyAchievements",t.id)),gt=Ze.exists()?Ze.data():{clientId:t.id,badges:[],totalVolume:0},Lt=gt.totalVolume||0,Bt=Lt+ze,Ct=[];C6.forEach(St=>{Bt>=St.threshold&&Lt<St.threshold&&(gt.badges.some(Kt=>Kt.type==="volume_milestone"&&Kt.milestone===St.threshold)||Ct.push({type:"volume_milestone",milestone:St.threshold,label:St.label,achievedAt:Et.now()}))});const Dt=[...gt.badges,...Ct];await Cs(Mt(Je,"coreBuddyAchievements",t.id),{clientId:t.id,badges:Dt,totalVolume:Math.round(Bt),updatedAt:Et.now()}),Ct.length>0&&ue(St=>[...St,...Ct])}catch(Ze){console.error("Error updating volume:",Ze)}},mt=async(ze,Ze,gt)=>{if(t)try{const Lt=t.id,Bt=await vs(Mt(Je,"coreBuddyPBs",Lt)),Dt=(Bt.exists()?Bt.data():null)?.exercises||{},St=Dt[ze];let wt=!1;if(St?(Ze>(St.weight||0)||Ze===(St.weight||0)&&gt>(St.reps||0))&&(wt=!0):wt=!0,wt){const Kt={...Dt,[ze]:{weight:Ze,reps:gt,achievedAt:Et.now()}};await Cs(Mt(Je,"coreBuddyPBs",Lt),{clientId:t.id,exercises:Kt,updatedAt:Et.now()}),ot(`New PB! ${Ze}kg  ${gt} reps`,"success"),Ke(),await Ht(ze,Ze)}}catch(Lt){console.error("Error checking PB:",Lt)}},Ht=async(ze,Ze)=>{if(t)try{const gt=await vs(Mt(Je,"coreBuddyTargets",t.id));if(!gt.exists())return;const Bt=(gt.data().targets||{})[ze];if(!Bt||Ze<Bt.targetWeight)return;const Ct=await vs(Mt(Je,"coreBuddyAchievements",t.id)),Dt=Ct.exists()?Ct.data():{clientId:t.id,badges:[],totalVolume:0};if(Dt.badges.some(bn=>bn.type==="pb_target"&&bn.exercise===ze&&bn.targetWeight===Bt.targetWeight))return;const wt={type:"pb_target",exercise:ze,group:E6[ze]||"push",targetWeight:Bt.targetWeight,achievedAt:Et.now()},Kt=[...Dt.badges,wt];await Cs(Mt(Je,"coreBuddyAchievements",t.id),{...Dt,badges:Kt,updatedAt:Et.now()}),ue(bn=>[...bn,wt])}catch(gt){console.error("Error checking target badge:",gt)}},Zt=xe&&n.jsxs("div",{className:`toast-notification ${xe.type}`,children:[xe.type==="success"&&n.jsx("span",{children:" "}),xe.message]}),Qt=ze=>n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:c,"aria-label":"Toggle theme",children:o?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(i||b==="loading")return n.jsx("div",{className:"cb-loading",children:n.jsx("div",{className:"cb-loading-spinner"})});if(b==="browse")return n.jsxs("div",{className:"pg-page","data-theme":o?"dark":"light","data-accent":u,children:[Qt(),n.jsxs("main",{className:"pg-main",children:[n.jsx("button",{className:"nut-back-btn",onClick:()=>h("/client/core-buddy/workouts"),children:" Back"}),n.jsx("p",{className:"pg-browse-intro",children:"Choose a programme and start your journey"}),n.jsx("div",{className:"pg-browse-grid",children:Hg.map((ze,Ze)=>n.jsxs("button",{className:"pg-browse-card",onClick:()=>{E(ze),k("overview")},style:{animationDelay:`${Ze*.06}s`},children:[n.jsxs("div",{className:"pg-browse-card-top",children:[n.jsx("svg",{className:"pg-browse-icon",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:C2[ze.focus]})}),n.jsxs("span",{className:"pg-browse-duration",children:[ze.duration," WK"]})]}),n.jsx("h3",{className:"pg-browse-name",children:ze.name}),n.jsx("span",{className:"pg-browse-level",children:ze.level}),n.jsx("p",{className:"pg-browse-desc",children:ze.description}),n.jsxs("div",{className:"pg-browse-meta",children:[n.jsxs("span",{children:[ze.daysPerWeek," per week"]}),n.jsxs("span",{children:[ze.days[0].exercises.length," exercises"]})]})]},ze.id))})]}),n.jsx(So,{active:"workouts"}),Zt]});if(b==="overview"&&S){const ze=S;return n.jsxs("div",{className:"pg-page","data-theme":o?"dark":"light","data-accent":u,children:[Qt(ze.name),n.jsxs("main",{className:"pg-main",children:[n.jsx("button",{className:"nut-back-btn",onClick:()=>k("browse"),children:" Back"}),n.jsxs("div",{className:"pg-overview-hero",children:[n.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:C2[ze.focus]})}),n.jsx("h2",{className:"pg-overview-name",children:ze.name}),n.jsx("p",{className:"pg-overview-desc",children:ze.description}),n.jsxs("div",{className:"pg-overview-stats",children:[n.jsxs("div",{className:"pg-ov-stat",children:[n.jsx("span",{className:"pg-ov-stat-num",children:ze.duration}),n.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),n.jsxs("div",{className:"pg-ov-stat",children:[n.jsx("span",{className:"pg-ov-stat-num",children:ze.daysPerWeek}),n.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),n.jsxs("div",{className:"pg-ov-stat",children:[n.jsx("span",{className:"pg-ov-stat-num",children:ze.duration*ze.daysPerWeek}),n.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),n.jsx("div",{className:"pg-overview-days",children:ze.days.map((Ze,gt)=>n.jsxs("div",{className:"pg-day-card",children:[n.jsxs("div",{className:"pg-day-header",children:[n.jsx("span",{className:"pg-day-name",children:Ze.name}),n.jsx("span",{className:"pg-day-label",children:Ze.label})]}),n.jsx("div",{className:"pg-day-exercises",children:Ze.exercises.map((Lt,Bt)=>{const Ct=kf(Lt,1,ze);return n.jsxs("div",{className:"pg-day-ex",children:[n.jsx("span",{className:"pg-day-ex-name",children:Lt.name}),n.jsx("span",{className:"pg-day-ex-target",children:Lt.type==="timed"?`${Ct.sets}${Ct.time}s`:`${Ct.sets}${Ct.reps}`}),n.jsx("span",{className:`pg-day-ex-badge pg-badge-${Lt.type}`,children:Lt.type==="weighted"?"WT":Lt.type==="timed"?"TMR":"BW"})]},Bt)})})]},gt))}),n.jsxs("div",{className:"pg-overview-note",children:[n.jsx("strong",{children:"Progressive Overload:"})," +",ze.repProg," reps/week",ze.timeProg?`, +${ze.timeProg}s/week for timed`:""]}),n.jsx("button",{className:"pg-start-btn",onClick:()=>bt(ze),children:"Start Programme"})]}),Zt]})}if(b==="dashboard"){const ze=Ye();if(!ze)return k("browse"),null;const Ze=Ot(),gt=L?.completedSessions||{},Lt=Ze.totalSessions?Math.round(Ze.totalCompleted/Ze.totalSessions*100):0,Bt=Math.round(Ze.totalCompleted/(Ze.totalSessions||1)*Wg);return n.jsxs("div",{className:"pg-page","data-theme":o?"dark":"light","data-accent":u,children:[Qt(),n.jsxs("main",{className:"pg-main",children:[n.jsx("button",{className:"nut-back-btn",onClick:()=>h("/client/core-buddy/workouts"),children:" Back"}),n.jsxs("div",{className:"pg-dash-hero",children:[n.jsxs("div",{className:"pg-dash-ring-wrap",children:[n.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:[...Array(Wg)].map((Ct,Dt)=>{const St=(Dt*6-90)*(Math.PI/180),wt=100+78*Math.cos(St),Kt=100+78*Math.sin(St),bn=100+94*Math.cos(St),un=100+94*Math.sin(St);return n.jsx("line",{x1:wt,y1:Kt,x2:bn,y2:un,className:Dt<Bt?"pg-tick-filled":"pg-tick-empty",strokeWidth:Dt%5===0?"3":"2"},Dt)})}),n.jsx("img",{src:"/Logo.PNG",alt:"",className:"pg-dash-ring-logo"})]}),n.jsx("h2",{className:"pg-dash-name",children:ze.name}),n.jsxs("div",{className:"pg-dash-progress-text",children:[n.jsxs("span",{className:"pg-dash-pct",children:[Lt,"%"]}),n.jsxs("span",{className:"pg-dash-week",children:["Week ",Ze.currentWeek," of ",ze.duration]})]})]}),n.jsx("div",{className:"pg-weeks",children:Array.from({length:ze.duration},(Ct,Dt)=>{const St=Dt+1;return n.jsxs("div",{className:`pg-week-row${St===Ze.currentWeek?" pg-week-current":""}`,children:[n.jsxs("span",{className:"pg-week-label",children:["W",St]}),n.jsx("div",{className:"pg-week-days",children:ze.days.map((wt,Kt)=>{const bn=`w${St}d${Kt}`,un=!!gt[bn],Pn=!Ze.complete&&St===Ze.nextWeek&&Kt===Ze.nextDay;return n.jsx("button",{className:`pg-day-dot${un?" done":""}${Pn?" next":""}`,disabled:un,onClick:()=>{Pn&&te(St,Kt)},children:un?n.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:n.jsx("path",{d:"M20 6L9 17l-5-5"})}):n.jsx("span",{children:wt.name.replace("Day ","")})},Kt)})})]},Dt)})}),!Ze.complete&&Ze.nextDay>=0&&n.jsxs("div",{className:"pg-next-session",children:[n.jsx("h3",{children:"Next Session"}),n.jsxs("p",{className:"pg-next-info",children:["Week ",Ze.nextWeek,"  ",ze.days[Ze.nextDay].name,": ",ze.days[Ze.nextDay].label]}),n.jsx("div",{className:"pg-next-exercises",children:ze.days[Ze.nextDay].exercises.map((Ct,Dt)=>{const St=kf(Ct,Ze.nextWeek,ze);return n.jsxs("div",{className:"pg-next-ex",children:[n.jsx("span",{className:"pg-next-ex-name",children:Ct.name}),n.jsx("span",{className:"pg-next-ex-target",children:Ct.type==="timed"?`${St.sets}${St.time}s`:`${St.sets}${St.reps}`})]},Dt)})}),n.jsx("button",{className:"pg-start-btn",onClick:()=>te(Ze.nextWeek,Ze.nextDay),children:"Start Session"})]}),Ze.complete&&n.jsxs("div",{className:"pg-complete-msg",children:[n.jsx("h3",{children:"Programme Complete! "}),n.jsxs("p",{children:["You finished all ",Ze.totalSessions," sessions."]}),n.jsx("button",{className:"pg-start-btn",onClick:ht,children:"Choose New Programme"})]}),n.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&ht()},children:"Quit Programme"})]}),n.jsx(So,{active:"workouts"}),Zt]})}if(b==="session"){const ze=Ye();if(!ze)return null;const Ze=ze.days[$],gt=Ze.exercises[X],Lt=kf(gt,P,ze),Bt=O[X],Ct=Bt?.sets?.length||0,Dt=Ze.exercises.length,St=(X+Ct/Lt.sets)/Dt,wt=Ae[gt.name],Kt=jt(P,$,gt.name);gt.type==="timed"&&ne===0&&!Le&&Ct===Re&&setTimeout(()=>be(Lt.time),0);const bn=()=>{wt?.isGif?we(!Q):Ne.current&&(Q?Ne.current.pause():Ne.current.play(),we(!Q))};return n.jsxs("div",{className:"pg-page pg-page-session","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("div",{className:"pg-session-progress",children:n.jsx("div",{className:"pg-session-progress-fill",style:{width:`${St*100}%`}})}),n.jsxs("div",{className:"pg-session-header",children:[n.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&k("dashboard")},children:n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),n.jsxs("div",{className:"pg-session-title",children:[n.jsxs("span",{className:"pg-session-counter",children:[X+1," / ",Dt]}),n.jsxs("span",{className:"pg-session-week",children:["Week ",P,"  ",Ze.name]})]})]}),wt&&n.jsxs("div",{className:"pg-video-container",onClick:bn,children:[wt.isGif?n.jsx("img",{className:"pg-video",src:wt.url,alt:gt.name}):n.jsx("video",{ref:Ne,className:"pg-video",src:wt.url,loop:!0,muted:!0,playsInline:!0},gt.name),!Q&&n.jsxs("div",{className:"pg-video-overlay",children:[n.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:n.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),n.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),n.jsx("div",{className:"pg-spotify",children:n.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),n.jsxs("div",{className:"pg-exercise-card",children:[n.jsx("h2",{className:"pg-ex-name",children:gt.name}),n.jsx("span",{className:`pg-ex-type-badge pg-badge-${gt.type}`,children:gt.type==="weighted"?"Weight + Reps":gt.type==="timed"?"Timed":"Reps Only"}),gt.type==="weighted"&&Kt&&n.jsxs("div",{className:"pg-last-week",children:[n.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),n.jsxs("span",{className:"pg-last-week-value",children:[Kt.weight,"kg x ",Kt.reps," reps"]})]}),n.jsxs("div",{className:"pg-ex-set-info",children:[n.jsxs("span",{className:"pg-ex-set-num",children:["Set ",Ct+1," of ",Lt.sets]}),n.jsxs("span",{className:"pg-ex-target",children:["Target: ",gt.type==="timed"?`${Lt.time}s hold`:`${Lt.reps} reps`]})]}),gt.type==="weighted"&&n.jsxs("div",{className:"pg-input-area",children:[n.jsxs("div",{className:"pg-input-group",children:[n.jsx("label",{children:"Weight (kg)"}),n.jsx("input",{type:"number",inputMode:"decimal",value:Y,onChange:un=>G(un.target.value),placeholder:"0",className:"pg-input"})]}),n.jsxs("div",{className:"pg-input-group",children:[n.jsx("label",{children:"Reps"}),n.jsx("input",{type:"number",inputMode:"numeric",value:se,onChange:un=>H(un.target.value),placeholder:String(Lt.reps),className:"pg-input"})]})]}),gt.type==="reps"&&n.jsx("div",{className:"pg-input-area",children:n.jsxs("div",{className:"pg-input-group pg-input-single",children:[n.jsx("label",{children:"Reps"}),n.jsx("input",{type:"number",inputMode:"numeric",value:se,onChange:un=>H(un.target.value),placeholder:String(Lt.reps),className:"pg-input"})]})}),gt.type==="timed"&&n.jsxs("div",{className:"pg-timer-area",children:[n.jsx("div",{className:"pg-timer-display",children:n.jsxs("span",{className:"pg-timer-value",children:[ne,"s"]})}),Le?n.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>Oe(!1),children:"Stop"}):n.jsx("button",{className:"pg-timer-btn",onClick:()=>{ne===0&&be(Lt.time),Oe(!0)},children:ne<Lt.time&&ne>0?"Resume":"Start Timer"})]}),n.jsx("button",{className:"pg-log-set-btn",onClick:it,disabled:gt.type==="timed"&&Le,children:Ct+1<Lt.sets?"Log Set":X+1<Dt?"Log Set  Next Exercise":"Log Set  Complete"}),Bt?.sets?.length>0&&n.jsx("div",{className:"pg-completed-sets",children:Bt.sets.map((un,Pn)=>n.jsxs("div",{className:"pg-completed-set",children:[n.jsx("span",{className:"pg-completed-set-check",children:""}),n.jsxs("span",{children:["Set ",Pn+1,": ",un.weight!==void 0?`${un.weight}kg  ${un.reps}`:un.time!==void 0?`${un.time}s`:`${un.reps} reps`]})]},Pn))})]}),Zt]})}if(b==="sessionComplete"){const Ze=Ye()?.days[$],gt=O.reduce((Bt,Ct)=>Bt+Ct.sets.length,0),Lt=O.reduce((Bt,Ct)=>Bt+Ct.sets.reduce((Dt,St)=>Dt+(St.weight||0)*(St.reps||0),0),0);return n.jsxs("div",{className:"pg-page pg-page-center","data-theme":o?"dark":"light","data-accent":u,children:[n.jsxs("div",{className:"pg-session-done",children:[n.jsxs("div",{className:"pg-done-ring",children:[n.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:[...Array(Wg)].map((Bt,Ct)=>{const Dt=(Ct*6-90)*(Math.PI/180),St=100+78*Math.cos(Dt),wt=100+78*Math.sin(Dt),Kt=100+94*Math.cos(Dt),bn=100+94*Math.sin(Dt);return n.jsx("line",{x1:St,y1:wt,x2:Kt,y2:bn,className:"pg-tick-complete",strokeWidth:Ct%5===0?"3.5":"2",style:{animationDelay:`${Ct*.02}s`}},Ct)})}),n.jsx("div",{className:"pg-done-center",children:n.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:n.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),n.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),n.jsxs("p",{className:"pg-done-subtitle",children:["Week ",P,"  ",Ze?.name,": ",Ze?.label]}),n.jsxs("div",{className:"pg-done-stats",children:[n.jsxs("div",{className:"pg-done-stat",children:[n.jsx("span",{className:"pg-done-stat-num",children:O.length}),n.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),n.jsxs("div",{className:"pg-done-stat",children:[n.jsx("span",{className:"pg-done-stat-num",children:gt}),n.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),Lt>0&&n.jsxs("div",{className:"pg-done-stat",children:[n.jsx("span",{className:"pg-done-stat-num",children:Math.round(Lt).toLocaleString()}),n.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),n.jsx("button",{className:"pg-start-btn",onClick:()=>k("dashboard"),children:"Back to Programme"})]}),je&&n.jsx("div",{className:"pg-badge-celebration",onClick:()=>ce(null),children:n.jsxs("div",{className:"pg-badge-celebration-card",onClick:Bt=>Bt.stopPropagation(),children:[n.jsx("div",{className:"pg-badge-celebration-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),n.jsx("h3",{className:"pg-badge-celebration-title",children:je.badges.length===1?"Badge Earned!":`${je.badges.length} Badges Earned!`}),n.jsx("div",{className:"pg-badge-celebration-list",children:je.badges.map((Bt,Ct)=>n.jsx("div",{className:"pg-badge-celebration-item",children:Bt.type==="pb_target"?`${Bt.exercise}  ${Bt.targetWeight}kg`:Bt.label},Ct))}),n.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>ce(null),children:"Tap to dismiss"})]})}),Zt]})}return null}const R6={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},M6={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},$g=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function D6(r){return R6[r]||"push"}function I6(r){return r>=1e6?`${(r/1e6).toFixed(1)}M`:r>=1e3?`${(r/1e3).toFixed(1)}T`:`${Math.round(r)}`}function P6(r){return r>=1e6?"million kg":r>=1e3?"tonnes":"kg"}function O6(){const{currentUser:r,isClient:e,clientData:t,loading:i}=Bs(),{isDark:o,toggleTheme:c,accent:u}=ja(),h=hs(),[m,b]=C.useState(!0),[k,S]=C.useState(null),[E,F]=C.useState({});C.useEffect(()=>{!i&&(!r||!e)&&h("/")},[r,e,i,h]),C.useEffect(()=>{if(!t)return;(async()=>{try{const[z,Y]=await Promise.all([vs(Mt(Je,"coreBuddyAchievements",t.id)),vs(Mt(Je,"coreBuddyPBs",t.id))]);z.exists()&&S(z.data()),Y.exists()&&F(Y.data().exercises||{})}catch(z){console.error("Error loading achievements:",z)}b(!1)})()},[t]);const L=k?.badges||[],V=k?.totalVolume||0,P=L.filter(O=>O.type==="pb_target"),ee=L.filter(O=>O.type==="volume_milestone"),$={push:[],pull:[],lower:[],core:[]};P.forEach(O=>{const z=O.group||D6(O.exercise);$[z]&&$[z].push(O)});const le=$g.find(O=>V<O.threshold),X=$g.filter(O=>V>=O.threshold).pop()?.threshold||0,Te=le?(V-X)/(le.threshold-X):1;if(i||m)return n.jsxs("div",{className:"ach-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("header",{className:"cb-header",children:n.jsxs("div",{className:"cb-header-left",children:[n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),n.jsx("span",{className:"cb-header-title",children:"Achievements"})]})}),n.jsxs("main",{className:"ach-main",children:[n.jsx("div",{className:"skeleton",style:{width:180,height:28,marginBottom:20,borderRadius:8}}),n.jsx("div",{className:"skeleton",style:{height:200,borderRadius:16}})]})]});const Re=L.length,B=Re>0||V>0;return n.jsxs("div",{className:"ach-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:c,"aria-label":"Toggle theme",children:o?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),n.jsxs("main",{className:"ach-main",children:[n.jsx("button",{className:"nut-back-btn",onClick:()=>h("/client/core-buddy"),children:" Back"}),n.jsxs("div",{className:"ach-stats-banner",children:[n.jsxs("div",{className:"ach-stat-item",children:[n.jsx("span",{className:"ach-stat-num",children:Re}),n.jsx("span",{className:"ach-stat-label",children:Re===1?"Badge":"Badges"})]}),n.jsx("div",{className:"ach-stat-divider"}),n.jsxs("div",{className:"ach-stat-item",children:[n.jsx("span",{className:"ach-stat-num",children:I6(V)}),n.jsxs("span",{className:"ach-stat-label",children:[P6(V)," lifted"]})]}),n.jsx("div",{className:"ach-stat-divider"}),n.jsxs("div",{className:"ach-stat-item",children:[n.jsx("span",{className:"ach-stat-num",children:Object.keys(E).length}),n.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!B&&n.jsxs("div",{className:"ach-empty",children:[n.jsx("div",{className:"ach-empty-icon",children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[n.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),n.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),n.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),n.jsx("h4",{children:"No achievements yet"}),n.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),n.jsxs("div",{className:"ach-section",children:[n.jsxs("h3",{className:"ach-section-title",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:n.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),n.jsxs("div",{className:"ach-volume-hero",children:[n.jsxs("div",{className:"ach-volume-ring",children:[n.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((O,z)=>{const Y=(z*6-90)*(Math.PI/180),G=100+78*Math.cos(Y),se=100+78*Math.sin(Y),H=100+94*Math.cos(Y),Le=100+94*Math.sin(Y),Oe=z<Math.round(Te*60);return n.jsx("line",{x1:G,y1:se,x2:H,y2:Le,className:Oe?"ach-tick-filled":"ach-tick-empty",strokeWidth:z%5===0?"3":"2"},z)})}),n.jsxs("div",{className:"ach-volume-center",children:[n.jsx("span",{className:"ach-volume-number",children:Math.round(V).toLocaleString()}),n.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),le&&n.jsxs("div",{className:"ach-volume-next",children:["Next: ",n.jsx("strong",{children:le.label})," (",(le.threshold-V).toLocaleString(),"kg to go)"]})]}),n.jsx("div",{className:"ach-milestone-shelf",children:$g.map((O,z)=>{const Y=V>=O.threshold,G=ee.find(se=>se.milestone===O.threshold);return n.jsxs("div",{className:`ach-milestone ${Y?"unlocked":"locked"}`,children:[n.jsx("div",{className:"ach-milestone-hex",children:n.jsx("span",{className:"ach-milestone-icon",children:O.icon})}),n.jsx("span",{className:"ach-milestone-label",children:O.label}),G?.achievedAt&&n.jsx("span",{className:"ach-milestone-date",children:(G.achievedAt.toDate?G.achievedAt.toDate():new Date(G.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},z)})})]}),n.jsxs("div",{className:"ach-section",children:[n.jsxs("h3",{className:"ach-section-title",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),P.length===0?n.jsx("div",{className:"ach-pb-empty",children:n.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",n.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries($).map(([O,z])=>{if(z.length===0)return null;const Y=M6[O];return n.jsxs("div",{className:"ach-group",children:[n.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:Y.color},children:[n.jsx("span",{className:"ach-group-label",style:{color:Y.color},children:Y.label}),n.jsx("span",{className:"ach-group-count",children:z.length})]}),n.jsx("div",{className:"ach-badge-grid",children:z.map((G,se)=>n.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${se*.06}s`,"--group-color":Y.color},children:[n.jsx("div",{className:"ach-badge-hex",style:{borderColor:Y.color,boxShadow:`0 0 12px ${Y.color}33`},children:n.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:Y.color,strokeWidth:"2",strokeLinecap:"round",children:n.jsx("path",{d:Y.icon})})}),n.jsxs("div",{className:"ach-badge-info",children:[n.jsx("span",{className:"ach-badge-exercise",children:G.exercise}),n.jsxs("span",{className:"ach-badge-value",style:{color:Y.color},children:[G.targetWeight,"kg"]}),G.achievedAt&&n.jsx("span",{className:"ach-badge-date",children:(G.achievedAt.toDate?G.achievedAt.toDate():new Date(G.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},se))})]},O)})]})]}),n.jsx(So,{active:"home"})]})}const Nf=60,Sf=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function L6(r){const e=new Date(r),t=e.getDay(),i=t===0?-6:1-t;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Gg(r){return r.toISOString().split("T")[0]}function B6(r){return Array.from({length:7},(e,t)=>{const i=new Date(r);return i.setDate(r.getDate()+t),i})}function V6(){const{currentUser:r,isClient:e,clientData:t,loading:i}=Bs(),{isDark:o,toggleTheme:c,accent:u}=ja(),h=hs(),[m,b]=C.useState({}),[k,S]=C.useState(!0),[E,F]=C.useState(!1),[L,V]=C.useState(0),[P,ee]=C.useState(null),[$,le]=C.useState(null),[X,Te]=C.useState(!1),Re=C.useRef([]),B=C.useRef([]),O=C.useCallback((Ne,je="info")=>{ee({message:Ne,type:je}),setTimeout(()=>ee(null),3e3)},[]),z=new Date,Y=Gg(z),G=L6(z),se=B6(G),H=["M","T","W","T","F","S","S"];C.useEffect(()=>{!i&&(!r||!e)&&h("/")},[r,e,i,h]),C.useEffect(()=>{if(!r||!t)return;(async()=>{try{const je=en(Je,"habitLogs"),ce=ds(je,Hn("clientId","==",t.id)),Ee=await yn(ce),ue={};Ee.docs.forEach(ot=>{const Ue=ot.data();ue[Ue.date]={...Ue,_id:ot.id}}),b(ue);let xe=0;const Fe=new Date(z);for(;;){const ot=Gg(Fe),Ue=ue[ot];if(Ue)if(Object.values(Ue.habits||{}).filter(Boolean).length>=3)xe++,Fe.setDate(Fe.getDate()-1);else break;else if(ot===Y)Fe.setDate(Fe.getDate()-1);else break}V(xe)}catch(je){console.error("Error loading habit logs:",je)}finally{S(!1)}})()},[r,t]);const Le=m[Y]||{habits:{}},Oe=async Ne=>{if(!r||E)return;const je=Le.habits?.[Ne]||!1;je||(Re.current=[...Array(10)].map((ce,Ee)=>{const ue=Ee/10*2*Math.PI,xe=18+Math.random()*20;return{tx:Math.cos(ue)*xe,ty:Math.sin(ue)*xe,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),le(Ne),setTimeout(()=>le(null),700)),F(!0);try{const ce=Le.habits||{},Ee={...ce,[Ne]:!ce[Ne]},ue=Le._id||`${t.id}_${Y}`;await Cs(Mt(Je,"habitLogs",ue),{clientId:t.id,date:Y,habits:Ee}),b(Fe=>({...Fe,[Y]:{clientId:t.id,date:Y,habits:Ee,_id:ue}})),Object.values(Ee).filter(Boolean).length===Sf.length&&!je&&(B.current=[...Array(50)].map((Fe,ot)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][ot%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{Te(!0),setTimeout(()=>Te(!1),3500)},500))}catch(ce){console.error("Error saving habit:",ce),O("Failed to save. Try again.","error")}finally{F(!1)}},ne=se.map(Ne=>{const je=Gg(Ne),ce=m[je],Ee=ce?Object.values(ce.habits||{}).filter(Boolean).length:0;return{date:Ne,dateStr:je,completed:Ee,total:Sf.length}}),be=ne.reduce((Ne,je)=>Ne+je.completed,0),me=ne.reduce((Ne,je)=>Ne+je.total,0),Ae=me>0?Math.round(be/me*100):0,He=Object.values(Le.habits||{}).filter(Boolean).length,Q=Math.round(He/Sf.length*100),we=Math.round(Q/100*Nf);return i||k?n.jsx("div",{className:"cbc-loading",children:n.jsx("div",{className:"cbc-loading-spinner"})}):n.jsxs("div",{className:"cbc-page","data-theme":o?"dark":"light","data-accent":u,children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:c,"aria-label":"Toggle theme",children:o?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),n.jsxs("main",{className:"cbc-main",children:[n.jsxs("div",{className:"cbc-ring-section",children:[n.jsxs("div",{className:"cbc-progress-ring",children:[n.jsx("svg",{viewBox:"0 0 200 200",children:[...Array(Nf)].map((Ne,je)=>{const ce=(je*6-90)*(Math.PI/180),Ee=100+78*Math.cos(ce),ue=100+78*Math.sin(ce),xe=100+94*Math.cos(ce),Fe=100+94*Math.sin(ce);return n.jsx("line",{x1:Ee,y1:ue,x2:xe,y2:Fe,className:je<we?"cbc-tick-filled":"cbc-tick-empty",strokeWidth:je%5===0?"3":"2",style:{transitionDelay:`${je*20}ms`}},je)})}),n.jsxs("div",{className:"cbc-ring-center",children:[n.jsxs("span",{className:"cbc-ring-pct",children:[Q,"%"]}),n.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),n.jsxs("div",{className:"cbc-streak",children:[n.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:n.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),n.jsx("span",{className:"cbc-streak-count",children:L}),n.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),n.jsxs("div",{className:"cbc-section",children:[n.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),n.jsx("div",{className:"cbc-habits",children:Sf.map(Ne=>{const je=Le.habits?.[Ne.key]||!1,ce=$===Ne.key;return n.jsxs("button",{className:`cbc-habit-btn cbc-habit-${Ne.key} ${je?"cbc-habit-done":""} ${ce?"cbc-habit-just-checked":""}`,onClick:()=>Oe(Ne.key),disabled:E,children:[n.jsx("div",{className:"cbc-habit-check",children:je?n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:n.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${ce?"cbc-check-animate":""}`})}):n.jsx("div",{className:"cbc-habit-circle"})}),ce&&n.jsx("div",{className:"cbc-particles",children:Re.current.map((Ee,ue)=>n.jsx("span",{className:"cbc-particle",style:{"--tx":`${Ee.tx}px`,"--ty":`${Ee.ty}px`,"--size":`${Ee.size}px`,animationDuration:`${Ee.duration}s`}},ue))}),n.jsx("div",{className:`cbc-habit-icon cbc-icon-${Ne.key}`,children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{d:Ne.icon})})}),n.jsx("span",{className:"cbc-habit-label",children:Ne.label})]},Ne.key)})})]}),n.jsxs("div",{className:"cbc-section",children:[n.jsx("h2",{className:"cbc-section-title",children:"This Week"}),n.jsx("div",{className:"cbc-week-grid",children:ne.map((Ne,je)=>{const ce=Ne.dateStr===Y,Ee=Ne.total>0?Ne.completed/Ne.total:0,ue=Math.round(Ee*Nf);return n.jsxs("div",{className:`cbc-day-ring ${ce?"cbc-day-today":""} ${Ne.completed>0?"cbc-day-active":""}`,children:[n.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(Nf)].map((xe,Fe)=>{const ot=(Fe*6-90)*(Math.PI/180),Ue=50+38*Math.cos(ot),_e=50+38*Math.sin(ot),Ke=50+46*Math.cos(ot),ve=50+46*Math.sin(ot);return n.jsx("line",{x1:Ue,y1:_e,x2:Ke,y2:ve,className:Fe<ue?"cbc-day-tick-filled":"cbc-day-tick-empty",strokeWidth:Fe%5===0?"3":"2"},Fe)})}),n.jsx("span",{className:"cbc-day-label",children:H[je]}),n.jsxs("span",{className:"cbc-day-count",children:[Ne.completed,"/",Ne.total]})]},je)})}),n.jsxs("div",{className:"cbc-week-summary",children:[n.jsx("div",{className:"cbc-week-summary-bar",children:n.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${Ae}%`}})}),n.jsxs("span",{className:"cbc-week-summary-text",children:[be," / ",me," habits this week (",Ae,"%)"]})]})]})]}),n.jsx(So,{active:"home"}),X&&n.jsxs("div",{className:"cbc-celebration",onClick:()=>Te(!1),children:[n.jsx("div",{className:"cbc-confetti-container",children:B.current.map((Ne,je)=>n.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${Ne.x}%`,"--delay":`${Ne.delay}s`,"--color":Ne.color,"--drift":`${Ne.drift}px`,"--spin":`${Ne.spin}deg`,"--duration":`${Ne.duration}s`,width:`${Ne.width}px`,height:`${Ne.height}px`}},je))}),n.jsxs("div",{className:"cbc-celebration-card",children:[n.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[n.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),n.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),n.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),n.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),P&&n.jsx("div",{className:`toast-notification ${P.type}`,children:P.message})]})}function A2(){const r=new Date,e=r.getDay(),t=e===0?-6:1-e,i=new Date(r);i.setDate(r.getDate()+t),i.setHours(0,0,0,0);const o=new Date(i);return o.setDate(i.getDate()+6),o.setHours(23,59,59,999),{start:i,end:o}}function U6(){const r=new Date,e=new Date(r.getFullYear(),r.getMonth(),1);e.setHours(0,0,0,0);const t=new Date(r.getFullYear(),r.getMonth()+1,0);return t.setHours(23,59,59,999),{start:e,end:t}}function Tf(r){return r.toISOString().split("T")[0]}function Ef(r){if(!r)return"?";const e=r.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function F6(r){if(r<60)return`${r}m`;const e=Math.floor(r/60),t=r%60;return t>0?`${e}h ${t}m`:`${e}h`}function z6(r){const e=new Date(r),t=e.getDay(),i=t===0?-6:1-t;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function q6(r){if(r.size===0)return 0;const t=z6(new Date);let i=0,o=new Date(t);const c=new Date(o);c.setDate(c.getDate()+6);let u=!1;r.forEach(h=>{const m=new Date(h);m>=o&&m<=c&&(u=!0)}),u||o.setDate(o.getDate()-7);for(let h=0;h<52;h++){const m=new Date(o),b=new Date(o);b.setDate(b.getDate()+6);let k=!1;if(r.forEach(S=>{const E=new Date(S);E>=m&&E<=b&&(k=!0)}),k)i++,o.setDate(o.getDate()-7);else break}return i}const R2=[{key:"workouts",label:"Workouts",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"minutes",label:"Minutes",icon:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.2 3.2.8-1.3-4.5-2.7V7z"},{key:"streak",label:"Streak",icon:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"}],Kg=["#FFD700","#A8B4C0","#CD7F32"];function W6(){const[r,e]=C.useState("workouts"),[t,i]=C.useState("week"),[o,c]=C.useState(!0),[u,h]=C.useState([]),[m,b]=C.useState(null),[k,S]=C.useState(!1),[E,F]=C.useState(!1),[L,V]=C.useState(null),{currentUser:P,isClient:ee,clientData:$,updateClientData:le,loading:X}=Bs(),{isDark:Te,toggleTheme:Re}=ja(),B=hs(),O=C.useCallback((me,Ae="info")=>{V({message:me,type:Ae}),setTimeout(()=>V(null),4e3)},[]);C.useEffect(()=>{!X&&(!P||!ee)&&B("/")},[P,ee,X,B]),C.useEffect(()=>{$&&b($.leaderboardOptIn===!0)},[$]),C.useEffect(()=>{!$||!m||G()},[$,m,r,t]);const z=async()=>{S(!0);try{await js(Mt(Je,"clients",$.id),{leaderboardOptIn:!0}),le({leaderboardOptIn:!0}),b(!0),O("You're on the leaderboard!","success")}catch(me){console.error("Error opting in:",me),O("Failed to join. Try again.","error")}finally{S(!1)}},Y=async()=>{S(!0),F(!1);try{await js(Mt(Je,"clients",$.id),{leaderboardOptIn:!1}),le({leaderboardOptIn:!1}),b(!1),h([]),O("You've left the leaderboard","info")}catch(me){console.error("Error opting out:",me),O("Failed to leave. Try again.","error")}finally{S(!1)}},G=async()=>{c(!0);try{const me=ds(en(Je,"clients"),Hn("leaderboardOptIn","==",!0)),He=(await yn(me)).docs.map(ht=>({id:ht.id,...ht.data()}));if(He.length===0){h([]),c(!1);return}let Q;if(r==="streak"){const ht=new Date,Ye=new Date(ht);Ye.setDate(Ye.getDate()-365),Ye.setHours(0,0,0,0),Q={start:Ye,end:ht}}else Q=t==="week"?A2():U6();const we=Tf(Q.start),Ne=Tf(Q.end),je=Et.fromDate(Q.start),ce=Et.fromDate(Q.end),Ee=ds(en(Je,"workoutLogs"),Hn("completedAt",">=",je),Hn("completedAt","<=",ce)),ue=await yn(Ee),xe=ds(en(Je,"circuitSessions"),Hn("date",">=",we),Hn("date","<=",Ne)),Fe=await yn(xe),ot=ds(en(Je,"sessions"),Hn("date",">=",we),Hn("date","<=",Ne)),Ue=await yn(ot),_e=new Set(He.map(ht=>ht.id)),Ke={};He.forEach(ht=>{Ke[ht.id]={id:ht.id,name:ht.name,workouts:0,minutes:0,workoutDates:new Set}}),ue.docs.forEach(ht=>{const Ye=ht.data();if(_e.has(Ye.clientId)&&(Ke[Ye.clientId].workouts++,Ke[Ye.clientId].minutes+=Ye.duration||0,Ye.completedAt)){const Ot=Ye.completedAt.toDate();Ke[Ye.clientId].workoutDates.add(Tf(Ot))}}),Fe.docs.forEach(ht=>{const Ye=ht.data();(Ye.slots||[]).forEach(Ot=>{Ot.attended&&Ot.memberId&&_e.has(Ot.memberId)&&(Ke[Ot.memberId].workouts++,Ke[Ot.memberId].minutes+=45,Ke[Ot.memberId].workoutDates.add(Ye.date))})});const ve=Tf(new Date);Ue.docs.forEach(ht=>{const Ye=ht.data();_e.has(Ye.clientId)&&Ye.date<=ve&&(Ke[Ye.clientId].workouts++,Ke[Ye.clientId].minutes+=Ye.duration||45,Ke[Ye.clientId].workoutDates.add(Ye.date))}),r==="streak"&&Object.values(Ke).forEach(ht=>{ht.streak=q6(ht.workoutDates)});let bt=Object.values(Ke);r==="workouts"?bt.sort((ht,Ye)=>Ye.workouts-ht.workouts||ht.name.localeCompare(Ye.name)):r==="minutes"?bt.sort((ht,Ye)=>Ye.minutes-ht.minutes||ht.name.localeCompare(Ye.name)):bt.sort((ht,Ye)=>Ye.streak-ht.streak||ht.name.localeCompare(Ye.name)),bt.forEach((ht,Ye)=>{ht.rank=Ye+1}),h(bt)}catch(me){console.error("Error fetching leaderboard:",me),O("Failed to load leaderboard","error")}finally{c(!1)}},se=me=>r==="workouts"?me.workouts:r==="minutes"?F6(me.minutes):me.streak,H=()=>{if(r==="streak")return"All Time";if(t==="week"){const{start:Ae,end:He}=A2();return`${Ae.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${He.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}`}return new Date().toLocaleDateString("en-GB",{month:"long",year:"numeric"})},Le=me=>me.id===$?.id,Oe=u.find(me=>me.id===$?.id);if(X)return n.jsx("div",{className:"lb-loading",children:n.jsx("div",{className:"lb-loading-spinner"})});if(!P||!ee||!$)return null;if(m===!1)return n.jsxs("div",{className:"lb-page","data-theme":Te?"dark":"light",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:Re,"aria-label":"Toggle theme",children:Te?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),n.jsx("main",{className:"lb-optin-main",children:n.jsxs("div",{className:"lb-optin-card",children:[n.jsx("div",{className:"lb-optin-trophy",children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[n.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),n.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),n.jsx("path",{d:"M4 22h16"}),n.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),n.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),n.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]})}),n.jsx("h2",{className:"lb-optin-title",children:"Join the Leaderboard"}),n.jsx("p",{className:"lb-optin-desc",children:"Compete with other Mind Core Fitness members"}),n.jsx("div",{className:"lb-optin-categories",children:R2.map(me=>n.jsxs("div",{className:"lb-optin-category",children:[n.jsx("div",{className:"lb-optin-category-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{d:me.icon})})}),n.jsxs("div",{className:"lb-optin-category-text",children:[n.jsx("span",{className:"lb-optin-category-name",children:me.label}),n.jsxs("span",{className:"lb-optin-category-desc",children:[me.key==="workouts"&&"Total workouts from all training types",me.key==="minutes"&&"Total active minutes across all sessions",me.key==="streak"&&"Consecutive weeks with at least one workout"]})]})]},me.key))}),n.jsx("button",{className:"lb-optin-btn",onClick:z,disabled:k,children:k?"Joining...":"Join the Leaderboard"}),n.jsx("p",{className:"lb-optin-note",children:"Your full name will be visible to other members"})]})})]});const ne=u.slice(0,3),be=u.slice(3);return n.jsxs("div",{className:"lb-page","data-theme":Te?"dark":"light",children:[n.jsx("header",{className:"client-header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("button",{className:"header-back-btn",onClick:()=>B("/client/core-buddy"),"aria-label":"Go back",children:n.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M15 18l-6-6 6-6"})})}),n.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"}),n.jsx("div",{className:"header-actions",children:n.jsx("button",{onClick:()=>F(!0),"aria-label":"Settings",children:n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"3"}),n.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})})]})}),n.jsxs("main",{className:"lb-main",children:[n.jsx("div",{className:"lb-tabs",children:R2.map(me=>n.jsxs("button",{className:`lb-tab ${r===me.key?"lb-tab-active":""}`,onClick:()=>e(me.key),children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{d:me.icon})}),n.jsx("span",{children:me.label})]},me.key))}),r!=="streak"&&n.jsx("div",{className:"lb-period-row",children:n.jsxs("div",{className:"lb-period-toggle",children:[n.jsx("button",{className:`lb-period-btn ${t==="week"?"lb-period-active":""}`,onClick:()=>i("week"),children:"This Week"}),n.jsx("button",{className:`lb-period-btn ${t==="month"?"lb-period-active":""}`,onClick:()=>i("month"),children:"This Month"})]})}),n.jsx("div",{className:"lb-period-label",children:H()}),o?n.jsx("div",{className:"lb-content-loading",children:n.jsx("div",{className:"lb-loading-spinner"})}):u.length===0?n.jsxs("div",{className:"lb-empty",children:[n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"lb-empty-icon",children:[n.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),n.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),n.jsx("path",{d:"M4 22h16"}),n.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),n.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),n.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),n.jsx("h3",{children:"No one here yet"}),n.jsx("p",{children:"Be the first to get a workout in!"})]}):n.jsxs(n.Fragment,{children:[ne.length>0&&n.jsxs("div",{className:"lb-podium",children:[n.jsx("div",{className:"lb-podium-place lb-podium-2nd",children:ne[1]?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`lb-podium-avatar ${Le(ne[1])?"lb-avatar-you":""}`,style:{borderColor:Kg[1]},children:Ef(ne[1].name)}),n.jsx("div",{className:"lb-podium-name",children:ne[1].name.split(" ")[0]}),n.jsx("div",{className:"lb-podium-stat",children:se(ne[1])}),n.jsx("div",{className:"lb-podium-bar lb-bar-2nd",children:n.jsx("span",{className:"lb-podium-rank",children:"2"})})]}):n.jsx("div",{className:"lb-podium-spacer"})}),n.jsxs("div",{className:"lb-podium-place lb-podium-1st",children:[n.jsx("div",{className:"lb-podium-crown",children:n.jsxs("svg",{viewBox:"0 0 24 24",fill:"#FFD700",stroke:"none",children:[n.jsx("path",{d:"M2.5 18.5l3-7 4 4 3-9 3 9 4-4 3 7z"}),n.jsx("rect",{x:"3",y:"18",width:"18",height:"2",rx:"1"})]})}),n.jsx("div",{className:`lb-podium-avatar lb-avatar-1st ${Le(ne[0])?"lb-avatar-you":""}`,style:{borderColor:Kg[0]},children:Ef(ne[0].name)}),n.jsx("div",{className:"lb-podium-name",children:ne[0].name.split(" ")[0]}),n.jsx("div",{className:"lb-podium-stat",children:se(ne[0])}),n.jsx("div",{className:"lb-podium-bar lb-bar-1st",children:n.jsx("span",{className:"lb-podium-rank",children:"1"})})]}),n.jsx("div",{className:"lb-podium-place lb-podium-3rd",children:ne[2]?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`lb-podium-avatar ${Le(ne[2])?"lb-avatar-you":""}`,style:{borderColor:Kg[2]},children:Ef(ne[2].name)}),n.jsx("div",{className:"lb-podium-name",children:ne[2].name.split(" ")[0]}),n.jsx("div",{className:"lb-podium-stat",children:se(ne[2])}),n.jsx("div",{className:"lb-podium-bar lb-bar-3rd",children:n.jsx("span",{className:"lb-podium-rank",children:"3"})})]}):n.jsx("div",{className:"lb-podium-spacer"})})]}),be.length>0&&n.jsx("div",{className:"lb-rankings",children:be.map((me,Ae)=>n.jsxs("div",{className:`lb-rank-item ${Le(me)?"lb-rank-you":""}`,style:{animationDelay:`${Ae*.04}s`},children:[n.jsx("span",{className:"lb-rank-number",children:me.rank}),n.jsx("div",{className:`lb-rank-avatar ${Le(me)?"lb-avatar-you":""}`,children:Ef(me.name)}),n.jsx("div",{className:"lb-rank-info",children:n.jsxs("span",{className:"lb-rank-name",children:[me.name,Le(me)&&n.jsx("span",{className:"lb-you-badge",children:"You"})]})}),n.jsx("span",{className:"lb-rank-stat",children:se(me)})]},me.id))}),Oe&&Oe.rank>5&&n.jsxs("div",{className:"lb-your-position",children:[n.jsxs("span",{className:"lb-your-rank",children:["#",Oe.rank]}),n.jsx("span",{className:"lb-your-label",children:"Your Position"}),n.jsx("span",{className:"lb-your-stat",children:se(Oe)})]})]})]}),E&&n.jsx("div",{className:"lb-modal-overlay",onClick:()=>F(!1),children:n.jsxs("div",{className:"lb-modal",onClick:me=>me.stopPropagation(),children:[n.jsx("h3",{children:"Leave the Leaderboard?"}),n.jsx("p",{children:"Your name will no longer appear to other members. You can rejoin anytime."}),n.jsxs("div",{className:"lb-modal-actions",children:[n.jsx("button",{className:"lb-modal-cancel",onClick:()=>F(!1),children:"Stay"}),n.jsx("button",{className:"lb-modal-confirm",onClick:Y,disabled:k,children:k?"Leaving...":"Leave"})]})]})}),n.jsx(So,{}),L&&n.jsxs("div",{className:`toast-notification ${L.type}`,children:[n.jsx("span",{className:"toast-icon",children:L.type==="success"?n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"M5 13 L9 17 L19 7"})}):L.type==="error"?n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),n.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),n.jsx("span",{className:"toast-message",children:L.message})]})]})}function H6(){const{pathname:r}=di();return C.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),C.useEffect(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,requestAnimationFrame(()=>{window.scrollTo(0,0)})},[r]),null}function $6(){const r=hs();return C.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";r(t,{replace:!0})}},[r]),null}function G6(){return n.jsx(pD,{children:n.jsx(mD,{children:n.jsxs(OS,{basename:"/login",children:[n.jsx(H6,{}),n.jsx($6,{}),n.jsxs(dS,{children:[n.jsx(Ps,{path:"/",element:n.jsx(gD,{})}),n.jsx(Ps,{path:"/dashboard",element:n.jsx(MD,{})}),n.jsx(Ps,{path:"/add-client",element:n.jsx(ID,{})}),n.jsx(Ps,{path:"/client",element:n.jsx(UD,{})}),n.jsx(Ps,{path:"/client/forms",element:n.jsx(FD,{})}),n.jsx(Ps,{path:"/client/tools",element:n.jsx(zD,{})}),n.jsx(Ps,{path:"/client/tools/macros",element:n.jsx(qD,{})}),n.jsx(Ps,{path:"/client/tools/snacks",element:n.jsx(WD,{})}),n.jsx(Ps,{path:"/client/tools/motivation",element:n.jsx(HD,{})}),n.jsx(Ps,{path:"/client/personal-bests",element:n.jsx(ZD,{})}),n.jsx(Ps,{path:"/client/circuit",element:n.jsx(t6,{})}),n.jsx(Ps,{path:"/client/circuit/booking",element:n.jsx(r6,{})}),n.jsx(Ps,{path:"/client/core-buddy",element:n.jsx(u6,{})}),n.jsx(Ps,{path:"/client/core-buddy/nutrition",element:n.jsx(g6,{})}),n.jsx(Ps,{path:"/client/core-buddy/workouts",element:n.jsx(T6,{})}),n.jsx(Ps,{path:"/client/core-buddy/programmes",element:n.jsx(A6,{})}),n.jsx(Ps,{path:"/client/core-buddy/achievements",element:n.jsx(O6,{})}),n.jsx(Ps,{path:"/client/core-buddy/consistency",element:n.jsx(V6,{})}),n.jsx(Ps,{path:"/client/leaderboard",element:n.jsx(W6,{})}),n.jsx(Ps,{path:"*",element:n.jsx(cS,{to:"/",replace:!0})})]})]})})})}fN.createRoot(document.getElementById("root")).render(n.jsx(C.StrictMode,{children:n.jsx(G6,{})}));
