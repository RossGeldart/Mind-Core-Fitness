(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function qS(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Mp={exports:{}},Xu={};var E1;function HS(){if(E1)return Xu;E1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,c){var u=null;if(c!==void 0&&(u=""+c),a.key!==void 0&&(u=""+a.key),"key"in a){c={};for(var f in a)f!=="key"&&(c[f]=a[f])}else c=a;return a=c.ref,{$$typeof:s,type:i,key:u,ref:a!==void 0?a:null,props:c}}return Xu.Fragment=e,Xu.jsx=t,Xu.jsxs=t,Xu}var T1;function $S(){return T1||(T1=1,Mp.exports=HS()),Mp.exports}var l=$S(),Op={exports:{}},St={};var C1;function GS(){if(C1)return St;C1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),A=Symbol.iterator;function B(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,H={};function J(M,se,ie){this.props=M,this.context=se,this.refs=H,this.updater=ie||L}J.prototype.isReactComponent={},J.prototype.setState=function(M,se){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,se,"setState")},J.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Y(){}Y.prototype=J.prototype;function ue(M,se,ie){this.props=M,this.context=se,this.refs=H,this.updater=ie||L}var K=ue.prototype=new Y;K.constructor=ue,F(K,J.prototype),K.isPureReactComponent=!0;var me=Array.isArray;function xe(){}var q={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function G(M,se,ie){var he=ie.ref;return{$$typeof:s,type:M,key:se,ref:he!==void 0?he:null,props:ie}}function ne(M,se){return G(M.type,se,M.props)}function W(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function ee(M){var se={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ie){return se[ie]})}var O=/\/+/g;function Re(M,se){return typeof M=="object"&&M!==null&&M.key!=null?ee(""+M.key):se.toString(36)}function He(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(xe,xe):(M.status="pending",M.then(function(se){M.status==="pending"&&(M.status="fulfilled",M.value=se)},function(se){M.status==="pending"&&(M.status="rejected",M.reason=se)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function te(M,se,ie,he,X){var de=typeof M;(de==="undefined"||de==="boolean")&&(M=null);var ye=!1;if(M===null)ye=!0;else switch(de){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(M.$$typeof){case s:case e:ye=!0;break;case E:return ye=M._init,te(ye(M._payload),se,ie,he,X)}}if(ye)return X=X(M),ye=he===""?"."+Re(M,0):he,me(X)?(ie="",ye!=null&&(ie=ye.replace(O,"$&/")+"/"),te(X,se,ie,"",function(rt){return rt})):X!=null&&(W(X)&&(X=ne(X,ie+(X.key==null||M&&M.key===X.key?"":(""+X.key).replace(O,"$&/")+"/")+ye)),se.push(X)),1;ye=0;var Le=he===""?".":he+":";if(me(M))for(var ze=0;ze<M.length;ze++)he=M[ze],de=Le+Re(he,ze),ye+=te(he,se,ie,de,X);else if(ze=B(M),typeof ze=="function")for(M=ze.call(M),ze=0;!(he=M.next()).done;)he=he.value,de=Le+Re(he,ze++),ye+=te(he,se,ie,de,X);else if(de==="object"){if(typeof M.then=="function")return te(He(M),se,ie,he,X);throw se=String(M),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return ye}function Se(M,se,ie){if(M==null)return M;var he=[],X=0;return te(M,he,"","",function(de){return se.call(ie,de,X++)}),he}function Pe(M){if(M._status===-1){var se=M._result;se=se(),se.then(function(ie){(M._status===0||M._status===-1)&&(M._status=1,M._result=ie)},function(ie){(M._status===0||M._status===-1)&&(M._status=2,M._result=ie)}),M._status===-1&&(M._status=0,M._result=se)}if(M._status===1)return M._result.default;throw M._result}var De=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ge={map:Se,forEach:function(M,se,ie){Se(M,function(){se.apply(this,arguments)},ie)},count:function(M){var se=0;return Se(M,function(){se++}),se},toArray:function(M){return Se(M,function(se){return se})||[]},only:function(M){if(!W(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return St.Activity=C,St.Children=Ge,St.Component=J,St.Fragment=t,St.Profiler=a,St.PureComponent=ue,St.StrictMode=i,St.Suspense=p,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,St.__COMPILER_RUNTIME={__proto__:null,c:function(M){return q.H.useMemoCache(M)}},St.cache=function(M){return function(){return M.apply(null,arguments)}},St.cacheSignal=function(){return null},St.cloneElement=function(M,se,ie){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var he=F({},M.props),X=M.key;if(se!=null)for(de in se.key!==void 0&&(X=""+se.key),se)!V.call(se,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&se.ref===void 0||(he[de]=se[de]);var de=arguments.length-2;if(de===1)he.children=ie;else if(1<de){for(var ye=Array(de),Le=0;Le<de;Le++)ye[Le]=arguments[Le+2];he.children=ye}return G(M.type,X,he)},St.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},St.createElement=function(M,se,ie){var he,X={},de=null;if(se!=null)for(he in se.key!==void 0&&(de=""+se.key),se)V.call(se,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(X[he]=se[he]);var ye=arguments.length-2;if(ye===1)X.children=ie;else if(1<ye){for(var Le=Array(ye),ze=0;ze<ye;ze++)Le[ze]=arguments[ze+2];X.children=Le}if(M&&M.defaultProps)for(he in ye=M.defaultProps,ye)X[he]===void 0&&(X[he]=ye[he]);return G(M,de,X)},St.createRef=function(){return{current:null}},St.forwardRef=function(M){return{$$typeof:f,render:M}},St.isValidElement=W,St.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:Pe}},St.memo=function(M,se){return{$$typeof:x,type:M,compare:se===void 0?null:se}},St.startTransition=function(M){var se=q.T,ie={};q.T=ie;try{var he=M(),X=q.S;X!==null&&X(ie,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(xe,De)}catch(de){De(de)}finally{se!==null&&ie.types!==null&&(se.types=ie.types),q.T=se}},St.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},St.use=function(M){return q.H.use(M)},St.useActionState=function(M,se,ie){return q.H.useActionState(M,se,ie)},St.useCallback=function(M,se){return q.H.useCallback(M,se)},St.useContext=function(M){return q.H.useContext(M)},St.useDebugValue=function(){},St.useDeferredValue=function(M,se){return q.H.useDeferredValue(M,se)},St.useEffect=function(M,se){return q.H.useEffect(M,se)},St.useEffectEvent=function(M){return q.H.useEffectEvent(M)},St.useId=function(){return q.H.useId()},St.useImperativeHandle=function(M,se,ie){return q.H.useImperativeHandle(M,se,ie)},St.useInsertionEffect=function(M,se){return q.H.useInsertionEffect(M,se)},St.useLayoutEffect=function(M,se){return q.H.useLayoutEffect(M,se)},St.useMemo=function(M,se){return q.H.useMemo(M,se)},St.useOptimistic=function(M,se){return q.H.useOptimistic(M,se)},St.useReducer=function(M,se,ie){return q.H.useReducer(M,se,ie)},St.useRef=function(M){return q.H.useRef(M)},St.useState=function(M){return q.H.useState(M)},St.useSyncExternalStore=function(M,se,ie){return q.H.useSyncExternalStore(M,se,ie)},St.useTransition=function(){return q.H.useTransition()},St.version="19.2.4",St}var N1;function zg(){return N1||(N1=1,Op.exports=GS()),Op.exports}var z=zg(),Lp={exports:{}},Ju={},Pp={exports:{}},Vp={};var A1;function WS(){return A1||(A1=1,(function(s){function e(te,Se){var Pe=te.length;te.push(Se);e:for(;0<Pe;){var De=Pe-1>>>1,Ge=te[De];if(0<a(Ge,Se))te[De]=Se,te[Pe]=Ge,Pe=De;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var Se=te[0],Pe=te.pop();if(Pe!==Se){te[0]=Pe;e:for(var De=0,Ge=te.length,M=Ge>>>1;De<M;){var se=2*(De+1)-1,ie=te[se],he=se+1,X=te[he];if(0>a(ie,Pe))he<Ge&&0>a(X,ie)?(te[De]=X,te[he]=Pe,De=he):(te[De]=ie,te[se]=Pe,De=se);else if(he<Ge&&0>a(X,Pe))te[De]=X,te[he]=Pe,De=he;else break e}}return Se}function a(te,Se){var Pe=te.sortIndex-Se.sortIndex;return Pe!==0?Pe:te.id-Se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();s.unstable_now=function(){return u.now()-f}}var p=[],x=[],E=1,C=null,A=3,B=!1,L=!1,F=!1,H=!1,J=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function K(te){for(var Se=t(x);Se!==null;){if(Se.callback===null)i(x);else if(Se.startTime<=te)i(x),Se.sortIndex=Se.expirationTime,e(p,Se);else break;Se=t(x)}}function me(te){if(F=!1,K(te),!L)if(t(p)!==null)L=!0,xe||(xe=!0,ee());else{var Se=t(x);Se!==null&&He(me,Se.startTime-te)}}var xe=!1,q=-1,V=5,G=-1;function ne(){return H?!0:!(s.unstable_now()-G<V)}function W(){if(H=!1,xe){var te=s.unstable_now();G=te;var Se=!0;try{e:{L=!1,F&&(F=!1,Y(q),q=-1),B=!0;var Pe=A;try{t:{for(K(te),C=t(p);C!==null&&!(C.expirationTime>te&&ne());){var De=C.callback;if(typeof De=="function"){C.callback=null,A=C.priorityLevel;var Ge=De(C.expirationTime<=te);if(te=s.unstable_now(),typeof Ge=="function"){C.callback=Ge,K(te),Se=!0;break t}C===t(p)&&i(p),K(te)}else i(p);C=t(p)}if(C!==null)Se=!0;else{var M=t(x);M!==null&&He(me,M.startTime-te),Se=!1}}break e}finally{C=null,A=Pe,B=!1}Se=void 0}}finally{Se?ee():xe=!1}}}var ee;if(typeof ue=="function")ee=function(){ue(W)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Re=O.port2;O.port1.onmessage=W,ee=function(){Re.postMessage(null)}}else ee=function(){J(W,0)};function He(te,Se){q=J(function(){te(s.unstable_now())},Se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(te){switch(A){case 1:case 2:case 3:var Se=3;break;default:Se=A}var Pe=A;A=Se;try{return te()}finally{A=Pe}},s.unstable_requestPaint=function(){H=!0},s.unstable_runWithPriority=function(te,Se){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Pe=A;A=te;try{return Se()}finally{A=Pe}},s.unstable_scheduleCallback=function(te,Se,Pe){var De=s.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?De+Pe:De):Pe=De,te){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=Pe+Ge,te={id:E++,callback:Se,priorityLevel:te,startTime:Pe,expirationTime:Ge,sortIndex:-1},Pe>De?(te.sortIndex=Pe,e(x,te),t(p)===null&&te===t(x)&&(F?(Y(q),q=-1):F=!0,He(me,Pe-De))):(te.sortIndex=Ge,e(p,te),L||B||(L=!0,xe||(xe=!0,ee()))),te},s.unstable_shouldYield=ne,s.unstable_wrapCallback=function(te){var Se=A;return function(){var Pe=A;A=Se;try{return te.apply(this,arguments)}finally{A=Pe}}}})(Vp)),Vp}var j1;function YS(){return j1||(j1=1,Pp.exports=WS()),Pp.exports}var Up={exports:{}},zr={};var k1;function QS(){if(k1)return zr;k1=1;var s=zg();function e(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)x+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(p,x,E){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:C==null?null:""+C,children:p,containerInfo:x,implementation:E}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return zr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,zr.createPortal=function(p,x){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(p,x,null,E)},zr.flushSync=function(p){var x=u.T,E=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=x,i.p=E,i.d.f()}},zr.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(p,x))},zr.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},zr.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var E=x.as,C=f(E,x.crossOrigin),A=typeof x.integrity=="string"?x.integrity:void 0,B=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;E==="style"?i.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:C,integrity:A,fetchPriority:B}):E==="script"&&i.d.X(p,{crossOrigin:C,integrity:A,fetchPriority:B,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},zr.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var E=f(x.as,x.crossOrigin);i.d.M(p,{crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(p)},zr.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var E=x.as,C=f(E,x.crossOrigin);i.d.L(p,E,{crossOrigin:C,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},zr.preloadModule=function(p,x){if(typeof p=="string")if(x){var E=f(x.as,x.crossOrigin);i.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(p)},zr.requestFormReset=function(p){i.d.r(p)},zr.unstable_batchedUpdates=function(p,x){return p(x)},zr.useFormState=function(p,x,E){return u.H.useFormState(p,x,E)},zr.useFormStatus=function(){return u.H.useHostTransitionStatus()},zr.version="19.2.4",zr}var R1;function KS(){if(R1)return Up.exports;R1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Up.exports=QS(),Up.exports}var D1;function XS(){if(D1)return Ju;D1=1;var s=YS(),e=zg(),t=KS();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function u(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function f(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(c(n)!==n)throw Error(i(188))}function x(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,h=r;;){var y=o.return;if(y===null)break;var w=y.alternate;if(w===null){if(h=y.return,h!==null){o=h;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===o)return p(y),n;if(w===h)return p(y),r;w=w.sibling}throw Error(i(188))}if(o.return!==h.return)o=y,h=w;else{for(var j=!1,P=y.child;P;){if(P===o){j=!0,o=y,h=w;break}if(P===h){j=!0,h=y,o=w;break}P=P.sibling}if(!j){for(P=w.child;P;){if(P===o){j=!0,o=w,h=y;break}if(P===h){j=!0,h=w,o=y;break}P=P.sibling}if(!j)throw Error(i(189))}}if(o.alternate!==h)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function E(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=E(n),r!==null)return r;n=n.sibling}return null}var C=Object.assign,A=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ee(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var O=Symbol.for("react.client.reference");function Re(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===O?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case J:return"Profiler";case H:return"StrictMode";case me:return"Suspense";case xe:return"SuspenseList";case G:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case L:return"Portal";case ue:return n.displayName||"Context";case Y:return(n._context.displayName||"Context")+".Consumer";case K:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case q:return r=n.displayName||null,r!==null?r:Re(n.type)||"Memo";case V:r=n._payload,n=n._init;try{return Re(n(r))}catch{}}return null}var He=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe={pending:!1,data:null,method:null,action:null},De=[],Ge=-1;function M(n){return{current:n}}function se(n){0>Ge||(n.current=De[Ge],De[Ge]=null,Ge--)}function ie(n,r){Ge++,De[Ge]=n.current,n.current=r}var he=M(null),X=M(null),de=M(null),ye=M(null);function Le(n,r){switch(ie(de,r),ie(X,n),ie(he,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?W0(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=W0(r),n=Y0(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}se(he),ie(he,n)}function ze(){se(he),se(X),se(de)}function rt(n){n.memoizedState!==null&&ie(ye,n);var r=he.current,o=Y0(r,n.type);r!==o&&(ie(X,n),ie(he,o))}function je(n){X.current===n&&(se(he),se(X)),ye.current===n&&(se(ye),Wu._currentValue=Pe)}var Ct,rn;function Wt(n){if(Ct===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Ct=r&&r[1]||"",rn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+n+rn}var Ut=!1;function vt(n,r){if(!n||Ut)return"";Ut=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var Fe=function(){throw Error()};if(Object.defineProperty(Fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Fe,[])}catch(Ae){var Ee=Ae}Reflect.construct(n,[],Fe)}else{try{Fe.call()}catch(Ae){Ee=Ae}n.call(Fe.prototype)}}else{try{throw Error()}catch(Ae){Ee=Ae}(Fe=n())&&typeof Fe.catch=="function"&&Fe.catch(function(){})}}catch(Ae){if(Ae&&Ee&&typeof Ae.stack=="string")return[Ae.stack,Ee.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),j=w[0],P=w[1];if(j&&P){var re=j.split(`
`),_e=P.split(`
`);for(y=h=0;h<re.length&&!re[h].includes("DetermineComponentFrameRoot");)h++;for(;y<_e.length&&!_e[y].includes("DetermineComponentFrameRoot");)y++;if(h===re.length||y===_e.length)for(h=re.length-1,y=_e.length-1;1<=h&&0<=y&&re[h]!==_e[y];)y--;for(;1<=h&&0<=y;h--,y--)if(re[h]!==_e[y]){if(h!==1||y!==1)do if(h--,y--,0>y||re[h]!==_e[y]){var Oe=`
`+re[h].replace(" at new "," at ");return n.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",n.displayName)),Oe}while(1<=h&&0<=y);break}}}finally{Ut=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Wt(o):""}function it(n,r){switch(n.tag){case 26:case 27:case 5:return Wt(n.type);case 16:return Wt("Lazy");case 13:return n.child!==r&&r!==null?Wt("Suspense Fallback"):Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 15:return vt(n.type,!1);case 11:return vt(n.type.render,!1);case 1:return vt(n.type,!0);case 31:return Wt("Activity");default:return""}}function It(n){try{var r="",o=null;do r+=it(n,o),o=n,n=n.return;while(n);return r}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Mt=Object.prototype.hasOwnProperty,Ot=s.unstable_scheduleCallback,br=s.unstable_cancelCallback,xn=s.unstable_shouldYield,Or=s.unstable_requestPaint,Lt=s.unstable_now,Tr=s.unstable_getCurrentPriorityLevel,Ss=s.unstable_ImmediatePriority,Wr=s.unstable_UserBlockingPriority,_r=s.unstable_NormalPriority,ui=s.unstable_LowPriority,Yr=s.unstable_IdlePriority,Mn=s.log,Xn=s.unstable_setDisableYieldValue,Rn=null,on=null;function Fn(n){if(typeof Mn=="function"&&Xn(n),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(Rn,n)}catch{}}var ln=Math.clz32?Math.clz32:ge,is=Math.log,Cn=Math.LN2;function ge(n){return n>>>=0,n===0?32:31-(is(n)/Cn|0)|0}var Te=256,Je=262144,tt=4194304;function yt(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function yn(n,r,o){var h=n.pendingLanes;if(h===0)return 0;var y=0,w=n.suspendedLanes,j=n.pingedLanes;n=n.warmLanes;var P=h&134217727;return P!==0?(h=P&~w,h!==0?y=yt(h):(j&=P,j!==0?y=yt(j):o||(o=P&~n,o!==0&&(y=yt(o))))):(P=h&~w,P!==0?y=yt(P):j!==0?y=yt(j):o||(o=h&~n,o!==0&&(y=yt(o)))),y===0?0:r!==0&&r!==y&&(r&w)===0&&(w=y&-y,o=r&-r,w>=o||w===32&&(o&4194048)!==0)?r:y}function Kt(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function xr(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jn(){var n=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),n}function wn(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Nn(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function hr(n,r,o,h,y,w){var j=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var P=n.entanglements,re=n.expirationTimes,_e=n.hiddenUpdates;for(o=j&~o;0<o;){var Oe=31-ln(o),Fe=1<<Oe;P[Oe]=0,re[Oe]=-1;var Ee=_e[Oe];if(Ee!==null)for(_e[Oe]=null,Oe=0;Oe<Ee.length;Oe++){var Ae=Ee[Oe];Ae!==null&&(Ae.lane&=-536870913)}o&=~Fe}h!==0&&pe(n,h,0),w!==0&&y===0&&n.tag!==0&&(n.suspendedLanes|=w&~(j&~r))}function pe(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var h=31-ln(r);n.entangledLanes|=r,n.entanglements[h]=n.entanglements[h]|1073741824|o&261930}function Ue(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var h=31-ln(o),y=1<<h;y&r|n[h]&r&&(n[h]|=r),o&=~y}}function $e(n,r){var o=r&-r;return o=(o&42)!==0?1:Z(o),(o&(n.suspendedLanes|r))!==0?0:o}function Z(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ke(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function We(){var n=Se.p;return n!==0?n:(n=window.event,n===void 0?32:v1(n.type))}function Qe(n,r){var o=Se.p;try{return Se.p=n,r()}finally{Se.p=o}}var lt=Math.random().toString(36).slice(2),ct="__reactFiber$"+lt,_t="__reactProps$"+lt,On="__reactContainer$"+lt,Zn="__reactEvents$"+lt,Cr="__reactListeners$"+lt,Bs="__reactHandles$"+lt,hi="__reactResources$"+lt,as="__reactMarker$"+lt;function di(n){delete n[ct],delete n[_t],delete n[Zn],delete n[Cr],delete n[Bs]}function bt(n){var r=n[ct];if(r)return r;for(var o=n.parentNode;o;){if(r=o[On]||o[ct]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=t1(n);n!==null;){if(o=n[ct])return o;n=t1(n)}return r}n=o,o=n.parentNode}return null}function qn(n){if(n=n[ct]||n[On]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function er(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function zs(n){var r=n[hi];return r||(r=n[hi]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ln(n){n[as]=!0}var al=new Set,ol={};function Fs(n,r){qs(n,r),qs(n+"Capture",r)}function qs(n,r){for(ol[n]=r,n=0;n<r.length;n++)al.add(r[n])}var ll=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eo={},to={};function cl(n){return Mt.call(to,n)?!0:Mt.call(eo,n)?!1:ll.test(n)?to[n]=!0:(eo[n]=!0,!1)}function no(n,r,o){if(cl(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function Qr(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Pn(n,r,o,h){if(h===null)n.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+h)}}function Vn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Mi(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ul(n,r,o){var h=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,w=h.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return y.call(this)},set:function(j){o=""+j,w.call(this,j)}}),Object.defineProperty(n,r,{enumerable:h.enumerable}),{getValue:function(){return o},setValue:function(j){o=""+j},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function en(n){if(!n._valueTracker){var r=Mi(n)?"checked":"value";n._valueTracker=ul(n,r,""+n[r])}}function ca(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),h="";return n&&(h=Mi(n)?n.checked?"true":"false":n.value),n=h,n!==o?(r.setValue(n),!0):!1}function Hs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ua=/[\n"\\]/g;function Lr(n){return n.replace(ua,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ro(n,r,o,h,y,w,j,P){n.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.type=j:n.removeAttribute("type"),r!=null?j==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Vn(r)):n.value!==""+Vn(r)&&(n.value=""+Vn(r)):j!=="submit"&&j!=="reset"||n.removeAttribute("value"),r!=null?hl(n,j,Vn(r)):o!=null?hl(n,j,Vn(o)):h!=null&&n.removeAttribute("value"),y==null&&w!=null&&(n.defaultChecked=!!w),y!=null&&(n.checked=y&&typeof y!="function"&&typeof y!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?n.name=""+Vn(P):n.removeAttribute("name")}function Xl(n,r,o,h,y,w,j,P){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),r!=null||o!=null){if(!(w!=="submit"&&w!=="reset"||r!=null)){en(n);return}o=o!=null?""+Vn(o):"",r=r!=null?""+Vn(r):o,P||r===n.value||(n.value=r),n.defaultValue=r}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,n.checked=P?n.checked:!!h,n.defaultChecked=!!h,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(n.name=j),en(n)}function hl(n,r,o){r==="number"&&Hs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Oi(n,r,o,h){if(n=n.options,r){r={};for(var y=0;y<o.length;y++)r["$"+o[y]]=!0;for(o=0;o<n.length;o++)y=r.hasOwnProperty("$"+n[o].value),n[o].selected!==y&&(n[o].selected=y),y&&h&&(n[o].defaultSelected=!0)}else{for(o=""+Vn(o),r=null,y=0;y<n.length;y++){if(n[y].value===o){n[y].selected=!0,h&&(n[y].defaultSelected=!0);return}r!==null||n[y].disabled||(r=n[y])}r!==null&&(r.selected=!0)}}function Jl(n,r,o){if(r!=null&&(r=""+Vn(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+Vn(o):""}function Li(n,r,o,h){if(r==null){if(h!=null){if(o!=null)throw Error(i(92));if(He(h)){if(1<h.length)throw Error(i(93));h=h[0]}o=h}o==null&&(o=""),r=o}o=Vn(r),n.defaultValue=o,h=n.textContent,h===o&&h!==""&&h!==null&&(n.value=h),en(n)}function Pr(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Zl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dl(n,r,o){var h=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":h?n.setProperty(r,o):typeof o!="number"||o===0||Zl.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function fl(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?n.setProperty(h,""):h==="float"?n.cssFloat="":n[h]="");for(var y in r)h=r[y],r.hasOwnProperty(y)&&o[y]!==h&&dl(n,y,h)}else for(var w in r)r.hasOwnProperty(w)&&dl(n,w,r[w])}function so(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ec=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(n){return Pi.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Es(){}var ml=null;function os(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vi=null,Nr=null;function ha(n){var r=qn(n);if(r&&(n=r.stateNode)){var o=n[_t]||null;e:switch(n=r.stateNode,r.type){case"input":if(ro(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Lr(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var h=o[r];if(h!==n&&h.form===n.form){var y=h[_t]||null;if(!y)throw Error(i(90));ro(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<o.length;r++)h=o[r],h.form===n.form&&ca(h)}break e;case"textarea":Jl(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Oi(n,!!o.multiple,r,!1)}}}var Ui=!1;function Bi(n,r,o){if(Ui)return n(r,o);Ui=!0;try{var h=n(r);return h}finally{if(Ui=!1,(Vi!==null||Nr!==null)&&(Td(),Vi&&(r=Vi,n=Nr,Nr=Vi=null,ha(r),n)))for(r=0;r<n.length;r++)ha(n[r])}}function Ts(n,r){var o=n.stateNode;if(o===null)return null;var h=o[_t]||null;if(h===null)return null;o=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),da=!1;if(Vr)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){da=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{da=!1}var $s=null,pl=null,Gs=null;function ao(){if(Gs)return Gs;var n,r=pl,o=r.length,h,y="value"in $s?$s.value:$s.textContent,w=y.length;for(n=0;n<o&&r[n]===y[n];n++);var j=o-n;for(h=1;h<=j&&r[o-h]===y[w-h];h++);return Gs=y.slice(n,1<h?1-h:void 0)}function zi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function fi(){return!0}function Kr(){return!1}function cn(n){function r(o,h,y,w,j){this._reactName=o,this._targetInst=y,this.type=h,this.nativeEvent=w,this.target=j,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(o=n[P],this[P]=o?o(w):w[P]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?fi:Kr,this.isPropagationStopped=Kr,this}return C(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),r}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=cn(mi),Fi=C({},mi,{view:0,detail:0}),An=cn(Fi),Ws,oo,fn,lo=C({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==fn&&(fn&&n.type==="mousemove"?(Ws=n.screenX-fn.screenX,oo=n.screenY-fn.screenY):oo=Ws=0,fn=n),Ws)},movementY:function(n){return"movementY"in n?n.movementY:oo}}),Nt=cn(lo),fa=C({},lo,{dataTransfer:0}),Hn=cn(fa),gl=C({},Fi,{relatedTarget:0}),qi=cn(gl),Xr=C({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),tc=cn(Xr),ma=C({},mi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),nc=cn(ma),vl=C({},mi,{data:0}),Ys=cn(vl),yl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},co={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uo(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=co[n])?!!r[n]:!1}function pi(){return uo}var wr=C({},Fi,{key:function(n){if(n.key){var r=yl[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=zi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(n){return n.type==="keypress"?zi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sc=cn(wr),bl=C({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gi=cn(bl),m=C({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),N=cn(m),R=C({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),$=cn(R),ve=C({},lo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ce=cn(ve),Ye=C({},mi,{newState:0,oldState:0}),wt=cn(Ye),Dn=[9,13,27,32],Yt=Vr&&"CompositionEvent"in window,Sn=null;Vr&&"documentMode"in document&&(Sn=document.documentMode);var ls=Vr&&"TextEvent"in window&&!Sn,Qs=Vr&&(!Yt||Sn&&8<Sn&&11>=Sn),cs=" ",Cs=!1;function vi(n,r){switch(n){case"keyup":return Dn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ga=!1;function zh(n,r){switch(n){case"compositionend":return pa(r);case"keypress":return r.which!==32?null:(Cs=!0,cs);case"textInput":return n=r.data,n===cs&&Cs?null:n;default:return null}}function lu(n,r){if(ga)return n==="compositionend"||!Yt&&vi(n,r)?(n=ao(),Gs=pl=$s=null,ga=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Qs&&r.locale!=="ko"?null:r.data;default:return null}}var um={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fh(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!um[n.type]:r==="textarea"}function cu(n,r,o,h){Vi?Nr?Nr.push(h):Nr=[h]:Vi=h,r=Dd(r,"onChange"),0<r.length&&(o=new tr("onChange","change",null,o,h),n.push({event:o,listeners:r}))}var _l=null,ho=null;function qh(n){z0(n,0)}function Ns(n){var r=er(n);if(ca(r))return n}function Hh(n,r){if(n==="change")return r}var uu=!1;if(Vr){var hu;if(Vr){var du="oninput"in document;if(!du){var fu=document.createElement("div");fu.setAttribute("oninput","return;"),du=typeof fu.oninput=="function"}hu=du}else hu=!1;uu=hu&&(!document.documentMode||9<document.documentMode)}function $h(){_l&&(_l.detachEvent("onpropertychange",mu),ho=_l=null)}function mu(n){if(n.propertyName==="value"&&Ns(ho)){var r=[];cu(r,ho,n,os(n)),Bi(qh,r)}}function hm(n,r,o){n==="focusin"?($h(),_l=r,ho=o,_l.attachEvent("onpropertychange",mu)):n==="focusout"&&$h()}function Gh(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ns(ho)}function xl(n,r){if(n==="click")return Ns(r)}function Wh(n,r){if(n==="input"||n==="change")return Ns(r)}function dm(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Ur=typeof Object.is=="function"?Object.is:dm;function fo(n,r){if(Ur(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),h=Object.keys(r);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var y=o[h];if(!Mt.call(r,y)||!Ur(n[y],r[y]))return!1}return!0}function ic(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pu(n,r){var o=ic(n);n=0;for(var h;o;){if(o.nodeType===3){if(h=n+o.textContent.length,n<=r&&h>=r)return{node:o,offset:r-n};n=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ic(o)}}function Yh(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Yh(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function gu(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Hs(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Hs(n.document)}return r}function ac(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var fm=Vr&&"documentMode"in document&&11>=document.documentMode,va=null,mo=null,Hi=null,po=!1;function Qh(n,r,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;po||va==null||va!==Hs(h)||(h=va,"selectionStart"in h&&ac(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Hi&&fo(Hi,h)||(Hi=h,h=Dd(mo,"onSelect"),0<h.length&&(r=new tr("onSelect","select",null,r,o),n.push({event:r,listeners:h}),r.target=va)))}function $i(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Ks={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},wl={},Gi={};Vr&&(Gi=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function ya(n){if(wl[n])return wl[n];if(!Ks[n])return n;var r=Ks[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Gi)return wl[n]=r[o];return n}var Kh=ya("animationend"),Xh=ya("animationiteration"),Jh=ya("animationstart"),mm=ya("transitionrun"),pm=ya("transitionstart"),vu=ya("transitioncancel"),yu=ya("transitionend"),Zh=new Map,oc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oc.push("scrollEnd");function dr(n,r){Zh.set(n,r),Fs(r,[n])}var lc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Jr=[],ba=0,bu=0;function Sl(){for(var n=ba,r=bu=ba=0;r<n;){var o=Jr[r];Jr[r++]=null;var h=Jr[r];Jr[r++]=null;var y=Jr[r];Jr[r++]=null;var w=Jr[r];if(Jr[r++]=null,h!==null&&y!==null){var j=h.pending;j===null?y.next=y:(y.next=j.next,j.next=y),h.pending=y}w!==0&&xu(o,y,w)}}function cc(n,r,o,h){Jr[ba++]=n,Jr[ba++]=r,Jr[ba++]=o,Jr[ba++]=h,bu|=h,n.lanes|=h,n=n.alternate,n!==null&&(n.lanes|=h)}function _u(n,r,o,h){return cc(n,r,o,h),uc(n)}function Wi(n,r){return cc(n,null,null,r),uc(n)}function xu(n,r,o){n.lanes|=o;var h=n.alternate;h!==null&&(h.lanes|=o);for(var y=!1,w=n.return;w!==null;)w.childLanes|=o,h=w.alternate,h!==null&&(h.childLanes|=o),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(y=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,y&&r!==null&&(y=31-ln(o),n=w.hiddenUpdates,h=n[y],h===null?n[y]=[r]:h.push(r),r.lane=o|536870912),w):null}function uc(n){if(50<Bu)throw Bu=0,sp=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var _a={};function hc(n,r,o,h){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(n,r,o,h){return new hc(n,r,o,h)}function go(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Xs(n,r){var o=n.alternate;return o===null?(o=fr(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ed(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function El(n,r,o,h,y,w){var j=0;if(h=n,typeof n=="function")go(n)&&(j=1);else if(typeof n=="string")j=RS(n,o,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case G:return n=fr(31,o,r,y),n.elementType=G,n.lanes=w,n;case F:return Yi(o.children,y,w,r);case H:j=8,y|=24;break;case J:return n=fr(12,o,r,y|2),n.elementType=J,n.lanes=w,n;case me:return n=fr(13,o,r,y),n.elementType=me,n.lanes=w,n;case xe:return n=fr(19,o,r,y),n.elementType=xe,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ue:j=10;break e;case Y:j=9;break e;case K:j=11;break e;case q:j=14;break e;case V:j=16,h=null;break e}j=29,o=Error(i(130,n===null?"null":typeof n,"")),h=null}return r=fr(j,o,r,y),r.elementType=n,r.type=h,r.lanes=w,r}function Yi(n,r,o,h){return n=fr(7,n,h,r),n.lanes=o,n}function wu(n,r,o){return n=fr(6,n,null,r),n.lanes=o,n}function Tl(n){var r=fr(18,null,null,0);return r.stateNode=n,r}function dc(n,r,o){return r=fr(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var td=new WeakMap;function us(n,r){if(typeof n=="object"&&n!==null){var o=td.get(n);return o!==void 0?o:(r={value:n,source:r,stack:It(r)},td.set(n,r),r)}return{value:n,source:r,stack:It(r)}}var vo=[],yo=0,fc=null,Cl=0,Zr=[],hs=0,Qi=null,As=1,Js="";function ds(n,r){vo[yo++]=Cl,vo[yo++]=fc,fc=n,Cl=r}function Ar(n,r,o){Zr[hs++]=As,Zr[hs++]=Js,Zr[hs++]=Qi,Qi=n;var h=As;n=Js;var y=32-ln(h)-1;h&=~(1<<y),o+=1;var w=32-ln(r)+y;if(30<w){var j=y-y%5;w=(h&(1<<j)-1).toString(32),h>>=j,y-=j,As=1<<32-ln(r)+y|o<<y|h,Js=w+n}else As=1<<w|o<<y|h,Js=n}function Su(n){n.return!==null&&(ds(n,1),Ar(n,1,0))}function yi(n){for(;n===fc;)fc=vo[--yo],vo[yo]=null,Cl=vo[--yo],vo[yo]=null;for(;n===Qi;)Qi=Zr[--hs],Zr[hs]=null,Js=Zr[--hs],Zr[hs]=null,As=Zr[--hs],Zr[hs]=null}function Zs(n,r){Zr[hs++]=As,Zr[hs++]=Js,Zr[hs++]=Qi,As=r.id,Js=r.overflow,Qi=n}var $n=null,Bt=null,Rt=!1,es=null,tn=!1,ei=Error(i(519));function mr(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw js(us(r,n)),ei}function pr(n){var r=n.stateNode,o=n.type,h=n.memoizedProps;switch(r[ct]=n,r[_t]=h,o){case"dialog":Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":case"embed":Vt("load",r);break;case"video":case"audio":for(o=0;o<Fu.length;o++)Vt(Fu[o],r);break;case"source":Vt("error",r);break;case"img":case"image":case"link":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"input":Vt("invalid",r),Xl(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Vt("invalid",r);break;case"textarea":Vt("invalid",r),Li(r,h.value,h.defaultValue,h.children)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||h.suppressHydrationWarning===!0||$0(r.textContent,o)?(h.popover!=null&&(Vt("beforetoggle",r),Vt("toggle",r)),h.onScroll!=null&&Vt("scroll",r),h.onScrollEnd!=null&&Vt("scrollend",r),h.onClick!=null&&(r.onclick=Es),r=!0):r=!1,r||mr(n,!0)}function bo(n){for($n=n.return;$n;)switch($n.tag){case 5:case 31:case 13:tn=!1;return;case 27:case 3:tn=!0;return;default:$n=$n.return}}function xa(n){if(n!==$n)return!1;if(!Rt)return bo(n),Rt=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||bp(n.type,n.memoizedProps)),o=!o),o&&Bt&&mr(n),bo(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Bt=e1(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Bt=e1(n)}else r===27?(r=Bt,Do(n.type)?(n=Ep,Ep=null,Bt=n):Bt=r):Bt=$n?si(n.stateNode.nextSibling):null;return!0}function wa(){Bt=$n=null,Rt=!1}function Ki(){var n=es;return n!==null&&(ys===null?ys=n:ys.push.apply(ys,n),es=null),n}function js(n){es===null?es=[n]:es.push(n)}var Eu=M(null),Sa=null,bi=null;function Xi(n,r,o){ie(Eu,r._currentValue),r._currentValue=o}function _i(n){n._currentValue=Eu.current,se(Eu)}function Tu(n,r,o){for(;n!==null;){var h=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),n===o)break;n=n.return}}function Cu(n,r,o,h){var y=n.child;for(y!==null&&(y.return=n);y!==null;){var w=y.dependencies;if(w!==null){var j=y.child;w=w.firstContext;e:for(;w!==null;){var P=w;w=y;for(var re=0;re<r.length;re++)if(P.context===r[re]){w.lanes|=o,P=w.alternate,P!==null&&(P.lanes|=o),Tu(w.return,o,n),h||(j=null);break e}w=P.next}}else if(y.tag===18){if(j=y.return,j===null)throw Error(i(341));j.lanes|=o,w=j.alternate,w!==null&&(w.lanes|=o),Tu(j,o,n),j=null}else j=y.child;if(j!==null)j.return=y;else for(j=y;j!==null;){if(j===n){j=null;break}if(y=j.sibling,y!==null){y.return=j.return,j=y;break}j=j.return}y=j}}function _o(n,r,o,h){n=null;for(var y=r,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var j=y.alternate;if(j===null)throw Error(i(387));if(j=j.memoizedProps,j!==null){var P=y.type;Ur(y.pendingProps.value,j.value)||(n!==null?n.push(P):n=[P])}}else if(y===ye.current){if(j=y.alternate,j===null)throw Error(i(387));j.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(n!==null?n.push(Wu):n=[Wu])}y=y.return}n!==null&&Cu(r,n,o,h),r.flags|=262144}function Nl(n){for(n=n.firstContext;n!==null;){if(!Ur(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ea(n){Sa=n,bi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nr(n){return nd(Sa,n)}function Al(n,r){return Sa===null&&Ea(n),nd(n,r)}function nd(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},bi===null){if(n===null)throw Error(i(308));bi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else bi=bi.next=r;return o}var rd=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,h){n.push(h)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},mc=s.unstable_scheduleCallback,ti=s.unstable_NormalPriority,Un={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nu(){return{controller:new rd,data:new Map,refCount:0}}function jl(n){n.refCount--,n.refCount===0&&mc(ti,function(){n.controller.abort()})}var xo=null,pc=0,wo=0,Ta=null;function Ji(n,r){if(xo===null){var o=xo=[];pc=0,wo=up(),Ta={status:"pending",value:void 0,then:function(h){o.push(h)}}}return pc++,r.then(So,So),r}function So(){if(--pc===0&&xo!==null){Ta!==null&&(Ta.status="fulfilled");var n=xo;xo=null,wo=0,Ta=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function sd(n,r){var o=[],h={status:"pending",value:null,reason:null,then:function(y){o.push(y)}};return n.then(function(){h.status="fulfilled",h.value=r;for(var y=0;y<o.length;y++)(0,o[y])(r)},function(y){for(h.status="rejected",h.reason=y,y=0;y<o.length;y++)(0,o[y])(void 0)}),h}var g=te.S;te.S=function(n,r){p0=Lt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ji(n,r),g!==null&&g(n,r)};var b=M(null);function d(){var n=b.current;return n!==null?n:bn.pooledCache}function v(n,r){r===null?ie(b,b.current):ie(b,r.pool)}function _(){var n=d();return n===null?null:{parent:Un._currentValue,pool:n}}var S=Error(i(460)),T=Error(i(474)),k=Error(i(542)),D={then:function(){}};function I(n){return n=n.status,n==="fulfilled"||n==="rejected"}function U(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Es,Es),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ne(n),n;default:if(typeof r.status=="string")r.then(Es,Es);else{if(n=bn,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(h){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=h}},function(h){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ne(n),n}throw ae=r,S}}function Q(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ae=o,S):o}}var ae=null;function ce(){if(ae===null)throw Error(i(459));var n=ae;return ae=null,n}function Ne(n){if(n===S||n===k)throw Error(i(483))}var oe=null,we=0;function Ie(n){var r=we;return we+=1,oe===null&&(oe=[]),U(oe,n,r)}function Me(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function et(n,r){throw r.$$typeof===A?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Ke(n){function r(fe,le){if(n){var be=fe.deletions;be===null?(fe.deletions=[le],fe.flags|=16):be.push(le)}}function o(fe,le){if(!n)return null;for(;le!==null;)r(fe,le),le=le.sibling;return null}function h(fe){for(var le=new Map;fe!==null;)fe.key!==null?le.set(fe.key,fe):le.set(fe.index,fe),fe=fe.sibling;return le}function y(fe,le){return fe=Xs(fe,le),fe.index=0,fe.sibling=null,fe}function w(fe,le,be){return fe.index=be,n?(be=fe.alternate,be!==null?(be=be.index,be<le?(fe.flags|=67108866,le):be):(fe.flags|=67108866,le)):(fe.flags|=1048576,le)}function j(fe){return n&&fe.alternate===null&&(fe.flags|=67108866),fe}function P(fe,le,be,Ve){return le===null||le.tag!==6?(le=wu(be,fe.mode,Ve),le.return=fe,le):(le=y(le,be),le.return=fe,le)}function re(fe,le,be,Ve){var ht=be.type;return ht===F?Oe(fe,le,be.props.children,Ve,be.key):le!==null&&(le.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===V&&Q(ht)===le.type)?(le=y(le,be.props),Me(le,be),le.return=fe,le):(le=El(be.type,be.key,be.props,null,fe.mode,Ve),Me(le,be),le.return=fe,le)}function _e(fe,le,be,Ve){return le===null||le.tag!==4||le.stateNode.containerInfo!==be.containerInfo||le.stateNode.implementation!==be.implementation?(le=dc(be,fe.mode,Ve),le.return=fe,le):(le=y(le,be.children||[]),le.return=fe,le)}function Oe(fe,le,be,Ve,ht){return le===null||le.tag!==7?(le=Yi(be,fe.mode,Ve,ht),le.return=fe,le):(le=y(le,be),le.return=fe,le)}function Fe(fe,le,be){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=wu(""+le,fe.mode,be),le.return=fe,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case B:return be=El(le.type,le.key,le.props,null,fe.mode,be),Me(be,le),be.return=fe,be;case L:return le=dc(le,fe.mode,be),le.return=fe,le;case V:return le=Q(le),Fe(fe,le,be)}if(He(le)||ee(le))return le=Yi(le,fe.mode,be,null),le.return=fe,le;if(typeof le.then=="function")return Fe(fe,Ie(le),be);if(le.$$typeof===ue)return Fe(fe,Al(fe,le),be);et(fe,le)}return null}function Ee(fe,le,be,Ve){var ht=le!==null?le.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return ht!==null?null:P(fe,le,""+be,Ve);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case B:return be.key===ht?re(fe,le,be,Ve):null;case L:return be.key===ht?_e(fe,le,be,Ve):null;case V:return be=Q(be),Ee(fe,le,be,Ve)}if(He(be)||ee(be))return ht!==null?null:Oe(fe,le,be,Ve,null);if(typeof be.then=="function")return Ee(fe,le,Ie(be),Ve);if(be.$$typeof===ue)return Ee(fe,le,Al(fe,be),Ve);et(fe,be)}return null}function Ae(fe,le,be,Ve,ht){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return fe=fe.get(be)||null,P(le,fe,""+Ve,ht);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case B:return fe=fe.get(Ve.key===null?be:Ve.key)||null,re(le,fe,Ve,ht);case L:return fe=fe.get(Ve.key===null?be:Ve.key)||null,_e(le,fe,Ve,ht);case V:return Ve=Q(Ve),Ae(fe,le,be,Ve,ht)}if(He(Ve)||ee(Ve))return fe=fe.get(be)||null,Oe(le,fe,Ve,ht,null);if(typeof Ve.then=="function")return Ae(fe,le,be,Ie(Ve),ht);if(Ve.$$typeof===ue)return Ae(fe,le,be,Al(le,Ve),ht);et(le,Ve)}return null}function st(fe,le,be,Ve){for(var ht=null,Jt=null,at=le,kt=le=0,Ft=null;at!==null&&kt<be.length;kt++){at.index>kt?(Ft=at,at=null):Ft=at.sibling;var Zt=Ee(fe,at,be[kt],Ve);if(Zt===null){at===null&&(at=Ft);break}n&&at&&Zt.alternate===null&&r(fe,at),le=w(Zt,le,kt),Jt===null?ht=Zt:Jt.sibling=Zt,Jt=Zt,at=Ft}if(kt===be.length)return o(fe,at),Rt&&ds(fe,kt),ht;if(at===null){for(;kt<be.length;kt++)at=Fe(fe,be[kt],Ve),at!==null&&(le=w(at,le,kt),Jt===null?ht=at:Jt.sibling=at,Jt=at);return Rt&&ds(fe,kt),ht}for(at=h(at);kt<be.length;kt++)Ft=Ae(at,fe,kt,be[kt],Ve),Ft!==null&&(n&&Ft.alternate!==null&&at.delete(Ft.key===null?kt:Ft.key),le=w(Ft,le,kt),Jt===null?ht=Ft:Jt.sibling=Ft,Jt=Ft);return n&&at.forEach(function(Po){return r(fe,Po)}),Rt&&ds(fe,kt),ht}function mt(fe,le,be,Ve){if(be==null)throw Error(i(151));for(var ht=null,Jt=null,at=le,kt=le=0,Ft=null,Zt=be.next();at!==null&&!Zt.done;kt++,Zt=be.next()){at.index>kt?(Ft=at,at=null):Ft=at.sibling;var Po=Ee(fe,at,Zt.value,Ve);if(Po===null){at===null&&(at=Ft);break}n&&at&&Po.alternate===null&&r(fe,at),le=w(Po,le,kt),Jt===null?ht=Po:Jt.sibling=Po,Jt=Po,at=Ft}if(Zt.done)return o(fe,at),Rt&&ds(fe,kt),ht;if(at===null){for(;!Zt.done;kt++,Zt=be.next())Zt=Fe(fe,Zt.value,Ve),Zt!==null&&(le=w(Zt,le,kt),Jt===null?ht=Zt:Jt.sibling=Zt,Jt=Zt);return Rt&&ds(fe,kt),ht}for(at=h(at);!Zt.done;kt++,Zt=be.next())Zt=Ae(at,fe,kt,Zt.value,Ve),Zt!==null&&(n&&Zt.alternate!==null&&at.delete(Zt.key===null?kt:Zt.key),le=w(Zt,le,kt),Jt===null?ht=Zt:Jt.sibling=Zt,Jt=Zt);return n&&at.forEach(function(FS){return r(fe,FS)}),Rt&&ds(fe,kt),ht}function vn(fe,le,be,Ve){if(typeof be=="object"&&be!==null&&be.type===F&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case B:e:{for(var ht=be.key;le!==null;){if(le.key===ht){if(ht=be.type,ht===F){if(le.tag===7){o(fe,le.sibling),Ve=y(le,be.props.children),Ve.return=fe,fe=Ve;break e}}else if(le.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===V&&Q(ht)===le.type){o(fe,le.sibling),Ve=y(le,be.props),Me(Ve,be),Ve.return=fe,fe=Ve;break e}o(fe,le);break}else r(fe,le);le=le.sibling}be.type===F?(Ve=Yi(be.props.children,fe.mode,Ve,be.key),Ve.return=fe,fe=Ve):(Ve=El(be.type,be.key,be.props,null,fe.mode,Ve),Me(Ve,be),Ve.return=fe,fe=Ve)}return j(fe);case L:e:{for(ht=be.key;le!==null;){if(le.key===ht)if(le.tag===4&&le.stateNode.containerInfo===be.containerInfo&&le.stateNode.implementation===be.implementation){o(fe,le.sibling),Ve=y(le,be.children||[]),Ve.return=fe,fe=Ve;break e}else{o(fe,le);break}else r(fe,le);le=le.sibling}Ve=dc(be,fe.mode,Ve),Ve.return=fe,fe=Ve}return j(fe);case V:return be=Q(be),vn(fe,le,be,Ve)}if(He(be))return st(fe,le,be,Ve);if(ee(be)){if(ht=ee(be),typeof ht!="function")throw Error(i(150));return be=ht.call(be),mt(fe,le,be,Ve)}if(typeof be.then=="function")return vn(fe,le,Ie(be),Ve);if(be.$$typeof===ue)return vn(fe,le,Al(fe,be),Ve);et(fe,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,le!==null&&le.tag===6?(o(fe,le.sibling),Ve=y(le,be),Ve.return=fe,fe=Ve):(o(fe,le),Ve=wu(be,fe.mode,Ve),Ve.return=fe,fe=Ve),j(fe)):o(fe,le)}return function(fe,le,be,Ve){try{we=0;var ht=vn(fe,le,be,Ve);return oe=null,ht}catch(at){if(at===S||at===k)throw at;var Jt=fr(29,at,null,fe.mode);return Jt.lanes=Ve,Jt.return=fe,Jt}}}var ut=Ke(!0),At=Ke(!1),ft=!1;function Dt(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Br(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function rr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function mn(n,r,o){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(nn&2)!==0){var y=h.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),h.pending=r,r=uc(n),xu(n,null,o),r}return cc(n,h,r,o),uc(n)}function xi(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var h=r.lanes;h&=n.pendingLanes,o|=h,r.lanes=o,Ue(n,o)}}function ks(n,r){var o=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var y=null,w=null;if(o=o.firstBaseUpdate,o!==null){do{var j={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};w===null?y=w=j:w=w.next=j,o=o.next}while(o!==null);w===null?y=w=r:w=w.next=r}else y=w=r;o={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var ni=!1;function fs(){if(ni){var n=Ta;if(n!==null)throw n}}function ts(n,r,o,h){ni=!1;var y=n.updateQueue;ft=!1;var w=y.firstBaseUpdate,j=y.lastBaseUpdate,P=y.shared.pending;if(P!==null){y.shared.pending=null;var re=P,_e=re.next;re.next=null,j===null?w=_e:j.next=_e,j=re;var Oe=n.alternate;Oe!==null&&(Oe=Oe.updateQueue,P=Oe.lastBaseUpdate,P!==j&&(P===null?Oe.firstBaseUpdate=_e:P.next=_e,Oe.lastBaseUpdate=re))}if(w!==null){var Fe=y.baseState;j=0,Oe=_e=re=null,P=w;do{var Ee=P.lane&-536870913,Ae=Ee!==P.lane;if(Ae?(zt&Ee)===Ee:(h&Ee)===Ee){Ee!==0&&Ee===wo&&(ni=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var st=n,mt=P;Ee=r;var vn=o;switch(mt.tag){case 1:if(st=mt.payload,typeof st=="function"){Fe=st.call(vn,Fe,Ee);break e}Fe=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=mt.payload,Ee=typeof st=="function"?st.call(vn,Fe,Ee):st,Ee==null)break e;Fe=C({},Fe,Ee);break e;case 2:ft=!0}}Ee=P.callback,Ee!==null&&(n.flags|=64,Ae&&(n.flags|=8192),Ae=y.callbacks,Ae===null?y.callbacks=[Ee]:Ae.push(Ee))}else Ae={lane:Ee,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Oe===null?(_e=Oe=Ae,re=Fe):Oe=Oe.next=Ae,j|=Ee;if(P=P.next,P===null){if(P=y.shared.pending,P===null)break;Ae=P,P=Ae.next,Ae.next=null,y.lastBaseUpdate=Ae,y.shared.pending=null}}while(!0);Oe===null&&(re=Fe),y.baseState=re,y.firstBaseUpdate=_e,y.lastBaseUpdate=Oe,w===null&&(y.shared.lanes=0),No|=j,n.lanes=j,n.memoizedState=Fe}}function un(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function ms(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)un(o[n],r)}var ri=M(null),Rs=M(0);function Ds(n,r){n=Ma,ie(Rs,n),ie(ri,r),Ma=n|r.baseLanes}function Gt(){ie(Rs,Ma),ie(ri,ri.current)}function Gn(){Ma=Rs.current,se(ri),se(Rs)}var ns=M(null),rs=null;function wi(n){var r=n.alternate;ie(Wn,Wn.current&1),ie(ns,n),rs===null&&(r===null||ri.current!==null||r.memoizedState!==null)&&(rs=n)}function gm(n){ie(Wn,Wn.current),ie(ns,n),rs===null&&(rs=n)}function qv(n){n.tag===22?(ie(Wn,Wn.current),ie(ns,n),rs===null&&(rs=n)):Eo()}function Eo(){ie(Wn,Wn.current),ie(ns,ns.current)}function Is(n){se(ns),rs===n&&(rs=null),se(Wn)}var Wn=M(0);function id(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||wp(o)||Sp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ca=0,jt=null,pn=null,sr=null,ad=!1,gc=!1,kl=!1,od=0,Au=0,vc=null,Dw=0;function Bn(){throw Error(i(321))}function vm(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Ur(n[o],r[o]))return!1;return!0}function ym(n,r,o,h,y,w){return Ca=w,jt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,te.H=n===null||n.memoizedState===null?Cy:Im,kl=!1,w=o(h,y),kl=!1,gc&&(w=$v(r,o,h,y)),Hv(n),w}function Hv(n){te.H=Ru;var r=pn!==null&&pn.next!==null;if(Ca=0,sr=pn=jt=null,ad=!1,Au=0,vc=null,r)throw Error(i(300));n===null||ir||(n=n.dependencies,n!==null&&Nl(n)&&(ir=!0))}function $v(n,r,o,h){jt=n;var y=0;do{if(gc&&(vc=null),Au=0,gc=!1,25<=y)throw Error(i(301));if(y+=1,sr=pn=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}te.H=Ny,w=r(o,h)}while(gc);return w}function Iw(){var n=te.H,r=n.useState()[0];return r=typeof r.then=="function"?ju(r):r,n=n.useState()[0],(pn!==null?pn.memoizedState:null)!==n&&(jt.flags|=1024),r}function bm(){var n=od!==0;return od=0,n}function _m(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function xm(n){if(ad){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ad=!1}Ca=0,sr=pn=jt=null,gc=!1,Au=od=0,vc=null}function ss(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?jt.memoizedState=sr=n:sr=sr.next=n,sr}function Yn(){if(pn===null){var n=jt.alternate;n=n!==null?n.memoizedState:null}else n=pn.next;var r=sr===null?jt.memoizedState:sr.next;if(r!==null)sr=r,pn=n;else{if(n===null)throw jt.alternate===null?Error(i(467)):Error(i(310));pn=n,n={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},sr===null?jt.memoizedState=sr=n:sr=sr.next=n}return sr}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ju(n){var r=Au;return Au+=1,vc===null&&(vc=[]),n=U(vc,n,r),r=jt,(sr===null?r.memoizedState:sr.next)===null&&(r=r.alternate,te.H=r===null||r.memoizedState===null?Cy:Im),n}function cd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ju(n);if(n.$$typeof===ue)return nr(n)}throw Error(i(438,String(n)))}function wm(n){var r=null,o=jt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var h=jt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=ld(),jt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),h=0;h<n;h++)o[h]=ne;return r.index++,o}function Na(n,r){return typeof r=="function"?r(n):r}function ud(n){var r=Yn();return Sm(r,pn,n)}function Sm(n,r,o){var h=n.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var y=n.baseQueue,w=h.pending;if(w!==null){if(y!==null){var j=y.next;y.next=w.next,w.next=j}r.baseQueue=y=w,h.pending=null}if(w=n.baseState,y===null)n.memoizedState=w;else{r=y.next;var P=j=null,re=null,_e=r,Oe=!1;do{var Fe=_e.lane&-536870913;if(Fe!==_e.lane?(zt&Fe)===Fe:(Ca&Fe)===Fe){var Ee=_e.revertLane;if(Ee===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),Fe===wo&&(Oe=!0);else if((Ca&Ee)===Ee){_e=_e.next,Ee===wo&&(Oe=!0);continue}else Fe={lane:0,revertLane:_e.revertLane,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},re===null?(P=re=Fe,j=w):re=re.next=Fe,jt.lanes|=Ee,No|=Ee;Fe=_e.action,kl&&o(w,Fe),w=_e.hasEagerState?_e.eagerState:o(w,Fe)}else Ee={lane:Fe,revertLane:_e.revertLane,gesture:_e.gesture,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},re===null?(P=re=Ee,j=w):re=re.next=Ee,jt.lanes|=Fe,No|=Fe;_e=_e.next}while(_e!==null&&_e!==r);if(re===null?j=w:re.next=P,!Ur(w,n.memoizedState)&&(ir=!0,Oe&&(o=Ta,o!==null)))throw o;n.memoizedState=w,n.baseState=j,n.baseQueue=re,h.lastRenderedState=w}return y===null&&(h.lanes=0),[n.memoizedState,h.dispatch]}function Em(n){var r=Yn(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var h=o.dispatch,y=o.pending,w=r.memoizedState;if(y!==null){o.pending=null;var j=y=y.next;do w=n(w,j.action),j=j.next;while(j!==y);Ur(w,r.memoizedState)||(ir=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),o.lastRenderedState=w}return[w,h]}function Gv(n,r,o){var h=jt,y=Yn(),w=Rt;if(w){if(o===void 0)throw Error(i(407));o=o()}else o=r();var j=!Ur((pn||y).memoizedState,o);if(j&&(y.memoizedState=o,ir=!0),y=y.queue,Nm(Qv.bind(null,h,y,n),[n]),y.getSnapshot!==r||j||sr!==null&&sr.memoizedState.tag&1){if(h.flags|=2048,yc(9,{destroy:void 0},Yv.bind(null,h,y,o,r),null),bn===null)throw Error(i(349));w||(Ca&127)!==0||Wv(h,r,o)}return o}function Wv(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=jt.updateQueue,r===null?(r=ld(),jt.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Yv(n,r,o,h){r.value=o,r.getSnapshot=h,Kv(r)&&Xv(n)}function Qv(n,r,o){return o(function(){Kv(r)&&Xv(n)})}function Kv(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Ur(n,o)}catch{return!0}}function Xv(n){var r=Wi(n,2);r!==null&&bs(r,n,2)}function Tm(n){var r=ss();if(typeof n=="function"){var o=n;if(n=o(),kl){Fn(!0);try{o()}finally{Fn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:n},r}function Jv(n,r,o,h){return n.baseState=o,Sm(n,pn,typeof h=="function"?h:Na)}function Mw(n,r,o,h,y){if(fd(n))throw Error(i(485));if(n=r.action,n!==null){var w={payload:y,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){w.listeners.push(j)}};te.T!==null?o(!0):w.isTransition=!1,h(w),o=r.pending,o===null?(w.next=r.pending=w,Zv(r,w)):(w.next=o.next,r.pending=o.next=w)}}function Zv(n,r){var o=r.action,h=r.payload,y=n.state;if(r.isTransition){var w=te.T,j={};te.T=j;try{var P=o(y,h),re=te.S;re!==null&&re(j,P),ey(n,r,P)}catch(_e){Cm(n,r,_e)}finally{w!==null&&j.types!==null&&(w.types=j.types),te.T=w}}else try{w=o(y,h),ey(n,r,w)}catch(_e){Cm(n,r,_e)}}function ey(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){ty(n,r,h)},function(h){return Cm(n,r,h)}):ty(n,r,o)}function ty(n,r,o){r.status="fulfilled",r.value=o,ny(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,Zv(n,o)))}function Cm(n,r,o){var h=n.pending;if(n.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=o,ny(r),r=r.next;while(r!==h)}n.action=null}function ny(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function ry(n,r){return r}function sy(n,r){if(Rt){var o=bn.formState;if(o!==null){e:{var h=jt;if(Rt){if(Bt){t:{for(var y=Bt,w=tn;y.nodeType!==8;){if(!w){y=null;break t}if(y=si(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){Bt=si(y.nextSibling),h=y.data==="F!";break e}}mr(h)}h=!1}h&&(r=o[0])}}return o=ss(),o.memoizedState=o.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ry,lastRenderedState:r},o.queue=h,o=Sy.bind(null,jt,h),h.dispatch=o,h=Tm(!1),w=Dm.bind(null,jt,!1,h.queue),h=ss(),y={state:r,dispatch:null,action:n,pending:null},h.queue=y,o=Mw.bind(null,jt,y,w,o),y.dispatch=o,h.memoizedState=n,[r,o,!1]}function iy(n){var r=Yn();return ay(r,pn,n)}function ay(n,r,o){if(r=Sm(n,r,ry)[0],n=ud(Na)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=ju(r)}catch(j){throw j===S?k:j}else h=r;r=Yn();var y=r.queue,w=y.dispatch;return o!==r.memoizedState&&(jt.flags|=2048,yc(9,{destroy:void 0},Ow.bind(null,y,o),null)),[h,w,n]}function Ow(n,r){n.action=r}function oy(n){var r=Yn(),o=pn;if(o!==null)return ay(r,o,n);Yn(),r=r.memoizedState,o=Yn();var h=o.queue.dispatch;return o.memoizedState=n,[r,h,!1]}function yc(n,r,o,h){return n={tag:n,create:o,deps:h,inst:r,next:null},r=jt.updateQueue,r===null&&(r=ld(),jt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(h=o.next,o.next=n,n.next=h,r.lastEffect=n),n}function ly(){return Yn().memoizedState}function hd(n,r,o,h){var y=ss();jt.flags|=n,y.memoizedState=yc(1|r,{destroy:void 0},o,h===void 0?null:h)}function dd(n,r,o,h){var y=Yn();h=h===void 0?null:h;var w=y.memoizedState.inst;pn!==null&&h!==null&&vm(h,pn.memoizedState.deps)?y.memoizedState=yc(r,w,o,h):(jt.flags|=n,y.memoizedState=yc(1|r,w,o,h))}function cy(n,r){hd(8390656,8,n,r)}function Nm(n,r){dd(2048,8,n,r)}function Lw(n){jt.flags|=4;var r=jt.updateQueue;if(r===null)r=ld(),jt.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function uy(n){var r=Yn().memoizedState;return Lw({ref:r,nextImpl:n}),function(){if((nn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function hy(n,r){return dd(4,2,n,r)}function dy(n,r){return dd(4,4,n,r)}function fy(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function my(n,r,o){o=o!=null?o.concat([n]):null,dd(4,4,fy.bind(null,r,n),o)}function Am(){}function py(n,r){var o=Yn();r=r===void 0?null:r;var h=o.memoizedState;return r!==null&&vm(r,h[1])?h[0]:(o.memoizedState=[n,r],n)}function gy(n,r){var o=Yn();r=r===void 0?null:r;var h=o.memoizedState;if(r!==null&&vm(r,h[1]))return h[0];if(h=n(),kl){Fn(!0);try{n()}finally{Fn(!1)}}return o.memoizedState=[h,r],h}function jm(n,r,o){return o===void 0||(Ca&1073741824)!==0&&(zt&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=v0(),jt.lanes|=n,No|=n,o)}function vy(n,r,o,h){return Ur(o,r)?o:ri.current!==null?(n=jm(n,o,h),Ur(n,r)||(ir=!0),n):(Ca&42)===0||(Ca&1073741824)!==0&&(zt&261930)===0?(ir=!0,n.memoizedState=o):(n=v0(),jt.lanes|=n,No|=n,r)}function yy(n,r,o,h,y){var w=Se.p;Se.p=w!==0&&8>w?w:8;var j=te.T,P={};te.T=P,Dm(n,!1,r,o);try{var re=y(),_e=te.S;if(_e!==null&&_e(P,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Oe=sd(re,h);ku(n,r,Oe,Ls(n))}else ku(n,r,h,Ls(n))}catch(Fe){ku(n,r,{then:function(){},status:"rejected",reason:Fe},Ls())}finally{Se.p=w,j!==null&&P.types!==null&&(j.types=P.types),te.T=j}}function Pw(){}function km(n,r,o,h){if(n.tag!==5)throw Error(i(476));var y=by(n).queue;yy(n,y,r,Pe,o===null?Pw:function(){return _y(n),o(h)})}function by(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Pe,baseState:Pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:Pe},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function _y(n){var r=by(n);r.next===null&&(r=n.alternate.memoizedState),ku(n,r.next.queue,{},Ls())}function Rm(){return nr(Wu)}function xy(){return Yn().memoizedState}function wy(){return Yn().memoizedState}function Vw(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Ls();n=rr(o);var h=mn(r,n,o);h!==null&&(bs(h,r,o),xi(h,r,o)),r={cache:Nu()},n.payload=r;return}r=r.return}}function Uw(n,r,o){var h=Ls();o={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},fd(n)?Ey(r,o):(o=_u(n,r,o,h),o!==null&&(bs(o,n,h),Ty(o,r,h)))}function Sy(n,r,o){var h=Ls();ku(n,r,o,h)}function ku(n,r,o,h){var y={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(fd(n))Ey(r,y);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var j=r.lastRenderedState,P=w(j,o);if(y.hasEagerState=!0,y.eagerState=P,Ur(P,j))return cc(n,r,y,0),bn===null&&Sl(),!1}catch{}if(o=_u(n,r,y,h),o!==null)return bs(o,n,h),Ty(o,r,h),!0}return!1}function Dm(n,r,o,h){if(h={lane:2,revertLane:up(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},fd(n)){if(r)throw Error(i(479))}else r=_u(n,o,h,2),r!==null&&bs(r,n,2)}function fd(n){var r=n.alternate;return n===jt||r!==null&&r===jt}function Ey(n,r){gc=ad=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function Ty(n,r,o){if((o&4194048)!==0){var h=r.lanes;h&=n.pendingLanes,o|=h,r.lanes=o,Ue(n,o)}}var Ru={readContext:nr,use:cd,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useLayoutEffect:Bn,useInsertionEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useSyncExternalStore:Bn,useId:Bn,useHostTransitionStatus:Bn,useFormState:Bn,useActionState:Bn,useOptimistic:Bn,useMemoCache:Bn,useCacheRefresh:Bn};Ru.useEffectEvent=Bn;var Cy={readContext:nr,use:cd,useCallback:function(n,r){return ss().memoizedState=[n,r===void 0?null:r],n},useContext:nr,useEffect:cy,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,hd(4194308,4,fy.bind(null,r,n),o)},useLayoutEffect:function(n,r){return hd(4194308,4,n,r)},useInsertionEffect:function(n,r){hd(4,2,n,r)},useMemo:function(n,r){var o=ss();r=r===void 0?null:r;var h=n();if(kl){Fn(!0);try{n()}finally{Fn(!1)}}return o.memoizedState=[h,r],h},useReducer:function(n,r,o){var h=ss();if(o!==void 0){var y=o(r);if(kl){Fn(!0);try{o(r)}finally{Fn(!1)}}}else y=r;return h.memoizedState=h.baseState=y,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:y},h.queue=n,n=n.dispatch=Uw.bind(null,jt,n),[h.memoizedState,n]},useRef:function(n){var r=ss();return n={current:n},r.memoizedState=n},useState:function(n){n=Tm(n);var r=n.queue,o=Sy.bind(null,jt,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:Am,useDeferredValue:function(n,r){var o=ss();return jm(o,n,r)},useTransition:function(){var n=Tm(!1);return n=yy.bind(null,jt,n.queue,!0,!1),ss().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var h=jt,y=ss();if(Rt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),bn===null)throw Error(i(349));(zt&127)!==0||Wv(h,r,o)}y.memoizedState=o;var w={value:o,getSnapshot:r};return y.queue=w,cy(Qv.bind(null,h,w,n),[n]),h.flags|=2048,yc(9,{destroy:void 0},Yv.bind(null,h,w,o,r),null),o},useId:function(){var n=ss(),r=bn.identifierPrefix;if(Rt){var o=Js,h=As;o=(h&~(1<<32-ln(h)-1)).toString(32)+o,r="_"+r+"R_"+o,o=od++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Dw++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Rm,useFormState:sy,useActionState:sy,useOptimistic:function(n){var r=ss();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Dm.bind(null,jt,!0,o),o.dispatch=r,[n,r]},useMemoCache:wm,useCacheRefresh:function(){return ss().memoizedState=Vw.bind(null,jt)},useEffectEvent:function(n){var r=ss(),o={impl:n};return r.memoizedState=o,function(){if((nn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Im={readContext:nr,use:cd,useCallback:py,useContext:nr,useEffect:Nm,useImperativeHandle:my,useInsertionEffect:hy,useLayoutEffect:dy,useMemo:gy,useReducer:ud,useRef:ly,useState:function(){return ud(Na)},useDebugValue:Am,useDeferredValue:function(n,r){var o=Yn();return vy(o,pn.memoizedState,n,r)},useTransition:function(){var n=ud(Na)[0],r=Yn().memoizedState;return[typeof n=="boolean"?n:ju(n),r]},useSyncExternalStore:Gv,useId:xy,useHostTransitionStatus:Rm,useFormState:iy,useActionState:iy,useOptimistic:function(n,r){var o=Yn();return Jv(o,pn,n,r)},useMemoCache:wm,useCacheRefresh:wy};Im.useEffectEvent=uy;var Ny={readContext:nr,use:cd,useCallback:py,useContext:nr,useEffect:Nm,useImperativeHandle:my,useInsertionEffect:hy,useLayoutEffect:dy,useMemo:gy,useReducer:Em,useRef:ly,useState:function(){return Em(Na)},useDebugValue:Am,useDeferredValue:function(n,r){var o=Yn();return pn===null?jm(o,n,r):vy(o,pn.memoizedState,n,r)},useTransition:function(){var n=Em(Na)[0],r=Yn().memoizedState;return[typeof n=="boolean"?n:ju(n),r]},useSyncExternalStore:Gv,useId:xy,useHostTransitionStatus:Rm,useFormState:oy,useActionState:oy,useOptimistic:function(n,r){var o=Yn();return pn!==null?Jv(o,pn,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:wm,useCacheRefresh:wy};Ny.useEffectEvent=uy;function Mm(n,r,o,h){r=n.memoizedState,o=o(h,r),o=o==null?r:C({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Om={enqueueSetState:function(n,r,o){n=n._reactInternals;var h=Ls(),y=rr(h);y.payload=r,o!=null&&(y.callback=o),r=mn(n,y,h),r!==null&&(bs(r,n,h),xi(r,n,h))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var h=Ls(),y=rr(h);y.tag=1,y.payload=r,o!=null&&(y.callback=o),r=mn(n,y,h),r!==null&&(bs(r,n,h),xi(r,n,h))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Ls(),h=rr(o);h.tag=2,r!=null&&(h.callback=r),r=mn(n,h,o),r!==null&&(bs(r,n,o),xi(r,n,o))}};function Ay(n,r,o,h,y,w,j){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,w,j):r.prototype&&r.prototype.isPureReactComponent?!fo(o,h)||!fo(y,w):!0}function jy(n,r,o,h){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,h),r.state!==n&&Om.enqueueReplaceState(r,r.state,null)}function Rl(n,r){var o=r;if("ref"in r){o={};for(var h in r)h!=="ref"&&(o[h]=r[h])}if(n=n.defaultProps){o===r&&(o=C({},o));for(var y in n)o[y]===void 0&&(o[y]=n[y])}return o}function ky(n){lc(n)}function Ry(n){console.error(n)}function Dy(n){lc(n)}function md(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function Iy(n,r,o){try{var h=n.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Lm(n,r,o){return o=rr(o),o.tag=3,o.payload={element:null},o.callback=function(){md(n,r)},o}function My(n){return n=rr(n),n.tag=3,n}function Oy(n,r,o,h){var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var w=h.value;n.payload=function(){return y(w)},n.callback=function(){Iy(r,o,h)}}var j=o.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(n.callback=function(){Iy(r,o,h),typeof y!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var P=h.stack;this.componentDidCatch(h.value,{componentStack:P!==null?P:""})})}function Bw(n,r,o,h,y){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=o.alternate,r!==null&&_o(r,o,y,!0),o=ns.current,o!==null){switch(o.tag){case 31:case 13:return rs===null?Cd():o.alternate===null&&zn===0&&(zn=3),o.flags&=-257,o.flags|=65536,o.lanes=y,h===D?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([h]):r.add(h),op(n,h,y)),!1;case 22:return o.flags|=65536,h===D?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([h]):o.add(h)),op(n,h,y)),!1}throw Error(i(435,o.tag))}return op(n,h,y),Cd(),!1}if(Rt)return r=ns.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,h!==ei&&(n=Error(i(422),{cause:h}),js(us(n,o)))):(h!==ei&&(r=Error(i(423),{cause:h}),js(us(r,o))),n=n.current.alternate,n.flags|=65536,y&=-y,n.lanes|=y,h=us(h,o),y=Lm(n.stateNode,h,y),ks(n,y),zn!==4&&(zn=2)),!1;var w=Error(i(520),{cause:h});if(w=us(w,o),Uu===null?Uu=[w]:Uu.push(w),zn!==4&&(zn=2),r===null)return!0;h=us(h,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=y&-y,o.lanes|=n,n=Lm(o.stateNode,h,n),ks(o,n),!1;case 1:if(r=o.type,w=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ao===null||!Ao.has(w))))return o.flags|=65536,y&=-y,o.lanes|=y,y=My(y),Oy(y,n,o,h),ks(o,y),!1}o=o.return}while(o!==null);return!1}var Pm=Error(i(461)),ir=!1;function jr(n,r,o,h){r.child=n===null?At(r,null,o,h):ut(r,n.child,o,h)}function Ly(n,r,o,h,y){o=o.render;var w=r.ref;if("ref"in h){var j={};for(var P in h)P!=="ref"&&(j[P]=h[P])}else j=h;return Ea(r),h=ym(n,r,o,j,w,y),P=bm(),n!==null&&!ir?(_m(n,r,y),Aa(n,r,y)):(Rt&&P&&Su(r),r.flags|=1,jr(n,r,h,y),r.child)}function Py(n,r,o,h,y){if(n===null){var w=o.type;return typeof w=="function"&&!go(w)&&w.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=w,Vy(n,r,w,h,y)):(n=El(o.type,null,h,r,r.mode,y),n.ref=r.ref,n.return=r,r.child=n)}if(w=n.child,!$m(n,y)){var j=w.memoizedProps;if(o=o.compare,o=o!==null?o:fo,o(j,h)&&n.ref===r.ref)return Aa(n,r,y)}return r.flags|=1,n=Xs(w,h),n.ref=r.ref,n.return=r,r.child=n}function Vy(n,r,o,h,y){if(n!==null){var w=n.memoizedProps;if(fo(w,h)&&n.ref===r.ref)if(ir=!1,r.pendingProps=h=w,$m(n,y))(n.flags&131072)!==0&&(ir=!0);else return r.lanes=n.lanes,Aa(n,r,y)}return Vm(n,r,o,h,y)}function Uy(n,r,o,h){var y=h.children,w=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((r.flags&128)!==0){if(w=w!==null?w.baseLanes|o:o,n!==null){for(h=r.child=n.child,y=0;h!==null;)y=y|h.lanes|h.childLanes,h=h.sibling;h=y&~w}else h=0,r.child=null;return By(n,r,w,o,h)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&v(r,w!==null?w.cachePool:null),w!==null?Ds(r,w):Gt(),qv(r);else return h=r.lanes=536870912,By(n,r,w!==null?w.baseLanes|o:o,o,h)}else w!==null?(v(r,w.cachePool),Ds(r,w),Eo(),r.memoizedState=null):(n!==null&&v(r,null),Gt(),Eo());return jr(n,r,y,o),r.child}function Du(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function By(n,r,o,h,y){var w=d();return w=w===null?null:{parent:Un._currentValue,pool:w},r.memoizedState={baseLanes:o,cachePool:w},n!==null&&v(r,null),Gt(),qv(r),n!==null&&_o(n,r,h,!0),r.childLanes=y,null}function pd(n,r){return r=vd({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function zy(n,r,o){return ut(r,n.child,null,o),n=pd(r,r.pendingProps),n.flags|=2,Is(r),r.memoizedState=null,n}function zw(n,r,o){var h=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Rt){if(h.mode==="hidden")return n=pd(r,h),r.lanes=536870912,Du(null,n);if(gm(r),(n=Bt)?(n=Z0(n,tn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Qi!==null?{id:As,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},o=Tl(n),o.return=r,r.child=o,$n=r,Bt=null)):n=null,n===null)throw mr(r);return r.lanes=536870912,null}return pd(r,h)}var w=n.memoizedState;if(w!==null){var j=w.dehydrated;if(gm(r),y)if(r.flags&256)r.flags&=-257,r=zy(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(ir||_o(n,r,o,!1),y=(o&n.childLanes)!==0,ir||y){if(h=bn,h!==null&&(j=$e(h,o),j!==0&&j!==w.retryLane))throw w.retryLane=j,Wi(n,j),bs(h,n,j),Pm;Cd(),r=zy(n,r,o)}else n=w.treeContext,Bt=si(j.nextSibling),$n=r,Rt=!0,es=null,tn=!1,n!==null&&Zs(r,n),r=pd(r,h),r.flags|=4096;return r}return n=Xs(n.child,{mode:h.mode,children:h.children}),n.ref=r.ref,r.child=n,n.return=r,n}function gd(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Vm(n,r,o,h,y){return Ea(r),o=ym(n,r,o,h,void 0,y),h=bm(),n!==null&&!ir?(_m(n,r,y),Aa(n,r,y)):(Rt&&h&&Su(r),r.flags|=1,jr(n,r,o,y),r.child)}function Fy(n,r,o,h,y,w){return Ea(r),r.updateQueue=null,o=$v(r,h,o,y),Hv(n),h=bm(),n!==null&&!ir?(_m(n,r,w),Aa(n,r,w)):(Rt&&h&&Su(r),r.flags|=1,jr(n,r,o,w),r.child)}function qy(n,r,o,h,y){if(Ea(r),r.stateNode===null){var w=_a,j=o.contextType;typeof j=="object"&&j!==null&&(w=nr(j)),w=new o(h,w),r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Om,r.stateNode=w,w._reactInternals=r,w=r.stateNode,w.props=h,w.state=r.memoizedState,w.refs={},Dt(r),j=o.contextType,w.context=typeof j=="object"&&j!==null?nr(j):_a,w.state=r.memoizedState,j=o.getDerivedStateFromProps,typeof j=="function"&&(Mm(r,o,j,h),w.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(j=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),j!==w.state&&Om.enqueueReplaceState(w,w.state,null),ts(r,h,w,y),fs(),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(n===null){w=r.stateNode;var P=r.memoizedProps,re=Rl(o,P);w.props=re;var _e=w.context,Oe=o.contextType;j=_a,typeof Oe=="object"&&Oe!==null&&(j=nr(Oe));var Fe=o.getDerivedStateFromProps;Oe=typeof Fe=="function"||typeof w.getSnapshotBeforeUpdate=="function",P=r.pendingProps!==P,Oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P||_e!==j)&&jy(r,w,h,j),ft=!1;var Ee=r.memoizedState;w.state=Ee,ts(r,h,w,y),fs(),_e=r.memoizedState,P||Ee!==_e||ft?(typeof Fe=="function"&&(Mm(r,o,Fe,h),_e=r.memoizedState),(re=ft||Ay(r,o,re,h,Ee,_e,j))?(Oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=_e),w.props=h,w.state=_e,w.context=j,h=re):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{w=r.stateNode,Br(n,r),j=r.memoizedProps,Oe=Rl(o,j),w.props=Oe,Fe=r.pendingProps,Ee=w.context,_e=o.contextType,re=_a,typeof _e=="object"&&_e!==null&&(re=nr(_e)),P=o.getDerivedStateFromProps,(_e=typeof P=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(j!==Fe||Ee!==re)&&jy(r,w,h,re),ft=!1,Ee=r.memoizedState,w.state=Ee,ts(r,h,w,y),fs();var Ae=r.memoizedState;j!==Fe||Ee!==Ae||ft||n!==null&&n.dependencies!==null&&Nl(n.dependencies)?(typeof P=="function"&&(Mm(r,o,P,h),Ae=r.memoizedState),(Oe=ft||Ay(r,o,Oe,h,Ee,Ae,re)||n!==null&&n.dependencies!==null&&Nl(n.dependencies))?(_e||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Ae,re),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Ae,re)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||j===n.memoizedProps&&Ee===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&Ee===n.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=Ae),w.props=h,w.state=Ae,w.context=re,h=Oe):(typeof w.componentDidUpdate!="function"||j===n.memoizedProps&&Ee===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&Ee===n.memoizedState||(r.flags|=1024),h=!1)}return w=h,gd(n,r),h=(r.flags&128)!==0,w||h?(w=r.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:w.render(),r.flags|=1,n!==null&&h?(r.child=ut(r,n.child,null,y),r.child=ut(r,null,o,y)):jr(n,r,o,y),r.memoizedState=w.state,n=r.child):n=Aa(n,r,y),n}function Hy(n,r,o,h){return wa(),r.flags|=256,jr(n,r,o,h),r.child}var Um={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bm(n){return{baseLanes:n,cachePool:_()}}function zm(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Os),n}function $y(n,r,o){var h=r.pendingProps,y=!1,w=(r.flags&128)!==0,j;if((j=w)||(j=n!==null&&n.memoizedState===null?!1:(Wn.current&2)!==0),j&&(y=!0,r.flags&=-129),j=(r.flags&32)!==0,r.flags&=-33,n===null){if(Rt){if(y?wi(r):Eo(),(n=Bt)?(n=Z0(n,tn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Qi!==null?{id:As,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},o=Tl(n),o.return=r,r.child=o,$n=r,Bt=null)):n=null,n===null)throw mr(r);return Sp(n)?r.lanes=32:r.lanes=536870912,null}var P=h.children;return h=h.fallback,y?(Eo(),y=r.mode,P=vd({mode:"hidden",children:P},y),h=Yi(h,y,o,null),P.return=r,h.return=r,P.sibling=h,r.child=P,h=r.child,h.memoizedState=Bm(o),h.childLanes=zm(n,j,o),r.memoizedState=Um,Du(null,h)):(wi(r),Fm(r,P))}var re=n.memoizedState;if(re!==null&&(P=re.dehydrated,P!==null)){if(w)r.flags&256?(wi(r),r.flags&=-257,r=qm(n,r,o)):r.memoizedState!==null?(Eo(),r.child=n.child,r.flags|=128,r=null):(Eo(),P=h.fallback,y=r.mode,h=vd({mode:"visible",children:h.children},y),P=Yi(P,y,o,null),P.flags|=2,h.return=r,P.return=r,h.sibling=P,r.child=h,ut(r,n.child,null,o),h=r.child,h.memoizedState=Bm(o),h.childLanes=zm(n,j,o),r.memoizedState=Um,r=Du(null,h));else if(wi(r),Sp(P)){if(j=P.nextSibling&&P.nextSibling.dataset,j)var _e=j.dgst;j=_e,h=Error(i(419)),h.stack="",h.digest=j,js({value:h,source:null,stack:null}),r=qm(n,r,o)}else if(ir||_o(n,r,o,!1),j=(o&n.childLanes)!==0,ir||j){if(j=bn,j!==null&&(h=$e(j,o),h!==0&&h!==re.retryLane))throw re.retryLane=h,Wi(n,h),bs(j,n,h),Pm;wp(P)||Cd(),r=qm(n,r,o)}else wp(P)?(r.flags|=192,r.child=n.child,r=null):(n=re.treeContext,Bt=si(P.nextSibling),$n=r,Rt=!0,es=null,tn=!1,n!==null&&Zs(r,n),r=Fm(r,h.children),r.flags|=4096);return r}return y?(Eo(),P=h.fallback,y=r.mode,re=n.child,_e=re.sibling,h=Xs(re,{mode:"hidden",children:h.children}),h.subtreeFlags=re.subtreeFlags&65011712,_e!==null?P=Xs(_e,P):(P=Yi(P,y,o,null),P.flags|=2),P.return=r,h.return=r,h.sibling=P,r.child=h,Du(null,h),h=r.child,P=n.child.memoizedState,P===null?P=Bm(o):(y=P.cachePool,y!==null?(re=Un._currentValue,y=y.parent!==re?{parent:re,pool:re}:y):y=_(),P={baseLanes:P.baseLanes|o,cachePool:y}),h.memoizedState=P,h.childLanes=zm(n,j,o),r.memoizedState=Um,Du(n.child,h)):(wi(r),o=n.child,n=o.sibling,o=Xs(o,{mode:"visible",children:h.children}),o.return=r,o.sibling=null,n!==null&&(j=r.deletions,j===null?(r.deletions=[n],r.flags|=16):j.push(n)),r.child=o,r.memoizedState=null,o)}function Fm(n,r){return r=vd({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function vd(n,r){return n=fr(22,n,null,r),n.lanes=0,n}function qm(n,r,o){return ut(r,n.child,null,o),n=Fm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Gy(n,r,o){n.lanes|=r;var h=n.alternate;h!==null&&(h.lanes|=r),Tu(n.return,r,o)}function Hm(n,r,o,h,y,w){var j=n.memoizedState;j===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:y,treeForkCount:w}:(j.isBackwards=r,j.rendering=null,j.renderingStartTime=0,j.last=h,j.tail=o,j.tailMode=y,j.treeForkCount=w)}function Wy(n,r,o){var h=r.pendingProps,y=h.revealOrder,w=h.tail;h=h.children;var j=Wn.current,P=(j&2)!==0;if(P?(j=j&1|2,r.flags|=128):j&=1,ie(Wn,j),jr(n,r,h,o),h=Rt?Cl:0,!P&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Gy(n,o,r);else if(n.tag===19)Gy(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(y){case"forwards":for(o=r.child,y=null;o!==null;)n=o.alternate,n!==null&&id(n)===null&&(y=o),o=o.sibling;o=y,o===null?(y=r.child,r.child=null):(y=o.sibling,o.sibling=null),Hm(r,!1,y,o,w,h);break;case"backwards":case"unstable_legacy-backwards":for(o=null,y=r.child,r.child=null;y!==null;){if(n=y.alternate,n!==null&&id(n)===null){r.child=y;break}n=y.sibling,y.sibling=o,o=y,y=n}Hm(r,!0,o,null,w,h);break;case"together":Hm(r,!1,null,null,void 0,h);break;default:r.memoizedState=null}return r.child}function Aa(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),No|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(_o(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Xs(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Xs(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function $m(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Nl(n)))}function Fw(n,r,o){switch(r.tag){case 3:Le(r,r.stateNode.containerInfo),Xi(r,Un,n.memoizedState.cache),wa();break;case 27:case 5:rt(r);break;case 4:Le(r,r.stateNode.containerInfo);break;case 10:Xi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,gm(r),null;break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(wi(r),r.flags|=128,null):(o&r.child.childLanes)!==0?$y(n,r,o):(wi(r),n=Aa(n,r,o),n!==null?n.sibling:null);wi(r);break;case 19:var y=(n.flags&128)!==0;if(h=(o&r.childLanes)!==0,h||(_o(n,r,o,!1),h=(o&r.childLanes)!==0),y){if(h)return Wy(n,r,o);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ie(Wn,Wn.current),h)break;return null;case 22:return r.lanes=0,Uy(n,r,o,r.pendingProps);case 24:Xi(r,Un,n.memoizedState.cache)}return Aa(n,r,o)}function Yy(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)ir=!0;else{if(!$m(n,o)&&(r.flags&128)===0)return ir=!1,Fw(n,r,o);ir=(n.flags&131072)!==0}else ir=!1,Rt&&(r.flags&1048576)!==0&&Ar(r,Cl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var h=r.pendingProps;if(n=Q(r.elementType),r.type=n,typeof n=="function")go(n)?(h=Rl(n,h),r.tag=1,r=qy(null,r,n,h,o)):(r.tag=0,r=Vm(null,r,n,h,o));else{if(n!=null){var y=n.$$typeof;if(y===K){r.tag=11,r=Ly(null,r,n,h,o);break e}else if(y===q){r.tag=14,r=Py(null,r,n,h,o);break e}}throw r=Re(n)||n,Error(i(306,r,""))}}return r;case 0:return Vm(n,r,r.type,r.pendingProps,o);case 1:return h=r.type,y=Rl(h,r.pendingProps),qy(n,r,h,y,o);case 3:e:{if(Le(r,r.stateNode.containerInfo),n===null)throw Error(i(387));h=r.pendingProps;var w=r.memoizedState;y=w.element,Br(n,r),ts(r,h,null,o);var j=r.memoizedState;if(h=j.cache,Xi(r,Un,h),h!==w.cache&&Cu(r,[Un],o,!0),fs(),h=j.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:j.cache},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){r=Hy(n,r,h,o);break e}else if(h!==y){y=us(Error(i(424)),r),js(y),r=Hy(n,r,h,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Bt=si(n.firstChild),$n=r,Rt=!0,es=null,tn=!0,o=At(r,null,h,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(wa(),h===y){r=Aa(n,r,o);break e}jr(n,r,h,o)}r=r.child}return r;case 26:return gd(n,r),n===null?(o=i1(r.type,null,r.pendingProps,null))?r.memoizedState=o:Rt||(o=r.type,n=r.pendingProps,h=Id(de.current).createElement(o),h[ct]=r,h[_t]=n,kr(h,o,n),Ln(h),r.stateNode=h):r.memoizedState=i1(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return rt(r),n===null&&Rt&&(h=r.stateNode=n1(r.type,r.pendingProps,de.current),$n=r,tn=!0,y=Bt,Do(r.type)?(Ep=y,Bt=si(h.firstChild)):Bt=y),jr(n,r,r.pendingProps.children,o),gd(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Rt&&((y=h=Bt)&&(h=yS(h,r.type,r.pendingProps,tn),h!==null?(r.stateNode=h,$n=r,Bt=si(h.firstChild),tn=!1,y=!0):y=!1),y||mr(r)),rt(r),y=r.type,w=r.pendingProps,j=n!==null?n.memoizedProps:null,h=w.children,bp(y,w)?h=null:j!==null&&bp(y,j)&&(r.flags|=32),r.memoizedState!==null&&(y=ym(n,r,Iw,null,null,o),Wu._currentValue=y),gd(n,r),jr(n,r,h,o),r.child;case 6:return n===null&&Rt&&((n=o=Bt)&&(o=bS(o,r.pendingProps,tn),o!==null?(r.stateNode=o,$n=r,Bt=null,n=!0):n=!1),n||mr(r)),null;case 13:return $y(n,r,o);case 4:return Le(r,r.stateNode.containerInfo),h=r.pendingProps,n===null?r.child=ut(r,null,h,o):jr(n,r,h,o),r.child;case 11:return Ly(n,r,r.type,r.pendingProps,o);case 7:return jr(n,r,r.pendingProps,o),r.child;case 8:return jr(n,r,r.pendingProps.children,o),r.child;case 12:return jr(n,r,r.pendingProps.children,o),r.child;case 10:return h=r.pendingProps,Xi(r,r.type,h.value),jr(n,r,h.children,o),r.child;case 9:return y=r.type._context,h=r.pendingProps.children,Ea(r),y=nr(y),h=h(y),r.flags|=1,jr(n,r,h,o),r.child;case 14:return Py(n,r,r.type,r.pendingProps,o);case 15:return Vy(n,r,r.type,r.pendingProps,o);case 19:return Wy(n,r,o);case 31:return zw(n,r,o);case 22:return Uy(n,r,o,r.pendingProps);case 24:return Ea(r),h=nr(Un),n===null?(y=d(),y===null&&(y=bn,w=Nu(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=o),y=w),r.memoizedState={parent:h,cache:y},Dt(r),Xi(r,Un,y)):((n.lanes&o)!==0&&(Br(n,r),ts(r,null,null,o),fs()),y=n.memoizedState,w=r.memoizedState,y.parent!==h?(y={parent:h,cache:h},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Xi(r,Un,h)):(h=w.cache,Xi(r,Un,h),h!==y.cache&&Cu(r,[Un],o,!0))),jr(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ja(n){n.flags|=4}function Gm(n,r,o,h,y){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(y&335544128)===y)if(n.stateNode.complete)n.flags|=8192;else if(x0())n.flags|=8192;else throw ae=D,T}else n.flags&=-16777217}function Qy(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!u1(r))if(x0())n.flags|=8192;else throw ae=D,T}function yd(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Jn():536870912,n.lanes|=r,wc|=r)}function Iu(n,r){if(!Rt)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Tn(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,h=0;if(r)for(var y=n.child;y!==null;)o|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)o|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=h,n.childLanes=o,r}function qw(n,r,o){var h=r.pendingProps;switch(yi(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(r),null;case 1:return Tn(r),null;case 3:return o=r.stateNode,h=null,n!==null&&(h=n.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),_i(Un),ze(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(xa(r)?ja(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ki())),Tn(r),null;case 26:var y=r.type,w=r.memoizedState;return n===null?(ja(r),w!==null?(Tn(r),Qy(r,w)):(Tn(r),Gm(r,y,null,h,o))):w?w!==n.memoizedState?(ja(r),Tn(r),Qy(r,w)):(Tn(r),r.flags&=-16777217):(n=n.memoizedProps,n!==h&&ja(r),Tn(r),Gm(r,y,n,h,o)),null;case 27:if(je(r),o=de.current,y=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==h&&ja(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tn(r),null}n=he.current,xa(r)?pr(r):(n=n1(y,h,o),r.stateNode=n,ja(r))}return Tn(r),null;case 5:if(je(r),y=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==h&&ja(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tn(r),null}if(w=he.current,xa(r))pr(r);else{var j=Id(de.current);switch(w){case 1:w=j.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:w=j.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":w=j.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":w=j.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":w=j.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?j.createElement("select",{is:h.is}):j.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?j.createElement(y,{is:h.is}):j.createElement(y)}}w[ct]=r,w[_t]=h;e:for(j=r.child;j!==null;){if(j.tag===5||j.tag===6)w.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===r)break e;for(;j.sibling===null;){if(j.return===null||j.return===r)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}r.stateNode=w;e:switch(kr(w,y,h),y){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ja(r)}}return Tn(r),Gm(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==h&&ja(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(i(166));if(n=de.current,xa(r)){if(n=r.stateNode,o=r.memoizedProps,h=null,y=$n,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}n[ct]=r,n=!!(n.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||$0(n.nodeValue,o)),n||mr(r,!0)}else n=Id(n).createTextNode(h),n[ct]=r,r.stateNode=n}return Tn(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(h=xa(r),o!==null){if(n===null){if(!h)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[ct]=r}else wa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tn(r),n=!1}else o=Ki(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(Is(r),r):(Is(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Tn(r),null;case 13:if(h=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(y=xa(r),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[ct]=r}else wa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tn(r),y=!1}else y=Ki(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Is(r),r):(Is(r),null)}return Is(r),(r.flags&128)!==0?(r.lanes=o,r):(o=h!==null,n=n!==null&&n.memoizedState!==null,o&&(h=r.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==y&&(h.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),yd(r,r.updateQueue),Tn(r),null);case 4:return ze(),n===null&&mp(r.stateNode.containerInfo),Tn(r),null;case 10:return _i(r.type),Tn(r),null;case 19:if(se(Wn),h=r.memoizedState,h===null)return Tn(r),null;if(y=(r.flags&128)!==0,w=h.rendering,w===null)if(y)Iu(h,!1);else{if(zn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(w=id(n),w!==null){for(r.flags|=128,Iu(h,!1),n=w.updateQueue,r.updateQueue=n,yd(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)ed(o,n),o=o.sibling;return ie(Wn,Wn.current&1|2),Rt&&ds(r,h.treeForkCount),r.child}n=n.sibling}h.tail!==null&&Lt()>Sd&&(r.flags|=128,y=!0,Iu(h,!1),r.lanes=4194304)}else{if(!y)if(n=id(w),n!==null){if(r.flags|=128,y=!0,n=n.updateQueue,r.updateQueue=n,yd(r,n),Iu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!Rt)return Tn(r),null}else 2*Lt()-h.renderingStartTime>Sd&&o!==536870912&&(r.flags|=128,y=!0,Iu(h,!1),r.lanes=4194304);h.isBackwards?(w.sibling=r.child,r.child=w):(n=h.last,n!==null?n.sibling=w:r.child=w,h.last=w)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Lt(),n.sibling=null,o=Wn.current,ie(Wn,y?o&1|2:o&1),Rt&&ds(r,h.treeForkCount),n):(Tn(r),null);case 22:case 23:return Is(r),Gn(),h=r.memoizedState!==null,n!==null?n.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(o&536870912)!==0&&(r.flags&128)===0&&(Tn(r),r.subtreeFlags&6&&(r.flags|=8192)):Tn(r),o=r.updateQueue,o!==null&&yd(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==o&&(r.flags|=2048),n!==null&&se(b),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),_i(Un),Tn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Hw(n,r){switch(yi(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return _i(Un),ze(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return je(r),null;case 31:if(r.memoizedState!==null){if(Is(r),r.alternate===null)throw Error(i(340));wa()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Is(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));wa()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return se(Wn),null;case 4:return ze(),null;case 10:return _i(r.type),null;case 22:case 23:return Is(r),Gn(),n!==null&&se(b),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return _i(Un),null;case 25:return null;default:return null}}function Ky(n,r){switch(yi(r),r.tag){case 3:_i(Un),ze();break;case 26:case 27:case 5:je(r);break;case 4:ze();break;case 31:r.memoizedState!==null&&Is(r);break;case 13:Is(r);break;case 19:se(Wn);break;case 10:_i(r.type);break;case 22:case 23:Is(r),Gn(),n!==null&&se(b);break;case 24:_i(Un)}}function Mu(n,r){try{var o=r.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var y=h.next;o=y;do{if((o.tag&n)===n){h=void 0;var w=o.create,j=o.inst;h=w(),j.destroy=h}o=o.next}while(o!==y)}}catch(P){dn(r,r.return,P)}}function To(n,r,o){try{var h=r.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var w=y.next;h=w;do{if((h.tag&n)===n){var j=h.inst,P=j.destroy;if(P!==void 0){j.destroy=void 0,y=r;var re=o,_e=P;try{_e()}catch(Oe){dn(y,re,Oe)}}}h=h.next}while(h!==w)}}catch(Oe){dn(r,r.return,Oe)}}function Xy(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{ms(r,o)}catch(h){dn(n,n.return,h)}}}function Jy(n,r,o){o.props=Rl(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(h){dn(n,r,h)}}function Ou(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var h=n.stateNode;break;case 30:h=n.stateNode;break;default:h=n.stateNode}typeof o=="function"?n.refCleanup=o(h):o.current=h}}catch(y){dn(n,r,y)}}function Zi(n,r){var o=n.ref,h=n.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(y){dn(n,r,y)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(y){dn(n,r,y)}else o.current=null}function Zy(n){var r=n.type,o=n.memoizedProps,h=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break e;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(y){dn(n,n.return,y)}}function Wm(n,r,o){try{var h=n.stateNode;dS(h,n.type,o,r),h[_t]=r}catch(y){dn(n,n.return,y)}}function e0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Do(n.type)||n.tag===4}function Ym(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||e0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Do(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qm(n,r,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Es));else if(h!==4&&(h===27&&Do(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Qm(n,r,o),n=n.sibling;n!==null;)Qm(n,r,o),n=n.sibling}function bd(n,r,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(h!==4&&(h===27&&Do(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(bd(n,r,o),n=n.sibling;n!==null;)bd(n,r,o),n=n.sibling}function t0(n){var r=n.stateNode,o=n.memoizedProps;try{for(var h=n.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);kr(r,h,o),r[ct]=n,r[_t]=o}catch(w){dn(n,n.return,w)}}var ka=!1,ar=!1,Km=!1,n0=typeof WeakSet=="function"?WeakSet:Set,Sr=null;function $w(n,r){if(n=n.containerInfo,vp=Bd,n=gu(n),ac(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var y=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{o.nodeType,w.nodeType}catch{o=null;break e}var j=0,P=-1,re=-1,_e=0,Oe=0,Fe=n,Ee=null;t:for(;;){for(var Ae;Fe!==o||y!==0&&Fe.nodeType!==3||(P=j+y),Fe!==w||h!==0&&Fe.nodeType!==3||(re=j+h),Fe.nodeType===3&&(j+=Fe.nodeValue.length),(Ae=Fe.firstChild)!==null;)Ee=Fe,Fe=Ae;for(;;){if(Fe===n)break t;if(Ee===o&&++_e===y&&(P=j),Ee===w&&++Oe===h&&(re=j),(Ae=Fe.nextSibling)!==null)break;Fe=Ee,Ee=Fe.parentNode}Fe=Ae}o=P===-1||re===-1?null:{start:P,end:re}}else o=null}o=o||{start:0,end:0}}else o=null;for(yp={focusedElem:n,selectionRange:o},Bd=!1,Sr=r;Sr!==null;)if(r=Sr,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Sr=n;else for(;Sr!==null;){switch(r=Sr,w=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)y=n[o],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,o=r,y=w.memoizedProps,w=w.memoizedState,h=o.stateNode;try{var st=Rl(o.type,y);n=h.getSnapshotBeforeUpdate(st,w),h.__reactInternalSnapshotBeforeUpdate=n}catch(mt){dn(o,o.return,mt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)xp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":xp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Sr=n;break}Sr=r.return}}function r0(n,r,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:Da(n,o),h&4&&Mu(5,o);break;case 1:if(Da(n,o),h&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(j){dn(o,o.return,j)}else{var y=Rl(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(y,r,n.__reactInternalSnapshotBeforeUpdate)}catch(j){dn(o,o.return,j)}}h&64&&Xy(o),h&512&&Ou(o,o.return);break;case 3:if(Da(n,o),h&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{ms(n,r)}catch(j){dn(o,o.return,j)}}break;case 27:r===null&&h&4&&t0(o);case 26:case 5:Da(n,o),r===null&&h&4&&Zy(o),h&512&&Ou(o,o.return);break;case 12:Da(n,o);break;case 31:Da(n,o),h&4&&a0(n,o);break;case 13:Da(n,o),h&4&&o0(n,o),h&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=eS.bind(null,o),_S(n,o))));break;case 22:if(h=o.memoizedState!==null||ka,!h){r=r!==null&&r.memoizedState!==null||ar,y=ka;var w=ar;ka=h,(ar=r)&&!w?Ia(n,o,(o.subtreeFlags&8772)!==0):Da(n,o),ka=y,ar=w}break;case 30:break;default:Da(n,o)}}function s0(n){var r=n.alternate;r!==null&&(n.alternate=null,s0(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&di(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var jn=null,ps=!1;function Ra(n,r,o){for(o=o.child;o!==null;)i0(n,r,o),o=o.sibling}function i0(n,r,o){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Rn,o)}catch{}switch(o.tag){case 26:ar||Zi(o,r),Ra(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ar||Zi(o,r);var h=jn,y=ps;Do(o.type)&&(jn=o.stateNode,ps=!1),Ra(n,r,o),Hu(o.stateNode),jn=h,ps=y;break;case 5:ar||Zi(o,r);case 6:if(h=jn,y=ps,jn=null,Ra(n,r,o),jn=h,ps=y,jn!==null)if(ps)try{(jn.nodeType===9?jn.body:jn.nodeName==="HTML"?jn.ownerDocument.body:jn).removeChild(o.stateNode)}catch(w){dn(o,r,w)}else try{jn.removeChild(o.stateNode)}catch(w){dn(o,r,w)}break;case 18:jn!==null&&(ps?(n=jn,X0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),kc(n)):X0(jn,o.stateNode));break;case 4:h=jn,y=ps,jn=o.stateNode.containerInfo,ps=!0,Ra(n,r,o),jn=h,ps=y;break;case 0:case 11:case 14:case 15:To(2,o,r),ar||To(4,o,r),Ra(n,r,o);break;case 1:ar||(Zi(o,r),h=o.stateNode,typeof h.componentWillUnmount=="function"&&Jy(o,r,h)),Ra(n,r,o);break;case 21:Ra(n,r,o);break;case 22:ar=(h=ar)||o.memoizedState!==null,Ra(n,r,o),ar=h;break;default:Ra(n,r,o)}}function a0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{kc(n)}catch(o){dn(r,r.return,o)}}}function o0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{kc(n)}catch(o){dn(r,r.return,o)}}function Gw(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new n0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new n0),r;default:throw Error(i(435,n.tag))}}function _d(n,r){var o=Gw(n);r.forEach(function(h){if(!o.has(h)){o.add(h);var y=tS.bind(null,n,h);h.then(y,y)}})}function gs(n,r){var o=r.deletions;if(o!==null)for(var h=0;h<o.length;h++){var y=o[h],w=n,j=r,P=j;e:for(;P!==null;){switch(P.tag){case 27:if(Do(P.type)){jn=P.stateNode,ps=!1;break e}break;case 5:jn=P.stateNode,ps=!1;break e;case 3:case 4:jn=P.stateNode.containerInfo,ps=!0;break e}P=P.return}if(jn===null)throw Error(i(160));i0(w,j,y),jn=null,ps=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)l0(r,n),r=r.sibling}var Si=null;function l0(n,r){var o=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gs(r,n),vs(n),h&4&&(To(3,n,n.return),Mu(3,n),To(5,n,n.return));break;case 1:gs(r,n),vs(n),h&512&&(ar||o===null||Zi(o,o.return)),h&64&&ka&&(n=n.updateQueue,n!==null&&(h=n.callbacks,h!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var y=Si;if(gs(r,n),vs(n),h&512&&(ar||o===null||Zi(o,o.return)),h&4){var w=o!==null?o.memoizedState:null;if(h=n.memoizedState,o===null)if(h===null)if(n.stateNode===null){e:{h=n.type,o=n.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":w=y.getElementsByTagName("title")[0],(!w||w[as]||w[ct]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(h),y.head.insertBefore(w,y.querySelector("head > title"))),kr(w,h,o),w[ct]=n,Ln(w),h=w;break e;case"link":var j=l1("link","href",y).get(h+(o.href||""));if(j){for(var P=0;P<j.length;P++)if(w=j[P],w.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&w.getAttribute("rel")===(o.rel==null?null:o.rel)&&w.getAttribute("title")===(o.title==null?null:o.title)&&w.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){j.splice(P,1);break t}}w=y.createElement(h),kr(w,h,o),y.head.appendChild(w);break;case"meta":if(j=l1("meta","content",y).get(h+(o.content||""))){for(P=0;P<j.length;P++)if(w=j[P],w.getAttribute("content")===(o.content==null?null:""+o.content)&&w.getAttribute("name")===(o.name==null?null:o.name)&&w.getAttribute("property")===(o.property==null?null:o.property)&&w.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&w.getAttribute("charset")===(o.charSet==null?null:o.charSet)){j.splice(P,1);break t}}w=y.createElement(h),kr(w,h,o),y.head.appendChild(w);break;default:throw Error(i(468,h))}w[ct]=n,Ln(w),h=w}n.stateNode=h}else c1(y,n.type,n.stateNode);else n.stateNode=o1(y,h,n.memoizedProps);else w!==h?(w===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):w.count--,h===null?c1(y,n.type,n.stateNode):o1(y,h,n.memoizedProps)):h===null&&n.stateNode!==null&&Wm(n,n.memoizedProps,o.memoizedProps)}break;case 27:gs(r,n),vs(n),h&512&&(ar||o===null||Zi(o,o.return)),o!==null&&h&4&&Wm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(gs(r,n),vs(n),h&512&&(ar||o===null||Zi(o,o.return)),n.flags&32){y=n.stateNode;try{Pr(y,"")}catch(st){dn(n,n.return,st)}}h&4&&n.stateNode!=null&&(y=n.memoizedProps,Wm(n,y,o!==null?o.memoizedProps:y)),h&1024&&(Km=!0);break;case 6:if(gs(r,n),vs(n),h&4){if(n.stateNode===null)throw Error(i(162));h=n.memoizedProps,o=n.stateNode;try{o.nodeValue=h}catch(st){dn(n,n.return,st)}}break;case 3:if(Ld=null,y=Si,Si=Md(r.containerInfo),gs(r,n),Si=y,vs(n),h&4&&o!==null&&o.memoizedState.isDehydrated)try{kc(r.containerInfo)}catch(st){dn(n,n.return,st)}Km&&(Km=!1,c0(n));break;case 4:h=Si,Si=Md(n.stateNode.containerInfo),gs(r,n),vs(n),Si=h;break;case 12:gs(r,n),vs(n);break;case 31:gs(r,n),vs(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,_d(n,h)));break;case 13:gs(r,n),vs(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(wd=Lt()),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,_d(n,h)));break;case 22:y=n.memoizedState!==null;var re=o!==null&&o.memoizedState!==null,_e=ka,Oe=ar;if(ka=_e||y,ar=Oe||re,gs(r,n),ar=Oe,ka=_e,vs(n),h&8192)e:for(r=n.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(o===null||re||ka||ar||Dl(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){re=o=r;try{if(w=re.stateNode,y)j=w.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{P=re.stateNode;var Fe=re.memoizedProps.style,Ee=Fe!=null&&Fe.hasOwnProperty("display")?Fe.display:null;P.style.display=Ee==null||typeof Ee=="boolean"?"":(""+Ee).trim()}}catch(st){dn(re,re.return,st)}}}else if(r.tag===6){if(o===null){re=r;try{re.stateNode.nodeValue=y?"":re.memoizedProps}catch(st){dn(re,re.return,st)}}}else if(r.tag===18){if(o===null){re=r;try{var Ae=re.stateNode;y?J0(Ae,!0):J0(re.stateNode,!1)}catch(st){dn(re,re.return,st)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=n.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,_d(n,o))));break;case 19:gs(r,n),vs(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,_d(n,h)));break;case 30:break;case 21:break;default:gs(r,n),vs(n)}}function vs(n){var r=n.flags;if(r&2){try{for(var o,h=n.return;h!==null;){if(e0(h)){o=h;break}h=h.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var y=o.stateNode,w=Ym(n);bd(n,w,y);break;case 5:var j=o.stateNode;o.flags&32&&(Pr(j,""),o.flags&=-33);var P=Ym(n);bd(n,P,j);break;case 3:case 4:var re=o.stateNode.containerInfo,_e=Ym(n);Qm(n,_e,re);break;default:throw Error(i(161))}}catch(Oe){dn(n,n.return,Oe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function c0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;c0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Da(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)r0(n,r.alternate,r),r=r.sibling}function Dl(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:To(4,r,r.return),Dl(r);break;case 1:Zi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Jy(r,r.return,o),Dl(r);break;case 27:Hu(r.stateNode);case 26:case 5:Zi(r,r.return),Dl(r);break;case 22:r.memoizedState===null&&Dl(r);break;case 30:Dl(r);break;default:Dl(r)}n=n.sibling}}function Ia(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,y=n,w=r,j=w.flags;switch(w.tag){case 0:case 11:case 15:Ia(y,w,o),Mu(4,w);break;case 1:if(Ia(y,w,o),h=w,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(_e){dn(h,h.return,_e)}if(h=w,y=h.updateQueue,y!==null){var P=h.stateNode;try{var re=y.shared.hiddenCallbacks;if(re!==null)for(y.shared.hiddenCallbacks=null,y=0;y<re.length;y++)un(re[y],P)}catch(_e){dn(h,h.return,_e)}}o&&j&64&&Xy(w),Ou(w,w.return);break;case 27:t0(w);case 26:case 5:Ia(y,w,o),o&&h===null&&j&4&&Zy(w),Ou(w,w.return);break;case 12:Ia(y,w,o);break;case 31:Ia(y,w,o),o&&j&4&&a0(y,w);break;case 13:Ia(y,w,o),o&&j&4&&o0(y,w);break;case 22:w.memoizedState===null&&Ia(y,w,o),Ou(w,w.return);break;case 30:break;default:Ia(y,w,o)}r=r.sibling}}function Xm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&jl(o))}function Jm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&jl(n))}function Ei(n,r,o,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)u0(n,r,o,h),r=r.sibling}function u0(n,r,o,h){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Ei(n,r,o,h),y&2048&&Mu(9,r);break;case 1:Ei(n,r,o,h);break;case 3:Ei(n,r,o,h),y&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&jl(n)));break;case 12:if(y&2048){Ei(n,r,o,h),n=r.stateNode;try{var w=r.memoizedProps,j=w.id,P=w.onPostCommit;typeof P=="function"&&P(j,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(re){dn(r,r.return,re)}}else Ei(n,r,o,h);break;case 31:Ei(n,r,o,h);break;case 13:Ei(n,r,o,h);break;case 23:break;case 22:w=r.stateNode,j=r.alternate,r.memoizedState!==null?w._visibility&2?Ei(n,r,o,h):Lu(n,r):w._visibility&2?Ei(n,r,o,h):(w._visibility|=2,bc(n,r,o,h,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Xm(j,r);break;case 24:Ei(n,r,o,h),y&2048&&Jm(r.alternate,r);break;default:Ei(n,r,o,h)}}function bc(n,r,o,h,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var w=n,j=r,P=o,re=h,_e=j.flags;switch(j.tag){case 0:case 11:case 15:bc(w,j,P,re,y),Mu(8,j);break;case 23:break;case 22:var Oe=j.stateNode;j.memoizedState!==null?Oe._visibility&2?bc(w,j,P,re,y):Lu(w,j):(Oe._visibility|=2,bc(w,j,P,re,y)),y&&_e&2048&&Xm(j.alternate,j);break;case 24:bc(w,j,P,re,y),y&&_e&2048&&Jm(j.alternate,j);break;default:bc(w,j,P,re,y)}r=r.sibling}}function Lu(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,h=r,y=h.flags;switch(h.tag){case 22:Lu(o,h),y&2048&&Xm(h.alternate,h);break;case 24:Lu(o,h),y&2048&&Jm(h.alternate,h);break;default:Lu(o,h)}r=r.sibling}}var Pu=8192;function _c(n,r,o){if(n.subtreeFlags&Pu)for(n=n.child;n!==null;)h0(n,r,o),n=n.sibling}function h0(n,r,o){switch(n.tag){case 26:_c(n,r,o),n.flags&Pu&&n.memoizedState!==null&&DS(o,Si,n.memoizedState,n.memoizedProps);break;case 5:_c(n,r,o);break;case 3:case 4:var h=Si;Si=Md(n.stateNode.containerInfo),_c(n,r,o),Si=h;break;case 22:n.memoizedState===null&&(h=n.alternate,h!==null&&h.memoizedState!==null?(h=Pu,Pu=16777216,_c(n,r,o),Pu=h):_c(n,r,o));break;default:_c(n,r,o)}}function d0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Vu(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var h=r[o];Sr=h,m0(h,n)}d0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)f0(n),n=n.sibling}function f0(n){switch(n.tag){case 0:case 11:case 15:Vu(n),n.flags&2048&&To(9,n,n.return);break;case 3:Vu(n);break;case 12:Vu(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,xd(n)):Vu(n);break;default:Vu(n)}}function xd(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var h=r[o];Sr=h,m0(h,n)}d0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:To(8,r,r.return),xd(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,xd(r));break;default:xd(r)}n=n.sibling}}function m0(n,r){for(;Sr!==null;){var o=Sr;switch(o.tag){case 0:case 11:case 15:To(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:jl(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,Sr=h;else e:for(o=n;Sr!==null;){h=Sr;var y=h.sibling,w=h.return;if(s0(h),h===o){Sr=null;break e}if(y!==null){y.return=w,Sr=y;break e}Sr=w}}}var Ww={getCacheForType:function(n){var r=nr(Un),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return nr(Un).controller.signal}},Yw=typeof WeakMap=="function"?WeakMap:Map,nn=0,bn=null,Pt=null,zt=0,hn=0,Ms=null,Co=!1,xc=!1,Zm=!1,Ma=0,zn=0,No=0,Il=0,ep=0,Os=0,wc=0,Uu=null,ys=null,tp=!1,wd=0,p0=0,Sd=1/0,Ed=null,Ao=null,gr=0,jo=null,Sc=null,Oa=0,np=0,rp=null,g0=null,Bu=0,sp=null;function Ls(){return(nn&2)!==0&&zt!==0?zt&-zt:te.T!==null?up():We()}function v0(){if(Os===0)if((zt&536870912)===0||Rt){var n=Je;Je<<=1,(Je&3932160)===0&&(Je=262144),Os=n}else Os=536870912;return n=ns.current,n!==null&&(n.flags|=32),Os}function bs(n,r,o){(n===bn&&(hn===2||hn===9)||n.cancelPendingCommit!==null)&&(Ec(n,0),ko(n,zt,Os,!1)),Nn(n,o),((nn&2)===0||n!==bn)&&(n===bn&&((nn&2)===0&&(Il|=o),zn===4&&ko(n,zt,Os,!1)),ea(n))}function y0(n,r,o){if((nn&6)!==0)throw Error(i(327));var h=!o&&(r&127)===0&&(r&n.expiredLanes)===0||Kt(n,r),y=h?Xw(n,r):ap(n,r,!0),w=h;do{if(y===0){xc&&!h&&ko(n,r,0,!1);break}else{if(o=n.current.alternate,w&&!Qw(o)){y=ap(n,r,!1),w=!1;continue}if(y===2){if(w=r,n.errorRecoveryDisabledLanes&w)var j=0;else j=n.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){r=j;e:{var P=n;y=Uu;var re=P.current.memoizedState.isDehydrated;if(re&&(Ec(P,j).flags|=256),j=ap(P,j,!1),j!==2){if(Zm&&!re){P.errorRecoveryDisabledLanes|=w,Il|=w,y=4;break e}w=ys,ys=y,w!==null&&(ys===null?ys=w:ys.push.apply(ys,w))}y=j}if(w=!1,y!==2)continue}}if(y===1){Ec(n,0),ko(n,r,0,!0);break}e:{switch(h=n,w=y,w){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ko(h,r,Os,!Co);break e;case 2:ys=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=wd+300-Lt(),10<y)){if(ko(h,r,Os,!Co),yn(h,0,!0)!==0)break e;Oa=r,h.timeoutHandle=Q0(b0.bind(null,h,o,ys,Ed,tp,r,Os,Il,wc,Co,w,"Throttled",-0,0),y);break e}b0(h,o,ys,Ed,tp,r,Os,Il,wc,Co,w,null,-0,0)}}break}while(!0);ea(n)}function b0(n,r,o,h,y,w,j,P,re,_e,Oe,Fe,Ee,Ae){if(n.timeoutHandle=-1,Fe=r.subtreeFlags,Fe&8192||(Fe&16785408)===16785408){Fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Es},h0(r,w,Fe);var st=(w&62914560)===w?wd-Lt():(w&4194048)===w?p0-Lt():0;if(st=IS(Fe,st),st!==null){Oa=w,n.cancelPendingCommit=st(N0.bind(null,n,r,w,o,h,y,j,P,re,Oe,Fe,null,Ee,Ae)),ko(n,w,j,!_e);return}}N0(n,r,w,o,h,y,j,P,re)}function Qw(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var y=o[h],w=y.getSnapshot;y=y.value;try{if(!Ur(w(),y))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ko(n,r,o,h){r&=~ep,r&=~Il,n.suspendedLanes|=r,n.pingedLanes&=~r,h&&(n.warmLanes|=r),h=n.expirationTimes;for(var y=r;0<y;){var w=31-ln(y),j=1<<w;h[w]=-1,y&=~j}o!==0&&pe(n,o,r)}function Td(){return(nn&6)===0?(zu(0),!1):!0}function ip(){if(Pt!==null){if(hn===0)var n=Pt.return;else n=Pt,bi=Sa=null,xm(n),oe=null,we=0,n=Pt;for(;n!==null;)Ky(n.alternate,n),n=n.return;Pt=null}}function Ec(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,pS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Oa=0,ip(),bn=n,Pt=o=Xs(n.current,null),zt=r,hn=0,Ms=null,Co=!1,xc=Kt(n,r),Zm=!1,wc=Os=ep=Il=No=zn=0,ys=Uu=null,tp=!1,(r&8)!==0&&(r|=r&32);var h=n.entangledLanes;if(h!==0)for(n=n.entanglements,h&=r;0<h;){var y=31-ln(h),w=1<<y;r|=n[y],h&=~w}return Ma=r,Sl(),o}function _0(n,r){jt=null,te.H=Ru,r===S||r===k?(r=ce(),hn=3):r===T?(r=ce(),hn=4):hn=r===Pm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ms=r,Pt===null&&(zn=1,md(n,us(r,n.current)))}function x0(){var n=ns.current;return n===null?!0:(zt&4194048)===zt?rs===null:(zt&62914560)===zt||(zt&536870912)!==0?n===rs:!1}function w0(){var n=te.H;return te.H=Ru,n===null?Ru:n}function S0(){var n=te.A;return te.A=Ww,n}function Cd(){zn=4,Co||(zt&4194048)!==zt&&ns.current!==null||(xc=!0),(No&134217727)===0&&(Il&134217727)===0||bn===null||ko(bn,zt,Os,!1)}function ap(n,r,o){var h=nn;nn|=2;var y=w0(),w=S0();(bn!==n||zt!==r)&&(Ed=null,Ec(n,r)),r=!1;var j=zn;e:do try{if(hn!==0&&Pt!==null){var P=Pt,re=Ms;switch(hn){case 8:ip(),j=6;break e;case 3:case 2:case 9:case 6:ns.current===null&&(r=!0);var _e=hn;if(hn=0,Ms=null,Tc(n,P,re,_e),o&&xc){j=0;break e}break;default:_e=hn,hn=0,Ms=null,Tc(n,P,re,_e)}}Kw(),j=zn;break}catch(Oe){_0(n,Oe)}while(!0);return r&&n.shellSuspendCounter++,bi=Sa=null,nn=h,te.H=y,te.A=w,Pt===null&&(bn=null,zt=0,Sl()),j}function Kw(){for(;Pt!==null;)E0(Pt)}function Xw(n,r){var o=nn;nn|=2;var h=w0(),y=S0();bn!==n||zt!==r?(Ed=null,Sd=Lt()+500,Ec(n,r)):xc=Kt(n,r);e:do try{if(hn!==0&&Pt!==null){r=Pt;var w=Ms;t:switch(hn){case 1:hn=0,Ms=null,Tc(n,r,w,1);break;case 2:case 9:if(I(w)){hn=0,Ms=null,T0(r);break}r=function(){hn!==2&&hn!==9||bn!==n||(hn=7),ea(n)},w.then(r,r);break e;case 3:hn=7;break e;case 4:hn=5;break e;case 7:I(w)?(hn=0,Ms=null,T0(r)):(hn=0,Ms=null,Tc(n,r,w,7));break;case 5:var j=null;switch(Pt.tag){case 26:j=Pt.memoizedState;case 5:case 27:var P=Pt;if(j?u1(j):P.stateNode.complete){hn=0,Ms=null;var re=P.sibling;if(re!==null)Pt=re;else{var _e=P.return;_e!==null?(Pt=_e,Nd(_e)):Pt=null}break t}}hn=0,Ms=null,Tc(n,r,w,5);break;case 6:hn=0,Ms=null,Tc(n,r,w,6);break;case 8:ip(),zn=6;break e;default:throw Error(i(462))}}Jw();break}catch(Oe){_0(n,Oe)}while(!0);return bi=Sa=null,te.H=h,te.A=y,nn=o,Pt!==null?0:(bn=null,zt=0,Sl(),zn)}function Jw(){for(;Pt!==null&&!xn();)E0(Pt)}function E0(n){var r=Yy(n.alternate,n,Ma);n.memoizedProps=n.pendingProps,r===null?Nd(n):Pt=r}function T0(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=Fy(o,r,r.pendingProps,r.type,void 0,zt);break;case 11:r=Fy(o,r,r.pendingProps,r.type.render,r.ref,zt);break;case 5:xm(r);default:Ky(o,r),r=Pt=ed(r,Ma),r=Yy(o,r,Ma)}n.memoizedProps=n.pendingProps,r===null?Nd(n):Pt=r}function Tc(n,r,o,h){bi=Sa=null,xm(r),oe=null,we=0;var y=r.return;try{if(Bw(n,y,r,o,zt)){zn=1,md(n,us(o,n.current)),Pt=null;return}}catch(w){if(y!==null)throw Pt=y,w;zn=1,md(n,us(o,n.current)),Pt=null;return}r.flags&32768?(Rt||h===1?n=!0:xc||(zt&536870912)!==0?n=!1:(Co=n=!0,(h===2||h===9||h===3||h===6)&&(h=ns.current,h!==null&&h.tag===13&&(h.flags|=16384))),C0(r,n)):Nd(r)}function Nd(n){var r=n;do{if((r.flags&32768)!==0){C0(r,Co);return}n=r.return;var o=qw(r.alternate,r,Ma);if(o!==null){Pt=o;return}if(r=r.sibling,r!==null){Pt=r;return}Pt=r=n}while(r!==null);zn===0&&(zn=5)}function C0(n,r){do{var o=Hw(n.alternate,n);if(o!==null){o.flags&=32767,Pt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Pt=n;return}Pt=n=o}while(n!==null);zn=6,Pt=null}function N0(n,r,o,h,y,w,j,P,re){n.cancelPendingCommit=null;do Ad();while(gr!==0);if((nn&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(w=r.lanes|r.childLanes,w|=bu,hr(n,o,w,j,P,re),n===bn&&(Pt=bn=null,zt=0),Sc=r,jo=n,Oa=o,np=w,rp=y,g0=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,nS(_r,function(){return D0(),null})):(n.callbackNode=null,n.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=te.T,te.T=null,y=Se.p,Se.p=2,j=nn,nn|=4;try{$w(n,r,o)}finally{nn=j,Se.p=y,te.T=h}}gr=1,A0(),j0(),k0()}}function A0(){if(gr===1){gr=0;var n=jo,r=Sc,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=te.T,te.T=null;var h=Se.p;Se.p=2;var y=nn;nn|=4;try{l0(r,n);var w=yp,j=gu(n.containerInfo),P=w.focusedElem,re=w.selectionRange;if(j!==P&&P&&P.ownerDocument&&Yh(P.ownerDocument.documentElement,P)){if(re!==null&&ac(P)){var _e=re.start,Oe=re.end;if(Oe===void 0&&(Oe=_e),"selectionStart"in P)P.selectionStart=_e,P.selectionEnd=Math.min(Oe,P.value.length);else{var Fe=P.ownerDocument||document,Ee=Fe&&Fe.defaultView||window;if(Ee.getSelection){var Ae=Ee.getSelection(),st=P.textContent.length,mt=Math.min(re.start,st),vn=re.end===void 0?mt:Math.min(re.end,st);!Ae.extend&&mt>vn&&(j=vn,vn=mt,mt=j);var fe=pu(P,mt),le=pu(P,vn);if(fe&&le&&(Ae.rangeCount!==1||Ae.anchorNode!==fe.node||Ae.anchorOffset!==fe.offset||Ae.focusNode!==le.node||Ae.focusOffset!==le.offset)){var be=Fe.createRange();be.setStart(fe.node,fe.offset),Ae.removeAllRanges(),mt>vn?(Ae.addRange(be),Ae.extend(le.node,le.offset)):(be.setEnd(le.node,le.offset),Ae.addRange(be))}}}}for(Fe=[],Ae=P;Ae=Ae.parentNode;)Ae.nodeType===1&&Fe.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<Fe.length;P++){var Ve=Fe[P];Ve.element.scrollLeft=Ve.left,Ve.element.scrollTop=Ve.top}}Bd=!!vp,yp=vp=null}finally{nn=y,Se.p=h,te.T=o}}n.current=r,gr=2}}function j0(){if(gr===2){gr=0;var n=jo,r=Sc,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=te.T,te.T=null;var h=Se.p;Se.p=2;var y=nn;nn|=4;try{r0(n,r.alternate,r)}finally{nn=y,Se.p=h,te.T=o}}gr=3}}function k0(){if(gr===4||gr===3){gr=0,Or();var n=jo,r=Sc,o=Oa,h=g0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?gr=5:(gr=0,Sc=jo=null,R0(n,n.pendingLanes));var y=n.pendingLanes;if(y===0&&(Ao=null),ke(o),r=r.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Rn,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=te.T,y=Se.p,Se.p=2,te.T=null;try{for(var w=n.onRecoverableError,j=0;j<h.length;j++){var P=h[j];w(P.value,{componentStack:P.stack})}}finally{te.T=r,Se.p=y}}(Oa&3)!==0&&Ad(),ea(n),y=n.pendingLanes,(o&261930)!==0&&(y&42)!==0?n===sp?Bu++:(Bu=0,sp=n):Bu=0,zu(0)}}function R0(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,jl(r)))}function Ad(){return A0(),j0(),k0(),D0()}function D0(){if(gr!==5)return!1;var n=jo,r=np;np=0;var o=ke(Oa),h=te.T,y=Se.p;try{Se.p=32>o?32:o,te.T=null,o=rp,rp=null;var w=jo,j=Oa;if(gr=0,Sc=jo=null,Oa=0,(nn&6)!==0)throw Error(i(331));var P=nn;if(nn|=4,f0(w.current),u0(w,w.current,j,o),nn=P,zu(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Rn,w)}catch{}return!0}finally{Se.p=y,te.T=h,R0(n,r)}}function I0(n,r,o){r=us(o,r),r=Lm(n.stateNode,r,2),n=mn(n,r,2),n!==null&&(Nn(n,2),ea(n))}function dn(n,r,o){if(n.tag===3)I0(n,n,o);else for(;r!==null;){if(r.tag===3){I0(r,n,o);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ao===null||!Ao.has(h))){n=us(o,n),o=My(2),h=mn(r,o,2),h!==null&&(Oy(o,h,r,n),Nn(h,2),ea(h));break}}r=r.return}}function op(n,r,o){var h=n.pingCache;if(h===null){h=n.pingCache=new Yw;var y=new Set;h.set(r,y)}else y=h.get(r),y===void 0&&(y=new Set,h.set(r,y));y.has(o)||(Zm=!0,y.add(o),n=Zw.bind(null,n,r,o),r.then(n,n))}function Zw(n,r,o){var h=n.pingCache;h!==null&&h.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,bn===n&&(zt&o)===o&&(zn===4||zn===3&&(zt&62914560)===zt&&300>Lt()-wd?(nn&2)===0&&Ec(n,0):ep|=o,wc===zt&&(wc=0)),ea(n)}function M0(n,r){r===0&&(r=Jn()),n=Wi(n,r),n!==null&&(Nn(n,r),ea(n))}function eS(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),M0(n,o)}function tS(n,r){var o=0;switch(n.tag){case 31:case 13:var h=n.stateNode,y=n.memoizedState;y!==null&&(o=y.retryLane);break;case 19:h=n.stateNode;break;case 22:h=n.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(r),M0(n,o)}function nS(n,r){return Ot(n,r)}var jd=null,Cc=null,lp=!1,kd=!1,cp=!1,Ro=0;function ea(n){n!==Cc&&n.next===null&&(Cc===null?jd=Cc=n:Cc=Cc.next=n),kd=!0,lp||(lp=!0,sS())}function zu(n,r){if(!cp&&kd){cp=!0;do for(var o=!1,h=jd;h!==null;){if(n!==0){var y=h.pendingLanes;if(y===0)var w=0;else{var j=h.suspendedLanes,P=h.pingedLanes;w=(1<<31-ln(42|n)+1)-1,w&=y&~(j&~P),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(o=!0,V0(h,w))}else w=zt,w=yn(h,h===bn?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Kt(h,w)||(o=!0,V0(h,w));h=h.next}while(o);cp=!1}}function rS(){O0()}function O0(){kd=lp=!1;var n=0;Ro!==0&&mS()&&(n=Ro);for(var r=Lt(),o=null,h=jd;h!==null;){var y=h.next,w=L0(h,r);w===0?(h.next=null,o===null?jd=y:o.next=y,y===null&&(Cc=o)):(o=h,(n!==0||(w&3)!==0)&&(kd=!0)),h=y}gr!==0&&gr!==5||zu(n),Ro!==0&&(Ro=0)}function L0(n,r){for(var o=n.suspendedLanes,h=n.pingedLanes,y=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var j=31-ln(w),P=1<<j,re=y[j];re===-1?((P&o)===0||(P&h)!==0)&&(y[j]=xr(P,r)):re<=r&&(n.expiredLanes|=P),w&=~P}if(r=bn,o=zt,o=yn(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h=n.callbackNode,o===0||n===r&&(hn===2||hn===9)||n.cancelPendingCommit!==null)return h!==null&&h!==null&&br(h),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Kt(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(h!==null&&br(h),ke(o)){case 2:case 8:o=Wr;break;case 32:o=_r;break;case 268435456:o=Yr;break;default:o=_r}return h=P0.bind(null,n),o=Ot(o,h),n.callbackPriority=r,n.callbackNode=o,r}return h!==null&&h!==null&&br(h),n.callbackPriority=2,n.callbackNode=null,2}function P0(n,r){if(gr!==0&&gr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ad()&&n.callbackNode!==o)return null;var h=zt;return h=yn(n,n===bn?h:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h===0?null:(y0(n,h,r),L0(n,Lt()),n.callbackNode!=null&&n.callbackNode===o?P0.bind(null,n):null)}function V0(n,r){if(Ad())return null;y0(n,r,!0)}function sS(){gS(function(){(nn&6)!==0?Ot(Ss,rS):O0()})}function up(){if(Ro===0){var n=wo;n===0&&(n=Te,Te<<=1,(Te&261888)===0&&(Te=256)),Ro=n}return Ro}function U0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:io(""+n)}function B0(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function iS(n,r,o,h,y){if(r==="submit"&&o&&o.stateNode===y){var w=U0((y[_t]||null).action),j=h.submitter;j&&(r=(r=j[_t]||null)?U0(r.formAction):j.getAttribute("formAction"),r!==null&&(w=r,j=null));var P=new tr("action","action",null,h,y);n.push({event:P,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ro!==0){var re=j?B0(y,j):new FormData(y);km(o,{pending:!0,data:re,method:y.method,action:w},null,re)}}else typeof w=="function"&&(P.preventDefault(),re=j?B0(y,j):new FormData(y),km(o,{pending:!0,data:re,method:y.method,action:w},w,re))},currentTarget:y}]})}}for(var hp=0;hp<oc.length;hp++){var dp=oc[hp],aS=dp.toLowerCase(),oS=dp[0].toUpperCase()+dp.slice(1);dr(aS,"on"+oS)}dr(Kh,"onAnimationEnd"),dr(Xh,"onAnimationIteration"),dr(Jh,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(mm,"onTransitionRun"),dr(pm,"onTransitionStart"),dr(vu,"onTransitionCancel"),dr(yu,"onTransitionEnd"),qs("onMouseEnter",["mouseout","mouseover"]),qs("onMouseLeave",["mouseout","mouseover"]),qs("onPointerEnter",["pointerout","pointerover"]),qs("onPointerLeave",["pointerout","pointerover"]),Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fu));function z0(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var h=n[o],y=h.event;h=h.listeners;e:{var w=void 0;if(r)for(var j=h.length-1;0<=j;j--){var P=h[j],re=P.instance,_e=P.currentTarget;if(P=P.listener,re!==w&&y.isPropagationStopped())break e;w=P,y.currentTarget=_e;try{w(y)}catch(Oe){lc(Oe)}y.currentTarget=null,w=re}else for(j=0;j<h.length;j++){if(P=h[j],re=P.instance,_e=P.currentTarget,P=P.listener,re!==w&&y.isPropagationStopped())break e;w=P,y.currentTarget=_e;try{w(y)}catch(Oe){lc(Oe)}y.currentTarget=null,w=re}}}}function Vt(n,r){var o=r[Zn];o===void 0&&(o=r[Zn]=new Set);var h=n+"__bubble";o.has(h)||(F0(r,n,2,!1),o.add(h))}function fp(n,r,o){var h=0;r&&(h|=4),F0(o,n,h,r)}var Rd="_reactListening"+Math.random().toString(36).slice(2);function mp(n){if(!n[Rd]){n[Rd]=!0,al.forEach(function(o){o!=="selectionchange"&&(lS.has(o)||fp(o,!1,n),fp(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Rd]||(r[Rd]=!0,fp("selectionchange",!1,r))}}function F0(n,r,o,h){switch(v1(r)){case 2:var y=LS;break;case 8:y=PS;break;default:y=jp}o=y.bind(null,r,o,n),y=void 0,!da||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),h?y!==void 0?n.addEventListener(r,o,{capture:!0,passive:y}):n.addEventListener(r,o,!0):y!==void 0?n.addEventListener(r,o,{passive:y}):n.addEventListener(r,o,!1)}function pp(n,r,o,h,y){var w=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var j=h.tag;if(j===3||j===4){var P=h.stateNode.containerInfo;if(P===y)break;if(j===4)for(j=h.return;j!==null;){var re=j.tag;if((re===3||re===4)&&j.stateNode.containerInfo===y)return;j=j.return}for(;P!==null;){if(j=bt(P),j===null)return;if(re=j.tag,re===5||re===6||re===26||re===27){h=w=j;continue e}P=P.parentNode}}h=h.return}Bi(function(){var _e=w,Oe=os(o),Fe=[];e:{var Ee=Zh.get(n);if(Ee!==void 0){var Ae=tr,st=n;switch(n){case"keypress":if(zi(o)===0)break e;case"keydown":case"keyup":Ae=sc;break;case"focusin":st="focus",Ae=qi;break;case"focusout":st="blur",Ae=qi;break;case"beforeblur":case"afterblur":Ae=qi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=Nt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=N;break;case Kh:case Xh:case Jh:Ae=tc;break;case yu:Ae=$;break;case"scroll":case"scrollend":Ae=An;break;case"wheel":Ae=Ce;break;case"copy":case"cut":case"paste":Ae=nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=gi;break;case"toggle":case"beforetoggle":Ae=wt}var mt=(r&4)!==0,vn=!mt&&(n==="scroll"||n==="scrollend"),fe=mt?Ee!==null?Ee+"Capture":null:Ee;mt=[];for(var le=_e,be;le!==null;){var Ve=le;if(be=Ve.stateNode,Ve=Ve.tag,Ve!==5&&Ve!==26&&Ve!==27||be===null||fe===null||(Ve=Ts(le,fe),Ve!=null&&mt.push(qu(le,Ve,be))),vn)break;le=le.return}0<mt.length&&(Ee=new Ae(Ee,st,null,o,Oe),Fe.push({event:Ee,listeners:mt}))}}if((r&7)===0){e:{if(Ee=n==="mouseover"||n==="pointerover",Ae=n==="mouseout"||n==="pointerout",Ee&&o!==ml&&(st=o.relatedTarget||o.fromElement)&&(bt(st)||st[On]))break e;if((Ae||Ee)&&(Ee=Oe.window===Oe?Oe:(Ee=Oe.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,Ae?(st=o.relatedTarget||o.toElement,Ae=_e,st=st?bt(st):null,st!==null&&(vn=c(st),mt=st.tag,st!==vn||mt!==5&&mt!==27&&mt!==6)&&(st=null)):(Ae=null,st=_e),Ae!==st)){if(mt=Nt,Ve="onMouseLeave",fe="onMouseEnter",le="mouse",(n==="pointerout"||n==="pointerover")&&(mt=gi,Ve="onPointerLeave",fe="onPointerEnter",le="pointer"),vn=Ae==null?Ee:er(Ae),be=st==null?Ee:er(st),Ee=new mt(Ve,le+"leave",Ae,o,Oe),Ee.target=vn,Ee.relatedTarget=be,Ve=null,bt(Oe)===_e&&(mt=new mt(fe,le+"enter",st,o,Oe),mt.target=be,mt.relatedTarget=vn,Ve=mt),vn=Ve,Ae&&st)t:{for(mt=cS,fe=Ae,le=st,be=0,Ve=fe;Ve;Ve=mt(Ve))be++;Ve=0;for(var ht=le;ht;ht=mt(ht))Ve++;for(;0<be-Ve;)fe=mt(fe),be--;for(;0<Ve-be;)le=mt(le),Ve--;for(;be--;){if(fe===le||le!==null&&fe===le.alternate){mt=fe;break t}fe=mt(fe),le=mt(le)}mt=null}else mt=null;Ae!==null&&q0(Fe,Ee,Ae,mt,!1),st!==null&&vn!==null&&q0(Fe,vn,st,mt,!0)}}e:{if(Ee=_e?er(_e):window,Ae=Ee.nodeName&&Ee.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&Ee.type==="file")var Jt=Hh;else if(Fh(Ee))if(uu)Jt=Wh;else{Jt=Gh;var at=hm}else Ae=Ee.nodeName,!Ae||Ae.toLowerCase()!=="input"||Ee.type!=="checkbox"&&Ee.type!=="radio"?_e&&so(_e.elementType)&&(Jt=Hh):Jt=xl;if(Jt&&(Jt=Jt(n,_e))){cu(Fe,Jt,o,Oe);break e}at&&at(n,Ee,_e),n==="focusout"&&_e&&Ee.type==="number"&&_e.memoizedProps.value!=null&&hl(Ee,"number",Ee.value)}switch(at=_e?er(_e):window,n){case"focusin":(Fh(at)||at.contentEditable==="true")&&(va=at,mo=_e,Hi=null);break;case"focusout":Hi=mo=va=null;break;case"mousedown":po=!0;break;case"contextmenu":case"mouseup":case"dragend":po=!1,Qh(Fe,o,Oe);break;case"selectionchange":if(fm)break;case"keydown":case"keyup":Qh(Fe,o,Oe)}var kt;if(Yt)e:{switch(n){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else ga?vi(n,o)&&(Ft="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ft="onCompositionStart");Ft&&(Qs&&o.locale!=="ko"&&(ga||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&ga&&(kt=ao()):($s=Oe,pl="value"in $s?$s.value:$s.textContent,ga=!0)),at=Dd(_e,Ft),0<at.length&&(Ft=new Ys(Ft,n,null,o,Oe),Fe.push({event:Ft,listeners:at}),kt?Ft.data=kt:(kt=pa(o),kt!==null&&(Ft.data=kt)))),(kt=ls?zh(n,o):lu(n,o))&&(Ft=Dd(_e,"onBeforeInput"),0<Ft.length&&(at=new Ys("onBeforeInput","beforeinput",null,o,Oe),Fe.push({event:at,listeners:Ft}),at.data=kt)),iS(Fe,n,_e,o,Oe)}z0(Fe,r)})}function qu(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Dd(n,r){for(var o=r+"Capture",h=[];n!==null;){var y=n,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=Ts(n,o),y!=null&&h.unshift(qu(n,y,w)),y=Ts(n,r),y!=null&&h.push(qu(n,y,w))),n.tag===3)return h;n=n.return}return[]}function cS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function q0(n,r,o,h,y){for(var w=r._reactName,j=[];o!==null&&o!==h;){var P=o,re=P.alternate,_e=P.stateNode;if(P=P.tag,re!==null&&re===h)break;P!==5&&P!==26&&P!==27||_e===null||(re=_e,y?(_e=Ts(o,w),_e!=null&&j.unshift(qu(o,_e,re))):y||(_e=Ts(o,w),_e!=null&&j.push(qu(o,_e,re)))),o=o.return}j.length!==0&&n.push({event:r,listeners:j})}var uS=/\r\n?/g,hS=/\u0000|\uFFFD/g;function H0(n){return(typeof n=="string"?n:""+n).replace(uS,`
`).replace(hS,"")}function $0(n,r){return r=H0(r),H0(n)===r}function gn(n,r,o,h,y,w){switch(o){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||Pr(n,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&Pr(n,""+h);break;case"className":Qr(n,"class",h);break;case"tabIndex":Qr(n,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Qr(n,o,h);break;case"style":fl(n,h,w);break;case"data":if(r!=="object"){Qr(n,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(o);break}h=io(""+h),n.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(o==="formAction"?(r!=="input"&&gn(n,r,"name",y.name,y,null),gn(n,r,"formEncType",y.formEncType,y,null),gn(n,r,"formMethod",y.formMethod,y,null),gn(n,r,"formTarget",y.formTarget,y,null)):(gn(n,r,"encType",y.encType,y,null),gn(n,r,"method",y.method,y,null),gn(n,r,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(o);break}h=io(""+h),n.setAttribute(o,h);break;case"onClick":h!=null&&(n.onclick=Es);break;case"onScroll":h!=null&&Vt("scroll",n);break;case"onScrollEnd":h!=null&&Vt("scrollend",n);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(o=h.__html,o!=null){if(y.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":n.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){n.removeAttribute("xlink:href");break}o=io(""+h),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,""+h):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":h===!0?n.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,h):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?n.setAttribute(o,h):n.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?n.removeAttribute(o):n.setAttribute(o,h);break;case"popover":Vt("beforetoggle",n),Vt("toggle",n),no(n,"popover",h);break;case"xlinkActuate":Pn(n,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Pn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Pn(n,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Pn(n,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Pn(n,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Pn(n,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Pn(n,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Pn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Pn(n,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":no(n,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ec.get(o)||o,no(n,o,h))}}function gp(n,r,o,h,y,w){switch(o){case"style":fl(n,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(o=h.__html,o!=null){if(y.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof h=="string"?Pr(n,h):(typeof h=="number"||typeof h=="bigint")&&Pr(n,""+h);break;case"onScroll":h!=null&&Vt("scroll",n);break;case"onScrollEnd":h!=null&&Vt("scrollend",n);break;case"onClick":h!=null&&(n.onclick=Es);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(y=o.endsWith("Capture"),r=o.slice(2,y?o.length-7:void 0),w=n[_t]||null,w=w!=null?w[o]:null,typeof w=="function"&&n.removeEventListener(r,w,y),typeof h=="function")){typeof w!="function"&&w!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,h,y);break e}o in n?n[o]=h:h===!0?n.setAttribute(o,""):no(n,o,h)}}}function kr(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",n),Vt("load",n);var h=!1,y=!1,w;for(w in o)if(o.hasOwnProperty(w)){var j=o[w];if(j!=null)switch(w){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:gn(n,r,w,j,o,null)}}y&&gn(n,r,"srcSet",o.srcSet,o,null),h&&gn(n,r,"src",o.src,o,null);return;case"input":Vt("invalid",n);var P=w=j=y=null,re=null,_e=null;for(h in o)if(o.hasOwnProperty(h)){var Oe=o[h];if(Oe!=null)switch(h){case"name":y=Oe;break;case"type":j=Oe;break;case"checked":re=Oe;break;case"defaultChecked":_e=Oe;break;case"value":w=Oe;break;case"defaultValue":P=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(137,r));break;default:gn(n,r,h,Oe,o,null)}}Xl(n,w,P,re,_e,j,y,!1);return;case"select":Vt("invalid",n),h=j=w=null;for(y in o)if(o.hasOwnProperty(y)&&(P=o[y],P!=null))switch(y){case"value":w=P;break;case"defaultValue":j=P;break;case"multiple":h=P;default:gn(n,r,y,P,o,null)}r=w,o=j,n.multiple=!!h,r!=null?Oi(n,!!h,r,!1):o!=null&&Oi(n,!!h,o,!0);return;case"textarea":Vt("invalid",n),w=y=h=null;for(j in o)if(o.hasOwnProperty(j)&&(P=o[j],P!=null))switch(j){case"value":h=P;break;case"defaultValue":y=P;break;case"children":w=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:gn(n,r,j,P,o,null)}Li(n,h,y,w);return;case"option":for(re in o)o.hasOwnProperty(re)&&(h=o[re],h!=null)&&(re==="selected"?n.selected=h&&typeof h!="function"&&typeof h!="symbol":gn(n,r,re,h,o,null));return;case"dialog":Vt("beforetoggle",n),Vt("toggle",n),Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":Vt("load",n);break;case"video":case"audio":for(h=0;h<Fu.length;h++)Vt(Fu[h],n);break;case"image":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"embed":case"source":case"link":Vt("error",n),Vt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in o)if(o.hasOwnProperty(_e)&&(h=o[_e],h!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:gn(n,r,_e,h,o,null)}return;default:if(so(r)){for(Oe in o)o.hasOwnProperty(Oe)&&(h=o[Oe],h!==void 0&&gp(n,r,Oe,h,o,void 0));return}}for(P in o)o.hasOwnProperty(P)&&(h=o[P],h!=null&&gn(n,r,P,h,o,null))}function dS(n,r,o,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,j=null,P=null,re=null,_e=null,Oe=null;for(Ae in o){var Fe=o[Ae];if(o.hasOwnProperty(Ae)&&Fe!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":re=Fe;default:h.hasOwnProperty(Ae)||gn(n,r,Ae,null,h,Fe)}}for(var Ee in h){var Ae=h[Ee];if(Fe=o[Ee],h.hasOwnProperty(Ee)&&(Ae!=null||Fe!=null))switch(Ee){case"type":w=Ae;break;case"name":y=Ae;break;case"checked":_e=Ae;break;case"defaultChecked":Oe=Ae;break;case"value":j=Ae;break;case"defaultValue":P=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,r));break;default:Ae!==Fe&&gn(n,r,Ee,Ae,h,Fe)}}ro(n,j,P,re,_e,Oe,w,y);return;case"select":Ae=j=P=Ee=null;for(w in o)if(re=o[w],o.hasOwnProperty(w)&&re!=null)switch(w){case"value":break;case"multiple":Ae=re;default:h.hasOwnProperty(w)||gn(n,r,w,null,h,re)}for(y in h)if(w=h[y],re=o[y],h.hasOwnProperty(y)&&(w!=null||re!=null))switch(y){case"value":Ee=w;break;case"defaultValue":P=w;break;case"multiple":j=w;default:w!==re&&gn(n,r,y,w,h,re)}r=P,o=j,h=Ae,Ee!=null?Oi(n,!!o,Ee,!1):!!h!=!!o&&(r!=null?Oi(n,!!o,r,!0):Oi(n,!!o,o?[]:"",!1));return;case"textarea":Ae=Ee=null;for(P in o)if(y=o[P],o.hasOwnProperty(P)&&y!=null&&!h.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:gn(n,r,P,null,h,y)}for(j in h)if(y=h[j],w=o[j],h.hasOwnProperty(j)&&(y!=null||w!=null))switch(j){case"value":Ee=y;break;case"defaultValue":Ae=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==w&&gn(n,r,j,y,h,w)}Jl(n,Ee,Ae);return;case"option":for(var st in o)Ee=o[st],o.hasOwnProperty(st)&&Ee!=null&&!h.hasOwnProperty(st)&&(st==="selected"?n.selected=!1:gn(n,r,st,null,h,Ee));for(re in h)Ee=h[re],Ae=o[re],h.hasOwnProperty(re)&&Ee!==Ae&&(Ee!=null||Ae!=null)&&(re==="selected"?n.selected=Ee&&typeof Ee!="function"&&typeof Ee!="symbol":gn(n,r,re,Ee,h,Ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in o)Ee=o[mt],o.hasOwnProperty(mt)&&Ee!=null&&!h.hasOwnProperty(mt)&&gn(n,r,mt,null,h,Ee);for(_e in h)if(Ee=h[_e],Ae=o[_e],h.hasOwnProperty(_e)&&Ee!==Ae&&(Ee!=null||Ae!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(i(137,r));break;default:gn(n,r,_e,Ee,h,Ae)}return;default:if(so(r)){for(var vn in o)Ee=o[vn],o.hasOwnProperty(vn)&&Ee!==void 0&&!h.hasOwnProperty(vn)&&gp(n,r,vn,void 0,h,Ee);for(Oe in h)Ee=h[Oe],Ae=o[Oe],!h.hasOwnProperty(Oe)||Ee===Ae||Ee===void 0&&Ae===void 0||gp(n,r,Oe,Ee,h,Ae);return}}for(var fe in o)Ee=o[fe],o.hasOwnProperty(fe)&&Ee!=null&&!h.hasOwnProperty(fe)&&gn(n,r,fe,null,h,Ee);for(Fe in h)Ee=h[Fe],Ae=o[Fe],!h.hasOwnProperty(Fe)||Ee===Ae||Ee==null&&Ae==null||gn(n,r,Fe,Ee,h,Ae)}function G0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),h=0;h<o.length;h++){var y=o[h],w=y.transferSize,j=y.initiatorType,P=y.duration;if(w&&P&&G0(j)){for(j=0,P=y.responseEnd,h+=1;h<o.length;h++){var re=o[h],_e=re.startTime;if(_e>P)break;var Oe=re.transferSize,Fe=re.initiatorType;Oe&&G0(Fe)&&(re=re.responseEnd,j+=Oe*(re<P?1:(P-_e)/(re-_e)))}if(--h,r+=8*(w+j)/(y.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var vp=null,yp=null;function Id(n){return n.nodeType===9?n:n.ownerDocument}function W0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y0(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function bp(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var _p=null;function mS(){var n=window.event;return n&&n.type==="popstate"?n===_p?!1:(_p=n,!0):(_p=null,!1)}var Q0=typeof setTimeout=="function"?setTimeout:void 0,pS=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,gS=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(n){return K0.resolve(null).then(n).catch(vS)}:Q0;function vS(n){setTimeout(function(){throw n})}function Do(n){return n==="head"}function X0(n,r){var o=r,h=0;do{var y=o.nextSibling;if(n.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"||o==="/&"){if(h===0){n.removeChild(y),kc(r);return}h--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")h++;else if(o==="html")Hu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Hu(o);for(var w=o.firstChild;w;){var j=w.nextSibling,P=w.nodeName;w[as]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=j}}else o==="body"&&Hu(n.ownerDocument.body);o=y}while(o);kc(r)}function J0(n,r){var o=n;n=0;do{var h=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=h}while(o)}function xp(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":xp(o),di(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function yS(n,r,o,h){for(;n.nodeType===1;){var y=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(h){if(!n[as])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==y.rel||n.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||n.getAttribute("title")!==(y.title==null?null:y.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(y.src==null?null:y.src)||n.getAttribute("type")!==(y.type==null?null:y.type)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=si(n.nextSibling),n===null)break}return null}function bS(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=si(n.nextSibling),n===null))return null;return n}function Z0(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=si(n.nextSibling),n===null))return null;return n}function wp(n){return n.data==="$?"||n.data==="$~"}function Sp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function _S(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var h=function(){r(),o.removeEventListener("DOMContentLoaded",h)};o.addEventListener("DOMContentLoaded",h),n._reactRetry=h}}function si(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Ep=null;function e1(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return si(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function t1(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function n1(n,r,o){switch(r=Id(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Hu(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);di(n)}var ii=new Map,r1=new Set;function Md(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var La=Se.d;Se.d={f:xS,r:wS,D:SS,C:ES,L:TS,m:CS,X:AS,S:NS,M:jS};function xS(){var n=La.f(),r=Td();return n||r}function wS(n){var r=qn(n);r!==null&&r.tag===5&&r.type==="form"?_y(r):La.r(n)}var Nc=typeof document>"u"?null:document;function s1(n,r,o){var h=Nc;if(h&&typeof r=="string"&&r){var y=Lr(r);y='link[rel="'+n+'"][href="'+y+'"]',typeof o=="string"&&(y+='[crossorigin="'+o+'"]'),r1.has(y)||(r1.add(y),n={rel:n,crossOrigin:o,href:r},h.querySelector(y)===null&&(r=h.createElement("link"),kr(r,"link",n),Ln(r),h.head.appendChild(r)))}}function SS(n){La.D(n),s1("dns-prefetch",n,null)}function ES(n,r){La.C(n,r),s1("preconnect",n,r)}function TS(n,r,o){La.L(n,r,o);var h=Nc;if(h&&n&&r){var y='link[rel="preload"][as="'+Lr(r)+'"]';r==="image"&&o&&o.imageSrcSet?(y+='[imagesrcset="'+Lr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(y+='[imagesizes="'+Lr(o.imageSizes)+'"]')):y+='[href="'+Lr(n)+'"]';var w=y;switch(r){case"style":w=Ac(n);break;case"script":w=jc(n)}ii.has(w)||(n=C({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),ii.set(w,n),h.querySelector(y)!==null||r==="style"&&h.querySelector($u(w))||r==="script"&&h.querySelector(Gu(w))||(r=h.createElement("link"),kr(r,"link",n),Ln(r),h.head.appendChild(r)))}}function CS(n,r){La.m(n,r);var o=Nc;if(o&&n){var h=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Lr(h)+'"][href="'+Lr(n)+'"]',w=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=jc(n)}if(!ii.has(w)&&(n=C({rel:"modulepreload",href:n},r),ii.set(w,n),o.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gu(w)))return}h=o.createElement("link"),kr(h,"link",n),Ln(h),o.head.appendChild(h)}}}function NS(n,r,o){La.S(n,r,o);var h=Nc;if(h&&n){var y=zs(h).hoistableStyles,w=Ac(n);r=r||"default";var j=y.get(w);if(!j){var P={loading:0,preload:null};if(j=h.querySelector($u(w)))P.loading=5;else{n=C({rel:"stylesheet",href:n,"data-precedence":r},o),(o=ii.get(w))&&Tp(n,o);var re=j=h.createElement("link");Ln(re),kr(re,"link",n),re._p=new Promise(function(_e,Oe){re.onload=_e,re.onerror=Oe}),re.addEventListener("load",function(){P.loading|=1}),re.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Od(j,r,h)}j={type:"stylesheet",instance:j,count:1,state:P},y.set(w,j)}}}function AS(n,r){La.X(n,r);var o=Nc;if(o&&n){var h=zs(o).hoistableScripts,y=jc(n),w=h.get(y);w||(w=o.querySelector(Gu(y)),w||(n=C({src:n,async:!0},r),(r=ii.get(y))&&Cp(n,r),w=o.createElement("script"),Ln(w),kr(w,"link",n),o.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function jS(n,r){La.M(n,r);var o=Nc;if(o&&n){var h=zs(o).hoistableScripts,y=jc(n),w=h.get(y);w||(w=o.querySelector(Gu(y)),w||(n=C({src:n,async:!0,type:"module"},r),(r=ii.get(y))&&Cp(n,r),w=o.createElement("script"),Ln(w),kr(w,"link",n),o.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function i1(n,r,o,h){var y=(y=de.current)?Md(y):null;if(!y)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Ac(o.href),o=zs(y).hoistableStyles,h=o.get(r),h||(h={type:"style",instance:null,count:0,state:null},o.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Ac(o.href);var w=zs(y).hoistableStyles,j=w.get(n);if(j||(y=y.ownerDocument||y,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,j),(w=y.querySelector($u(n)))&&!w._p&&(j.instance=w,j.state.loading=5),ii.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ii.set(n,o),w||kS(y,n,o,j.state))),r&&h===null)throw Error(i(528,""));return j}if(r&&h!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=jc(o),o=zs(y).hoistableScripts,h=o.get(r),h||(h={type:"script",instance:null,count:0,state:null},o.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ac(n){return'href="'+Lr(n)+'"'}function $u(n){return'link[rel="stylesheet"]['+n+"]"}function a1(n){return C({},n,{"data-precedence":n.precedence,precedence:null})}function kS(n,r,o,h){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=n.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),kr(r,"link",o),Ln(r),n.head.appendChild(r))}function jc(n){return'[src="'+Lr(n)+'"]'}function Gu(n){return"script[async]"+n}function o1(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var h=n.querySelector('style[data-href~="'+Lr(o.href)+'"]');if(h)return r.instance=h,Ln(h),h;var y=C({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(n.ownerDocument||n).createElement("style"),Ln(h),kr(h,"style",y),Od(h,o.precedence,n),r.instance=h;case"stylesheet":y=Ac(o.href);var w=n.querySelector($u(y));if(w)return r.state.loading|=4,r.instance=w,Ln(w),w;h=a1(o),(y=ii.get(y))&&Tp(h,y),w=(n.ownerDocument||n).createElement("link"),Ln(w);var j=w;return j._p=new Promise(function(P,re){j.onload=P,j.onerror=re}),kr(w,"link",h),r.state.loading|=4,Od(w,o.precedence,n),r.instance=w;case"script":return w=jc(o.src),(y=n.querySelector(Gu(w)))?(r.instance=y,Ln(y),y):(h=o,(y=ii.get(w))&&(h=C({},o),Cp(h,y)),n=n.ownerDocument||n,y=n.createElement("script"),Ln(y),kr(y,"link",h),n.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Od(h,o.precedence,n));return r.instance}function Od(n,r,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,w=y,j=0;j<h.length;j++){var P=h[j];if(P.dataset.precedence===r)w=P;else if(w!==y)break}w?w.parentNode.insertBefore(n,w.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function Tp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Cp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Ld=null;function l1(n,r,o){if(Ld===null){var h=new Map,y=Ld=new Map;y.set(o,h)}else y=Ld,h=y.get(o),h||(h=new Map,y.set(o,h));if(h.has(n))return h;for(h.set(n,null),o=o.getElementsByTagName(n),y=0;y<o.length;y++){var w=o[y];if(!(w[as]||w[ct]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var j=w.getAttribute(r)||"";j=n+j;var P=h.get(j);P?P.push(w):h.set(j,[w])}}return h}function c1(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function RS(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function u1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function DS(n,r,o,h){if(o.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=Ac(h.href),w=r.querySelector($u(y));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Pd.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=w,Ln(w);return}w=r.ownerDocument||r,h=a1(h),(y=ii.get(y))&&Tp(h,y),w=w.createElement("link"),Ln(w);var j=w;j._p=new Promise(function(P,re){j.onload=P,j.onerror=re}),kr(w,"link",h),o.instance=w}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Pd.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var Np=0;function IS(n,r){return n.stylesheets&&n.count===0&&Ud(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var h=setTimeout(function(){if(n.stylesheets&&Ud(n,n.stylesheets),n.unsuspend){var w=n.unsuspend;n.unsuspend=null,w()}},6e4+r);0<n.imgBytes&&Np===0&&(Np=62500*fS());var y=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ud(n,n.stylesheets),n.unsuspend)){var w=n.unsuspend;n.unsuspend=null,w()}},(n.imgBytes>Np?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(h),clearTimeout(y)}}:null}function Pd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ud(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Vd=null;function Ud(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Vd=new Map,r.forEach(MS,n),Vd=null,Pd.call(n))}function MS(n,r){if(!(r.state.loading&4)){var o=Vd.get(n);if(o)var h=o.get(null);else{o=new Map,Vd.set(n,o);for(var y=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var j=y[w];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(o.set(j.dataset.precedence,j),h=j)}h&&o.set(null,h)}y=r.instance,j=y.getAttribute("data-precedence"),w=o.get(j)||h,w===h&&o.set(null,y),o.set(j,y),this.count++,h=Pd.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),w?w.parentNode.insertBefore(y,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(y,n.firstChild)),r.state.loading|=4}}var Wu={$$typeof:ue,Provider:null,Consumer:null,_currentValue:Pe,_currentValue2:Pe,_threadCount:0};function OS(n,r,o,h,y,w,j,P,re){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wn(0),this.hiddenUpdates=wn(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function h1(n,r,o,h,y,w,j,P,re,_e,Oe,Fe){return n=new OS(n,r,o,j,re,_e,Oe,Fe,P),r=1,w===!0&&(r|=24),w=fr(3,null,null,r),n.current=w,w.stateNode=n,r=Nu(),r.refCount++,n.pooledCache=r,r.refCount++,w.memoizedState={element:h,isDehydrated:o,cache:r},Dt(w),n}function d1(n){return n?(n=_a,n):_a}function f1(n,r,o,h,y,w){y=d1(y),h.context===null?h.context=y:h.pendingContext=y,h=rr(r),h.payload={element:o},w=w===void 0?null:w,w!==null&&(h.callback=w),o=mn(n,h,r),o!==null&&(bs(o,n,r),xi(o,n,r))}function m1(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function Ap(n,r){m1(n,r),(n=n.alternate)&&m1(n,r)}function p1(n){if(n.tag===13||n.tag===31){var r=Wi(n,67108864);r!==null&&bs(r,n,67108864),Ap(n,67108864)}}function g1(n){if(n.tag===13||n.tag===31){var r=Ls();r=Z(r);var o=Wi(n,r);o!==null&&bs(o,n,r),Ap(n,r)}}var Bd=!0;function LS(n,r,o,h){var y=te.T;te.T=null;var w=Se.p;try{Se.p=2,jp(n,r,o,h)}finally{Se.p=w,te.T=y}}function PS(n,r,o,h){var y=te.T;te.T=null;var w=Se.p;try{Se.p=8,jp(n,r,o,h)}finally{Se.p=w,te.T=y}}function jp(n,r,o,h){if(Bd){var y=kp(h);if(y===null)pp(n,r,h,zd,o),y1(n,h);else if(US(y,n,r,o,h))h.stopPropagation();else if(y1(n,h),r&4&&-1<VS.indexOf(n)){for(;y!==null;){var w=qn(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var j=yt(w.pendingLanes);if(j!==0){var P=w;for(P.pendingLanes|=2,P.entangledLanes|=2;j;){var re=1<<31-ln(j);P.entanglements[1]|=re,j&=~re}ea(w),(nn&6)===0&&(Sd=Lt()+500,zu(0))}}break;case 31:case 13:P=Wi(w,2),P!==null&&bs(P,w,2),Td(),Ap(w,2)}if(w=kp(h),w===null&&pp(n,r,h,zd,o),w===y)break;y=w}y!==null&&h.stopPropagation()}else pp(n,r,h,null,o)}}function kp(n){return n=os(n),Rp(n)}var zd=null;function Rp(n){if(zd=null,n=bt(n),n!==null){var r=c(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=u(r),n!==null)return n;n=null}else if(o===31){if(n=f(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return zd=n,null}function v1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tr()){case Ss:return 2;case Wr:return 8;case _r:case ui:return 32;case Yr:return 268435456;default:return 32}default:return 32}}var Dp=!1,Io=null,Mo=null,Oo=null,Yu=new Map,Qu=new Map,Lo=[],VS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function y1(n,r){switch(n){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":Mo=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":Yu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qu.delete(r.pointerId)}}function Ku(n,r,o,h,y,w){return n===null||n.nativeEvent!==w?(n={blockedOn:r,domEventName:o,eventSystemFlags:h,nativeEvent:w,targetContainers:[y]},r!==null&&(r=qn(r),r!==null&&p1(r)),n):(n.eventSystemFlags|=h,r=n.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),n)}function US(n,r,o,h,y){switch(r){case"focusin":return Io=Ku(Io,n,r,o,h,y),!0;case"dragenter":return Mo=Ku(Mo,n,r,o,h,y),!0;case"mouseover":return Oo=Ku(Oo,n,r,o,h,y),!0;case"pointerover":var w=y.pointerId;return Yu.set(w,Ku(Yu.get(w)||null,n,r,o,h,y)),!0;case"gotpointercapture":return w=y.pointerId,Qu.set(w,Ku(Qu.get(w)||null,n,r,o,h,y)),!0}return!1}function b1(n){var r=bt(n.target);if(r!==null){var o=c(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){n.blockedOn=r,Qe(n.priority,function(){g1(o)});return}}else if(r===31){if(r=f(o),r!==null){n.blockedOn=r,Qe(n.priority,function(){g1(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fd(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=kp(n.nativeEvent);if(o===null){o=n.nativeEvent;var h=new o.constructor(o.type,o);ml=h,o.target.dispatchEvent(h),ml=null}else return r=qn(o),r!==null&&p1(r),n.blockedOn=o,!1;r.shift()}return!0}function _1(n,r,o){Fd(n)&&o.delete(r)}function BS(){Dp=!1,Io!==null&&Fd(Io)&&(Io=null),Mo!==null&&Fd(Mo)&&(Mo=null),Oo!==null&&Fd(Oo)&&(Oo=null),Yu.forEach(_1),Qu.forEach(_1)}function qd(n,r){n.blockedOn===r&&(n.blockedOn=null,Dp||(Dp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,BS)))}var Hd=null;function x1(n){Hd!==n&&(Hd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Hd===n&&(Hd=null);for(var r=0;r<n.length;r+=3){var o=n[r],h=n[r+1],y=n[r+2];if(typeof h!="function"){if(Rp(h||o)===null)continue;break}var w=qn(o);w!==null&&(n.splice(r,3),r-=3,km(w,{pending:!0,data:y,method:o.method,action:h},h,y))}}))}function kc(n){function r(re){return qd(re,n)}Io!==null&&qd(Io,n),Mo!==null&&qd(Mo,n),Oo!==null&&qd(Oo,n),Yu.forEach(r),Qu.forEach(r);for(var o=0;o<Lo.length;o++){var h=Lo[o];h.blockedOn===n&&(h.blockedOn=null)}for(;0<Lo.length&&(o=Lo[0],o.blockedOn===null);)b1(o),o.blockedOn===null&&Lo.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var y=o[h],w=o[h+1],j=y[_t]||null;if(typeof w=="function")j||x1(o);else if(j){var P=null;if(w&&w.hasAttribute("formAction")){if(y=w,j=w[_t]||null)P=j.formAction;else if(Rp(y)!==null)continue}else P=j.action;typeof P=="function"?o[h+1]=P:(o.splice(h,3),h-=3),x1(o)}}}function w1(){function n(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(j){return y=j})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),h||setTimeout(o,20)}function o(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,y=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){h=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Ip(n){this._internalRoot=n}$d.prototype.render=Ip.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,h=Ls();f1(o,h,n,r,null,null)},$d.prototype.unmount=Ip.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;f1(n.current,2,null,n,null,null),Td(),r[On]=null}};function $d(n){this._internalRoot=n}$d.prototype.unstable_scheduleHydration=function(n){if(n){var r=We();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Lo.length&&r!==0&&r<Lo[o].priority;o++);Lo.splice(o,0,n),o===0&&b1(n)}};var S1=e.version;if(S1!=="19.2.4")throw Error(i(527,S1,"19.2.4"));Se.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=x(r),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var zS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{Rn=Gd.inject(zS),on=Gd}catch{}}return Ju.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,h="",y=ky,w=Ry,j=Dy;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(j=r.onRecoverableError)),r=h1(n,1,!1,null,null,o,h,null,y,w,j,w1),n[On]=r.current,mp(n),new Ip(r)},Ju.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var h=!1,y="",w=ky,j=Ry,P=Dy,re=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onUncaughtError!==void 0&&(w=o.onUncaughtError),o.onCaughtError!==void 0&&(j=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError),o.formState!==void 0&&(re=o.formState)),r=h1(n,1,!0,r,o??null,h,y,re,w,j,P,w1),r.context=d1(null),o=r.current,h=Ls(),h=Z(h),y=rr(h),y.callback=null,mn(o,y,h),o=h,r.current.lanes=o,Nn(r,o),ea(r),n[On]=r.current,mp(n),new $d(r)},Ju.version="19.2.4",Ju}var I1;function JS(){if(I1)return Lp.exports;I1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Lp.exports=XS(),Lp.exports}var ZS=JS();var M1="popstate";function eE(s={}){function e(i,a){let{pathname:c,search:u,hash:f}=i.location;return lg("",{pathname:c,search:u,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:ph(a)}return nE(e,t,null,s)}function kn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ki(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tE(){return Math.random().toString(36).substring(2,10)}function O1(s,e){return{usr:s.state,key:s.key,idx:e}}function lg(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Xc(e):e,state:t,key:e&&e.key||i||tE()}}function ph({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Xc(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function nE(s,e,t,i={}){let{window:a=document.defaultView,v5Compat:c=!1}=i,u=a.history,f="POP",p=null,x=E();x==null&&(x=0,u.replaceState({...u.state,idx:x},""));function E(){return(u.state||{idx:null}).idx}function C(){f="POP";let H=E(),J=H==null?null:H-x;x=H,p&&p({action:f,location:F.location,delta:J})}function A(H,J){f="PUSH";let Y=lg(F.location,H,J);x=E()+1;let ue=O1(Y,x),K=F.createHref(Y);try{u.pushState(ue,"",K)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;a.location.assign(K)}c&&p&&p({action:f,location:F.location,delta:1})}function B(H,J){f="REPLACE";let Y=lg(F.location,H,J);x=E();let ue=O1(Y,x),K=F.createHref(Y);u.replaceState(ue,"",K),c&&p&&p({action:f,location:F.location,delta:0})}function L(H){return rE(H)}let F={get action(){return f},get location(){return s(a,u)},listen(H){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(M1,C),p=H,()=>{a.removeEventListener(M1,C),p=null}},createHref(H){return e(a,H)},createURL:L,encodeLocation(H){let J=L(H);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:A,replace:B,go(H){return u.go(H)}};return F}function rE(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),kn(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:ph(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function A_(s,e,t="/"){return sE(s,e,t,!1)}function sE(s,e,t,i){let a=typeof e=="string"?Xc(e):e,c=$a(a.pathname||"/",t);if(c==null)return null;let u=j_(s);iE(u);let f=null;for(let p=0;f==null&&p<u.length;++p){let x=gE(c);f=mE(u[p],x,i)}return f}function j_(s,e=[],t=[],i="",a=!1){let c=(u,f,p=a,x)=>{let E={relativePath:x===void 0?u.path||"":x,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(i)&&p)return;kn(E.relativePath.startsWith(i),`Absolute route path "${E.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(i.length)}let C=za([i,E.relativePath]),A=t.concat(E);u.children&&u.children.length>0&&(kn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),j_(u.children,e,A,C,p)),!(u.path==null&&!u.index)&&e.push({path:C,score:dE(C,u.index),routesMeta:A})};return s.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))c(u,f);else for(let p of k_(u.path))c(u,f,!0,p)}),e}function k_(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),c=t.replace(/\?$/,"");if(i.length===0)return a?[c,""]:[c];let u=k_(i.join("/")),f=[];return f.push(...u.map(p=>p===""?c:[c,p].join("/"))),a&&f.push(...u),f.map(p=>s.startsWith("/")&&p===""?"/":p)}function iE(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:fE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var aE=/^:[\w-]+$/,oE=3,lE=2,cE=1,uE=10,hE=-2,L1=s=>s==="*";function dE(s,e){let t=s.split("/"),i=t.length;return t.some(L1)&&(i+=hE),e&&(i+=lE),t.filter(a=>!L1(a)).reduce((a,c)=>a+(aE.test(c)?oE:c===""?cE:uE),i)}function fE(s,e){return s.length===e.length&&s.slice(0,-1).every((i,a)=>i===e[a])?s[s.length-1]-e[e.length-1]:0}function mE(s,e,t=!1){let{routesMeta:i}=s,a={},c="/",u=[];for(let f=0;f<i.length;++f){let p=i[f],x=f===i.length-1,E=c==="/"?e:e.slice(c.length)||"/",C=vf({path:p.relativePath,caseSensitive:p.caseSensitive,end:x},E),A=p.route;if(!C&&x&&t&&!i[i.length-1].route.index&&(C=vf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!C)return null;Object.assign(a,C.params),u.push({params:a,pathname:za([c,C.pathname]),pathnameBase:_E(za([c,C.pathnameBase])),route:A}),C.pathnameBase!=="/"&&(c=za([c,C.pathnameBase]))}return u}function vf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=pE(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let c=a[0],u=c.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((x,{paramName:E,isOptional:C},A)=>{if(E==="*"){let L=f[A]||"";u=c.slice(0,c.length-L.length).replace(/(.)\/+$/,"$1")}const B=f[A];return C&&!B?x[E]=void 0:x[E]=(B||"").replace(/%2F/g,"/"),x},{}),pathname:c,pathnameBase:u,pattern:s}}function pE(s,e=!1,t=!0){ki(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function gE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ki(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function $a(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var vE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function yE(s,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof s=="string"?Xc(s):s,c;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?c=P1(t.substring(1),"/"):c=P1(t,e)):c=e,{pathname:c,search:xE(i),hash:wE(a)}}function P1(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Bp(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bE(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Fg(s){let e=bE(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function qg(s,e,t,i=!1){let a;typeof s=="string"?a=Xc(s):(a={...s},kn(!a.pathname||!a.pathname.includes("?"),Bp("?","pathname","search",a)),kn(!a.pathname||!a.pathname.includes("#"),Bp("#","pathname","hash",a)),kn(!a.search||!a.search.includes("#"),Bp("#","search","hash",a)));let c=s===""||a.pathname==="",u=c?"/":a.pathname,f;if(u==null)f=t;else{let C=e.length-1;if(!i&&u.startsWith("..")){let A=u.split("/");for(;A[0]==="..";)A.shift(),C-=1;a.pathname=A.join("/")}f=C>=0?e[C]:"/"}let p=yE(a,f),x=u&&u!=="/"&&u.endsWith("/"),E=(c||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(x||E)&&(p.pathname+="/"),p}var za=s=>s.join("/").replace(/\/\/+/g,"/"),_E=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),xE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,wE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,SE=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function EE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function TE(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var R_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function D_(s,e){let t=s;if(typeof t!="string"||!vE.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(R_)try{let c=new URL(window.location.href),u=t.startsWith("//")?new URL(c.protocol+t):new URL(t),f=$a(u.pathname,e);u.origin===c.origin&&f!=null?t=f+u.search+u.hash:a=!0}catch{ki(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var I_=["POST","PUT","PATCH","DELETE"];new Set(I_);var CE=["GET",...I_];new Set(CE);var Jc=z.createContext(null);Jc.displayName="DataRouter";var zf=z.createContext(null);zf.displayName="DataRouterState";var NE=z.createContext(!1),M_=z.createContext({isTransitioning:!1});M_.displayName="ViewTransition";var AE=z.createContext(new Map);AE.displayName="Fetchers";var jE=z.createContext(null);jE.displayName="Await";var Us=z.createContext(null);Us.displayName="Navigation";var Nh=z.createContext(null);Nh.displayName="Location";var la=z.createContext({outlet:null,matches:[],isDataRoute:!1});la.displayName="Route";var Hg=z.createContext(null);Hg.displayName="RouteError";var O_="REACT_ROUTER_ERROR",kE="REDIRECT",RE="ROUTE_ERROR_RESPONSE";function DE(s){if(s.startsWith(`${O_}:${kE}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function IE(s){if(s.startsWith(`${O_}:${RE}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new SE(e.status,e.statusText,e.data)}catch{}}function ME(s,{relative:e}={}){kn(Zc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext(Us),{hash:a,pathname:c,search:u}=Ah(s,{relative:e}),f=c;return t!=="/"&&(f=c==="/"?t:za([t,c])),i.createHref({pathname:f,search:u,hash:a})}function Zc(){return z.useContext(Nh)!=null}function Ka(){return kn(Zc(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Nh).location}var L_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function P_(s){z.useContext(Us).static||z.useLayoutEffect(s)}function Mr(){let{isDataRoute:s}=z.useContext(la);return s?WE():OE()}function OE(){kn(Zc(),"useNavigate() may be used only in the context of a <Router> component.");let s=z.useContext(Jc),{basename:e,navigator:t}=z.useContext(Us),{matches:i}=z.useContext(la),{pathname:a}=Ka(),c=JSON.stringify(Fg(i)),u=z.useRef(!1);return P_(()=>{u.current=!0}),z.useCallback((p,x={})=>{if(ki(u.current,L_),!u.current)return;if(typeof p=="number"){t.go(p);return}let E=qg(p,JSON.parse(c),a,x.relative==="path");s==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:za([e,E.pathname])),(x.replace?t.replace:t.push)(E,x.state,x)},[e,t,c,a,s])}z.createContext(null);function Ah(s,{relative:e}={}){let{matches:t}=z.useContext(la),{pathname:i}=Ka(),a=JSON.stringify(Fg(t));return z.useMemo(()=>qg(s,JSON.parse(a),i,e==="path"),[s,a,i,e])}function LE(s,e){return V_(s,e)}function V_(s,e,t,i,a){kn(Zc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=z.useContext(Us),{matches:u}=z.useContext(la),f=u[u.length-1],p=f?f.params:{},x=f?f.pathname:"/",E=f?f.pathnameBase:"/",C=f&&f.route;{let Y=C&&C.path||"";B_(x,!C||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let A=Ka(),B;if(e){let Y=typeof e=="string"?Xc(e):e;kn(E==="/"||Y.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),B=Y}else B=A;let L=B.pathname||"/",F=L;if(E!=="/"){let Y=E.replace(/^\//,"").split("/");F="/"+L.replace(/^\//,"").split("/").slice(Y.length).join("/")}let H=A_(s,{pathname:F});ki(C||H!=null,`No routes matched location "${B.pathname}${B.search}${B.hash}" `),ki(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${B.pathname}${B.search}${B.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=zE(H&&H.map(Y=>Object.assign({},Y,{params:Object.assign({},p,Y.params),pathname:za([E,c.encodeLocation?c.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?E:za([E,c.encodeLocation?c.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),u,t,i,a);return e&&J?z.createElement(Nh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...B},navigationType:"POP"}},J):J}function PE(){let s=GE(),e=EE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:c},"ErrorBoundary")," or"," ",z.createElement("code",{style:c},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:a},t):null,u)}var VE=z.createElement(PE,null),U_=class extends z.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=IE(s.digest);t&&(s=t)}let e=s!==void 0?z.createElement(la.Provider,{value:this.props.routeContext},z.createElement(Hg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?z.createElement(UE,{error:s},e):e}};U_.contextType=NE;var zp=new WeakMap;function UE({children:s,error:e}){let{basename:t}=z.useContext(Us);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=DE(e.digest);if(i){let a=zp.get(e);if(a)throw a;let c=D_(i.location,t);if(R_&&!zp.get(e))if(c.isExternal||i.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:i.replace}));throw zp.set(e,u),u}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return s}function BE({routeContext:s,match:e,children:t}){let i=z.useContext(Jc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(la.Provider,{value:s},t)}function zE(s,e=[],t=null,i=null,a=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let c=s,u=t?.errors;if(u!=null){let E=c.findIndex(C=>C.route.id&&u?.[C.route.id]!==void 0);kn(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,E+1))}let f=!1,p=-1;if(t)for(let E=0;E<c.length;E++){let C=c[E];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(p=E),C.route.id){let{loaderData:A,errors:B}=t,L=C.route.loader&&!A.hasOwnProperty(C.route.id)&&(!B||B[C.route.id]===void 0);if(C.route.lazy||L){f=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}let x=t&&i?(E,C)=>{i(E,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:TE(t.matches),errorInfo:C})}:void 0;return c.reduceRight((E,C,A)=>{let B,L=!1,F=null,H=null;t&&(B=u&&C.route.id?u[C.route.id]:void 0,F=C.route.errorElement||VE,f&&(p<0&&A===0?(B_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,H=null):p===A&&(L=!0,H=C.route.hydrateFallbackElement||null)));let J=e.concat(c.slice(0,A+1)),Y=()=>{let ue;return B?ue=F:L?ue=H:C.route.Component?ue=z.createElement(C.route.Component,null):C.route.element?ue=C.route.element:ue=E,z.createElement(BE,{match:C,routeContext:{outlet:E,matches:J,isDataRoute:t!=null},children:ue})};return t&&(C.route.ErrorBoundary||C.route.errorElement||A===0)?z.createElement(U_,{location:t.location,revalidation:t.revalidation,component:F,error:B,children:Y(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:x}):Y()},null)}function $g(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FE(s){let e=z.useContext(Jc);return kn(e,$g(s)),e}function qE(s){let e=z.useContext(zf);return kn(e,$g(s)),e}function HE(s){let e=z.useContext(la);return kn(e,$g(s)),e}function Gg(s){let e=HE(s),t=e.matches[e.matches.length-1];return kn(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function $E(){return Gg("useRouteId")}function GE(){let s=z.useContext(Hg),e=qE("useRouteError"),t=Gg("useRouteError");return s!==void 0?s:e.errors?.[t]}function WE(){let{router:s}=FE("useNavigate"),e=Gg("useNavigate"),t=z.useRef(!1);return P_(()=>{t.current=!0}),z.useCallback(async(a,c={})=>{ki(t.current,L_),t.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:e,...c}))},[s,e])}var V1={};function B_(s,e,t){!e&&!V1[s]&&(V1[s]=!0,ki(!1,t))}z.memo(YE);function YE({routes:s,future:e,state:t,onError:i}){return V_(s,void 0,t,i,e)}function QE({to:s,replace:e,state:t,relative:i}){kn(Zc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=z.useContext(Us);ki(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=z.useContext(la),{pathname:u}=Ka(),f=Mr(),p=qg(s,Fg(c),u,i==="path"),x=JSON.stringify(p);return z.useEffect(()=>{f(JSON.parse(x),{replace:e,state:t,relative:i})},[f,x,i,e,t]),null}function qr(s){kn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KE({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:c=!1,unstable_useTransitions:u}){kn(!Zc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=s.replace(/^\/*/,"/"),p=z.useMemo(()=>({basename:f,navigator:a,static:c,unstable_useTransitions:u,future:{}}),[f,a,c,u]);typeof t=="string"&&(t=Xc(t));let{pathname:x="/",search:E="",hash:C="",state:A=null,key:B="default"}=t,L=z.useMemo(()=>{let F=$a(x,f);return F==null?null:{location:{pathname:F,search:E,hash:C,state:A,key:B},navigationType:i}},[f,x,E,C,A,B,i]);return ki(L!=null,`<Router basename="${f}"> is not able to match the URL "${x}${E}${C}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:z.createElement(Us.Provider,{value:p},z.createElement(Nh.Provider,{children:e,value:L}))}function XE({children:s,location:e}){return LE(cg(s),e)}function cg(s,e=[]){let t=[];return z.Children.forEach(s,(i,a)=>{if(!z.isValidElement(i))return;let c=[...e,a];if(i.type===z.Fragment){t.push.apply(t,cg(i.props.children,c));return}kn(i.type===qr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=cg(i.props.children,c)),t.push(u)}),t}var nf="get",rf="application/x-www-form-urlencoded";function Ff(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function JE(s){return Ff(s)&&s.tagName.toLowerCase()==="button"}function ZE(s){return Ff(s)&&s.tagName.toLowerCase()==="form"}function eT(s){return Ff(s)&&s.tagName.toLowerCase()==="input"}function tT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function nT(s,e){return s.button===0&&(!e||e==="_self")&&!tT(s)}var Wd=null;function rT(){if(Wd===null)try{new FormData(document.createElement("form"),0),Wd=!1}catch{Wd=!0}return Wd}var sT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fp(s){return s!=null&&!sT.has(s)?(ki(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rf}"`),null):s}function iT(s,e){let t,i,a,c,u;if(ZE(s)){let f=s.getAttribute("action");i=f?$a(f,e):null,t=s.getAttribute("method")||nf,a=Fp(s.getAttribute("enctype"))||rf,c=new FormData(s)}else if(JE(s)||eT(s)&&(s.type==="submit"||s.type==="image")){let f=s.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||f.getAttribute("action");if(i=p?$a(p,e):null,t=s.getAttribute("formmethod")||f.getAttribute("method")||nf,a=Fp(s.getAttribute("formenctype"))||Fp(f.getAttribute("enctype"))||rf,c=new FormData(f,s),!rT()){let{name:x,type:E,value:C}=s;if(E==="image"){let A=x?`${x}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else x&&c.append(x,C)}}else{if(Ff(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=nf,i=null,a=rf,u=s}return c&&a==="text/plain"&&(u=c,c=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function aT(s,e,t,i){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&$a(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function oT(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function cT(s,e,t){let i=await Promise.all(s.map(async a=>{let c=e.routes[a.route.id];if(c){let u=await oT(c,t);return u.links?u.links():[]}return[]}));return fT(i.flat(1).filter(lT).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function U1(s,e,t,i,a,c){let u=(p,x)=>t[x]?p.route.id!==t[x].route.id:!0,f=(p,x)=>t[x].pathname!==p.pathname||t[x].route.path?.endsWith("*")&&t[x].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,x)=>u(p,x)||f(p,x)):c==="data"?e.filter((p,x)=>{let E=i.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(u(p,x)||f(p,x))return!0;if(p.route.shouldRevalidate){let C=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function uT(s,e,{includeHydrateFallback:t}={}){return hT(s.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let c=[a.module];return a.clientActionModule&&(c=c.concat(a.clientActionModule)),a.clientLoaderModule&&(c=c.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(c=c.concat(a.hydrateFallbackModule)),a.imports&&(c=c.concat(a.imports)),c}).flat(1))}function hT(s){return[...new Set(s)]}function dT(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function fT(s,e){let t=new Set;return new Set(e),s.reduce((i,a)=>{let c=JSON.stringify(dT(a));return t.has(c)||(t.add(c),i.push({key:c,link:a})),i},[])}function z_(){let s=z.useContext(Jc);return Wg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function mT(){let s=z.useContext(zf);return Wg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Yg=z.createContext(void 0);Yg.displayName="FrameworkContext";function F_(){let s=z.useContext(Yg);return Wg(s,"You must render this element inside a <HydratedRouter> element"),s}function pT(s,e){let t=z.useContext(Yg),[i,a]=z.useState(!1),[c,u]=z.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:x,onMouseLeave:E,onTouchStart:C}=e,A=z.useRef(null);z.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let F=J=>{J.forEach(Y=>{u(Y.isIntersecting)})},H=new IntersectionObserver(F,{threshold:.5});return A.current&&H.observe(A.current),()=>{H.disconnect()}}},[s]),z.useEffect(()=>{if(i){let F=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(F)}}},[i]);let B=()=>{a(!0)},L=()=>{a(!1),u(!1)};return t?s!=="intent"?[c,A,{}]:[c,A,{onFocus:Zu(f,B),onBlur:Zu(p,L),onMouseEnter:Zu(x,B),onMouseLeave:Zu(E,L),onTouchStart:Zu(C,B)}]:[!1,A,{}]}function Zu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function gT({page:s,...e}){let{router:t}=z_(),i=z.useMemo(()=>A_(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?z.createElement(yT,{page:s,matches:i,...e}):null}function vT(s){let{manifest:e,routeModules:t}=F_(),[i,a]=z.useState([]);return z.useEffect(()=>{let c=!1;return cT(s,e,t).then(u=>{c||a(u)}),()=>{c=!0}},[s,e,t]),i}function yT({page:s,matches:e,...t}){let i=Ka(),{future:a,manifest:c,routeModules:u}=F_(),{basename:f}=z_(),{loaderData:p,matches:x}=mT(),E=z.useMemo(()=>U1(s,e,x,c,i,"data"),[s,e,x,c,i]),C=z.useMemo(()=>U1(s,e,x,c,i,"assets"),[s,e,x,c,i]),A=z.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let F=new Set,H=!1;if(e.forEach(Y=>{let ue=c.routes[Y.route.id];!ue||!ue.hasLoader||(!E.some(K=>K.route.id===Y.route.id)&&Y.route.id in p&&u[Y.route.id]?.shouldRevalidate||ue.hasClientLoader?H=!0:F.add(Y.route.id))}),F.size===0)return[];let J=aT(s,f,a.unstable_trailingSlashAwareDataRequests,"data");return H&&F.size>0&&J.searchParams.set("_routes",e.filter(Y=>F.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[J.pathname+J.search]},[f,a.unstable_trailingSlashAwareDataRequests,p,i,c,E,e,s,u]),B=z.useMemo(()=>uT(C,c),[C,c]),L=vT(C);return z.createElement(z.Fragment,null,A.map(F=>z.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...t})),B.map(F=>z.createElement("link",{key:F,rel:"modulepreload",href:F,...t})),L.map(({key:F,link:H})=>z.createElement("link",{key:F,nonce:t.nonce,...H,crossOrigin:H.crossOrigin??t.crossOrigin})))}function bT(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var _T=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_T&&(window.__reactRouterVersion="7.13.0")}catch{}function xT({basename:s,children:e,unstable_useTransitions:t,window:i}){let a=z.useRef();a.current==null&&(a.current=eE({window:i,v5Compat:!0}));let c=a.current,[u,f]=z.useState({action:c.action,location:c.location}),p=z.useCallback(x=>{t===!1?f(x):z.startTransition(()=>f(x))},[t]);return z.useLayoutEffect(()=>c.listen(p),[c,p]),z.createElement(KE,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:c,unstable_useTransitions:t})}var q_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H_=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:c,replace:u,state:f,target:p,to:x,preventScrollReset:E,viewTransition:C,unstable_defaultShouldRevalidate:A,...B},L){let{basename:F,unstable_useTransitions:H}=z.useContext(Us),J=typeof x=="string"&&q_.test(x),Y=D_(x,F);x=Y.to;let ue=ME(x,{relative:a}),[K,me,xe]=pT(i,B),q=TT(x,{replace:u,state:f,target:p,preventScrollReset:E,relative:a,viewTransition:C,unstable_defaultShouldRevalidate:A,unstable_useTransitions:H});function V(ne){e&&e(ne),ne.defaultPrevented||q(ne)}let G=z.createElement("a",{...B,...xe,href:Y.absoluteURL||ue,onClick:Y.isExternal||c?e:V,ref:bT(L,me),target:p,"data-discover":!J&&t==="render"?"true":void 0});return K&&!J?z.createElement(z.Fragment,null,G,z.createElement(gT,{page:ue})):G});H_.displayName="Link";var wT=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:c,to:u,viewTransition:f,children:p,...x},E){let C=Ah(u,{relative:x.relative}),A=Ka(),B=z.useContext(zf),{navigator:L,basename:F}=z.useContext(Us),H=B!=null&&kT(C)&&f===!0,J=L.encodeLocation?L.encodeLocation(C).pathname:C.pathname,Y=A.pathname,ue=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),ue=ue?ue.toLowerCase():null,J=J.toLowerCase()),ue&&F&&(ue=$a(ue,F)||ue);const K=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let me=Y===J||!a&&Y.startsWith(J)&&Y.charAt(K)==="/",xe=ue!=null&&(ue===J||!a&&ue.startsWith(J)&&ue.charAt(J.length)==="/"),q={isActive:me,isPending:xe,isTransitioning:H},V=me?e:void 0,G;typeof i=="function"?G=i(q):G=[i,me?"active":null,xe?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let ne=typeof c=="function"?c(q):c;return z.createElement(H_,{...x,"aria-current":V,className:G,ref:E,style:ne,to:u,viewTransition:f},typeof p=="function"?p(q):p)});wT.displayName="NavLink";var ST=z.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:c,method:u=nf,action:f,onSubmit:p,relative:x,preventScrollReset:E,viewTransition:C,unstable_defaultShouldRevalidate:A,...B},L)=>{let{unstable_useTransitions:F}=z.useContext(Us),H=AT(),J=jT(f,{relative:x}),Y=u.toLowerCase()==="get"?"get":"post",ue=typeof f=="string"&&q_.test(f),K=me=>{if(p&&p(me),me.defaultPrevented)return;me.preventDefault();let xe=me.nativeEvent.submitter,q=xe?.getAttribute("formmethod")||u,V=()=>H(xe||me.currentTarget,{fetcherKey:e,method:q,navigate:t,replace:a,state:c,relative:x,preventScrollReset:E,viewTransition:C,unstable_defaultShouldRevalidate:A});F&&t!==!1?z.startTransition(()=>V()):V()};return z.createElement("form",{ref:L,method:Y,action:J,onSubmit:i?p:K,...B,"data-discover":!ue&&s==="render"?"true":void 0})});ST.displayName="Form";function ET(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $_(s){let e=z.useContext(Jc);return kn(e,ET(s)),e}function TT(s,{target:e,replace:t,state:i,preventScrollReset:a,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:p}={}){let x=Mr(),E=Ka(),C=Ah(s,{relative:c});return z.useCallback(A=>{if(nT(A,e)){A.preventDefault();let B=t!==void 0?t:ph(E)===ph(C),L=()=>x(s,{replace:B,state:i,preventScrollReset:a,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:f});p?z.startTransition(()=>L()):L()}},[E,x,C,t,i,e,s,a,c,u,f,p])}var CT=0,NT=()=>`__${String(++CT)}__`;function AT(){let{router:s}=$_("useSubmit"),{basename:e}=z.useContext(Us),t=$E(),i=s.fetch,a=s.navigate;return z.useCallback(async(c,u={})=>{let{action:f,method:p,encType:x,formData:E,body:C}=iT(c,e);if(u.navigate===!1){let A=u.fetcherKey||NT();await i(A,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:E,body:C,formMethod:u.method||p,formEncType:u.encType||x,flushSync:u.flushSync})}else await a(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:E,body:C,formMethod:u.method||p,formEncType:u.encType||x,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,a,e,t])}function jT(s,{relative:e}={}){let{basename:t}=z.useContext(Us),i=z.useContext(la);kn(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),c={...Ah(s||".",{relative:e})},u=Ka();if(s==null){c.search=u.search;let f=new URLSearchParams(c.search),p=f.getAll("index");if(p.some(E=>E==="")){f.delete("index"),p.filter(C=>C).forEach(C=>f.append("index",C));let E=f.toString();c.search=E?`?${E}`:""}}return(!s||s===".")&&a.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:za([t,c.pathname])),ph(c)}function kT(s,{relative:e}={}){let t=z.useContext(M_);kn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=$_("useViewTransitionState"),a=Ah(s,{relative:e});if(!t.isTransitioning)return!1;let c=$a(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=$a(t.nextLocation.pathname,i)||t.nextLocation.pathname;return vf(a.pathname,u)!=null||vf(a.pathname,c)!=null}const RT=()=>{};var B1={};const G_=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},DT=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const a=s[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[t++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[t++],u=s[t++],f=s[t++],p=((a&7)<<18|(c&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const c=s[t++],u=s[t++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|u&63)}}return e.join("")},W_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],u=a+1<s.length,f=u?s[a+1]:0,p=a+2<s.length,x=p?s[a+2]:0,E=c>>2,C=(c&3)<<4|f>>4;let A=(f&15)<<2|x>>6,B=x&63;p||(B=64,u||(A=64)),i.push(t[E],t[C],t[A],t[B])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(G_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):DT(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=t[s.charAt(a++)],f=a<s.length?t[s.charAt(a)]:0;++a;const x=a<s.length?t[s.charAt(a)]:64;++a;const C=a<s.length?t[s.charAt(a)]:64;if(++a,c==null||f==null||x==null||C==null)throw new IT;const A=c<<2|f>>4;if(i.push(A),x!==64){const B=f<<4&240|x>>2;if(i.push(B),C!==64){const L=x<<6&192|C;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class IT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MT=function(s){const e=G_(s);return W_.encodeByteArray(e,!0)},yf=function(s){return MT(s).replace(/\./g,"")},Y_=function(s){try{return W_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function OT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const LT=()=>OT().__FIREBASE_DEFAULTS__,PT=()=>{if(typeof process>"u"||typeof B1>"u")return;const s=B1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},VT=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Y_(s[1]);return e&&JSON.parse(e)},qf=()=>{try{return RT()||LT()||PT()||VT()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Q_=s=>qf()?.emulatorHosts?.[s],UT=s=>{const e=Q_(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},K_=()=>qf()?.config,X_=s=>qf()?.[`_${s}`];class BT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function eu(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J_(s){return(await fetch(s,{credentials:"include"})).ok}function zT(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[yf(JSON.stringify(t)),yf(JSON.stringify(u)),""].join(".")}const ch={};function FT(){const s={prod:[],emulator:[]};for(const e of Object.keys(ch))ch[e]?s.emulator.push(e):s.prod.push(e);return s}function qT(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let z1=!1;function Z_(s,e){if(typeof window>"u"||typeof document>"u"||!eu(window.location.host)||ch[s]===e||ch[s]||z1)return;ch[s]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",c=FT().prod.length>0;function u(){const A=document.getElementById(i);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,B){A.setAttribute("width","24"),A.setAttribute("id",B),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function x(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{z1=!0,u()},A}function E(A,B){A.setAttribute("id",B),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function C(){const A=qT(i),B=t("text"),L=document.getElementById(B)||document.createElement("span"),F=t("learnmore"),H=document.getElementById(F)||document.createElement("a"),J=t("preprendIcon"),Y=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ue=A.element;f(ue),E(H,F);const K=x();p(Y,J),ue.append(Y,L,H,K),document.body.appendChild(ue)}c?(L.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}function Gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gr())}function $T(){const s=qf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WT(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function YT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QT(){const s=Gr();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function KT(){return!$T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XT(){try{return typeof indexedDB=="object"}catch{return!1}}function JT(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const ZT="FirebaseError";class Xa extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ZT,Object.setPrototypeOf(this,Xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jh.prototype.create)}}class jh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],u=c?eC(c,i):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new Xa(a,f,i)}}function eC(s,e){return s.replace(tC,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const tC=/\{\$([^}]+)}/g;function nC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ul(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const c=s[a],u=e[a];if(F1(c)&&F1(u)){if(!Ul(c,u))return!1}else if(c!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function F1(s){return s!==null&&typeof s=="object"}function kh(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rh(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,c]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function sh(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function rC(s,e){const t=new sC(s,e);return t.subscribe.bind(t)}class sC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");iC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=qp),a.error===void 0&&(a.error=qp),a.complete===void 0&&(a.complete=qp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iC(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function qp(){}function yr(s){return s&&s._delegate?s._delegate:s}class Bl{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ll="[DEFAULT]";class aC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new BT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lC(e))try{this.getOrInitializeService({instanceIdentifier:Ll})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=Ll){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ll){return this.instances.has(e)}getOptions(e=Ll){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);i===f&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&e(c,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:oC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ll){return this.component?this.component.multipleInstances?e:Ll:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oC(s){return s===Ll?void 0:s}function lC(s){return s.instantiationMode==="EAGER"}class cC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qt||(qt={}));const uC={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},hC=qt.INFO,dC={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},fC=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=dC[e];if(a)console[a](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qg{constructor(e){this.name=e,this._logLevel=hC,this._logHandler=fC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...e),this._logHandler(this,qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...e),this._logHandler(this,qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...e),this._logHandler(this,qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...e),this._logHandler(this,qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...e),this._logHandler(this,qt.ERROR,...e)}}const mC=(s,e)=>e.some(t=>s instanceof t);let q1,H1;function pC(){return q1||(q1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gC(){return H1||(H1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ex=new WeakMap,ug=new WeakMap,tx=new WeakMap,Hp=new WeakMap,Kg=new WeakMap;function vC(s){const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",u)},c=()=>{t($o(s.result)),a()},u=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&ex.set(t,s)}).catch(()=>{}),Kg.set(e,s),e}function yC(s){if(ug.has(s))return;const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",u),s.removeEventListener("abort",u)},c=()=>{t(),a()},u=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",u),s.addEventListener("abort",u)});ug.set(s,e)}let hg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return ug.get(s);if(e==="objectStoreNames")return s.objectStoreNames||tx.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $o(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function bC(s){hg=s(hg)}function _C(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call($p(this),e,...t);return tx.set(i,e.sort?e.sort():[e]),$o(i)}:gC().includes(s)?function(...e){return s.apply($p(this),e),$o(ex.get(this))}:function(...e){return $o(s.apply($p(this),e))}}function xC(s){return typeof s=="function"?_C(s):(s instanceof IDBTransaction&&yC(s),mC(s,pC())?new Proxy(s,hg):s)}function $o(s){if(s instanceof IDBRequest)return vC(s);if(Hp.has(s))return Hp.get(s);const e=xC(s);return e!==s&&(Hp.set(s,e),Kg.set(e,s)),e}const $p=s=>Kg.get(s);function wC(s,e,{blocked:t,upgrade:i,blocking:a,terminated:c}={}){const u=indexedDB.open(s,e),f=$o(u);return i&&u.addEventListener("upgradeneeded",p=>{i($o(u.result),p.oldVersion,p.newVersion,$o(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{c&&p.addEventListener("close",()=>c()),a&&p.addEventListener("versionchange",x=>a(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const SC=["get","getKey","getAll","getAllKeys","count"],EC=["put","add","delete","clear"],Gp=new Map;function $1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Gp.get(e))return Gp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=EC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||SC.includes(t)))return;const c=async function(u,...f){const p=this.transaction(u,a?"readwrite":"readonly");let x=p.store;return i&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),a&&p.done]))[0]};return Gp.set(e,c),c}bC(s=>({...s,get:(e,t,i)=>$1(e,t)||s.get(e,t,i),has:(e,t)=>!!$1(e,t)||s.has(e,t)}));class TC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function CC(s){return s.getComponent()?.type==="VERSION"}const dg="@firebase/app",G1="0.14.7";const Ga=new Qg("@firebase/app"),NC="@firebase/app-compat",AC="@firebase/analytics-compat",jC="@firebase/analytics",kC="@firebase/app-check-compat",RC="@firebase/app-check",DC="@firebase/auth",IC="@firebase/auth-compat",MC="@firebase/database",OC="@firebase/data-connect",LC="@firebase/database-compat",PC="@firebase/functions",VC="@firebase/functions-compat",UC="@firebase/installations",BC="@firebase/installations-compat",zC="@firebase/messaging",FC="@firebase/messaging-compat",qC="@firebase/performance",HC="@firebase/performance-compat",$C="@firebase/remote-config",GC="@firebase/remote-config-compat",WC="@firebase/storage",YC="@firebase/storage-compat",QC="@firebase/firestore",KC="@firebase/ai",XC="@firebase/firestore-compat",JC="firebase",ZC="12.8.0";const fg="[DEFAULT]",eN={[dg]:"fire-core",[NC]:"fire-core-compat",[jC]:"fire-analytics",[AC]:"fire-analytics-compat",[RC]:"fire-app-check",[kC]:"fire-app-check-compat",[DC]:"fire-auth",[IC]:"fire-auth-compat",[MC]:"fire-rtdb",[OC]:"fire-data-connect",[LC]:"fire-rtdb-compat",[PC]:"fire-fn",[VC]:"fire-fn-compat",[UC]:"fire-iid",[BC]:"fire-iid-compat",[zC]:"fire-fcm",[FC]:"fire-fcm-compat",[qC]:"fire-perf",[HC]:"fire-perf-compat",[$C]:"fire-rc",[GC]:"fire-rc-compat",[WC]:"fire-gcs",[YC]:"fire-gcs-compat",[QC]:"fire-fst",[XC]:"fire-fst-compat",[KC]:"fire-vertex","fire-js":"fire-js",[JC]:"fire-js-all"};const bf=new Map,tN=new Map,mg=new Map;function W1(s,e){try{s.container.addComponent(e)}catch(t){Ga.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Hc(s){const e=s.name;if(mg.has(e))return Ga.debug(`There were multiple attempts to register component ${e}.`),!1;mg.set(e,s);for(const t of bf.values())W1(t,s);for(const t of tN.values())W1(t,s);return!0}function Xg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ai(s){return s==null?!1:s.settings!==void 0}const nN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Go=new jh("app","Firebase",nN);class rN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Bl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Go.create("app-deleted",{appName:this._name})}}const tu=ZC;function Jg(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:fg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Go.create("bad-app-name",{appName:String(a)});if(t||(t=K_()),!t)throw Go.create("no-options");const c=bf.get(a);if(c){if(Ul(t,c.options)&&Ul(i,c.config))return c;throw Go.create("duplicate-app",{appName:a})}const u=new cC(a);for(const p of mg.values())u.addComponent(p);const f=new rN(t,i,u);return bf.set(a,f),f}function nx(s=fg){const e=bf.get(s);if(!e&&s===fg&&K_())return Jg();if(!e)throw Go.create("no-app",{appName:s});return e}function Wo(s,e,t){let i=eN[s]??s;t&&(i+=`-${t}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ga.warn(u.join(" "));return}Hc(new Bl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const sN="firebase-heartbeat-database",iN=1,gh="firebase-heartbeat-store";let Wp=null;function rx(){return Wp||(Wp=wC(sN,iN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(gh)}catch(t){console.warn(t)}}}}).catch(s=>{throw Go.create("idb-open",{originalErrorMessage:s.message})})),Wp}async function aN(s){try{const t=(await rx()).transaction(gh),i=await t.objectStore(gh).get(sx(s));return await t.done,i}catch(e){if(e instanceof Xa)Ga.warn(e.message);else{const t=Go.create("idb-get",{originalErrorMessage:e?.message});Ga.warn(t.message)}}}async function Y1(s,e){try{const i=(await rx()).transaction(gh,"readwrite");await i.objectStore(gh).put(e,sx(s)),await i.done}catch(t){if(t instanceof Xa)Ga.warn(t.message);else{const i=Go.create("idb-set",{originalErrorMessage:t?.message});Ga.warn(i.message)}}}function sx(s){return`${s.name}!${s.options.appId}`}const oN=1024,lN=30;class cN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Q1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>lN){const a=dN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ga.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Q1(),{heartbeatsToSend:t,unsentEntries:i}=uN(this._heartbeatsCache.heartbeats),a=yf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ga.warn(e),""}}}function Q1(){return new Date().toISOString().substring(0,10)}function uN(s,e=oN){const t=[];let i=s.slice();for(const a of s){const c=t.find(u=>u.agent===a.agent);if(c){if(c.dates.push(a.date),K1(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),K1(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class hN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XT()?JT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Y1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Y1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function K1(s){return yf(JSON.stringify({version:2,heartbeats:s})).length}function dN(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function fN(s){Hc(new Bl("platform-logger",e=>new TC(e),"PRIVATE")),Hc(new Bl("heartbeat",e=>new cN(e),"PRIVATE")),Wo(dg,G1,s),Wo(dg,G1,"esm2020"),Wo("fire-js","")}fN("");function ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mN=ix,ax=new jh("auth","Firebase",ix());const _f=new Qg("@firebase/auth");function pN(s,...e){_f.logLevel<=qt.WARN&&_f.warn(`Auth (${tu}): ${s}`,...e)}function sf(s,...e){_f.logLevel<=qt.ERROR&&_f.error(`Auth (${tu}): ${s}`,...e)}function Ri(s,...e){throw Zg(s,...e)}function na(s,...e){return Zg(s,...e)}function ox(s,e,t){const i={...mN(),[e]:t};return new jh("auth","Firebase",i).create(e,{appName:s.name})}function Fa(s){return ox(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zg(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return ax.create(s,...e)}function pt(s,e,...t){if(!s)throw Zg(e,...t)}function Ua(s){const e="INTERNAL ASSERTION FAILED: "+s;throw sf(e),new Error(e)}function Wa(s,e){s||Ua(e)}function pg(){return typeof self<"u"&&self.location?.href||""}function gN(){return X1()==="http:"||X1()==="https:"}function X1(){return typeof self<"u"&&self.location?.protocol||null}function vN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gN()||WT()||"connection"in navigator)?navigator.onLine:!0}function yN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Rh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wa(t>e,"Short delay should be less than long delay!"),this.isMobile=HT()||YT()}get(){return vN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ev(s,e){Wa(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class lx{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ua("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ua("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ua("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _N=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xN=new Rh(3e4,6e4);function Ja(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Za(s,e,t,i,a={}){return cx(s,a,async()=>{let c={},u={};i&&(e==="GET"?u=i:c={body:JSON.stringify(i)});const f=kh({key:s.config.apiKey,...u}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const x={method:e,headers:p,...c};return GT()||(x.referrerPolicy="no-referrer"),s.emulatorConfig&&eu(s.emulatorConfig.host)&&(x.credentials="include"),lx.fetch()(await ux(s,s.config.apiHost,t,f),x)})}async function cx(s,e,t){s._canInitEmulator=!1;const i={...bN,...e};try{const a=new SN(s),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Yd(s,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const f=c.ok?u.errorMessage:u.error.message,[p,x]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(s,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Yd(s,"email-already-in-use",u);if(p==="USER_DISABLED")throw Yd(s,"user-disabled",u);const E=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw ox(s,E,x);Ri(s,E)}}catch(a){if(a instanceof Xa)throw a;Ri(s,"network-request-failed",{message:String(a)})}}async function Dh(s,e,t,i,a={}){const c=await Za(s,e,t,i,a);return"mfaPendingCredential"in c&&Ri(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function ux(s,e,t,i){const a=`${e}${t}?${i}`,c=s,u=c.config.emulator?ev(s.config,a):`${s.config.apiScheme}://${a}`;return _N.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function wN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(na(this.auth,"network-request-failed")),xN.get())})}}function Yd(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=na(s,e,i);return a.customData._tokenResponse=t,a}function J1(s){return s!==void 0&&s.enterprise!==void 0}class EN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return wN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TN(s,e){return Za(s,"GET","/v2/recaptchaConfig",Ja(s,e))}async function CN(s,e){return Za(s,"POST","/v1/accounts:delete",e)}async function xf(s,e){return Za(s,"POST","/v1/accounts:lookup",e)}function uh(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NN(s,e=!1){const t=yr(s),i=await t.getIdToken(e),a=tv(i);pt(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,u=c?.sign_in_provider;return{claims:a,token:i,authTime:uh(Yp(a.auth_time)),issuedAtTime:uh(Yp(a.iat)),expirationTime:uh(Yp(a.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Yp(s){return Number(s)*1e3}function tv(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Y_(t);return a?JSON.parse(a):(sf("Failed to decode base64 JWT payload"),null)}catch(a){return sf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Z1(s){const e=tv(s);return pt(e,"internal-error"),pt(typeof e.exp<"u","internal-error"),pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function vh(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Xa&&AN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function AN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class jN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class gg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uh(this.lastLoginAt),this.creationTime=uh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wf(s){const e=s.auth,t=await s.getIdToken(),i=await vh(s,xf(e,{idToken:t}));pt(i?.users.length,e,"internal-error");const a=i.users[0];s._notifyReloadListener(a);const c=a.providerUserInfo?.length?hx(a.providerUserInfo):[],u=RN(s.providerData,c),f=s.isAnonymous,p=!(s.email&&a.passwordHash)&&!u?.length,x=f?p:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new gg(a.createdAt,a.lastLoginAt),isAnonymous:x};Object.assign(s,E)}async function kN(s){const e=yr(s);await wf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RN(s,e){return[...s.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function hx(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function DN(s,e){const t=await cx(s,{},async()=>{const i=kh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=s.config,u=await ux(s,a,"/v1/token",`key=${c}`),f=await s._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return s.emulatorConfig&&eu(s.emulatorConfig.host)&&(p.credentials="include"),lx.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function IN(s,e){return Za(s,"POST","/v2/accounts:revokeToken",Ja(s,e))}class Vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pt(e.idToken,"internal-error"),pt(typeof e.idToken<"u","internal-error"),pt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pt(e.length!==0,"internal-error");const t=Z1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:c}=await DN(e,t);this.updateTokensAndExpiration(i,a,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:c}=t,u=new Vc;return i&&(pt(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(pt(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),c&&(pt(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vc,this.toJSON())}_performRefresh(){return Ua("not implemented")}}function Vo(s,e){pt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Ni{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new jN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new gg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await vh(this,this.stsTokenManager.getToken(this.auth,e));return pt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return NN(this,e)}reload(){return kN(this)}_assign(e){this!==e&&(pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await wf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(Fa(this.auth));const e=await this.getIdToken();return await vh(this,CN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,x=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:C,emailVerified:A,isAnonymous:B,providerData:L,stsTokenManager:F}=t;pt(C&&F,e,"internal-error");const H=Vc.fromJSON(this.name,F);pt(typeof C=="string",e,"internal-error"),Vo(i,e.name),Vo(a,e.name),pt(typeof A=="boolean",e,"internal-error"),pt(typeof B=="boolean",e,"internal-error"),Vo(c,e.name),Vo(u,e.name),Vo(f,e.name),Vo(p,e.name),Vo(x,e.name),Vo(E,e.name);const J=new Ni({uid:C,auth:e,email:a,emailVerified:A,displayName:i,isAnonymous:B,photoURL:u,phoneNumber:c,tenantId:f,stsTokenManager:H,createdAt:x,lastLoginAt:E});return L&&Array.isArray(L)&&(J.providerData=L.map(Y=>({...Y}))),p&&(J._redirectEventId=p),J}static async _fromIdTokenResponse(e,t,i=!1){const a=new Vc;a.updateFromServerResponse(t);const c=new Ni({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await wf(c),c}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];pt(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?hx(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!c?.length,f=new Vc;f.updateFromIdToken(i);const p=new Ni({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new gg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!c?.length};return Object.assign(p,x),p}}const eb=new Map;function Ba(s){Wa(s instanceof Function,"Expected a class definition");let e=eb.get(s);return e?(Wa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,eb.set(s,e),e)}class dx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dx.type="NONE";const tb=dx;function af(s,e,t){return`firebase:${s}:${e}:${t}`}class Uc{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:c}=this.auth;this.fullUserKey=af(this.userKey,a.apiKey,c),this.fullPersistenceKey=af("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xf(this.auth,{idToken:e}).catch(()=>{});return t?Ni._fromGetAccountInfoResponse(this.auth,t,e):null}return Ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Uc(Ba(tb),e,i);const a=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=a[0]||Ba(tb);const u=af(i,e.config.apiKey,e.name);let f=null;for(const x of t)try{const E=await x._get(u);if(E){let C;if(typeof E=="string"){const A=await xf(e,{idToken:E}).catch(()=>{});if(!A)break;C=await Ni._fromGetAccountInfoResponse(e,A,E)}else C=Ni._fromJSON(e,E);x!==c&&(f=C),c=x;break}}catch{}const p=a.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Uc(c,e,i):(c=p[0],f&&await c._set(u,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(u)}catch{}})),new Uc(c,e,i))}}function nb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yx(e))return"Blackberry";if(bx(e))return"Webos";if(mx(e))return"Safari";if((e.includes("chrome/")||px(e))&&!e.includes("edge/"))return"Chrome";if(vx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function fx(s=Gr()){return/firefox\//i.test(s)}function mx(s=Gr()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function px(s=Gr()){return/crios\//i.test(s)}function gx(s=Gr()){return/iemobile/i.test(s)}function vx(s=Gr()){return/android/i.test(s)}function yx(s=Gr()){return/blackberry/i.test(s)}function bx(s=Gr()){return/webos/i.test(s)}function nv(s=Gr()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function MN(s=Gr()){return nv(s)&&!!window.navigator?.standalone}function ON(){return QT()&&document.documentMode===10}function _x(s=Gr()){return nv(s)||vx(s)||bx(s)||yx(s)||/windows phone/i.test(s)||gx(s)}function xx(s,e=[]){let t;switch(s){case"Browser":t=nb(Gr());break;case"Worker":t=`${nb(Gr())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tu}/${i}`}class LN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((u,f)=>{try{const p=e(c);u(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function PN(s,e={}){return Za(s,"GET","/v2/passwordPolicy",Ja(s,e))}const VN=6;class UN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??VN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class BN{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rb(this),this.idTokenSubscription=new rb(this),this.beforeStateQueue=new LN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ax,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ba(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Uc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xf(this,{idToken:e}),i=await Ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ai(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(Fa(this));const t=e?yr(e):null;return t&&pt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(Fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(Fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PN(this),t=new UN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await IN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ba(e)||this._popupRedirectResolver;pt(t,this,"argument-error"),this.redirectPersistenceManager=await Uc.create(this,[Ba(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(f,this,"internal-error"),f.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&pN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function rl(s){return yr(s)}class rb{constructor(e){this.auth=e,this.observer=null,this.addObserver=rC(t=>this.observer=t)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zN(s){Hf=s}function wx(s){return Hf.loadJS(s)}function FN(){return Hf.recaptchaEnterpriseScript}function qN(){return Hf.gapiScript}function HN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class $N{constructor(){this.enterprise=new GN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class GN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const WN="recaptcha-enterprise",Sx="NO_RECAPTCHA";class YN{constructor(e){this.type=WN,this.auth=rl(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,f)=>{TN(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new EN(p);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,u(x.siteKey)}}).catch(p=>{f(p)})})}function a(c,u,f){const p=window.grecaptcha;J1(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(x=>{u(x)}).catch(()=>{u(Sx)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $N().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{i(this.auth).then(f=>{if(!t&&J1(window.grecaptcha))a(f,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=FN();p.length!==0&&(p+=f),wx(p).then(()=>{a(f,c,u)}).catch(x=>{u(x)})}}).catch(f=>{u(f)})})}}async function sb(s,e,t,i=!1,a=!1){const c=new YN(s);let u;if(a)u=Sx;else try{u=await c.verify(t)}catch{u=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:x,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Sf(s,e,t,i,a){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await sb(s,e,t,t==="getOobCode");return i(s,c)}else return i(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await sb(s,e,t,t==="getOobCode");return i(s,u)}else return Promise.reject(c)})}function QN(s,e){const t=Xg(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(Ul(c,e??{}))return a;Ri(a,"already-initialized")}return t.initialize({options:e})}function KN(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ba);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function XN(s,e,t){const i=rl(s);pt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,c=Ex(e),{host:u,port:f}=JN(e),p=f===null?"":`:${f}`,x={url:`${c}//${u}${p}/`},E=Object.freeze({host:u,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){pt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pt(Ul(x,i.config.emulator)&&Ul(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=x,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,eu(u)?(J_(`${c}//${u}${p}`),Z_("Auth",!0)):ZN()}function Ex(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function JN(s){const e=Ex(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const c=a[1];return{host:c,port:ib(i.substr(c.length+1))}}else{const[c,u]=i.split(":");return{host:c,port:ib(u)}}}function ib(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function ZN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class rv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ua("not implemented")}_getIdTokenResponse(e){return Ua("not implemented")}_linkToIdToken(e,t){return Ua("not implemented")}_getReauthenticationResolver(e){return Ua("not implemented")}}async function eA(s,e){return Za(s,"POST","/v1/accounts:signUp",e)}async function tA(s,e){return Dh(s,"POST","/v1/accounts:signInWithPassword",Ja(s,e))}async function nA(s,e){return Za(s,"POST","/v1/accounts:sendOobCode",Ja(s,e))}async function rA(s,e){return nA(s,e)}async function sA(s,e){return Dh(s,"POST","/v1/accounts:signInWithEmailLink",Ja(s,e))}async function iA(s,e){return Dh(s,"POST","/v1/accounts:signInWithEmailLink",Ja(s,e))}class yh extends rv{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new yh(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new yh(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sf(e,t,"signInWithPassword",tA);case"emailLink":return sA(e,{email:this._email,oobCode:this._password});default:Ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sf(e,i,"signUpPassword",eA);case"emailLink":return iA(e,{idToken:t,email:this._email,oobCode:this._password});default:Ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Bc(s,e){return Dh(s,"POST","/v1/accounts:signInWithIdp",Ja(s,e))}const aA="http://localhost";class zl extends rv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...c}=t;if(!i||!a)return null;const u=new zl(i,a);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Bc(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Bc(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bc(e,t)}buildRequest(){const e={requestUri:aA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kh(t)}return e}}function oA(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lA(s){const e=rh(sh(s)).link,t=e?rh(sh(e)).deep_link_id:null,i=rh(sh(s)).deep_link_id;return(i?rh(sh(i)).link:null)||i||t||e||s}class sv{constructor(e){const t=rh(sh(e)),i=t.apiKey??null,a=t.oobCode??null,c=oA(t.mode??null);pt(i&&a&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=lA(e);try{return new sv(t)}catch{return null}}}class nu{constructor(){this.providerId=nu.PROVIDER_ID}static credential(e,t){return yh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=sv.parseLink(t);return pt(i,"argument-error"),yh._fromEmailAndCode(e,i.code,i.tenantId)}}nu.PROVIDER_ID="password";nu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Tx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ih extends Tx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Bo extends Ih{constructor(){super("facebook.com")}static credential(e){return zl._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bo.credential(e.oauthAccessToken)}catch{return null}}}Bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bo.PROVIDER_ID="facebook.com";class zo extends Ih{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zl._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return zo.credential(t,i)}catch{return null}}}zo.GOOGLE_SIGN_IN_METHOD="google.com";zo.PROVIDER_ID="google.com";class Fo extends Ih{constructor(){super("github.com")}static credential(e){return zl._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fo.credential(e.oauthAccessToken)}catch{return null}}}Fo.GITHUB_SIGN_IN_METHOD="github.com";Fo.PROVIDER_ID="github.com";class qo extends Ih{constructor(){super("twitter.com")}static credential(e,t){return zl._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return qo.credential(t,i)}catch{return null}}}qo.TWITTER_SIGN_IN_METHOD="twitter.com";qo.PROVIDER_ID="twitter.com";async function cA(s,e){return Dh(s,"POST","/v1/accounts:signUp",Ja(s,e))}class Fl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const c=await Ni._fromIdTokenResponse(e,i,a),u=ab(i);return new Fl({user:c,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=ab(i);return new Fl({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function ab(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Ef extends Xa{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Ef.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Ef(e,t,i,a)}}function Cx(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ef._fromErrorAndOperation(s,c,e,i):c})}async function uA(s,e,t=!1){const i=await vh(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Fl._forOperation(s,"link",i)}async function hA(s,e,t=!1){const{auth:i}=s;if(ai(i.app))return Promise.reject(Fa(i));const a="reauthenticate";try{const c=await vh(s,Cx(i,a,e,s),t);pt(c.idToken,i,"internal-error");const u=tv(c.idToken);pt(u,i,"internal-error");const{sub:f}=u;return pt(s.uid===f,i,"user-mismatch"),Fl._forOperation(s,a,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ri(i,"user-mismatch"),c}}async function Nx(s,e,t=!1){if(ai(s.app))return Promise.reject(Fa(s));const i="signIn",a=await Cx(s,i,e),c=await Fl._fromIdTokenResponse(s,i,a);return t||await s._updateCurrentUser(c.user),c}async function dA(s,e){return Nx(rl(s),e)}async function Ax(s){const e=rl(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fA(s,e,t){const i=rl(s);await Sf(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",rA)}async function jx(s,e,t){if(ai(s.app))return Promise.reject(Fa(s));const i=rl(s),u=await Sf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cA).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Ax(s),p}),f=await Fl._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function mA(s,e,t){return ai(s.app)?Promise.reject(Fa(s)):dA(yr(s),nu.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Ax(s),i})}function pA(s,e){return yr(s).setPersistence(e)}function gA(s,e,t,i){return yr(s).onIdTokenChanged(e,t,i)}function vA(s,e,t){return yr(s).beforeAuthStateChanged(e,t)}function yA(s,e,t,i){return yr(s).onAuthStateChanged(e,t,i)}function iv(s){return yr(s).signOut()}const Tf="__sak";class kx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const bA=1e3,_A=10;class Rx extends kx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_x(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},c=this.storage.getItem(i);ON()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,_A):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},bA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rx.type="LOCAL";const Dx=Rx;class Ix extends kx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ix.type="SESSION";const av=Ix;function xA(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class $f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new $f(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:c}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(u).map(async x=>x(t.origin,c)),p=await xA(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$f.receivers=[];function ov(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class wA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((f,p)=>{const x=ov("",20);a.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(C){const A=C;if(A.data.eventId===x)switch(A.data.status){case"ack":clearTimeout(E),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(A.data.response);break;default:clearTimeout(E),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function ra(){return window}function SA(s){ra().location.href=s}function Mx(){return typeof ra().WorkerGlobalScope<"u"&&typeof ra().importScripts=="function"}async function EA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TA(){return navigator?.serviceWorker?.controller||null}function CA(){return Mx()?self:null}const Ox="firebaseLocalStorageDb",NA=1,Cf="firebaseLocalStorage",Lx="fbase_key";class Mh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gf(s,e){return s.transaction([Cf],e?"readwrite":"readonly").objectStore(Cf)}function AA(){const s=indexedDB.deleteDatabase(Ox);return new Mh(s).toPromise()}function vg(){const s=indexedDB.open(Ox,NA);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Cf,{keyPath:Lx})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Cf)?e(i):(i.close(),await AA(),e(await vg()))})})}async function ob(s,e,t){const i=Gf(s,!0).put({[Lx]:e,value:t});return new Mh(i).toPromise()}async function jA(s,e){const t=Gf(s,!1).get(e),i=await new Mh(t).toPromise();return i===void 0?null:i.value}function lb(s,e){const t=Gf(s,!0).delete(e);return new Mh(t).toPromise()}const kA=800,RA=3;class Px{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>RA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$f._getInstance(CA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await EA(),!this.activeServiceWorker)return;this.sender=new wA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vg();return await ob(e,Tf,"1"),await lb(e,Tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ob(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>jA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Gf(a,!1).getAll();return new Mh(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Px.type="LOCAL";const DA=Px;new Rh(3e4,6e4);function IA(s,e){return e?Ba(e):(pt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class lv extends rv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function MA(s){return Nx(s.auth,new lv(s),s.bypassAuthState)}function OA(s){const{auth:e,user:t}=s;return pt(t,e,"internal-error"),hA(t,new lv(s),s.bypassAuthState)}async function LA(s){const{auth:e,user:t}=s;return pt(t,e,"internal-error"),uA(t,new lv(s),s.bypassAuthState)}class Vx{constructor(e,t,i,a,c=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:c,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MA;case"linkViaPopup":case"linkViaRedirect":return LA;case"reauthViaPopup":case"reauthViaRedirect":return OA;default:Ri(this.auth,"internal-error")}}resolve(e){Wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const PA=new Rh(2e3,1e4);class Lc extends Vx{constructor(e,t,i,a,c){super(e,t,a,c),this.provider=i,this.authWindow=null,this.pollId=null,Lc.currentPopupAction&&Lc.currentPopupAction.cancel(),Lc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pt(e,this.auth,"internal-error"),e}async onExecution(){Wa(this.filter.length===1,"Popup operations only handle one event");const e=ov();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(na(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(na(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(na(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PA.get())};e()}}Lc.currentPopupAction=null;const VA="pendingRedirect",of=new Map;class UA extends Vx{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=of.get(this.auth._key());if(!e){try{const i=await BA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}of.set(this.auth._key(),e)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BA(s,e){const t=qA(e),i=FA(s);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function zA(s,e){of.set(s._key(),e)}function FA(s){return Ba(s._redirectPersistence)}function qA(s){return af(VA,s.config.apiKey,s.name)}async function HA(s,e,t=!1){if(ai(s.app))return Promise.reject(Fa(s));const i=rl(s),a=IA(i,e),u=await new UA(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const $A=600*1e3;class GA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ux(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(na(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$A&&this.cachedEventUids.clear(),this.cachedEventUids.has(cb(e))}saveEventToCache(e){this.cachedEventUids.add(cb(e)),this.lastProcessedEventTime=Date.now()}}function cb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Ux({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function WA(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ux(s);default:return!1}}async function YA(s,e={}){return Za(s,"GET","/v1/projects",e)}const QA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KA=/^https?/;async function XA(s){if(s.config.emulator)return;const{authorizedDomains:e}=await YA(s);for(const t of e)try{if(JA(t))return}catch{}Ri(s,"unauthorized-domain")}function JA(s){const e=pg(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!KA.test(t))return!1;if(QA.test(s))return i===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const ZA=new Rh(3e4,6e4);function ub(){const s=ra().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function ej(s){return new Promise((e,t)=>{function i(){ub(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ub(),t(na(s,"network-request-failed"))},timeout:ZA.get()})}if(ra().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ra().gapi?.load)i();else{const a=HN("iframefcb");return ra()[a]=()=>{gapi.load?i():t(na(s,"network-request-failed"))},wx(`${qN()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw lf=null,e})}let lf=null;function tj(s){return lf=lf||ej(s),lf}const nj=new Rh(5e3,15e3),rj="__/auth/iframe",sj="emulator/auth/iframe",ij={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oj(s){const e=s.config;pt(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?ev(e,sj):`https://${s.config.authDomain}/${rj}`,i={apiKey:e.apiKey,appName:s.name,v:tu},a=aj.get(s.config.apiHost);a&&(i.eid=a);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${kh(i).slice(1)}`}async function lj(s){const e=await tj(s),t=ra().gapi;return pt(t,s,"internal-error"),e.open({where:document.body,url:oj(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ij,dontclear:!0},i=>new Promise(async(a,c)=>{await i.restyle({setHideOnLeave:!1});const u=na(s,"network-request-failed"),f=ra().setTimeout(()=>{c(u)},nj.get());function p(){ra().clearTimeout(f),a(i)}i.ping(p).then(p,()=>{c(u)})}))}const cj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uj=500,hj=600,dj="_blank",fj="http://localhost";class hb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mj(s,e,t,i=uj,a=hj){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...cj,width:i.toString(),height:a.toString(),top:c,left:u},x=Gr().toLowerCase();t&&(f=px(x)?dj:t),fx(x)&&(e=e||fj,p.scrollbars="yes");const E=Object.entries(p).reduce((A,[B,L])=>`${A}${B}=${L},`,"");if(MN(x)&&f!=="_self")return pj(e||"",f),new hb(null);const C=window.open(e||"",f,E);pt(C,s,"popup-blocked");try{C.focus()}catch{}return new hb(C)}function pj(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const gj="__/auth/handler",vj="emulator/auth/handler",yj=encodeURIComponent("fac");async function db(s,e,t,i,a,c){pt(s.config.authDomain,s,"auth-domain-config-required"),pt(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:tu,eventId:a};if(e instanceof Tx){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",nC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,C]of Object.entries({}))u[E]=C}if(e instanceof Ih){const E=e.getScopes().filter(C=>C!=="");E.length>0&&(u.scopes=E.join(","))}s.tenantId&&(u.tid=s.tenantId);const f=u;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const p=await s._getAppCheckToken(),x=p?`#${yj}=${encodeURIComponent(p)}`:"";return`${bj(s)}?${kh(f).slice(1)}${x}`}function bj({config:s}){return s.emulator?ev(s,vj):`https://${s.authDomain}/${gj}`}const Qp="webStorageSupport";class _j{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=av,this._completeRedirectFn=HA,this._overrideRedirectResult=zA}async _openPopup(e,t,i,a){Wa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await db(e,t,i,pg(),a);return mj(e,c,ov())}async _openRedirect(e,t,i,a){await this._originValidation(e);const c=await db(e,t,i,pg(),a);return SA(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Wa(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await lj(e),i=new GA(e);return t.register("authEvent",a=>(pt(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qp,{type:Qp},a=>{const c=a?.[0]?.[Qp];c!==void 0&&t(!!c),Ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _x()||mx()||nv()}}const xj=_j;var fb="@firebase/auth",mb="1.12.0";class wj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Sj(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ej(s){Hc(new Bl("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;pt(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:f,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xx(s)},x=new BN(i,a,c,p);return KN(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Hc(new Bl("auth-internal",e=>{const t=rl(e.getProvider("auth").getImmediate());return(i=>new wj(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wo(fb,mb,Sj(s)),Wo(fb,mb,"esm2020")}const Tj=300,Cj=X_("authIdTokenMaxAge")||Tj;let pb=null;const Nj=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Cj)return;const a=t?.token;pb!==a&&(pb=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Bx(s=nx()){const e=Xg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=QN(s,{popupRedirectResolver:xj,persistence:[DA,Dx,av]}),i=X_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const u=Nj(c.toString());vA(t,u,()=>u(t.currentUser)),gA(t,f=>u(f))}}const a=Q_("auth");return a&&XN(t,`http://${a}`),t}function Aj(){return document.getElementsByTagName("head")?.[0]??document}zN({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=a=>{const c=na("internal-error");c.customData=a,t(c)},i.type="text/javascript",i.charset="UTF-8",Aj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ej("Browser");var gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Yo,zx;(function(){var s;function e(q,V){function G(){}G.prototype=V.prototype,q.F=V.prototype,q.prototype=new G,q.prototype.constructor=q,q.D=function(ne,W,ee){for(var O=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)O[Re-2]=arguments[Re];return V.prototype[W].apply(ne,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(q,V,G){G||(G=0);const ne=Array(16);if(typeof V=="string")for(var W=0;W<16;++W)ne[W]=V.charCodeAt(G++)|V.charCodeAt(G++)<<8|V.charCodeAt(G++)<<16|V.charCodeAt(G++)<<24;else for(W=0;W<16;++W)ne[W]=V[G++]|V[G++]<<8|V[G++]<<16|V[G++]<<24;V=q.g[0],G=q.g[1],W=q.g[2];let ee=q.g[3],O;O=V+(ee^G&(W^ee))+ne[0]+3614090360&4294967295,V=G+(O<<7&4294967295|O>>>25),O=ee+(W^V&(G^W))+ne[1]+3905402710&4294967295,ee=V+(O<<12&4294967295|O>>>20),O=W+(G^ee&(V^G))+ne[2]+606105819&4294967295,W=ee+(O<<17&4294967295|O>>>15),O=G+(V^W&(ee^V))+ne[3]+3250441966&4294967295,G=W+(O<<22&4294967295|O>>>10),O=V+(ee^G&(W^ee))+ne[4]+4118548399&4294967295,V=G+(O<<7&4294967295|O>>>25),O=ee+(W^V&(G^W))+ne[5]+1200080426&4294967295,ee=V+(O<<12&4294967295|O>>>20),O=W+(G^ee&(V^G))+ne[6]+2821735955&4294967295,W=ee+(O<<17&4294967295|O>>>15),O=G+(V^W&(ee^V))+ne[7]+4249261313&4294967295,G=W+(O<<22&4294967295|O>>>10),O=V+(ee^G&(W^ee))+ne[8]+1770035416&4294967295,V=G+(O<<7&4294967295|O>>>25),O=ee+(W^V&(G^W))+ne[9]+2336552879&4294967295,ee=V+(O<<12&4294967295|O>>>20),O=W+(G^ee&(V^G))+ne[10]+4294925233&4294967295,W=ee+(O<<17&4294967295|O>>>15),O=G+(V^W&(ee^V))+ne[11]+2304563134&4294967295,G=W+(O<<22&4294967295|O>>>10),O=V+(ee^G&(W^ee))+ne[12]+1804603682&4294967295,V=G+(O<<7&4294967295|O>>>25),O=ee+(W^V&(G^W))+ne[13]+4254626195&4294967295,ee=V+(O<<12&4294967295|O>>>20),O=W+(G^ee&(V^G))+ne[14]+2792965006&4294967295,W=ee+(O<<17&4294967295|O>>>15),O=G+(V^W&(ee^V))+ne[15]+1236535329&4294967295,G=W+(O<<22&4294967295|O>>>10),O=V+(W^ee&(G^W))+ne[1]+4129170786&4294967295,V=G+(O<<5&4294967295|O>>>27),O=ee+(G^W&(V^G))+ne[6]+3225465664&4294967295,ee=V+(O<<9&4294967295|O>>>23),O=W+(V^G&(ee^V))+ne[11]+643717713&4294967295,W=ee+(O<<14&4294967295|O>>>18),O=G+(ee^V&(W^ee))+ne[0]+3921069994&4294967295,G=W+(O<<20&4294967295|O>>>12),O=V+(W^ee&(G^W))+ne[5]+3593408605&4294967295,V=G+(O<<5&4294967295|O>>>27),O=ee+(G^W&(V^G))+ne[10]+38016083&4294967295,ee=V+(O<<9&4294967295|O>>>23),O=W+(V^G&(ee^V))+ne[15]+3634488961&4294967295,W=ee+(O<<14&4294967295|O>>>18),O=G+(ee^V&(W^ee))+ne[4]+3889429448&4294967295,G=W+(O<<20&4294967295|O>>>12),O=V+(W^ee&(G^W))+ne[9]+568446438&4294967295,V=G+(O<<5&4294967295|O>>>27),O=ee+(G^W&(V^G))+ne[14]+3275163606&4294967295,ee=V+(O<<9&4294967295|O>>>23),O=W+(V^G&(ee^V))+ne[3]+4107603335&4294967295,W=ee+(O<<14&4294967295|O>>>18),O=G+(ee^V&(W^ee))+ne[8]+1163531501&4294967295,G=W+(O<<20&4294967295|O>>>12),O=V+(W^ee&(G^W))+ne[13]+2850285829&4294967295,V=G+(O<<5&4294967295|O>>>27),O=ee+(G^W&(V^G))+ne[2]+4243563512&4294967295,ee=V+(O<<9&4294967295|O>>>23),O=W+(V^G&(ee^V))+ne[7]+1735328473&4294967295,W=ee+(O<<14&4294967295|O>>>18),O=G+(ee^V&(W^ee))+ne[12]+2368359562&4294967295,G=W+(O<<20&4294967295|O>>>12),O=V+(G^W^ee)+ne[5]+4294588738&4294967295,V=G+(O<<4&4294967295|O>>>28),O=ee+(V^G^W)+ne[8]+2272392833&4294967295,ee=V+(O<<11&4294967295|O>>>21),O=W+(ee^V^G)+ne[11]+1839030562&4294967295,W=ee+(O<<16&4294967295|O>>>16),O=G+(W^ee^V)+ne[14]+4259657740&4294967295,G=W+(O<<23&4294967295|O>>>9),O=V+(G^W^ee)+ne[1]+2763975236&4294967295,V=G+(O<<4&4294967295|O>>>28),O=ee+(V^G^W)+ne[4]+1272893353&4294967295,ee=V+(O<<11&4294967295|O>>>21),O=W+(ee^V^G)+ne[7]+4139469664&4294967295,W=ee+(O<<16&4294967295|O>>>16),O=G+(W^ee^V)+ne[10]+3200236656&4294967295,G=W+(O<<23&4294967295|O>>>9),O=V+(G^W^ee)+ne[13]+681279174&4294967295,V=G+(O<<4&4294967295|O>>>28),O=ee+(V^G^W)+ne[0]+3936430074&4294967295,ee=V+(O<<11&4294967295|O>>>21),O=W+(ee^V^G)+ne[3]+3572445317&4294967295,W=ee+(O<<16&4294967295|O>>>16),O=G+(W^ee^V)+ne[6]+76029189&4294967295,G=W+(O<<23&4294967295|O>>>9),O=V+(G^W^ee)+ne[9]+3654602809&4294967295,V=G+(O<<4&4294967295|O>>>28),O=ee+(V^G^W)+ne[12]+3873151461&4294967295,ee=V+(O<<11&4294967295|O>>>21),O=W+(ee^V^G)+ne[15]+530742520&4294967295,W=ee+(O<<16&4294967295|O>>>16),O=G+(W^ee^V)+ne[2]+3299628645&4294967295,G=W+(O<<23&4294967295|O>>>9),O=V+(W^(G|~ee))+ne[0]+4096336452&4294967295,V=G+(O<<6&4294967295|O>>>26),O=ee+(G^(V|~W))+ne[7]+1126891415&4294967295,ee=V+(O<<10&4294967295|O>>>22),O=W+(V^(ee|~G))+ne[14]+2878612391&4294967295,W=ee+(O<<15&4294967295|O>>>17),O=G+(ee^(W|~V))+ne[5]+4237533241&4294967295,G=W+(O<<21&4294967295|O>>>11),O=V+(W^(G|~ee))+ne[12]+1700485571&4294967295,V=G+(O<<6&4294967295|O>>>26),O=ee+(G^(V|~W))+ne[3]+2399980690&4294967295,ee=V+(O<<10&4294967295|O>>>22),O=W+(V^(ee|~G))+ne[10]+4293915773&4294967295,W=ee+(O<<15&4294967295|O>>>17),O=G+(ee^(W|~V))+ne[1]+2240044497&4294967295,G=W+(O<<21&4294967295|O>>>11),O=V+(W^(G|~ee))+ne[8]+1873313359&4294967295,V=G+(O<<6&4294967295|O>>>26),O=ee+(G^(V|~W))+ne[15]+4264355552&4294967295,ee=V+(O<<10&4294967295|O>>>22),O=W+(V^(ee|~G))+ne[6]+2734768916&4294967295,W=ee+(O<<15&4294967295|O>>>17),O=G+(ee^(W|~V))+ne[13]+1309151649&4294967295,G=W+(O<<21&4294967295|O>>>11),O=V+(W^(G|~ee))+ne[4]+4149444226&4294967295,V=G+(O<<6&4294967295|O>>>26),O=ee+(G^(V|~W))+ne[11]+3174756917&4294967295,ee=V+(O<<10&4294967295|O>>>22),O=W+(V^(ee|~G))+ne[2]+718787259&4294967295,W=ee+(O<<15&4294967295|O>>>17),O=G+(ee^(W|~V))+ne[9]+3951481745&4294967295,q.g[0]=q.g[0]+V&4294967295,q.g[1]=q.g[1]+(W+(O<<21&4294967295|O>>>11))&4294967295,q.g[2]=q.g[2]+W&4294967295,q.g[3]=q.g[3]+ee&4294967295}i.prototype.v=function(q,V){V===void 0&&(V=q.length);const G=V-this.blockSize,ne=this.C;let W=this.h,ee=0;for(;ee<V;){if(W==0)for(;ee<=G;)a(this,q,ee),ee+=this.blockSize;if(typeof q=="string"){for(;ee<V;)if(ne[W++]=q.charCodeAt(ee++),W==this.blockSize){a(this,ne),W=0;break}}else for(;ee<V;)if(ne[W++]=q[ee++],W==this.blockSize){a(this,ne),W=0;break}}this.h=W,this.o+=V},i.prototype.A=function(){var q=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);q[0]=128;for(var V=1;V<q.length-8;++V)q[V]=0;V=this.o*8;for(var G=q.length-8;G<q.length;++G)q[G]=V&255,V/=256;for(this.v(q),q=Array(16),V=0,G=0;G<4;++G)for(let ne=0;ne<32;ne+=8)q[V++]=this.g[G]>>>ne&255;return q};function c(q,V){var G=f;return Object.prototype.hasOwnProperty.call(G,q)?G[q]:G[q]=V(q)}function u(q,V){this.h=V;const G=[];let ne=!0;for(let W=q.length-1;W>=0;W--){const ee=q[W]|0;ne&&ee==V||(G[W]=ee,ne=!1)}this.g=G}var f={};function p(q){return-128<=q&&q<128?c(q,function(V){return new u([V|0],V<0?-1:0)}):new u([q|0],q<0?-1:0)}function x(q){if(isNaN(q)||!isFinite(q))return C;if(q<0)return H(x(-q));const V=[];let G=1;for(let ne=0;q>=G;ne++)V[ne]=q/G|0,G*=4294967296;return new u(V,0)}function E(q,V){if(q.length==0)throw Error("number format error: empty string");if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(q.charAt(0)=="-")return H(E(q.substring(1),V));if(q.indexOf("-")>=0)throw Error('number format error: interior "-" character');const G=x(Math.pow(V,8));let ne=C;for(let ee=0;ee<q.length;ee+=8){var W=Math.min(8,q.length-ee);const O=parseInt(q.substring(ee,ee+W),V);W<8?(W=x(Math.pow(V,W)),ne=ne.j(W).add(x(O))):(ne=ne.j(G),ne=ne.add(x(O)))}return ne}var C=p(0),A=p(1),B=p(16777216);s=u.prototype,s.m=function(){if(F(this))return-H(this).m();let q=0,V=1;for(let G=0;G<this.g.length;G++){const ne=this.i(G);q+=(ne>=0?ne:4294967296+ne)*V,V*=4294967296}return q},s.toString=function(q){if(q=q||10,q<2||36<q)throw Error("radix out of range: "+q);if(L(this))return"0";if(F(this))return"-"+H(this).toString(q);const V=x(Math.pow(q,6));var G=this;let ne="";for(;;){const W=K(G,V).g;G=J(G,W.j(V));let ee=((G.g.length>0?G.g[0]:G.h)>>>0).toString(q);if(G=W,L(G))return ee+ne;for(;ee.length<6;)ee="0"+ee;ne=ee+ne}},s.i=function(q){return q<0?0:q<this.g.length?this.g[q]:this.h};function L(q){if(q.h!=0)return!1;for(let V=0;V<q.g.length;V++)if(q.g[V]!=0)return!1;return!0}function F(q){return q.h==-1}s.l=function(q){return q=J(this,q),F(q)?-1:L(q)?0:1};function H(q){const V=q.g.length,G=[];for(let ne=0;ne<V;ne++)G[ne]=~q.g[ne];return new u(G,~q.h).add(A)}s.abs=function(){return F(this)?H(this):this},s.add=function(q){const V=Math.max(this.g.length,q.g.length),G=[];let ne=0;for(let W=0;W<=V;W++){let ee=ne+(this.i(W)&65535)+(q.i(W)&65535),O=(ee>>>16)+(this.i(W)>>>16)+(q.i(W)>>>16);ne=O>>>16,ee&=65535,O&=65535,G[W]=O<<16|ee}return new u(G,G[G.length-1]&-2147483648?-1:0)};function J(q,V){return q.add(H(V))}s.j=function(q){if(L(this)||L(q))return C;if(F(this))return F(q)?H(this).j(H(q)):H(H(this).j(q));if(F(q))return H(this.j(H(q)));if(this.l(B)<0&&q.l(B)<0)return x(this.m()*q.m());const V=this.g.length+q.g.length,G=[];for(var ne=0;ne<2*V;ne++)G[ne]=0;for(ne=0;ne<this.g.length;ne++)for(let W=0;W<q.g.length;W++){const ee=this.i(ne)>>>16,O=this.i(ne)&65535,Re=q.i(W)>>>16,He=q.i(W)&65535;G[2*ne+2*W]+=O*He,Y(G,2*ne+2*W),G[2*ne+2*W+1]+=ee*He,Y(G,2*ne+2*W+1),G[2*ne+2*W+1]+=O*Re,Y(G,2*ne+2*W+1),G[2*ne+2*W+2]+=ee*Re,Y(G,2*ne+2*W+2)}for(q=0;q<V;q++)G[q]=G[2*q+1]<<16|G[2*q];for(q=V;q<2*V;q++)G[q]=0;return new u(G,0)};function Y(q,V){for(;(q[V]&65535)!=q[V];)q[V+1]+=q[V]>>>16,q[V]&=65535,V++}function ue(q,V){this.g=q,this.h=V}function K(q,V){if(L(V))throw Error("division by zero");if(L(q))return new ue(C,C);if(F(q))return V=K(H(q),V),new ue(H(V.g),H(V.h));if(F(V))return V=K(q,H(V)),new ue(H(V.g),V.h);if(q.g.length>30){if(F(q)||F(V))throw Error("slowDivide_ only works with positive integers.");for(var G=A,ne=V;ne.l(q)<=0;)G=me(G),ne=me(ne);var W=xe(G,1),ee=xe(ne,1);for(ne=xe(ne,2),G=xe(G,2);!L(ne);){var O=ee.add(ne);O.l(q)<=0&&(W=W.add(G),ee=O),ne=xe(ne,1),G=xe(G,1)}return V=J(q,W.j(V)),new ue(W,V)}for(W=C;q.l(V)>=0;){for(G=Math.max(1,Math.floor(q.m()/V.m())),ne=Math.ceil(Math.log(G)/Math.LN2),ne=ne<=48?1:Math.pow(2,ne-48),ee=x(G),O=ee.j(V);F(O)||O.l(q)>0;)G-=ne,ee=x(G),O=ee.j(V);L(ee)&&(ee=A),W=W.add(ee),q=J(q,O)}return new ue(W,q)}s.B=function(q){return K(this,q).h},s.and=function(q){const V=Math.max(this.g.length,q.g.length),G=[];for(let ne=0;ne<V;ne++)G[ne]=this.i(ne)&q.i(ne);return new u(G,this.h&q.h)},s.or=function(q){const V=Math.max(this.g.length,q.g.length),G=[];for(let ne=0;ne<V;ne++)G[ne]=this.i(ne)|q.i(ne);return new u(G,this.h|q.h)},s.xor=function(q){const V=Math.max(this.g.length,q.g.length),G=[];for(let ne=0;ne<V;ne++)G[ne]=this.i(ne)^q.i(ne);return new u(G,this.h^q.h)};function me(q){const V=q.g.length+1,G=[];for(let ne=0;ne<V;ne++)G[ne]=q.i(ne)<<1|q.i(ne-1)>>>31;return new u(G,q.h)}function xe(q,V){const G=V>>5;V%=32;const ne=q.g.length-G,W=[];for(let ee=0;ee<ne;ee++)W[ee]=V>0?q.i(ee+G)>>>V|q.i(ee+G+1)<<32-V:q.i(ee+G);return new u(W,q.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,zx=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=x,u.fromString=E,Yo=u}).apply(typeof gb<"u"?gb:typeof self<"u"?self:typeof window<"u"?window:{});var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Fx,ih,qx,cf,yg,Hx,$x,Gx;(function(){var s,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qd=="object"&&Qd];for(var N=0;N<m.length;++N){var R=m[N];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var i=t(this);function a(m,N){if(N)e:{var R=i;m=m.split(".");for(var $=0;$<m.length-1;$++){var ve=m[$];if(!(ve in R))break e;R=R[ve]}m=m[m.length-1],$=R[m],N=N($),N!=$&&N!=null&&e(R,m,{configurable:!0,writable:!0,value:N})}}a("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(m){return m||function(N){var R=[],$;for($ in N)Object.prototype.hasOwnProperty.call(N,$)&&R.push([$,N[$]]);return R}});var c=c||{},u=this||self;function f(m){var N=typeof m;return N=="object"&&m!=null||N=="function"}function p(m,N,R){return m.call.apply(m.bind,arguments)}function x(m,N,R){return x=p,x.apply(null,arguments)}function E(m,N){var R=Array.prototype.slice.call(arguments,1);return function(){var $=R.slice();return $.push.apply($,arguments),m.apply(this,$)}}function C(m,N){function R(){}R.prototype=N.prototype,m.Z=N.prototype,m.prototype=new R,m.prototype.constructor=m,m.Ob=function($,ve,Ce){for(var Ye=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)Ye[wt-2]=arguments[wt];return N.prototype[ve].apply($,Ye)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function B(m){const N=m.length;if(N>0){const R=Array(N);for(let $=0;$<N;$++)R[$]=m[$];return R}return[]}function L(m,N){for(let $=1;$<arguments.length;$++){const ve=arguments[$];var R=typeof ve;if(R=R!="object"?R:ve?Array.isArray(ve)?"array":R:"null",R=="array"||R=="object"&&typeof ve.length=="number"){R=m.length||0;const Ce=ve.length||0;m.length=R+Ce;for(let Ye=0;Ye<Ce;Ye++)m[R+Ye]=ve[Ye]}else m.push(ve)}}class F{constructor(N,R){this.i=N,this.j=R,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function H(m){u.setTimeout(()=>{throw m},0)}function J(){var m=q;let N=null;return m.g&&(N=m.g,m.g=m.g.next,m.g||(m.h=null),N.next=null),N}class Y{constructor(){this.h=this.g=null}add(N,R){const $=ue.get();$.set(N,R),this.h?this.h.next=$:this.g=$,this.h=$}}var ue=new F(()=>new K,m=>m.reset());class K{constructor(){this.next=this.g=this.h=null}set(N,R){this.h=N,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let me,xe=!1,q=new Y,V=()=>{const m=Promise.resolve(void 0);me=()=>{m.then(G)}};function G(){for(var m;m=J();){try{m.h.call(m.g)}catch(R){H(R)}var N=ue;N.j(m),N.h<100&&(N.h++,m.next=N.g,N.g=m)}xe=!1}function ne(){this.u=this.u,this.C=this.C}ne.prototype.u=!1,ne.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ne.prototype[Symbol.dispose]=function(){this.dispose()},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(m,N){this.type=m,this.g=this.target=N,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ee=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,N=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};u.addEventListener("test",R,N),u.removeEventListener("test",R,N)}catch{}return m})();function O(m){return/^[\s\xa0]*$/.test(m)}function Re(m,N){W.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,N)}C(Re,W),Re.prototype.init=function(m,N){const R=this.type=m.type,$=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=N,N=m.relatedTarget,N||(R=="mouseover"?N=m.fromElement:R=="mouseout"&&(N=m.toElement)),this.relatedTarget=N,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Re.Z.h.call(this)},Re.prototype.h=function(){Re.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),te=0;function Se(m,N,R,$,ve){this.listener=m,this.proxy=null,this.src=N,this.type=R,this.capture=!!$,this.ha=ve,this.key=++te,this.da=this.fa=!1}function Pe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function De(m,N,R){for(const $ in m)N.call(R,m[$],$,m)}function Ge(m,N){for(const R in m)N.call(void 0,m[R],R,m)}function M(m){const N={};for(const R in m)N[R]=m[R];return N}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(m,N){let R,$;for(let ve=1;ve<arguments.length;ve++){$=arguments[ve];for(R in $)m[R]=$[R];for(let Ce=0;Ce<se.length;Ce++)R=se[Ce],Object.prototype.hasOwnProperty.call($,R)&&(m[R]=$[R])}}function he(m){this.src=m,this.g={},this.h=0}he.prototype.add=function(m,N,R,$,ve){const Ce=m.toString();m=this.g[Ce],m||(m=this.g[Ce]=[],this.h++);const Ye=de(m,N,$,ve);return Ye>-1?(N=m[Ye],R||(N.fa=!1)):(N=new Se(N,this.src,Ce,!!$,ve),N.fa=R,m.push(N)),N};function X(m,N){const R=N.type;if(R in m.g){var $=m.g[R],ve=Array.prototype.indexOf.call($,N,void 0),Ce;(Ce=ve>=0)&&Array.prototype.splice.call($,ve,1),Ce&&(Pe(N),m.g[R].length==0&&(delete m.g[R],m.h--))}}function de(m,N,R,$){for(let ve=0;ve<m.length;++ve){const Ce=m[ve];if(!Ce.da&&Ce.listener==N&&Ce.capture==!!R&&Ce.ha==$)return ve}return-1}var ye="closure_lm_"+(Math.random()*1e6|0),Le={};function ze(m,N,R,$,ve){if(Array.isArray(N)){for(let Ce=0;Ce<N.length;Ce++)ze(m,N[Ce],R,$,ve);return null}return R=It(R),m&&m[He]?m.J(N,R,f($)?!!$.capture:!1,ve):rt(m,N,R,!1,$,ve)}function rt(m,N,R,$,ve,Ce){if(!N)throw Error("Invalid event type");const Ye=f(ve)?!!ve.capture:!!ve;let wt=vt(m);if(wt||(m[ye]=wt=new he(m)),R=wt.add(N,R,$,Ye,Ce),R.proxy)return R;if($=je(),R.proxy=$,$.src=m,$.listener=R,m.addEventListener)ee||(ve=Ye),ve===void 0&&(ve=!1),m.addEventListener(N.toString(),$,ve);else if(m.attachEvent)m.attachEvent(Wt(N.toString()),$);else if(m.addListener&&m.removeListener)m.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return R}function je(){function m(R){return N.call(m.src,m.listener,R)}const N=Ut;return m}function Ct(m,N,R,$,ve){if(Array.isArray(N))for(var Ce=0;Ce<N.length;Ce++)Ct(m,N[Ce],R,$,ve);else $=f($)?!!$.capture:!!$,R=It(R),m&&m[He]?(m=m.i,Ce=String(N).toString(),Ce in m.g&&(N=m.g[Ce],R=de(N,R,$,ve),R>-1&&(Pe(N[R]),Array.prototype.splice.call(N,R,1),N.length==0&&(delete m.g[Ce],m.h--)))):m&&(m=vt(m))&&(N=m.g[N.toString()],m=-1,N&&(m=de(N,R,$,ve)),(R=m>-1?N[m]:null)&&rn(R))}function rn(m){if(typeof m!="number"&&m&&!m.da){var N=m.src;if(N&&N[He])X(N.i,m);else{var R=m.type,$=m.proxy;N.removeEventListener?N.removeEventListener(R,$,m.capture):N.detachEvent?N.detachEvent(Wt(R),$):N.addListener&&N.removeListener&&N.removeListener($),(R=vt(N))?(X(R,m),R.h==0&&(R.src=null,N[ye]=null)):Pe(m)}}}function Wt(m){return m in Le?Le[m]:Le[m]="on"+m}function Ut(m,N){if(m.da)m=!0;else{N=new Re(N,this);const R=m.listener,$=m.ha||m.src;m.fa&&rn(m),m=R.call($,N)}return m}function vt(m){return m=m[ye],m instanceof he?m:null}var it="__closure_events_fn_"+(Math.random()*1e9>>>0);function It(m){return typeof m=="function"?m:(m[it]||(m[it]=function(N){return m.handleEvent(N)}),m[it])}function Mt(){ne.call(this),this.i=new he(this),this.M=this,this.G=null}C(Mt,ne),Mt.prototype[He]=!0,Mt.prototype.removeEventListener=function(m,N,R,$){Ct(this,m,N,R,$)};function Ot(m,N){var R,$=m.G;if($)for(R=[];$;$=$.G)R.push($);if(m=m.M,$=N.type||N,typeof N=="string")N=new W(N,m);else if(N instanceof W)N.target=N.target||m;else{var ve=N;N=new W($,m),ie(N,ve)}ve=!0;let Ce,Ye;if(R)for(Ye=R.length-1;Ye>=0;Ye--)Ce=N.g=R[Ye],ve=br(Ce,$,!0,N)&&ve;if(Ce=N.g=m,ve=br(Ce,$,!0,N)&&ve,ve=br(Ce,$,!1,N)&&ve,R)for(Ye=0;Ye<R.length;Ye++)Ce=N.g=R[Ye],ve=br(Ce,$,!1,N)&&ve}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var m=this.i;for(const N in m.g){const R=m.g[N];for(let $=0;$<R.length;$++)Pe(R[$]);delete m.g[N],m.h--}}this.G=null},Mt.prototype.J=function(m,N,R,$){return this.i.add(String(m),N,!1,R,$)},Mt.prototype.K=function(m,N,R,$){return this.i.add(String(m),N,!0,R,$)};function br(m,N,R,$){if(N=m.i.g[String(N)],!N)return!0;N=N.concat();let ve=!0;for(let Ce=0;Ce<N.length;++Ce){const Ye=N[Ce];if(Ye&&!Ye.da&&Ye.capture==R){const wt=Ye.listener,Dn=Ye.ha||Ye.src;Ye.fa&&X(m.i,Ye),ve=wt.call(Dn,$)!==!1&&ve}}return ve&&!$.defaultPrevented}function xn(m,N){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:u.setTimeout(m,N||0)}function Or(m){m.g=xn(()=>{m.g=null,m.i&&(m.i=!1,Or(m))},m.l);const N=m.h;m.h=null,m.m.apply(null,N)}class Lt extends ne{constructor(N,R){super(),this.m=N,this.l=R,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Or(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(m){ne.call(this),this.h=m,this.g={}}C(Tr,ne);var Ss=[];function Wr(m){De(m.g,function(N,R){this.g.hasOwnProperty(R)&&rn(N)},m),m.g={}}Tr.prototype.N=function(){Tr.Z.N.call(this),Wr(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=u.JSON.stringify,ui=u.JSON.parse,Yr=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Mn(){}function Xn(){}var Rn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function on(){W.call(this,"d")}C(on,W);function Fn(){W.call(this,"c")}C(Fn,W);var ln={},is=null;function Cn(){return is=is||new Mt}ln.Ia="serverreachability";function ge(m){W.call(this,ln.Ia,m)}C(ge,W);function Te(m){const N=Cn();Ot(N,new ge(N))}ln.STAT_EVENT="statevent";function Je(m,N){W.call(this,ln.STAT_EVENT,m),this.stat=N}C(Je,W);function tt(m){const N=Cn();Ot(N,new Je(N,m))}ln.Ja="timingevent";function yt(m,N){W.call(this,ln.Ja,m),this.size=N}C(yt,W);function yn(m,N){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},N)}function Kt(){this.g=!0}Kt.prototype.ua=function(){this.g=!1};function xr(m,N,R,$,ve,Ce){m.info(function(){if(m.g)if(Ce){var Ye="",wt=Ce.split("&");for(let Yt=0;Yt<wt.length;Yt++){var Dn=wt[Yt].split("=");if(Dn.length>1){const Sn=Dn[0];Dn=Dn[1];const ls=Sn.split("_");Ye=ls.length>=2&&ls[1]=="type"?Ye+(Sn+"="+Dn+"&"):Ye+(Sn+"=redacted&")}}}else Ye=null;else Ye=Ce;return"XMLHTTP REQ ("+$+") [attempt "+ve+"]: "+N+`
`+R+`
`+Ye})}function Jn(m,N,R,$,ve,Ce,Ye){m.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+ve+"]: "+N+`
`+R+`
`+Ce+" "+Ye})}function wn(m,N,R,$){m.info(function(){return"XMLHTTP TEXT ("+N+"): "+hr(m,R)+($?" "+$:"")})}function Nn(m,N){m.info(function(){return"TIMEOUT: "+N})}Kt.prototype.info=function(){};function hr(m,N){if(!m.g)return N;if(!N)return null;try{const Ce=JSON.parse(N);if(Ce){for(m=0;m<Ce.length;m++)if(Array.isArray(Ce[m])){var R=Ce[m];if(!(R.length<2)){var $=R[1];if(Array.isArray($)&&!($.length<1)){var ve=$[0];if(ve!="noop"&&ve!="stop"&&ve!="close")for(let Ye=1;Ye<$.length;Ye++)$[Ye]=""}}}}return _r(Ce)}catch{return N}}var pe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ue={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$e;function Z(){}C(Z,Mn),Z.prototype.g=function(){return new XMLHttpRequest},$e=new Z;function ke(m){return encodeURIComponent(String(m))}function We(m){var N=1;m=m.split(":");const R=[];for(;N>0&&m.length;)R.push(m.shift()),N--;return m.length&&R.push(m.join(":")),R}function Qe(m,N,R,$){this.j=m,this.i=N,this.l=R,this.S=$||1,this.V=new Tr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new lt}function lt(){this.i=null,this.g="",this.h=!1}var ct={},_t={};function On(m,N,R){m.M=1,m.A=ca(Pn(N)),m.u=R,m.R=!0,Zn(m,null)}function Zn(m,N){m.F=Date.now(),as(m),m.B=Pn(m.A);var R=m.B,$=m.S;Array.isArray($)||($=[String($)]),so(R.i,"t",$),m.C=0,R=m.j.L,m.h=new lt,m.g=co(m.j,R?N:null,!m.u),m.P>0&&(m.O=new Lt(x(m.Y,m,m.g),m.P)),N=m.V,R=m.g,$=m.ba;var ve="readystatechange";Array.isArray(ve)||(ve&&(Ss[0]=ve.toString()),ve=Ss);for(let Ce=0;Ce<ve.length;Ce++){const Ye=ze(R,ve[Ce],$||N.handleEvent,!1,N.h||N);if(!Ye)break;N.g[Ye.key]=Ye}N=m.J?M(m.J):{},m.u?(m.v||(m.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,N)):(m.v="GET",m.g.ea(m.B,m.v,null,N)),Te(),xr(m.i,m.v,m.B,m.l,m.S,m.u)}Qe.prototype.ba=function(m){m=m.target;const N=this.O;N&&Kr(m)==3?N.j():this.Y(m)},Qe.prototype.Y=function(m){try{if(m==this.g)e:{const wt=Kr(this.g),Dn=this.g.ya(),Yt=this.g.ca();if(!(wt<3)&&(wt!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||wt!=4||Dn==7||(Dn==8||Yt<=0?Te(3):Te(2)),bt(this);var N=this.g.ca();this.X=N;var R=Cr(this);if(this.o=N==200,Jn(this.i,this.v,this.B,this.l,this.S,wt,N),this.o){if(this.U&&!this.L){t:{if(this.g){var $,ve=this.g;if(($=ve.g?ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O($)){var Ce=$;break t}}Ce=null}if(m=Ce)wn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zs(this,m);else{this.o=!1,this.m=3,tt(12),er(this),qn(this);break e}}if(this.R){m=!0;let Sn;for(;!this.K&&this.C<R.length;)if(Sn=hi(this,R),Sn==_t){wt==4&&(this.m=4,tt(14),m=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==ct){this.m=4,tt(15),wn(this.i,this.l,R,"[Invalid Chunk]"),m=!1;break}else wn(this.i,this.l,Sn,null),zs(this,Sn);if(Bs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||R.length!=0||this.h.h||(this.m=1,tt(16),m=!1),this.o=this.o&&m,!m)wn(this.i,this.l,R,"[Invalid Chunked Response]"),er(this),qn(this);else if(R.length>0&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.aa&&!Ye.P&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),Xr(Ye),Ye.P=!0,tt(11))}}else wn(this.i,this.l,R,null),zs(this,R);wt==4&&er(this),this.o&&!this.K&&(wt==4?nc(this.j,this):(this.o=!1,as(this)))}else mi(this.g),N==400&&R.indexOf("Unknown SID")>0?(this.m=3,tt(12)):(this.m=0,tt(13)),er(this),qn(this)}}}catch{}};function Cr(m){if(!Bs(m))return m.g.la();const N=cn(m.g);if(N==="")return"";let R="";const $=N.length,ve=Kr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return er(m),qn(m),"";m.h.i=new u.TextDecoder}for(let Ce=0;Ce<$;Ce++)m.h.h=!0,R+=m.h.i.decode(N[Ce],{stream:!(ve&&Ce==$-1)});return N.length=0,m.h.g+=R,m.C=0,m.h.g}function Bs(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function hi(m,N){var R=m.C,$=N.indexOf(`
`,R);return $==-1?_t:(R=Number(N.substring(R,$)),isNaN(R)?ct:($+=1,$+R>N.length?_t:(N=N.slice($,$+R),m.C=$+R,N)))}Qe.prototype.cancel=function(){this.K=!0,er(this)};function as(m){m.T=Date.now()+m.H,di(m,m.H)}function di(m,N){if(m.D!=null)throw Error("WatchDog timer not null");m.D=yn(x(m.aa,m),N)}function bt(m){m.D&&(u.clearTimeout(m.D),m.D=null)}Qe.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Nn(this.i,this.B),this.M!=2&&(Te(),tt(17)),er(this),this.m=2,qn(this)):di(this,this.T-m)};function qn(m){m.j.I==0||m.K||nc(m.j,m)}function er(m){bt(m);var N=m.O;N&&typeof N.dispose=="function"&&N.dispose(),m.O=null,Wr(m.V),m.g&&(N=m.g,m.g=null,N.abort(),N.dispose())}function zs(m,N){try{var R=m.j;if(R.I!=0&&(R.g==m||qs(R.h,m))){if(!m.L&&qs(R.h,m)&&R.I==3){try{var $=R.Ba.g.parse(N)}catch{$=null}if(Array.isArray($)&&$.length==3){var ve=$;if(ve[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<m.F)ma(R),Ws(R);else break e;qi(R),tt(18)}}else R.xa=ve[1],0<R.xa-R.K&&ve[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=yn(x(R.Va,R),6e3));Fs(R.h)<=1&&R.ta&&(R.ta=void 0)}else Ys(R,11)}else if((m.L||R.g==m)&&ma(R),!O(N))for(ve=R.Ba.g.parse(N),N=0;N<ve.length;N++){let Yt=ve[N];const Sn=Yt[0];if(!(Sn<=R.K))if(R.K=Sn,Yt=Yt[1],R.I==2)if(Yt[0]=="c"){R.M=Yt[1],R.ba=Yt[2];const ls=Yt[3];ls!=null&&(R.ka=ls,R.j.info("VER="+R.ka));const Qs=Yt[4];Qs!=null&&(R.za=Qs,R.j.info("SVER="+R.za));const cs=Yt[5];cs!=null&&typeof cs=="number"&&cs>0&&($=1.5*cs,R.O=$,R.j.info("backChannelRequestTimeoutMs_="+$)),$=R;const Cs=m.g;if(Cs){const vi=Cs.g?Cs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vi){var Ce=$.h;Ce.g||vi.indexOf("spdy")==-1&&vi.indexOf("quic")==-1&&vi.indexOf("h2")==-1||(Ce.j=Ce.l,Ce.g=new Set,Ce.h&&(ll(Ce,Ce.h),Ce.h=null))}if($.G){const pa=Cs.g?Cs.g.getResponseHeader("X-HTTP-Session-Id"):null;pa&&($.wa=pa,en($.J,$.G,pa))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-m.F,R.j.info("Handshake RTT: "+R.T+"ms")),$=R;var Ye=m;if($.na=rc($,$.L?$.ba:null,$.W),Ye.L){eo($.h,Ye);var wt=Ye,Dn=$.O;Dn&&(wt.H=Dn),wt.D&&(bt(wt),as(wt)),$.g=Ye}else gl($);R.i.length>0&&fn(R)}else Yt[0]!="stop"&&Yt[0]!="close"||Ys(R,7);else R.I==3&&(Yt[0]=="stop"||Yt[0]=="close"?Yt[0]=="stop"?Ys(R,7):An(R):Yt[0]!="noop"&&R.l&&R.l.qa(Yt),R.A=0)}}Te(4)}catch{}}var Ln=class{constructor(m,N){this.g=m,this.map=N}};function al(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ol(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Fs(m){return m.h?1:m.g?m.g.size:0}function qs(m,N){return m.h?m.h==N:m.g?m.g.has(N):!1}function ll(m,N){m.g?m.g.add(N):m.h=N}function eo(m,N){m.h&&m.h==N?m.h=null:m.g&&m.g.has(N)&&m.g.delete(N)}al.prototype.cancel=function(){if(this.i=to(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function to(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let N=m.i;for(const R of m.g.values())N=N.concat(R.G);return N}return B(m.i)}var cl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function no(m,N){if(m){m=m.split("&");for(let R=0;R<m.length;R++){const $=m[R].indexOf("=");let ve,Ce=null;$>=0?(ve=m[R].substring(0,$),Ce=m[R].substring($+1)):ve=m[R],N(ve,Ce?decodeURIComponent(Ce.replace(/\+/g," ")):"")}}}function Qr(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;m instanceof Qr?(this.l=m.l,Vn(this,m.j),this.o=m.o,this.g=m.g,Mi(this,m.u),this.h=m.h,ul(this,ec(m.i)),this.m=m.m):m&&(N=String(m).match(cl))?(this.l=!1,Vn(this,N[1]||"",!0),this.o=Hs(N[2]||""),this.g=Hs(N[3]||"",!0),Mi(this,N[4]),this.h=Hs(N[5]||"",!0),ul(this,N[6]||"",!0),this.m=Hs(N[7]||"")):(this.l=!1,this.i=new Li(null,this.l))}Qr.prototype.toString=function(){const m=[];var N=this.j;N&&m.push(ua(N,ro,!0),":");var R=this.g;return(R||N=="file")&&(m.push("//"),(N=this.o)&&m.push(ua(N,ro,!0),"@"),m.push(ke(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&m.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(ua(R,R.charAt(0)=="/"?hl:Xl,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",ua(R,Jl)),m.join("")},Qr.prototype.resolve=function(m){const N=Pn(this);let R=!!m.j;R?Vn(N,m.j):R=!!m.o,R?N.o=m.o:R=!!m.g,R?N.g=m.g:R=m.u!=null;var $=m.h;if(R)Mi(N,m.u);else if(R=!!m.h){if($.charAt(0)!="/")if(this.g&&!this.h)$="/"+$;else{var ve=N.h.lastIndexOf("/");ve!=-1&&($=N.h.slice(0,ve+1)+$)}if(ve=$,ve==".."||ve==".")$="";else if(ve.indexOf("./")!=-1||ve.indexOf("/.")!=-1){$=ve.lastIndexOf("/",0)==0,ve=ve.split("/");const Ce=[];for(let Ye=0;Ye<ve.length;){const wt=ve[Ye++];wt=="."?$&&Ye==ve.length&&Ce.push(""):wt==".."?((Ce.length>1||Ce.length==1&&Ce[0]!="")&&Ce.pop(),$&&Ye==ve.length&&Ce.push("")):(Ce.push(wt),$=!0)}$=Ce.join("/")}else $=ve}return R?N.h=$:R=m.i.toString()!=="",R?ul(N,ec(m.i)):R=!!m.m,R&&(N.m=m.m),N};function Pn(m){return new Qr(m)}function Vn(m,N,R){m.j=R?Hs(N,!0):N,m.j&&(m.j=m.j.replace(/:$/,""))}function Mi(m,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);m.u=N}else m.u=null}function ul(m,N,R){N instanceof Li?(m.i=N,io(m.i,m.l)):(R||(N=ua(N,Oi)),m.i=new Li(N,m.l))}function en(m,N,R){m.i.set(N,R)}function ca(m){return en(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Hs(m,N){return m?N?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ua(m,N,R){return typeof m=="string"?(m=encodeURI(m).replace(N,Lr),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Lr(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var ro=/[#\/\?@]/g,Xl=/[#\?:]/g,hl=/[#\?]/g,Oi=/[#\?@]/g,Jl=/#/g;function Li(m,N){this.h=this.g=null,this.i=m||null,this.j=!!N}function Pr(m){m.g||(m.g=new Map,m.h=0,m.i&&no(m.i,function(N,R){m.add(decodeURIComponent(N.replace(/\+/g," ")),R)}))}s=Li.prototype,s.add=function(m,N){Pr(this),this.i=null,m=Pi(this,m);let R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(N),this.h+=1,this};function Zl(m,N){Pr(m),N=Pi(m,N),m.g.has(N)&&(m.i=null,m.h-=m.g.get(N).length,m.g.delete(N))}function dl(m,N){return Pr(m),N=Pi(m,N),m.g.has(N)}s.forEach=function(m,N){Pr(this),this.g.forEach(function(R,$){R.forEach(function(ve){m.call(N,ve,$,this)},this)},this)};function fl(m,N){Pr(m);let R=[];if(typeof N=="string")dl(m,N)&&(R=R.concat(m.g.get(Pi(m,N))));else for(m=Array.from(m.g.values()),N=0;N<m.length;N++)R=R.concat(m[N]);return R}s.set=function(m,N){return Pr(this),this.i=null,m=Pi(this,m),dl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[N]),this.h+=1,this},s.get=function(m,N){return m?(m=fl(this,m),m.length>0?String(m[0]):N):N};function so(m,N,R){Zl(m,N),R.length>0&&(m.i=null,m.g.set(Pi(m,N),B(R)),m.h+=R.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],N=Array.from(this.g.keys());for(let $=0;$<N.length;$++){var R=N[$];const ve=ke(R);R=fl(this,R);for(let Ce=0;Ce<R.length;Ce++){let Ye=ve;R[Ce]!==""&&(Ye+="="+ke(R[Ce])),m.push(Ye)}}return this.i=m.join("&")};function ec(m){const N=new Li;return N.i=m.i,m.g&&(N.g=new Map(m.g),N.h=m.h),N}function Pi(m,N){return N=String(N),m.j&&(N=N.toLowerCase()),N}function io(m,N){N&&!m.j&&(Pr(m),m.i=null,m.g.forEach(function(R,$){const ve=$.toLowerCase();$!=ve&&(Zl(this,$),so(this,ve,R))},m)),m.j=N}function Es(m,N){const R=new Kt;if(u.Image){const $=new Image;$.onload=E(os,R,"TestLoadImage: loaded",!0,N,$),$.onerror=E(os,R,"TestLoadImage: error",!1,N,$),$.onabort=E(os,R,"TestLoadImage: abort",!1,N,$),$.ontimeout=E(os,R,"TestLoadImage: timeout",!1,N,$),u.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=m}else N(!1)}function ml(m,N){const R=new Kt,$=new AbortController,ve=setTimeout(()=>{$.abort(),os(R,"TestPingServer: timeout",!1,N)},1e4);fetch(m,{signal:$.signal}).then(Ce=>{clearTimeout(ve),Ce.ok?os(R,"TestPingServer: ok",!0,N):os(R,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ve),os(R,"TestPingServer: error",!1,N)})}function os(m,N,R,$,ve){try{ve&&(ve.onload=null,ve.onerror=null,ve.onabort=null,ve.ontimeout=null),$(R)}catch{}}function Vi(){this.g=new Yr}function Nr(m){this.i=m.Sb||null,this.h=m.ab||!1}C(Nr,Mn),Nr.prototype.g=function(){return new ha(this.i,this.h)};function ha(m,N){Mt.call(this),this.H=m,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(ha,Mt),s=ha.prototype,s.open=function(m,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=N,this.readyState=1,Ts(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(N.body=m),(this.H||u).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},s.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ts(this)),this.g&&(this.readyState=3,Ts(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ui(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ui(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}s.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var N=m.value?m.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!m.done}))&&(this.response=this.responseText+=N)}m.done?Bi(this):Ts(this),this.readyState==3&&Ui(this)}},s.Oa=function(m){this.g&&(this.response=this.responseText=m,Bi(this))},s.Na=function(m){this.g&&(this.response=m,Bi(this))},s.ga=function(){this.g&&Bi(this)};function Bi(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ts(m)}s.setRequestHeader=function(m,N){this.A.append(m,N)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],N=this.h.entries();for(var R=N.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=N.next();return m.join(`\r
`)};function Ts(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Vr(m){let N="";return De(m,function(R,$){N+=$,N+=":",N+=R,N+=`\r
`}),N}function da(m,N,R){e:{for($ in R){var $=!1;break e}$=!0}$||(R=Vr(R),typeof m=="string"?R!=null&&ke(R):en(m,N,R))}function sn(m){Mt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(sn,Mt);var $s=/^https?$/i,pl=["POST","PUT"];s=sn.prototype,s.Fa=function(m){this.H=m},s.ea=function(m,N,R,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);N=N?N.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$e.g(),this.g.onreadystatechange=A(x(this.Ca,this));try{this.B=!0,this.g.open(N,String(m),!0),this.B=!1}catch(Ce){Gs(this,Ce);return}if(m=R||"",R=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var ve in $)R.set(ve,$[ve]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const Ce of $.keys())R.set(Ce,$.get(Ce));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(R.keys()).find(Ce=>Ce.toLowerCase()=="content-type"),ve=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(pl,N,void 0)>=0)||$||ve||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ce,Ye]of R)this.g.setRequestHeader(Ce,Ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Ce){Gs(this,Ce)}};function Gs(m,N){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=N,m.o=5,ao(m),fi(m)}function ao(m){m.A||(m.A=!0,Ot(m,"complete"),Ot(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ot(this,"complete"),Ot(this,"abort"),fi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fi(this,!0)),sn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?zi(this):this.Xa())},s.Xa=function(){zi(this)};function zi(m){if(m.h&&typeof c<"u"){if(m.v&&Kr(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ot(m,"readystatechange"),Kr(m)==4){m.h=!1;try{const Ce=m.ca();e:switch(Ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var R;if(!(R=N)){var $;if($=Ce===0){let Ye=String(m.D).match(cl)[1]||null;!Ye&&u.self&&u.self.location&&(Ye=u.self.location.protocol.slice(0,-1)),$=!$s.test(Ye?Ye.toLowerCase():"")}R=$}if(R)Ot(m,"complete"),Ot(m,"success");else{m.o=6;try{var ve=Kr(m)>2?m.g.statusText:""}catch{ve=""}m.l=ve+" ["+m.ca()+"]",ao(m)}}finally{fi(m)}}}}function fi(m,N){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const R=m.g;m.g=null,N||Ot(m,"ready");try{R.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Kr(m){return m.g?m.g.readyState:0}s.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(m){if(this.g){var N=this.g.responseText;return m&&N.indexOf(m)==0&&(N=N.substring(m.length)),ui(N)}};function cn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function mi(m){const N={};m=(m.g&&Kr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<m.length;$++){if(O(m[$]))continue;var R=We(m[$]);const ve=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const Ce=N[ve]||[];N[ve]=Ce,Ce.push(R)}Ge(N,function($){return $.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(m,N,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||N}function Fi(m){this.za=0,this.i=[],this.j=new Kt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tr("baseRetryDelayMs",5e3,m),this.Za=tr("retryDelaySeedMs",1e4,m),this.Ta=tr("forwardChannelMaxRetries",2,m),this.va=tr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new al(m&&m.concurrentRequestLimit),this.Ba=new Vi,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Fi.prototype,s.ka=8,s.I=1,s.connect=function(m,N,R,$){tt(0),this.W=m,this.H=N||{},R&&$!==void 0&&(this.H.OSID=R,this.H.OAID=$),this.F=this.X,this.J=rc(this,null,this.W),fn(this)};function An(m){if(oo(m),m.I==3){var N=m.V++,R=Pn(m.J);if(en(R,"SID",m.M),en(R,"RID",N),en(R,"TYPE","terminate"),fa(m,R),N=new Qe(m,m.j,N),N.M=2,N.A=ca(Pn(R)),R=!1,u.navigator&&u.navigator.sendBeacon)try{R=u.navigator.sendBeacon(N.A.toString(),"")}catch{}!R&&u.Image&&(new Image().src=N.A,R=!0),R||(N.g=co(N.j,null),N.g.ea(N.A)),N.F=Date.now(),as(N)}yl(m)}function Ws(m){m.g&&(Xr(m),m.g.cancel(),m.g=null)}function oo(m){Ws(m),m.v&&(u.clearTimeout(m.v),m.v=null),ma(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function fn(m){if(!ol(m.h)&&!m.m){m.m=!0;var N=m.Ea;me||V(),xe||(me(),xe=!0),q.add(N,m),m.D=0}}function lo(m,N){return Fs(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=N.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=yn(x(m.Ea,m,N),vl(m,m.D)),m.D++,!0)}s.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ve=new Qe(this,this.j,m);let Ce=this.o;if(this.U&&(Ce?(Ce=M(Ce),ie(Ce,this.U)):Ce=this.U),this.u!==null||this.R||(ve.J=Ce,Ce=null),this.S)e:{for(var N=0,R=0;R<this.i.length;R++){t:{var $=this.i[R];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(N+=$,N>4096){N=R;break e}if(N===4096||R===this.i.length-1){N=R+1;break e}}N=1e3}else N=1e3;N=Hn(this,ve,N),R=Pn(this.J),en(R,"RID",m),en(R,"CVER",22),this.G&&en(R,"X-HTTP-Session-Id",this.G),fa(this,R),Ce&&(this.R?N="headers="+ke(Vr(Ce))+"&"+N:this.u&&da(R,this.u,Ce)),ll(this.h,ve),this.Ra&&en(R,"TYPE","init"),this.S?(en(R,"$req",N),en(R,"SID","null"),ve.U=!0,On(ve,R,null)):On(ve,R,N),this.I=2}}else this.I==3&&(m?Nt(this,m):this.i.length==0||ol(this.h)||Nt(this))};function Nt(m,N){var R;N?R=N.l:R=m.V++;const $=Pn(m.J);en($,"SID",m.M),en($,"RID",R),en($,"AID",m.K),fa(m,$),m.u&&m.o&&da($,m.u,m.o),R=new Qe(m,m.j,R,m.D+1),m.u===null&&(R.J=m.o),N&&(m.i=N.G.concat(m.i)),N=Hn(m,R,1e3),R.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ll(m.h,R),On(R,$,N)}function fa(m,N){m.H&&De(m.H,function(R,$){en(N,$,R)}),m.l&&De({},function(R,$){en(N,$,R)})}function Hn(m,N,R){R=Math.min(m.i.length,R);const $=m.l?x(m.l.Ka,m.l,m):null;e:{var ve=m.i;let wt=-1;for(;;){const Dn=["count="+R];wt==-1?R>0?(wt=ve[0].g,Dn.push("ofs="+wt)):wt=0:Dn.push("ofs="+wt);let Yt=!0;for(let Sn=0;Sn<R;Sn++){var Ce=ve[Sn].g;const ls=ve[Sn].map;if(Ce-=wt,Ce<0)wt=Math.max(0,ve[Sn].g-100),Yt=!1;else try{Ce="req"+Ce+"_"||"";try{var Ye=ls instanceof Map?ls:Object.entries(ls);for(const[Qs,cs]of Ye){let Cs=cs;f(cs)&&(Cs=_r(cs)),Dn.push(Ce+Qs+"="+encodeURIComponent(Cs))}}catch(Qs){throw Dn.push(Ce+"type="+encodeURIComponent("_badmap")),Qs}}catch{$&&$(ls)}}if(Yt){Ye=Dn.join("&");break e}}Ye=void 0}return m=m.i.splice(0,R),N.G=m,Ye}function gl(m){if(!m.g&&!m.v){m.Y=1;var N=m.Da;me||V(),xe||(me(),xe=!0),q.add(N,m),m.A=0}}function qi(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=yn(x(m.Da,m),vl(m,m.A)),m.A++,!0)}s.Da=function(){if(this.v=null,tc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=yn(x(this.Wa,this),m)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tt(10),Ws(this),tc(this))};function Xr(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function tc(m){m.g=new Qe(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var N=Pn(m.na);en(N,"RID","rpc"),en(N,"SID",m.M),en(N,"AID",m.K),en(N,"CI",m.F?"0":"1"),!m.F&&m.ia&&en(N,"TO",m.ia),en(N,"TYPE","xmlhttp"),fa(m,N),m.u&&m.o&&da(N,m.u,m.o),m.O&&(m.g.H=m.O);var R=m.g;m=m.ba,R.M=1,R.A=ca(Pn(N)),R.u=null,R.R=!0,Zn(R,m)}s.Va=function(){this.C!=null&&(this.C=null,Ws(this),qi(this),tt(19))};function ma(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function nc(m,N){var R=null;if(m.g==N){ma(m),Xr(m),m.g=null;var $=2}else if(qs(m.h,N))R=N.G,eo(m.h,N),$=1;else return;if(m.I!=0){if(N.o)if($==1){R=N.u?N.u.length:0,N=Date.now()-N.F;var ve=m.D;$=Cn(),Ot($,new yt($,R)),fn(m)}else gl(m);else if(ve=N.m,ve==3||ve==0&&N.X>0||!($==1&&lo(m,N)||$==2&&qi(m)))switch(R&&R.length>0&&(N=m.h,N.i=N.i.concat(R)),ve){case 1:Ys(m,5);break;case 4:Ys(m,10);break;case 3:Ys(m,6);break;default:Ys(m,2)}}}function vl(m,N){let R=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(R*=2),R*N}function Ys(m,N){if(m.j.info("Error code "+N),N==2){var R=x(m.bb,m),$=m.Ua;const ve=!$;$=new Qr($||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Vn($,"https"),ca($),ve?Es($.toString(),R):ml($.toString(),R)}else tt(2);m.I=0,m.l&&m.l.pa(N),yl(m),oo(m)}s.bb=function(m){m?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function yl(m){if(m.I=0,m.ja=[],m.l){const N=to(m.h);(N.length!=0||m.i.length!=0)&&(L(m.ja,N),L(m.ja,m.i),m.h.i.length=0,B(m.i),m.i.length=0),m.l.oa()}}function rc(m,N,R){var $=R instanceof Qr?Pn(R):new Qr(R);if($.g!="")N&&($.g=N+"."+$.g),Mi($,$.u);else{var ve=u.location;$=ve.protocol,N=N?N+"."+ve.hostname:ve.hostname,ve=+ve.port;const Ce=new Qr(null);$&&Vn(Ce,$),N&&(Ce.g=N),ve&&Mi(Ce,ve),R&&(Ce.h=R),$=Ce}return R=m.G,N=m.wa,R&&N&&en($,R,N),en($,"VER",m.ka),fa(m,$),$}function co(m,N,R){if(N&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=m.Aa&&!m.ma?new sn(new Nr({ab:R})):new sn(m.ma),N.Fa(m.L),N}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function uo(){}s=uo.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function pi(){}pi.prototype.g=function(m,N){return new wr(m,N)};function wr(m,N){Mt.call(this),this.g=new Fi(N),this.l=m,this.h=N&&N.messageUrlParams||null,m=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(m?m["X-WebChannel-Content-Type"]=N.messageContentType:m={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(m?m["X-WebChannel-Client-Profile"]=N.sa:m={"X-WebChannel-Client-Profile":N.sa}),this.g.U=m,(m=N&&N.Qb)&&!O(m)&&(this.g.u=m),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!O(N)&&(this.g.G=N,m=this.h,m!==null&&N in m&&(m=this.h,N in m&&delete m[N])),this.j=new gi(this)}C(wr,Mt),wr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wr.prototype.close=function(){An(this.g)},wr.prototype.o=function(m){var N=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.v&&(R={},R.__data__=_r(m),m=R);N.i.push(new Ln(N.Ya++,m)),N.I==3&&fn(N)},wr.prototype.N=function(){this.g.l=null,delete this.j,An(this.g),delete this.g,wr.Z.N.call(this)};function sc(m){on.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var N=m.__sm__;if(N){e:{for(const R in N){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,N=N!==null&&m in N?N[m]:void 0),this.data=N}else this.data=m}C(sc,on);function bl(){Fn.call(this),this.status=1}C(bl,Fn);function gi(m){this.g=m}C(gi,uo),gi.prototype.ra=function(){Ot(this.g,"a")},gi.prototype.qa=function(m){Ot(this.g,new sc(m))},gi.prototype.pa=function(m){Ot(this.g,new bl)},gi.prototype.oa=function(){Ot(this.g,"b")},pi.prototype.createWebChannel=pi.prototype.g,wr.prototype.send=wr.prototype.o,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,Gx=function(){return new pi},$x=function(){return Cn()},Hx=ln,yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pe.NO_ERROR=0,pe.TIMEOUT=8,pe.HTTP_ERROR=6,cf=pe,Ue.COMPLETE="complete",qx=Ue,Xn.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,ih=Xn,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,Fx=sn}).apply(typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{});class Hr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hr.UNAUTHENTICATED=new Hr(null),Hr.GOOGLE_CREDENTIALS=new Hr("google-credentials-uid"),Hr.FIRST_PARTY=new Hr("first-party-uid"),Hr.MOCK_USER=new Hr("mock-user");let ru="12.8.0";function jj(s){ru=s}const ql=new Qg("@firebase/firestore");function Dc(){return ql.logLevel}function nt(s,...e){if(ql.logLevel<=qt.DEBUG){const t=e.map(cv);ql.debug(`Firestore (${ru}): ${s}`,...t)}}function Ya(s,...e){if(ql.logLevel<=qt.ERROR){const t=e.map(cv);ql.error(`Firestore (${ru}): ${s}`,...t)}}function $c(s,...e){if(ql.logLevel<=qt.WARN){const t=e.map(cv);ql.warn(`Firestore (${ru}): ${s}`,...t)}}function cv(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function gt(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Wx(s,i,t)}function Wx(s,e,t){let i=`FIRESTORE (${ru}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ya(i),new Error(i)}function an(s,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,s||Wx(e,a,i)}function Tt(s,e){return s}const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends Xa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Yx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Hr.UNAUTHENTICATED)))}shutdown(){}}class Rj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Dj{constructor(e){this.t=e,this.currentUser=Hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){an(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let c=new qa;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new qa,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},f=p=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new qa)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(an(typeof i.accessToken=="string",31837,{l:i}),new Yx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return an(e===null||typeof e=="string",2055,{h:e}),new Hr(e)}}class Ij{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Hr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Mj{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Ij(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Hr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Oj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){an(this.o===void 0,3512);const i=c=>{c.error!=null&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,nt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const a=c=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(an(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Lj(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class uv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=Lj(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<t&&(i+=e.charAt(a[c]%62))}return i}}function Ht(s,e){return s<e?-1:s>e?1:0}function bg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const a=s.charAt(i),c=e.charAt(i);if(a!==c)return Kp(a)===Kp(c)?Ht(a,c):Kp(a)?1:-1}return Ht(s.length,e.length)}const Pj=55296,Vj=57343;function Kp(s){const e=s.charCodeAt(0);return e>=Pj&&e<=Vj}function Gc(s,e,t){return s.length===e.length&&s.every(((i,a)=>t(i,e[a])))}const yb="__name__";class ta{constructor(e,t,i){t===void 0?t=0:t>e.length&&gt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&gt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ta.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ta?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const c=ta.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return Ht(e.length,t.length)}static compareSegments(e,t){const i=ta.isNumericId(e),a=ta.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?ta.extractNumericId(e).compare(ta.extractNumericId(t)):bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yo.fromString(e.substring(4,e.length-2))}}class En extends ta{construct(e,t,i){return new En(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ze(Be.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new En(t)}static emptyPath(){return new En([])}}const Uj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends ta{construct(e,t,i){return new Dr(e,t,i)}static isValidIdentifier(e){return Uj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yb}static keyField(){return new Dr([yb])}static fromServerFormat(e){const t=[];let i="",a=0;const c=()=>{if(i.length===0)throw new Ze(Be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new Ze(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ze(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(i+=f,a++):(c(),a++)}if(c(),u)throw new Ze(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class dt{constructor(e){this.path=e}static fromPath(e){return new dt(En.fromString(e))}static fromName(e){return new dt(En.fromString(e).popFirst(5))}static empty(){return new dt(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&En.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new En(e.slice()))}}function Qx(s,e,t){if(!t)throw new Ze(Be.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Bj(s,e,t,i){if(e===!0&&i===!0)throw new Ze(Be.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function bb(s){if(!dt.isDocumentKey(s))throw new Ze(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function _b(s){if(dt.isDocumentKey(s))throw new Ze(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Kx(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Wf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":gt(12329,{type:typeof s})}function Di(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ze(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wf(s);throw new Ze(Be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function ur(s,e){const t={typeString:s};return e&&(t.value=e),t}function Oh(s,e){if(!Kx(s))throw new Ze(Be.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const u=s[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new Ze(Be.INVALID_ARGUMENT,t);return!0}const xb=-62135596800,wb=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*wb);return new ot(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ze(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ze(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xb)throw new Ze(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wb}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oh(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:ur("string",ot._jsonSchemaVersion),seconds:ur("number"),nanoseconds:ur("number")};class xt{static fromTimestamp(e){return new xt(e)}static min(){return new xt(new ot(0,0))}static max(){return new xt(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const bh=-1;function zj(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=xt.fromTimestamp(i===1e9?new ot(t+1,0):new ot(t,i));return new Ko(a,dt.empty(),e)}function Fj(s){return new Ko(s.readTime,s.key,bh)}class Ko{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ko(xt.min(),dt.empty(),bh)}static max(){return new Ko(xt.max(),dt.empty(),bh)}}function qj(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=dt.comparator(s.documentKey,e.documentKey),t!==0?t:Ht(s.largestBatchId,e.largestBatchId))}const Hj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $j{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function su(s){if(s.code!==Be.FAILED_PRECONDITION||s.message!==Hj)throw s;nt("LocalStore","Unexpectedly lost primary lease")}class qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new qe(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof qe?t:qe.resolve(t)}catch(t){return qe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):qe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):qe.reject(t)}static resolve(e){return new qe(((t,i)=>{t(e)}))}static reject(e){return new qe(((t,i)=>{i(e)}))}static waitFor(e){return new qe(((t,i)=>{let a=0,c=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++c,u&&c===a&&t()}),(p=>i(p)))})),u=!0,c===a&&t()}))}static or(e){let t=qe.resolve(!1);for(const i of e)t=t.next((a=>a?qe.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,c)=>{i.push(t.call(this,a,c))})),this.waitFor(i)}static mapArray(e,t){return new qe(((i,a)=>{const c=e.length,u=new Array(c);let f=0;for(let p=0;p<c;p++){const x=p;t(e[x]).next((E=>{u[x]=E,++f,f===c&&i(u)}),(E=>a(E)))}}))}static doWhile(e,t){return new qe(((i,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):i()};c()}))}}function Gj(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function iu(s){return s.name==="IndexedDbTransactionError"}class Yf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yf.ce=-1;const hv=-1;function Qf(s){return s==null}function Nf(s){return s===0&&1/s==-1/0}function Wj(s){return typeof s=="number"&&Number.isInteger(s)&&!Nf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Xx="";function Yj(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Sb(e)),e=Qj(s.get(t),e);return Sb(e)}function Qj(s,e){let t=e;const i=s.length;for(let a=0;a<i;a++){const c=s.charAt(a);switch(c){case"\0":t+="";break;case Xx:t+="";break;default:t+=c}}return t}function Sb(s){return s+Xx+""}function Eb(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function sl(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Jx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class In{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new In(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new In(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kd(this.root,e,this.comparator,!0)}}class Kd{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rr{constructor(e,t,i,a,c){this.key=e,this.value=t,this.color=i??Rr.RED,this.left=a??Rr.EMPTY,this.right=c??Rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,c){return new Rr(e??this.key,t??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,i),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Rr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gt(27949);return e+(this.isRed()?0:1)}}Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1;Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(e,t,i,a,c){return this}insert(e,t,i){return new Rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vr{constructor(e){this.comparator=e,this.data=new In(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tb(this.data.getIterator())}getIteratorFrom(e){return new Tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new vr(this.comparator);return t.data=e,t}}class Tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Vs{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new Vs([])}unionWith(e){let t=new vr(Dr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Vs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gc(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Zx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Zx("Invalid base64 string: "+c):c}})(e);return new Ir(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let u=0;u<a.length;++u)c+=String.fromCharCode(a[u]);return c})(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const Kj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xo(s){if(an(!!s,39018),typeof s=="string"){let e=0;const t=Kj.exec(s);if(an(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qn(s.seconds),nanos:Qn(s.nanos)}}function Qn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Jo(s){return typeof s=="string"?Ir.fromBase64String(s):Ir.fromUint8Array(s)}const e2="server_timestamp",t2="__type__",n2="__previous_value__",r2="__local_write_time__";function dv(s){return(s?.mapValue?.fields||{})[t2]?.stringValue===e2}function Kf(s){const e=s.mapValue.fields[n2];return dv(e)?Kf(e):e}function _h(s){const e=Xo(s.mapValue.fields[r2].timestampValue);return new ot(e.seconds,e.nanos)}class Xj{constructor(e,t,i,a,c,u,f,p,x,E,C){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=x,this.isUsingEmulator=E,this.apiKey=C}}const Af="(default)";class xh{constructor(e,t){this.projectId=e,this.database=t||Af}static empty(){return new xh("","")}get isDefaultDatabase(){return this.database===Af}isEqual(e){return e instanceof xh&&e.projectId===this.projectId&&e.database===this.database}}function Jj(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ze(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xh(s.options.projectId,e)}const s2="__type__",Zj="__max__",Xd={mapValue:{}},i2="__vector__",jf="value";function Zo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?dv(s)?4:tk(s)?9007199254740991:ek(s)?10:11:gt(28295,{value:s})}function oa(s,e){if(s===e)return!0;const t=Zo(s);if(t!==Zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return _h(s).isEqual(_h(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const u=Xo(a.timestampValue),f=Xo(c.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,c){return Jo(a.bytesValue).isEqual(Jo(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,c){return Qn(a.geoPointValue.latitude)===Qn(c.geoPointValue.latitude)&&Qn(a.geoPointValue.longitude)===Qn(c.geoPointValue.longitude)})(s,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return Qn(a.integerValue)===Qn(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const u=Qn(a.doubleValue),f=Qn(c.doubleValue);return u===f?Nf(u)===Nf(f):isNaN(u)&&isNaN(f)}return!1})(s,e);case 9:return Gc(s.arrayValue.values||[],e.arrayValue.values||[],oa);case 10:case 11:return(function(a,c){const u=a.mapValue.fields||{},f=c.mapValue.fields||{};if(Eb(u)!==Eb(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!oa(u[p],f[p])))return!1;return!0})(s,e);default:return gt(52216,{left:s})}}function wh(s,e){return(s.values||[]).find((t=>oa(t,e)))!==void 0}function Wc(s,e){if(s===e)return 0;const t=Zo(s),i=Zo(e);if(t!==i)return Ht(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(s.booleanValue,e.booleanValue);case 2:return(function(c,u){const f=Qn(c.integerValue||c.doubleValue),p=Qn(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(s,e);case 3:return Cb(s.timestampValue,e.timestampValue);case 4:return Cb(_h(s),_h(e));case 5:return bg(s.stringValue,e.stringValue);case 6:return(function(c,u){const f=Jo(c),p=Jo(u);return f.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(c,u){const f=c.split("/"),p=u.split("/");for(let x=0;x<f.length&&x<p.length;x++){const E=Ht(f[x],p[x]);if(E!==0)return E}return Ht(f.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,u){const f=Ht(Qn(c.latitude),Qn(u.latitude));return f!==0?f:Ht(Qn(c.longitude),Qn(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Nb(s.arrayValue,e.arrayValue);case 10:return(function(c,u){const f=c.fields||{},p=u.fields||{},x=f[jf]?.arrayValue,E=p[jf]?.arrayValue,C=Ht(x?.values?.length||0,E?.values?.length||0);return C!==0?C:Nb(x,E)})(s.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Xd.mapValue&&u===Xd.mapValue)return 0;if(c===Xd.mapValue)return 1;if(u===Xd.mapValue)return-1;const f=c.fields||{},p=Object.keys(f),x=u.fields||{},E=Object.keys(x);p.sort(),E.sort();for(let C=0;C<p.length&&C<E.length;++C){const A=bg(p[C],E[C]);if(A!==0)return A;const B=Wc(f[p[C]],x[E[C]]);if(B!==0)return B}return Ht(p.length,E.length)})(s.mapValue,e.mapValue);default:throw gt(23264,{he:t})}}function Cb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ht(s,e);const t=Xo(s),i=Xo(e),a=Ht(t.seconds,i.seconds);return a!==0?a:Ht(t.nanos,i.nanos)}function Nb(s,e){const t=s.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const c=Wc(t[a],i[a]);if(c)return c}return Ht(t.length,i.length)}function Yc(s){return _g(s)}function _g(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Xo(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Jo(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return dt.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",a=!0;for(const c of t.values||[])a?a=!1:i+=",",i+=_g(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const u of i)c?c=!1:a+=",",a+=`${u}:${_g(t.fields[u])}`;return a+"}"})(s.mapValue):gt(61005,{value:s})}function uf(s){switch(Zo(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kf(s);return e?16+uf(e):16;case 5:return 2*s.stringValue.length;case 6:return Jo(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,c)=>a+uf(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return sl(i.fields,((c,u)=>{a+=c.length+uf(u)})),a})(s.mapValue);default:throw gt(13486,{value:s})}}function Ab(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function xg(s){return!!s&&"integerValue"in s}function fv(s){return!!s&&"arrayValue"in s}function jb(s){return!!s&&"nullValue"in s}function kb(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function hf(s){return!!s&&"mapValue"in s}function ek(s){return(s?.mapValue?.fields||{})[s2]?.stringValue===i2}function hh(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return sl(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=hh(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hh(s.arrayValue.values[t]);return e}return{...s}}function tk(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Zj}class xs{constructor(e){this.value=e}static empty(){return new xs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!hf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hh(t)}setAll(e){let t=Dr.emptyPath(),i={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=f.popLast()}u?i[f.lastSegment()]=hh(u):a.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,a)}delete(e){const t=this.field(e.popLast());hf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];hf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){sl(t,((a,c)=>e[a]=c));for(const a of i)delete e[a]}clone(){return new xs(hh(this.value))}}function a2(s){const e=[];return sl(s.fields,((t,i)=>{const a=new Dr([t]);if(hf(i)){const c=a2(i.mapValue).fields;if(c.length===0)e.push(a);else for(const u of c)e.push(a.child(u))}else e.push(a)})),new Vs(e)}class $r{constructor(e,t,i,a,c,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=c,this.data=u,this.documentState=f}static newInvalidDocument(e){return new $r(e,0,xt.min(),xt.min(),xt.min(),xs.empty(),0)}static newFoundDocument(e,t,i,a){return new $r(e,1,t,xt.min(),i,a,0)}static newNoDocument(e,t){return new $r(e,2,t,xt.min(),xt.min(),xs.empty(),0)}static newUnknownDocument(e,t){return new $r(e,3,t,xt.min(),xt.min(),xs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kf{constructor(e,t){this.position=e,this.inclusive=t}}function Rb(s,e,t){let i=0;for(let a=0;a<s.position.length;a++){const c=e[a],u=s.position[a];if(c.field.isKeyField()?i=dt.comparator(dt.fromName(u.referenceValue),t.key):i=Wc(u,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Db(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!oa(s.position[t],e.position[t]))return!1;return!0}class Sh{constructor(e,t="asc"){this.field=e,this.dir=t}}function nk(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class o2{}class cr extends o2{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new sk(e,t,i):t==="array-contains"?new ok(e,i):t==="in"?new lk(e,i):t==="not-in"?new ck(e,i):t==="array-contains-any"?new uk(e,i):new cr(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new ik(e,i):new ak(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wc(t,this.value)):t!==null&&Zo(this.value)===Zo(t)&&this.matchesComparison(Wc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ii extends o2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ii(e,t)}matches(e){return l2(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function l2(s){return s.op==="and"}function c2(s){return rk(s)&&l2(s)}function rk(s){for(const e of s.filters)if(e instanceof Ii)return!1;return!0}function wg(s){if(s instanceof cr)return s.field.canonicalString()+s.op.toString()+Yc(s.value);if(c2(s))return s.filters.map((e=>wg(e))).join(",");{const e=s.filters.map((t=>wg(t))).join(",");return`${s.op}(${e})`}}function u2(s,e){return s instanceof cr?(function(i,a){return a instanceof cr&&i.op===a.op&&i.field.isEqual(a.field)&&oa(i.value,a.value)})(s,e):s instanceof Ii?(function(i,a){return a instanceof Ii&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,u,f)=>c&&u2(u,a.filters[f])),!0):!1})(s,e):void gt(19439)}function h2(s){return s instanceof cr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Yc(t.value)}`})(s):s instanceof Ii?(function(t){return t.op.toString()+" {"+t.getFilters().map(h2).join(" ,")+"}"})(s):"Filter"}class sk extends cr{constructor(e,t,i){super(e,t,i),this.key=dt.fromName(i.referenceValue)}matches(e){const t=dt.comparator(e.key,this.key);return this.matchesComparison(t)}}class ik extends cr{constructor(e,t){super(e,"in",t),this.keys=d2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ak extends cr{constructor(e,t){super(e,"not-in",t),this.keys=d2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function d2(s,e){return(e.arrayValue?.values||[]).map((t=>dt.fromName(t.referenceValue)))}class ok extends cr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fv(t)&&wh(t.arrayValue,this.value)}}class lk extends cr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wh(this.value.arrayValue,t)}}class ck extends cr{constructor(e,t){super(e,"not-in",t)}matches(e){if(wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wh(this.value.arrayValue,t)}}class uk extends cr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>wh(this.value.arrayValue,i)))}}class hk{constructor(e,t=null,i=[],a=[],c=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=u,this.endAt=f,this.Te=null}}function Ib(s,e=null,t=[],i=[],a=null,c=null,u=null){return new hk(s,e,t,i,a,c,u)}function mv(s){const e=Tt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>wg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Yc(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Yc(i))).join(",")),e.Te=t}return e.Te}function pv(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!nk(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!u2(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Db(s.startAt,e.startAt)&&Db(s.endAt,e.endAt)}function Sg(s){return dt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class au{constructor(e,t=null,i=[],a=[],c=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=u,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function dk(s,e,t,i,a,c,u,f){return new au(s,e,t,i,a,c,u,f)}function gv(s){return new au(s)}function Mb(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function fk(s){return dt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function f2(s){return s.collectionGroup!==null}function dh(s){const e=Tt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new vr(Dr.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Sh(c,i))})),t.has(Dr.keyField().canonicalString())||e.Ie.push(new Sh(Dr.keyField(),i))}return e.Ie}function sa(s){const e=Tt(s);return e.Ee||(e.Ee=mk(e,dh(s))),e.Ee}function mk(s,e){if(s.limitType==="F")return Ib(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Sh(a.field,c)}));const t=s.endAt?new kf(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new kf(s.startAt.position,s.startAt.inclusive):null;return Ib(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Eg(s,e){const t=s.filters.concat([e]);return new au(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function pk(s,e){const t=s.explicitOrderBy.concat([e]);return new au(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Tg(s,e,t){return new au(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Xf(s,e){return pv(sa(s),sa(e))&&s.limitType===e.limitType}function m2(s){return`${mv(sa(s))}|lt:${s.limitType}`}function Ic(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>h2(a))).join(", ")}]`),Qf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Yc(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Yc(a))).join(",")),`Target(${i})`})(sa(s))}; limitType=${s.limitType})`}function Jf(s,e){return e.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):dt.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,a){for(const c of dh(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(u,f,p){const x=Rb(u,f,p);return u.inclusive?x<=0:x<0})(i.startAt,dh(i),a)||i.endAt&&!(function(u,f,p){const x=Rb(u,f,p);return u.inclusive?x>=0:x>0})(i.endAt,dh(i),a))})(s,e)}function gk(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function p2(s){return(e,t)=>{let i=!1;for(const a of dh(s)){const c=vk(a,e,t);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function vk(s,e,t){const i=s.field.isKeyField()?dt.comparator(e.key,t.key):(function(c,u,f){const p=u.data.field(c),x=f.data.field(c);return p!==null&&x!==null?Wc(p,x):gt(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return gt(19790,{direction:s.dir})}}class Gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){sl(this.inner,((t,i)=>{for(const[a,c]of i)e(a,c)}))}isEmpty(){return Jx(this.inner)}size(){return this.innerSize}}const yk=new In(dt.comparator);function Qa(){return yk}const g2=new In(dt.comparator);function ah(...s){let e=g2;for(const t of s)e=e.insert(t.key,t);return e}function v2(s){let e=g2;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Pl(){return fh()}function y2(){return fh()}function fh(){return new Gl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const bk=new In(dt.comparator),_k=new vr(dt.comparator);function $t(...s){let e=_k;for(const t of s)e=e.add(t);return e}const xk=new vr(Ht);function wk(){return xk}function vv(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nf(e)?"-0":e}}function b2(s){return{integerValue:""+s}}function Sk(s,e){return Wj(e)?b2(e):vv(s,e)}class Zf{constructor(){this._=void 0}}function Ek(s,e,t){return s instanceof Rf?(function(a,c){const u={fields:{[t2]:{stringValue:e2},[r2]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&dv(c)&&(c=Kf(c)),c&&(u.fields[n2]=c),{mapValue:u}})(t,e):s instanceof Eh?x2(s,e):s instanceof Th?w2(s,e):(function(a,c){const u=_2(a,c),f=Ob(u)+Ob(a.Ae);return xg(u)&&xg(a.Ae)?b2(f):vv(a.serializer,f)})(s,e)}function Tk(s,e,t){return s instanceof Eh?x2(s,e):s instanceof Th?w2(s,e):t}function _2(s,e){return s instanceof Df?(function(i){return xg(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Rf extends Zf{}class Eh extends Zf{constructor(e){super(),this.elements=e}}function x2(s,e){const t=S2(e);for(const i of s.elements)t.some((a=>oa(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Th extends Zf{constructor(e){super(),this.elements=e}}function w2(s,e){let t=S2(e);for(const i of s.elements)t=t.filter((a=>!oa(a,i)));return{arrayValue:{values:t}}}class Df extends Zf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ob(s){return Qn(s.integerValue||s.doubleValue)}function S2(s){return fv(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function Ck(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof Eh&&a instanceof Eh||i instanceof Th&&a instanceof Th?Gc(i.elements,a.elements,oa):i instanceof Df&&a instanceof Df?oa(i.Ae,a.Ae):i instanceof Rf&&a instanceof Rf})(s.transform,e.transform)}class Nk{constructor(e,t){this.version=e,this.transformResults=t}}class ci{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ci}static exists(e){return new ci(void 0,e)}static updateTime(e){return new ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class em{}function E2(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new yv(s.key,ci.none()):new Lh(s.key,s.data,ci.none());{const t=s.data,i=xs.empty();let a=new vr(Dr.comparator);for(let c of e.fields)if(!a.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?i.delete(c):i.set(c,u),a=a.add(c)}return new il(s.key,i,new Vs(a.toArray()),ci.none())}}function Ak(s,e,t){s instanceof Lh?(function(a,c,u){const f=a.value.clone(),p=Pb(a.fieldTransforms,c,u.transformResults);f.setAll(p),c.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(s,e,t):s instanceof il?(function(a,c,u){if(!df(a.precondition,c))return void c.convertToUnknownDocument(u.version);const f=Pb(a.fieldTransforms,c,u.transformResults),p=c.data;p.setAll(T2(a)),p.setAll(f),c.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(s,e,t):(function(a,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function mh(s,e,t,i){return s instanceof Lh?(function(c,u,f,p){if(!df(c.precondition,u))return f;const x=c.value.clone(),E=Vb(c.fieldTransforms,p,u);return x.setAll(E),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),null})(s,e,t,i):s instanceof il?(function(c,u,f,p){if(!df(c.precondition,u))return f;const x=Vb(c.fieldTransforms,p,u),E=u.data;return E.setAll(T2(c)),E.setAll(x),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((C=>C.field)))})(s,e,t,i):(function(c,u,f){return df(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(s,e,t)}function jk(s,e){let t=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),c=_2(i.transform,a||null);c!=null&&(t===null&&(t=xs.empty()),t.set(i.field,c))}return t||null}function Lb(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Gc(i,a,((c,u)=>Ck(c,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Lh extends em{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class il extends em{constructor(e,t,i,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function T2(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function Pb(s,e,t){const i=new Map;an(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const c=s[a],u=c.transform,f=e.data.field(c.field);i.set(c.field,Tk(u,f,t[a]))}return i}function Vb(s,e,t){const i=new Map;for(const a of s){const c=a.transform,u=t.data.field(a.field);i.set(a.field,Ek(c,u,e))}return i}class yv extends em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kk extends em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rk{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Ak(c,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=mh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=mh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=y2();return this.mutations.forEach((a=>{const c=e.get(a.key),u=c.overlayedDocument;let f=this.applyToLocalView(u,c.mutatedFields);f=t.has(a.key)?null:f;const p=E2(u,f);p!==null&&i.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(xt.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$t())}isEqual(e){return this.batchId===e.batchId&&Gc(this.mutations,e.mutations,((t,i)=>Lb(t,i)))&&Gc(this.baseMutations,e.baseMutations,((t,i)=>Lb(t,i)))}}class bv{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){an(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return bk})();const c=e.mutations;for(let u=0;u<c.length;u++)a=a.insert(c[u].key,i[u].version);return new bv(e,t,i,a)}}class Dk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Ik{constructor(e,t){this.count=e,this.unchangedNames=t}}var or,Qt;function Mk(s){switch(s){case Be.OK:return gt(64938);case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0;default:return gt(15467,{code:s})}}function C2(s){if(s===void 0)return Ya("GRPC error has no .code"),Be.UNKNOWN;switch(s){case or.OK:return Be.OK;case or.CANCELLED:return Be.CANCELLED;case or.UNKNOWN:return Be.UNKNOWN;case or.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case or.INTERNAL:return Be.INTERNAL;case or.UNAVAILABLE:return Be.UNAVAILABLE;case or.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case or.NOT_FOUND:return Be.NOT_FOUND;case or.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case or.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case or.ABORTED:return Be.ABORTED;case or.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case or.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case or.DATA_LOSS:return Be.DATA_LOSS;default:return gt(39323,{code:s})}}(Qt=or||(or={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";function Ok(){return new TextEncoder}const Lk=new Yo([4294967295,4294967295],0);function Ub(s){const e=Ok().encode(s),t=new zx;return t.update(e),new Uint8Array(t.digest())}function Bb(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Yo([t,i],0),new Yo([a,c],0)]}class _v{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new oh(`Invalid padding: ${t}`);if(i<0)throw new oh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new oh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new oh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Yo.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Yo.fromNumber(i)));return a.compare(Lk)===1&&(a=new Yo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ub(e),[i,a]=Bb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,a,c);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new _v(c,a,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=Ub(e),[i,a]=Bb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,a,c);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class oh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tm{constructor(e,t,i,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Ph.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new tm(xt.min(),a,new In(Ht),Qa(),$t())}}class Ph{constructor(e,t,i,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ph(i,t,$t(),$t(),$t())}}class ff{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class N2{constructor(e,t){this.targetId=e,this.Ce=t}}class A2{constructor(e,t,i=Ir.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class zb{constructor(){this.ve=0,this.Fe=Fb(),this.Me=Ir.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$t(),t=$t(),i=$t();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:gt(38017,{changeType:c})}})),new Ph(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Fb()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,an(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Pk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qa(),this.He=Jd(),this.Je=Jd(),this.Ze=new In(Ht)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:gt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(Sg(c))if(i===0){const u=new dt(c.path);this.et(t,u,$r.newNoDocument(u,xt.min()))}else an(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),p=f?this.ct(f,e,u):1;if(p!==0){this.it(t);const x=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=t;let u,f;try{u=Jo(i).toUint8Array()}catch(p){if(p instanceof Zx)return $c("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new _v(u,a,c)}catch(p){return $c(p instanceof oh?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((c=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const f=this.ot(u);if(f){if(c.current&&Sg(f.target)){const p=new dt(f.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,$r.newNoDocument(p,e))}c.Be&&(t.set(u,c.ke()),c.Ke())}}));let i=$t();this.Je.forEach(((c,u)=>{let f=!0;u.forEachWhile((p=>{const x=this.ot(p);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const a=new tm(e,t,this.Ze,this.je,i);return this.je=Qa(),this.He=Jd(),this.Je=Jd(),this.Ze=new In(Ht),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new zb,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new vr(Ht),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new vr(Ht),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||nt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jd(){return new In(dt.comparator)}function Fb(){return new In(dt.comparator)}const Vk={asc:"ASCENDING",desc:"DESCENDING"},Uk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bk={and:"AND",or:"OR"};class zk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cg(s,e){return s.useProto3Json||Qf(e)?e:{value:e}}function If(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j2(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function Fk(s,e){return If(s,e.toTimestamp())}function ia(s){return an(!!s,49232),xt.fromTimestamp((function(t){const i=Xo(t);return new ot(i.seconds,i.nanos)})(s))}function xv(s,e){return Ng(s,e).canonicalString()}function Ng(s,e){const t=(function(a){return new En(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function k2(s){const e=En.fromString(s);return an(O2(e),10190,{key:e.toString()}),e}function Ag(s,e){return xv(s.databaseId,e.path)}function Xp(s,e){const t=k2(e);if(t.get(1)!==s.databaseId.projectId)throw new Ze(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ze(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new dt(D2(t))}function R2(s,e){return xv(s.databaseId,e)}function qk(s){const e=k2(s);return e.length===4?En.emptyPath():D2(e)}function jg(s){return new En(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function D2(s){return an(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function qb(s,e,t){return{name:Ag(s,e),fields:t.value.mapValue.fields}}function Hk(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:gt(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(x,E){return x.useProto3Json?(an(E===void 0||typeof E=="string",58123),Ir.fromBase64String(E||"")):(an(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Ir.fromUint8Array(E||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(x){const E=x.code===void 0?Be.UNKNOWN:C2(x.code);return new Ze(E,x.message||"")})(u);t=new A2(i,a,c,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Xp(s,i.document.name),c=ia(i.document.updateTime),u=i.document.createTime?ia(i.document.createTime):xt.min(),f=new xs({mapValue:{fields:i.document.fields}}),p=$r.newFoundDocument(a,c,u,f),x=i.targetIds||[],E=i.removedTargetIds||[];t=new ff(x,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Xp(s,i.document),c=i.readTime?ia(i.readTime):xt.min(),u=$r.newNoDocument(a,c),f=i.removedTargetIds||[];t=new ff([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Xp(s,i.document),c=i.removedTargetIds||[];t=new ff([],c,a,null)}else{if(!("filter"in e))return gt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,u=new Ik(a,c),f=i.targetId;t=new N2(f,u)}}return t}function $k(s,e){let t;if(e instanceof Lh)t={update:qb(s,e.key,e.value)};else if(e instanceof yv)t={delete:Ag(s,e.key)};else if(e instanceof il)t={update:qb(s,e.key,e.data),updateMask:eR(e.fieldMask)};else{if(!(e instanceof kk))return gt(16599,{dt:e.type});t={verify:Ag(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,u){const f=u.transform;if(f instanceof Rf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Eh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Th)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Df)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw gt(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:Fk(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:gt(27497)})(s,e.precondition)),t}function Gk(s,e){return s&&s.length>0?(an(e!==void 0,14353),s.map((t=>(function(a,c){let u=a.updateTime?ia(a.updateTime):ia(c);return u.isEqual(xt.min())&&(u=ia(c)),new Nk(u,a.transformResults||[])})(t,e)))):[]}function Wk(s,e){return{documents:[R2(s,e.path)]}}function Yk(s,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=R2(s,a);const c=(function(x){if(x.length!==0)return M2(Ii.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(x){if(x.length!==0)return x.map((E=>(function(A){return{field:Mc(A.field),direction:Xk(A.dir)}})(E)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Cg(s,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:a}}function Qk(s){let e=qk(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){an(i===1,65062);const E=t.from[0];E.allDescendants?a=E.collectionId:e=e.child(E.collectionId)}let c=[];t.where&&(c=(function(C){const A=I2(C);return A instanceof Ii&&c2(A)?A.getFilters():[A]})(t.where));let u=[];t.orderBy&&(u=(function(C){return C.map((A=>(function(L){return new Sh(Oc(L.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(A)))})(t.orderBy));let f=null;t.limit&&(f=(function(C){let A;return A=typeof C=="object"?C.value:C,Qf(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(C){const A=!!C.before,B=C.values||[];return new kf(B,A)})(t.startAt));let x=null;return t.endAt&&(x=(function(C){const A=!C.before,B=C.values||[];return new kf(B,A)})(t.endAt)),dk(e,a,u,c,f,"F",p,x)}function Kk(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function I2(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Oc(t.unaryFilter.field);return cr.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Oc(t.unaryFilter.field);return cr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Oc(t.unaryFilter.field);return cr.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Oc(t.unaryFilter.field);return cr.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return cr.create(Oc(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Ii.create(t.compositeFilter.filters.map((i=>I2(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return gt(1026)}})(t.compositeFilter.op))})(s):gt(30097,{filter:s})}function Xk(s){return Vk[s]}function Jk(s){return Uk[s]}function Zk(s){return Bk[s]}function Mc(s){return{fieldPath:s.canonicalString()}}function Oc(s){return Dr.fromServerFormat(s.fieldPath)}function M2(s){return s instanceof cr?(function(t){if(t.op==="=="){if(kb(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NAN"}};if(jb(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kb(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NOT_NAN"}};if(jb(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mc(t.field),op:Jk(t.op),value:t.value}}})(s):s instanceof Ii?(function(t){const i=t.getFilters().map((a=>M2(a)));return i.length===1?i[0]:{compositeFilter:{op:Zk(t.op),filters:i}}})(s):gt(54877,{filter:s})}function eR(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function O2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function L2(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Ho{constructor(e,t,i,a,c=xt.min(),u=xt.min(),f=Ir.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tR{constructor(e){this.yt=e}}function nR(s){const e=Qk({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Tg(e,e.limit,"L"):e}class rR{constructor(){this.Sn=new sR}addToCollectionParentIndex(e,t){return this.Sn.add(t),qe.resolve()}getCollectionParents(e,t){return qe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return qe.resolve()}deleteFieldIndex(e,t){return qe.resolve()}deleteAllFieldIndexes(e){return qe.resolve()}createTargetIndexes(e,t){return qe.resolve()}getDocumentsMatchingTarget(e,t){return qe.resolve(null)}getIndexType(e,t){return qe.resolve(0)}getFieldIndexes(e,t){return qe.resolve([])}getNextCollectionGroupToUpdate(e){return qe.resolve(null)}getMinOffset(e,t){return qe.resolve(Ko.min())}getMinOffsetFromCollectionGroup(e,t){return qe.resolve(Ko.min())}updateCollectionGroup(e,t,i){return qe.resolve()}updateIndexEntries(e,t){return qe.resolve()}}class sR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new vr(En.comparator),c=!a.has(i);return this.index[t]=a.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new vr(En.comparator)).toArray()}}const Hb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P2=41943040;class _s{static withCacheSize(e){return new _s(e,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}_s.DEFAULT_COLLECTION_PERCENTILE=10,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_s.DEFAULT=new _s(P2,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_s.DISABLED=new _s(-1,0,0);class Qc{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Qc(0)}static ar(){return new Qc(-1)}}const $b="LruGarbageCollector",iR=1048576;function Gb([s,e],[t,i]){const a=Ht(s,t);return a===0?Ht(e,i):a}class aR{constructor(e){this.Pr=e,this.buffer=new vr(Gb),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Gb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){nt($b,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){iu(t)?nt($b,"Ignoring IndexedDB error during garbage collection: ",t):await su(t)}await this.Ar(3e5)}))}}class lR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return qe.resolve(Yf.ce);const i=new aR(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),qe.resolve(Hb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hb):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,c,u,f,p,x;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),a=this.params.maximumSequenceNumbersToCollect):a=C,u=Date.now(),this.nthSequenceNumber(e,a)))).next((C=>(i=C,f=Date.now(),this.removeTargets(e,i,t)))).next((C=>(c=C,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((C=>(x=Date.now(),Dc()<=qt.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-E}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${c} targets in `+(p-f)+`ms
	Removed ${C} documents in `+(x-p)+`ms
Total Duration: ${x-E}ms`),qe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:C}))))}}function cR(s,e){return new lR(s,e)}class uR{constructor(){this.changes=new Gl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$r.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?qe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class dR{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&mh(i.mutation,a,Vs.empty(),ot.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,$t()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=$t()){const a=Pl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((c=>{let u=ah();return c.forEach(((f,p)=>{u=u.insert(f,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Pl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,$t())))}populateOverlays(e,t,i){const a=[];return i.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,a){let c=Qa();const u=fh(),f=(function(){return fh()})();return t.forEach(((p,x)=>{const E=i.get(x.key);a.has(x.key)&&(E===void 0||E.mutation instanceof il)?c=c.insert(x.key,x):E!==void 0?(u.set(x.key,E.mutation.getFieldMask()),mh(E.mutation,x,E.mutation.getFieldMask(),ot.now())):u.set(x.key,Vs.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((x,E)=>u.set(x,E))),t.forEach(((x,E)=>f.set(x,new hR(E,u.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=fh();let a=new In(((u,f)=>u-f)),c=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((p=>{const x=t.get(p);if(x===null)return;let E=i.get(p)||Vs.empty();E=f.applyToLocalView(x,E),i.set(p,E);const C=(a.get(f.batchId)||$t()).add(p);a=a.insert(f.batchId,C)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),x=p.key,E=p.value,C=y2();E.forEach((A=>{if(!c.has(A)){const B=E2(t.get(A),i.get(A));B!==null&&C.set(A,B),c=c.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,x,C))}return qe.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return fk(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):f2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((c=>{const u=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-c.size):qe.resolve(Pl());let f=bh,p=c;return u.next((x=>qe.forEach(x,((E,C)=>(f<C.largestBatchId&&(f=C.largestBatchId),c.get(E)?qe.resolve():this.remoteDocumentCache.getEntry(e,E).next((A=>{p=p.insert(E,A)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,p,x,$t()))).next((E=>({batchId:f,changes:v2(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dt(t)).next((i=>{let a=ah();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const c=t.collectionGroup;let u=ah();return this.indexManager.getCollectionParents(e,c).next((f=>qe.forEach(f,(p=>{const x=(function(C,A){return new au(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(t,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,i,a).next((E=>{E.forEach(((C,A)=>{u=u.insert(C,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,a)))).next((u=>{c.forEach(((p,x)=>{const E=x.getKey();u.get(E)===null&&(u=u.insert(E,$r.newInvalidDocument(E)))}));let f=ah();return u.forEach(((p,x)=>{const E=c.get(p);E!==void 0&&mh(E.mutation,x,Vs.empty(),ot.now()),Jf(t,x)&&(f=f.insert(p,x))})),f}))}}class fR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return qe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ia(a.createTime)}})(t)),qe.resolve()}getNamedQuery(e,t){return qe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:nR(a.bundledQuery),readTime:ia(a.readTime)}})(t)),qe.resolve()}}class mR{constructor(){this.overlays=new In(dt.comparator),this.Lr=new Map}getOverlay(e,t){return qe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Pl();return qe.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,c)=>{this.bt(e,t,c)})),qe.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(i)),qe.resolve()}getOverlaysForCollection(e,t,i){const a=Pl(),c=t.length+1,u=new dt(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,x=p.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&p.largestBatchId>i&&a.set(p.getKey(),p)}return qe.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let c=new In(((x,E)=>x-E));const u=this.overlays.getIterator();for(;u.hasNext();){const x=u.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>i){let E=c.get(x.largestBatchId);E===null&&(E=Pl(),c=c.insert(x.largestBatchId,E)),E.set(x.getKey(),x)}}const f=Pl(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((x,E)=>f.set(x,E))),!(f.size()>=a)););return qe.resolve(f)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new Dk(t,i));let c=this.Lr.get(t);c===void 0&&(c=$t(),this.Lr.set(t,c)),this.Lr.set(t,c.add(i.key))}}class pR{constructor(){this.sessionToken=Ir.EMPTY_BYTE_STRING}getSessionToken(e){return qe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,qe.resolve()}}class wv{constructor(){this.kr=new vr(Er.Kr),this.qr=new vr(Er.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Er(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Er(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new dt(new En([])),i=new Er(t,e),a=new Er(t,e+1),c=[];return this.qr.forEachInRange([i,a],(u=>{this.Wr(u),c.push(u.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new dt(new En([])),i=new Er(t,e),a=new Er(t,e+1);let c=$t();return this.qr.forEachInRange([i,a],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new Er(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Er{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return dt.comparator(e.key,t.key)||Ht(e.Hr,t.Hr)}static Ur(e,t){return Ht(e.Hr,t.Hr)||dt.comparator(e.key,t.key)}}class gR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new vr(Er.Kr)}checkEmpty(e){return qe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Rk(c,t,i,a);this.mutationQueue.push(u);for(const f of a)this.Jr=this.Jr.add(new Er(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return qe.resolve(u)}lookupMutationBatch(e,t){return qe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),c=a<0?0:a;return qe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return qe.resolve(this.mutationQueue.length===0?hv:this.Yn-1)}getAllMutationBatches(e){return qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Er(t,0),a=new Er(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([i,a],(u=>{const f=this.Zr(u.Hr);c.push(f)})),qe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new vr(Ht);return t.forEach((a=>{const c=new Er(a,0),u=new Er(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,u],(f=>{i=i.add(f.Hr)}))})),qe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let c=i;dt.isDocumentKey(c)||(c=c.child(""));const u=new Er(new dt(c),0);let f=new vr(Ht);return this.Jr.forEachWhile((p=>{const x=p.key.path;return!!i.isPrefixOf(x)&&(x.length===a&&(f=f.add(p.Hr)),!0)}),u),qe.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){an(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return qe.forEach(t.mutations,(a=>{const c=new Er(a.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Er(t,0),a=this.Jr.firstAfterOrEqual(i);return qe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,qe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class vR{constructor(e){this.ti=e,this.docs=(function(){return new In(dt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),c=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return qe.resolve(i?i.document.mutableCopy():$r.newInvalidDocument(t))}getEntries(e,t){let i=Qa();return t.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():$r.newInvalidDocument(a))})),qe.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let c=Qa();const u=t.path,f=new dt(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:x,value:{document:E}}=p.getNext();if(!u.isPrefixOf(x.path))break;x.path.length>u.length+1||qj(Fj(E),i)<=0||(a.has(E.key)||Jf(t,E))&&(c=c.insert(E.key,E.mutableCopy()))}return qe.resolve(c)}getAllFromCollectionGroup(e,t,i,a){gt(9500)}ni(e,t){return qe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new yR(this)}getSize(e){return qe.resolve(this.size)}}class yR extends uR{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),qe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class bR{constructor(e){this.persistence=e,this.ri=new Gl((t=>mv(t)),pv),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.ii=0,this.si=new wv,this.targetCount=0,this.oi=Qc._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),qe.resolve()}getLastRemoteSnapshotVersion(e){return qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),qe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),qe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Qc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,qe.resolve()}updateTargetData(e,t){return this.lr(t),qe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,qe.resolve()}removeTargets(e,t,i){let a=0;const c=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(u),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),qe.waitFor(c).next((()=>a))}getTargetCount(e){return qe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return qe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),qe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((u=>{c.push(a.markPotentiallyOrphaned(e,u))})),qe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),qe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return qe.resolve(i)}containsKey(e,t){return qe.resolve(this.si.containsKey(t))}}class V2{constructor(e,t){this._i={},this.overlays={},this.ai=new Yf(0),this.ui=!1,this.ui=!0,this.ci=new pR,this.referenceDelegate=e(this),this.li=new bR(this),this.indexManager=new rR,this.remoteDocumentCache=(function(a){return new vR(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new tR(t),this.Pi=new fR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new gR(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){nt("MemoryPersistence","Starting transaction:",e);const a=new _R(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return qe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class _R extends $j{constructor(e){super(),this.currentSequenceNumber=e}}class Sv{constructor(e){this.persistence=e,this.Ri=new wv,this.Ai=null}static Vi(e){return new Sv(e)}get di(){if(this.Ai)return this.Ai;throw gt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),qe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),qe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),qe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qe.forEach(this.di,(i=>{const a=dt.fromPath(i);return this.mi(e,a).next((c=>{c||t.removeEntry(a,xt.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return qe.or([()=>qe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mf{constructor(e,t){this.persistence=e,this.fi=new Gl((i=>Yj(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=cR(this,t)}static Vi(e,t){return new Mf(e,t)}Ti(){}Ii(e){return qe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return qe.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((c=>c?qe.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(i++,c.removeEntry(u,xt.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),qe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),qe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),qe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),qe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uf(e.data.value)),t}wr(e,t,i){return qe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return qe.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ev{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=$t(),a=$t();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Ev(e,t.fromCache,i,a)}}class xR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return KT()?8:Gj(Gr())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const c={result:null};return this.gs(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ps(e,t,a,i).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new xR;return this.ys(e,t,u).next((f=>{if(c.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>c.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(Dc()<=qt.DEBUG&&nt("QueryEngine","SDK will not create cache indexes for query:",Ic(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),qe.resolve()):(Dc()<=qt.DEBUG&&nt("QueryEngine","Query:",Ic(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(Dc()<=qt.DEBUG&&nt("QueryEngine","The SDK decides to create cache indexes for query:",Ic(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sa(t))):qe.resolve())}gs(e,t){if(Mb(t))return qe.resolve(null);let i=sa(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Tg(t,null,"F"),i=sa(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const u=$t(...c);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const x=this.bs(t,f);return this.Ss(t,x,u,p.readTime)?this.gs(e,Tg(t,null,"F")):this.Ds(e,x,t,p)}))))})))))}ps(e,t,i,a){return Mb(t)||a.isEqual(xt.min())?qe.resolve(null):this.fs.getDocuments(e,i).next((c=>{const u=this.bs(t,c);return this.Ss(t,u,i,a)?qe.resolve(null):(Dc()<=qt.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ic(t)),this.Ds(e,u,t,zj(a,bh)).next((f=>f)))}))}bs(e,t){let i=new vr(p2(e));return t.forEach(((a,c)=>{Jf(e,c)&&(i=i.add(c))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,i){return Dc()<=qt.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",Ic(t)),this.fs.getDocumentsMatchingQuery(e,t,Ko.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Tv="LocalStore",SR=3e8;class ER{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new In(Ht),this.Fs=new Gl((c=>mv(c)),pv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function TR(s,e,t,i){return new ER(s,e,t,i)}async function U2(s,e){const t=Tt(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const u=[],f=[];let p=$t();for(const x of a){u.push(x.batchId);for(const E of x.mutations)p=p.add(E.key)}for(const x of c){f.push(x.batchId);for(const E of x.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(i,p).next((x=>({Ns:x,removedBatchIds:u,addedBatchIds:f})))}))}))}function CR(s,e){const t=Tt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,p,x,E){const C=x.batch,A=C.keys();let B=qe.resolve();return A.forEach((L=>{B=B.next((()=>E.getEntry(p,L))).next((F=>{const H=x.docVersions.get(L);an(H!==null,48541),F.version.compareTo(H)<0&&(C.applyToRemoteDocument(F,x),F.isValidDocument()&&(F.setReadTime(x.commitVersion),E.addEntry(F)))}))})),B.next((()=>f.mutationQueue.removeMutationBatch(p,C)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=$t();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(p=p.add(f.batch.mutations[x].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function B2(s){const e=Tt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function NR(s,e){const t=Tt(s),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((E,C)=>{const A=a.get(C);if(!A)return;f.push(t.li.removeMatchingKeys(c,E.removedDocuments,C).next((()=>t.li.addMatchingKeys(c,E.addedDocuments,C))));let B=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(C)!==null?B=B.withResumeToken(Ir.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):E.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(E.resumeToken,i)),a=a.insert(C,B),(function(F,H,J){return F.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=SR?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(A,B,E)&&f.push(t.li.updateTargetData(c,B))}));let p=Qa(),x=$t();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,E))})),f.push(AR(c,u,e.documentUpdates).next((E=>{p=E.Bs,x=E.Ls}))),!i.isEqual(xt.min())){const E=t.li.getLastRemoteSnapshotVersion(c).next((C=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,i)));f.push(E)}return qe.waitFor(f).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,p,x))).next((()=>p))})).then((c=>(t.vs=a,c)))}function AR(s,e,t){let i=$t(),a=$t();return t.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let u=Qa();return t.forEach(((f,p)=>{const x=c.get(f);p.isFoundDocument()!==x.isFoundDocument()&&(a=a.add(f)),p.isNoDocument()&&p.version.isEqual(xt.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!x.isValidDocument()||p.version.compareTo(x.version)>0||p.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):nt(Tv,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",p.version)})),{Bs:u,Ls:a}}))}function jR(s,e){const t=Tt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=hv),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function kR(s,e){const t=Tt(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((c=>c?(a=c,qe.resolve(a)):t.li.allocateTargetId(i).next((u=>(a=new Ho(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function kg(s,e,t){const i=Tt(s),a=i.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!iu(u))throw u;nt(Tv,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function Wb(s,e,t){const i=Tt(s);let a=xt.min(),c=$t();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,x,E){const C=Tt(p),A=C.Fs.get(E);return A!==void 0?qe.resolve(C.vs.get(A)):C.li.getTargetData(x,E)})(i,u,sa(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,f.targetId).next((p=>{c=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?a:xt.min(),t?c:$t()))).next((f=>(RR(i,gk(e),f),{documents:f,ks:c})))))}function RR(s,e,t){let i=s.Ms.get(e)||xt.min();t.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Ms.set(e,i)}class Yb{constructor(){this.activeTargetIds=wk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DR{constructor(){this.vo=new Yb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Yb,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class IR{Mo(e){}shutdown(){}}const Qb="ConnectivityMonitor";class Kb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){nt(Qb,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){nt(Qb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zd=null;function Rg(){return Zd===null?Zd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zd++,"0x"+Zd.toString(16)}const Jp="RestConnection",MR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class OR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===Af?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,c){const u=Rg(),f=this.Qo(e,t.toUriEncodedString());nt(Jp,`Sending RPC '${e}' ${u}:`,f,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,c);const{host:x}=new URL(f),E=eu(x);return this.zo(e,f,p,i,E).then((C=>(nt(Jp,`Received RPC '${e}' ${u}: `,C),C)),(C=>{throw $c(Jp,`RPC '${e}' ${u} failed with error: `,C,"url: ",f,"request:",i),C}))}jo(e,t,i,a,c,u){return this.Wo(e,t,i,a,c)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ru})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),i&&i.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const i=MR[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class LR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Fr="WebChannelConnection",eh=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class zc extends OR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!zc.c_){const e=$x();eh(e,Hx.STAT_EVENT,(t=>{t.stat===yg.PROXY?nt(Fr,"STAT_EVENT: detected buffering proxy"):t.stat===yg.NOPROXY&&nt(Fr,"STAT_EVENT: detected no buffering proxy")})),zc.c_=!0}}zo(e,t,i,a,c){const u=Rg();return new Promise(((f,p)=>{const x=new Fx;x.setWithCredentials(!0),x.listenOnce(qx.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case cf.NO_ERROR:const C=x.getResponseJson();nt(Fr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(C)),f(C);break;case cf.TIMEOUT:nt(Fr,`RPC '${e}' ${u} timed out`),p(new Ze(Be.DEADLINE_EXCEEDED,"Request time out"));break;case cf.HTTP_ERROR:const A=x.getStatus();if(nt(Fr,`RPC '${e}' ${u} failed with status:`,A,"response text:",x.getResponseText()),A>0){let B=x.getResponseJson();Array.isArray(B)&&(B=B[0]);const L=B?.error;if(L&&L.status&&L.message){const F=(function(J){const Y=J.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(Y)>=0?Y:Be.UNKNOWN})(L.status);p(new Ze(F,L.message))}else p(new Ze(Be.UNKNOWN,"Server responded with status "+x.getStatus()))}else p(new Ze(Be.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:e,streamId:u,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{nt(Fr,`RPC '${e}' ${u} completed.`)}}));const E=JSON.stringify(a);nt(Fr,`RPC '${e}' ${u} sending request:`,a),x.send(t,"POST",E,i,15)}))}T_(e,t,i){const a=Rg(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const x=c.join("");nt(Fr,`Creating RPC '${e}' stream ${a}: ${x}`,f);const E=u.createWebChannel(x,f);this.I_(E);let C=!1,A=!1;const B=new LR({Ho:L=>{A?nt(Fr,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(C||(nt(Fr,`Opening RPC '${e}' stream ${a} transport.`),E.open(),C=!0),nt(Fr,`RPC '${e}' stream ${a} sending:`,L),E.send(L))},Jo:()=>E.close()});return eh(E,ih.EventType.OPEN,(()=>{A||(nt(Fr,`RPC '${e}' stream ${a} transport opened.`),B.i_())})),eh(E,ih.EventType.CLOSE,(()=>{A||(A=!0,nt(Fr,`RPC '${e}' stream ${a} transport closed`),B.o_(),this.E_(E))})),eh(E,ih.EventType.ERROR,(L=>{A||(A=!0,$c(Fr,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),B.o_(new Ze(Be.UNAVAILABLE,"The operation could not be completed")))})),eh(E,ih.EventType.MESSAGE,(L=>{if(!A){const F=L.data[0];an(!!F,16349);const H=F,J=H?.error||H[0]?.error;if(J){nt(Fr,`RPC '${e}' stream ${a} received error:`,J);const Y=J.status;let ue=(function(xe){const q=or[xe];if(q!==void 0)return C2(q)})(Y),K=J.message;ue===void 0&&(ue=Be.INTERNAL,K="Unknown error status: "+Y+" with message "+J.message),A=!0,B.o_(new Ze(ue,K)),E.close()}else nt(Fr,`RPC '${e}' stream ${a} received:`,F),B.__(F)}})),zc.u_(),setTimeout((()=>{B.s_()}),0),B}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Gx()}}function PR(s){return new zc(s)}function Zp(){return typeof document<"u"?document:null}function nm(s){return new zk(s,!0)}zc.c_=!1;class z2{constructor(e,t,i=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&nt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Xb="PersistentStream";class F2{constructor(e,t,i,a,c,u,f,p){this.Ci=e,this.b_=i,this.S_=a,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new z2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Be.RESOURCE_EXHAUSTED?(Ya(t.toString()),Ya("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new Ze(Be.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return nt(Xb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(nt(Xb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class VR extends F2{constructor(e,t,i,a,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Hk(this.serializer,e),i=(function(c){if(!("targetChange"in c))return xt.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?xt.min():u.readTime?ia(u.readTime):xt.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=jg(this.serializer),t.addTarget=(function(c,u){let f;const p=u.target;if(f=Sg(p)?{documents:Wk(c,p)}:{query:Yk(c,p).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=j2(c,u.resumeToken);const x=Cg(c,u.expectedCount);x!==null&&(f.expectedCount=x)}else if(u.snapshotVersion.compareTo(xt.min())>0){f.readTime=If(c,u.snapshotVersion.toTimestamp());const x=Cg(c,u.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const i=Kk(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=jg(this.serializer),t.removeTarget=e,this.K_(t)}}class UR extends F2{constructor(e,t,i,a,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return an(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,an(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){an(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Gk(e.writeResults,e.commitTime),i=ia(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=jg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>$k(this.serializer,i)))};this.K_(t)}}class BR{}class zR extends BR{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ze(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Wo(e,Ng(t,i),a,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ze(Be.UNKNOWN,c.toString())}))}jo(e,t,i,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,Ng(t,i),a,u,f,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ze(Be.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function FR(s,e,t,i){return new zR(s,e,t,i)}class qR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ya(t),this.aa=!1):nt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Hl="RemoteStore";class HR{constructor(e,t,i,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{Wl(this)&&(nt(Hl,"Restarting streams for network reachability change."),await(async function(p){const x=Tt(p);x.Ea.add(4),await Vh(x),x.Va.set("Unknown"),x.Ea.delete(4),await rm(x)})(this))}))})),this.Va=new qR(i,a)}}async function rm(s){if(Wl(s))for(const e of s.Ra)await e(!0)}async function Vh(s){for(const e of s.Ra)await e(!1)}function q2(s,e){const t=Tt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),jv(t)?Av(t):ou(t).O_()&&Nv(t,e))}function Cv(s,e){const t=Tt(s),i=ou(t);t.Ia.delete(e),i.O_()&&H2(t,e),t.Ia.size===0&&(i.O_()?i.L_():Wl(t)&&t.Va.set("Unknown"))}function Nv(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xt.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ou(s).Z_(e)}function H2(s,e){s.da.$e(e),ou(s).X_(e)}function Av(s){s.da=new Pk({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),ou(s).start(),s.Va.ua()}function jv(s){return Wl(s)&&!ou(s).x_()&&s.Ia.size>0}function Wl(s){return Tt(s).Ea.size===0}function $2(s){s.da=void 0}async function $R(s){s.Va.set("Online")}async function GR(s){s.Ia.forEach(((e,t)=>{Nv(s,e)}))}async function WR(s,e){$2(s),jv(s)?(s.Va.ha(e),Av(s)):s.Va.set("Unknown")}async function YR(s,e,t){if(s.Va.set("Online"),e instanceof A2&&e.state===2&&e.cause)try{await(async function(a,c){const u=c.cause;for(const f of c.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.da.removeTarget(f))})(s,e)}catch(i){nt(Hl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Of(s,i)}else if(e instanceof ff?s.da.Xe(e):e instanceof N2?s.da.st(e):s.da.tt(e),!t.isEqual(xt.min()))try{const i=await B2(s.localStore);t.compareTo(i)>=0&&await(function(c,u){const f=c.da.Tt(u);return f.targetChanges.forEach(((p,x)=>{if(p.resumeToken.approximateByteSize()>0){const E=c.Ia.get(x);E&&c.Ia.set(x,E.withResumeToken(p.resumeToken,u))}})),f.targetMismatches.forEach(((p,x)=>{const E=c.Ia.get(p);if(!E)return;c.Ia.set(p,E.withResumeToken(Ir.EMPTY_BYTE_STRING,E.snapshotVersion)),H2(c,p);const C=new Ho(E.target,p,x,E.sequenceNumber);Nv(c,C)})),c.remoteSyncer.applyRemoteEvent(f)})(s,t)}catch(i){nt(Hl,"Failed to raise snapshot:",i),await Of(s,i)}}async function Of(s,e,t){if(!iu(e))throw e;s.Ea.add(1),await Vh(s),s.Va.set("Offline"),t||(t=()=>B2(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{nt(Hl,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await rm(s)}))}function G2(s,e){return e().catch((t=>Of(s,t,e)))}async function sm(s){const e=Tt(s),t=el(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hv;for(;QR(e);)try{const a=await jR(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,KR(e,a)}catch(a){await Of(e,a)}W2(e)&&Y2(e)}function QR(s){return Wl(s)&&s.Ta.length<10}function KR(s,e){s.Ta.push(e);const t=el(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function W2(s){return Wl(s)&&!el(s).x_()&&s.Ta.length>0}function Y2(s){el(s).start()}async function XR(s){el(s).ra()}async function JR(s){const e=el(s);for(const t of s.Ta)e.ea(t.mutations)}async function ZR(s,e,t){const i=s.Ta.shift(),a=bv.from(i,e,t);await G2(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await sm(s)}async function eD(s,e){e&&el(s).Y_&&await(async function(i,a){if((function(u){return Mk(u)&&u!==Be.ABORTED})(a.code)){const c=i.Ta.shift();el(i).B_(),await G2(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await sm(i)}})(s,e),W2(s)&&Y2(s)}async function Jb(s,e){const t=Tt(s);t.asyncQueue.verifyOperationInProgress(),nt(Hl,"RemoteStore received new credentials");const i=Wl(t);t.Ea.add(3),await Vh(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rm(t)}async function tD(s,e){const t=Tt(s);e?(t.Ea.delete(2),await rm(t)):e||(t.Ea.add(2),await Vh(t),t.Va.set("Unknown"))}function ou(s){return s.ma||(s.ma=(function(t,i,a){const c=Tt(t);return c.sa(),new VR(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:$R.bind(null,s),Yo:GR.bind(null,s),t_:WR.bind(null,s),J_:YR.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),jv(s)?Av(s):s.Va.set("Unknown")):(await s.ma.stop(),$2(s))}))),s.ma}function el(s){return s.fa||(s.fa=(function(t,i,a){const c=Tt(t);return c.sa(),new UR(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:XR.bind(null,s),t_:eD.bind(null,s),ta:JR.bind(null,s),na:ZR.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await sm(s)):(await s.fa.stop(),s.Ta.length>0&&(nt(Hl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class kv{constructor(e,t,i,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new qa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,c){const u=Date.now()+i,f=new kv(e,t,u,a,c);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rv(s,e){if(Ya("AsyncQueue",`${e}: ${s}`),iu(s))return new Ze(Be.UNAVAILABLE,`${e}: ${s}`);throw s}class Fc{static emptySet(e){return new Fc(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||dt.comparator(t.key,i.key):(t,i)=>dt.comparator(t.key,i.key),this.keyedMap=ah(),this.sortedSet=new In(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Fc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Zb{constructor(){this.ga=new In(dt.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):gt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Kc{constructor(e,t,i,a,c,u,f,p,x){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=x}static fromInitialDocuments(e,t,i,a,c){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Kc(e,t,Fc.emptySet(t),u,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class nD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class rD{constructor(){this.queries=e_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Tt(t),c=a.queries;a.queries=e_(),c.forEach(((u,f)=>{for(const p of f.ba)p.onError(i)}))})(this,new Ze(Be.ABORTED,"Firestore shutting down"))}}function e_(){return new Gl((s=>m2(s)),Xf)}async function Q2(s,e){const t=Tt(s);let i=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(i=2):(c=new nD,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=Rv(u,`Initialization of query '${Ic(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Dv(t)}async function K2(s,e){const t=Tt(s),i=e.query;let a=3;const c=t.queries.get(i);if(c){const u=c.ba.indexOf(e);u>=0&&(c.ba.splice(u,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function sD(s,e){const t=Tt(s);let i=!1;for(const a of e){const c=a.query,u=t.queries.get(c);if(u){for(const f of u.ba)f.Fa(a)&&(i=!0);u.wa=a}}i&&Dv(t)}function iD(s,e,t){const i=Tt(s),a=i.queries.get(e);if(a)for(const c of a.ba)c.onError(t);i.queries.delete(e)}function Dv(s){s.Ca.forEach((e=>{e.next()}))}var Dg,t_;(t_=Dg||(Dg={})).Ma="default",t_.Cache="cache";class X2{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Kc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dg.Cache}}class J2{constructor(e){this.key=e}}class Z2{constructor(e){this.key=e}}class aD{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=$t(),this.mutatedKeys=$t(),this.eu=p2(e),this.tu=new Fc(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new Zb,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,x=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((E,C)=>{const A=a.get(E),B=Jf(this.query,C)?C:null,L=!!A&&this.mutatedKeys.has(A.key),F=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let H=!1;A&&B?A.data.isEqual(B.data)?L!==F&&(i.track({type:3,doc:B}),H=!0):this.su(A,B)||(i.track({type:2,doc:B}),H=!0,(p&&this.eu(B,p)>0||x&&this.eu(B,x)<0)&&(f=!0)):!A&&B?(i.track({type:0,doc:B}),H=!0):A&&!B&&(i.track({type:1,doc:A}),H=!0,(p||x)&&(f=!0)),H&&(B?(u=u.add(B),c=F?c.add(E):c.delete(E)):(u=u.delete(E),c=c.delete(E)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const E=this.query.limitType==="F"?u.last():u.first();u=u.delete(E.key),c=c.delete(E.key),i.track({type:1,doc:E})}return{tu:u,iu:i,Ss:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((E,C)=>(function(B,L){const F=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Vt:H})}};return F(B)-F(L)})(E.type,C.type)||this.eu(E.doc,C.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,x=p!==this.Xa;return this.Xa=p,u.length!==0||x?{snapshot:new Kc(this.query,e.tu,c,u,e.mutatedKeys,p===0,x,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=$t(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new Z2(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new J2(i))})),t}cu(e){this.Za=e.ks,this.Ya=$t();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Kc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Iv="SyncEngine";class oD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class lD{constructor(e){this.key=e,this.hu=!1}}class cD{constructor(e,t,i,a,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Gl((f=>m2(f)),Xf),this.Iu=new Map,this.Eu=new Set,this.Ru=new In(dt.comparator),this.Au=new Map,this.Vu=new wv,this.du={},this.mu=new Map,this.fu=Qc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uD(s,e,t=!0){const i=iw(s);let a;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await ew(i,e,t,!0),a}async function hD(s,e){const t=iw(s);await ew(t,e,!0,!1)}async function ew(s,e,t,i){const a=await kR(s.localStore,sa(e)),c=a.targetId,u=s.sharedClientState.addLocalQueryTarget(c,t);let f;return i&&(f=await dD(s,e,c,u==="current",a.resumeToken)),s.isPrimaryClient&&t&&q2(s.remoteStore,a),f}async function dD(s,e,t,i,a){s.pu=(C,A,B)=>(async function(F,H,J,Y){let ue=H.view.ru(J);ue.Ss&&(ue=await Wb(F.localStore,H.query,!1).then((({documents:q})=>H.view.ru(q,ue))));const K=Y&&Y.targetChanges.get(H.targetId),me=Y&&Y.targetMismatches.get(H.targetId)!=null,xe=H.view.applyChanges(ue,F.isPrimaryClient,K,me);return r_(F,H.targetId,xe.au),xe.snapshot})(s,C,A,B);const c=await Wb(s.localStore,e,!0),u=new aD(e,c.ks),f=u.ru(c.documents),p=Ph.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",a),x=u.applyChanges(f,s.isPrimaryClient,p);r_(s,t,x.au);const E=new oD(e,t,u);return s.Tu.set(e,E),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),x.snapshot}async function fD(s,e,t){const i=Tt(s),a=i.Tu.get(e),c=i.Iu.get(a.targetId);if(c.length>1)return i.Iu.set(a.targetId,c.filter((u=>!Xf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await kg(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Cv(i.remoteStore,a.targetId),Ig(i,a.targetId)})).catch(su)):(Ig(i,a.targetId),await kg(i.localStore,a.targetId,!0))}async function mD(s,e){const t=Tt(s),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Cv(t.remoteStore,i.targetId))}async function pD(s,e,t){const i=wD(s);try{const a=await(function(u,f){const p=Tt(u),x=ot.now(),E=f.reduce(((B,L)=>B.add(L.key)),$t());let C,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let L=Qa(),F=$t();return p.xs.getEntries(B,E).next((H=>{L=H,L.forEach(((J,Y)=>{Y.isValidDocument()||(F=F.add(J))}))})).next((()=>p.localDocuments.getOverlayedDocuments(B,L))).next((H=>{C=H;const J=[];for(const Y of f){const ue=jk(Y,C.get(Y.key).overlayedDocument);ue!=null&&J.push(new il(Y.key,ue,a2(ue.value.mapValue),ci.exists(!0)))}return p.mutationQueue.addMutationBatch(B,x,J,f)})).next((H=>{A=H;const J=H.applyToLocalDocumentSet(C,F);return p.documentOverlayCache.saveOverlays(B,H.batchId,J)}))})).then((()=>({batchId:A.batchId,changes:v2(C)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,f,p){let x=u.du[u.currentUser.toKey()];x||(x=new In(Ht)),x=x.insert(f,p),u.du[u.currentUser.toKey()]=x})(i,a.batchId,t),await Uh(i,a.changes),await sm(i.remoteStore)}catch(a){const c=Rv(a,"Failed to persist write");t.reject(c)}}async function tw(s,e){const t=Tt(s);try{const i=await NR(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const u=t.Au.get(c);u&&(an(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?an(u.hu,14607):a.removedDocuments.size>0&&(an(u.hu,42227),u.hu=!1))})),await Uh(t,i,e)}catch(i){await su(i)}}function n_(s,e,t){const i=Tt(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((c,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const p=Tt(u);p.onlineState=f;let x=!1;p.queries.forEach(((E,C)=>{for(const A of C.ba)A.va(f)&&(x=!0)})),x&&Dv(p)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function gD(s,e,t){const i=Tt(s);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),c=a&&a.key;if(c){let u=new In(dt.comparator);u=u.insert(c,$r.newNoDocument(c,xt.min()));const f=$t().add(c),p=new tm(xt.min(),new Map,new In(Ht),u,f);await tw(i,p),i.Ru=i.Ru.remove(c),i.Au.delete(e),Mv(i)}else await kg(i.localStore,e,!1).then((()=>Ig(i,e,t))).catch(su)}async function vD(s,e){const t=Tt(s),i=e.batch.batchId;try{const a=await CR(t.localStore,e);rw(t,i,null),nw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Uh(t,a)}catch(a){await su(a)}}async function yD(s,e,t){const i=Tt(s);try{const a=await(function(u,f){const p=Tt(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let E;return p.mutationQueue.lookupMutationBatch(x,f).next((C=>(an(C!==null,37113),E=C.keys(),p.mutationQueue.removeMutationBatch(x,C)))).next((()=>p.mutationQueue.performConsistencyCheck(x))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(x,E,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,E))).next((()=>p.localDocuments.getDocuments(x,E)))}))})(i.localStore,e);rw(i,e,t),nw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Uh(i,a)}catch(a){await su(a)}}function nw(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function rw(s,e,t){const i=Tt(s);let a=i.du[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function Ig(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||sw(s,i)}))}function sw(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(Cv(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),Mv(s))}function r_(s,e,t){for(const i of t)i instanceof J2?(s.Vu.addReference(i.key,e),bD(s,i)):i instanceof Z2?(nt(Iv,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||sw(s,i.key)):gt(19791,{wu:i})}function bD(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||(nt(Iv,"New document in limbo: "+t),s.Eu.add(i),Mv(s))}function Mv(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new dt(En.fromString(e)),i=s.fu.next();s.Au.set(i,new lD(t)),s.Ru=s.Ru.insert(t,i),q2(s.remoteStore,new Ho(sa(gv(t.path)),i,"TargetPurposeLimboResolution",Yf.ce))}}async function Uh(s,e,t){const i=Tt(s),a=[],c=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{u.push(i.pu(p,e,t).then((x=>{if((x||t)&&i.isPrimaryClient){const E=x?!x.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(x){a.push(x);const E=Ev.Es(p.targetId,x);c.push(E)}})))})),await Promise.all(u),i.Pu.J_(a),await(async function(p,x){const E=Tt(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>qe.forEach(x,(A=>qe.forEach(A.Ts,(B=>E.persistence.referenceDelegate.addReference(C,A.targetId,B))).next((()=>qe.forEach(A.Is,(B=>E.persistence.referenceDelegate.removeReference(C,A.targetId,B)))))))))}catch(C){if(!iu(C))throw C;nt(Tv,"Failed to update sequence numbers: "+C)}for(const C of x){const A=C.targetId;if(!C.fromCache){const B=E.vs.get(A),L=B.snapshotVersion,F=B.withLastLimboFreeSnapshotVersion(L);E.vs=E.vs.insert(A,F)}}})(i.localStore,c))}async function _D(s,e){const t=Tt(s);if(!t.currentUser.isEqual(e)){nt(Iv,"User change. New user:",e.toKey());const i=await U2(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((f=>{f.forEach((p=>{p.reject(new Ze(Be.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Uh(t,i.Ns)}}function xD(s,e){const t=Tt(s),i=t.Au.get(e);if(i&&i.hu)return $t().add(i.key);{let a=$t();const c=t.Iu.get(e);if(!c)return a;for(const u of c){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}function iw(s){const e=Tt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=tw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gD.bind(null,e),e.Pu.J_=sD.bind(null,e.eventManager),e.Pu.yu=iD.bind(null,e.eventManager),e}function wD(s){const e=Tt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yD.bind(null,e),e}class Lf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return TR(this.persistence,new wR,e.initialUser,this.serializer)}Cu(e){return new V2(Sv.Vi,this.serializer)}Du(e){return new DR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lf.provider={build:()=>new Lf};class SD extends Lf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){an(this.persistence.referenceDelegate instanceof Mf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new oR(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_s.withCacheSize(this.cacheSizeBytes):_s.DEFAULT;return new V2((i=>Mf.Vi(i,t)),this.serializer)}}class Mg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>n_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_D.bind(null,this.syncEngine),await tD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rD})()}createDatastore(e){const t=nm(e.databaseInfo.databaseId),i=PR(e.databaseInfo);return FR(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,c,u,f){return new HR(i,a,c,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>n_(this.syncEngine,t,0)),(function(){return Kb.v()?new Kb:new IR})())}createSyncEngine(e,t){return(function(a,c,u,f,p,x,E){const C=new cD(a,c,u,f,p,x);return E&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Tt(t);nt(Hl,"RemoteStore shutting down."),i.Ea.add(5),await Vh(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mg.provider={build:()=>new Mg};class aw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ya("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const tl="FirestoreClient";class ED{constructor(e,t,i,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=Hr.UNAUTHENTICATED,this.clientId=uv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async u=>{nt(tl,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(nt(tl,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Rv(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function eg(s,e){s.asyncQueue.verifyOperationInProgress(),nt(tl,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await U2(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function s_(s,e){s.asyncQueue.verifyOperationInProgress();const t=await TD(s);nt(tl,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>Jb(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>Jb(e.remoteStore,a))),s._onlineComponents=e}async function TD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){nt(tl,"Using user provided OfflineComponentProvider");try{await eg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Be.FAILED_PRECONDITION||a.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;$c("Error using user provided cache. Falling back to memory cache: "+t),await eg(s,new Lf)}}else nt(tl,"Using default OfflineComponentProvider"),await eg(s,new SD(void 0));return s._offlineComponents}async function ow(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(nt(tl,"Using user provided OnlineComponentProvider"),await s_(s,s._uninitializedComponentsProvider._online)):(nt(tl,"Using default OnlineComponentProvider"),await s_(s,new Mg))),s._onlineComponents}function CD(s){return ow(s).then((e=>e.syncEngine))}async function lw(s){const e=await ow(s),t=e.eventManager;return t.onListen=uD.bind(null,e.syncEngine),t.onUnlisten=fD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mD.bind(null,e.syncEngine),t}function ND(s,e,t={}){const i=new qa;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,p,x){const E=new aw({next:A=>{E.Nu(),u.enqueueAndForget((()=>K2(c,C)));const B=A.docs.has(f);!B&&A.fromCache?x.reject(new Ze(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&A.fromCache&&p&&p.source==="server"?x.reject(new Ze(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(A)},error:A=>x.reject(A)}),C=new X2(gv(f.path),E,{includeMetadataChanges:!0,Ka:!0});return Q2(c,C)})(await lw(s),s.asyncQueue,e,t,i))),i.promise}function AD(s,e,t={}){const i=new qa;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,p,x){const E=new aw({next:A=>{E.Nu(),u.enqueueAndForget((()=>K2(c,C))),A.fromCache&&p.source==="server"?x.reject(new Ze(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(A)},error:A=>x.reject(A)}),C=new X2(f,E,{includeMetadataChanges:!0,Ka:!0});return Q2(c,C)})(await lw(s),s.asyncQueue,e,t,i))),i.promise}function jD(s,e){const t=new qa;return s.asyncQueue.enqueueAndForget((async()=>pD(await CD(s),e,t))),t.promise}function cw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const kD="ComponentProvider",i_=new Map;function RD(s,e,t,i,a){return new Xj(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,cw(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}const uw="firestore.googleapis.com",a_=!0;class o_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uw,this.ssl=a_}else this.host=e.host,this.ssl=e.ssl??a_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iR)throw new Ze(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ze(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ze(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ze(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class im{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new kj;switch(i.type){case"firstParty":return new Mj(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ze(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=i_.get(t);i&&(nt(kD,"Removing Datastore"),i_.delete(t),i.terminate())})(this),Promise.resolve()}}function DD(s,e,t,i={}){s=Di(s,im);const a=eu(e),c=s._getSettings(),u={...c,emulatorOptions:s._getEmulatorOptions()},f=`${e}:${t}`;a&&(J_(`https://${f}`),Z_("Firestore",!0)),c.host!==uw&&c.host!==f&&$c("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:f,ssl:a,emulatorOptions:i};if(!Ul(p,u)&&(s._setSettings(p),i.mockUserToken)){let x,E;if(typeof i.mockUserToken=="string")x=i.mockUserToken,E=Hr.MOCK_USER;else{x=zT(i.mockUserToken,s._app?.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new Ze(Be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Hr(C)}s._authCredentials=new Rj(new Yx(x,E))}}class Yl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Yl(this.firestore,e,this._query)}}class Kn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}toJSON(){return{type:Kn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Oh(t,Kn._jsonSchema))return new Kn(e,i||null,new dt(En.fromString(t.referencePath)))}}Kn._jsonSchemaVersion="firestore/documentReference/1.0",Kn._jsonSchema={type:ur("string",Kn._jsonSchemaVersion),referencePath:ur("string")};class Qo extends Yl{constructor(e,t,i){super(e,t,gv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new dt(e))}withConverter(e){return new Qo(this.firestore,e,this._path)}}function Xt(s,e,...t){if(s=yr(s),Qx("collection","path",e),s instanceof im){const i=En.fromString(e,...t);return _b(i),new Qo(s,null,i)}{if(!(s instanceof Kn||s instanceof Qo))throw new Ze(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(En.fromString(e,...t));return _b(i),new Qo(s.firestore,null,i)}}function Et(s,e,...t){if(s=yr(s),arguments.length===1&&(e=uv.newId()),Qx("doc","path",e),s instanceof im){const i=En.fromString(e,...t);return bb(i),new Kn(s,null,new dt(i))}{if(!(s instanceof Kn||s instanceof Qo))throw new Ze(Be.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(En.fromString(e,...t));return bb(i),new Kn(s.firestore,s instanceof Qo?s.converter:null,new dt(i))}}const l_="AsyncQueue";class c_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new z2(this,"async_queue_retry"),this._c=()=>{const i=Zp();i&&nt(l_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Zp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Zp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new qa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!iu(e))throw e;nt(l_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ya("INTERNAL UNHANDLED ERROR: ",u_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=kv.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&gt(47125,{Pc:u_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ql extends im{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new c_,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c_(e),this._firestoreClient=void 0,await e}}}function ID(s,e){const t=typeof s=="object"?s:nx(),i=typeof s=="string"?s:Af,a=Xg(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=UT("firestore");c&&DD(a,...c)}return a}function Ov(s){if(s._terminated)throw new Ze(Be.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||MD(s),s._firestoreClient}function MD(s){const e=s._freezeSettings(),t=RD(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new ED(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(s._componentsProvider))}class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(Ir.fromBase64String(e))}catch(t){throw new Ze(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oi(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oh(e,oi._jsonSchema))return oi.fromBase64String(e.bytes)}}oi._jsonSchemaVersion="firestore/bytes/1.0",oi._jsonSchema={type:ur("string",oi._jsonSchemaVersion),bytes:ur("string")};class Lv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ze(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pv{constructor(e){this._methodName=e}}class aa{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ze(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ze(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:aa._jsonSchemaVersion}}static fromJSON(e){if(Oh(e,aa._jsonSchema))return new aa(e.latitude,e.longitude)}}aa._jsonSchemaVersion="firestore/geoPoint/1.0",aa._jsonSchema={type:ur("string",aa._jsonSchemaVersion),latitude:ur("number"),longitude:ur("number")};class Ai{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oh(e,Ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ai(e.vectorValues);throw new Ze(Be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:ur("string",Ai._jsonSchemaVersion),vectorValues:ur("object")};const OD=/^__.*__$/;class LD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new il(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lh(e,this.data,t,this.fieldTransforms)}}class hw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new il(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dw(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{dataSource:s})}}class Vv{constructor(e,t,i,a,c,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Vv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Pf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(dw(this.dataSource)&&OD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class PD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||nm(e)}createContext(e,t,i,a=!1){return new Vv({dataSource:e,methodName:t,targetDoc:i,path:Dr.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function am(s){const e=s._freezeSettings(),t=nm(s._databaseId);return new PD(s._databaseId,!!e.ignoreUndefinedProperties,t)}function fw(s,e,t,i,a,c={}){const u=s.createContext(c.merge||c.mergeFields?2:0,e,t,a);Uv("Data must be an object, but it was:",u,i);const f=mw(i,u);let p,x;if(c.merge)p=new Vs(u.fieldMask),x=u.fieldTransforms;else if(c.mergeFields){const E=[];for(const C of c.mergeFields){const A=$l(e,C,t);if(!u.contains(A))throw new Ze(Be.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);vw(E,A)||E.push(A)}p=new Vs(E),x=u.fieldTransforms.filter((C=>p.covers(C.field)))}else p=null,x=u.fieldTransforms;return new LD(new xs(f),p,x)}class om extends Pv{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof om}}function VD(s,e,t,i){const a=s.createContext(1,e,t);Uv("Data must be an object, but it was:",a,i);const c=[],u=xs.empty();sl(i,((p,x)=>{const E=gw(e,p,t);x=yr(x);const C=a.childContextForFieldPath(E);if(x instanceof om)c.push(E);else{const A=Bh(x,C);A!=null&&(c.push(E),u.set(E,A))}}));const f=new Vs(c);return new hw(u,f,a.fieldTransforms)}function UD(s,e,t,i,a,c){const u=s.createContext(1,e,t),f=[$l(e,i,t)],p=[a];if(c.length%2!=0)throw new Ze(Be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)f.push($l(e,c[A])),p.push(c[A+1]);const x=[],E=xs.empty();for(let A=f.length-1;A>=0;--A)if(!vw(x,f[A])){const B=f[A];let L=p[A];L=yr(L);const F=u.childContextForFieldPath(B);if(L instanceof om)x.push(B);else{const H=Bh(L,F);H!=null&&(x.push(B),E.set(B,H))}}const C=new Vs(x);return new hw(E,C,u.fieldTransforms)}function BD(s,e,t,i=!1){return Bh(t,s.createContext(i?4:3,e))}function Bh(s,e){if(pw(s=yr(s)))return Uv("Unsupported field value:",e,s),mw(s,e);if(s instanceof Pv)return(function(i,a){if(!dw(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const c=[];let u=0;for(const f of i){let p=Bh(f,a.childContextForArray(u));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),u++}return{arrayValue:{values:c}}})(s,e)}return(function(i,a){if((i=yr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Sk(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=ot.fromDate(i);return{timestampValue:If(a.serializer,c)}}if(i instanceof ot){const c=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:If(a.serializer,c)}}if(i instanceof aa)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof oi)return{bytesValue:j2(a.serializer,i._byteString)};if(i instanceof Kn){const c=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(c))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:xv(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Ai)return(function(u,f){const p=u instanceof Ai?u.toArray():u;return{mapValue:{fields:{[s2]:{stringValue:i2},[jf]:{arrayValue:{values:p.map((E=>{if(typeof E!="number")throw f.createError("VectorValues must only contain numeric values.");return vv(f.serializer,E)}))}}}}}})(i,a);if(L2(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Wf(i)}`)})(s,e)}function mw(s,e){const t={};return Jx(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sl(s,((i,a)=>{const c=Bh(a,e.childContextForField(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function pw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ot||s instanceof aa||s instanceof oi||s instanceof Kn||s instanceof Pv||s instanceof Ai||L2(s))}function Uv(s,e,t){if(!pw(t)||!Kx(t)){const i=Wf(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function $l(s,e,t){if((e=yr(e))instanceof Lv)return e._internalPath;if(typeof e=="string")return gw(s,e);throw Pf("Field path arguments must be of type string or ",s,!1,void 0,t)}const zD=new RegExp("[~\\*/\\[\\]]");function gw(s,e,t){if(e.search(zD)>=0)throw Pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Lv(...e.split("."))._internalPath}catch{throw Pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Pf(s,e,t,i,a){const c=i&&!i.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(c||u)&&(p+=" (found",c&&(p+=` in field ${i}`),u&&(p+=` in document ${a}`),p+=")"),new Ze(Be.INVALID_ARGUMENT,f+s+p)}function vw(s,e){return s.some((t=>t.isEqual(e)))}class FD{convertValue(e,t="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw gt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return sl(e,((a,c)=>{i[a]=this.convertValue(c,t)})),i}convertVectorValue(e){const t=e.fields?.[jf].arrayValue?.values?.map((i=>Qn(i.doubleValue)));return new Ai(t)}convertGeoPoint(e){return new aa(Qn(e.latitude),Qn(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Kf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(_h(e));default:return null}}convertTimestamp(e){const t=Xo(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=En.fromString(e);an(O2(i),9688,{name:e});const a=new xh(i.get(1),i.get(3)),c=new dt(i.popFirst(5));return a.isEqual(t)||Ya(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}class yw extends FD{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}const h_="@firebase/firestore",d_="4.10.0";class bw{constructor(e,t,i,a,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field($l("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class qD extends bw{data(){return super.data()}}function HD(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ze(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bv{}class _w extends Bv{}function ji(s,e,...t){let i=[];e instanceof Bv&&i.push(e),i=i.concat(t),(function(c){const u=c.filter((p=>p instanceof zv)).length,f=c.filter((p=>p instanceof lm)).length;if(u>1||u>0&&f>0)throw new Ze(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class lm extends _w{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new lm(e,t,i)}_apply(e){const t=this._parse(e);return xw(e._query,t),new Yl(e.firestore,e.converter,Eg(e._query,t))}_parse(e){const t=am(e.firestore);return(function(c,u,f,p,x,E,C){let A;if(x.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Ze(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){m_(C,E);const L=[];for(const F of C)L.push(f_(p,c,F));A={arrayValue:{values:L}}}else A=f_(p,c,C)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||m_(C,E),A=BD(f,u,C,E==="in"||E==="not-in");return cr.create(x,E,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function li(s,e,t){const i=e,a=$l("where",s);return lm._create(a,i,t)}class zv extends Bv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zv(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ii.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let u=a;const f=c.getFlattenedFilters();for(const p of f)xw(u,p),u=Eg(u,p)})(e._query,t),new Yl(e.firestore,e.converter,Eg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fv extends _w{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fv(e,t)}_apply(e){const t=(function(a,c,u){if(a.startAt!==null)throw new Ze(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ze(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sh(c,u)})(e._query,this._field,this._direction);return new Yl(e.firestore,e.converter,pk(e._query,t))}}function $D(s,e="asc"){const t=e,i=$l("orderBy",s);return Fv._create(i,t)}function f_(s,e,t){if(typeof(t=yr(t))=="string"){if(t==="")throw new Ze(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f2(e)&&t.indexOf("/")!==-1)throw new Ze(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(En.fromString(t));if(!dt.isDocumentKey(i))throw new Ze(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ab(s,new dt(i))}if(t instanceof Kn)return Ab(s,t._key);throw new Ze(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(t)}.`)}function m_(s,e){if(!Array.isArray(s)||s.length===0)throw new Ze(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xw(s,e){const t=(function(a,c){for(const u of a)for(const f of u.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ze(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ww(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class lh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vl extends bw{constructor(e,t,i,a,c,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field($l("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vl._jsonSchema={type:ur("string",Vl._jsonSchemaVersion),bundleSource:ur("string","DocumentSnapshot"),bundleName:ur("string"),bundle:ur("string")};class mf extends Vl{data(e={}){return super.data(e)}}class qc{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new lh(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new mf(this._firestore,this._userDataWriter,i.key,i,new lh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ze(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const p=new mf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new lh(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const p=new mf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new lh(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let x=-1,E=-1;return f.type!==0&&(x=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),E=u.indexOf(f.doc.key)),{type:GD(f.type),doc:p,oldIndex:x,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GD(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:s})}}qc._jsonSchemaVersion="firestore/querySnapshot/1.0",qc._jsonSchema={type:ur("string",qc._jsonSchemaVersion),bundleSource:ur("string","QuerySnapshot"),bundleName:ur("string"),bundle:ur("string")};function nl(s){s=Di(s,Kn);const e=Di(s.firestore,Ql),t=Ov(e);return ND(t,s._key).then((i=>WD(e,s,i)))}function _n(s){s=Di(s,Yl);const e=Di(s.firestore,Ql),t=Ov(e),i=new yw(e);return HD(s._query),AD(t,s._query).then((a=>new qc(e,i,s,a)))}function Va(s,e,t){s=Di(s,Kn);const i=Di(s.firestore,Ql),a=ww(s.converter,e,t),c=am(i);return cm(i,[fw(c,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,ci.none())])}function lr(s,e,t,...i){s=Di(s,Kn);const a=Di(s.firestore,Ql),c=am(a);let u;return u=typeof(e=yr(e))=="string"||e instanceof Lv?UD(c,"updateDoc",s._key,e,t,i):VD(c,"updateDoc",s._key,e),cm(a,[u.toMutation(s._key,ci.exists(!0))])}function Ha(s){return cm(Di(s.firestore,Ql),[new yv(s._key,ci.none())])}function Pc(s,e){const t=Di(s.firestore,Ql),i=Et(s),a=ww(s.converter,e),c=am(s.firestore);return cm(t,[fw(c,"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,ci.exists(!1))]).then((()=>i))}function cm(s,e){const t=Ov(s);return jD(t,e)}function WD(s,e,t){const i=t.docs.get(e._key),a=new yw(s);return new Vl(s,a,e._key,i,new lh(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){jj(tu),Hc(new Bl("firestore",((i,{instanceIdentifier:a,options:c})=>{const u=i.getProvider("app").getImmediate(),f=new Ql(new Dj(i.getProvider("auth-internal")),new Oj(u,i.getProvider("app-check-internal")),Jj(u,a),u);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Wo(h_,d_,e),Wo(h_,d_,"esm2020")})();var YD="firebase",QD="12.8.0";Wo(YD,QD,"app");const Sw={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},Ew=Jg(Sw),th=Bx(Ew),Xe=ID(Ew),KD=Jg(Sw,"secondary"),Vf=Bx(KD),XD="EYdciKDOi3UYBLk1u8hHams5tmO2",Tw=z.createContext();function ws(){return z.useContext(Tw)}function JD({children:s}){const[e,t]=z.useState(null),[i,a]=z.useState(!1),[c,u]=z.useState(!1),[f,p]=z.useState(null),[x,E]=z.useState(!0);z.useEffect(()=>yA(th,async H=>{if(t(H),H)if(H.uid===XD)a(!0),u(!1),p(null);else{a(!1);try{const J=ji(Xt(Xe,"clients"),li("uid","==",H.uid)),Y=await _n(J);if(Y.empty)u(!1),p(null);else{const ue=Y.docs[0];u(!0),p({id:ue.id,...ue.data()})}}catch(J){console.error("Error fetching client data:",J),u(!1),p(null)}}else a(!1),u(!1),p(null);E(!1)}),[]);const L={currentUser:e,isAdmin:i,isClient:c,clientData:f,login:async(F,H,J=!0)=>(await pA(th,J?Dx:av),await mA(th,F,H)),logout:()=>iv(th),resetPassword:F=>fA(th,F),loading:x};return l.jsx(Tw.Provider,{value:L,children:s})}const Cw=z.createContext();function Kl(){return z.useContext(Cw)}function ZD({children:s}){const[e,t]=z.useState(()=>{const c=localStorage.getItem("theme");return c?c==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});z.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]);const a={isDark:e,toggleTheme:()=>t(!e)};return l.jsx(Cw.Provider,{value:a,children:s})}function e4(){const[s,e]=z.useState(""),[t,i]=z.useState(""),[a,c]=z.useState(!0),[u,f]=z.useState(""),[p,x]=z.useState(!1),[E,C]=z.useState(!1),[A,B]=z.useState(!1),{login:L,resetPassword:F,currentUser:H,isAdmin:J,isClient:Y,clientData:ue,loading:K}=ws(),me=Mr();if(z.useEffect(()=>{if(!K&&H){if(J)me("/dashboard");else if(Y){const V=ue?.clientType;me(V==="core_buddy"?"/client/core-buddy":V==="circuit_vip"||V==="circuit_dropin"?"/client/circuit":"/client")}}},[K,H,J,Y,ue,me]),K)return l.jsx("div",{className:"login-container",children:l.jsx("div",{className:"login-loading",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"loading-logo"})})});const xe=async V=>{V.preventDefault(),f(""),x(!0);try{await L(s,t,a)}catch(G){f(G.message||"Failed to log in"),x(!1)}},q=async V=>{if(V.preventDefault(),f(""),!s.trim()){f("Please enter your email address");return}x(!0);try{await F(s.trim()),B(!0)}catch(G){G.code==="auth/user-not-found"?f("No account found with this email"):f(G.message||"Failed to send reset email")}x(!1)};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-card",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"login-logo"}),l.jsx("p",{children:E?"Reset Password":"Client Portal"})]}),u&&l.jsx("div",{className:"error-message",children:u}),A?l.jsxs("div",{className:"reset-sent",children:[l.jsx("div",{className:"reset-sent-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsx("p",{children:"Reset email sent!"}),l.jsx("span",{children:"Check your inbox for a password reset link"}),l.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{C(!1),B(!1),f("")},children:"Back to Log In"})]}):E?l.jsxs("form",{onSubmit:q,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{type:"email",id:"email",value:s,onChange:V=>e(V.target.value),placeholder:"Enter your email",required:!0})]}),l.jsx("button",{type:"submit",className:"login-btn",disabled:p,children:p?"Sending...":"Send Reset Link"}),l.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{C(!1),f("")},children:"Back to Log In"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:xe,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{type:"email",id:"email",value:s,onChange:V=>e(V.target.value),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsx("input",{type:"password",id:"password",value:t,onChange:V=>i(V.target.value),required:!0})]}),l.jsx("div",{className:"remember-me",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:a,onChange:V=>c(V.target.checked)}),l.jsx("span",{children:"Remember me"})]})}),l.jsx("button",{type:"submit",className:"login-btn",disabled:p,children:p?"Logging in...":"Log In"})]}),l.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{C(!0),f("")},children:"Forgot password?"})]}),l.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function t4(){const[s,e]=z.useState([]),[t,i]=z.useState([]),[a,c]=z.useState(!0),[u,f]=z.useState(null),[p,x]=z.useState({}),[E,C]=z.useState(null),[A,B]=z.useState(""),[L,F]=z.useState("all");z.useEffect(()=>{H()},[]);const H=async()=>{try{const[M,se]=await Promise.all([_n(ji(Xt(Xe,"clients"),$D("createdAt","desc"))),_n(Xt(Xe,"sessions"))]),ie=M.docs.map(X=>({id:X.id,...X.data()})),he=se.docs.map(X=>({id:X.id,...X.data()}));e(ie),i(he)}catch(M){console.error("Error fetching data:",M)}c(!1)},J=M=>{const se=new Date,ie=se.getFullYear(),he=(se.getMonth()+1).toString().padStart(2,"0"),X=se.getDate().toString().padStart(2,"0"),de=`${ie}-${he}-${X}`,ye=`${se.getHours().toString().padStart(2,"0")}:${se.getMinutes().toString().padStart(2,"0")}`;return t.filter(Le=>Le.clientId!==M?!1:Le.date<de||Le.date===de&&Le.time<ye).length},Y=M=>{const se=J(M.id);return(M.totalSessions||0)-se},ue=M=>{const se=new Date,ie=se.getFullYear(),he=(se.getMonth()+1).toString().padStart(2,"0"),X=se.getDate().toString().padStart(2,"0"),de=`${ie}-${he}-${X}`,ye=`${se.getHours().toString().padStart(2,"0")}:${se.getMinutes().toString().padStart(2,"0")}`;return t.filter(Le=>Le.clientId!==M?!1:Le.date>de||Le.date===de&&Le.time>=ye).length},K=M=>M?(M.toDate?M.toDate():new Date(M)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",me=async(M,se)=>{if(window.confirm(`Are you sure you want to delete ${se}? This will also delete all their booked sessions.`))try{const he=t.filter(X=>X.clientId===M).map(X=>Ha(Et(Xe,"sessions",X.id)));await Promise.all(he),await Ha(Et(Xe,"clients",M)),e(s.filter(X=>X.id!==M)),i(t.filter(X=>X.clientId!==M))}catch(ie){console.error("Error deleting client:",ie),alert("Failed to delete client")}},xe=M=>{if(!M)return"";const se=M.toDate?M.toDate():new Date(M),ie=se.getFullYear(),he=(se.getMonth()+1).toString().padStart(2,"0"),X=se.getDate().toString().padStart(2,"0");return`${ie}-${he}-${X}`},q=M=>{f(M.id),x({name:M.name,email:M.email,password:"",clientType:M.clientType||"block",weeksInBlock:M.weeksInBlock||"",totalSessions:M.totalSessions||"",sessionsRemaining:M.sessionsRemaining,sessionDuration:M.sessionDuration||45,startDate:xe(M.startDate),endDate:xe(M.endDate),status:M.status,hasPortalAccess:!!M.uid,circuitAccess:!!M.circuitAccess,coreBuddyAccess:!!M.coreBuddyAccess})},V=M=>{const{name:se,value:ie}=M.target;if(x(he=>({...he,[se]:ie})),se==="startDate"||se==="weeksInBlock"){const he=se==="startDate"?ie:p.startDate,X=parseInt(se==="weeksInBlock"?ie:p.weeksInBlock);if(he&&X>0){const de=new Date(he),ye=new Date(de);ye.setDate(ye.getDate()+X*7);const Le=ye.getFullYear(),ze=(ye.getMonth()+1).toString().padStart(2,"0"),rt=ye.getDate().toString().padStart(2,"0");x(je=>({...je,[se]:ie,endDate:`${Le}-${ze}-${rt}`}))}}},G=async M=>{try{const se=s.find(de=>de.id===M);let ie=se?.uid;if(p.password&&p.password.length>=6&&!se?.uid)try{const de=await jx(Vf,p.email.trim().toLowerCase(),p.password);await iv(Vf),ie=de.user.uid}catch(de){if(console.error("Error creating auth account:",de),de.code==="auth/email-already-in-use")alert("This email already has a portal account. Password not changed.");else if(de.code==="auth/weak-password"){alert("Password must be at least 6 characters.");return}else{alert("Failed to create portal account: "+de.message);return}}const he=p.clientType==="block",X={name:p.name.trim(),email:p.email.trim().toLowerCase(),clientType:p.clientType,status:p.status,coreBuddyAccess:p.coreBuddyAccess};if(he)X.weeksInBlock=parseInt(p.weeksInBlock)||0,X.totalSessions=parseInt(p.totalSessions)||0,X.sessionDuration=parseInt(p.sessionDuration),X.circuitAccess=p.circuitAccess,p.startDate&&(X.startDate=ot.fromDate(new Date(p.startDate))),p.endDate&&(X.endDate=ot.fromDate(new Date(p.endDate)));else{const de=s.find(ye=>ye.id===M);de?.circuitStrikes===void 0&&(X.circuitStrikes=0),de?.circuitBanUntil===void 0&&(X.circuitBanUntil=null)}ie&&!se?.uid&&(X.uid=ie),await lr(Et(Xe,"clients",M),X),e(s.map(de=>de.id===M?{...de,...p,uid:ie||de.uid,weeksInBlock:parseInt(p.weeksInBlock),totalSessions:parseInt(p.totalSessions),sessionDuration:parseInt(p.sessionDuration),startDate:ot.fromDate(new Date(p.startDate)),endDate:ot.fromDate(new Date(p.endDate))}:de)),f(null),ie&&!se?.uid&&alert("Portal access created! Client can now log in.")}catch(se){console.error("Error updating client:",se),alert("Failed to update client")}},ne=async M=>{try{const se=s.find(ie=>ie.id===M)?.status==="archived"?"active":"archived";await lr(Et(Xe,"clients",M),{status:se}),e(s.map(ie=>ie.id===M?{...ie,status:se}:ie))}catch(se){console.error("Error archiving client:",se),alert("Failed to update client status")}};if(a)return l.jsx("div",{className:"client-list-loading",children:"Loading clients..."});if(s.length===0)return l.jsxs("div",{className:"client-list-empty",children:[l.jsx("p",{children:"No clients yet"}),l.jsx("span",{children:"Add your first client to get started"})]});const W=M=>M.clientType==="circuit_vip"?"VIP":M.clientType==="circuit_dropin"?"Drop-in":M.clientType==="core_buddy"?"Core Buddy":"Block",ee=s.filter(M=>M.name?.toLowerCase().includes(A.toLowerCase())||M.email?.toLowerCase().includes(A.toLowerCase())),O=M=>M.clientType==="circuit_vip"||M.clientType==="circuit_dropin",Re=M=>M.clientType==="core_buddy",He=ee.filter(M=>!O(M)&&!Re(M)),te=ee.filter(M=>O(M)),Se=ee.filter(M=>Re(M)),Pe=L==="block"?He:L==="circuit"?te:L==="core_buddy"?Se:ee,De=M=>{u||C(se=>se===M?null:M)},Ge=M=>{const se=E===M.id,ie=u===M.id,he=!M.clientType||M.clientType==="block";return l.jsxs("div",{className:`client-card ${M.status==="archived"?"archived":""} ${se||ie?"expanded":"collapsed"}`,children:[l.jsxs("div",{className:"client-name-row",onClick:()=>De(M.id),children:[l.jsxs("div",{className:"client-name-row-left",children:[l.jsx("span",{className:"client-name-initial",children:M.name?.charAt(0)?.toUpperCase()}),l.jsxs("div",{className:"client-name-text",children:[l.jsx("h3",{children:M.name}),l.jsx("span",{className:"client-name-sub",children:he?`${Y(M)}/${M.totalSessions||0} sessions`:W(M)})]})]}),l.jsxs("div",{className:"client-name-row-right",children:[(M.clientType==="circuit_vip"||M.clientType==="circuit_dropin"||M.clientType==="core_buddy")&&l.jsx("span",{className:`client-type-badge ${M.clientType==="circuit_vip"?"vip":M.clientType==="core_buddy"?"core-buddy":"dropin"}`,children:W(M)}),l.jsx("span",{className:`status-dot ${M.status}`}),l.jsx("svg",{className:`client-chevron ${se||ie?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M6 9l6 6 6-6"})})]})]}),(se||ie)&&l.jsx("div",{className:"client-expand-panel",children:ie?l.jsxs("div",{className:"edit-form",children:[l.jsx("div",{className:"edit-type-toggle",children:[{value:"block",label:"Block"},{value:"circuit_vip",label:"VIP"},{value:"circuit_dropin",label:"Drop-in"},{value:"core_buddy",label:"Core Buddy"}].map(X=>l.jsx("button",{type:"button",className:`edit-type-btn ${p.clientType===X.value?"active":""}`,onClick:()=>x(de=>({...de,clientType:X.value})),children:X.label},X.value))}),l.jsxs("div",{className:"edit-row",children:[l.jsx("input",{type:"text",name:"name",value:p.name,onChange:V,placeholder:"Name"}),l.jsx("input",{type:"email",name:"email",value:p.email,onChange:V,placeholder:"Email"})]}),p.clientType==="block"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"edit-row",children:[l.jsx("input",{type:"number",name:"weeksInBlock",value:p.weeksInBlock,onChange:V,placeholder:"Weeks",min:"1"}),l.jsx("input",{type:"number",name:"totalSessions",value:p.totalSessions,onChange:V,placeholder:"Total Sessions",min:"1"}),l.jsxs("select",{name:"sessionDuration",value:p.sessionDuration,onChange:V,children:[l.jsx("option",{value:"30",children:"30 min"}),l.jsx("option",{value:"45",children:"45 min"})]})]}),l.jsxs("div",{className:"edit-row",children:[l.jsx("input",{type:"date",name:"startDate",value:p.startDate,onChange:V}),l.jsx("input",{type:"date",name:"endDate",value:p.endDate,onChange:V})]})]}),l.jsx("div",{className:"edit-row password-row",children:p.hasPortalAccess?l.jsx("div",{className:"portal-status has-access",children:"Has portal access"}):l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"text",name:"password",value:p.password,onChange:V,placeholder:"Set portal password (min 6 chars)"}),l.jsx("span",{className:"password-hint",children:"Set password to enable client portal"})]})}),p.clientType==="block"&&l.jsx("div",{className:"edit-row circuit-row",children:l.jsxs("label",{className:"circuit-access-toggle",children:[l.jsx("input",{type:"checkbox",checked:p.circuitAccess,onChange:X=>x(de=>({...de,circuitAccess:X.target.checked}))}),l.jsx("span",{children:"Circuit Class Access"})]})}),p.clientType!=="core_buddy"&&l.jsx("div",{className:"edit-row circuit-row",children:l.jsxs("label",{className:"circuit-access-toggle",children:[l.jsx("input",{type:"checkbox",checked:p.coreBuddyAccess,onChange:X=>x(de=>({...de,coreBuddyAccess:X.target.checked}))}),l.jsx("span",{children:"Core Buddy Access"})]})}),l.jsxs("div",{className:"edit-actions",children:[l.jsx("button",{className:"save-edit-btn",onClick:()=>G(M.id),children:"Save"}),l.jsx("button",{className:"cancel-edit-btn",onClick:()=>{f(null)},children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"client-expand-info",children:[l.jsx("span",{className:"client-email",children:M.email}),l.jsx("span",{className:`status-badge ${M.status}`,children:M.status})]}),he?l.jsxs("div",{className:"client-details",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Block"}),l.jsxs("span",{className:"detail-value",children:[M.weeksInBlock," weeks"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Sessions"}),l.jsxs("span",{className:"detail-value",children:[Y(M)," / ",M.totalSessions," remaining"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Booked"}),l.jsxs("span",{className:"detail-value",children:[ue(M.id)," sessions"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Duration"}),l.jsxs("span",{className:"detail-value",children:[M.sessionDuration||45," min"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Start"}),l.jsx("span",{className:"detail-value",children:K(M.startDate)})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"End"}),l.jsx("span",{className:"detail-value",children:K(M.endDate)})]})]}):l.jsxs("div",{className:"client-details circuit-details",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Type"}),l.jsx("span",{className:"detail-value",children:M.clientType==="circuit_vip"?"Monthly VIP":"Drop-in"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Strikes"}),l.jsxs("span",{className:"detail-value",children:[M.circuitStrikes||0,"/3"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Joined"}),l.jsx("span",{className:"detail-value",children:K(M.createdAt)})]})]}),l.jsxs("div",{className:"client-actions",children:[l.jsx("button",{className:"action-btn edit",onClick:X=>{X.stopPropagation(),q(M)},children:"Edit"}),l.jsx("button",{className:"action-btn archive",onClick:X=>{X.stopPropagation(),ne(M.id)},children:M.status==="archived"?"Reactivate":"Archive"}),l.jsx("button",{className:"action-btn delete",onClick:X=>{X.stopPropagation(),me(M.id,M.name)},children:"Delete"})]})]})})]},M.id)};return l.jsxs("div",{className:"client-list",children:[l.jsxs("div",{className:"client-search",children:[l.jsxs("svg",{className:"client-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("path",{d:"M21 21l-4.35-4.35"})]}),l.jsx("input",{type:"text",placeholder:"Search clients...",value:A,onChange:M=>B(M.target.value),className:"client-search-input"}),A&&l.jsx("button",{className:"client-search-clear",onClick:()=>B(""),children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),l.jsx("div",{className:"client-type-filter",children:[{value:"all",label:"All",count:ee.length},{value:"block",label:"Block",count:He.length},{value:"circuit",label:"Circuit",count:te.length},{value:"core_buddy",label:"Core Buddy",count:Se.length}].map(M=>l.jsxs("button",{className:`client-filter-btn ${L===M.value?"active":""}`,onClick:()=>F(M.value),children:[M.label,l.jsx("span",{className:"client-filter-count",children:M.count})]},M.value))}),L==="all"?l.jsxs(l.Fragment,{children:[He.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"client-section-header",children:["Block Members ",l.jsx("span",{children:He.length})]}),He.map(Ge)]}),te.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"client-section-header",children:["Circuit Members ",l.jsx("span",{children:te.length})]}),te.map(Ge)]})]}):l.jsxs(l.Fragment,{children:[Pe.length===0&&l.jsxs("div",{className:"client-section-empty",children:["No ",L," clients found"]}),Pe.map(Ge)]})]})}const Nw={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},Og=["monday","tuesday","wednesday","thursday","friday"],n4=["Monday","Tuesday","Wednesday","Thursday","Friday"],r4=["Mon","Tue","Wed","Thu","Fri"],p_=s=>{const[e,t]=s.split(":"),i=parseInt(e),a=i>=12?"pm":"am";return`${i>12?i-12:i===0?12:i}:${t}${a}`},s4=s=>{const e=new Date(s),t=e.getDay(),i=e.getDate()-t+(t===0?-6:1);return e.setDate(i),Og.map((a,c)=>{const u=new Date(e);return u.setDate(e.getDate()+c),u})},Ps=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},Lg=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},Uf=(s,e)=>{const t=Lg(s)+e,i=Math.floor(t/60),a=t%60;return`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},i4=s=>{const e=Nw[s];if(!e)return[];const t=[];if(e.morning){let i=e.morning.start;for(;i<e.morning.end;)t.push({time:i,period:"morning"}),i=Uf(i,15)}if(e.afternoon){let i=e.afternoon.start;for(;i<e.afternoon.end;)t.push({time:i,period:"afternoon"}),i=Uf(i,15)}return t};function a4(){const[s,e]=z.useState(new Date),[t,i]=z.useState([]),[a,c]=z.useState([]),[u,f]=z.useState([]),[p,x]=z.useState([]),[E,C]=z.useState([]),[A,B]=z.useState(null),[L,F]=z.useState(null),[H,J]=z.useState(!1),[Y,ue]=z.useState(!0);z.useEffect(()=>{i(s4(s))},[s]),z.useEffect(()=>{V()},[]);const K=ie=>{if(B(ie),J(!1),ie.startDate){const he=ie.startDate.toDate?ie.startDate.toDate():new Date(ie.startDate);e(he)}F(null)},me=ie=>{const he=new Date,X=Ps(he),de=`${he.getHours().toString().padStart(2,"0")}:${he.getMinutes().toString().padStart(2,"0")}`;return u.filter(ye=>ye.clientId!==ie?!1:ye.date<X||ye.date===X&&ye.time<de).length},xe=ie=>{const he=me(ie.id);return(ie.totalSessions||0)-he},q=ie=>{const he=new Date,X=he.getFullYear(),de=(he.getMonth()+1).toString().padStart(2,"0"),ye=he.getDate().toString().padStart(2,"0"),Le=`${X}-${de}-${ye}`,ze=`${he.getHours().toString().padStart(2,"0")}:${he.getMinutes().toString().padStart(2,"0")}`;return u.filter(rt=>rt.clientId!==ie?!1:rt.date>Le||rt.date===Le&&rt.time>=ze).length},V=async()=>{try{const he=(await _n(Xt(Xe,"clients"))).docs.map(je=>({id:je.id,...je.data()})).filter(je=>je.status==="active");c(he);const de=(await _n(Xt(Xe,"sessions"))).docs.map(je=>({id:je.id,...je.data()}));f(de);const Le=(await _n(Xt(Xe,"holidays"))).docs.map(je=>({id:je.id,...je.data()}));x(Le);const rt=(await _n(Xt(Xe,"blockedTimes"))).docs.map(je=>({id:je.id,...je.data()}));C(rt)}catch(ie){console.error("Error fetching data:",ie)}ue(!1)},G=ie=>{const he=new Date(s);he.setDate(he.getDate()+ie*7),e(he),F(null)},ne=()=>{e(new Date),F(null)},W=ie=>{const he=Ps(ie);return p.some(X=>X.date===he)},ee=(ie,he)=>{const X=Ps(ie);return E.some(de=>de.date===X&&de.time===he)},O=async(ie,he)=>{const X=Ps(ie),de=E.find(ye=>ye.date===X&&ye.time===he);try{if(de)await Ha(Et(Xe,"blockedTimes",de.id)),C(E.filter(ye=>ye.id!==de.id));else{const ye=await Pc(Xt(Xe,"blockedTimes"),{date:X,time:he,createdAt:ot.now()});C([...E,{id:ye.id,date:X,time:he}])}}catch(ye){console.error("Error toggling blocked time:",ye),alert("Failed to update time slot")}},Re=ie=>{const he=Ps(ie);return u.filter(X=>X.date===he)},He=(ie,he)=>{const X=Ps(ie);return u.find(de=>de.date===X&&de.time===he)},te=(ie,he,X)=>{const de=Og[ie.getDay()-1];if(!de||W(ie))return!1;const ye=Math.ceil(X/15);for(let vt=0;vt<ye;vt++){const it=Uf(he,vt*15);if(ee(ie,it))return!1}const Le=Ps(ie);if(u.find(vt=>vt.date===Le&&vt.time===he))return!1;const rt=Uf(he,X),je=Nw[de],Ct=je.morning&&rt<=je.morning.end,rn=je.afternoon&&rt<=je.afternoon.end,Wt=je.morning&&he>=je.morning.start&&he<je.morning.end,Ut=je.afternoon&&he>=je.afternoon.start&&he<je.afternoon.end;if(Wt&&!Ct||Ut&&!rn)return!1;for(const vt of u){if(vt.date!==Le)continue;const it=Lg(vt.time),It=it+(vt.duration||45),Mt=Lg(he),Ot=Mt+X;if(Mt<It&&Ot>it)return!1}return!0},Se=async(ie,he)=>{const X=He(ie,he);if(X){if(window.confirm(`Cancel ${X.clientName}'s session at ${p_(he)}?`))try{await Ha(Et(Xe,"sessions",X.id)),f(u.filter(ye=>ye.id!==X.id))}catch(ye){console.error("Error cancelling session:",ye),alert("Failed to cancel session")}return}if(!A){alert("Please select a client first");return}if(!te(ie,he,A.sessionDuration||45)){alert("This slot is not available for this client's session duration");return}if(u.filter(ye=>ye.clientId===A.id).length>=A.totalSessions){alert(`${A.name} has already booked all ${A.totalSessions} sessions`);return}try{const ye=Ps(ie),Le={clientId:A.id,clientName:A.name,date:ye,time:he,duration:A.sessionDuration||45,createdAt:ot.now()},ze=await Pc(Xt(Xe,"sessions"),Le);f([...u,{id:ze.id,...Le}])}catch(ye){console.error("Error booking session:",ye),alert("Failed to book session")}},Pe=async()=>{if(!A)return;const ie=A.startDate?.toDate?A.startDate.toDate():new Date(A.startDate),he=A.endDate?.toDate?A.endDate.toDate():new Date(A.endDate),X=u.filter(je=>je.clientId!==A.id?!1:t.some(Ct=>Ps(Ct)===je.date));if(X.length===0){alert("No sessions in current week to repeat. Book some sessions first, then use this button.");return}const de=A.weeksInBlock||Math.ceil((he-ie)/(10080*60*1e3)),ye=X.map(je=>({dayOfWeek:new Date(je.date).getDay(),time:je.time}));let Le=[];const ze=u.filter(je=>je.clientId===A.id).length;for(let je=0;je<de;je++){const Ct=new Date(ie);Ct.setDate(Ct.getDate()+je*7);const rn=new Date(Ct),Wt=rn.getDay(),Ut=rn.getDate()-Wt+(Wt===0?-6:1);rn.setDate(Ut);for(const vt of ye){const it=new Date(rn),It=vt.dayOfWeek===0?6:vt.dayOfWeek-1;it.setDate(rn.getDate()+It);const Mt=Ps(it);u.some(Ot=>Ot.clientId===A.id&&Ot.date===Mt&&Ot.time===vt.time)||it<ie||it>he||p.some(Ot=>Ot.date===Mt)||Le.push({dateKey:Mt,time:vt.time,sessionDate:it})}}const rt=ze+Le.length;if(rt>A.totalSessions){alert(`This would create ${Le.length} new sessions (${rt} total), but client only has ${A.totalSessions} sessions in their package.

You can still book ${A.totalSessions-ze} more sessions.`);return}if(Le.length===0){alert("All weeks already have sessions booked for this pattern.");return}if(window.confirm(`This will create ${Le.length} new sessions across the block.

(${ze} existing + ${Le.length} new = ${rt} total)

Continue?`))try{const je=[];for(const Ct of Le){const rn={clientId:A.id,clientName:A.name,date:Ct.dateKey,time:Ct.time,duration:A.sessionDuration||45,createdAt:ot.now()},Wt=await Pc(Xt(Xe,"sessions"),rn);je.push({id:Wt.id,...rn})}f([...u,...je]),alert(`Created ${je.length} new sessions!`)}catch(je){console.error("Error repeating weekly:",je),alert("Failed to repeat sessions")}},De=async ie=>{const he=Ps(ie),X=p.find(de=>de.date===he);try{if(X)await Ha(Et(Xe,"holidays",X.id)),x(p.filter(de=>de.id!==X.id));else{const de=await Pc(Xt(Xe,"holidays"),{date:he,createdAt:ot.now()});x([...p,{id:de.id,date:he}])}}catch(de){console.error("Error toggling day availability:",de),alert("Failed to update day availability")}};if(Y)return l.jsx("div",{className:"calendar-loading",children:"Loading calendar..."});const Ge=t[0],M=t[4],se=Ge&&M?`${Ge.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${M.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return l.jsxs("div",{className:"calendar",children:[l.jsxs("div",{className:"calendar-header",children:[l.jsxs("div",{className:"calendar-nav",children:[l.jsx("button",{onClick:()=>G(-1),children:""}),l.jsx("button",{onClick:ne,children:"Today"}),l.jsx("button",{onClick:()=>G(1),children:""})]}),l.jsx("h3",{children:se})]}),l.jsxs("div",{className:"client-selector",children:[l.jsx("span",{className:"selector-label",children:"Booking for:"}),A?l.jsxs("div",{className:"selected-client",children:[l.jsxs("div",{className:"selected-info",children:[l.jsx("strong",{children:A.name}),l.jsxs("span",{children:[A.sessionDuration||45,"min  ",xe(A),"/",A.totalSessions," remaining"]}),l.jsxs("span",{className:"booked-info",children:[q(A.id)," booked"]})]}),l.jsx("button",{onClick:()=>B(null),children:"Change"})]}):l.jsx("button",{className:"select-client-btn",onClick:()=>J(!0),children:"Select Client"})]}),A&&l.jsxs("div",{className:"repeat-weekly-section",children:[l.jsx("button",{className:"repeat-weekly-btn",onClick:Pe,children:"Repeat This Week's Schedule For All Weeks"}),l.jsx("span",{className:"repeat-hint",children:"Copies current week's sessions to all weeks in block"})]}),l.jsx("div",{className:"day-cards",children:t.map((ie,he)=>{const X=Re(ie),de=Ps(ie)===Ps(new Date),ye=W(ie);return l.jsxs("div",{className:`day-card ${L===he?"selected":""} ${de?"today":""} ${ye?"holiday":""}`,onClick:()=>F(L===he?null:he),children:[l.jsxs("div",{className:"day-card-header",children:[l.jsx("span",{className:"day-name",children:r4[he]}),l.jsx("span",{className:"day-date",children:ie.getDate()})]}),ye?l.jsx("div",{className:"day-card-status holiday",children:"Unavailable"}):l.jsxs("div",{className:"day-card-status",children:[X.length," session",X.length!==1?"s":""]})]},he)})}),L!==null&&t[L]&&l.jsxs("div",{className:"time-panel",children:[l.jsxs("div",{className:"time-panel-header",children:[l.jsxs("h4",{children:[n4[L]," ",t[L].getDate()]}),l.jsx("button",{className:"close-panel",onClick:()=>F(null),children:""})]}),l.jsx("div",{className:"availability-toggle",children:l.jsx("button",{className:`toggle-availability-btn ${W(t[L])?"unavailable":"available"}`,onClick:()=>De(t[L]),children:W(t[L])?"Mark Day Available":"Mark Day Unavailable"})}),W(t[L])?l.jsxs("div",{className:"day-unavailable-message",children:[l.jsx("p",{children:"This day is marked as unavailable"}),l.jsx("span",{children:"Tap the button above to make it available again"})]}):l.jsx("div",{className:"time-slots",children:i4(Og[L]).map(({time:ie,period:he},X,de)=>{const ye=He(t[L],ie),Le=ee(t[L],ie),ze=A&&te(t[L],ie,A.sessionDuration||45),rt=X===0||de[X-1]?.period!==he;return l.jsxs("div",{children:[rt&&l.jsx("div",{className:"period-label",children:he==="morning"?"Morning":"Afternoon"}),l.jsxs("div",{className:"time-slot-row",children:[l.jsxs("button",{className:`time-slot ${ye?"booked":""} ${Le?"blocked":""} ${ze?"available":""} ${!ye&&!Le&&!ze&&A?"unavailable":""}`,onClick:()=>!Le&&Se(t[L],ie),disabled:Le,children:[l.jsx("span",{className:"slot-time",children:p_(ie)}),ye?l.jsxs("span",{className:"slot-client",children:[ye.clientName," (",ye.duration,"m)"]}):Le?l.jsx("span",{className:"slot-blocked",children:"Blocked"}):ze?l.jsx("span",{className:"slot-available",children:"Available"}):A?l.jsx("span",{className:"slot-unavailable",children:"Unavailable"}):l.jsx("span",{className:"slot-empty",children:"Select client to book"})]}),l.jsx("button",{className:`block-toggle-btn ${Le?"is-blocked":""}`,onClick:()=>O(t[L],ie),disabled:!!ye,title:Le?"Unblock this time":"Block this time",children:Le?"":""})]})]},ie)})})]}),H&&l.jsx("div",{className:"modal-overlay",onClick:()=>J(!1),children:l.jsxs("div",{className:"modal-content",onClick:ie=>ie.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h3",{children:"Select Client"}),l.jsx("button",{className:"close-btn",onClick:()=>J(!1),children:""})]}),l.jsx("div",{className:"client-list-picker",children:a.length===0?l.jsx("p",{className:"no-items",children:"No active clients"}):a.map(ie=>{const he=ie.startDate?.toDate?ie.startDate.toDate():new Date(ie.startDate),X=ie.endDate?.toDate?ie.endDate.toDate():new Date(ie.endDate),de=xe(ie),ye=q(ie.id);return l.jsxs("button",{className:"client-option",onClick:()=>K(ie),children:[l.jsx("strong",{children:ie.name}),l.jsxs("span",{children:[ie.sessionDuration||45,"min  ",de,"/",ie.totalSessions," remaining  ",ye," booked"]}),l.jsxs("span",{className:"client-dates",children:[he.toLocaleDateString("en-GB",{day:"numeric",month:"short"})," - ",X.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]},ie.id)})})]})})]})}const g_=s=>{const[e,t]=s.split(":"),i=parseInt(e),a=i>=12?"pm":"am";return`${i>12?i-12:i===0?12:i}:${t}${a}`},Ch=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},Aw=s=>s===Ch(new Date),o4=s=>{const e=new Date;return e.setDate(e.getDate()+1),s===Ch(e)},v_=s=>Aw(s)?"Today":o4(s)?"Tomorrow":new Date(s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"}),y_=s=>{const e=new Date,t=Ch(e),i=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;if(s.date<t)return!0;if(s.date===t){const a=b_(s.time)+(s.duration||45);return b_(i)>=a}return!1},b_=s=>{const[e,t]=s.split(":").map(Number);return e*60+t};function l4(){const[s,e]=z.useState([]),[t,i]=z.useState(!0),[a,c]=z.useState(new Date);z.useEffect(()=>{u();const L=setInterval(()=>{c(new Date)},6e4);return()=>clearInterval(L)},[]);const u=async()=>{try{const F=(await _n(Xt(Xe,"sessions"))).docs.map(Y=>({id:Y.id,...Y.data()})),H=Ch(new Date),J=F.filter(Y=>Y.date>=H).sort((Y,ue)=>Y.date!==ue.date?Y.date.localeCompare(ue.date):Y.time.localeCompare(ue.time));e(J)}catch(L){console.error("Error fetching sessions:",L)}i(!1)},f=async L=>{if(window.confirm(`Cancel ${L.clientName}'s session at ${g_(L.time)} on ${v_(L.date)}?`))try{await Ha(Et(Xe,"sessions",L.id)),e(s.filter(F=>F.id!==L.id))}catch(F){console.error("Error cancelling session:",F),alert("Failed to cancel session")}};if(t)return l.jsx("div",{className:"schedule-loading",children:"Loading schedule..."});const p=s.reduce((L,F)=>{const H=F.date;return L[H]||(L[H]=[]),L[H].push(F),L},{}),x=Object.keys(p).sort(),E=Ch(new Date),C=p[E]||[],A=C.filter(L=>y_(L)).length,B=C.length-A;return l.jsxs("div",{className:"schedule",children:[l.jsxs("div",{className:"today-summary",children:[l.jsx("h3",{children:"Today's Sessions"}),l.jsx("div",{className:"today-count",children:C.length===0?l.jsx("span",{className:"no-sessions",children:"No sessions today"}):l.jsxs("div",{className:"today-stats",children:[l.jsxs("span",{className:"completed-count",children:[A," completed"]}),l.jsxs("span",{className:"remaining-count",children:[B," remaining"]})]})})]}),x.length===0?l.jsx("div",{className:"no-upcoming",children:l.jsx("p",{children:"No upcoming sessions booked"})}):l.jsx("div",{className:"sessions-list",children:x.map(L=>l.jsxs("div",{className:`date-group ${Aw(L)?"today":""}`,children:[l.jsxs("div",{className:"date-header",children:[l.jsx("span",{className:"date-label",children:v_(L)}),l.jsxs("span",{className:"date-count",children:[p[L].length," session",p[L].length!==1?"s":""]})]}),l.jsx("div",{className:"date-sessions",children:p[L].map(F=>{const H=y_(F);return l.jsxs("div",{className:`session-card ${H?"completed":""}`,children:[l.jsx("div",{className:"session-time",children:g_(F.time)}),l.jsxs("div",{className:"session-details",children:[l.jsx("strong",{children:F.clientName}),l.jsxs("span",{children:[F.duration,"min session"]})]}),H?l.jsx("div",{className:"completed-badge",children:""}):l.jsx("button",{className:"cancel-session-btn",onClick:()=>f(F),children:"Cancel"})]},F.id)})})]},L))})]})}const jw={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},Pg=["monday","tuesday","wednesday","thursday","friday"],c4=["Monday","Tuesday","Wednesday","Thursday","Friday"],u4=s=>{const[e,t]=s.split(":"),i=parseInt(e),a=i>=12?"pm":"am";return`${i>12?i-12:i===0?12:i}:${t}${a}`},nh=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},h4=s=>{const e=new Date(s),t=e.getDay(),i=e.getDate()-t+(t===0?-6:1);return e.setDate(i),Pg.map((a,c)=>{const u=new Date(e);return u.setDate(e.getDate()+c),u})},Vg=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},Ug=(s,e)=>{const t=Vg(s)+e,i=Math.floor(t/60),a=t%60;return`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},d4=s=>{const e=jw[s];if(!e)return[];const t=[];if(e.morning){let i=e.morning.start;for(;i<e.morning.end;)t.push({time:i,period:"morning"}),i=Ug(i,15)}if(e.afternoon){let i=e.afternoon.start;for(;i<e.afternoon.end;)t.push({time:i,period:"afternoon"}),i=Ug(i,15)}return t};function f4(){const[s,e]=z.useState(new Date),[t,i]=z.useState([]),[a,c]=z.useState([]),[u,f]=z.useState([]),[p,x]=z.useState(!0),[E,C]=z.useState(45);z.useEffect(()=>{i(h4(s))},[s]),z.useEffect(()=>{A()},[]);const A=async()=>{try{const xe=(await _n(Xt(Xe,"sessions"))).docs.map(G=>({id:G.id,...G.data()}));c(xe);const V=(await _n(Xt(Xe,"holidays"))).docs.map(G=>({id:G.id,...G.data()}));f(V)}catch(me){console.error("Error fetching data:",me)}x(!1)},B=me=>{const xe=new Date(s);xe.setDate(xe.getDate()+me*7),e(xe)},L=()=>{e(new Date)},F=me=>{const xe=nh(me);return u.some(q=>q.date===xe)},H=(me,xe)=>{const q=Pg[me.getDay()-1];if(!q||F(me))return!1;const V=nh(me),G=new Date,ne=nh(G);if(V<ne)return!1;if(V===ne){const Se=`${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`;if(xe<Se)return!1}const W=Ug(xe,E),ee=jw[q],O=ee.morning&&xe>=ee.morning.start&&xe<ee.morning.end,Re=ee.afternoon&&xe>=ee.afternoon.start&&xe<ee.afternoon.end,He=ee.morning&&W<=ee.morning.end,te=ee.afternoon&&W<=ee.afternoon.end;if(O&&!He||Re&&!te)return!1;for(const Se of a){if(Se.date!==V)continue;const Pe=Vg(Se.time),De=Pe+(Se.duration||45),Ge=Vg(xe),M=Ge+E;if(Ge<De&&M>Pe)return!1}return!0},J=(me,xe)=>{const q=Pg[xe];return d4(q).filter(G=>H(me,G.time))};if(p)return l.jsx("div",{className:"availability-loading",children:"Loading availability..."});const Y=t[0],ue=t[4],K=Y&&ue?`${Y.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${ue.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return l.jsxs("div",{className:"availability",children:[l.jsxs("div",{className:"availability-header",children:[l.jsxs("div",{className:"availability-nav",children:[l.jsx("button",{onClick:()=>B(-1),children:""}),l.jsx("button",{onClick:L,children:"Today"}),l.jsx("button",{onClick:()=>B(1),children:""})]}),l.jsx("h3",{children:K}),l.jsxs("div",{className:"duration-selector",children:[l.jsx("label",{children:"Session:"}),l.jsxs("select",{value:E,onChange:me=>C(Number(me.target.value)),children:[l.jsx("option",{value:30,children:"30 min"}),l.jsx("option",{value:45,children:"45 min"}),l.jsx("option",{value:60,children:"60 min"})]})]})]}),l.jsx("div",{className:"availability-grid",children:t.map((me,xe)=>{const q=F(me),V=q?[]:J(me,xe),G=nh(me)===nh(new Date),ne=me<new Date&&!G;return l.jsxs("div",{className:`day-column ${G?"today":""} ${ne?"past":""}`,children:[l.jsxs("div",{className:"day-header",children:[l.jsx("span",{className:"day-name",children:c4[xe]}),l.jsxs("span",{className:"day-date",children:[me.getDate(),"/",me.getMonth()+1]}),q&&l.jsx("span",{className:"holiday-badge",children:"Holiday"})]}),l.jsx("div",{className:"slots-container",children:q?l.jsx("div",{className:"no-slots",children:"Unavailable"}):V.length===0?l.jsx("div",{className:"no-slots",children:"Fully booked"}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"slots-count",children:[V.length," slots"]}),l.jsx("div",{className:"slots-list",children:V.map(W=>l.jsx("div",{className:`slot ${W.period}`,children:u4(W.time)},W.time))})]})})]},xe)})})]})}const tg=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,__=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),x_=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const a=new Date(s);a.setHours(9,45,0,0),s>a&&(t=7)}const i=new Date(s);return i.setDate(s.getDate()+t),i},pf=s=>s==="circuit_vip"?"VIP":s==="circuit_dropin"?"Drop-in":"Block",gf=s=>s==="circuit_vip"?"vip":s==="circuit_dropin"?"dropin":"block";function m4(){const[s,e]=z.useState(!0),[t,i]=z.useState([]),[a,c]=z.useState([]),[u,f]=z.useState(null),[p,x]=z.useState("upcoming"),[E,C]=z.useState(!1),[A,B]=z.useState(null),[L,F]=z.useState(!1),[H,J]=z.useState(!1),Y=z.useCallback((X,de="info")=>{B({message:X,type:de}),setTimeout(()=>B(null),4e3)},[]);z.useEffect(()=>{ue()},[]);const ue=async()=>{try{const de=(await _n(Xt(Xe,"circuitSessions"))).docs.map(je=>({id:je.id,...je.data()}));de.sort((je,Ct)=>Ct.date.localeCompare(je.date)),i(de);const Le=(await _n(Xt(Xe,"clients"))).docs.map(je=>({id:je.id,...je.data()})).filter(je=>je.clientType==="circuit_vip"||je.clientType==="circuit_dropin"||je.circuitAccess===!0);c(Le);const ze=tg(x_()),rt=de.find(je=>je.date===ze);rt?f(rt):de.length>0&&f(de[0])}catch(X){console.error("Error loading circuit data:",X),Y("Failed to load circuit data","error")}e(!1)},K=async X=>{if(!(!u||E)&&window.confirm("Remove this member from the slot?")){C(!0);try{const de=[...u.slots],ye=de.findIndex(rt=>rt.slotNumber===X);if(ye===-1){C(!1);return}let Le=[...u.waitlist||[]];if(Le.length>0){const rt=Le.shift();de[ye]={slotNumber:X,memberId:rt.memberId,memberName:rt.memberName,memberType:rt.memberType,status:"confirmed",bookedAt:ot.now()},Y(`Slot given to ${rt.memberName} from waitlist`,"success")}else de[ye]={slotNumber:X,memberId:null,memberName:null,memberType:null,status:"available"},Y("Member removed from slot","success");await lr(Et(Xe,"circuitSessions",u.id),{slots:de,waitlist:Le});const ze={...u,slots:de,waitlist:Le};f(ze),i(rt=>rt.map(je=>je.id===ze.id?ze:je))}catch(de){console.error("Error removing from slot:",de),Y("Failed to remove member","error")}C(!1)}},me=async(X,de)=>{if(!(!u||E)){C(!0);try{const ye=[...u.slots],Le=ye.findIndex(je=>je.slotNumber===X&&je.status==="available");if(Le===-1){Y("Slot is not available","error"),C(!1);return}if(ye.some(je=>je.memberId===de.id)){Y(`${de.name} already has a slot`,"error"),C(!1);return}ye[Le]={slotNumber:X,memberId:de.id,memberName:de.name,memberType:de.clientType||"block",status:"confirmed",bookedAt:ot.now()};const ze=(u.waitlist||[]).filter(je=>je.memberId!==de.id);await lr(Et(Xe,"circuitSessions",u.id),{slots:ye,waitlist:ze});const rt={...u,slots:ye,waitlist:ze};f(rt),i(je=>je.map(Ct=>Ct.id===rt.id?rt:Ct)),Y(`${de.name} added to slot ${X}`,"success")}catch(ye){console.error("Error adding to slot:",ye),Y("Failed to add member","error")}C(!1)}},xe=async X=>{if(!(!u||E)){C(!0);try{const de=(u.waitlist||[]).filter(Le=>Le.memberId!==X);await lr(Et(Xe,"circuitSessions",u.id),{waitlist:de});const ye={...u,waitlist:de};f(ye),i(Le=>Le.map(ze=>ze.id===ye.id?ye:ze)),Y("Removed from waitlist","success")}catch(de){console.error("Error removing from waitlist:",de),Y("Failed to remove from waitlist","error")}C(!1)}},q=async(X,de)=>{if(!(!u||E)){C(!0);try{const ye=[...u.slots],Le=ye.findIndex(rt=>rt.slotNumber===X);if(Le===-1){C(!1);return}if(ye[Le]={...ye[Le],attended:de},await lr(Et(Xe,"circuitSessions",u.id),{slots:ye}),de===!1){const rt=ye[Le].memberId;if(rt){const je=Et(Xe,"clients",rt),Ct=await nl(je);if(Ct.exists()){const Wt=(Ct.data().circuitStrikes||0)+1,Ut={circuitStrikes:Wt};if(Wt>=3){const vt=new Date;vt.setMonth(vt.getMonth()+1),Ut.circuitBanUntil=ot.fromDate(vt),Ut.circuitStrikes=0,Y(`${ye[Le].memberName} banned for 1 month (3 strikes)`,"error")}else Y(`No-show recorded - ${ye[Le].memberName} (${Wt}/3 strikes)`,"error");await lr(je,Ut)}}}else Y(`${ye[Le].memberName} marked as attended`,"success");const ze={...u,slots:ye};f(ze),i(rt=>rt.map(je=>je.id===ze.id?ze:je))}catch(ye){console.error("Error marking attendance:",ye),Y("Failed to update attendance","error")}C(!1)}},V=async(X,de)=>{if(!E&&window.confirm(`Reset strikes for ${de}?`)){C(!0);try{await lr(Et(Xe,"clients",X),{circuitStrikes:0,circuitBanUntil:null}),c(ye=>ye.map(Le=>Le.id===X?{...Le,circuitStrikes:0,circuitBanUntil:null}:Le)),Y(`Strikes reset for ${de}`,"success")}catch(ye){console.error("Error resetting strikes:",ye),Y("Failed to reset strikes","error")}C(!1)}},G=async(X,de)=>{if(!E&&window.confirm(`Lift ban for ${de}?`)){C(!0);try{await lr(Et(Xe,"clients",X),{circuitBanUntil:null,circuitStrikes:0}),c(ye=>ye.map(Le=>Le.id===X?{...Le,circuitBanUntil:null,circuitStrikes:0}:Le)),Y(`Ban lifted for ${de}`,"success")}catch(ye){console.error("Error lifting ban:",ye),Y("Failed to lift ban","error")}C(!1)}};if(s)return l.jsxs("div",{className:"cm-loading",children:[l.jsx("div",{className:"cm-loading-spinner"}),l.jsx("span",{children:"Loading circuit data..."})]});const ne=tg(new Date),W=tg(x_()),ee=t.filter(X=>X.date>=ne),O=t.filter(X=>X.date<ne),Re=p==="upcoming"?ee:O,He=u?u.slots.filter(X=>X.status!=="available").length:0,te=u?u.slots.filter(X=>X.status==="available").length:0,Se=u?u.date>=ne:!1,Pe=u?u.slots.filter(X=>X.memberId).map(X=>X.memberId):[],De=u?(u.waitlist||[]).map(X=>X.memberId):[],Ge=a.filter(X=>!Pe.includes(X.id)&&!De.includes(X.id)),M=a.filter(X=>X.clientType==="circuit_vip").length,se=a.filter(X=>X.clientType==="circuit_dropin").length,ie=a.filter(X=>X.circuitAccess&&X.clientType!=="circuit_vip"&&X.clientType!=="circuit_dropin").length,he=a.filter(X=>X.circuitBanUntil?(X.circuitBanUntil.toDate?X.circuitBanUntil.toDate():new Date(X.circuitBanUntil))>new Date:!1);return l.jsxs("div",{className:"cm-container",children:[l.jsxs("div",{className:"cm-stats-row",children:[l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:M}),l.jsx("span",{className:"cm-stat-label",children:"VIP"})]}),l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:se}),l.jsx("span",{className:"cm-stat-label",children:"Drop-in"})]}),l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:ie}),l.jsx("span",{className:"cm-stat-label",children:"Block"})]}),l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:t.length}),l.jsx("span",{className:"cm-stat-label",children:"Sessions"})]})]}),l.jsxs("div",{className:"cm-view-toggle",children:[l.jsx("button",{className:`cm-toggle-btn ${L?"":"active"}`,onClick:()=>F(!1),children:"Sessions"}),l.jsx("button",{className:`cm-toggle-btn ${L?"active":""}`,onClick:()=>F(!0),children:"Members"})]}),!L&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"cm-tabs",children:[l.jsxs("button",{className:`cm-tab ${p==="upcoming"?"active":""}`,onClick:()=>x("upcoming"),children:["Upcoming (",ee.length,")"]}),l.jsxs("button",{className:`cm-tab ${p==="past"?"active":""}`,onClick:()=>x("past"),children:["Past (",O.length,")"]})]}),l.jsx("div",{className:"cm-sessions-list",children:Re.length===0?l.jsx("div",{className:"cm-empty",children:l.jsxs("p",{children:["No ",p," sessions"]})}):Re.map(X=>{const de=X.slots.filter(ze=>ze.status!=="available").length,ye=u?.id===X.id,Le=X.date===W;return l.jsxs("button",{className:`cm-session-btn ${ye?"selected":""} ${Le?"next":""}`,onClick:()=>{f(X),J(!1)},children:[l.jsxs("div",{className:"cm-session-btn-left",children:[l.jsx("span",{className:"cm-session-date",children:__(X.date)}),Le&&l.jsx("span",{className:"cm-next-badge",children:"Next"})]}),l.jsxs("div",{className:"cm-session-btn-right",children:[l.jsxs("span",{className:"cm-session-fill",children:[de,"/8"]}),(X.waitlist?.length||0)>0&&l.jsxs("span",{className:"cm-waitlist-count",children:["+",X.waitlist.length," wl"]})]})]},X.id)})}),u&&l.jsxs("div",{className:"cm-detail",children:[l.jsxs("div",{className:"cm-detail-header",children:[l.jsxs("div",{children:[l.jsx("h3",{children:__(u.date)}),l.jsxs("p",{children:[u.time," - ",u.endTime,"  ",He,"/8 booked  ",te," available"]})]}),!Se&&l.jsx("button",{className:`cm-attendance-btn ${H?"active":""}`,onClick:()=>J(!H),children:H?"Done":"Attendance"})]}),l.jsx("div",{className:"cm-slots",children:u.slots.map(X=>{const de=X.status==="available";return l.jsxs("div",{className:`cm-slot ${de?"empty":"filled"} ${X.attended===!0?"attended":""} ${X.attended===!1?"no-show":""}`,children:[l.jsx("span",{className:"cm-slot-num",children:X.slotNumber}),de?l.jsxs("div",{className:"cm-slot-empty",children:[l.jsx("span",{children:"Available"}),Se&&l.jsx(p4,{members:Ge,onSelect:ye=>me(X.slotNumber,ye),disabled:E})]}):l.jsxs("div",{className:"cm-slot-filled",children:[l.jsxs("div",{className:"cm-slot-info",children:[l.jsx("span",{className:"cm-slot-name",children:X.memberName}),l.jsx("span",{className:`cm-type-badge ${gf(X.memberType)}`,children:pf(X.memberType)})]}),l.jsxs("div",{className:"cm-slot-actions",children:[H&&X.attended===void 0&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"cm-attend-yes",onClick:()=>q(X.slotNumber,!0),disabled:E,title:"Attended",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsx("button",{className:"cm-attend-no",onClick:()=>q(X.slotNumber,!1),disabled:E,title:"No-show",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),X.attended===!0&&l.jsx("span",{className:"cm-attended-label",children:"Attended"}),X.attended===!1&&l.jsx("span",{className:"cm-noshow-label",children:"No-show"}),Se&&l.jsx("button",{className:"cm-remove-btn",onClick:()=>K(X.slotNumber),disabled:E,title:"Remove from slot",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]})]},X.slotNumber)})}),(u.waitlist?.length||0)>0&&l.jsxs("div",{className:"cm-waitlist",children:[l.jsxs("h4",{children:["Waitlist (",u.waitlist.length,")"]}),u.waitlist.map((X,de)=>l.jsxs("div",{className:"cm-waitlist-row",children:[l.jsxs("span",{className:"cm-wl-pos",children:["#",de+1]}),l.jsx("span",{className:"cm-wl-name",children:X.memberName}),l.jsx("span",{className:`cm-type-badge ${gf(X.memberType)}`,children:pf(X.memberType)}),Se&&l.jsx("button",{className:"cm-wl-remove",onClick:()=>xe(X.memberId),disabled:E,children:"Remove"})]},X.memberId))]})]})]}),L&&l.jsxs("div",{className:"cm-members",children:[he.length>0&&l.jsxs("div",{className:"cm-ban-alert",children:[l.jsxs("h4",{children:["Currently Banned (",he.length,")"]}),he.map(X=>{const de=X.circuitBanUntil?.toDate?X.circuitBanUntil.toDate():new Date(X.circuitBanUntil);return l.jsxs("div",{className:"cm-ban-row",children:[l.jsxs("div",{className:"cm-ban-info",children:[l.jsx("span",{className:"cm-ban-name",children:X.name}),l.jsxs("span",{className:"cm-ban-until",children:["Until ",de.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),l.jsx("button",{className:"cm-lift-ban-btn",onClick:()=>G(X.id,X.name),disabled:E,children:"Lift Ban"})]},X.id)})]}),l.jsx("div",{className:"cm-members-list",children:a.length===0?l.jsxs("div",{className:"cm-empty",children:[l.jsx("p",{children:"No circuit members yet"}),l.jsx("span",{children:"Add members via the Clients page"})]}):a.map(X=>{const de=X.circuitStrikes||0,ye=he.some(Le=>Le.id===X.id);return l.jsxs("div",{className:`cm-member-card ${ye?"banned":""}`,children:[l.jsxs("div",{className:"cm-member-top",children:[l.jsx("span",{className:"cm-member-name",children:X.name}),l.jsx("span",{className:`cm-type-badge ${gf(X.clientType)}`,children:pf(X.clientType)})]}),l.jsxs("div",{className:"cm-member-bottom",children:[l.jsxs("div",{className:"cm-strikes",children:[[0,1,2].map(Le=>l.jsx("span",{className:`cm-strike-dot ${Le<de?"active":""}`},Le)),l.jsxs("span",{className:"cm-strike-text",children:[de,"/3 strikes"]})]}),l.jsxs("div",{className:"cm-member-actions",children:[ye&&l.jsx("button",{className:"cm-small-btn ban",onClick:()=>G(X.id,X.name),disabled:E,children:"Lift Ban"}),de>0&&!ye&&l.jsx("button",{className:"cm-small-btn reset",onClick:()=>V(X.id,X.name),disabled:E,children:"Reset"})]})]})]},X.id)})})]}),A&&l.jsx("div",{className:`cm-toast ${A.type}`,children:l.jsx("span",{children:A.message})})]})}function p4({members:s,onSelect:e,disabled:t}){const[i,a]=z.useState(!1),[c,u]=z.useState(""),f=s.filter(p=>p.name.toLowerCase().includes(c.toLowerCase()));return s.length===0?null:l.jsxs("div",{className:"cm-add-dropdown",children:[l.jsx("button",{className:"cm-add-trigger",onClick:()=>a(!i),disabled:t,children:"+ Add"}),i&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"cm-dropdown-backdrop",onClick:()=>{a(!1),u("")}}),l.jsxs("div",{className:"cm-dropdown-menu",children:[s.length>4&&l.jsx("input",{type:"text",className:"cm-dropdown-search",placeholder:"Search...",value:c,onChange:p=>u(p.target.value),autoFocus:!0}),l.jsxs("div",{className:"cm-dropdown-list",children:[f.map(p=>l.jsxs("button",{className:"cm-dropdown-item",onClick:()=>{e(p),a(!1),u("")},children:[l.jsx("span",{children:p.name}),l.jsx("span",{className:`cm-type-badge sm ${gf(p.clientType)}`,children:pf(p.clientType)})]},p.id)),f.length===0&&l.jsx("div",{className:"cm-dropdown-empty",children:"No members found"})]})]})]})]})}function g4(){const[s,e]=z.useState(()=>localStorage.getItem("adminActiveView")||"schedule"),t=te=>{e(te),localStorage.setItem("adminActiveView",te)},[i,a]=z.useState(0),[c,u]=z.useState(!1),[f,p]=z.useState([]),[x,E]=z.useState(null),[C,A]=z.useState(null),{currentUser:B,logout:L,isAdmin:F,loading:H}=ws(),{isDark:J,toggleTheme:Y}=Kl(),ue=Mr(),K=z.useRef(0),me=z.useRef(!1);z.useRef(null);const xe=z.useCallback((te,Se="info")=>{A({message:te,type:Se}),setTimeout(()=>A(null),4e3)},[]);z.useEffect(()=>{!H&&(!B||!F)&&ue("/")},[B,F,H,ue]),z.useEffect(()=>{B&&F&&q()},[B,F]);const q=async()=>{try{const te=ji(Xt(Xe,"rescheduleRequests"),li("status","==","pending")),Pe=(await _n(te)).docs.map(De=>({id:De.id,...De.data()}));Pe.sort((De,Ge)=>{const M=De.createdAt?.toDate?De.createdAt.toDate():new Date(0);return(Ge.createdAt?.toDate?Ge.createdAt.toDate():new Date(0))-M}),p(Pe)}catch(te){console.error("Error fetching reschedule requests:",te)}};z.useEffect(()=>{(async()=>{if(!(!B||!F))try{const[Se,Pe]=await Promise.all([_n(Xt(Xe,"clients")),_n(Xt(Xe,"sessions"))]),De=new Set(Se.docs.map(M=>M.id)),Ge=Pe.docs.filter(M=>!De.has(M.data().clientId));if(Ge.length>0){console.log(`Cleaning up ${Ge.length} orphaned sessions...`);const M=Ge.map(se=>Ha(Et(Xe,"sessions",se.id)));await Promise.all(M),console.log("Orphaned sessions cleaned up successfully")}}catch(Se){console.error("Error cleaning up orphaned sessions:",Se)}})()},[B,F]),z.useEffect(()=>{const te=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,Se=Ge=>{te()<=0&&(K.current=Ge.touches[0].clientY,me.current=!1)},Pe=Ge=>{const M=te(),ie=Ge.touches[0].clientY-K.current;if(M>5||ie<=0){me.current=!1,a(0);return}ie>20&&M<=0&&(me.current=!0,a(Math.min((ie-20)*.4,80)))},De=()=>{me.current&&i>60?(u(!0),setTimeout(()=>{window.location.reload()},300)):a(0),me.current=!1};return document.addEventListener("touchstart",Se,{passive:!0}),document.addEventListener("touchmove",Pe,{passive:!0}),document.addEventListener("touchend",De),()=>{document.removeEventListener("touchstart",Se),document.removeEventListener("touchmove",Pe),document.removeEventListener("touchend",De)}},[i]);const V=()=>{u(!0),setTimeout(()=>{window.location.reload()},300)},G=async()=>{try{await L(),ue("/")}catch(te){console.error("Failed to log out:",te)}},ne=()=>{ue("/add-client")},W=te=>new Date(te).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),ee=te=>{const[Se,Pe]=te.split(":"),De=parseInt(Se),Ge=De>=12?"pm":"am";return`${De>12?De-12:De===0?12:De}:${Pe}${Ge}`},O=async te=>{if(window.confirm(`Approve reschedule for ${te.clientName}?

From: ${W(te.originalDate)} at ${ee(te.originalTime)}
To: ${W(te.requestedDate)} at ${ee(te.requestedTime)}`)){E(te.id);try{await lr(Et(Xe,"sessions",te.sessionId),{date:te.requestedDate,time:te.requestedTime}),await lr(Et(Xe,"rescheduleRequests",te.id),{status:"approved",respondedAt:ot.now()}),p(f.filter(Se=>Se.id!==te.id)),xe(`Approved reschedule for ${te.clientName}`,"success")}catch(Se){console.error("Error approving request:",Se),xe("Failed to approve request","error")}E(null)}},Re=async te=>{if(window.confirm(`Reject reschedule request from ${te.clientName}?`)){E(te.id);try{await lr(Et(Xe,"rescheduleRequests",te.id),{status:"rejected",respondedAt:ot.now()}),p(f.filter(Se=>Se.id!==te.id)),xe(`Request from ${te.clientName} rejected`,"info")}catch(Se){console.error("Error rejecting request:",Se),xe("Failed to reject request","error")}E(null)}};if(H)return l.jsx("div",{className:"loading",children:"Loading..."});if(!B||!F)return null;const He=f.length;return l.jsxs("div",{className:"dashboard",children:[i>0&&l.jsxs("div",{className:"pull-indicator",style:{height:i},children:[l.jsx("div",{className:`pull-spinner ${c?"spinning":""}`,children:c?"":""}),l.jsx("span",{children:c?"Refreshing...":i>60?"Release to refresh":"Pull to refresh"})]}),l.jsxs("header",{className:"dashboard-header",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"admin-header-logo"}),l.jsx("span",{className:"admin-badge",children:"Admin"})]}),l.jsxs("nav",{className:"header-nav",children:[l.jsx("button",{className:`nav-btn ${s==="schedule"?"active":""}`,onClick:()=>t("schedule"),children:"Today"}),l.jsx("button",{className:`nav-btn ${s==="clients"?"active":""}`,onClick:()=>t("clients"),children:"Clients"}),l.jsx("button",{className:`nav-btn ${s==="calendar"?"active":""}`,onClick:()=>t("calendar"),children:"Calendar"}),l.jsxs("button",{className:`nav-btn ${s==="requests"?"active":""} ${He>0?"has-badge":""}`,onClick:()=>t("requests"),children:["Requests",He>0&&l.jsx("span",{className:"nav-badge",children:He})]}),l.jsx("button",{className:`nav-btn ${s==="availability"?"active":""}`,onClick:()=>t("availability"),children:"Slots"}),l.jsx("button",{className:`nav-btn ${s==="circuits"?"active":""}`,onClick:()=>t("circuits"),children:"Circuits"})]}),l.jsxs("div",{className:"header-actions",children:[l.jsx("button",{className:"theme-toggle-btn",onClick:Y,"aria-label":J?"Switch to light mode":"Switch to dark mode",children:J?l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),l.jsx("button",{className:"refresh-btn",onClick:V,disabled:c,children:c?"":""}),l.jsx("button",{className:"logout-btn",onClick:G,children:"Log Out"})]})]}),C&&l.jsx("div",{className:"toast-container",children:l.jsxs("div",{className:`toast ${C.type}`,children:[l.jsxs("span",{className:"toast-icon",children:[C.type==="success"&&l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),C.type==="error"&&l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),C.type==="info"&&l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})]}),l.jsx("span",{className:"toast-message",children:C.message})]})}),l.jsxs("main",{className:"dashboard-main",children:[s==="schedule"&&l.jsxs("div",{className:"schedule-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Schedule"})}),l.jsx(l4,{})]}),s==="clients"&&l.jsxs("div",{className:"clients-view",children:[l.jsxs("div",{className:"view-header",children:[l.jsx("h2",{children:"Clients"}),l.jsx("button",{className:"add-btn",onClick:ne,children:"+ Add Client"})]}),l.jsx(t4,{})]}),s==="calendar"&&l.jsxs("div",{className:"calendar-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Calendar"})}),l.jsx(a4,{})]}),s==="requests"&&l.jsxs("div",{className:"requests-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Reschedule Requests"})}),f.length===0?l.jsxs("div",{className:"no-requests",children:[l.jsx("div",{className:"empty-icon",children:l.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"20",y:"25",width:"60",height:"50",rx:"4"}),l.jsx("path",{d:"M20 35 L50 55 L80 35"}),l.jsx("circle",{cx:"50",cy:"70",r:"3",fill:"currentColor"})]})}),l.jsx("p",{children:"No pending requests"}),l.jsx("span",{children:"When clients request to reschedule, they will appear here"})]}):l.jsx("div",{className:"requests-list",children:f.map(te=>l.jsxs("div",{className:"request-card",children:[l.jsxs("div",{className:"request-header",children:[l.jsx("span",{className:"client-name",children:te.clientName}),l.jsx("span",{className:"request-time",children:te.createdAt?.toDate?te.createdAt.toDate().toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""})]}),l.jsx("div",{className:"request-details",children:l.jsxs("div",{className:"request-change",children:[l.jsxs("div",{className:"from-session",children:[l.jsx("span",{className:"label",children:"From:"}),l.jsxs("span",{className:"value",children:[W(te.originalDate)," at ",ee(te.originalTime)]})]}),l.jsx("div",{className:"arrow",children:""}),l.jsxs("div",{className:"to-session",children:[l.jsx("span",{className:"label",children:"To:"}),l.jsxs("span",{className:"value",children:[W(te.requestedDate)," at ",ee(te.requestedTime)]})]})]})}),l.jsxs("div",{className:"request-actions",children:[l.jsx("button",{className:"approve-btn",onClick:()=>O(te),disabled:x===te.id,children:x===te.id?"Processing...":"Approve"}),l.jsx("button",{className:"reject-btn",onClick:()=>Re(te),disabled:x===te.id,children:"Reject"})]})]},te.id))})]}),s==="availability"&&l.jsxs("div",{className:"availability-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Available Slots"})}),l.jsx(f4,{})]}),s==="circuits"&&l.jsxs("div",{className:"circuits-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Circuit Management"})}),l.jsx(m4,{})]})]})]})}const v4=[{value:"block",label:"Block (1-2-1)"},{value:"circuit_vip",label:"Circuit VIP"},{value:"circuit_dropin",label:"Circuit Drop-in"}];function y4(){const[s,e]=z.useState({name:"",email:"",password:"",clientType:"block",circuitAccess:!1,weeksInBlock:"",numberOfSessions:"",sessionDuration:"45",startDate:"",endDate:""}),[t,i]=z.useState(!1),[a,c]=z.useState(""),{currentUser:u,isAdmin:f,loading:p}=ws(),x=Mr();z.useEffect(()=>{!p&&(!u||!f)&&x("/")},[u,f,p,x]),z.useEffect(()=>{if(s.startDate&&s.weeksInBlock){const L=new Date(s.startDate),F=parseInt(s.weeksInBlock);if(!isNaN(F)&&F>0){const H=new Date(L);H.setDate(H.getDate()+F*7);const J=H.getFullYear(),Y=(H.getMonth()+1).toString().padStart(2,"0"),ue=H.getDate().toString().padStart(2,"0");e(K=>({...K,endDate:`${J}-${Y}-${ue}`}))}}},[s.startDate,s.weeksInBlock]);const E=L=>{const{name:F,value:H,type:J,checked:Y}=L.target;e(ue=>({...ue,[F]:J==="checkbox"?Y:H}))},C=async L=>{L.preventDefault(),c(""),i(!0);try{const F=await jx(Vf,s.email.trim().toLowerCase(),s.password);await iv(Vf);const H=s.clientType==="block",J={uid:F.user.uid,name:s.name.trim(),email:s.email.trim().toLowerCase(),clientType:s.clientType,status:"active",createdAt:ot.now()};H?(J.circuitAccess=s.circuitAccess,J.weeksInBlock=parseInt(s.weeksInBlock),J.totalSessions=parseInt(s.numberOfSessions),J.sessionsRemaining=parseInt(s.numberOfSessions),J.sessionDuration=parseInt(s.sessionDuration),J.startDate=ot.fromDate(new Date(s.startDate)),J.endDate=ot.fromDate(new Date(s.endDate))):(J.circuitStrikes=0,J.circuitBanUntil=null),await Pc(Xt(Xe,"clients"),J),x("/dashboard")}catch(F){console.error("Error adding client:",F),F.code==="auth/email-already-in-use"?c("This email is already registered."):F.code==="auth/weak-password"?c("Password should be at least 6 characters."):c("Failed to add client. Please try again."),i(!1)}},A=()=>{x("/dashboard")};if(p)return l.jsx("div",{className:"loading",children:"Loading..."});if(!u||!f)return null;const B=s.clientType==="block";return l.jsxs("div",{className:"add-client-page",children:[l.jsxs("header",{className:"page-header",children:[l.jsx("button",{className:"back-btn",onClick:A,children:" Back"}),l.jsx("h1",{children:"Add New Client"})]}),l.jsxs("main",{className:"page-content",children:[a&&l.jsx("div",{className:"form-error",children:a}),l.jsxs("form",{onSubmit:C,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Client Type"}),l.jsx("div",{className:"client-type-toggle",children:v4.map(L=>l.jsx("button",{type:"button",className:`type-btn ${s.clientType===L.value?"active":""}`,onClick:()=>e(F=>({...F,clientType:L.value})),children:L.label},L.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"name",children:"Client Name"}),l.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:E,placeholder:"John Smith",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Client Email"}),l.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:E,placeholder:"john@example.com",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Client Portal Password"}),l.jsx("input",{type:"text",id:"password",name:"password",value:s.password,onChange:E,placeholder:"Set a password for client login",minLength:"6",required:!0}),l.jsx("span",{className:"helper-text",children:"Minimum 6 characters. Share this with your client."})]}),B&&l.jsx("div",{className:"form-group",children:l.jsxs("label",{className:"circuit-toggle-label",children:[l.jsx("input",{type:"checkbox",name:"circuitAccess",checked:s.circuitAccess,onChange:E}),l.jsx("span",{children:"Also allow Circuit Class access"})]})}),B&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"weeksInBlock",children:"Weeks in Block"}),l.jsx("input",{type:"number",id:"weeksInBlock",name:"weeksInBlock",value:s.weeksInBlock,onChange:E,placeholder:"8",min:"1",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"numberOfSessions",children:"Number of Sessions"}),l.jsx("input",{type:"number",id:"numberOfSessions",name:"numberOfSessions",value:s.numberOfSessions,onChange:E,placeholder:"16",min:"1",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"sessionDuration",children:"Session Duration"}),l.jsxs("select",{id:"sessionDuration",name:"sessionDuration",value:s.sessionDuration,onChange:E,required:!0,children:[l.jsx("option",{value:"30",children:"30 minutes"}),l.jsx("option",{value:"45",children:"45 minutes"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"startDate",children:"Start Date"}),l.jsx("input",{type:"date",id:"startDate",name:"startDate",value:s.startDate,onChange:E,required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"endDate",children:"End Date (auto-calculated)"}),l.jsx("input",{type:"date",id:"endDate",name:"endDate",value:s.endDate,onChange:E,required:!0}),l.jsx("span",{className:"helper-text",children:"Calculated from start date + weeks"})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",className:"cancel-btn",onClick:A,children:"Cancel"}),l.jsx("button",{type:"submit",className:"submit-btn",disabled:t,children:t?"Saving...":"Save Client"})]})]})]})]})}const kw={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},b4=["monday","tuesday","wednesday","thursday","friday"],Pa=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},Bg=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},Bf=(s,e)=>{const t=Bg(s)+e,i=Math.floor(t/60),a=t%60;return`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},_4=s=>{const e=kw[s];if(!e)return[];const t=[];if(e.morning){let i=e.morning.start;for(;i<e.morning.end;)t.push({time:i,period:"morning"}),i=Bf(i,15)}if(e.afternoon){let i=e.afternoon.start;for(;i<e.afternoon.end;)t.push({time:i,period:"afternoon"}),i=Bf(i,15)}return t},x4=s=>{const e=s.getDay();return e>=1&&e<=5},Rw=s=>{const e=s.getDay();return e===0||e===6?null:b4[e-1]},w4=(s,e,t,i,a,c=null,u=[])=>{const f=Rw(s);if(!f)return!1;const p=Pa(s);if(a.some(Y=>Y.date===p))return!1;const x=Math.ceil(t/15);for(let Y=0;Y<x;Y++){const ue=Bf(e,Y*15);if(u.some(K=>K.date===p&&K.time===ue))return!1}const E=new Date,C=Pa(E);if(p<C)return!1;if(p===C){const Y=`${E.getHours().toString().padStart(2,"0")}:${E.getMinutes().toString().padStart(2,"0")}`;if(e<Y)return!1}const A=Bf(e,t),B=kw[f],L=B.morning&&e>=B.morning.start&&e<B.morning.end,F=B.afternoon&&e>=B.afternoon.start&&e<B.afternoon.end,H=B.morning&&A<=B.morning.end,J=B.afternoon&&A<=B.afternoon.end;if(L&&!H||F&&!J||!L&&!F)return!1;for(const Y of i){if(c&&Y.id===c||Y.date!==p)continue;const ue=Bg(Y.time),K=ue+(Y.duration||45),me=Bg(e),xe=me+t;if(me<K&&xe>ue)return!1}return!0},S4=(s,e,t,i,a=null,c=[])=>{const u=Rw(s);return u?_4(u).filter(p=>w4(s,p.time,e,t,i,a,c)):[]};function E4(){const[s,e]=z.useState([]),[t,i]=z.useState([]),[a,c]=z.useState([]),[u,f]=z.useState([]),[p,x]=z.useState([]),[E,C]=z.useState(!0),[A,B]=z.useState(null),[L,F]=z.useState(!1),[H,J]=z.useState(null),[Y,ue]=z.useState(null),[K,me]=z.useState(null),[xe,q]=z.useState([]),[V,G]=z.useState(!1),[ne,W]=z.useState([]),[ee,O]=z.useState(null),[Re,He]=z.useState(!1),[te,Se]=z.useState(0),Pe=z.useRef(null),De=z.useRef(0),Ge=z.useRef(!1),[M,se]=z.useState(null),[ie,he]=z.useState(null),[X,de]=z.useState(!1),[ye,Le]=z.useState([]),[ze,rt]=z.useState(!1),[je,Ct]=z.useState(null),[rn,Wt]=z.useState(null),{currentUser:Ut,isClient:vt,clientData:it,logout:It,loading:Mt}=ws(),{isDark:Ot,toggleTheme:br}=Kl(),xn=Mr(),Or=z.useCallback((Z,ke="info")=>{O({message:Z,type:ke}),setTimeout(()=>O(null),4e3)},[]),Lt=Z=>{const ke=Z.currentTarget,We=ke.querySelector(".ripple");We&&We.remove();const Qe=document.createElement("span"),lt=Math.max(ke.clientWidth,ke.clientHeight),ct=lt/2,_t=ke.getBoundingClientRect();Qe.style.width=Qe.style.height=`${lt}px`,Qe.style.left=`${Z.clientX-_t.left-ct}px`,Qe.style.top=`${Z.clientY-_t.top-ct}px`,Qe.classList.add("ripple"),ke.appendChild(Qe),setTimeout(()=>Qe.remove(),600)},Tr=Z=>{Pe.current&&Pe.current.scrollTop===0&&(De.current=Z.touches[0].clientY,Ge.current=!0)},Ss=Z=>{if(!Ge.current||!Pe.current)return;const We=Z.touches[0].clientY-De.current;We>20&&Pe.current.scrollTop===0&&(Z.preventDefault(),Se(Math.min((We-20)*.35,80)))},Wr=async()=>{te>55&&!Re&&(He(!0),await Yr(),Or("Refreshed!","success"),He(!1)),Se(0),Ge.current=!1},_r=(Z,ke)=>{const We=Z.touches[0];Z.currentTarget.dataset.startX=We.clientX,Z.currentTarget.dataset.startY=We.clientY},ui=(Z,ke)=>{const We=Z.touches[0],Qe=parseFloat(Z.currentTarget.dataset.startX),lt=parseFloat(Z.currentTarget.dataset.startY),ct=We.clientX-Qe,_t=We.clientY-lt;Math.abs(ct)>Math.abs(_t)&&Math.abs(ct)>10&&(Z.preventDefault(),ct<-50?se(ke):ct>50&&se(null))};z.useEffect(()=>{!Mt&&(!Ut||!vt)&&xn("/")},[Ut,vt,Mt,xn]),z.useEffect(()=>{it&&Yr()},[it]),z.useEffect(()=>{if(!E&&it){const Z=setTimeout(()=>rt(!0),300);return()=>clearTimeout(Z)}},[E,it]),z.useEffect(()=>{const Z=()=>{const We=is();if(We.length===0){Ct(null);return}const Qe=We[0],lt=new Date,_t=new Date(Qe.date+"T"+Qe.time)-lt;if(_t<=0){Ct(null);return}const On=Math.floor(_t/(1e3*60*60*24)),Zn=Math.floor(_t%(1e3*60*60*24)/(1e3*60*60)),Cr=Math.floor(_t%(1e3*60*60)/(1e3*60)),Bs=Math.floor(_t%(1e3*60)/1e3);Ct({days:On,hours:Zn,minutes:Cr,seconds:Bs,session:Qe})};Z();const ke=setInterval(Z,1e3);return()=>clearInterval(ke)},[s,E]);const Yr=async()=>{try{const Z=ji(Xt(Xe,"sessions"),li("clientId","==",it.id)),We=(await _n(Z)).docs.map(bt=>({id:bt.id,...bt.data()}));We.sort((bt,qn)=>bt.date!==qn.date?bt.date.localeCompare(qn.date):bt.time.localeCompare(qn.time)),e(We);const Qe=await _n(Xt(Xe,"sessions"));i(Qe.docs.map(bt=>({id:bt.id,...bt.data()})));const lt=await _n(Xt(Xe,"holidays"));c(lt.docs.map(bt=>({id:bt.id,...bt.data()})));const ct=await _n(Xt(Xe,"blockedTimes"));f(ct.docs.map(bt=>({id:bt.id,...bt.data()})));const _t=ji(Xt(Xe,"rescheduleRequests"),li("clientId","==",it.id)),Zn=(await _n(_t)).docs.map(bt=>({id:bt.id,...bt.data()}));W(Zn.filter(bt=>bt.status==="pending"));const Cr=Zn.filter(bt=>{if(bt.status==="pending"||!bt.respondedAt)return!1;const qn=bt.respondedAt.toDate?bt.respondedAt.toDate():new Date(bt.respondedAt),er=new Date;return er.setDate(er.getDate()-7),qn>er&&!bt.dismissed});x(Cr);const Bs=ji(Xt(Xe,"achievements"),li("clientId","==",it.id)),hi=await _n(Bs);if(!hi.empty){const bt=hi.docs[0].data().badges||[];Le(bt)}const as=new Date().toISOString().split("T")[0],di=await nl(Et(Xe,"clients",it.id));if(di.exists()){const bt=di.data();bt.dailyQuote&&bt.dailyQuote.date===as?Wt(bt.dailyQuote):Wt(null)}}catch(Z){console.error("Error fetching data:",Z)}C(!1)},Mn=Z=>new Date(Z).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),Xn=Z=>{const[ke,We]=Z.split(":"),Qe=parseInt(ke),lt=Qe>=12?"pm":"am";return`${Qe>12?Qe-12:Qe===0?12:Qe}:${We}${lt}`},Rn=Z=>Z?(Z.toDate?Z.toDate():new Date(Z)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",on=Z=>{const ke=new Date,We=Pa(ke),Qe=`${ke.getHours().toString().padStart(2,"0")}:${ke.getMinutes().toString().padStart(2,"0")}`;return Z.date<We||Z.date===We&&Z.time<Qe},Fn=Z=>{const We=Pa(new Date);return Z.date===We&&!on(Z)},ln=()=>s.filter(Z=>on(Z)).length,is=()=>s.filter(Z=>!on(Z)),Cn=Z=>{he({title:"Cancel Session?",message:`Cancel your session on ${Mn(Z.date)} at ${Xn(Z.time)}? This cannot be undone.`,onConfirm:async()=>{he(null),B(Z.id),se(null);try{await Ha(Et(Xe,"sessions",Z.id)),e(s.filter(ke=>ke.id!==Z.id)),Or("Session cancelled","success")}catch(ke){console.error("Error cancelling session:",ke),Or("Failed to cancel session. Please try again.","error")}B(null)},onCancel:()=>he(null)})},ge=async()=>{try{await It(),xn("/")}catch(Z){console.error("Failed to log out:",Z)}},Te=Z=>ne.some(ke=>ke.sessionId===Z),Je=Z=>{J(Z),ue(null),me(null),q([]),F(!0)},tt=()=>{F(!1),J(null),ue(null),me(null),q([])},yt=()=>it.endDate?it.endDate.toDate?it.endDate.toDate():new Date(it.endDate):new Date,yn=()=>{const Z=[],ke=new Date,We=yt(),Qe=new Date(ke);for(Qe.setDate(Qe.getDate()+1);Qe<=We;){if(x4(Qe)){const lt=Pa(Qe);a.some(_t=>_t.date===lt)||Z.push(new Date(Qe))}Qe.setDate(Qe.getDate()+1)}return Z},Kt=Z=>{ue(Z),me(null);const ke=H?.duration||it.sessionDuration||45;let We=S4(Z,ke,t,a,H?.id,u);H&&Pa(Z)===H.date&&(We=We.filter(Qe=>Qe.time!==H.time)),q(We)},xr=async()=>{if(!(!Y||!K||!H)){G(!0);try{await Pc(Xt(Xe,"rescheduleRequests"),{sessionId:H.id,clientId:it.id,clientName:it.name,originalDate:H.date,originalTime:H.time,requestedDate:Pa(Y),requestedTime:K,duration:H.duration,status:"pending",createdAt:ot.now(),respondedAt:null,dismissed:!1}),tt(),Or("Reschedule request submitted! You'll be notified when your trainer responds.","success"),Yr()}catch(Z){console.error("Error submitting reschedule request:",Z),Or("Failed to submit request. Please try again.","error")}G(!1)}},Jn=async Z=>{try{await lr(Et(Xe,"rescheduleRequests",Z),{dismissed:!0}),x(p.filter(ke=>ke.id!==Z))}catch(ke){console.error("Error dismissing notification:",ke)}},wn=()=>{const Z=is();if(Z.length===0)return null;const ke=Z[0],We=new Date,lt=new Date(ke.date+"T"+ke.time)-We;if(lt<=0)return null;const ct=Math.floor(lt/(1e3*60*60*24)),_t=Math.floor(lt%(1e3*60*60*24)/(1e3*60*60)),On=Math.floor(lt%(1e3*60*60)/(1e3*60));return{days:ct,hours:_t,minutes:On,session:ke}};if(Mt||E)return l.jsxs("div",{className:"client-dashboard",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("div",{className:"skeleton skeleton-logo"})})}),l.jsxs("main",{className:"client-main",children:[l.jsxs("div",{className:"skeleton-welcome",children:[l.jsx("div",{className:"skeleton skeleton-title"}),l.jsx("div",{className:"skeleton skeleton-btn-small"})]}),l.jsxs("div",{className:"skeleton-actions",children:[l.jsx("div",{className:"skeleton skeleton-btn"}),l.jsx("div",{className:"skeleton skeleton-btn"})]}),l.jsx("div",{className:"skeleton skeleton-card-large"}),l.jsx("div",{className:"skeleton skeleton-card-medium"}),l.jsx("div",{className:"skeleton skeleton-card-medium"})]})]});if(!Ut||!vt||!it)return null;const Nn=ln(),hr=it.totalSessions-Nn,pe=is(),Ue=L?yn():[];wn();const $e=it.totalSessions>0?Nn/it.totalSessions*100:0;return l.jsxs("div",{className:"client-dashboard",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("div",{className:`pull-refresh-indicator ${te>0?"visible":""} ${Re?"refreshing":""}`,style:{height:te},children:[l.jsx("div",{className:`refresh-spinner ${Re?"spinning":""}`,children:l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:l.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),l.jsx("span",{className:"refresh-text",children:Re?"Refreshing...":"Pull to refresh"})]}),l.jsxs("main",{className:"client-main page-transition-enter",ref:Pe,onTouchStart:Tr,onTouchMove:Ss,onTouchEnd:Wr,children:[l.jsxs("div",{className:"welcome-section",children:[l.jsxs("h2",{children:["Welcome, ",it.name.split(" ")[0]]}),l.jsxs("div",{className:"welcome-actions",children:[l.jsx("button",{className:"theme-toggle",onClick:br,"aria-label":Ot?"Switch to light mode":"Switch to dark mode",children:Ot?l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),l.jsx("button",{className:"logout-btn",onClick:ge,children:"Log Out"})]})]}),p.length>0&&l.jsx("div",{className:"notifications-section",children:p.map(Z=>l.jsxs("div",{className:`notification ${Z.status}`,children:[l.jsxs("div",{className:"notification-content",children:[l.jsx("span",{className:"notification-icon",children:Z.status==="approved"?"":""}),l.jsxs("div",{className:"notification-text",children:[l.jsx("strong",{children:Z.status==="approved"?"Reschedule Approved!":"Reschedule Declined"}),l.jsx("p",{children:Z.status==="approved"?`Your session has been moved to ${Mn(Z.requestedDate)} at ${Xn(Z.requestedTime)}`:`Your request to reschedule from ${Mn(Z.originalDate)} was declined. Please contact your trainer.`})]})]}),l.jsx("button",{className:"dismiss-btn",onClick:()=>Jn(Z.id),children:""})]},Z.id))}),je&&l.jsxs("div",{className:"ring-timer-container",children:[l.jsxs("div",{className:"ring-timer",children:[l.jsx("svg",{className:"ring-timer-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((Z,ke)=>{const We=(ke*6-90)*(Math.PI/180),Qe=85,lt=96,ct=100+Qe*Math.cos(We),_t=100+Qe*Math.sin(We),On=100+lt*Math.cos(We),Zn=100+lt*Math.sin(We),Bs=60-je.seconds,hi=ke<Bs;return l.jsx("line",{x1:ct,y1:_t,x2:On,y2:Zn,className:`ring-tick ${hi?"elapsed":"remaining"}`,strokeWidth:ke%5===0?"3":"2"},ke)})}),l.jsxs("div",{className:"ring-timer-center",children:[l.jsx("div",{className:"ring-timer-logo",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),l.jsxs("div",{className:"ring-timer-countdown",children:[je.days>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"timer-digit",children:String(je.days).padStart(2,"0")}),l.jsx("span",{className:"timer-colon",children:":"})]}),l.jsx("span",{className:"timer-digit",children:String(je.hours).padStart(2,"0")}),l.jsx("span",{className:"timer-colon",children:":"}),l.jsx("span",{className:"timer-digit",children:String(je.minutes).padStart(2,"0")}),l.jsx("span",{className:"timer-colon",children:":"}),l.jsx("span",{className:"timer-digit timer-seconds",children:String(je.seconds).padStart(2,"0")})]}),l.jsx("div",{className:"ring-timer-label",children:"until next session"})]})]}),l.jsxs("div",{className:"ring-timer-session-info",children:[Mn(je.session.date)," at ",Xn(je.session.time)]})]}),l.jsxs("div",{className:"block-info-card",children:[l.jsx("div",{className:"block-header-row",children:l.jsx("h3",{children:"Your Training Block"})}),l.jsxs("div",{className:"progress-section",children:[l.jsxs("div",{className:"progress-ring-container",children:[l.jsxs("svg",{className:"progress-ring",viewBox:"0 0 100 100",children:[l.jsx("circle",{className:"progress-ring-bg",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8"}),l.jsx("circle",{className:`progress-ring-fill ${ze?"animate":""}`,cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:ze?`${2*Math.PI*42*(1-$e/100)}`:`${2*Math.PI*42}`,strokeLinecap:"round"})]}),l.jsxs("div",{className:"progress-ring-text",children:[l.jsxs("span",{className:"progress-percent",children:[Math.round($e),"%"]}),l.jsx("span",{className:"progress-label",children:"complete"})]})]}),l.jsxs("div",{className:"progress-stats",children:[l.jsxs("div",{className:"progress-stat",children:[l.jsx("span",{className:"progress-stat-value",children:Nn}),l.jsx("span",{className:"progress-stat-label",children:"Completed"})]}),l.jsxs("div",{className:"progress-stat",children:[l.jsx("span",{className:"progress-stat-value",children:hr}),l.jsx("span",{className:"progress-stat-label",children:"Remaining"})]}),l.jsxs("div",{className:"progress-stat",children:[l.jsx("span",{className:"progress-stat-value",children:it.totalSessions}),l.jsx("span",{className:"progress-stat-label",children:"Total"})]})]})]}),l.jsxs("div",{className:"block-dates",children:[l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"Start Date"}),l.jsx("span",{className:"date-value",children:Rn(it.startDate)})]}),l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"End Date"}),l.jsx("span",{className:"date-value",children:Rn(it.endDate)})]}),l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"Session Duration"}),l.jsxs("span",{className:"date-value",children:[it.sessionDuration," minutes"]})]})]})]}),l.jsxs("div",{className:"quick-actions",children:[l.jsx("button",{className:"forms-btn ripple-btn",onClick:Z=>{Lt(Z),xn("/client/forms")},children:"Forms & Questionnaires"}),l.jsx("button",{className:"tools-btn ripple-btn",onClick:Z=>{Lt(Z),xn("/client/tools")},children:"Tools & Calculators"})]}),l.jsx("div",{className:"quick-actions",style:{marginTop:"-8px"},children:l.jsx("button",{className:"forms-btn ripple-btn",onClick:Z=>{Lt(Z),xn("/client/personal-bests")},style:{flex:"1 1 100%"},children:"Personal Bests & Progress"})}),ye.length>0&&l.jsxs("div",{className:"achievements-card",children:[l.jsxs("div",{className:"achievements-card-header",children:[l.jsxs("div",{className:"achievements-card-title",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),l.jsx("span",{children:"Targets Achieved"})]}),l.jsx("span",{className:"achievements-card-count",children:ye.length})]}),l.jsx("div",{className:"achievements-card-list",children:[...ye].reverse().slice(0,3).map((Z,ke)=>l.jsxs("div",{className:"achievements-card-item",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),l.jsx("span",{className:"achievements-card-label",children:Z.label}),l.jsx("span",{className:"achievements-card-date",children:Z.achievedMonth})]},ke))}),ye.length>3&&l.jsxs("button",{className:"achievements-card-viewall",onClick:()=>xn("/client/personal-bests"),children:["View all ",ye.length," achievements",l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),rn?l.jsxs("div",{className:"daily-quote-card",children:[l.jsx("div",{className:"daily-quote-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),l.jsxs("div",{className:"daily-quote-content",children:[l.jsx("div",{className:"daily-quote-text",children:rn.text}),l.jsxs("div",{className:"daily-quote-author",children:[" ",rn.author]})]})]}):l.jsxs("div",{className:"daily-quote-cta",onClick:()=>xn("/client/tools/motivation"),children:[l.jsx("div",{className:"daily-quote-cta-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),l.jsxs("div",{className:"daily-quote-cta-text",children:[l.jsx("span",{className:"daily-quote-cta-title",children:"Get More Inspiration"}),l.jsx("span",{className:"daily-quote-cta-sub",children:"Tap to get today's motivation"})]}),l.jsx("svg",{className:"daily-quote-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),l.jsxs("div",{className:"sessions-section",children:[l.jsxs("h3",{children:["Upcoming Sessions (",pe.length,")"]}),pe.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:l.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),l.jsx("line",{x1:"20",y1:"35",x2:"80",y2:"35"}),l.jsx("line",{x1:"35",y1:"15",x2:"35",y2:"35"}),l.jsx("line",{x1:"65",y1:"15",x2:"65",y2:"35"}),l.jsx("circle",{cx:"40",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),l.jsx("circle",{cx:"60",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),l.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"}),l.jsx("circle",{cx:"60",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"})]})}),l.jsx("h4",{children:"No upcoming sessions"}),l.jsx("p",{children:"Contact your trainer to book sessions"})]}):l.jsx("div",{className:"sessions-list",children:pe.map(Z=>l.jsxs("div",{className:`session-card-wrapper ${M===Z.id?"swiped":""}`,onTouchStart:ke=>_r(ke,Z.id),onTouchMove:ke=>ui(ke,Z.id),children:[l.jsxs("div",{className:"session-card-swipe-actions",children:[l.jsx("button",{className:"swipe-action-btn reschedule ripple-btn",onClick:ke=>{Lt(ke),se(null),Je(Z)},disabled:Te(Z.id),children:"Reschedule"}),l.jsx("button",{className:"swipe-action-btn cancel ripple-btn",onClick:ke=>{Lt(ke),Cn(Z)},disabled:A===Z.id,children:"Cancel"})]}),l.jsxs("div",{className:`session-card ${Fn(Z)?"today-session":""}`,onClick:()=>M===Z.id&&se(null),children:[l.jsxs("div",{className:"session-info",children:[l.jsxs("div",{className:"session-date",children:[Fn(Z)&&l.jsx("span",{className:"today-label",children:"Today - "}),Mn(Z.date)]}),l.jsxs("div",{className:"session-time",children:[Xn(Z.time)," (",Z.duration," min)"]}),Te(Z.id)&&l.jsx("div",{className:"pending-badge",children:"Reschedule pending"})]}),l.jsxs("div",{className:"session-actions",children:[l.jsx("button",{className:"reschedule-btn ripple-btn",onClick:ke=>{ke.stopPropagation(),Lt(ke),Je(Z)},disabled:Te(Z.id),children:"Reschedule"}),l.jsx("button",{className:"cancel-btn ripple-btn",onClick:ke=>{ke.stopPropagation(),Lt(ke),Cn(Z)},disabled:A===Z.id,children:A===Z.id?"Cancelling...":"Cancel"})]}),l.jsxs("div",{className:"swipe-hint",children:[l.jsx("span",{className:"swipe-hint-text",children:"Swipe"}),l.jsxs("span",{className:"swipe-hint-chevrons",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})]})]})]})]},Z.id))})]}),l.jsxs("div",{className:"completed-section",children:[l.jsxs("h3",{children:["Completed Sessions (",Nn,")"]}),Nn===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:l.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"50",cy:"50",r:"35"}),l.jsx("path",{d:"M35 50 L45 60 L65 40",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),l.jsx("path",{d:"M50 25 L50 50 L65 55",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsx("h4",{children:"No completed sessions yet"}),l.jsx("p",{children:"Your completed sessions will appear here"})]}):l.jsxs("div",{className:"sessions-list completed",children:[s.filter(Z=>on(Z)).slice(-5).reverse().map(Z=>l.jsxs("div",{className:"session-card completed",children:[l.jsxs("div",{className:"session-info",children:[l.jsx("div",{className:"session-date",children:Mn(Z.date)}),l.jsx("div",{className:"session-time",children:Xn(Z.time)})]}),l.jsx("span",{className:"completed-badge",children:"Completed"})]},Z.id)),Nn>5&&l.jsxs("div",{className:"more-sessions",children:["And ",Nn-5," more completed sessions"]})]})]})]}),L&&H&&l.jsx("div",{className:"modal-overlay",onClick:tt,children:l.jsxs("div",{className:"reschedule-modal",onClick:Z=>Z.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h3",{children:"Reschedule Session"}),l.jsx("button",{className:"close-modal-btn",onClick:tt,children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsx("div",{className:"current-session-info",children:l.jsxs("p",{children:["Current: ",l.jsx("strong",{children:Mn(H.date)})," at ",l.jsx("strong",{children:Xn(H.time)})]})}),l.jsxs("div",{className:"date-selection",children:[l.jsx("h4",{children:"Select New Date"}),Ue.length===0?l.jsx("p",{className:"no-dates",children:"No available dates within your training block"}):l.jsx("div",{className:"dates-grid",children:Ue.map((Z,ke)=>l.jsxs("button",{className:`date-btn ${Y&&Pa(Y)===Pa(Z)?"selected":""}`,onClick:()=>Kt(Z),children:[l.jsx("span",{className:"date-day",children:Z.toLocaleDateString("en-GB",{weekday:"short"})}),l.jsx("span",{className:"date-num",children:Z.getDate()}),l.jsx("span",{className:"date-month",children:Z.toLocaleDateString("en-GB",{month:"short"})})]},ke))})]}),Y&&l.jsxs("div",{className:"time-selection",children:[l.jsx("h4",{children:"Select Time"}),xe.length===0?l.jsx("p",{className:"no-slots",children:"No available slots on this date"}):l.jsx("div",{className:"times-grid",children:xe.map((Z,ke)=>l.jsx("button",{className:`time-btn ${K===Z.time?"selected":""} ${Z.period}`,onClick:()=>me(Z.time),children:Xn(Z.time)},ke))})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"cancel-modal-btn",onClick:tt,children:"Cancel"}),l.jsx("button",{className:"submit-reschedule-btn",onClick:xr,disabled:!Y||!K||V,children:V?"Submitting...":"Request Reschedule"})]})]})}),ee&&l.jsxs("div",{className:`toast-notification ${ee.type}`,children:[l.jsx("span",{className:"toast-icon",children:ee.type==="success"?l.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):ee.type==="error"?l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),l.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),l.jsx("span",{className:"toast-message",children:ee.message}),l.jsx("button",{className:"toast-close",onClick:()=>O(null),children:""})]}),ie&&l.jsx("div",{className:"confirm-modal-overlay",onClick:ie.onCancel,children:l.jsxs("div",{className:"confirm-modal",onClick:Z=>Z.stopPropagation(),children:[l.jsx("h3",{children:ie.title}),l.jsx("p",{children:ie.message}),l.jsxs("div",{className:"confirm-modal-actions",children:[l.jsx("button",{className:"confirm-cancel-btn ripple-btn",onClick:Z=>{Lt(Z),ie.onCancel()},children:"Keep Session"}),l.jsx("button",{className:"confirm-btn ripple-btn",onClick:Z=>{Lt(Z),ie.onConfirm()},children:"Yes, Cancel"})]})]})}),X&&l.jsx("div",{className:"fab-backdrop",onClick:()=>de(!1)}),l.jsxs("div",{className:`fab-container ${X?"open":""}`,children:[l.jsx("button",{className:`fab-main ripple-btn ${X?"open":""}`,onClick:Z=>{Lt(Z),de(!X)},"aria-label":"Quick actions",children:l.jsx("span",{className:"fab-icon",children:"+"})}),l.jsxs("div",{className:"fab-actions",children:[l.jsxs("button",{className:"fab-action ripple-btn",onClick:Z=>{Lt(Z),de(!1),xn("/client/tools")},children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"Tools & Calculators"]}),l.jsxs("button",{className:"fab-action ripple-btn",onClick:Z=>{Lt(Z),de(!1),xn("/client/forms")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),l.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),l.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Forms & Questionnaires"]}),l.jsxs("button",{className:"fab-action ripple-btn",onClick:Z=>{Lt(Z),de(!1),xn("/client/personal-bests")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 20V10"}),l.jsx("path",{d:"M18 20V4"}),l.jsx("path",{d:"M6 20v-4"})]}),"Personal Bests"]}),it?.circuitAccess&&l.jsxs("button",{className:"fab-action ripple-btn",onClick:Z=>{Lt(Z),de(!1),xn("/client/circuit")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M12 6v6l4 2"})]}),"Circuit Classes"]}),it?.coreBuddyAccess&&l.jsxs("button",{className:"fab-action ripple-btn",onClick:Z=>{Lt(Z),de(!1),xn("/client/core-buddy")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),"Core Buddy"]})]})]})]})}function T4(){const[s,e]=z.useState(null),[t,i]=z.useState(!1),{currentUser:a,isClient:c,clientData:u,logout:f,loading:p}=ws(),x=Mr(),[E,C]=z.useState({fitnessGoals:"",currentActivityLevel:"",exerciseHistory:"",injuries:"",medicalConditions:"",sleepHours:"",stressLevel:"",dietaryInfo:"",availability:"",additionalInfo:""}),[A,B]=z.useState({q1HeartCondition:!1,q2ChestPain:!1,q3ChestPainLastMonth:!1,q4Balance:!1,q5BoneJoint:!1,q6BloodPressure:!1,q7OtherReason:!1,additionalDetails:"",declaration:!1});z.useEffect(()=>{!p&&(!a||!c)&&x("/")},[a,c,p,x]),z.useEffect(()=>{u?.welcomeForm&&C(u.welcomeForm),u?.parqForm&&B(u.parqForm)},[u]);const L=K=>{const{name:me,value:xe}=K.target;C(q=>({...q,[me]:xe}))},F=K=>{const{name:me,type:xe,checked:q,value:V}=K.target;B(G=>({...G,[me]:xe==="checkbox"?q:V}))},H=async()=>{i(!0);try{await lr(Et(Xe,"clients",u.id),{welcomeForm:{...E,completedAt:ot.now()}}),alert("Welcome form saved successfully!"),e(null)}catch(K){console.error("Error saving welcome form:",K),alert("Failed to save form. Please try again.")}i(!1)},J=async()=>{if(!A.declaration){alert("Please confirm the declaration to submit the form.");return}i(!0);try{await lr(Et(Xe,"clients",u.id),{parqForm:{...A,completedAt:ot.now()}}),alert("PAR-Q form saved successfully!"),e(null)}catch(K){console.error("Error saving PAR-Q form:",K),alert("Failed to save form. Please try again.")}i(!1)};if(p)return l.jsx("div",{className:"client-loading",children:"Loading..."});if(!a||!c||!u)return null;const Y=!!u?.welcomeForm?.completedAt,ue=!!u?.parqForm?.completedAt;return l.jsxs("div",{className:"client-forms-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"forms-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>x("/client"),children:" Back"}),s?s==="welcome"?l.jsxs("div",{className:"form-container",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h2",{children:"Welcome Questionnaire"}),l.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),l.jsxs("div",{className:"form-body",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"What are your main fitness goals?"}),l.jsx("textarea",{name:"fitnessGoals",value:E.fitnessGoals,onChange:L,placeholder:"e.g., Lose weight, build muscle, improve endurance, increase flexibility...",rows:"3"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"How would you describe your current activity level?"}),l.jsxs("select",{name:"currentActivityLevel",value:E.currentActivityLevel,onChange:L,children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),l.jsx("option",{value:"light",children:"Lightly Active (1-2 days/week)"}),l.jsx("option",{value:"moderate",children:"Moderately Active (3-4 days/week)"}),l.jsx("option",{value:"active",children:"Very Active (5+ days/week)"}),l.jsx("option",{value:"athlete",children:"Athlete/Highly Active"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"What is your exercise history?"}),l.jsx("textarea",{name:"exerciseHistory",value:E.exerciseHistory,onChange:L,placeholder:"Describe your previous experience with exercise, sports, or training...",rows:"3"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Do you have any current or past injuries?"}),l.jsx("textarea",{name:"injuries",value:E.injuries,onChange:L,placeholder:"List any injuries that may affect your training...",rows:"2"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Do you have any medical conditions we should know about?"}),l.jsx("textarea",{name:"medicalConditions",value:E.medicalConditions,onChange:L,placeholder:"e.g., Diabetes, asthma, heart conditions...",rows:"2"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"How many hours of sleep do you typically get?"}),l.jsxs("select",{name:"sleepHours",value:E.sleepHours,onChange:L,children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"less-5",children:"Less than 5 hours"}),l.jsx("option",{value:"5-6",children:"5-6 hours"}),l.jsx("option",{value:"7-8",children:"7-8 hours"}),l.jsx("option",{value:"more-8",children:"More than 8 hours"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"How would you rate your current stress level?"}),l.jsxs("select",{name:"stressLevel",value:E.stressLevel,onChange:L,children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"low",children:"Low"}),l.jsx("option",{value:"moderate",children:"Moderate"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"very-high",children:"Very High"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Tell us about your diet/nutrition"}),l.jsx("textarea",{name:"dietaryInfo",value:E.dietaryInfo,onChange:L,placeholder:"Any dietary restrictions, typical eating habits, nutrition goals...",rows:"3"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"What is your preferred training schedule/availability?"}),l.jsx("textarea",{name:"availability",value:E.availability,onChange:L,placeholder:"Days and times that work best for you...",rows:"2"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Anything else you'd like us to know?"}),l.jsx("textarea",{name:"additionalInfo",value:E.additionalInfo,onChange:L,placeholder:"Any other information that might be helpful...",rows:"3"})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),l.jsx("button",{className:"save-btn",onClick:H,disabled:t,children:t?"Saving...":"Save"})]})]})]}):l.jsxs("div",{className:"form-container",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h2",{children:"PAR-Q Health Screening"}),l.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),l.jsxs("div",{className:"form-body",children:[l.jsx("div",{className:"parq-intro",children:l.jsx("p",{children:"The Physical Activity Readiness Questionnaire (PAR-Q) is designed to identify those who should check with a doctor before starting an exercise program."})}),l.jsxs("div",{className:"parq-questions",children:[l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q1HeartCondition",checked:A.q1HeartCondition,onChange:F}),l.jsx("span",{children:"Has your doctor ever said that you have a heart condition and that you should only do physical activity recommended by a doctor?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q2ChestPain",checked:A.q2ChestPain,onChange:F}),l.jsx("span",{children:"Do you feel pain in your chest when you do physical activity?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q3ChestPainLastMonth",checked:A.q3ChestPainLastMonth,onChange:F}),l.jsx("span",{children:"In the past month, have you had chest pain when you were not doing physical activity?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q4Balance",checked:A.q4Balance,onChange:F}),l.jsx("span",{children:"Do you lose your balance because of dizziness or do you ever lose consciousness?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q5BoneJoint",checked:A.q5BoneJoint,onChange:F}),l.jsx("span",{children:"Do you have a bone or joint problem that could be made worse by a change in your physical activity?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q6BloodPressure",checked:A.q6BloodPressure,onChange:F}),l.jsx("span",{children:"Is your doctor currently prescribing drugs for your blood pressure or heart condition?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q7OtherReason",checked:A.q7OtherReason,onChange:F}),l.jsx("span",{children:"Do you know of any other reason why you should not do physical activity?"})]})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"If you answered YES to any questions, please provide details:"}),l.jsx("textarea",{name:"additionalDetails",value:A.additionalDetails,onChange:F,placeholder:"Please explain any conditions or concerns...",rows:"4"})]}),l.jsx("div",{className:"parq-declaration",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"declaration",checked:A.declaration,onChange:F}),l.jsx("span",{children:"I have read, understood and completed this questionnaire. Any questions I had were answered to my full satisfaction. I confirm that the information provided is accurate to the best of my knowledge."})]})}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),l.jsx("button",{className:"save-btn",onClick:J,disabled:t,children:t?"Saving...":"Submit"})]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"forms-intro",children:[l.jsx("h2",{children:"Forms"}),l.jsx("p",{children:"Please complete these forms to help us better understand your fitness journey and ensure your safety."})]}),l.jsxs("div",{className:"forms-list",children:[l.jsxs("div",{className:`form-card ${Y?"completed":""}`,children:[l.jsxs("div",{className:"form-card-info",children:[l.jsx("h3",{children:"Welcome Questionnaire"}),l.jsx("p",{children:"Tell us about your fitness goals, experience, and lifestyle."}),Y&&l.jsx("span",{className:"completed-badge",children:"Completed"})]}),l.jsx("button",{onClick:()=>e("welcome"),children:Y?"View / Edit":"Start"})]}),l.jsxs("div",{className:`form-card ${ue?"completed":""}`,children:[l.jsxs("div",{className:"form-card-info",children:[l.jsx("h3",{children:"PAR-Q Health Screening"}),l.jsx("p",{children:"Physical Activity Readiness Questionnaire for your safety."}),ue&&l.jsx("span",{className:"completed-badge",children:"Completed"})]}),l.jsx("button",{onClick:()=>e("parq"),children:ue?"View / Edit":"Start"})]})]})]})]})]})}function C4(){const{currentUser:s,isClient:e,clientData:t,loading:i}=ws(),a=Mr();return z.useEffect(()=>{!i&&(!s||!e)&&a("/")},[s,e,i,a]),i?l.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/client"),children:" Back"}),l.jsxs("div",{className:"tools-intro",children:[l.jsx("h2",{children:"Tools"}),l.jsx("p",{children:"Use these tools to help plan your nutrition and stay motivated."})]}),l.jsxs("div",{className:"tools-grid",children:[l.jsxs("div",{className:"tool-select-card",onClick:()=>a("/client/tools/macros"),children:[l.jsx("div",{className:"tool-select-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M4 6h16M4 12h16M4 18h7"}),l.jsx("circle",{cx:"17",cy:"18",r:"3"}),l.jsx("path",{d:"M17 15v6M14 18h6"})]})}),l.jsxs("div",{className:"tool-select-info",children:[l.jsx("h3",{children:"Macro Calculator"}),l.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),l.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),l.jsxs("div",{className:"tool-select-card",onClick:()=>a("/client/tools/snacks"),children:[l.jsx("div",{className:"tool-select-icon snack-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M18 8h1a4 4 0 010 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),l.jsxs("div",{className:"tool-select-info",children:[l.jsx("h3",{children:"Protein Snack Generator"}),l.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),l.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),l.jsxs("div",{className:"tool-select-card",onClick:()=>a("/client/tools/motivation"),children:[l.jsx("div",{className:"tool-select-icon quote-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),l.jsxs("div",{className:"tool-select-info",children:[l.jsx("h3",{children:"Daily Motivation"}),l.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),l.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]})]})]})}function N4(){const{currentUser:s,isClient:e,clientData:t,loading:i}=ws(),a=Mr(),[c,u]=z.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",activityLevel:"moderate",goal:"maintain",deficitLevel:"moderate"}),[f,p]=z.useState(null),[x,E]=z.useState(!1);z.useEffect(()=>{!i&&(!s||!e)&&a("/")},[s,e,i,a]);const C=F=>{const{name:H,value:J}=F.target;u(Y=>({...Y,[H]:J})),E(!1)},A=()=>{let F=parseFloat(c.weight);c.weightUnit==="lbs"&&(F=F*.453592);let H;if(c.heightUnit==="cm")H=parseFloat(c.height);else{const He=parseFloat(c.heightFeet)||0,te=parseFloat(c.heightInches)||0;H=He*30.48+te*2.54}const J=parseInt(c.age);let Y;c.gender==="male"?Y=10*F+6.25*H-5*J+5:Y=10*F+6.25*H-5*J-161;const K=Y*{sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[c.activityLevel];let me=K,xe,q;switch(c.goal){case"lose":me=K-{light:250,moderate:500,harsh:750}[c.deficitLevel],xe=2.2,q=.3;break;case"build":me=K+300,xe=2,q=.22;break;default:xe=1.8,q=.25;break}const V=c.gender==="male"?1500:1200;me=Math.max(me,V);const G=Math.round(F*xe),ne=G*4,W=me*q,ee=Math.round(W/9),O=me-ne-W,Re=Math.max(0,Math.round(O/4));p({bmr:Math.round(Y),tdee:Math.round(K),targetCalories:Math.round(me),protein:G,carbs:Re,fats:ee,proteinCalories:Math.round(ne),carbCalories:Math.round(O),fatCalories:Math.round(W)}),E(!0)},B=()=>{const F=c.weight&&parseFloat(c.weight)>0,H=c.age&&parseInt(c.age)>0;let J;return c.heightUnit==="cm"?J=c.height&&parseFloat(c.height)>0:J=c.heightFeet&&parseFloat(c.heightFeet)>0||c.heightInches&&parseFloat(c.heightInches)>0,F&&H&&J},L=()=>{switch(c.goal){case"lose":return"Weight Loss";case"build":return"Muscle Building";default:return"Maintenance"}};return i?l.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/client/tools"),children:" Back to Tools"}),l.jsxs("div",{className:"tool-card",children:[l.jsxs("div",{className:"tool-header",children:[l.jsx("h3",{children:"Macro Calculator"}),l.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),l.jsxs("div",{className:"calculator-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Gender"}),l.jsxs("div",{className:"toggle-group",children:[l.jsx("button",{type:"button",className:c.gender==="male"?"active":"",onClick:()=>{u(F=>({...F,gender:"male"})),E(!1)},children:"Male"}),l.jsx("button",{type:"button",className:c.gender==="female"?"active":"",onClick:()=>{u(F=>({...F,gender:"female"})),E(!1)},children:"Female"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Age"}),l.jsx("input",{type:"number",name:"age",value:c.age,onChange:C,placeholder:"Years",min:"15",max:"100"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Weight"}),l.jsxs("div",{className:"input-with-unit",children:[l.jsx("input",{type:"number",name:"weight",value:c.weight,onChange:C,placeholder:c.weightUnit==="kg"?"kg":"lbs",min:"30",max:"300"}),l.jsxs("div",{className:"unit-toggle",children:[l.jsx("button",{type:"button",className:c.weightUnit==="kg"?"active":"",onClick:()=>{u(F=>({...F,weightUnit:"kg"})),E(!1)},children:"kg"}),l.jsx("button",{type:"button",className:c.weightUnit==="lbs"?"active":"",onClick:()=>{u(F=>({...F,weightUnit:"lbs"})),E(!1)},children:"lbs"})]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Height"}),l.jsxs("div",{className:"input-with-unit",children:[c.heightUnit==="cm"?l.jsx("input",{type:"number",name:"height",value:c.height,onChange:C,placeholder:"cm",min:"100",max:"250"}):l.jsxs("div",{className:"height-imperial",children:[l.jsx("input",{type:"number",name:"heightFeet",value:c.heightFeet,onChange:C,placeholder:"ft",min:"4",max:"7"}),l.jsx("input",{type:"number",name:"heightInches",value:c.heightInches,onChange:C,placeholder:"in",min:"0",max:"11"})]}),l.jsxs("div",{className:"unit-toggle",children:[l.jsx("button",{type:"button",className:c.heightUnit==="cm"?"active":"",onClick:()=>{u(F=>({...F,heightUnit:"cm"})),E(!1)},children:"cm"}),l.jsx("button",{type:"button",className:c.heightUnit==="ft"?"active":"",onClick:()=>{u(F=>({...F,heightUnit:"ft"})),E(!1)},children:"ft/in"})]})]})]})]}),l.jsxs("div",{className:"form-group full-width",children:[l.jsx("label",{children:"Activity Level"}),l.jsxs("select",{name:"activityLevel",value:c.activityLevel,onChange:C,children:[l.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),l.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),l.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),l.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"}),l.jsx("option",{value:"veryActive",children:"Extra Active (athlete/physical job)"})]})]}),l.jsxs("div",{className:"form-group full-width",children:[l.jsx("label",{children:"Fitness Goal"}),l.jsxs("div",{className:"goal-options",children:[l.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="lose"?"active":""}`,onClick:()=>{u(F=>({...F,goal:"lose"})),E(!1)},children:[l.jsx("span",{className:"goal-icon",children:"-"}),l.jsx("span",{children:"Lose Weight"})]}),l.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="maintain"?"active":""}`,onClick:()=>{u(F=>({...F,goal:"maintain"})),E(!1)},children:[l.jsx("span",{className:"goal-icon",children:"="}),l.jsx("span",{children:"Maintain"})]}),l.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="build"?"active":""}`,onClick:()=>{u(F=>({...F,goal:"build"})),E(!1)},children:[l.jsx("span",{className:"goal-icon",children:"+"}),l.jsx("span",{children:"Build Muscle"})]})]})]}),c.goal==="lose"&&l.jsxs("div",{className:"form-group full-width deficit-section",children:[l.jsx("label",{children:"Calorie Deficit Level"}),l.jsxs("div",{className:"deficit-options",children:[l.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="light"?"active":""}`,onClick:()=>{u(F=>({...F,deficitLevel:"light"})),E(!1)},children:[l.jsx("span",{className:"deficit-name",children:"Light"}),l.jsx("span",{className:"deficit-desc",children:"-250 cal/day"}),l.jsx("span",{className:"deficit-rate",children:"~0.5 lb/week"})]}),l.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="moderate"?"active":""}`,onClick:()=>{u(F=>({...F,deficitLevel:"moderate"})),E(!1)},children:[l.jsx("span",{className:"deficit-name",children:"Moderate"}),l.jsx("span",{className:"deficit-desc",children:"-500 cal/day"}),l.jsx("span",{className:"deficit-rate",children:"~1 lb/week"})]}),l.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="harsh"?"active":""}`,onClick:()=>{u(F=>({...F,deficitLevel:"harsh"})),E(!1)},children:[l.jsx("span",{className:"deficit-name",children:"Aggressive"}),l.jsx("span",{className:"deficit-desc",children:"-750 cal/day"}),l.jsx("span",{className:"deficit-rate",children:"~1.5 lb/week"})]})]})]}),l.jsx("button",{className:"calculate-btn",onClick:A,disabled:!B(),children:"Calculate Macros"})]}),x&&f&&(()=>{const F=f.proteinCalories+f.carbCalories+f.fatCalories,H=Math.round(f.proteinCalories/F*100),J=Math.round(f.carbCalories/F*100),Y=100-H-J;return l.jsxs("div",{className:"results-section",children:[l.jsxs("div",{className:"results-header",children:[l.jsx("h4",{children:"Your Daily Targets"}),l.jsx("span",{className:"goal-badge",children:L()})]}),l.jsxs("div",{className:"calories-display",children:[l.jsx("span",{className:"calories-value",children:f.targetCalories}),l.jsx("span",{className:"calories-label",children:"calories/day"})]}),l.jsxs("div",{className:"macro-percentage-bar",children:[l.jsxs("div",{className:"macro-bar-track",children:[l.jsx("div",{className:"macro-bar-segment protein",style:{width:`${H}%`},children:H>=12&&l.jsxs("span",{children:[H,"%"]})}),l.jsx("div",{className:"macro-bar-segment carbs",style:{width:`${J}%`},children:J>=12&&l.jsxs("span",{children:[J,"%"]})}),l.jsx("div",{className:"macro-bar-segment fats",style:{width:`${Y}%`},children:Y>=12&&l.jsxs("span",{children:[Y,"%"]})})]}),l.jsxs("div",{className:"macro-bar-legend",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot protein"}),"Protein ",H,"%"]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot carbs"}),"Carbs ",J,"%"]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot fats"}),"Fats ",Y,"%"]})]})]}),l.jsxs("div",{className:"macros-grid",children:[l.jsxs("div",{className:"macro-card protein",style:{animationDelay:"0.1s"},children:[l.jsxs("div",{className:"macro-value",children:[f.protein,"g"]}),l.jsx("div",{className:"macro-label",children:"Protein"}),l.jsxs("div",{className:"macro-calories",children:[f.proteinCalories," cal"]})]}),l.jsxs("div",{className:"macro-card carbs",style:{animationDelay:"0.2s"},children:[l.jsxs("div",{className:"macro-value",children:[f.carbs,"g"]}),l.jsx("div",{className:"macro-label",children:"Carbs"}),l.jsxs("div",{className:"macro-calories",children:[f.carbCalories," cal"]})]}),l.jsxs("div",{className:"macro-card fats",style:{animationDelay:"0.3s"},children:[l.jsxs("div",{className:"macro-value",children:[f.fats,"g"]}),l.jsx("div",{className:"macro-label",children:"Fats"}),l.jsxs("div",{className:"macro-calories",children:[f.fatCalories," cal"]})]})]}),l.jsxs("div",{className:"results-info",children:[l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Basal Metabolic Rate (BMR)"}),l.jsxs("span",{className:"info-value",children:[f.bmr," cal"]})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Total Daily Energy Expenditure (TDEE)"}),l.jsxs("span",{className:"info-value",children:[f.tdee," cal"]})]})]}),l.jsx("div",{className:"results-note",children:l.jsx("p",{children:"These are estimated values. Individual results may vary based on metabolism, body composition, and other factors. Consult with your trainer for personalized guidance."})})]})})()]})]})]})}const w_=[{name:"Greek Yoghurt & Honey",protein:20,calories:180,prep:0,category:"no-prep",instructions:"Grab a pot of Greek yoghurt, drizzle with honey. Done. Go for full-fat or 0% depending on your macros."},{name:"Protein Bar",protein:20,calories:220,prep:0,category:"no-prep",instructions:"Unwrap and eat. Keep one in your bag for emergencies. Look for bars with 20g+ protein and under 5g sugar."},{name:"Beef Jerky",protein:15,calories:120,prep:0,category:"no-prep",instructions:"Open the pack and snack. Great for on the go. Check the label  some brands are loaded with sugar."},{name:"Handful of Almonds",protein:7,calories:170,prep:0,category:"no-prep",instructions:"Grab about 30g (roughly 23 almonds). Good fats and protein. Keep a bag at your desk or in your car."},{name:"Boiled Eggs (x2)",protein:12,calories:140,prep:0,category:"no-prep",instructions:"Batch boil at the start of the week  10 mins in boiling water, cool in ice water, peel and store in the fridge. Grab 2 when you need them."},{name:"String Cheese (x2)",protein:14,calories:160,prep:0,category:"no-prep",instructions:"Peel and eat. Keep a few in the fridge for quick grabs. Pair with some fruit if you want extra carbs."},{name:"Cottage Cheese Pot",protein:14,calories:110,prep:0,category:"no-prep",instructions:"Eat straight from the pot. Add a pinch of salt and pepper, or keep it sweet with a drizzle of honey."},{name:"Edamame Beans",protein:11,calories:120,prep:0,category:"no-prep",instructions:"Buy pre-cooked and shelled from the supermarket. Sprinkle with sea salt or chilli flakes. Eat cold or warm in the microwave for 1 min."},{name:"Turkey Slices (50g)",protein:12,calories:60,prep:0,category:"no-prep",instructions:"Straight from the pack. Roll up a few slices on their own or wrap around some cheese for extra protein."},{name:"Roasted Chickpeas",protein:10,calories:160,prep:0,category:"no-prep",instructions:"Buy a bag of roasted chickpeas or make a batch: drain tinned chickpeas, toss in oil and spices, roast at 200C for 25 mins. Store in a jar."},{name:"Protein Shake & Banana",protein:30,calories:280,prep:1,category:"quick",instructions:"Add one scoop of protein powder to 300ml water or milk in a shaker. Shake for 10 seconds. Eat a banana on the side."},{name:"Peanut Butter on Rice Cakes",protein:14,calories:260,prep:1,category:"quick",instructions:"Spread 1-2 tablespoons of peanut butter across 2 rice cakes. Top with sliced banana or a drizzle of honey if you want."},{name:"Greek Yoghurt & Granola",protein:22,calories:300,prep:1,category:"quick",instructions:"Scoop Greek yoghurt into a bowl. Top with a handful of granola and some berries. Use high-protein granola if you can find it."},{name:"Turkey & Cream Cheese Roll-Ups",protein:18,calories:180,prep:2,category:"quick",instructions:"Lay out 3-4 turkey slices. Spread a thin layer of cream cheese on each. Roll them up. Add cucumber or spinach inside for crunch."},{name:"Cottage Cheese & Pineapple",protein:15,calories:160,prep:1,category:"quick",instructions:"Scoop cottage cheese into a bowl, top with tinned or fresh pineapple chunks. The sweet and savoury combo works surprisingly well."},{name:"Ham & Cheese Wrap",protein:22,calories:320,prep:2,category:"quick",instructions:"Lay a tortilla flat. Add 2-3 ham slices and a slice of cheese. Add lettuce or spinach if you have it. Roll up tight and eat."},{name:"Tuna & Crackers",protein:20,calories:220,prep:2,category:"quick",instructions:"Drain a small tin of tuna, mix with a squeeze of lemon and black pepper. Spoon onto 4-5 crackers. Add hot sauce if you like it."},{name:"Protein Yoghurt Bowl",protein:25,calories:250,prep:1,category:"quick",instructions:"Mix a scoop of protein powder into Greek yoghurt until smooth. Top with berries, nuts, or a drizzle of honey."},{name:"Hummus & Veggie Sticks",protein:8,calories:180,prep:1,category:"quick",instructions:"Grab a pot of hummus and chop up carrots, cucumber, and peppers into sticks. Dip and eat. Simple."},{name:"Chocolate Milk (500ml)",protein:17,calories:340,prep:1,category:"quick",instructions:"Pour 500ml milk, stir in 2 tablespoons of chocolate protein powder or cocoa. Great post-workout  the carbs help recovery."},{name:"Peanut Butter & Apple Slices",protein:10,calories:250,prep:1,category:"quick",instructions:"Slice an apple into wedges. Dip into 1-2 tablespoons of peanut butter. Sweet, crunchy, and filling."},{name:"Overnight Oats (pre-made)",protein:18,calories:310,prep:1,category:"quick",instructions:"Prep the night before: mix 50g oats, 1 scoop protein powder, 150ml milk, and a handful of berries in a jar. Refrigerate overnight. Grab and eat cold."},{name:"Smoked Salmon on Crackers",protein:16,calories:200,prep:2,category:"quick",instructions:"Lay out 4-5 crackers. Top each with a slice of smoked salmon and a small squeeze of lemon. Add cream cheese if you want extra."},{name:"Protein Smoothie Bowl",protein:28,calories:350,prep:2,category:"quick",instructions:"Blend 1 scoop protein powder, 1 frozen banana, and a splash of milk until thick. Pour into a bowl. Top with granola, berries, and seeds."},{name:"Almond Butter & Banana Toast",protein:12,calories:280,prep:2,category:"quick",instructions:"Toast a slice of wholemeal bread. Spread with almond butter. Slice half a banana on top. Sprinkle with cinnamon."},{name:"Scrambled Eggs on Toast",protein:22,calories:320,prep:4,category:"cook",instructions:"Crack 3 eggs into a pan on medium-low heat. Stir continuously with a spatula until just set  keep them soft. Season with salt and pepper, serve on wholemeal toast."},{name:"Protein Pancake Mug Cake",protein:25,calories:280,prep:3,category:"cook",instructions:"Mix 1 scoop protein powder, 1 egg, and 2 tablespoons of oats in a mug. Microwave for 90 seconds. Top with peanut butter or berries."},{name:"Tuna Mayo on Toast",protein:24,calories:340,prep:3,category:"cook",instructions:"Drain a tin of tuna, mix with 1 tablespoon of light mayo, salt, pepper, and a squeeze of lemon. Toast 2 slices of bread. Pile the tuna on top."},{name:"Egg & Cheese Muffin",protein:18,calories:300,prep:4,category:"cook",instructions:"Fry or microwave an egg. Toast an English muffin. Layer the egg with a slice of cheese and optionally a slice of ham. Press together."},{name:"Chicken Quesadilla",protein:26,calories:380,prep:5,category:"cook",instructions:"Use leftover chicken or pre-cooked slices. Lay a tortilla in a dry pan on medium heat. Add chicken and grated cheese on one half. Fold over, cook 2 mins each side until golden and melted."},{name:"Beans on Toast",protein:16,calories:340,prep:3,category:"cook",instructions:"Heat a tin of baked beans in the microwave for 2 mins, stirring halfway. Toast 2 slices of wholemeal bread. Pour beans on top. Add grated cheese for extra protein."},{name:"Omelette (2 eggs)",protein:14,calories:180,prep:4,category:"cook",instructions:"Beat 2 eggs with salt and pepper. Pour into a hot, lightly oiled pan. Swirl to cover the base. Add fillings (cheese, ham, peppers) when the edges set. Fold in half and serve."},{name:"Protein Porridge",protein:28,calories:380,prep:4,category:"cook",instructions:"Cook 50g oats with 250ml milk in a pan or microwave (3 mins). Stir in 1 scoop of protein powder once it cools slightly. Top with banana and a drizzle of honey."},{name:"Cheese Toastie",protein:16,calories:350,prep:3,category:"cook",instructions:"Butter the outside of 2 slices of bread. Place cheese (and ham if you have it) between the unbuttered sides. Cook in a dry pan on medium heat, 2 mins each side until golden."},{name:"Egg Fried Rice (leftover rice)",protein:16,calories:360,prep:5,category:"cook",instructions:"Heat a splash of oil in a pan on high heat. Add leftover cold rice and stir-fry for 2 mins. Push to one side, crack in 2 eggs and scramble. Mix together, add soy sauce to taste."}];function A4(){const{currentUser:s,isClient:e,clientData:t,loading:i}=ws(),a=Mr(),[c,u]=z.useState(null),[f,p]=z.useState("all"),[x,E]=z.useState(!1),C=z.useRef([]);z.useEffect(()=>{!i&&(!s||!e)&&a("/")},[s,e,i,a]);const A=H=>{const J=[...H];for(let Y=J.length-1;Y>0;Y--){const ue=Math.floor(Math.random()*(Y+1));[J[Y],J[ue]]=[J[ue],J[Y]]}return J},B=()=>{const H=f==="all"?w_:w_.filter(J=>J.category===f);C.current.length===0&&(C.current=A(H)),E(!0),setTimeout(()=>{const J=C.current.pop();u(J),E(!1)},300)},L=H=>H===0?"No prep":`${H} min`,F=H=>{switch(H){case"no-prep":return"Grab & Go";case"quick":return"Quick Prep";case"cook":return"Light Cook";default:return H}};return i?l.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/client/tools"),children:" Back to Tools"}),l.jsxs("div",{className:"tool-card",children:[l.jsxs("div",{className:"tool-header",children:[l.jsx("h3",{children:"Protein Snack Generator"}),l.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),l.jsxs("div",{className:"snack-generator",children:[l.jsx("div",{className:"snack-filters",children:[{value:"all",label:"All"},{value:"no-prep",label:"Grab & Go"},{value:"quick",label:"Quick Prep"},{value:"cook",label:"Light Cook"}].map(H=>l.jsx("button",{className:`snack-filter-btn ${f===H.value?"active":""}`,onClick:()=>{p(H.value),u(null),C.current=[]},children:H.label},H.value))}),c&&!x&&l.jsxs("div",{className:"snack-result",children:[l.jsx("div",{className:"snack-name",children:c.name}),l.jsxs("div",{className:"snack-details",children:[l.jsxs("div",{className:"snack-detail",children:[l.jsxs("span",{className:"snack-detail-value",children:[c.protein,"g"]}),l.jsx("span",{className:"snack-detail-label",children:"Protein"})]}),l.jsxs("div",{className:"snack-detail",children:[l.jsx("span",{className:"snack-detail-value",children:c.calories}),l.jsx("span",{className:"snack-detail-label",children:"Calories"})]}),l.jsxs("div",{className:"snack-detail",children:[l.jsx("span",{className:"snack-detail-value",children:L(c.prep)}),l.jsx("span",{className:"snack-detail-label",children:"Prep Time"})]})]}),l.jsxs("div",{className:"snack-prep-indicator",children:[l.jsx("div",{className:`prep-dot ${c.category==="no-prep"||c.category==="quick"||c.category==="cook"?"active":""}`}),l.jsx("div",{className:`prep-dot ${c.category==="quick"||c.category==="cook"?"active":""}`}),l.jsx("div",{className:`prep-dot ${c.category==="cook"?"active":""}`}),l.jsx("span",{className:"prep-indicator-label",children:F(c.category)})]}),l.jsxs("div",{className:"snack-instructions",children:[l.jsx("div",{className:"snack-instructions-label",children:"How to make it"}),l.jsx("p",{children:c.instructions})]})]}),x&&l.jsx("div",{className:"snack-result shuffling",children:l.jsx("div",{className:"snack-shuffle-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"})})})}),l.jsx("button",{className:"snack-generate-btn",onClick:B,children:c?"Give Me Another":"Give Me a Snack"})]})]})]})]})}const ng=[{text:"The only bad workout is the one that didn't happen.",author:"Unknown"},{text:"Your body can stand almost anything. It's your mind that you have to convince.",author:"Unknown"},{text:"Discipline is choosing between what you want now and what you want most.",author:"Abraham Lincoln"},{text:"The pain you feel today will be the strength you feel tomorrow.",author:"Unknown"},{text:"Don't wish for it. Work for it.",author:"Unknown"},{text:"Success isn't always about greatness. It's about consistency.",author:"Dwayne Johnson"},{text:"The harder you work, the luckier you get.",author:"Gary Player"},{text:"Fall seven times, stand up eight.",author:"Japanese Proverb"},{text:"What seems impossible today will one day become your warm-up.",author:"Unknown"},{text:"You don't have to be extreme, just consistent.",author:"Unknown"},{text:"Strength does not come from the body. It comes from the will.",author:"Unknown"},{text:"The only way to define your limits is by going beyond them.",author:"Arthur C. Clarke"},{text:"Motivation gets you started. Habit keeps you going.",author:"Jim Ryun"},{text:"If it doesn't challenge you, it doesn't change you.",author:"Fred DeVito"},{text:"Progress, not perfection.",author:"Unknown"},{text:"The best project you'll ever work on is you.",author:"Unknown"},{text:"A year from now you'll wish you had started today.",author:"Karen Lamb"},{text:"You are one workout away from a good mood.",author:"Unknown"},{text:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{text:"The body achieves what the mind believes.",author:"Unknown"},{text:"Small daily improvements are the key to staggering long-term results.",author:"Unknown"},{text:"It's not about having time. It's about making time.",author:"Unknown"},{text:"Sore today, strong tomorrow.",author:"Unknown"},{text:"Champions keep playing until they get it right.",author:"Billie Jean King"},{text:"Be stronger than your excuses.",author:"Unknown"},{text:"When you feel like quitting, think about why you started.",author:"Unknown"},{text:"The difference between try and triumph is a little umph.",author:"Marvin Phillips"},{text:"Your only limit is you.",author:"Unknown"},{text:"Believe you can and you're halfway there.",author:"Theodore Roosevelt"},{text:"Making excuses burns zero calories per hour.",author:"Unknown"},{text:"Results happen over time, not overnight. Work hard, stay consistent, and be patient.",author:"Unknown"},{text:"You don't find willpower, you create it.",author:"Unknown"},{text:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{text:"Sweat is just fat crying.",author:"Unknown"},{text:"Today I will do what others won't, so tomorrow I can do what others can't.",author:"Jerry Rice"},{text:"The only person you are destined to become is the person you decide to be.",author:"Ralph Waldo Emerson"},{text:"Don't count the days, make the days count.",author:"Muhammad Ali"},{text:"It never gets easier, you just get stronger.",author:"Unknown"},{text:"Suffer the pain of discipline or suffer the pain of regret.",author:"Jim Rohn"},{text:"Strive for progress, not perfection.",author:"Unknown"},{text:"Your health is an investment, not an expense.",author:"Unknown"},{text:"Action is the foundational key to all success.",author:"Pablo Picasso"},{text:"Good things come to those who sweat.",author:"Unknown"},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"No matter how slow you go, you're still lapping everyone on the couch.",author:"Unknown"},{text:"Train insane or remain the same.",author:"Unknown"},{text:"The hardest step is the first one out the door.",author:"Unknown"},{text:"Work hard in silence, let your results be the noise.",author:"Frank Ocean"},{text:"Every champion was once a contender who refused to give up.",author:"Rocky Balboa"},{text:"Take care of your body. It's the only place you have to live.",author:"Jim Rohn"},{text:"Energy and persistence conquer all things.",author:"Benjamin Franklin"},{text:"The mind is the most important muscle.",author:"Unknown"},{text:"You are stronger than you think.",author:"Unknown"},{text:"Obsessed is a word the lazy use to describe the dedicated.",author:"Unknown"},{text:"The only weight you need to lose is the weight of your doubts.",author:"Unknown"}];function j4(){const{currentUser:s,isClient:e,clientData:t,loading:i}=ws(),a=Mr(),[c,u]=z.useState(null),[f,p]=z.useState(!0),[x,E]=z.useState(!1);z.useEffect(()=>{!i&&(!s||!e)&&a("/")},[s,e,i,a]),z.useEffect(()=>{t&&C()},[t]);const C=async()=>{try{const B=new Date().toISOString().split("T")[0],L=Et(Xe,"clients",t.id),F=await nl(L);if(F.exists()){const H=F.data();H.dailyQuote&&H.dailyQuote.date===B&&u(H.dailyQuote)}}catch(B){console.error("Error loading daily quote:",B)}p(!1)},A=async()=>{if(c)return;E(!0);const B=new Date().toISOString().split("T")[0];let L=[];try{const K=await nl(Et(Xe,"clients",t.id));K.exists()&&(L=K.data().quoteUsedIndices||[])}catch{}L.length>=ng.length&&(L=[]);const F=ng.map((K,me)=>me).filter(K=>!L.includes(K)),H=Math.floor(Math.random()*F.length),J=F[H],Y=ng[J],ue={text:Y.text,author:Y.author,date:B};try{await Va(Et(Xe,"clients",t.id),{dailyQuote:ue,quoteUsedIndices:[...L,J]},{merge:!0}),setTimeout(()=>{u(ue),E(!1)},300)}catch(K){console.error("Error saving daily quote:",K),E(!1)}};return i?l.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/client/tools"),children:" Back to Tools"}),l.jsxs("div",{className:"tool-card",children:[l.jsxs("div",{className:"tool-header",children:[l.jsx("h3",{children:"Daily Motivation"}),l.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),l.jsxs("div",{className:"quote-generator",children:[f?l.jsxs("div",{className:"quote-skeleton",children:[l.jsx("div",{className:"skeleton-icon"}),l.jsx("div",{className:"skeleton-line long"}),l.jsx("div",{className:"skeleton-line medium"}),l.jsx("div",{className:"skeleton-line short"})]}):c?l.jsxs("div",{className:"quote-result",children:[l.jsx("div",{className:"quote-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),l.jsx("div",{className:"quote-text",children:c.text}),l.jsxs("div",{className:"quote-author",children:[" ",c.author]}),l.jsx("div",{className:"quote-date-note",children:"Your inspiration for today"})]}):x?l.jsx("div",{className:"quote-result shuffling",children:l.jsx("div",{className:"quote-shuffle-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M12 6v6l4 2"})]})})}):l.jsxs("div",{className:"quote-empty",children:[l.jsx("div",{className:"quote-empty-graphic",children:l.jsxs("svg",{viewBox:"0 0 80 80",fill:"none",children:[l.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"var(--border-color)",strokeWidth:"2",strokeDasharray:"4 4"}),l.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",fill:"var(--color-primary)",opacity:"0.2"}),l.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",stroke:"var(--color-primary)",strokeWidth:"1.5"})]})}),l.jsx("h4",{className:"quote-empty-title",children:"Your Daily Inspiration"}),l.jsx("p",{children:"Tap below to reveal today's motivational quote  a new one every day to keep you going."})]}),!c&&!f&&l.jsx("button",{className:"quote-generate-btn",onClick:A,disabled:x,children:x?"Finding your quote...":"Get Inspired"})]})]})]})]})}const Ti=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],Ml=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function k4(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Ci(s){const[e,t]=s.split("-");return new Date(parseInt(e),parseInt(t)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function ef(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),t=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(t).toFixed(0)}s`:`${parseFloat(t).toFixed(2)}s`}function S_(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function Rc(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function rg(s,e){return!e||e===0?null:(s-e)/e*100}function R4({data:s,exerciseKey:e,unit:t}){if(!s||s.length<2)return l.jsx("div",{className:"pb-trend-empty",children:l.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(F=>{const H=F.benchmarks?.[e];return H?t==="time"?H.time||0:(H.weight||0)*(H.reps||0):0}),a=Math.max(...i),c=Math.min(...i),u=a-c||1,f=300,p=100,x=20,E=f-x*2,C=p-x*2,A=i.map((F,H)=>{const J=x+H/(i.length-1)*E,Y=x+C-(F-c)/u*C;return{x:J,y:Y,value:F}}),B=A.map((F,H)=>`${H===0?"M":"L"} ${F.x} ${F.y}`).join(" "),L=B+` L ${A[A.length-1].x} ${x+C} L ${A[0].x} ${x+C} Z`;return l.jsxs("div",{className:"pb-trend-chart",children:[l.jsxs("svg",{viewBox:`0 0 ${f} ${p}`,preserveAspectRatio:"xMidYMid meet",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),l.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),l.jsx("path",{d:L,fill:"url(#trendGradient)"}),l.jsx("path",{d:B,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),A.map((F,H)=>l.jsx("circle",{cx:F.x,cy:F.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},H))]}),l.jsx("div",{className:"pb-trend-labels",children:s.map((F,H)=>l.jsxs("span",{className:"pb-trend-label",children:[F.month.split("-")[1],"/",F.month.split("-")[0].slice(2)]},H))})]})}function D4(){const[s,e]=z.useState("bests"),[t,i]=z.useState([]),[a,c]=z.useState(!0),[u,f]=z.useState(!1),[p,x]=z.useState(0),[E,C]=z.useState(!1),[A,B]=z.useState(!1),[L,F]=z.useState(!1),[H,J]=z.useState({}),[Y,ue]=z.useState({}),[K,me]=z.useState({}),[xe,q]=z.useState({}),[V,G]=z.useState({}),[ne,W]=z.useState(!1),[ee,O]=z.useState({}),[Re,He]=z.useState([]),[te,Se]=z.useState(null),[Pe,De]=z.useState(null),[Ge,M]=z.useState(!1),[se,ie]=z.useState(""),[he,X]=z.useState(""),de=z.useRef(null),ye=z.useRef(0),Le=z.useRef(0),{currentUser:ze,isClient:rt,clientData:je,loading:Ct}=ws(),{isDark:rn}=Kl(),Wt=Mr(),Ut=z.useCallback((pe,Ue="info")=>{De({message:pe,type:Ue}),setTimeout(()=>De(null),4e3)},[]);z.useEffect(()=>{!Ct&&(!ze||!rt)&&Wt("/")},[ze,rt,Ct,Wt]),z.useEffect(()=>{je&&vt()},[je]);const vt=async()=>{try{const pe=ji(Xt(Xe,"personalBests"),li("clientId","==",je.id)),$e=(await _n(pe)).docs.map(lt=>({id:lt.id,...lt.data()}));$e.sort((lt,ct)=>lt.month.localeCompare(ct.month)),i($e);const Z=ji(Xt(Xe,"personalBestTargets"),li("clientId","==",je.id)),ke=await _n(Z);if(!ke.empty){const lt=ke.docs[0].data();me(lt.targets||{}),q(lt.metricTargets||{}),G(lt.targets||{}),O(lt.metricTargets||{})}const We=ji(Xt(Xe,"achievements"),li("clientId","==",je.id)),Qe=await _n(We);Qe.empty||He(Qe.docs[0].data().badges||[])}catch(pe){console.error("Error fetching personal bests:",pe)}c(!1)},it=k4(),It=t.find(pe=>pe.month===it),Mt=t.filter(pe=>pe.month<it),Ot=Mt.length>0?Mt[Mt.length-1]:null;z.useEffect(()=>{It?(J(It.benchmarks||{}),ue(It.bodyMetrics||{})):(J({}),ue({}))},[It?.id]);const br=async(pe,Ue)=>{const $e=[];if(pe==="strength"?Ti.forEach(Z=>{const ke=K[Z.key];if(!ke||!ke.targetValue)return;const We=Ue[Z.key];if(!We)return;let Qe=0;ke.targetType==="weight"?Qe=We.weight||0:ke.targetType==="reps"?Qe=We.reps||0:ke.targetType==="time"&&(Qe=We.time||0);const lt=ke.startValue||0,ct=ke.targetValue,_t=ct-lt;if((_t===0?Qe>=ct?1:0:Math.max(0,(Qe-lt)/_t))>=1&&!Re.some(Cr=>Cr.type==="strength"&&Cr.key===Z.key&&Cr.targetValue===ct)){const Cr=ke.targetType==="weight"?"kg":ke.targetType==="reps"?" reps":"s";$e.push({type:"strength",key:Z.key,targetType:ke.targetType,targetValue:ct,achievedMonth:it,label:`${Z.name} ${ct}${Cr}`})}}):Ml.forEach(Z=>{const ke=xe[Z.key];if(!ke||!ke.targetValue)return;const We=Ue[Z.key];if(We==null)return;const Qe=ke.startValue||0,lt=ke.targetValue,ct=lt-Qe;(ct===0?We===lt?1:0:Math.max(0,(We-Qe)/ct))>=1&&(Re.some(Zn=>Zn.type==="metric"&&Zn.key===Z.key&&Zn.targetValue===lt)||$e.push({type:"metric",key:Z.key,targetValue:lt,achievedMonth:it,label:`${Z.name} ${lt}${Z.suffix}`}))}),$e.length>0){const Z=[...Re,...$e];await Va(Et(Xe,"achievements",je.id),{clientId:je.id,badges:Z,updatedAt:ot.now()}),He(Z),Se($e),setTimeout(()=>Se(null),5e3)}},xn=(pe,Ue)=>{if(pe==="strength"){const $e=K[Ue];return!$e||!$e.targetValue?!1:Re.some(Z=>Z.type==="strength"&&Z.key===Ue&&Z.targetValue===$e.targetValue)}else{const $e=xe[Ue];return!$e||!$e.targetValue?!1:Re.some(Z=>Z.type==="metric"&&Z.key===Ue&&Z.targetValue===$e.targetValue)}},Or=async()=>{f(!0);try{const pe=`${je.id}_${it}`,Ue=It||{};await Va(Et(Xe,"personalBests",pe),{clientId:je.id,month:it,benchmarks:H,bodyMetrics:Ue.bodyMetrics||Y||{},createdAt:Ue.createdAt||ot.now(),updatedAt:ot.now()}),await br("strength",H),Ut("Benchmarks saved!","success"),C(!1),await vt()}catch(pe){console.error("Error saving benchmarks:",pe),Ut("Failed to save. Please try again.","error")}f(!1)},Lt=async()=>{f(!0);try{const pe=`${je.id}_${it}`,Ue=It||{};await Va(Et(Xe,"personalBests",pe),{clientId:je.id,month:it,benchmarks:Ue.benchmarks||H||{},bodyMetrics:Y,createdAt:Ue.createdAt||ot.now(),updatedAt:ot.now()}),await br("metric",Y),Ut("Body metrics saved!","success"),B(!1),await vt()}catch(pe){console.error("Error saving metrics:",pe),Ut("Failed to save. Please try again.","error")}f(!1)},Tr=(pe,Ue,$e)=>{J(Z=>({...Z,[pe]:{...Z[pe],[Ue]:$e===""?"":parseFloat($e)}}))},Ss=(pe,Ue)=>{ue($e=>({...$e,[pe]:Ue===""?"":parseFloat(Ue)}))},Wr=(pe,Ue,$e)=>{G(Z=>({...Z,[pe]:{...Z[pe],[Ue]:Ue==="targetType"?$e:$e===""?"":parseFloat($e)}}))},_r=async()=>{f(!0);try{const pe=`targets_${je.id}`,Ue=It?.benchmarks||{},$e={};Ti.forEach(Z=>{if(V[Z.key]?.targetValue){const ke=V[Z.key].targetType||(Z.unit==="time"?"time":"weight");let We=0;const Qe=Ue[Z.key];Qe&&(ke==="weight"?We=Qe.weight||0:ke==="reps"?We=Qe.reps||0:ke==="time"&&(We=Qe.time||0)),$e[Z.key]={targetType:ke,targetValue:V[Z.key].targetValue,startValue:We}}}),await Va(Et(Xe,"personalBestTargets",pe),{clientId:je.id,targets:$e,metricTargets:xe,updatedAt:ot.now()}),me($e),G($e),Ut("Targets saved!","success"),F(!1)}catch(pe){console.error("Error saving targets:",pe),Ut("Failed to save targets.","error")}f(!1)},ui=(pe,Ue)=>{O($e=>({...$e,[pe]:{...$e[pe],targetValue:Ue===""?"":parseFloat(Ue)}}))},Yr=async()=>{f(!0);try{const pe=`targets_${je.id}`,Ue={};Ml.forEach($e=>{if(ee[$e.key]?.targetValue){const Z=It?.bodyMetrics?.[$e.key]||0;Ue[$e.key]={targetValue:ee[$e.key].targetValue,startValue:Z}}}),await Va(Et(Xe,"personalBestTargets",pe),{clientId:je.id,targets:K,metricTargets:Ue,updatedAt:ot.now()}),q(Ue),O(Ue),Ut("Metric targets saved!","success"),W(!1)}catch(pe){console.error("Error saving metric targets:",pe),Ut("Failed to save targets.","error")}f(!1)},Mn=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){f(!0);try{const pe=Et(Xe,"personalBestTargets",`targets_${je.id}`);await Ha(pe),me({}),q({}),G({}),O({}),Ut("All goals have been reset","success")}catch(pe){console.error("Error resetting targets:",pe),Ut("Failed to reset goals","error")}f(!1)}},Xn=(pe,Ue)=>{const $e=K[pe];if(!$e||!$e.targetValue||!Ue)return null;const Z=$e.startValue||0,ke=$e.targetValue;let We=0;$e.targetType==="weight"?We=Ue.weight||0:$e.targetType==="reps"?We=Ue.reps||0:$e.targetType==="time"&&(We=Ue.time||0);const Qe=ke-Z;return Qe<=0?We>=ke?1:0:Math.max(0,Math.min((We-Z)/Qe,1))},Rn=pe=>{const Ue=xe[pe];if(!Ue||!Ue.targetValue)return null;const $e=It?.bodyMetrics?.[pe];if($e==null)return null;const Z=Ue.startValue||0,ke=Ue.targetValue,We=ke-Z;return We===0?$e===ke?1:0:Math.max(0,Math.min(($e-Z)/We,1))},on=pe=>{ye.current=pe.touches[0].clientX,Le.current=0},Fn=pe=>{Le.current=pe.touches[0].clientX-ye.current},ln=()=>{Le.current<-50&&p<Ti.length-1?x(pe=>pe+1):Le.current>50&&p>0&&x(pe=>pe-1),Le.current=0},is=pe=>{const Ue=It?.bodyMetrics?.[pe],$e=Ot?.bodyMetrics?.[pe];return Ue==null||$e==null?null:parseFloat((Ue-$e).toFixed(2))},Cn=t.find(pe=>pe.month===se),ge=t.find(pe=>pe.month===he);if(Ct||a)return l.jsxs("div",{className:"pb-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"pb-main",children:[l.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),l.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!ze||!rt||!je)return null;const Te=Ti[p],Je=It?.benchmarks?.[Te.key],tt=Ot?.benchmarks?.[Te.key],yt=Rc(Te,Je),yn=Rc(Te,tt),Kt=rg(yt,yn),xr=Xn(Te.key,Je),Jn=xr!==null,wn=xr!==null&&xr>=1,Nn=Jn?Math.round(xr*60):yt>0?15:0,hr=K[Te.key];return l.jsxs("div",{className:"pb-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"pb-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>Wt(-1),children:" Back"}),l.jsxs("div",{className:"pb-intro",children:[l.jsx("h2",{children:"Personal Bests"}),l.jsx("p",{children:"Track your strength benchmarks and body measurements each month."})]}),l.jsxs("div",{className:"pb-tabs",children:[l.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),l.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),l.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&l.jsxs("div",{className:"pb-strength-section",children:[!E&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-carousel",ref:de,onTouchStart:on,onTouchMove:Fn,onTouchEnd:ln,children:[l.jsx("div",{className:"pb-ring-container",children:l.jsxs("div",{className:"pb-ring",children:[l.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((pe,Ue)=>{const $e=(Ue*6-90)*(Math.PI/180),Z=85,ke=96,We=100+Z*Math.cos($e),Qe=100+Z*Math.sin($e),lt=100+ke*Math.cos($e),ct=100+ke*Math.sin($e),_t=Ue<Math.round(Nn);return l.jsx("line",{x1:We,y1:Qe,x2:lt,y2:ct,className:`pb-ring-tick ${_t?wn?"hit":"filled":"empty"}`,strokeWidth:Ue%5===0?"3":"2"},Ue)})}),l.jsxs("div",{className:"pb-ring-center",children:[l.jsx("div",{className:"pb-ring-category",children:Te.category}),l.jsxs("div",{className:"pb-ring-exercise",children:[Te.name,xn("strength",Te.key)&&l.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),l.jsx("div",{className:"pb-ring-value",children:Je?Te.unit==="time"?ef(Je.time):S_(Je.weight,Je.reps):"-"}),Kt!==null&&l.jsxs("div",{className:`pb-ring-change ${Kt>=0?"positive":"negative"}`,children:[Kt>=0?"+":"",Kt.toFixed(1),"%"]}),Kt===null&&Je&&l.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),hr&&l.jsxs("div",{className:`pb-ring-target ${wn?"hit":""}`,children:[wn?"Target hit!":`${hr.startValue||0}  ${hr.targetValue}`," ",hr.targetType==="weight"?"kg":hr.targetType==="reps"?"reps":hr.targetType==="time"?"s":"kg"]}),!hr&&l.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})}),l.jsx("div",{className:"pb-carousel-dots",children:Ti.map((pe,Ue)=>l.jsx("button",{className:`pb-dot ${Ue===p?"active":""}`,onClick:()=>x(Ue)},Ue))}),l.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>x(pe=>Math.max(0,pe-1)),disabled:p===0,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),l.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>x(pe=>Math.min(Ti.length-1,pe+1)),disabled:p===Ti.length-1,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),l.jsxs("div",{className:"pb-trend-section",children:[l.jsx("h4",{children:"Trend"}),l.jsx(R4,{data:t,exerciseKey:Te.key,unit:Te.unit})]})]}),!E&&!L&&l.jsxs("div",{className:"pb-action-buttons",children:[l.jsx("button",{className:"pb-edit-btn",onClick:()=>C(!0),children:It?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),l.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>F(!0),children:Object.keys(K).length>0?"Edit Targets":"Set Targets"}),(Object.keys(K).length>0||Object.keys(xe).length>0)&&l.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Mn,disabled:u,children:"Reset All Goals"})]}),E&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsxs("h3",{children:["Benchmarks - ",Ci(it)]}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{C(!1),J(It?.benchmarks||{})},children:""})]}),l.jsx("div",{className:"pb-edit-body",children:Ti.map(pe=>l.jsxs("div",{className:"pb-edit-exercise",children:[l.jsx("div",{className:"pb-edit-exercise-name",children:pe.name}),pe.unit==="weight"?l.jsxs("div",{className:"pb-edit-row",children:[l.jsxs("div",{className:"pb-edit-field",children:[l.jsx("label",{children:"Weight (kg)"}),l.jsx("input",{type:"number",step:"0.5",value:H[pe.key]?.weight??"",onChange:Ue=>Tr(pe.key,"weight",Ue.target.value),placeholder:"0"})]}),l.jsxs("div",{className:"pb-edit-field",children:[l.jsx("label",{children:"Reps"}),l.jsx("input",{type:"number",value:H[pe.key]?.reps??"",onChange:Ue=>Tr(pe.key,"reps",Ue.target.value),placeholder:"0"})]})]}):l.jsx("div",{className:"pb-edit-row",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsx("label",{children:"Time (seconds)"}),l.jsx("input",{type:"number",step:"0.01",value:H[pe.key]?.time??"",onChange:Ue=>Tr(pe.key,"time",Ue.target.value),placeholder:"0"})]})})]},pe.key))}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{C(!1),J(It?.benchmarks||{})},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:Or,disabled:u,children:u?"Saving...":"Save"})]})]}),L&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsx("h3",{children:"Set Your Targets"}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{F(!1),G(K)},children:""})]}),l.jsxs("div",{className:"pb-edit-body",children:[l.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Ti.map(pe=>{const Ue=V[pe.key]?.targetType||(pe.unit==="time"?"time":"weight"),$e=Ue==="weight"?"kg":Ue==="reps"?"reps":"seconds",Z=It?.benchmarks?.[pe.key];let ke="-";return Z&&(Ue==="weight"&&Z.weight?ke=`${Z.weight}kg`:Ue==="reps"&&Z.reps?ke=`${Z.reps} reps`:Ue==="time"&&Z.time&&(ke=`${Z.time}s`)),l.jsxs("div",{className:"pb-edit-exercise",children:[l.jsxs("div",{className:"pb-edit-exercise-header",children:[l.jsx("div",{className:"pb-edit-exercise-name",children:pe.name}),l.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ke]})]}),pe.unit==="weight"&&l.jsxs("div",{className:"pb-target-type-toggle",children:[l.jsx("button",{type:"button",className:Ue==="weight"?"active":"",onClick:()=>Wr(pe.key,"targetType","weight"),children:"Weight"}),l.jsx("button",{type:"button",className:Ue==="reps"?"active":"",onClick:()=>Wr(pe.key,"targetType","reps"),children:"Reps"})]}),l.jsx("div",{className:"pb-edit-row",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsxs("label",{children:["Target (",$e,")"]}),l.jsx("input",{type:"number",step:Ue==="weight"?"0.5":"1",value:V[pe.key]?.targetValue??"",onChange:We=>Wr(pe.key,"targetValue",We.target.value),placeholder:"0"})]})})]},pe.key)})]}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{F(!1),G(K)},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:_r,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&l.jsxs("div",{className:"pb-metrics-section",children:[!A&&!ne&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-metrics-card",children:[l.jsx("h3",{children:"Body Measurements"}),l.jsx("p",{className:"pb-metrics-month",children:Ci(it)}),l.jsx("div",{className:"pb-metrics-list",children:Ml.map(pe=>{const Ue=It?.bodyMetrics?.[pe.key],$e=is(pe.key),Z=xe[pe.key],ke=Rn(pe.key),We=ke!==null&&ke>=1;return l.jsxs("div",{className:"pb-metric-row",children:[l.jsxs("div",{className:"pb-metric-top",children:[l.jsxs("div",{className:"pb-metric-left",children:[l.jsxs("span",{className:"pb-metric-name",children:[pe.name,xn("metric",pe.key)&&l.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),Z&&l.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",Z.targetValue," ",pe.suffix]})]}),l.jsxs("div",{className:"pb-metric-values",children:[l.jsx("span",{className:"pb-metric-current",children:Ue!=null?`${Ue} ${pe.suffix}`:"-"}),$e!==null&&l.jsxs("span",{className:`pb-metric-change ${$e>0?"up":$e<0?"down":"same"}`,children:[$e>0?"+":"",$e," ",pe.suffix]})]})]}),ke!==null&&l.jsxs("div",{className:"pb-metric-progress",children:[l.jsx("div",{className:"pb-metric-bar",children:l.jsx("div",{className:`pb-metric-bar-fill ${We?"hit":""}`,style:{width:`${Math.round(ke*100)}%`}})}),l.jsx("span",{className:`pb-metric-percent ${We?"hit":""}`,children:We?"Hit!":`${Math.round(ke*100)}%`})]})]},pe.key)})})]}),l.jsxs("div",{className:"pb-action-buttons",children:[l.jsx("button",{className:"pb-edit-btn",onClick:()=>B(!0),children:It?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),l.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>W(!0),children:Object.keys(xe).length>0?"Edit Targets":"Set Targets"}),(Object.keys(K).length>0||Object.keys(xe).length>0)&&l.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Mn,disabled:u,children:"Reset All Goals"})]})]}),A&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsxs("h3",{children:["Measurements - ",Ci(it)]}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),ue(It?.bodyMetrics||{})},children:""})]}),l.jsx("div",{className:"pb-edit-body",children:Ml.map(pe=>l.jsx("div",{className:"pb-edit-metric",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsxs("label",{children:[pe.name," (",pe.suffix,")"]}),l.jsx("input",{type:"number",step:"0.1",value:Y[pe.key]??"",onChange:Ue=>Ss(pe.key,Ue.target.value),placeholder:"0"})]})},pe.key))}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),ue(It?.bodyMetrics||{})},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:Lt,disabled:u,children:u?"Saving...":"Save"})]})]}),ne&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsx("h3",{children:"Body Metric Targets"}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{W(!1),O(xe)},children:""})]}),l.jsxs("div",{className:"pb-edit-body",children:[l.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),Ml.map(pe=>{const Ue=It?.bodyMetrics?.[pe.key];return l.jsxs("div",{className:"pb-edit-exercise",children:[l.jsxs("div",{className:"pb-edit-exercise-header",children:[l.jsx("div",{className:"pb-edit-exercise-name",children:pe.name}),l.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",Ue!=null?`${Ue} ${pe.suffix}`:"-"]})]}),l.jsx("div",{className:"pb-edit-row",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsxs("label",{children:["Target (",pe.suffix,")"]}),l.jsx("input",{type:"number",step:"0.1",value:ee[pe.key]?.targetValue??"",onChange:$e=>ui(pe.key,$e.target.value),placeholder:"0"})]})})]},pe.key)})]}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{W(!1),O(xe)},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:Yr,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),s==="history"&&l.jsx("div",{className:"pb-history-section",children:t.length===0?l.jsxs("div",{className:"pb-empty",children:[l.jsx("h4",{children:"No records yet"}),l.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):l.jsxs(l.Fragment,{children:[Re.length>0&&l.jsxs("div",{className:"pb-achievements-wall",children:[l.jsxs("h4",{className:"pb-achievements-wall-title",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),l.jsx("div",{className:"pb-achievements-list",children:[...Re].reverse().map((pe,Ue)=>l.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${Ue*.05}s`},children:[l.jsx("div",{className:"pb-achievement-star",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),l.jsxs("div",{className:"pb-achievement-info",children:[l.jsx("span",{className:"pb-achievement-label",children:pe.label}),l.jsx("span",{className:"pb-achievement-date",children:Ci(pe.achievedMonth)})]})]},Ue))})]}),l.jsx("div",{className:"pb-history-controls",children:l.jsx("button",{className:`pb-compare-toggle ${Ge?"active":""}`,onClick:()=>{M(!Ge),!Ge&&t.length>=2&&(ie(t[0].month),X(t[t.length-1].month))},children:Ge?"Back to Timeline":"Compare Months"})}),Ge?l.jsxs("div",{className:"pb-compare",children:[l.jsxs("div",{className:"pb-compare-selectors",children:[l.jsxs("div",{className:"pb-compare-select",children:[l.jsx("label",{children:"From"}),l.jsx("select",{value:se,onChange:pe=>ie(pe.target.value),children:t.map(pe=>l.jsx("option",{value:pe.month,children:Ci(pe.month)},pe.month))})]}),l.jsx("div",{className:"pb-compare-vs",children:"vs"}),l.jsxs("div",{className:"pb-compare-select",children:[l.jsx("label",{children:"To"}),l.jsx("select",{value:he,onChange:pe=>X(pe.target.value),children:t.map(pe=>l.jsx("option",{value:pe.month,children:Ci(pe.month)},pe.month))})]})]}),Cn&&ge&&l.jsxs("div",{className:"pb-compare-results",children:[l.jsxs("div",{className:"pb-compare-group",children:[l.jsx("h4",{children:"Strength Benchmarks"}),l.jsxs("div",{className:"pb-compare-table",children:[l.jsxs("div",{className:"pb-compare-header-row",children:[l.jsx("span",{children:"Exercise"}),l.jsx("span",{children:Ci(se).split(" ")[0]}),l.jsx("span",{children:Ci(he).split(" ")[0]}),l.jsx("span",{children:"Change"})]}),Ti.map(pe=>{const Ue=Cn.benchmarks?.[pe.key],$e=ge.benchmarks?.[pe.key],Z=Rc(pe,Ue),ke=Rc(pe,$e),We=rg(ke,Z);return l.jsxs("div",{className:"pb-compare-row",children:[l.jsx("span",{className:"pb-compare-name",children:pe.name}),l.jsx("span",{className:"pb-compare-val",children:Ue?pe.unit==="time"?ef(Ue.time):`${Ue.weight}x${Ue.reps}`:"-"}),l.jsx("span",{className:"pb-compare-val",children:$e?pe.unit==="time"?ef($e.time):`${$e.weight}x${$e.reps}`:"-"}),l.jsx("span",{className:`pb-compare-change ${We!==null?We>=0?"positive":"negative":""}`,children:We!==null?`${We>=0?"+":""}${We.toFixed(1)}%`:"-"})]},pe.key)})]})]}),l.jsxs("div",{className:"pb-compare-group",children:[l.jsx("h4",{children:"Body Measurements"}),l.jsxs("div",{className:"pb-compare-table",children:[l.jsxs("div",{className:"pb-compare-header-row",children:[l.jsx("span",{children:"Measurement"}),l.jsx("span",{children:Ci(se).split(" ")[0]}),l.jsx("span",{children:Ci(he).split(" ")[0]}),l.jsx("span",{children:"Change"})]}),Ml.map(pe=>{const Ue=Cn.bodyMetrics?.[pe.key],$e=ge.bodyMetrics?.[pe.key],Z=Ue!=null&&$e!=null?parseFloat(($e-Ue).toFixed(2)):null;return l.jsxs("div",{className:"pb-compare-row",children:[l.jsx("span",{className:"pb-compare-name",children:pe.name}),l.jsx("span",{className:"pb-compare-val",children:Ue!=null?`${Ue}`:"-"}),l.jsx("span",{className:"pb-compare-val",children:$e!=null?`${$e}`:"-"}),l.jsx("span",{className:`pb-compare-change ${Z!==null?Z>0?"positive":Z<0?"negative":"neutral":""}`,children:Z!==null?`${Z>0?"+":""}${Z} ${pe.suffix}`:"-"})]},pe.key)})]})]})]})]}):l.jsx("div",{className:"pb-timeline",children:[...t].reverse().map((pe,Ue)=>{const $e=t.find(Z=>Z.month<pe.month&&t.indexOf(Z)===t.indexOf(pe)-1)||t.filter(Z=>Z.month<pe.month).pop();return l.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${Ue*.05}s`},children:[l.jsx("div",{className:"pb-timeline-dot"}),l.jsxs("div",{className:"pb-timeline-card",children:[l.jsx("h4",{children:Ci(pe.month)}),pe.benchmarks&&Object.keys(pe.benchmarks).length>0&&l.jsxs("div",{className:"pb-timeline-group",children:[l.jsx("h5",{children:"Strength Benchmarks"}),Ti.map(Z=>{const ke=pe.benchmarks[Z.key];if(!ke)return null;const We=$e?.benchmarks?.[Z.key],Qe=Rc(Z,ke),lt=Rc(Z,We),ct=rg(Qe,lt);return l.jsxs("div",{className:"pb-timeline-row",children:[l.jsx("span",{className:"pb-timeline-label",children:Z.name}),l.jsxs("div",{className:"pb-timeline-values",children:[l.jsx("span",{className:"pb-timeline-value",children:Z.unit==="time"?ef(ke.time):S_(ke.weight,ke.reps)}),ct!==null&&l.jsxs("span",{className:`pb-timeline-change ${ct>=0?"positive":"negative"}`,children:[ct>=0?"+":"",ct.toFixed(1),"%"]})]})]},Z.key)})]}),pe.bodyMetrics&&Object.keys(pe.bodyMetrics).length>0&&l.jsxs("div",{className:"pb-timeline-group",children:[l.jsx("h5",{children:"Body Measurements"}),Ml.map(Z=>{const ke=pe.bodyMetrics[Z.key];if(ke==null)return null;const We=$e?.bodyMetrics?.[Z.key],Qe=We!=null?parseFloat((ke-We).toFixed(2)):null;return l.jsxs("div",{className:"pb-timeline-row",children:[l.jsx("span",{className:"pb-timeline-label",children:Z.name}),l.jsxs("div",{className:"pb-timeline-values",children:[l.jsxs("span",{className:"pb-timeline-value",children:[ke," ",Z.suffix]}),Qe!==null&&l.jsxs("span",{className:`pb-timeline-change ${Qe>0?"positive":Qe<0?"negative":"neutral"}`,children:[Qe>0?"+":"",Qe," ",Z.suffix]})]})]},Z.key)})]})]})]},pe.id)})})]})})]}),te&&l.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Se(null),children:l.jsxs("div",{className:"pb-celebration-card",children:[l.jsx("div",{className:"pb-celebration-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),l.jsx("h3",{className:"pb-celebration-title",children:te.length===1?"Target Achieved!":`${te.length} Targets Achieved!`}),l.jsx("div",{className:"pb-celebration-badges",children:te.map((pe,Ue)=>l.jsx("div",{className:"pb-celebration-badge",children:pe.label},Ue))}),l.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Pe&&l.jsxs("div",{className:`toast-notification ${Pe.type}`,children:[l.jsx("span",{className:"toast-icon",children:Pe.type==="success"?l.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),l.jsx("span",{className:"toast-message",children:Pe.message}),l.jsx("button",{className:"toast-close",onClick:()=>De(null),children:""})]})]})}const sg=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const a=new Date(s);a.setHours(9,45,0,0),s>a&&(t=7)}const i=new Date(s);return i.setDate(s.getDate()+t),i},ig=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,I4=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"});function M4(){const[s,e]=z.useState(!0),[t,i]=z.useState(null),[a,c]=z.useState(null),[u,f]=z.useState({attended:0,streak:0,strikes:0}),[p,x]=z.useState(null),{currentUser:E,isClient:C,clientData:A,logout:B,loading:L}=ws(),{isDark:F,toggleTheme:H}=Kl(),J=Mr();z.useCallback((q,V="info")=>{x({message:q,type:V}),setTimeout(()=>x(null),4e3)},[]),z.useEffect(()=>{!L&&(!E||!C)&&J("/")},[E,C,L,J]),z.useEffect(()=>{const q=()=>{const G=new Date,ne=sg();ne.setHours(9,0,0,0);const W=ne-G;if(W<=0){i({days:0,hours:0,minutes:0,seconds:0});return}i({days:Math.floor(W/864e5),hours:Math.floor(W%864e5/36e5),minutes:Math.floor(W%36e5/6e4),seconds:Math.floor(W%6e4/1e3)})};q();const V=setInterval(q,1e3);return()=>clearInterval(V)},[]),z.useEffect(()=>{A&&Y()},[A]);const Y=async()=>{try{const q=ig(sg()),V=Et(Xe,"circuitSessions",q),G=await nl(V);if(G.exists()){const Ge=G.data().slots?.find(M=>M.memberId===A.id);c(Ge||null)}else c(null);const W=(await _n(Xt(Xe,"circuitSessions"))).docs.map(De=>({id:De.id,...De.data()})),ee=new Date;ee.setHours(0,0,0,0);let O=0;const Re=[];W.forEach(De=>{new Date(De.date+"T09:00:00")<ee&&De.slots?.some(se=>se.memberId===A.id&&(se.status==="confirmed"||se.status==="attended"))&&(O++,Re.push(De.date))}),Re.sort((De,Ge)=>Ge.localeCompare(De));let He=0,te=new Date(ee);const Se=te.getDay(),Pe=Se>=6?Se-6:Se+1;te.setDate(te.getDate()-Pe);for(const De of Re)if(De===ig(te))He++,te.setDate(te.getDate()-7);else break;f({attended:O,streak:He,strikes:A.circuitStrikes||0,banUntil:A.circuitBanUntil||null})}catch(q){console.error("Error fetching circuit data:",q)}e(!1)};if(L||s)return l.jsx("div",{className:"circuit-page",children:l.jsx("div",{className:"circuit-loading",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"circuit-loading-logo"})})});const ue=ig(sg()),K=A?.clientType||"block",me=K==="circuit_vip"||K==="circuit_dropin",xe=K==="circuit_vip"?"VIP":K==="circuit_dropin"?"Drop-in":"Block";return l.jsxs("div",{className:`circuit-page ${F?"dark":""}`,children:[l.jsxs("header",{className:"circuit-header",children:[l.jsxs("div",{className:"circuit-header-left",children:[!me&&l.jsx("button",{className:"circuit-back-btn",onClick:()=>J("/client"),children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),l.jsx("img",{src:"/Logo.PNG",alt:"MCF",className:"circuit-header-logo"})]}),l.jsxs("div",{className:"circuit-header-right",children:[l.jsx("button",{className:"circuit-icon-btn",onClick:H,children:F?"":""}),me&&l.jsx("button",{className:"circuit-icon-btn logout",onClick:B,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"})})})]})]}),l.jsxs("main",{className:"circuit-main",children:[l.jsxs("div",{className:"circuit-intro",children:[l.jsx("h2",{children:"Circuit Class"}),l.jsxs("p",{children:["Hey ",A?.name?.split(" ")[0],"! Your Saturday session awaits."]})]}),t&&l.jsxs("div",{className:"circuit-countdown",children:[l.jsxs("div",{className:"circuit-ring",children:[l.jsx("svg",{className:"circuit-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((q,V)=>{const G=(V*6-90)*(Math.PI/180),ne=85,W=96,ee=100+ne*Math.cos(G),O=100+ne*Math.sin(G),Re=100+W*Math.cos(G),He=100+W*Math.sin(G),te=60-t.seconds,Se=V<te;return l.jsx("line",{x1:ee,y1:O,x2:Re,y2:He,className:`circuit-tick ${Se?"elapsed":"remaining"}`,strokeWidth:V%5===0?"3":"2"},V)})}),l.jsxs("div",{className:"circuit-ring-center",children:[l.jsx("div",{className:"circuit-ring-logo",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),l.jsx("div",{className:"circuit-ring-label",children:"Next Class"}),l.jsxs("div",{className:"circuit-ring-countdown",children:[t.days>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"circuit-digit",children:String(t.days).padStart(2,"0")}),l.jsx("span",{className:"circuit-colon",children:":"})]}),l.jsx("span",{className:"circuit-digit",children:String(t.hours).padStart(2,"0")}),l.jsx("span",{className:"circuit-colon",children:":"}),l.jsx("span",{className:"circuit-digit",children:String(t.minutes).padStart(2,"0")}),l.jsx("span",{className:"circuit-colon",children:":"}),l.jsx("span",{className:"circuit-digit circuit-seconds",children:String(t.seconds).padStart(2,"0")})]}),l.jsx("div",{className:"circuit-ring-sub",children:"Saturday 9:00am"})]})]}),l.jsx("p",{className:"circuit-date-full",children:I4(ue)})]}),l.jsx("div",{className:`circuit-status-card ${a?"booked":"not-booked"}`,children:a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"circuit-status-check",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsxs("div",{className:"circuit-status-info",children:[l.jsx("h3",{children:"You're Locked In"}),l.jsxs("p",{children:["Slot #",a.slotNumber,"  ",xe]})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"circuit-status-alert",children:"!"}),l.jsxs("div",{className:"circuit-status-info",children:[l.jsx("h3",{children:"Not Booked Yet"}),l.jsx("p",{children:"Tap below to view and book your slot"})]}),l.jsx("button",{className:"circuit-book-now-btn",onClick:()=>J("/client/circuit/booking"),children:"Book Now"})]})}),l.jsxs("div",{className:"circuit-stats-card",children:[l.jsx("h3",{children:"Your Stats"}),l.jsxs("div",{className:"circuit-stats-grid",children:[l.jsxs("div",{className:"circuit-stat",children:[l.jsx("span",{className:"circuit-stat-value",children:u.attended}),l.jsx("span",{className:"circuit-stat-label",children:"Classes"})]}),l.jsxs("div",{className:"circuit-stat",children:[l.jsx("span",{className:"circuit-stat-value",children:u.streak}),l.jsx("span",{className:"circuit-stat-label",children:"Week Streak"})]}),l.jsxs("div",{className:"circuit-stat",children:[l.jsxs("span",{className:`circuit-stat-value ${u.strikes>=2?"warning":""}`,children:[u.strikes,"/3"]}),l.jsx("span",{className:"circuit-stat-label",children:"Strikes"})]})]}),u.banUntil&&(()=>{const q=u.banUntil.toDate?u.banUntil.toDate():new Date(u.banUntil.seconds*1e3);return q>new Date?l.jsxs("div",{className:"circuit-ban-notice",children:["Booking suspended until ",q.toLocaleDateString("en-GB",{day:"numeric",month:"long"})]}):null})()]}),l.jsxs("div",{className:"circuit-rules",children:[l.jsx("h4",{children:"Class Rules"}),l.jsxs("ul",{children:[l.jsxs("li",{children:["Lock in your slot by ",l.jsx("strong",{children:"Wednesday"})]}),l.jsxs("li",{children:["Cancel at least ",l.jsx("strong",{children:"24 hours"})," before class"]}),l.jsx("li",{children:"3 no-show strikes = 1 month booking ban"})]})]}),K!=="circuit_vip"&&l.jsxs("div",{className:"circuit-vip-promo",children:[l.jsx("div",{className:"vip-promo-badge",children:"VIP"}),l.jsx("h3",{children:"Become a VIP Member"}),l.jsxs("p",{className:"vip-promo-price",children:["Just ",l.jsx("strong",{children:"25"}),"/month"]}),l.jsx("p",{className:"vip-promo-desc",children:"Full access with a priority spot every week  your slot is automatically locked in before anyone else can book."}),l.jsxs("ul",{className:"vip-promo-perks",children:[l.jsx("li",{children:"Guaranteed slot every Saturday"}),l.jsx("li",{children:"Auto-booked  no need to race for a spot"}),l.jsx("li",{children:"Cancel anytime for the week, reinstated the next"})]}),l.jsxs("a",{href:"https://wa.me/447449782055?text=Hi%20Ross%2C%20I%27d%20like%20to%20become%20a%20VIP%20circuit%20member!",target:"_blank",rel:"noopener noreferrer",className:"vip-promo-wa-btn",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Message on WhatsApp"]})]})]}),l.jsx("button",{className:"circuit-fab",onClick:()=>J("/client/circuit/booking"),children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("path",{d:"M3 9h18M9 21V9"})]})}),p&&l.jsx("div",{className:`toast-notification ${p.type}`,children:l.jsx("span",{children:p.message})})]})}const tf=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const a=new Date(s);a.setHours(9,45,0,0),s>a&&(t=7)}const i=new Date(s);return i.setDate(s.getDate()+t),i},O4=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,L4=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),E_=s=>s==="circuit_vip"?"VIP":s==="circuit_dropin"?"Drop-in":"Block",T_=s=>s==="circuit_vip"?"vip":s==="circuit_dropin"?"dropin":"block";function P4(){const[s,e]=z.useState(!0),[t,i]=z.useState(!1),[a,c]=z.useState(null),[u,f]=z.useState(null),{currentUser:p,isClient:x,clientData:E,loading:C}=ws(),{isDark:A}=Kl(),B=Mr(),L=z.useCallback((O,Re="info")=>{f({message:O,type:Re}),setTimeout(()=>f(null),4e3)},[]);z.useEffect(()=>{!C&&(!p||!x)&&B("/")},[p,x,C,B]),z.useEffect(()=>{E&&F()},[E]);const F=async()=>{try{const O=O4(tf()),Re=Et(Xe,"circuitSessions",O),He=await nl(Re);if(He.exists()){const te={id:He.id,...He.data()},Se=ji(Xt(Xe,"clients"),li("clientType","==","circuit_vip"),li("status","==","active")),De=(await _n(Se)).docs.map(se=>({id:se.id,...se.data()})),Ge=te.slots.filter(se=>se.memberId).map(se=>se.memberId),M=De.filter(se=>!Ge.includes(se.id));if(M.length>0){const se=[...te.slots];let ie=!1;for(const he of M){const X=se.findIndex(de=>de.status==="available");if(X===-1)break;se[X]={slotNumber:se[X].slotNumber,memberId:he.id,memberName:he.name,memberType:"circuit_vip",status:"confirmed",bookedAt:ot.now()},ie=!0}ie&&(await lr(Re,{slots:se}),te.slots=se)}c(te)}else{const te=ji(Xt(Xe,"clients"),li("clientType","==","circuit_vip"),li("status","==","active")),Pe=(await _n(te)).docs.map(M=>({id:M.id,...M.data()})),De=[];for(let M=0;M<8;M++)M<Pe.length?De.push({slotNumber:M+1,memberId:Pe[M].id,memberName:Pe[M].name,memberType:"circuit_vip",status:"confirmed",bookedAt:ot.now()}):De.push({slotNumber:M+1,memberId:null,memberName:null,memberType:null,status:"available"});const Ge={date:O,time:"09:00",endTime:"09:45",maxCapacity:8,slots:De,waitlist:[],createdAt:ot.now()};await Va(Re,Ge),c({id:O,...Ge})}}catch(O){console.error("Error loading session:",O),L("Failed to load session","error")}e(!1)},H=async O=>{if(!t){i(!0);try{if(E.circuitBanUntil&&(E.circuitBanUntil.toDate?E.circuitBanUntil.toDate():new Date(E.circuitBanUntil))>new Date){L("You are currently suspended from booking","error"),i(!1);return}const Re=tf(),He=new Date(Re);if(He.setDate(He.getDate()-3),He.setHours(23,59,59,999),new Date>He){L("Booking deadline has passed (Wednesday)","error"),i(!1);return}if(a.slots.some(De=>De.memberId===E.id)){L("You already have a slot booked","error"),i(!1);return}const te=[...a.slots],Se=te.findIndex(De=>De.slotNumber===O&&De.status==="available");if(Se===-1){L("Slot is no longer available","error"),i(!1);return}te[Se]={slotNumber:O,memberId:E.id,memberName:E.name,memberType:E.clientType||"block",status:"confirmed",bookedAt:ot.now()};const Pe=(a.waitlist||[]).filter(De=>De.memberId!==E.id);await lr(Et(Xe,"circuitSessions",a.id),{slots:te,waitlist:Pe}),c(De=>({...De,slots:te,waitlist:Pe})),L("Slot booked!","success")}catch(Re){console.error("Error booking slot:",Re),L("Failed to book slot","error")}i(!1)}},J=async()=>{if(!t){i(!0);try{const O=tf();O.setHours(9,0,0,0);const Re=new Date(O.getTime()-1440*60*1e3);if(new Date>Re){L("Cancellation deadline passed (24hrs before class)","error"),i(!1);return}const He=[...a.slots],te=He.findIndex(De=>De.memberId===E.id);if(te===-1){i(!1);return}const Se=He[te].slotNumber;let Pe=[...a.waitlist||[]];if(Pe.length>0){const De=Pe.shift();He[te]={slotNumber:Se,memberId:De.memberId,memberName:De.memberName,memberType:De.memberType,status:"confirmed",bookedAt:ot.now()}}else He[te]={slotNumber:Se,memberId:null,memberName:null,memberType:null,status:"available"};await lr(Et(Xe,"circuitSessions",a.id),{slots:He,waitlist:Pe}),c(De=>({...De,slots:He,waitlist:Pe})),L("Slot released","success")}catch(O){console.error("Error releasing slot:",O),L("Failed to release slot","error")}i(!1)}},Y=async()=>{if(!t){i(!0);try{if(a.waitlist?.some(Re=>Re.memberId===E.id)){L("Already on the waitlist","error"),i(!1);return}if(a.slots.some(Re=>Re.memberId===E.id)){L("You already have a slot","error"),i(!1);return}const O=[...a.waitlist||[],{memberId:E.id,memberName:E.name,memberType:E.clientType||"block",addedAt:ot.now()}];await lr(Et(Xe,"circuitSessions",a.id),{waitlist:O}),c(Re=>({...Re,waitlist:O})),L("Added to waitlist!","success")}catch(O){console.error("Error joining waitlist:",O),L("Failed to join waitlist","error")}i(!1)}},ue=async()=>{if(!t){i(!0);try{const O=(a.waitlist||[]).filter(Re=>Re.memberId!==E.id);await lr(Et(Xe,"circuitSessions",a.id),{waitlist:O}),c(Re=>({...Re,waitlist:O})),L("Removed from waitlist","success")}catch(O){console.error("Error leaving waitlist:",O),L("Failed to leave waitlist","error")}i(!1)}};if(C||s)return l.jsx("div",{className:"cb-page",children:l.jsx("div",{className:"cb-loading",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-loading-logo"})})});if(!a)return null;const K=a.slots.find(O=>O.memberId===E.id),me=a.waitlist?.some(O=>O.memberId===E.id),xe=a.slots.filter(O=>O.status==="available").length,q=xe===0,V=tf(),G=new Date(V);G.setDate(G.getDate()-3),G.setHours(23,59,59,999);const ne=new Date>G,W=new Date(V);W.setHours(9,0,0,0),W.setTime(W.getTime()-1440*60*1e3);const ee=new Date>W;return l.jsxs("div",{className:`cb-page ${A?"dark":""}`,children:[l.jsxs("header",{className:"cb-header",children:[l.jsx("button",{className:"cb-back-btn",onClick:()=>B("/client/circuit"),children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),l.jsx("h1",{children:"Class Booking"}),l.jsx("div",{className:"cb-header-spacer"})]}),l.jsxs("main",{className:"cb-main",children:[l.jsxs("div",{className:"cb-class-info",children:[l.jsx("h2",{children:L4(a.date)}),l.jsxs("p",{children:[a.time," - ",a.endTime,"  ",xe," slot",xe!==1?"s":""," available"]})]}),ne&&!K&&l.jsx("div",{className:"cb-deadline-notice",children:"Booking deadline has passed for this week"}),l.jsx("div",{className:"cb-slots-grid",children:a.slots.map(O=>{const Re=O.memberId===E.id,He=O.status==="available";return O.memberType,l.jsxs("div",{className:`cb-slot ${Re?"mine":""} ${He?"available":"filled"}`,children:[l.jsx("div",{className:"cb-slot-number",children:O.slotNumber}),l.jsx("div",{className:"cb-slot-body",children:He?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"cb-slot-available",children:"Available"}),!K&&!ne&&l.jsx("button",{className:"cb-slot-book-btn",onClick:()=>H(O.slotNumber),disabled:t,children:"Book"})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"cb-slot-name",children:O.memberName}),l.jsx("span",{className:`cb-slot-badge ${T_(O.memberType)}`,children:E_(O.memberType)})]})}),Re&&l.jsx("button",{className:"cb-slot-release-btn",onClick:J,disabled:t||ee,title:ee?"Cancellation deadline passed":"Cancel this slot",children:ee?"Locked":"Cancel"})]},O.slotNumber)})}),!K&&q&&l.jsx("div",{className:"cb-waitlist-section",children:me?l.jsxs("div",{className:"cb-waitlist-status",children:[l.jsxs("p",{children:["You're on the waitlist (position #",(a.waitlist?.findIndex(O=>O.memberId===E.id)||0)+1,")"]}),l.jsx("button",{className:"cb-waitlist-leave-btn",onClick:ue,disabled:t,children:"Leave Waitlist"})]}):l.jsx("button",{className:"cb-waitlist-join-btn",onClick:Y,disabled:t,children:"Class Full - Join Waitlist"})}),a.waitlist?.length>0&&l.jsxs("div",{className:"cb-waitlist-preview",children:[l.jsxs("h4",{children:["Waitlist (",a.waitlist.length,")"]}),a.waitlist.map((O,Re)=>l.jsxs("div",{className:"cb-waitlist-item",children:[l.jsxs("span",{className:"cb-waitlist-pos",children:["#",Re+1]}),l.jsx("span",{className:"cb-waitlist-name",children:O.memberName}),l.jsx("span",{className:`cb-slot-badge ${T_(O.memberType)}`,children:E_(O.memberType)})]},O.memberId))]}),l.jsx("div",{className:"cb-rules",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Book by Wednesday"}),"  ",l.jsx("strong",{children:"Cancel 24hrs before"}),"  ",l.jsx("strong",{children:"3 no-shows = 1 month ban"})]})})]}),u&&l.jsx("div",{className:`toast-notification ${u.type}`,children:l.jsx("span",{children:u.message})})]})}function V4(){const{currentUser:s,isClient:e,clientData:t,logout:i,loading:a}=ws(),{isDark:c,toggleTheme:u}=Kl(),f=Mr(),[p,x]=z.useState({hours:0,minutes:0,seconds:0}),[E,C]=z.useState(0),[A,B]=z.useState(null),L=z.useCallback((J,Y="info")=>{B({message:J,type:Y}),setTimeout(()=>B(null),4e3)},[]);z.useEffect(()=>{!a&&!s&&f("/")},[a,s,f]),z.useEffect(()=>{const J=()=>{const ue=new Date,K=new Date(ue);K.setHours(23,59,59,999);const me=K-ue,xe=Math.floor(me/(1e3*60*60)),q=Math.floor(me%(1e3*60*60)/(1e3*60)),V=Math.floor(me%(1e3*60)/1e3);x({hours:xe,minutes:q,seconds:V}),C(60-V)};J();const Y=setInterval(J,1e3);return()=>clearInterval(Y)},[]);const F=J=>{const Y=J.currentTarget,ue=Y.querySelector(".ripple");ue&&ue.remove();const K=Y.getBoundingClientRect(),me=Math.max(K.width,K.height),xe=J.clientX-K.left-me/2,q=J.clientY-K.top-me/2,V=document.createElement("span");V.className="ripple",V.style.cssText=`width:${me}px;height:${me}px;left:${xe}px;top:${q}px;`,Y.appendChild(V),setTimeout(()=>V.remove(),600)},H=t?.name?.split(" ")[0]||"there";return a?l.jsx("div",{className:"cb-loading",children:l.jsx("div",{className:"cb-loading-spinner"})}):l.jsxs("div",{className:"cb-dashboard","data-theme":c?"dark":"light",children:[l.jsxs("header",{className:"cb-header",children:[l.jsxs("div",{className:"cb-header-left",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),l.jsx("span",{className:"cb-header-title",children:"Core Buddy"})]}),l.jsxs("div",{className:"cb-header-right",children:[l.jsx("button",{className:"cb-theme-toggle",onClick:u,"aria-label":"Toggle theme",children:c?l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),l.jsx("button",{className:"cb-logout",onClick:i,"aria-label":"Log out",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]}),l.jsxs("main",{className:"cb-main",children:[l.jsx("div",{className:"cb-greeting",children:l.jsxs("h2",{children:["Hey ",H]})}),l.jsxs("div",{className:"cb-ring-container",children:[l.jsxs("div",{className:"cb-ring",children:[l.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((J,Y)=>{const ue=(Y*6-90)*(Math.PI/180),K=85,me=96,xe=100+K*Math.cos(ue),q=100+K*Math.sin(ue),V=100+me*Math.cos(ue),G=100+me*Math.sin(ue),ne=Y<E;return l.jsx("line",{x1:xe,y1:q,x2:V,y2:G,className:`ring-tick ${ne?"elapsed":"remaining"}`,strokeWidth:Y%5===0?"3":"2"},Y)})}),l.jsxs("div",{className:"cb-ring-center",children:[l.jsx("div",{className:"cb-ring-logo",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),l.jsxs("div",{className:"cb-ring-countdown",children:[l.jsx("span",{className:"cb-timer-digit",children:String(p.hours).padStart(2,"0")}),l.jsx("span",{className:"cb-timer-colon",children:":"}),l.jsx("span",{className:"cb-timer-digit",children:String(p.minutes).padStart(2,"0")}),l.jsx("span",{className:"cb-timer-colon",children:":"}),l.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(p.seconds).padStart(2,"0")})]}),l.jsx("div",{className:"cb-ring-label",children:"remaining today"})]})]}),l.jsxs("p",{className:"cb-ring-tagline",children:["You have 24 hours a day... ",l.jsx("strong",{children:"make it count"})," with Core Buddy"]})]}),l.jsxs("div",{className:"cb-features",children:[l.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:J=>{F(J),f("/client/core-buddy/nutrition")},children:[l.jsxs("div",{className:"cb-card-top-row",children:[l.jsx("div",{className:"cb-card-icon cb-icon-nutrition",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),l.jsx("div",{className:"cb-card-content",children:l.jsx("h3",{children:"Today's Nutrition"})}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsx("div",{className:"cb-card-preview-row",children:l.jsx("div",{className:"cb-mini-rings",children:[{cls:"cb-ring-protein",label:"P",filled:15},{cls:"cb-ring-carbs",label:"C",filled:28},{cls:"cb-ring-fats",label:"F",filled:38},{cls:"cb-ring-cals",label:"Cal",filled:22}].map(J=>l.jsxs("div",{className:`cb-mini-ring ${J.cls}`,children:[l.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(60)].map((Y,ue)=>{const K=(ue*6-90)*(Math.PI/180),me=50+38*Math.cos(K),xe=50+38*Math.sin(K),q=50+46*Math.cos(K),V=50+46*Math.sin(K);return l.jsx("line",{x1:me,y1:xe,x2:q,y2:V,className:ue<J.filled?"cb-tick-filled":"cb-tick-empty",strokeWidth:ue%5===0?"3":"2"},ue)})}),l.jsx("span",{children:J.label})]},J.cls))})}),l.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),l.jsxs("button",{className:"cb-feature-card cb-card-workouts ripple-btn",onClick:J=>{F(J),L("Workouts coming soon!","info")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-workouts",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6.5 6.5L17.5 17.5"}),l.jsx("path",{d:"M3 10V7a1 1 0 0 1 1-1h3"}),l.jsx("path",{d:"M14 3h3a1 1 0 0 1 1 1v3"}),l.jsx("path",{d:"M21 14v3a1 1 0 0 1-1 1h-3"}),l.jsx("path",{d:"M10 21H7a1 1 0 0 1-1-1v-3"})]})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"Workouts"}),l.jsx("p",{children:"Randomise or build your own session"})]}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsxs("button",{className:"cb-feature-card cb-card-progress ripple-btn",onClick:J=>{F(J),f("/client/personal-bests")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-progress",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"My Progress"}),l.jsx("p",{children:"Track personal bests and body metrics"})]}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsxs("button",{className:"cb-feature-card cb-card-consistency cb-card-has-preview ripple-btn",onClick:J=>{F(J),L("Consistency tracking coming soon!","info")},children:[l.jsxs("div",{className:"cb-card-top-row",children:[l.jsx("div",{className:"cb-card-icon cb-icon-consistency",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})})}),l.jsx("div",{className:"cb-card-content",children:l.jsx("h3",{children:"Consistency"})}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsx("div",{className:"cb-card-preview-row",children:l.jsx("div",{className:"cb-week-rings",children:["M","T","W","T","F","S","S"].map((J,Y)=>{const ue=Y<3?[55,42,30][Y]:0;return l.jsxs("div",{className:`cb-week-ring ${Y<3?"cb-week-ring-active":""}`,children:[l.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(60)].map((K,me)=>{const xe=(me*6-90)*(Math.PI/180),q=50+38*Math.cos(xe),V=50+38*Math.sin(xe),G=50+46*Math.cos(xe),ne=50+46*Math.sin(xe);return l.jsx("line",{x1:q,y1:V,x2:G,y2:ne,className:me<ue?"cb-week-tick-filled":"cb-week-tick-empty",strokeWidth:me%5===0?"3":"2"},me)})}),l.jsx("span",{children:J})]},Y)})})}),l.jsx("p",{className:"cb-card-desc",children:"Weekly streaks and habit tracking"})]}),l.jsxs("button",{className:"cb-feature-card cb-card-leaderboard cb-card-locked ripple-btn",onClick:J=>{F(J),L("Leaderboard coming soon!","info")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-leaderboard",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M8 21h8"}),l.jsx("path",{d:"M12 17v4"}),l.jsx("path",{d:"M7 4h10l-1 9H8L7 4z"}),l.jsx("path",{d:"M17 4c0 0 2 0 2 2s-2 4-2 4"}),l.jsx("path",{d:"M7 4c0 0-2 0-2 2s2 4 2 4"})]})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"Leaderboard"}),l.jsx("p",{children:"Compete with your Core Buddies"})]}),l.jsx("span",{className:"cb-coming-soon",children:"Coming Soon"}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]})]})]}),A&&l.jsxs("div",{className:`toast-notification ${A.type}`,children:[A.type==="info"&&l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),A.message]})]})}var ag={exports:{}},C_;function U4(){return C_||(C_=1,(function(s,e){(function(t,i){s.exports=i()})(window,(function(){return(function(t){var i={};function a(c){if(i[c])return i[c].exports;var u=i[c]={i:c,l:!1,exports:{}};return t[c].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=t,a.c=i,a.d=function(c,u,f){a.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:f})},a.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},a.t=function(c,u){if(1&u&&(c=a(c)),8&u||4&u&&typeof c=="object"&&c&&c.__esModule)return c;var f=Object.create(null);if(a.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:c}),2&u&&typeof c!="string")for(var p in c)a.d(f,p,(function(x){return c[x]}).bind(null,p));return f},a.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(u,"a",u),u},a.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},a.p="/",a(a.s=90)})([function(t,i,a){var c=a(68);t.exports=function(u,f,p){return(f=c(f))in u?Object.defineProperty(u,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[f]=p,u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){function a(c){return t.exports=a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},t.exports.__esModule=!0,t.exports.default=t.exports,a(c)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(68);function u(f,p){for(var x=0;x<p.length;x++){var E=p[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(f,c(E.key),E)}}t.exports=function(f,p,x){return p&&u(f.prototype,p),x&&u(f,x),Object.defineProperty(f,"prototype",{writable:!1}),f},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(9).default,u=a(150);t.exports=function(f,p){if(p&&(c(p)=="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(f)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(38);t.exports=function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),f&&c(u,f)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(146)();t.exports=c;try{regeneratorRuntime=c}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=c:Function("r","regeneratorRuntime = r")(c)}},function(t,i){function a(c,u,f,p,x,E,C){try{var A=c[E](C),B=A.value}catch(L){return void f(L)}A.done?u(B):Promise.resolve(B).then(p,x)}t.exports=function(c){return function(){var u=this,f=arguments;return new Promise((function(p,x){var E=c.apply(u,f);function C(B){a(E,p,x,C,A,"next",B)}function A(B){a(E,p,x,C,A,"throw",B)}C(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(46),u=typeof self=="object"&&self&&self.Object===Object&&self,f=c||u||Function("return this")();t.exports=f},function(t,i){function a(c){return t.exports=a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t.exports.__esModule=!0,t.exports.default=t.exports,a(c)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}},function(t,i){t.exports=function(a){return a!=null&&typeof a=="object"}},function(t,i){var a=Array.isArray;t.exports=a},function(t,i,a){var c=a(151);function u(){return t.exports=u=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(f,p,x){var E=c(f,p);if(E){var C=Object.getOwnPropertyDescriptor(E,p);return C.get?C.get.call(arguments.length<3?f:x):C.value}},t.exports.__esModule=!0,t.exports.default=t.exports,u.apply(null,arguments)}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(102),u=a(108);t.exports=function(f,p){var x=u(f,p);return c(x)?x:void 0}},function(t,i,a){var c=a(91),u=a(134)((function(f,p,x){c(f,p,x)}));t.exports=u},function(t,i,a){var c=a(152),u=a(153),f=a(66),p=a(154);t.exports=function(x){return c(x)||u(x)||f(x)||p()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(19),u=a(104),f=a(105),p=c?c.toStringTag:void 0;t.exports=function(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":p&&p in Object(x)?u(x):f(x)}},function(t,i,a){var c=a(60),u=a(29);t.exports=function(f,p,x,E){var C=!x;x||(x={});for(var A=-1,B=p.length;++A<B;){var L=p[A],F=E?E(x[L],f[L],L,x,f):void 0;F===void 0&&(F=f[L]),C?u(x,L,F):c(x,L,F)}return x}},function(t,i,a){var c=a(8).Symbol;t.exports=c},function(t,i,a){var c=a(61),u=a(132),f=a(26);t.exports=function(p){return f(p)?c(p,!0):u(p)}},function(t,i,a){var c=a(92),u=a(93),f=a(94),p=a(95),x=a(96);function E(C){var A=-1,B=C==null?0:C.length;for(this.clear();++A<B;){var L=C[A];this.set(L[0],L[1])}}E.prototype.clear=c,E.prototype.delete=u,E.prototype.get=f,E.prototype.has=p,E.prototype.set=x,t.exports=E},function(t,i,a){var c=a(23);t.exports=function(u,f){for(var p=u.length;p--;)if(c(u[p][0],f))return p;return-1}},function(t,i){t.exports=function(a,c){return a===c||a!=a&&c!=c}},function(t,i,a){var c=a(14)(Object,"create");t.exports=c},function(t,i,a){var c=a(117);t.exports=function(u,f){var p=u.__data__;return c(f)?p[typeof f=="string"?"string":"hash"]:p.map}},function(t,i,a){var c=a(28),u=a(56);t.exports=function(f){return f!=null&&u(f.length)&&!c(f)}},function(t,i,a){var c=a(14)(a(8),"Map");t.exports=c},function(t,i,a){var c=a(17),u=a(10);t.exports=function(f){if(!u(f))return!1;var p=c(f);return p=="[object Function]"||p=="[object GeneratorFunction]"||p=="[object AsyncFunction]"||p=="[object Proxy]"}},function(t,i,a){var c=a(50);t.exports=function(u,f,p){f=="__proto__"&&c?c(u,f,{configurable:!0,enumerable:!0,value:p,writable:!0}):u[f]=p}},function(t,i){t.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(t,i,a){var c=a(124);t.exports=function(u){var f=new u.constructor(u.byteLength);return new c(f).set(new c(u)),f}},function(t,i,a){var c=a(55)(Object.getPrototypeOf,Object);t.exports=c},function(t,i){var a=Object.prototype;t.exports=function(c){var u=c&&c.constructor;return c===(typeof u=="function"&&u.prototype||a)}},function(t,i,a){var c=a(126),u=a(11),f=Object.prototype,p=f.hasOwnProperty,x=f.propertyIsEnumerable,E=c((function(){return arguments})())?c:function(C){return u(C)&&p.call(C,"callee")&&!x.call(C,"callee")};t.exports=E},function(t,i,a){(function(c){var u=a(8),f=a(128),p=i&&!i.nodeType&&i,x=p&&typeof c=="object"&&c&&!c.nodeType&&c,E=x&&x.exports===p?u.Buffer:void 0,C=(E?E.isBuffer:void 0)||f;c.exports=C}).call(this,a(30)(t))},function(t,i){t.exports=function(a){return function(c){return a(c)}}},function(t,i,a){(function(c){var u=a(46),f=i&&!i.nodeType&&i,p=f&&typeof c=="object"&&c&&!c.nodeType&&c,x=p&&p.exports===f&&u.process,E=(function(){try{var C=p&&p.require&&p.require("util").types;return C||x&&x.binding&&x.binding("util")}catch{}})();c.exports=E}).call(this,a(30)(t))},function(t,i){function a(c,u){return t.exports=a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,p){return f.__proto__=p,f},t.exports.__esModule=!0,t.exports.default=t.exports,a(c,u)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(61),u=a(159),f=a(26);t.exports=function(p){return f(p)?c(p):u(p)}},function(t,i,a){var c=a(163),u=a(75),f=Object.prototype.propertyIsEnumerable,p=Object.getOwnPropertySymbols,x=p?function(E){return E==null?[]:(E=Object(E),c(p(E),(function(C){return f.call(E,C)})))}:u;t.exports=x},function(t,i){t.exports=function(a,c){for(var u=-1,f=c.length,p=a.length;++u<f;)a[p+u]=c[u];return a}},function(t,i,a){var c=a(166),u=a(27),f=a(167),p=a(168),x=a(169),E=a(17),C=a(47),A=C(c),B=C(u),L=C(f),F=C(p),H=C(x),J=E;(c&&J(new c(new ArrayBuffer(1)))!="[object DataView]"||u&&J(new u)!="[object Map]"||f&&J(f.resolve())!="[object Promise]"||p&&J(new p)!="[object Set]"||x&&J(new x)!="[object WeakMap]")&&(J=function(Y){var ue=E(Y),K=ue=="[object Object]"?Y.constructor:void 0,me=K?C(K):"";if(me)switch(me){case A:return"[object DataView]";case B:return"[object Map]";case L:return"[object Promise]";case F:return"[object Set]";case H:return"[object WeakMap]"}return ue}),t.exports=J},function(t,i,a){var c=a(12),u=a(180),f=a(181),p=a(184);t.exports=function(x,E){return c(x)?x:u(x,E)?[x]:f(p(x))}},function(t,i,a){var c=a(17),u=a(11);t.exports=function(f){return typeof f=="symbol"||u(f)&&c(f)=="[object Symbol]"}},function(t,i,a){var c=a(21),u=a(97),f=a(98),p=a(99),x=a(100),E=a(101);function C(A){var B=this.__data__=new c(A);this.size=B.size}C.prototype.clear=u,C.prototype.delete=f,C.prototype.get=p,C.prototype.has=x,C.prototype.set=E,t.exports=C},function(t,i,a){(function(c){var u=typeof c=="object"&&c&&c.Object===Object&&c;t.exports=u}).call(this,a(103))},function(t,i){var a=Function.prototype.toString;t.exports=function(c){if(c!=null){try{return a.call(c)}catch{}try{return c+""}catch{}}return""}},function(t,i,a){var c=a(109),u=a(116),f=a(118),p=a(119),x=a(120);function E(C){var A=-1,B=C==null?0:C.length;for(this.clear();++A<B;){var L=C[A];this.set(L[0],L[1])}}E.prototype.clear=c,E.prototype.delete=u,E.prototype.get=f,E.prototype.has=p,E.prototype.set=x,t.exports=E},function(t,i,a){var c=a(29),u=a(23);t.exports=function(f,p,x){(x!==void 0&&!u(f[p],x)||x===void 0&&!(p in f))&&c(f,p,x)}},function(t,i,a){var c=a(14),u=(function(){try{var f=c(Object,"defineProperty");return f({},"",{}),f}catch{}})();t.exports=u},function(t,i,a){(function(c){var u=a(8),f=i&&!i.nodeType&&i,p=f&&typeof c=="object"&&c&&!c.nodeType&&c,x=p&&p.exports===f?u.Buffer:void 0,E=x?x.allocUnsafe:void 0;c.exports=function(C,A){if(A)return C.slice();var B=C.length,L=E?E(B):new C.constructor(B);return C.copy(L),L}}).call(this,a(30)(t))},function(t,i,a){var c=a(31);t.exports=function(u,f){var p=f?c(u.buffer):u.buffer;return new u.constructor(p,u.byteOffset,u.length)}},function(t,i){t.exports=function(a,c){var u=-1,f=a.length;for(c||(c=Array(f));++u<f;)c[u]=a[u];return c}},function(t,i,a){var c=a(125),u=a(32),f=a(33);t.exports=function(p){return typeof p.constructor!="function"||f(p)?{}:c(u(p))}},function(t,i){t.exports=function(a,c){return function(u){return a(c(u))}}},function(t,i){t.exports=function(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=9007199254740991}},function(t,i,a){var c=a(17),u=a(32),f=a(11),p=Function.prototype,x=Object.prototype,E=p.toString,C=x.hasOwnProperty,A=E.call(Object);t.exports=function(B){if(!f(B)||c(B)!="[object Object]")return!1;var L=u(B);if(L===null)return!0;var F=C.call(L,"constructor")&&L.constructor;return typeof F=="function"&&F instanceof F&&E.call(F)==A}},function(t,i,a){var c=a(129),u=a(36),f=a(37),p=f&&f.isTypedArray,x=p?u(p):c;t.exports=x},function(t,i){t.exports=function(a,c){if((c!=="constructor"||typeof a[c]!="function")&&c!="__proto__")return a[c]}},function(t,i,a){var c=a(29),u=a(23),f=Object.prototype.hasOwnProperty;t.exports=function(p,x,E){var C=p[x];f.call(p,x)&&u(C,E)&&(E!==void 0||x in p)||c(p,x,E)}},function(t,i,a){var c=a(131),u=a(34),f=a(12),p=a(35),x=a(62),E=a(58),C=Object.prototype.hasOwnProperty;t.exports=function(A,B){var L=f(A),F=!L&&u(A),H=!L&&!F&&p(A),J=!L&&!F&&!H&&E(A),Y=L||F||H||J,ue=Y?c(A.length,String):[],K=ue.length;for(var me in A)!B&&!C.call(A,me)||Y&&(me=="length"||H&&(me=="offset"||me=="parent")||J&&(me=="buffer"||me=="byteLength"||me=="byteOffset")||x(me,K))||ue.push(me);return ue}},function(t,i){var a=/^(?:0|[1-9]\d*)$/;t.exports=function(c,u){var f=typeof c;return!!(u=u??9007199254740991)&&(f=="number"||f!="symbol"&&a.test(c))&&c>-1&&c%1==0&&c<u}},function(t,i){t.exports=function(a){return a}},function(t,i,a){var c=a(136),u=Math.max;t.exports=function(f,p,x){return p=u(p===void 0?f.length-1:p,0),function(){for(var E=arguments,C=-1,A=u(E.length-p,0),B=Array(A);++C<A;)B[C]=E[p+C];C=-1;for(var L=Array(p+1);++C<p;)L[C]=E[C];return L[p]=x(B),c(f,this,L)}}},function(t,i,a){var c=a(137),u=a(139)(c);t.exports=u},function(t,i,a){var c=a(67);t.exports=function(u,f){if(u){if(typeof u=="string")return c(u,f);var p={}.toString.call(u).slice(8,-1);return p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set"?Array.from(u):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?c(u,f):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){(c==null||c>a.length)&&(c=a.length);for(var u=0,f=Array(c);u<c;u++)f[u]=a[u];return f},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(9).default,u=a(145);t.exports=function(f){var p=u(f,"string");return c(p)=="symbol"?p:p+""},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){this.v=a,this.k=c},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(71);function u(){var f,p,x=typeof Symbol=="function"?Symbol:{},E=x.iterator||"@@iterator",C=x.toStringTag||"@@toStringTag";function A(K,me,xe,q){var V=me&&me.prototype instanceof L?me:L,G=Object.create(V.prototype);return c(G,"_invoke",(function(ne,W,ee){var O,Re,He,te=0,Se=ee||[],Pe=!1,De={p:0,n:0,v:f,a:Ge,f:Ge.bind(f,4),d:function(M,se){return O=M,Re=0,He=f,De.n=se,B}};function Ge(M,se){for(Re=M,He=se,p=0;!Pe&&te&&!ie&&p<Se.length;p++){var ie,he=Se[p],X=De.p,de=he[2];M>3?(ie=de===se)&&(He=he[(Re=he[4])?5:(Re=3,3)],he[4]=he[5]=f):he[0]<=X&&((ie=M<2&&X<he[1])?(Re=0,De.v=se,De.n=he[1]):X<de&&(ie=M<3||he[0]>se||se>de)&&(he[4]=M,he[5]=se,De.n=de,Re=0))}if(ie||M>1)return B;throw Pe=!0,se}return function(M,se,ie){if(te>1)throw TypeError("Generator is already running");for(Pe&&se===1&&Ge(se,ie),Re=se,He=ie;(p=Re<2?f:He)||!Pe;){O||(Re?Re<3?(Re>1&&(De.n=-1),Ge(Re,He)):De.n=He:De.v=He);try{if(te=2,O){if(Re||(M="next"),p=O[M]){if(!(p=p.call(O,He)))throw TypeError("iterator result is not an object");if(!p.done)return p;He=p.value,Re<2&&(Re=0)}else Re===1&&(p=O.return)&&p.call(O),Re<2&&(He=TypeError("The iterator does not provide a '"+M+"' method"),Re=1);O=f}else if((p=(Pe=De.n<0)?He:ne.call(W,De))!==B)break}catch(he){O=f,Re=1,He=he}finally{te=1}}return{value:p,done:Pe}}})(K,xe,q),!0),G}var B={};function L(){}function F(){}function H(){}p=Object.getPrototypeOf;var J=[][E]?p(p([][E]())):(c(p={},E,(function(){return this})),p),Y=H.prototype=L.prototype=Object.create(J);function ue(K){return Object.setPrototypeOf?Object.setPrototypeOf(K,H):(K.__proto__=H,c(K,C,"GeneratorFunction")),K.prototype=Object.create(Y),K}return F.prototype=H,c(Y,"constructor",H),c(H,"constructor",F),F.displayName="GeneratorFunction",c(H,C,"GeneratorFunction"),c(Y),c(Y,C,"Generator"),c(Y,E,(function(){return this})),c(Y,"toString",(function(){return"[object Generator]"})),(t.exports=u=function(){return{w:A,m:ue}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){function a(c,u,f,p){var x=Object.defineProperty;try{x({},"",{})}catch{x=0}t.exports=a=function(E,C,A,B){function L(F,H){a(E,F,(function(J){return this._invoke(F,H,J)}))}C?x?x(E,C,{value:A,enumerable:!B,configurable:!B,writable:!B}):E[C]=A:(L("next",0),L("throw",1),L("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,a(c,u,f,p)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(70),u=a(73);t.exports=function(f,p,x,E,C){return new u(c().w(f,p,x,E),C||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(69),u=a(71);t.exports=function f(p,x){function E(A,B,L,F){try{var H=p[A](B),J=H.value;return J instanceof c?x.resolve(J.v).then((function(Y){E("next",Y,L,F)}),(function(Y){E("throw",Y,L,F)})):x.resolve(J).then((function(Y){H.value=Y,L(H)}),(function(Y){return E("throw",Y,L,F)}))}catch(Y){F(Y)}}var C;this.next||(u(f.prototype),u(f.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),u(this,"_invoke",(function(A,B,L){function F(){return new x((function(H,J){E(A,L,H,J)}))}return C=C?C.then(F,F):F()}),!0)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){for(var u=-1,f=a==null?0:a.length,p=Array(f);++u<f;)p[u]=c(a[u],u,a);return p}},function(t,i){t.exports=function(){return[]}},function(t,i,a){var c=a(41),u=a(32),f=a(40),p=a(75),x=Object.getOwnPropertySymbols?function(E){for(var C=[];E;)c(C,f(E)),E=u(E);return C}:p;t.exports=x},function(t,i,a){var c=a(41),u=a(12);t.exports=function(f,p,x){var E=p(f);return u(f)?E:c(E,x(f))}},function(t,i,a){var c=a(77),u=a(76),f=a(20);t.exports=function(p){return c(p,f,u)}},function(t,i,a){var c=a(44);t.exports=function(u){if(typeof u=="string"||c(u))return u;var f=u+"";return f=="0"&&1/u==-1/0?"-0":f}},function(t,i,a){var c=a(142),u=a(143),f=a(66),p=a(144);t.exports=function(x,E){return c(x)||u(x,E)||f(x,E)||p()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(155);t.exports=function(u,f){if(u==null)return{};var p,x,E=c(u,f);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);for(x=0;x<C.length;x++)p=C[x],f.indexOf(p)===-1&&{}.propertyIsEnumerable.call(u,p)&&(E[p]=u[p])}return E},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(74),u=a(156),f=a(179),p=a(43),x=a(18),E=a(190),C=a(191),A=a(78),B=C((function(L,F){var H={};if(L==null)return H;var J=!1;F=c(F,(function(ue){return ue=p(ue,L),J||(J=ue.length>1),ue})),x(L,A(L),H),J&&(H=u(H,7,E));for(var Y=F.length;Y--;)f(H,F[Y]);return H}));t.exports=B},function(t,i,a){var c=a(1),u=a(38),f=a(195),p=a(196);function x(E){var C=typeof Map=="function"?new Map:void 0;return t.exports=x=function(A){if(A===null||!f(A))return A;if(typeof A!="function")throw new TypeError("Super expression must either be null or a function");if(C!==void 0){if(C.has(A))return C.get(A);C.set(A,B)}function B(){return p(A,arguments,c(this).constructor)}return B.prototype=Object.create(A.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),u(B,A)},t.exports.__esModule=!0,t.exports.default=t.exports,x(E)}t.exports=x,t.exports.__esModule=!0,t.exports.default=t.exports},,,,,,,function(t,i,a){t.exports=a(198)},function(t,i,a){var c=a(45),u=a(49),f=a(121),p=a(123),x=a(10),E=a(20),C=a(59);t.exports=function A(B,L,F,H,J){B!==L&&f(L,(function(Y,ue){if(J||(J=new c),x(Y))p(B,L,ue,F,A,H,J);else{var K=H?H(C(B,ue),Y,ue+"",B,L,J):void 0;K===void 0&&(K=Y),u(B,ue,K)}}),E)}},function(t,i){t.exports=function(){this.__data__=[],this.size=0}},function(t,i,a){var c=a(22),u=Array.prototype.splice;t.exports=function(f){var p=this.__data__,x=c(p,f);return!(x<0)&&(x==p.length-1?p.pop():u.call(p,x,1),--this.size,!0)}},function(t,i,a){var c=a(22);t.exports=function(u){var f=this.__data__,p=c(f,u);return p<0?void 0:f[p][1]}},function(t,i,a){var c=a(22);t.exports=function(u){return c(this.__data__,u)>-1}},function(t,i,a){var c=a(22);t.exports=function(u,f){var p=this.__data__,x=c(p,u);return x<0?(++this.size,p.push([u,f])):p[x][1]=f,this}},function(t,i,a){var c=a(21);t.exports=function(){this.__data__=new c,this.size=0}},function(t,i){t.exports=function(a){var c=this.__data__,u=c.delete(a);return this.size=c.size,u}},function(t,i){t.exports=function(a){return this.__data__.get(a)}},function(t,i){t.exports=function(a){return this.__data__.has(a)}},function(t,i,a){var c=a(21),u=a(27),f=a(48);t.exports=function(p,x){var E=this.__data__;if(E instanceof c){var C=E.__data__;if(!u||C.length<199)return C.push([p,x]),this.size=++E.size,this;E=this.__data__=new f(C)}return E.set(p,x),this.size=E.size,this}},function(t,i,a){var c=a(28),u=a(106),f=a(10),p=a(47),x=/^\[object .+?Constructor\]$/,E=Function.prototype,C=Object.prototype,A=E.toString,B=C.hasOwnProperty,L=RegExp("^"+A.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(F){return!(!f(F)||u(F))&&(c(F)?L:x).test(p(F))}},function(t,i){var a;a=(function(){return this})();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}t.exports=a},function(t,i,a){var c=a(19),u=Object.prototype,f=u.hasOwnProperty,p=u.toString,x=c?c.toStringTag:void 0;t.exports=function(E){var C=f.call(E,x),A=E[x];try{E[x]=void 0;var B=!0}catch{}var L=p.call(E);return B&&(C?E[x]=A:delete E[x]),L}},function(t,i){var a=Object.prototype.toString;t.exports=function(c){return a.call(c)}},function(t,i,a){var c,u=a(107),f=(c=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";t.exports=function(p){return!!f&&f in p}},function(t,i,a){var c=a(8)["__core-js_shared__"];t.exports=c},function(t,i){t.exports=function(a,c){return a?.[c]}},function(t,i,a){var c=a(110),u=a(21),f=a(27);t.exports=function(){this.size=0,this.__data__={hash:new c,map:new(f||u),string:new c}}},function(t,i,a){var c=a(111),u=a(112),f=a(113),p=a(114),x=a(115);function E(C){var A=-1,B=C==null?0:C.length;for(this.clear();++A<B;){var L=C[A];this.set(L[0],L[1])}}E.prototype.clear=c,E.prototype.delete=u,E.prototype.get=f,E.prototype.has=p,E.prototype.set=x,t.exports=E},function(t,i,a){var c=a(24);t.exports=function(){this.__data__=c?c(null):{},this.size=0}},function(t,i){t.exports=function(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}},function(t,i,a){var c=a(24),u=Object.prototype.hasOwnProperty;t.exports=function(f){var p=this.__data__;if(c){var x=p[f];return x==="__lodash_hash_undefined__"?void 0:x}return u.call(p,f)?p[f]:void 0}},function(t,i,a){var c=a(24),u=Object.prototype.hasOwnProperty;t.exports=function(f){var p=this.__data__;return c?p[f]!==void 0:u.call(p,f)}},function(t,i,a){var c=a(24);t.exports=function(u,f){var p=this.__data__;return this.size+=this.has(u)?0:1,p[u]=c&&f===void 0?"__lodash_hash_undefined__":f,this}},function(t,i,a){var c=a(25);t.exports=function(u){var f=c(this,u).delete(u);return this.size-=f?1:0,f}},function(t,i){t.exports=function(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}},function(t,i,a){var c=a(25);t.exports=function(u){return c(this,u).get(u)}},function(t,i,a){var c=a(25);t.exports=function(u){return c(this,u).has(u)}},function(t,i,a){var c=a(25);t.exports=function(u,f){var p=c(this,u),x=p.size;return p.set(u,f),this.size+=p.size==x?0:1,this}},function(t,i,a){var c=a(122)();t.exports=c},function(t,i){t.exports=function(a){return function(c,u,f){for(var p=-1,x=Object(c),E=f(c),C=E.length;C--;){var A=E[a?C:++p];if(u(x[A],A,x)===!1)break}return c}}},function(t,i,a){var c=a(49),u=a(51),f=a(52),p=a(53),x=a(54),E=a(34),C=a(12),A=a(127),B=a(35),L=a(28),F=a(10),H=a(57),J=a(58),Y=a(59),ue=a(130);t.exports=function(K,me,xe,q,V,G,ne){var W=Y(K,xe),ee=Y(me,xe),O=ne.get(ee);if(O)c(K,xe,O);else{var Re=G?G(W,ee,xe+"",K,me,ne):void 0,He=Re===void 0;if(He){var te=C(ee),Se=!te&&B(ee),Pe=!te&&!Se&&J(ee);Re=ee,te||Se||Pe?C(W)?Re=W:A(W)?Re=p(W):Se?(He=!1,Re=u(ee,!0)):Pe?(He=!1,Re=f(ee,!0)):Re=[]:H(ee)||E(ee)?(Re=W,E(W)?Re=ue(W):F(W)&&!L(W)||(Re=x(ee))):He=!1}He&&(ne.set(ee,Re),V(Re,ee,q,G,ne),ne.delete(ee)),c(K,xe,Re)}}},function(t,i,a){var c=a(8).Uint8Array;t.exports=c},function(t,i,a){var c=a(10),u=Object.create,f=(function(){function p(){}return function(x){if(!c(x))return{};if(u)return u(x);p.prototype=x;var E=new p;return p.prototype=void 0,E}})();t.exports=f},function(t,i,a){var c=a(17),u=a(11);t.exports=function(f){return u(f)&&c(f)=="[object Arguments]"}},function(t,i,a){var c=a(26),u=a(11);t.exports=function(f){return u(f)&&c(f)}},function(t,i){t.exports=function(){return!1}},function(t,i,a){var c=a(17),u=a(56),f=a(11),p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p["[object Arguments]"]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p["[object Function]"]=p["[object Map]"]=p["[object Number]"]=p["[object Object]"]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1,t.exports=function(x){return f(x)&&u(x.length)&&!!p[c(x)]}},function(t,i,a){var c=a(18),u=a(20);t.exports=function(f){return c(f,u(f))}},function(t,i){t.exports=function(a,c){for(var u=-1,f=Array(a);++u<a;)f[u]=c(u);return f}},function(t,i,a){var c=a(10),u=a(33),f=a(133),p=Object.prototype.hasOwnProperty;t.exports=function(x){if(!c(x))return f(x);var E=u(x),C=[];for(var A in x)(A!="constructor"||!E&&p.call(x,A))&&C.push(A);return C}},function(t,i){t.exports=function(a){var c=[];if(a!=null)for(var u in Object(a))c.push(u);return c}},function(t,i,a){var c=a(135),u=a(140);t.exports=function(f){return c((function(p,x){var E=-1,C=x.length,A=C>1?x[C-1]:void 0,B=C>2?x[2]:void 0;for(A=f.length>3&&typeof A=="function"?(C--,A):void 0,B&&u(x[0],x[1],B)&&(A=C<3?void 0:A,C=1),p=Object(p);++E<C;){var L=x[E];L&&f(p,L,E,A)}return p}))}},function(t,i,a){var c=a(63),u=a(64),f=a(65);t.exports=function(p,x){return f(u(p,x,c),p+"")}},function(t,i){t.exports=function(a,c,u){switch(u.length){case 0:return a.call(c);case 1:return a.call(c,u[0]);case 2:return a.call(c,u[0],u[1]);case 3:return a.call(c,u[0],u[1],u[2])}return a.apply(c,u)}},function(t,i,a){var c=a(138),u=a(50),f=a(63),p=u?function(x,E){return u(x,"toString",{configurable:!0,enumerable:!1,value:c(E),writable:!0})}:f;t.exports=p},function(t,i){t.exports=function(a){return function(){return a}}},function(t,i){var a=Date.now;t.exports=function(c){var u=0,f=0;return function(){var p=a(),x=16-(p-f);if(f=p,x>0){if(++u>=800)return arguments[0]}else u=0;return c.apply(void 0,arguments)}}},function(t,i,a){var c=a(23),u=a(26),f=a(62),p=a(10);t.exports=function(x,E,C){if(!p(C))return!1;var A=typeof E;return!!(A=="number"?u(C)&&f(E,C.length):A=="string"&&E in C)&&c(C[E],x)}},function(t,i){typeof window<"u"&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)})),typeof Math.imul!="function"&&(Math.imul=function(a,c){var u=65535&a,f=65535&c;return u*f+((a>>>16&65535)*f+u*(c>>>16&65535)<<16>>>0)|0}),typeof Object.assign!="function"&&(Object.assign=function(a){if(a===null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),u=1;u<arguments.length;u++){var f=arguments[u];if(f!==null)for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(c[p]=f[p])}return c})},function(t,i){t.exports=function(a){if(Array.isArray(a))return a},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){var u=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(u!=null){var f,p,x,E,C=[],A=!0,B=!1;try{if(x=(u=u.call(a)).next,c===0){if(Object(u)!==u)return;A=!1}else for(;!(A=(f=x.call(u)).done)&&(C.push(f.value),C.length!==c);A=!0);}catch(L){B=!0,p=L}finally{try{if(!A&&u.return!=null&&(E=u.return(),Object(E)!==E))return}finally{if(B)throw p}}return C}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(9).default;t.exports=function(u,f){if(c(u)!="object"||!u)return u;var p=u[Symbol.toPrimitive];if(p!==void 0){var x=p.call(u,f||"default");if(c(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(u)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(69),u=a(70),f=a(147),p=a(72),x=a(73),E=a(148),C=a(149);function A(){var B=u(),L=B.m(A),F=(Object.getPrototypeOf?Object.getPrototypeOf(L):L.__proto__).constructor;function H(ue){var K=typeof ue=="function"&&ue.constructor;return!!K&&(K===F||(K.displayName||K.name)==="GeneratorFunction")}var J={throw:1,return:2,break:3,continue:3};function Y(ue){var K,me;return function(xe){K||(K={stop:function(){return me(xe.a,2)},catch:function(){return xe.v},abrupt:function(q,V){return me(xe.a,J[q],V)},delegateYield:function(q,V,G){return K.resultName=V,me(xe.d,C(q),G)},finish:function(q){return me(xe.f,q)}},me=function(q,V,G){xe.p=K.prev,xe.n=K.next;try{return q(V,G)}finally{K.next=xe.n}}),K.resultName&&(K[K.resultName]=xe.v,K.resultName=void 0),K.sent=xe.v,K.next=xe.n;try{return ue.call(this,K)}finally{xe.p=K.prev,xe.n=K.next}}}return(t.exports=A=function(){return{wrap:function(ue,K,me,xe){return B.w(Y(ue),K,me,xe&&xe.reverse())},isGeneratorFunction:H,mark:B.m,awrap:function(ue,K){return new c(ue,K)},AsyncIterator:x,async:function(ue,K,me,xe,q){return(H(K)?p:f)(Y(ue),K,me,xe,q)},keys:E,values:C}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=A,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(72);t.exports=function(u,f,p,x,E){var C=c(u,f,p,x,E);return C.next().then((function(A){return A.done?A.value:C.next()}))},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a){var c=Object(a),u=[];for(var f in c)u.unshift(f);return function p(){for(;u.length;)if((f=u.pop())in c)return p.value=f,p.done=!1,p;return p.done=!0,p}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(9).default;t.exports=function(u){if(u!=null){var f=u[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],p=0;if(f)return f.call(u);if(typeof u.next=="function")return u;if(!isNaN(u.length))return{next:function(){return u&&p>=u.length&&(u=void 0),{value:u&&u[p++],done:!u}}}}throw new TypeError(c(u)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(1);t.exports=function(u,f){for(;!{}.hasOwnProperty.call(u,f)&&(u=c(u))!==null;);return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(67);t.exports=function(u){if(Array.isArray(u))return c(u)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){if(a==null)return{};var u={};for(var f in a)if({}.hasOwnProperty.call(a,f)){if(c.indexOf(f)!==-1)continue;u[f]=a[f]}return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(45),u=a(157),f=a(60),p=a(158),x=a(161),E=a(51),C=a(53),A=a(162),B=a(164),L=a(165),F=a(78),H=a(42),J=a(170),Y=a(171),ue=a(54),K=a(12),me=a(35),xe=a(175),q=a(10),V=a(177),G=a(39),ne=a(20),W={};W["[object Arguments]"]=W["[object Array]"]=W["[object ArrayBuffer]"]=W["[object DataView]"]=W["[object Boolean]"]=W["[object Date]"]=W["[object Float32Array]"]=W["[object Float64Array]"]=W["[object Int8Array]"]=W["[object Int16Array]"]=W["[object Int32Array]"]=W["[object Map]"]=W["[object Number]"]=W["[object Object]"]=W["[object RegExp]"]=W["[object Set]"]=W["[object String]"]=W["[object Symbol]"]=W["[object Uint8Array]"]=W["[object Uint8ClampedArray]"]=W["[object Uint16Array]"]=W["[object Uint32Array]"]=!0,W["[object Error]"]=W["[object Function]"]=W["[object WeakMap]"]=!1,t.exports=function ee(O,Re,He,te,Se,Pe){var De,Ge=1&Re,M=2&Re,se=4&Re;if(He&&(De=Se?He(O,te,Se,Pe):He(O)),De!==void 0)return De;if(!q(O))return O;var ie=K(O);if(ie){if(De=J(O),!Ge)return C(O,De)}else{var he=H(O),X=he=="[object Function]"||he=="[object GeneratorFunction]";if(me(O))return E(O,Ge);if(he=="[object Object]"||he=="[object Arguments]"||X&&!Se){if(De=M||X?{}:ue(O),!Ge)return M?B(O,x(De,O)):A(O,p(De,O))}else{if(!W[he])return Se?O:{};De=Y(O,he,Ge)}}Pe||(Pe=new c);var de=Pe.get(O);if(de)return de;Pe.set(O,De),V(O)?O.forEach((function(Le){De.add(ee(Le,Re,He,Le,O,Pe))})):xe(O)&&O.forEach((function(Le,ze){De.set(ze,ee(Le,Re,He,ze,O,Pe))}));var ye=ie?void 0:(se?M?F:L:M?ne:G)(O);return u(ye||O,(function(Le,ze){ye&&(Le=O[ze=Le]),f(De,ze,ee(Le,Re,He,ze,O,Pe))})),De}},function(t,i){t.exports=function(a,c){for(var u=-1,f=a==null?0:a.length;++u<f&&c(a[u],u,a)!==!1;);return a}},function(t,i,a){var c=a(18),u=a(39);t.exports=function(f,p){return f&&c(p,u(p),f)}},function(t,i,a){var c=a(33),u=a(160),f=Object.prototype.hasOwnProperty;t.exports=function(p){if(!c(p))return u(p);var x=[];for(var E in Object(p))f.call(p,E)&&E!="constructor"&&x.push(E);return x}},function(t,i,a){var c=a(55)(Object.keys,Object);t.exports=c},function(t,i,a){var c=a(18),u=a(20);t.exports=function(f,p){return f&&c(p,u(p),f)}},function(t,i,a){var c=a(18),u=a(40);t.exports=function(f,p){return c(f,u(f),p)}},function(t,i){t.exports=function(a,c){for(var u=-1,f=a==null?0:a.length,p=0,x=[];++u<f;){var E=a[u];c(E,u,a)&&(x[p++]=E)}return x}},function(t,i,a){var c=a(18),u=a(76);t.exports=function(f,p){return c(f,u(f),p)}},function(t,i,a){var c=a(77),u=a(40),f=a(39);t.exports=function(p){return c(p,f,u)}},function(t,i,a){var c=a(14)(a(8),"DataView");t.exports=c},function(t,i,a){var c=a(14)(a(8),"Promise");t.exports=c},function(t,i,a){var c=a(14)(a(8),"Set");t.exports=c},function(t,i,a){var c=a(14)(a(8),"WeakMap");t.exports=c},function(t,i){var a=Object.prototype.hasOwnProperty;t.exports=function(c){var u=c.length,f=new c.constructor(u);return u&&typeof c[0]=="string"&&a.call(c,"index")&&(f.index=c.index,f.input=c.input),f}},function(t,i,a){var c=a(31),u=a(172),f=a(173),p=a(174),x=a(52);t.exports=function(E,C,A){var B=E.constructor;switch(C){case"[object ArrayBuffer]":return c(E);case"[object Boolean]":case"[object Date]":return new B(+E);case"[object DataView]":return u(E,A);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return x(E,A);case"[object Map]":return new B;case"[object Number]":case"[object String]":return new B(E);case"[object RegExp]":return f(E);case"[object Set]":return new B;case"[object Symbol]":return p(E)}}},function(t,i,a){var c=a(31);t.exports=function(u,f){var p=f?c(u.buffer):u.buffer;return new u.constructor(p,u.byteOffset,u.byteLength)}},function(t,i){var a=/\w*$/;t.exports=function(c){var u=new c.constructor(c.source,a.exec(c));return u.lastIndex=c.lastIndex,u}},function(t,i,a){var c=a(19),u=c?c.prototype:void 0,f=u?u.valueOf:void 0;t.exports=function(p){return f?Object(f.call(p)):{}}},function(t,i,a){var c=a(176),u=a(36),f=a(37),p=f&&f.isMap,x=p?u(p):c;t.exports=x},function(t,i,a){var c=a(42),u=a(11);t.exports=function(f){return u(f)&&c(f)=="[object Map]"}},function(t,i,a){var c=a(178),u=a(36),f=a(37),p=f&&f.isSet,x=p?u(p):c;t.exports=x},function(t,i,a){var c=a(42),u=a(11);t.exports=function(f){return u(f)&&c(f)=="[object Set]"}},function(t,i,a){var c=a(43),u=a(186),f=a(187),p=a(79);t.exports=function(x,E){return E=c(E,x),(x=f(x,E))==null||delete x[p(u(E))]}},function(t,i,a){var c=a(12),u=a(44),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p=/^\w*$/;t.exports=function(x,E){if(c(x))return!1;var C=typeof x;return!(C!="number"&&C!="symbol"&&C!="boolean"&&x!=null&&!u(x))||p.test(x)||!f.test(x)||E!=null&&x in Object(E)}},function(t,i,a){var c=a(182),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,p=c((function(x){var E=[];return x.charCodeAt(0)===46&&E.push(""),x.replace(u,(function(C,A,B,L){E.push(B?L.replace(f,"$1"):A||C)})),E}));t.exports=p},function(t,i,a){var c=a(183);t.exports=function(u){var f=c(u,(function(x){return p.size===500&&p.clear(),x})),p=f.cache;return f}},function(t,i,a){var c=a(48);function u(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new TypeError("Expected a function");var x=function(){var E=arguments,C=p?p.apply(this,E):E[0],A=x.cache;if(A.has(C))return A.get(C);var B=f.apply(this,E);return x.cache=A.set(C,B)||A,B};return x.cache=new(u.Cache||c),x}u.Cache=c,t.exports=u},function(t,i,a){var c=a(185);t.exports=function(u){return u==null?"":c(u)}},function(t,i,a){var c=a(19),u=a(74),f=a(12),p=a(44),x=c?c.prototype:void 0,E=x?x.toString:void 0;t.exports=function C(A){if(typeof A=="string")return A;if(f(A))return u(A,C)+"";if(p(A))return E?E.call(A):"";var B=A+"";return B=="0"&&1/A==-1/0?"-0":B}},function(t,i){t.exports=function(a){var c=a==null?0:a.length;return c?a[c-1]:void 0}},function(t,i,a){var c=a(188),u=a(189);t.exports=function(f,p){return p.length<2?f:c(f,u(p,0,-1))}},function(t,i,a){var c=a(43),u=a(79);t.exports=function(f,p){for(var x=0,E=(p=c(p,f)).length;f!=null&&x<E;)f=f[u(p[x++])];return x&&x==E?f:void 0}},function(t,i){t.exports=function(a,c,u){var f=-1,p=a.length;c<0&&(c=-c>p?0:p+c),(u=u>p?p:u)<0&&(u+=p),p=c>u?0:u-c>>>0,c>>>=0;for(var x=Array(p);++f<p;)x[f]=a[f+c];return x}},function(t,i,a){var c=a(57);t.exports=function(u){return c(u)?void 0:u}},function(t,i,a){var c=a(192),u=a(64),f=a(65);t.exports=function(p){return f(u(p,void 0,c),p+"")}},function(t,i,a){var c=a(193);t.exports=function(u){return u!=null&&u.length?c(u,1):[]}},function(t,i,a){var c=a(41),u=a(194);t.exports=function f(p,x,E,C,A){var B=-1,L=p.length;for(E||(E=u),A||(A=[]);++B<L;){var F=p[B];x>0&&E(F)?x>1?f(F,x-1,E,C,A):c(A,F):C||(A[A.length]=F)}return A}},function(t,i,a){var c=a(19),u=a(34),f=a(12),p=c?c.isConcatSpreadable:void 0;t.exports=function(x){return f(x)||u(x)||!!(p&&x&&x[p])}},function(t,i){t.exports=function(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(197),u=a(38);t.exports=function(f,p,x){if(c())return Reflect.construct.apply(null,arguments);var E=[null];E.push.apply(E,p);var C=new(f.bind.apply(f,E));return x&&u(C,x.prototype),C},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){function a(){try{var c=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(t.exports=a=function(){return!!c},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){a.r(i),a.d(i,"BarcodeDecoder",(function(){return wl})),a.d(i,"Readers",(function(){return p})),a.d(i,"CameraAccess",(function(){return go})),a.d(i,"ImageDebug",(function(){return Ws})),a.d(i,"ImageWrapper",(function(){return cn})),a.d(i,"ResultCollector",(function(){return Xs}));var c={};a.r(c),a.d(c,"create",(function(){return V})),a.d(c,"clone",(function(){return G})),a.d(c,"copy",(function(){return ne})),a.d(c,"identity",(function(){return W})),a.d(c,"fromValues",(function(){return ee})),a.d(c,"set",(function(){return O})),a.d(c,"transpose",(function(){return Re})),a.d(c,"invert",(function(){return He})),a.d(c,"adjoint",(function(){return te})),a.d(c,"determinant",(function(){return Se})),a.d(c,"multiply",(function(){return Pe})),a.d(c,"rotate",(function(){return De})),a.d(c,"scale",(function(){return Ge})),a.d(c,"fromRotation",(function(){return M})),a.d(c,"fromScaling",(function(){return se})),a.d(c,"str",(function(){return ie})),a.d(c,"frob",(function(){return he})),a.d(c,"LDU",(function(){return X})),a.d(c,"add",(function(){return de})),a.d(c,"subtract",(function(){return ye})),a.d(c,"exactEquals",(function(){return Le})),a.d(c,"equals",(function(){return ze})),a.d(c,"multiplyScalar",(function(){return rt})),a.d(c,"multiplyScalarAndAdd",(function(){return je})),a.d(c,"mul",(function(){return Ct})),a.d(c,"sub",(function(){return rn}));var u={};a.r(u),a.d(u,"create",(function(){return Wt})),a.d(u,"clone",(function(){return Ut})),a.d(u,"fromValues",(function(){return vt})),a.d(u,"copy",(function(){return it})),a.d(u,"set",(function(){return It})),a.d(u,"add",(function(){return Mt})),a.d(u,"subtract",(function(){return Ot})),a.d(u,"multiply",(function(){return br})),a.d(u,"divide",(function(){return xn})),a.d(u,"ceil",(function(){return Or})),a.d(u,"floor",(function(){return Lt})),a.d(u,"min",(function(){return Tr})),a.d(u,"max",(function(){return Ss})),a.d(u,"round",(function(){return Wr})),a.d(u,"scale",(function(){return _r})),a.d(u,"scaleAndAdd",(function(){return ui})),a.d(u,"distance",(function(){return Yr})),a.d(u,"squaredDistance",(function(){return Mn})),a.d(u,"length",(function(){return Xn})),a.d(u,"squaredLength",(function(){return Rn})),a.d(u,"negate",(function(){return on})),a.d(u,"inverse",(function(){return Fn})),a.d(u,"normalize",(function(){return ln})),a.d(u,"dot",(function(){return is})),a.d(u,"cross",(function(){return Cn})),a.d(u,"lerp",(function(){return ge})),a.d(u,"random",(function(){return Te})),a.d(u,"transformMat2",(function(){return Je})),a.d(u,"transformMat2d",(function(){return tt})),a.d(u,"transformMat3",(function(){return yt})),a.d(u,"transformMat4",(function(){return yn})),a.d(u,"rotate",(function(){return Kt})),a.d(u,"angle",(function(){return xr})),a.d(u,"signedAngle",(function(){return Jn})),a.d(u,"zero",(function(){return wn})),a.d(u,"str",(function(){return Nn})),a.d(u,"exactEquals",(function(){return hr})),a.d(u,"equals",(function(){return pe})),a.d(u,"len",(function(){return $e})),a.d(u,"sub",(function(){return Z})),a.d(u,"mul",(function(){return ke})),a.d(u,"div",(function(){return We})),a.d(u,"dist",(function(){return Qe})),a.d(u,"sqrDist",(function(){return lt})),a.d(u,"sqrLen",(function(){return ct})),a.d(u,"forEach",(function(){return _t}));var f={};a.r(f),a.d(f,"create",(function(){return On})),a.d(f,"clone",(function(){return Zn})),a.d(f,"length",(function(){return Cr})),a.d(f,"fromValues",(function(){return Bs})),a.d(f,"copy",(function(){return hi})),a.d(f,"set",(function(){return as})),a.d(f,"add",(function(){return di})),a.d(f,"subtract",(function(){return bt})),a.d(f,"multiply",(function(){return qn})),a.d(f,"divide",(function(){return er})),a.d(f,"ceil",(function(){return zs})),a.d(f,"floor",(function(){return Ln})),a.d(f,"min",(function(){return al})),a.d(f,"max",(function(){return ol})),a.d(f,"round",(function(){return Fs})),a.d(f,"scale",(function(){return qs})),a.d(f,"scaleAndAdd",(function(){return ll})),a.d(f,"distance",(function(){return eo})),a.d(f,"squaredDistance",(function(){return to})),a.d(f,"squaredLength",(function(){return cl})),a.d(f,"negate",(function(){return no})),a.d(f,"inverse",(function(){return Qr})),a.d(f,"normalize",(function(){return Pn})),a.d(f,"dot",(function(){return Vn})),a.d(f,"cross",(function(){return Mi})),a.d(f,"lerp",(function(){return ul})),a.d(f,"slerp",(function(){return en})),a.d(f,"hermite",(function(){return ca})),a.d(f,"bezier",(function(){return Hs})),a.d(f,"random",(function(){return ua})),a.d(f,"transformMat4",(function(){return Lr})),a.d(f,"transformMat3",(function(){return ro})),a.d(f,"transformQuat",(function(){return Xl})),a.d(f,"rotateX",(function(){return hl})),a.d(f,"rotateY",(function(){return Oi})),a.d(f,"rotateZ",(function(){return Jl})),a.d(f,"angle",(function(){return Li})),a.d(f,"zero",(function(){return Pr})),a.d(f,"str",(function(){return Zl})),a.d(f,"exactEquals",(function(){return dl})),a.d(f,"equals",(function(){return fl})),a.d(f,"sub",(function(){return so})),a.d(f,"mul",(function(){return ec})),a.d(f,"div",(function(){return Pi})),a.d(f,"dist",(function(){return io})),a.d(f,"sqrDist",(function(){return Es})),a.d(f,"len",(function(){return ml})),a.d(f,"sqrLen",(function(){return os})),a.d(f,"forEach",(function(){return Vi}));var p={};a.r(p),a.d(p,"BarcodeReader",(function(){return Xr})),a.d(p,"TwoOfFiveReader",(function(){return yl})),a.d(p,"NewCodabarReader",(function(){return wr})),a.d(p,"Code128Reader",(function(){return bl})),a.d(p,"Code32Reader",(function(){return Yt})),a.d(p,"Code39Reader",(function(){return Ye})),a.d(p,"Code39VINReader",(function(){return cs})),a.d(p,"Code93Reader",(function(){return ga})),a.d(p,"EAN2Reader",(function(){return uu})),a.d(p,"EAN5Reader",(function(){return fu})),a.d(p,"EAN8Reader",(function(){return mu})),a.d(p,"EANReader",(function(){return Ns})),a.d(p,"I2of5Reader",(function(){return Gh})),a.d(p,"PharmacodeReader",(function(){return ic})),a.d(p,"UPCEReader",(function(){return ac})),a.d(p,"UPCReader",(function(){return va}));var x=a(9),E=a.n(x),C=a(15),A=a.n(C),B=(a(141),a(80)),L=a.n(B),F=a(2),H=a.n(F),J=a(3),Y=a.n(J),ue=a(0),K=a.n(ue),me=typeof Float32Array<"u"?Float32Array:Array,xe=Math.random;function q(g){return g>=0?Math.round(g):g%.5==0?Math.floor(g):Math.round(g)}function V(){var g=new me(4);return me!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}function G(g){var b=new me(4);return b[0]=g[0],b[1]=g[1],b[2]=g[2],b[3]=g[3],b}function ne(g,b){return g[0]=b[0],g[1]=b[1],g[2]=b[2],g[3]=b[3],g}function W(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=1,g}function ee(g,b,d,v){var _=new me(4);return _[0]=g,_[1]=b,_[2]=d,_[3]=v,_}function O(g,b,d,v,_){return g[0]=b,g[1]=d,g[2]=v,g[3]=_,g}function Re(g,b){if(g===b){var d=b[1];g[1]=b[2],g[2]=d}else g[0]=b[0],g[1]=b[2],g[2]=b[1],g[3]=b[3];return g}function He(g,b){var d=b[0],v=b[1],_=b[2],S=b[3],T=d*S-_*v;return T?(T=1/T,g[0]=S*T,g[1]=-v*T,g[2]=-_*T,g[3]=d*T,g):null}function te(g,b){var d=b[0];return g[0]=b[3],g[1]=-b[1],g[2]=-b[2],g[3]=d,g}function Se(g){return g[0]*g[3]-g[2]*g[1]}function Pe(g,b,d){var v=b[0],_=b[1],S=b[2],T=b[3],k=d[0],D=d[1],I=d[2],U=d[3];return g[0]=v*k+S*D,g[1]=_*k+T*D,g[2]=v*I+S*U,g[3]=_*I+T*U,g}function De(g,b,d){var v=b[0],_=b[1],S=b[2],T=b[3],k=Math.sin(d),D=Math.cos(d);return g[0]=v*D+S*k,g[1]=_*D+T*k,g[2]=v*-k+S*D,g[3]=_*-k+T*D,g}function Ge(g,b,d){var v=b[0],_=b[1],S=b[2],T=b[3],k=d[0],D=d[1];return g[0]=v*k,g[1]=_*k,g[2]=S*D,g[3]=T*D,g}function M(g,b){var d=Math.sin(b),v=Math.cos(b);return g[0]=v,g[1]=d,g[2]=-d,g[3]=v,g}function se(g,b){return g[0]=b[0],g[1]=0,g[2]=0,g[3]=b[1],g}function ie(g){return"mat2("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+")"}function he(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]+g[3]*g[3])}function X(g,b,d,v){return g[2]=v[2]/v[0],d[0]=v[0],d[1]=v[1],d[3]=v[3]-g[2]*d[1],[g,b,d]}function de(g,b,d){return g[0]=b[0]+d[0],g[1]=b[1]+d[1],g[2]=b[2]+d[2],g[3]=b[3]+d[3],g}function ye(g,b,d){return g[0]=b[0]-d[0],g[1]=b[1]-d[1],g[2]=b[2]-d[2],g[3]=b[3]-d[3],g}function Le(g,b){return g[0]===b[0]&&g[1]===b[1]&&g[2]===b[2]&&g[3]===b[3]}function ze(g,b){var d=g[0],v=g[1],_=g[2],S=g[3],T=b[0],k=b[1],D=b[2],I=b[3];return Math.abs(d-T)<=1e-6*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(v-k)<=1e-6*Math.max(1,Math.abs(v),Math.abs(k))&&Math.abs(_-D)<=1e-6*Math.max(1,Math.abs(_),Math.abs(D))&&Math.abs(S-I)<=1e-6*Math.max(1,Math.abs(S),Math.abs(I))}function rt(g,b,d){return g[0]=b[0]*d,g[1]=b[1]*d,g[2]=b[2]*d,g[3]=b[3]*d,g}function je(g,b,d,v){return g[0]=b[0]+d[0]*v,g[1]=b[1]+d[1]*v,g[2]=b[2]+d[2]*v,g[3]=b[3]+d[3]*v,g}var Ct=Pe,rn=ye;function Wt(){var g=new me(2);return me!=Float32Array&&(g[0]=0,g[1]=0),g}function Ut(g){var b=new me(2);return b[0]=g[0],b[1]=g[1],b}function vt(g,b){var d=new me(2);return d[0]=g,d[1]=b,d}function it(g,b){return g[0]=b[0],g[1]=b[1],g}function It(g,b,d){return g[0]=b,g[1]=d,g}function Mt(g,b,d){return g[0]=b[0]+d[0],g[1]=b[1]+d[1],g}function Ot(g,b,d){return g[0]=b[0]-d[0],g[1]=b[1]-d[1],g}function br(g,b,d){return g[0]=b[0]*d[0],g[1]=b[1]*d[1],g}function xn(g,b,d){return g[0]=b[0]/d[0],g[1]=b[1]/d[1],g}function Or(g,b){return g[0]=Math.ceil(b[0]),g[1]=Math.ceil(b[1]),g}function Lt(g,b){return g[0]=Math.floor(b[0]),g[1]=Math.floor(b[1]),g}function Tr(g,b,d){return g[0]=Math.min(b[0],d[0]),g[1]=Math.min(b[1],d[1]),g}function Ss(g,b,d){return g[0]=Math.max(b[0],d[0]),g[1]=Math.max(b[1],d[1]),g}function Wr(g,b){return g[0]=q(b[0]),g[1]=q(b[1]),g}function _r(g,b,d){return g[0]=b[0]*d,g[1]=b[1]*d,g}function ui(g,b,d,v){return g[0]=b[0]+d[0]*v,g[1]=b[1]+d[1]*v,g}function Yr(g,b){var d=b[0]-g[0],v=b[1]-g[1];return Math.sqrt(d*d+v*v)}function Mn(g,b){var d=b[0]-g[0],v=b[1]-g[1];return d*d+v*v}function Xn(g){var b=g[0],d=g[1];return Math.sqrt(b*b+d*d)}function Rn(g){var b=g[0],d=g[1];return b*b+d*d}function on(g,b){return g[0]=-b[0],g[1]=-b[1],g}function Fn(g,b){return g[0]=1/b[0],g[1]=1/b[1],g}function ln(g,b){var d=b[0],v=b[1],_=d*d+v*v;return _>0&&(_=1/Math.sqrt(_)),g[0]=b[0]*_,g[1]=b[1]*_,g}function is(g,b){return g[0]*b[0]+g[1]*b[1]}function Cn(g,b,d){var v=b[0]*d[1]-b[1]*d[0];return g[0]=g[1]=0,g[2]=v,g}function ge(g,b,d,v){var _=b[0],S=b[1];return g[0]=_+v*(d[0]-_),g[1]=S+v*(d[1]-S),g}function Te(g,b){b=b===void 0?1:b;var d=2*xe()*Math.PI;return g[0]=Math.cos(d)*b,g[1]=Math.sin(d)*b,g}function Je(g,b,d){var v=b[0],_=b[1];return g[0]=d[0]*v+d[2]*_,g[1]=d[1]*v+d[3]*_,g}function tt(g,b,d){var v=b[0],_=b[1];return g[0]=d[0]*v+d[2]*_+d[4],g[1]=d[1]*v+d[3]*_+d[5],g}function yt(g,b,d){var v=b[0],_=b[1];return g[0]=d[0]*v+d[3]*_+d[6],g[1]=d[1]*v+d[4]*_+d[7],g}function yn(g,b,d){var v=b[0],_=b[1];return g[0]=d[0]*v+d[4]*_+d[12],g[1]=d[1]*v+d[5]*_+d[13],g}function Kt(g,b,d,v){var _=b[0]-d[0],S=b[1]-d[1],T=Math.sin(v),k=Math.cos(v);return g[0]=_*k-S*T+d[0],g[1]=_*T+S*k+d[1],g}function xr(g,b){var d=g[0],v=g[1],_=b[0],S=b[1];return Math.abs(Math.atan2(v*_-d*S,d*_+v*S))}function Jn(g,b){var d=g[0],v=g[1],_=b[0],S=b[1];return Math.atan2(d*S-v*_,d*_+v*S)}function wn(g){return g[0]=0,g[1]=0,g}function Nn(g){return"vec2("+g[0]+", "+g[1]+")"}function hr(g,b){return g[0]===b[0]&&g[1]===b[1]}function pe(g,b){var d=g[0],v=g[1],_=b[0],S=b[1];return Math.abs(d-_)<=1e-6*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(v-S)<=1e-6*Math.max(1,Math.abs(v),Math.abs(S))}var Ue,$e=Xn,Z=Ot,ke=br,We=xn,Qe=Yr,lt=Mn,ct=Rn,_t=(Ue=Wt(),function(g,b,d,v,_,S){var T,k;for(b||(b=2),d||(d=0),k=v?Math.min(v*b+d,g.length):g.length,T=d;T<k;T+=b)Ue[0]=g[T],Ue[1]=g[T+1],_(Ue,Ue,S),g[T]=Ue[0],g[T+1]=Ue[1];return g});function On(){var g=new me(3);return me!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g}function Zn(g){var b=new me(3);return b[0]=g[0],b[1]=g[1],b[2]=g[2],b}function Cr(g){var b=g[0],d=g[1],v=g[2];return Math.sqrt(b*b+d*d+v*v)}function Bs(g,b,d){var v=new me(3);return v[0]=g,v[1]=b,v[2]=d,v}function hi(g,b){return g[0]=b[0],g[1]=b[1],g[2]=b[2],g}function as(g,b,d,v){return g[0]=b,g[1]=d,g[2]=v,g}function di(g,b,d){return g[0]=b[0]+d[0],g[1]=b[1]+d[1],g[2]=b[2]+d[2],g}function bt(g,b,d){return g[0]=b[0]-d[0],g[1]=b[1]-d[1],g[2]=b[2]-d[2],g}function qn(g,b,d){return g[0]=b[0]*d[0],g[1]=b[1]*d[1],g[2]=b[2]*d[2],g}function er(g,b,d){return g[0]=b[0]/d[0],g[1]=b[1]/d[1],g[2]=b[2]/d[2],g}function zs(g,b){return g[0]=Math.ceil(b[0]),g[1]=Math.ceil(b[1]),g[2]=Math.ceil(b[2]),g}function Ln(g,b){return g[0]=Math.floor(b[0]),g[1]=Math.floor(b[1]),g[2]=Math.floor(b[2]),g}function al(g,b,d){return g[0]=Math.min(b[0],d[0]),g[1]=Math.min(b[1],d[1]),g[2]=Math.min(b[2],d[2]),g}function ol(g,b,d){return g[0]=Math.max(b[0],d[0]),g[1]=Math.max(b[1],d[1]),g[2]=Math.max(b[2],d[2]),g}function Fs(g,b){return g[0]=q(b[0]),g[1]=q(b[1]),g[2]=q(b[2]),g}function qs(g,b,d){return g[0]=b[0]*d,g[1]=b[1]*d,g[2]=b[2]*d,g}function ll(g,b,d,v){return g[0]=b[0]+d[0]*v,g[1]=b[1]+d[1]*v,g[2]=b[2]+d[2]*v,g}function eo(g,b){var d=b[0]-g[0],v=b[1]-g[1],_=b[2]-g[2];return Math.sqrt(d*d+v*v+_*_)}function to(g,b){var d=b[0]-g[0],v=b[1]-g[1],_=b[2]-g[2];return d*d+v*v+_*_}function cl(g){var b=g[0],d=g[1],v=g[2];return b*b+d*d+v*v}function no(g,b){return g[0]=-b[0],g[1]=-b[1],g[2]=-b[2],g}function Qr(g,b){return g[0]=1/b[0],g[1]=1/b[1],g[2]=1/b[2],g}function Pn(g,b){var d=b[0],v=b[1],_=b[2],S=d*d+v*v+_*_;return S>0&&(S=1/Math.sqrt(S)),g[0]=b[0]*S,g[1]=b[1]*S,g[2]=b[2]*S,g}function Vn(g,b){return g[0]*b[0]+g[1]*b[1]+g[2]*b[2]}function Mi(g,b,d){var v=b[0],_=b[1],S=b[2],T=d[0],k=d[1],D=d[2];return g[0]=_*D-S*k,g[1]=S*T-v*D,g[2]=v*k-_*T,g}function ul(g,b,d,v){var _=b[0],S=b[1],T=b[2];return g[0]=_+v*(d[0]-_),g[1]=S+v*(d[1]-S),g[2]=T+v*(d[2]-T),g}function en(g,b,d,v){var _=Math.acos(Math.min(Math.max(Vn(b,d),-1),1)),S=Math.sin(_),T=Math.sin((1-v)*_)/S,k=Math.sin(v*_)/S;return g[0]=T*b[0]+k*d[0],g[1]=T*b[1]+k*d[1],g[2]=T*b[2]+k*d[2],g}function ca(g,b,d,v,_,S){var T=S*S,k=T*(2*S-3)+1,D=T*(S-2)+S,I=T*(S-1),U=T*(3-2*S);return g[0]=b[0]*k+d[0]*D+v[0]*I+_[0]*U,g[1]=b[1]*k+d[1]*D+v[1]*I+_[1]*U,g[2]=b[2]*k+d[2]*D+v[2]*I+_[2]*U,g}function Hs(g,b,d,v,_,S){var T=1-S,k=T*T,D=S*S,I=k*T,U=3*S*k,Q=3*D*T,ae=D*S;return g[0]=b[0]*I+d[0]*U+v[0]*Q+_[0]*ae,g[1]=b[1]*I+d[1]*U+v[1]*Q+_[1]*ae,g[2]=b[2]*I+d[2]*U+v[2]*Q+_[2]*ae,g}function ua(g,b){b=b===void 0?1:b;var d=2*xe()*Math.PI,v=2*xe()-1,_=Math.sqrt(1-v*v)*b;return g[0]=Math.cos(d)*_,g[1]=Math.sin(d)*_,g[2]=v*b,g}function Lr(g,b,d){var v=b[0],_=b[1],S=b[2],T=d[3]*v+d[7]*_+d[11]*S+d[15];return T=T||1,g[0]=(d[0]*v+d[4]*_+d[8]*S+d[12])/T,g[1]=(d[1]*v+d[5]*_+d[9]*S+d[13])/T,g[2]=(d[2]*v+d[6]*_+d[10]*S+d[14])/T,g}function ro(g,b,d){var v=b[0],_=b[1],S=b[2];return g[0]=v*d[0]+_*d[3]+S*d[6],g[1]=v*d[1]+_*d[4]+S*d[7],g[2]=v*d[2]+_*d[5]+S*d[8],g}function Xl(g,b,d){var v=d[0],_=d[1],S=d[2],T=d[3],k=b[0],D=b[1],I=b[2],U=_*I-S*D,Q=S*k-v*I,ae=v*D-_*k;return U+=U,Q+=Q,ae+=ae,g[0]=k+T*U+_*ae-S*Q,g[1]=D+T*Q+S*U-v*ae,g[2]=I+T*ae+v*Q-_*U,g}function hl(g,b,d,v){var _=[],S=[];return _[0]=b[0]-d[0],_[1]=b[1]-d[1],_[2]=b[2]-d[2],S[0]=_[0],S[1]=_[1]*Math.cos(v)-_[2]*Math.sin(v),S[2]=_[1]*Math.sin(v)+_[2]*Math.cos(v),g[0]=S[0]+d[0],g[1]=S[1]+d[1],g[2]=S[2]+d[2],g}function Oi(g,b,d,v){var _=[],S=[];return _[0]=b[0]-d[0],_[1]=b[1]-d[1],_[2]=b[2]-d[2],S[0]=_[2]*Math.sin(v)+_[0]*Math.cos(v),S[1]=_[1],S[2]=_[2]*Math.cos(v)-_[0]*Math.sin(v),g[0]=S[0]+d[0],g[1]=S[1]+d[1],g[2]=S[2]+d[2],g}function Jl(g,b,d,v){var _=[],S=[];return _[0]=b[0]-d[0],_[1]=b[1]-d[1],_[2]=b[2]-d[2],S[0]=_[0]*Math.cos(v)-_[1]*Math.sin(v),S[1]=_[0]*Math.sin(v)+_[1]*Math.cos(v),S[2]=_[2],g[0]=S[0]+d[0],g[1]=S[1]+d[1],g[2]=S[2]+d[2],g}function Li(g,b){var d=g[0],v=g[1],_=g[2],S=b[0],T=b[1],k=b[2],D=Math.sqrt((d*d+v*v+_*_)*(S*S+T*T+k*k)),I=D&&Vn(g,b)/D;return Math.acos(Math.min(Math.max(I,-1),1))}function Pr(g){return g[0]=0,g[1]=0,g[2]=0,g}function Zl(g){return"vec3("+g[0]+", "+g[1]+", "+g[2]+")"}function dl(g,b){return g[0]===b[0]&&g[1]===b[1]&&g[2]===b[2]}function fl(g,b){var d=g[0],v=g[1],_=g[2],S=b[0],T=b[1],k=b[2];return Math.abs(d-S)<=1e-6*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(v-T)<=1e-6*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(_-k)<=1e-6*Math.max(1,Math.abs(_),Math.abs(k))}var so=bt,ec=qn,Pi=er,io=eo,Es=to,ml=Cr,os=cl,Vi=(function(){var g=On();return function(b,d,v,_,S,T){var k,D;for(d||(d=3),v||(v=0),D=_?Math.min(_*d+v,b.length):b.length,k=v;k<D;k+=d)g[0]=b[k],g[1]=b[k+1],g[2]=b[k+2],S(g,g,T),b[k]=g[0],b[k+1]=g[1],b[k+2]=g[2];return b}})(),Nr=function(g,b){g.fill(b)},ha=function(g){for(var b=0,d=0;d<g.length;d++)g[d]>g[b]&&(b=d);return b},Ui=function(g){for(var b=g.length,d=0;b--;)d+=g[b];return d},Bi=function(g,b){var d=[],v={rad:0,vec:u.clone([0,0])},_={};function S(k){_[k.id]=k,d.push(k)}function T(){var k,D=0;for(k=0;k<d.length;k++)D+=d[k].rad;v.rad=D/d.length,v.vec=u.clone([Math.cos(v.rad),Math.sin(v.rad)])}return S(g),T(),{add:function(k){_[k.id]||(S(k),T())},fits:function(k){return Math.abs(u.dot(k.point.vec,v.vec))>b},getPoints:function(){return d},getCenter:function(){return v}}},Ts=function(g,b,d){return{rad:g[d],point:g,id:b}};function Vr(g,b){return{x:g,y:b,toVec2:function(){return u.clone([this.x,this.y])},toVec3:function(){return f.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function da(g,b){b||(b=8);for(var d=g.data,v=d.length,_=8-b,S=new Int32Array(1<<b);v--;)S[d[v]>>_]++;return S}function sn(g,b){var d=(function(v){var _,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,T=8-S;function k(Q,ae){for(var ce=0,Ne=Q;Ne<=ae;Ne++)ce+=_[Ne];return ce}function D(Q,ae){for(var ce=0,Ne=Q;Ne<=ae;Ne++)ce+=Ne*_[Ne];return ce}function I(){var Q,ae,ce,Ne,oe=[0],we=(1<<S)-1;_=da(v,S);for(var Ie=1;Ie<we;Ie++)(ce=(Q=k(0,Ie))*(ae=k(Ie+1,we)))===0&&(ce=1),Ne=D(0,Ie)*ae-D(Ie+1,we)*Q,oe[Ie]=Ne*Ne/ce;return ha(oe)}var U=I();return U<<T})(g);return(function(v,_,S){S||(S=v);for(var T=v.data,k=T.length,D=S.data;k--;)D[k]=T[k]<_?1:0})(g,d,b),d}function $s(g,b,d){var v=g.length/4|0;if(d&&d.singleChannel===!0)for(var _=0;_<v;_++){var S=g[4*_+3];b[_]=S===0?255:g[4*_+0]}else for(var T=0;T<v;T++){var k=g[4*T+3];b[T]=k===0?255:.299*g[4*T+0]+.587*g[4*T+1]+.114*g[4*T+2]}}function pl(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],d=g[0],v=g[1],_=g[2],S=_*v,T=S*(1-Math.abs(d/60%2-1)),k=_-S,D=0,I=0,U=0;return d<60?(D=S,I=T):d<120?(D=T,I=S):d<180?(I=S,U=T):d<240?(I=T,U=S):d<300?(D=T,U=S):d<360&&(D=S,U=T),b[0]=255*(D+k)|0,b[1]=255*(I+k)|0,b[2]=255*(U+k)|0,b}function Gs(g){if(!Number.isFinite(g)||g<1)return[];for(var b=[],d=[],v=Math.sqrt(g),_=1;_<=v;_++)g%_==0&&(d.push(_),_!==g/_&&b.unshift(Math.floor(g/_)));return d.concat(b)}function ao(g,b){var d,v=Gs(b.x),_=Gs(b.y),S=Math.max(b.x,b.y),T=(function(ce,Ne){for(var oe=0,we=0,Ie=[];oe<ce.length&&we<Ne.length;)ce[oe]===Ne[we]?(Ie.push(ce[oe]),oe++,we++):ce[oe]>Ne[we]?we++:oe++;return Ie})(v,_),k=[8,10,15,20,32,60,80],D={"x-small":5,small:4,medium:3,large:2,"x-large":1},I=D[g]||D.medium,U=k[I],Q=Math.floor(S/U);function ae(ce){for(var Ne=0,oe=ce[Math.floor(ce.length/2)];Ne<ce.length-1&&ce[Ne]<Q;)Ne++;return Ne>0&&(oe=Math.abs(ce[Ne]-Q)>Math.abs(ce[Ne-1]-Q)?ce[Ne-1]:ce[Ne]),Q/oe<k[I+1]/k[I]&&Q/oe>k[I-1]/k[I]?{x:oe,y:oe}:null}return(d=ae(T))||(d=ae(Gs(S)))||(d=ae(Gs(Q*U))),d||(d={x:Math.max(1,b.x),y:Math.max(1,b.y)}),d}var zi={top:function(g,b){return g.unit==="%"?Math.floor(b.height*(g.value/100)):null},right:function(g,b){return g.unit==="%"?Math.floor(b.width-b.width*(g.value/100)):null},bottom:function(g,b){return g.unit==="%"?Math.floor(b.height-b.height*(g.value/100)):null},left:function(g,b){return g.unit==="%"?Math.floor(b.width*(g.value/100)):null}};function fi(g,b,d){var v={width:g,height:b},_=Object.keys(d).reduce((function(S,T){if(!zi[T])return S;var k=(function(I){return{value:parseFloat(I),unit:(I.indexOf("%"),I.length,"%")}})(d[T]),D=zi[T](k,v);return S[T]=D,S}),{});return{sx:_.left,sy:_.top,sw:_.right-_.left,sh:_.bottom-_.top}}function Kr(g){if(g<0)throw new Error("expected positive number, received ".concat(g))}var cn=(function(){return Y()((function g(b,d){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uint8Array,_=arguments.length>3?arguments[3]:void 0;H()(this,g),K()(this,"data",void 0),K()(this,"size",void 0),K()(this,"indexMapping",void 0),d?this.data=d:(this.data=new v(b.x*b.y),_&&Nr(this.data,0)),this.size=b}),[{key:"inImageWithBorder",value:function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Kr(b),g.x>=0&&g.y>=0&&g.x<this.size.x+2*b&&g.y<this.size.y+2*b}},{key:"subImageAsCopy",value:function(g,b){Kr(b.x),Kr(b.y);for(var d=g.size,v=d.x,_=d.y,S=0;S<v;S++)for(var T=0;T<_;T++)g.data[T*v+S]=this.data[(b.y+T)*this.size.x+b.x+S];return g}},{key:"get",value:function(g,b){return this.data[b*this.size.x+g]}},{key:"getSafe",value:function(g,b){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var d=0;d<this.size.x;d++)this.indexMapping.x[d]=d,this.indexMapping.x[d+this.size.x]=d;for(var v=0;v<this.size.y;v++)this.indexMapping.y[v]=v,this.indexMapping.y[v+this.size.y]=v}return this.data[this.indexMapping.y[b+this.size.y]*this.size.x+this.indexMapping.x[g+this.size.x]]}},{key:"set",value:function(g,b,d){return this.data[b*this.size.x+g]=d,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var g=this.size,b=g.x,d=g.y,v=0;v<b;v++)this.data[v]=this.data[(d-1)*b+v]=0;for(var _=1;_<d-1;_++)this.data[_*b]=this.data[_*b+(b-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(g){var b,d,v,_,S,T,k,D,I,U,Q=this.data,ae=this.size.y,ce=this.size.x,Ne=[],oe=[],we=Math.PI,Ie=we/4;if(g<=0)return oe;for(S=0;S<g;S++)Ne[S]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(d=0;d<ae;d++)for(_=d*d,b=0;b<ce;b++)(v=Q[d*ce+b])>0&&((T=Ne[v-1]).m00+=1,T.m01+=d,T.m10+=b,T.m11+=b*d,T.m02+=_,T.m20+=b*b);for(S=0;S<g;S++)T=Ne[S],isNaN(T.m00)||T.m00===0||(D=T.m10/T.m00,I=T.m01/T.m00,k=T.m11/T.m00-D*I,U=(T.m02/T.m00-I*I-(T.m20/T.m00-D*D))/(2*k),U=.5*Math.atan(U)+(k>=0?Ie:-Ie)+we,T.theta=(180*U/we+90)%180-90,T.theta<0&&(T.theta+=180),T.rad=U>we?U-we:U,T.vec=u.clone([Math.cos(U),Math.sin(U)]),oe.push(T));return oe}},{key:"getAsRGBA",value:function(){for(var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,b=new Uint8ClampedArray(4*this.size.x*this.size.y),d=0;d<this.size.y;d++)for(var v=0;v<this.size.x;v++){var _=d*this.size.x+v,S=this.get(v,d)*g;b[4*_+0]=S,b[4*_+1]=S,b[4*_+2]=S,b[4*_+3]=255}return b}},{key:"show",value:function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var d=g.getContext("2d");if(!d)throw new Error("Unable to get canvas context");var v=d.getImageData(0,0,g.width,g.height),_=this.getAsRGBA(b);g.width=this.size.x,g.height=this.size.y;var S=new ImageData(_,v.width,v.height);d.putImageData(S,0,0)}},{key:"overlay",value:function(g,b,d){var v=b<0||b>360?360:b,_=[0,1,1],S=[0,0,0],T=[255,255,255],k=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var D=g.getContext("2d");if(!D)throw new Error("Unable to get canvas context");for(var I=D.getImageData(d.x,d.y,this.size.x,this.size.y),U=I.data,Q=this.data.length;Q--;){_[0]=this.data[Q]*v;var ae=4*Q,ce=_[0]<=0?T:_[0]>=360?k:pl(_,S),Ne=L()(ce,3);U[ae]=Ne[0],U[ae+1]=Ne[1],U[ae+2]=Ne[2],U[ae+3]=255}D.putImageData(I,d.x,d.y)}}])})(),mi=a(7),tr=a.n(mi),Fi=a(6),An=a.n(Fi),Ws={drawRect:function(g,b,d,v){d.strokeStyle=v.color,d.fillStyle=v.color,d.lineWidth=v.lineWidth||1,d.beginPath(),d.strokeRect(g.x,g.y,b.x,b.y)},drawPath:function(g,b,d,v){d.strokeStyle=v.color,d.fillStyle=v.color,d.lineWidth=v.lineWidth,d.beginPath(),d.moveTo(g[0][b.x],g[0][b.y]);for(var _=1;_<g.length;_++)d.lineTo(g[_][b.x],g[_][b.y]);d.closePath(),d.stroke()},drawImage:function(g,b,d){var v=d.getImageData(0,0,b.x,b.y),_=v.data,S=_.length,T=g.length;if(S/T!=4)return!1;for(;T--;){var k=g[T];_[--S]=255,_[--S]=k,_[--S]=k,_[--S]=k}return d.putImageData(v,0,0),!0}},oo=a(4),fn=a.n(oo),lo=a(1),Nt=a.n(lo),fa=a(5),Hn=a.n(fa),gl=(function(g){return g[g.Forward=1]="Forward",g[g.Reverse=-1]="Reverse",g})({}),qi=(function(){return Y()((function g(b,d){H()(this,g),K()(this,"_row",[]),K()(this,"config",{}),K()(this,"supplements",[]),K()(this,"SINGLE_CODE_ERROR",0),K()(this,"FORMAT","unknown"),K()(this,"CONFIG_KEYS",{}),this._row=[],this.config=b||{},d&&(this.supplements=d)}),[{key:"_nextUnset",value:function(g){for(var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=b;d<g.length;d++)if(!g[d])return d;return g.length}},{key:"_matchPattern",value:function(g,b){for(var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.SINGLE_CODE_ERROR||1,v=0,_=0,S=0,T=0,k=0,D=0,I=0,U=0;U<g.length;U++)S+=g[U],T+=b[U];if(S<T)return Number.MAX_VALUE;d*=k=S/T;for(var Q=0;Q<g.length;Q++){if(D=g[Q],I=b[Q]*k,(_=Math.abs(D-I)/I)>d)return Number.MAX_VALUE;v+=_}return v/T}},{key:"_nextSet",value:function(g){for(var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=b;d<g.length;d++)if(g[d])return d;return g.length}},{key:"_correctBars",value:function(g,b,d){for(var v=d.length,_=0;v--;)(_=g[d[v]]*(1-(1-b)/2))>1&&(g[d[v]]=_)}},{key:"decodePattern",value:function(g){this._row=g;var b=this.decode();return b===null?(this._row.reverse(),(b=this.decode())&&(b.direction=gl.Reverse,b.start=this._row.length-b.start,b.end=this._row.length-b.end)):b.direction=gl.Forward,b&&(b.format=this.FORMAT),b}},{key:"_matchRange",value:function(g,b,d){var v;for(v=g=g<0?0:g;v<b;v++)if(this._row[v]!==d)return!1;return!0}},{key:"_fillCounters",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._nextUnset(this._row),b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._row.length,d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],v=[],_=0;v[_]=0;for(var S=g;S<b;S++)this._row[S]^(d?1:0)?v[_]++:(v[++_]=1,d=!d);return v}},{key:"_toCounters",value:function(g,b){var d=b.length,v=this._row.length,_=!this._row[g],S=0;Nr(b,0);for(var T=g;T<v;T++)if(this._row[T]^(_?1:0))b[S]++;else{if(++S===d)break;b[S]=1,_=!_}return b}},{key:"decodeImage",value:function(g){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}])})();K()(qi,"adjacentLineValidationMatches",0);var Xr=qi;function tc(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var ma=[3,1,3,1,1,1],nc=[3,1,1,1,3],vl=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],Ys=ma.reduce((function(g,b){return g+b}),0),yl=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=tc(this,b,[].concat(_)),K()(d,"barSpaceRatio",[1,1]),K()(d,"FORMAT","2of5"),K()(d,"SINGLE_CODE_ERROR",.78),K()(d,"AVG_CODE_ERROR",.3),d}return Hn()(b,g),Y()(b,[{key:"_findPattern",value:function(d,v){var _=arguments.length>2&&arguments[2]!==void 0&&arguments[2],S=arguments.length>3&&arguments[3]!==void 0&&arguments[3],T=[],k=0,D={error:Number.MAX_VALUE,code:-1,start:0,end:0},I=0,U=0,Q=this.AVG_CODE_ERROR;v||(v=this._nextSet(this._row));for(var ae=0;ae<d.length;ae++)T[ae]=0;for(var ce=v;ce<this._row.length;ce++)if(this._row[ce]^(_?1:0))T[k]++;else{if(k===T.length-1){I=0;for(var Ne=0;Ne<T.length;Ne++)I+=T[Ne];if((U=this._matchPattern(T,d))<Q)return D.error=U,D.start=ce-I,D.end=ce,D;if(!S)return null;for(var oe=0;oe<T.length-2;oe++)T[oe]=T[oe+2];T[T.length-2]=0,T[T.length-1]=0,k--}else k++;T[k]=1,_=!_}return null}},{key:"_findStart",value:function(){for(var d=null,v=this._nextSet(this._row),_=1,S=0;!d;){if(!(d=this._findPattern(ma,v,!1,!0)))return null;if(_=Math.floor((d.end-d.start)/Ys),(S=d.start-5*_)>=0&&this._matchRange(S,d.start,0))return d;v=d.end,d=null}return d}},{key:"_verifyTrailingWhitespace",value:function(d){var v=d.end+(d.end-d.start)/2;return v<this._row.length&&this._matchRange(d.end,v,0)?d:null}},{key:"_findEnd",value:function(){this._row.reverse();var d=this._nextSet(this._row),v=this._findPattern(nc,d,!1,!0);if(this._row.reverse(),v===null)return null;var _=v.start;return v.start=this._row.length-v.end,v.end=this._row.length-_,v!==null?this._verifyTrailingWhitespace(v):null}},{key:"_verifyCounterLength",value:function(d){return d.length%10==0}},{key:"_decodeCode",value:function(d){for(var v=this.AVG_CODE_ERROR,_={error:Number.MAX_VALUE,code:-1,start:0,end:0},S=0;S<vl.length;S++){var T=this._matchPattern(d,vl[S]);T<_.error&&(_.code=S,_.error=T)}return _.error<v?_:null}},{key:"_decodePayload",value:function(d,v,_){for(var S=0,T=d.length,k=[0,0,0,0,0],D=null;S<T;){for(var I=0;I<5;I++)k[I]=d[S]*this.barSpaceRatio[0],S+=2;if(!(D=this._decodeCode(k)))return null;v.push("".concat(D.code)),_.push(D)}return D}},{key:"decode",value:function(d,v){var _=this._findStart();if(!_)return null;var S=this._findEnd();if(!S)return null;var T=this._fillCounters(_.end,S.start,!1);if(!this._verifyCounterLength(T))return null;var k=[];k.push(_);var D=[];return this._decodePayload(T,D,k)?D.length<5?null:(k.push(S),{code:D.join(""),start:_.start,end:S.end,startInfo:_,decodedCodes:k,format:this.FORMAT}):null}}])})(Xr);function rc(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var co=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],uo=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],pi=[26,41,11,14],wr=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=rc(this,b,[].concat(_)),K()(d,"_counters",[]),K()(d,"FORMAT","codabar"),d}return Hn()(b,g),Y()(b,[{key:"_computeAlternatingThreshold",value:function(d,v){for(var _=Number.MAX_VALUE,S=0,T=0,k=d;k<v;k+=2)(T=this._counters[k])>S&&(S=T),T<_&&(_=T);return(_+S)/2|0}},{key:"_toPattern",value:function(d){var v=d+7;if(v>this._counters.length)return-1;for(var _=this._computeAlternatingThreshold(d,v),S=this._computeAlternatingThreshold(d+1,v),T=64,k=0,D=0,I=0;I<7;I++)k=(1&I)==0?_:S,this._counters[d+I]>k&&(D|=T),T>>=1;return D}},{key:"_isStartEnd",value:function(d){for(var v=0;v<pi.length;v++)if(pi[v]===d)return!0;return!1}},{key:"_sumCounters",value:function(d,v){for(var _=0,S=d;S<v;S++)_+=this._counters[S];return _}},{key:"_findStart",value:function(){for(var d=this._nextUnset(this._row),v=1;v<this._counters.length;v++){var _=this._toPattern(v);if(_!==-1&&this._isStartEnd(_))return{start:d+=this._sumCounters(0,v),end:d+this._sumCounters(v,v+8),startCounter:v,endCounter:v+8}}return null}},{key:"_patternToChar",value:function(d){for(var v=0;v<uo.length;v++)if(uo[v]===d)return String.fromCharCode(co[v]);return null}},{key:"_calculatePatternLength",value:function(d){for(var v=0,_=d;_<d+7;_++)v+=this._counters[_];return v}},{key:"_verifyWhitespace",value:function(d,v){return(d-1<=0||this._counters[d-1]>=this._calculatePatternLength(d)/2)&&(v+8>=this._counters.length||this._counters[v+7]>=this._calculatePatternLength(v)/2)}},{key:"_charToPattern",value:function(d){for(var v=d.charCodeAt(0),_=0;_<co.length;_++)if(co[_]===v)return uo[_];return 0}},{key:"_thresholdResultPattern",value:function(d,v){for(var _,S={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},T=v,k=0;k<d.length;k++){_=this._charToPattern(d[k]);for(var D=6;D>=0;D--){var I=(1&D)==2?S.bar:S.space,U=(1&_)==1?I.wide:I.narrow;U.size+=this._counters[T+D],U.counts++,_>>=1}T+=8}return["space","bar"].forEach((function(Q){var ae=S[Q];ae.wide.min=Math.floor((ae.narrow.size/ae.narrow.counts+ae.wide.size/ae.wide.counts)/2),ae.narrow.max=Math.ceil(ae.wide.min),ae.wide.max=Math.ceil((2*ae.wide.size+1.5)/ae.wide.counts)})),S}},{key:"_validateResult",value:function(d,v){for(var _,S=this._thresholdResultPattern(d,v),T=v,k=0;k<d.length;k++){_=this._charToPattern(d[k]);for(var D=6;D>=0;D--){var I=(1&D)==0?S.bar:S.space,U=(1&_)==1?I.wide:I.narrow,Q=this._counters[T+D];if(Q<U.min||Q>U.max)return!1;_>>=1}T+=8}return!0}},{key:"decode",value:function(d,v){if(this._counters=this._fillCounters(),!(v=this._findStart()))return null;var _,S=v.startCounter,T=[];do{if((_=this._toPattern(S))<0)return null;var k=this._patternToChar(_);if(k===null)return null;if(T.push(k),S+=8,T.length>1&&this._isStartEnd(_))break}while(S<this._counters.length);if(T.length-2<4||!this._isStartEnd(_)||!this._verifyWhitespace(v.startCounter,S-8)||!this._validateResult(T,v.startCounter))return null;S=S>this._counters.length?this._counters.length:S;var D=v.start+this._sumCounters(v.startCounter,S-8);return{code:T.join(""),start:v.start,end:D,startInfo:v,decodedCodes:T,format:this.FORMAT}}}])})(Xr);function sc(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var bl=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=sc(this,b,[].concat(_)),K()(d,"CODE_SHIFT",98),K()(d,"CODE_C",99),K()(d,"CODE_B",100),K()(d,"CODE_A",101),K()(d,"FNC1",102),K()(d,"START_CODE_A",103),K()(d,"START_CODE_B",104),K()(d,"START_CODE_C",105),K()(d,"STOP_CODE",106),K()(d,"FNC1_CHAR",""),K()(d,"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),K()(d,"SINGLE_CODE_ERROR",.64),K()(d,"AVG_CODE_ERROR",.3),K()(d,"FORMAT","code_128"),K()(d,"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),d}return Hn()(b,g),Y()(b,[{key:"_decodeCode",value:function(d,v){for(var _={error:Number.MAX_VALUE,code:-1,start:d,end:d,correction:{bar:1,space:1}},S=[0,0,0,0,0,0],T=d,k=!this._row[T],D=0,I=T;I<this._row.length;I++)if(this._row[I]^(k?1:0))S[D]++;else{if(D===S.length-1){v&&this._correct(S,v);for(var U=0;U<this.CODE_PATTERN.length;U++){var Q=this._matchPattern(S,this.CODE_PATTERN[U]);Q<_.error&&(_.code=U,_.error=Q)}return _.end=I,_.code===-1||_.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[_.code]&&(_.correction.bar=this.calculateCorrection(this.CODE_PATTERN[_.code],S,this.MODULE_INDICES.bar),_.correction.space=this.calculateCorrection(this.CODE_PATTERN[_.code],S,this.MODULE_INDICES.space)),_)}S[++D]=1,k=!k}return null}},{key:"_correct",value:function(d,v){this._correctBars(d,v.bar,this.MODULE_INDICES.bar),this._correctBars(d,v.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var d=[0,0,0,0,0,0],v=this._nextSet(this._row),_={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},S=!1,T=0,k=v;k<this._row.length;k++)if(this._row[k]^(S?1:0))d[T]++;else{if(T===d.length-1){for(var D=d.reduce((function(ae,ce){return ae+ce}),0),I=this.START_CODE_A;I<=this.START_CODE_C;I++){var U=this._matchPattern(d,this.CODE_PATTERN[I]);U<_.error&&(_.code=I,_.error=U)}if(_.error<this.AVG_CODE_ERROR)return _.start=k-D,_.end=k,_.correction.bar=this.calculateCorrection(this.CODE_PATTERN[_.code],d,this.MODULE_INDICES.bar),_.correction.space=this.calculateCorrection(this.CODE_PATTERN[_.code],d,this.MODULE_INDICES.space),_;for(var Q=0;Q<4;Q++)d[Q]=d[Q+2];d[4]=0,d[5]=0,T--}else T++;d[T]=1,S=!S}return null}},{key:"decode",value:function(d,v){var _=this,S=this._findStart();if(S===null)return null;var T={code:S.code,start:S.start,end:S.end,correction:{bar:S.correction.bar,space:S.correction.space}},k=[];k.push(T);for(var D=T.code,I=(function(Ie){switch(Ie){case _.START_CODE_A:return _.CODE_A;case _.START_CODE_B:return _.CODE_B;case _.START_CODE_C:return _.CODE_C;default:return null}})(T.code),U=!1,Q=!1,ae=Q,ce=!0,Ne=0,oe=[],we=[];!U;){if(ae=Q,Q=!1,(T=this._decodeCode(T.end,T.correction))!==null)switch(T.code!==this.STOP_CODE&&(ce=!0),T.code!==this.STOP_CODE&&(oe.push(T.code),D+=++Ne*T.code),k.push(T),I){case this.CODE_A:if(T.code<64)we.push(String.fromCharCode(32+T.code));else if(T.code<96)we.push(String.fromCharCode(T.code-64));else switch(T.code!==this.STOP_CODE&&(ce=!1),T.code){case this.CODE_SHIFT:Q=!0,I=this.CODE_B;break;case this.CODE_B:I=this.CODE_B;break;case this.CODE_C:I=this.CODE_C;break;case this.FNC1:we.push(this.FNC1_CHAR);break;case this.STOP_CODE:U=!0}break;case this.CODE_B:if(T.code<96)we.push(String.fromCharCode(32+T.code));else switch(T.code!==this.STOP_CODE&&(ce=!1),T.code){case this.CODE_SHIFT:Q=!0,I=this.CODE_A;break;case this.CODE_A:I=this.CODE_A;break;case this.CODE_C:I=this.CODE_C;break;case this.FNC1:we.push(this.FNC1_CHAR);break;case this.STOP_CODE:U=!0}break;case this.CODE_C:if(T.code<100)we.push(T.code<10?"0"+T.code:T.code);else switch(T.code!==this.STOP_CODE&&(ce=!1),T.code){case this.CODE_A:I=this.CODE_A;break;case this.CODE_B:I=this.CODE_B;break;case this.FNC1:we.push(this.FNC1_CHAR);break;case this.STOP_CODE:U=!0}}else U=!0;ae&&(I=I===this.CODE_A?this.CODE_B:this.CODE_A)}return T===null?null:(T.end=this._nextUnset(this._row,T.end),this._verifyTrailingWhitespace(T)?(D-=Ne*oe[oe.length-1])%103!==oe[oe.length-1]?null:we.length?(ce&&we.splice(we.length-1,1),{code:we.join(""),start:S.start,end:T.end,codeset:I,startInfo:S,decodedCodes:k,endInfo:T,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(d){var v;return(v=d.end+(d.end-d.start)/2)<this._row.length&&this._matchRange(d.end,v,0)?d:null}},{key:"calculateCorrection",value:function(d,v,_){for(var S=_.length,T=0,k=0;S--;)k+=d[_[S]],T+=v[_[S]];return k/T}}])})(Xr),gi=a(13),m=a.n(gi),N=a(16),R=a.n(N);function $(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var ve=new Uint16Array(R()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map((function(g){return g.charCodeAt(0)}))),Ce=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),Ye=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=$(this,b,[].concat(_)),K()(d,"FORMAT","code_39"),d}return Hn()(b,g),Y()(b,[{key:"_findStart",value:function(){for(var d=this._nextSet(this._row),v=d,_=new Uint16Array([0,0,0,0,0,0,0,0,0]),S=0,T=!1,k=d;k<this._row.length;k++)if(this._row[k]^(T?1:0))_[S]++;else{if(S===_.length-1){if(this._toPattern(_)===148){var D=Math.floor(Math.max(0,v-(k-v)/4));if(this._matchRange(D,v,0))return{start:v,end:k}}v+=_[0]+_[1];for(var I=0;I<7;I++)_[I]=_[I+2];_[7]=0,_[8]=0,S--}else S++;_[S]=1,T=!T}return null}},{key:"_toPattern",value:function(d){for(var v=d.length,_=0,S=v,T=0;S>3;){_=this._findNextWidth(d,_),S=0;for(var k=0,D=0;D<v;D++)d[D]>_&&(k|=1<<v-1-D,S++,T+=d[D]);if(S===3){for(var I=0;I<v&&S>0;I++)if(d[I]>_&&(S--,2*d[I]>=T))return-1;return k}}return-1}},{key:"_findNextWidth",value:function(d,v){for(var _=Number.MAX_VALUE,S=0;S<d.length;S++)d[S]<_&&d[S]>v&&(_=d[S]);return _}},{key:"_patternToChar",value:function(d){for(var v=0;v<Ce.length;v++)if(Ce[v]===d)return String.fromCharCode(ve[v]);return null}},{key:"_verifyTrailingWhitespace",value:function(d,v,_){var S=Ui(_);return 3*(v-d-S)>=S}},{key:"decode",value:function(){var d=new Uint16Array([0,0,0,0,0,0,0,0,0]),v=[],_=this._findStart();if(!_)return null;var S,T,k=this._nextSet(this._row,_.end);do{d=this._toCounters(k,d);var D=this._toPattern(d);if(D<0||(S=this._patternToChar(D))===null)return null;v.push(S),T=k,k+=Ui(d),k=this._nextSet(this._row,k)}while(S!=="*");return v.pop(),v.length&&this._verifyTrailingWhitespace(T,k,d)?{code:v.join(""),start:_.start,end:k,startInfo:_,decodedCodes:v,format:this.FORMAT}:null}}])})(Xr);function wt(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var Dn=/[AEIO]/g,Yt=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=wt(this,b,[].concat(_)),K()(d,"FORMAT","code_32_reader"),d}return Hn()(b,g),Y()(b,[{key:"_decodeCode32",value:function(d){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(d))return null;for(var v=0,_=0;_<d.length;_++)v=32*v+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(d[_]);var S="".concat(v);return S.length<9&&(S=("000000000"+S).slice(-9)),"A"+S}},{key:"_checkChecksum",value:function(d){return!!d}},{key:"decode",value:function(){var d,v,_,S,T,k=(d=b,v="decode",_=this,S=3,T=m()(Nt()(1&S?d.prototype:d),v,_),2&S&&typeof T=="function"?function(U){return T.apply(_,U)}:T)([]);if(!k)return null;var D=k.code;if(!D||(D=D.replace(Dn,""),!this._checkChecksum(D)))return null;var I=this._decodeCode32(D);return I?(k.code=I,k):null}}])})(Ye);function Sn(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var ls=/[IOQ]/g,Qs=/[A-Z0-9]{17}/,cs=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=Sn(this,b,[].concat(_)),K()(d,"FORMAT","code_39_vin"),d}return Hn()(b,g),Y()(b,[{key:"_checkChecksum",value:function(d){return!!d}},{key:"decode",value:function(){var d,v,_,S,T,k=(d=b,v="decode",_=this,S=3,T=m()(Nt()(1&S?d.prototype:d),v,_),2&S&&typeof T=="function"?function(I){return T.apply(_,I)}:T)([]);if(!k)return null;var D=k.code;return D&&(D=D.replace(ls,"")).match(Qs)&&this._checkChecksum(D)?(k.code=D,k):null}}])})(Ye);function Cs(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var vi=new Uint16Array(R()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map((function(g){return g.charCodeAt(0)}))),pa=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),ga=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=Cs(this,b,[].concat(_)),K()(d,"FORMAT","code_93"),d}return Hn()(b,g),Y()(b,[{key:"_patternToChar",value:function(d){for(var v=0;v<pa.length;v++)if(pa[v]===d)return String.fromCharCode(vi[v]);return null}},{key:"_toPattern",value:function(d){for(var v=d.length,_=d.reduce((function(I,U){return I+U}),0),S=0,T=0;T<v;T++){var k=Math.round(9*d[T]/_);if(k<1||k>4)return-1;if((1&T)==0)for(var D=0;D<k;D++)S=S<<1|1;else S<<=k}return S}},{key:"_findStart",value:function(){for(var d=this._nextSet(this._row),v=d,_=new Uint16Array([0,0,0,0,0,0]),S=0,T=!1,k=d;k<this._row.length;k++)if(this._row[k]^(T?1:0))_[S]++;else{if(S===_.length-1){if(this._toPattern(_)===350){var D=Math.floor(Math.max(0,v-(k-v)/4));if(this._matchRange(D,v,0))return{start:v,end:k}}v+=_[0]+_[1];for(var I=0;I<4;I++)_[I]=_[I+2];_[4]=0,_[5]=0,S--}else S++;_[S]=1,T=!T}return null}},{key:"_verifyEnd",value:function(d,v){return!(d===v||!this._row[v])}},{key:"_decodeExtended",value:function(d){for(var v=d.length,_=[],S=0;S<v;S++){var T=d[S];if(T>="a"&&T<="d"){if(S>v-2)return null;var k=d[++S],D=k.charCodeAt(0),I=void 0;switch(T){case"a":if(!(k>="A"&&k<="Z"))return null;I=String.fromCharCode(D-64);break;case"b":if(k>="A"&&k<="E")I=String.fromCharCode(D-38);else if(k>="F"&&k<="J")I=String.fromCharCode(D-11);else if(k>="K"&&k<="O")I=String.fromCharCode(D+16);else if(k>="P"&&k<="S")I=String.fromCharCode(D+43);else{if(!(k>="T"&&k<="Z"))return null;I=""}break;case"c":if(k>="A"&&k<="O")I=String.fromCharCode(D-32);else{if(k!=="Z")return null;I=":"}break;case"d":if(!(k>="A"&&k<="Z"))return null;I=String.fromCharCode(D+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",I),null}_.push(I)}else _.push(T)}return _}},{key:"_matchCheckChar",value:function(d,v,_){var S=d.slice(0,v),T=S.length,k=S.reduce((function(D,I,U){return D+((-1*U+(T-1))%_+1)*vi.indexOf(I.charCodeAt(0))}),0);return vi[k%47]===d[v].charCodeAt(0)}},{key:"_verifyChecksums",value:function(d){return this._matchCheckChar(d,d.length-2,20)&&this._matchCheckChar(d,d.length-1,15)}},{key:"decode",value:function(d,v){if(!(v=this._findStart()))return null;var _,S,T=new Uint16Array([0,0,0,0,0,0]),k=[],D=this._nextSet(this._row,v.end);do{T=this._toCounters(D,T);var I=this._toPattern(T);if(I<0||(S=this._patternToChar(I))===null)return null;k.push(S),_=D,D+=Ui(T),D=this._nextSet(this._row,D)}while(S!=="*");return k.pop(),k.length&&this._verifyEnd(_,D)&&this._verifyChecksums(k)?(k=k.slice(0,k.length-2),(k=this._decodeExtended(k))===null?null:{code:k.join(""),start:v.start,end:D,startInfo:v,decodedCodes:k,format:this.FORMAT}):null}}])})(Xr);function zh(g,b){var d=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);b&&(v=v.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),d.push.apply(d,v)}return d}function lu(g){for(var b=1;b<arguments.length;b++){var d=arguments[b]!=null?arguments[b]:{};b%2?zh(Object(d),!0).forEach((function(v){K()(g,v,d[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(d)):zh(Object(d)).forEach((function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(d,v))}))}return g}function um(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var Fh=[1,1,1],cu=[1,1,1,1,1],_l=[1,1,2],ho=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],qh=[0,11,13,14,19,25,28,21,22,26],Ns=(function(g){function b(d,v){var _;return H()(this,b),_=um(this,b,[A()({supplements:[]},d),v]),K()(_,"FORMAT","ean_13"),K()(_,"SINGLE_CODE_ERROR",.7),K()(_,"STOP_PATTERN",[1,1,1]),_}return Hn()(b,g),Y()(b,[{key:"_findPattern",value:function(d,v,_,S){var T=new Array(d.length).fill(0),k={error:Number.MAX_VALUE,start:0,end:0},D=0;v||(v=this._nextSet(this._row));for(var I=!1,U=v;U<this._row.length;U++)if(this._row[U]^(_?1:0))T[D]+=1;else{if(D===T.length-1){var Q=this._matchPattern(T,d);if(Q<.48&&k.error&&Q<k.error)return I=!0,k.error=Q,k.start=U-T.reduce((function(ce,Ne){return ce+Ne}),0),k.end=U,k;if(S){for(var ae=0;ae<T.length-2;ae++)T[ae]=T[ae+2];T[T.length-2]=0,T[T.length-1]=0,D--}}else D++;T[D]=1,_=!_}return I?k:null}},{key:"_decodeCode",value:function(d,v){var _=[0,0,0,0],S=d,T={error:Number.MAX_VALUE,code:-1,start:d,end:d},k=!this._row[S],D=0;v||(v=ho.length);for(var I=S;I<this._row.length;I++)if(this._row[I]^(k?1:0))_[D]++;else{if(D===_.length-1){for(var U=0;U<v;U++){var Q=this._matchPattern(_,ho[U]);T.end=I,Q<T.error&&(T.code=U,T.error=Q)}return T.error>.48?null:T}_[++D]=1,k=!k}return null}},{key:"_findStart",value:function(){for(var d=this._nextSet(this._row),v=null;!v;){if(!(v=this._findPattern(Fh,d,!1,!0)))return null;var _=v.start-(v.end-v.start);if(_>=0&&this._matchRange(_,v.start,0))return v;d=v.end,v=null}return null}},{key:"_calculateFirstDigit",value:function(d){for(var v=0;v<qh.length;v++)if(d===qh[v])return v;return null}},{key:"_decodePayload",value:function(d,v,_){for(var S=lu({},d),T=0,k=0;k<6;k++){if(!(S=this._decodeCode(S.end)))return null;S.code>=10?(S.code-=10,T|=1<<5-k):T|=0<<5-k,v.push(S.code),_.push(S)}var D=this._calculateFirstDigit(T);if(D===null)return null;v.unshift(D);var I=this._findPattern(cu,S.end,!0,!1);if(I===null||!I.end)return null;_.push(I);for(var U=0;U<6;U++){if(!(I=this._decodeCode(I.end,10)))return null;_.push(I),v.push(I.code)}return I}},{key:"_verifyTrailingWhitespace",value:function(d){var v=d.end+(d.end-d.start);return v<this._row.length&&this._matchRange(d.end,v,0)?d:null}},{key:"_findEnd",value:function(d,v){var _=this._findPattern(this.STOP_PATTERN,d,v,!1);return _!==null?this._verifyTrailingWhitespace(_):null}},{key:"_checksum",value:function(d){for(var v=0,_=d.length-2;_>=0;_-=2)v+=d[_];v*=3;for(var S=d.length-1;S>=0;S-=2)v+=d[S];return v%10==0}},{key:"_decodeExtensions",value:function(d){var v=this._nextSet(this._row,d),_=this._findPattern(_l,v,!1,!1);if(_===null)return null;for(var S=0;S<this.supplements.length;S++)try{var T=this.supplements[S].decode(this._row,_.end);if(T!==null)return{code:T.code,start:v,startInfo:_,end:T.end,decodedCodes:T.decodedCodes,format:this.supplements[S].FORMAT}}catch(k){console.error("* decodeExtensions error in ",this.supplements[S],": ",k)}return null}},{key:"decode",value:function(d,v){var _=new Array,S=new Array,T={},k=this._findStart();if(!k)return null;var D={start:k.start,end:k.end};if(S.push(D),!(D=this._decodePayload(D,_,S))||!(D=this._findEnd(D.end,!1))||(S.push(D),!this._checksum(_)))return null;if(this.supplements.length>0){var I=this._decodeExtensions(D.end);if(!I||!I.decodedCodes)return null;var U=I.decodedCodes[I.decodedCodes.length-1],Q={start:U.start+((U.end-U.start)/2|0),end:U.end};if(!this._verifyTrailingWhitespace(Q))return null;T={supplement:I,code:_.join("")+I.code}}return lu(lu({code:_.join(""),start:k.start,end:D.end,startInfo:k,decodedCodes:S},T),{},{format:this.FORMAT})}}])})(Xr);function Hh(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var uu=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=Hh(this,b,[].concat(_)),K()(d,"FORMAT","ean_2"),d}return Hn()(b,g),Y()(b,[{key:"decode",value:function(d,v){d&&(this._row=d);var _=0,S=v,T=this._row.length,k=[],D=[],I=null;if(S===void 0)return null;for(var U=0;U<2&&S<T;U++){if(!(I=this._decodeCode(S)))return null;D.push(I),k.push(I.code%10),I.code>=10&&(_|=1<<1-U),U!==1&&(S=this._nextSet(this._row,I.end),S=this._nextUnset(this._row,S))}if(k.length!==2||parseInt(k.join(""))%4!==_)return null;var Q=this._findStart();return{code:k.join(""),decodedCodes:D,end:I.end,format:this.FORMAT,startInfo:Q,start:Q.start}}}])})(Ns);function hu(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var du=[24,20,18,17,12,6,3,10,9,5],fu=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=hu(this,b,[].concat(_)),K()(d,"FORMAT","ean_5"),d}return Hn()(b,g),Y()(b,[{key:"decode",value:function(d,v){if(v===void 0)return null;d&&(this._row=d);for(var _=0,S=v,T=this._row.length,k=null,D=[],I=[],U=0;U<5&&S<T;U++){if(!(k=this._decodeCode(S)))return null;I.push(k),D.push(k.code%10),k.code>=10&&(_|=1<<4-U),U!==4&&(S=this._nextSet(this._row,k.end),S=this._nextUnset(this._row,S))}if(D.length!==5||(function(ae){for(var ce=ae.length,Ne=0,oe=ce-2;oe>=0;oe-=2)Ne+=ae[oe];Ne*=3;for(var we=ce-1;we>=0;we-=2)Ne+=ae[we];return(Ne*=3)%10})(D)!==(function(ae){for(var ce=0;ce<10;ce++)if(ae===du[ce])return ce;return null})(_))return null;var Q=this._findStart();return{code:D.join(""),decodedCodes:I,end:k.end,format:this.FORMAT,startInfo:Q,start:Q.start}}}])})(Ns);function $h(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var mu=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=$h(this,b,[].concat(_)),K()(d,"FORMAT","ean_8"),d}return Hn()(b,g),Y()(b,[{key:"_decodePayload",value:function(d,v,_){for(var S=d,T=0;T<4;T++){if(!(S=this._decodeCode(S.end,10)))return null;v.push(S.code),_.push(S)}if((S=this._findPattern(cu,S.end,!0,!1))===null)return null;_.push(S);for(var k=0;k<4;k++){if(!(S=this._decodeCode(S.end,10)))return null;_.push(S),v.push(S.code)}return S}}])})(Ns);function hm(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var Gh=(function(g){function b(d){var v;return H()(this,b),v=hm(this,b,[A()({normalizeBarSpaceWidth:!1},d)]),K()(v,"barSpaceRatio",[1,1]),K()(v,"SINGLE_CODE_ERROR",.78),K()(v,"AVG_CODE_ERROR",.38),K()(v,"START_PATTERN",[1,1,1,1]),K()(v,"STOP_PATTERN",[1,1,3]),K()(v,"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),K()(v,"MAX_CORRECTION_FACTOR",5),K()(v,"FORMAT","i2of5"),d.normalizeBarSpaceWidth&&(v.SINGLE_CODE_ERROR=.38,v.AVG_CODE_ERROR=.09),v.config=d,fn()(v,v)}return Hn()(b,g),Y()(b,[{key:"_matchPattern",value:function(d,v){if(this.config.normalizeBarSpaceWidth){for(var _=[0,0],S=[0,0],T=[0,0],k=this.MAX_CORRECTION_FACTOR,D=1/k,I=0;I<d.length;I++)_[I%2]+=d[I],S[I%2]+=v[I];T[0]=S[0]/_[0],T[1]=S[1]/_[1],T[0]=Math.max(Math.min(T[0],k),D),T[1]=Math.max(Math.min(T[1],k),D),this.barSpaceRatio=T;for(var U=0;U<d.length;U++)d[U]*=this.barSpaceRatio[U%2]}return(Q=b,ae="_matchPattern",ce=this,Ne=3,oe=m()(Nt()(1&Ne?Q.prototype:Q),ae,ce),2&Ne&&typeof oe=="function"?function(we){return oe.apply(ce,we)}:oe)([d,v]);var Q,ae,ce,Ne,oe}},{key:"_findPattern",value:function(d,v){var _=arguments.length>2&&arguments[2]!==void 0&&arguments[2],S=arguments.length>3&&arguments[3]!==void 0&&arguments[3],T=new Array(d.length).fill(0),k=0,D={error:Number.MAX_VALUE,start:0,end:0},I=this.AVG_CODE_ERROR;_=_||!1,S=S||!1,v||(v=this._nextSet(this._row));for(var U=v;U<this._row.length;U++)if(this._row[U]^(_?1:0))T[k]++;else{if(k===T.length-1){var Q=T.reduce((function(Ne,oe){return Ne+oe}),0),ae=this._matchPattern(T,d);if(ae<I)return D.error=ae,D.start=U-Q,D.end=U,D;if(!S)return null;for(var ce=0;ce<T.length-2;ce++)T[ce]=T[ce+2];T[T.length-2]=0,T[T.length-1]=0,k--}else k++;T[k]=1,_=!_}return null}},{key:"_findStart",value:function(){for(var d=0,v=this._nextSet(this._row),_=null,S=1;!_;){if(!(_=this._findPattern(this.START_PATTERN,v,!1,!0)))return null;if(S=Math.floor((_.end-_.start)/4),(d=_.start-10*S)>=0&&this._matchRange(d,_.start,0))return _;v=_.end,_=null}return null}},{key:"_verifyTrailingWhitespace",value:function(d){var v=d.end+(d.end-d.start)/2;return v<this._row.length&&this._matchRange(d.end,v,0)?d:null}},{key:"_findEnd",value:function(){this._row.reverse();var d=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),d===null)return null;var v=d.start;return d.start=this._row.length-d.end,d.end=this._row.length-v,d!==null?this._verifyTrailingWhitespace(d):null}},{key:"_decodePair",value:function(d){for(var v=[],_=0;_<d.length;_++){var S=this._decodeCode(d[_]);if(!S)return null;v.push(S)}return v}},{key:"_decodeCode",value:function(d){for(var v=this.AVG_CODE_ERROR,_={error:Number.MAX_VALUE,code:-1,start:0,end:0},S=0;S<this.CODE_PATTERN.length;S++){var T=this._matchPattern(d,this.CODE_PATTERN[S]);T<_.error&&(_.code=S,_.error=T)}return _.error<v?_:null}},{key:"_decodePayload",value:function(d,v,_){for(var S=0,T=d.length,k=[[0,0,0,0,0],[0,0,0,0,0]],D=null;S<T;){for(var I=0;I<5;I++)k[0][I]=d[S]*this.barSpaceRatio[0],k[1][I]=d[S+1]*this.barSpaceRatio[1],S+=2;if(!(D=this._decodePair(k)))return null;for(var U=0;U<D.length;U++)v.push(D[U].code+""),_.push(D[U])}return D}},{key:"_verifyCounterLength",value:function(d){return d.length%10==0}},{key:"decode",value:function(d,v){var _=new Array,S=new Array,T=this._findStart();if(!T)return null;S.push(T);var k=this._findEnd();if(!k)return null;var D=this._fillCounters(T.end,k.start,!1);return this._verifyCounterLength(D)&&this._decodePayload(D,_,S)?_.length%2!=0||_.length<6?null:(S.push(k),{code:_.join(""),start:T.start,end:k.end,startInfo:T,decodedCodes:S,format:this.FORMAT}):null}}])})(Xr);function xl(g,b){var d=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!d){if(Array.isArray(g)||(d=(function(D,I){if(D){if(typeof D=="string")return Wh(D,I);var U={}.toString.call(D).slice(8,-1);return U==="Object"&&D.constructor&&(U=D.constructor.name),U==="Map"||U==="Set"?Array.from(D):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?Wh(D,I):void 0}})(g))||b){d&&(g=d);var v=0,_=function(){};return{s:_,n:function(){return v>=g.length?{done:!0}:{done:!1,value:g[v++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,T=!0,k=!1;return{s:function(){d=d.call(g)},n:function(){var D=d.next();return T=D.done,D},e:function(D){k=!0,S=D},f:function(){try{T||d.return==null||d.return()}finally{if(k)throw S}}}}function Wh(g,b){(b==null||b>g.length)&&(b=g.length);for(var d=0,v=Array(b);d<b;d++)v[d]=g[d];return v}function dm(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var Ur=[2,2.5,3],fo=(function(g){function b(){var d,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return H()(this,b),d=dm(this,b,[v]),K()(d,"FORMAT","pharmacode"),K()(d,"SINGLE_CODE_ERROR",.7),K()(d,"AVG_CODE_ERROR",.48),d}return Hn()(b,g),Y()(b,[{key:"_findStart",value:function(){for(var d=0;d<this._row.length;){var v=this._nextSet(this._row,d);if(v>=this._row.length)return null;for(var _=v;_<this._row.length&&this._row[_];)_++;var S=_-v;if(S<5)d=_+1;else{var T=v-Math.max(2*S,20);if(T<0)d=_+1;else if(this._matchRange(T,v,0)){var k=Math.max(10*S,50),D=this._nextSet(this._row,_);if(D>=this._row.length)d=_+1;else{if(!(D-_>k))return{start:v,end:_};d=_+1}}else d=_+1}}return null}},{key:"_smoothBarWidths",value:function(d){if(d.length<=2)return d;for(var v=d.slice(),_=1;_<v.length-1;_++){var S=v[_-1],T=v[_],k=[S,T,v[_+1]].sort((function(I,U){return I-U}))[1],D=Math.abs(T-k);D>0&&D<=3&&(v[_]=k)}return v}},{key:"_extractBarsAndSpaces",value:function(d){for(var v=[],_=[],S=d,T=0,k=!1;S<this._row.length&&this._row[S];)T++,S++;if(T===0)return null;for(v.push(T),T=0;S<this._row.length&&!this._row[S];)T++,S++;if(T===0||S>=this._row.length)return null;_.push(T);for(var D=6*(v[0]<_[0]?v[0]:.8*_[0]),I=2.5*_[0];S<this._row.length&&v.length<16;){for(T=0;S<this._row.length&&this._row[S];)T++,S++;if(T===0)break;v.push(T),T=0;for(var U=S;S<this._row.length&&!this._row[S];)T++,S++;if(T===0)break;if(T>=D){k=!0,S=U;break}if(v.length>=2&&T>=I){k=!0,S=U;break}if(S>=this._row.length){k=!0,S=U;break}_.push(T),_.length>=2&&(I=2*(_.reduce((function(Q,ae){return Q+ae}),0)/_.length))}return k?v.length<2||v.length>16||_.length!==v.length-1?null:this._validateSpaces(_)&&this._validateBarSizeCount(v)?{bars:this._smoothBarWidths(v),spaces:_,end:S}:null:null}},{key:"_validateBarSizeCount",value:function(d){if(d.length===0)return!1;var v,_=[],S=xl(d);try{for(S.s();!(v=S.n()).done;){var T,k=v.value,D=!1,I=xl(_);try{for(I.s();!(T=I.n()).done;){var U=T.value,Q=U.reduce((function(ae,ce){return ae+ce}),0)/U.length;if(Math.abs(k-Q)<=.35*Q){U.push(k),D=!0;break}}}catch(ae){I.e(ae)}finally{I.f()}D||_.push([k])}}catch(ae){S.e(ae)}finally{S.f()}return!(_.length>2)}},{key:"_validateSpaces",value:function(d){if(d.length===0)return!0;var v=d.reduce((function(S,T){return S+T}),0)/d.length;if(v===0)return!1;var _=d.reduce((function(S,T){return S+Math.pow(T-v,2)}),0)/d.length;return Math.sqrt(_)/v<=.35}},{key:"_validateBarRatios",value:function(d,v){var _=d.reduce((function(Gt,Gn){return Gt+Gn}),0)/d.length,S=d.reduce((function(Gt,Gn){return Gt+Math.abs(Gn-_)}),0)/d.length;if((_===0?0:S/_)<=.1){var T=v.length>0?v.reduce((function(Gt,Gn){return Gt+Gn}),0)/v.length:0;return T>0&&T/_<.7?{narrowWidth:_/2.5,wideRatio:2.5}:{narrowWidth:_,wideRatio:2}}var k=Array.from(new Set(d.slice().sort((function(Gt,Gn){return Gt-Gn}))));if(k.length<2)return{narrowWidth:d.reduce((function(Gt,Gn){return Gt+Gn}),0)/d.length,wideRatio:2};for(var D=[],I=0;I<k.length-1;I++){var U,Q=(k[I]+k[I+1])/2,ae=[],ce=[],Ne=xl(d);try{for(Ne.s();!(U=Ne.n()).done;){var oe=U.value;oe<Q?ae.push(oe):ce.push(oe)}}catch(Gt){Ne.e(Gt)}finally{Ne.f()}if(ae.length!==0&&ce.length!==0){for(var we=ae.reduce((function(Gt,Gn){return Gt+Gn}),0)/ae.length,Ie=ce.reduce((function(Gt,Gn){return Gt+Gn}),0)/ce.length,Me=Ie/we,et=Ur[0],Ke=Math.abs(Me-et),ut=0,At=Ur;ut<At.length;ut++){var ft=At[ut],Dt=Math.abs(Me-ft);Dt<Ke&&(Ke=Dt,et=ft)}D.push({threshold:Q,narrowBars:ae,wideBars:ce,avgN:we,avgW:Ie,ratio:Me,ratioDiff:Ke,matchedRatio:et})}}D.sort((function(Gt,Gn){return Gt.ratioDiff-Gn.ratioDiff}));for(var Br=0,rr=D;Br<rr.length;Br++){var mn=rr[Br],xi=.05*mn.matchedRatio;if(!(Math.abs(mn.ratio-mn.matchedRatio)>xi)){var ks,ni=.15*mn.avgN,fs=.15*mn.avgW,ts=!0,un=xl(mn.narrowBars);try{for(un.s();!(ks=un.n()).done;){var ms=ks.value;if(Math.abs(ms-mn.avgN)>ni){ts=!1;break}}}catch(Gt){un.e(Gt)}finally{un.f()}if(ts){var ri,Rs=xl(mn.wideBars);try{for(Rs.s();!(ri=Rs.n()).done;){var Ds=ri.value;if(Math.abs(Ds-mn.avgW)>fs){ts=!1;break}}}catch(Gt){Rs.e(Gt)}finally{Rs.f()}if(ts)return{narrowWidth:mn.avgN,wideRatio:mn.matchedRatio}}}}return null}},{key:"_validatePeriodicity",value:function(d,v){if(d.length>0){var _=d.reduce((function(U,Q){return U+Q}),0)/d.length,S=d.reduce((function(U,Q){return U+Math.pow(Q-_,2)}),0)/d.length,T=Math.sqrt(S);if((_!==0?T/_:0)>.65)return!1}if(v.length>0){var k=v.reduce((function(U,Q){return U+Q}),0)/v.length,D=v.reduce((function(U,Q){return U+Math.pow(Q-k,2)}),0)/v.length,I=Math.sqrt(D);if((k!==0?I/k:0)>.55)return!1}return!0}},{key:"_validateQuietZones",value:function(d,v,_){var S=1*v;if(d.start>=2&&d.start<S)return!1;var T=this._row.length-_;return T<6||!(T<S)}},{key:"_decodeBars",value:function(d,v){for(var _=1.6*(v??Math.min.apply(Math,R()(d))),S=0,T=d.slice().reverse(),k=0;k<T.length;k++)S+=T[k]>_?Math.pow(2,k+1):Math.pow(2,k);for(var D="",I=T.length-1;I>=0;I--)D+=T[I]>_?"W":"N";return{value:S,pattern:D}}},{key:"_verifyTrailingWhitespace",value:function(d,v){var _=Math.min(d+2*v,this._row.length);return this._matchRange(d,_,0)}},{key:"_validatePatternConsistency",value:function(d,v){for(var _=d.start,S=0,T=0,k=0,D=[-2,-1,1,2];k<D.length;k++){var I=_+D[k];if(!(I<0||I>=this._row.length)){T++;var U=this._extractBarsAndSpaces(I);if(U&&U.bars.length===v.length){for(var Q=!0,ae=0;ae<v.length;ae++)if(Math.abs(U.bars[ae]-v[ae])/Math.max(v[ae],1)>.25){Q=!1;break}Q&&S++}}}return T>0&&S>=.5*T}},{key:"decode",value:function(d,v){var _=this._findStart();if(!_||_.start>.5*this._row.length)return null;var S=this._extractBarsAndSpaces(_.start);if(!S)return null;var T=S.bars,k=S.spaces,D=S.end;if(T.reduce((function(Ne,oe){return Ne+oe}),0)+k.reduce((function(Ne,oe){return Ne+oe}),0)<20||this._row.length-D<0||!this._validateSpaces(k)||!this._validatePeriodicity(T,k)||!this._validatePatternConsistency(_,T))return null;var I=this._validateBarRatios(T,k);if(!I||!this._validateQuietZones(_,I.narrowWidth,D))return null;var U=this._decodeBars(T,I.narrowWidth);if(!U)return null;var Q=U.value;if(Q<3||Q>131070)return null;var ae=T.reduce((function(Ne,oe){return Ne+oe}),0)/T.length;this._verifyTrailingWhitespace(D,ae);var ce=T.map((function(Ne,oe){return{code:Ne>1.6*Math.min.apply(Math,R()(T))?1:0,start:0,end:0,error:0}}));return{code:Q.toString(),start:_.start,end:D,startInfo:_,decodedCodes:ce,pattern:U.pattern,format:this.FORMAT}}}])})(Xr);K()(fo,"adjacentLineValidationMatches",1);var ic=fo;function pu(g,b){var d=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);b&&(v=v.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),d.push.apply(d,v)}return d}function Yh(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}function gu(g,b,d,v){var _=m()(Nt()(g.prototype),b,d);return 2&v&&typeof _=="function"?function(S){return _.apply(d,S)}:_}var ac=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=Yh(this,b,[].concat(_)),K()(d,"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),K()(d,"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),K()(d,"FORMAT","upc_e"),d}return Hn()(b,g),Y()(b,[{key:"_decodePayload",value:function(d,v,_){for(var S=(function(D){for(var I=1;I<arguments.length;I++){var U=arguments[I]!=null?arguments[I]:{};I%2?pu(Object(U),!0).forEach((function(Q){K()(D,Q,U[Q])})):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(U)):pu(Object(U)).forEach((function(Q){Object.defineProperty(D,Q,Object.getOwnPropertyDescriptor(U,Q))}))}return D})({},d),T=0,k=0;k<6;k++){if(!(S=this._decodeCode(S.end)))return null;S.code>=10&&(S.code=S.code-10,T|=1<<5-k),v.push(S.code),_.push(S)}return this._determineParity(T,v)?S:null}},{key:"_determineParity",value:function(d,v){for(var _=0;_<this.CODE_FREQUENCY.length;_++)for(var S=0;S<this.CODE_FREQUENCY[_].length;S++)if(d===this.CODE_FREQUENCY[_][S])return v.unshift(_),v.push(S),!0;return!1}},{key:"_convertToUPCA",value:function(d){var v=[d[0]],_=d[d.length-2];return(v=_<=2?v.concat(d.slice(1,3)).concat([_,0,0,0,0]).concat(d.slice(3,6)):_===3?v.concat(d.slice(1,4)).concat([0,0,0,0,0]).concat(d.slice(4,6)):_===4?v.concat(d.slice(1,5)).concat([0,0,0,0,0,d[5]]):v.concat(d.slice(1,6)).concat([0,0,0,0,_])).push(d[d.length-1]),v}},{key:"_checksum",value:function(d){return gu(b,"_checksum",this,3)([this._convertToUPCA(d)])}},{key:"_findEnd",value:function(d,v){return gu(b,"_findEnd",this,3)([d,!0])}},{key:"_verifyTrailingWhitespace",value:function(d){var v=d.end+(d.end-d.start)/2;return v<this._row.length&&this._matchRange(d.end,v,0)?d:null}}])})(Ns);function fm(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var va=(function(g){function b(){var d;H()(this,b);for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];return d=fm(this,b,[].concat(_)),K()(d,"FORMAT","upc_a"),d}return Hn()(b,g),Y()(b,[{key:"decode",value:function(d,v){var _=Ns.prototype.decode.call(this);return _&&_.code&&_.code.length===13&&_.code.charAt(0)==="0"?(_.code=_.code.substring(1),_):null}}])})(Ns),mo={},Hi={UP:1,DOWN:-1};mo.getBarcodeLine=function(g,b,d){var v,_,S,T,k,D=0|b.x,I=0|b.y,U=0|d.x,Q=0|d.y,ae=Math.abs(Q-I)>Math.abs(U-D),ce=[],Ne=g.data,oe=g.size.x,we=255,Ie=0;function Me(At,ft){k=Ne[ft*oe+At],we=k<we?k:we,Ie=k>Ie?k:Ie,ce.push(k)}ae&&(S=D,D=I,I=S,S=U,U=Q,Q=S),D>U&&(S=D,D=U,U=S,S=I,I=Q,Q=S);var et=U-D,Ke=Math.abs(Q-I);v=et/2|0,_=I;var ut=I<Q?1:-1;for(T=D;T<U;T++)ae?Me(_,T):Me(T,_),(v-=Ke)<0&&(_+=ut,v+=et);return{line:ce,min:we,max:Ie}},mo.toBinaryLine=function(g){var b,d,v,_,S,T,k=g.min,D=g.max,I=g.line,U=k+(D-k)/2,Q=[],ae=(D-k)/12,ce=-ae;for(v=I[0]>U?Hi.UP:Hi.DOWN,Q.push({pos:0,val:I[0]}),S=0;S<I.length-2;S++)v!==(_=(b=I[S+1]-I[S])+(d=I[S+2]-I[S+1])<ce&&I[S+1]<1.5*U?Hi.DOWN:b+d>ae&&I[S+1]>.5*U?Hi.UP:v)&&(Q.push({pos:S,val:I[S]}),v=_);for(Q.push({pos:I.length,val:I[I.length-1]}),T=Q[0].pos;T<Q[1].pos;T++)I[T]=I[T]>U?0:1;for(S=1;S<Q.length-1;S++)for(ae=Q[S+1].val>Q[S].val?Q[S].val+(Q[S+1].val-Q[S].val)/3*2|0:Q[S+1].val+(Q[S].val-Q[S+1].val)/3|0,T=Q[S].pos;T<Q[S+1].pos;T++)I[T]=I[T]>ae?0:1;return{line:I,threshold:ae}},mo.debug={printFrequency:function(g,b){var d,v=b.getContext("2d");for(b.width=g.length,b.height=256,v.beginPath(),v.strokeStyle="blue",d=0;d<g.length;d++)v.moveTo(d,255),v.lineTo(d,255-g[d]);v.stroke(),v.closePath()},printPattern:function(g,b){var d,v=b.getContext("2d");for(b.width=g.length,v.fillColor="black",d=0;d<g.length;d++)g[d]===1&&v.fillRect(d,0,1,100)}};var po=mo;function Qh(g,b){var d=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!d){if(Array.isArray(g)||(d=(function(D,I){if(D){if(typeof D=="string")return $i(D,I);var U={}.toString.call(D).slice(8,-1);return U==="Object"&&D.constructor&&(U=D.constructor.name),U==="Map"||U==="Set"?Array.from(D):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?$i(D,I):void 0}})(g))||b){d&&(g=d);var v=0,_=function(){};return{s:_,n:function(){return v>=g.length?{done:!0}:{done:!1,value:g[v++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,T=!0,k=!1;return{s:function(){d=d.call(g)},n:function(){var D=d.next();return T=D.done,D},e:function(D){k=!0,S=D},f:function(){try{T||d.return==null||d.return()}finally{if(k)throw S}}}}function $i(g,b){(b==null||b>g.length)&&(b=g.length);for(var d=0,v=Array(b);d<b;d++)v[d]=g[d];return v}var Ks={code_128_reader:bl,ean_reader:Ns,ean_5_reader:fu,ean_2_reader:uu,ean_8_reader:mu,code_39_reader:Ye,code_39_vin_reader:cs,codabar_reader:wr,upc_reader:va,upc_e_reader:ac,i2of5_reader:Gh,"2of5_reader":yl,code_93_reader:ga,code_32_reader:Yt,pharmacode_reader:ic},wl={registerReader:function(g,b){Ks[g]=b},create:function(g,b){var d=[];function v(){g.readers.forEach((function(D){var I,U={},Q=[];E()(D)==="object"?(I=D.format,U=D.config):typeof D=="string"&&(I=D),U.supplements&&(Q=U.supplements.map((function(ce){return new Ks[ce]})));try{var ae=new Ks[I](U,Q);d.push(ae)}catch(ce){throw console.error("* Error constructing reader ",I,ce),ce}}))}function _(D){var I,U=null,Q=po.getBarcodeLine(b,D[0],D[1]);po.toBinaryLine(Q);var ae=-1;for(I=0;I<d.length&&U===null;I++)typeof d[I].setImageWrapper=="function"&&d[I].setImageWrapper(b),(U=d[I].decodePattern(Q.line))!==null&&(ae=I);return U===null||ae>=0&&d[ae]instanceof ic&&!(function(ce,Ne,oe,we){var Ie=Math.round(ce[1].y),Me=Ne.start,et=oe.constructor,Ke=et&&et.adjacentLineValidationMatches||0;if(Ke<=0)return!0;for(var ut=0,At=!1,ft=0,Dt=[1,2,3];ft<Dt.length;ft++){var Br=Dt[ft];if(At)break;for(var rr=0,mn=[-1,1];rr<mn.length;rr++){var xi=mn[rr];if(At)break;var ks=Ie+Br*xi;if(!(ks<0||ks>=we.size.y)){var ni={x:ce[0].x,y:ks},fs={x:ce[1].x,y:ks};try{var ts=po.getBarcodeLine(we,ni,fs);po.toBinaryLine(ts),oe._row=ts.line;var un=oe._findStart();if(un!==null&&un.start===Me&&++ut>=Ke){At=!0;break}}catch{}}}}return ut>=Ke})(D,U,d[ae],b)?null:{codeResult:U,barcodeLine:Q}}function S(D){return T.apply(this,arguments)}function T(){return(T=tr()(An.a.mark((function D(I){var U,Q,ae,ce,Ne;return An.a.wrap((function(oe){for(;;)switch(oe.prev=oe.next){case 0:U=null,Q=Qh(d),oe.prev=1,Q.s();case 2:if((ae=Q.n()).done){oe.next=5;break}if(!(ce=ae.value).decodeImage){oe.next=4;break}return oe.next=3,ce.decodeImage(I);case 3:if(!(U=oe.sent)){oe.next=4;break}return oe.abrupt("continue",5);case 4:oe.next=2;break;case 5:oe.next=7;break;case 6:oe.prev=6,Ne=oe.catch(1),Q.e(Ne);case 7:return oe.prev=7,Q.f(),oe.finish(7);case 8:return oe.abrupt("return",U);case 9:case"end":return oe.stop()}}),D,null,[[1,6,7,8]])})))).apply(this,arguments)}function k(D){var I,U,Q=(function(ce){return Math.sqrt(Math.pow(Math.abs(ce[1].y-ce[0].y),2)+Math.pow(Math.abs(ce[1].x-ce[0].x),2))})(I=(function(ce){return[{x:(ce[1][0]-ce[0][0])/2+ce[0][0],y:(ce[1][1]-ce[0][1])/2+ce[0][1]},{x:(ce[3][0]-ce[2][0])/2+ce[2][0],y:(ce[3][1]-ce[2][1])/2+ce[2][1]}]})(D)),ae=Math.atan2(I[1].y-I[0].y,I[1].x-I[0].x);return(I=(function(ce,Ne,oe){function we(Ie){var Me=Ie*Math.sin(Ne),et=Ie*Math.cos(Ne);ce[0].y-=Me,ce[0].x-=et,ce[1].y+=Me,ce[1].x+=et}for(we(oe);oe>1&&(!b.inImageWithBorder(ce[0])||!b.inImageWithBorder(ce[1]));)we(-(oe-=Math.ceil(oe/2)));return ce})(I,ae,Math.floor(.1*Q)))===null?null:((U=_(I))===null&&(U=(function(ce,Ne,oe){var we,Ie,Me,et=Math.sqrt(Math.pow(ce[1][0]-ce[0][0],2)+Math.pow(ce[1][1]-ce[0][1],2)),Ke=null,ut=Math.sin(oe),At=Math.cos(oe);for(we=1;we<16&&Ke===null;we++)Me={y:(Ie=et/16*we*(we%2==0?-1:1))*ut,x:Ie*At},Ne[0].y+=Me.x,Ne[0].x-=Me.y,Ne[1].y+=Me.x,Ne[1].x-=Me.y,Ke=_(Ne);return Ke})(D,I,ae)),U===null?null:{codeResult:U.codeResult,line:I,angle:ae,pattern:U.barcodeLine.line,threshold:U.barcodeLine.threshold})}return v(),{decodeFromBoundingBox:function(D){return k(D)},decodeFromBoundingBoxes:function(D){var I,U,Q=[],ae=g.multiple;for(I=0;I<D.length;I++){var ce=D[I];if((U=k(ce)||{}).box=ce,ae)Q.push(U);else if(U.codeResult)return U}return{barcodes:Q}},decodeFromImage:function(D){return tr()(An.a.mark((function I(){var U;return An.a.wrap((function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=1,S(D);case 1:return U=Q.sent,Q.abrupt("return",U);case 2:case"end":return Q.stop()}}),I)})))()},registerReader:function(D,I){if(Ks[D])throw new Error("cannot register existing reader",D);Ks[D]=I},setReaders:function(D){g.readers=D,d.length=0,v()}}}},Gi=(function(){var g={};function b(_){return g[_]||(g[_]={subscribers:[]}),g[_]}function d(_,S){_.async?setTimeout((function(){_.callback(S)}),4):_.callback(S)}function v(_,S,T){var k;if(typeof S=="function")k={callback:S,async:T};else if(!(k=S).callback)throw new Error("Callback was not specified on options");b(_).subscribers.push(k)}return{subscribe:function(_,S,T){return v(_,S,T)},publish:function(_,S){var T=b(_),k=T.subscribers;k.filter((function(D){return!!D.once})).forEach((function(D){d(D,S)})),T.subscribers=k.filter((function(D){return!D.once})),T.subscribers.forEach((function(D){d(D,S)}))},once:function(_,S){var T=arguments.length>2&&arguments[2]!==void 0&&arguments[2];v(_,{callback:S,async:T,once:!0})},unsubscribe:function(_,S){if(_){var T=b(_);T.subscribers=T&&S?T.subscribers.filter((function(k){return k.callback!==S})):[]}else g={}}}})(),ya=a(81),Kh=a.n(ya),Xh=a(82),Jh=a.n(Xh),mm=a(83);function pm(g,b,d){return b=Nt()(b),fn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Nt()(g).constructor):b.apply(g,d))}var vu=(function(g){function b(d,v){var _;return H()(this,b),_=pm(this,b,[d]),K()(_,"code",void 0),_.code=v,Object.setPrototypeOf(_,b.prototype),_}return Hn()(b,g),Y()(b,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,code:this.code}}}])})(a.n(mm)()(Error)),yu="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function Zh(){try{return navigator.mediaDevices.enumerateDevices()}catch{var g=new vu("enumerateDevices is not defined. ".concat(yu),-1);return Promise.reject(g)}}function oc(g){try{return navigator.mediaDevices.getUserMedia(g)}catch{var b=new vu("getUserMedia is not defined. ".concat(yu),-1);return Promise.reject(b)}}var dr,lc=["deviceId"];function Jr(g,b){var d=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);b&&(v=v.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),d.push.apply(d,v)}return d}function ba(g){for(var b=1;b<arguments.length;b++){var d=arguments[b]!=null?arguments[b]:{};b%2?Jr(Object(d),!0).forEach((function(v){K()(g,v,d[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(d)):Jr(Object(d)).forEach((function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(d,v))}))}return g}function bu(g,b){var d=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!d){if(Array.isArray(g)||(d=(function(D,I){if(D){if(typeof D=="string")return Sl(D,I);var U={}.toString.call(D).slice(8,-1);return U==="Object"&&D.constructor&&(U=D.constructor.name),U==="Map"||U==="Set"?Array.from(D):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?Sl(D,I):void 0}})(g))||b){d&&(g=d);var v=0,_=function(){};return{s:_,n:function(){return v>=g.length?{done:!0}:{done:!1,value:g[v++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,T=!0,k=!1;return{s:function(){d=d.call(g)},n:function(){var D=d.next();return T=D.done,D},e:function(D){k=!0,S=D},f:function(){try{T||d.return==null||d.return()}finally{if(k)throw S}}}}function Sl(g,b){(b==null||b>g.length)&&(b=g.length);for(var d=0,v=Array(b);d<b;d++)v[d]=g[d];return v}function cc(g){return new Promise((function(b,d){var v=10;(function _(){v>0?g.videoWidth>10&&g.videoHeight>10?b():window.setTimeout(_,500):d(new vu("Unable to play video stream. Is webcam working?",-1)),v--})()}))}function _u(g,b){return Wi.apply(this,arguments)}function Wi(){return(Wi=tr()(An.a.mark((function g(b,d){var v;return An.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=1,oc(d);case 1:if(v=_.sent,dr=v,!b){_.next=2;break}return b.setAttribute("autoplay","true"),b.setAttribute("muted","true"),b.setAttribute("playsinline","true"),b.srcObject=v,b.addEventListener("loadedmetadata",(function(){b.play().catch((function(S){console.warn("* Error while trying to play video stream:",S)}))})),_.abrupt("return",cc(b));case 2:return _.abrupt("return",Promise.resolve());case 3:case"end":return _.stop()}}),g)})))).apply(this,arguments)}function xu(g){var b=Jh()(g,["facing","minAspectRatio","maxAspectRatio"]);return g.minAspectRatio!==void 0&&g.minAspectRatio>0&&(b.aspectRatio=g.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),g.facing!==void 0&&(b.facingMode=g.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),b}function uc(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=xu(g);return b&&b.deviceId&&b.facingMode&&delete b.facingMode,Promise.resolve({audio:!1,video:b})}function _a(){return(_a=tr()(An.a.mark((function g(b){var d,v,_,S,T,k,D,I,U,Q;return An.a.wrap((function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=1,Zh();case 1:if(d=ae.sent,v=d.filter((function(ce){return ce.kind==="videoinput"})),b){ae.next=2;break}return ae.abrupt("return",v);case 2:_=[],S=xu(b),S.deviceId,T=Kh()(S,lc),k=bu(v),ae.prev=3,k.s();case 4:if((D=k.n()).done){ae.next=9;break}return I=D.value,ae.prev=5,U={audio:!1,video:ba(ba({},T),{},{deviceId:{exact:I.deviceId}})},ae.next=6,oc(U);case 6:ae.sent.getTracks().forEach((function(ce){return ce.stop()})),_.push(I),ae.next=8;break;case 7:ae.prev=7,ae.catch(5);case 8:ae.next=4;break;case 9:ae.next=11;break;case 10:ae.prev=10,Q=ae.catch(3),k.e(Q);case 11:return ae.prev=11,k.f(),ae.finish(11);case 12:return ae.abrupt("return",_);case 13:case"end":return ae.stop()}}),g,null,[[3,10,11,12],[5,7]])})))).apply(this,arguments)}function hc(){if(!dr)return null;var g=dr.getVideoTracks();return g&&g!=null&&g.length?g[0]:null}var fr={requestedVideoElement:null,request:function(g,b){return tr()(An.a.mark((function d(){var v;return An.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return fr.requestedVideoElement=g,_.next=1,uc(b);case 1:return v=_.sent,_.abrupt("return",_u(g,v));case 2:case"end":return _.stop()}}),d)})))()},release:function(){var g=dr&&dr.getVideoTracks();return fr.requestedVideoElement!==null&&fr.requestedVideoElement.pause(),new Promise((function(b){setTimeout((function(){g&&g.length&&g.forEach((function(d){return d.stop()})),dr=null,fr.requestedVideoElement=null,b()}),0)}))},enumerateVideoDevices:function(g){return _a.apply(this,arguments)},getActiveStream:function(){var g;return(g=dr)!==null&&g!==void 0?g:null},getActiveStreamLabel:function(){var g=hc();return g?g.label:""},getActiveTrack:hc,disableTorch:function(){return tr()(An.a.mark((function g(){var b,d;return An.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(!(b=hc())){v.next=4;break}return v.prev=1,v.next=2,b.applyConstraints({advanced:[{torch:!1}]});case 2:v.next=4;break;case 3:throw v.prev=3,(d=v.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),d;case 4:case"end":return v.stop()}}),g,null,[[1,3]])})))()},enableTorch:function(){return tr()(An.a.mark((function g(){var b,d;return An.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(!(b=hc())){v.next=4;break}return v.prev=1,v.next=2,b.applyConstraints({advanced:[{torch:!0}]});case 2:v.next=4;break;case 3:throw v.prev=3,(d=v.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),d;case 4:case"end":return v.stop()}}),g,null,[[1,3]])})))()}},go=fr,Xs={create:function(g){var b,d=document.createElement("canvas"),v=d.getContext("2d",{willReadFrequently:!!g.willReadFrequently}),_=[],S=(b=g.capacity)!==null&&b!==void 0?b:20,T=g.capture===!0;function k(D){return!!S&&D&&!(function(I,U){return U&&U.some((function(Q){return Object.keys(Q).every((function(ae){return Q[ae]===I[ae]}))}))})(D,g.blacklist)&&(function(I,U){return typeof U!="function"||U(I)})(D,g.filter)}return{addResult:function(D,I,U){var Q={};k(U)&&(S--,Q.codeResult=U,T&&(d.width=I.x,d.height=I.y,Ws.drawImage(D,I,v),Q.frame=d.toDataURL()),_.push(Q))},getResults:function(){return _}}}},ed={inputStream:{type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,canvas:{createOverlay:!0},decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},El=Math.PI/180,Yi={};Yi.create=function(g,b){var d,v={},_=g.getConfig(),S=Vr(g.getRealWidth(),g.getRealHeight()),T=g.getCanvasSize(),k=Vr(g.getWidth(),g.getHeight()),D=g.getTopRight(),I=D.x,U=D.y,Q=null,ae=null,ce=_.willReadFrequently;function Ne(oe,we,Ie,Me,et){var Ke=Math.floor(Me),ut=Math.floor(et),At=Math.min(Ke+1,we-1),ft=Math.min(ut+1,Ie-1),Dt=Me-Ke,Br=et-ut;return(oe[ut*we+Ke]*(1-Dt)+oe[ut*we+At]*Dt)*(1-Br)+(oe[ft*we+Ke]*(1-Dt)+oe[ft*we+At]*Dt)*Br}return(d=b||document.createElement("canvas")).width=T.x,d.height=T.y,Q=d.getContext("2d",{willReadFrequently:!!ce}),ae=new Uint8Array(k.x*k.y),v.attachData=function(oe){ae=oe},v.getData=function(){return ae},v.grab=function(){var oe=_.halfSample,we=g.getFrame(),Ie=we,Me=0;if(Ie){if((function(un,ms,ri){un.width!==ms.x&&(un.width=ms.x),un.height!==ms.y&&(un.height=ms.y)})(d,T,_.debug),_.type==="ImageStream"&&(Ie=we.img,we.tags&&we.tags.orientation))switch(we.tags.orientation){case 6:Me=90*El;break;case 8:Me=-90*El}if(Me!==0?(Q.translate(T.x/2,T.y/2),Q.rotate(Me),Q.drawImage(Ie,-T.y/2,-T.x/2,T.y,T.x),Q.rotate(-Me),Q.translate(-T.x/2,-T.y/2)):Q.drawImage(Ie,0,0,T.x,T.y),oe)(function(un,ms,ri){for(var Rs,Ds=0,Gt=ms.x,Gn=Math.floor(un.length/4),ns=ms.x/2,rs=0,wi=ms.x;Gt<Gn;){for(Rs=0;Rs<ns;Rs++)ri[rs]=(.299*un[4*Ds+0]+.587*un[4*Ds+1]+.114*un[4*Ds+2]+(.299*un[4*(Ds+1)+0]+.587*un[4*(Ds+1)+1]+.114*un[4*(Ds+1)+2])+(.299*un[4*Gt+0]+.587*un[4*Gt+1]+.114*un[4*Gt+2])+(.299*un[4*(Gt+1)+0]+.587*un[4*(Gt+1)+1]+.114*un[4*(Gt+1)+2]))/4,rs++,Ds+=2,Gt+=2;Ds+=wi,Gt+=wi}})(Q.getImageData(I,U,k.x,k.y).data,k,ae);else{var et=document.createElement("canvas");et.width=S.x,et.height=S.y;var Ke=et.getContext("2d");Me!==0?(Ke.translate(S.x/2,S.y/2),Ke.rotate(Me),Ke.drawImage(Ie,-S.y/2,-S.x/2,S.y,S.x)):Ke.drawImage(Ie,0,0,S.x,S.y);var ut=Ke.getImageData(0,0,S.x,S.y).data,At=new Uint8Array(S.x*S.y);$s(ut,At,_);for(var ft=new Uint8Array(T.x*T.y),Dt=S.x/T.x,Br=S.y/T.y,rr=0;rr<T.y;rr++)for(var mn=0;mn<T.x;mn++){var xi=mn*Dt,ks=rr*Br;ft[rr*T.x+mn]=0|Ne(At,S.x,S.y,xi,ks)}for(var ni=0;ni<k.y;ni++)for(var fs=0;fs<k.x;fs++){var ts=(ni+U)*T.x+(fs+I);ae[ni*k.x+fs]=ft[ts]}}return!0}return!1},v.getSize=function(){return k},v};var wu=Yi,Tl={274:"orientation"},dc=Object.keys(Tl).map((function(g){return Tl[g]}));function td(g){return new Promise((function(b){var d=new FileReader;d.onload=function(v){return b(v.target.result)},d.readAsArrayBuffer(g)}))}function us(g){return new Promise((function(b,d){var v=new XMLHttpRequest;v.open("GET",g,!0),v.responseType="blob",v.onreadystatechange=function(){v.readyState!==XMLHttpRequest.DONE||v.status!==200&&v.status!==0||b(this.response)},v.onerror=d,v.send()}))}function vo(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dc,d=new DataView(g),v=g.byteLength,_=b.reduce((function(T,k){var D=Object.keys(Tl).filter((function(I){return Tl[I]===k}))[0];return D&&(T[D]=k),T}),{}),S=2;if(d.getUint8(0)!==255||d.getUint8(1)!==216)return!1;for(;S<v;){if(d.getUint8(S)!==255)return!1;if(d.getUint8(S+1)===225)return yo(d,S+4,_);S+=2+d.getUint16(S+2)}return!1}function yo(g,b,d){if((function(T,k,D){for(var I="",U=k;U<k+D;U++)I+=String.fromCharCode(T.getUint8(U));return I})(g,b,4)!=="Exif")return!1;var v,_=b+6;if(g.getUint16(_)===18761)v=!1;else{if(g.getUint16(_)!==19789)return!1;v=!0}if(g.getUint16(_+2,!v)!==42)return!1;var S=g.getUint32(_+4,!v);return!(S<8)&&(function(T,k,D,I,U){for(var Q=T.getUint16(D,!U),ae={},ce=0;ce<Q;ce++){var Ne=D+12*ce+2,oe=I[T.getUint16(Ne,!U)];oe&&(ae[oe]=fc(T,Ne,k,D,U))}return ae})(g,_,_+S,d,v)}function fc(g,b,d,v,_){var S=g.getUint16(b+2,!_),T=g.getUint32(b+4,!_);switch(S){case 3:if(T===1)return g.getUint16(b+8,!_)}return null}function Cl(g,b){return"".concat(g,"image-").concat(b.toString().padStart(3,"0"),".jpg")}var Zr={};function hs(g,b){g.onload=function(){b.loaded(this)},g.onerror=function(){b.loaded(this)}}Zr.load=function(g,b,d,v,_,S){var T,k,D,I=new Array(v),U=new Array(I.length);if(_===!1)I[0]=g;else for(T=0;T<I.length;T++)D=d+T,I[T]=Cl(g,D);for(U.notLoaded=[],U.addImage=function(Q){U.notLoaded.push(Q)},U.loaded=function(Q){for(var ae=U.notLoaded,ce=0;ce<ae.length;ce++)if(ae[ce]===Q){ae.splice(ce,1);for(var Ne=0;Ne<I.length;Ne++){var oe=encodeURI(I[Ne].substr(I[Ne].lastIndexOf("/")));if(Q.src.lastIndexOf(oe)!==-1){U[Ne]={img:Q};break}}break}ae.length===0&&(_===!1?(function(we){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dc;return/^blob:/i.test(we)?us(we).then(td).then((function(Me){return vo(Me,Ie)})):Promise.resolve(null)})(g,["orientation"]).then((function(we){U[0].tags=we,b(U)})).catch((function(we){console.log(we),b(U)})):b(U))},T=0;T<I.length;T++)k=new Image,U.addImage(k),hs(k,U),k.src=I[T]};var Qi=Zr,As={createVideoStream:function(g){console.warn("**** InputStreamBrowser createVideoStream");var b,d,v=null,_=["canrecord","ended"],S={},T={x:0,y:0,type:"Point"},k={x:0,y:0,type:"XYSize"},D={getRealWidth:function(){return g.videoWidth},getRealHeight:function(){return g.videoHeight},getWidth:function(){return b},getHeight:function(){return d},setWidth:function(I){b=I},setHeight:function(I){d=I},setInputStream:function(I){v=I,this.setAttribute("src",I.src!==void 0?I.src:"")},ended:function(){return g.ended},getConfig:function(){return v},setAttribute:function(I,U){g&&g.setAttribute(I,U)},pause:function(){g.pause()},play:function(){g.play()},setCurrentTime:function(I){var U;((U=v)===null||U===void 0?void 0:U.type)!=="LiveStream"&&this.setAttribute("currentTime",I.toString())},addEventListener:function(I,U,Q){_.indexOf(I)!==-1?(S[I]||(S[I]=[]),S[I].push(U)):g.addEventListener(I,U,Q)},clearEventHandlers:function(){_.forEach((function(I){var U=S[I];U&&U.length>0&&U.forEach((function(Q){g.removeEventListener(I,Q)}))}))},trigger:function(I,U){var Q,ae,ce,Ne,oe,we=S[I];if(I==="canrecord"&&(Ne=g.videoWidth,oe=g.videoHeight,b=(ae=v)!==null&&ae!==void 0&&ae.size?Ne/oe>1?v.size:Math.floor(Ne/oe*v.size):Ne,d=(ce=v)!==null&&ce!==void 0&&ce.size?Ne/oe>1?Math.floor(oe/Ne*v.size):v.size:oe,k.x=b,k.y=d),we&&we.length>0)for(Q=0;Q<we.length;Q++)we[Q].apply(D,U)},setTopRight:function(I){T.x=I.x,T.y=I.y},getTopRight:function(){return T},setCanvasSize:function(I){k.x=I.x,k.y=I.y},getCanvasSize:function(){return k},getFrame:function(){return g}};return D},createLiveStream:function(g){console.warn("**** InputStreamBrowser createLiveStream"),g&&g.setAttribute("autoplay","true");var b=As.createVideoStream(g);return b.ended=function(){return!1},b},createImageStream:function(){var g,b,d=null,v=0,_=0,S=0,T=!0,k=!1,D=null,I=0,U=null,Q=!1,ae=["canrecord","ended"],ce={},Ne={x:0,y:0,type:"Point"},oe={x:0,y:0,type:"XYSize"};function we(Me,et){var Ke,ut=ce[Me];if(ut&&ut.length>0)for(Ke=0;Ke<ut.length;Ke++)ut[Ke].apply(Ie,et)}var Ie={trigger:we,getWidth:function(){return g},getHeight:function(){return b},setWidth:function(Me){g=Me},setHeight:function(Me){b=Me},getRealWidth:function(){return v},getRealHeight:function(){return _},setInputStream:function(Me){var et;d=Me,Me.sequence===!1?(U=Me.src,I=1):(U=Me.src,I=Me.length),k=!1,Qi.load(U,(function(Ke){var ut,At;if(D=Ke,Ke[0].tags&&Ke[0].tags.orientation)switch(Ke[0].tags.orientation){case 6:case 8:v=Ke[0].img.height,_=Ke[0].img.width;break;default:v=Ke[0].img.width,_=Ke[0].img.height}else v=Ke[0].img.width,_=Ke[0].img.height;g=(ut=d)!==null&&ut!==void 0&&ut.size?v/_>1?d.size:Math.floor(v/_*d.size):v,b=(At=d)!==null&&At!==void 0&&At.size?v/_>1?Math.floor(_/v*d.size):d.size:_,oe.x=g,oe.y=b,k=!0,S=0,setTimeout((function(){we("canrecord",[])}),0)}),1,I,(et=d)===null||et===void 0?void 0:et.sequence,d)},ended:function(){return Q},setAttribute:function(){},getConfig:function(){return d},pause:function(){T=!0},play:function(){T=!1},setCurrentTime:function(Me){S=Me},addEventListener:function(Me,et){ae.indexOf(Me)!==-1&&(ce[Me]||(ce[Me]=[]),ce[Me].push(et))},clearEventHandlers:function(){Object.keys(ce).forEach((function(Me){return delete ce[Me]}))},setTopRight:function(Me){Ne.x=Me.x,Ne.y=Me.y},getTopRight:function(){return Ne},setCanvasSize:function(Me){oe.x=Me.x,oe.y=Me.y},getCanvasSize:function(){return oe},getFrame:function(){var Me,et;return k?(T||(Me=(et=D)===null||et===void 0?void 0:et[S],S<I-1?S++:setTimeout((function(){Q=!0,we("ended",[])}),0)),Me):null}};return Ie}},Js=As,ds={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(g,b){var d,v=g.data,_=b.data,S=this.searchDirections,T=g.size.x;function k(I,U,Q,ae){var ce,Ne,oe;for(ce=0;ce<S.length;ce++){if(Ne=I.cy+S[I.dir][0],oe=I.cx+S[I.dir][1],v[d=Ne*T+oe]===U&&(_[d]===0||_[d]===Q))return _[d]=Q,I.cy=Ne,I.cx=oe,!0;_[d]===0&&(_[d]=ae),I.dir=(I.dir+1)%8}return!1}function D(I,U,Q){return{dir:Q,x:I,y:U,next:null,prev:null}}return{trace:function(I,U,Q,ae){return k(I,U,Q,ae)},contourTracing:function(I,U,Q,ae,ce){return(function(Ne,oe,we,Ie,Me){var et,Ke,ut,At=null,ft={cx:oe,cy:Ne,dir:0};if(k(ft,Ie,we,Me)){et=At=D(oe,Ne,ft.dir),ut=ft.dir,(Ke=D(ft.cx,ft.cy,0)).prev=et,et.next=Ke,Ke.next=null,et=Ke;var Dt=g.size.x*g.size.y,Br=0;do ft.dir=(ft.dir+6)%8,k(ft,Ie,we,Me),ut!==ft.dir?(et.dir=ft.dir,(Ke=D(ft.cx,ft.cy,0)).prev=et,et.next=Ke,Ke.next=null,et=Ke):(et.dir=ut,et.x=ft.cx,et.y=ft.cy),ut=ft.dir;while((ft.cx!==oe||ft.cy!==Ne)&&++Br<Dt);At.prev=et.prev,et.prev.next=At}return At})(I,U,Q,ae,ce)}}}},Ar={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(g,b){var d=g.data,v=b.data,_=g.size.x,S=g.size.y,T=ds.create(g,b);return{rasterize:function(k){var D,I,U,Q,ae,ce,Ne,oe,we,Ie,Me,et,Ke=[],ut=0;for(et=0;et<400;et++)Ke[et]=0;for(Ke[0]=d[0],we=null,ce=1;ce<S-1;ce++)for(Q=0,I=Ke[0],ae=1;ae<_-1;ae++)if(v[Me=ce*_+ae]===0)if((D=d[Me])!==I){if(Q===0)Ke[U=ut+1]=D,I=D,(Ne=T.contourTracing(ce,ae,U,D,Ar.DIR.OUTSIDE_EDGE))!==null&&(ut++,Q=U,(oe=Ar.createContour2D()).dir=Ar.CONTOUR_DIR.CW_DIR,oe.index=Q,oe.firstVertex=Ne,oe.nextpeer=we,oe.insideContours=null,we!==null&&(we.prevpeer=oe),we=oe);else if((Ne=T.contourTracing(ce,ae,Ar.DIR.INSIDE_EDGE,D,Q))!==null){for((oe=Ar.createContour2D()).firstVertex=Ne,oe.insideContours=null,oe.dir=k===0?Ar.CONTOUR_DIR.CCW_DIR:Ar.CONTOUR_DIR.CW_DIR,oe.index=k,Ie=we;Ie!==null&&Ie.index!==Q;)Ie=Ie.nextpeer;Ie!==null&&(oe.nextpeer=Ie.insideContours,Ie.insideContours!==null&&(Ie.insideContours.prevpeer=oe),Ie.insideContours=oe)}}else v[Me]=Q;else v[Me]===Ar.DIR.OUTSIDE_EDGE||v[Me]===Ar.DIR.INSIDE_EDGE?(Q=0,I=v[Me]===Ar.DIR.INSIDE_EDGE?d[Me]:Ke[0]):I=Ke[Q=v[Me]];for(Ie=we;Ie!==null;)Ie.index=k,Ie=Ie.nextpeer;return{cc:we,count:ut}},debug:{drawContour:function(k,D){var I,U,Q,ae=k.getContext("2d"),ce=D;for(ae.strokeStyle="red",ae.fillStyle="red",ae.lineWidth=1,I=ce!==null?ce.insideContours:null;ce!==null;){switch(I!==null?(U=I,I=I.nextpeer):(U=ce,I=(ce=ce.nextpeer)!==null?ce.insideContours:null),U.dir){case Ar.CONTOUR_DIR.CW_DIR:ae.strokeStyle="red";break;case Ar.CONTOUR_DIR.CCW_DIR:ae.strokeStyle="blue";break;case Ar.CONTOUR_DIR.UNKNOWN_DIR:ae.strokeStyle="green"}Q=U.firstVertex,ae.beginPath(),ae.moveTo(Q.x,Q.y);do Q=Q.next,ae.lineTo(Q.x,Q.y);while(Q!==U.firstVertex);ae.stroke()}}}}}},Su=Ar;var yi,Zs,$n,Bt,Rt,es,tn,ei,mr,pr,bo,xa,wa=function(g,b,d){var v=new g.Uint8Array(d),_=b.size|0,S=g.Math.imul;function T(oe,we){oe=oe|0,we=we|0;var Ie=0,Me=0,et=0,Ke=0,ut=0,At=0,ft=0,Dt=0;for(Ie=1;(Ie|0)<(_-1|0);Ie=Ie+1|0)for(Dt=Dt+_|0,Me=1;(Me|0)<(_-1|0);Me=Me+1|0)Ke=Dt-_|0,ut=Dt+_|0,At=Me-1|0,ft=Me+1|0,et=(v[oe+Ke+At|0]|0)+(v[oe+Ke+ft|0]|0)+(v[oe+Dt+Me|0]|0)+(v[oe+ut+At|0]|0)+(v[oe+ut+ft|0]|0)|0,(et|0)==5?v[we+Dt+Me|0]=1:v[we+Dt+Me|0]=0}function k(oe,we,Ie){oe=oe|0,we=we|0,Ie=Ie|0;var Me=0;for(Me=S(_,_)|0;(Me|0)>0;)Me=Me-1|0,v[Ie+Me|0]=(v[oe+Me|0]|0)-(v[we+Me|0]|0)|0}function D(oe,we,Ie){oe=oe|0,we=we|0,Ie=Ie|0;var Me=0;for(Me=S(_,_)|0;(Me|0)>0;)Me=Me-1|0,v[Ie+Me|0]=v[oe+Me|0]|0|(v[we+Me|0]|0)|0}function I(oe){oe=oe|0;var we=0,Ie=0;for(Ie=S(_,_)|0;(Ie|0)>0;)Ie=Ie-1|0,we=(we|0)+(v[oe+Ie|0]|0)|0;return we|0}function U(oe,we){oe=oe|0,we=we|0;var Ie=0;for(Ie=S(_,_)|0;(Ie|0)>0;)Ie=Ie-1|0,v[oe+Ie|0]=we}function Q(oe,we){oe=oe|0,we=we|0;var Ie=0,Me=0,et=0,Ke=0,ut=0,At=0,ft=0,Dt=0;for(Ie=1;(Ie|0)<(_-1|0);Ie=Ie+1|0)for(Dt=Dt+_|0,Me=1;(Me|0)<(_-1|0);Me=Me+1|0)Ke=Dt-_|0,ut=Dt+_|0,At=Me-1|0,ft=Me+1|0,et=(v[oe+Ke+At|0]|0)+(v[oe+Ke+ft|0]|0)+(v[oe+Dt+Me|0]|0)+(v[oe+ut+At|0]|0)+(v[oe+ut+ft|0]|0)|0,(et|0)>0?v[we+Dt+Me|0]=1:v[we+Dt+Me|0]=0}function ae(oe,we){oe=oe|0,we=we|0;var Ie=0;for(Ie=S(_,_)|0;(Ie|0)>0;)Ie=Ie-1|0,v[we+Ie|0]=v[oe+Ie|0]|0}function ce(oe){oe=oe|0;var we=0,Ie=0;for(we=0;(we|0)<(_-1|0);we=we+1|0)v[oe+we|0]=0,v[oe+Ie|0]=0,Ie=Ie+_-1|0,v[oe+Ie|0]=0,Ie=Ie+1|0;for(we=0;(we|0)<(_|0);we=we+1|0)v[oe+Ie|0]=0,Ie=Ie+1|0}function Ne(){var oe=0,we=0,Ie=0,Me=0,et=0,Ke=0;we=S(_,_)|0,Ie=we+we|0,Me=Ie+we|0,U(Me,0),ce(oe);do T(oe,we),Q(we,Ie),k(oe,Ie,Ie),D(Me,Ie,Me),ae(we,oe),et=I(oe)|0,Ke=(et|0)==0|0;while(!Ke)}return{skeletonize:Ne}},Ki={ctx:{binary:null},dom:{binary:null}},js={x:0,y:0};function Eu(g){var b,d,v,_,S,T,k,D=mr.size.x,I=mr.size.y,U=-mr.size.x,Q=-mr.size.y;for(b=0,d=0;d<g.length;d++)b+=(_=g[d]).rad;for((b=(180*(b/=g.length)/Math.PI+90)%180-90)<0&&(b+=180),b=(180-b)*Math.PI/180,S=c.copy(c.create(),[Math.cos(b),Math.sin(b),-Math.sin(b),Math.cos(b)]),d=0;d<g.length;d++)for(_=g[d],v=0;v<4;v++)u.transformMat2(_.box[v],_.box[v],S);for(d=0;d<g.length;d++)for(_=g[d],v=0;v<4;v++)_.box[v][0]<D&&(D=_.box[v][0]),_.box[v][0]>U&&(U=_.box[v][0]),_.box[v][1]<I&&(I=_.box[v][1]),_.box[v][1]>Q&&(Q=_.box[v][1]);for(T=[[D,I],[U,I],[U,Q],[D,Q]],k=yi.halfSample?2:1,S=c.invert(S,S),v=0;v<4;v++)u.transformMat2(T[v],T[v],S);for(v=0;v<4;v++)u.scale(T[v],T[v],k);return T}function Sa(g){var b=(function(S,T,k){var D,I,U,Q,ae=0,ce=0,Ne=[];for(D=0;D<T;D++)Ne[D]={score:0,item:null};for(D=0;D<S.length;D++)if((I=k.apply(this,[S[D]]))>ce)for((U=Ne[ae]).score=I,U.item=S[D],ce=Number.MAX_VALUE,Q=0;Q<T;Q++)Ne[Q].score<ce&&(ce=Ne[Q].score,ae=Q);return Ne})((function(S,T,k){var D,I,U,Q,ae=[];function ce(Ne){var oe=!1;for(I=0;I<ae.length;I++)(U=ae[I]).fits(Ne)&&(U.add(Ne),oe=!0);return oe}for(k||(k="rad"),D=0;D<S.length;D++)ce(Q=Ts(S[D],D,k))||ae.push(Bi(Q,T));return ae})(g,.9),1,(function(S){return S.getPoints().length})),d=[],v=[];if(b.length===1){d=b[0].item.getPoints();for(var _=0;_<d.length;_++)v.push(d[_].point)}return v}function bi(g,b){mr.subImageAsCopy(Bt,Vr(g,b)),xa.skeletonize()}function Xi(g,b,d,v){var _,S,T,k,D=[],I=[],U=Math.ceil(pr.x/3);if(g.length>=2){for(_=0;_<g.length;_++)g[_].m00>U&&D.push(g[_]);if(D.length>=2){for(T=Sa(D),S=0,_=0;_<T.length;_++){var Q,ae;S+=(Q=(ae=T[_])===null||ae===void 0?void 0:ae.rad)!==null&&Q!==void 0?Q:0}T.length>1&&T.length>=D.length/4*3&&T.length>g.length/4&&(S/=T.length,k={index:b[1]*js.x+b[0],pos:{x:d,y:v},box:[u.clone([d,v]),u.clone([d+Bt.size.x,v]),u.clone([d+Bt.size.x,v+Bt.size.y]),u.clone([d,v+Bt.size.y])],moments:T,rad:S,vec:u.clone([Math.cos(S),Math.sin(S)])},I.push(k))}}return I}var _i=function(g,b){yi=b,bo=g,(function(){Zs=yi.halfSample?new cn({x:bo.size.x/2|0,y:bo.size.y/2|0}):bo,pr=ao(yi.patchSize,Zs.size),js.x=Zs.size.x/pr.x|0,js.y=Zs.size.y/pr.y|0,mr=new cn(Zs.size,void 0,Uint8Array,!1),Rt=new cn(pr,void 0,Array,!0);var d=pr.x*pr.y*4,v=Math.max(65536,Math.pow(2,Math.ceil(Math.log2(d)))),_=new ArrayBuffer(v);Bt=new cn(pr,new Uint8Array(_,0,pr.x*pr.y)),$n=new cn(pr,new Uint8Array(_,pr.x*pr.y*3,pr.x*pr.y),void 0,!0),xa=wa({Math,Uint8Array},{size:pr.x},_),ei=new cn({x:Zs.size.x/Bt.size.x|0,y:Zs.size.y/Bt.size.y|0},void 0,Array,!0),es=new cn(ei.size,void 0,void 0,!0),tn=new cn(ei.size,void 0,Int32Array,!0)})(),(function(){if(!yi.useWorker&&typeof document<"u"){Ki.dom.binary=document.createElement("canvas"),Ki.dom.binary.className="binaryBuffer";var d=!!yi.willReadFrequently;Ki.ctx.binary=Ki.dom.binary.getContext("2d",{willReadFrequently:d}),Ki.dom.binary.width=mr.size.x,Ki.dom.binary.height=mr.size.y}})()},Tu=function(){yi.halfSample&&(function(v,_){for(var S=v.data,T=v.size.x,k=_.data,D=0,I=T,U=S.length,Q=T/2,ae=0;I<U;){for(var ce=0;ce<Q;ce++)k[ae]=Math.floor((S[D]+S[D+1]+S[I]+S[I+1])/4),ae++,D+=2,I+=2;D+=T,I+=T}})(bo,Zs),sn(Zs,mr),mr.zeroBorder();var g=(function(){var v,_,S,T,k,D,I=[];for(v=0;v<js.x;v++)for(_=0;_<js.y;_++)bi(S=Bt.size.x*v,T=Bt.size.y*_),$n.zeroBorder(),Nr(Rt.data,0),D=Su.create($n,Rt).rasterize(0),k=Rt.moments(D.count),I=I.concat(Xi(k,[v,_],S,T));return I})();if(g.length<js.x*js.y*.05)return null;var b=(function(v){var _,S,T=0,k=0;function D(){var U;for(U=0;U<tn.data.length;U++)if(tn.data[U]===0&&es.data[U]===1)return U;return tn.data.length}function I(U){var Q,ae,ce,Ne,oe,we=U%tn.size.x,Ie=U/tn.size.x|0;if(U<tn.data.length)for(ce=ei.data[U],tn.data[U]=T,oe=0;oe<ds.searchDirections.length;oe++)ae=Ie+ds.searchDirections[oe][0],Q=we+ds.searchDirections[oe][1],Ne=ae*tn.size.x+Q,es.data[Ne]!==0?tn.data[Ne]===0&&Math.abs(u.dot(ei.data[Ne].vec,ce.vec))>.95&&I(Ne):tn.data[Ne]=Number.MAX_VALUE}for(Nr(es.data,0),Nr(tn.data,0),Nr(ei.data,null),_=0;_<v.length;_++)S=v[_],ei.data[S.index]=S,es.data[S.index]=1;for(es.zeroBorder();(k=D())<tn.data.length;)T++,I(k);return T})(g);if(b<1)return null;var d=(function(v){var _,S,T=[];for(_=0;_<v;_++)T.push(0);for(S=tn.data.length;S--;)tn.data[S]>0&&T[tn.data[S]-1]++;return(T=T.map((function(k,D){return{val:k,label:D+1}}))).sort((function(k,D){return D.val-k.val})),T.filter((function(k){return k.val>=5}))})(b);return d.length===0?null:(function(v,_){var S,T,k,D,I=[],U=[];for(S=0;S<v.length;S++){for(T=tn.data.length,I.length=0;T--;)tn.data[T]===v[S].label&&(k=ei.data[T],I.push(k));(D=Eu(I))&&U.push(D)}return U})(d)},Cu=function(g,b){var d,v,_=g.getWidth(),S=g.getHeight(),T=b.halfSample?.5:1;g.getConfig().area&&(v=fi(_,S,g.getConfig().area),g.setTopRight({x:v.sx,y:v.sy}),g.setCanvasSize({x:_,y:S}),_=v.sw,S=v.sh);var k={x:Math.floor(_*T),y:Math.floor(S*T)};if(d=ao(b.patchSize,k),g.setWidth(Math.max(Math.floor(Math.floor(k.x/d.x)*(1/T)*d.x),d.x)),g.setHeight(Math.max(Math.floor(Math.floor(k.y/d.y)*(1/T)*d.y),d.y)),g.getWidth()%d.x==0&&g.getHeight()%d.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(_," )and height (").concat(S,") must a multiple of ").concat(d.x))},_o=Y()((function g(){H()(this,g),K()(this,"config",void 0),K()(this,"inputStream",void 0),K()(this,"framegrabber",void 0),K()(this,"inputImageWrapper",void 0),K()(this,"stopped",!1),K()(this,"initAborted",!1),K()(this,"boxSize",void 0),K()(this,"resultCollector",void 0),K()(this,"decoder",void 0),K()(this,"workerPool",[]),K()(this,"onUIThread",!0),K()(this,"canvasContainer",new Ea)})),Nl=Y()((function g(){H()(this,g),K()(this,"image",void 0),K()(this,"overlay",void 0)})),Ea=Y()((function g(){H()(this,g),K()(this,"ctx",void 0),K()(this,"dom",void 0),this.ctx=new Nl,this.dom=new Nl}));function nr(g){if(typeof document>"u")return null;if(g instanceof HTMLElement&&g.nodeName&&g.nodeType===1)return g;var b=typeof g=="string"?g:"#interactive.viewport";return document.querySelector(b)}function Al(g,b,d){var v=(function(S,T){var k=document.querySelector(S);return k||((k=document.createElement("canvas")).className=T),k})(g,b),_=v.getContext("2d",{willReadFrequently:d.willReadFrequently});return{canvas:v,context:_}}function nd(g){var b,d,v,_,S,T,k,D,I,U,Q=nr(g==null||(b=g.config)===null||b===void 0||(d=b.inputStream)===null||d===void 0?void 0:d.target),ae=g==null||(v=g.config)===null||v===void 0||(_=v.inputStream)===null||_===void 0?void 0:_.type;if(!ae)return null;var ce=(g==null||(S=g.config)===null||S===void 0||(T=S.canvas)===null||T===void 0?void 0:T.createOverlay)!==!1,Ne=(function(we,Ie){var Me=Ie.willReadFrequently,et=Ie.createOverlay;if(typeof document<"u"){var Ke=Al("canvas.imgBuffer","imgBuffer",{willReadFrequently:Me});Ke.canvas.width=we.x,Ke.canvas.height=we.y;var ut={canvas:null,context:null};if(et){var At=Al("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:Me});At.canvas.width=we.x,At.canvas.height=we.y,ut=At}return{dom:{image:Ke.canvas,overlay:ut.canvas},ctx:{image:Ke.context,overlay:ut.context}}}return null})(g.inputStream.getCanvasSize(),{willReadFrequently:!(g==null||(k=g.config)===null||k===void 0||(D=k.inputStream)===null||D===void 0||!D.willReadFrequently),createOverlay:ce,debug:g==null||(I=g.config)===null||I===void 0||(U=I.locator)===null||U===void 0?void 0:U.debug});if(!Ne)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var oe=Ne.dom;return typeof document<"u"&&Q&&(ae!=="ImageStream"||Q.contains(oe.image)||Q.appendChild(oe.image),oe.overlay&&!Q.contains(oe.overlay)&&Q.appendChild(oe.overlay)),Ne}function rd(g,b){var d=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);b&&(v=v.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),d.push.apply(d,v)}return d}function mc(g){for(var b=1;b<arguments.length;b++){var d=arguments[b]!=null?arguments[b]:{};b%2?rd(Object(d),!0).forEach((function(v){K()(g,v,d[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(d)):rd(Object(d)).forEach((function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(d,v))}))}return g}var ti=[];function Un(g){return mc(mc({},g),{},{inputStream:mc(mc({},g.inputStream),{},{target:null})})}function Nu(g){if(g){var b=g().default;if(!b)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var d;function v(S){self.postMessage({event:"processed",imageData:d.data,result:S},[d.data.buffer])}function _(){self.postMessage({event:"initialized",imageData:d.data},[d.data.buffer])}self.onmessage=function(S){if(S.data.cmd==="init"){var T=S.data.config;T.numOfWorkers=0,d=new b.ImageWrapper({x:S.data.size.x,y:S.data.size.y},new Uint8Array(S.data.imageData)),b.init(T,_,d),b.onProcessed(v)}else S.data.cmd==="process"?(d.data=new Uint8Array(S.data.imageData),b.start()):S.data.cmd==="setReaders"?b.setReaders(S.data.readers):S.data.cmd==="registerReader"&&b.registerReader(S.data.name,S.data.reader)}}function jl(g,b,d){var v,_,S=(typeof __factorySource__<"u"&&(_=__factorySource__),v=new Blob(["("+Nu.toString()+")("+_+");"],{type:"text/javascript"}),window.URL.createObjectURL(v)),T={worker:new Worker(S),imageData:new Uint8Array(b.getWidth()*b.getHeight()),busy:!0};T.worker.onmessage=function(k){k.data.event==="initialized"?(URL.revokeObjectURL(S),T.busy=!1,T.imageData=new Uint8Array(k.data.imageData),d(T)):k.data.event==="processed"?(T.imageData=new Uint8Array(k.data.imageData),T.busy=!1,typeof publishResult<"u"&&publishResult(k.data.result,T.imageData)):k.data.event},T.worker.postMessage({cmd:"init",size:{x:b.getWidth(),y:b.getHeight()},imageData:T.imageData,config:Un(g)},[T.imageData.buffer])}function xo(g,b,d,v){var _=g-ti.length;if(_===0&&v)v();else if(_<0)ti.slice(_).forEach((function(k){k.worker.terminate()})),ti=ti.slice(0,_),v&&v();else{var S=function(k){ti.push(k),ti.length>=g&&v&&v()};if(b)for(var T=0;T<_;T++)jl(b,d,S)}}function pc(g,b,d){for(var v=g.length;v--;)g[v][0]+=b,g[v][1]+=d}function wo(g,b,d){g[0].x+=b,g[0].y+=d,g[1].x+=b,g[1].y+=d}var Ta=(function(){return Y()((function d(){var v=this;H()(this,d),K()(this,"context",new _o),K()(this,"canRecord",(function(_){var S;v.context.initAborted?_(new Error("Initialization was aborted")):v.context.config?v.context.inputStream?(Cu(v.context.inputStream,(S=v.context.config)===null||S===void 0?void 0:S.locator),v.initCanvas(),v.context.framegrabber=wu.create(v.context.inputStream,v.context.canvasContainer.dom.image),v.context.config.numOfWorkers===void 0&&(v.context.config.numOfWorkers=0),xo(v.context.config.numOfWorkers,v.context.config,v.context.inputStream,(function(){var T;((T=v.context.config)===null||T===void 0?void 0:T.numOfWorkers)===0&&v.initializeData(),v.ready(_)}))):_(new Error("Input stream not initialized")):_(new Error("Configuration not initialized"))})),K()(this,"update",(function(){if(v.context.onUIThread){var _,S=(k=v.context.framegrabber,ti.length?!!(D=ti.filter((function(I){return!I.busy}))[0])&&(k.attachData(D.imageData),k.grab()&&(D.busy=!0,D.worker.postMessage({cmd:"process",imageData:D.imageData},[D.imageData.buffer])),!0):null);S||(v.context.framegrabber.attachData((_=v.context.inputImageWrapper)===null||_===void 0?void 0:_.data),v.context.framegrabber.grab()&&(S||v.locateAndDecode()))}else{var T;v.context.framegrabber.attachData((T=v.context.inputImageWrapper)===null||T===void 0?void 0:T.data),v.context.framegrabber.grab(),v.locateAndDecode()}var k,D})),K()(this,"_cachedStyleValues",void 0),K()(this,"_resolvedStyle",void 0)}),[{key:"initBuffers",value:function(d){if(this.context.config){var v=(function(T,k,D){var I=k||new cn({x:T.getWidth(),y:T.getHeight(),type:"XYSize"}),U=[u.clone([0,0]),u.clone([0,I.size.y]),u.clone([I.size.x,I.size.y]),u.clone([I.size.x,0])];return _i(I,D),{inputImageWrapper:I,boxSize:U}})(this.context.inputStream,d,this.context.config.locator),_=v.inputImageWrapper,S=v.boxSize;this.context.inputImageWrapper=_,this.context.boxSize=S}}},{key:"initializeData",value:function(d){this.context.config&&(this.initBuffers(d),this.context.decoder=wl.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?nr(this.context.config.inputStream.target):null}},{key:"ready",value:function(d){this.context.inputStream.play(),d()}},{key:"initCanvas",value:function(){var d=nd(this.context);if(d){var v=d.ctx,_=d.dom;this.context.canvasContainer.dom.image=_.image,this.context.canvasContainer.dom.overlay=_.overlay,this.context.canvasContainer.ctx.image=v.image,this.context.canvasContainer.ctx.overlay=v.overlay}}},{key:"initInputStream",value:function(d){if(this.context.config&&this.context.config.inputStream){var v=this.context.config.inputStream,_=v.type,S=v.constraints,T=(function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"LiveStream",U=arguments.length>1?arguments[1]:void 0,Q=arguments.length>2?arguments[2]:void 0;switch(I){case"VideoStream":var ae=document.createElement("video");return{video:ae,inputStream:Q.createVideoStream(ae)};case"ImageStream":return{inputStream:Q.createImageStream()};case"LiveStream":var ce=null;return U&&((ce=U.querySelector("video"))||(ce=document.createElement("video"),U.appendChild(ce))),{video:ce,inputStream:Q.createLiveStream(ce)};default:return console.error("* setupInputStream invalid type ".concat(I)),{video:null,inputStream:null}}})(_,this.getViewPort(),Js),k=T.video,D=T.inputStream;_==="LiveStream"&&k&&go.request(k,S).then((function(){return D.trigger("canrecord")})).catch((function(I){return d(I)})),D&&(D.setAttribute("preload","auto"),D.setInputStream(this.context.config.inputStream),D.addEventListener("canrecord",this.canRecord.bind(void 0,d))),this.context.inputStream=D}}},{key:"getBoundingBoxes",value:function(){var d;return(d=this.context.config)!==null&&d!==void 0&&d.locate?Tu():[[u.clone(this.context.boxSize[0]),u.clone(this.context.boxSize[1]),u.clone(this.context.boxSize[2]),u.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(d){var v=this,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set,S=this.context.inputStream.getTopRight(),T=S.x,k=S.y;if((T!==0||k!==0)&&(d.barcodes&&d.barcodes.forEach((function(I){return v.transformResult(I,_)})),d.line&&d.line.length===2&&wo(d.line,T,k),d.box&&!_.has(d.box)&&(pc(d.box,T,k),_.add(d.box)),d.boxes&&d.boxes.length>0))for(var D=0;D<d.boxes.length;D++)_.has(d.boxes[D])||(pc(d.boxes[D],T,k),_.add(d.boxes[D]))}},{key:"addResult",value:function(d,v){var _=this;v&&this.context.resultCollector&&(d.barcodes?d.barcodes.filter((function(S){return S.codeResult})).forEach((function(S){return _.addResult(S,v)})):d.codeResult&&this.context.resultCollector.addResult(v,this.context.inputStream.getCanvasSize(),d.codeResult))}},{key:"hasCodeResult",value:function(d){return!(!d||!(d.barcodes?d.barcodes.some((function(v){return v.codeResult})):d.codeResult))}},{key:"publishResult",value:function(){var d,v,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,S=arguments.length>1?arguments[1]:void 0,T=_;_&&this.context.onUIThread&&(this.transformResult(_),this.addResult(_,S),T=(_==null||(v=_.barcodes)===null||v===void 0?void 0:v.length)>0?_.barcodes:_),Gi.publish("processed",T),this.hasCodeResult(_)&&Gi.publish("detected",T);var k=this.context.config;k&&k.locate===!1&&(d=k.inputStream)!==null&&d!==void 0&&d.area&&this.drawScannerArea()}},{key:"locateAndDecode",value:(b=tr()(An.a.mark((function d(){var v,_,S,T,k,D;return An.a.wrap((function(I){for(;;)switch(I.prev=I.next){case 0:if(!(v=this.getBoundingBoxes())){I.next=3;break}return I.next=1,this.context.decoder.decodeFromBoundingBoxes(v);case 1:if(D=I.sent){I.next=2;break}D={};case 2:(S=D).boxes=v,this.publishResult(S,(_=this.context.inputImageWrapper)===null||_===void 0?void 0:_.data),I.next=5;break;case 3:return I.next=4,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 4:(T=I.sent)?this.publishResult(T,(k=this.context.inputImageWrapper)===null||k===void 0?void 0:k.data):this.publishResult();case 5:case"end":return I.stop()}}),d,this)}))),function(){return b.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var d,v=this,_=null,S=1e3/(((d=this.context.config)===null||d===void 0?void 0:d.frequency)||60);this.context.stopped=!1;var T=this.context,k=function(D){_=_||D,T.stopped||(D>=_&&(_+=S,v.update()),window.requestAnimationFrame(k))};k(performance.now())}},{key:"start",value:function(){var d,v;this.context.onUIThread&&((d=this.context.config)===null||d===void 0||(v=d.inputStream)===null||v===void 0?void 0:v.type)==="LiveStream"?this.startContinuousUpdate():this.update()}},{key:"stop",value:(g=tr()(An.a.mark((function d(){var v,_;return An.a.wrap((function(S){for(;;)switch(S.prev=S.next){case 0:if(this.context.stopped=!0,this.context.framegrabber||(this.context.initAborted=!0),xo(0),(v=this.context.config)===null||v===void 0||!v.inputStream||this.context.config.inputStream.type!=="LiveStream"){S.next=2;break}return S.next=1,go.release();case 1:(_=this.context.inputStream)===null||_===void 0||_.clearEventHandlers();case 2:case"end":return S.stop()}}),d,this)}))),function(){return g.apply(this,arguments)})},{key:"setReaders",value:function(d){this.context.decoder&&this.context.decoder.setReaders(d),(function(v){ti.forEach((function(_){return _.worker.postMessage({cmd:"setReaders",readers:v})}))})(d)}},{key:"registerReader",value:function(d,v){wl.registerReader(d,v),this.context.decoder&&this.context.decoder.registerReader(d,v),(function(_,S){ti.forEach((function(T){return T.worker.postMessage({cmd:"registerReader",name:_,reader:S})}))})(d,v)}},{key:"drawScannerArea",value:function(){var d,v,_,S=(d=this.context.config)===null||d===void 0||(v=d.inputStream)===null||v===void 0?void 0:v.area;if(S){var T=this.context.canvasContainer.ctx.overlay;if(T&&((_=this.context.config)===null||_===void 0?void 0:_.locate)===!1&&(S.borderColor!==void 0&&S.borderColor!==""||S.borderWidth!==void 0&&S.borderWidth>0||S.backgroundColor!==void 0&&S.backgroundColor!=="")&&this.context.boxSize){var k=this.context.inputStream.getTopRight(),D=k.x,I=k.y,U=this.context.boxSize,Q=U[0],ae=U[1],ce=U[3],Ne=Q[0]+D,oe=Q[1]+I,we=ce[0]-Q[0],Ie=ae[1]-Q[1];if(!this._cachedStyleValues||this._cachedStyleValues.borderColor!==S.borderColor||this._cachedStyleValues.borderWidth!==S.borderWidth||this._cachedStyleValues.backgroundColor!==S.backgroundColor){var Me,et;this._cachedStyleValues={borderColor:S.borderColor,borderWidth:S.borderWidth,backgroundColor:S.backgroundColor};var Ke=S.borderColor!==void 0||S.borderWidth!==void 0,ut=(Me=S.borderColor)!==null&&Me!==void 0?Me:"rgba(0, 255, 0, 0.5)",At=Ke?(et=S.borderWidth)!==null&&et!==void 0?et:2:0,ft=S.backgroundColor;this._resolvedStyle={color:ut,width:At,bg:ft}}var Dt=this._resolvedStyle;Dt.bg&&(T.fillStyle=Dt.bg,T.fillRect(Ne,oe,we,Ie)),Dt.width>0&&(T.strokeStyle=Dt.color,T.lineWidth=Dt.width,T.strokeRect(Ne,oe,we,Ie))}}}}]);var g,b})(),Ji=new Ta,So=Ji.context,sd={init:function(g,b,d){var v,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ji;return b||(v=new Promise((function(S,T){b=function(k){k?T(k):S()}}))),_.context.initAborted=!1,_.context.config=A()({},ed,g),_.context.config.numOfWorkers>0&&(_.context.config.numOfWorkers=0),d?(_.context.onUIThread=!1,_.initializeData(d),b&&b()):_.initInputStream(b),v},start:function(g,b){var d;if(g)return b||(d=new Promise((function(v,_){b=function(S){S?_(S):v()}}))),this.init(g,(function(v){if(v)b(v);else try{Ji.start(),b()}catch(_){b(_)}})),d;if(!So.framegrabber)throw new Error("start() was called before init() completed. Call init() first, or call start(config) to combine init and start.");return Ji.start()},stop:function(){return Ji.stop()},pause:function(){So.stopped=!0},onDetected:function(g){g&&(typeof g=="function"||E()(g)==="object"&&g.callback)?Gi.subscribe("detected",g):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(g){Gi.unsubscribe("detected",g)},onProcessed:function(g){g&&(typeof g=="function"||E()(g)==="object"&&g.callback)?Gi.subscribe("processed",g):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(g){Gi.unsubscribe("processed",g)},setReaders:function(g){g?Ji.setReaders(g):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(g,b){g?b?Ji.registerReader(g,b):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(g){g&&typeof g.addResult=="function"&&(So.resultCollector=g)},get canvas(){return So.canvasContainer},drawScannerArea:function(){return Ji.drawScannerArea()},decodeSingle:function(g,b){var d=this,v=new Ta;return(g=A()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:g.src},numOfWorkers:1,locator:{halfSample:!1}},g)).numOfWorkers>0&&(g.numOfWorkers=0),g.numOfWorkers>0&&(typeof Blob>"u"||typeof Worker>"u")&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),g.numOfWorkers=0),new Promise((function(_,S){try{d.init(g,(function(){So.canvasContainer=v.context.canvasContainer,Gi.once("processed",(function(T){v.stop(),b&&b.call(null,T),_(T)}),!0),v.start()}),null,v)}catch(T){S(T)}}))},get default(){return sd},Readers:p,CameraAccess:go,ImageDebug:Ws,ImageWrapper:cn,ResultCollector:Xs};i.default=sd}]).default}))})(ag)),ag.exports}var B4=U4();const Uo=qS(B4),og=60;function Ol(){return new Date().toISOString().split("T")[0]}const N_=[{key:"breakfast",label:"Breakfast",icon:""},{key:"lunch",label:"Lunch",icon:""},{key:"dinner",label:"Dinner",icon:""},{key:"snacks",label:"Snacks",icon:""}];function z4(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function F4(){const{currentUser:s,isClient:e,clientData:t,loading:i}=ws(),{isDark:a,toggleTheme:c}=Kl(),u=Mr(),[f,p]=z.useState("loading"),[x,E]=z.useState(null),[C,A]=z.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",activityLevel:"moderate",goal:"maintain",deficitLevel:"moderate"}),[B,L]=z.useState(null),[F,H]=z.useState(Ol()),[J,Y]=z.useState({entries:[],water:0}),[ue,K]=z.useState({protein:0,carbs:0,fats:0,calories:0}),[me,xe]=z.useState(!1),[q,V]=z.useState(()=>{const ge=new Date;return{year:ge.getFullYear(),month:ge.getMonth()}}),[G,ne]=z.useState(z4),[W,ee]=z.useState(null),[O,Re]=z.useState(!1),[He,te]=z.useState(null),[Se,Pe]=z.useState(""),[De,Ge]=z.useState(!1),[M,se]=z.useState(""),[ie,he]=z.useState([]),[X,de]=z.useState(!1),[ye,Le]=z.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[ze,rt]=z.useState(null),[je,Ct]=z.useState(1),[rn,Wt]=z.useState(null);z.useRef(null);const Ut=z.useRef(!1),vt=z.useCallback((ge,Te="info")=>{Wt({message:ge,type:Te}),setTimeout(()=>Wt(null),3e3)},[]);z.useEffect(()=>{!i&&(!s||!e)&&u("/")},[s,e,i,u]),z.useEffect(()=>{if(!t?.id)return;(async()=>{try{const Te=await nl(Et(Xe,"nutritionTargets",t.id));Te.exists()?(E(Te.data()),p("dashboard")):p("setup")}catch(Te){console.error("Error loading nutrition data:",Te),p("setup")}})()},[t?.id]),z.useEffect(()=>{if(!t?.id)return;(async()=>{try{const Te=await nl(Et(Xe,"nutritionLogs",`${t.id}_${F}`));if(Te.exists()){const Je=Te.data();Y({entries:Je.entries||[],water:Je.water||0})}else Y({entries:[],water:0})}catch(Te){console.error("Error loading log:",Te),Y({entries:[],water:0})}})()},[t?.id,F]),z.useEffect(()=>{const ge=J.entries.reduce((Te,Je)=>({protein:Te.protein+(Je.protein||0),carbs:Te.carbs+(Je.carbs||0),fats:Te.fats+(Je.fats||0),calories:Te.calories+(Je.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});K(ge)},[J.entries]);const it=async ge=>{try{await Va(Et(Xe,"nutritionLogs",`${t.id}_${F}`),{clientId:t.id,date:F,entries:ge.entries,water:ge.water,updatedAt:ot.now()})}catch(Te){console.error("Error saving nutrition log:",Te)}},It=F===Ol(),Mt=(ge,Te)=>new Date(ge,Te+1,0).getDate(),Ot=(ge,Te)=>new Date(ge,Te,1).getDay(),br=ge=>{if(ge===Ol())return"Today";const Te=new Date(ge+"T12:00:00"),Je=new Date;return Je.setDate(Je.getDate()-1),ge===Je.toISOString().split("T")[0]?"Yesterday":Te.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})},xn=ge=>{const Te=new Date(F+"T12:00:00");Te.setDate(Te.getDate()+ge);const Je=Te.toISOString().split("T")[0];Je>Ol()||H(Je)},Or=["January","February","March","April","May","June","July","August","September","October","November","December"],Lt=["Su","Mo","Tu","We","Th","Fr","Sa"],Tr=()=>{let ge=parseFloat(C.weight);C.weightUnit==="lbs"&&(ge*=.453592);let Te;C.heightUnit==="cm"?Te=parseFloat(C.height):Te=(parseFloat(C.heightFeet)||0)*30.48+(parseFloat(C.heightInches)||0)*2.54;const Je=parseInt(C.age);let tt=C.gender==="male"?10*ge+6.25*Te-5*Je+5:10*ge+6.25*Te-5*Je-161;const yn=tt*{sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[C.activityLevel];let Kt=yn,xr,Jn;switch(C.goal){case"lose":Kt=yn-{light:250,moderate:500,harsh:750}[C.deficitLevel],xr=2.2,Jn=.3;break;case"build":Kt=yn+300,xr=2,Jn=.22;break;default:xr=1.8,Jn=.25}Kt=Math.max(Kt,C.gender==="male"?1500:1200);const wn=Math.round(ge*xr),Nn=Math.round(Kt*Jn/9),hr=Math.max(0,Math.round((Kt-wn*4-Nn*9)/4));L({calories:Math.round(Kt),protein:wn,carbs:hr,fats:Nn,bmr:Math.round(tt),tdee:Math.round(yn)})},Ss=async()=>{if(!B)return;const ge={clientId:t.id,calories:B.calories,protein:B.protein,carbs:B.carbs,fats:B.fats,waterGoal:8,goal:C.goal,updatedAt:ot.now()};await Va(Et(Xe,"nutritionTargets",t.id),ge),E(ge),p("dashboard"),vt("Macro targets saved!","success")},Wr=()=>{const ge=C.weight&&parseFloat(C.weight)>0,Te=C.age&&parseInt(C.age)>0,Je=C.heightUnit==="cm"?C.height&&parseFloat(C.height)>0:C.heightFeet&&parseFloat(C.heightFeet)>0||C.heightInches&&parseFloat(C.heightInches)>0;return ge&&Te&&Je},_r=ge=>{const Te=[...J.entries,{...ge,meal:G,id:Date.now(),addedAt:new Date().toISOString()}],Je={...J,entries:Te};Y(Je),it(Je),ee(null),rt(null),Ct(1),Le({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),vt("Food added!","success")},ui=ge=>{const Te=J.entries.filter(tt=>tt.id!==ge),Je={...J,entries:Te};Y(Je),it(Je)},Yr=()=>{Re(!0);const ge=document.querySelector("#barcode-reader");if(!ge){Re(!1),vt("Scanner container not found.","error");return}Uo.init({inputStream:{type:"LiveStream",target:ge,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},Te=>{if(Te){console.error("Quagga init error:",Te),Re(!1),vt("Could not access camera. Check permissions.","error");return}Uo.start(),Ut.current=!0}),Uo.onDetected(Te=>{const Je=Te.codeResult.decodedCodes?.filter(yt=>yt.error!==void 0)?.map(yt=>yt.error)||[];if((Je.length>0?Je.reduce((yt,yn)=>yt+yn,0)/Je.length:1)<.15){const yt=Te.codeResult.code;Uo.offDetected(),te(yt)}})},Mn=()=>{Ut.current&&(Uo.stop(),Uo.offDetected(),Ut.current=!1),Re(!1)},Xn=ge=>{const Te=ge.nutriments||{};return{name:ge.product_name||ge.product_name_en||"Unknown Product",brand:ge.brands||"",image:ge.image_small_url||ge.image_url||null,servingSize:ge.serving_size||"100g",protein:Math.round(Te.proteins_100g||Te.proteins||0),carbs:Math.round(Te.carbohydrates_100g||Te.carbohydrates||0),fats:Math.round(Te.fat_100g||Te.fat||0),calories:Math.round(Te["energy-kcal_100g"]||Te["energy-kcal"]||(Te.energy_100g?Te.energy_100g/4.184:0)),per100g:!0}},Rn=async ge=>{Ge(!0);try{const Te=`https://world.openfoodfacts.net/api/v2/product/${ge}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,nutriments`,Je=await fetch(Te);if(!Je.ok)throw new Error(`HTTP ${Je.status}`);const tt=await Je.json();if(tt.status==="success"||tt.status===1||tt.product){const yt=Xn(tt.product);yt.calories===0&&yt.protein===0&&yt.carbs===0?vt("Product found but no nutrition data available.","error"):(rt(yt),Ct(1),Pe(""))}else vt("Product not found. Try search or manual entry.","error")}catch(Te){console.error("Barcode lookup error:",Te),vt("Failed to look up product. Check your connection.","error")}Ge(!1)},on=async()=>{if(M.trim()){de(!0);try{const ge=`https://world.openfoodfacts.net/api/v2/search?search_terms=${encodeURIComponent(M)}&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,nutriments&page_size=10`,Te=await fetch(ge);if(!Te.ok)throw new Error(`HTTP ${Te.status}`);const tt=((await Te.json()).products||[]).map(yt=>Xn(yt)).filter(yt=>yt.name!=="Unknown Product"&&(yt.calories>0||yt.protein>0));he(tt),tt.length===0&&vt("No results found. Try a different search.","info")}catch(ge){console.error("Search error:",ge),vt("Search failed. Check your connection.","error")}de(!1)}},Fn=()=>{const ge={...J,water:J.water+1};Y(ge),it(ge)},ln=()=>{if(J.water<=0)return;const ge={...J,water:J.water-1};Y(ge),it(ge)},is=(ge,Te)=>!Te||Te<=0?0:Math.min(og,Math.round(ge/Te*og)),Cn=(ge,Te,Je,tt,yt)=>{const yn=is(Je,tt),Kt=tt>0?Math.min(100,Math.round(Je/tt*100)):0;return l.jsxs("div",{className:`nut-ring-wrap ${yt}`,children:[l.jsx("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[...Array(og)].map((xr,Jn)=>{const wn=(Jn*6-90)*(Math.PI/180),Nn=100+82*Math.cos(wn),hr=100+82*Math.sin(wn),pe=100+94*Math.cos(wn),Ue=100+94*Math.sin(wn);return l.jsx("line",{x1:Nn,y1:hr,x2:pe,y2:Ue,className:Jn<yn?"nut-tick-filled":"nut-tick-empty",strokeWidth:Jn%5===0?"3":"2"},Jn)})}),l.jsxs("div",{className:"nut-ring-center",children:[l.jsx("span",{className:"nut-ring-value",children:Math.round(Je)}),l.jsxs("span",{className:"nut-ring-target",children:["/ ",tt,ge==="Calories"?"":"g"]}),l.jsx("span",{className:"nut-ring-label",children:Te})]}),l.jsxs("span",{className:"nut-ring-pct",children:[Kt,"%"]})]})};return z.useEffect(()=>{if(!He)return;const ge=setTimeout(()=>{const Te=He;Mn(),te(null),Rn(Te)},1500);return()=>clearTimeout(ge)},[He]),z.useEffect(()=>()=>{if(Ut.current){try{Uo.stop(),Uo.offDetected()}catch{}Ut.current=!1}},[]),i||f==="loading"?l.jsx("div",{className:"cb-loading",children:l.jsx("div",{className:"cb-loading-spinner"})}):f==="setup"?l.jsxs("div",{className:"nut-page","data-theme":a?"dark":"light",children:[l.jsxs("header",{className:"cb-header",children:[l.jsxs("div",{className:"cb-header-left",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),l.jsx("span",{className:"cb-header-title",children:"Nutrition Setup"})]}),l.jsx("div",{className:"cb-header-right",children:l.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:a?l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]}),l.jsxs("main",{className:"nut-main",children:[l.jsx("button",{className:"nut-back-btn",onClick:()=>u(-1),children:" Back"}),l.jsxs("div",{className:"nut-setup-intro",children:[l.jsx("h2",{children:"Set Your Daily Targets"}),l.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),l.jsxs("div",{className:"nut-calc-form",children:[l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Gender"}),l.jsxs("div",{className:"nut-toggle-group",children:[l.jsx("button",{className:C.gender==="male"?"active":"",onClick:()=>{A(ge=>({...ge,gender:"male"})),L(null)},children:"Male"}),l.jsx("button",{className:C.gender==="female"?"active":"",onClick:()=>{A(ge=>({...ge,gender:"female"})),L(null)},children:"Female"})]})]}),l.jsxs("div",{className:"nut-form-row",children:[l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Age"}),l.jsx("input",{type:"number",value:C.age,onChange:ge=>{A(Te=>({...Te,age:ge.target.value})),L(null)},placeholder:"Years",min:"15",max:"100"})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Weight"}),l.jsxs("div",{className:"nut-input-unit",children:[l.jsx("input",{type:"number",value:C.weight,onChange:ge=>{A(Te=>({...Te,weight:ge.target.value})),L(null)},placeholder:C.weightUnit,min:"30",max:"300"}),l.jsxs("div",{className:"nut-unit-toggle",children:[l.jsx("button",{className:C.weightUnit==="kg"?"active":"",onClick:()=>{A(ge=>({...ge,weightUnit:"kg"})),L(null)},children:"kg"}),l.jsx("button",{className:C.weightUnit==="lbs"?"active":"",onClick:()=>{A(ge=>({...ge,weightUnit:"lbs"})),L(null)},children:"lbs"})]})]})]})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Height"}),l.jsxs("div",{className:"nut-input-unit",children:[C.heightUnit==="cm"?l.jsx("input",{type:"number",value:C.height,onChange:ge=>{A(Te=>({...Te,height:ge.target.value})),L(null)},placeholder:"cm",min:"100",max:"250"}):l.jsxs("div",{className:"nut-height-imperial",children:[l.jsx("input",{type:"number",value:C.heightFeet,onChange:ge=>{A(Te=>({...Te,heightFeet:ge.target.value})),L(null)},placeholder:"ft",min:"4",max:"7"}),l.jsx("input",{type:"number",value:C.heightInches,onChange:ge=>{A(Te=>({...Te,heightInches:ge.target.value})),L(null)},placeholder:"in",min:"0",max:"11"})]}),l.jsxs("div",{className:"nut-unit-toggle",children:[l.jsx("button",{className:C.heightUnit==="cm"?"active":"",onClick:()=>{A(ge=>({...ge,heightUnit:"cm"})),L(null)},children:"cm"}),l.jsx("button",{className:C.heightUnit==="ft"?"active":"",onClick:()=>{A(ge=>({...ge,heightUnit:"ft"})),L(null)},children:"ft/in"})]})]})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Activity Level"}),l.jsxs("select",{value:C.activityLevel,onChange:ge=>{A(Te=>({...Te,activityLevel:ge.target.value})),L(null)},children:[l.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),l.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),l.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),l.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"}),l.jsx("option",{value:"veryActive",children:"Extra Active (athlete/physical job)"})]})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Fitness Goal"}),l.jsxs("div",{className:"nut-goal-options",children:[l.jsxs("button",{className:C.goal==="lose"?"active":"",onClick:()=>{A(ge=>({...ge,goal:"lose"})),L(null)},children:[l.jsx("span",{className:"nut-goal-icon",children:"-"}),l.jsx("span",{children:"Lose Weight"})]}),l.jsxs("button",{className:C.goal==="maintain"?"active":"",onClick:()=>{A(ge=>({...ge,goal:"maintain"})),L(null)},children:[l.jsx("span",{className:"nut-goal-icon",children:"="}),l.jsx("span",{children:"Maintain"})]}),l.jsxs("button",{className:C.goal==="build"?"active":"",onClick:()=>{A(ge=>({...ge,goal:"build"})),L(null)},children:[l.jsx("span",{className:"nut-goal-icon",children:"+"}),l.jsx("span",{children:"Build Muscle"})]})]})]}),C.goal==="lose"&&l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Deficit Level"}),l.jsxs("div",{className:"nut-deficit-options",children:[l.jsxs("button",{className:C.deficitLevel==="light"?"active":"",onClick:()=>{A(ge=>({...ge,deficitLevel:"light"})),L(null)},children:[l.jsx("strong",{children:"Light"}),l.jsx("span",{children:"-250 cal/day"})]}),l.jsxs("button",{className:C.deficitLevel==="moderate"?"active":"",onClick:()=>{A(ge=>({...ge,deficitLevel:"moderate"})),L(null)},children:[l.jsx("strong",{children:"Moderate"}),l.jsx("span",{children:"-500 cal/day"})]}),l.jsxs("button",{className:C.deficitLevel==="harsh"?"active":"",onClick:()=>{A(ge=>({...ge,deficitLevel:"harsh"})),L(null)},children:[l.jsx("strong",{children:"Aggressive"}),l.jsx("span",{children:"-750 cal/day"})]})]})]}),l.jsx("button",{className:"nut-calc-btn",onClick:Tr,disabled:!Wr(),children:"Calculate Macros"})]}),B&&l.jsxs("div",{className:"nut-calc-results",children:[l.jsx("h3",{children:"Your Daily Targets"}),l.jsxs("div",{className:"nut-calc-rings",children:[Cn("Protein","Protein",B.protein,B.protein,"ring-protein"),Cn("Carbs","Carbs",B.carbs,B.carbs,"ring-carbs"),Cn("Fats","Fats",B.fats,B.fats,"ring-fats"),Cn("Calories","Calories",B.calories,B.calories,"ring-cals")]}),l.jsxs("div",{className:"nut-calc-info",children:[l.jsxs("div",{className:"nut-calc-info-row",children:[l.jsx("span",{children:"BMR"}),l.jsxs("span",{children:[B.bmr," cal"]})]}),l.jsxs("div",{className:"nut-calc-info-row",children:[l.jsx("span",{children:"TDEE"}),l.jsxs("span",{children:[B.tdee," cal"]})]})]}),l.jsx("button",{className:"nut-save-targets-btn",onClick:Ss,children:"Set as My Daily Targets"})]})]})]}):l.jsxs("div",{className:"nut-page","data-theme":a?"dark":"light",children:[l.jsxs("header",{className:"cb-header",children:[l.jsxs("div",{className:"cb-header-left",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),l.jsx("span",{className:"cb-header-title",children:"Nutrition"})]}),l.jsxs("div",{className:"cb-header-right",children:[l.jsx("button",{className:"nut-settings-btn",onClick:()=>{p("setup"),L(null)},"aria-label":"Recalculate macros",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),l.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:a?l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]}),l.jsxs("main",{className:"nut-main",children:[l.jsx("button",{className:"nut-back-btn",onClick:()=>u(-1),children:" Back"}),l.jsxs("div",{className:"nut-rings-grid",children:[Cn("Protein","Protein",ue.protein,x.protein,"ring-protein"),Cn("Carbs","Carbs",ue.carbs,x.carbs,"ring-carbs"),Cn("Fats","Fats",ue.fats,x.fats,"ring-fats"),Cn("Calories","Calories",ue.calories,x.calories,"ring-cals")]}),It&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"nut-meal-selector",children:N_.map(ge=>l.jsxs("button",{className:`nut-meal-pill${G===ge.key?" active":""}`,onClick:()=>ne(ge.key),children:[l.jsx("span",{className:"nut-meal-icon",children:ge.icon}),l.jsx("span",{children:ge.label})]},ge.key))}),l.jsxs("div",{className:"nut-add-buttons",children:[l.jsxs("button",{className:"nut-add-btn nut-add-scan",onClick:()=>{ee("scan"),rt(null)},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),l.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),l.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),l.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),l.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),l.jsx("span",{children:"Scan"})]}),l.jsxs("button",{className:"nut-add-btn nut-add-search",onClick:()=>{ee("search"),he([]),se("")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),l.jsx("span",{children:"Search"})]}),l.jsxs("button",{className:"nut-add-btn nut-add-manual",onClick:()=>{ee("manual"),Le({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),l.jsx("span",{children:"Manual"})]})]})]}),It&&l.jsxs("div",{className:"nut-water-section",children:[l.jsxs("div",{className:"nut-water-header",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),l.jsx("span",{children:"Water"}),l.jsxs("span",{className:"nut-water-count",children:[J.water," / ",x?.waterGoal||8," glasses"]})]}),l.jsx("div",{className:"nut-water-glasses",children:[...Array(x?.waterGoal||8)].map((ge,Te)=>l.jsx("div",{className:`nut-water-glass ${Te<J.water?"filled":""}`,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:Te<J.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},Te))}),l.jsxs("div",{className:"nut-water-btns",children:[l.jsx("button",{onClick:ln,disabled:J.water<=0,children:"-"}),l.jsx("button",{onClick:Fn,children:"+"})]})]}),l.jsxs("div",{className:"nut-date-nav",children:[l.jsx("button",{className:"nut-date-arrow",onClick:()=>xn(-1),"aria-label":"Previous day",children:l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"15 18 9 12 15 6"})})}),l.jsxs("button",{className:"nut-date-label",onClick:()=>{xe(!me),V({year:new Date(F+"T12:00:00").getFullYear(),month:new Date(F+"T12:00:00").getMonth()})},children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),l.jsx("span",{children:br(F)})]}),l.jsx("button",{className:"nut-date-arrow",onClick:()=>xn(1),disabled:F>=Ol(),"aria-label":"Next day",children:l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),me&&l.jsxs("div",{className:"nut-calendar",children:[l.jsxs("div",{className:"nut-cal-header",children:[l.jsx("button",{onClick:()=>V(ge=>{let Te=ge.month-1,Je=ge.year;return Te<0&&(Te=11,Je--),{year:Je,month:Te}}),children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"15 18 9 12 15 6"})})}),l.jsxs("span",{children:[Or[q.month]," ",q.year]}),l.jsx("button",{onClick:()=>V(ge=>{let Te=ge.month+1,Je=ge.year;return Te>11&&(Te=0,Je++),{year:Je,month:Te}}),disabled:q.year===new Date().getFullYear()&&q.month>=new Date().getMonth(),children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),l.jsx("div",{className:"nut-cal-days-header",children:Lt.map(ge=>l.jsx("span",{children:ge},ge))}),l.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Ot(q.year,q.month))].map((ge,Te)=>l.jsx("span",{},`e${Te}`)),[...Array(Mt(q.year,q.month))].map((ge,Te)=>{const Je=Te+1,tt=`${q.year}-${String(q.month+1).padStart(2,"0")}-${String(Je).padStart(2,"0")}`,yt=tt>Ol(),yn=tt===F,Kt=tt===Ol();return l.jsx("button",{className:`nut-cal-day${yn?" selected":""}${Kt?" today":""}${yt?" future":""}`,disabled:yt,onClick:()=>{H(tt),xe(!1)},children:Je},Je)})]})]}),l.jsx("div",{className:"nut-log-section",children:J.entries.length===0?l.jsx("div",{className:"nut-log-empty",children:l.jsx("p",{children:It?"No food logged yet today. Add your first meal above!":"No food logged on this day."})}):l.jsx("div",{className:"nut-meals-list",children:N_.map(ge=>{const Te=J.entries.filter(tt=>(tt.meal||"snacks")===ge.key);if(Te.length===0)return null;const Je=Te.reduce((tt,yt)=>({protein:tt.protein+(yt.protein||0),carbs:tt.carbs+(yt.carbs||0),fats:tt.fats+(yt.fats||0),calories:tt.calories+(yt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return l.jsxs("div",{className:"nut-meal-card",children:[l.jsxs("div",{className:"nut-meal-card-header",children:[l.jsx("span",{className:"nut-meal-card-icon",children:ge.icon}),l.jsx("span",{className:"nut-meal-card-title",children:ge.label}),l.jsxs("span",{className:"nut-meal-card-cal",children:[Je.calories," cal"]})]}),l.jsx("div",{className:"nut-log-list",children:Te.map(tt=>l.jsxs("div",{className:"nut-log-item",children:[l.jsxs("div",{className:"nut-log-item-info",children:[l.jsx("span",{className:"nut-log-item-name",children:tt.name}),tt.serving&&l.jsx("span",{className:"nut-log-item-serving",children:tt.serving})]}),l.jsxs("div",{className:"nut-log-item-macros",children:[l.jsxs("span",{className:"nut-macro-p",children:[tt.protein,"p"]}),l.jsxs("span",{className:"nut-macro-c",children:[tt.carbs,"c"]}),l.jsxs("span",{className:"nut-macro-f",children:[tt.fats,"f"]}),l.jsx("span",{className:"nut-macro-cal",children:tt.calories})]}),It&&l.jsx("button",{className:"nut-log-delete",onClick:()=>ui(tt.id),"aria-label":"Remove",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},tt.id))}),l.jsxs("div",{className:"nut-meal-card-totals",children:[l.jsxs("span",{className:"nut-macro-p",children:[Je.protein,"g P"]}),l.jsxs("span",{className:"nut-macro-c",children:[Je.carbs,"g C"]}),l.jsxs("span",{className:"nut-macro-f",children:[Je.fats,"g F"]})]})]},ge.key)})})})]}),W&&l.jsx("div",{className:"nut-modal-overlay",onClick:()=>{Mn(),te(null),ee(null),rt(null)},children:l.jsxs("div",{className:"nut-modal",onClick:ge=>ge.stopPropagation(),children:[l.jsxs("div",{className:"nut-modal-header",children:[l.jsx("h3",{children:W==="scan"?"Scan Barcode":W==="search"?"Search Food":"Manual Entry"}),l.jsx("button",{className:"nut-modal-close",onClick:()=>{Mn(),te(null),ee(null),rt(null)},children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),W==="scan"&&!ze&&l.jsxs("div",{className:"nut-scan-area",children:[l.jsxs("div",{className:"nut-scanner-wrapper",children:[l.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),O&&!He&&l.jsx("div",{className:"nut-scan-line"}),He&&l.jsxs("div",{className:"nut-scan-detected-overlay",children:[l.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M20 6L9 17l-5-5"})}),l.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),l.jsx("p",{className:"nut-scan-detected-code",children:He})]})]}),!O&&l.jsxs("button",{className:"nut-scan-start-btn",onClick:Yr,children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),l.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),l.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),l.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),l.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),O&&!He&&l.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),l.jsx("div",{className:"nut-barcode-divider",children:l.jsx("span",{children:"or enter barcode manually"})}),l.jsxs("div",{className:"nut-barcode-manual",children:[l.jsx("input",{type:"text",inputMode:"numeric",value:Se,onChange:ge=>Pe(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&Se.trim()&&Rn(Se.trim()),placeholder:"Enter barcode number"}),l.jsx("button",{onClick:()=>Se.trim()&&Rn(Se.trim()),disabled:!Se.trim()||De,children:De?"...":"Look Up"})]})]}),W==="scan"&&ze&&l.jsxs("div",{className:"nut-product-result",children:[ze.image&&l.jsx("img",{src:ze.image,alt:"",className:"nut-product-img"}),l.jsx("h4",{children:ze.name}),ze.brand&&l.jsx("p",{className:"nut-product-brand",children:ze.brand}),l.jsx("p",{className:"nut-product-per",children:"Per 100g:"}),l.jsxs("div",{className:"nut-product-macros",children:[l.jsxs("span",{className:"nut-macro-p",children:[ze.protein,"g P"]}),l.jsxs("span",{className:"nut-macro-c",children:[ze.carbs,"g C"]}),l.jsxs("span",{className:"nut-macro-f",children:[ze.fats,"g F"]}),l.jsxs("span",{className:"nut-macro-cal",children:[ze.calories," cal"]})]}),l.jsxs("div",{className:"nut-serving-adjust",children:[l.jsx("label",{children:"Serving (g)"}),l.jsx("input",{type:"number",value:Math.round(je*100),onChange:ge=>Ct(Math.max(0,parseFloat(ge.target.value)||0)/100),min:"1"})]}),l.jsx("div",{className:"nut-product-total",children:l.jsxs("span",{children:["Total: ",Math.round(ze.protein*je),"p / ",Math.round(ze.carbs*je),"c / ",Math.round(ze.fats*je),"f / ",Math.round(ze.calories*je)," cal"]})}),l.jsxs("div",{className:"nut-product-actions",children:[l.jsx("button",{className:"nut-btn-secondary",onClick:()=>{rt(null),ee("scan")},children:"Scan Again"}),l.jsx("button",{className:"nut-btn-primary",onClick:()=>_r({name:ze.name,protein:Math.round(ze.protein*je),carbs:Math.round(ze.carbs*je),fats:Math.round(ze.fats*je),calories:Math.round(ze.calories*je),serving:`${Math.round(je*100)}g`}),children:"Add"})]})]}),W==="search"&&!ze&&l.jsxs("div",{className:"nut-search-area",children:[l.jsxs("div",{className:"nut-search-bar",children:[l.jsx("input",{type:"text",value:M,onChange:ge=>se(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&on(),placeholder:"Search food or product...",autoFocus:!0}),l.jsx("button",{onClick:on,disabled:X,children:X?"...":"Search"})]}),l.jsxs("div",{className:"nut-search-results",children:[ie.map((ge,Te)=>l.jsxs("button",{className:"nut-search-item",onClick:()=>{rt(ge),Ct(1)},children:[ge.image&&l.jsx("img",{src:ge.image,alt:""}),l.jsxs("div",{className:"nut-search-item-info",children:[l.jsx("span",{className:"nut-search-item-name",children:ge.name}),ge.brand&&l.jsx("span",{className:"nut-search-item-brand",children:ge.brand}),l.jsxs("span",{className:"nut-search-item-macros",children:[ge.calories," cal  ",ge.protein,"p  ",ge.carbs,"c  ",ge.fats,"f per 100g"]})]})]},Te)),ie.length===0&&M&&!X&&l.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),W==="search"&&ze&&l.jsxs("div",{className:"nut-product-result",children:[ze.image&&l.jsx("img",{src:ze.image,alt:"",className:"nut-product-img"}),l.jsx("h4",{children:ze.name}),ze.brand&&l.jsx("p",{className:"nut-product-brand",children:ze.brand}),l.jsx("p",{className:"nut-product-per",children:"Per 100g:"}),l.jsxs("div",{className:"nut-product-macros",children:[l.jsxs("span",{className:"nut-macro-p",children:[ze.protein,"g P"]}),l.jsxs("span",{className:"nut-macro-c",children:[ze.carbs,"g C"]}),l.jsxs("span",{className:"nut-macro-f",children:[ze.fats,"g F"]}),l.jsxs("span",{className:"nut-macro-cal",children:[ze.calories," cal"]})]}),l.jsxs("div",{className:"nut-serving-adjust",children:[l.jsx("label",{children:"Serving (g)"}),l.jsx("input",{type:"number",value:Math.round(je*100),onChange:ge=>Ct(Math.max(0,parseFloat(ge.target.value)||0)/100),min:"1"})]}),l.jsx("div",{className:"nut-product-total",children:l.jsxs("span",{children:["Total: ",Math.round(ze.protein*je),"p / ",Math.round(ze.carbs*je),"c / ",Math.round(ze.fats*je),"f / ",Math.round(ze.calories*je)," cal"]})}),l.jsxs("div",{className:"nut-product-actions",children:[l.jsx("button",{className:"nut-btn-secondary",onClick:()=>rt(null),children:"Back to Search"}),l.jsx("button",{className:"nut-btn-primary",onClick:()=>_r({name:ze.name,protein:Math.round(ze.protein*je),carbs:Math.round(ze.carbs*je),fats:Math.round(ze.fats*je),calories:Math.round(ze.calories*je),serving:`${Math.round(je*100)}g`}),children:"Add"})]})]}),W==="manual"&&l.jsxs("div",{className:"nut-manual-form",children:[l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Food Name"}),l.jsx("input",{type:"text",value:ye.name,onChange:ge=>Le(Te=>({...Te,name:ge.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Serving Size (optional)"}),l.jsx("input",{type:"text",value:ye.serving,onChange:ge=>Le(Te=>({...Te,serving:ge.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),l.jsxs("div",{className:"nut-manual-macros",children:[l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Protein (g)"}),l.jsx("input",{type:"number",value:ye.protein,onChange:ge=>Le(Te=>({...Te,protein:ge.target.value})),min:"0"})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Carbs (g)"}),l.jsx("input",{type:"number",value:ye.carbs,onChange:ge=>Le(Te=>({...Te,carbs:ge.target.value})),min:"0"})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Fats (g)"}),l.jsx("input",{type:"number",value:ye.fats,onChange:ge=>Le(Te=>({...Te,fats:ge.target.value})),min:"0"})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Calories"}),l.jsx("input",{type:"number",value:ye.calories,onChange:ge=>Le(Te=>({...Te,calories:ge.target.value})),min:"0"})]})]}),l.jsx("button",{className:"nut-btn-primary",disabled:!ye.name.trim(),onClick:()=>_r({name:ye.name,protein:parseFloat(ye.protein)||0,carbs:parseFloat(ye.carbs)||0,fats:parseFloat(ye.fats)||0,calories:parseFloat(ye.calories)||0,serving:ye.serving||""}),children:"Add Food"})]})]})}),rn&&l.jsx("div",{className:`toast-notification ${rn.type}`,children:rn.message})]})}function q4(){const{pathname:s}=Ka();return z.useEffect(()=>{window.scrollTo(0,0)},[s]),null}function H4(){const s=Mr();return z.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function $4(){return l.jsx(ZD,{children:l.jsx(JD,{children:l.jsxs(xT,{basename:"/login",children:[l.jsx(q4,{}),l.jsx(H4,{}),l.jsxs(XE,{children:[l.jsx(qr,{path:"/",element:l.jsx(e4,{})}),l.jsx(qr,{path:"/dashboard",element:l.jsx(g4,{})}),l.jsx(qr,{path:"/add-client",element:l.jsx(y4,{})}),l.jsx(qr,{path:"/client",element:l.jsx(E4,{})}),l.jsx(qr,{path:"/client/forms",element:l.jsx(T4,{})}),l.jsx(qr,{path:"/client/tools",element:l.jsx(C4,{})}),l.jsx(qr,{path:"/client/tools/macros",element:l.jsx(N4,{})}),l.jsx(qr,{path:"/client/tools/snacks",element:l.jsx(A4,{})}),l.jsx(qr,{path:"/client/tools/motivation",element:l.jsx(j4,{})}),l.jsx(qr,{path:"/client/personal-bests",element:l.jsx(D4,{})}),l.jsx(qr,{path:"/client/circuit",element:l.jsx(M4,{})}),l.jsx(qr,{path:"/client/circuit/booking",element:l.jsx(P4,{})}),l.jsx(qr,{path:"/client/core-buddy",element:l.jsx(V4,{})}),l.jsx(qr,{path:"/client/core-buddy/nutrition",element:l.jsx(F4,{})}),l.jsx(qr,{path:"*",element:l.jsx(QE,{to:"/",replace:!0})})]})]})})})}ZS.createRoot(document.getElementById("root")).render(l.jsx(z.StrictMode,{children:l.jsx($4,{})}));
