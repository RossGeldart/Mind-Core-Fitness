import{k as E,l as V,m as O,r,j as e,i as M,e as y,d as D}from"./index-BkxLAFMC.js";import{C as z}from"./CoreBuddyNav-Bmg-PxPn.js";import{c as F}from"./ringTicks-_1Alaa2O.js";const G={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},W={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},v=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function _(t){return G[t]||"push"}function U(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}T`:`${Math.round(t)}`}function $(t){return t>=1e6?"million kg":t>=1e3?"tonnes":"kg"}function I(){const{currentUser:t,isClient:b,clientData:i,loading:d}=E(),{isDark:m,toggleTheme:B,accent:j}=V(),u=O(),[k,L]=r.useState(!0),[N,S]=r.useState(null),[T,C]=r.useState({});r.useEffect(()=>{!d&&(!t||!b)&&u("/")},[t,b,d,u]),r.useEffect(()=>{if(!i)return;(async()=>{try{const[l,a]=await Promise.all([M(y(D,"coreBuddyAchievements",i.id)),M(y(D,"coreBuddyPBs",i.id))]);l.exists()&&S(l.data()),a.exists()&&C(a.data().exercises||{})}catch(l){console.error("Error loading achievements:",l)}L(!1)})()},[i]);const x=N?.badges||[],n=N?.totalVolume||0,f=x.filter(s=>s.type==="pb_target"),R=x.filter(s=>s.type==="volume_milestone"),g={push:[],pull:[],lower:[],core:[]};f.forEach(s=>{const l=s.group||_(s.exercise);g[l]&&g[l].push(s)});const o=v.find(s=>n<s.threshold),w=v.filter(s=>n>=s.threshold).pop()?.threshold||0,A=o?(n-w)/(o.threshold-w):1;if(d||k)return e.jsxs("div",{className:"ach-page","data-theme":m?"dark":"light","data-accent":j,children:[e.jsx("header",{className:"client-header",children:e.jsx("div",{className:"header-content",children:e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),e.jsx("div",{className:"ach-loading-inline",children:e.jsx("div",{className:"cb-loading-spinner"})})]});const p=x.length,P=p>0||n>0;return e.jsxs("div",{className:"ach-page","data-theme":m?"dark":"light","data-accent":j,children:[e.jsx("header",{className:"client-header",children:e.jsxs("div",{className:"header-content",children:[e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{onClick:B,"aria-label":"Toggle theme",children:m?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),e.jsxs("main",{className:"ach-main",children:[e.jsx("button",{className:"nut-back-btn",onClick:()=>u("/client/core-buddy"),children:"â† Back"}),e.jsxs("div",{className:"ach-stats-banner",children:[e.jsxs("div",{className:"ach-stat-item",children:[e.jsx("span",{className:"ach-stat-num",children:p}),e.jsx("span",{className:"ach-stat-label",children:p===1?"Badge":"Badges"})]}),e.jsx("div",{className:"ach-stat-divider"}),e.jsxs("div",{className:"ach-stat-item",children:[e.jsx("span",{className:"ach-stat-num",children:U(n)}),e.jsxs("span",{className:"ach-stat-label",children:[$(n)," lifted"]})]}),e.jsx("div",{className:"ach-stat-divider"}),e.jsxs("div",{className:"ach-stat-item",children:[e.jsx("span",{className:"ach-stat-num",children:Object.keys(T).length}),e.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!P&&e.jsxs("div",{className:"ach-empty",children:[e.jsx("div",{className:"ach-empty-icon",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),e.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),e.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),e.jsx("h4",{children:"No achievements yet"}),e.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),e.jsxs("div",{className:"ach-section",children:[e.jsxs("h3",{className:"ach-section-title",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:e.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),e.jsxs("div",{className:"ach-volume-hero",children:[e.jsxs("div",{className:"ach-volume-ring",children:[e.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:F.map((s,l)=>{const a=l<Math.round(A*60);return e.jsx("line",{x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,className:a?"ach-tick-filled":"ach-tick-empty",strokeWidth:s.thick?"3":"2"},l)})}),e.jsxs("div",{className:"ach-volume-center",children:[e.jsx("span",{className:"ach-volume-number",children:Math.round(n).toLocaleString()}),e.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),o&&e.jsxs("div",{className:"ach-volume-next",children:["Next: ",e.jsx("strong",{children:o.label})," (",(o.threshold-n).toLocaleString(),"kg to go)"]})]}),e.jsx("div",{className:"ach-milestone-shelf",children:v.map((s,l)=>{const a=n>=s.threshold,c=R.find(h=>h.milestone===s.threshold);return e.jsxs("div",{className:`ach-milestone ${a?"unlocked":"locked"}`,children:[e.jsx("div",{className:"ach-milestone-hex",children:e.jsx("span",{className:"ach-milestone-icon",children:s.icon})}),e.jsx("span",{className:"ach-milestone-label",children:s.label}),c?.achievedAt&&e.jsx("span",{className:"ach-milestone-date",children:(c.achievedAt.toDate?c.achievedAt.toDate():new Date(c.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},l)})})]}),e.jsxs("div",{className:"ach-section",children:[e.jsxs("h3",{className:"ach-section-title",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),f.length===0?e.jsx("div",{className:"ach-pb-empty",children:e.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",e.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(g).map(([s,l])=>{if(l.length===0)return null;const a=W[s];return e.jsxs("div",{className:"ach-group",children:[e.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:a.color},children:[e.jsx("span",{className:"ach-group-label",style:{color:a.color},children:a.label}),e.jsx("span",{className:"ach-group-count",children:l.length})]}),e.jsx("div",{className:"ach-badge-grid",children:l.map((c,h)=>e.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${h*.06}s`,"--group-color":a.color},children:[e.jsx("div",{className:"ach-badge-hex",style:{borderColor:a.color,boxShadow:`0 0 12px ${a.color}33`},children:e.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:a.color,strokeWidth:"2",strokeLinecap:"round",children:e.jsx("path",{d:a.icon})})}),e.jsxs("div",{className:"ach-badge-info",children:[e.jsx("span",{className:"ach-badge-exercise",children:c.exercise}),e.jsxs("span",{className:"ach-badge-value",style:{color:a.color},children:[c.targetWeight,"kg"]}),c.achievedAt&&e.jsx("span",{className:"ach-badge-date",children:(c.achievedAt.toDate?c.achievedAt.toDate():new Date(c.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},h))})]},s)})]})]}),e.jsx(z,{active:"home"})]})}export{G as EXERCISE_GROUPS,W as GROUP_META,v as VOLUME_MILESTONES,I as default};
